<html>
<head>
<title>JavaScript Solution to Number of Recent Calls</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最近通话次数的JavaScript解决方案</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-solution-to-number-of-recent-calls-f979835173e3?source=collection_archive---------6-----------------------#2020-09-25">https://javascript.plainenglish.io/javascript-solution-to-number-of-recent-calls-f979835173e3?source=collection_archive---------6-----------------------#2020-09-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6174aeedf9e7706c88c69b31ebffa41c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EeDD6vXnrCAnNzP4"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@levidjones?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Levi Jones</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2d7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://leetcode.com/problems/number-of-recent-calls/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">最近通话次数</strong> </a>是leetcode的一个问题，把我们绊倒了。(你可以看到它有多少反对票。🧐)在下面的博客中，我将试着一行一行地解释这个问题和例子，让它更容易理解。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="c792" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lf">问题解释</em> </strong></p><p id="1fe5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">写一个<strong class="kc io">类</strong> <code class="fe lg lh li lj b">RecentCounter</code>来统计最近的请求。</p><p id="9354" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf">上面的重点是类，我们需要实现一个类，而不是一个函数。</em></p><p id="56dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它只有一个方法:<code class="fe lg lh li lj b">ping(int t)</code>，其中<strong class="kc io"> <em class="lf"> t </em> </strong>以毫秒为单位表示某个时间。</p><p id="4a33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf">类实例需要有</em><strong class="kc io"><em class="lf">ping</em></strong><em class="lf">方法，这是一个以</em><strong class="kc io"><em class="lf">t</em></strong><em class="lf"/><code class="fe lg lh li lj b"><em class="lf">1 &lt;= t &lt;= 10^9</em></code><em class="lf">范围内的整数作为参数的函数。</em></p><p id="df9a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">返回从3000毫秒前到现在已经完成的<code class="fe lg lh li lj b">ping</code>的数量。</p><p id="a25e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf"/><strong class="kc io"><em class="lf">ping</em></strong><em class="lf">方法返回值是整数。</em></p><p id="abd8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">任何时间在<code class="fe lg lh li lj b">[t - 3000, t]</code>的ping都将被计算在内，包括当前的ping。</p><p id="5911" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf">任何被调用过的</em> <strong class="kc io"> <em class="lf">以前的t </em> </strong> <em class="lf">，在[ </em> <strong class="kc io"> <em class="lf">当前t </em> </strong> <em class="lf"> -3000，</em> <strong class="kc io"> <em class="lf">当前t </em> </strong> <em class="lf"> ]范围内的，都会被统计。</em></p><p id="a2ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">保证对<code class="fe lg lh li lj b">ping</code>的每次调用都使用比以前严格更大的<code class="fe lg lh li lj b">t</code>值。</p><p id="65e2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lf">每调用一次</em><strong class="kc io"><em class="lf">ping</em></strong><em class="lf">，自变量</em><strong class="kc io"><em class="lf"/></strong><em class="lf">增加，就形成一个升序的整数列表。</em></p><p id="82f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">例1: </strong></p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="66f2" class="ls lt in lj b gy lu lv l lw lx"><strong class="lj io">Input: </strong>inputs = ["RecentCounter","ping","ping","ping","ping"], <br/>/*<br/>first, we create a new RecentCounter object<br/>obj = new RecentCounter()<br/>then, we call <strong class="lj io">ping</strong> four times with four different <strong class="lj io">t <br/></strong>*/</span><span id="6793" class="ls lt in lj b gy ly lv l lw lx">inputs = [[],[1],[100],[3001],[3002]]<br/><strong class="lj io">/*</strong><br/>obj.ping(1) <br/>obj.ping(100)<br/>obj.ping(3001)<br/>obj.ping(3002)<br/>*/</span><span id="4496" class="ls lt in lj b gy ly lv l lw lx"><strong class="lj io">Output: </strong>[null,1,2,3,3]</span><span id="c1d3" class="ls lt in lj b gy ly lv l lw lx">/*<br/>object initialized, ping is not called, no return value, <strong class="lj io">null<br/></strong>obj.ping(1) should return 1<br/>obj.ping(100) should return 2<br/>obj.ping(3001) should return 3<br/>obj.ping(3002) should return 3<br/>*/</span></pre><p id="e194" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注:</strong></p><ol class=""><li id="4e93" class="lz ma in kc b kd ke kh ki kl mb kp mc kt md kx me mf mg mh bi translated">每个测试用例最多会有对<code class="fe lg lh li lj b">ping</code>的<code class="fe lg lh li lj b">10000</code>调用。</li><li id="8fda" class="lz ma in kc b kd mi kh mj kl mk kp ml kt mm kx me mf mg mh bi translated">每个测试用例将调用<code class="fe lg lh li lj b">ping</code>，并严格增加<code class="fe lg lh li lj b">t</code>的值。</li><li id="28f5" class="lz ma in kc b kd mi kh mj kl mk kp ml kt mm kx me mf mg mh bi translated">对ping的每个调用都有<code class="fe lg lh li lj b">1 &lt;= t &lt;= 10^9</code>。</li></ol></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="e0d9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lf">解答说明</em> </strong></p><p id="24fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从最简单的开始，用一个<strong class="kc io"> <em class="lf"> ping </em> </strong>的方法创建一个类。</p><figure class="lk ll lm ln gt jo"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><a class="ae jz" href="https://gist.github.com/GAierken/5c96cfe365b63a24f560714b0d5f8f66" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/GAierken/5c96cfe365b63a24f560714b0d5f8f66</a></figcaption></figure><p id="cf64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们有了框架。根据问题和例子，我们需要一个变量来存储<strong class="kc io"> t，</strong>因为它会出现多次，当我们初始化对象时，最好有一个数据类型，比如数组。</p><figure class="lk ll lm ln gt jo"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><a class="ae jz" href="https://gist.github.com/GAierken/2813b3f4dcb81797e625bc8160310bd0" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/GAierken/2813b3f4dcb81797e625bc8160310bd0</a></figcaption></figure><p id="9cac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们如何使用这个数组？我们只需要存储3000毫秒前到现在发生的<strong class="kc io"> t </strong>，这意味着先前存储的<strong class="kc io"> t </strong>应该大于或等于(当前<strong class="kc io"> t </strong> -3000)。由于每个测试用例将调用<code class="fe lg lh li lj b">ping</code>并严格增加<strong class="kc io"> t </strong>的值，数组中存储的元素按升序排列。我们将新的<strong class="kc io"> t </strong>添加到末尾，并在t-3000的时间帧内保持数组的前端，当不满足时，我们移除前端元素。听起来熟悉吗？先进先出？是的，是排队。在我们过滤掉不在范围内的元素之后，我们返回队列的大小。</p><pre class="lk ll lm ln gt lo lj lp lq aw lr bi"><span id="8e82" class="ls lt in lj b gy lu lv l lw lx">ping(1)<br/>queue = [ 1 ] // 1</span><span id="4b9f" class="ls lt in lj b gy ly lv l lw lx">ping(100)<br/>queue = [ 1, 100 ]  // 2</span><span id="b5de" class="ls lt in lj b gy ly lv l lw lx">ping(3001)<br/>queue = [ 1, 100, 3001 ] // 3</span><span id="64b7" class="ls lt in lj b gy ly lv l lw lx">ping(3002)<br/>queue = [ 100, 3001, 3002 ] // 3</span></pre><p id="afdc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们实现代码。</p><figure class="lk ll lm ln gt jo"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><a class="ae jz" href="https://gist.github.com/GAierken/98b1ea82235da9f00dfea13345b95aa5" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/GAierken/98b1ea82235da9f00dfea13345b95aa5</a></figcaption></figure><p id="e528" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ping方法的时间复杂度为<strong class="kc io"> O(n) </strong>。</p><p id="6d88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望能对类似问题的解决有所帮助。</p><p id="8721" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lf">资源:</em> </strong></p><div class="mp mq gp gr mr ms"><a href="https://leetcode.com/problems/number-of-recent-calls/" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">最近通话次数- LeetCode</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">写一个类RecentCounter来计算最近的请求。它只有一个方法:ping(int t)，其中t代表某个时间…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">leetcode.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng jt ms"/></div></div></a></div><div class="mp mq gp gr mr ms"><a href="https://www.geeksforgeeks.org/queue-set-1introduction-and-array-implementation/" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">Queue | Set 1(简介和数组实现)- GeeksforGeeks</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">像堆栈一样，队列也是一个线性结构，它遵循特定的操作执行顺序。的…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">www.geeksforgeeks.org</p></div></div><div class="nb l"><div class="nh l nd ne nf nb ng jt ms"/></div></div></a></div><div class="mp mq gp gr mr ms"><a href="https://medium.com/datadriveninvestor/queue-in-javascript-e77ab51f6de0" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">JavaScript中的队列</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">JavaScript中队列的实现</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">medium.com</p></div></div><div class="nb l"><div class="ni l nd ne nf nb ng jt ms"/></div></div></a></div></div></div>    
</body>
</html>
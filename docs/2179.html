<html>
<head>
<title>JavaScript Error Handling: The Exception</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript错误处理:异常</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-error-handling-the-exception-5068b96c123?source=collection_archive---------4-----------------------#2020-05-27">https://javascript.plainenglish.io/javascript-error-handling-the-exception-5068b96c123?source=collection_archive---------4-----------------------#2020-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e837e34bc6e750cac3ddbc1d2d11cf7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9ooM24MLtAFpE9cd6YV2w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@trapnation?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andre Benz</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="cd08" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">放弃</h1><p id="6944" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这是一篇讲述故事的文章，只有很少的代码示例。我的目标是用简单的形式解释不同的概念，以便人们理解为什么需要它们，为什么这些概念很重要。</p><p id="a30d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我在所有文章中获得的知识几乎适用于任何编程语言。</p><blockquote class="me"><p id="d81c" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">专注于理解想法和概念，而不是特定的语言——这是你获得洞察力的途径</p></blockquote></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="2e3a" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">生活故事</h1><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/37ccb17bd9031a504e10371a725bd70f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eMxPlSFgdCdmgytR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben White</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="458b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">许多年前，我加入了新的工程师团队。当时我想——“<em class="nf">我是高级软件工程师</em>”，尽管这不是我的头衔。我当时很年轻，很自信。我想我知道很多事情，如果有什么事情，我不知道我可以很快找到答案，这将是唯一正确的答案。</p><p id="8c68" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">你可以假设我也很固执己见。你是对的，每一次同行评议，对我来说都是一场斗争。我完全相信我知道如何正确地做事。</p><h2 id="af46" class="ng ke iq bd kf nh ni dn kj nj nk dp kn lm nl nm kr lq nn no kv lu np nq kz nr bi translated">情况</h2><p id="d751" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">有一天，我在那个API客户端上为用户评论工作。它应该访问经典的REST API端点。客户端必须非常简单，只支持两种请求类型来创建和阅读评论——POST &amp; GET。</p><p id="511b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当时，我对错误处理方面的良好实践知之甚少。虽然我知道异常，但是我从来没有使用过它们——它们对我来说是多余的。</p><blockquote class="me"><p id="7d81" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">我完全相信我所需要的是一份<strong class="ak"/><code class="fe ns nt nu nv b">if”</code>声明！</p></blockquote><p id="14db" class="pw-post-body-paragraph lb lc iq ld b le nw lg lh li nx lk ll lm ny lo lp lq nz ls lt lu oa lw lx ly ij bi translated">因此，我满怀信心地开始设计和实现我的解决方案。正如您所想象的，我已经尝试用<code class="fe ns nt nu nv b">IF</code>语句的变体来解决所有潜在的问题。我正在检查从API返回的状态代码，并将它们映射到我的函数/方法的奇数返回。</p><p id="901d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我甚至都懒得去想如果事情变得疯狂。比如，如果API关闭，或者连接令牌过期，或者数据结构改变等等。</p><h2 id="6fb9" class="ng ke iq bd kf nh ni dn kj nj nk dp kn lm nl nm kr lq nn no kv lu np nq kz nr bi translated">学习</h2><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/f1179e7f6812352b396ef89ac3c7ae51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s5v6xOlzh8jXdKpZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hermez777?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hermes Rivera</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="59f8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">像每一个有自尊的公司一样，我们是“敏捷的”并且在做“TDD”。嗯，我们以为我们是。在我完成代码实现后，我努力对它进行单元测试。我有太多的<code class="fe ns nt nu nv b">IF</code>语句和我的函数返回的不同状态，为其编写测试真的很难。🔥</p><blockquote class="me"><p id="284b" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">如果由于代码的复杂性，你正在努力测试你的代码，这是一个代码气味的警钟</p></blockquote><blockquote class="oc od oe"><p id="a58f" class="lb lc nf ld b le nw lg lh li nx lk ll of ny lo lp og nz ls lt oh oa lw lx ly ij bi translated">公关又名同行评议时间。</p></blockquote><p id="aed0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">很高兴看到人们会喜欢我的解决方案，我已经提交了拉动请求。它开始了。很快人们用评论轰炸我。</p><p id="f7d3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">-" <em class="nf">如果这样会怎么样？如果那样会发生什么？</em>”</p><p id="3afe" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">-" <em class="nf">如果出现问题，我们应该如何知道API客户端之外的情况？</em>”</p><p id="46a7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">-" <em class="nf">当我们需要用更多的方法和请求类型来扩展这个API客户端时，会发生什么？我们需要到处重复你的IF语句吗？</em></p><p id="869c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">-" <strong class="ld ir"> <em class="nf">您应该认真研究错误处理实践，尤其是异常！</em> </strong></p><p id="7852" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我不会撒谎，那很艰难。但那是我软件工程师生涯的转折点。我意识到——“<em class="nf">我不是规则的例外，我必须了解例外！</em>”。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="c755" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">何必呢？</h1><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/494027f4a0a0bdefde5811bcf8aa9b40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u3bBsDW-TspJLMQc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@breakfast_on_jupiter?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Aleksandr Ledogorov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e6a1" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这听起来可能有点俗气，但如果您想编写出色的代码，您必须了解并使用关于错误处理和异常的良好(如果不是最佳)实践。</p><blockquote class="me"><p id="dc44" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">出色的代码可扩展、易于维护、安全、健壮且操作直观。破坏用户体验几乎不会出错。</p></blockquote><p id="abdb" class="pw-post-body-paragraph lb lc iq ld b le nw lg lh li nx lk ll lm ny lo lp lq nz ls lt lu oa lw lx ly ij bi translated">这是通过向项目代码库添加良好的错误处理可以实现的。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="5bff" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">错误处理—这意味着什么</h1><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/1c01fb9298ffdb7b913a6eeea6ee6923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ex-agXW2Tcy8b1Ou"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@federicagiusti?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Federica Giusti</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fc59" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi ok translated"><span class="l ol om on bm oo op oq or os di"> E </span>每个程序都会有错误。即使你已经建立了一个优秀的应用程序，有干净和健壮的实现。如果你已经修复了世界上所有的错误，你的应用程序仍然会有错误。</p><p id="fc7e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">原因是——你不能控制你的应用程序的所有方面。如果你正在开发一个大型的应用程序，你将会与数据库、API、第三方库进行交互，并且很有可能你将会在一个至少有几个工程师的团队中工作。所有这些方面都是你无法控制的，它们会导致你的应用程序出错。</p><blockquote class="oc od oe"><p id="2450" class="lb lc nf ld b le lz lg lh li ma lk ll of mb lo lp og mc ls lt oh md lw lx ly ij bi translated">这个错误不是一个Bug</p></blockquote><p id="ecf7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">区分这两个东西很重要。Bug是一种你无法预测的意外行为或异常现象。通常，这只是您在代码中遗漏了一些东西。</p><blockquote class="oc od oe"><p id="f78f" class="lb lc nf ld b le lz lg lh li ma lk ll of mb lo lp og mc ls lt oh md lw lx ly ij bi translated">Bug是代码中不可预测的异常现象</p></blockquote><p id="be52" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">另一方面，在大多数情况下，错误是可以预测的。这是你可以引导到正确方向的事情。这就是错误和错误处理的一般定义。</p><blockquote class="me"><p id="bcc9" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">错误是一种可预测的行为，错误处理就是你把它引向正确的方向</p></blockquote><p id="c3e0" class="pw-post-body-paragraph lb lc iq ld b le nw lg lh li nx lk ll lm ny lo lp lq nz ls lt lu oa lw lx ly ij bi translated">理解这一点非常重要——您也可以在自己的代码中使用错误或异常来控制代码的行为。它不仅用于对第三方或间接工具(如DB或API)做出反应。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="991a" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">告诉我—如何处理错误</h1><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ot"><img src="../Images/2e5662928b436afe514dd22a836ccdba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JylFP_lu4DBLv7El"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@viktorkern?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Viktor Kern</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3f93" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi ok translated">让我们来看几个例子，看看你如何在实践中做到这一点。正如我在本文开头提到的，我的目标是让您了解为什么这很重要。因此，我给你的代码很简单。</p><p id="798d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">像许多其他编程语言一样，JavaScript内置了通用错误对象。在其他语言中它被称为异常。</p><p id="e106" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">JS错误对象的示例:</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/36649001a7304f6085792898d0b5e523.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*4l0dBzWSg3ARlJFf8fRuAA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="8517" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">您可以将自定义错误消息传递给引发的异常，如下所示:</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ov"><img src="../Images/c4128e9571ca40f3468dfa0295cbbed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wM4qiqfIMMP6elEBpf5xsA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="6c4c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当你的代码出错时，在与API、DB或第三方交互时，JavaScript会抛出类似的异常或错误。或者你可以自己扔。</p><blockquote class="oc od oe"><p id="d886" class="lb lc nf ld b le lz lg lh li ma lk ll of mb lo lp og mc ls lt oh md lw lx ly ij bi translated">如果您不处理这些错误，它们将终止您的代码执行，并且您的应用程序将无法正常运行—破坏用户体验。</p></blockquote><p id="b79c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">要处理错误，您需要使用<code class="fe ns nt nu nv b">try/catch</code>块。它很容易理解和使用。您有<code class="fe ns nt nu nv b">try</code>块，它将在您预计会出现错误的地方包装代码，还有<code class="fe ns nt nu nv b">catch</code>块，您将在那里决定如何处理错误。</p><p id="fdbf" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">例如，您可以将它发送到日志服务。您可以通知用户漂亮的UI消息出现了问题。您可以将用户重定向到适当的位置以获得更好的体验等。</p><p id="7a12" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><code class="fe ns nt nu nv b">try/catch</code>块示例:</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ow"><img src="../Images/67880eea8ea3988ab81dde32ff165fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Yt9uQEji-EdgI_GVMH96Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="969c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在这里，我们需要涵盖几件事。首先，这是一个非常简单的例子，我们在这个块中使用的函数可以抛出错误，也就是异常——不一定要在<code class="fe ns nt nu nv b">try</code>块中直接抛出。</p><p id="efd3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">其次，在<code class="fe ns nt nu nv b">Line: 4</code>你会看到— <code class="fe ns nt nu nv b">catch</code>接受一个参数。它是必需的参数，你可以给它取任何名字。如果抛出了Error，这个参数将自动接受错误的对象，您可以随意操作它。</p><blockquote class="me"><p id="99e2" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">“try”块在您预计会出错的地方包装代码，“catch”块是您处理错误的地方</p></blockquote></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="77ca" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">专业提示</h1><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/80d2116faa6119010c003112af5ecba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-PFWEK9JqErZFBfC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@emilep?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Emile Perron</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="57b8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在你开始处理错误之前，我给你一个提示，它将永远改变你写代码的方式——“<em class="nf">使用定制异常！</em></p><h2 id="a159" class="ng ke iq bd kf nh ni dn kj nj nk dp kn lm nl nm kr lq nn no kv lu np nq kz nr bi translated">自定义异常</h2><p id="a314" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们已经介绍了通用的<code class="fe ns nt nu nv b">Error()</code>对象。这一切都很棒，您可以捕捉异常并猜测它们的含义，还可以记录错误消息。</p><p id="775c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">但是你怎么能做出漂亮干净的切口呢？如何确保特定的异常是特定类型的实例？假设您想知道到底发生了什么，但是一个实现可以抛出多个不同的异常。</p><p id="4f15" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果所有这些异常都是通用的，那么区分它们的唯一方法就是它们的消息。这不是最干净有效的方式。为了帮助我们解决这个难题，定制异常<strong class="ld ir">出现了。</strong></p><p id="587b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这就是如何在JavaScript中创建自定义异常。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oy"><img src="../Images/3698c389dc679259f22c22d434c5f6dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lxbngCm5Aem6F4TUYE3MJQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="23b4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">你不会相信我，但就是这么简单。也有创建它的函数方式。在我看来，函数式方法看起来有点脏，但我还是会展示给你看。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/c4d4c2d2411b30ed66b769f311324e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yaAacAlnzOnxF5GLCAKvDA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="6e4a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如你所见，差异是巨大的。我建议每次都使用<code class="fe ns nt nu nv b">class</code>方法。无论如何，每个自定义异常都必须写在一个单独的文件中，所以它不会影响您的函数范式。</p><p id="7eb9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">让我们看看使用自定义异常有什么好处。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/04ee323ac61f8ba526269603c124ff4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYftLG_KTSnyKEuITFqF3A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Code Sample by Arthur Frank</figcaption></figure><p id="3267" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我意识到，这很难接受。让我解释一下。使用自定义异常，您可以为错误创建类型，并在捕获错误时检查这些类型。当您捕捉到一个错误时，通过一个简单的<code class="fe ns nt nu nv b">if</code>语句，您可以检查该错误是否是特定类型的实例。如果是，您可以针对特定的错误执行特定的操作。</p><p id="d392" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在一个<code class="fe ns nt nu nv b">catch</code>中，你可以根据需要处理许多不同的类型。请记住，这只是一个特定的错误。</p><blockquote class="me"><p id="cb0e" class="mf mg iq bd mh mi mj mk ml mm mn ly dk translated">自定义异常是一种可以在“捕获”步骤检查并为其执行特定逻辑的类型</p></blockquote><p id="23df" class="pw-post-body-paragraph lb lc iq ld b le nw lg lh li nx lk ll lm ny lo lp lq nz ls lt lu oa lw lx ly ij bi translated">你也可以定制你自己的异常，并用默认消息文本、更好的错误跟踪等来扩展它们的能力。但这是以后的事了。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="9cd2" class="kd ke iq bd kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la bi translated">包扎</h1><p id="1ead" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">感谢您抽出时间阅读这篇文章。我真的希望，你已经获得了一些好的见解，并成为更好的工程师。</p><p id="ade6" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">玩得开心，做你喜欢的事情，下一篇文章再见。🔥</p><h1 id="bbba" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">想知道接下来读什么？</h1><ul class=""><li id="dcb2" class="pb pc iq ld b le lf li lj lm pd lq pe lu pf ly pg ph pi pj bi translated"><a class="ae kc" href="https://medium.com/javascript-in-plain-english/javascript-design-patterns-the-decorator-pattern-eaf6adc77cb7" rel="noopener"> <strong class="ld ir">装修工</strong>在JS </a></li><li id="a33c" class="pb pc iq ld b le pk li pl lm pm lq pn lu po ly pg ph pi pj bi translated"><a class="ae kc" href="https://medium.com/javascript-in-plain-english/javascript-design-patterns-the-factory-pattern-6b399656d710" rel="noopener"> <strong class="ld ir">工厂</strong>在JS </a></li><li id="2141" class="pb pc iq ld b le pk li pl lm pm lq pn lu po ly pg ph pi pj bi translated"><a class="ae kc" href="https://medium.com/javascript-in-plain-english/javascript-design-patterns-adapter-explained-cbcffbb4b8bc" rel="noopener"><strong class="ld ir">JS</strong></a>中的适配器</li></ul><p id="18db" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你喜欢这个故事的风格，去看看我的个人资料，我有一堆类似的故事。我会定期发布更多内容。</p><h2 id="4d12" class="ng ke iq bd kf nh ni dn kj nj nk dp kn lm nl nm kr lq nn no kv lu np nq kz nr bi translated"><strong class="ak">用简单英语写的便条</strong></h2><p id="6db7" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">订阅我们的YouTube频道</strong> </a> <strong class="ld ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
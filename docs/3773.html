<html>
<head>
<title>Vue 3 — v-model and Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 — v型和部件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-v-model-and-components-de2d39527f80?source=collection_archive---------3-----------------------#2020-10-24">https://javascript.plainenglish.io/vue-3-v-model-and-components-de2d39527f80?source=collection_archive---------3-----------------------#2020-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/98a1e7db7b1c2e4b6cabc6fc225e6e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_W3PCis445Y-pM3v"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@outdoor_junkiez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Drew Farwell</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0337" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何让我们的组件接受<code class="fe lb lc ld le b">v-model</code>指令。</p><h1 id="1f2b" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">在组件上使用<code class="fe lb lc ld le b">v-model</code></h1><p id="a060" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">v-model</code>只是监听<code class="fe lb lc ld le b">input</code>事件和绑定<code class="fe lb lc ld le b">value</code>道具的简称。</p><p id="ca92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，以下内容:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="1b1a" class="mq lg iq le b gy mr ms l mt mu">&lt;input v-model="message" /&gt;</span></pre><p id="d7c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与以下内容相同:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="bcb5" class="mq lg iq le b gy mr ms l mt mu">&lt;input :value="message" @input="message = $event.target.value" /&gt;</span></pre><p id="416c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lb lc ld le b">message</code>的值作为<code class="fe lb lc ld le b">value</code>属性的值传递。</p><p id="cb40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当发出<code class="fe lb lc ld le b">input</code>事件时，我们将<code class="fe lb lc ld le b">message</code>设置为<code class="fe lb lc ld le b">$event.target.value</code>的值。</p><p id="4a45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在一个组件上使用<code class="fe lb lc ld le b">v-model</code>时，<code class="fe lb lc ld le b">v-model</code>略有不同:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c3fd" class="mq lg iq le b gy mr ms l mt mu">&lt;custom-input<br/>  :model-value="message"<br/>  @update:model-value="message = $event"<br/>&gt;&lt;/custom-input&gt;</span></pre><p id="6a8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这部分不同于Vue 2，输入元素和组件做的是同样的事情。</p><p id="4c9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们只需使用<code class="fe lb lc ld le b">model-value</code>属性，并以<code class="fe lb lc ld le b">model-value</code>作为参数发出<code class="fe lb lc ld le b">opdate</code>事件。</p><p id="58ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="0631" class="mq lg iq le b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;custom-input v-model="message"&gt;&lt;/custom-input&gt;<br/>      &lt;p&gt;{{message}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            message: ""<br/>          };<br/>        }<br/>      });</span><span id="d4f6" class="mq lg iq le b gy mv ms l mt mu">     app.component("custom-input", {<br/>        props: ["modelValue"],<br/>        template: `<br/>          &lt;input<br/>            :value="modelValue"<br/>            @input="$emit('update:modelValue', $event.target.value)"<br/>          &gt;<br/>        `<br/>      });</span><span id="9124" class="mq lg iq le b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="698b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个使用<code class="fe lb lc ld le b">modelValue</code>道具的<code class="fe lb lc ld le b">custom-input</code>组件。</p><p id="0f0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模板中的输入使用<code class="fe lb lc ld le b">modelValue</code>作为其值。</p><p id="6b9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当从输入中发出<code class="fe lb lc ld le b">input</code>事件时，会发出带有<code class="fe lb lc ld le b">$event.target.value</code>属性的<code class="fe lb lc ld le b">update:modelValue</code>事件。</p><p id="cb20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">$event.target.value</code>有我们输入的输入值。</p><p id="1a0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在父Vue实例中，我们有:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c0e2" class="mq lg iq le b gy mr ms l mt mu">&lt;custom-input v-model="message"&gt;&lt;/custom-input&gt;</span></pre><p id="9c8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中。</p><p id="38d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lb lc ld le b">message</code>绑定到<code class="fe lb lc ld le b">custom-input</code>上，这样当我们输入<code class="fe lb lc ld le b">custom-input</code>时，就会看到<code class="fe lb lc ld le b">message</code>的值显示出来。</p><h1 id="8d27" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">利用槽的内容分发</h1><p id="02c2" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以用插槽在组件中分发内容。</p><p id="0690" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="5073" class="mq lg iq le b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;message-box&gt;<br/>        hello world<br/>      &lt;/message-box&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="82ab" class="mq lg iq le b gy mv ms l mt mu">      app.component("message-box", {<br/>        template: `<br/>          &lt;div&gt;<br/>            &lt;strong&gt;Message: &lt;/strong&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/div&gt;<br/>        `<br/>      });</span><span id="9dc6" class="mq lg iq le b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ba0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建内部带有<code class="fe lb lc ld le b">slot</code>元素的<code class="fe lb lc ld le b">message-box</code>组件。</p><p id="f8dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以像在父Vue实例的模板中一样，通过在标签之间传递项目来显示我们想要的项目。</p><h1 id="6106" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">动态组件</h1><p id="3cac" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">有了Vue 3，我们可以动态渲染组件。</p><p id="5994" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对于选项卡式界面等功能非常有用。</p><p id="3c1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7abf" class="mq lg iq le b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click='currentTabComponent = "tab-foo"'&gt;foo&lt;/button&gt;<br/>      &lt;button @click='currentTabComponent = "tab-bar"'&gt;bar&lt;/button&gt;<br/>      &lt;button @click='currentTabComponent = "tab-baz"'&gt;baz&lt;/button&gt;<br/>      &lt;component :is="currentTabComponent"&gt;&lt;/component&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            currentTabComponent: "tab-foo"<br/>          };<br/>        }<br/>      });</span><span id="edbd" class="mq lg iq le b gy mv ms l mt mu">      app.component("tab-foo", {<br/>        template: `<br/>          &lt;div&gt;<br/>            foo<br/>          &lt;/div&gt;<br/>        `<br/>      });</span><span id="aa4d" class="mq lg iq le b gy mv ms l mt mu">      app.component("tab-bar", {<br/>        template: `<br/>          &lt;div&gt;<br/>            bar<br/>          &lt;/div&gt;<br/>        `<br/>      });</span><span id="ba16" class="mq lg iq le b gy mv ms l mt mu">      app.component("tab-baz", {<br/>        template: `<br/>          &lt;div&gt;<br/>            baz<br/>          &lt;/div&gt;<br/>        `<br/>      });</span><span id="7cc7" class="mq lg iq le b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="551d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了3个组件，分别叫做<code class="fe lb lc ld le b">tab-foo</code>、<code class="fe lb lc ld le b">tab-bar</code>和<code class="fe lb lc ld le b">tab-baz</code>，我们通过创建3个按钮来设置变量<code class="fe lb lc ld le b">currentTabComponent</code>的值，从而动态地设置它们。</p><p id="7220" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将该值传递到<code class="fe lb lc ld le b">component</code>组件的<code class="fe lb lc ld le b">is</code>属性中，让我们用<code class="fe lb lc ld le b">currentTabComponent</code>指示的名称显示我们想要的组件。</p><p id="62e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">component</code>可以和普通的HTML元素一起使用，但是它们会被当作组件对待。</p><p id="15ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以所有属性都将被绑定为DOM属性。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/1eeaeaf216f216fa6491fef74744f68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*prnf8WmU3Q9ovpZd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mganeolsen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Michael Olsen</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a9c7" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="78aa" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">v-model</code>来创建定制的表单控件组件。</p><p id="f73c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组件可以有插槽，让我们把它们的内容放在我们想要的位置。</p><p id="b334" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且可以动态呈现组件。</p><p id="5310" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
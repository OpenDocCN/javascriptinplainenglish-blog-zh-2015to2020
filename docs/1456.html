<html>
<head>
<title>How to Deploy a Next.js App with Apollo GraphQL to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将带有Apollo GraphQL的Next.js应用程序部署到Heroku</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-deploy-a-next-js-app-to-heroku-d33bd86c2a2b?source=collection_archive---------7-----------------------#2020-03-17">https://javascript.plainenglish.io/how-to-deploy-a-next-js-app-to-heroku-d33bd86c2a2b?source=collection_archive---------7-----------------------#2020-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/66fa54fc436f1963d2d1d1d95c51293b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MWSqjHrmtMS9BezT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@aaronburden?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Aaron Burden</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="14cf" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="42ca" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">部署是会让很多人犯错的事情之一。当我参加训练营的时候，我清楚地记得班上很大一部分人都在努力部署他们的应用程序。编码是有趣和令人愉快的部分..但是部署...😅</p><p id="6673" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在本文中，我将向您展示如何使用Apollo GraphQL将Next.js应用程序轻松部署到Heroku。这里需要注意的关键点是，<strong class="ld ir"> </strong>中的<strong class="ld ir">没有区别</strong>你将如何部署任何其他Next.js应用程序。如果您检查下面提供的启动代码，您会注意到我们在Next.js提供的路线上提供Apollo GraphQL。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="26fb" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">先决条件</h1><p id="0a78" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">请验证您是否安装并配置了以下项目。</p><ul class=""><li id="5f10" class="mq mr iq ld b le lz li ma lm ms lq mt lu mu ly mv mw mx my bi translated">已安装node . js 10 . x(next . js要求)</li><li id="42fa" class="mq mr iq ld b le mz li na lm nb lq nc lu nd ly mv mw mx my bi translated">Git CLI已安装和配置</li><li id="4f01" class="mq mr iq ld b le mz li na lm nb lq nc lu nd ly mv mw mx my bi translated">Heroku帐户</li><li id="84f2" class="mq mr iq ld b le mz li na lm nb lq nc lu nd ly mv mw mx my bi translated">Heroku CLI已安装并登录</li></ul></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="adc4" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">起始代码</h1><p id="f0b4" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我已经提供了启动代码，如果你想继续下去。</p><p id="2028" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">您可以通过在终端中运行以下命令来克隆repo。</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="27ae" class="nn ke iq nj b gy no np l nq nr">git clone <a class="ae kc" href="https://github.com/kluu1/deploy-next-graphql-app.git" rel="noopener ugc nofollow" target="_blank">https://github.com/kluu1/deploy-next-graphql-app.git</a></span></pre><div class="ns nt gp gr nu nv"><a href="https://github.com/kluu1/deploy-next-graphql-app" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">kluu 1/部署-下一步-图表SQL-应用程序</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">这是我在Medium上发表的博文的示例代码。看看吧…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj jw nv"/></div></div></a></div></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="4bd2" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">检查package.json</h1><p id="6730" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">导航到项目目录，并在您喜欢的文本编辑器中打开项目。如果您使用的是VSCode，并且路径中有“Code”命令，则可以在终端中运行以下命令。</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="c300" class="nn ke iq nj b gy no np l nq nr">cd deploy-next-graphql-app<br/>code .</span></pre><p id="52a8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在打开文本编辑器，让我们看看<strong class="ld ir"> package.json </strong>文件。</p><figure class="ne nf ng nh gt jr"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="d238" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这里需要注意的重要脚本是“<strong class="ld ir">开始</strong>和“<strong class="ld ir">构建</strong>”。</p><ul class=""><li id="230d" class="mq mr iq ld b le lz li ma lm ms lq mt lu mu ly mv mw mx my bi translated"><strong class="ld ir">构建</strong> — Heroku将在构建过程中运行它</li><li id="36fa" class="mq mr iq ld b le mz li na lm nb lq nc lu nd ly mv mw mx my bi translated"><strong class="ld ir">启动</strong> — Heroku将运行此命令以在特定端口上启动应用程序</li></ul><p id="5c1b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果您希望定制Heroku构建过程，我强烈推荐您阅读<a class="ae kc" href="https://devcenter.heroku.com/articles/nodejs-support" rel="noopener ugc nofollow" target="_blank"> Heroku Node.js支持</a>文档。例如，您可以添加<strong class="ld ir">预安装</strong>和<strong class="ld ir">后安装</strong>脚本，它们在Heroku上构建之前或之后运行。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="6cb4" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">把密码推给Heroku</h1><p id="755b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在您的终端中，确保安装并登录了Heroku CLI。运行以下命令在Heroku上创建一个新的应用程序。</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="e56c" class="nn ke iq nj b gy no np l nq nr">heroku create deploy-next-graphql-app</span></pre><p id="1500" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">然后运行下面的命令来添加远程存储库。</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="6e33" class="nn ke iq nj b gy no np l nq nr">heroku git:remote -a deploy-next-graphql-app</span></pre><p id="ad2f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们可以将代码推送到Heroku，它将开始构建过程。</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="7b14" class="nn ke iq nj b gy no np l nq nr">git push heroku master</span></pre><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/dfa9f3ee94f6a28e5ed62f6021b0cee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A7vXxLZxbfkliZfmWeq00w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Starting the build process</figcaption></figure><figure class="ne nf ng nh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/81ac39489c79f383c9fbf139885e192a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KJdMDDMQBa4woiM5-zj_4w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Build is complete</figcaption></figure><p id="9276" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">一旦构建过程完成，Heroku将自动部署该应用程序。我希望你喜欢这场魔术表演！您的应用程序现已部署并上线！</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="654a" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">结论</h1><p id="a773" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Heroku是最容易使用的平台之一。只需对Next.js项目做一些修改，您就可以在几分钟内将应用程序部署到Heroku上。来自社区的文档和支持是一流的。我个人在所有个人项目中都使用Heroku，并将继续这样做。我希望这篇文章对您有所帮助，并且您能够使用它来部署您的Next.js项目！继续下一个！😆</p><p id="1ca7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我在业余时间写这些文章是为了娱乐。如果你喜欢这篇文章，请在下面留下你的喜欢和评论！可以关注我上 <a class="ae kc" href="https://medium.com/@this.kevinluu" rel="noopener"> <em class="oo">中</em> </a> <em class="oo">和</em> <a class="ae kc" href="https://twitter.com/kluu_10" rel="noopener ugc nofollow" target="_blank"> <em class="oo">推特</em> </a> <em class="oo">。感谢支持！</em></p></div></div>    
</body>
</html>
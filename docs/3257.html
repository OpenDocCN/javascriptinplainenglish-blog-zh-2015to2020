<html>
<head>
<title>Write templates in Node.js with EJS (Embedded JavaScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用EJS在Node.js中编写模板(嵌入式JavaScript)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/node-js-template-engine-bb87c9357e3d?source=collection_archive---------2-----------------------#2020-09-14">https://javascript.plainenglish.io/node-js-template-engine-bb87c9357e3d?source=collection_archive---------2-----------------------#2020-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/47e57515a685eb6457fd7f82e051d0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMI-NGFtYwWM7aBoKOg72Q.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Cover Image</figcaption></figure><p id="9ff2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">模板引擎是表示层，它实际上以HTML格式呈现我们的数据。默认情况下，express为我们提供了发送HTML文件的功能。使用该功能，我们可以只发送静态页面。如果我们需要在HTML文件中注入任何数据，我们需要一个模板引擎。此外，模板引擎将我们的代码分成多个组件，如页眉、页脚、正文等等。因此我们可以在任何布局中重用任何组件。这使得我们的应用程序更具可伸缩性，并帮助我们用最少的代码创建一个HTML模板。</p><p id="5197" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于NodeJS，有很多模板引擎，比如<code class="fe la lb lc ld b">Pug</code>、<code class="fe la lb lc ld b">Haml.js</code>、<code class="fe la lb lc ld b">EJS</code>、<code class="fe la lb lc ld b">React</code>、<code class="fe la lb lc ld b">hbs</code>、<code class="fe la lb lc ld b">Squirrelly</code>等等。在这篇博客中，我将解释EJS，它是最常用的模板引擎之一。</p><h2 id="e7d2" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated"><strong class="ak">什么是EJS？</strong></h2><p id="5a7b" class="pw-post-body-paragraph kc kd iq ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ij bi translated">EJS是与Node JS一起使用的模板引擎之一，通过普通Javascript生成HTML标记。EJS代表<strong class="ke ir">嵌入式JavaScript模板。</strong>客户端和服务器端都可以使用。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="091b" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">目录</h2><ol class=""><li id="0641" class="mj mk iq ke b kf lx kj ly kn ml kr mm kv mn kz mo mp mq mr bi translated"><a class="ae ms" href="#0641" rel="noopener ugc nofollow">创建节点JS项目</a></li><li id="4f5d" class="mj mk iq ke b kf mt kj mu kn mv kr mw kv mx kz mo mp mq mr bi translated"><a class="ae ms" href="#a7ab" rel="noopener ugc nofollow">渲染一个HTML文件</a></li><li id="174e" class="mj mk iq ke b kf mt kj mu kn mv kr mw kv mx kz mo mp mq mr bi translated"><a class="ae ms" href="#3ff1" rel="noopener ugc nofollow">渲染EJS模板</a></li><li id="0d22" class="mj mk iq ke b kf mt kj mu kn mv kr mw kv mx kz mo mp mq mr bi translated"><a class="ae ms" href="#634b" rel="noopener ugc nofollow">包括模板</a></li></ol></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="9546" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated"><strong class="ak"> 1。创建Node.js项目</strong></h2><p id="389d" class="pw-post-body-paragraph kc kd iq ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ij bi translated">用命令<code class="fe la lb lc ld b">npm init</code>创建一个新目录并初始化节点。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="c46e" class="le lf iq ld b gy ng nh l ni nj">mkdir expresstemplate<br/>cd expresstemplate/<br/>npm init -y<br/>npm i nodemon</span></pre><p id="7861" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Express JS是node JS的开源web框架。以下命令将express安装到我们的项目中。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="3fbc" class="le lf iq ld b gy ng nh l ni nj">npm install express --save</span></pre><div class="nk nl gp gr nm nn"><a href="https://expressjs.com/en/starter/installing.html" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">安装</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">假设您已经安装了Node.js，创建一个目录来保存您的应用程序，并使它成为您的工作…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">expressjs.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jw nn"/></div></div></a></div><p id="4d38" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">package.json</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="33d4" class="le lf iq ld b gy ng nh l ni nj">"scripts": {<br/>  <strong class="ld ir">"start": "nodemon index.js",</strong><br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>},</span></pre><p id="4768" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">index.js</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="dacd" class="le lf iq ld b gy ng nh l ni nj">const express = require('express')<br/>var app = express()</span><span id="7a22" class="le lf iq ld b gy oc nh l ni nj">app.get('/', function(req,res){<br/>  res.send('Hello world')<br/>})</span><span id="325a" class="le lf iq ld b gy oc nh l ni nj">app.listen(8000,function(){<br/>  console.log('Listening to PORT 8000')<br/>})</span></pre><h2 id="a7ab" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">2.<strong class="ak">渲染一个HTML文件</strong></h2><p id="1e36" class="pw-post-body-paragraph kc kd iq ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ij bi translated">首先，让我们呈现一个静态的HTML模板。我正在项目的根目录下创建一个简单的名为<code class="fe la lb lc ld b">index.html</code>的引导HTML页面。</p><p id="4705" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">index.html</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="1622" class="le lf iq ld b gy ng nh l ni nj">&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/><strong class="ld ir">    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"&gt;</strong><br/>    &lt;title&gt;Template Enginer Node JS&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/><strong class="ld ir">    &lt;div class='container' style="margin-top: 100px"&gt;<br/>      &lt;div class="hero-unit"&gt;<br/>        &lt;h1&gt;Bootstrap&lt;/h1&gt;<br/>          &lt;p&gt;<br/>            &lt;a class="btn btn-primary btn-large"&gt;<br/>              SignIn<br/>            &lt;/a&gt;<br/>          &lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</strong></span><span id="f793" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="1034" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="92e0" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="50bd" class="le lf iq ld b gy oc nh l ni nj">  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f5b5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，创建一个路由<code class="fe la lb lc ld b">/hello</code>，它将我们的<code class="fe la lb lc ld b">index.html</code>文件作为响应发送给客户端。</p><p id="2b33" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">index.js</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="dae7" class="le lf iq ld b gy ng nh l ni nj">const express = require('express')<br/>var app = express()</span><span id="1278" class="le lf iq ld b gy oc nh l ni nj">app.get('/', function(req,res){<br/>  res.send('Hello world')<br/>})<br/><strong class="ld ir">app.get('/hello', function(req,res){<br/>  res.sendFile(__dirname + '/index.html')<br/>})</strong></span><span id="31af" class="le lf iq ld b gy oc nh l ni nj">app.listen(8000,function(){<br/>  console.log('Listening to PORT 8000')<br/>})</span></pre><p id="1feb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">完成后，在浏览器中访问<a class="ae ms" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>。您应该会看到这样的页面。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/11af06bb57fa635c5da9bd35feb843da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tPtXd4KrOzPy-VP-kILkDA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Sending Response as a File</figcaption></figure><p id="63ae" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当我们处理一个静态文件时，我们可以使用它。在动态布局的情况下，这并不合适，因为我们不能向HTML页面注入任何值。这就是我们转向EJS或其他模板引擎的原因。</p><h2 id="3ff1" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">3.<strong class="ak">渲染EJS模板</strong></h2><div class="nk nl gp gr nm nn"><a href="https://ejs.co/#install" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">EJS</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">e代表有效的。EJS是一种简单的模板语言，让你用普通的JavaScript生成HTML标记…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">ejs.co</p></div></div></div></a></div><p id="465e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如前所述，EJS是服务器端和客户端最常用的模板引擎之一。</p><h2 id="1e74" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">基本语法</h2><p id="aa59" class="pw-post-body-paragraph kc kd iq ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ij bi translated">a.<strong class="ke ir">条件的无缓冲代码</strong> <code class="fe la lb lc ld b">&lt;% code %&gt;</code> —该语法用于处理条件。语法通常用于有条件地呈现值或模板。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="6870" class="le lf iq ld b gy ng nh l ni nj"><strong class="ld ir">&lt;% if (user) { %&gt;<br/></strong>   //ToDo: Perform something if user exist<br/><strong class="ld ir">&lt;% } else { %&gt;<br/></strong>   //ToDo: Perform something if user does not exist<br/><strong class="ld ir">&lt;% } %&gt;</strong></span></pre><p id="2037" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">b.<strong class="ke ir">默认情况下转义HTML</strong><code class="fe la lb lc ld b">&lt;%= code %&gt;</code>—该语法用于呈现值。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="3dd8" class="le lf iq ld b gy ng nh l ni nj">&lt;h2&gt;<strong class="ld ir">&lt;%= user.name %&gt;</strong>&lt;/h2&gt;</span></pre><p id="c8e0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">c.<strong class="ke ir">未转义缓冲</strong> <code class="fe la lb lc ld b">&lt;%- code %&gt;</code> —当我们想要包含一个外部模板时，使用这个语法。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="2c8a" class="le lf iq ld b gy ng nh l ni nj"><strong class="ld ir">&lt;%- include('../views/profile')-%&gt;</strong></span></pre><p id="db37" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">EJS的安装和设置太简单了。使用下面的命令为您的项目安装EJS。</p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="3628" class="le lf iq ld b gy ng nh l ni nj">npm install ejs</span></pre><p id="9527" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装完成后，在根目录下创建一个名为<code class="fe la lb lc ld b">views</code>的文件夹。创建之后，在服务器文件中添加下面一行。对我来说，它是<code class="fe la lb lc ld b">index.js</code>文件。下面一行告诉express我的模板保存在<code class="fe la lb lc ld b">views</code>文件夹下。</p><p id="8e9a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">index.js</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="2e29" class="le lf iq ld b gy ng nh l ni nj"><strong class="ld ir">app.set('views', path.join(__dirname, 'views'));<br/>app.set('view engine', 'ejs')</strong></span></pre><p id="af3e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了演示，我创建了一个简单的HTML页面，扩展名为<code class="fe la lb lc ld b">ejs</code>。</p><p id="d94c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">views/hello.ejs</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="c710" class="le lf iq ld b gy ng nh l ni nj">&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"&gt;<br/>    &lt;title&gt;Template Enginer Node JS&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div class='container' style="margin-top: 100px"&gt;<br/>      &lt;div class="hero-unit"&gt;<br/>       <strong class="ld ir"> &lt;h1&gt;Welcome &lt;%= param %&gt;&lt;/h1&gt;</strong><br/>          &lt;p&gt;<br/>            &lt;a class="btn btn-primary btn-large"&gt;<br/>              SignUp<br/>            &lt;/a&gt;<br/>          &lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="5b9f" class="le lf iq ld b gy oc nh l ni nj">&lt;script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="3aff" class="le lf iq ld b gy oc nh l ni nj">&lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="4621" class="le lf iq ld b gy oc nh l ni nj">&lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="fcd3" class="le lf iq ld b gy oc nh l ni nj">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3e68" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在服务器文件中，我添加了一个新的路径，呈现了我的<code class="fe la lb lc ld b">hello.ejs</code>文件。有了这个文件，我将发送一些参数。该参数将以<code class="fe la lb lc ld b">param</code>的名称接收。因此，通过用EJS语法包装<code class="fe la lb lc ld b">param</code>，它返回给我从路由发送的参数。</p><p id="438f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">index.js</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="83e3" class="le lf iq ld b gy ng nh l ni nj">const express = require('express')<br/>var app = express()</span><span id="0e41" class="le lf iq ld b gy oc nh l ni nj">app.get('/', function(req,res){<br/>  res.send('Hello world')<br/>})</span><span id="8c4f" class="le lf iq ld b gy oc nh l ni nj">app.get('/hello', function(req,res){<br/>  res.sendFile(__dirname + '/index.html')<br/>})</span><span id="ad5f" class="le lf iq ld b gy oc nh l ni nj"><strong class="ld ir">app.get('/hello/:name',function(req,res){<br/>  res.render('hello',{param: req.params.name})<br/>})</strong></span><span id="9550" class="le lf iq ld b gy oc nh l ni nj">app.listen(8000,function(){<br/>  console.log('Listening to PORT 8000')<br/>})</span></pre><p id="735d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当我导航到http://localhost:8000/hello/娄机时，它返回我欢迎娄机。如果您导航到<a class="ae ms" href="http://localhost:8000/hello/louji" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/hello/m</a>edium，它将返回欢迎介质。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/2d16a44b9b767ae062ebb7c865b422d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UqYCokXsmh5nwjmCEE8ueA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Dynamically rendering params</figcaption></figure><h2 id="634b" class="le lf iq bd lg lh li dn lj lk ll dp lm kn ln lo lp kr lq lr ls kv lt lu lv lw bi translated">4.<strong class="ak">包括模板</strong></h2><p id="cbff" class="pw-post-body-paragraph kc kd iq ke b kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv mb kx ky kz ij bi translated">除了将值注入模板，EJS还帮助我们重用HTML组件。</p><p id="3935" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面，我有两个文件名为<code class="fe la lb lc ld b">header.ejs</code>和<code class="fe la lb lc ld b">footer.ejs</code>。我在<code class="fe la lb lc ld b">views</code>文件夹中创建两个模板。</p><p id="8c91" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">views/header.ejs</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="d068" class="le lf iq ld b gy ng nh l ni nj">&lt;html lang="en"&gt;<br/>  &lt;body&gt;<br/>    &lt;header&gt;<br/>      &lt;nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"&gt;<br/>        &lt;a class="navbar-brand" href="#"&gt;Carousel&lt;/a&gt;<br/>        &lt;button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"&gt;<br/>          &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;<br/>        &lt;/button&gt;<br/>        &lt;div class="collapse navbar-collapse" id="navbarCollapse"&gt;<br/>          &lt;ul class="navbar-nav mr-auto"&gt;<br/>            &lt;li class="nav-item active"&gt;<br/>              &lt;a class="nav-link" href="#"&gt;Home &lt;span class="sr-only"&gt;(current)&lt;/span&gt;&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li class="nav-item"&gt;<br/>              &lt;a class="nav-link" href="#"&gt;Link&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li class="nav-item"&gt;<br/>              &lt;a class="nav-link disabled" href="#"&gt;Disabled&lt;/a&gt;<br/>            &lt;/li&gt;<br/>          &lt;/ul&gt;<br/>          &lt;form class="form-inline mt-2 mt-md-0"&gt;<br/>            &lt;input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search"&gt;<br/>            &lt;button class="btn btn-outline-success my-2 my-sm-0" type="submit"&gt;Search&lt;/button&gt;<br/>          &lt;/form&gt;<br/>        &lt;/div&gt;<br/>      &lt;/nav&gt;<br/>    &lt;/header&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3ae6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">views/footer.ejs</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="0443" class="le lf iq ld b gy ng nh l ni nj">&lt;html lang="en"&gt;<br/>  &lt;body&gt;<br/>    &lt;footer class="container"&gt;<br/>      &lt;p class="float-right"&gt;&lt;a href="#"&gt;Back to top&lt;/a&gt;&lt;/p&gt;<br/>      &lt;p&gt;&amp;copy; 2017-2018 Company, Inc. &amp;middot; &lt;a href="#"&gt;Privacy&lt;/a&gt; &amp;middot; &lt;a href="#"&gt;Terms&lt;/a&gt;&lt;/p&gt;<br/>    &lt;/footer&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="63d7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我的<code class="fe la lb lc ld b">hello.ejs</code>文件中，我使用了一个叫做<code class="fe la lb lc ld b">include, </code>的东西，它包括了<code class="fe la lb lc ld b">hello.ejs</code>文件中的<code class="fe la lb lc ld b">header.ejs</code>和<code class="fe la lb lc ld b">footer.ejs</code>。同样，我们可以在任何布局中重用相同的页眉和页脚。</p><p id="9994" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe la lb lc ld b">views/hello.ejs</code></p><pre class="my mz na nb gt nc ld nd ne aw nf bi"><span id="374a" class="le lf iq ld b gy ng nh l ni nj">&lt;!doctype html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"&gt;<br/>    &lt;title&gt;Template works&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    <strong class="ld ir">&lt;%- include('../views/header.ejs')-%&gt;</strong><br/>    &lt;div class='container' style="margin-top: 100px"&gt;<br/>      &lt;div class="hero-unit"&gt;<br/>        &lt;h1&gt;Welcome &lt;%= param %&gt;&lt;/h1&gt;<br/>        &lt;p&gt;<br/>          &lt;a class="btn btn-primary btn-large"&gt;<br/>            SignUp<br/>          &lt;/a&gt;<br/>        &lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    <strong class="ld ir">&lt;%- include('../views/footer.ejs')-%&gt;</strong></span><span id="a0b8" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="c337" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="8fc2" class="le lf iq ld b gy oc nh l ni nj">    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/3e4608dabb25a91f8f38eb9acd8542e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jhec80UtpKm5z2NvdAoFqw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Including Template</figcaption></figure><p id="b2d9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae ms" href="https://medium.com/@sjlouji10/node-js-models-and-database-3836f0c7f2da" rel="noopener">请查看我之前的博客，我在那里解释了模型和数据库</a></p><p id="7fc5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如有任何疑问，请随时联系我。电子邮件:sjlouji10@gmail.com。领英:<a class="ae ms" href="https://www.linkedin.com/in/sjlouji/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sjlouji/</a></p><p id="3373" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我的GitHub上的完整代码:</p><div class="nk nl gp gr nm nn"><a href="https://github.com/sjlouji/NodeJS-Template-Engine---Medium" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">sjlouji/NodeJS-Template-Engine-Medium</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在GitHub上创建一个账号，为sjlouji/NodeJS-Template-Engine-Medium开发做贡献。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="og l ny nz oa nw ob jw nn"/></div></div></a></div><p id="98be" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">编码快乐！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Integrating MapBox with Next.js â€” the Cheaper Alternative to Google Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ•´åˆMapBoxå’Œnext . jsâ€”â€”è°·æ­Œåœ°å›¾çš„å»‰ä»·æ›¿ä»£å“</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/integrating-mapbox-with-next-js-the-cheaper-alternative-to-google-maps-460e4c2e6efc?source=collection_archive---------1-----------------------#2020-10-23">https://javascript.plainenglish.io/integrating-mapbox-with-next-js-the-cheaper-alternative-to-google-maps-460e4c2e6efc?source=collection_archive---------1-----------------------#2020-10-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1846" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ä½¿ç”¨MapBoxçš„æœç´¢APIå’Œåœ°å›¾APIæ„å»ºä¸€ä¸ªå¸¦æœ‰å¯ç‚¹å‡»å›¾é’‰çš„äº¤äº’å¼åœ°å›¾</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c0300f0612536e9f284fc3926ab7181e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9PhGDa3ZlSoR5EsRKy3OAw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@waldemarbrandt67w?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Waldemar Brandt</a> on <a class="ae ks" href="https://unsplash.com/s/photos/google-maps?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6a99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æœ€è¿‘ï¼Œæˆ‘ä¸€ç›´è‡´åŠ›äºåˆ›å»ºä¸€ä¸ª<a class="ae ks" href="https://sustaynably.com" rel="noopener ugc nofollow" target="_blank">ç”Ÿæ€æ—…æ¸¸å¹³å°</a>ï¼Œå¹¶å‘ç°è‡ªå·±éœ€è¦ç”¨ä¸€äº›å¯ç‚¹å‡»çš„æ ‡è®°é’ˆæ¥ç»˜åˆ¶åœ°å›¾(æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­é‡ç°)ã€‚åœ¨æœç´¢äº†äº’è”ç½‘ä¸Šå¯èƒ½çš„è§£å†³æ–¹æ¡ˆåï¼Œä¸¤ä¸ªç›´æ¥çš„é€‰æ‹©å‡ºç°äº†â€”â€”è°·æ­Œåœ°å›¾å’Œåœ°å›¾ç›’å­ã€‚è™½ç„¶æˆ‘ä»¬å¤§å¤šæ•°äººéƒ½ç†Ÿæ‚‰è°·æ­Œåœ°å›¾ï¼Œå› ä¸ºå®ƒåœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨ï¼Œä½†æˆ‘å‘ç°ï¼Œå°†å®ƒé›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­å¹¶ä¸ç†æƒ³ã€‚å»ºç«‹ä¸€ä¸ªè‡ªä¸¾é¡¹ç›®ï¼Œæˆ‘æƒ³ä¿æŒæˆæœ¬æœ€ä½ï¼Œè°·æ­Œåœ°å›¾çš„<a class="ae ks" href="https://cloud.google.com/maps-platform/pricing" rel="noopener ugc nofollow" target="_blank">å®šä»·ç»“æ„</a>å°†æ„å‘³ç€æˆæœ¬å°†å¼€å§‹å¢åŠ ã€‚</p><h1 id="22ac" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">è¿›å…¥MapBoxï¼</strong></h1><p id="e898" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">å‡­å€Ÿå…·æœ‰ç«äº‰åŠ›çš„<a class="ae ks" href="https://www.mapbox.com/pricing/" rel="noopener ugc nofollow" target="_blank">å®šä»·ç»“æ„</a>(ç½‘ä¸Šå‰50ï¼Œ000ä¸ªè¯·æ±‚æ˜¯å…è´¹çš„)å’Œæ˜“äºä½¿ç”¨ä¸”è®°å½•è‰¯å¥½çš„APIï¼ŒMapBoxæ˜¯è°·æ­Œåœ°å›¾çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ã€‚å®ƒä¹Ÿæ˜¯å»ºç«‹åœ¨å¼€æºåœ°å›¾é¡¹ç›®<a class="ae ks" href="https://www.openstreetmap.org/" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a>ä¹‹ä¸Šçš„ã€‚èµ¢äº†ï¼Œèµ¢äº†ï¼</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/6c696e0638bf8cb16dc27b0b66ee5fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6KeyzKzi4JDJpXZV_4bew.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Comparison between MapBox and Google Maps. <a class="ae ks" href="https://www.mapbox.com/use-cases/store-locator/" rel="noopener ugc nofollow" target="_blank">Source</a>.</figcaption></figure><h1 id="4e66" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">æˆ‘ä»¬åœ¨å»ºé€ ä»€ä¹ˆï¼Ÿ</strong></h1><p id="342e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">æˆ‘ä»¬å°†æŸ¥è¯¢MapBoxçš„æœç´¢apiï¼Œä»¥è·å–ä¸€å®¶åä¸ºGreggsçš„è‡­åæ˜­è‘—çš„å’–å•¡åº—çš„ä¸€äº›ä½ç½®ï¼Œå°†æˆ‘ä»¬çš„æœç´¢é›†ä¸­åœ¨å¤§ä¼¦æ•¦åœ°åŒºã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„MapBox <code class="fe mn mo mp mq b">&lt;Map&gt;</code>ç»„ä»¶ä¸­ç”¨ä¸€ä¸²å¯ç‚¹å‡»çš„æ ‡è®°æ¥å‘ˆç°è¿™äº›åœ°æ–¹ã€‚ç‚¹å‡»æ—¶ï¼Œè¿™äº›æ ‡è®°ä¼šæ˜¾ç¤ºä¸€äº›å¯å¿½ç•¥çš„å¼¹å‡ºçª—å£ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/9756610e061aa6fdacb1ed7b57f50d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9YWdT33rQihjv-5wxS8GQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The finished project will look something like this</figcaption></figure><h1 id="359d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æˆ‘ä»¬æ¥ç¼–ç å§ï¼</h1><h2 id="4111" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">åˆ›å»ºä¸€ä¸ªMapBoxå¸æˆ·ä»¥è·å–æ‚¨çš„è®¿é—®ä»¤ç‰Œ</h2><p id="cd33" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">ä½ éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯<a class="ae ks" href="https://account.mapbox.com/auth/signup/" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºä¸€ä¸ªMapBoxå¸æˆ·</a>ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è·å¾—ä¸€ä¸ªè®¿é—®ä»¤ç‰Œã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªä»¤ç‰Œå‘å„ç§MapBox APIså‘å‡ºè¯·æ±‚ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/50d22634dac022729c4953b52b8f7ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LPb9R-60T5u5lbufuqdaaw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">This is usually the first thing you will see when you sign up for a MapBox account</figcaption></figure><p id="2927" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸€æ—¦æœ‰äº†è®¿é—®ä»¤ç‰Œï¼Œå°±è¯¥å»ºç«‹è‡ªå·±çš„Next.jsé¡¹ç›®å¹¶é›†æˆMapBoxæä¾›çš„æ‰€æœ‰æœ‰è¶£åŠŸèƒ½äº†ã€‚</p><h2 id="fb07" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">å»ºç«‹ä¸€ä¸ªæ–°çš„Next.jsé¡¹ç›®(å¦‚æœæ‚¨å·²ç»æœ‰äº†è‡ªå·±çš„é¡¹ç›®ï¼Œè¯·è·³è¿‡è¿™ä¸€æ­¥)</h2><p id="9ba6" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">å»ºç«‹ä¸€ä¸ªNext.jsé¡¹ç›®å¾ˆç®€å•ï¼Œä½ å¯ä»¥æŒ‰ç…§<a class="ae ks" href="https://nextjs.org/learn/basics/create-nextjs-app" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ä¸­çš„è¯´æ˜æˆ–è€…è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å»ºç«‹ä¸€ä¸ªæ–°çš„Next.jsé¡¹ç›®(ç¡®ä¿ä½ å·²ç»å®‰è£…äº†Node.js)ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="f3e5" class="ms lq in mq b gy nj nk l nl nm">npx create-next-app mapbox-project</span></pre><p id="fc89" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç„¶åï¼Œcdè¿›å…¥<code class="fe mn mo mp mq b">mapbox-project</code>ç›®å½•ï¼Œå¹¶é€šè¿‡è¿è¡Œ<code class="fe mn mo mp mq b">npm run dev</code>æˆ–<code class="fe mn mo mp mq b">yarn dev</code>æ¥è¿è¡Œå¼€å‘æœåŠ¡å™¨ã€‚ç§å•Šã€‚æ‚¨çš„Next.jsé¡¹ç›®å·²ç»å¯åŠ¨å¹¶è¿è¡Œäº†ï¼</p><h2 id="4ef6" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">è®¾ç½®åœ°å›¾æ¡†åœ°å›¾</h2><p id="8561" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">æ¥ä¸‹æ¥ï¼Œæ˜¯æ—¶å€™åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ¸²æŸ“ä¸€ä¸ªMapBoxåœ°å›¾äº†ã€‚æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªç”±ä¼˜æ­¥å›¢é˜Ÿ<code class="fe mn mo mp mq b">react-map-gl</code>ç¼–å†™çš„<a class="ae ks" href="https://github.com/visgl/react-map-gl" rel="noopener ugc nofollow" target="_blank">åœ°å›¾æ¡†åº“</a>æ¥å®ç°è¿™ä¸€ç‚¹ã€‚è¿™åŒ…å«ä¸€å¥—ç”¨äºMapBoxçš„Reactç»„ä»¶ã€‚é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†æ­¤åº“æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­:</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="e51d" class="ms lq in mq b gy nj nk l nl nm">yarn add react-mapbox-gl</span></pre><p id="4572" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™æ ·ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä½äº<code class="fe mn mo mp mq b">components/Map.js</code>çš„åœ°å›¾ç»„ä»¶ã€‚</p><p id="dfe2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åˆ›å»ºMap.jsæ–‡ä»¶ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç :</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="beab" class="ms lq in mq b gy nj nk l nl nm">import { useState } from "react";<br/>import ReactMapGL from "react-map-gl";</span><span id="588c" class="ms lq in mq b gy nn nk l nl nm">export default function Map() {<br/>  const [viewport, setViewport] = useState({<br/>  width: "100%",<br/>  height: "100%",<br/>  <em class="no">// The latitude and longitude of the center of London<br/>  </em>latitude: 51.5074,<br/>  longitude: -0.1278,<br/>  zoom: 10<br/>});</span><span id="76d0" class="ms lq in mq b gy nn nk l nl nm">return &lt;ReactMapGL<br/>  mapStyle="mapbox://styles/mapbox/streets-v11"<br/>  mapboxApiAccessToken={process.env.MAPBOX_KEY}<br/>  {...viewport}<br/>  onViewportChange={(nextViewport) =&gt; setViewport(nextViewport)}<br/>  &gt;<br/>&lt;/ReactMapGL&gt;<br/>}</span></pre><p id="d652" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™è¿˜ä¸è¡Œã€‚Next.jsæœ€å¤§çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒæä¾›çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚ç„¶è€Œï¼ŒMapBoxéœ€è¦å…¨å±€çª—å£å¯¹è±¡æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚å¦‚æœæ‚¨åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å°†éœ€è¦åŠ¨æ€åœ°å°†å…¶å¯¼å…¥åˆ°æ‚¨çš„é¡µé¢ã€‚è¿™æ„å‘³ç€ä¸æ˜¯åƒå¸¸è§„ç»„ä»¶ä¸€æ ·å¯¼å…¥å®ƒï¼Œ</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="faef" class="ms lq in mq b gy nj nk l nl nm">import Map from '../components/Map'</span></pre><p id="4687" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬å°†ä¸å¾—ä¸åŠ¨æ€å¯¼å…¥å®ƒã€‚æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨Next.js <code class="fe mn mo mp mq b">dynamic imports</code>æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p id="8602" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åœ¨æ‚¨çš„<code class="fe mn mo mp mq b">pages/index.js</code>æ–‡ä»¶ä¸­(æˆ–è€…æ‚¨æ­£åœ¨æ¸²æŸ“åœ°å›¾ç»„ä»¶çš„ä»»ä½•åœ°æ–¹)æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="d516" class="ms lq in mq b gy nj nk l nl nm">const Map = dynamic(() =&gt; import("../components/Map"), {<br/>  loading: () =&gt; "Loading...",<br/>  ssr: false<br/>});</span></pre><p id="18f6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™æ„å‘³ç€æˆ‘ä»¬çš„MapBoxç»„ä»¶ç°åœ¨å°†æœ‰é€‰æ‹©åœ°å‘ˆç°åœ¨å®¢æˆ·ç«¯ã€‚å®Œç¾ï¼</p><p id="ba69" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬ç°åœ¨å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯å°†MapBoxçš„CSSæ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä¿®æ”¹ç°æœ‰çš„<code class="fe mn mo mp mq b">_app.js</code>æˆ–è€…æ·»åŠ ä¸€ä¸ªå®šåˆ¶çš„<code class="fe mn mo mp mq b">_document.js</code>æ–‡ä»¶ã€‚ç„¶ååœ¨ä½ çš„æ¸²æŸ“å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ªCSSåˆ°<code class="fe mn mo mp mq b">&lt;Head&gt;</code>çš„é“¾æ¥ã€‚ä½ å¯ä»¥åœ¨ä»–ä»¬çš„<a class="ae ks" href="https://docs.mapbox.com/mapbox-gl-js/api/" rel="noopener ugc nofollow" target="_blank"> APIæ–‡æ¡£</a>ä¸­è·å¾—CSSæ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="da2f" class="ms lq in mq b gy nj nk l nl nm">&lt;head&gt;<br/>&lt;link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' /&gt;<br/>&lt;/head&gt;</span></pre><p id="2ffc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å®Œç¾ã€‚æ‚¨çš„åœ°å›¾ç°åœ¨åº”è¯¥å·²ç»å¯åŠ¨å¹¶è¿è¡Œäº†ï¼è®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥ï¼Œå°è¯•åœ¨åœ°å›¾ä¸Šç»˜åˆ¶ä¸€äº›å¯ç‚¹å‡»çš„å¤§å¤´é’ˆã€‚</p><h2 id="2de7" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">ä½¿ç”¨MapBoxçš„æœç´¢APIè·å–åœ°æ ‡åˆ—è¡¨</h2><p id="d558" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">MapBoxæœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„åœ°ç†ç¼–ç APIï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è·å–ä¸€ä¸ªä½ç½®åˆ—è¡¨ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„çº¬åº¦å’Œç»åº¦ã€‚æˆ‘ä»¬å°†è·å–ä¼¦æ•¦Greggs(ä¸€å®¶å¤–å–å¿«é¤å’Œå’–å•¡åº—)çš„åˆ—è¡¨ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºå›¾é’‰å‘ˆç°åœ¨æˆ‘ä»¬çš„åœ°å›¾ä¸Šã€‚</p><p id="8c46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬é€šè¿‡å‘Mapboxåœ°ç†ç¼–ç APIæ·»åŠ ä¸€ä¸ªç®€å•çš„fetchè°ƒç”¨æ¥æŸ¥è¯¢æˆ‘ä»¬çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨ä¼¦æ•¦çš„åœ°ç†èŒƒå›´å†…è¿›è¡Œæœç´¢ï¼Œå¹¶å¸Œæœ›æˆ‘ä»¬çš„æœç´¢ç»“æœä¸è¶…è¿‡10ä¸ª(ä¼¦æ•¦å¾ˆå¤§ï¼Œä¼¦æ•¦äººå–œæ¬¢ä»–ä»¬çš„æ ¼é›·æ ¼ç´ é£Ÿé¦™è‚ å·ã€‚æˆ‘ä»¬ä¸æƒ³è¢«æ‰€æœ‰çš„å¯èƒ½æ€§æ·¹æ²¡ï¼).MapBoxçš„åœ°ç†ç¼–ç åœ°ç‚¹æœç´¢APIé‡‡ç”¨ä»¥ä¸‹å‚æ•°ï¼Œä»¥åŠä¸€äº›é™„åŠ çš„æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚åœ¨è¿™é‡Œé˜…è¯»æ–‡æ¡£<a class="ae ks" href="https://docs.mapbox.com/api/search/" rel="noopener ugc nofollow" target="_blank"/>ï¼</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="b3e6" class="ms lq in mq b gy nj nk l nl nm">/geocoding/v5/mapbox.places/<strong class="mq io">{search_text}</strong>.json</span></pre><p id="5d19" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe mn mo mp mq b">limit</code>æŸ¥è¯¢å‚æ•°å°†ç»“æœé™åˆ¶åœ¨10ï¼Œä½¿ç”¨<code class="fe mn mo mp mq b">bbox</code>å‚æ•°æŒ‡å®šä¼¦æ•¦çš„çº¬åº¦å’Œç»åº¦èŒƒå›´ã€‚</p><p id="0787" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„æœç´¢urlå°†å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="58d7" class="ms lq in mq b gy nj nk l nl nm">https://api.mapbox.com/geocoding/v5/mapbox.places/greggs.json?access_token=${process.env.MAPBOX_KEY}&amp;bbox=-0.227654%2C51.464102%2C0.060737%2C51.553421&amp;limit=10</span></pre><p id="3a92" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªurlï¼Œåœ¨æˆ‘ä»¬çš„é¡µé¢ä¸­è¿›è¡Œä¸€ä¸ªç®€å•çš„è·å–è°ƒç”¨ã€‚æˆ‘ä»¬ä¿®æ”¹åçš„é¡µé¢ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œ</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="cc93" class="ms lq in mq b gy nj nk l nl nm">const Map = dynamic(() =&gt; import("../components/Map"), {<br/>  loading: () =&gt; "Loading...",<br/>  ssr: false<br/>});</span><span id="0b0d" class="ms lq in mq b gy nn nk l nl nm">const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/greggs.json?access_token=${process.env.MAPBOX_KEY}&amp;bbox=-0.227654%2C51.464102%2C0.060737%2C51.553421&amp;limit=10`;</span><span id="cbee" class="ms lq in mq b gy nn nk l nl nm">export default function IndexPage() {</span><span id="80f9" class="ms lq in mq b gy nn nk l nl nm">  const [locations, setLocations] = useState([]);</span><span id="a173" class="ms lq in mq b gy nn nk l nl nm">  useEffect(() =&gt; {<br/>    const fetchLocations = async () =&gt; {<br/>      await fetch(url).then((response) =&gt;<br/>        response.text()).then((res) =&gt; JSON.parse(res))<br/>      .then((json) =&gt; {<br/>        setLocations(json.features);<br/>      }).catch((err) =&gt; console.log({ err }));<br/>    };<br/>    fetchLocations();<br/>  }, []);</span><span id="1d34" class="ms lq in mq b gy nn nk l nl nm">  return (&lt;Container&gt;<br/>    &lt;Map /&gt;<br/>  &lt;/Container&gt;);<br/>}</span></pre><p id="6f87" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬ç°åœ¨æœ‰10ä¸ªæ ¼é›·æ ¼çš„ä½ç½®åˆ—è¡¨ï¼</p><h2 id="eb51" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">ä½¿ç”¨æˆ‘ä»¬çš„æœç´¢ç»“æœåœ¨åœ°å›¾ä¸Šå‘ˆç°å›¾é’‰</h2><p id="3982" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªåœ°ç‚¹åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åœ°å›¾ä¸Šå‘ˆç°è¿™äº›åœ°ç‚¹ã€‚<code class="fe mn mo mp mq b">react-map-gl</code>å¸¦æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„<code class="fe mn mo mp mq b">&lt;Marker&gt;</code>ç»„ä»¶ï¼Œä½¿å¾—æˆ‘ä»¬çš„ä»»åŠ¡éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä½ç½®ä¼ é€’ç»™æˆ‘ä»¬çš„<code class="fe mn mo mp mq b">&lt;Map&gt;</code>ç»„ä»¶ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="fb88" class="ms lq in mq b gy nj nk l nl nm">return (&lt;Container&gt;<br/>    &lt;Map locations={locations} /&gt;<br/>  &lt;/Container&gt;);</span></pre><p id="7155" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬çš„åœ°å›¾ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å°†è¿™äº›ä½ç½®çš„çº¬åº¦å’Œç»åº¦ä¼ é€’ç»™<code class="fe mn mo mp mq b">&lt;Marker&gt;</code>ç»„ä»¶æ¥å‘ˆç°æ¯ä¸ªä½ç½®çš„pinã€‚</p><p id="6876" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬æœ€ç»ˆçš„åœ°å›¾ç»„ä»¶çœ‹èµ·æ¥ä¼šåƒè¿™æ ·ï¼Œ</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="4327" class="ms lq in mq b gy nj nk l nl nm">import { useState } from "react";<br/>import ReactMapGL, { Marker } from "react-map-gl";</span><span id="8751" class="ms lq in mq b gy nn nk l nl nm">export default function Map({ locations }) {<br/>  const [viewport, setViewport] = useState({<br/>    width: "100%",<br/>    height: "100%",<br/>    <em class="no">// The latitude and longitude of the center of London<br/>    </em>latitude: 51.5074,<br/>    longitude: -0.1278,<br/>    zoom: 10<br/>  });</span><span id="1909" class="ms lq in mq b gy nn nk l nl nm">return &lt;ReactMapGL<br/>  mapStyle="mapbox://styles/mapbox/streets-v11"<br/>  mapboxApiAccessToken={process.env.MAPBOX_KEY}<br/>  {...viewport}<br/>  onViewportChange={(nextViewport) =&gt; setViewport(nextViewport)}<br/>  &gt;<br/>  {locations.map((location) =&gt; (<br/>    &lt;div key={location.id}&gt;<br/>      &lt;Marker<br/>      latitude={location.center[1]}<br/>      longitude={location.center[0]}<br/>      offsetLeft={-20}<br/>      offsetTop={-10}&gt;<br/>        &lt;span role="img" aria-label="push-pin"&gt;ğŸ“Œ&lt;/span&gt;<br/>      &lt;/Marker&gt;<br/>    &lt;/div&gt;<br/>  ))}<br/>&lt;/ReactMapGL&gt;<br/>}</span></pre><h2 id="0a35" class="ms lq in bd lr mt mu dn lv mv mw dp lz lc mx my mb lg mz na md lk nb nc mf nd bi translated">ä½¿å¤§å¤´é’ˆå¯ç‚¹å‡»</h2><p id="542c" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">æˆ‘ä»¬å¿«åˆ°äº†ï¼æˆ‘ä»¬è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯æ·»åŠ ä¸€ä¸ªå¸¦æœ‰åœ°åçš„å¼¹å‡ºçª—å£ï¼Œä»¥ä½¿è¿™äº›åœ°å›¾å®Œå…¨å‘æŒ¥ä½œç”¨å¹¶å…·æœ‰äº¤äº’æ€§ã€‚åŒæ ·ï¼ŒMapboxé™„å¸¦äº†ä¸€ä¸ªæ–¹ä¾¿çš„<code class="fe mn mo mp mq b">Popup</code>ç»„ä»¶ï¼Œä½¿å¾—è¿™ä¸€ç‚¹å¾ˆå®¹æ˜“åšåˆ°ã€‚æˆ‘ä»¬å°†ç®€å•åœ°å‘æˆ‘ä»¬çš„pinsæ·»åŠ ä¸€ä¸ªonClickå¤„ç†ç¨‹åºï¼Œå®ƒå°†æ•è·æ‰€é€‰ä½ç½®çš„ç»†èŠ‚ï¼Œç„¶åæˆ‘ä»¬å°†æŠŠæ‰€é€‰ä½ç½®çš„çº¬åº¦å’Œç»åº¦ä¼ é€’ç»™æˆ‘ä»¬çš„<code class="fe mn mo mp mq b">&lt;Popup&gt;</code>ç»„ä»¶ã€‚ä¸€ä¼šå„¿å°±æ¸…æ¥šäº†ï¼</p><p id="e05d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åœ¨åœ°å›¾ç»„ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª<code class="fe mn mo mp mq b">useState</code>é’©å­æ¥æ•è·æ‰€é€‰ä½ç½®ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="1a58" class="ms lq in mq b gy nj nk l nl nm">export default function Map({ locations }) {</span><span id="b4ed" class="ms lq in mq b gy nn nk l nl nm">  // UseState hook<br/>  const [selectedLocation, setSelectedLocation] = useState({})</span><span id="c797" class="ms lq in mq b gy nn nk l nl nm">  const [viewport, setViewport] = useState({<br/>    width: "100%",<br/>    height: "100%",<br/>    <em class="no">// The latitude and longitude of the center of London<br/>    </em>latitude: 51.5074,<br/>    longitude: -0.1278,<br/>    zoom: 10<br/>  });</span><span id="af3e" class="ms lq in mq b gy nn nk l nl nm">......</span></pre><p id="34ec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬è¿˜å°†ä¿®æ”¹renderå—ï¼Œæ·»åŠ ä¸€ä¸ªonClickå¤„ç†ç¨‹åºå’Œæˆ‘ä»¬åˆšåˆšæåˆ°çš„<code class="fe mn mo mp mq b">&lt;Popup&gt;</code>ç»„ä»¶ã€‚</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="bc30" class="ms lq in mq b gy nj nk l nl nm">......</span><span id="1db8" class="ms lq in mq b gy nn nk l nl nm">return &lt;ReactMapGL<br/>  mapStyle="mapbox://styles/mapbox/streets-v11"<br/>  mapboxApiAccessToken={process.env.MAPBOX_KEY}<br/>  {...viewport}<br/>  onViewportChange={(nextViewport) =&gt; setViewport(nextViewport)}<br/>  &gt;<br/>  {locations.map((location) =&gt; (<br/>    &lt;div key={location.id}&gt;<br/>      &lt;Marker<br/>      latitude={location.center[1]}<br/>      longitude={location.center[0]}<br/>      offsetLeft={-20}<br/>      offsetTop={-10}&gt;<br/>        &lt;a onClick={() =&gt; {<br/>          setSelectedLocation(location);<br/>        }}&gt;<br/>          &lt;span role="img" aria-label="push-pin"&gt;ğŸ“Œ&lt;/span&gt;<br/>        &lt;/a&gt;<br/>      &lt;/Marker&gt;<br/>      {selectLocation.id === location.id ? (<br/>      &lt;Popup<br/>      onClose={() =&gt; setSelectedLocation({})}<br/>      closeOnClick={true}<br/>      latitude={location.center[1]}<br/>      longitude={location.center[0]}&gt;<br/>        {location.place_name}<br/>      &lt;/Popup&gt;) : (false)}<br/>    &lt;/div&gt;<br/>  ))}<br/>&lt;/ReactMapGL&gt;<br/>}</span></pre><p id="9bee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mn mo mp mq b">&lt;Popup&gt;</code>ç»„ä»¶æ¥å—ä¸€ä¸ªonCloseå¤„ç†ç¨‹åºï¼Œè¯¥å¤„ç†ç¨‹åºå°†selectedLocationè®¾ç½®ä¸º<code class="fe mn mo mp mq b">{}</code>ã€‚</p><p id="ae2d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä»…æ­¤è€Œå·²ï¼æˆ‘ä»¬å·²ç»æˆåŠŸåœ°ç»˜åˆ¶äº†ä¸€å¼ åœ°å›¾ï¼Œåœ¨åœ°å›¾ä¸Šç»˜åˆ¶äº†ä¸€äº›å›¾é’‰ï¼Œå¹¶æˆåŠŸåœ°ç”¨å¼¹å‡ºçª—å£ç‚¹å‡»å®ƒä»¬ï¼è¿™æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆç»“æœ:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/9756610e061aa6fdacb1ed7b57f50d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9YWdT33rQihjv-5wxS8GQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The finished project</figcaption></figure><p id="0e80" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘è¿˜ä¸ºæ•´ä¸ªé¡¹ç›®åˆ¶ä½œäº†ä¸€ä¸ª<a class="ae ks" href="https://codesandbox.io/s/loving-frost-7nhgn" rel="noopener ugc nofollow" target="_blank">ä»£ç æ²™ç®±ï¼Œæ‰€ä»¥å¦‚æœæœ‰ä»€ä¹ˆä¸åˆç†çš„åœ°æ–¹ï¼Œè¯·éšæ„æŸ¥çœ‹ï¼</a></p><p id="b22d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç¼–ç å¿«ä¹ï¼</p></div></div>    
</body>
</html>
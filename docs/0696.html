<html>
<head>
<title>Handy JavaScript Array Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方便的JavaScript数组技巧</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/handy-javascript-array-tips-adac618d926?source=collection_archive---------3-----------------------#2019-11-27">https://javascript.plainenglish.io/handy-javascript-array-tips-adac618d926?source=collection_archive---------3-----------------------#2019-11-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f4d7ef6e630501f981e77ffa3927ba85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sm4ArS80v0xCKyGC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@bamin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pierre Bamin</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dffd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript和其他编程语言一样，有许多方便的技巧，让我们可以更容易地编写程序。在这篇文章中，我们将看看如何做不同的涉及数组的事情，比如检查一个对象是否是一个数组和组合数组。</p><h1 id="c81f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查对象是否是数组</h1><p id="e674" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有多种方法可以检查JavaScript对象或原始值是否是数组。最新的检查方法是使用<code class="fe me mf mg mh b">Array.isArray</code>方法。它有一个参数，可以是任何对象或原始值，我们要检查它是否是一个数组。如果是数组，它返回<code class="fe me mf mg mh b">true</code>，否则返回<code class="fe me mf mg mh b">false</code>。但是对于<code class="fe me mf mg mh b">TypedArray </code>对象，如<code class="fe me mf mg mh b">Int8Array</code>、<code class="fe me mf mg mh b">Uint8Array</code>、<code class="fe me mf mg mh b">Uint8ClampedArray</code>、<code class="fe me mf mg mh b">Int16Array</code>、<code class="fe me mf mg mh b">Uint16Array</code>、<code class="fe me mf mg mh b">Int32Array</code>、<code class="fe me mf mg mh b">Uint32Array</code>、<code class="fe me mf mg mh b">Float32Array</code>、<code class="fe me mf mg mh b">Float64Array</code>、<code class="fe me mf mg mh b">BigInt64Array</code>、<code class="fe me mf mg mh b">BigUint64Array</code>。它总是返回<code class="fe me mf mg mh b">false</code>。例如，如果我们编写以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f824" class="mq lc iq mh b gy mr ms l mt mu">console.log(Array.isArray([1, 2, 3]));<br/>console.log(Array.isArray(0));<br/>console.log(Array.isArray(null));<br/>console.log(Array.isArray({<br/>  a: 1<br/>}));<br/>console.log(Array.isArray(undefined));<br/>console.log(Array.isArray(Infinity));<br/>console.log(Array.isArray(new Uint8Array()));</span></pre><p id="ce1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">console.log</code>语句中得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c8d7" class="mq lc iq mh b gy mr ms l mt mu">true<br/>false<br/>false<br/>false<br/>false<br/>false<br/>false</span></pre><p id="bccb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是确定一个对象是否是数组的一个非常方便的方法。检查对象是否为数组的另一种方法是使用<code class="fe me mf mg mh b">instanceof</code>操作符。它通过检查<code class="fe me mf mg mh b">Array.prototype</code>是否在一个对象的原型链上来工作。使用<code class="fe me mf mg mh b">Array.isArray</code>时唯一失败但有效的情况是<code class="fe me mf mg mh b">instanceof</code>在跨帧检查对象时会失败，因为对象实例可能与使用<code class="fe me mf mg mh b">instanceof</code>操作符进行数组测试时使用的不同。我们可以在下面的代码中使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4d22" class="mq lc iq mh b gy mr ms l mt mu">console.log([1, 2, 3] instanceof Array);<br/>console.log(0 instanceof Array);<br/>console.log(null instanceof Array);<br/>console.log({<br/>    a: 1<br/>  }<br/>  instanceof Array);<br/>console.log(undefined instanceof Array);<br/>console.log(Infinity instanceof Array);<br/>console.log(new Uint8Array() instanceof Array);</span></pre><p id="1c8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">console.log</code>的输出应该和之前的完全一样，因为我们没有在一个帧中放置任何对象。<code class="fe me mf mg mh b">Array.isArray</code>是最简单和最健壮的解决方案，因为大多数现代浏览器都内置了这种方法，而且它可以跨框架工作。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/768cb7606ce84bf2e94eddea98e0740c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1k_mKYEfnYAxirTS"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@phoedobus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Edoardo Busti</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6d41" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组合数组</h1><p id="cd9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用现代JavaScript，将数组组合成一个数组比以往任何时候都容易。数组对象有一个在数组上被调用的<code class="fe me mf mg mh b">concat</code>方法，它接受一个或多个参数，我们希望将哪一个或多个数组或对象组合到被调用的数组中。请注意，它也可以接受其他非数组值，我们希望将这些值添加到调用它的数组中。它用新的数组值返回一个新的数组实例，这样我们就可以将一系列对<code class="fe me mf mg mh b">concat</code>方法的调用链接起来，将更多的数组组合成一个数组。例如，我们可以为最基本的用例编写以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7270" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const combinedArr = arr1.concat(arr2);<br/>console.log(combinedArr);</span></pre><p id="0a41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们得到<code class="fe me mf mg mh b">combinedArr</code>的值将是<code class="fe me mf mg mh b">[1, 2, 3, “a”, “b”, “c”]</code>。我们还可以传入多个参数，每个参数都是进入<code class="fe me mf mg mh b">concat</code>方法的数组，如下面的代码所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fc86" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = ['1', '2', '3'];<br/>const arr4 = ['d', 'e', 'f'];<br/>const arr5 = ['g', 'h', 'i'];<br/>const arr6 = [null, Infinity, NaN];<br/>const arr7 = [10, 11, 12];<br/>const arr8 = [{}, {<br/>  a: 1<br/>}, {<br/>  b: 2<br/>}];<br/>const combinedArr = arr1.concat(arr2, arr3, arr4, arr5, arr6, arr7, arr8);<br/>console.log(combinedArr);</span></pre><p id="078f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe me mf mg mh b">console.log</code>输出得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="41c9" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  1,<br/>  2,<br/>  3,<br/>  "a",<br/>  "b",<br/>  "c",<br/>  "1",<br/>  "2",<br/>  "3",<br/>  "d",<br/>  "e",<br/>  "f",<br/>  "g",<br/>  "h",<br/>  "i",<br/>  null,<br/>  null,<br/>  null,<br/>  10,<br/>  11,<br/>  12,<br/>  {},<br/>  {<br/>    "a": 1<br/>  },<br/>  {<br/>    "b": 2<br/>  }<br/>]</span></pre><p id="df9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所见，<code class="fe me mf mg mh b">concat</code>方法足够聪明，可以将多个数组合并到第一个数组中，并且我们将所有数组中的所有条目放在一个新数组中。从<code class="fe me mf mg mh b">concat</code>方法返回的数组没有引用原始数组。此外，它可以处理多种类型的数据。我们在里面传递什么都不重要，应该还是管用的。例如，如果我们有以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3b34" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = ['1', '2', '3'];<br/>const arr4 = ['d', 'e', 'f'];<br/>const arr5 = ['g', 'h', 'i'];<br/>const arr6 = [null, Infinity, NaN];<br/>const arr7 = [10, 11, 12];<br/>const arr8 = [{}, {<br/>  a: 1<br/>}, {<br/>  b: 2<br/>}];<br/>const combinedArr = arr1.concat(arr2, arr3, arr4, arr5, arr6, arr7, arr8, 1, 'a', {<br/>  c: 3<br/>});</span></pre><p id="b0bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，如果我们在<code class="fe me mf mg mh b">combinedArr</code>上运行<code class="fe me mf mg mh b">console.log</code>，我们会得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e5e5" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  1,<br/>  2,<br/>  3,<br/>  "a",<br/>  "b",<br/>  "c",<br/>  "1",<br/>  "2",<br/>  "3",<br/>  "d",<br/>  "e",<br/>  "f",<br/>  "g",<br/>  "h",<br/>  "i",<br/>  null,<br/>  null,<br/>  null,<br/>  10,<br/>  11,<br/>  12,<br/>  {},<br/>  {<br/>    "a": 1<br/>  },<br/>  {<br/>    "b": 2<br/>  },<br/>  1,<br/>  "a",<br/>  {<br/>    "c": 3<br/>  }<br/>]</span></pre><p id="db7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这非常有用，因为不必担心我们传入的对象的数据类型，也不必担心我们向<code class="fe me mf mg mh b">concat</code>方法传递了多少参数。我们传入的参数越多越好。由于<code class="fe me mf mg mh b">concat</code>方法返回一个新的数组，其中的值组合成一个数组，我们还可以链接<code class="fe me mf mg mh b">concat</code>方法的调用，将多个内容组合成一个数组，如下面的代码所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="53f4" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = ['1', '2', '3'];<br/>const arr4 = ['d', 'e', 'f'];<br/>const arr5 = ['g', 'h', 'i'];<br/>const arr6 = [null, Infinity, NaN];<br/>const arr7 = [10, 11, 12];<br/>const arr8 = [{}, {<br/>  a: 1<br/>}, {<br/>  b: 2<br/>}];<br/>const combinedArr = arr1<br/>  .concat(arr2)<br/>  .concat(arr3)<br/>  .concat(arr4)<br/>  .concat(arr5)<br/>  .concat(arr6)<br/>  .concat(arr7)<br/>  .concat(arr8)<br/>  .concat(1)<br/>  .concat('a', {<br/>    c: 3<br/>  });</span></pre><p id="9428" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们在<code class="fe me mf mg mh b">combinedArr</code>上运行<code class="fe me mf mg mh b">console.log</code>时，我们应该得到以下结果:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c64" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  1,<br/>  2,<br/>  3,<br/>  "a",<br/>  "b",<br/>  "c",<br/>  "1",<br/>  "2",<br/>  "3",<br/>  "d",<br/>  "e",<br/>  "f",<br/>  "g",<br/>  "h",<br/>  "i",<br/>  null,<br/>  null,<br/>  null,<br/>  10,<br/>  11,<br/>  12,<br/>  {},<br/>  {<br/>    "a": 1<br/>  },<br/>  {<br/>    "b": 2<br/>  },<br/>  1,<br/>  "a",<br/>  {<br/>    "c": 3<br/>  }<br/>]</span></pre><p id="4a5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在ES6中，我们有spread运算符，通过将数组的值分布到另一个数组中，我们可以使用它将数组合并为一个数组，并且我们可以在每个数组分布后对一个数组中的所有数组进行同样的操作，数组之间用逗号分隔。spread还适用于所有类似数组的对象，如<code class="fe me mf mg mh b">arguments</code>、集合、地图或任何具有<code class="fe me mf mg mh b">Symbol.iterator</code>方法的对象，这些方法返回一个生成器，这样我们就可以用<code class="fe me mf mg mh b">for...of</code>循环遍历对象中的项目。要使用spread操作符将数组和对象组合成一个数组，我们可以编写如下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7db9" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = ['1', '2', '3'];<br/>const combinedArr = [...arr1, ...arr2, ...arr3];</span></pre><p id="62df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a5aa" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  1,<br/>  2,<br/>  3,<br/>  "a",<br/>  "b",<br/>  "c",<br/>  "1",<br/>  "2",<br/>  "3"<br/>]</span></pre><p id="9ec7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在<code class="fe me mf mg mh b">combinedArr</code>上运行<code class="fe me mf mg mh b">console.log</code>时。它也像<code class="fe me mf mg mh b">concat</code>方法一样处理不同数组中的重叠值。例如，我们可以编写以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a79f" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = [1, '2', '3'];<br/>const combinedArr = [...arr1, ...arr2, ...arr3];</span></pre><p id="5823" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">得到<code class="fe me mf mg mh b">combinedArr</code>的值是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ff6" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  1,<br/>  2,<br/>  3,<br/>  "a",<br/>  "b",<br/>  "c",<br/>  1,<br/>  "2",<br/>  "3"<br/>]</span></pre><p id="5226" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所看到的，我们在<code class="fe me mf mg mh b">arr1</code>和<code class="fe me mf mg mh b">arr3</code>中都有值<code class="fe me mf mg mh b">1</code>，但是它们都变成了<code class="fe me mf mg mh b">combinedArr</code>，这很好。我们还可以在spread操作之前、之后或之间将对象放入新数组，如以下代码所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9048" class="mq lc iq mh b gy mr ms l mt mu">const arr1 = [1, 2, 3];<br/>const arr2 = ['a', 'b', 'c'];<br/>const arr3 = [1, '2', '3'];<br/>const combinedArr = ['c', ...arr1, 'c', ...arr2, 'c', ...arr3];</span></pre><p id="1893" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">combinedArr</code>的如下值:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f26a" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  "c",<br/>  1,<br/>  2,<br/>  3,<br/>  "c",<br/>  "a",<br/>  "b",<br/>  "c",<br/>  "c",<br/>  1,<br/>  "2",<br/>  "3"<br/>]</span></pre><p id="91c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着<code class="fe me mf mg mh b">concat</code>方法的特性可以很容易地被spread操作符复制，我们不必传入一长串参数或者将<code class="fe me mf mg mh b">concat</code>方法的多个调用链接在一起，将数组和其他类型的对象组合成一个数组。</p><p id="c7d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有多种方法可以检查JavaScript对象或原始值是否是数组。最新的检查方法是使用<code class="fe me mf mg mh b">Array.isArray</code>方法，但是我们也可以使用旧的<code class="fe me mf mg mh b">instanceof</code>操作符来检查一个对象是否是一个数组。<code class="fe me mf mg mh b">Array.isArray</code>跨帧工作，因此比<code class="fe me mf mg mh b">instanceof</code>操作符更健壮。使用现代JavaScript，将数组组合成一个数组比以往任何时候都容易。数组对象有一个<code class="fe me mf mg mh b">concat</code>方法，它在数组上被调用，并接受一个或多个参数，我们希望将哪一个或多个数组或对象组合到它被调用的数组中。请注意，它也可以接受其他非数组值，我们希望将这些值添加到调用它的数组中。它返回一个新的数组实例，其中包含新数组中的所有组合值。</p></div></div>    
</body>
</html>
<html>
<head>
<title>The JavaScript Map Type</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript映射类型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-javascript-map-type-ec7d3e1cff5d?source=collection_archive---------8-----------------------#2020-08-30">https://javascript.plainenglish.io/the-javascript-map-type-ec7d3e1cff5d?source=collection_archive---------8-----------------------#2020-08-30</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div class="gi gj jo"><img src="../Images/3a5d211447162b2ff4fcdfcc7a4d24cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*dCFA5iaFQz78BpmXEU6zyg.jpeg"/></div><figcaption class="jv jw gk gi gj jx jy bd b be z dk">Image: <a class="ae jz" href="https://pixabay.com/illustrations/background-atlas-folder-old-1762690/" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="7292" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">地图数据类型易于理解和使用，但由于用于指代同一事物的名称多种多样，该主题可能会引起混淆。最重要的是，JavaScript没有自己的映射类型，直到ES6出现，我们不得不临时使用一个普通的对象。</p><p id="9045" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">在这篇文章中，我将在使用一个对象和一个ES6地图之前先浏览一下什么是地图。</p><p id="5f70" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">在JavaScript中通常称为映射的数据结构，尤其是自从引入ES6映射类型以来，也被称为字典或关联数组，有时也称为哈希表或哈希表。这最后两个名字有些误导，因为它们指的是一种可能的底层实现，而不是抽象的行为集。</p><p id="0715" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">映射是键/值对的集合，或者换句话说，是用于引用相应数据值的名称或标签的集合。在一个映射中，每个键必须是唯一的。以下操作是需要可用的最少操作，尽管通常实现会提供更多操作。</p><ul class=""><li id="228a" class="ky kz ir kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">插入新对</li><li id="2715" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">删除现有对</li><li id="d240" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">编辑现有对</li><li id="eb71" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">读取给定键的值</li></ul><p id="5766" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">JavaScript映射类型还提供以下功能:</p><ul class=""><li id="6a2a" class="ky kz ir kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">获取条目的数量</li><li id="f562" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">在一次操作中删除所有条目</li><li id="638c" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">获取键/值对</li><li id="79c9" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">拿钥匙</li><li id="e355" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">获取值</li><li id="5171" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">检查密钥是否存在</li><li id="c045" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">对所有条目运行函数的forEach函数</li></ul><h2 id="c9f2" class="lm ln ir bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">该项目</h2><p id="d9f2" class="pw-post-body-paragraph ka kb ir kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ik bi translated">这是一个快速简单的项目，它给出了一个非常简单的传统的基于对象的地图的演示，然后是一个更全面的ES6地图类型的演示。您可以从<a class="ae jz" href="https://github.com/CodeDrome/javascript-map-type" rel="noopener ugc nofollow" target="_blank"> Github库</a>中克隆或下载源代码。</p><p id="c28f" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">(该项目还包括一个名为<strong class="kc is"> console.js </strong>的小实用程序文件，它提供了一个函数，以模拟终端的方式将文本输出到HTML页面中的元素。)</p><p id="af90" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">JavaScript位于一个名为<strong class="kc is"> map.js </strong>的文件中，这是该文件的第一部分。</p><figure class="mk ml mm mn gu js"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="96ad" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">如你所见，<code class="fe mq mr ms mt b">useObjectAsMap</code>函数在<code class="fe mq mr ms mt b">window.onload</code>中被调用，而第二个函数<code class="fe mq mr ms mt b">useMap</code>，我们稍后会看到，被注释掉了。</p><p id="b66b" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated"><code class="fe mq mr ms mt b">useObjectAsMap</code>函数非常简单:它只是创建一个<code class="fe mq mr ms mt b">Object</code>，然后添加一些属性来模拟地图数据结构。然后，我检索对象的键，打印出大小和键/值对。</p><p id="9004" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这种方法本身没有什么错误，毫无疑问，它已经被使用了数百万次。然而，它并不完美，ES6 Map提供了一个更优化的实现。</p><p id="1442" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">如果你在浏览器中打开<strong class="kc is">map.htm</strong>，你会看到类似这样的内容。</p><figure class="mk ml mm mn gu js gi gj paragraph-image"><div class="gi gj mu"><img src="../Images/23ab6769854a702e75e8f4fd95ef1898.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*tj-khS0rzBmBrQ0meawTVg.png"/></div></figure><p id="8c7c" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">现在我们来看看<code class="fe mq mr ms mt b">useMap</code>函数。</p><figure class="mk ml mm mn gu js"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="08f5" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这段代码应该是不言自明的，但是一些额外的注释可能会有所帮助。</p><ul class=""><li id="78ee" class="ky kz ir kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">使用<code class="fe mq mr ms mt b">set</code>方法添加键/值对。<br/>代码如<br/> <code class="fe mq mr ms mt b">jaguars[“XK120”] = 1948; // WRONG!</code> <br/>不会导致错误但也不会将项目添加到<code class="fe mq mr ms mt b">Map</code>。</li><li id="ccf1" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">我使用字符串作为键，但是令人惊讶的是你可以使用任何东西，包括对象和函数。我还没有机会使用一个函数作为一个键，但希望有一天。(软件开发者有些奇怪的野心！)</li><li id="78ae" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">使用<code class="fe mq mr ms mt b">size</code>方法检索项目数量。<code class="fe mq mr ms mt b">length</code>将返回0。</li><li id="7d13" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">我们可以使用<code class="fe mq mr ms mt b">has</code>来检查钥匙的存在。</li><li id="709a" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">您可以获得键/值对，因此使用<code class="fe mq mr ms mt b">entries</code>方法迭代<code class="fe mq mr ms mt b">Map</code>。</li><li id="c859" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">您也可以分别使用<code class="fe mq mr ms mt b">keys</code>和<code class="fe mq mr ms mt b">values</code>来分别获取键或值。</li><li id="58ba" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">如果你有一个键，你可以用<code class="fe mq mr ms mt b">get</code>方法读取相应的值。</li><li id="4d42" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">也可以使用<br/> <code class="fe mq mr ms mt b">for (let [key, value] of jaguars)</code>迭代条目</li><li id="c41a" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">迭代器按照条目被插入的顺序返回条目。</li><li id="c4d9" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">您可以使用<code class="fe mq mr ms mt b">delete</code>方法删除单个条目。</li><li id="d841" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">您可以使用<code class="fe mq mr ms mt b">clear</code>方法删除所有条目。</li><li id="9e85" class="ky kz ir kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">除了比<code class="fe mq mr ms mt b">Object</code>更直观之外，<code class="fe mq mr ms mt b">Map</code>还为频繁的设置和删除操作提供了更好的性能。</li></ul><p id="e509" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">如果您注释掉<code class="fe mq mr ms mt b">useObjectAsMap</code>并取消<code class="fe mq mr ms mt b">window.onload</code>中的<code class="fe mq mr ms mt b">useMap</code>注释，然后刷新页面，您将看到对我们的<code class="fe mq mr ms mt b">Map</code>对象的各种操作的结果。</p><figure class="mk ml mm mn gu js gi gj paragraph-image"><div class="gi gj mv"><img src="../Images/12c1e86e2e6f10ea1e325dc8a7bb11e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*uQ4nx8TfTFYEYzrLHBXm4Q.png"/></div></figure></div></div>    
</body>
</html>
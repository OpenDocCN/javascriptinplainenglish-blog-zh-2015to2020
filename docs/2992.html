<html>
<head>
<title>How to implement the filter method in JavaScript from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中从头开始实现filter方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-implement-the-filter-method-in-javascript-from-scratch-da4ae2ca4321?source=collection_archive---------3-----------------------#2020-08-16">https://javascript.plainenglish.io/how-implement-the-filter-method-in-javascript-from-scratch-da4ae2ca4321?source=collection_archive---------3-----------------------#2020-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="84e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">你可能听说过JavaScript的内置函数。如果不是，那就没问题。在本文中，我将向您展示如何从头开始实现您自己的<code class="fe ku kv kw kx b">filter</code>方法。</p><p id="9777" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一路上，你会学到一些关于原型继承、一等公民的功能和<code class="fe ku kv kw kx b">this</code>关键字的知识。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/3bdf40d299a206dd16ee10a82cf36aab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DNSbSj4_iL9Hz3-l"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Photo by <a class="ae lo" href="https://unsplash.com/@nate_dumlao?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nathan Dumlao</a> on <a class="ae lo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ff14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在JS中，<code class="fe ku kv kw kx b">filter</code>方法被应用于一个数组。它将一个函数作为谓词，并返回一个新数组，其中包含通过该谓词的所有值。</p><p id="4e42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ku kv kw kx b">filter</code>方法是数组对象中的内置函数，也就是说，你不必创建它。它已经存在，可供您使用。但是，如果您想用新的属性扩展现有的对象，您可以很容易地做到，因为JS是一种动态语言(意味着您可以在运行时添加新的属性),只需使用点符号，例如</p><pre class="kz la lb lc gt lp kx lq bn lr ls bi"><span id="d240" class="lt lu iq kx b be lv lw l lx ly">let myObject = {};<br/>console.log(myObject.foo); // undefined<br/>myObject.foo = "a";<br/>console.log(myObject.foo); // a</span></pre><p id="6aef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是让我们说，你不想只扩展到一个具体的对象，而是扩展到对象的整个超类型，例如一个数组？</p><p id="bb1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在像C++或Java这样的语言中，你可以扩展这个类。但是，在JS中没有类的概念，只有我们所说的<code class="fe ku kv kw kx b">prototype</code>。注意在ES6中引入了<code class="fe ku kv kw kx b">class</code>类型，但它只是一个抽象层。底下你还有<code class="fe ku kv kw kx b">prototype</code>。但是什么是<code class="fe ku kv kw kx b">prototype</code>？</p><p id="5417" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个对象都有一个隐藏的属性叫做<code class="fe ku kv kw kx b">prototpye</code>。<code class="fe ku kv kw kx b">property</code>本身是一个对象，也有一个<code class="fe ku kv kw kx b">prototype </code>属性等等。这被称为“原型链”。原型链的末端是<code class="fe ku kv kw kx b">null</code>对象。他是唯一没有<code class="fe ku kv kw kx b">prototype</code>属性的对象。但是我们怎么处理财产呢？</p><p id="49f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为原型链中的所有对象(也包括数组)都将继承<code class="fe ku kv kw kx b">prototype</code>属性中的所有内容，所以我们可以将我们的自定义函数扩展到<code class="fe ku kv kw kx b">prototype</code>，并且可以预期每个具体对象都将拥有我们的自定义函数:</p><pre class="kz la lb lc gt lp kx lq bn lr ls bi"><span id="362d" class="lt lu iq kx b be lv lw l lx ly">Array.prototype.helloWorld = () =&gt; console.log("All arrays will have this new property");<br/>const arr = [];<br/>console.log(arr.helloWorld()); // All arrays will have this new property</span></pre><p id="5842" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了<code class="fe ku kv kw kx b">prototype</code>，我们现在知道如何将一个属性扩展到一个对象的所有超类型。让我们实现我们的自定义过滤器功能。我们将我们的自定义过滤函数命名为<code class="fe ku kv kw kx b">fooFilter</code></p><p id="958d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为JS也是一种函数式编程语言，它可以把其他函数作为参数。这个属性在JS语言中被称为一等公民。这意味着函数被当作任何其他变量对待，也就是说，你可以把它作为参数传递，你可以把它赋给一个变量，或者一个函数也可以返回其他函数。</p><pre class="kz la lb lc gt lp kx lq bn lr ls bi"><span id="04ba" class="lt lu iq kx b be lv lw l lx ly">Array.prototype.fooFilter = function(checkElement) {<br/>  const returnArr = [];<br/>  // ... loop through all elements in the array <br/>  return returnArr;<br/>};</span></pre><p id="62c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">函数<code class="fe ku kv kw kx b">checkElement</code>检查数组中的每一项。如果它满足某个条件，即如果函数返回<code class="fe ku kv kw kx b">true</code>(实际上是<code class="fe ku kv kw kx b">truthy</code>)，那么它将把元素放入一个(新的)数组。最后它会返回这个数组。但是我们如何访问这个元素呢？</p><p id="2725" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以通过<code class="fe ku kv kw kx b">this</code>关键字访问这些元素。因为在JS中<code class="fe ku kv kw kx b">this</code>指的是调用<code class="fe ku kv kw kx b">this</code>所在函数的对象。</p><pre class="kz la lb lc gt lp kx lq bn lr ls bi"><span id="c8e5" class="lt lu iq kx b be lv lw l lx ly">Array.prototype.fooFilter = function(checkElement) {<br/>  const returnArr = [];<br/>  for (let i = 0; i &lt; this.length; i++) {<br/>    if (checkElement(this[i])) {<br/>      returnArr.push(this[i]);<br/>    }<br/>  }<br/>  return returnArr;<br/>};</span></pre><p id="07b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们有一个数字数组<code class="fe ku kv kw kx b">arr</code>,想要过滤所有偶数:</p><pre class="kz la lb lc gt lp kx lq bn lr ls bi"><span id="d946" class="lt lu iq kx b be lv lw l lx ly">const arr = [1,3,5,6,9,11,26,8,35,10,7,42,88];<br/>console.log(arr.fooFilter(x =&gt; x % 2 === 0)); // [6,26,8,10,42,88]</span></pre><p id="1115" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！我们刚刚实现了自己的<code class="fe ku kv kw kx b">filter</code>函数。你有什么问题吗？只是让我知道。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Closures and Lexical Scoping in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的闭包和词法范围</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/closures-and-lexical-scoping-in-javascript-9ebe8d353662?source=collection_archive---------9-----------------------#2020-10-08">https://javascript.plainenglish.io/closures-and-lexical-scoping-in-javascript-9ebe8d353662?source=collection_archive---------9-----------------------#2020-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ec1222ee55d4853846cae4d183af9091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gTbfGkws7amkKbq5"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5d6f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript中的变量有两种作用域，即局部和全局作用域。如果任何变量是在函数内部声明的，那么它就是局部变量，如果变量是在函数外部声明的，那么它就是全局变量。变量的范围由它们在代码中的位置定义。</p><h1 id="3e43" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">词汇范围</h1><p id="279d" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">JavaScript遵循函数的词法范围。词法作用域意味着任何子作用域都可以访问父作用域中定义的变量，即内部函数可以访问全局变量。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="d6cf" class="mk kz in mg b gy ml mm l mn mo">var<!-- --> <!-- -->a = 5;</span><span id="da46" class="mk kz in mg b gy mp mm l mn mo">function<!-- --> <!-- -->sum() {<br/>  return<!-- --> <!-- -->a + 6;<br/>}</span><span id="7941" class="mk kz in mg b gy mp mm l mn mo">console.log(sum()); // 11</span></pre><p id="a28f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的例子中，函数<code class="fe mq mr ms mg b">sum()</code>使用全局变量<code class="fe mq mr ms mg b">"a"</code>来执行加法。这意味着变量<code class="fe mq mr ms mg b">"a"</code>在<code class="fe mq mr ms mg b">sum()</code>的范围内。</p><h1 id="a890" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">关闭</h1><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="1936" class="mk kz in mg b gy ml mm l mn mo">var<!-- --> <!-- -->a = 5;</span><span id="869e" class="mk kz in mg b gy mp mm l mn mo">function<!-- --> <!-- -->sum() {<br/>  return<!-- --> <!-- -->a + 6;<br/>}</span><span id="dad5" class="mk kz in mg b gy mp mm l mn mo">console.log(sum()); // 11</span></pre><p id="c1dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">闭包是一个可以访问父作用域变量的函数。上面的函数可以访问全局变量<code class="fe mq mr ms mg b">“a”</code>，所以它是一个闭包。</p><p id="65ec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你要做<code class="fe mq mr ms mg b">console.dir(sum)</code>，那么你可以在<code class="fe mq mr ms mg b">[[scopes]]</code>属性中看到全局变量<code class="fe mq mr ms mg b">“a”</code>的存在。这意味着函数<code class="fe mq mr ms mg b">sum()</code>可以访问变量<code class="fe mq mr ms mg b">“a”</code>。查看下面的片段。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/3eecf9fe564f01659f6439c11e6ccc86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/0*yu51lFPsSZXpWdY-.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">jscurious.com</figcaption></figure><p id="2305" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们看另一个关于内部函数的闭包的例子。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="dac2" class="mk kz in mg b gy ml mm l mn mo">function<!-- --> <!-- -->sum(outerValue) {<br/>  return<!-- --> <!-- -->function(innerValue) {<br/>      return<!-- --> <!-- -->outerValue + innerValue;<br/>  }<br/>}</span><span id="7510" class="mk kz in mg b gy mp mm l mn mo">const findSum = sum(5);</span><span id="3192" class="mk kz in mg b gy mp mm l mn mo">console.log(findSum(10)); // 15</span></pre><p id="9df6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当你调用<code class="fe mq mr ms mg b">sum(5)</code>时，它返回一个保存变量<code class="fe mq mr ms mg b">outerValue</code>的函数。所以当你调用<code class="fe mq mr ms mg b">findSum(10)</code>的时候，它把<code class="fe mq mr ms mg b">outerValue</code>的值和<code class="fe mq mr ms mg b">innerValue</code>的值相加。</p><p id="48a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">即使在外部函数关闭后，内部函数仍保持<code class="fe mq mr ms mg b">outerValue</code>，这称为关闭。如果你会做<code class="fe mq mr ms mg b">console.dir(findSum)</code>，你可以在<code class="fe mq mr ms mg b">[[scopes]]</code>属性里面看到，<code class="fe mq mr ms mg b">outerValue</code>是存在的。这意味着内部函数可以访问变量<code class="fe mq mr ms mg b">outerValue</code>。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/05dddc147589eab2ad349ce4017d3afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/0*dy2vgdjlQGpq9XcT.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">jscurious.com</figcaption></figure><p id="eef6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以下次如果有人问你JavaScript中的闭包，你知道该怎么回答。</p></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><h1 id="46ca" class="ky kz in bd la lb nb ld le lf nc lh li lj nd ll lm ln ne lp lq lr nf lt lu lv bi translated">你可能也喜欢</h1><ul class=""><li id="0f7c" class="ng nh in kc b kd lw kh lx kl ni kp nj kt nk kx nl nm nn no bi translated">如何在JavaScript中处理不可变数据</li><li id="22be" class="ng nh in kc b kd np kh nq kl nr kp ns kt nt kx nl nm nn no bi translated"><a class="ae jz" href="https://jscurious.com/what-are-call-apply-and-bind-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的call()、apply()和bind()是什么</a></li><li id="a52d" class="ng nh in kc b kd np kh nq kl nr kp ns kt nt kx nl nm nn no bi translated"><a class="ae jz" href="https://jscurious.com/es6-destructuring-assignment/" rel="noopener ugc nofollow" target="_blank">JavaScript中的ES6析构赋值是什么</a></li></ul></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><p id="b569" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nu">感谢您的宝贵时间</em> ☺️ <br/>欲了解更多网络开发博客，请访问<a class="ae jz" href="http://jscurious.com/" rel="noopener ugc nofollow" target="_blank">jscurious.com</a></p></div></div>    
</body>
</html>
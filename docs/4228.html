<html>
<head>
<title>Build Awesome Map Apps with React Native and Mapbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Native和Mapbox构建出色的地图应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-awesome-map-apps-with-react-native-and-mapbox-6f0709fd5efa?source=collection_archive---------6-----------------------#2020-11-26">https://javascript.plainenglish.io/build-awesome-map-apps-with-react-native-and-mapbox-6f0709fd5efa?source=collection_archive---------6-----------------------#2020-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/196059d3ab564edece43cc491b0da45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yizsWY8RiXuhSz-X0BICPQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Made by the author in <a class="ae kc" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank">Canva</a></figcaption></figure><p id="0367" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您是否正在使用React Native构建移动应用程序，并希望将地图组件添加到项目中？别再往前看了，我们将在本文中讨论这个主题。我们将浏览一个使用Mapbox SDK构建React本地应用程序的示例。</p><p id="76cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不熟悉Mapbox，这是一个你可以在几乎任何平台上开发的地图服务。对于本文，我们将利用React Native SDK，它使构建地图变得轻而易举。Mapbox有一个非常慷慨的免费层，覆盖多达25，000名每月活跃用户。你可能在某个时候见过Mapbox地图，因为它被许多大公司广泛使用。</p><p id="d092" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Mapbox提供的地图具有漂亮的外观，并且可以非常简单地添加地图组件所需的功能。让我们开始构建一个示例应用程序来展示这是如何工作的。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/25a785d39b963dca92cd5c2e69ddaa1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4bWWs3qBg_9GZcXBzemAIA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screenshot by the author</figcaption></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="b0ae" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">示例应用程序</h1><p id="9d88" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">为了演示Mapbox与React Native配合使用有多简单，我们将构建一个简单的示例应用程序。首先，我们需要生成一个新的空React本地项目，然后才能开始编写代码。您需要首先安装React Native CLI，然后可以在终端中运行以下命令来引导我们的新项目。</p><p id="0f93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mq">注:</em> </strong> <em class="mq">为设置您的本地环境进行React原生开发遵循</em> <a class="ae kc" href="https://reactnative.dev/docs/environment-setup" rel="noopener ugc nofollow" target="_blank"> <em class="mq">本文档来自React原生文档</em> </a> <em class="mq">。</em></p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="2891" class="mw lo iq ms b gy mx my l mz na">npx react-native init MapboxExampleApp</span></pre><p id="b761" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将需要几分钟的时间来完成，一旦完成，您将会看到在您的终端上运行您的应用程序的说明，如果您使用的是macOS，它将类似于我下面的屏幕截图。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/45d88e1e20d53be486c821f2ff4d0b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qp6N3uc1GHAY3le1Y82BgA.png"/></div></div></figure><p id="def4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在运行应用程序之前，我们还需要完成一个步骤，那就是安装Mapbox React Native SDK。请注意，这是一个非官方的库，它利用官方的Mapbox iOS和Android SDKs在React Native中构建Mapbox。你可以在他们的Github页面上阅读更多关于这个库的信息。</p><p id="dc6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在终端中运行下面的命令来添加地图库。</p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="6952" class="mw lo iq ms b gy mx my l mz na">cd /MapboxExampleApp<br/>npm install @react-native-mapbox-gl/maps --save</span><span id="a6ff" class="mw lo iq ms b gy nc my l mz na">/* Extra step for iOS <br/>npx pod-install</span></pre><p id="1ac4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在IDE中打开新项目后，我们要做的第一步是清理现有的<strong class="kf ir"> <em class="mq"> App.js </em> </strong>文件，为我们的代码腾出空间。打开并更新内容以反映以下内容。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="5844" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们说，首先，我们想建立一个最简单的地图的例子。我们可以通过更新我们的代码来做到这一点。你需要做的第一件事是在<a class="ae kc" href="https://www.mapbox.com/" rel="noopener ugc nofollow" target="_blank">地图框</a>上注册一个账户，如果你还没有注册的话。这样做是免费的，你甚至不需要输入信用卡就可以开始使用免费层。</p><p id="af1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">登录到您的帐户后，您将看到一个API密钥，我们需要将它添加到我们的代码中以开始使用。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/fb33f2c911c21a86427039d4adf04eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNGMRdClf-t7KTNIDI1kXg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screenshot by the author</figcaption></figure><p id="7ee3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从您的Mapbox仪表板中复制访问令牌，您将希望将它添加到我们下面的示例应用程序的更新代码中。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="80d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用以下代码，如果您在模拟器或设备上重新加载应用程序，地图应该看起来像下面的截图，地图相机位于堪萨斯城的中心。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/1739f79bf3e85c5615cdb64f8a03ca71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxqjrxpdDJG-wGBVvbwf6Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screenshot by the author</figcaption></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="23ee" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">地图交互</h1><p id="2f80" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我们有了一个良好的开端。我们的应用程序中有一个地图，用户可以与之交互并四处拖动。接下来，让我们通过添加一些交互来使它变得更有趣一些。我们将为<code class="fe nh ni nj ms b">onPress</code>添加一个处理程序，它将捕获当前所在州的纬度和经度，并在我们的地图上显示这些信息。</p><p id="3210" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要实现此功能，请更新代码以匹配下面的示例。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6a0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应该可以了。重新加载应用程序，并看到下面的屏幕截图，我们的工作在行动中。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/99285692268f9c16f07940e590e5074c.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/1*3mySg8Kp5Dx-n12soRZ6Vw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screen capture by the author</figcaption></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="60f6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">地图点</h1><p id="0742" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">现在效果很好。接下来，让我们在地图上添加一些点，让事情变得更有趣一些。下面就为KC我最喜欢的几个烧烤店补充几点吧。</p><p id="d507" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将代码更新为以下内容，在地图上添加一些点。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="417b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在代码中看到，增加点数非常简单。我们为每个想要在地图上显示的坐标添加了一个<code class="fe nh ni nj ms b">PointAnnotation</code>组件。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/c833ef769e529e87d8eec842dd8bb996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XlqRdUf-BAQj9rN-sG9LKA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screenshot by the author</figcaption></figure><p id="2b01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在地图上有一些点，但是如何与这些点互动呢？如果用户可以选择一个点，并将餐馆的显示名称添加到地图底部带有坐标的数据弹出窗口中，岂不是很酷？让我们将代码更新为下面的代码来实现它。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="a4f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到我们为<code class="fe nh ni nj ms b">onSelect</code>事件的点添加了一个事件处理程序，它捕获了地图上所选点的<code class="fe nh ni nj ms b">id</code>和坐标。</p><p id="8be4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下面的屏幕截图中查看结果。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/eb446cd7081cd1982591f7a87ff5bed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/1*J5nKuQDG6Vu7tuwggZtuaw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Screen capture by the author</figcaption></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><h1 id="f076" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">包裹</h1><p id="e3d2" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">这只是触及了Mapbox包含的所有功能的表面，但这是如何开始将Mapbox添加到React本机应用程序的快速介绍。正如你所看到的，这是非常简单的起床和去。感谢阅读！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Best Vue Libraries for Watching Visibility of Items and Drag and Drop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">观看项目可见性和拖放的最佳Vue库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-vue-libraries-for-watching-visibility-of-items-and-drag-and-drop-7aff924d99ff?source=collection_archive---------4-----------------------#2020-05-19">https://javascript.plainenglish.io/best-vue-libraries-for-watching-visibility-of-items-and-drag-and-drop-7aff924d99ff?source=collection_archive---------4-----------------------#2020-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cabac5c50b598453ad1fb1974536bf98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tJEAdoTMmS8j21um"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jwimmerli?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">jean wimmerlin</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="aa7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="c04f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何观察项目的可见性，并使用第三方包进行拖放。</p><h1 id="1a28" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">vue-观察-可见度</h1><p id="0dca" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">vue-observe-visibility</code>包让我们观察组件模板中任何给定HTML元素的可见性状态。</p><p id="47f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使用交叉点观察器API来观察元素的可见性。</p><p id="3ca7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以按如下方式安装它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c58e" class="mq lc iq mh b gy mr ms l mt mu">npm install --save vue-observe-visibility</span></pre><p id="dd1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以将它作为脚本添加到HTML代码中，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="de55" class="mq lc iq mh b gy mr ms l mt mu">&lt;script src="https://unpkg.com/vue-observe-visibility/dist/vue-observe-visibility.min.js"&gt;&lt;/script&gt;</span></pre><p id="71b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以如下使用它:</p><p id="c35a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">main.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8978" class="mq lc iq mh b gy mr ms l mt mu">import Vue from "vue";<br/>import App from "./App.vue";<br/>import VueObserveVisibility from "vue-observe-visibility";</span><span id="4e1a" class="mq lc iq mh b gy mv ms l mt mu">Vue.use(VueObserveVisibility);<br/>Vue.config.productionTip = false;</span><span id="cbdf" class="mq lc iq mh b gy mv ms l mt mu">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="781c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a7cc" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div v-for="n in 100" :key="n" v-observe-visibility="visibilityChanged"&gt;{{n}}&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="34f7" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  methods: {<br/>    visibilityChanged(isVisible, entry) {<br/>      console.log(<br/>        `${entry.target.innerText} is ${isVisible ? "visible" : "invisible"}`<br/>      );<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="091f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe me mf mg mh b">main.js</code>中注册了<code class="fe me mf mg mh b">VueObserveVisibility</code>包，这样我们就可以在整个应用程序中使用它。</p><p id="a777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有<code class="fe me mf mg mh b">App.vue</code>，它有一个div列表，每个div显示一个数字。</p><p id="3c39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在每个div中，我们在<code class="fe me mf mg mh b">methods</code>属性中使用带有<code class="fe me mf mg mh b">visibilityChanged</code>方法的<code class="fe me mf mg mh b">v-observe-visibility</code>指令来记录每个项目的可见性。</p><p id="108a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">entry</code>对象是事件对象，它具有被监视元素的<code class="fe me mf mg mh b">target</code>属性。</p><p id="fbe9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">invisible</code>属性是一个布尔值，表示给定的项目是否可见。</p><p id="e27f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们上下滚动页面时，我们会看到类似这样的内容:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="065f" class="mq lc iq mh b gy mr ms l mt mu">...<br/>31 is invisible<br/>59 is visible<br/>30 is invisible<br/>...</span></pre><p id="cef0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们滚动时从控制台日志输出。</p><p id="c123" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以将<code class="fe me mf mg mh b">once</code>选项添加到我们作为<code class="fe me mf mg mh b">v-observe-visibility</code>指令的值传入的对象中，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b677" class="mq lc iq mh b gy mr ms l mt mu">&lt;div v-observe-visibility="{<br/>  callback: visibilityChanged,<br/>  once: true,<br/>}"&gt;<br/>  ...<br/>&lt;/div&gt;</span></pre><p id="6d9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，当元素第一次加载时，我们只能看到内部元素的可见性。</p><p id="5eb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以添加一个<code class="fe me mf mg mh b">throttle</code>选项，这样回调就不会被太频繁地调用。例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1adc" class="mq lc iq mh b gy mr ms l mt mu">&lt;div v-observe-visibility="{<br/>  callback: visibilityChanged,<br/>  throttle: 300,<br/>}"&gt;<br/>  ...<br/>&lt;/div&gt;</span></pre><p id="b879" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码将延迟调用<code class="fe me mf mg mh b">visibilityChanged</code>回调买入300ms。</p><p id="3ded" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过添加一个<code class="fe me mf mg mh b">throttleOptions</code>属性来调节选项，该属性采用一个<code class="fe me mf mg mh b">leading</code>选项在可见性改变时第一时间触发回调，而无需等待调节延迟。</p><p id="e659" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以是<code class="fe me mf mg mh b">visible</code>、<code class="fe me mf mg mh b">hidden</code>或<code class="fe me mf mg mh b">both</code>。</p><p id="eeeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过如下方式传入一个falsy值来禁用某个项目上的观察者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7cf4" class="mq lc iq mh b gy mr ms l mt mu">&lt;div<br/>  v-for="n in 100"<br/>  :key="n"<br/>  v-observe-visibility="n === 100 ? visibilityChanged : false"<br/>&gt;<br/>  //...<br/>&lt;/div&gt;</span></pre><p id="5044" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码将只观察最后一项的可见性变化。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/0b4ff8e42812a6441d611f5588d43065.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5ETGr1GCoAHly-3b"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mjsleeper?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Matthew Sleeper</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e0e5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">v形拖曳</h1><p id="0151" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">指令让我们可以轻松地处理项目的拖动。</p><p id="0be0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="915a" class="mq lc iq mh b gy mr ms l mt mu">npm install --save v-dragged</span></pre><p id="3f3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以如下使用它:</p><p id="768c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">main.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="46aa" class="mq lc iq mh b gy mr ms l mt mu">import Vue from "vue";<br/>import App from "./App.vue";<br/>import VDragged from "v-dragged";</span><span id="f4fb" class="mq lc iq mh b gy mv ms l mt mu">Vue.use(VDragged);<br/>Vue.config.productionTip = false;</span><span id="4c24" class="mq lc iq mh b gy mv ms l mt mu">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="3179" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5ecb" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div v-dragged="onDragged" id="drag"&gt;drag me&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  methods: {<br/>    onDragged({<br/>      el,<br/>      deltaX,<br/>      deltaY,<br/>      offsetX,<br/>      offsetY,<br/>      clientX,<br/>      clientY,<br/>      first,<br/>      last<br/>    }) {<br/>      if (first) {<br/>        return;<br/>      }<br/>      if (last) {<br/>        return;<br/>      }<br/>      const l = +window.getComputedStyle(el)["left"].slice(0, -2) || 0;<br/>      const t = +window.getComputedStyle(el)["top"].slice(0, -2) || 0;<br/>      el.style.left = `${l + deltaX}px`;<br/>      el.style.top = `${t + deltaY}px`;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="3144" class="mq lc iq mh b gy mv ms l mt mu">&lt;style&gt;<br/>#drag {<br/>  position: absolute;<br/>}<br/>&lt;/style&gt;</span></pre><p id="00b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有一个内部带有文本“拖动我”的div。我们将其绑定到值被设置为<code class="fe me mf mg mh b">onDragged</code>方法的<code class="fe me mf mg mh b">v-dragged</code>指令。</p><p id="9f50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">onDragged</code>方法中，我们可以通过对元素对象<code class="fe me mf mg mh b">el</code>使用<code class="fe me mf mg mh b">window.getComputedStyle</code>方法来获得新的左坐标和上坐标，该元素对象包含被拖动的元素。</p><p id="a0bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用这些新值来设置新的左侧和顶部样式，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="18ec" class="mq lc iq mh b gy mr ms l mt mu">el.style.left = `${l + deltaX}px`;<br/>el.style.top = `${t + deltaY}px`;</span></pre><p id="4a42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将增量添加到原始的左值和上值来更新位置。</p><p id="1a07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们将可拖动元素的样式设置为<code class="fe me mf mg mh b">position: absolute;</code>，这样我们可以在页面上自由移动它。</p><h1 id="f139" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4e7f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">vue-observe-visibility</code>包让我们观察屏幕上项目的可见性。可见性更新时调用的回调可以被限制。</p><p id="e4bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">v-dragged</code>包对于处理拖动事件很有用。我们可以用它来用指令提供的数据更新被拖动的项目的位置。</p><h1 id="32a3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">简明英语团队的说明</strong></h1><p id="87b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意吧:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kf ir">JavaScript in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="aa8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还推出了一个YouTube，希望你能通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的简明英语频道</strong> </a>来支持我们</p><p id="7c9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一如既往,“简明英语”希望帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
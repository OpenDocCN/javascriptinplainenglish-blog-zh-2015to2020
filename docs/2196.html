<html>
<head>
<title>JavaScript Best Practices — Strings, Booleans and Constants</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—字符串、布尔值和常量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-strings-booleans-and-constants-740b8f1e96dd?source=collection_archive---------1-----------------------#2020-05-29">https://javascript.plainenglish.io/javascript-best-practices-strings-booleans-and-constants-740b8f1e96dd?source=collection_archive---------1-----------------------#2020-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/159d540056a1c578e77520659a491297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6DrGKS9fBc8XoJh5"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rajivperera?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rajiv Perera</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="49d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但存在问题的代码很容易。</p><p id="bcf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在JavaScript中处理字符串、布尔值和常量。</p><h1 id="562f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免魔法线</h1><p id="b541" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">就像幻数一样，幻弦也一样不好。</p><p id="54a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在多个地方使用了同一个字符串，但没有明确说明其含义，那么我们应该将该值赋给一个已命名的常量。</p><p id="1d5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们在任何地方都使用字符串<code class="fe me mf mg mh b">'employee'</code>，那么我们应该显式地将它赋给一个常量。</p><p id="43a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过书写来分配它；</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7dd2" class="mq lc iq mh b gy mr ms l mt mu">const WORKER_TYPE = 'employee';</span></pre><p id="1bee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们知道它指的是公司里的员工类型。</p><p id="4d31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，改变它会更容易，因为我们只需要改变它一次，而不是在许多地方。</p><p id="f605" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可能决定让我们的节目国际化。那么这个可以让我们很容易的翻译出来。</p><h1 id="455e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">注意一个接一个的错误</h1><p id="3481" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该注意字符串的索引，这样我们就不会试图访问长度超过字符串减1的索引。</p><h1 id="cea9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查我们的语言和环境如何支持Unicode</h1><p id="8593" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们使用Unicode字符，那么我们必须检查我们的语言或环境是否真正支持它。</p><p id="03b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript程序在大多数情况下应该支持Unicode，但是我们还是要检查一下。</p><h1 id="97de" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在项目生命周期的早期决定国际化/本地化策略</h1><p id="208d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">国际化和本地化是主要问题。</p><p id="7945" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们必须翻译和本地化我们的程序，那么翻译和让所有支持的语言都正确运行将会是一项繁重的工作。</p><h1 id="c2f0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如果我们需要支持多种语言，使用Unicode</h1><p id="c19f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Unicode支持许多现成的语言。</p><h1 id="9c8b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用布尔变量来记录我们的程序</h1><p id="f1bd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将布尔表达式赋给一个变量，这样我们就知道表达式测试的是什么。</p><p id="1c76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4870" class="mq lc iq mh b gy mr ms l mt mu">navigator.userAgent.toLowerCase().indexOf('mac') !== -1</span></pre><p id="a787" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将它赋给一个变量，写为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a45e" class="mq lc iq mh b gy mr ms l mt mu">const isMac = navigator.userAgent.toLowerCase().indexOf('mac') !== -1;</span></pre><p id="9cca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们知道我们正在我们的网站上检查Mac用户。</p><h1 id="e294" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用布尔变量简化复杂的测试</h1><p id="b8dd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有复杂的测试，那么我们也可以将表达式赋给变量，这样我们就可以很容易地看到它们。</p><p id="20ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="100e" class="mq lc iq mh b gy mr ms l mt mu">!error &amp;&amp; MIN_COUNT &lt; lineCount &amp;&amp; lineCount &lt; MAX_COUNT</span></pre><p id="1318" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以定义一个变量来存储，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e3e1" class="mq lc iq mh b gy mr ms l mt mu">const successfullyReadFile = !error &amp;&amp; MIN_COUNT &lt; lineCount &amp;&amp; lineCount &lt; MAX_COUNT</span></pre><p id="11b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们知道，这些表达式一起用于检查我们是否成功地读取了一个文件。</p><h1 id="a561" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模拟枚举类型</h1><p id="7527" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">枚举类型非常适合设置有几种可能选择的变量。</p><p id="7dd6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，JavaScript没有枚举类型。</p><p id="a057" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们可以用一个类的静态变量来模拟它，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ff10" class="mq lc iq mh b gy mr ms l mt mu">class Colors {}<br/>Colors.RED = 'red';<br/>Colors.GREEN = 'green';<br/>Colors.BLUE = 'blue';</span></pre><p id="57de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以把选择放在一个对象中:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2b4c" class="mq lc iq mh b gy mr ms l mt mu">const Colors = {<br/>  RED: 'red',<br/>  GREEN: 'green',<br/>  BLUE: 'blue',<br/>}</span></pre><p id="69fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以如下使用它们:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9301" class="mq lc iq mh b gy mr ms l mt mu">const color = Colors.RED;</span></pre><h1 id="51fc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在数据声明中使用命名常量</h1><p id="4f62" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">命名常量非常适合数据声明。</p><p id="adf9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有些值我们在很多地方都不会改变和使用，那么我们应该把它们赋给一个指定的常量。</p><p id="37ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3cec" class="mq lc iq mh b gy mr ms l mt mu">const MAX_DONUTS = 10;</span></pre><p id="8365" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设定一个人可以吃的甜甜圈的最大数量。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/77b82d41c40fda1648a4e9c120fa8942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3VRy94H7S6XkQWIZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@drew_beamer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Drew Beamer</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="369a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免文字</h1><p id="feb8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">和上一节的建议差不多。如果我们有没有明显意义的文字，那么我们应该把它们赋给一个命名的常量。</p><p id="8799" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7ad9" class="mq lc iq mh b gy mr ms l mt mu">for (let i = 0; i &lt; 10; i++) {<br/>  //...<br/>}</span></pre><p id="5616" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有10个不知道是什么意思的词。</p><p id="e6ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5413" class="mq lc iq mh b gy mr ms l mt mu">const MAX_DONUTS = 10;<br/>for (let i = 0; i &lt; MAX_DONUTS; i++) {<br/>  //...<br/>}</span></pre><p id="b422" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们知道10是甜甜圈的最大数量。</p><h1 id="12f3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">一致地使用命名常数</h1><p id="5958" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该一致地使用名称常量，而不是在某些地方使用常量，在其他地方使用文字。</p><p id="e8b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，如果需要的话，我们不会忘记更新某些地方的值。</p><h1 id="fa6d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="eb79" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该避免使用任何神奇的字符串，而是使用命名的常量。这样，如果常量值需要改变，我们只需要改变一个地方。</p><p id="2359" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们知道它们的意思，所以它们也使得阅读代码更容易。</p><p id="b22e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有很长的布尔表达式，我们可能想把它们赋给一个变量，这样我们就知道它们在检查什么。</p><h1 id="4dd2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">用简单英语写的便条</strong></h1><p id="3c59" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>上找到所有这些——关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
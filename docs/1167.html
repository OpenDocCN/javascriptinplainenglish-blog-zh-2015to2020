<html>
<head>
<title>Make a custom Slack command using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript创建一个定制的Slack命令</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-a-custom-slack-command-using-javascript-b91615689895?source=collection_archive---------6-----------------------#2020-02-06">https://javascript.plainenglish.io/make-a-custom-slack-command-using-javascript-b91615689895?source=collection_archive---------6-----------------------#2020-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f5d43e7fc4d35da47e12a81c2d5297d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o_zs5mU-MymOQbgH"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@tshusi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tung Minh</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="1107" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">这个命令只是一个使用Apache OpenWhisk执行的JavaScript无服务器函数。</h2></div><p id="4b33" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个朋友创办的公司Nimbella刚刚推出了<a class="ae jd" href="https://nimbella.com/resources-commander/overview#what-is-commander" rel="noopener ugc nofollow" target="_blank"> Commander </a>，这是一个可以快速创建定制Slack slash命令的漂亮工具。</p><p id="49c7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些命令是使用Nimbella的无服务器基础设施执行的JavaScript片段，该基础设施基于<a class="ae jd" href="https://github.com/apache/openwhisk" rel="noopener ugc nofollow" target="_blank">Apache open whish</a>(Nimbella的人员是贡献者)。因此对该命令的功能没有什么限制。</p><p id="b7c3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设我们需要一个Slack命令来显示分配给特定用户的所有未解决的GitHub问题。是的，你可以在GitHub的界面上这样做，但是需要几次点击。每次都是。仅仅在一个松弛的频道里会很好吗？</p><p id="ad81" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们只需要4个小步骤就可以做到。</p><h1 id="e3bd" class="lv lw jg bd lx ly lz ma mb mc md me mf km mg kn mh kp mi kq mj ks mk kt ml mm bi translated">1.将Nimbella Commander应用添加到你的Slack中</h1><p id="f70f" class="pw-post-body-paragraph kv kw jg kx b ky mn kh la lb mo kk ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">只需点击“添加到时差”按钮<a class="ae jd" href="https://unhackai.slack.com/apps/AS833QXL0-nimbella-commander" rel="noopener ugc nofollow" target="_blank">这里</a>。它玩得很好，只要求最低限度的权限来完成它的工作。</p><h1 id="69f7" class="lv lw jg bd lx ly lz ma mb mc md me mf km mg kn mh kp mi kq mj ks mk kt ml mm bi translated">2.在松弛通道上初始化应用程序</h1><p id="682e" class="pw-post-body-paragraph kv kw jg kx b ky mn kh la lb mo kk ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">转到您想要使用它的Slack通道，并运行:</p><pre class="ms mt mu mv gt mw lu mx my aw mz bi"><span id="15aa" class="na lw jg lu b gy nb nc l nd ne">/nc dapp_add</span></pre><p id="821a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">据我所知，这个步骤为你的频道添加了一个默认的Commander Slack应用。然后它将作为<code class="fe lr ls lt lu b">/dapp</code>可用。如果你想要不同的名字，你可以按照这些步骤创建一个单独的Slack app <a class="ae jd" href="https://nimbella.com/resources-commander/guide#create-manage-custom-apps" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="9904" class="lv lw jg bd lx ly lz ma mb mc md me mf km mg kn mh kp mi kq mj ks mk kt ml mm bi translated">3.创建函数</h1><p id="2432" class="pw-post-body-paragraph kv kw jg kx b ky mn kh la lb mo kk ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">我们称它为<code class="fe lr ls lt lu b">issues</code>，我们希望它将github用户作为<code class="fe lr ls lt lu b">assignee</code>参数。</p><pre class="ms mt mu mv gt mw lu mx my aw mz bi"><span id="ec01" class="na lw jg lu b gy nb nc l nd ne">/nc command_create issues &lt;assignee&gt;</span></pre><figure class="ms mt mu mv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/13c03dfdfc405bbbb1138a73c929a9fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qyt1zGvjXu8H9IIacNUwvg.png"/></div></div></figure><p id="f4bf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">“编辑代码”链接将带您进入函数的内容。</p><p id="8ab1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里有一点样板文件，但是我们关心的是<code class="fe lr ls lt lu b">_command</code>的主体。我们将用调用GitHub API并返回分配给<code class="fe lr ls lt lu b">assignee</code>的开放问题的JS代码来替换它。很简单，就是普通的JS。</p><figure class="ms mt mu mv gt is"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The code for getting issues for a particular user from <a class="ae jd" href="https://github.com/apache/openwhisk" rel="noopener ugc nofollow" target="_blank">Apache OpenWhisk</a>, the open-source serverless infra Nimbella builds upon. Replace `repo` with yours. Also, yes, living dangerously, no error handling.</figcaption></figure><p id="e783" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，调整<code class="fe lr ls lt lu b">_command</code>函数的返回，使<code class="fe lr ls lt lu b">text</code>字段成为<code class="fe lr ls lt lu b">formatted_result</code>而不是占位符字符串。</p><h1 id="9ba5" class="lv lw jg bd lx ly lz ma mb mc md me mf km mg kn mh kp mi kq mj ks mk kt ml mm bi translated">4.我们完了。哦，只需点击“保存”:-)</h1><p id="db44" class="pw-post-body-paragraph kv kw jg kx b ky mn kh la lb mo kk ld le mp lg lh li mq lk ll lm mr lo lp lq ij bi translated">我们来测试一下。在Slack内部，我们运行:</p><pre class="ms mt mu mv gt mw lu mx my aw mz bi"><span id="1d49" class="na lw jg lu b gy nb nc l nd ne">/dapp issues rabbah</span></pre><figure class="ms mt mu mv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/c24dda46be230fd4c6293c53b978c5dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dixSH4X1HkyDlItlHD4rYw.png"/></div></div></figure><p id="9e81" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它向我们展示了这个OpenWhisk dev还没有解决一些老问题:-)</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="e349" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以上所有对于开源回购来说都很有效。如果你的回购是私人的，你需要向GitHub认证，你可以将GitHub认证令牌保存在Nimbella的<a class="ae jd" href="https://nimbella.com/resources-commander/guide#secrets" rel="noopener ugc nofollow" target="_blank">加密密钥管理器</a>中。</p><p id="a2a2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还有其他几个很酷的功能我还没有涉及到，包括<a class="ae jd" href="https://nimbella.com/resources-commander/guide#triggers" rel="noopener ugc nofollow" target="_blank">触发器</a>、<a class="ae jd" href="https://nimbella.com/resources-commander/guide#create-manage-custom-apps" rel="noopener ugc nofollow" target="_blank">自定义应用</a>(这样你就不会被<code class="fe lr ls lt lu b">/dapp</code>卡住)，以及<a class="ae jd" href="https://nimbella.com/resources-commander/guide#create-manage-user-roles-groups" rel="noopener ugc nofollow" target="_blank">用户角色</a>。</p><p id="dadd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">编辑:</strong> <a class="ae jd" href="https://github.com/nimbella/command-sets" rel="noopener ugc nofollow" target="_blank">现成的命令你只需插入即可。</a></p><h2 id="f414" class="na lw jg bd lx nq nr dn mb ns nt dp mf le nu nv mh li nw nx mj lm ny nz ml oa bi translated">资源</h2><ul class=""><li id="e67e" class="ob oc jg kx b ky mn lb mo le od li oe lm of lq og oh oi oj bi translated"><a class="ae jd" href="https://github.com/apache/openwhisk" rel="noopener ugc nofollow" target="_blank"> Apache OpenWhisk </a>，底层无服务器框架</li><li id="eb3b" class="ob oc jg kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><a class="ae jd" href="https://nimbella.com/resources-commander/quickstart#quickstart" rel="noopener ugc nofollow" target="_blank">快速入门</a>，展示了如何创建一个简单的命令，正如我上面所做的，以及如何安装其他现有的命令</li><li id="853d" class="ob oc jg kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><a class="ae jd" href="https://nimbella.com/resources-commander/guide#developer-guide" rel="noopener ugc nofollow" target="_blank">开发者指南</a>，文档的精华</li><li id="9137" class="ob oc jg kx b ky ok lb ol le om li on lm oo lq og oh oi oj bi translated"><a class="ae jd" href="https://nimbella.com/resources-commander/reference#command-reference" rel="noopener ugc nofollow" target="_blank">命令参考</a></li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>How to Use Event Emitters in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular中使用事件发射器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-event-emitters-in-angular-d051f6152b1a?source=collection_archive---------2-----------------------#2019-09-05">https://javascript.plainenglish.io/how-to-use-event-emitters-in-angular-d051f6152b1a?source=collection_archive---------2-----------------------#2019-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="986c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular是一个用于构建应用程序的综合框架。Angular的一个优点是可以将数据从父组件传递到子组件，以及从子组件传递到父组件。React只能将数据从父组件传递到子组件。</p><p id="9fec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个故事中，我们将构建一个具有添加和编辑联系人功能的地址簿应用程序。用于添加和编辑联系人的表单将使用基于模板的表单验证，这是Angular允许您验证表单的方式之一。</p><p id="304c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将是一个简单的应用程序。它有一个主页，在一个表中列出了联系人，每行有一个编辑按钮，允许用户编辑他们的联系人的对话框，每行有一个删除按钮，允许您删除当前行中的联系人。</p><p id="5195" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要开始构建应用程序，我们首先必须通过运行<code class="fe kl km kn ko b">npm i -g @angular/cli</code>来安装Angular CLI。请务必选择包括路由和使用SCSS的风格时，要求。然后我们通过运行<code class="fe kl km kn ko b">ng new template-drive-form-app</code>来创建项目。</p><p id="e5ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来我们必须安装一些库。我们需要一个flux store来方便地传递数据，还需要另一个库来验证无法用Angular轻松验证的表单数据。我们使用<code class="fe kl km kn ko b">@ngrx/store</code>存储flux，使用<code class="fe kl km kn ko b">ng2-validation</code>添加额外的表单验证功能。我们使用有棱角的材料部件来使我们的应用程序看起来更有吸引力。我们通过运行<code class="fe kl km kn ko b">npm i @ngrx/store ng2-validation @angular/cdk @angular/material</code>来安装它们。</p><p id="d95d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经准备好构建我们的应用程序了。我们通过运行<code class="fe kl km kn ko b">ng add @ngrx/store</code>添加flux store样板文件。这将创建一个包含<code class="fe kl km kn ko b">index.ts</code>文件的<code class="fe kl km kn ko b">reducers </code>文件夹。</p><p id="cb5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们创建我们的组件。我们运行以下命令:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="dab3" class="kx ky iq ko b gy kz la l lb lc">ng g component contactDialog<br/>ng g component contactForm<br/>ng g component contactFormPage<br/>ng g component homePage<br/>ng g component topBar<br/>ng g service contactService<br/>ng g class exports</span></pre><p id="da07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就创建了我们需要的组件和服务。<code class="fe kl km kn ko b">exports.ts</code>文件将包含我们的国家列表。</p><p id="b78e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">environment.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="199c" class="kx ky iq ko b gy kz la l lb lc">export const environment = {<br/>  production: false,<br/>  apiUrl: '<a class="ae ld" href="http://localhost:3000'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000'</a><br/>};</span></pre><p id="ddd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将允许我们连接到我们的JSON服务器API，它允许我们将数据保存到一个JSON文件中，而无需创建我们自己的后端。它以Node.js包的形式提供。该包装的详细说明位于<a class="ae ld" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank">https://github.com/typicode/json-server</a>。</p><p id="bdac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">contact-dialog.component.ts</code>中，如果上面的<code class="fe kl km kn ko b">ng g</code>命令都运行了，我们应该得到:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="965a" class="kx ky iq ko b gy kz la l lb lc">import { Component, OnInit, Inject } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { MatDialogRef, MAT_DIALOG_DATA } from '<a class="ae ld" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { ContactService } from '../contact.service';<br/>import { Store } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { SET_CONTACTS } from '../reducers/contacts-reducer';</span><span id="69d9" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-contact-dialog',<br/>  templateUrl: './contact-dialog.component.html',<br/>  styleUrls: ['./contact-dialog.component.scss']<br/>})<br/>export class ContactDialogComponent implements OnInit {</span><span id="41bf" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    public dialogRef: MatDialogRef&lt;ContactDialogComponent&gt;,<br/>    <a class="ae ld" href="http://twitter.com/Inject" rel="noopener ugc nofollow" target="_blank">@Inject</a>(MAT_DIALOG_DATA) public contactData: any,<br/>    private contactService: ContactService,<br/>    private store: Store&lt;any&gt;<br/>  ) { }</span><span id="71a7" class="kx ky iq ko b gy le la l lb lc">ngOnInit() {<br/>  }</span><span id="fdae" class="kx ky iq ko b gy le la l lb lc">getContacts() {<br/>    this.contactService.getContacts()<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_CONTACTS, payload: res });<br/>        this.dialogRef.close();<br/>      })<br/>  }</span><span id="d7c3" class="kx ky iq ko b gy le la l lb lc">}</span></pre><p id="4436" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这允许我们在联系人更新后从服务器获取联系人。</p><p id="40f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">contact-dialog.component.html</code>中，我们输入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7b42" class="kx ky iq ko b gy kz la l lb lc">&lt;h2&gt;Edit Contact&lt;/h2&gt;<br/>&lt;app-contact-form [edit]='true' [contact]='contactData' (contactEdited)='getContacts()'&gt;&lt;/app-contact-form&gt;</span></pre><p id="7624" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将<code class="fe kl km kn ko b">edit</code>和<code class="fe kl km kn ko b">contact</code>值作为输入传递给<code class="fe kl km kn ko b">app-contact-form</code>元素。一旦联系人被更新，<code class="fe kl km kn ko b">(contactEdited)</code>事件就被发送给这个组件，然后它将获取联系人并更新存储，因为<code class="fe kl km kn ko b">getContacts</code>在<code class="fe kl km kn ko b">contactEdited</code>事件中被设置为事件处理函数。注意<code class="fe kl km kn ko b">EventEmitter</code>事件只从源组件传播到它的直接父组件。其他组件不会收到这个事件，所以即使你把<code class="fe kl km kn ko b">(contactEdited)=’getContacts()’</code>放在另一个组件模板文件中，它也不会做任何事情。</p><p id="0b42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">contact-form.component.ts</code>中，我们放入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="52f1" class="kx ky iq ko b gy kz la l lb lc">import { Component, OnInit, Input, SimpleChanges, Output } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { COUNTRIES } from '../exports';<br/>import { NgForm } from '<a class="ae ld" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { Store } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { ContactService } from '../contact.service';<br/>import { SET_CONTACTS } from '../reducers/contacts-reducer';<br/>import { Router } from '<a class="ae ld" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { EventEmitter } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="4b1f" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-contact-form',<br/>  templateUrl: './contact-form.component.html',<br/>  styleUrls: ['./contact-form.component.scss']<br/>})<br/>export class ContactFormComponent implements OnInit {<br/>  contactData: any = &lt;any&gt;{};<br/>  countries = COUNTRIES;<br/>  <a class="ae ld" href="http://twitter.com/Input" rel="noopener ugc nofollow" target="_blank">@Input</a>('edit') edit: boolean;<br/>  <a class="ae ld" href="http://twitter.com/Input" rel="noopener ugc nofollow" target="_blank">@Input</a>('contact') contact: any = &lt;any&gt;{};<br/>  <a class="ae ld" href="http://twitter.com/Output" rel="noopener ugc nofollow" target="_blank">@Output</a>('contactEdited') contactEdited = new EventEmitter();</span><span id="8fe1" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    private store: Store&lt;any&gt;,<br/>    private contactService: ContactService,<br/>    private router: Router<br/>  ) { }</span><span id="c916" class="kx ky iq ko b gy le la l lb lc">ngOnInit() {<br/>  }</span><span id="53fd" class="kx ky iq ko b gy le la l lb lc">ngOnChanges(changes: SimpleChanges) {<br/>    if (this.contact) {<br/>      this.contactData = this.contact;<br/>    }<br/>  }</span><span id="2451" class="kx ky iq ko b gy le la l lb lc">getPostalCodeRegex() {<br/>    if (this.contactData.country == "United States") {<br/>      return /^[0-9]{5}(?:-[0-9]{4})?$/;<br/>    } else if (this.contactData.country == "Canada") {<br/>      return /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/;<br/>    }<br/>    return /./;<br/>  }</span><span id="a582" class="kx ky iq ko b gy le la l lb lc">getPhoneRegex() {<br/>    if (["United States", "Canada"].includes(this.contactData.country)) {<br/>      return /^[2-9]\d{2}[2-9]\d{2}\d{4}$/;<br/>    }<br/>    return /./;<br/>  }</span><span id="6503" class="kx ky iq ko b gy le la l lb lc">save(contactForm: NgForm) {<br/>    if (contactForm.invalid) {<br/>      return;<br/>    }</span><span id="b662" class="kx ky iq ko b gy le la l lb lc">if (this.edit) {<br/>      this.contactService.editContact(this.contactData)<br/>        .subscribe(res =&gt; {<br/>          this.contactEdited.emit(null);<br/>        })<br/>    }<br/>    else {<br/>      this.contactService.addContact(this.contactData)<br/>        .subscribe(res =&gt; {<br/>          this.getContacts();<br/>          this.router.navigate(['/']);<br/>        })<br/>    }<br/>  }</span><span id="e2c9" class="kx ky iq ko b gy le la l lb lc">getContacts() {<br/>    this.contactService.getContacts()<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_CONTACTS, payload: res });<br/>      })<br/>  }<br/>}</span></pre><p id="33d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们返回正则表达式模式来动态验证电话和邮政编码格式的地方。它还允许我们根据之前传入的<code class="fe kl km kn ko b">edit</code>输入是否为真来添加或更新联系人。一旦保存了联系人，我们就更新存储或向父节点发出<code class="fe kl km kn ko b">contactEdited</code>事件，然后从后端更新联系人存储。<code class="fe kl km kn ko b">emit</code>函数为您想要传递回父节点的数据获取一个参数。</p><p id="0949" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">contact-form.component.html</code>中，我们输入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="a566" class="kx ky iq ko b gy kz la l lb lc">&lt;form #contactForm='ngForm' (ngSubmit)='save(contactForm)'&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="First Name" required #firstName='ngModel' name='firstName'<br/>            [(ngModel)]='contactData.firstName'&gt;<br/>        &lt;mat-error *ngIf="firstName?.invalid &amp;&amp; (firstName.dirty || firstName.touched)"&gt;<br/>            &lt;div *ngIf="firstName.errors.required"&gt;<br/>                First Name is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Last Name" required #firstName='ngModel' name='lastName'<br/>            [(ngModel)]='contactData.lastName'&gt;<br/>        &lt;mat-error *ngIf="lastName?.invalid &amp;&amp; (lastName.dirty || lastName.touched)"&gt;<br/>            &lt;div *ngIf="lastName.errors.required"&gt;<br/>                Last Name is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Address Line 1" required #addressLineOne='ngModel' name='addressLineOne'<br/>            [(ngModel)]='contactData.addressLineOne'&gt;<br/>        &lt;mat-error *ngIf="addressLineOne?.invalid &amp;&amp; (addressLineOne.dirty || addressLineOne.touched)"&gt;<br/>            &lt;div *ngIf="addressLineOne.errors.required"&gt;<br/>                Address Line 1 is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Address Line 2" #addressLineTwo='ngModel' name='addressLineTwo'<br/>            [(ngModel)]='contactData.addressLineTwo'&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="City" required #city='ngModel' name='city' [(ngModel)]='contactData.city'&gt;<br/>        &lt;mat-error *ngIf="city?.invalid &amp;&amp; (city.dirty || city.touched)"&gt;<br/>            &lt;div *ngIf="city.errors.required"&gt;<br/>                City is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;mat-label&gt;Country&lt;/mat-label&gt;<br/>        &lt;mat-select matInput required #country='ngModel' name='country' [(ngModel)]='contactData.country'&gt;<br/>            &lt;mat-option *ngFor="let c of countries" [value]="c.name"&gt;<br/>                {{c.name}}<br/>            &lt;/mat-option&gt;<br/>        &lt;/mat-select&gt;<br/>        &lt;mat-error *ngIf="country?.invalid &amp;&amp; (country.dirty || country.touched)"&gt;<br/>            &lt;div *ngIf="country.errors.required"&gt;<br/>                Country is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Postal Code" required #postalCode='ngModel' name='postalCode'<br/>            [(ngModel)]='contactData.postalCode' [pattern]='getPostalCodeRegex()'&gt;<br/>        &lt;mat-error *ngIf="postalCode?.invalid &amp;&amp; (postalCode.dirty || postalCode.touched)"&gt;<br/>            &lt;div *ngIf="postalCode.errors.required"&gt;<br/>                Postal code is required.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Phone" required #phone='ngModel' name='phone' [(ngModel)]='contactData.phone'<br/>            [pattern]='getPhoneRegex()'&gt;<br/>        &lt;mat-error *ngIf="phone?.invalid &amp;&amp; (phone.dirty || phone.touched)"&gt;<br/>            &lt;div *ngIf="phone.errors.required"&gt;<br/>                Phone is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="phone?.invalid"&gt;<br/>                Phone is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Age" required #age='ngModel' name='age' [(ngModel)]='contactData.age'<br/>            [range]="[0, 200]"&gt;<br/>        &lt;mat-error *ngIf="age?.invalid &amp;&amp; (age.dirty || age.touched)"&gt;<br/>            &lt;div *ngIf="age.errors.required"&gt;<br/>                Age is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="age?.errors?.range"&gt;<br/>                Age is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;mat-form-field&gt;<br/>        &lt;input matInput placeholder="Email" required #email='ngModel' name='email' [(ngModel)]='contactData.email'<br/>            email&gt;<br/>        &lt;mat-error *ngIf="email?.invalid &amp;&amp; (email.dirty || email.touched)"&gt;<br/>            &lt;div *ngIf="email.errors.required"&gt;<br/>                Email is required.<br/>            &lt;/div&gt;<br/>            &lt;div *ngIf="email?.errors?.email"&gt;<br/>                Email is invalid.<br/>            &lt;/div&gt;<br/>        &lt;/mat-error&gt;<br/>    &lt;/mat-form-field&gt;<br/>    &lt;br&gt;<br/>    &lt;div mat-dialog-actions&gt;<br/>        &lt;button mat-raised-button cdkFocusInitial&gt;Save&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/form&gt;</span></pre><p id="08b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是用于验证联系人数据的表单。<code class="fe kl km kn ko b">range</code>输入由<code class="fe kl km kn ko b">ng2-validation</code>提供。同一个包中也提供了<code class="fe kl km kn ko b">email</code>属性。<code class="fe kl km kn ko b">required</code>属性由Angular提供。<code class="fe kl km kn ko b">#inputName=’ngModel’ name=’inputName’</code>您的输入需要进行验证。例如，在电话号码输入中，如果您提供了<code class="fe kl km kn ko b">#phone=’ngModel’ name=’phone’</code>，那么您可以显示电话号码验证的错误:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7ee4" class="kx ky iq ko b gy kz la l lb lc">&lt;mat-error *ngIf="phone?.invalid &amp;&amp; (phone.dirty || phone.touched)"&gt;<br/>  &lt;div *ngIf="phone.errors.required"&gt;<br/>      Phone is required.<br/>  &lt;/div&gt;<br/>  &lt;div *ngIf="phone?.invalid"&gt;<br/>      Phone is invalid.<br/>  &lt;/div&gt;<br/>&lt;/mat-error&gt;</span></pre><p id="1fd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们用<code class="fe kl km kn ko b">phone.errors.required</code>检查<code class="fe kl km kn ko b">required</code>错误的存在，用<code class="fe kl km kn ko b">phone?.invalid</code>检查无效格式错误。<code class="fe kl km kn ko b">pattern</code>属性是我们添加到表单字段中的内容，用来验证正则表达式。它可以是动态的，也可以是静态的。如果它是静态的，我们把它放入动态属性<code class="fe kl km kn ko b">pattern</code>的值中。否则，我们可以像以前一样编写一个函数来返回正则表达式。</p><p id="e932" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">ng2-validation</code>包的工作方式也是如此。我们定义了<code class="fe kl km kn ko b">#age=’ngModel’ name=’age’</code>。对于年龄字段，我们通过添加<code class="fe kl km kn ko b">[range]=”[0, 200]”</code>来定义我们希望有效的范围，然后我们以类似的方式检查并显示错误:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="e01d" class="kx ky iq ko b gy kz la l lb lc">&lt;mat-error *ngIf="age?.invalid &amp;&amp; (age.dirty || age.touched)"&gt;<br/>  &lt;div *ngIf="age.errors.required"&gt;<br/>    Age is required.<br/>  &lt;/div&gt;<br/>  &lt;div *ngIf="age?.errors?.range"&gt;<br/>    Age is invalid.<br/>  &lt;/div&gt;<br/>&lt;/mat-error&gt;</span></pre><p id="0b31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">ng2-validation</code>包为<code class="fe kl km kn ko b">age</code>表单字段的<code class="fe kl km kn ko b">errors</code>对象提供了<code class="fe kl km kn ko b">range</code>字段，方便检查数字范围。</p><p id="080e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">contact-form-page.component.html</code>中，我们放入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7076" class="kx ky iq ko b gy kz la l lb lc">&lt;h2&gt;Add Contact&lt;/h2&gt;<br/>&lt;app-contact-form&gt;&lt;/app-contact-form&gt;</span></pre><p id="3a00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显示我们的联系人表单以添加联系人。</p><p id="5301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">home-page.component.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7ae1" class="kx ky iq ko b gy kz la l lb lc">import { Component, OnInit } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Store, select } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { ContactService } from '../contact.service';<br/>import { SET_CONTACTS } from '../reducers/contacts-reducer';<br/>import { ContactDialogComponent } from '../contact-dialog/contact-dialog.component';<br/>import { MatDialog } from '<a class="ae ld" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';</span><span id="09ba" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-home-page',<br/>  templateUrl: './home-page.component.html',<br/>  styleUrls: ['./home-page.component.scss']<br/>})<br/>export class HomePageComponent implements OnInit {<br/>  displayedColumns: string[] = [<br/>    'firstName',<br/>    'lastName',<br/>    'addressLineOne',<br/>    'addressLineTwo',<br/>    'city',<br/>    'country',<br/>    'postalCode',<br/>    'phone',<br/>    'age',<br/>    'email',<br/>    'edit',<br/>    'delete'<br/>  ]<br/>  contacts: any[] = [];</span><span id="1baa" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    private store: Store&lt;any&gt;,<br/>    private contactService: ContactService,<br/>    public dialog: MatDialog<br/>  ) {<br/>    store.pipe(select('contacts'))<br/>      .subscribe(contacts =&gt; {<br/>        this.contacts = contacts;<br/>      })<br/>  }</span><span id="6f3d" class="kx ky iq ko b gy le la l lb lc">ngOnInit() {<br/>    this.getContacts();<br/>  }</span><span id="2753" class="kx ky iq ko b gy le la l lb lc">getContacts() {<br/>    this.contactService.getContacts()<br/>      .subscribe(res =&gt; {<br/>        this.store.dispatch({ type: SET_CONTACTS, payload: res });<br/>      })<br/>  }</span><span id="371f" class="kx ky iq ko b gy le la l lb lc">openEditContactDialog(index: number) {<br/>    const dialogRef = this.dialog.open(ContactDialogComponent, {<br/>      width: '70vw',<br/>      maxHeight: '90vh',<br/>      data: Object.assign({}, this.contacts[index])<br/>    })</span><span id="ac99" class="kx ky iq ko b gy le la l lb lc">dialogRef.afterClosed().subscribe(result =&gt; {<br/>      console.log('The dialog was closed');<br/>    });<br/>  }</span><span id="efdb" class="kx ky iq ko b gy le la l lb lc">deleteContact(contactId: number) {<br/>    this.contactService.deleteContact(contactId)<br/>      .subscribe(res =&gt; {<br/>        this.getContacts();<br/>      })<br/>  }<br/>}</span></pre><p id="1422" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们获取联系人数据并将其显示在表格中的地方，也是让用户单击edit打开edit contact form对话框并单击delete删除其联系人的地方。</p><p id="23a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">home-page.component.html</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="5b08" class="kx ky iq ko b gy kz la l lb lc">&lt;h1&gt;Address Book&lt;/h1&gt;<br/>&lt;div class='table-responsive'&gt;<br/>    &lt;table mat-table [dataSource]="contacts" class="mat-elevation-z8"&gt;</span><span id="8ab2" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="firstName"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;First Name&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.firstName}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="56e4" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="lastName"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Last Name &lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.lastName}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="daa3" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="addressLineOne"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Address Line 1&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.addressLineOne}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="8777" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="addressLineTwo"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Address Line 2&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.addressLineTwo}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="9243" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="city"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;City&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.city}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="c3e8" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="country"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Country&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.country}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="2761" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="postalCode"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Postal Code&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.postalCode}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="9849" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="phone"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Phone&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.phone}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="1e90" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="age"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Age&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.age}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="8cf8" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="email"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;Email&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt; {{c.email}} &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="2a0a" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="edit"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c; let i = index"&gt;<br/>                &lt;button mat-raised-button (click)='openEditContactDialog(i)'&gt;Edit&lt;/button&gt;<br/>            &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="cc95" class="kx ky iq ko b gy le la l lb lc">&lt;ng-container matColumnDef="delete"&gt;<br/>            &lt;th mat-header-cell *matHeaderCellDef&gt;&lt;/th&gt;<br/>            &lt;td mat-cell *matCellDef="let c"&gt;<br/>                &lt;button mat-raised-button (click)='deleteContact(c.id)'&gt;Delete&lt;/button&gt;<br/>            &lt;/td&gt;<br/>        &lt;/ng-container&gt;</span><span id="af7f" class="kx ky iq ko b gy le la l lb lc">&lt;tr mat-header-row *matHeaderRowDef="displayedColumns"&gt;&lt;/tr&gt;<br/>        &lt;tr mat-row *matRowDef="let row; columns: displayedColumns;"&gt;&lt;/tr&gt;<br/>    &lt;/table&gt;<br/>&lt;/div&gt;</span></pre><p id="a39b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以显示表格。</p><p id="c71f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe kl km kn ko b">home-page.component.scss</code>中，我们放入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="3da9" class="kx ky iq ko b gy kz la l lb lc">th,<br/>td {<br/>  padding: 10px !important;<br/>}</span><span id="056b" class="kx ky iq ko b gy le la l lb lc">table.mat-table {<br/>  width: 95vw;<br/>}</span></pre><p id="f639" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向表格单元格添加一些填充并更改表格的宽度。</p><p id="43f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">top-bar.component.ts</code>中，我们有:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="1fed" class="kx ky iq ko b gy kz la l lb lc">import { Component, OnInit } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Store, select } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { TOGGLE_MENU } from '../reducers/menu-reducer';</span><span id="9ef8" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-top-bar',<br/>  templateUrl: './top-bar.component.html',<br/>  styleUrls: ['./top-bar.component.scss']<br/>})<br/>export class TopBarComponent implements OnInit {<br/>  menuOpen: boolean;</span><span id="34e3" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    private store: Store&lt;any&gt;<br/>  ) {<br/>    store.pipe(select('menu'))<br/>      .subscribe(menuOpen =&gt; {<br/>        this.menuOpen = menuOpen;<br/>      })<br/>  }</span><span id="ce83" class="kx ky iq ko b gy le la l lb lc">ngOnInit() {<br/>  }</span><span id="4f52" class="kx ky iq ko b gy le la l lb lc">toggleMenu() {<br/>    this.store.dispatch({ type: TOGGLE_MENU, payload: !this.menuOpen });<br/>  }<br/>}</span></pre><p id="421c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这允许用户使用菜单按钮打开和关闭菜单。</p><p id="b380" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">top-bar.component.html</code>中，我们有:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="f526" class="kx ky iq ko b gy kz la l lb lc">&lt;mat-toolbar&gt;<br/>    &lt;a (click)='toggleMenu()' class="menu-button"&gt;<br/>        &lt;i class="material-icons"&gt;<br/>            menu<br/>        &lt;/i&gt;<br/>    &lt;/a&gt;<br/>    Template Driven Address Book<br/>&lt;/mat-toolbar&gt;</span></pre><p id="70d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了显示顶栏，在<code class="fe kl km kn ko b">top-bar.component.scss</code>中，我们添加:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7aa1" class="kx ky iq ko b gy kz la l lb lc">.menu-button {<br/>  margin-top: 6px;<br/>  margin-right: 10px;<br/>  cursor: pointer;<br/>}</span><span id="54fc" class="kx ky iq ko b gy le la l lb lc">.menu-button {<br/>  color: white;<br/>}</span><span id="2b47" class="kx ky iq ko b gy le la l lb lc">.mat-toolbar-row,<br/>.mat-toolbar-single-row {<br/>  height: 64px;<br/>  background-color: #fc036b;<br/>  color: white;<br/>}</span></pre><p id="2ae9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在图标和文本之间增加一些间距。</p><p id="0c4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们在<code class="fe kl km kn ko b">reducers</code>文件夹中创建<code class="fe kl km kn ko b">contacts-reducers.ts</code>和<code class="fe kl km kn ko b">menu-reducers.ts</code>。</p><p id="c754" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">contacts-reducer.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="459a" class="kx ky iq ko b gy kz la l lb lc">const SET_CONTACTS = 'SET_CONTACTS';</span><span id="85eb" class="kx ky iq ko b gy le la l lb lc">function contactsReducer(state, action) {<br/>    switch (action.type) {<br/>        case SET_CONTACTS:<br/>            state = action.payload;<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="617a" class="kx ky iq ko b gy le la l lb lc">export { contactsReducer, SET_CONTACTS };</span></pre><p id="e73d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">menu-reducer.ts</code>中，我们输入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="e329" class="kx ky iq ko b gy kz la l lb lc">const TOGGLE_MENU = 'TOGGLE_MENU';</span><span id="add8" class="kx ky iq ko b gy le la l lb lc">function menuReducer(state, action) {<br/>    switch (action.type) {<br/>        case TOGGLE_MENU:<br/>            state = action.payload;<br/>            return state;<br/>        default:<br/>            return state<br/>    }<br/>}</span><span id="4b6a" class="kx ky iq ko b gy le la l lb lc">export { menuReducer, TOGGLE_MENU };</span></pre><p id="7bc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">reducers</code>文件夹的<code class="fe kl km kn ko b">index.ts</code>中，我们放入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="4ec7" class="kx ky iq ko b gy kz la l lb lc">import { menuReducer } from './menu-reducer';<br/>import { contactsReducer } from './contacts-reducer';</span><span id="33eb" class="kx ky iq ko b gy le la l lb lc">export const reducers = {<br/>  menu: menuReducer,<br/>  contacts: contactsReducer<br/>};</span></pre><p id="232a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这3个文件组成了我们的flux store，用于存储联系人和菜单状态。</p><p id="b4bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app-routing.module.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="17c8" class="kx ky iq ko b gy kz la l lb lc">import { NgModule } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Routes, RouterModule } from '<a class="ae ld" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { ContactFormPageComponent } from './contact-form-page/contact-form-page.component';</span><span id="54b7" class="kx ky iq ko b gy le la l lb lc">const routes: Routes = [<br/>  { path: '', component: HomePageComponent },<br/>  { path: 'contact', component: ContactFormPageComponent }<br/>];</span><span id="c835" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="aa63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们可以通过我们的链接和在浏览器中键入URL来访问我们的路线。</p><p id="2c1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app.component.ts</code>中，我们添加了菜单和路由器出口，通过输入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="6c8d" class="kx ky iq ko b gy kz la l lb lc">import { Component, HostListener } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Store, select } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { TOGGLE_MENU } from './reducers/menu-reducer';</span><span id="c407" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent {<br/>  menuOpen: boolean;</span><span id="125e" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    private store: Store&lt;any&gt;,<br/>  ) {<br/>    store.pipe(select('menu'))<br/>      .subscribe(menuOpen =&gt; {<br/>        this.menuOpen = menuOpen;<br/>      })<br/>  }</span><span id="421d" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/HostListener" rel="noopener ugc nofollow" target="_blank">@HostListener</a>('document:click', ['$event'])<br/>  public onClick(event) {<br/>    const isOutside = !event.target.className.includes("menu-button") &amp;&amp;<br/>      !event.target.className.includes("material-icons") &amp;&amp;<br/>      !event.target.className.includes("mat-drawer-inner-container")<br/>    if (isOutside) {<br/>      this.menuOpen = false;<br/>      this.store.dispatch({ type: TOGGLE_MENU, payload: this.menuOpen });<br/>    }<br/>  }</span><span id="317e" class="kx ky iq ko b gy le la l lb lc">}</span></pre><p id="e9ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app.component.html</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="b983" class="kx ky iq ko b gy kz la l lb lc">&lt;mat-sidenav-container class="example-container"&gt;<br/>    &lt;mat-sidenav mode="side" [opened]='menuOpen'&gt;<br/>        &lt;ul&gt;<br/>            &lt;li&gt;<br/>                &lt;b&gt;<br/>                    Template Driven Address Book<br/>                &lt;/b&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/'&gt;Home&lt;/a&gt;<br/>            &lt;/li&gt;<br/>            &lt;li&gt;<br/>                &lt;a routerLink='/contact'&gt;Add Contact&lt;/a&gt;<br/>            &lt;/li&gt;<br/>        &lt;/ul&gt;</span><span id="26ab" class="kx ky iq ko b gy le la l lb lc">&lt;/mat-sidenav&gt;<br/>    &lt;mat-sidenav-content&gt;<br/>        &lt;app-top-bar&gt;&lt;/app-top-bar&gt;<br/>        &lt;div id='content'&gt;<br/>            &lt;router-outlet&gt;&lt;/router-outlet&gt;<br/>        &lt;/div&gt;<br/>    &lt;/mat-sidenav-content&gt;<br/>&lt;/mat-sidenav-container&gt;</span></pre><p id="3a11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了显示我们上面描述的那些元素，在<code class="fe kl km kn ko b">app.component.scss</code>中，我们放入:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="7f59" class="kx ky iq ko b gy kz la l lb lc">#content {<br/>    padding: 20px;<br/>    min-height: 130vh;<br/>  }</span><span id="cbba" class="kx ky iq ko b gy le la l lb lc">ul {<br/>    list-style-type: none;<br/>    margin: 0;<br/>    li {<br/>      padding: 20px 5px;<br/>    }<br/>}</span></pre><p id="09a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加一些填充并设置页面的最小高度。</p><p id="2a1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要代码来发出获取、保存和删除联系人的HTTP请求。在<code class="fe kl km kn ko b">contact.service.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="67a7" class="kx ky iq ko b gy kz la l lb lc">import { Injectable } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae ld" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { environment } from 'src/environments/environment';</span><span id="4c45" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class ContactService {</span><span id="9815" class="kx ky iq ko b gy le la l lb lc">constructor(<br/>    private http: HttpClient<br/>  ) { }</span><span id="810c" class="kx ky iq ko b gy le la l lb lc">getContacts() {<br/>    return this.http.get(`${environment.apiUrl}/contacts`);<br/>  }</span><span id="ec9d" class="kx ky iq ko b gy le la l lb lc">addContact(contactData) {<br/>    return this.http.post(`${environment.apiUrl}/contacts`, contactData);<br/>  }</span><span id="c7aa" class="kx ky iq ko b gy le la l lb lc">editContact(contactData) {<br/>    return this.http.put(`${environment.apiUrl}/contacts/${contactData.id}`, contactData);<br/>  }</span><span id="50cc" class="kx ky iq ko b gy le la l lb lc">deleteContact(contactId) {<br/>    return this.http.delete(`${environment.apiUrl}/contacts/${contactId}`);<br/>  }</span><span id="3873" class="kx ky iq ko b gy le la l lb lc">}</span></pre><p id="eca1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">提出我们的要求。以上组件中使用了这些函数。</p><p id="f926" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app.module.ts</code>中，我们把:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="cdd7" class="kx ky iq ko b gy kz la l lb lc">import { BrowserModule } from '<a class="ae ld" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae ld" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import {<br/>  MatButtonModule,<br/>  MatCheckboxModule,<br/>  MatInputModule,<br/>  MatMenuModule,<br/>  MatSidenavModule,<br/>  MatToolbarModule,<br/>  MatTableModule,<br/>  MatDialogModule,<br/>  MAT_DIALOG_DEFAULT_OPTIONS,<br/>  MatDatepickerModule,<br/>  MatSelectModule,<br/>  MatCardModule,<br/>  MatFormFieldModule<br/>} from '<a class="ae ld" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';<br/>import { CustomFormsModule } from 'ng2-validation'<br/>import { BrowserAnimationsModule } from '<a class="ae ld" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>/animations';<br/>import { FormsModule } from '<a class="ae ld" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { StoreModule } from '<a class="ae ld" href="http://twitter.com/ngrx/store" rel="noopener ugc nofollow" target="_blank">@ngrx/store</a>';<br/>import { reducers } from './reducers';<br/>import { TopBarComponent } from './top-bar/top-bar.component';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { ContactFormPageComponent } from './contact-form-page/contact-form-page.component';<br/>import { HttpClientModule } from '<a class="ae ld" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { ContactFormComponent } from './contact-form/contact-form.component';<br/>import { ContactDialogComponent } from './contact-dialog/contact-dialog.component';<br/>import { ContactService } from './contact.service';</span><span id="7391" class="kx ky iq ko b gy le la l lb lc"><a class="ae ld" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    TopBarComponent,<br/>    HomePageComponent,<br/>    ContactFormPageComponent,<br/>    ContactFormComponent,<br/>    ContactDialogComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    FormsModule,<br/>    MatButtonModule,<br/>    StoreModule.forRoot(reducers),<br/>    BrowserAnimationsModule,<br/>    MatButtonModule,<br/>    MatCheckboxModule,<br/>    MatFormFieldModule,<br/>    MatInputModule,<br/>    MatMenuModule,<br/>    MatSidenavModule,<br/>    MatToolbarModule,<br/>    MatTableModule,<br/>    HttpClientModule,<br/>    MatDialogModule,<br/>    MatDatepickerModule,<br/>    MatSelectModule,<br/>    MatCardModule,<br/>    CustomFormsModule<br/>  ],<br/>  providers: [<br/>    ContactService<br/>  ],<br/>  bootstrap: [AppComponent],<br/>  entryComponents: [<br/>    ContactDialogComponent<br/>  ]<br/>})<br/>export class AppModule { }</span></pre><p id="1278" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">包括运行应用程序所需的所有库和组件。</p><p id="ad45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">styles.scss</code>中，我们提出:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="1628" class="kx ky iq ko b gy kz la l lb lc">/* You can add global styles to this file, and also import other style files */<br/><a class="ae ld" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> "~<a class="ae ld" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>/prebuilt-themes/indigo-pink.css";<br/><a class="ae ld" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> "./assets/bootstrap.min.css";<br/><a class="ae ld" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> "./assets/bootstrap-theme.min.css";<br/>body {<br/>  font-family: "Roboto", sans-serif;<br/>  margin: 0;<br/>}</span><span id="1a7d" class="kx ky iq ko b gy le la l lb lc">form {<br/>  mat-form-field {<br/>    width: 95%;<br/>    margin: 0 auto;<br/>  }<br/>}</span><span id="44ea" class="kx ky iq ko b gy le la l lb lc">.center {<br/>  text-align: center;<br/>}</span></pre><p id="4b28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">引导文件用于以响应的方式显示表格，而角度材料不提供。它是在<a class="ae ld" href="https://getbootstrap.com/docs/3.4/customize/" rel="noopener ugc nofollow" target="_blank">https://getbootstrap.com/docs/3.4/customize/</a>通过只检查网格系统和表格选项，提取下载的文件，并把它们放在<code class="fe kl km kn ko b">assets</code>文件夹中生成的。</p><p id="81df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们运行<code class="fe kl km kn ko b">npm install -g json-server</code>来安装JSON服务器，转到我们的项目文件夹并运行<code class="fe kl km kn ko b">json-server — watch db.json</code>，这样它将创建一个JSON文件来存储我们的数据。</p><p id="3d1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们得到:</p><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/77faab5c05df8d59d6d7b13ffeb0e97f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efyBbIyD2kOh2BefIrRsCw.png"/></div></div></figure><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/1a15f903bd3b6d8cd896195fb640abc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t8Y8d7-7S0-RqmYLLOoTCw.png"/></div></div></figure><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ln"><img src="../Images/b1ad5dd3cf225351e8863659fbc9a85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KRXzBWzcUE-4G5-7WkHIqg.png"/></div></div></figure><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/95ab536fd2ebc5a1be7925974f7f35a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4b-IfZDEUSKZIsrXFnGQA.png"/></div></div></figure><p id="2ab4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">立即在</strong><a class="ae ld" href="http://jauyeung.net/subscribe/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">http://jauyeung.net/subscribe/</strong></a><strong class="jp ir">订阅我的电子邮件列表。</strong></p><p id="6cf4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在推特上关注我</strong><a class="ae ld" href="https://twitter.com/AuMayeung" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">https://twitter.com/AuMayeung</strong></a></p></div></div>    
</body>
</html>
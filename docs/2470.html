<html>
<head>
<title>Getting Started with Vue Form Validation with Vee-Validate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vee-Validate开始Vue表单验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-vue-form-validation-with-vee-validate-14a96fefe12d?source=collection_archive---------4-----------------------#2020-06-27">https://javascript.plainenglish.io/getting-started-with-vue-form-validation-with-vee-validate-14a96fefe12d?source=collection_archive---------4-----------------------#2020-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8832e8c8343a59114c1176483fd1ce66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kQNNTMnoxPS4QJRf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@yakimadesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jordan Rowland</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ab52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">表单验证是Vue.js没有内置的功能。</p><p id="5a03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，我们还是非常需要这个功能。</p><p id="c93e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Vee-Validate库添加基本的表单验证。</p><h1 id="c293" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="e736" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以从安装包开始。</p><p id="6c3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5c89" class="mn lc iq mj b gy mo mp l mq mr">npm install vee-validate --save</span></pre><p id="13e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过编写以下代码来注册<code class="fe ms mt mu mj b">ValidationProvider</code>插件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c1af" class="mn lc iq mj b gy mo mp l mq mr">import Vue from "vue";<br/>import App from "./App.vue";<br/>import { ValidationProvider } from "vee-validate";</span><span id="9bc8" class="mn lc iq mj b gy mv mp l mq mr">Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.config.productionTip = false;</span><span id="d569" class="mn lc iq mj b gy mv mp l mq mr">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="acaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ms mt mu mj b">main.js</code>里。</p><p id="7edf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以在整个应用程序中使用它。</p><p id="524e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以导入<code class="fe ms mt mu mj b">extend</code>来创建我们自己的验证规则:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="66c4" class="mn lc iq mj b gy mo mp l mq mr">import Vue from "vue";<br/>import App from "./App.vue";<br/>import { ValidationProvider, extend } from "vee-validate";</span><span id="dec0" class="mn lc iq mj b gy mv mp l mq mr">extend("secret", {<br/>  validate: value =&gt; value === "secret",<br/>  message: "wrong word"<br/>});</span><span id="5450" class="mn lc iq mj b gy mv mp l mq mr">Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.config.productionTip = false;</span><span id="3236" class="mn lc iq mj b gy mv mp l mq mr">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="944f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">value</code>有输入的值，如果有效，我们返回<code class="fe ms mt mu mj b">true</code>，否则返回<code class="fe ms mt mu mj b">false</code>。</p><p id="064c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">message</code>是我们将要显示的表单验证错误消息。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4c12" class="mn lc iq mj b gy mo mp l mq mr">Vue.component(“ValidationProvider”, ValidationProvider);</span></pre><p id="d8b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将使<code class="fe ms mt mu mj b">ValidationProvider</code>组件全球可用。</p><h1 id="81e1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">基本用法</h1><p id="4ef5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码将<code class="fe ms mt mu mj b">ValidationProvider</code>组件添加到我们的应用程序中:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d5a4" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;ValidationProvider rules="secret" v-slot="{ errors }"&gt;<br/>      &lt;input v-model="email" type="text"&gt;<br/>      &lt;span&gt;{{ errors[0] }}&lt;/span&gt;<br/>    &lt;/ValidationProvider&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  data(){<br/>    return {<br/>      email: ''<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="a8c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们键入“secret ”,那么我们将什么也看不到。</p><p id="92a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们会看到我们之前设置的错误消息“单词错误”。</p><p id="7fff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">errors</code>拥有我们之前拥有的验证器返回的错误消息。</p><h1 id="368f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件注册</h1><p id="d41c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们只想在一个组件中使用<code class="fe ms mt mu mj b">ValidationProvider</code>组件，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fc4e" class="mn lc iq mj b gy mo mp l mq mr">import { ValidationProvider } from 'vee-validate';</span><span id="de72" class="mn lc iq mj b gy mv mp l mq mr">export default {<br/>  components: {<br/>    ValidationProvider<br/>  }<br/>};</span></pre><p id="669e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件中注册<code class="fe ms mt mu mj b">ValidationProvider</code>。</p><h1 id="7372" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">规则参数</h1><p id="9974" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以给规则添加参数。</p><p id="eabf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b57c" class="mn lc iq mj b gy mo mp l mq mr">extend("minLength", {<br/>  validate(value, args) {<br/>    return value.length &gt;= args.length;<br/>  },<br/>  params: ["length"],<br/>  message: "too short"<br/>});</span></pre><p id="e30e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个带有<code class="fe ms mt mu mj b">args</code>参数的<code class="fe ms mt mu mj b">validate</code>方法。</p><p id="5fbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">args</code>可以具有由<code class="fe ms mt mu mj b">params</code>属性指定的任何属性。</p><p id="92cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在这种情况下，我们可以拥有<code class="fe ms mt mu mj b">length</code>属性ion <code class="fe ms mt mu mj b">args</code>。</p><p id="ff48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6bf5" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;ValidationProvider rules="minLength:5" v-slot="{ errors }"&gt;<br/>      &lt;input v-model="value" type="text"&gt;<br/>      &lt;span&gt;{{ errors[0] }}&lt;/span&gt;<br/>    &lt;/ValidationProvider&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      value: ""<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="9e4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="47f8" class="mn lc iq mj b gy mo mp l mq mr">minLength:5</span></pre><p id="0816" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe ms mt mu mj b">args.length</code>设置为5。</p><p id="3ae6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果<code class="fe ms mt mu mj b">value</code>的长度小于5，我们会得到一个错误信息。</p><h1 id="b3d2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多个参数</h1><p id="3940" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的<code class="fe ms mt mu mj b">validate</code>方法中，我们可以有多个参数。</p><p id="6644" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4170" class="mn lc iq mj b gy mo mp l mq mr">extend("length", {<br/>  validate(value, { min, max }) {<br/>    return value.length &gt;= min &amp;&amp; value.length &lt;= max;<br/>  },<br/>  params: ["min", "max"],<br/>  message: "too short"<br/>});</span></pre><p id="ce2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0478" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;ValidationProvider rules="length:5,10" v-slot="{ errors }"&gt;<br/>      &lt;input v-model="value" type="text"&gt;<br/>      &lt;span&gt;{{ errors[0] }}&lt;/span&gt;<br/>    &lt;/ValidationProvider&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      value: ""<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="377e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在论证中将<code class="fe ms mt mu mj b">args</code>重组为<code class="fe ms mt mu mj b">min</code>和<code class="fe ms mt mu mj b">max</code>。</p><p id="fea6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们传入用逗号分隔的参数。</p><p id="077d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，如果我们输入少于5个字符或多于10个字符的内容，我们会看到一条错误消息。</p><p id="2b36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vee-Validate会自动传入任意数量的参数，并将其放入<code class="fe ms mt mu mj b">args</code>。</p><p id="2ab7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是将属性名放在<code class="fe ms mt mu mj b">params</code>中会让我们通过键获取，而不是以数组的形式获取。</p><p id="53f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以这样写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="74c1" class="mn lc iq mj b gy mo mp l mq mr">rules="one_of:1,2,3,4,5,6,7,8"</span></pre><p id="6769" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们为<code class="fe ms mt mu mj b">one_of</code>规则定义了一个<code class="fe ms mt mu mj b">validate</code>方法，那么<code class="fe ms mt mu mj b">args</code>将会有<code class="fe ms mt mu mj b">[1, 2, 3, 4, 5, 6, 7, 8]</code>。</p><h1 id="0694" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">信息</h1><p id="9113" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在验证函数中返回消息，作为在<code class="fe ms mt mu mj b">message</code>中设置它们的替代方法。</p><p id="d89b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e584" class="mn lc iq mj b gy mo mp l mq mr">import Vue from "vue";<br/>import App from "./App.vue";<br/>import { ValidationProvider, extend } from "vee-validate";</span><span id="3f96" class="mn lc iq mj b gy mv mp l mq mr">extend("positive", value =&gt; {<br/>  if (value &gt;= 0) {<br/>    return true;<br/>  }<br/>  return "please enter a positive number";<br/>});<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.config.productionTip = false;</span><span id="c384" class="mn lc iq mj b gy mv mp l mq mr">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="104b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="50f5" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;ValidationProvider rules="positive" v-slot="{ errors }"&gt;<br/>      &lt;input v-model="value" type="text"&gt;<br/>      &lt;span&gt;{{ errors[0] }}&lt;/span&gt;<br/>    &lt;/ValidationProvider&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      value: ""<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="1a7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们输入的不是正数，我们会看到“请输入一个正数”。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/45c0ab4a4a0ce0988be0a3181ea54a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EjEV2KKeZ_DS6iw9"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@beholdherlife?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Melanie Medina</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="54a6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2a1c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vee-Validate是一个易于使用的包，用于向Vue应用程序添加表单验证功能。</p><p id="0715" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这比用我们自己的代码验证输入要容易得多。</p><h2 id="66af" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="578f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
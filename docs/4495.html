<html>
<head>
<title>Try/Catch In TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在TypeScript中尝试/捕捉</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-dark-side-of-typescript-try-catch-deeded18ba0d?source=collection_archive---------0-----------------------#2020-12-16">https://javascript.plainenglish.io/the-dark-side-of-typescript-try-catch-deeded18ba0d?source=collection_archive---------0-----------------------#2020-12-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ff42" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用unknown转义Typescript 4.0中的任何错误异常</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/440715f87014160c9aa9c69e07aed506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OoTlD-900wGxEy0DPDdhFA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://unsplash.com/@jakobowens1" rel="noopener ugc nofollow" target="_blank">Jakob Owens</a> via <a class="ae kv" href="https://unsplash.com/photos/PVPsGlhs3rU" rel="noopener ugc nofollow" target="_blank">unsplash</a>(CC0)</figcaption></figure><h1 id="930b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">他们是故意这样做的吗？</h1><p id="8baa" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">TypeScript涵盖了JavaScript的许多概念。还有，有问题的。一些错误处理案例可能相当有趣，但是本文将引导您穿越丛林！</p><p id="4151" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">微软将TypeScript描述为JavaScript的超集。我告诉你这些是什么意思？简单地说，每个TypeScript代码也是有效的JavaScript代码。TypeScript可以做得比其父代更多，但不能更少。如果不是这样，项目的迁移就不会像现在这样容易，开发人员的接受程度也会降低。</p><p id="fd84" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正因为如此，他们也拿走了不好的。比如异常处理。如果分解一下，错误处理与C#中的非常相似。<em class="mp"> Throw </em>用于触发异常。当你猜对了这一个，你也会猜到下一个:<em class="mp">试着用&amp;抓</em>来对付它们。因此，异常是默认的还是用户定义的无关紧要。</p><p id="4e28" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="mp">最后</em>也成了打字稿。你只能使用<em class="mp"> try-finally </em>，这里不需要catch。<em class="mp">最后</em>用于确保我们清除不需要的内存分配。但这不是什么新鲜事，这已经实施了很多年了。</p><h1 id="77c1" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">它甚至不必是错误类型？！</h1><p id="11ab" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">尽管JavaScript没有经典的类型系统，但它提供了几种错误类型。<em class="mp">错误</em> —这是用于任何场合的全球化错误类型。<em class="mp"> SyntaxError </em> —被指定为在发生语法错误时抛出，而<em class="mp"> ReferenceError </em> —当任何值被赋给未声明的变量或赋值时没有使用<em class="mp"> var </em>关键字，或者变量不在我们当前的范围内[1]。</p><p id="631f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这种语言区分了这三种类型，并在合适的情况下抛出其中一种。或者在我们的例子中，代码有错误。Typescript派生了所有这些错误，这意味着下面的代码是有效的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="d37f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">有一个问题在我脑海中浮动。参数异常有什么类型？我认为很明显这必须是类型<em class="mp">错误</em>或者至少是一个与所有其他命名错误类有共同点的类型。某种错误——接口。</p><p id="6c73" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">参数的类型是<em class="mp"> any </em>。这使得我们想做什么就做什么，因为编译器不会抱怨，不管我们用参数<em class="mp">异常</em>做什么。我们将可以访问任何已定义的属性。Typescript不应用严格使用的类型安全。</p><p id="f847" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里有两个问题:</p><ol class=""><li id="ef73" class="ms mt iq lq b lr mk lu ml lx mu mb mv mf mw mj mx my mz na bi translated">为什么会这样？</li><li id="b315" class="ms mt iq lq b lr nb lu nc lx nd mb ne mf nf mj mx my mz na bi translated">为什么这会有意义？</li></ol><p id="421f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我用几秒钟的时间回答了第一个问题:JavaScript并没有强迫我们将错误作为异常使用。你甚至不需要从它那里得到什么，你可以扔任何你想要的东西，一个球，一个坚果，一个棒球棍…它就在你的手中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="8113" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个投掷是无意义的，但是语法上是正确的。为了执行这段代码，程序将捕捉到值42。宇宙万物的答案。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="fd09" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这就是第一个问题的答案。Typescript从any进行推断，因为它无法猜测甚至不知道程序的其他部分会抛出什么代码。</p><p id="e280" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">接下来是这个问题的答案，如果这是好的？</p><h1 id="96ad" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">错误错误错误</h1><p id="13de" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我真的不认为这是好事。为什么？因为Typescript应该制止它，而不是支持不安全的错误类型！</p><p id="5316" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">但是你怎么能这样做呢？向后兼容性是Typescript给我们开发人员的主要承诺。它可以简单地使用任何类型之外的另一种类型。比如<em class="mp">未知</em>。这不会有太大的区别，因为<em class="mp">未知</em>限制了属性的可访问性，甚至不给这样做的机会。这是有原因的，我们不知道未知是什么，所以不去接触一个我们甚至不知道的东西是合乎逻辑的。</p><p id="8c6f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">不幸的是，这并没有带来更多的类型安全，而是带来了一点一般性的安全，因为它不允许我们访问属性。从Typescript 4.0开始，可以在catch语句中声明一个类型。我们强迫程序明确声明<em class="mp">任何未知的</em>或<em class="mp"/>。我们希望<em class="mp">未知</em>型<em class="mp"> </em>达到我们的目标。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="282d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因为linters对每个开发人员和团队来说都是一种祝福，所以也有一个规则。<em class="mp">ESLINT-plugin</em>【2】得到了<em class="mp">no-implicit-any-catch</em>【3】的规则。这将帮助你迫使任何人去编码<em class="mp">尝试&amp;捕捉</em>有用的东西。你甚至可以强制使用未知类型。这在类型安全方面非常有帮助。这就是为什么你使用Typescript。</p><h1 id="2af7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">铅字护板</h1><p id="f878" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">因为您的代码中已经有许多任何类型的异常，您不希望手动更改它们，但是为了更好地处理异常，您最好转换它们。类型保护是一种有用的方法。这个函数必须检查一个值的类型是否正确，如果可能的话，就转换这个值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="6666" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当然，有一个NPM模块。是的，为什么不呢？名字是<em class="mp">defe kt</em>【4】。这个可以创建你自己的错误类。比如这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="6aa8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="a6ee" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我也喜欢Typescript &amp; JavaScript。它们是很棒的语言，可以让简单的想法变得很快，每个人都可以理解。它们也非常适合制作非常酷和特别的web应用程序。但是Typescript必须摆脱的一件事是本文所涉及的主题。简单地利用JavaScript容易出错的旧属性，让它们保持原样。另一方面，如果没有与JS的向后兼容，TS会是什么样呢？我真的不能对微软这样做提出指责。如果没有向后兼容，TS也不会这么大。</p><p id="c6ad" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为此，更重要的是要了解你的语言，了解你的语言是从哪里来的。JavaScript是现代网络的基础。</p><p id="ab6a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><a class="ae kv" href="https://arnoldcodeacademy.ck.page/26-web-dev-cheat-sheets" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> <em class="mp">节省自己大量的时间，专注于重要的主题。</em> </strong> </a></p><p id="4d80" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">延伸阅读:</p><div class="ng nh gp gr ni nj"><a href="https://towardsdatascience.com/javascript-ecmascript-history-the-hidden-features-acb38af57be8" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">JavaScript ECMAScript历史-隐藏的特性</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">关于ECMAScript版本中不流行的技巧的JavaScript历史指南</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://medium.com/next-level-source-code/if-else-and-switch-case-conditions-write-better-code-3-f7ca430eda62" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">If Else和Switch case条件—编写更好的代码3</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">如何通过修改if-else和switch case条件来编写更好的代码</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kp nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://medium.com/javascript-in-plain-english/javascript-break-promises-keep-callbacks-4dbf9cff3d9a" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">JavaScript中的异步与同步编程</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">打破承诺，坚持回访</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx kp nj"/></div></div></a></div><h2 id="1bba" class="oa kx iq bd ky ob oc dn lc od oe dp lg lx of og li mb oh oi lk mf oj ok lm ol bi translated">链接和参考</h2><p id="5849" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">[1]异常处理<br/><a class="ae kv" href="https://basarat.gitbook.io/typescript/type-system/exceptions" rel="noopener ugc nofollow" target="_blank">https://basarat . git book . io/typescript/type-system/exceptions</a><br/>2)eslint-plugin<br/><a class="ae kv" href="https://eslint.org/docs/developer-guide/working-with-plugins" rel="noopener ugc nofollow" target="_blank">https://eslint . org/docs/developer-guide/working-with-plugins</a><br/>【3】无隐式任何catch<br/><a class="ae kv" href="https://tinyurl.com/y8vckrmx" rel="noopener ugc nofollow" target="_blank">https://tinyurl.com/y8vckrmx</a><br/>【4】NPM modul defe kt<br/><a class="ae kv" href="https://www.npmjs.com/package/defekt" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/defekt</a></p></div></div>    
</body>
</html>
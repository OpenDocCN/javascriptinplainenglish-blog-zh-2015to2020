<html>
<head>
<title>Using Event Handlers in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中使用事件处理程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-event-handlers-in-javascript-3a6f61718e46?source=collection_archive---------0-----------------------#2019-10-23">https://javascript.plainenglish.io/using-event-handlers-in-javascript-3a6f61718e46?source=collection_archive---------0-----------------------#2019-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/72353a3f5e79a3030d9b97e9de6698a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QpQqefqC2PNJh1OG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@emcomeau?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ezra Jeffrey-Comeau</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="93c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何具有动态功能的网站都需要处理与它们交互的用户。这是用户可以使用的页面控件。为了让用户使用这些控件，页面必须能够处理用户对控件的操作。这些是JavaScript中事件的例子。事件还包括浏览器完成的其他活动，如页面加载。</p><p id="e1c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了HTML DOM，JavaScript可以从中获取元素并处理事件。一些事件根据它们所应用的元素进行分组。其他事件适用于除body和frameset元素之外的所有元素。</p><p id="3aae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有HTML元素支持的事件列表如下:</p><ul class=""><li id="0cbd" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><code class="fe lk ll lm ln b">abort</code>，文件加载中止时触发</li><li id="62eb" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">change</code>，值改变时触发</li><li id="c957" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">click</code>，点击鼠标或轻击屏幕时触发</li><li id="348c" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dbclick</code>，鼠标点击两次触发</li><li id="639b" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">input</code>，当<code class="fe lk ll lm ln b">input</code>或<code class="fe lk ll lm ln b">textarea</code>元素的输入值改变时触发</li><li id="cff1" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">keydown</code>，按下键时触发</li><li id="011b" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">keyup</code>，按键按下后松开时触发</li><li id="df62" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mousedown</code>，按下鼠标按钮时触发</li><li id="0d38" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mouseenter</code>，释放鼠标按钮时触发</li><li id="b541" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mouseleave</code>，当鼠标离开一个元素时触发</li><li id="3713" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mousemove</code>，鼠标移动到元素上时触发</li><li id="a050" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mouseout</code>，当鼠标离开一个元素时触发</li><li id="0ff3" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mouseover</code>，鼠标悬停在元素上时触发</li><li id="2619" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mouseup</code>，释放鼠标按钮时触发</li><li id="6292" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">mousewheel</code>，鼠标滚轮旋转时触发</li><li id="5b23" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">onreset</code>，表格重置时触发</li><li id="9fcc" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">select</code>，选择文本时触发</li><li id="8ac6" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">submit</code>，提交表单时触发</li><li id="73b9" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">drag</code>，拖动元素时触发</li><li id="0ae9" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dragend</code>，拖动元素时触发</li><li id="5ddc" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dragenter</code>，当被拖动元素进入放置目标时触发</li><li id="c0a8" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dragstart</code>，元素开始拖动时触发</li><li id="de42" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dragleave</code>，当拖动的元素离开有效的放置目标时触发</li><li id="1bf7" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">dragover</code>，当元素或文本选择被拖动到有效的放置目标上时触发</li><li id="7f84" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">drop</code>，当元素被放置在有效的放置目标上时触发</li></ul><p id="36d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是一些HTML音频和视频事件:</p><ul class=""><li id="5061" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><code class="fe lk ll lm ln b">pause</code>，媒体播放开始时触发</li><li id="c0a1" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">play</code>，回放开始时触发</li><li id="8f36" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">playing</code>，媒体播放时触发</li><li id="75a8" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">seeking</code>，搜索媒体时触发</li><li id="744b" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">seeked</code>，媒体寻道完成时触发</li></ul><p id="4e68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了<code class="fe lk ll lm ln b">body</code>和<code class="fe lk ll lm ln b">frameset</code>元素之外的每个元素支持的事件如下:</p><ul class=""><li id="c076" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><code class="fe lk ll lm ln b">blur</code>，当元素失去焦点时触发</li><li id="8307" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">error</code>，文件加载失败时触发</li><li id="c5ab" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">focus</code>，当元素处于焦点时触发</li><li id="f3f8" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">load</code>，加载文件和附件时触发</li><li id="dd2b" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">resize</code>，调整文档大小时触发</li><li id="f587" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">scroll</code>，滚动元素时触发</li></ul><p id="c7c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lk ll lm ln b">window</code>对象支持的事件如下:</p><ul class=""><li id="628e" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><code class="fe lk ll lm ln b">afterprint</code>，打印预览窗口关闭或文档开始打印时触发</li><li id="558c" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">beforeprint</code>，当打印预览窗口打开或文档将要打印时触发</li><li id="30f6" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">beforeunload</code>，卸载单据时触发</li><li id="df2a" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">hashchange</code>，当URL中带有井号(#)的部分发生变化时触发</li><li id="76ae" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">pagehide</code>，当浏览器离开浏览器历史中的页面时触发</li><li id="61eb" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">pageshow</code>，浏览器转到页面时触发</li><li id="f94e" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">popstate</code>，当会话历史项改变时触发</li><li id="e04d" class="lb lc iq kf b kg lo kk lp ko lq ks lr kw ls la lg lh li lj bi translated"><code class="fe lk ll lm ln b">unload</code>，卸载文档和包含的文件时触发</li></ul><p id="f31f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">浏览器可以处理更多的事件。他们在<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/Events" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/Events</a>上市。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/0dc09ffaec3b03ffea956f59a8763e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QagaBETJ2Mz9iw4u"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@nilsjakob?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nils Stahl</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a77a" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">事件处理</h1><p id="a9ec" class="pw-post-body-paragraph kd ke iq kf b kg mw ki kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">当浏览器的JavaScript代码响应这些事件时，它被称为事件处理。JavaScript中有几种处理事件的方法。</p><h2 id="e2fd" class="nb lz iq bd ma nc nd dn me ne nf dp mi ko ng nh mm ks ni nj mq kw nk nl mu nm bi translated">内嵌事件处理程序</h2><p id="1567" class="pw-post-body-paragraph kd ke iq kf b kg mw ki kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">我们可以直接在元素代码中添加事件处理程序。我们可以在HTML元素的属性中编写代码来处理代码。例如，如果我们想在按钮被点击时处理事件，我们可以将事件处理代码放在按钮元素的<code class="fe lk ll lm ln b">onclick</code>属性中，如下所示:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="a60e" class="nb lz iq ln b gy nr ns l nt nu">&lt;button onclick='alert('Button clicked')&gt;Click me&lt;/button&gt;</span></pre><p id="0568" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很可能我们想要阻止默认动作的发生，比如导航到一个新的页面或者当点击一个按钮时触发提交。为了防止这些默认动作发生，我们可以将<code class="fe lk ll lm ln b">return false</code>放在脚本的末尾。如果我们在一个<code class="fe lk ll lm ln b">a</code>标签中处理<code class="fe lk ll lm ln b">onclick</code>事件，我们可以做以下事情来防止导航到一个新的页面:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="d7f6" class="nb lz iq ln b gy nr ns l nt nu">&lt;a onclick='alert('Clicked'); return false;'&gt;Click me&lt;/a&gt;</span></pre><h2 id="1972" class="nb lz iq bd ma nc nd dn me ne nf dp mi ko ng nh mm ks ni nj mq kw nk nl mu nm bi translated">处理脚本标记中的事件</h2><p id="24d4" class="pw-post-body-paragraph kd ke iq kf b kg mw ki kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">内联事件处理程序不好，因为您在HTML中混合了动态代码，而HTML应该只关心将页面组织成有意义的部分。此外，如果您有复杂的代码，那么很难将所有代码都放在属性中。我们应该将事件处理程序附加到元素上，方法是将它们放入专用代码中，然后将代码放入事件处理程序的回调函数中来处理事件。</p><p id="9168" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有当您按下不同按钮时增加和减少计数器的代码，我们可以编写如下代码。</p><p id="6db7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个新文件夹，然后在<code class="fe lk ll lm ln b">index.html</code>中，我们放入:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="8046" class="nb lz iq ln b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Counting App&lt;/title&gt;<br/>  &lt;/head&gt;</span><span id="d08b" class="nb lz iq ln b gy nv ns l nt nu">  &lt;body&gt;<br/>    &lt;h1&gt;Click the button to count.&lt;/h1&gt;<br/>    &lt;p&gt;Current Number: &lt;span id="currentCount"&gt;0&lt;/span&gt;&lt;/p&gt;<br/>    &lt;button id="increaseButton"&gt;Increase&lt;/button&gt;<br/>    &lt;button id="decreaseButton"&gt;Decrease&lt;/button&gt;<br/>    &lt;script src="script.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="c7cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe lk ll lm ln b">script.js</code>中，我们把:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="34c0" class="nb lz iq ln b gy nr ns l nt nu">const handleIncrease = () =&gt; {<br/>  const currentCount = document.getElementById("currentCount");<br/>  const increaseButton = document.getElementById("increaseButton");<br/>  increaseButton.onclick = () =&gt; {<br/>    currentCount.innerHTML++;<br/>  };<br/>};</span><span id="a03d" class="nb lz iq ln b gy nv ns l nt nu">const handleDecrease = () =&gt; {<br/>  const currentCount = document.getElementById("currentCount");<br/>  const decreaseButton = document.getElementById("decreaseButton");<br/>  decreaseButton.onclick = () =&gt; {<br/>    currentCount.innerHTML--;<br/>  };<br/>};</span><span id="719c" class="nb lz iq ln b gy nv ns l nt nu">const initialize = () =&gt; {<br/>  handleIncrease();<br/>  handleDecrease();<br/>};</span><span id="1111" class="nb lz iq ln b gy nv ns l nt nu">window.onload = initialize;</span></pre><p id="1b2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe lk ll lm ln b">script.js</code>中，我们有处理<code class="fe lk ll lm ln b">index.html</code>中按钮点击的函数。我们通过使用<code class="fe lk ll lm ln b">getElementById</code>获取元素对象来附加事件处理程序，然后我们使用元素自己的匿名事件处理程序函数来设置元素的<code class="fe lk ll lm ln b">onclick</code>属性。如果我们想给它分配一个函数引用，我们可以像对<code class="fe lk ll lm ln b">window.onload</code>那样做。在处理程序中，我们获取ID为<code class="fe lk ll lm ln b">currentCount</code>的元素的内容，然后在获取原始内容后修改<code class="fe lk ll lm ln b">innerHTML</code>属性来更改内容。在最后一行，我们将变量<code class="fe lk ll lm ln b">initialize</code>赋给它。我们不想立即调用它，而是在事件实际发生时调用，所以在<code class="fe lk ll lm ln b">initialize</code>后没有括号。我们在函数上给它分配了引用<strong class="kf ir">而不是立即调用它并返回结果。</strong></p><h2 id="12ee" class="nb lz iq bd ma nc nd dn me ne nf dp mi ko ng nh mm ks ni nj mq kw nk nl mu nm bi translated">addEventListener</h2><p id="f893" class="pw-post-body-paragraph kd ke iq kf b kg mw ki kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">将事件处理程序附加到函数的另一种方式是使用HTML元素对象可用的<code class="fe lk ll lm ln b">addEventListener</code>函数。<code class="fe lk ll lm ln b">addEventListener</code>事件监听触发的DOM事件，并在事件发生时运行您传递给它的回调函数。回调函数有一个参数，包含被触发事件的详细信息。有了<code class="fe lk ll lm ln b">addEventListener</code>，我们可以重用代码，因为我们可以在多个地方使用同一个回调函数。您还可以控制事件的触发方式，因为我们有包含事件细节的参数。它也适用于DOM树中的非元素节点。</p><p id="2c3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们把上面的例子改成使用<code class="fe lk ll lm ln b">addEventListener</code>，我们可以把<code class="fe lk ll lm ln b">script.js</code>中的替换成:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="2892" class="nb lz iq ln b gy nr ns l nt nu">const handleClick = e =&gt; {<br/>  const currentCount = document.getElementById("currentCount");<br/>  if (e.target.id === "increaseButton") {<br/>    currentCount.innerHTML++;<br/>  }</span><span id="6d93" class="nb lz iq ln b gy nv ns l nt nu">  if (e.target.id === "decreaseButton") {<br/>    currentCount.innerHTML--;<br/>  }<br/>};</span><span id="57fc" class="nb lz iq ln b gy nv ns l nt nu">const handleIncrease = () =&gt; {<br/>  const increaseButton = document.getElementById("increaseButton");<br/>  increaseButton.addEventListener("click", handleClick);<br/>};</span><span id="988b" class="nb lz iq ln b gy nv ns l nt nu">const handleDecrease = () =&gt; {<br/>  const decreaseButton = document.getElementById("decreaseButton");<br/>  decreaseButton.addEventListener("click", handleClick);<br/>};</span><span id="6828" class="nb lz iq ln b gy nv ns l nt nu">const initialize = () =&gt; {<br/>  handleIncrease();<br/>  handleDecrease();<br/>};</span><span id="26d2" class="nb lz iq ln b gy nv ns l nt nu">window.onload = initialize;</span></pre><p id="2819" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所见，我们使用了相同的<code class="fe lk ll lm ln b">handleClick</code>函数来处理按钮<code class="fe lk ll lm ln b">increaseButton</code>和<code class="fe lk ll lm ln b">decreaseButton</code>的点击。我们通过使用<code class="fe lk ll lm ln b">e.target.id</code>属性来检查哪个元素触发了click事件，该属性具有元素的id属性。在同一个事件处理函数中为不同的元素做不同的动作称为<strong class="kf ir">事件委托</strong>。当不同的元素被触发时，我们委派不同的动作。与第一个例子相比，重复的代码更少。</p><p id="e4e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lk ll lm ln b">addEventListener</code>函数有3个参数。第一个是包含事件名称的字符串，第二个是处理事件的回调函数。最后一个指示父元素是否也与then事件相关联。如果是则为<code class="fe lk ll lm ln b">true</code>，否则为<code class="fe lk ll lm ln b">false</code>。</p><p id="5147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有一个父元素也与该事件相关联，那么您可以将该事件传播到父元素。这是一个冒泡事件的调用，如果它冒泡了，父元素也会触发该事件。还有一个捕获方法，让父元素的事件先发生，子元素在后发生。它很少在代码中使用，所以我们不必太担心这一点。</p><p id="cbc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事件冒泡的一个例子如下。如果我们在<code class="fe lk ll lm ln b">index.html</code>中有以下内容:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="531a" class="nb lz iq ln b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Click App&lt;/title&gt;<br/>  &lt;/head&gt;</span><span id="e0a1" class="nb lz iq ln b gy nv ns l nt nu">  &lt;body&gt;<br/>    &lt;div id="grandparent"&gt;<br/>      &lt;div id="parent"&gt;<br/>        &lt;button id="child"&gt;<br/>          Click Me<br/>        &lt;/button&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="script.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9ca1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以及<code class="fe lk ll lm ln b">script.js</code>中的以下内容:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="15cb" class="nb lz iq ln b gy nr ns l nt nu">window.onload = () =&gt; {<br/>  const child = document.getElementById("child");<br/>  const parent = document.getElementById("parent");<br/>  const grandparent = document.getElementById("grandparent");<br/>  child.addEventListener(<br/>    "click",<br/>    () =&gt; {<br/>      alert("Child Clicked");<br/>    },<br/>    true<br/>  );</span><span id="a5c5" class="nb lz iq ln b gy nv ns l nt nu">  parent.addEventListener(<br/>    "click",<br/>    () =&gt; {<br/>      alert("Parent Clicked");<br/>    },<br/>    true<br/>  );</span><span id="8354" class="nb lz iq ln b gy nv ns l nt nu">  grandparent.addEventListener(<br/>    "click",<br/>    () =&gt; {<br/>      alert("Grandparent Clicked");<br/>    },<br/>    true<br/>  );<br/>};</span></pre><p id="307d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当点击“Click me”按钮时，我们应该会得到3个警告，因为我们指定让点击事件一直冒泡到顶部元素。</p><h1 id="3fa9" class="ly lz iq bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">停止事件传播</h1><p id="cde8" class="pw-post-body-paragraph kd ke iq kf b kg mw ki kj kk mx km kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">如果我们只希望事件发生在你想要的那个上，那么你必须阻止它传播到父节点。如果我们将前面示例中的<code class="fe lk ll lm ln b">script.js</code>修改为:</p><pre class="lu lv lw lx gt nn ln no np aw nq bi"><span id="48fb" class="nb lz iq ln b gy nr ns l nt nu">window.onload = () =&gt; {<br/>  const child = document.getElementById("child");<br/>  const parent = document.getElementById("parent");<br/>  const grandparent = document.getElementById("grandparent");<br/>  child.addEventListener(<br/>    "click",<br/>    e =&gt; {<br/>      if (e.stopPropagation) {<br/>        e.stopPropagation();<br/>      }<br/>      alert("Child Clicked");<br/>    },<br/>    true<br/>  );</span><span id="3ebd" class="nb lz iq ln b gy nv ns l nt nu">  parent.addEventListener(<br/>    "click",<br/>    e =&gt; {<br/>      if (e.stopPropagation) {<br/>        e.stopPropagation();<br/>      }<br/>      alert("Parent Clicked");<br/>    },<br/>    true<br/>  );</span><span id="186a" class="nb lz iq ln b gy nv ns l nt nu">  grandparent.addEventListener(<br/>    "click",<br/>    e =&gt; {<br/>      if (e.stopPropagation) {<br/>        e.stopPropagation();<br/>      }<br/>      alert("Grandparent Clicked");<br/>    },<br/>    true<br/>  );<br/>};</span></pre><p id="92a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该只看到“祖父单击”,因为我们用<code class="fe lk ll lm ln b">stopPropagation</code>函数阻止了事件的传播。停止传播应该会使您的代码更快，因为冒泡和捕获需要资源。</p></div></div>    
</body>
</html>
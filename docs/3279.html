<html>
<head>
<title>Create an Admin Panel with Node.js and Admin Bro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js和Admin Bro创建一个管理面板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/node-js-creating-admin-pannel-with-admin-bro-41725198a81c?source=collection_archive---------7-----------------------#2020-09-15">https://javascript.plainenglish.io/node-js-creating-admin-pannel-with-admin-bro-41725198a81c?source=collection_archive---------7-----------------------#2020-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c4f98026a240fdc8d75e52f18453c603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNaU10J0yibvvTlL_xTjZA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Cover Image</figcaption></figure><p id="85b4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这篇博客中，我将展示如何创建一个管理面板，根据我们的模型自动执行CRUD操作。</p><p id="4e9d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，我使用了Admin Bro，这是一个基于模型生成UI的自动UI生成器。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><ol class=""><li id="bdd1" class="lh li iq ke b kf kg kj kk kn lj kr lk kv ll kz lm ln lo lp bi translated"><a class="ae lq" href="#8d4e" rel="noopener ugc nofollow">创建节点JS项目</a></li><li id="2449" class="lh li iq ke b kf lr kj ls kn lt kr lu kv lv kz lm ln lo lp bi translated"><a class="ae lq" href="#8684" rel="noopener ugc nofollow">创建模型</a></li><li id="abb8" class="lh li iq ke b kf lr kj ls kn lt kr lu kv lv kz lm ln lo lp bi translated"><a class="ae lq" href="#51f1" rel="noopener ugc nofollow">创建管理面板</a></li></ol></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><h2 id="8d4e" class="lw lx iq bd ly lz ma dn mb mc md dp me kn mf mg mh kr mi mj mk kv ml mm mn mo bi translated"><strong class="ak"> 1。创建Node.js项目</strong></h2><p id="6fba" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">用命令<code class="fe mu mv mw mx b">npm init</code>创建一个新目录并初始化节点。</p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="7ce3" class="lw lx iq mx b gy ng nh l ni nj">mkdir expresstemplate<br/>cd expresstemplate/<br/>npm init -y<br/>npm i nodemon</span></pre><p id="a026" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Express JS是node JS的开源web框架。以下命令将express安装到我们的项目中。</p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="37d2" class="lw lx iq mx b gy ng nh l ni nj">npm install express --save</span></pre><div class="nk nl gp gr nm nn"><a href="https://expressjs.com/en/starter/installing.html" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">安装</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">假设您已经安装了Node.js，创建一个目录来保存您的应用程序，并使它成为您的工作…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">expressjs.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jw nn"/></div></div></a></div><p id="ed06" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mx b">package.json</code></p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="6331" class="lw lx iq mx b gy ng nh l ni nj">"scripts": {<br/>  <strong class="mx ir">"start": "nodemon index.js",</strong><br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>},</span></pre><p id="0246" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mx b">index.js</code></p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="afd3" class="lw lx iq mx b gy ng nh l ni nj">const express = require('express')<br/>var app = express()<br/>app.get('/', function(req,res){<br/>  res.send('Hello world')<br/>})<br/>app.listen(8000,function(){<br/>  console.log('Listening to PORT 8000')<br/>})</span></pre><h2 id="8684" class="lw lx iq bd ly lz ma dn mb mc md dp me kn mf mg mh kr mi mj mk kv ml mm mn mo bi translated">2.<strong class="ak">创建模型</strong></h2><p id="58d7" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">现在安装<code class="fe mu mv mw mx b">mongoose</code>，它是MongoDB和Node.js的对象数据建模库，它管理数据之间的关系并提供模式验证。该命令安装mongoose。</p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="5e67" class="lw lx iq mx b gy ng nh l ni nj">npm i mongoose</span></pre><p id="581c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装mongose后，将MongoDB连接到Node.js，只需将MongoDB连接字符串传递给mongose即可实现连接。</p><p id="fca6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mx b">index.js</code></p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="d090" class="lw lx iq mx b gy ng nh l ni nj">var express = require('express');<br/>var app = express();<br/>const mongoose = require('mongoose');//Routes<br/>app.get('/', function (req, res) {<br/>    res.send('Hello World!');<br/>});<br/><strong class="mx ir">//Database<br/>mongoose.connect('mongodb://localhost/test', {useNewUrlParser: true});</strong></span><span id="583a" class="lw lx iq mx b gy oc nh l ni nj"><strong class="mx ir">mongoose.connection.once('open',function(){<br/>    console.log('Database connected Successfully');<br/>}).on('error',function(err){<br/>    console.log('Error', err);<br/>})</strong></span><span id="6b5a" class="lw lx iq mx b gy oc nh l ni nj">app.listen(8000, function () {<br/>    console.log('Listening to Port 8000');<br/>});</span></pre><p id="536d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在成功地将node与MongoDB连接起来之后，创建一个名为<code class="fe mu mv mw mx b">Models</code>的文件夹，所有的模式都将保存在这个文件夹中。在<code class="fe mu mv mw mx b">Models</code>文件夹中，创建一个名为<code class="fe mu mv mw mx b">emp.js</code>的文件。在这个文件中，创建一个名为<code class="fe mu mv mw mx b">empSchema</code>的模式，并声明所有需要的字段。最后，导出模式。</p><p id="ebce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mx b">Models/emp.js</code></p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="369a" class="lw lx iq mx b gy ng nh l ni nj">const mongoose = require('mongoose');<strong class="mx ir">const empSchema = new mongoose.Schema({<br/>  empName: {<br/>    type: String,<br/>    required: true,<br/>  },  empEmail: {<br/>    type: String,<br/>    required: true,<br/>  },<br/>})</strong>module.exports = mongoose.model('Emp',empSchema)</span></pre><h2 id="51f1" class="lw lx iq bd ly lz ma dn mb mc md dp me kn mf mg mh kr mi mj mk kv ml mm mn mo bi translated">3.<strong class="ak">创建管理面板</strong></h2><p id="42f4" class="pw-post-body-paragraph kc kd iq ke b kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz ij bi translated">现在，让我们开始创建我们的管理面板。为此，我们需要在项目中安装Admin bro。</p><div class="nk nl gp gr nm nn"><a href="https://adminbro.com/tutorial-installation-instructions.html" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">Node.js应用程序的自动生成的管理面板</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">喜欢看而不是读？看看这个视频教程，它向你展示了如何创建一个管理面板…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">adminbro.com</p></div></div><div class="nw l"><div class="od l ny nz oa nw ob jw nn"/></div></div></a></div><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="f86b" class="lw lx iq mx b gy ng nh l ni nj">npm install admin-bro @admin-bro/express<br/>npm install <!-- -->express-formidable<br/>npm install @admin-bro/mongoose</span></pre><p id="2d58" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以上命令安装Admin bro和其他使Admin bro工作所需的依赖项。</p><p id="17dd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">安装后，将下面的代码复制到index.js文件中。</p><p id="01cf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe mu mv mw mx b">index.js</code></p><pre class="my mz na nb gt nc mx nd ne aw nf bi"><span id="3da0" class="lw lx iq mx b gy ng nh l ni nj">var express = require('express');<br/>const Emp = require('./Models/emp')<br/>const AdminBro = require('admin-bro')<br/>const AdminBroMongoose = require('@admin-bro/mongoose')<br/>const AdminBroExpress = require('@admin-bro/express')</span><span id="5bbf" class="lw lx iq mx b gy oc nh l ni nj">var app = express();<br/>const mongoose = require('mongoose');//Routes<br/>app.get('/', function (req, res) {<br/>    res.send('Hello World!');<br/>});</span><span id="9b4e" class="lw lx iq mx b gy oc nh l ni nj">//Database<br/>mongoose.connect('mongodb://localhost/test', {useNewUrlParser: true});<br/>mongoose.connection.once('open',function(){<br/>    console.log('Database connected Successfully');<br/>}).on('error',function(err){<br/>    console.log('Error', err);<br/>})</span><span id="f4e3" class="lw lx iq mx b gy oc nh l ni nj"><strong class="mx ir">//Admin Bro<br/>AdminBro.registerAdapter(AdminBroMongoose)<br/>const User = mongoose.model('User', { name: String, email: String, surname: String })<br/>const AdminBroOptions = {<br/>  resources: [User, Emp],<br/>}<br/>const adminBro = new AdminBro(AdminBroOptions)<br/>const router = AdminBroExpress.buildRouter(adminBro)<br/>app.use(adminBro.options.rootPath, router)</strong></span><span id="05e6" class="lw lx iq mx b gy oc nh l ni nj">app.listen(8000, function () {<br/>    console.log('Listening to Port 8000');<br/>});</span></pre><p id="2186" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">完成后，导航到<a class="ae lq" href="http://localhost:8000/admin" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/admin</a>。在那里你会看到类似下图的东西。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2d9b72756f3c23c6ea2703e900af007a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_lke6XXcR4dW4zxQkgVPCw.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Admin Bro Demonstration</figcaption></figure><p id="1694" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">另外，看看我之前的博客，我在里面解释了关于node js的模板引擎。</p><p id="632a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如有任何疑问，请随时联系我。邮箱:sjlouji10@gmail.com领英:<a class="ae lq" href="https://www.linkedin.com/in/sjlouji/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sjlouji/</a></p><p id="8f0e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我的GitHub上的完整代码:</p><div class="nk nl gp gr nm nn"><a href="https://github.com/sjlouji/Node-JS-Basics---Medium" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">sjlouji/Node-JS-basic-Medium</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">快速路由节点。在GitHub上创建一个帐户，为sjlouji/Node-JS-Basics - Medium开发做贡献。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="oe l ny nz oa nw ob jw nn"/></div></div></a></div><p id="a072" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">编码快乐！</p></div></div>    
</body>
</html>
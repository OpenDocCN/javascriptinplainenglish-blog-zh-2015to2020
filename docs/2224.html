<html>
<head>
<title>Top JavaScript Code-Tuning Techniques</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶级JavaScript代码调优技术</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/top-javascript-code-tuning-techniques-806f8d780a3b?source=collection_archive---------7-----------------------#2020-06-01">https://javascript.plainenglish.io/top-javascript-code-tuning-techniques-806f8d780a3b?source=collection_archive---------7-----------------------#2020-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a377e1ca7ff8af16302e7725ad063f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9A_ypfXOUNVJIYb_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@dascal?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adrian Dascal</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d2ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="fb05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究JavaScript代码的一些常见代码调优技术。</p><h1 id="fdcc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">当我们知道答案时停止测试</h1><p id="0648" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript做短路评估。因此，我们应该利用这一点，让它只测试需要的条件。</p><p id="875e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，以下内容是多余的:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bedb" class="mn lc iq mj b gy mo mp l mq mr">if ((5 &lt; x) &amp;&amp; (x &lt; 10)) {<br/>  //..<br/>}</span></pre><p id="e8c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe ms mt mu mj b">x</code>是否大于5，以及<code class="fe ms mt mu mj b">x</code>是否小于10。</p><p id="7e6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们知道<code class="fe ms mt mu mj b">x</code>不大于5，那么我们就不需要检查<code class="fe ms mt mu mj b">x</code>是否小于10。</p><p id="9bba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以将其改写为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="79c2" class="mn lc iq mj b gy mo mp l mq mr">if (5 &lt; x) {<br/>  //..<br/>  else if (x &lt; 10) {<br/>    //..<br/>  }<br/>}</span></pre><p id="f854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们检查只有当<code class="fe ms mt mu mj b">x</code>大于5时<code class="fe ms mt mu mj b">x</code>才小于10</p><h1 id="ab3d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">按频率排列测试</h1><p id="7e3d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该将更频繁遇到的案例放在第一位，这样就不必经常检查早期的案例。</p><p id="6169" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a998" class="mn lc iq mj b gy mo mp l mq mr">switch (val) {<br/>  case '+': {<br/>    //...<br/>    break;<br/>  }<br/>  case '-': {<br/>    //..<br/>    break;<br/>  }<br/>  //...<br/>}</span></pre><p id="aa73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设更经常遇到加法，那么我们把它放在第一位，这样其他情况就不必频繁检查，减少了必须运行的代码量。</p><h1 id="0c89" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用表格查找代替复杂的表达式</h1><p id="3e16" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有很多案例要检查，而我们只检查一些常量，那么我们可以用查找表代替<code class="fe ms mt mu mj b">if</code>或<code class="fe ms mt mu mj b">switch</code>语句。</p><p id="a335" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ec5c" class="mn lc iq mj b gy mo mp l mq mr">const table = {<br/>  0: 'Sunday',<br/>  1: 'Monday',<br/>  2: 'Tuesday',<br/>  3: 'Wednesday',<br/>  4: 'Thursday',<br/>  5: 'Friday',<br/>  6: 'Saturday',<br/>}</span></pre><p id="7f24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c1a3" class="mn lc iq mj b gy mo mp l mq mr">const dayOfWeek = (day) =&gt; {<br/>  if (day === 0) {<br/>    return 'Sunday'<br/>  } else if (day === 1) {<br/>    return 'Monday'<br/>  }<br/>  //...<br/>}</span></pre><h1 id="0844" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不切换</h1><p id="370f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们只是在循环的每次迭代中运行相同的<code class="fe ms mt mu mj b">if</code>或<code class="fe ms mt mu mj b">else</code>，那么我们不应该将<code class="fe ms mt mu mj b">if</code>和<code class="fe ms mt mu mj b">else</code>块放入循环中。</p><p id="0271" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e76c" class="mn lc iq mj b gy mo mp l mq mr">for (i = 0; i &lt; count; i++) {<br/>  if (type === SUM) {<br/>    //...<br/>  } else {<br/>    //...<br/>  }<br/>}</span></pre><p id="8415" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且每次迭代的<code class="fe ms mt mu mj b">type</code>等于<code class="fe ms mt mu mj b">SUM</code>或者相反，那么我们应该将<code class="fe ms mt mu mj b">if</code>和<code class="fe ms mt mu mj b">else</code>移动到循环体之外，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e655" class="mn lc iq mj b gy mo mp l mq mr">if (type == SUM) {<br/>  for (i = 0; i &lt; count; i++) {<br/>    //...<br/>  }<br/>} else {<br/>  for (i = 0; i &lt; count; i++) {<br/>    //...<br/>  }<br/>}</span></pre><p id="0599" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在每个循环中没有布尔检查，使代码运行得更快。</p><h1 id="a257" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">干扰</h1><p id="7bfc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">干扰是将两个运行在相同元件上的环路组合在一起。</p><p id="9640" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于它们对相同的元素起作用，我们可以很容易地将它们结合起来。</p><p id="0a7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9920" class="mn lc iq mj b gy mo mp l mq mr">for (let i = 0; i &lt; employees.length; i++) {<br/>  employeeName[i] = "";<br/>}</span><span id="5179" class="mn lc iq mj b gy mv mp l mq mr">for (let i = 0; i &lt; employees.length; i++) {<br/>  employeesalary[i] = 0;<br/>}</span></pre><p id="e6ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以将它们合并为一个，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b7fa" class="mn lc iq mj b gy mo mp l mq mr">for (let i = 0; i &lt; employees.length; i++) {<br/>  employeeName[i] = "";<br/>  employeesalary[i] = 0;<br/>}</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4845b23ebc72304e0156333d1c8d4fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kW7dpXjc3kKYpdHo"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tadoerfler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tim Doerfler</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f10d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">铺开</h1><p id="ebe3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">展开是将循环的情况分离到它们自己的代码中。</p><p id="84f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="040f" class="mn lc iq mj b gy mo mp l mq mr">let i = 0;<br/>while (i &lt; count - 1) {<br/>  foo[i] = i;<br/>  foo[i + 1] = i + 1;<br/>  i += 2;<br/>}<br/>if (i === count - 1) {<br/>  foo[count - 1] = count - 1;<br/>}</span></pre><p id="e3bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有一个<code class="fe ms mt mu mj b">while</code>循环，一直运行到<code class="fe ms mt mu mj b">i</code>变为<code class="fe ms mt mu mj b">count - 1</code>。</p><p id="099a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在它下面，我们有一个<code class="fe ms mt mu mj b">if</code>语句，它只在<code class="fe ms mt mu mj b">i</code>为<code class="fe ms mt mu mj b">count — 1</code>时运行，这可能并不总是这样，因为<code class="fe ms mt mu mj b">i</code>增加了2。</p><p id="966f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">减少迭代次数使我们的代码更快。</p><h1 id="5b65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最小化循环内部的工作</h1><p id="b4de" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果循环体中的代码更少，那么它的执行速度会更快。</p><p id="3a8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们应该尽量简化我们的循环，使它们执行得更快。更简单的循环也更容易阅读。</p><h1 id="73fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a145" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该致力于简化我们的循环，使它们运行得更快。</p><p id="d51b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有不总是在循环中运行的情况，那么它应该被分离出循环。</p><p id="a8d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还应该利用短路求值来减少必须检查条件语句的情况。</p><h2 id="40dd" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">简明英语笔记</strong></h2><p id="b730" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们推出了一个YouTube频道吗？我们制作的每个视频都旨在教给你一些新的东西。点击此处 查看我们，并确保订阅该频道😎</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to secure your JWT and your REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何保护您的JWT和REST API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-secure-your-jwt-json-web-token-and-your-rest-api-53d9bb4f9833?source=collection_archive---------10-----------------------#2020-04-17">https://javascript.plainenglish.io/how-to-secure-your-jwt-json-web-token-and-your-rest-api-53d9bb4f9833?source=collection_archive---------10-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="80a1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我如何以最安全的方式在cookie中实现JWT</h2></div><blockquote class="kf kg kh"><p id="65a9" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我读过一些关于如何保护你的JWT的文章。大多数人的共识是将JWT存储在cookie中，而存储JWT的一些根是本地存储。我会根据自己的想法，尝试以最安全的方式在cookie中实现JWT，但也可以随意指出潜在的错误。</p></blockquote><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/f36712bb5ea1da7107d47c656aaba7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJRH4Dgd2ytLOisrycZnAw.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Photo by <a class="ae lv" href="https://www.pexels.com/@designecologist?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Designecologist</a> from <a class="ae lv" href="https://www.pexels.com/photo/silver-imac-displaying-collage-photos-1779487/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="9907" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">我不会告诉你如何从头开始制作一个应用程序或类似的东西，但如果你想要完整的东西，只需评论，我会在GitHub上创建一个功能齐全的应用程序，但现在让我们开始吧。</p><p id="02a1" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">我们的应用程序将是一个简单的程序，用户可以登录，因为我使用的是NoSql数据库，我将使用数据库中自动创建的<strong class="kl ir"> _id </strong>为用户创建<strong class="kl ir"> JWT </strong>。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="a649" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">现在我们获取_id并创建一个JWT，然后通过cookie发送它。cookie选项包括</p><blockquote class="kf kg kh"><p id="c4b3" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><strong class="kl ir"> httpOnly —在生成cookie时使用httpOnly标志有助于降低客户端脚本访问受保护cookie的风险。<br/>过期—设置cookie的过期时间。<br/>已签名——它有一个签名，因此它可以检测客户端是否修改了cookie。</strong></p></blockquote><p id="333c" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">将JWT存储在cookie中可以降低XSS攻击的风险，而使用httpOnly选项，CSRF的风险也可以降到最低。下一部分，是我们如何检索cookie。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="3544" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">我们只需解析签名的cookie并调用JWT上的verify方法来验证我们的cookie或JWT是否被任何终端用户修改过。</p><p id="c440" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">现在，如果您使用React作为前端框架并使用axios发送请求，请使用axios的<strong class="kl ir">和Credentials </strong>属性来发送cookies。</p><p id="25a6" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lw kt ku kv lx kx ky kz ly lb lc ld le ij bi translated">在我看来，这是保护你的JWT和其他API的最好方法之一，但不是唯一的方法。请随意留下评论。</p></div></div>    
</body>
</html>
<html>
<head>
<title>If It Isn’t Already, Your Startup’s React Project Should Be Written in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如果还没有，你的初创公司的React项目应该用TypeScript编写</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/if-it-isnt-already-your-startup-s-react-project-should-be-written-in-typescript-7762816b1e21?source=collection_archive---------5-----------------------#2020-11-25">https://javascript.plainenglish.io/if-it-isnt-already-your-startup-s-react-project-should-be-written-in-typescript-7762816b1e21?source=collection_archive---------5-----------------------#2020-11-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/34fa60da4feef7ac262debd053475cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nqghga5oLWWMZXkl"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Types could save your startup. Photo by <a class="ae jz" href="https://unsplash.com/@deonblack?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Deon Black</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="626c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我曾经反对打字稿的想法。对我来说，把静态类型添加到一个本来就没有静态类型的语言中似乎没有意义。我的职业生涯开始时是一名C++图形工程师，后来成为一名前端设计师和开发人员。所以静态类型不是我不熟悉的东西。</p><p id="e412" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转到JavaScript让我看到了表达各种形式的数据操作是多么的快速和容易，尤其是使用较新版本的JavaScript (ES6及更高版本),而且看起来工作正常，富应用程序可以以闪电般的速度构建。我感觉像是卸下了一个重担，处于一个没有静态类型的世界，并开始觉得静态类型对我和创业世界中的任何人来说都将成为过去。</p><p id="0a54" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，当工具在社区之间被分割时，有人问<a class="ae jz" href="https://github.com/microsoft/TypeScript/issues/8893" rel="noopener ugc nofollow" target="_blank">为什么他们不能只为web编写C#而不是</a>，并且对大多数现代框架的支持非常有限。</p><p id="5d16" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个羽翼未丰的初创公司在考虑任何类型的技术堆栈变化时，必须回答的最大问题之一是:这需要多长时间？您希望快速、轻松地发布变更，并且您肯定不希望一个整体性的端口在您的发布管道中产生大气泡。此外，您需要考虑这种变化对您的DX(开发人员体验)的影响，以及您完成工作的速度。我们都知道，随着代码库的成熟和膨胀，开发速度不可避免地会减慢。因此，您希望避免引入一些会极大地膨胀您的代码库、增加您的测试负担(我们将在后面详细讨论)并使您的开发团队在工作方面的生活质量更差的东西。</p><p id="1666" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，让我们来谈谈如何为您的React项目迁移到TypeScript来很好地避免这些缺陷，并且可以增加很多价值。</p><h1 id="9239" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">您可以增量移植现有代码</h1><p id="3d1c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">TypeScript是JavaScript的超集，这意味着原则上任何有效的JavaScript都是有效的TypeScript。这意味着从JS迁移到TS在技术上就像配置改变一样简单。实际上，要真正享受ts的好处，您需要做的不止这些。这里的要点是，你可以很容易地创建一个移植策略，让你带着<strong class="kc io">零开发泡沫</strong>进行移植。它看起来有点像这样:</p><ol class=""><li id="4325" class="mb mc in kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">任何新代码都应该用TypeScript编写。</li><li id="adcb" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">如果对一个JS文件进行了更改，在您经过时将其移植到TypeScript。</li></ol><p id="2450" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我从未真正意识到的是，TypeScript并不完全是静态类型，它使用了一个<em class="mp">渐进类型</em>系统——也就是说编译器带有一个非常强大的类型推理系统，这通常意味着你可以根据自己的喜好使用<strong class="kc io">或多或少的类型</strong>。在很大程度上，推理引擎足够强大，可以在很多情况下做出正确的调用，因此您不需要对大量代码进行注释，同时仍然可以获得您想要的类型安全。这意味着将JS移植到TS实际上是微不足道的；至少，在编译器无法推断类型的地方需要添加类型注释，这通常意味着注释几个函数签名，仅此而已。</p><p id="d5f4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">开发人员可以很容易地在TypeScript中编写新代码，因为这导致零移植成本(显然)，并且由于类型推断的强大功能，移植现有代码通常非常简单。</p><p id="4c89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我已经将许多React代码库(无论大小)移植到TypeScript上，并且我已经能够每次都增量地这样做<strong class="kc io">，</strong>立即享受它的好处，而没有任何种类的管道泡沫。</p><p id="3cec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">人们经常听到的一件事是任何静态类型系统都可能引入的“增加的样板文件”。</p><p id="4cf2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">考虑下面的例子，JS中的React组件，遵循“最佳实践”:</p><figure class="mq mr ms mt gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="410b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在在TypeScript中:</p><figure class="mq mr ms mt gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="2fd6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">实际上，我们的TS示例实际上更短。</p><p id="55cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一般来说，使用React的TS不会比使用普通的JS产生更多的样板文件(有时甚至更少)。</p><h1 id="4ac4" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">你仍然可以快速移动</h1><p id="de0a" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">如前所述，作为一家年轻的初创公司，你希望尽可能快地前进。您希望延迟代码膨胀，并保持快速的开发速度和紧凑的发布周期。您希望能够轻松地对优先级的变化做出反应，一个很好的方法是一个简单、优雅的代码库，只需要很少的努力就可以做出简单的改变(信不信由你，许多大型代码库并不是这样的，看似无意义的改变永远都要花费<em class="mp">。).随着代码膨胀，测试数量增加，不可避免地会出现开发速度变慢的情况。因此，尽可能推迟经济放缓是非常可取的。我们可以做到这一点的方法之一是编写更少的测试。</em></p><p id="7034" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我继续之前，我想说的是:<strong class="kc io">好的测试是没有替代品的。如果一个软件产品没有好的测试，你很难对它完全有信心。每个版本都应该简单，你应该相信它是“有效的”。事实是，在现实中，许多被编写的测试<strong class="kc io">并不是好的测试</strong>。在产品代码库中可以找到大量的单元测试:</strong></p><p id="b27e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">a)测试实现细节，这样无论何时你改变<em class="mp">任何东西</em>它们都会被破坏</p><p id="a754" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">b)只是美化了的类型检查器，为他们测试的代码验证输入和输出的类型。</p><p id="efa5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于前者，没有简单的补救方法。如果你已经陷入这种境地，你就必须通过重写这些测试来摆脱困境。对于后者，TypeScript可以非常容易地取代这些测试。您可以丢弃一大堆多余的代码，而不会牺牲您对下一个版本的信心。以这种方式进行类型检查就像是在每次保存时运行<strong class="kc io">的一套小测试，就像你写代码一样。虽然这不能替代行为测试，以及集成和端到端测试等更高层次的方法，但事实上已经从您的代码库中删除了一整类错误。不正确的专有名称、大小写错误等。所有人都消失了，因为他们永远不会被允许进入你的生产部门。再加上静态类型经常带来的额外的“隐式文档”,你就可以对发布新代码更有信心了。</strong></p><p id="cae7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想快速移动，有一个小的测试负担是必不可少的。如果你想确定你发布的是什么，高质量的代码是必不可少的。您必须自己找到平衡点，但是TypeScript可能是找到一个很好的折中方法。</p><h1 id="4100" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">工具现在一样好(如果不是更好的话)</h1><p id="a220" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">作为一名开发人员，如果有合适的工具，做任何事情都是轻而易举的。幸运的是，TypeScript是一个很好的工具的例子！</p><h2 id="2eeb" class="mw kz in bd la mx my dn le mz na dp li kl nb nc lm kp nd ne lq kt nf ng lu nh bi translated">工具故障</h2><p id="25c3" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">以前是为了在现有的React项目中采用TypeScript，设置起来并不容易，不得不放弃使用一些工具。例如，在过去，您不能将ESLint用于TypeScript代码库。以TS为目标的棉绒，TSLint，是你唯一的选择。虽然TSLint仍然是一个伟大的项目，但它远没有ESLint的成熟、强大和生态系统。所以你必须立即妥协工具来获得类型。对我来说，这从来都不是一个公平的交易，也是反对移民的一个重要理由。现在，这不是问题，因为Babel(一种广泛使用的JS transpiler)支持TypeScript，这意味着您可以轻松地使用ESLint这样的工具来开发TypeScript项目。工具方面不再妥协。</p><h2 id="ba8a" class="mw kz in bd la mx my dn le mz na dp li kl nb nc lm kp nd ne lq kt nf ng lu nh bi translated">图书馆有丰富的支持</h2><p id="39bb" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">大多数(如果不是全部)大型JS库都支持TypeScript。它们中的许多是使用TypeScript本身编写的，或者社区已经深入研究了该模块并为其编写了类型声明，这意味着您可以将您的TypeScript代码库插入其中，并获得对其他人的代码以及您自己的代码的类型支持。这使得以这种方式滥用库变得更加困难，并且避免了因为拼写错误而花费大量时间去绞尽脑汁。</p><h2 id="c985" class="mw kz in bd la mx my dn le mz na dp li kl nb nc lm kp nd ne lq kt nf ng lu nh bi translated">编辑器支持</h2><p id="21cd" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">最重要的工具之一是他们使用的编辑器。如果你的编辑器可以自动完成许多简单的任务，告诉你什么时候你做错了，并帮助你提出有意义的建议，那么许多辅助性的任务就会加速到光速，并减少错误。大多数编程都是这些辅助性的任务，所以加快它们的速度对业务有切实的影响，因为你可以更快地完成好的工作，而不会降低质量。Visual Studio代码是一个非常受欢迎的文本编辑器，因为它包括对TypeScript的现成支持，以及使它变得更好的强大插件。如果没有这些工具，我知道我过去从来没有遇到过很多紧迫的截止日期。</p><p id="cbac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">TS强大的生态系统、工具和编辑器支持使它成为最令人愉快的语言之一，我对我所生产的东西的信心水平与同等的JS相去甚远。</p><h1 id="26ce" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">包扎</h1><p id="ae89" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在这篇文章中，我希望向您展示在您的初创公司的技术堆栈中使用TypeScript所带来的难以置信的增值，以及只需很少(如果有的话)的警告就能获得收益是多么容易！</p><p id="545e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢阅读！</p><p id="87c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">💙</p></div></div>    
</body>
</html>
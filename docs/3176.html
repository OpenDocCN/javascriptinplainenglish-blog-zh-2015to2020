<html>
<head>
<title>Build a shopping cart in Node.js and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Node.js中构建购物车并做出反应</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-shopping-cart-in-nodejs-and-react-c7b488d46e79?source=collection_archive---------0-----------------------#2020-09-07">https://javascript.plainenglish.io/build-a-shopping-cart-in-nodejs-and-react-c7b488d46e79?source=collection_archive---------0-----------------------#2020-09-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d67a39f5e43eb8b9a6c8f2f125e851e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*PasyGTR0iN7GwKbb-i9QXw.jpeg"/></div></div></figure><p id="b9bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将使用React为我们的应用程序构建购物车前端。这将是一个简单的反应电子商务教程。</p><p id="07fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以查看我们已经发布的Node.js 中内置的<a class="ae kt" href="https://www.wrappixel.com/building-a-shopping-cart-in-nodejs/" rel="noopener ugc nofollow" target="_blank">后端部分。</a></p><p id="937c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">尽我们所能，这将是充分理解主要功能的最低限度。</p><p id="8ddf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要使用create-react-app设置React应用程序。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="4a7a" class="ld le in kz b gy lf lg l lh li">npx create-react-app shopping-cart<br/>cd shopping-cart<br/>code .<br/>npm start</span></pre></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="18fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您以前没有安装react CLI，您可能需要先在本地计算机上安装它。</p><p id="03f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lq lr ls kz b">code .</code>命令在visual studio代码中打开项目。</p><p id="0cc8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在可以丢弃App.js中不需要的东西，也可以去掉文件(App.css和index.css)。</p><h1 id="f4a5" class="lt le in bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">到主要工作</h1><p id="d449" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">首先，我们创建一个组件文件夹；这包含了我们可重用的组件，例如Navbar。</p><p id="42af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将继续为应用程序设置用户界面。你可以从<a class="ae kt" href="https://www.wrappixel.com/templates/wrapkit/" rel="noopener ugc nofollow" target="_blank"> WrapPixel的UI套件</a>中获得我们所有的UI组件。</p><p id="7d54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">WrapPixel是一个在线模板商店，在那里你可以获得很棒的<a class="ae kt" href="https://www.wrappixel.com/templates/category/react-templates/" rel="noopener ugc nofollow" target="_blank">免费react仪表盘</a>和<a class="ae kt" href="https://www.wrappixel.com/templates/category/reactstrap-templates/" rel="noopener ugc nofollow" target="_blank"> react引导模板</a>。</p><p id="9ba2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将把引导CDN添加到公共目录中的根<code class="fe lq lr ls kz b">index.html</code>文件中。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ab15" class="ld le in kz b gy lf lg l lh li">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="utf-8" /&gt;<br/>  &lt;link rel="icon" href="%PUBLIC_URL%/favicon.ico" /&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>  &lt;meta name="theme-color" content="#000000" /&gt;<br/>  &lt;meta name="description" content="Web site created using create-react-app" /&gt;<br/>  &lt;link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" /&gt;<br/>  &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"<br/>    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"&gt;<br/>  &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;<br/>  &lt;title&gt;Shopping cart&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;<br/>  &lt;div id="root"&gt;&lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="fea2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们将一个<code class="fe lq lr ls kz b">Navbar.js</code>文件添加到组件文件夹中。这是我们处理路由的地方。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="0b05" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import {<br/>  Link<br/>} from "react-router-dom"<br/>export const Navbar = () =&gt; {<br/>  return ( &lt;<br/>    nav className = "navbar navbar-expand-lg navbar-light bg-info" &gt;<br/>    &lt;<br/>    div className = "container" &gt;<br/>    &lt;<br/>    Link to = "/"<br/>    className = "navbar-brand" &gt; Vue Cart &lt; /Link&gt;<br/>    &lt;<br/>    div className = "collapse navbar-collapse justify-content-end"<br/>    id = "navbarNav" &gt;<br/>    &lt;<br/>    ul className = "navbar-nav" &gt;<br/>    &lt;<br/>    li className = "nav-item active" &gt;<br/>    &lt;<br/>    Link to = "/"<br/>    className = "nav-link" &gt; Home &lt; /Link&gt; &lt; /<br/>    li &gt; &lt;<br/>    li className = "nav-item" &gt;<br/>    &lt;<br/>    Link to = "/cart"<br/>    className = "nav-link" &gt; Cart &lt; /Link&gt; &lt; /<br/>    li &gt; &lt;<br/>    /ul&gt; &lt; /<br/>    div &gt; &lt; /div&gt; &lt; /<br/>    nav &gt;<br/>  )<br/>}</span></pre><p id="a02f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请记住，我们使用<code class="fe lq lr ls kz b">react-router-dom</code>来路由页面，所以我们需要在我们的开关下面添加导航条，如下所示' App.js '</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="cf8b" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import { Switch } from "react-router-dom"<br/>import { Navbar } from "./components/Navbar"</span><span id="fde0" class="ld le in kz b gy mv lg l lh li">import "./App.css"<br/>function App() {<br/>  return (<br/>    &lt;div className='App'&gt;<br/>      &lt;Navbar /&gt;<br/>      &lt;Switch&gt;<br/>        // Our pages will go here<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="adb2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">其次，我们创建一个页面文件夹。该文件夹包含我们的页面(产品和购物车页面)，我们所有的服务和视图都将呈现在页面中以进行路由。</p><p id="e395" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们创建一个简单的<strong class="jx io">产品</strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="f464" class="ld le in kz b gy lf lg l lh li">import React, { useState, useEffect } from "react";<br/>import { Link } from "react-router-dom";<br/>export const Products = () =&gt; {<br/>  const [products, setProducts] = useState([]);<br/>  const [hasError, setError] = useState(false);<br/>  async function fetchData() {<br/>    const res = await fetch("http://localhost:4000/product");<br/>    res<br/>      .json()<br/>      .then((res) =&gt; {<br/>        console.log(res.data);<br/>        setProducts(res.data);<br/>      })<br/>      .catch((error) =&gt; {<br/>        setError(error);<br/>      });<br/>  }<br/>  async function addToCart(id, quantity) {<br/>    try {<br/>      const response = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: quantity,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      let data = await response.json();<br/>      alert("Item Added To Cart");<br/>      console.log(data);<br/>    } catch (err) {<br/>      alert("Something Went Wrong");<br/>      console.log(err);<br/>    }<br/>  }<br/>  useEffect(() =&gt; {<br/>    fetchData();<br/>  }, []);<br/>  console.log(products);<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="banner-innerpage"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row justify-content-center"&gt;<br/>              &lt;div className="col-md-6 align-self-center text-center"&gt;<br/>                &lt;h1 className="title"&gt;Shop listing&lt;/h1&gt;<br/>                &lt;h6 className="subtitle op-8"&gt;<br/>                  We are small team of creative people working together<br/>                &lt;/h6&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="spacer"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row mt-5"&gt;<br/>              &lt;div className="col-lg-9"&gt;<br/>                &lt;div className="row shop-listing"&gt;<br/>                  {products.map((product, i) =&gt; (<br/>                    &lt;div className="col-lg-4"&gt;<br/>                      &lt;div className="card shop-hover border-0"&gt;<br/>                        &lt;img<br/>                          src={"http://localhost:4000/" + product.image}<br/>                          alt="wrapkit"<br/>                          className="img-fluid"<br/>                        /&gt;<br/>                        &lt;div className="card-img-overlay align-items-center"&gt;<br/>                          &lt;button<br/>                            onClick={(e) =&gt; addToCart(product._id, 1)}<br/>                            className="btn btn-md btn-info"<br/>                          &gt;<br/>                            Add to cart<br/>                          &lt;/button&gt;<br/>                        &lt;/div&gt;<br/>                      &lt;/div&gt;<br/>                      &lt;div className="card border-0"&gt;<br/>                        &lt;h6&gt;<br/>                          &lt;a href="#" className="link"&gt;<br/>                            {product.name}{" "}<br/>                          &lt;/a&gt;<br/>                        &lt;/h6&gt;<br/>                        &lt;h6 className="subtitle"&gt;by Wisdom&lt;/h6&gt;<br/>                        &lt;h5 className="font-medium m-b-30"&gt;<br/>                          $195 /{" "}<br/>                          &lt;del className="text-muted line-through"&gt;$225&lt;/del&gt;<br/>                        &lt;/h5&gt;<br/>                      &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                  ))}<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="fd8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意到<code class="fe lq lr ls kz b">fetchData</code>功能了吗？我们向后端发出一个http请求，列出所有产品并存储在变量products中(记住，我们使用的是React钩子)。</p><p id="3e12" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们现在把它作为一个数组，所以我们通过它循环显示，如第64行所示。</p><p id="0744" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还需要将商品添加到购物车中，这将是一个异步方法，向后端发出请求，并向其传递参数。这也是一个非常重要的特性。</p><p id="c49d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lq lr ls kz b">addToCart</code>在第18行定义:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="da37" class="ld le in kz b gy lf lg l lh li">async function addToCart(id, quantity) {<br/>    try {<br/>      const response = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: quantity,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      })<br/>      let data = await response.json()<br/>      console.log(data)<br/>    } catch (err) {<br/>      console.log(err)<br/>    }<br/>  }</span></pre><p id="4ead" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">之后，我们向按钮添加事件监听器来调用<code class="fe lq lr ls kz b">addToCart</code>按钮</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="d3db" class="ld le in kz b gy lf lg l lh li">&lt;button<br/>                            onClick={(e) =&gt; addToCart(product._id, 1)}<br/>                            className="btn btn-md btn-info"<br/>                          &gt;<br/>                            Add to cart<br/>                          &lt;/button&gt;</span></pre><p id="e7ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们传递产品的<code class="fe lq lr ls kz b">id</code>和一个默认数量1。</p><p id="d434" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后再一次添加到我们的<code class="fe lq lr ls kz b">App.js</code>，作为页面。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="4deb" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import { Switch, Route } from "react-router-dom"<br/>import { Products } from "./pages/product"</span><span id="416c" class="ld le in kz b gy mv lg l lh li">import { Navbar } from "./components/Navbar"</span><span id="b7d0" class="ld le in kz b gy mv lg l lh li">import "./App.css"<br/>function App() {<br/>  return (<br/>    &lt;div className='App'&gt;<br/>      &lt;Navbar /&gt;<br/>      &lt;Switch&gt;<br/>        &lt;Route exact path='/' component={Products} /&gt;<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/ba71a0c342c43469d7eaedbd19dcb97e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cw4X88sySGHGLUde.png"/></div></div></figure><p id="051f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们转到购物车页面，添加我们的简单UI。</p><p id="d155" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们添加一个方法，从后端获取购物车商品列表。注意下面的fetchCart方法。随心所欲。</p><p id="8efd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你不熟悉react钩子，你可以去查一下，或者更好地使用基于组件的钩子。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="3768" class="ld le in kz b gy lf lg l lh li">import React, { useState, useEffect } from "react";<br/>import { Link } from "react-router-dom";<br/>import "./cart.css";<br/>export const Cart = (props) =&gt; {<br/>  const [carts, setCarts] = useState([]);<br/>  const [payload, setPayloader] = useState({});<br/>  const [hasError, setError] = useState(false);<br/>  async function fetchCart() {<br/>    const res = await fetch("http://localhost:4000/cart");<br/>    res<br/>      .json()<br/>      .then((res) =&gt; {<br/>        console.log(res.data.items);<br/>        setCarts(res.data.items);<br/>        setPayloader(res.data);<br/>      })<br/>      .catch((error) =&gt; {<br/>        setError(error);<br/>      });<br/>  }<br/>  async function increaseQty(id) {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: 1,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      console.log(res);<br/>      fetchCart();<br/>      alert("Item Increamented");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }<br/>  async function emptyCart() {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart/empty-cart", {<br/>        method: "DELETE",<br/>      });<br/>      await res.json();<br/>      fetchCart();<br/>      props.history.push("/");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }<br/>  useEffect(() =&gt; {<br/>    fetchCart();<br/>  }, []);<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="banner-innerpage"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row justify-content-center"&gt;<br/>              &lt;div className="col-md-6 align-self-center text-center"&gt;<br/>                &lt;h1 className="title"&gt;Cart Listing&lt;/h1&gt;<br/>                &lt;h6 className="subtitle op-8"&gt;<br/>                  We are small team of creative people working together<br/>                &lt;/h6&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="spacer"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row mt-5"&gt;<br/>              &lt;div className="col-lg-9"&gt;<br/>                &lt;div className="row shop-listing"&gt;<br/>                  &lt;table className="table shop-table"&gt;<br/>                    &lt;tr&gt;<br/>                      &lt;th className="b-0"&gt;Name&lt;/th&gt;<br/>                      &lt;th className="b-0"&gt;Price&lt;/th&gt;<br/>                      &lt;th className="b-0"&gt;Quantity&lt;/th&gt;<br/>                      &lt;th className="b-0 text-right"&gt;Total Price&lt;/th&gt;<br/>                    &lt;/tr&gt;<br/>                    {carts.map((item, i) =&gt; (<br/>                      &lt;tr&gt;<br/>                        &lt;td&gt;{item.productId.name}&lt;/td&gt;<br/>                        &lt;td&gt;{item.productId.price}&lt;/td&gt;<br/>                        &lt;td&gt;<br/>                          &lt;button<br/>                            onClick={(e) =&gt; increaseQty(item.productId._id)}<br/>                            className="btn btn-primary btn-sm"<br/>                          &gt;<br/>                            +<br/>                          &lt;/button&gt;<br/>                          {item.quantity}<br/>                          &lt;button className="btn btn-primary btn-sm"&gt;-&lt;/button&gt;<br/>                        &lt;/td&gt;<br/>                        &lt;td className="text-right"&gt;<br/>                          &lt;h5 className="font-medium m-b-30"&gt;{item.total}&lt;/h5&gt;<br/>                        &lt;/td&gt;<br/>                      &lt;/tr&gt;<br/>                    ))}<br/>                    &lt;tr&gt;<br/>                      &lt;td colspan="3" align="right"&gt;<br/>                        Subtotal :{payload.subTotal}<br/>                      &lt;/td&gt;<br/>                      &lt;td colspan="4" align="right"&gt;<br/>                        &lt;button<br/>                          className="btn btn-danger"<br/>                          onClick={(e) =&gt; emptyCart()}<br/>                        &gt;<br/>                          Empty cart<br/>                        &lt;/button&gt;<br/>                      &lt;/td&gt;<br/>                    &lt;/tr&gt;<br/>                  &lt;/table&gt;<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="2634" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们可以遍历数组(cart)并修改。</p><p id="b75d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意<code class="fe lq lr ls kz b">increamentQty(id)</code>方法，它将产品id作为参数，然后将数量设置为1作为默认值，因为我们将数量更新1。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="dc8e" class="ld le in kz b gy lf lg l lh li">async function increaseQty(id) {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: 1,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      console.log(res);<br/>      fetchCart();<br/>      alert("Item increamented");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }</span></pre><p id="30ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">之后，我们向按钮添加了click事件来触发该方法:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ca2e" class="ld le in kz b gy lf lg l lh li">&lt;button<br/>                            onClick={(e) =&gt; increaseQty(item.productId._id)}<br/>                            className="btn btn-primary btn-sm"<br/>                          &gt;<br/>                            +<br/>                          &lt;/button&gt;</span></pre><p id="efeb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击按钮将增加物品的数量。</p><p id="2376" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们定义一个<code class="fe lq lr ls kz b">emptyCart</code>方法来删除当前购物车中的所有商品。见下文；</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="38ed" class="ld le in kz b gy lf lg l lh li">async function emptyCart() {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart/empty-cart", {<br/>        method: "DELETE",<br/>      });<br/>      await res.json();<br/>      fetchCart();<br/>      props.history.push("/");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }</span></pre><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/a346e06ff5f80fa17a601a8761772b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2Pwp0eFIs1TnsKrS.png"/></div></div></figure><h1 id="865e" class="lt le in bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">锻炼</h1><ul class=""><li id="3dc2" class="mx my in jx b jy mq kc mr kg mz kk na ko nb ks nc nd ne nf bi translated">实现减量功能</li><li id="c092" class="mx my in jx b jy ng kc nh kg ni kk nj ko nk ks nc nd ne nf bi translated">实施从购物车中移除产品</li></ul><p id="f753" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">实现之后，将您的工作推送到git，并在评论部分添加链接。让我们找点乐子😁</p></div></div>    
</body>
</html>
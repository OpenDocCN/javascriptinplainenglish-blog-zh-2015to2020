<html>
<head>
<title>Build a shopping cart in Node.js and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Node.jsä¸­æ„å»ºè´­ç‰©è½¦å¹¶åšå‡ºååº”</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/build-a-shopping-cart-in-nodejs-and-react-c7b488d46e79?source=collection_archive---------0-----------------------#2020-09-07">https://javascript.plainenglish.io/build-a-shopping-cart-in-nodejs-and-react-c7b488d46e79?source=collection_archive---------0-----------------------#2020-09-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d67a39f5e43eb8b9a6c8f2f125e851e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*PasyGTR0iN7GwKbb-i9QXw.jpeg"/></div></div></figure><p id="b9bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Reactä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ„å»ºè´­ç‰©è½¦å‰ç«¯ã€‚è¿™å°†æ˜¯ä¸€ä¸ªç®€å•çš„ååº”ç”µå­å•†åŠ¡æ•™ç¨‹ã€‚</p><p id="07fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å·²ç»å‘å¸ƒçš„Node.js ä¸­å†…ç½®çš„<a class="ae kt" href="https://www.wrappixel.com/building-a-shopping-cart-in-nodejs/" rel="noopener ugc nofollow" target="_blank">åç«¯éƒ¨åˆ†ã€‚</a></p><p id="937c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°½æˆ‘ä»¬æ‰€èƒ½ï¼Œè¿™å°†æ˜¯å……åˆ†ç†è§£ä¸»è¦åŠŸèƒ½çš„æœ€ä½é™åº¦ã€‚</p><p id="8ddf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨create-react-appè®¾ç½®Reactåº”ç”¨ç¨‹åºã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="4a7a" class="ld le in kz b gy lf lg l lh li">npx create-react-app shopping-cart<br/>cd shopping-cart<br/>code .<br/>npm start</span></pre></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="18fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæ‚¨ä»¥å‰æ²¡æœ‰å®‰è£…react CLIï¼Œæ‚¨å¯èƒ½éœ€è¦å…ˆåœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®‰è£…å®ƒã€‚</p><p id="03f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lq lr ls kz b">code .</code>å‘½ä»¤åœ¨visual studioä»£ç ä¸­æ‰“å¼€é¡¹ç›®ã€‚</p><p id="0cc8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¸¢å¼ƒApp.jsä¸­ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥å»æ‰æ–‡ä»¶(App.csså’Œindex.css)ã€‚</p><h1 id="f4a5" class="lt le in bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">åˆ°ä¸»è¦å·¥ä½œ</h1><p id="d449" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„ä»¶æ–‡ä»¶å¤¹ï¼›è¿™åŒ…å«äº†æˆ‘ä»¬å¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¾‹å¦‚Navbarã€‚</p><p id="42af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å°†ç»§ç»­ä¸ºåº”ç”¨ç¨‹åºè®¾ç½®ç”¨æˆ·ç•Œé¢ã€‚ä½ å¯ä»¥ä»<a class="ae kt" href="https://www.wrappixel.com/templates/wrapkit/" rel="noopener ugc nofollow" target="_blank"> WrapPixelçš„UIå¥—ä»¶</a>ä¸­è·å¾—æˆ‘ä»¬æ‰€æœ‰çš„UIç»„ä»¶ã€‚</p><p id="7d54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">WrapPixelæ˜¯ä¸€ä¸ªåœ¨çº¿æ¨¡æ¿å•†åº—ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥è·å¾—å¾ˆæ£’çš„<a class="ae kt" href="https://www.wrappixel.com/templates/category/react-templates/" rel="noopener ugc nofollow" target="_blank">å…è´¹reactä»ªè¡¨ç›˜</a>å’Œ<a class="ae kt" href="https://www.wrappixel.com/templates/category/reactstrap-templates/" rel="noopener ugc nofollow" target="_blank"> reactå¼•å¯¼æ¨¡æ¿</a>ã€‚</p><p id="9ba2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å°†æŠŠå¼•å¯¼CDNæ·»åŠ åˆ°å…¬å…±ç›®å½•ä¸­çš„æ ¹<code class="fe lq lr ls kz b">index.html</code>æ–‡ä»¶ä¸­ã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ab15" class="ld le in kz b gy lf lg l lh li">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="utf-8" /&gt;<br/>  &lt;link rel="icon" href="%PUBLIC_URL%/favicon.ico" /&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>  &lt;meta name="theme-color" content="#000000" /&gt;<br/>  &lt;meta name="description" content="Web site created using create-react-app" /&gt;<br/>  &lt;link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" /&gt;<br/>  &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"<br/>    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"&gt;<br/>  &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json" /&gt;<br/>  &lt;title&gt;Shopping cart&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;<br/>  &lt;div id="root"&gt;&lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="fea2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åæˆ‘ä»¬å°†ä¸€ä¸ª<code class="fe lq lr ls kz b">Navbar.js</code>æ–‡ä»¶æ·»åŠ åˆ°ç»„ä»¶æ–‡ä»¶å¤¹ä¸­ã€‚è¿™æ˜¯æˆ‘ä»¬å¤„ç†è·¯ç”±çš„åœ°æ–¹ã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="0b05" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import {<br/>  Link<br/>} from "react-router-dom"<br/>export const Navbar = () =&gt; {<br/>  return ( &lt;<br/>    nav className = "navbar navbar-expand-lg navbar-light bg-info" &gt;<br/>    &lt;<br/>    div className = "container" &gt;<br/>    &lt;<br/>    Link to = "/"<br/>    className = "navbar-brand" &gt; Vue Cart &lt; /Link&gt;<br/>    &lt;<br/>    div className = "collapse navbar-collapse justify-content-end"<br/>    id = "navbarNav" &gt;<br/>    &lt;<br/>    ul className = "navbar-nav" &gt;<br/>    &lt;<br/>    li className = "nav-item active" &gt;<br/>    &lt;<br/>    Link to = "/"<br/>    className = "nav-link" &gt; Home &lt; /Link&gt; &lt; /<br/>    li &gt; &lt;<br/>    li className = "nav-item" &gt;<br/>    &lt;<br/>    Link to = "/cart"<br/>    className = "nav-link" &gt; Cart &lt; /Link&gt; &lt; /<br/>    li &gt; &lt;<br/>    /ul&gt; &lt; /<br/>    div &gt; &lt; /div&gt; &lt; /<br/>    nav &gt;<br/>  )<br/>}</span></pre><p id="a02f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¯·è®°ä½ï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe lq lr ls kz b">react-router-dom</code>æ¥è·¯ç”±é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„å¼€å…³ä¸‹é¢æ·»åŠ å¯¼èˆªæ¡ï¼Œå¦‚ä¸‹æ‰€ç¤º' App.js '</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="cf8b" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import { Switch } from "react-router-dom"<br/>import { Navbar } from "./components/Navbar"</span><span id="fde0" class="ld le in kz b gy mv lg l lh li">import "./App.css"<br/>function App() {<br/>  return (<br/>    &lt;div className='App'&gt;<br/>      &lt;Navbar /&gt;<br/>      &lt;Switch&gt;<br/>        // Our pages will go here<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="adb2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å…¶æ¬¡ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé¡µé¢æ–‡ä»¶å¤¹ã€‚è¯¥æ–‡ä»¶å¤¹åŒ…å«æˆ‘ä»¬çš„é¡µé¢(äº§å“å’Œè´­ç‰©è½¦é¡µé¢)ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æœåŠ¡å’Œè§†å›¾éƒ½å°†å‘ˆç°åœ¨é¡µé¢ä¸­ä»¥è¿›è¡Œè·¯ç”±ã€‚</p><p id="e395" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„<strong class="jx io">äº§å“</strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="f464" class="ld le in kz b gy lf lg l lh li">import React, { useState, useEffect } from "react";<br/>import { Link } from "react-router-dom";<br/>export const Products = () =&gt; {<br/>  const [products, setProducts] = useState([]);<br/>  const [hasError, setError] = useState(false);<br/>  async function fetchData() {<br/>    const res = await fetch("http://localhost:4000/product");<br/>    res<br/>      .json()<br/>      .then((res) =&gt; {<br/>        console.log(res.data);<br/>        setProducts(res.data);<br/>      })<br/>      .catch((error) =&gt; {<br/>        setError(error);<br/>      });<br/>  }<br/>  async function addToCart(id, quantity) {<br/>    try {<br/>      const response = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: quantity,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      let data = await response.json();<br/>      alert("Item Added To Cart");<br/>      console.log(data);<br/>    } catch (err) {<br/>      alert("Something Went Wrong");<br/>      console.log(err);<br/>    }<br/>  }<br/>  useEffect(() =&gt; {<br/>    fetchData();<br/>  }, []);<br/>  console.log(products);<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="banner-innerpage"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row justify-content-center"&gt;<br/>              &lt;div className="col-md-6 align-self-center text-center"&gt;<br/>                &lt;h1 className="title"&gt;Shop listing&lt;/h1&gt;<br/>                &lt;h6 className="subtitle op-8"&gt;<br/>                  We are small team of creative people working together<br/>                &lt;/h6&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="spacer"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row mt-5"&gt;<br/>              &lt;div className="col-lg-9"&gt;<br/>                &lt;div className="row shop-listing"&gt;<br/>                  {products.map((product, i) =&gt; (<br/>                    &lt;div className="col-lg-4"&gt;<br/>                      &lt;div className="card shop-hover border-0"&gt;<br/>                        &lt;img<br/>                          src={"http://localhost:4000/" + product.image}<br/>                          alt="wrapkit"<br/>                          className="img-fluid"<br/>                        /&gt;<br/>                        &lt;div className="card-img-overlay align-items-center"&gt;<br/>                          &lt;button<br/>                            onClick={(e) =&gt; addToCart(product._id, 1)}<br/>                            className="btn btn-md btn-info"<br/>                          &gt;<br/>                            Add to cart<br/>                          &lt;/button&gt;<br/>                        &lt;/div&gt;<br/>                      &lt;/div&gt;<br/>                      &lt;div className="card border-0"&gt;<br/>                        &lt;h6&gt;<br/>                          &lt;a href="#" className="link"&gt;<br/>                            {product.name}{" "}<br/>                          &lt;/a&gt;<br/>                        &lt;/h6&gt;<br/>                        &lt;h6 className="subtitle"&gt;by Wisdom&lt;/h6&gt;<br/>                        &lt;h5 className="font-medium m-b-30"&gt;<br/>                          $195 /{" "}<br/>                          &lt;del className="text-muted line-through"&gt;$225&lt;/del&gt;<br/>                        &lt;/h5&gt;<br/>                      &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                  ))}<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="fd8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ³¨æ„åˆ°<code class="fe lq lr ls kz b">fetchData</code>åŠŸèƒ½äº†å—ï¼Ÿæˆ‘ä»¬å‘åç«¯å‘å‡ºä¸€ä¸ªhttpè¯·æ±‚ï¼Œåˆ—å‡ºæ‰€æœ‰äº§å“å¹¶å­˜å‚¨åœ¨å˜é‡productsä¸­(è®°ä½ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Reacté’©å­)ã€‚</p><p id="3e12" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å› ä¸ºæˆ‘ä»¬ç°åœ¨æŠŠå®ƒä½œä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡å®ƒå¾ªç¯æ˜¾ç¤ºï¼Œå¦‚ç¬¬64è¡Œæ‰€ç¤ºã€‚</p><p id="0744" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬è¿˜éœ€è¦å°†å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå‘åç«¯å‘å‡ºè¯·æ±‚ï¼Œå¹¶å‘å…¶ä¼ é€’å‚æ•°ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ã€‚</p><p id="c49d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lq lr ls kz b">addToCart</code>åœ¨ç¬¬18è¡Œå®šä¹‰:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="da37" class="ld le in kz b gy lf lg l lh li">async function addToCart(id, quantity) {<br/>    try {<br/>      const response = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: quantity,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      })<br/>      let data = await response.json()<br/>      console.log(data)<br/>    } catch (err) {<br/>      console.log(err)<br/>    }<br/>  }</span></pre><p id="4ead" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¹‹åï¼Œæˆ‘ä»¬å‘æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ¥è°ƒç”¨<code class="fe lq lr ls kz b">addToCart</code>æŒ‰é’®</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="d3db" class="ld le in kz b gy lf lg l lh li">&lt;button<br/>                            onClick={(e) =&gt; addToCart(product._id, 1)}<br/>                            className="btn btn-md btn-info"<br/>                          &gt;<br/>                            Add to cart<br/>                          &lt;/button&gt;</span></pre><p id="e7ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬ä¼ é€’äº§å“çš„<code class="fe lq lr ls kz b">id</code>å’Œä¸€ä¸ªé»˜è®¤æ•°é‡1ã€‚</p><p id="d434" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åå†ä¸€æ¬¡æ·»åŠ åˆ°æˆ‘ä»¬çš„<code class="fe lq lr ls kz b">App.js</code>ï¼Œä½œä¸ºé¡µé¢ã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="4deb" class="ld le in kz b gy lf lg l lh li">import React from "react"<br/>import { Switch, Route } from "react-router-dom"<br/>import { Products } from "./pages/product"</span><span id="416c" class="ld le in kz b gy mv lg l lh li">import { Navbar } from "./components/Navbar"</span><span id="b7d0" class="ld le in kz b gy mv lg l lh li">import "./App.css"<br/>function App() {<br/>  return (<br/>    &lt;div className='App'&gt;<br/>      &lt;Navbar /&gt;<br/>      &lt;Switch&gt;<br/>        &lt;Route exact path='/' component={Products} /&gt;<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/ba71a0c342c43469d7eaedbd19dcb97e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cw4X88sySGHGLUde.png"/></div></div></figure><p id="051f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬è½¬åˆ°è´­ç‰©è½¦é¡µé¢ï¼Œæ·»åŠ æˆ‘ä»¬çš„ç®€å•UIã€‚</p><p id="d155" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä»åç«¯è·å–è´­ç‰©è½¦å•†å“åˆ—è¡¨ã€‚æ³¨æ„ä¸‹é¢çš„fetchCartæ–¹æ³•ã€‚éšå¿ƒæ‰€æ¬²ã€‚</p><p id="8efd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä½ ä¸ç†Ÿæ‚‰reacté’©å­ï¼Œä½ å¯ä»¥å»æŸ¥ä¸€ä¸‹ï¼Œæˆ–è€…æ›´å¥½åœ°ä½¿ç”¨åŸºäºç»„ä»¶çš„é’©å­ã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="3768" class="ld le in kz b gy lf lg l lh li">import React, { useState, useEffect } from "react";<br/>import { Link } from "react-router-dom";<br/>import "./cart.css";<br/>export const Cart = (props) =&gt; {<br/>  const [carts, setCarts] = useState([]);<br/>  const [payload, setPayloader] = useState({});<br/>  const [hasError, setError] = useState(false);<br/>  async function fetchCart() {<br/>    const res = await fetch("http://localhost:4000/cart");<br/>    res<br/>      .json()<br/>      .then((res) =&gt; {<br/>        console.log(res.data.items);<br/>        setCarts(res.data.items);<br/>        setPayloader(res.data);<br/>      })<br/>      .catch((error) =&gt; {<br/>        setError(error);<br/>      });<br/>  }<br/>  async function increaseQty(id) {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: 1,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      console.log(res);<br/>      fetchCart();<br/>      alert("Item Increamented");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }<br/>  async function emptyCart() {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart/empty-cart", {<br/>        method: "DELETE",<br/>      });<br/>      await res.json();<br/>      fetchCart();<br/>      props.history.push("/");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }<br/>  useEffect(() =&gt; {<br/>    fetchCart();<br/>  }, []);<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="banner-innerpage"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row justify-content-center"&gt;<br/>              &lt;div className="col-md-6 align-self-center text-center"&gt;<br/>                &lt;h1 className="title"&gt;Cart Listing&lt;/h1&gt;<br/>                &lt;h6 className="subtitle op-8"&gt;<br/>                  We are small team of creative people working together<br/>                &lt;/h6&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>      &lt;section&gt;<br/>        &lt;div className="spacer"&gt;<br/>          &lt;div className="container"&gt;<br/>            &lt;div className="row mt-5"&gt;<br/>              &lt;div className="col-lg-9"&gt;<br/>                &lt;div className="row shop-listing"&gt;<br/>                  &lt;table className="table shop-table"&gt;<br/>                    &lt;tr&gt;<br/>                      &lt;th className="b-0"&gt;Name&lt;/th&gt;<br/>                      &lt;th className="b-0"&gt;Price&lt;/th&gt;<br/>                      &lt;th className="b-0"&gt;Quantity&lt;/th&gt;<br/>                      &lt;th className="b-0 text-right"&gt;Total Price&lt;/th&gt;<br/>                    &lt;/tr&gt;<br/>                    {carts.map((item, i) =&gt; (<br/>                      &lt;tr&gt;<br/>                        &lt;td&gt;{item.productId.name}&lt;/td&gt;<br/>                        &lt;td&gt;{item.productId.price}&lt;/td&gt;<br/>                        &lt;td&gt;<br/>                          &lt;button<br/>                            onClick={(e) =&gt; increaseQty(item.productId._id)}<br/>                            className="btn btn-primary btn-sm"<br/>                          &gt;<br/>                            +<br/>                          &lt;/button&gt;<br/>                          {item.quantity}<br/>                          &lt;button className="btn btn-primary btn-sm"&gt;-&lt;/button&gt;<br/>                        &lt;/td&gt;<br/>                        &lt;td className="text-right"&gt;<br/>                          &lt;h5 className="font-medium m-b-30"&gt;{item.total}&lt;/h5&gt;<br/>                        &lt;/td&gt;<br/>                      &lt;/tr&gt;<br/>                    ))}<br/>                    &lt;tr&gt;<br/>                      &lt;td colspan="3" align="right"&gt;<br/>                        Subtotal :{payload.subTotal}<br/>                      &lt;/td&gt;<br/>                      &lt;td colspan="4" align="right"&gt;<br/>                        &lt;button<br/>                          className="btn btn-danger"<br/>                          onClick={(e) =&gt; emptyCart()}<br/>                        &gt;<br/>                          Empty cart<br/>                        &lt;/button&gt;<br/>                      &lt;/td&gt;<br/>                    &lt;/tr&gt;<br/>                  &lt;/table&gt;<br/>                &lt;/div&gt;<br/>              &lt;/div&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/section&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="2634" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åæˆ‘ä»¬å¯ä»¥éå†æ•°ç»„(cart)å¹¶ä¿®æ”¹ã€‚</p><p id="b75d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¯·æ³¨æ„<code class="fe lq lr ls kz b">increamentQty(id)</code>æ–¹æ³•ï¼Œå®ƒå°†äº§å“idä½œä¸ºå‚æ•°ï¼Œç„¶åå°†æ•°é‡è®¾ç½®ä¸º1ä½œä¸ºé»˜è®¤å€¼ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ•°é‡æ›´æ–°1ã€‚</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="dc8e" class="ld le in kz b gy lf lg l lh li">async function increaseQty(id) {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart", {<br/>        method: "POST",<br/>        body: JSON.stringify({<br/>          productId: id,<br/>          quantity: 1,<br/>        }),<br/>        headers: {<br/>          "Content-type": "application/json; charset=UTF-8",<br/>        },<br/>      });<br/>      console.log(res);<br/>      fetchCart();<br/>      alert("Item increamented");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }</span></pre><p id="30ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¹‹åï¼Œæˆ‘ä»¬å‘æŒ‰é’®æ·»åŠ äº†clickäº‹ä»¶æ¥è§¦å‘è¯¥æ–¹æ³•:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ca2e" class="ld le in kz b gy lf lg l lh li">&lt;button<br/>                            onClick={(e) =&gt; increaseQty(item.productId._id)}<br/>                            className="btn btn-primary btn-sm"<br/>                          &gt;<br/>                            +<br/>                          &lt;/button&gt;</span></pre><p id="efeb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç‚¹å‡»æŒ‰é’®å°†å¢åŠ ç‰©å“çš„æ•°é‡ã€‚</p><p id="2376" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code class="fe lq lr ls kz b">emptyCart</code>æ–¹æ³•æ¥åˆ é™¤å½“å‰è´­ç‰©è½¦ä¸­çš„æ‰€æœ‰å•†å“ã€‚è§ä¸‹æ–‡ï¼›</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="38ed" class="ld le in kz b gy lf lg l lh li">async function emptyCart() {<br/>    try {<br/>      const res = await fetch("http://localhost:4000/cart/empty-cart", {<br/>        method: "DELETE",<br/>      });<br/>      await res.json();<br/>      fetchCart();<br/>      props.history.push("/");<br/>    } catch (err) {<br/>      console.log(err);<br/>    }<br/>  }</span></pre><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/a346e06ff5f80fa17a601a8761772b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2Pwp0eFIs1TnsKrS.png"/></div></div></figure><h1 id="865e" class="lt le in bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">é”»ç‚¼</h1><ul class=""><li id="3dc2" class="mx my in jx b jy mq kc mr kg mz kk na ko nb ks nc nd ne nf bi translated">å®ç°å‡é‡åŠŸèƒ½</li><li id="c092" class="mx my in jx b jy ng kc nh kg ni kk nj ko nk ks nc nd ne nf bi translated">å®æ–½ä»è´­ç‰©è½¦ä¸­ç§»é™¤äº§å“</li></ul><p id="f753" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å®ç°ä¹‹åï¼Œå°†æ‚¨çš„å·¥ä½œæ¨é€åˆ°gitï¼Œå¹¶åœ¨è¯„è®ºéƒ¨åˆ†æ·»åŠ é“¾æ¥ã€‚è®©æˆ‘ä»¬æ‰¾ç‚¹ä¹å­ğŸ˜</p></div></div>    
</body>
</html>
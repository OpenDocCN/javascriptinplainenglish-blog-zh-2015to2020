<html>
<head>
<title>JavaScript Events Handlers — Mouse Wheel and Media Events</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript事件处理程序—鼠标滚轮和媒体事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-events-handlers-mouse-wheel-and-media-events-b0929f1e8aa9?source=collection_archive---------3-----------------------#2020-01-27">https://javascript.plainenglish.io/javascript-events-handlers-mouse-wheel-and-media-events-b0929f1e8aa9?source=collection_archive---------3-----------------------#2020-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0bf24ea2eeaa31c08f1ba336df8815e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*egls8jZEEdhtUazJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@maretak?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marieke Tacken</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7981" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在JavaScript中，事件是应用程序中发生的动作。它们是由各种事情触发的，比如输入、提交表单、调整大小等元素变化，或者应用程序运行时发生的错误等。我们可以分配一个事件处理器来处理这些事件。发生在DOM元素上的事件可以通过为相应事件的DOM对象的属性分配一个事件处理程序来处理。在本文中，我们将看看如何使用<code class="fe lb lc ld le b">onwheel</code>处理滚轮事件，<code class="fe lb lc ld le b">onpause</code>和<code class="fe lb lc ld le b">onplay</code>处理媒体元素的暂停和播放事件。</p><h1 id="4273" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">车轮上</h1><p id="1663" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">DOM对象的<code class="fe lb lc ld le b">onwheel</code>属性允许我们为它分配一个事件处理函数来处理<code class="fe lb lc ld le b">wheel</code>事件。旋转鼠标滚轮时会触发该事件。这与<code class="fe lb lc ld le b">onscroll</code>不同，因为滚动并不总是使用鼠标滚轮。</p><p id="016f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，当我们旋转鼠标滚轮时，我们可以使用<code class="fe lb lc ld le b">onwheel</code>事件处理函数来改变盒子的大小。为此，首先，我们在HTML代码中添加一个<code class="fe lb lc ld le b">div</code>来生成一个框，我们可以改变它的大小:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="0288" class="mq lg iq le b gy mr ms l mt mu">&lt;div&gt;Make me bigger or smaller by rotating the mouse wheel.&lt;/div&gt;</span></pre><p id="a60f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过改变<code class="fe lb lc ld le b">div</code>元素的大小、位置和颜色来设置它的样式，如下面的代码所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="bcd4" class="mq lg iq le b gy mr ms l mt mu">div {<br/>  width: 100px;<br/>  height: 100px;<br/>  background: lightblue;<br/>  padding: 5px;<br/>  transition: transform .3s;<br/>  margin: 0 auto;<br/>  margin-top: 100px;<br/>}</span></pre><p id="78a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们添加JavaScript代码，该代码利用<code class="fe lb lc ld le b">onwheel</code>事件处理函数根据鼠标滚轮的滚动方向缩放<code class="fe lb lc ld le b">div</code>元素:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="af60" class="mq lg iq le b gy mr ms l mt mu">let scale = 1;</span><span id="6c93" class="mq lg iq le b gy mv ms l mt mu">const zoom = (event) =&gt; {<br/>  event.preventDefault();<br/>  if (event.deltaY &lt; 0) {<br/>    scale *= event.deltaY * -1.1;<br/>  } else {<br/>    scale /= event.deltaY * 1.1;<br/>  }<br/>  scale = Math.min(Math.max(.1, scale), 3);<br/>  el.style.transform = `scale(${scale})`;<br/>}</span><span id="4f2b" class="mq lg iq le b gy mv ms l mt mu">const el = document.querySelector('div');<br/>document.onwheel = zoom;</span></pre><p id="04e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，如果我们逆时针移动鼠标滚轮，那么<code class="fe lb lc ld le b">div</code>会变大。否则，它会变小。它通过从<code class="fe lb lc ld le b">event</code>对象获取<code class="fe lb lc ld le b">deltaY</code>属性来实现这一点。当<code class="fe lb lc ld le b">deltaY</code>为负时，这意味着鼠标滚轮正在逆时针滚动，因此我们将其乘以<code class="fe lb lc ld le b">-1.1</code>以使<code class="fe lb lc ld le b">scale</code>变量为正，并将现有的<code class="fe lb lc ld le b">scale</code>值乘以该数字以增加<code class="fe lb lc ld le b">div</code>的大小。否则，我们取而代之进行除法运算，从而使<code class="fe lb lc ld le b">div</code>收缩。</p><p id="0542" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe lb lc ld le b">if</code>语句之后，我们将<code class="fe lb lc ld le b">scale</code>变量限制在<code class="fe lb lc ld le b">.1</code>和<code class="fe lb lc ld le b">3</code>之间，这样它就不会变得无限大或无限小。最后，我们通过运行<code class="fe lb lc ld le b">el.style.transform = `scale(${scale})`;</code>将<code class="fe lb lc ld le b">scale</code>值赋给<code class="fe lb lc ld le b">transform</code>属性。</p><h1 id="d610" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">暂停</h1><p id="a286" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">当媒体回放暂停时，触发<code class="fe lb lc ld le b">pause</code>事件。为了处理这个事件，我们可以为DOM元素中的<code class="fe lb lc ld le b">onpause</code>属性分配一个事件处理函数。</p><p id="584f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当处理暂停活动的请求并且活动进入暂停状态时，发送<code class="fe lb lc ld le b">pause</code>事件。当我们通过手动暂停媒体播放或调用<code class="fe lb lc ld le b">pause()</code>方法来暂停音频或视频时，这是最常见的。一旦<code class="fe lb lc ld le b">pause()</code>方法返回，并且在媒体元素的<code class="fe lb lc ld le b">paused</code>属性被更改为<code class="fe lb lc ld le b">true</code>之后，该事件被触发。</p><p id="47fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写一些代码来记录视频是否暂停。首先，我们为<code class="fe lb lc ld le b">video</code>元素添加HTML代码，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="6f63" class="mq lg iq le b gy mr ms l mt mu">&lt;video controls src='<a class="ae kc" href="https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4'" rel="noopener ugc nofollow" target="_blank">https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4'</a>&gt;&lt;/video&gt;</span></pre><p id="9023" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在JavaScript代码中，我们可以将我们的事件处理函数分配给<code class="fe lb lc ld le b">video</code> DOM对象的<code class="fe lb lc ld le b">onpause</code>属性:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="987c" class="mq lg iq le b gy mr ms l mt mu">const video = document.querySelector('video');</span><span id="ca2e" class="mq lg iq le b gy mv ms l mt mu">video.onpause = (event) =&gt; {<br/>  console.log('video paused');<br/>};</span></pre><p id="3c83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，当我们暂停视频时，我们应该会看到“视频暂停”消息。</p><p id="41d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在<code class="fe lb lc ld le b">video</code> DOM对象上调用<code class="fe lb lc ld le b">pause</code>方法，也会显示“视频暂停”消息。例如，如果我们编写以下代码，而不是上面的代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c9b3" class="mq lg iq le b gy mr ms l mt mu">const video = document.querySelector('video');<br/>video.play();<br/>setTimeout(() =&gt; {<br/>  video.pause();<br/>}, 2000)</span><span id="0fec" class="mq lg iq le b gy mv ms l mt mu">video.onpause = (event) =&gt; {<br/>  console.log('video paused');<br/>};</span></pre><p id="77ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后视频将播放2秒钟，在<code class="fe lb lc ld le b">video</code> DOM对象上将调用<code class="fe lb lc ld le b">pause</code>，这将触发<code class="fe lb lc ld le b">pause</code>事件。然后我们会看到记录的“视频暂停”消息。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3dcad0166ad34072d1fa512c3cb220ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*29SsAXczvCD7nUoS"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kurita?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Veronica García</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6b02" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">onplay</h1><p id="56bb" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">像音频或视频这样的DOM媒体元素的<code class="fe lb lc ld le b">onplay</code>属性允许我们为这些对象分配一个事件处理函数。它处理当媒体元素的<code class="fe lb lc ld le b">paused</code>属性从<code class="fe lb lc ld le b">true</code>变为<code class="fe lb lc ld le b">false</code>时触发的<code class="fe lb lc ld le b">play</code>事件，这可能是调用媒体元素上的<code class="fe lb lc ld le b">play</code>方法或设置元素的<code class="fe lb lc ld le b">autoplay</code>属性的结果。</p><p id="ceb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以创建一个自动播放视频元素，然后在它被触发时记录<code class="fe lb lc ld le b">play</code>事件。首先，我们通过添加一个videon元素来制作HTML代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b305" class="mq lg iq le b gy mr ms l mt mu">&lt;video controls autoplay src='<a class="ae kc" href="https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4'" rel="noopener ugc nofollow" target="_blank">https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4'</a>&gt;&lt;/video&gt;</span></pre><p id="4270" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在JavaScript代码中，我们为<code class="fe lb lc ld le b">play</code>事件定义了自己的事件处理函数，并将其设置为视频元素DOM对象的<code class="fe lb lc ld le b">onplay</code>属性:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c753" class="mq lg iq le b gy mr ms l mt mu">const video = document.querySelector('video');</span><span id="4c64" class="mq lg iq le b gy mv ms l mt mu">video.onplay = (event) =&gt; {<br/>  console.log('video plays');<br/>};</span></pre><p id="d0c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当页面加载时视频开始播放，我们应该会看到记录在<code class="fe lb lc ld le b">console.log</code>语句中的“视频播放”消息。</p><p id="f711" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在视频元素上调用<code class="fe lb lc ld le b">play</code>方法时，它也应该记录。如果我们有:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="0b16" class="mq lg iq le b gy mr ms l mt mu">const video = document.querySelector('video');</span><span id="fa98" class="mq lg iq le b gy mv ms l mt mu">video.play();</span><span id="1b3e" class="mq lg iq le b gy mv ms l mt mu">video.onplay = (event) =&gt; {<br/>  console.log('video plays');<br/>};</span></pre><p id="6aee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该在控制台中记录相同的消息。如果我们手动播放视频，情况也是如此。</p><p id="5a5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM对象的<code class="fe lb lc ld le b">onwheel</code>属性允许我们给它分配一个事件处理函数来处理<code class="fe lb lc ld le b">wheel</code>事件。旋转鼠标滚轮时会触发该事件。这与<code class="fe lb lc ld le b">onscroll</code>不同，因为滚动并不总是使用鼠标滚轮。我们可以让<code class="fe lb lc ld le b">deltaY</code>得到鼠标滚轮旋转的幅度和方向。</p><p id="afc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当媒体回放暂停时，触发<code class="fe lb lc ld le b">pause</code>事件。为了处理这个事件，我们可以为DOM元素中的<code class="fe lb lc ld le b">onpause</code>属性分配一个事件处理函数。</p><p id="df39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当处理暂停活动的请求并且活动进入暂停状态时，发送<code class="fe lb lc ld le b">pause</code>事件。当我们通过手动暂停媒体播放或调用<code class="fe lb lc ld le b">pause()</code>方法来暂停音频或视频时，这是最常见的。一旦<code class="fe lb lc ld le b">pause()</code>方法返回，并且在媒体元素的<code class="fe lb lc ld le b">paused</code>属性被更改为<code class="fe lb lc ld le b">true</code>之后，该事件被触发。</p><p id="c071" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像音频或视频这样的DOM媒体元素的<code class="fe lb lc ld le b">onplay</code>属性允许我们为这些对象分配一个事件处理函数。它处理当媒体元素的<code class="fe lb lc ld le b">paused</code>属性从<code class="fe lb lc ld le b">true</code>变为<code class="fe lb lc ld le b">false</code>时触发的<code class="fe lb lc ld le b">play</code>事件，这可能是调用媒体元素上的<code class="fe lb lc ld le b">play</code>方法或设置元素的<code class="fe lb lc ld le b">autoplay</code>属性的结果。</p></div></div>    
</body>
</html>
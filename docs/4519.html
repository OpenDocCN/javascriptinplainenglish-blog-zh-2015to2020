<html>
<head>
<title>What Is The Short-Circuit Operator in JavaScript? (&amp;&amp;, Logical AND)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的短路操作符是什么？(&amp;&amp;，逻辑与)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-the-short-circuit-operator-in-javascript-logical-and-7ee0e8dc8bc8?source=collection_archive---------1-----------------------#2020-12-18">https://javascript.plainenglish.io/what-is-the-short-circuit-operator-in-javascript-logical-and-7ee0e8dc8bc8?source=collection_archive---------1-----------------------#2020-12-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9f04" class="pw-subtitle-paragraph jr ip iq bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">你会在JavaScript代码中经常看到“短路操作符”，尤其是在React JSX中。使用<code class="fe jn jo jp jq b">&amp;&amp;</code>，falsy值将“短路”给定的代码行，导致执行停止。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/ed7dbcd098763bea85ff27333eadc00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z56R_bURLGh2gh2q"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@_staticvoid?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lucas Santos</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="da7e" class="la lb iq bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">为什么你需要短路代码</h1><p id="4836" class="pw-post-body-paragraph ls lt iq lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">在React中有一段时间我不明白的是如何有条件地呈现React组件。</p><p id="9527" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">当你编写<a class="ae kz" href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener ugc nofollow" target="_blank">JSX代码</a>(看起来像HTML的部分，由React组件的<a class="ae kz" href="https://reactjs.org/docs/react-component.html#render" rel="noopener ugc nofollow" target="_blank">渲染函数</a>返回)时，你不能像在JavaScript中一样使用<code class="fe jn jo jp jq b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else" rel="noopener ugc nofollow" target="_blank">if</a></code>语句。</p><p id="cac7" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">这似乎打破了计算机编程的基本规则之一。编程语言都有“开关”(像<code class="fe jn jo jp jq b">if</code>这样的条件)，循环，以及做数学的能力。</p><p id="d6c0" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">如果没有将代码分支到不同路径的能力，如何编写响应用户的React JSX代码呢？</p><p id="0695" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">这是深入理解JavaScript语言的机制对提高React开发人员的能力非常有用的时候之一。</p><p id="820f" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">当您编写JSX代码时，React会将JSX翻译成一系列对<code class="fe jn jo jp jq b"><a class="ae kz" href="https://reactjs.org/docs/react-without-jsx.html" rel="noopener ugc nofollow" target="_blank">React.createElement()</a></code>的函数调用。(<a class="ae kz" href="https://docs.google.com/spreadsheets/d/1WCH-k0MOwSR1ielMQi4q-QhAmnpss4O24TO57m8DDCM/edit#gid=966652394" rel="noopener ugc nofollow" target="_blank">在React 17的</a>中，即改成了<a class="ae kz" href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#whats-different-in-the-new-transform" rel="noopener ugc nofollow" target="_blank">一个新的JSX变换</a>、<code class="fe jn jo jp jq b">jsx()</code>，但概念是一样的。).</p><p id="a62c" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">这就是在JSX不能使用<code class="fe jn jo jp jq b">if</code>语句的技术原因:React不知道如何将<code class="fe jn jo jp jq b">if</code>翻译成<code class="fe jn jo jp jq b">createElement()</code>(或<code class="fe jn jo jp jq b">jsx()</code>)函数调用。谢天谢地，JavaScript有一个工具可以“短路”一行代码的执行:<code class="fe jn jo jp jq b">&amp;&amp;</code>(和)。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="114c" class="la lb iq bd lc ld na lf lg lh nb lj lk ka nc kb lm kd nd ke lo kg ne kh lq lr bi translated">(重新)介绍短路操作符，<code class="fe jn jo jp jq b">&amp;&amp;</code></h1><p id="e0d7" class="pw-post-body-paragraph ls lt iq lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated"><code class="fe jn jo jp jq b">&amp;&amp;</code>(逻辑AND)运算符——也称为“<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#Short-circuit_evaluation" rel="noopener ugc nofollow" target="_blank">短路运算符</a>”——是每个开发人员都熟悉的东西。</p><p id="edd3" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">您使用像<code class="fe jn jo jp jq b">if</code>语句和<code class="fe jn jo jp jq b">while</code>循环这样的<code class="fe jn jo jp jq b">&amp;&amp;</code>内部条件来连接<a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-boolean-in-javascript-98fdc8aec2a7" rel="noopener">布尔</a>表达式。结果是<a class="ae kz" href="https://en.wikipedia.org/wiki/Logical_conjunction" rel="noopener ugc nofollow" target="_blank">逻辑表达式“AND”</a>:由<code class="fe jn jo jp jq b">&amp;&amp;</code>连接的两个表达式都需要返回<a class="ae kz" href="https://medium.com/coding-in-simple-english/what-are-truthy-values-in-javascript-e037bdfa76f8" rel="noopener">真值</a>才能进入条件表达式。</p><p id="86fc" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">然而，您可能没有预料到“短路”行为:我没有。短路操作的意思是如果下一个表达式被<code class="fe jn jo jp jq b">&amp;&amp;</code>加入，JavaScript在<a class="ae kz" href="https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4" rel="noopener">一个falsy值</a>后停止执行。</p><p id="54a8" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">你可以很容易地想象一种编程语言在继续之前评估与<code class="fe jn jo jp jq b">&amp;&amp;</code>相关的两个表达式。虽然效率不高，但似乎有道理。然而，这不是JavaScript的工作方式；JavaScript从左到右计算，会短路。</p><p id="e450" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">这意味着您可能会有无意义的代码或在<code class="fe jn jo jp jq b">&amp;&amp;</code>之后抛出错误的东西，而JavaScript并不在乎。这实际上非常强大，尤其是在类型检查的时候。您可以想象在通过在一行上使用<code class="fe jn jo jp jq b">&amp;&amp;</code>连接两个表达式来访问数组之前，<a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-check-for-an-array-in-javascript-6ad20f7a0e21" rel="noopener">使用<code class="fe jn jo jp jq b">Array.isArray()</code>检查数组</a>。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="7ead" class="la lb iq bd lc ld na lf lg lh nb lj lk ka nc kb lm kd nd ke lo kg ne kh lq lr bi translated">使用短路操作器<code class="fe jn jo jp jq b">&amp;&amp;</code>代替<code class="fe jn jo jp jq b">if</code></h1><p id="56d6" class="pw-post-body-paragraph ls lt iq lu b lv lw jv lx ly lz jy ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">使用短路操作符<code class="fe jn jo jp jq b">&amp;&amp;</code>的另一种方式是使用它有条件地执行一行代码，而根本不使用<code class="fe jn jo jp jq b">if</code>语句。</p><p id="2ec2" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">让我们看几个使用<code class="fe jn jo jp jq b">&amp;&amp;</code>演示短路执行的代码示例。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nf"><img src="../Images/8e7037197fe2df67547de8a12087c413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JR4pfFNTlch6ToOVgA_gCA.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk"><a class="ae kz" href="https://gist.github.com/DoctorDerek/00a8f9376c50f59825cb11ddf220f84b" rel="noopener ugc nofollow" target="_blank">View raw code</a> as GitHub Gist</figcaption></figure><p id="b3bf" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">正如我们在第一个代码示例中看到的，使用<code class="fe jn jo jp jq b">&amp;&amp;</code>的结果与使用一个<code class="fe jn jo jp jq b">if</code>语句后跟一个<code class="fe jn jo jp jq b">{}</code> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block" rel="noopener ugc nofollow" target="_blank">代码块</a>是一样的。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nf"><img src="../Images/a2e4b0e11dc4a71469f6f0f1cb197a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zk1tdoVEl0qL7td7Pbg03Q.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk"><a class="ae kz" href="https://gist.github.com/DoctorDerek/72ce6e43b563a82ea3a34a2729443918" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="79a6" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">当JavaScript从左到右读取给定行上的代码时，任何后跟<code class="fe jn jo jp jq b">&amp;&amp;</code>的falsy值都会缩短执行时间。</p><blockquote class="ng nh ni"><p id="3912" class="ls lt nj lu b lv mo jv lx ly mp jy ma nk mq md me nl mr mh mi nm ms ml mm mn ij bi translated">“逻辑AND表达式从左到右计算，使用以下规则测试可能的‘短路’计算:</p><p id="6a65" class="ls lt nj lu b lv mo jv lx ly mp jy ma nk mq md me nl mr mh mi nm ms ml mm mn ij bi translated"><code class="fe jn jo jp jq b">(some falsy expression) &amp;&amp; <em class="iq">expr</em></code>对falsy表达式进行短路求值；</p><p id="de8a" class="ls lt nj lu b lv mo jv lx ly mp jy ma nk mq md me nl mr mh mi nm ms ml mm mn ij bi translated">短路意味着上面的<code class="fe jn jo jp jq b"><em class="iq">expr</em></code>部分没有被<strong class="lu ir">求值</strong>，因此这样做的任何副作用都不会生效(例如，如果<code class="fe jn jo jp jq b"><em class="iq">expr</em></code>是一个函数调用，则调用永远不会发生)。”— <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND#Short-circuit_evaluation" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="d7ce" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">正如我提到的，你通常会在React JSX代码中看到<code class="fe jn jo jp jq b">&amp;&amp;</code>，React组件或HTML元素只在某些情况下才会被呈现:<code class="fe jn jo jp jq b">shouldBeRenderedBoolean &amp;&amp; &lt;ComponentToRender /&gt;</code>。</p><p id="45d4" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">对于一些人来说，使用<code class="fe jn jo jp jq b">&amp;&amp;</code>会非常明显(<em class="nj">“喜欢，咄”</em>)，但我花了一段时间才明白“短路执行”是什么意思。我发现<code class="fe jn jo jp jq b">&amp;&amp;</code>几乎和<a class="ae kz" href="https://medium.com/better-programming/making-sense-of-vs-in-javascript-f9dbbc6352e3" rel="noopener">一样令人困惑</a> <code class="fe jn jo jp jq b"><a class="ae kz" href="https://medium.com/better-programming/making-sense-of-vs-in-javascript-f9dbbc6352e3" rel="noopener">==</a></code> <a class="ae kz" href="https://medium.com/better-programming/making-sense-of-vs-in-javascript-f9dbbc6352e3" rel="noopener">和</a> <code class="fe jn jo jp jq b"><a class="ae kz" href="https://medium.com/better-programming/making-sense-of-vs-in-javascript-f9dbbc6352e3" rel="noopener">===</a></code>的区别。</p><p id="7f58" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">希望本教程能帮助你理解这个关键的JavaScript概念。短路评估可以让我们写出<a class="ae kz" href="https://medium.com/better-programming/why-you-should-make-your-code-as-simple-as-possible-3b35e89f137" rel="noopener">简单的代码</a>，只要我们明白<code class="fe jn jo jp jq b">&amp;&amp;</code>到底是怎么工作的。</p><p id="1b72" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated"><strong class="lu ir">编码快乐！</strong>🔭<code class="fe jn jo jp jq b">&amp;&amp;</code>🌌<code class="fe jn jo jp jq b">===</code>🆒</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="fe48" class="pw-post-body-paragraph ls lt iq lu b lv mo jv lx ly mp jy ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated"><a class="ae kz" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">Derek Austin</a>博士是《职业编程:如何在6个月内成为一名成功的6位数程序员 》一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>
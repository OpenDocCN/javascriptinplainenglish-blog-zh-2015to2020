<html>
<head>
<title>Create a Blog with WordPress and Gatsby — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用WordPress和盖茨比创建博客——第二部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-blog-with-wordpress-and-gatsby-part-2-6e6f121bc232?source=collection_archive---------5-----------------------#2020-08-12">https://javascript.plainenglish.io/create-a-blog-with-wordpress-and-gatsby-part-2-6e6f121bc232?source=collection_archive---------5-----------------------#2020-08-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="ca01" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第2部分-连接</h1><p id="4365" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在让我们回到我们在<a class="ae lj" href="https://medium.com/@kaleighscruggs/create-a-blog-with-wordpress-and-gatsby-part-1-a4d78a93a28d" rel="noopener">第一部分</a>建立的盖茨比网站，把它连接到我们的WordPress网站上，并拉一些博客帖子！</p><h1 id="df17" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">盖茨比插件</h1><p id="4023" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在文本编辑器中打开gatsby-config.js。</p><p id="1a1b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">首先，我将编辑默认的<code class="fe lp lq lr ls b">siteMetadata</code>使网站成为我自己的网站:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/a77bee92cadd649175bbd135cf5bf332.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/0*0tpOohcmZRHRVvG3.png"/></div></figure><p id="b3ea" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">有这么多了不起的盖茨比插件，但是为了这个教程，我们将只安装我们需要连接WordPress的东西。</p><p id="ce28" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">通常我会安装<a class="ae lj" href="https://www.gatsbyjs.org/packages/gatsby-source-wordpress/" rel="noopener ugc nofollow" target="_blank"> gatsby-source-wordpress插件</a>，但是因为它很快就会更新，让我们<a class="ae lj" href="https://www.gatsbyjs.org/docs/sourcing-from-wordpress/" rel="noopener ugc nofollow" target="_blank">试试新的</a>。</p><p id="1e3d" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">运行:<br/> <code class="fe lp lq lr ls b">npm install gatsby-source-wordpress-experimental</code></p><p id="3c70" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">接下来，我们将返回并编辑我们的gatsby-config.js文件，并将. env文件添加到项目中。它将被gitignore忽略。</p><p id="938f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">这是我的样子，减去我的WordPress网站的登录信息。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/e7a0b76df2b3d131b0afa1bad3103663.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/0*QldZf3CQ0s4c4_7e.png"/></div></figure><p id="bb24" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">以下是我们将添加到gatsby-config中的内容:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mc"><img src="../Images/e7f059505e5b1172e1116997b9bf6fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cpdsubxF9kamxXY9.png"/></div></div></figure><p id="dfac" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">确保你添加了WordPress网站的graphql链接:<code class="fe lp lq lr ls b"><a class="ae lj" href="https://wp.kaleigh.tech/graphql" rel="noopener ugc nofollow" target="_blank">https://wp.kaleigh.tech/graphql</a></code></p><p id="25cc" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">接下来，我们需要编辑gatsby-node.js文件。<a class="ae lj" href="https://github.com/gatsbyjs/gatsby-source-wordpress-experimental/blob/master/docs/tutorials/building-a-new-site-wordpress-and-gatsby.md" rel="noopener ugc nofollow" target="_blank">我按照医嘱使用</a>:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mh"><img src="../Images/a3c3a9d43c6c188721c749dea10ed4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kdHnIyTCj2SxEc6y.png"/></div></div></figure><p id="516d" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">现在我们的网站已经连接到了WordPress网站，但是没有真正的方法去验证和查看任何东西。所以我们需要创建一个博客帖子模板，这样我们就可以收集信息。</p><h1 id="904f" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">博客帖子模板</h1><p id="3930" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">接下来，我们需要在src下建立一个名为“模板”的新文件夹，并添加blog-post.js</p><p id="e091" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">以下是blog-post.js的内容:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mi"><img src="../Images/1e065a118371bf0d3644b1cbe369facf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-lWkWScxaO3D9-NT.png"/></div></div></figure><p id="0e94" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">所以有了这些新的变化，我们可以从WordPress网站上获取博客文章并展示出来。运行<code class="fe lp lq lr ls b">gatsby develop</code>进行检查。</p><p id="59db" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">当网站加载时，我们不会在主页上看到任何差异。我们还没有定好路线。如果您访问这样一个URL:<a class="ae lj" href="http://localhost:8000/oops" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/哎呀</a>您会看到所有页面的列表，并且应该会看到您在WordPress上的一些帖子:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mj"><img src="../Images/3d51aa5adf8993228bcce68c280702dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4pv0HvrlmFHaa5Wc.png"/></div></div></figure><p id="2572" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">看到那些“假”帖子了吗？那些是来自WordPress的！</p><p id="a72f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">点击它们以确保它们正常工作。我的是这样的:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mk"><img src="../Images/8455b5bf8b29031bfe2029784ebb684e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tzXxk-_YhnfyESEj.png"/></div></div></figure><p id="d68a" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">它只是引入了标题和内容，这是我们在blog-post.js文件中设置的。</p><p id="a73e" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">让我们把日期添加到我们的帖子中。如果你去本地的GraphQL，<a class="ae lj" href="http://localhost:8000/___graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/_ _ _ graph QL</a>你可以看到我们可以从WordPress博客文章中获取的所有选项:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/ab12d4977aad026b0178ab9cdf583e4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/0*B01mfrlKjzsc-MRq.png"/></div></figure><p id="ca83" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">检查日期框，您会看到:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/400784629deca68fac0a2c890078ab28.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/0*A7_eSgR8-yV9mjRS.png"/></div></figure><p id="e1aa" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">我在“MMMM DD，YYYY”中添加了，现在我看到了这个:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mn"><img src="../Images/02f512a1e06bf206b324a21754bd8791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j4HFhBOPTPlud7ff.png"/></div></div></figure><p id="bd1f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">让我们把它添加到我们的站点，看看会发生什么:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mo"><img src="../Images/2db4f24c07fc2627f07d3e1a335934c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9okLznWAAwPOZQ0P.png"/></div></div></figure><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/f3a8c9e3ecf2750cf4a4254e747a77b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/0*dlNbbBDWph6_BRx4.png"/></div></figure><p id="a11b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">您可能需要重新启动服务器才能看到结果:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mq"><img src="../Images/3343ea1085b9472615f1b46c48644c22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T2Sax15cdfwbTt6Y.png"/></div></div></figure><p id="ff43" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">厉害！</p><p id="564f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">接下来，我们将创建一个页面，列出我们所有的博客文章。</p><h1 id="5b6a" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">博客文章页面</h1><p id="dbb3" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在你的pages文件夹下，创建一个名为blog.js的新文件。现在，我们只需引入博客标题、日期，并使用slug创建一个到文章的链接。</p><p id="a85b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">以下是graphql查询的外观:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/663b5133175cf29cfc35ebab25b38035.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/0*9iwfCGFc2g_9Fodd.png"/></div></figure><p id="9a17" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">这将是一个已发布帖子的列表，为此我们将使用一个<a class="ae lj" href="https://reactjs.org/docs/lists-and-keys.html" rel="noopener ugc nofollow" target="_blank">地图功能</a>，这样我们就不必担心在将来发布帖子时更新页面。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e2341099fbe1809d6648d437fa5d732c.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/0*EiVykk2XYJw7PxNp.png"/></div></figure><p id="e363" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">有了这几行，看看<a class="ae lj" href="http://localhost:8000/blog/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/blog/</a>看看有什么:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mt"><img src="../Images/f9121bde088e27eb05daeb2ab958c954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a7dQ4Ti-k1doAgvf.png"/></div></div></figure><p id="9dbc" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">单击链接以确保它们正在工作。现在让我们清理一下，去掉子弹。</p><p id="a430" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">为简单起见，我们将在名为style.css的组件文件夹中创建一个新的CSS文件，并添加:</p><p id="fa17" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><code class="fe lp lq lr ls b">ul {<br/> list-style-type: none;<br/> }</code></p><p id="a1aa" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">我们还需要在layout.js文件中导入样式表:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/11fee51cdda735914298dca12b5e7876.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/0*83jQxVkeKUDZTj58.png"/></div></figure><p id="0cd6" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">现在它应该看起来好多了:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/fd0726ffb4feab03ab3f2024458f65c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*L-d0LoHkXI4NlESh.png"/></div></figure><p id="e616" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">最后，让我们在主页上添加一个到这个页面的链接。我只是加了这一行:</p><p id="fea7" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><code class="fe lp lq lr ls b">&lt;Link to="/blog"&gt;Like this blog&lt;/Link&gt;</code></p><p id="071b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">现在我们开始做生意了！</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mw"><img src="../Images/c67454893bd2e5e03958d2538a6ae938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fWGPp25odUFynI36.png"/></div></div></figure><p id="6f5c" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">希望你的看起来一样，<a class="ae lj" href="mailto:hi@kaleigh.dev?subject=WordPress Gatsby Tutorial" rel="noopener ugc nofollow" target="_blank">如果不一样，请让我知道</a>！你也可以看看我的这个系列的<a class="ae lj" href="https://github.com/klgh/kaleigh-tech-tutorial" rel="noopener ugc nofollow" target="_blank"> GitHub回购。</a><a class="ae lj" href="https://medium.com/@kaleighscruggs/create-a-blog-with-wordpress-and-gatsby-part-3-664e4967d54" rel="noopener">现在开始第3部分</a>！</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mx"><img src="../Images/6b42298573fe3482ec2852efa6caa352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpurmqLoMFVwxMhSV0szBw.png"/></div></div></figure></div></div>    
</body>
</html>
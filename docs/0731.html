<html>
<head>
<title>Creating a Medium-like Blog Post Builder in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中创建一个中等大小的博客文章生成器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-medium-like-blog-post-builder-in-react-d49e408ab262?source=collection_archive---------2-----------------------#2019-12-03">https://javascript.plainenglish.io/creating-a-medium-like-blog-post-builder-in-react-d49e408ab262?source=collection_archive---------2-----------------------#2019-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a648" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我喜欢写作，主要是因为我喜欢说话，但经过25年的机枪嘴，我的家人已经听腻了。所以我写，因为别人还不知道我有多讨厌。</p><p id="5995" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Medium是一个很好的平台，它有一个直观的post builder。如果没有它，我可能会在markdown上闲逛，为每个新帖子编写HTML &amp; CSS，或者简单地发布长长的文本墙。谁有时间做那个？不是这个人。</p><p id="fbc5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我决定学习如何在React中创建自己的post builder，以防将来有一天sheep崛起并接管Medium，并拒绝让任何非sheep的人在平台上写东西。糟糕的消息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/d3af2a0ebd606f00ff808d690eabe613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_sCylqjmyxdpPwAnYWPwQ.png"/></div></div></figure><p id="58b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个过程相对简单，我将在这里详述。如果你想了解更多，请继续阅读。</p><p id="d4af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">先决条件</strong></p><ul class=""><li id="8c9a" class="kx ky iq jp b jq jr ju jv jy kz kc la kg lb kk lc ld le lf bi translated">React和React 16特性的中级知识。</li><li id="f201" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated">从npm下载软件包的能力。</li><li id="49ad" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated">一台电脑。</li><li id="2418" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated">你太闲了。像我一样。</li></ul><p id="76ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">设置</strong></p><p id="0360" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用<code class="fe ll lm ln lo b">create-react-app</code>入门，用<code class="fe ll lm ln lo b">npm i -g create-react-app</code>安装的。然后我运行<code class="fe ll lm ln lo b">create-react-app post-builder</code>生成项目，用<code class="fe ll lm ln lo b">npm run start</code>加载到浏览器中。</p><p id="7196" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，我删除了以下文件:</p><ul class=""><li id="36a2" class="kx ky iq jp b jq jr ju jv jy kz kc la kg lb kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">src/App.css</code></li><li id="544e" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">src/App.test.js</code></li><li id="277f" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">src/logo.svg</code></li><li id="95f8" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">src/serviceWorker.js</code></li></ul><p id="78ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有<code class="fe ll lm ln lo b">index.js</code>的服务人员的东西。</p><p id="07ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我编辑我的App.js文件，直到它看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/c5e512ffa1ab98f051c77d0e895d1170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*BcueHAIM-QArVi16ocFyMw.png"/></div></figure><p id="7b50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在这个项目中使用了<code class="fe ll lm ln lo b">styled-components</code>，这是一个很棒的用于编写<code class="fe ll lm ln lo b">css-in-js</code>的库。如果你在追溯我在这里所做的，你可能也想用它。运行<code class="fe ll lm ln lo b">npm i styled-components</code>下载。但是你也可以用普通的css，或者sass，或者敌人的血。没关系。</p><p id="172c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">后置生成器组件</strong></p><p id="1d7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>组件将成为主要组件。它将有一个单一的状态字段，<code class="fe ll lm ln lo b">items.</code>这将是一个对象数组，每个对象代表页面上的一个项目，如文本区、图像或代码块。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/b05168601ee9a78ea394d73693ec6824.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*GfQDwOn2ELv_LbeSjDwOOQ.png"/></div></figure><p id="b221" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后组件将映射到<code class="fe ll lm ln lo b">items</code>数组，并为每个数组呈现一个单独的<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>组件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/f4feffe28bc577cc6fbc23b8467ad3b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*DvfccpCVH9kY03BIBlz9og.png"/></div></figure><p id="2b5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在<code class="fe ll lm ln lo b">src/components/PostBuilder/index.jsx</code>中创建了<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>，把上面的东西都加进去之后，看起来就是下图。所以稍后页面上会出现一些东西，我也在state中粘贴了一个初始项目。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ls"><img src="../Images/c57cc2aa0149dc1a7a412ee95361f09b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6EL1stlm-0iigL37Q6H-VA.png"/></div></div></figure><p id="27a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ll lm ln lo b">&lt;Item /&gt;</code>还没有创建，所以<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>抛出了一个错误。我决定接下来做那件事。</p><p id="08af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是一个漂亮的npm包，当你调用它的时候，它会生成一个唯一的id。</p><p id="bde0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">物品组件</strong></p><p id="fe62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后是<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>组件，负责呈现默认的文章项目(一个文本区域)或一些自定义项目(比如一个图像或代码块)。我在<code class="fe ll lm ln lo b">src/components/Item/index.jsx</code>中创建了它，它看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/ab009b5503b7fc61a75554bb72549395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*g-67x7wR8VylDX_mymTleQ.png"/></div></figure><p id="a96c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每当<code class="fe ll lm ln lo b">type</code>为假时，组件使用一些条件逻辑来呈现默认元素(a <code class="fe ll lm ln lo b">textarea</code>)。如果它是真实的，它会呈现一些其他元素。我稍后会定义这些。</p><p id="161e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成这些工作后，我向<code class="fe ll lm ln lo b">&lt;App /&gt;</code>导入并添加了<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>组件(并向页面添加了一些填充)。有了<code class="fe ll lm ln lo b">items</code>数组中的初始元素，我得到了这样一个页面:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/5e5d0b5ad5d0a7de78757ebf37623878.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*iwHj16qU2Hbt3MXGCheBOQ.png"/></div></figure><p id="54f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哇哦。装运它。</p><p id="d647" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">对项目组件进行样式化</em></p><p id="7334" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就在那时，我决定与魔鬼共舞，做一些css，这是一个荒谬的决定，因为你甚至不能输入东西。但是嘿嗬。一个<code class="fe ll lm ln lo b">textarea</code>值得自己皮好。</p><p id="abd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你以前从未使用过<code class="fe ll lm ln lo b">styled-components</code>，这相当容易。我在与<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>组件相同的文件夹中创建了一个<code class="fe ll lm ln lo b">style.js</code>文件。代码看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/b7a63785327b9ac67c1bbca607ac7075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*CgmTqsQTcr2H5HP7MtAQaw.png"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">this is probably all wrong</figcaption></figure><p id="6a8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对<code class="fe ll lm ln lo b">styled.div</code>的调用像其他组件一样返回一个React组件。该组件的所有子组件都应用了这些样式。我把它导入到<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>里，用它替换了顶层的div。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/29903a14c2008189f91f5404d06f6e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*ZAKZLsEu_kbH2_XCajzkJg.png"/></div></figure><p id="6272" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成了。我的文本框看起来很性感，而且已经着火了。(Btw，我说的性感是指完全隐形。如果你仔细想想，这是相当令人心酸的，因为情人眼里出西施，因此不设定武断的标准是很重要的。谢了。)</p><p id="ffdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">聚焦文本框</em></p><p id="9f7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，我最不想做的事情就是让<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中的<code class="fe ll lm ln lo b">textarea</code>专注于创建，也就是说，插入符号会出现在框中，而无需手动点击它。那也让我有机会试试<code class="fe ll lm ln lo b">useRef</code> &amp; <code class="fe ll lm ln lo b"> useEffect</code>钩子。做了那件事之后，<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>看起来是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/3e1ead2c22268ffc21bc8770b56cfe72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*Qeykqws3vI3WL4wcxf_MiQ.png"/></div></figure><p id="c827" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新的东西在生产线上<code class="fe ll lm ln lo b">5</code>、<code class="fe ll lm ln lo b">7-9</code>、&amp;、<code class="fe ll lm ln lo b">15</code>。</p><ul class=""><li id="e6e3" class="kx ky iq jp b jq jr ju jv jy kz kc la kg lb kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">5</code>创建了初始ref。Refs提供了特定DOM元素的句柄，以便您可以对它们执行操作。</li><li id="dc75" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">7–9</code>告诉浏览器立即聚焦textarea。</li><li id="e5b2" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><code class="fe ll lm ln lo b">15</code>将textarea附加到该ref，从而可以访问DOM中的元素。</li></ul><p id="eea2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">添加和更新项目</strong></p><p id="df1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在那个时候，<code class="fe ll lm ln lo b">textarea</code>实际上并没有工作。您不能在其中输入，因为没有办法更新传递给它的<code class="fe ll lm ln lo b">value</code>属性。我也没有办法在页面上添加新的条目。因此，我需要两个函数:一个向<code class="fe ll lm ln lo b">items</code>状态字段添加新项，一个更新特定项的内容。我把它们都放在了<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>里。这是他们的样子:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi md"><img src="../Images/56dffcb018465747e07e678ad8c04076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RTIsLAN3rPhUIp6eQ37Fw.png"/></div></div></figure><p id="db16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">第1–3行</em></p><p id="5911" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是<code class="fe ll lm ln lo b">addItem</code>函数，负责在页面上粘贴一个新的项目。它接收新项目的类型和内容，并将它们都添加到state中。</p><p id="6f8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对<code class="fe ll lm ln lo b">setItems</code>的调用使用更新状态的回调方法，因此它总是使用最新的版本。然后<a class="ae me" href="https://til.hashrocket.com/posts/gpdlaxubjz-array-concatenation-with-the-spread-operator" rel="noopener ugc nofollow" target="_blank">使用数组展开语法</a>向<code class="fe ll lm ln lo b">items</code>添加一个新的项，并返回新的数组，该数组成为新的状态。</p><p id="8acf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">第5–12行</em></p><p id="597c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是<code class="fe ll lm ln lo b">updateItem</code>函数，再次使用更新状态的回调方法。它接收要更新的项目的id和新内容。</p><p id="ead3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第<code class="fe ll lm ln lo b">7</code>行，它通过使用所提供的id检索其索引来获得正确的项目。</p><p id="5929" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第<code class="fe ll lm ln lo b">8</code>行，它使用数组展开语法以<em class="lv">不可变的</em>方式创建旧状态的副本。</p><p id="2406" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第<code class="fe ll lm ln lo b">9</code>行，它使用索引更新特定条目的内容。</p><p id="3d5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，在第<code class="fe ll lm ln lo b">10</code>行，它返回新的数组，该数组成为状态。</p><p id="fc34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让项目自我更新</strong></p><p id="5122" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ll lm ln lo b">updateItem</code>函数可用的情况下，我将它传递给了<code class="fe ll lm ln lo b">&lt;Item /&gt; </code>组件，这样就可以使用它了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/a7b1fc500b9d4ea5de0a3a2a4ab53115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZubO3ygicTrzTJp3Rmnzg.png"/></div></div></figure><p id="63a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>组件中，我把它连接起来。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/ec1f0629aee630ef6da06118ae535da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFz1jAXZUqfsOvGlLxK4mQ.png"/></div></div></figure><p id="5eac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的新东西是在传入的道具中添加了<code class="fe ll lm ln lo b">updateItem</code>，并设置了<code class="fe ll lm ln lo b">textarea</code>元素的<code class="fe ll lm ln lo b">onChange</code>道具。</p><p id="f86e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，我试着输入<code class="fe ll lm ln lo b">textarea</code>，结果成功了！太棒了。</p><p id="ddc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建新的文本区域</strong></p><p id="2904" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Medium上写文章时，按回车键会把你带到一个新的文本部分。我也想这样做，因为媒体不应该得到所有的乐趣。</p><p id="847d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最简单的方法是在textarea触发<code class="fe ll lm ln lo b">onKeyPress</code>事件时创建一个新项目。我将获取它，检查键是否是<code class="fe ll lm ln lo b">Enter</code>，如果是，则创建一个新的<code class="fe ll lm ln lo b">item</code>。</p><p id="910e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我先在<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>里加了一个<code class="fe ll lm ln lo b">handleKeyPress</code>函数，传给了<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mh"><img src="../Images/a621384af7b99c32f25afd99e93f258c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*37YAQam3kFLO5DOAO8vFUA.png"/></div></div></figure><p id="81ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在这里将<code class="fe ll lm ln lo b">null</code>作为类型传递，因为它是一个falsy值，因此将导致呈现一个<code class="fe ll lm ln lo b">textarea</code>，因为<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中有条件语句。</p><p id="79d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我将<code class="fe ll lm ln lo b">handleKeyPress</code>添加到<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>的道具列表中，并通过<code class="fe ll lm ln lo b">onKeyPress</code>事件将其传递给<code class="fe ll lm ln lo b">textarea</code>元素。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mi"><img src="../Images/8f9706474cbe0a31325c935ade8e3b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cvzdddlpkn19BviLFFK7qA.png"/></div></div></figure><p id="d225" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在那之后，我可以整天创造<code class="fe ll lm ln lo b">textareas</code>。我做到了。咿呀。</p><p id="b5e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">图片</strong></p><p id="04a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我决定开发一个单独的定制组件:图片。此时，每个条目的<code class="fe ll lm ln lo b">content</code>属性只有文本，因为<code class="fe ll lm ln lo b">textareas</code>只需要文本。但理论上，它可能是任何东西。所以，对于图像，我决定看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/94f29423054e5fcd603a79e3fb4f9f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*ZDM-Vn9fkpkjUBpfXrVO5A.png"/></div></figure><p id="50fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用这些知识，我在<code class="fe ll lm ln lo b"> src/components/Image/index.jsx</code>创建了<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>组件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/ffb75f24065bef04442509078fa85fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*zBBpD7FUoxA7aQAP43ok4w.png"/></div></figure><p id="472e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是我还不能渲染它。这是下一步。</p><p id="9c75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">组件映射</strong></p><p id="2b63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，<Item/>组件只能呈现<code class="fe ll lm ln lo b">textareas</code>或<code class="fe ll lm ln lo b">&lt;p&gt;</code>标签。为了呈现自定义组件，我必须想办法将它们映射到特定的类型。映射表似乎很好。在<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中，在组件体之外，我写道:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/d35c5214243de1d80a14faf90673a31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*js4_PEoqf4bT76jXIdEyeQ.png"/></div></figure><p id="0cf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我把<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中的<code class="fe ll lm ln lo b">&lt;p&gt;</code>标签替换成你在下面看到的高亮显示的内容:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/6add21cd5f73c0568c7480dc46531c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2xBtfjIa-UrX_GhAH3n2A.png"/></div></div></figure><p id="8bc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，如果type不是falsy，条件将不会返回一个<code class="fe ll lm ln lo b">textarea</code>，而是从映射表中检索正确的组件。当然，如果你给它传递了一个不存在的类型，整个事情就会变得一团糟。但是没有一点危险的生活是什么？</p><p id="c98a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">工具栏</strong></p><p id="29d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我知道我上面说了“最后”，但这是一个血口喷人的谎言。我仍然必须为用户创建一些方法来选择将哪个新项目添加到帖子中。嗯，或者造型，但是因为造型就像慢性胀气一样令人愉快，我决定创造<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>。</p><p id="e1e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我从<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中导出了<code class="fe ll lm ln lo b">componentMappings</code>对象，这样我就可以用它来动态生成工具栏，也就是说<code class="fe ll lm ln lo b">componentMappings</code>中的每个键都会产生自己的按钮。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/9ddcb6c19437ccc73be3dfa7b71a11aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fT9DbK1sOdivvDLPGWrYjQ.png"/></div></div></figure><p id="0834" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，在<code class="fe ll lm ln lo b">src/components/Toolbar/index.jsx</code>中，我创建了<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>组件本身。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/c67c462a8ce17994e38476088a31ffea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioivTWWmbbFb0CfVBj-HDQ.png"/></div></div></figure><p id="aaff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>循环遍历<code class="fe ll lm ln lo b">componentMappings</code>中的每个键，并为其创建一个按钮。使用将从<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>传递的<code class="fe ll lm ln lo b">addItem</code>函数，它附加一个<code class="fe ll lm ln lo b">onClick</code>事件并添加一个新项目，传递将成为组件的<code class="fe ll lm ln lo b">type</code>的键和一个用于<code class="fe ll lm ln lo b">content</code>的空对象。我把<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>加到了<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>的底部，并把<code class="fe ll lm ln lo b">addItem</code>传递给了它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mp"><img src="../Images/ae048876a528644c37056b3ae02f1d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JTbXHFHJEgeec1Xa9IkuIA.png"/></div></div></figure><p id="1242" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，我开始意识到一些问题。</p><p id="9e56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，试图创建一个图像会破坏应用程序。这是因为在<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中使用的ref仅在<code class="fe ll lm ln lo b">textarea</code>被渲染时存在。因为我是作为定制组件而不是<code class="fe ll lm ln lo b">textarea</code>呈现的，所以ref没有被定义，因此试图在它上面调用<code class="fe ll lm ln lo b">focus</code>会抛出一个错误。</p><p id="3f63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不过，这很容易解决。在<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中，我把<code class="fe ll lm ln lo b">useEffect</code>钩子改成了这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/50fd35004784d91c6f50a29eb584cfaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*MWxPSDz_bFgEmOsMB86LWg.png"/></div></figure><p id="ce5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问题解决了。</p><p id="af2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是还有第二个问题。我如何为图片获取<code class="fe ll lm ln lo b">src</code> &amp; <code class="fe ll lm ln lo b">alt</code>属性？我不知道这些关于创造的价值观。用户没有办法在点击工具栏上的<code class="fe ll lm ln lo b">image</code>按钮时提供它们。</p><p id="10f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个有点棘手。最后，我决定创建新的组件来提供定制项目需要的每个属性。我制作了一个<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>组件，如果<code class="fe ll lm ln lo b">src</code>和<code class="fe ll lm ln lo b">alt</code>属性丢失或错误，我就在<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>中渲染它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mq"><img src="../Images/4d9041129efb02f8f9e0a9647a66d144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6dph6VTvdF3Tn1FkpNEuQ.png"/></div></div></figure><p id="b237" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一切都很简单。<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>提供了两个简单的输入和一个按钮，用于设置<code class="fe ll lm ln lo b">src</code>和<code class="fe ll lm ln lo b">alt</code>属性。它将使用一个尚未提供的<code class="fe ll lm ln lo b">updateItem</code>函数，将这些值传递回<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>中的<code class="fe ll lm ln lo b">items</code>数组。如果<code class="fe ll lm ln lo b">src</code>或<code class="fe ll lm ln lo b">alt</code>为假，则<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>会渲染<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>。</p><p id="6606" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我不确定这是否是解决问题的最佳方式，但它确实有一个不错的副作用。编辑组件可以多次使用。如果用户以后想更改<code class="fe ll lm ln lo b">alt</code>和<code class="fe ll lm ln lo b">src</code>属性，添加这种组件会使事情变得容易得多。所以我决定坚持下去。</p><p id="2aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>需要访问<code class="fe ll lm ln lo b">updateItem</code>函数，所以我把它添加到了<code class="fe ll lm ln lo b">&lt;Item /&gt;</code>中的<code class="fe ll lm ln lo b">componentMappings</code>对象中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/7ac1a25f28565263e1e21025a6115daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vf38fBKUrq4uYJFWPIdbyg.png"/></div></div></figure><p id="5479" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并更新了<code class="fe ll lm ln lo b">componentMappings</code>函数调用传递参数:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ms"><img src="../Images/e3b1641eb96e58d03544007c39eabe3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9dEV1g-3RFuaeT1wT4MHdg.png"/></div></div></figure><p id="1a2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后添加到道具列表和<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>中的<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code> jsx:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mt"><img src="../Images/9890f43aea637affcf643c0000801cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69Q6y1Ctdr-hGNZMCMmD0g.png"/></div></div></figure><p id="3171" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，更新了<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>中的<code class="fe ll lm ln lo b">updateImageProperties</code>功能:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/00874f8ca750ca09d9bbcdf3f27e0f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*mwU-gTNFm55OTT8JHA3jkg.png"/></div></figure><p id="ddac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成所有这些后，我只剩下这个:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/3d16b822598cb471ea50d2c6d2ee10d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXXSTdtNbRe9qlHd7K3LCA.png"/></div></div></figure><p id="85d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我点击<code class="fe ll lm ln lo b">img</code>按钮时:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mw"><img src="../Images/8ca829d5b6c13ab3635947da268f8a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RuZWQnEfapgS7BCeS0i76A.png"/></div></div></figure><p id="30df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，当我添加了一个<code class="fe ll lm ln lo b">src</code>和<code class="fe ll lm ln lo b">alt</code>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mx"><img src="../Images/03a470f41db646fcedd87c386f8180d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*20WkWGSyRCcl9jlu7WMVsQ.png"/></div></div></figure><p id="8005" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好，谷歌？是的。雇用我。</p><p id="b7a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">造型</strong></p><p id="409f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后要做的就是造型。这一节实际上并没有给应用程序的功能增加任何东西，所以如果您一直在学习的话，可以完全跳过这一节。但是，如果你很古怪，有麻烦，并且喜欢css，那么继续读下去，士兵。</p><p id="6b62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">页边距&amp;标题</em></p><p id="97d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Medium中，文章的正文在屏幕上居中，两边各有一个边距。我是通过在<code class="fe ll lm ln lo b">src/</code>文件夹的根目录下创建一个<code class="fe ll lm ln lo b">style.js</code>文件来添加的，这个文件夹导出了一个名为<code class="fe ll lm ln lo b">AppWrapper</code>的新样式组件。它有以下风格:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi my"><img src="../Images/066e8228d6132b31ad590e8232d472c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*QV9DXHIeqX_4__xUosrcaQ.png"/></div></figure><p id="7c12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我用在了<code class="fe ll lm ln lo b">&lt;App /&gt;</code>里，加了一个头:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/7fa3de949b5b939dc5bc72386ae2c8d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7r7sVMpN9SdAujFxix0sA.png"/></div></div></figure><p id="13fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页面看起来是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi na"><img src="../Images/58c14219ea87ed7cefefbb093a23d106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*os5u31SvDgYgmGbqgDg9fA.png"/></div></div></figure><p id="1e6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">工具栏样式</em></p><p id="8bdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在与<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>组件相同的文件夹中，我创建了一个<code class="fe ll lm ln lo b">style.js</code>文件，代码如下:bb</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/136f3a514d9aca5e0cb1ba65071e2175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*U8e1FabuzF1FK_gS1ZMSTw.png"/></div></figure><p id="4ef9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我加到了<code class="fe ll lm ln lo b">&lt;Toolbar /&gt;</code>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nc"><img src="../Images/b18e00ed23ed606053c5fd62dfa0f7c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*caz58243WwieOsySPdkQug.png"/></div></div></figure><p id="7d9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">留给我这个:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/8ae22edcc2e1cc1257a3f5ad18e6405f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OtZFcpvllF-gwdvBlq8WQ.png"/></div></div></figure><p id="b9e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">戈尔杰。</p><p id="1d74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lv">造型&lt;图像/ &gt;和&lt;编辑图像/ &gt; </em></p><p id="4131" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>是<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>的直接子元素，所以我会同时设计它们的样式。在与<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>同一个文件夹的<code class="fe ll lm ln lo b">style.js</code>文件中，我写下了这个怪物:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/71f00c3786d1d52bca4c66c83fb2b983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*VyidFBSPpaVoT46-IllB8Q.png"/></div></figure><p id="87b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我将包装器添加到<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>组件中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/1258f7d839a66f2f195ca19fbf2c3707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3OK5iAzZuaUW8tDNNEVaQ.png"/></div></div></figure><p id="8c16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并在<code class="fe ll lm ln lo b">&lt;EditImage /&gt;</code>的<code class="fe ll lm ln lo b">div</code>中增加了<code class="fe ll lm ln lo b">.create-img</code>类:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/ed686391f1ba96ec916e8b146330de49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TSC9T3VNAiz6tPjkb9IiTw.png"/></div></div></figure><p id="af97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我的页面看起来像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/eddb231b6112c82db3fcd63d33b5a431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*aWCYj9YFy_ODOQBso5Grhw.png"/></div></figure><p id="4a11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以。可爱。</p><p id="cb92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">额外步骤</strong></p><p id="2d15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你跟随这个，并且你喜欢它，那么也许你想要一些下一步做什么的想法。也许你不会，在这种情况下，请随时给我发电子邮件，让我知道。您可以:</p><ul class=""><li id="e184" class="kx ky iq jp b jq jr ju jv jy kz kc la kg lb kk lc ld le lf bi translated">添加更多定制组件，包括一个<code class="fe ll lm ln lo b">&lt;Video /&gt;</code>组件</li><li id="26f5" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated">使<code class="fe ll lm ln lo b">&lt;Image /&gt;</code>组件不那么笨拙(任何src和alt都将被接受，甚至是坏的，所以你可以验证，或者一个重新加载编辑组件的按钮)</li><li id="91c8" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated">添加按钮以移除项目</li></ul><p id="80d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">倒影</strong></p><p id="217a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在很大程度上，创建Post Builder非常简单，但有些事情我可能会在将来重新考虑。</p><ul class=""><li id="4528" class="kx ky iq jp b jq jr ju jv jy kz kc la kg lb kk lc ld le lf bi translated">映射表感觉有点弱。可能有更好的方法来做这些。</li><li id="26be" class="kx ky iq jp b jq lg ju lh jy li kc lj kg lk kk lc ld le lf bi translated"><EditImage/>组件是我没有预见到的问题的最后解决方案。我肯定有更合适的选择。</li></ul><p id="3fa7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在这里学到了很多。这可能不是最复杂的任务，但它允许我使用React的许多不同功能，并要求我思考如何使组件足够通用(我认为？很辛苦)。我也喜欢顶层的<code class="fe ll lm ln lo b">items</code>数据结构影响整个视图的方式，因此<code class="fe ll lm ln lo b">&lt;PostBuilder /&gt;</code>的大多数孩子相对来说比较笨。我喜欢愚蠢的事情，因为他们让<em class="lv">我</em>看起来更好。</p><p id="67a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Should I use map() or forEach() in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中应该用map()还是forEach()。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/should-i-use-map-or-foreach-in-javascript-af9da3b4adc3?source=collection_archive---------6-----------------------#2020-07-31">https://javascript.plainenglish.io/should-i-use-map-or-foreach-in-javascript-af9da3b4adc3?source=collection_archive---------6-----------------------#2020-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed32" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解何时使用哪种类型的数组方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0ffcb84f00d3e37590fecf1a298ebb63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*on0Z-okBBWmTaIz7"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@overlyawesome?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daniel Gonzalez</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ef5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我确信你在使用<strong class="ky ir"> JavaScript时可能遇到过<code class="fe ls lt lu lv b">map()</code>和<code class="fe ls lt lu lv b">forEach()</code>。</strong>如果你曾经使用过<strong class="ky ir">数组</strong>，但是我有一些关于这两个函数的新细节，我们可能会忽略掉，让我们试着在这篇文章的帮助下复习一下基础知识。</p><h1 id="91cf" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">forEach()的功能</h1><p id="7136" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">理解<code class="fe ls lt lu lv b">forEach()</code>的工作很简单，它是一个定义在<code class="fe ls lt lu lv b"><a class="ae kv" href="https://developer.mozilla.org/tr/docs/Web/JavaScript/Reference/Global_Objects/Array/prototype" rel="noopener ugc nofollow" target="_blank">array.prototype</a></code>上的函数，因此适用于所有的JavaScript数组。</p><p id="9e36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">对于每个</strong>，这是一个我们可以在任何<strong class="ky ir">数组对象上调用的函数。</strong>它接受另一个函数作为输入。当forEach被调用为数组时，JavaScript逐个获取数组项，并为每个数组项调用该函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/8fd974fa08455a1fb811fcbef11118b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wWqBJoG1E66Hb33fXn_Iuw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Functionality of ForEach Function.</figcaption></figure><p id="1764" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们大多数人都没有注意到这一点，虽然JavaScript在调用每个项的函数时也传递了那个数组项的<strong class="ky ir">索引</strong>和<strong class="ky ir">原始数组</strong>，但大多数时候我们只对该项的<strong class="ky ir">值</strong>感兴趣。该函数对每一项都执行，然后将最终的未定义写给调用者，这就是全部。</p><p id="ce2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我们试图调用<strong class="ky ir">的forEach函数</strong>并且我们传递给它一个logArray函数，这个logArray函数除了<code class="fe ls lt lu lv b">Console.log</code>的每个数组元素的值之外什么也不做，因为它利用了传递给它的元素和索引值。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3738" class="my lx iq lv b gy mz na l nb nc">newArr = [2,3,4,7].forEach(logArray){<br/>console.log('array[' + index + '] = ' + element);<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a181ff2410c2e2340ffd682f03e2549a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YQEgiau3qU5ainxG5hn_Lg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result of Example, Step By Step.</figcaption></figure><p id="4c31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，当<strong class="ky ir"> forEach循环</strong>完成运行时，<strong class="ky ir"> newArr </strong>变量将获得未定义的值<strong class="ky ir">，因为这就是<strong class="ky ir"> ForEach每次运行时返回的值</strong>。</strong></p><h1 id="14c9" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">ForEach():要记住的事情！</h1><p id="866f" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">在处理forEach循环时，我们需要记住以下几点。</p><ul class=""><li id="8953" class="ne nf iq ky b kz la lc ld lf ng lj nh ln ni lr nj nk nl nm bi translated">第一件事是，默认情况下，如果我们试图查看传递给forEach的函数内部的<code class="fe ls lt lu lv b">this</code>变量指向什么，它总是<strong class="ky ir">未定义</strong>。如果我们想让<code class="fe ls lt lu lv b">this</code>变量指向其他值，我们可以将它作为函数后的第二个参数传递。</li><li id="2e75" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">第二件事是，循环的范围是在第一次迭代<strong class="ky ir"> forEach </strong>之前决定的，所以在第一次迭代之后向数组添加任何新元素并不意味着它将为新添加的元素运行。</li><li id="2940" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">第三，如果某个特定索引的数组项被删除，forEach会跳过该索引的函数执行，这与普通的for循环不同，for循环会对所有索引执行该函数。</li></ul><p id="2b0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而且不管我们从函数内部返回什么，<strong class="ky ir"> <em class="ns"> forEach总是返回一个未定义的给调用者。</em> </strong></p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="3354" class="lw lx iq bd ly lz oa mb mc md ob mf mg jw oc jx mi jz od ka mk kc oe kd mm mn bi translated">地图的功能()</h1><p id="ddef" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">与<code class="fe ls lt lu lv b"><strong class="ky ir">forEach</strong></code>类似的<code class="fe ls lt lu lv b">map()</code>功能也存在于<code class="fe ls lt lu lv b">array.prototype</code>上。</p><p id="fad9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将一个函数传递给<strong class="ky ir"> Map </strong>，然后将为数组中的每一项调用该函数。<strong class="ky ir">项</strong>、<strong class="ky ir">索引、</strong>和<strong class="ky ir">原始数组</strong>将在每次调用时传递给函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/079b3bd1fe58a5f1d9aabc56b8f06e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*owLHP8J46TXFTxuv"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@sushobhan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sushobhan Badhai</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b36d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">唯一的区别是<strong class="ky ir"> <em class="ns"> Map返回给我们一个新的数组</em> </strong>，它由数组中每个项的函数执行结果所返回的值组成。</p><p id="f6bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用这个例子来了解一下<strong class="ky ir">地图功能</strong>，</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3b0e" class="my lx iq lv b gy mz na l nb nc">let oldArray= [2, 3, 4, 7]</span><span id="64df" class="my lx iq lv b gy og na l nb nc">const newArray = oldArray.map(double);</span><span id="2968" class="my lx iq lv b gy og na l nb nc">// pass a function to map<br/>function double(element, index, array){<br/>console.log('array[' + index + ']=' + element*2);<br/>return element*2;<br/>}<br/>console.log(oldArray)//[2, 3, 4, 7]<br/>console.log(newArray)//[4, 6, 8, 14]</span></pre><p id="1981" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们在这个数字数组上调用它，并向它传递一个double函数，作为对每个数组项执行该函数的结果，我们得到的输出与<strong class="ky ir"> forEach </strong>非常相似，但最后，我们还会返回一个<strong class="ky ir">新数组</strong>，它由该函数每次迭代返回的值组成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/f307f096e8fe1f77e9f445c251bf0f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oEIb8PbLvjEFfNkRhnIMOg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Map Function Example</figcaption></figure><p id="88f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，我们每次都从函数中返回元素的double值，因此，新数组由相应数组项的double值组成。</p><h1 id="8b11" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">Map():要记住的事情！</h1><ul class=""><li id="d53e" class="ne nf iq ky b kz mo lc mp lf oi lj oj ln ok lr nj nk nl nm bi translated">Map的行为在几个方面类似于<strong class="ky ir"> forEach </strong>，即<code class="fe ls lt lu lv b">this </code>上下文变量的传递与forEach非常相似。<code class="fe ls lt lu lv b">arr.forEach(function, thisArgument)</code></li><li id="8d84" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">甚至，执行范围是在第一次迭代之前确定的，就像在第一次迭代之前范围是固定的一样。</li><li id="882d" class="ne nf iq ky b kz nn lc no lf np lj nq ln nr lr nj nk nl nm bi translated">主要的区别是我们返回一个项目数组给调用者。请注意，如果没有返回任何内容，<em class="ns"> undefined将被添加到新数组中。</em></li></ul><p id="6e34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外，<em class="ns">每次都返回一个新数组，</em>不像forEach总是返回未定义的。</p><h1 id="9ed5" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">最后</h1><p id="8c3b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">这是对我们在<strong class="ky ir"> JavaScript编程</strong>中日常使用的<code class="fe ls lt lu lv b"> map</code>和<code class="fe ls lt lu lv b">forEach</code>概念的快速回顾。理解这些在核心水平上是如何运作的，对于预测它们在异常情况下的行为是很重要的。</p><p id="ee28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，以这段代码为例。如果您已经正确理解了本文中的概念，请告诉我们，newArr的价值是什么？这段代码执行后。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="a9a1" class="my lx iq lv b gy mz na l nb nc">let oldArray= [1,2,3,4,5,6]<br/>let newArray = oldArray.map(doubleEven);</span><span id="6c11" class="my lx iq lv b gy og na l nb nc">// pass a function to map<br/>function doubleEven(element, index, array){<br/>if(element%2 === 0)<br/>return element*2;<br/>}</span></pre><p id="3c62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是个棘手的问题——试一试。如果你觉得这篇文章很有帮助，请看看我的另一篇文章，并在评论部分为我们未来的文章提出更多的主题，我很高兴收到你的来信。继续学习，继续编码！👩‍💻</p><div class="ol om gp gr on oo"><a href="https://medium.com/javascript-in-plain-english/hectic-javascript-interviews-questions-8fdf7ddd0e53" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">忙乱的JavaScript面试问题！</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">JavaScript是异步的还是同步的？JavaScript是如何工作的？</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kp oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://medium.com/illumination/react-vs-angular-what-should-i-choose-10ef98613d06" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">反应vs角度？我应该选择什么？</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">React与Angular的比较仍然是一个热门话题，我敢肯定你一直在学习JavaScript</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc kp oo"/></div></div></a></div><h2 id="9f49" class="my lx iq bd ly pe pf dn mc pg ph dp mg lf pi pj mi lj pk pl mk ln pm pn mm po bi translated">简单英语的JavaScript</h2><p id="e7ee" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="ky ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>3D with Svelte and Three.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带苗条和Three.js的3D</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3d-with-svelte-and-three-js-f4366f342f9f?source=collection_archive---------1-----------------------#2020-12-11">https://javascript.plainenglish.io/3d-with-svelte-and-three-js-f4366f342f9f?source=collection_archive---------1-----------------------#2020-12-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/75fed0e7d1af4a9483268027e8fbb618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OhkYMKUbIXkAHhcG7yFLJg.gif"/></div></div></figure><p id="6ec9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="kt">更新:自本文发布以来，GitHub中的示例已经更新为利用SvelteKit。</em> </strong></p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="84b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">更新一些演示应用程序时，我希望构建一些快速而精简的东西——比React更少的样板文件以增加示例的清晰度，但具有实时重新加载、包管理和捆绑的功能。</p><p id="516d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我对尝试<a class="ae lb" href="https://svelte.dev/" rel="noopener ugc nofollow" target="_blank">苗条</a>很感兴趣，对环境和工具链的简单和清洁感到惊讶。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lc"><img src="../Images/b5b1acec9b98c3a0b0fcdd85355b5df1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gr3kgm0McAm1eeJJog7jfg.png"/></div></div></figure><p id="b23f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里有一个结合了<a class="ae lb" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank"> Three.js </a>来构建3D WebGL应用的例子。</p><p id="c622" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">跟随，或者<a class="ae lb" href="https://github.com/jasonsturges/threejs-svelte-boilerplate" rel="noopener ugc nofollow" target="_blank">在GitHub查看库</a>。</p><h1 id="9cad" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">创建解决方案</h1><p id="a404" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">首先，通过在终端中执行以下命令，使用<code class="fe mk ml mm mn b">npx degit</code>设置Svelte的模板来搭建项目:</p><pre class="ld le lf lg gt mo mn mp mq aw mr bi"><span id="44f5" class="ms li in mn b gy mt mu l mv mw">npx degit sveltejs/template svelte-app</span></pre><p id="82f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">继续添加<code class="fe mk ml mm mn b">three</code>包:</p><pre class="ld le lf lg gt mo mn mp mq aw mr bi"><span id="57d3" class="ms li in mn b gy mt mu l mv mw">npm add three</span></pre><p id="1104" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Npm会添加Three.js并自动安装包。</p><h2 id="0690" class="ms li in bd lj mx my dn ln mz na dp lr kg nb nc lv kk nd ne lz ko nf ng md nh bi translated">App.svelte</h2><p id="17f5" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">在<code class="fe mk ml mm mn b">App.svelte</code>中创建一个<code class="fe mk ml mm mn b">canvas</code>元素，用Svelte的<a class="ae lb" href="https://svelte.dev/tutorial/bind-this" rel="noopener ugc nofollow" target="_blank">绑定</a>链接DOM元素传入<code class="fe mk ml mm mn b">createScene()</code>函数。</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">App.svelte</figcaption></figure><p id="234f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然Three.js可以自动创建和附加自己的DOM元素，但是看到Svelte如何传递声明性语法范围内的元素还是很酷的。</p><p id="0d9e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">需要注意的是，这需要Svelte的<code class="fe mk ml mm mn b">onMount()</code>的<a class="ae lb" href="https://svelte.dev/tutorial/onmount" rel="noopener ugc nofollow" target="_blank">生命周期</a>方法，该方法在组件首次呈现到DOM后运行。</p><h2 id="72c1" class="ms li in bd lj mx my dn ln mz na dp lr kg nb nc lv kk nd ne lz ko nf ng md nh bi translated">scene.js</h2><p id="b6e2" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">创建一个名为<code class="fe mk ml mm mn b">scene.js</code>的新文件——我们将从创建场景<a class="ae lb" href="https://threejs.org/docs/#manual/en/introduction/Creating-a-scene" rel="noopener ugc nofollow" target="_blank">的Three.js文档中放入示例代码</a>,并对其进行一些小的修改，以解决调整浏览器窗口大小的问题:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">scene.js</figcaption></figure><p id="0710" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码中，<code class="fe mk ml mm mn b">renderer</code>使用了<code class="fe mk ml mm mn b">scene</code>和<code class="fe mk ml mm mn b">camera</code>来更新每一帧的画布元素。<code class="fe mk ml mm mn b">animate()</code>函数通过从浏览器的下一次重画请求一个动画帧来执行Three.js渲染。</p><p id="f0eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个场景中，添加了一个由<code class="fe mk ml mm mn b">geometry</code>定义的<code class="fe mk ml mm mn b">cube</code>网格，并使用一个<code class="fe mk ml mm mn b">material</code>给网格一个外观。</p><p id="68e1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了调整浏览器窗口的大小，添加了一个<code class="fe mk ml mm mn b">resize</code>事件监听器来更新摄像头并调整页面上canvas元素的大小。</p><h2 id="5142" class="ms li in bd lj mx my dn ln mz na dp lr kg nb nc lv kk nd ne lz ko nf ng md nh bi translated">global.css</h2><p id="431c" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">最后，为了视觉外观，更新<code class="fe mk ml mm mn b">global.css</code>来填充屏幕:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="d729" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">发射它</h1><p id="b182" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">从终端执行<code class="fe mk ml mm mn b">npm run dev</code>启动Svelte的live reload with Rollup，打开<a class="ae lb" href="http://localhost:5000" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000 </a>查看结果。</p><p id="4fd2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我的下一篇文章中，我将展示一个使用Babylon.js引擎的替代版本。</p></div></div>    
</body>
</html>
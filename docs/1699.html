<html>
<head>
<title>Why You Should Stop Using Objects With SetState()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该停止使用SetState()对象</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-stop-using-objects-with-setstate-ee7a6c7bcba3?source=collection_archive---------2-----------------------#2020-04-15">https://javascript.plainenglish.io/why-you-should-stop-using-objects-with-setstate-ee7a6c7bcba3?source=collection_archive---------2-----------------------#2020-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="853a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用专业的方式代替</h2></div><p id="e005" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你熟悉<a class="ae lb" href="https://it.reactjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">反应</strong> </a>，那么你几乎不可能没用过这种方法:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/b3ea0ef83fcd8489cf385bdd77e71865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKYGyaOmHpTex8opkefWfA.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">One of your best friends when using React.</figcaption></figure><p id="f8e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">组件</strong>是React库的<strong class="kh ir">基础</strong>。它们是<strong class="kh ir">可重用的代码片段</strong>，我们创建并管理它们来构建我们的<strong class="kh ir"> UI </strong>。它们中的一些可以具有<strong class="kh ir">状态</strong>。</p><p id="5b89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">状态和<strong class="kh ir">道具</strong>是React应用程序的重要组成部分。我们用它来存储本地数据。或者在道具的情况下，用于<strong class="kh ir">从其他组件接收数据。</strong></p><blockquote class="ls lt lu"><p id="9be6" class="kf kg lv kh b ki kj jr kk kl km ju kn lw kp kq kr lx kt ku kv ly kx ky kz la ij bi translated">而且，每当我们希望我们的应用程序改变它的行为或外观时，state是一个好去处，setState()是一个好方法。</p></blockquote><p id="3208" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是有一点你们中的一些人可能从未想过。</p><h2 id="c206" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">当前价值问题</h2><p id="df46" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">通常，我们只是通过传递一个对象来使用这个方法，这个对象带有我们提供给它的新状态值<strong class="kh ir">，</strong>，如上所示。但是通常我们可能希望<strong class="kh ir">使用当前状态</strong>计算下一个状态，例如在更新计数器时。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mx"><img src="../Images/bdea9eaf2dfe6820aadc64d2d8859c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DXHEl1OrGKOmedfuKDRow.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Your best friend can sometimes betray you.</figcaption></figure><p id="6a99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以说这没什么不对。如果我们谈论<strong class="kh ir">一个非常小的应用</strong>，我甚至可能同意你的观点。但是在这个职业中，大多数情况下:</p><blockquote class="ls lt lu"><p id="1b82" class="kf kg lv kh b ki kj jr kk kl km ju kn lw kp kq kr lx kt ku kv ly kx ky kz la ij bi translated"><strong class="kh ir">“你在小范围内认为好的东西，在大范围的环境下，很可能就要在你脸上爆炸了。”</strong>——我失意的自己。</p></blockquote><p id="8591" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里真正的问题是，你<strong class="kh ir">永远不应该依赖</strong>依靠<code class="fe my mz na nb b">this.props</code>和<code class="fe my mz na nb b">this.state</code>来计算你的下一个状态。因为它们可以异步更新<strong class="kh ir">。</strong></p><p id="16c2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当你使用这个方法时，对DOM <strong class="kh ir">的更新不会马上发生。所以在一个<strong class="kh ir">非常大的应用</strong>中，可能会发生对<code class="fe my mz na nb b">this.setState()</code>的多次调用，我们应该避免像上面那样依赖<code class="fe my mz na nb b">this.state</code>。</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nc"><img src="../Images/a5be5263114ccc31d778a5c2d5209d0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6w_QueYCyGS0HBs7GMG64Q.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">What to do then?</figcaption></figure><h2 id="8a49" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated"><strong class="ak">你的新好友是一个函数</strong></h2><p id="6855" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">React已经思考了这个问题，并且为我们提供了一个<strong class="kh ir">更好的方法来处理这个问题</strong>。所以停止使用一个对象，取而代之的是，向<code class="fe my mz na nb b">this.setState()</code>提供一个函数作为第一个参数，然后<strong class="kh ir">可靠地</strong>得到我们需要的当前状态位的值。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nd"><img src="../Images/dc48bf32ee6c3e7aa8ea40fca81a890a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RE_1NSwOl4OT8NFKDRls-Q.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">I love functions.</figcaption></figure><p id="e6db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以从现在开始，你可以把这种行为设定为新的规则。</p><blockquote class="ls lt lu"><p id="0929" class="kf kg lv kh b ki kj jr kk kl km ju kn lw kp kq kr lx kt ku kv ly kx ky kz la ij bi translated"><strong class="kh ir">每当您需要使用当前状态或道具来计算下一个状态时，提供一个函数作为第一个参数给</strong> <code class="fe my mz na nb b"><strong class="kh ir">this.setState()</strong></code> <strong class="kh ir">是一种很好的方法。</strong></p></blockquote><p id="2abe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于其他React提示和技巧，敬请期待</p><p id="3555" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">—皮耶罗</p><h2 id="c68f" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="4d97" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到<a class="ae lb" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">submissions@javascriptinplainenglish.com</strong></a>给我们，我们会把你添加为作者。</p><p id="9138" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还推出了三种新的出版物！请关注我们的新出版物，表达对它们的喜爱:<a class="ae lb" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kh ir">AI in Plain English</strong></a>，<a class="ae lb" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kh ir">UX in Plain English</strong></a>，<a class="ae lb" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kh ir">Python in Plain English</strong></a><strong class="kh ir"/>——谢谢，继续学习！</p></div></div>    
</body>
</html>
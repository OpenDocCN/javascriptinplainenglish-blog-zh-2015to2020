<html>
<head>
<title>Can JavaScript Arrays Contain Different Types?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript数组可以包含不同的类型吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/can-javascript-arrays-contain-different-types-e34a4939befc?source=collection_archive---------0-----------------------#2020-12-28">https://javascript.plainenglish.io/can-javascript-arrays-contain-different-types-e34a4939befc?source=collection_archive---------0-----------------------#2020-12-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fef2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript数组可以同时包含任何和所有类型的数据，这既奇妙又可怕。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/00473a3d35052956e37a874475739a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxYFyKaE3mrykaVyNToj6A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@gmalhotra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Gayatri Malhotra</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6239" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">JavaScript数组可以包含不同的类型</h1><p id="0047" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">永远有用的<a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-an-array-in-javascript-6ad20f7a0e21" rel="noopener"> Javascript数组</a>是一个简单的条目列表，从索引<code class="fe mk ml mm mn b">0</code>开始，一直到索引<code class="fe mk ml mm mn b">array.length - 1</code>:数组中的条目数(其<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/length" rel="noopener ugc nofollow" target="_blank">length</a></code>)减1。</p><p id="e60f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">使用数组时，尤其是对于来自其他编程语言的程序员来说，一个常见的问题是JavaScript数组是否可以包含多种类型。</p><p id="5082" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">大多数编程语言都有严格的类型，这意味着在声明数组变量时，需要定义数组的类型。JavaScript是一种松散类型的语言，这意味着任何变量都可以包含任何类型的数据:字符串可以用数字替换，反之亦然。</p><p id="2ae5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">换句话说:当使用JavaScript数组时，你需要执行类型检查吗？<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/better-programming/how-to-check-data-types-in-javascript-using-typeof-424d0520a329" rel="noopener">typeof</a></code>在这里有用吗？</p><p id="245c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">JavaScript数组确实可以包含任何和所有类型的数据。一个数组可以包含其他对象(包括其他数组)以及任意数量的原始值，如<a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-string-in-javascript-a16b196915ff" rel="noopener">字符串</a>、<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">null</a></code>和<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/coding-at-dawn/how-to-check-for-undefined-in-javascript-bcedd62c8ad" rel="noopener">undefined</a></code>。</p><p id="6ca9" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">当您将一个对象放在另一个对象的内部时，这称为嵌套对象。嵌套数组需要特殊的处理，这取决于你是想对数组进行<a class="ae kv" href="https://levelup.gitconnected.com/how-to-copy-an-array-in-javascript-with-array-from-298c7e66eebc" rel="noopener ugc nofollow" target="_blank">浅拷贝</a>还是<a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-deep-copy-objects-and-arrays-in-javascript-7c911359b089" rel="noopener">深拷贝</a>。</p><p id="63f5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">JavaScript数组能够包含不同的类型意味着你可以做一些很酷的事情，比如将不同类型的数据嵌套在一起。缺点是，在任何给定的时间，不能保证您在数组内部处理的值的类型。</p><p id="bd9a" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">让我们来看一个代码示例，在这个示例中，我们循环遍历一组<code class="fe mk ml mm mn b">user</code>对象，每个对象都需要一个<code class="fe mk ml mm mn b">id</code>和一个<code class="fe mk ml mm mn b">name</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/5dba7f2342e93c9e1546097744a3047a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y0loNJWur43kKYrrNHefaw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/DoctorDerek/72de57c664bcc23981a5cb68591b65ad" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="c976" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">使用数字返回<code class="fe mk ml mm mn b">undefined</code>，因为属性<code class="fe mk ml mm mn b">id</code>和<code class="fe mk ml mm mn b">name</code>不存在(不像字符串上的<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/length" rel="noopener ugc nofollow" target="_blank">.length</a></code>)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/66cd657a5f5538824025277e968fd5c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-1CZ-hYditas2gLGkqwc7A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/DoctorDerek/72de57c664bcc23981a5cb68591b65ad" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="c7b7" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">使用<code class="fe mk ml mm mn b">null</code>值会产生<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" rel="noopener ugc nofollow" target="_blank">TypeError</a></code>，在这里用<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener ugc nofollow" target="_blank">try...catch</a></code>块捕获并记录到控制台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/f46ad108022aa8241975138f182a10a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XZXXGPUlWEPmjEmc0jSo3g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/DoctorDerek/72de57c664bcc23981a5cb68591b65ad" rel="noopener ugc nofollow" target="_blank">View raw code</a> as a GitHub Gist</figcaption></figure><p id="621a" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">因为JavaScript数组可以包含不同的类型，所以我们可以用任何其他类型替换数组中的任何元素。在代码示例中，我将对象换成了一个<a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-number-in-javascript-8d9024708153" rel="noopener">数字</a>原语，然后换成了值<code class="fe mk ml mm mn b">null</code>。</p><p id="2fb2" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这个数字产生了<code class="fe mk ml mm mn b">undefined</code>对象属性，但是<code class="fe mk ml mm mn b">null</code>产生了一个<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" rel="noopener ugc nofollow" target="_blank">TypeError</a></code>“null没有属性。”哎呦！</p><p id="2ebd" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">后来，我为一个对象添加了一个显式的<a class="ae kv" href="https://medium.com/p/3b2632330296/" rel="noopener">检查，这是我所期望的。在这样做的时候，我还必须检查<code class="fe mk ml mm mn b">null</code>，因为<code class="fe mk ml mm mn b">typeof null</code>是<code class="fe mk ml mm mn b">"object"</code>。这阻止了<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" rel="noopener ugc nofollow" target="_blank">TypeError</a></code>被抛出。</a></p><p id="b9e5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">另一种常见的语法是使用“<a class="ae kv" href="https://medium.com/p/7ee0e8dc8bc8/edit" rel="noopener">短路操作符</a>”<code class="fe mk ml mm mn b">&amp;&amp;</code>(逻辑AND)，它停止对任何<a class="ae kv" href="https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4" rel="noopener"> falsy值</a>的执行。换句话说，代码行的剩余部分在<code class="fe mk ml mm mn b">&amp;&amp;</code>之后不会被执行。必要时，您还可以使用<code class="fe mk ml mm mn b">&amp;&amp;</code>将多个类型检查串在一起。</p><p id="395e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">在这个例子中，请注意，我实际上没有键入check来确保我有某种类型的<code class="fe mk ml mm mn b">User</code>对象，只是任何对象。检查对象的类型需要类似于<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/p/c90dd3686bfa" rel="noopener">Object.getPrototypeOf()</a></code>的东西。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="aaa0" class="kw kx iq bd ky kz nd lb lc ld ne lf lg jw nf jx li jz ng ka lk kc nh kd lm ln bi translated">TypeScript数组可以包含不同的类型吗？</h1><p id="5c13" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">甚至<a class="ae kv" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>，JavaScript的严格类型扩展(技术上称为“<a class="ae kv" href="https://en.wikipedia.org/wiki/TypeScript" rel="noopener ugc nofollow" target="_blank">严格语法超集</a>”)也允许你将任何类型的数据放入一个带有语法<code class="fe mk ml mm mn b"><a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/basic-types.html#array" rel="noopener ugc nofollow" target="_blank">any[]</a></code>的数组中:意思是一个<code class="fe mk ml mm mn b"><a class="ae kv" href="https://www.typescriptlang.org/docs/handbook/basic-types.html#any" rel="noopener ugc nofollow" target="_blank">any</a></code>类型的数组。</p><p id="ce21" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">如果您没有在TypeScript中指定一个特定的类型(或一组类型)，默认情况下也会使用<code class="fe mk ml mm mn b">any[]</code>的数组类型(“推断”)。</p><p id="d926" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">相比之下，只有数字的TypeScript数组由<code class="fe mk ml mm mn b">number[]</code>指定——如果您的代码试图向数组中添加非数字，您将无法将TypeScript编译成JavaScript。</p><p id="6959" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">想想我们的用户对象的例子，我们期望数组中的每一项都是具有<code class="fe mk ml mm mn b">id</code>属性的<code class="fe mk ml mm mn b">user</code>,您可以想象您必须在TypeScript中进行更少的类型检查:事实上，根本不需要。</p><p id="0db7" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">虽然有许多强烈的支持和反对TypeScript的意见，但我认为使用对象数组的好处是显而易见的。</p><p id="374c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">如果我不得不打赌JavaScript开发人员如此喜欢TypeScript的第一个原因，那就是您可以在保证数据类型的情况下迭代数组，而不需要每次都进行类型检查。</p><p id="90da" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">然而，您需要知道数组可以包含“普通JavaScript”中的任何类型(由浏览器或<a class="ae kv" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank">节点</a>运行的JavaScript，不使用TypeScript或任何其他扩展、框架或助手)。</p><p id="931d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这里要传达的信息是，您应该小心迭代您“期望”为某种类型的项目数组，尤其是如果这些项目本身就是JavaScript对象。</p><p id="17ab" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">只需要一个未处理的<code class="fe mk ml mm mn b">TypeError</code>就可以让你的整个JavaScript代码崩溃，所以一定要经常使用像<code class="fe mk ml mm mn b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener ugc nofollow" target="_blank">try...catch</a></code>、<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/better-programming/how-to-check-data-types-in-javascript-using-typeof-424d0520a329" rel="noopener">typeof</a></code>和<code class="fe mk ml mm mn b"><a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">null</a></code>、<a class="ae kv" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">这样的工具来检查</a>，以避免你的项目出现重大的bug。</p><p id="4230" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><strong class="lq ir">快乐编码！</strong>🦔🐉🦩👀🎢</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="4860" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><a class="ae kv" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">德里克·奥斯汀博士</a>是《职业规划:如何在6个月内成为一名成功的6位数程序员 一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Setting up User Profiles and Authentication on Webflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Webflow上设置用户配置文件和身份验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/setting-up-user-profiles-and-authentication-on-webflow-dffcfbcbcaf6?source=collection_archive---------8-----------------------#2020-09-28">https://javascript.plainenglish.io/setting-up-user-profiles-and-authentication-on-webflow-dffcfbcbcaf6?source=collection_archive---------8-----------------------#2020-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0bb5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用定制JavaScript在Webflow上构建Web应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ddf2de4fdd33ede75db953072f7fac36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lAqxX6Wd7ofIYVRv.png"/></div></div></figure><p id="71c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如今有许多令人惊叹的低代码和无代码开发工具。无论是对于需要弥补技能差距的非技术人员，还是能够实现生产力提升的技术人员，这样的工具正在迅速重塑世界对软件开发的概念:谁是谁、T2是什么、T4是如何开发的。简而言之，更多拥有不同技能的人可以使用低代码和无代码开发工具来创建软件。</p><p id="6f12" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如每个开发框架都有其独特的优点和缺点一样，低代码和无代码开发工具也是如此。虽然从设计的角度来看，一些工具可能过于局限，但其他工具在允许处理有意义的数据方面存在局限性。对于那些希望使用低代码和无代码开发工具而不是简单的营销网站来构建真实世界的应用程序的人来说，这是一个严重的障碍。</p><p id="e484" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天可用的大多数工具主要面向营销网站的前端开发(视觉界面设计)。在这一类别中，Webflow是一个典型代表，也是最灵活的可视化网站构建者之一！而像8base这样的平台可以处理应用程序的整个后端。明白这是怎么回事了吗？</p><p id="6e87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我们将探索如何利用Webflow这样的工具，通过使用后端即服务进行身份验证和创建自定义用户配置文件来构建真正的web应用程序，而不是网站。</p><h1 id="8fef" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">您需要什么来开始</h1><p id="9c9f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在开始之前，您需要设置一些东西。它们是:</p><p id="d8ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">1.Webflow帐户—网站基本计划每月15美元</p><p id="20ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.8基本帐户—免费计划或开发者计划每月25美元</p><p id="2450" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就这么简单！请按顺序完成教程的各个部分，因为它们相互依赖…</p><h1 id="2e8e" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">在Webflow上验证用户</h1><p id="f7ff" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">身份验证是几乎所有应用程序的核心要求，也是大多数团队的核心难题！无论如何，在本教程中，我们将实现一个策略，让用户在Webflow中注册、登录、注销和恢复密码。此外，我们将在定制的Webflow页面上完成所有工作，以便您获得总体设计控制权。</p><p id="48e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要登录Webflow并创建一个新项目或使用初始项目。项目的造型不重要！所以，如果你愿意，随时都可以改变事物的样子。</p><p id="cf0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">新项目打开后，导航到<em class="ln">项目设置&gt;自定义代码</em>选项卡，首先在“Head Code”部分添加下面的脚本标签。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="f53f" class="mq lp iq mm b gy mr ms l mt mu">&lt;script src=”https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js" crossorigin=”anonymous”&gt;&lt;/script&gt;</span></pre><p id="4005" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Vue.js是我们将要使用的一个非常轻量级的前端JavaScript框架。它将允许我们对我们的Webflow站点的某些部分进行动态控制。</p><p id="1006" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们将在“Head Code”中的最后一个脚本下添加另一个脚本。这是一个自定义脚本，我鼓励你通读，或者你可以复制并粘贴到——<strong class="kt ir">中，除了配置部分！</strong>本质上，它是将一个小模块初始化为，我们将能够在我们的Webflow站点上的任何地方访问它。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="519d" class="mq lp iq mm b gy mr ms l mt mu">&lt;script defer&gt;<br/>  /* Accessible globally on webflow site */<br/>  window.EightBase = ((config) =&gt; {<br/>    /**<br/>     * Helper object for handling local storage. This will allow us<br/>     * to easily set and retrieve user data and authentication data<br/>     * in the browser's localStorage object.<br/>     */<br/>    const store = {<br/>      /* Access value in localStorage */<br/>      get: (key) =&gt; {<br/>        return JSON.parse(localStorage.getItem(key));<br/>      },</span><span id="a6ab" class="mq lp iq mm b gy mv ms l mt mu">/* Set value in localStorage */<br/>      set: (key, value) =&gt; {<br/>        localStorage.setItem(key, JSON.stringify(value));</span><span id="a479" class="mq lp iq mm b gy mv ms l mt mu">return value;<br/>      },</span><span id="9075" class="mq lp iq mm b gy mv ms l mt mu">/* Remove Item from localStorage */<br/>      remove: (key) =&gt; {<br/>        localStorage.removeItem(key);<br/>      },</span><span id="6398" class="mq lp iq mm b gy mv ms l mt mu">/* Clear values from localStorage */<br/>      clear: () =&gt; {<br/>        localStorage.clear();<br/>      },</span><span id="92fe" class="mq lp iq mm b gy mv ms l mt mu">/* Helper for determining if user is authenticated */<br/>      isAuthenticated: () =&gt; {<br/>        let auth = JSON.parse(localStorage.getItem("auth"));</span><span id="dc73" class="mq lp iq mm b gy mv ms l mt mu">return Boolean(auth) &amp;&amp; Boolean(auth.idToken);<br/>      },<br/>    };</span><span id="d08f" class="mq lp iq mm b gy mv ms l mt mu">/**<br/>     * Whenever a page loads, this piece of code will look for<br/>     * whether the current route is private (as defined in the<br/>     * config object). If it is private and the user is not<br/>     * authenticated, it will redirect the user to the logoutRedirect<br/>     * route (also defined in the config object).<br/>     */<br/>    let isProtectedRoute = config.routes.private.some((p) =&gt;<br/>      window.location.pathname.match(p)<br/>    );</span><span id="c6d5" class="mq lp iq mm b gy mv ms l mt mu">if (isProtectedRoute &amp;&amp; !store.isAuthenticated()) {<br/>      window.location.replace(config.routes.logoutRedirect);<br/>    }</span><span id="b51a" class="mq lp iq mm b gy mv ms l mt mu">/**<br/>     * API is a module that we'll use to execute calls to<br/>     * the 8base API. Webflow includes jQuery by default,<br/>     * and Ajaxs will work great for a graphQL Client.<br/>     */<br/>    const api = {<br/>      request: (opts = {}) =&gt; {<br/>        return $.ajax(<br/>          Object.assign(<br/>            {<br/>              type: "POST",<br/>              url: config.endpoint,<br/>              contentType: "application/json",<br/>              /**<br/>               * Unless overridden, the idToken will get retrieved<br/>               * from localStorage before ever request and set as<br/>               * a bearer token.<br/>               */<br/>              beforeSend: (xhr) =&gt; {<br/>                var { idToken } = store.get("auth");</span><span id="f054" class="mq lp iq mm b gy mv ms l mt mu">xhr.setRequestHeader("Authorization", "Bearer " + idToken);<br/>              },<br/>            },<br/>            opts<br/>          )<br/>        );<br/>      },<br/>    };</span><span id="a00b" class="mq lp iq mm b gy mv ms l mt mu">return {<br/>      config,<br/>      store,<br/>      api,<br/>    };<br/>  })({<br/>    /**<br/>     * CONFIG!<br/>     *<br/>     * This object supplies some required info to the module.<br/>     * You're  */<br/>    endpoint: "&lt;PUT_YOUR_8BASE_API_ENDPOINT&gt;",<br/>    authProfileId: "&lt;PUT_YOUR_8BASE_AUTH_PROFILE_ID&gt;",<br/>    routes: {<br/>      loginRedirect: "/profile",<br/>      logoutRedirect: "/sign-in",<br/>      private: ["/profile"],<br/>    },<br/>  });<br/>&lt;/script&gt;</span></pre><p id="493b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在脚本的最后一部分，您将看到两个值，分别是<code class="fe mw mx my mm b"><strong class="kt ir">&lt;PUT_YOUR_8BASE_API_ENDPOINT&gt;</strong></code>和<code class="fe mw mx my mm b"><strong class="kt ir">&lt;PUT_YOUR_8BASE_AUTH_PROFILE_ID&gt;</strong></code>。我们将用8base中的值替换它们。<strong class="kt ir"> routes </strong>对象中的值都是可定制的，尽管出于本教程的考虑，我建议让它们保持原样。</p><p id="3c95" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从8base中快速获取这两个值。登录8base控制台，打开一个现有的或新的工作区。在工作区的仪表板上，您会看到一个包含API端点的卡片。复制并粘贴到配置对象中的<code class="fe mw mx my mm b"><strong class="kt ir">&lt;PUT_YOUR_8BASE_API_ENDPOINT&gt;</strong></code>值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/90883e4ea86f5c1eed8844f9094d8e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uKTXnfyvCssBcpYDrAabPQ.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">8base workspace console for API Endpoint URL</figcaption></figure><p id="4a4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，导航到8base中的<em class="ln">应用服务&gt;认证</em>页面，并创建一个新的<em class="ln">认证配置文件</em>。选择默认的“8base认证”选项以及“对所有人开放”。最后，在<em class="ln">角色</em>部分选择“Guest”并点击create。</p><p id="022c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在这里配置的是我们的用户将如何进行身份验证。关于具体<a class="ae ne" href="https://docs.8base.com/docs/8base-console/authentication" rel="noopener ugc nofollow" target="_blank">设置的更多信息可以在这里</a>找到。然而，有了这些设置，我们说1)任何有电子邮件地址的人都可以注册；以及2)当用户注册时，他们被分配“客人”角色。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/0b68a71f6ecf5196f08a4e9240075c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ae_iZiDKLhWfZ1sxV4jp9w.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Setting up an authentication profile in 8base</figcaption></figure><p id="f905" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建身份验证配置文件后，它将在表格的最左侧显示一个想法。复制粘贴到Webflow头代码脚本的config对象中的<code class="fe mw mx my mm b"><strong class="kt ir">&lt;PUT_YOUR_8BASE_AUTH_PROFILE_ID&gt;</strong></code>值！</p><p id="a03e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">确保保存在Webflow中所做的更改，现在我们已经准备好进入身份验证页面了！</p><h1 id="72c8" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">构建Webflow用户注册页面</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/e59197e269d8c21990f38ef1ee3c539b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vB4pyguydlwe5f3r4OJSDg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Webflow sign up page</figcaption></figure><p id="1c85" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以我们现在要做的是建立一个注册页面。你可以随心所欲地设计发型。如果你看上面的图，那就是我的样子。也就是说，要实现这一点，还需要做一些非常重要的事情。</p><p id="983e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了利用Vue.js，我们将向表单元素添加一些自定义属性。这些属性本质上将被映射为值，这些值将我们的表单元素绑定到Vue组件上的数据。如果那句话没有意义，不用担心！我们还是会成功的。‍</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/a7a6f87732e876dd40b68bd1bae9387f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJhjCVXh9yghgXOp7qiaCg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Custom field attributes on Webflow form</figcaption></figure><p id="2c7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要向表单元素添加自定义属性——如上图所示。在这个注册表单上，我们将要求用户提供他们的名字、姓氏、电子邮件和密码。请确保这些表单域具有以下自定义属性，如下面列表中所述。</p><p id="ff29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">名</strong></p><ul class=""><li id="6239" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="9121" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:form.firstName</li></ul><p id="dcd8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">姓氏</strong></p><ul class=""><li id="251c" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="2c31" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:form.lastName</li></ul><p id="1292" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">电子邮件</strong></p><ul class=""><li id="33a8" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="dad1" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:form.email</li></ul><p id="0bb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">密码</strong></p><ul class=""><li id="e0f9" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="b173" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:表单.密码</li></ul><p id="a93e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">配置好所有表单字段后，我们还将向表单的submit按钮添加一个自定义属性。这将用于使用自定义方法生成按钮的click事件，而不是提交表单。</p><p id="d07a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">提交按钮</strong></p><ul class=""><li id="1056" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:v-on:click</li><li id="42e4" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:注册</li></ul><p id="c977" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好的，目前为止干得不错。如果您不熟悉JavaScript，不要让下一部分吓倒您！这非常简单，我们将介绍一下发生了什么。</p><p id="33ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要给刚刚创建的表单一个惟一的ID。所以在表单元素的设置中，将ID输入更新为<code class="fe mw mx my mm b">sign-up-form</code>。我们需要这样做的原因是，我们需要告诉Vue组件安装在哪里，这将使它能够看到和控制子元素(所有嵌套在表单中的输入)。</p><p id="e93a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦ID被更新，我们将使用body标签之前的脚本更新整个页面。脚本在下面，截图显示了脚本需要去的地方。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/4a0715e6d02ff718ecb1561a9ed099c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddXxVmMSLxbmGrwZ5pmpOQ.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Sign up body tag script</figcaption></figure><p id="766a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">继续将下面的脚本复制并粘贴到页面的<code class="fe mw mx my mm b"><strong class="kt ir">Before &lt;/body&gt; tag</strong></code>输入字段中。如果您愿意，可以阅读脚本的代码注释，以便更好地理解发生了什么。然而，一旦你保存和发布，我们将有一个工作注册页面！</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="7d2c" class="mq lp iq mm b gy mr ms l mt mu">&lt;script&gt;<br/>  (() =&gt; {<br/>    new Vue({<br/>      // Mounts component on the element with ID sign-up-form<br/>      el: "#sign-up-form",<br/>      data: {<br/>        errors: [],<br/>        // We'll store our data in a object with the key "form"<br/>        form: {<br/>          email: "",<br/>          password: "",<br/>          lastName: "",<br/>          firstName: "",<br/>          authProfileId: EightBase.config.authProfileId,<br/>        },<br/>        // This mutation is what the gql api will use to signIn the user after signUp<br/>        signInMutation: `<br/>        mutation(<br/>          $email: String!,<br/>          $password: String!,<br/>          $authProfileId: ID!<br/>        ) {<br/>          userLogin(data: {<br/>            email: $email,<br/>            password: $password,<br/>            authProfileId: $authProfileId<br/>          }) {<br/>            success<br/>            auth {<br/>              idToken<br/>              refreshToken<br/>            }<br/>          }<br/>        }<br/>      `,<br/>        // This mutation is what the gql api will use to sign up the<br/>        signUpMutation: `<br/>        mutation(<br/>          $authProfileId: ID!<br/>          $password: String!<br/>          $firstName: String<br/>          $lastName: String<br/>          $email: String!</span><span id="4e45" class="mq lp iq mm b gy mv ms l mt mu">) {<br/>          userSignUpWithPassword(<br/>            authProfileId: $authProfileId,<br/>            password: $password<br/>            user: {<br/>              firstName: $firstName<br/>              lastName: $lastName<br/>              email: $email<br/>            }<br/>          ) {<br/>            id<br/>            createdAt<br/>          }<br/>        }<br/>      `,<br/>      },<br/>      methods: {<br/>        handleError(error) {<br/>          console.log(error);<br/>        },<br/>        // If there are no errors after signUp, this method logs in the user<br/>        login(result) {<br/>          if (result.errors.length) {<br/>            this.errors = result.errors;<br/>            return;<br/>          }</span><span id="f497" class="mq lp iq mm b gy mv ms l mt mu">/* Submit request to API */<br/>          EightBase.api.request({<br/>            data: JSON.stringify({<br/>              query: this.signInMutation,<br/>              variables: this.form,<br/>            }),<br/>            success: (result) =&gt; {<br/>              EightBase.store.set("auth", result.data.userLogin.auth);<br/>              window.location.replace(EightBase.config.routes.loginRedirect);<br/>            },<br/>            error: this.error,<br/>            /* Skips auth */<br/>            beforeSend: null,<br/>          });<br/>        },</span><span id="7fc6" class="mq lp iq mm b gy mv ms l mt mu">// This is the method we bound to our form button, which executes the sign up request.<br/>        signUp(event) {<br/>          if (event) event.preventDefault();<br/>          if (event) event.stopPropagation();</span><span id="bbdc" class="mq lp iq mm b gy mv ms l mt mu">console.log("Logging in user...");</span><span id="9172" class="mq lp iq mm b gy mv ms l mt mu">/* Submit request to API */<br/>          EightBase.api.request({<br/>            data: JSON.stringify({<br/>              query: this.signUpMutation,<br/>              variables: this.form,<br/>            }),<br/>            success: this.login,<br/>            error: this.handleError,<br/>            /* Skips auth */<br/>            beforeSend: null,<br/>          });</span><span id="4d54" class="mq lp iq mm b gy mv ms l mt mu">return false;<br/>        },<br/>      },<br/>      watch: {<br/>        errors(errors) {<br/>          errors.forEach(console.log);<br/>        },<br/>      },<br/>    });<br/>  })();<br/>&lt;/script&gt;</span></pre><p id="8497" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这一点上，注册页面在技术上是有效的。然而，我们没有必要的登录页面，忘记密码，或只为认证用户的个人资料页面。因此，让我们继续构建其余的页面。<strong class="kt ir"> ‍ </strong> ‍</p><h1 id="09af" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">构建Webflow用户登录页面</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/93027f1bec281dc266bc39c0a76b1dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MoNtxv9444DwJzN6Vvtkw.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">User sign in page for Webflow site</figcaption></figure><p id="5eed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您会看到上面的登录页面。它实际上是注册页面，没有名称字段。因此，要快速移动，只需复制页面或将注册页面复制并粘贴到一个名为“登录”的新页面。</p><p id="9fa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从表单中删除名字和姓氏输入。在此页面上，我们将在电子邮件和密码输入上保持相同的自定义属性，因此不需要进行任何更改。但是，我们需要更新表单按钮上的自定义属性。</p><p id="b8b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">电子邮件</strong></p><ul class=""><li id="12da" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="3028" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:form.email</li></ul><p id="8863" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">密码</strong></p><ul class=""><li id="04db" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="bc39" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:表单.密码</li></ul><p id="3b2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">提交按钮</strong></p><ul class=""><li id="4791" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:v-on:click</li><li id="d0b5" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:登录</li></ul><p id="12e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于表单元素，将表单ID更新为“登录表单”。这将是组件寻找的唯一ID，就像上次一样。</p><p id="9c1b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们将使用与上次非常相似的脚本来更新页面。将下面的代码放到页面设置的<strong class="kt ir">中&lt; /body &gt;标签</strong>输入之前。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="87e5" class="mq lp iq mm b gy mr ms l mt mu">&lt;script&gt;<br/>  (() =&gt; {<br/>    new Vue({<br/>      // Component mounts on the element with the ID sign-in-form<br/>      el: "#sign-in-form",<br/>      data: {<br/>        errors: [],<br/>        // Our form data gets updated with the form input values<br/>        form: {<br/>          email: "",<br/>          password: "",<br/>          authProfileId: EightBase.config.authProfileId,<br/>        },<br/>        // This mutation is the login mutation that will return an auth token<br/>        query: `<br/>        mutation(<br/>          $email: String!,<br/>          $password: String!,<br/>          $authProfileId: ID!<br/>        ) {<br/>          userLogin(data: {<br/>            email: $email,<br/>            password: $password,<br/>            authProfileId: $authProfileId<br/>          }) {<br/>            success<br/>            auth {<br/>              idToken<br/>              refreshToken<br/>            }<br/>          }<br/>        }<br/>      `,<br/>      },<br/>      methods: {<br/>        handleError(error) {<br/>          console.log(error);<br/>        },</span><span id="59a8" class="mq lp iq mm b gy mv ms l mt mu">// On a successful login, we save the auth token in the store and then go to the login route<br/>        handleSuccess(result) {<br/>          if (result.errors &amp;&amp; result.errors.length) {<br/>            this.errors = result.errors;<br/>            return;<br/>          }</span><span id="d406" class="mq lp iq mm b gy mv ms l mt mu">EightBase.store.set("auth", result.data.userLogin.auth);<br/>          window.location.replace(EightBase.config.routes.loginRedirect);<br/>        },</span><span id="9d5a" class="mq lp iq mm b gy mv ms l mt mu">// The login method is tied to the click event on our form's button<br/>        login(event) {<br/>          if (event) event.preventDefault();<br/>          if (event) event.stopPropagation();</span><span id="0c46" class="mq lp iq mm b gy mv ms l mt mu">/* Submit request to API */<br/>          EightBase.api.request({<br/>            data: JSON.stringify({<br/>              query: this.query,<br/>              variables: this.form,<br/>            }),<br/>            success: this.handleSuccess,<br/>            error: this.handleError,<br/>            /* Skips auth */<br/>            beforeSend: null,<br/>          });</span><span id="3cae" class="mq lp iq mm b gy mv ms l mt mu">return false;<br/>        },<br/>      },<br/>      watch: {<br/>        errors(errors) {<br/>          errors.forEach(console.log);<br/>        },<br/>      },<br/>    });<br/>  })();<br/>&lt;/script&gt;</span></pre><h1 id="e149" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">构建Webflow用户忘记密码页面</h1><p id="b330" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">最后，我们有我们的忘记密码页！如上所示…我们现在只剩下1个输入。因此，让我们像处理最后几页那样向前看。将表格复制到名为“忘记密码”的新页面。</p><p id="ec15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是我们需要添加到表单元素中的自定义属性。此外，我们希望将该页面上的表单ID更新为<code class="fe mw mx my mm b">forgot-password-form</code>。</p><p id="3707" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">电子邮件</strong></p><ul class=""><li id="32ff" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:虚拟模型</li><li id="cfd7" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:form.email</li></ul><p id="0639" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">提交按钮</strong></p><ul class=""><li id="4000" class="ni nj iq kt b ku kv kx ky la nk le nl li nm lm nn no np nq bi translated">属性名称:v-on:click</li><li id="8be0" class="ni nj iq kt b ku nr kx ns la nt le nu li nv lm nn no np nq bi translated">属性值:handleSubmit</li></ul><p id="cff2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是最简单的形式。提交它将发送一封密码重置电子邮件。然而，为了让所有的奇迹发生，我们需要添加我们的脚本！因此，让我们将下面的代码添加到页面设置的<strong class="kt ir">中的&lt; /body &gt;标签</strong>输入之前。</p><pre class="kg kh ki kj gt ml mm mn mo aw mp bi"><span id="a659" class="mq lp iq mm b gy mr ms l mt mu">&lt;script&gt;<br/>  (function () {<br/>    new Vue({<br/>      // Component mounts on the element with the ID sign-in-form<br/>      el: "#forgot-password-form",<br/>      data: {<br/>        errors: [],<br/>        form: {<br/>          email: "",<br/>          authProfileId: EightBase.config.authProfileId,<br/>        },<br/>        // The gql mutation to trigger the reset password email<br/>        query: `<br/>        mutation($authProfileId: ID!, $email: String!) {<br/>          userPasswordForgot(data: {<br/>            email: $email,<br/>            authProfileId: $authProfileId<br/>          }) {<br/>            success<br/>          }<br/>        }<br/>      `,<br/>      },<br/>      methods: {<br/>        handleError(error) {<br/>          console.log(error);<br/>        },</span><span id="1b24" class="mq lp iq mm b gy mv ms l mt mu">// If the call was successful, we navigate back to the logoutRedirect route<br/>        handleSuccess(result) {<br/>          if (result.errors &amp;&amp; result.errors.length) {<br/>            this.errors = result.errors;<br/>            return;<br/>          }</span><span id="fbc9" class="mq lp iq mm b gy mv ms l mt mu">window.location.replace(EightBase.config.routes.logoutRedirect);<br/>        },</span><span id="aa0d" class="mq lp iq mm b gy mv ms l mt mu">// The submit handler attached to our form button.<br/>        handleSubmit(event) {<br/>          if (event) event.preventDefault();<br/>          if (event) event.stopPropagation();</span><span id="ee61" class="mq lp iq mm b gy mv ms l mt mu">/* Submit request to API */<br/>          EightBase.api.request({<br/>            data: JSON.stringify({<br/>              query: this.query,<br/>              variables: this.form,<br/>            }),<br/>            success: this.handleSuccess,<br/>            error: this.handleError,<br/>            /* Skips auth */<br/>            beforeSend: null,<br/>          });</span><span id="3afd" class="mq lp iq mm b gy mv ms l mt mu">return false;<br/>        },<br/>      },<br/>      watch: {<br/>        errors(errors) {<br/>          errors.forEach(console.log);<br/>        },<br/>      },<br/>    });<br/>  })();<br/>&lt;/script&gt;</span></pre><h1 id="2423" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">在Webflow上完成用户身份验证</h1><p id="67e9" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">干得好！我们已经在Webflow站点上成功设置了登录、注册和忘记密码页面。这包含了一个非常完整的认证流程。那么，我们如何测试它呢？</p><p id="82b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">快速创建一个名为“个人资料”的新页面并发布它。如果你记得在本教程的开始，我们添加了私有路由<code class="fe mw mx my mm b"><strong class="kt ir">“/profile”</strong></code>到我们的配置对象。如果你想浏览这个页面。你会发现这个网站不允许你访问它。浏览器会不断将您重定向到登录页面。这是因为它知道你没有被认证。</p><p id="c72e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以现在请继续，要么注册，要么登录。成功认证后，您将被重定向到个人资料路径！</p><p id="7f90" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们如何建立一个很棒的个人资料页面并让用户注销？即将推出…</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="1870" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">原载于</em><a class="ae ne" href="https://www.8base.com/blog/setting-up-user-profiles-and-authentication-on-webflow" rel="noopener ugc nofollow" target="_blank"><em class="ln">https://www.8base.com</em></a><em class="ln">。</em></p></div></div>    
</body>
</html>
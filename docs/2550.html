<html>
<head>
<title>JavaScript Tips — Sets to Arrays, Size of Text, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提示-设置为数组、文本大小等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tips-sets-to-arrays-console-log-size-of-text-and-more-6c57edec31cf?source=collection_archive---------11-----------------------#2020-07-04">https://javascript.plainenglish.io/javascript-tips-sets-to-arrays-console-log-size-of-text-and-more-6c57edec31cf?source=collection_archive---------11-----------------------#2020-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cfc78913c4d3fa8831aa98a942c68924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zRtFh4HyvlKJNhP2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mannika?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Annika Treial</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8b60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="1c96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将集合转换为数组</h1><p id="76ea" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有很多种将集合转换成数组的方法。</p><p id="05dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种方法是使用<code class="fe me mf mg mh b">Array.from</code>方法。</p><p id="0fd8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="91d0" class="mq lc iq mh b gy mr ms l mt mu">const array = Array.from(set);</span></pre><p id="2748" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用spread运算符进行同样的操作:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="518b" class="mq lc iq mh b gy mr ms l mt mu">const array = [...set];</span></pre><h1 id="bec2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从父组件的子组件调用方法</h1><p id="8b64" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过给子组件分配一个引用，从父组件中的子组件调用一个方法。</p><p id="87ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用<code class="fe me mf mg mh b">current</code>属性访问该孩子。</p><p id="d5e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cb95" class="mq lc iq mh b gy mr ms l mt mu">const { forwardRef, useRef, useImperativeHandle } = React;</span><span id="59f6" class="mq lc iq mh b gy mv ms l mt mu">const Child = forwardRef((props, ref) =&gt; {<br/>  useImperativeHandle(ref, () =&gt; ({<br/>    getAlert() {<br/>      console.log("alert from child");<br/>    }<br/>  }));<br/>  return &lt;h1&gt;hello&lt;/h1&gt;;<br/>});</span><span id="3a7e" class="mq lc iq mh b gy mv ms l mt mu">const Parent = () =&gt; {<br/>  const childRef = useRef();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Child ref={childRef} /&gt;<br/>      &lt;button onClick={() =&gt; childRef.current.getAlert()}&gt;Click&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><p id="fe71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">forwardRef</code>函数将引用传递给子组件。</p><p id="3ac8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useImperativeHandle</code>让我们向父母展示孩子选择的方法。</p><p id="2163" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们给<code class="fe me mf mg mh b">Child</code>赋值，然后我们可以通过<code class="fe me mf mg mh b">current</code>属性从<code class="fe me mf mg mh b">Parent</code>调用<code class="fe me mf mg mh b">getAlert</code>方法。</p><h1 id="694d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何修复错误:倾听EADDRINUSE错误</h1><p id="1b34" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">EADDRINUSE</code>表示端口号已经被使用。</p><p id="1df4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着无论我们使用什么应用程序，我们都必须监听不同的端口。</p><p id="9f1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以结束正在使用我们想要使用的端口的程序。</p><p id="8d04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们更改HTTP服务器的端口，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3c57" class="mq lc iq mh b gy mr ms l mt mu">const http = require('http');</span><span id="204a" class="mq lc iq mh b gy mv ms l mt mu">const server = http.createServer((req, res) =&gt; {<br/>  res.end('test');<br/>});</span><span id="b3d7" class="mq lc iq mh b gy mv ms l mt mu">server.on('listening', () =&gt; {<br/>  console.log('ok, server is running');<br/>});</span><span id="76dc" class="mq lc iq mh b gy mv ms l mt mu">server.listen(80);</span></pre><p id="6eb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一行正在监听端口80。</p><p id="cf64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以把它换成别的东西。</p><p id="0401" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要终止程序，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="18c5" class="mq lc iq mh b gy mr ms l mt mu">killall -9 node</span></pre><h1 id="0e6b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在谷歌浏览器JavaScript控制台中打印调试消息</h1><p id="a2c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在带有<code class="fe me mf mg mh b">javascript:</code>前缀的浏览器地址栏中运行JavaScript。</p><p id="1979" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以键入:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d014" class="mq lc iq mh b gy mr ms l mt mu">javascript: console.log('foo');</span></pre><p id="61cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">登录控制台中的<code class="fe me mf mg mh b">'foo'</code>。</p><p id="f081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其他控制台方法包括<code class="fe me mf mg mh b">console.error</code>将事情记录为错误。</p><p id="96fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">console.info</code>记录信息性消息。</p><p id="7e08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">console.warn</code>记录警告。</p><p id="daa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用一些标签格式化字符串。</p><p id="e9e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3eb5" class="mq lc iq mh b gy mr ms l mt mu">console.log("this is %o, event is %o, host is %s", this, e, location.host);</span></pre><p id="c4e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">%o</code>表示插值对象，<code class="fe me mf mg mh b">%s</code>表示字符串。</p><p id="13df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">火狐有<code class="fe me mf mg mh b">console.trace();</code>方法来记录堆栈跟踪。</p><h1 id="fce5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更好的写作方式v = (v === 0？1 : 0)</h1><p id="69e8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将<code class="fe me mf mg mh b"> v = (v === 0 ? 1 : 0)</code>改写为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="83cb" class="mq lc iq mh b gy mr ms l mt mu">v = (v ? 0 : 1);</span></pre><p id="8d5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为0是假的。</p><p id="09b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">v</code>是0或另一个假值，那么我们给它赋值1。否则，我们分配0。</p><h1 id="5e65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">异步回调函数的返回值</h1><p id="b034" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">无法从异步回调函数中返回值。</p><p id="b873" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为我们在不确定的时间内得到了这个值。</p><p id="40ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们只使用函数中的值。</p><p id="8e8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4795" class="mq lc iq mh b gy mr ms l mt mu">asyncCode({ address }, (results, status) =&gt; {<br/>  fn(results[0].geometry.location); <br/>});</span></pre><p id="c4a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们只在函数内使用<code class="fe me mf mg mh b">results</code>和<code class="fe me mf mg mh b">status</code>。</p><h1 id="865f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">计算文本宽度</h1><p id="a3e1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过将文本放入div来计算文本宽度。</p><p id="08ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">clientWidth</code>和<code class="fe me mf mg mh b">clientHeight</code>属性分别得到宽度和高度。</p><p id="746a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c025" class="mq lc iq mh b gy mr ms l mt mu">const fontSize = 12;<br/>const text= document.getElementById("text");<br/>text.style.fontSize = fontSize;<br/>const height = `${text.clientHeight}px`;<br/>const width = `${text.clientWidth}px`;</span></pre><p id="a468" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只需获取文本，将字体大小更改为我们想要的大小，并获取这些属性。</p><h1 id="8b7d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查变量是数字还是字符串</h1><p id="f34d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要检查变量是数字还是字符串，我们可以使用<code class="fe me mf mg mh b">typeof</code>操作符。</p><p id="696f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6ec5" class="mq lc iq mh b gy mr ms l mt mu">typeof "hello"</span></pre><p id="9d34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并得到<code class="fe me mf mg mh b">'string'</code></p><p id="f208" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们写下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="16d3" class="mq lc iq mh b gy mr ms l mt mu">typeof 123</span></pre><p id="ef01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe me mf mg mh b">'number'</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/a908ca1b8a9c022d2d30e5f794da8683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tXV6XLWqRjV676tG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tadmint?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Melissa Regina</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="429b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="59ba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有几种方法可以将集合转换成数组。</p><p id="7505" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过使用forward refs从父组件调用React子组件的方法。</p><p id="508a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在JavaScript中有许多记录项目的方法。</p><p id="41ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有办法从异步回调函数返回值。</p><h2 id="5004" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="fdf3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Closing a Window with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript关闭窗口</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/closing-a-window-with-javascript-beeec56344bb?source=collection_archive---------2-----------------------#2019-09-23">https://javascript.plainenglish.io/closing-a-window-with-javascript-beeec56344bb?source=collection_archive---------2-----------------------#2019-09-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3ae0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">简而言之，什么可行，什么不可行</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/56f77880bc21498551872532ac69e134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrhvzCstzP9fFA_qT7XBqw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Nathan Fertig on <a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kw"><p id="228b" class="kx ky iq bd kz la lb lc ld le lf lg dk translated">如何用JavaScript关闭窗口？</p></blockquote><p id="f137" class="pw-post-body-paragraph lh li iq lj b lk ll jr lm ln lo ju lp lq lr ls lt lu lv lw lx ly lz ma mb lg ij bi translated">有趣的是这个问题经常出现。可以很快回答。正如MDN 所说，</p><blockquote class="mc md me"><p id="fea4" class="lh li mf lj b lk mg jr lm ln mh ju lp mi mj ls lt mk ml lw lx mm mn ma mb lg ij bi translated"><code class="fe mo mp mq mr b">Scripts may not close windows that were not opened by script</code></p></blockquote><blockquote class="kw"><p id="2c28" class="kx ky iq bd kz la lb lc ld le lf lg dk translated">这句话到底说了什么？</p></blockquote></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h2 id="e95a" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">第一:打开和关闭窗户。</h2><p id="ab71" class="pw-post-body-paragraph lh li iq lj b lk ns jr lm ln nt ju lp lq nu ls lt lu nv lw lx ly nw ma mb lg ij bi translated"><strong class="lj ir">用</strong>打开窗户</p><p id="02c1" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated"><em class="mf">window . open()；— </em> <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open" rel="noopener ugc nofollow" target="_blank"> <em class="mf">完整语法此处</em> </a></p><p id="1fce" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated"><strong class="lj ir">用</strong>关闭窗户</p><p id="1ef4" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated"><em class="mf"> window.close()。——</em><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/close" rel="noopener ugc nofollow" target="_blank"><em class="mf">完整语法此处</em></a><em class="mf"><br/></em><strong class="lj ir"><em class="mf">(但不尽然！)</em> </strong></p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><p id="2c9f" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">这就是MDN语句发挥作用的地方。一个简单的例子应该可以澄清这一点。</p><h2 id="85ae" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">示例:</h2><p id="1290" class="pw-post-body-paragraph lh li iq lj b lk ns jr lm ln nt ju lp lq nu ls lt lu nv lw lx ly nw ma mb lg ij bi translated">我创建了两个页面，Page1.html(父窗口)和Page2.html(子窗口)。)</p><blockquote class="mc md me"><p id="b722" class="lh li mf lj b lk mg jr lm ln mh ju lp mi mj ls lt mk ml lw lx mm mn ma mb lg ij bi translated">由于我没有指定窗口的大小，<em class="iq">它将在浏览器中作为一个新标签</em>打开。这同样适用于弹出窗口。</p></blockquote><p id="90c1" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">JavaScript函数用于，</p><ol class=""><li id="0640" class="nx ny iq lj b lk mg ln mh lq nz lu oa ly ob lg oc od oe of bi translated">关闭子窗口。</li><li id="931f" class="nx ny iq lj b lk og ln oh lq oi lu oj ly ok lg oc od oe of bi translated">关闭父项。嗯。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/fba49ed799739dd7b6921fb3932d3ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVSyy9RPq9A7_-nRATaGnA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Parent</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/51817b03f950e5afcac877a37b5841f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*57U9mFtHQIc-9AC1Glyn_w.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Child</figcaption></figure><h2 id="9505" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">运行示例</h2><p id="6128" class="pw-post-body-paragraph lh li iq lj b lk ns jr lm ln nt ju lp lq nu ls lt lu nv lw lx ly nw ma mb lg ij bi translated">运行Page1.html，点击“打开孩子”。子窗口作为单独的窗口打开，就像选项卡一样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/2e7d9af94299130fa3c52086e4f3113e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*dt2PwA9sSKVljxzC6MlLLQ.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Child opens as a tab</figcaption></figure><p id="436e" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">回到父窗口，点击“关闭子窗口”，子窗口关闭。<strong class="lj ir">维奥拉！</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/9962bca5a71a8d9e48dc02b63efe953e.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*q13Za9gSY1Rcu47Xto7IuQ.jpeg"/></div></figure><p id="148a" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">现在，在父页面上，单击“关闭我”。什么都没发生。<strong class="lj ir">扫兴的人</strong>！实际上确实发生了一些事情。我试着用两种方法关闭它。window.close()和self.close()。请参阅console . log()；</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi op"><img src="../Images/6f21634de3133f043b37750cec91dd03.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*iwVrhQw5patJurbvg7qM8w.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Window can close itself (or can it?)</figcaption></figure><blockquote class="mc md me"><p id="e048" class="lh li mf lj b lk mg jr lm ln mh ju lp mi mj ls lt mk ml lw lx mm mn ma mb lg ij bi translated">所以窗户不能自己关上。</p></blockquote><blockquote class="kw"><p id="818b" class="kx ky iq bd kz la lb lc ld le lf lg dk translated">稍等一会儿！</p></blockquote><p id="9cf5" class="pw-post-body-paragraph lh li iq lj b lk ll jr lm ln lo ju lp lq lr ls lt lu lv lw lx ly lz ma mb lg ij bi translated">根据MDN，它可以在合适的条件下自动关闭<em class="mf"/>。</p><p id="0895" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated"><strong class="lj ir">给Page2.html(child)添加下面的按钮和closeMe()函数。)</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/a2bb1822aa52a0c66dee2213af2fdd45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pltmw7qTieThQk4-ock1SA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Additions to child</figcaption></figure><h2 id="2d90" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">运行示例</h2><p id="3ca2" class="pw-post-body-paragraph lh li iq lj b lk ns jr lm ln nt ju lp lq nu ls lt lu nv lw lx ly nw ma mb lg ij bi translated">运行Page1.html，点击“打开孩子”。和以前一样，子窗口像标签一样作为单独的窗口打开。</p><p id="9c1e" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">现在点击子里的【关闭我】<strong class="lj ir">。关门了。<strong class="lj ir">中提琴</strong>！</strong></p><p id="b5c7" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">那扇窗户自己关上了。观察如下。</p><h1 id="dfa3" class="or na iq bd nb os ot ou ne ov ow ox nh jw oy jx nk jz oz ka nn kc pa kd nq pb bi translated"><strong class="ak">结论:</strong></h1><ul class=""><li id="eeaa" class="nx ny iq lj b lk ns ln nt lq pc lu pd ly pe lg pf od oe of bi translated">由于我们使用一个脚本打开了孩子，并且有一个指向那个孩子的引用句柄(在变量“child”中)，通过MDN语句，我们能够使用window.close()的句柄关闭它；(<strong class="lj ir">child . close()；</strong>)</li><li id="4760" class="nx ny iq lj b lk og ln oh lq oi lu oj ly ok lg pf od oe of bi translated">因为父级不是用window.open()打开的；不能使用window.close()或self.close()关闭它。</li><li id="9796" class="nx ny iq lj b lk og ln oh lq oi lu oj ly ok lg pf od oe of bi translated">由于子窗口是用脚本window.open()打开的；它可以自己关闭。</li></ul><p id="ac7a" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">所以声明，</p><blockquote class="mc md me"><p id="7deb" class="lh li mf lj b lk mg jr lm ln mh ju lp mi mj ls lt mk ml lw lx mm mn ma mb lg ij bi translated"><code class="fe mo mp mq mr b">Scripts may not close windows that were not opened by script.</code></p></blockquote><p id="f160" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">现在更有意义了。</p><p id="91a2" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">我希望这个简单例子已经澄清了一些事情。</p><p id="9488" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">感谢阅读！</p><h2 id="42a9" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">坚持住。最后一点意见。</h2><blockquote class="mc md me"><p id="27c7" class="lh li mf lj b lk mg jr lm ln mh ju lp mi mj ls lt mk ml lw lx mm mn ma mb lg ij bi translated">如果父级被刷新，它将丢失对子级的引用，并且父级不能关闭子级。救命啊！</p></blockquote><h2 id="6fd2" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">尝试</h2><ol class=""><li id="1596" class="nx ny iq lj b lk ns ln nt lq pc lu pd ly pe lg oc od oe of bi translated">打开Page1.html，点击“打开孩子”。</li><li id="7f64" class="nx ny iq lj b lk og ln oh lq oi lu oj ly ok lg oc od oe of bi translated">刷新父节点，Page1.html点击【关闭子节点】，失败<strong class="lj ir"/>！</li></ol><h2 id="7271" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated"><strong class="ak">解决方案</strong></h2><p id="975c" class="pw-post-body-paragraph lh li iq lj b lk ns jr lm ln nt ju lp lq nu ls lt lu nv lw lx ly nw ma mb lg ij bi translated">你会注意到我有一个名为“孩子名”的变量。如果我们把它存储在页面上，我们可以用它来再次获得一个引用！</p><p id="f5d5" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">下面，在Page1.html，我添加了一个文本字段(可能是一个隐藏字段)，删除了closeMe()函数，因为这是一个史诗般的失败！并修改了closeChild()函数来查看引用是否丢失。如果是这样，使用窗体上存储的窗口名。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/0f590de6de49a0258bc980c16aff7936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JEM8tuwEjCGe7Ix7OCNxrg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Observe closeChild()</figcaption></figure><h2 id="477b" class="mz na iq bd nb nc nd dn ne nf ng dp nh lq ni nj nk lu nl nm nn ly no np nq nr bi translated">运行示例</h2><ol class=""><li id="e662" class="nx ny iq lj b lk ns ln nt lq pc lu pd ly pe lg oc od oe of bi translated">打开Page1.html，点击“打开孩子”，然后点击“关闭孩子”。仍然有效。</li><li id="a496" class="nx ny iq lj b lk og ln oh lq oi lu oj ly ok lg oc od oe of bi translated">打开Page1.html，点击“打开孩子”。刷新Page1.html，点击Page1.html上的“关闭孩子”。儿童关闭。耶！</li></ol><p id="1aba" class="pw-post-body-paragraph lh li iq lj b lk mg jr lm ln mh ju lp lq mj ls lt lu ml lw lx ly mn ma mb lg ij bi translated">编码快乐！</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to create an eCommerce app with Angular and Firebase: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Angular和Firebase创建一个电子商务应用程序:第2部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-an-app-with-firebase-and-angular-part-2-79063adebab9?source=collection_archive---------0-----------------------#2019-03-04">https://javascript.plainenglish.io/how-to-create-an-app-with-firebase-and-angular-part-2-79063adebab9?source=collection_archive---------0-----------------------#2019-03-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="86ea" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何用Angular和Firebase (Cloud Firestore)创建电子商务web app</h2></div><p id="39ae" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一部分:<a class="ae ky" href="https://medium.com/javascript-in-plain-english/how-to-create-an-app-using-angular-and-firebase-part-1-debb80f928ad" rel="noopener">https://medium . com/JavaScript-in-plain-English/how-to-create-a-app-using-angular-and-firebase-part-1-debb 80 f 928 ad</a></p><p id="de14" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二部分:</p><p id="d3b9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这一部分，我们将把我们的应用程序与我们的数据库Firebase Cloud Firestore连接起来。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/f0be0330a4a0bf88cabda1b4cd8ac022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KP_lg7YV4bySD2eWcVsxoA.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Firebase Cloud Firestore + Angular</figcaption></figure><p id="0e72" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi lp translated">【console.firebase.google.com】到上手只需将头伸向<a class="ae ky" href="http://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank">T5</a><strong class="ke io"/>用你的谷歌凭证登录。</p><p id="2089" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Firebase控制台上创建一个新的Firebase应用程序，点击“添加项目”并为您的项目键入任何合适的名称。我要把它命名为“ngCart”。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ly"><img src="../Images/6db20b8353f55fba79ee5d2b99f9340a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXjMkMR5qGJ3gGDSn2x5fA.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Click on Add Project button.</figcaption></figure><p id="32da" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是我们如何得到一个Firebase应用程序。</p><p id="cfc4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在访问<a class="ae ky" href="http://console.cloud.google.com/apis/library" rel="noopener ugc nofollow" target="_blank"> Google Cloud控制台</a>并选择将Google Cloud Firestore API添加到库中的项目。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi lz"><img src="../Images/e11c483b8324ef69f3d17f2775c57bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZ9bUpsm9S7BLfVowjdt7g.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">search for API</figcaption></figure><p id="b99f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为我们创建的项目点击enable <strong class="ke io"> API </strong>。</p><p id="b9e6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过单击“创建凭据”按钮获取凭据。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi lz"><img src="../Images/fabdb5cfffc66202a9c773aa7fa03443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*naVOnppE3gKcx4LJDWA4og.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Create Credentials</figcaption></figure><p id="f258" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它会询问您使用的是哪种API</p><p id="27e8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从下拉列表中选择Cloud Firestore API，我们不需要任何特殊凭据，默认凭据将为我们工作。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ma"><img src="../Images/991055d8f7793b573b206d62d51a514e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_rNCaGqfK_j1SFFEjXNCXg.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Add Credentials</figcaption></figure><p id="cd1e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在前往<strong class="ke io"> Firebase控制台</strong>-&gt;-<strong class="ke io">数据库</strong>并点击<strong class="ke io"> Cloud Firestore。</strong></p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mb"><img src="../Images/587b58a9e8020de9719d99cfa75de07f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IpUBK1-Fidw2KSbkPu7UjQ.jpeg"/></div></div></figure><p id="db2c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">点击创建数据库</strong>-&gt;-<strong class="ke io">在测试模式下启动</strong>-&gt;-<strong class="ke io">启用</strong></p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ly"><img src="../Images/d42436d7a79f3b545e34c3a9a729a547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhMPPvaQZ3DVFd5sEQDYLw.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Enable rules</figcaption></figure><p id="8266" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样，我们就完成了数据库的创建，并准备好将我们的应用程序与我们一直在设置的数据库连接起来。</p><p id="f14f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">点击<strong class="ke io"> Firebase </strong>控制台左上角的<strong class="ke io">项目概述</strong></p><p id="1f64" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">点击<strong class="ke io">/&gt;/</strong>图标。</p><p id="4c31" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">复制那些花括号里的内容。</p><p id="78d6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在任何代码编辑器中打开<strong class="ke io">' src/environments/environment . ts '</strong>文件。</p><p id="6e73" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您的<strong class="ke io"> environment.ts </strong>文件应该是这样的，</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="692c" class="mh mi in md b gy mj mk l ml mm">//src/environments/environment.ts</span><span id="b6a4" class="mh mi in md b gy mn mk l ml mm">export const environment = {<br/>  production: false,<br/>  firebase: {<br/>   apiKey: "*****************************************",<br/>    authDomain: "app-***.firebaseapp.com",<br/>    databaseURL: "<a class="ae ky" href="https://ngcart-58f8b.firebaseio.com" rel="noopener ugc nofollow" target="_blank">https://*********.firebaseio.com</a>",<br/>    projectId: "<a class="ae ky" href="https://ngcart-58f8b.firebaseio.com" rel="noopener ugc nofollow" target="_blank">*********</a>",<br/>    storageBucket: "<a class="ae ky" href="https://ngcart-58f8b.firebaseio.com" rel="noopener ugc nofollow" target="_blank">*********</a>.appspot.com",<br/>    messagingSenderId: "<a class="ae ky" href="https://ngcart-58f8b.firebaseio.com" rel="noopener ugc nofollow" target="_blank">*********</a>"<br/>  }<br/>};</span></pre><p id="3cfd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="ke io"> app.module.ts </strong>中导入<strong class="ke io"> environment.ts </strong>文件，在所有导入完成后添加下面一行即可</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="6132" class="mh mi in md b gy mj mk l ml mm">import { environment } from '../environments/environment';</span></pre><p id="de2c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们导入Firebase/Cloud Firestore的Angular库附带的模块。在应用程序的父目录中运行下面的命令。</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="076d" class="mh mi in md b gy mj mk l ml mm">npm install <a class="ae ky" href="http://twitter.com/angular/fire" rel="noopener ugc nofollow" target="_blank">@angular/fire</a> firebase --save</span></pre><p id="f5e6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="ke io"> 'app.module.ts' </strong>文件中导入以下模块</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="807b" class="mh mi in md b gy mj mk l ml mm">//app.module.ts<br/>import { AngularFireModule } from '<a class="ae ky" href="http://twitter.com/angular/fire" rel="noopener ugc nofollow" target="_blank">@angular/fire</a>';<br/>import { AngularFirestore } from '<a class="ae ky" href="http://twitter.com/angular/fire" rel="noopener ugc nofollow" target="_blank">@angular/fire</a>/firestore';<br/>import { AngularFirestoreModule } from '<a class="ae ky" href="http://twitter.com/angular/fire" rel="noopener ugc nofollow" target="_blank">@angular/fire</a>/firestore';</span></pre><p id="9768" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="ke io"> 'app.module.ts' </strong>文件中追加<strong class="ke io">导入</strong>数组</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="1968" class="mh mi in md b gy mj mk l ml mm">//app.module.ts<br/>imports: [<br/>    BrowserModule,<br/>    HttpClientModule,<br/>    AppRoutingModule,<br/>    AngularFireModule.initializeApp(environment.firebase),<br/>    AngularFirestoreModule<br/>  ],</span></pre><p id="5d89" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们完成了数据库与应用程序的连接。</p><p id="b006" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们添加一些数据到我们的数据库，以便我们可以获取。</p><p id="b61f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">进入你的<strong class="ke io"> Firebase控制台</strong>-&gt;-<strong class="ke io">数据库</strong>-&gt;-<strong class="ke io">添加收藏</strong></p><p id="0998" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并键入您的收藏的名称作为项目，因为我们正在建立像应用程序一样的电子商务，我们将需要项目列表。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mo"><img src="../Images/a225ae662bda729f369b0b51ecfcfaf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ei9XmJiYKKX8vnFaeTBzQ.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Add Collection</figcaption></figure><p id="4703" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建一些随机数据来处理，如下所示</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mp"><img src="../Images/fe9fe66fdb7d05d114861ffde0d76b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yq77lCEN0iBy0XasE5EDNw.png"/></div></div></figure><p id="e0b0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将修改我们的<strong class="ke io">'/src/app/products/products . component . ts '</strong>，并导入observable和代码以从数据库中获取数据。</p><p id="01d1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">数据将作为一个可观察对象返回，因此我们需要创建一个可观察对象' items: Observable <any>'，它的数据类型是' any ',因此它可以有任何类型的数据。</any></p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="2d10" class="mh mi in md b gy mj mk l ml mm">// src/app/products/products.component.ts</span><span id="a355" class="mh mi in md b gy mn mk l ml mm">import { Component, OnInit } from '<a class="ae ky" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { AngularFirestore } from '@angular/fire/firestore';<br/>import { Observable } from 'rxjs';</span><span id="af82" class="mh mi in md b gy mn mk l ml mm"><a class="ae ky" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-products',<br/>  templateUrl: './products.component.html',<br/>  styleUrls: ['./products.component.css']<br/>})<br/>export class ProductsComponent implements OnInit {</span><span id="1766" class="mh mi in md b gy mn mk l ml mm">items: Observable&lt;any[]&gt;;<br/>  <br/>  constructor(db: AngularFirestore) {<br/>    this.items = db.collection('items').valueChanges();<br/>  }</span><span id="286e" class="mh mi in md b gy mn mk l ml mm">ngOnInit() {<br/>  }</span><span id="24f3" class="mh mi in md b gy mn mk l ml mm">}</span></pre><p id="73bf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们将在构造函数中编写一些代码，以便在创建组件时执行。</p><blockquote class="mq mr ms"><p id="9bb1" class="kc kd mt ke b kf kg jo kh ki kj jr kk mu km kn ko mv kq kr ks mw ku kv kw kx ig bi translated">这里是官方<a class="ae ky" href="https://github.com/angular/angularfire2" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Angular +Firebase文档</strong> </a>的链接</p></blockquote><p id="1254" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们创建一些前端的东西来显示我们的数据库中有什么，只需将下面的代码附加到<strong class="ke io">'/src/app/products/products . component . html '</strong></p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="5317" class="mh mi in md b gy mj mk l ml mm">// src/app/products/products.component.html</span><span id="4640" class="mh mi in md b gy mn mk l ml mm">&lt;p&gt;<br/>  products works!<br/>&lt;/p&gt;<br/>&lt;router-outlet&gt;&lt;/router-outlet&gt;</span><span id="5d7a" class="mh mi in md b gy mn mk l ml mm">&lt;ul&gt;<br/> &lt;li *ngFor="let item of items | async"&gt;<br/>   &lt;h1&gt;{{ item.productName }}&lt;/h1&gt;<br/>   {{ item.price }}<br/> &lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="8506" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们完成了，我希望这应该工作。只需通过运行以下命令从父目录为应用程序提供服务，</p><pre class="la lb lc ld gt mc md me mf aw mg bi"><span id="35bd" class="mh mi in md b gy mj mk l ml mm">ng s -o</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mx"><img src="../Images/1899bad3c5d0c2e9956bab5c013f4619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOJ4OPs4oPeeoeCR5b7GGQ.png"/></div></div></figure><h1 id="1ad2" class="my mi in bd mz na nb nc nd ne nf ng nh jt ni ju nj jw nk jx nl jz nm ka nn no bi translated">如果出现类似上面的东西，恭喜我们已经做到了。</h1><p id="8e3a" class="pw-post-body-paragraph kc kd in ke b kf np jo kh ki nq jr kk kl nr kn ko kp ns kr ks kt nt kv kw kx ig bi translated"><strong class="ke io">就是这样；)对于这一部分，在下一部分，我们将使用bootstrap 4来设计我们的应用程序。在此之前，请启动并运行您的应用程序。</strong></p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8602638a2a4ea54183f0e27ce5c3e578.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*1J2BTNQpdBSuQ3OGxQJIXQ.gif"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Happy Coding</figcaption></figure><blockquote class="mq mr ms"><p id="358f" class="kc kd mt ke b kf kg jo kh ki kj jr kk mu km kn ko mv kq kr ks mw ku kv kw kx ig bi translated"><strong class="ke io">这里是连接到Firebase的空白Angular项目的样板。给它一颗星，然后克隆它，开始你的新的Angular Firebase项目。；)</strong></p></blockquote><div class="nv nw gp gr nx ny"><a href="https://github.com/whyDontI/angularFirebaseFirestore" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd io gy z fp od fr fs oe fu fw im bi translated">whyDontI/angularFirebaseFirestore</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">角7 +火基地样板。通过在…上创建帐户，为whyDontI/angularFirebaseFirestore的发展做出贡献</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">github.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om lj ny"/></div></div></a></div><h2 id="817c" class="mh mi in bd mz on oo dn nd op oq dp nh kl or os nj kp ot ou nl kt ov ow nn ox bi translated">进一步阅读</h2><div class="nv nw gp gr nx ny"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-build-a-decentralized-ecommerce-platform-with-react-and-solidity-part-two-cb4650f827b3"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd io gy z fp od fr fs oe fu fw im bi translated">如何建立一个具有反应能力和可靠性的分散式电子商务平台</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">第2部分:构建前端</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oh l"><div class="oy l oj ok ol oh om lj ny"/></div></div></a></div></div></div>    
</body>
</html>
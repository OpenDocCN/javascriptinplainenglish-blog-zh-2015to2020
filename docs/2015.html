<html>
<head>
<title>Vue.js Tips and Tricks — State and Rendering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js提示和技巧—状态和渲染</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-js-tips-and-tricks-state-and-rendering-bd4c72fa63a6?source=collection_archive---------9-----------------------#2020-05-12">https://javascript.plainenglish.io/vue-js-tips-and-tricks-state-and-rendering-bd4c72fa63a6?source=collection_archive---------9-----------------------#2020-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e9722d0e755402d627136f8121c3e6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5oaGM5IDYsr6QrMG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jamie452?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jamie Street</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e96f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="278e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些开发Vue应用程序时需要注意的技巧和诀窍，以节省时间并减少产生bug的机会。</p><h1 id="7388" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Vuex进行应用程序范围的状态管理</h1><p id="c4f9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vuex是一个很棒的库，为Vue.js带来了应用程序范围的状态管理。这是管理Vue应用程序状态的最简单的解决方案。</p><p id="bc73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要记住的是使用getters获取数据，使用mutations设置基本数据。这些状态存储在存储器中。动作用于更复杂的商店数据更新。它用于提交多个变化和异步存储更新。模块让我们把一切分成可管理的部分。</p><p id="a12a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><p id="addd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="aa0b" class="mq lc iq mh b gy mr ms l mt mu">const store = new Vuex.Store({<br/>  state: {<br/>    count: 0<br/>  },<br/>  mutations: {<br/>    increment(state, payload) {<br/>      state.count += payload;<br/>    }<br/>  },<br/>  getters: {<br/>    count: state =&gt; state.count<br/>  }<br/>});</span><span id="cb8d" class="mq lc iq mh b gy mv ms l mt mu">Vue.component("app-button", {<br/>  template: "&lt;button @click='increment(2)'&gt;Increment&lt;/button&gt;",<br/>  methods: {<br/>    ...Vuex.mapMutations(["increment"])<br/>  }<br/>});<br/>Vue.component("app-counter", {<br/>  template: "&lt;p&gt;{{count}}&lt;/p&gt;",<br/>  computed: {<br/>    ...Vuex.mapGetters(["count"])<br/>  }<br/>});</span><span id="9936" class="mq lc iq mh b gy mv ms l mt mu">new Vue({<br/>  el: "#app",<br/>  store<br/>});</span></pre><p id="8cdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4150" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@2.0.0"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;app-button&gt;&lt;/app-button&gt;<br/>      &lt;app-counter&gt;&lt;/app-counter&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6a29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，<code class="fe me mf mg mh b">app-button</code>和<code class="fe me mf mg mh b">app-counter</code>是兄弟姐妹，所以如果没有一些帮助，很难在它们之间传递数据。因此，我们可以使用Vuex创建一个存储<code class="fe me mf mg mh b">count</code>状态的存储，两个组件都可以访问它。</p><p id="ab1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需将<code class="fe me mf mg mh b">store</code>传递到我们的主Vue实例中，然后我们可以用<code class="fe me mf mg mh b">mapMutations</code>方法映射方法中带有<code class="fe me mf mg mh b">mapMutations</code>的get突变。</p><p id="e287" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们调用<code class="fe me mf mg mh b">mapGetters</code>方法将getters映射到计算的属性。</p><p id="221e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">mutations</code>属性中，我们有<code class="fe me mf mg mh b">increment</code>方法，它采用一个<code class="fe me mf mg mh b">payload</code>参数来更新<code class="fe me mf mg mh b">count</code>状态。</p><p id="f2d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getters</code>具有返回<code class="fe me mf mg mh b">count</code>状态的<code class="fe me mf mg mh b">count</code>。</p><p id="f795" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">app-button</code>组件中，我们有从<code class="fe me mf mg mh b">mapMutations</code>方法获得的带有<code class="fe me mf mg mh b">increment</code>方法的点击处理程序，该方法调用带有<code class="fe me mf mg mh b">2</code>的<code class="fe me mf mg mh b">payload </code>的<code class="fe me mf mg mh b">increment</code>变异。</p><p id="100b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们每次点击“然后”按钮时,<code class="fe me mf mg mh b">state.count</code>就会更新2。因此，我们看到按钮更新了屏幕上的<code class="fe me mf mg mh b">count</code>。</p><h1 id="e913" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">了解Vue组件实例如何工作</h1><p id="63d3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须知道Vue实例是如何工作的，这样我们才不会创建缓慢且有问题的代码。</p><p id="d38d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们必须知道<code class="fe me mf mg mh b">data</code>属性应该有一个函数作为它的值，因为我们不想与其他实例共享数据。</p><p id="26ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，因为如果<code class="fe me mf mg mh b">data</code>属性是一个函数，Vue就不必完全实例化整个组件，所以节省了内存。其他所有东西，如方法、计算属性定义和生命周期钩子，都只创建和存储一次。</p><p id="cc1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该知道我们需要<code class="fe me mf mg mh b">this</code>来访问<code class="fe me mf mg mh b">data</code>返回的属性，因为我们正在访问组件实例的数据。我们传入<code class="fe me mf mg mh b">Vue.component</code>或从单文件组件导出的对象仅用于定义组件。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9fbbcdb1e38b9a10dac2ad1ff5f61766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B68LtvLYWSSHxVk_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@eli_j?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Elias Castillo</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="4659" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正确重新插入Vue组件</h1><p id="8c6f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该正确地重新放置Vue组件。最好的方法是在一个组件上设置一个<code class="fe me mf mg mh b">key</code>道具，这样当它的内容更新时，Vue就可以识别出更新的组件并相应地重新编辑它。</p><p id="0920" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，当我们使用<code class="fe me mf mg mh b">v-for</code>时，我们应该将<code class="fe me mf mg mh b">key</code>道具的值设置为一个唯一的值，如下所示:</p><p id="d4a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6c7c" class="mq lc iq mh b gy mr ms l mt mu">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    people: [<br/>      { id: 1, name: "John" },<br/>      { id: 2, name: "Sarah" },<br/>      { id: 3, name: "Jane" }<br/>    ]<br/>  },<br/>  methods: {<br/>    remove(index) {<br/>      this.people.splice(index, 1);<br/>    }<br/>  }<br/>});</span></pre><p id="7f62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ddcb" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@2.0.0"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p v-for="(p, index)  in people" :key="p.id"&gt;<br/>        {{p.name}} - {{index}} &lt;button @click="remove(index)"&gt;Delete&lt;/button&gt;<br/>      &lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="d320" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有<code class="fe me mf mg mh b">key</code>道具，它被设置为<code class="fe me mf mg mh b">p.id</code>的值。它是唯一的，所以当我们单击“删除”按钮时，它可以用来识别要删除和重新提交的正确组件。</p><h1 id="be50" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="321a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vuex非常适合应用范围内的状态管理。此外，我们必须了解Vue实例是如何工作的，这样我们就不会犯像在组件中为对象设置<code class="fe me mf mg mh b">data</code>这样的错误。最后，我们应该将<code class="fe me mf mg mh b">key</code>道具添加到使用<code class="fe me mf mg mh b">v-for</code>渲染的任何东西中，这样当我们操纵项目时，重新渲染就可以正确完成。</p><h2 id="e9a8" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">简明英语团队备注</strong></h2><p id="33e3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一句如下的话来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"> <strong class="kf ir"> JavaScript简单明了</strong> </a>、<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener">T21【AI】简单明了 </a>、<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX</strong></a>、<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener">、<strong class="kf ir"> Python简单明了</strong>、</a>、<strong class="kf ir">T33】——谢谢你们，继续学习吧！</strong></p><p id="ad40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
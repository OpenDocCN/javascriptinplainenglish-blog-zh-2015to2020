<html>
<head>
<title>Vuelidate — Errors and Lists Validation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuelidate —错误和列表验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vuelidate-errors-and-lists-validation-2439f50a9dac?source=collection_archive---------5-----------------------#2020-12-05">https://javascript.plainenglish.io/vuelidate-errors-and-lists-validation-2439f50a9dac?source=collection_archive---------5-----------------------#2020-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b038549001cc69a4b92d35d4da05bae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t2DQO-c7XNNPsuUF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@emmamatthews?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Emma Matthews Digital Content Production</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="de49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，Vue.js没有任何表单验证功能。</p><p id="2094" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们需要添加自己的表单验证库或自己的代码。</p><p id="6ce0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何用Vuelidate验证表单。</p><h1 id="918b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">$error vs $anyError</h1><p id="c819" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">$error</code>和<code class="fe me mf mg mh b">$anyError</code>验证属性得到表单验证错误。</p><p id="bd25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">$dirty</code>和<code class="fe me mf mg mh b">$anyDirty</code>检查表格是否被修改。</p><p id="effa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2627" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div&gt;<br/>      &lt;div :class="{ 'form-group--error': $v.name.$error }"&gt;<br/>        &lt;label&gt;name&lt;/label&gt;<br/>        &lt;input v-model.trim="$v.name.$model"&gt;<br/>        &lt;div class="error" v-if="!$v.name.required"&gt;name is required.&lt;/div&gt;<br/>      &lt;/div&gt;</span><span id="6276" class="mq lc iq mh b gy mv ms l mt mu">&lt;div :class="{ 'form-group--error': $v.age.$error }"&gt;<br/>        &lt;label&gt;age&lt;/label&gt;<br/>        &lt;input v-model.trim="$v.age.$model"&gt;<br/>      &lt;/div&gt;<br/>      &lt;div class="error" v-if="!$v.age.required"&gt;age is required.&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { required } from "vuelidate/lib/validators";<br/>export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      name: "",<br/>      age: ""<br/>    };<br/>  },<br/>  validations: {<br/>    name: {<br/>      required<br/>    },<br/>    age: {<br/>      required<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="ab1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们给出了<code class="fe me mf mg mh b">$v.age.$error</code>和<code class="fe me mf mg mh b">$v.name.$error</code>属性来得到误差。</p><p id="018a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们是<code class="fe me mf mg mh b">true</code>，那么<code class="fe me mf mg mh b">form-group--error</code>类将被应用。</p><h1 id="5067" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">验证组</h1><p id="904c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建验证组来一起验证所有的表单域。</p><p id="7e5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e689" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div&gt;<br/>      &lt;div :class="{ 'form-group--error': $v.name.$error }"&gt;<br/>        &lt;label&gt;name&lt;/label&gt;<br/>        &lt;input v-model.trim="$v.name.$model"&gt;<br/>        &lt;div class="error" v-if="!$v.name.required"&gt;name is required.&lt;/div&gt;<br/>      &lt;/div&gt;</span><span id="4080" class="mq lc iq mh b gy mv ms l mt mu">      &lt;div :class="{ 'form-group--error': $v.age.$error }"&gt;<br/>        &lt;label&gt;age&lt;/label&gt;<br/>        &lt;input v-model.trim="$v.age.$model"&gt;<br/>        &lt;div class="error" v-if="!$v.age.required"&gt;age is required.&lt;/div&gt;<br/>      &lt;/div&gt;</span><span id="5733" class="mq lc iq mh b gy mv ms l mt mu">      &lt;div :class="{ 'form-group--error': $v.phone.mobile.$error }"&gt;<br/>        &lt;label&gt;mobile phone&lt;/label&gt;<br/>        &lt;input v-model.trim="$v.phone.mobile.$model"&gt;<br/>        &lt;div class="error" v-if="!$v.phone.mobile.required"&gt;mobile phone is required.&lt;/div&gt;<br/>      &lt;/div&gt;</span><span id="f17f" class="mq lc iq mh b gy mv ms l mt mu">&lt;div v-if="$v.validationGroup.$error"&gt;group is invalid.&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { required } from "vuelidate/lib/validators";<br/>export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      name: "",<br/>      age: "",<br/>      phone: {<br/>        mobile: ""<br/>      }<br/>    };<br/>  },<br/>  validations: {<br/>    name: {<br/>      required<br/>    },<br/>    age: {<br/>      required<br/>    },<br/>    phone: {<br/>      mobile: {<br/>        required<br/>      }<br/>    },<br/>    validationGroup: ["name", "age", "phone.mobile"]<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="48f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">validations</code>属性中添加了<code class="fe me mf mg mh b">validationGroup</code>属性来添加一个验证组。</p><p id="0a35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有一个包含属性名称的字符串数组。</p><p id="9ef2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果属性是嵌套的，则属性由点分隔。</p><p id="7577" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在模板中，我们获取<code class="fe me mf mg mh b">$v.validationGroup.$error</code>属性来查看组中的字段是否有错误。</p><h1 id="c040" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">集合验证</h1><p id="7d45" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用关键字<code class="fe me mf mg mh b">$each</code>验证集合。</p><p id="95d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0f89" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div v-for="(v, index) in $v.people.$each.$iter"&gt;<br/>      &lt;div class="form-group" :class="{ 'form-group--error': v.$error }"&gt;<br/>        &lt;label&gt;Name&lt;/label&gt;<br/>        &lt;input v-model.trim="v.name.$model"&gt;<br/>      &lt;/div&gt;<br/>      &lt;div v-if="!v.name.required"&gt;Name is required.&lt;/div&gt;<br/>      &lt;div<br/>        v-if="!v.name.minLength"<br/>      &gt;Name must have at least {{ v.name.$params.minLength.min }} letters.&lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;div&gt;<br/>      &lt;button class="button" <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="people.push({name: ''})"&gt;Add&lt;/button&gt;<br/>      &lt;button class="button" <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="people.pop()"&gt;Remove&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="form-group" :class="{ 'form-group--error': $v.people.$error }"&gt;&lt;/div&gt;<br/>    &lt;div<br/>      v-if="!$v.people.minLength"<br/>    &gt;List must have at least {{ $v.people.$params.minLength.min }} elements.&lt;/div&gt;<br/>    &lt;div v-else-if="!$v.people.required"&gt;List must not be empty.&lt;/div&gt;<br/>    &lt;div v-else-if="$v.people.$error"&gt;List is invalid.&lt;/div&gt;<br/>    &lt;button class="button" <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$v.people.$touch"&gt;$touch&lt;/button&gt;<br/>    &lt;button class="button" <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$v.people.$reset"&gt;$reset&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { required, minLength } from "vuelidate/lib/validators";<br/>export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      people: [<br/>        {<br/>          name: "mary"<br/>        },<br/>        {<br/>          name: ""<br/>        }<br/>      ]<br/>    };<br/>  },<br/>  validations: {<br/>    people: {<br/>      required,<br/>      minLength: minLength(3),<br/>      $each: {<br/>        name: {<br/>          required,<br/>          minLength: minLength(2)<br/>        }<br/>      }<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="f51c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">validations</code>属性中，我们用<code class="fe me mf mg mh b">$each</code>属性和<code class="fe me mf mg mh b">minLength</code>属性来设置<code class="fe me mf mg mh b">people</code>数组的最小长度。</p><p id="fb0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们在<code class="fe me mf mg mh b">name</code>字段中有<code class="fe me mf mg mh b">minLength</code>属性来检查输入的名称是否具有所需的长度。</p><p id="ebdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们有<code class="fe me mf mg mh b">$touch</code>和<code class="fe me mf mg mh b">$reset</code>方法，可以分别用来触发验证和重置验证状态。</p><h1 id="1151" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bf3b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Vuelidate验证列表并检查错误。</p><p id="9229" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Best Practices for Writing More Robust Code — Checking Undefined</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写更健壮代码的JavaScript最佳实践——检查未定义</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-for-writing-more-robust-code-checking-undefined-ba062d492f87?source=collection_archive---------3-----------------------#2020-05-07">https://javascript.plainenglish.io/javascript-best-practices-for-writing-more-robust-code-checking-undefined-ba062d492f87?source=collection_archive---------3-----------------------#2020-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a4627b5e31e8e023fa4d240abb9e9d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CCRRpk5aetq2bVeA"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@zurux?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Viktor Juric</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0439" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种简单易学的编程语言。编写运行并执行某些操作的程序很容易。然而，很难考虑所有的用例并编写健壮的JavaScript代码。</p><p id="2c48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究检查<code class="fe lb lc ld le b">undefined</code>和属性是否存在的方法，以防止JavaScript程序崩溃。</p><h1 id="80f4" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">使用typeof运算符检查未定义的</h1><p id="1909" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">undefined</code>是我们经常遇到的返回<code class="fe lb lc ld le b">undefined</code>的方法或者试图使用不存在的属性的值。因此，在执行我们的操作之前，我们应该检查某个变量是否为<code class="fe lb lc ld le b">undefined</code>。</p><p id="8021" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过使用<code class="fe lb lc ld le b">typeof</code>操作符或<code class="fe lb lc ld le b">===</code>操作符来检查<code class="fe lb lc ld le b">undefined</code>。</p><p id="8155" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以用<code class="fe lb lc ld le b">typeof</code>操作符来实现，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="e691" class="mq lg iq le b gy mr ms l mt mu">if (typeof foo === 'undefined') {<br/>  //...<br/>}</span></pre><p id="7afe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们通过对<code class="fe lb lc ld le b">foo</code>使用<code class="fe lb lc ld le b">typeof</code>操作符来检查<code class="fe lb lc ld le b">foo</code>是否为<code class="fe lb lc ld le b">undefined</code>，并查看它是否返回<code class="fe lb lc ld le b">'undefined'</code>。</p><p id="6496" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那我们就做点什么。如果<code class="fe lb lc ld le b">foo</code>不是<code class="fe lb lc ld le b">undefined</code>,我们也可以通过写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7f78" class="mq lg iq le b gy mr ms l mt mu">if (typeof foo !== 'undefined') {<br/>  //...<br/>}</span></pre><p id="e2fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很重要，因为试图对某些东西做任何操作都会使我们的JavaScript应用程序崩溃。</p><p id="0178" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，通过检查是否是<code class="fe lb lc ld le b">undefined</code>来检查属性是否存在也很重要。如果不是<code class="fe lb lc ld le b">undefined</code>，则属性存在。</p><p id="451f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了检查对象属性是否存在，我们也可以使用<code class="fe lb lc ld le b">hasOwnPropety</code>来查看属性是否作为非继承属性存在。</p><p id="9396" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以检查对象中是否存在属性，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="f94a" class="mq lg iq le b gy mr ms l mt mu">if (typeof foo.bar !== 'undefined' &amp;&amp;<br/>  typeof foo.bar.baz !== 'undefined') {<br/>  //...<br/>}</span></pre><p id="340d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们通过检查<code class="fe lb lc ld le b">foo.bar</code>和<code class="fe lb lc ld le b">foo.bar.baz</code>是否都不是<code class="fe lb lc ld le b">undefined</code>来检查它们是否存在。如果第一个不存在，那么我们知道<code class="fe lb lc ld le b">foo.bar</code>存在，那么我们可以继续检查<code class="fe lb lc ld le b">foo.bar.baz</code>是否存在。</p><p id="db15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能直接跳到第二个表达式，只写<code class="fe lb lc ld le b">typeof foo.bar.baz !== ‘undefined’</code>，因为<code class="fe lb lc ld le b">foo.bar</code>可能不存在。因此，它可能是<code class="fe lb lc ld le b">undefined</code>，所以在进行第二次检查之前，我们还必须检查<code class="fe lb lc ld le b">foo.bar</code>是否存在。</p><p id="544c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想对<code class="fe lb lc ld le b">foo.bar.baz</code>做一些操作，这是很关键的，因为这些属性可能不存在。</p><h1 id="9b12" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">object . prototype . hasownproperty</h1><p id="2f14" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">要检查一个属性是否作为非继承属性存在于对象中，我们也可以在对象实例中使用<code class="fe lb lc ld le b">hasOwnProperty</code>方法。</p><p id="6884" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下重写我们的属性检查:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="f33a" class="mq lg iq le b gy mr ms l mt mu">if (foo.hasOwnProperty('bar') &amp;&amp;<br/>  foo.bar.hasOwnProperty('baz')) {<br/>  //...<br/>}</span></pre><p id="a17c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们检查了<code class="fe lb lc ld le b">foo.bar</code>是否作为<code class="fe lb lc ld le b">foo.hasOwnProperty(‘bar’)</code>的非继承属性存在。然后如果<code class="fe lb lc ld le b">foo.bar</code>存在，我们通过写<code class="fe lb lc ld le b">foo.bar.hasOwnProperty(‘baz’)</code>来检查<code class="fe lb lc ld le b">foo.bar.baz</code>是否存在。</p><p id="6856" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，如果属性被显式设置为<code class="fe lb lc ld le b">undefined</code>，那么<code class="fe lb lc ld le b">hasOwnProperty</code>仍然返回<code class="fe lb lc ld le b">true</code>，所以即使我们使用<code class="fe lb lc ld le b">hasOwnProperty</code>，我们可能仍然需要检查属性是否被显式设置为<code class="fe lb lc ld le b">undefined</code>。</p><p id="9dee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe lb lc ld le b">typeof</code>对于检查<code class="fe lb lc ld le b">undefined</code>可能更可靠，因为无论<code class="fe lb lc ld le b">undefined</code>是隐式的，也就是当属性不存在时，或者当它确实存在并被显式设置为<code class="fe lb lc ld le b">undefined</code>时，它都有效。</p><h1 id="7edf" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">===运算符</h1><p id="4027" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们也可以只使用<code class="fe lb lc ld le b">===</code>操作符来检查<code class="fe lb lc ld le b">undefined</code>。例如，我们可以直接与<code class="fe lb lc ld le b">===</code>操作符进行比较来检查<code class="fe lb lc ld le b">undefined</code>，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="4e3c" class="mq lg iq le b gy mr ms l mt mu">if (foo.bar !== undefined) {<br/>  //...<br/>}</span></pre><p id="e6b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码也可以工作，因为<code class="fe lb lc ld le b">===</code>在进行任何比较之前不进行任何数据类型强制。</p><h1 id="68d8" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">对象. is</h1><p id="5760" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">最后，我们可以使用<code class="fe lb lc ld le b">Object.is</code>方法来检查<code class="fe lb lc ld le b">undefined</code>。它需要两个参数，这是我们想要比较的项目。</p><p id="c92c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">Object.is</code>与<code class="fe lb lc ld le b">===</code>不同，因为<code class="fe lb lc ld le b">===</code> +0和-0在<code class="fe lb lc ld le b">Object.is</code>中被认为是不同的，而<code class="fe lb lc ld le b">===</code>并非如此。同样，<code class="fe lb lc ld le b">NaN</code>被认为与<code class="fe lb lc ld le b">Object.is</code>本身相同。</p><p id="1958" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，对于比较<code class="fe lb lc ld le b">undefined</code>，在<code class="fe lb lc ld le b">Object.is</code>和<code class="fe lb lc ld le b">===</code>之间没有区别。</p><p id="8701" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以使用下面的<code class="fe lb lc ld le b">Object.is</code>来检查<code class="fe lb lc ld le b">undefined</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c950" class="mq lg iq le b gy mr ms l mt mu">if (Object.is(foo.bar, undefined)) {<br/>  //...<br/>}</span></pre><p id="8f84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码检查<code class="fe lb lc ld le b">foo.bar</code>是否为<code class="fe lb lc ld le b">undefined</code>或者<code class="fe lb lc ld le b">foo.bar</code>是否存在，就像我们对<code class="fe lb lc ld le b">===</code>操作符所做的那样。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/5ad5007a8cd8964c15d044e0f84cdf70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IS0LNw3t2n8qM_rs"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@davidrotimi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">David Rotimi</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7acd" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="5346" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">在JavaScript中有很多方法可以检查某个东西是否为<code class="fe lb lc ld le b">undefined</code>。一种方法是使用<code class="fe lb lc ld le b">typeof</code>操作符来检查某个东西是否具有类型<code class="fe lb lc ld le b">'undefined'</code>。</p><p id="9b34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以使用<code class="fe lb lc ld le b">===</code>运算符直接比较某个东西是否为<code class="fe lb lc ld le b">undefined</code>。同样，我们可以使用<code class="fe lb lc ld le b">Object.is</code>来检查<code class="fe lb lc ld le b">undefined</code>。</p><p id="98e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了检查一个属性是否存在于一个对象中，我们可以使用对象实例的<code class="fe lb lc ld le b">hasOwnProperty</code>方法。然而，如果该属性被显式设置为<code class="fe lb lc ld le b">undefined</code>，这将不起作用，因为它存在并且被设置为<code class="fe lb lc ld le b">undefined</code>。</p><h2 id="087e" class="mq lg iq bd lh mw mx dn ll my mz dp lp ko na nb lt ks nc nd lx kw ne nf mb ng bi translated">来自简明英语团队的说明</h2><p id="7aa4" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kf ir">JavaScript in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="6aef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
<html>
<head>
<title>How I built a browser extension with Vue (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何用Vue构建浏览器扩展(第2部分)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-i-built-a-browser-extension-with-vue-part-2-2c4ab2dd752d?source=collection_archive---------0-----------------------#2018-08-12">https://javascript.plainenglish.io/how-i-built-a-browser-extension-with-vue-part-2-2c4ab2dd752d?source=collection_archive---------0-----------------------#2018-08-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a989" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文的第2部分，我将向您展示如何使用我们在第1部分开始构建的浏览器扩展。</p><p id="4bc7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">还没读第一部分吗？去看看这里的<a class="ae ki" href="https://medium.com/javascript-in-plain-english/i-built-a-browser-extension-with-vue-76779d0a6238" rel="noopener"/>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/09a17cf141b6150c9c00506df239ce94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFL3csJ96lQpY0IVT9SE3w.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Let’s get Vueified!</figcaption></figure><h1 id="6bbe" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">先决条件</h1><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="c3f8" class="mc la in ly b gy md me l mf mg">$ npm -v<br/>3.5.2<br/>$ node -v<br/>v8.10.0</span></pre><p id="2818" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您已经完成了第1部分，那么您现在应该有一个类似如下的扩展项目:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/ce12939aefad68a1f259765a6d929f41.png" data-original-src="https://miro.medium.com/v2/resize:fit:390/format:webp/0*K0sz5E1krdAladZH.png"/></div></figure><p id="961c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们扩展的核心是由一个html文件<code class="fe mi mj mk ly b">app.html</code>和<code class="fe mi mj mk ly b">app.js</code>中的脚本组成的，它为我们的扩展提供了一些基本的功能。</p><p id="2162" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这意味着在开发一个常规网站时，我们可以使用我们习惯的所有工具。</p><p id="6f59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您不熟悉<strong class="jm io"> Webpack </strong>或<strong class="jm io"> Laravel Mix </strong>，不要担心，只要按照步骤操作，我相信一旦我们开始使用<strong class="jm io"> Vue </strong>本身，您就会跟上。</p><p id="0a8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们初始化<code class="fe mi mj mk ly b">package.json</code>并拉入<strong class="jm io">拉拉夫</strong>T22】混音:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="ecd5" class="mc la in ly b gy md me l mf mg">npm init -y<br/>npm i --save-dev laravel-mix</span></pre><p id="a094" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Laravel Mix 带有一个默认的配置文件，所以让我们把它复制到我们的根目录。</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="b885" class="mc la in ly b gy md me l mf mg">cp node_modules/laravel-mix/setup/webpack.mix.js .</span></pre><p id="5c6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的扩展现在看起来像这样:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/2b4af43d39c5739f0aeb7b600aa390bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/0*96xctA4U8cEJVu-G.png"/></div></figure><p id="afde" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您查看了<strong class="jm io"> Laravel Mix </strong>的<a class="ae ki" href="https://github.com/JeffreyWay/laravel-mix/blob/master/docs/installation.md" rel="noopener ugc nofollow" target="_blank">安装指南</a>，其中有针对<code class="fe mi mj mk ly b">package.json</code>的推荐脚本，那么让我们也添加这些脚本:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="baaf" class="mc la in ly b gy md me l mf mg">{<br/>    ...<br/>    "main": "app.js",<br/>    "scripts": {<br/>        "dev": "NODE_ENV=development node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js",<br/>        "watch": "NODE_ENV=development node_modules/webpack/bin/webpack.js --watch --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js",<br/>        "hot": "NODE_ENV=development webpack-dev-server --inline --hot --config=node_modules/laravel-mix/setup/webpack.config.js",<br/>        "production": "NODE_ENV=production node_modules/webpack/bin/webpack.js --progress --hide-modules --config=node_modules/laravel-mix/setup/webpack.config.js"<br/>    },<br/>    "keywords": [],<br/>    ...<br/>}</span></pre><p id="95b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们做一些快速清理并将<code class="fe mi mj mk ly b">app.js</code>移动到<code class="fe mi mj mk ly b">assets/js</code>文件夹中。我们还需要适当地调整到<code class="fe mi mj mk ly b">app.html</code>中<code class="fe mi mj mk ly b">app.js</code>的路径，但我们将在稍后讨论。</p><p id="4a29" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你打开<code class="fe mi mj mk ly b">webpack.mix.js</code>文件，你会看到它包含了来自<strong class="jm io"> Laravel Mix </strong>的完整API。我们只需要一个方法调用，如下所示:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="2e6a" class="mc la in ly b gy md me l mf mg">let mix = require('laravel-mix');<br/>mix.js('assets/js/app.js', 'dist/');</span></pre><p id="68e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你跑了</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="e089" class="mc la in ly b gy md me l mf mg">npm run dev</span></pre><p id="bf7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您应该看到您的构建通过，并且一个<code class="fe mi mj mk ly b">dist</code>文件夹应该出现在您的根文件夹中:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/76c7426658c44c14e2510603df48e0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/0*qmy4-lMkiUA02Cd7.png"/></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/2754cfd594ce654953ba4d2f2d52668e.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/0*fa_OXX0umBxIM1RW.png"/></div></figure><p id="442b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mi mj mk ly b">app.js</code>的dist版本是我们将在<code class="fe mi mj mk ly b">app.html</code>中链接的版本。</p><p id="d14a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mo">注:dist是distribution的简称，顺便说一下。Laravel Mix负责缩小我们的JS代码，以及执行可能需要的其他任务，例如从ES6/7/8向下转换到ES5，以便旧浏览器可以处理代码。如果我们刚刚说的听起来有点混乱，请让我们知道，也许我们会写一篇文章来更好地解释它🤓</em></p><p id="27a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们现在就这样做，同时在那个文件中，让我们也清除那个文件一点:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="c243" class="mc la in ly b gy md me l mf mg">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="utf-8"&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;div id="my-app"&gt;&lt;/div&gt;<br/>        &lt;script src="dist/app.js"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="d491" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如您所见，我从第1部分中删除了按钮和列表。我们现在唯一需要的是一个包装器，用于装载我们的<strong class="jm io"> Vue </strong>实例，在本例中是带有<code class="fe mi mj mk ly b">id</code> <strong class="jm io"> </strong>和<code class="fe mi mj mk ly b">my-app</code>的<code class="fe mi mj mk ly b">div</code>。还要注意到<code class="fe mi mj mk ly b">app.js</code>的路径，它现在正确地指向<code class="fe mi mj mk ly b">dist</code>目录中的编译版本。</p><h1 id="1983" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">维菲。</h1><p id="7d0e" class="pw-post-body-paragraph jk jl in jm b jn mp jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd mt kf kg kh ig bi translated">首先，拉进<strong class="jm io"> Vue </strong>作为依赖关系:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="12f2" class="mc la in ly b gy md me l mf mg">npm i --save-dev vue</span></pre><p id="21dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们已经准备好创建一个<strong class="jm io"> Vue </strong>实例并挂载它。由于<code class="fe mi mj mk ly b">app.js</code>是我们应用程序的入口点，我们就在那里做吧。我们可以完全删除前面的代码，因为它现在不是那么重要。</p><p id="f817" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的<code class="fe mi mj mk ly b">assets/js/app.js</code>现在看起来像这样</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="d8b9" class="mc la in ly b gy md me l mf mg">import Vue from 'vue';<br/>import App from './components/app.vue'</span><span id="07d2" class="mc la in ly b gy mu me l mf mg">new Vue({<br/>    el: '#my-app',<br/>    components: {<br/>        App<br/>    },<br/>    render(h) {<br/>        return h('app');<br/>    }<br/>});</span></pre><p id="3dae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们需要使用<strong class="jm io"> Vue </strong>渲染功能，因为<strong class="jm io"> Firefox </strong>不允许<strong class="jm io"> Vue </strong>注入渲染脚本。所以让我们创建根<code class="fe mi mj mk ly b">app.vue</code>组件:</p><p id="09c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe mi mj mk ly b">assets/js/components/app.vue</code>中:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="723d" class="mc la in ly b gy md me l mf mg">&lt;template&gt;<br/>    &lt;div&gt;<br/>        Hello firefox extension. I am Vue!<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    export default { }<br/>&lt;/script&gt;</span></pre><p id="d05a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您的项目结构应该如下所示:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/934942d50853b55729850700cb538f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/0*UmRPlY4H66PFxZK5.png"/></div></figure><p id="7f8f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不要忘记运行<code class="fe mi mj mk ly b">npm run dev</code>，这样修改就会应用到您的<strong class="jm io"> Javascript </strong>中。或者运行<code class="fe mi mj mk ly b">npm run watch</code>，你的资产会在你每次修改时自动编译。</p><p id="3653" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">测试一下，您应该会看到与本文第一部分非常相似的结果。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/cc2582a53f5f783bb755d3d437a78711.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/0*bKmi7E2oY3Q7yEUb.png"/></div></figure><p id="f10a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在你已经成功地创建了你的第二个<strong class="jm io"> Firefox </strong>扩展。这次使用<strong class="jm io"> Vue </strong>。干得好！🎉</p><h1 id="28ce" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">快到了！</h1><p id="cc57" class="pw-post-body-paragraph jk jl in jm b jn mp jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd mt kf kg kh ig bi translated">实际上，这可能是这篇文章的结尾，因为如果你知道<strong class="jm io"> Vue </strong>，你现在几乎可以做任何你想做的事情。</p><p id="7a47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是我还是会在<strong class="jm io"> Vue </strong>中向你展示<a class="ae ki" href="https://medium.com/javascript-in-plain-english/i-built-a-browser-extension-with-vue-76779d0a6238" rel="noopener">第1部分</a>的功能。为了刷新我们的记忆，我们访问了浏览器关于当前窗口中打开的选项卡的信息，并将它们的标题附加到一个无序列表中。</p><p id="438a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">没那么复杂，就这么办吧。</p><p id="790b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们所有的工作现在都将集中在<code class="fe mi mj mk ly b">app.vue</code>上，因为没有必要修改<code class="fe mi mj mk ly b">app.js</code>。</p><p id="2a38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们准备HTML:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="5d70" class="mc la in ly b gy md me l mf mg">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;ul class="tab-list"&gt;<br/>            &lt;li class="tab-item"&gt;This is&lt;/li&gt;<br/>            &lt;li class="tab-item"&gt;where the tabs&lt;/li&gt;<br/>            &lt;li class="tab-item"&gt;will come&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>        &lt;button @click="getTabs()" class="button"&gt;Get tabs!&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    ...<br/>&lt;/script&gt;<br/>&lt;style lang="scss"&gt;<br/>    ...<br/>&lt;/style&gt;</span></pre><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/afa4f840a92998a24ec0d582082d1fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/format:webp/0*TkiFbxH5SEACWos6.png"/></div></figure><p id="8863" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将工作，但我会添加一点点的造型，所以它看起来不是默认的。</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="f29c" class="mc la in ly b gy md me l mf mg">&lt;template&gt;<br/>...<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>...<br/>&lt;/script&gt;<br/>&lt;style lang="scss"&gt;<br/>    * { box-sizing: border-box; }<br/>    body { min-width: 300px; font-family: sans-serif; padding: 1em; }</span><span id="dda5" class="mc la in ly b gy mu me l mf mg">    .tab-list {<br/>        list-style: none;<br/>        margin: 0 0 1em 0;<br/>        padding: 0;<br/>    }</span><span id="8611" class="mc la in ly b gy mu me l mf mg">    .tab-item {<br/>        padding: .6em;<br/>        border-bottom: 1px dashed #eee;<br/>    }</span><span id="f236" class="mc la in ly b gy mu me l mf mg">    button {<br/>        border-radius: 2px;<br/>        background: dodgerblue;<br/>        color: white;<br/>        font-weight: bold;<br/>        text-align: center;<br/>        padding: .6em .8em;<br/>        border: 0;<br/>        box-shadow: 0 1px 2px gray;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="3778" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以现在看起来是这样的:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi my"><img src="../Images/7fa818e4bb02dee6e9848e2efa9d1f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/0*YqiK5w-iqDuYVXRw.png"/></div></figure><p id="1689" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这很好，但是现在列表项是硬编码的。让我们通过创建一个带有选项卡数组的数据属性并在模板中列出它们来解决这个问题。</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="d389" class="mc la in ly b gy md me l mf mg">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;ul class="tab-list"&gt;<br/>            &lt;li class="tab-item" v-for="tab in tabs"&gt;{{ tab }}&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>        &lt;button @click="getTabs()" class="button"&gt;Get tabs!&lt;/button&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    export default {<br/>        data() {<br/>            return {<br/>                tabs: []<br/>            }<br/>        }<br/>    }<br/>&lt;/script&gt;<br/>&lt;style lang="scss"&gt;<br/>...<br/>&lt;/style&gt;</span></pre><p id="98d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">很好，现在我们终于可以创建<code class="fe mi mj mk ly b">getTabs</code>方法了，它将从浏览器中获取选项卡并显示它们:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="a931" class="mc la in ly b gy md me l mf mg">&lt;template&gt;<br/>...<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>    export default {<br/>        data() {<br/>            return {<br/>                tabs: []<br/>            }<br/>        },<br/>        methods: {<br/>            async getTabs() {<br/>                try {<br/>                    // Await the tabs (since query method returns a promise)<br/>                    const fetchedTabs = await browser.tabs.query({ currentWindow: true });<br/>                    // Clear current tabs<br/>                    this.tabs = [];<br/>                    // Push new tabs<br/>                    fetchedTabs.forEach(tab =&gt; {<br/>                        this.tabs.push(tab.title);<br/>                    })<br/>                } catch (e) { console.log(e); }<br/>            }<br/>        }<br/>    }<br/>&lt;/script&gt;<br/>&lt;style lang="scss"&gt;<br/>...<br/>&lt;/style&gt;</span></pre><p id="65c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mi mj mk ly b">getTabs</code>方法与本文的第一部分非常相似，但是这次我决定用<strong class="jm io">异步/等待</strong>方法来处理<code class="fe mi mj mk ly b">query</code>方法返回的承诺。</p><p id="2c6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">差不多就是这样了。现在你有了一个全功能的<strong class="jm io"> Firefox </strong>扩展和<strong class="jm io"> Vue！</strong></p><p id="3642" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们想向全世界发布我们的扩展呢？好吧，让我们也来看看！</p><h1 id="9cf4" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">如何发布你的Firefox扩展</h1><p id="246c" class="pw-post-body-paragraph jk jl in jm b jn mp jp jq jr mq jt ju jv mr jx jy jz ms kb kc kd mt kf kg kh ig bi translated">首先，您需要从您的项目创建一个单独的<code class="fe mi mj mk ly b">.zip</code>档案。不要包含<strong class="jm io"> node_modules </strong>目录，它只包含开发过程中需要的依赖项，而且相当大。您也不需要包含<code class="fe mi mj mk ly b">assets/js</code>文件夹，因为所有必要的脚本都已经编译到了<code class="fe mi mj mk ly b">dist</code>文件夹中。</p><p id="e6b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<strong class="jm io">终端</strong>我将创建一个<strong class="jm io"> zip存档</strong>，如下所示:</p><pre class="kk kl km kn gt lx ly lz ma aw mb bi"><span id="d04f" class="mc la in ly b gy md me l mf mg">zip -r my-extension.zip app.html assets/img dist manifest.json</span></pre><p id="692e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建一个名为<code class="fe mi mj mk ly b">my-extension.zip</code>的<code class="fe mi mj mk ly b">.zip</code>档案</p><p id="6c05" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<a class="ae ki" href="http://mozilla.org" rel="noopener ugc nofollow" target="_blank">mozilla.org</a>点击“提交新插件”按钮，进入<a class="ae ki" href="https://addons.mozilla.org/en-GB/developers/" rel="noopener ugc nofollow" target="_blank">开发者</a>插件页面。</p><p id="1404" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里你可以选择是使用Firefox附加组件管理器来分发你的扩展还是手动分发。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mz"><img src="../Images/e9414496b03948f694658b426e63ccce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NNdDS-VQ7Yv1VGIa.png"/></div></div></figure><p id="43d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我现在用手动选项。提交您的存档，您将看到它是否通过了签名流程:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi na"><img src="../Images/c42e49cc2bcdd0ae8b95afd37cdb4228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Xp-FzbgqbtdbnYvZ.png"/></div></div></figure><p id="e934" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">点击“Sign Add-on ”,你应该到达最后一步，在那里你可以下载一个代表你的扩展名的<code class="fe mi mj mk ly b">.xpi</code>文件。</p><p id="36af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在进入firefox的<code class="fe mi mj mk ly b">about:addons</code>页面，点击右边的齿轮，从文件中选择<strong class="jm io">安装插件。</strong></p><p id="2670" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">打开<code class="fe mi mj mk ly b">.xpi</code>文件，你会发现你已经成功安装了一个有效的、已签名的<strong class="jm io"> Firefox </strong>扩展，内置于<strong class="jm io"> Vue </strong>中。</p><p id="4a06" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如我在本文第1部分中所承诺的。系统将提示您授予扩展访问选项卡的权限。</p><p id="ebb6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">文章到此结束！</p><h2 id="9730" class="mc la in bd lb nb nc dn lf nd ne dp lj jv nf ng ln jz nh ni lr kd nj nk lv nl bi translated">这篇文章和其中使用的演示可以在Github 上作为开源项目获得。所以请随意投稿！</h2><h2 id="07e1" class="mc la in bd lb nb nc dn lf nd ne dp lj jv nf ng ln jz nh ni lr kd nj nk lv nl bi translated">有问题吗？在<a class="ae ki" href="https://twitter.com/DanCharousek" rel="noopener ugc nofollow" target="_blank">推特</a>上让我知道。</h2></div></div>    
</body>
</html>
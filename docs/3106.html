<html>
<head>
<title>5 Things You Need to Know in JavaScript Data Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript数据类型中你需要知道的5件事</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-things-you-need-to-know-in-javascript-data-types-c8e50fd87811?source=collection_archive---------4-----------------------#2020-08-29">https://javascript.plainenglish.io/5-things-you-need-to-know-in-javascript-data-types-c8e50fd87811?source=collection_archive---------4-----------------------#2020-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a6ca" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">深入了解JavaScript数据类型</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c9c50c85c762805144fbbf2f732cd0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Btgyg-caV2bSyWQH"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="de16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然JavaScript数据类型是程序员最熟悉的概念。但仍有5件事值得深入探讨。</p><ul class=""><li id="fc6d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">“void 0”、“null”和“undefined”的区别</li><li id="40f7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><em class="mg"> String.length </em>是真实长度吗？</li><li id="12e3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">比较浮点的正确方法。</li><li id="ba46" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">JavaScript中的类型转换</li><li id="659a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在JavaScript中检查数据类型</li></ul><h1 id="7701" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">“void 0”、“null”和“undefined”的区别</h1><h2 id="25c3" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">不明确的</h2><p id="7ec9" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined#:~:text=undefined%20is%20a%20property%20of,In%20modern%20browsers%20(JavaScript%201.8.&amp;text=A%20method%20or%20statement%20also,not%20have%20an%20assigned%20value." rel="noopener ugc nofollow" target="_blank">表格MDN </a>:</p><blockquote class="nq nr ns"><p id="073e" class="kw kx mg ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">undefined</code>是<em class="iq">全局对象</em>的一个属性。也就是说，它是全局范围内的变量。<code class="fe nw nx ny nz b">undefined</code>的初始值就是原始值<code class="fe nw nx ny nz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Glossary/Undefined" rel="noopener ugc nofollow" target="_blank">undefined</a></code>。</p></blockquote><p id="3896" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，名为<code class="fe nw nx ny nz b">undefined</code>的全局属性的值为<code class="fe nw nx ny nz b">undefined</code>。这个属性可以修改到ES5，那时它变成了只读的。</p><h2 id="b15f" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">空</h2><p id="b3d5" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">来自MDN:</p><blockquote class="nq nr ns"><p id="dc9d" class="kw kx mg ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated">值<code class="fe nw nx ny nz b">null</code>用一个文字写:<code class="fe nw nx ny nz b">null</code>。<code class="fe nw nx ny nz b">null</code>不是全局对象属性的标识符，就像<code class="fe nw nx ny nz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="noopener ugc nofollow" target="_blank">undefined</a></code>一样。相反，<code class="fe nw nx ny nz b">null</code>表示缺乏认同，表示一个变量没有指向对象。</p></blockquote><p id="fdb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与<code class="fe nw nx ny nz b">undefined</code>不同，默认情况下，它不会被分配给JavaScript中的任何内容。您只能手动设置<code class="fe nw nx ny nz b">null</code>的值。</p><h2 id="397a" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">无效<experssion/></h2><p id="62c7" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">来自MDN:</p><blockquote class="nq nr ns"><p id="1f8c" class="kw kx mg ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">void</code>运算符通常仅用于获取<code class="fe nw nx ny nz b">undefined</code>原始值，通常使用“<code class="fe nw nx ny nz b">void(0)</code>”(相当于“<code class="fe nw nx ny nz b">void 0</code>”)。在这些情况下，可以使用全局变量<code class="fe nw nx ny nz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="noopener ugc nofollow" target="_blank">undefined</a></code>。</p></blockquote><h2 id="7538" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">结论</h2><p id="1607" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">因为在JavaScript代码中<code class="fe nw nx ny nz b">undefined</code>是一个变量。尽管<code class="fe nw nx ny nz b">undefined</code>在ES5中被设为只读，我们仍然可以在局部范围内修改它的值。如下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="f8d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，为了避免无意的篡改，我们建议使用<code class="fe nw nx ny nz b"><strong class="ky ir">void 0</strong></code> <strong class="ky ir">来获得</strong> <code class="fe nw nx ny nz b"><strong class="ky ir">undefined</strong></code> <strong class="ky ir">值。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="80f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">null</code>只有一个值<code class="fe nw nx ny nz b">null</code>，其语义表示空值，与<code class="fe nw nx ny nz b">undefined</code>不同的是，<code class="fe nw nx ny nz b">null</code>是JavaScript关键字，因此您可以在任何代码中安全地使用<code class="fe nw nx ny nz b">null</code>关键字来获取<code class="fe nw nx ny nz b">null</code>值。</p><p id="e687" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还应该注意到<code class="fe nw nx ny nz b">null</code>和<code class="fe nw nx ny nz b">undefined</code>具有相同的值，但是类型不同。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/2fb0efe312214462e5e75f4d526ca571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Alr0yGfXRYSWVqOT"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@emilymorter?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Emily Morter</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3ca5" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated"><em class="od"> String.length </em>是真实长度吗？</h1><p id="2221" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">JavaScript使用的字符串格式UTF-16使用单个16位代码单元来表示最常用的字符，但对于不常用的字符需要使用两个代码单元，因此由<code class="fe nw nx ny nz b">length</code>、<code class="fe nw nx ny nz b">charAt</code>和<code class="fe nw nx ny nz b">charCodeAt</code>返回的值可能与字符串中的实际字符数不匹配。尤其是对于处理非英语字符串的操作。例如，您可以使用下面的代码来计算中文和英文混合字符串的长度。该函数通常用于输入字符长度受限的情况。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="9fde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ECMAScript 2016 (ed。7)建立了<code class="fe nw nx ny nz b">2^53 - 1</code>元素的最大长度。以前，没有规定最大长度。在Firefox中，字符串的最大长度为<code class="fe nw nx ny nz b">2**30 - 2</code> (~1GB)。在Firefox 65之前的版本中，最大长度是<code class="fe nw nx ny nz b">2**28 - 1</code> (~256MB)。</p><h1 id="7ef3" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">比较浮点的正确方法。</h1><p id="0c1c" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">你知道吗，在JavaScript中，0.1 + 0.2不等于0.3。这是一个典型的丧失精度的例子。如果要计算0.1 + 0.2的结果，计算机会先把0.1和0.2转换成二进制，然后相加，最后把相加的结果转换成十进制数。两次转换都会出现精度损失。所以得出的结果并不准确。</p><p id="281e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以测试浮点相等的正确方法是使用<code class="fe nw nx ny nz b">Number.EPSILON</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/d54a73b104467d9c724a637f065a2868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5QyON_YLSz3XCTkl"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Brett Jordan</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3d52" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">JavaScript中的类型转换</h1><p id="655d" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">在这一节中，我们重点关注数字和字符串之间的转换规则，以及对象和基本类型之间的转换规则。</p><h2 id="2740" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">将字符串转换为数字</h2><p id="9490" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">字符串转换成数字有三种方式，<code class="fe nw nx ny nz b">Number()</code>，<code class="fe nw nx ny nz b">parseInt()</code>，<code class="fe nw nx ny nz b">parseFloat()</code>。</p><p id="3cf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Number(): </strong>将数字字符串和null转换为数字。只要字符串采用正确的十进制、二进制、八进制和十六进制表示法，以及正确的符号科学记数法，就可以转换成数字。如果处理失败，返回<code class="fe nw nx ny nz b">NaN</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="0e59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> parseInt( </strong> string [，radix]<strong class="ky ir">):</strong><code class="fe nw nx ny nz b">parseInt</code>函数将其第一个参数转换为字符串，解析该字符串，然后返回一个整数或<code class="fe nw nx ny nz b">NaN</code>。</p><p id="e99a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果不是<code class="fe nw nx ny nz b">NaN</code>，返回值将是第一个参数的整数，作为指定<code class="fe nw nx ny nz b">radix</code>中的一个数字。(例如，<code class="fe nw nx ny nz b">10</code>的一个<code class="fe nw nx ny nz b">radix</code>由十进制数转换而来，<code class="fe nw nx ny nz b">8</code>由八进制转换而来，<code class="fe nw nx ny nz b">16</code>由十六进制转换而来，以此类推。)</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1fd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">parse float(string):</strong><code class="fe nw nx ny nz b"><strong class="ky ir">parseFloat()</strong></code>函数解析一个参数(如果需要，首先将其转换为字符串)并返回一个浮点数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="3890" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大多数情况下，<code class="fe nw nx ny nz b">Number()</code>是比<code class="fe nw nx ny nz b">parseInt()</code>和<code class="fe nw nx ny nz b">parseFloat()</code>更好的选择。如果使用<code class="fe nw nx ny nz b">parseInt()</code>，建议随时传入第二个参数。</p><h2 id="1035" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">将数字转换为字符串</h2><p id="5555" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">还有两种方法可以将<strong class="ky ir">数字</strong>转换成<strong class="ky ir">字符串</strong><code class="fe nw nx ny nz b"><strong class="ky ir">toString()</strong></code><strong class="ky ir"/><code class="fe nw nx ny nz b"><strong class="ky ir">String()</strong></code><strong class="ky ir">。</strong></p><p id="c695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">toString(</strong>【radix】<strong class="ky ir">)</strong>:<code class="fe nw nx ny nz b"><strong class="ky ir">toString()</strong></code>方法返回一个表示指定<code class="fe nw nx ny nz b">Number</code>对象的字符串。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="9e63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> String() </strong>:全局方法<code class="fe nw nx ny nz b">String()</code>可以将数字转换成字符串。它可以用于任何类型的数字、文字、变量或表达式。</p><h2 id="d6ed" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">原始包装对象</h2><p id="ebc7" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">一个对象有一组方法和属性。我们知道字符串有许多实用方法，比如<code class="fe nw nx ny nz b">substr</code>、<code class="fe nw nx ny nz b">indexOf</code>和<code class="fe nw nx ny nz b">replace</code>。何况他们还有一个<code class="fe nw nx ny nz b">length</code>属性。很明显，字符串也像对象一样。但字符串不是对象，它不允许您定义自定义方法和属性:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="4fdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是由于JavaScript中的<strong class="ky ir">包装对象</strong>造成的。除了<code class="fe nw nx ny nz b">null</code>和<code class="fe nw nx ny nz b">undefined</code>之外，所有的原始值，<strong class="ky ir">数字</strong>，<strong class="ky ir">字符串</strong>，<strong class="ky ir">布尔</strong>，<strong class="ky ir">符号</strong>，都有环绕原始值的对象等价物。</p><p id="8f92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们像对待对象一样对待一个原始值时(例如，通过访问属性和方法)，JavaScript在幕后创建一个包装器来包装这个值，并将其作为对象公开。JS引擎从不重用包装器对象，在使用一次后就将它们交给垃圾收集器。</p><p id="eda7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">避开<code class="fe nw nx ny nz b">String</code>、<code class="fe nw nx ny nz b">Number</code>和<code class="fe nw nx ny nz b">Boolean</code>物体。它们会使你的代码变得复杂，降低执行速度。</p><h2 id="cd98" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">对象转换为原始类型</h2><p id="546a" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">在<a class="ae kv" href="http://ecma-international.org/ecma-262/6.0/#sec-toprimitive" rel="noopener ugc nofollow" target="_blank"> ECMAScript语言规范</a>中，指定了<code class="fe nw nx ny nz b">ToPrimitive(input[,PreferredType])</code>函数，实现从对象到原语类型的转换。</p><blockquote class="nq nr ns"><p id="3c30" class="kw kx mg ky b kz la jr lb lc ld ju le nt lg lh li nu lk ll lm nv lo lp lq lr ij bi translated">抽象操作ToPrimitive接受一个输入参数和一个可选参数<em class="iq"> PreferredType </em>。抽象操作ToPrimitive将其输入参数转换为非对象类型。如果一个对象能够转换成一个以上的原语类型，它可以使用可选提示<em class="iq"> PreferredType </em>来支持该类型。</p></blockquote><p id="4e26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从对象转换为字符串和数字有两个步骤。</p><ol class=""><li id="a879" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr oe ly lz ma bi translated">使用<code class="fe nw nx ny nz b">ToPrimitive</code>将对象转换为原始值。</li><li id="2cfa" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr oe ly lz ma bi translated">使用<code class="fe nw nx ny nz b">valueOf</code>和<code class="fe nw nx ny nz b">toString</code>将原始值转换为字符串或数字</li></ol><p id="ed2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果<code class="fe nw nx ny nz b">valueOf</code>和<code class="fe nw nx ny nz b">toString</code>不存在，或者没有返回原始类型，将抛出<code class="fe nw nx ny nz b">TypeError</code>异常。</p><p id="17fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果从对象转换成字符串，先调用<code class="fe nw nx ny nz b">toString</code>方法，再调用<code class="fe nw nx ny nz b">valueOf</code>；如果从对象转换成数字，它首先调用<code class="fe nw nx ny nz b">valueOf</code>，然后调用<code class="fe nw nx ny nz b">toString</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="5a4f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在ES6之后，对象可以通过定义一个<code class="fe nw nx ny nz b">@@toPrimitive Symobl</code>方法来覆盖默认的<code class="fe nw nx ny nz b">ToPrimitive</code>行为。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/f7c711687094f739f4e4aa0b1c394f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Talr14iRjT3Qqs5j"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@antoine1003?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Antoine Dautry</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f0de" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">在JavaScript中检查数据类型</h1><p id="97bb" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">JavaScript中检查数据类型的方法有四种:<code class="fe nw nx ny nz b">typeof</code>、<code class="fe nw nx ny nz b">instanceof</code>、<code class="fe nw nx ny nz b">constructor</code>、<code class="fe nw nx ny nz b">Object.prototype.toString.call()</code>。</p><h2 id="58ad" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">类型of</h2><p id="8709" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><code class="fe nw nx ny nz b"><strong class="ky ir">typeof</strong></code>运算符返回一个表示未赋值操作数类型的字符串。结果包括:<code class="fe nw nx ny nz b">number</code>、<code class="fe nw nx ny nz b">boolean</code>、<code class="fe nw nx ny nz b">string</code>、<code class="fe nw nx ny nz b">symbol</code>、<code class="fe nw nx ny nz b">object</code>、<code class="fe nw nx ny nz b">undefined</code>、<code class="fe nw nx ny nz b">function</code>。</p><p id="2f93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，在<code class="fe nw nx ny nz b">typeof</code>的返回和运行时数据类型之间有两个例外。一个是运行时数据类型为<code class="fe nw nx ny nz b">Null</code>的<code class="fe nw nx ny nz b">typeof null</code>返回<code class="fe nw nx ny nz b">object</code>，另一个是运行时数据类型为<code class="fe nw nx ny nz b">Object</code>的<code class="fe nw nx ny nz b">typeof (function(){})</code>返回<code class="fe nw nx ny nz b">function</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="b97f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为<code class="fe nw nx ny nz b">typeof</code>的结果与运行时类型不一致，所以我们只有在准确知道变量在<code class="fe nw nx ny nz b">number</code>、<code class="fe nw nx ny nz b">boolean</code>、<code class="fe nw nx ny nz b">string</code>、<code class="fe nw nx ny nz b">symbol</code>、<code class="fe nw nx ny nz b">undefined</code>、<code class="fe nw nx ny nz b">function</code>的范围内时，才能使用<code class="fe nw nx ny nz b">typeof</code>来检查数据的类型。</p><h2 id="2a95" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">实例of</h2><p id="cee7" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><code class="fe nw nx ny nz b"><strong class="ky ir">instanceof</strong></code> <strong class="ky ir">操作符</strong>测试一个构造函数的<code class="fe nw nx ny nz b">prototype</code>属性是否出现在一个对象的原型链中。返回值是一个布尔值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="05c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">instanceof</code>操作符只测试对象的原型链中是否存在<code class="fe nw nx ny nz b">constructor.prototype</code>。<code class="fe nw nx ny nz b">instanceof</code>不能测试原始类型。会返回两个结果:当<code class="fe nw nx ny nz b">primitive type instanceof primitive type</code>返回异常错误时；当<code class="fe nw nx ny nz b">primitive type instanceof reference type</code>返回<code class="fe nw nx ny nz b">false</code>时。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="4456" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">构造器</h2><p id="76b5" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><code class="fe nw nx ny nz b">constructor</code>方法是<code class="fe nw nx ny nz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class" rel="noopener ugc nofollow" target="_blank">class</a></code>的特殊方法，用于创建和初始化该类的对象。</p><p id="ba7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">constructor</code>方法类似于<code class="fe nw nx ny nz b">instanceof</code>，也可以测试原语类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="374c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nw nx ny nz b">constructor</code>有一个缺点:不能测试<code class="fe nw nx ny nz b">null</code>和<code class="fe nw nx ny nz b">undefined</code>，因为<code class="fe nw nx ny nz b">null</code>和<code class="fe nw nx ny nz b">undefined</code>中没有<code class="fe nw nx ny nz b">constructor</code>属性。所以我们在实际项目中很少使用<code class="fe nw nx ny nz b">constructor</code>来检查数据类型。</p><h2 id="bf43" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">Object.prototype.toString.call()</h2><p id="16b7" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated"><code class="fe nw nx ny nz b">Objec.prototype.toString.call()</code>是最常用的数据类型检测方法。它将返回<code class="fe nw nx ny nz b">[ojbect type]</code>，第二个值<code class="fe nw nx ny nz b">type</code>是<code class="fe nw nx ny nz b">object</code>的类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="757b" class="mz mi iq bd mj na nb dn mn nc nd dp mr lf ne nf mt lj ng nh mv ln ni nj mx nk bi translated">数据类型检测概述</h2><ol class=""><li id="befe" class="ls lt iq ky b kz nl lc nm lf of lj og ln oh lr oe ly lz ma bi translated">原始类型:<code class="fe nw nx ny nz b">number</code>、<code class="fe nw nx ny nz b">boolean</code>、<code class="fe nw nx ny nz b">string</code>、<code class="fe nw nx ny nz b">symbol</code>、<code class="fe nw nx ny nz b">undefined</code>、<code class="fe nw nx ny nz b">function</code>使用<code class="fe nw nx ny nz b">typeof</code>确定数据类型。</li><li id="c4ae" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr oe ly lz ma bi translated"><code class="fe nw nx ny nz b">null</code>使用<code class="fe nw nx ny nz b">Object.prototype.toString.call()</code>和<code class="fe nw nx ny nz b">===</code>检查类型。</li><li id="bac0" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr oe ly lz ma bi translated"><code class="fe nw nx ny nz b">Object</code>使用<code class="fe nw nx ny nz b">instanceof</code>进行测试。</li><li id="fe4c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr oe ly lz ma bi translated">我们可以使用<code class="fe nw nx ny nz b">Object.prototype.toString.call()</code>来检查以上所有情况。</li></ol><h1 id="38fe" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">结论</h1><p id="89b8" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">在本文中，我们介绍了JavaScript运行时的类型系统。也许即使我们不知道这些知识点，我们仍然可以写出可运行的JavaScript代码。但是深入了解这些知识之后，我们就能更好地理解JavaScript语言的特性，降低潜在风险，写出更好的代码。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><p id="1010" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mg">感谢阅读，美好的未来可期。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/5a42c3c840f5d3ba7c931c86a8801679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sihRiRADeoxvnZeU"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@salvoventura?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">salvatore ventura</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>
<html>
<head>
<title>GraphQL: Love at second sight</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一见钟情</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/graphql-love-at-second-sight-6aa0b33c20bb?source=collection_archive---------10-----------------------#2020-09-16">https://javascript.plainenglish.io/graphql-love-at-second-sight-6aa0b33c20bb?source=collection_archive---------10-----------------------#2020-09-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9fc3c79116af75cd6619cc7a517ae220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8CL4kwgEp1Aszs_c8TMBQ.jpeg"/></div></div></figure><p id="070d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我的第一个GraphQL项目是在几年前。我是作为一个承包商工作的，我的角色是开发一个反应灵敏的网站，对后端API有一点了解。这是几个月的项目，我对GraphQL / Apollo Client了解不多。当时，GraphQL没有给我留下太多印象，直到去年才再次使用。</p><p id="59a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">去年，我加入了<a class="ae kt" href="https://www.clevertech.biz/" rel="noopener ugc nofollow" target="_blank"> Clevertech </a>。我开始使用GraphQL和Apollo(服务器/客户端)一起进行一个项目。最初的几周很艰难，但这次GraphQL和生态系统给我留下了深刻的印象。</p><p id="696f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">多年来，我一直使用REST来开发API。那么，从不同的背景来看，为什么GraphQL第二次引起了我的注意呢？</p><p id="9101" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">首先:</strong>在GraphQL Schema中定义API操作的可能性。该模式定义了可能的查询(用于请求数据)、突变(用于修改)以及输入和响应的类型。客户端应用程序将在没有任何外部文档的情况下知道哪些查询/突变应该使用，预期的输入是什么，响应，他们可以询问、获取哪些字段等。当客户端执行查询或变异时，GraphQL服务器将根据定义的模式验证客户端请求，如果它请求无效字段，或者调用缺失/错误的查询/变异，将会失败。</p><p id="2dff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第二:</strong>客户端(移动应用、网络应用等)。)可以询问他们需要什么，并将得到什么。这是GraphQL的主要好处之一:GraphQL服务器将只执行和返回客户端要求的内容，不多不少。这不仅对客户端有好处，而且服务器只会获取、处理和返回客户端需要的东西，仅此而已。</p><p id="3ce6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如，我们的用户/聊天消息模式可以是这样的:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="78e7" class="ld le in kz b gy lf lg l lh li">type Query {<br/>  users: [User]<br/>}</span><span id="8fab" class="ld le in kz b gy lj lg l lh li">type User {<br/>  id: ID!<br/>  name: String!<br/>  email: String!<br/>  receivedMessages: [ChatMessage]!<br/>  sentMessages: [ChatMessage]!<br/>}</span><span id="db76" class="ld le in kz b gy lj lg l lh li">type ChatMessage {<br/>  id: ID!<br/>  text: String!<br/>  sender: User!<br/>  recipient: User!<br/>}</span></pre><p id="72ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">想象一下，一个移动应用程序调用一个用户查询，但只需要两个字段:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ce64" class="ld le in kz b gy lf lg l lh li">{<br/>  query {<br/>    users {<br/>      id<br/>      name<br/>    }<br/>  }<br/>}</span></pre><p id="fb8d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">管理网站可以调用相同的用户查询并询问更多信息，例如，id、名称、电子邮件和包含发件人信息的接收邮件:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="d774" class="ld le in kz b gy lf lg l lh li">{<br/>  query {<br/>    users {<br/>      id<br/>      name<br/>      email<br/>      receivedMessages {<br/>        id<br/>        text<br/>        sender {<br/>          id<br/>          name<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="9c3e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此功能有助于解决多个客户端访问相同的API并需要不同信息的问题。有了GraphQL，我们将不会有取多或取少的问题。此外，它可以在一个请求中获得更多资源:将获得一个用户列表，每个用户一个消息列表，每个用户一个发送者。</p><p id="98e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第三</strong> : API版本控制。这在REST APIs中可能很难，通常开发人员最终会添加“v1”、“v2”等。因为否则我们可能会在API中有突破性的变化。在GraphQL中，我们只需要在现有类型中添加新的类型和新的字段，而不需要创建中断更改。</p><p id="2763" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后但同样重要的是，生态系统。通过在web和移动应用程序上使用Apollo Client，我获得了良好的开发体验，并提高了工作效率。Apollo客户端支持开箱即用:查询数据、改变数据、状态管理和缓存。在多年处理不同的状态管理、网络访问、缓存等工具之后。这是我迄今为止发现的最大好处之一。</p><p id="0102" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我对GraphQL、Apollo服务器/客户端感到非常兴奋，但与每一个工具一样，它可能会给我们的日常工作带来一些问题和挑战。在接下来的帖子中，我将讨论一些艰难学习的特性，比如模式设计、N+1问题以及我在这个过程中发现的其他问题。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Creating Complex Animation Sequences with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度创建复杂的动画序列</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-complex-animation-sequences-with-angular-2f985ff1c38?source=collection_archive---------7-----------------------#2020-04-27">https://javascript.plainenglish.io/creating-complex-animation-sequences-with-angular-2f985ff1c38?source=collection_archive---------7-----------------------#2020-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f43ebc9de24b59980597a87b8d623749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0ynaRVNX5ptJdEIu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@erinw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Erin Wilson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="52ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="1d90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何创建复杂的动画，动画多个元素和可重用的动画序列。</p><h1 id="673c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复杂的动画序列</h1><p id="ecc1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以制作应用于多个元素的动画坐标序列。</p><p id="72dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用以下函数来控制复杂的动画序列:</p><ul class=""><li id="4b25" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">query</code> —查找一个或多个HTML元素</li><li id="e28e" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">stagger</code> —对多个元素的动画应用级联延迟</li><li id="fa26" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">group</code> —并行运行多个动画步骤</li><li id="8413" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">sequence</code> —一个接一个地运行动画步骤</li></ul><h1 id="ce22" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用query()和stagger()函数制作多个元素的动画</h1><p id="29a6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们使用<code class="fe mn mo mp mq b">stagger</code>来定义每个被查询项目之间的时间间隔，这些项目和动画元素之间有一个延迟</p><p id="c81e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">query</code>函数寻找我们想要制作动画的元素。</p><p id="288c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，当我们的页面如下加载时，我们可以在多个div中动画显示文本:</p><p id="af37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="484c" class="ne lc iq mq b gy nf ng l nh ni">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  state,<br/>  stagger,<br/>  query<br/>} from "@angular/animations";</span><span id="b41d" class="ne lc iq mq b gy nj ng l nh ni">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("pageAnimations", [<br/>      transition(":enter", [<br/>        query("div", [<br/>          style({ opacity: 0, transform: "translateY(-100px)" }),<br/>          stagger(-30, [<br/>            animate(<br/>              "500ms cubic-bezier(0.35, 0, 0.25, 1)",<br/>              style({ opacity: 1, transform: "none" })<br/>            )<br/>          ])<br/>        ])<br/>      ])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {}</span></pre><p id="c9ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.html</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="0d59" class="ne lc iq mq b gy nf ng l nh ni">&lt;div @pageAnimations&gt;<br/>  &lt;div&gt;<br/>    foo<br/>  &lt;/div&gt;<br/>  &lt;div&gt;<br/>    bar<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="9471" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们使用了<code class="fe mn mo mp mq b">query</code>函数来设置div的样式，这些div的不透明度为0，并使用<code class="fe mn mo mp mq b">cubic-bezier</code>效果以可变速度过渡。</p><p id="720c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe mn mo mp mq b">stagger</code>函数在每个div的动画之间创建了30毫秒的时间间隔。</p><p id="fbdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当页面加载时，我们应该看到模板中的<code class="fe mn mo mp mq b">foo</code>和<code class="fe mn mo mp mq b">bar</code>都是动态的。</p><h1 id="08e1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用group()函数的并行动画</h1><p id="75b4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe mn mo mp mq b">group</code>函数将元素的动画组合在一起。</p><p id="de21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><p id="fa7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="1fd8" class="ne lc iq mq b gy nf ng l nh ni">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  state,<br/>  group<br/>} from "@angular/animations";</span><span id="957c" class="ne lc iq mq b gy nj ng l nh ni">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("flyInOut", [<br/>      state(<br/>        "in",<br/>        style({<br/>          width: 120,<br/>          transform: "translateX(0)",<br/>          opacity: 1<br/>        })<br/>      ),<br/>      transition("void =&gt; *", [<br/>        style({ width: 10, transform: "translateX(50px)", opacity: 0 }),<br/>        group([<br/>          animate(<br/>            "0.3s 0.1s ease",<br/>            style({<br/>              transform: "translateX(0)",<br/>              width: 120<br/>            })<br/>          ),<br/>          animate(<br/>            "0.3s ease",<br/>            style({<br/>              opacity: 1<br/>            })<br/>          )<br/>        ])<br/>      ]),<br/>      transition("* =&gt; void", [<br/>        group([<br/>          animate(<br/>            "0.3s ease",<br/>            style({<br/>              transform: "translateX(50px)",<br/>              width: 10<br/>            })<br/>          ),<br/>          animate(<br/>            "0.3s 0.2s ease",<br/>            style({<br/>              opacity: 0<br/>            })<br/>          )<br/>        ])<br/>      ])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {}</span></pre><p id="6a9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.html</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="2e13" class="ne lc iq mq b gy nf ng l nh ni">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div @flyInOut *ngIf="show"&gt;<br/>  &lt;div&gt;<br/>    foo<br/>  &lt;/div&gt;<br/>  &lt;div&gt;<br/>    bar<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="7a3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有带动画的<code class="fe mn mo mp mq b">group</code>函数调用。</p><p id="d9a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个用于从<code class="fe mn mo mp mq b">void</code>到任何东西的转换，另一个用于从任何东西到<code class="fe mn mo mp mq b">void</code>的转换，分别在项目被添加到DOM和从DOM中移除时进行动画处理。</p><p id="fa83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的模板中，我们有切换按钮来打开和关闭div。</p><p id="8def" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们打开和关闭div时，我们应该会看到传递给<code class="fe mn mo mp mq b">style</code>函数的参数所指示的翻译效果。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/dda2bd63efe3b93b4cf4dc1b48a84a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MdnZwoNCaArNEBHL"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hansvantol?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hans van Tol</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="12c5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可重用动画</h1><p id="5063" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过为动画中指定的值指定变量来创建可重用的动画。</p><p id="c030" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下参数化动画样式和计时值:</p><p id="44b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="2db7" class="ne lc iq mq b gy nf ng l nh ni">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  animation,<br/>  useAnimation<br/>} from "@angular/animations";</span><span id="b92f" class="ne lc iq mq b gy nj ng l nh ni">const transAnimation = animation([<br/>  style({<br/>    height: "{{ height }}",<br/>    opacity: "{{ opacity }}",<br/>    backgroundColor: "{{ backgroundColor }}"<br/>  }),<br/>  animate("{{ time }}")<br/>]);</span><span id="6613" class="ne lc iq mq b gy nj ng l nh ni">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      transition("* =&gt; void", [<br/>        useAnimation(transAnimation, {<br/>          params: {<br/>            height: 0,<br/>            opacity: 1,<br/>            backgroundColor: "green",<br/>            time: "1s"<br/>          }<br/>        })<br/>      ]),<br/>      transition("void =&gt; *", [<br/>        useAnimation(transAnimation, {<br/>          params: {<br/>            height: 0,<br/>            opacity: 1,<br/>            backgroundColor: "red",<br/>            time: "1s"<br/>          }<br/>        })<br/>      ])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {}</span></pre><p id="bb26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.html</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="5b5c" class="ne lc iq mq b gy nf ng l nh ni">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@openClose]="show" *ngIf="show"&gt;<br/>  foo<br/>&lt;/div&gt;</span></pre><p id="1f58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用传入的由<code class="fe mn mo mp mq b">style</code>返回的对象数组通过<code class="fe mn mo mp mq b">animation</code>函数调用参数化了样式。</p><p id="8736" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用了<code class="fe mn mo mp mq b">useAnimation</code>，将<code class="fe mn mo mp mq b">transAnimation</code>作为第一个参数传入，并传入了一个具有<code class="fe mn mo mp mq b">params</code>属性的对象。</p><p id="d9b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们添加了切换按钮和div来切换开关。</p><p id="335e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，当我们单击Toggle时，当我们单击按钮时，我们会看到2个红色和绿色背景的动画。</p><h1 id="b2d3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6e1b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mn mo mp mq b">query</code>函数制作多个元素的动画。</p><p id="2ece" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe mn mo mp mq b">stagger</code>函数错开元素的动画。使用<code class="fe mn mo mp mq b">group</code>功能制作项目动画。</p><p id="71ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe mn mo mp mq b">sequence</code>函数一个接一个地运行动画步骤。</p><p id="d56c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了创建可重用的动画，我们可以使用<code class="fe mn mo mp mq b">animation</code>函数来创建可重用的动画，然后调用<code class="fe mn mo mp mq b">useAnimation</code>，将参数作为对象传递给函数的第二个参数来使用它。</p><h2 id="80f5" class="ne lc iq bd ld nl nm dn lh nn no dp ll ko np nq lp ks nr ns lt kw nt nu lx nv bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="d3d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物，表达对它们的喜爱:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p><p id="4e7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to use an AWS SQL Database with Node.js and MySQL workbench!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Node.js和MySQL workbench使用一个AWS SQL数据库！</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-an-aws-sql-database-with-node-js-and-mysql-workbench-f77a71ac12be?source=collection_archive---------0-----------------------#2020-04-25">https://javascript.plainenglish.io/how-to-use-an-aws-sql-database-with-node-js-and-mysql-workbench-f77a71ac12be?source=collection_archive---------0-----------------------#2020-04-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/88e6b1709815af45091be25b75eb461c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5S3KIxr9NYJzFbe9"/></div></div></figure><h1 id="55d4" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="7d6a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果您正在创建一个跟踪数据的Node.js应用程序，那么您可能正在使用某种数据库。尽管数据库有很多选择，比如MongoDB、Firebase和PostgreSQL，但MySQL仍然是基于web的应用程序最流行的数据库之一。它是免费的，提供了很多功能，有各种各样的用户界面，并且可以与其他数据库一起工作。MySQL有什么让人不喜欢的地方？</p><p id="54c4" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">然而，设置托管和连接MySQL数据库到服务器可能会变得棘手，特别是如果你在<em class="lr">臭名昭著的</em> AWS上托管。我的工作是指导你完成这个过程。在本教程中，我将重点介绍三个方面:</p><ol class=""><li id="e074" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mc md me mf bi translated">如何在AWS上创建MySQL数据库</li><li id="70aa" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">如何将数据库连接到MySQL工作台</li><li id="f8d5" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">如何将数据库连接到Node.js应用程序</li></ol><h1 id="4068" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">先决条件</h1><p id="3d2c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">您需要具备以下条件:</p><ol class=""><li id="ca14" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mc md me mf bi translated">AWS帐户</li><li id="9591" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">空白Node.js项目</li><li id="973d" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">MySQL工作台</li><li id="3784" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">积极的态度！</li></ol><h1 id="cd53" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何在AWS上创建MySQL数据库</h1><p id="8a08" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">您将从创建一个数据库实例开始。登录AWS并导航到Amazon RDS服务控制台。然后，单击数据库实例。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8e0db5a26b5003ce7e5e8b0873a1f62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6_SvzV0hvkmRMnIc"/></div></div></figure><p id="e582" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">接下来，选择右上角的“创建数据库”。您应该会看到一个标题为“创建数据库”的页面现在是点击按钮的时候了。</p><p id="dbfe" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">您将使用免费层，这是<em class="lr">令人惊叹的</em>，因为您可以在12个月内免费使用每月750小时(31天)的db.t2.micro数据库。注意，如果您正在为生产创建数据库，则不应选择这些设置。</p><p id="09b3" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">首先，选择“标准创建”和MySQL。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bd544aca81fabfaca24a7c8aaf9eccc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FNlcrSJ3E7htN1L2"/></div></div></figure><p id="966a" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">在“模板”下，选择“自由层”，并在“设置”下，为数据库创建一个名称以及凭据。通常，“admin”或“root”用于主用户名。此外，一定要在某个地方写下你的主密码，因为它非常重要，你将无法再更改它。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8f8a1ee06fec8762388924780cfbb0e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tmoXq2_QWdRDKZ72"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">DO NOT FORGET YOUR MASTER PASSWORD!</figcaption></figure><p id="e9d8" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">跳过数据库实例大小、存储、可用性和持久性，找到连接性。现在，您将完成创建MySQL数据库的<strong class="kv io">重要步骤#1 </strong>，这通常会导致错误。</p><p id="0d57" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">首先，确保选择默认VPC，然后选择附加连接配置。选择<strong class="kv io">是</strong>为“可公开访问”，保持数据库端口设置为3306。这一步之所以是必要的，是因为如果“公共可访问”被设置为否，那么您将无法使用您的计算机访问MySQL数据库。相反，您需要仅使用VPC内的Amazon EC2实例和设备来访问数据库。</p><p id="9f67" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">如果您是为生产而构建，建议您设置安全措施，例如为此选项选择“否”。但是现在，没有人会黑掉我的“超级酷db”</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/820eefc2b5de5ed31053d671c659dc27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aGYTx4f1LJcUURRZ"/></div></div></figure><p id="30ce" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">最后，向下滚动到底部，确保某处写着“Amazon RDS Free Tier ”,这样你就知道你不会在这个数据库上每月花费600美元。然后，选择“创建数据库”数据库到AWS创建数据库应该需要5-10分钟，然后您就完成了<strong class="kv io"/>！</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b55327df1ef75166ebb7713955170234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FVBULvh3hnR-eBkt"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">Don’t forget to create the database!</figcaption></figure><h1 id="fe1c" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何将数据库连接到MySQL工作台</h1><p id="58f2" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">一旦你点击刷新50次，它应该说“可用”状态下。现在，打开MySQL Workbench并选择“+”按钮来添加一个新连接。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2887c92d631c1258b1ddda701ed92bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X_DDw4FiO_n2rVqo"/></div></div></figure><p id="1c8b" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><strong class="kv io">撑住！</strong>在您添加详细信息之前，您必须在AWS网站上完成<strong class="kv io">重要步骤#2 </strong>。单击DB实例，在Security下，单击VPC安全组。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a5d050be44dbd429d0976ef0a803d3e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ZH0GS3CgcsBl0Db"/></div></div></figure><p id="5b7d" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">您应该会被带到EC2安全组页面。在当前安全组下，您必须添加一个新的入站规则。这是因为您希望VPC以外的任何公共IP地址都能够访问数据库。如果这一步没有完成，你<strong class="kv io">将</strong>无法连接到MySQL数据库。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/70c4bc6aa007bf5f511d1edd9b41aea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CqkKs-3Y01rdPGjH"/></div></div></figure><p id="ef18" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">选择“编辑入站规则”，然后单击“添加规则”将“类型”设置为“所有流量”，并将“来源”设置为“任何地方”你也可以选择“我的IP”并添加你自己的IP地址，这样别人就不能访问你的数据库了。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/19b374878f4ff75b3b9699b03f8a8118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WOYwZlKtY3_QWsva"/></div></div></figure><p id="4b82" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">既然已经指定了入站规则，就可以通过MySQL Workbench连接到数据库了。回到“设置新连接”窗口，开始填写输入。</p><ul class=""><li id="b875" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mt md me mf bi translated">在“连接名称”下，添加数据库的名称。</li><li id="82cb" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">在“连接方法”下，保持标准。</li><li id="e078" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">在“主机名”下，添加端点。这可以在数据库实例主页的“连接性和安全性”下找到</li></ul><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/503ac2b054b2bc6abd587d8112779e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Of52RBahzSNDkQH1"/></div></div></figure><ul class=""><li id="7969" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mt md me mf bi translated">在“端口”下，添加最初创建数据库时的端口。</li><li id="ab56" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">在“用户名”和“密码”下，添加最初创建数据库时的用户名和密码。如果您忘记了用户名，可以在数据库实例主页的“配置”下找到它。您还应该将密码存储在保管库中。</li></ul><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/53e14e13c01d65376fca30001a00f080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ocDzqGmcyKtobNfC"/></div></div></figure><p id="0d89" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">最后，单击“测试连接”以确保一切正常，然后单击“确定”你们都<strong class="kv io">搞定了</strong>！你可以通过MySQL Workbench开始创建模式和表格，阅读和写作，以及所有其他有趣的事情。<strong class="kv io">或者</strong>，可以通过Node.js来实现。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a67f2069251ec12d97b6142d9bc79869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-OVCjKH_M-40-2rk"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">This is what it should look like when you are done</figcaption></figure><h1 id="f98b" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何将数据库连接到Node.js应用程序</h1><p id="5177" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">现在您已经能够通过Workbench连接到AWS MySQL数据库，您可以通过Node.js应用程序做同样的事情。为了使用Node.js访问MySQL数据库，您需要一个MySQL驱动程序。</p><p id="4ebe" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">使用命令“npm install mysql”下载依赖项“mysql”确保它位于Node.js项目目录中。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/13c7c70a323c0f0ccec30fab7e52ad2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZnOvUQ9aHLMHXg3H"/></div></div></figure><p id="2113" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">接下来，打开入口点(脚本文件，如index.js或app.js)并导入依赖项。然后，创建一个新连接。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/1be34acdbc7d50184a41def4adc7e0e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/0*hBXPhJN-irxcHytv"/></div></div></figure><p id="cec1" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">这些参数应该与MySQL Workbench的参数相同。</p><ul class=""><li id="0fed" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mt md me mf bi translated">主机是端点</li><li id="c3d9" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">用户是主用户名</li><li id="ebfe" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">密码是主密码</li><li id="f789" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">端口是您指定的端口，例如3306</li></ul><p id="44ae" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">如果要连接到数据库，可以在port下添加一个“database”字段，其值设置为数据库的名称。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/48b98c4b3e8d5db4fd85175512d19092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZeMidwtTts5AUzpD"/></div></div></figure><p id="8005" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">最后，您需要连接到数据库。添加以下代码:</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/7ddd35000035126cc604853ceb7a13a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*1l1fYoSgA90SI3NewrNv8w.png"/></div></figure><p id="6bba" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">经过这一步，你就<strong class="kv io">全部搞定了</strong>！您可以使用Node.js创建、读取、写入和删除，所有更新也会出现在您的MySQL Workbench连接上。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/828fc447653e47f4176b595bfb3a3f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M33fFhheJpbUYizr8jj9_w.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">The final code</figcaption></figure><h1 id="da8b" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="2210" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在本教程中，您学习了如何在AWS上创建一个MySQL数据库，并通过MySQL Workbench和Node.js连接到它。对我来说，这个过程的大部分不是填写输入字段，而是解决“无法连接”和“无效连接”错误。我希望这篇文章能帮助你避免那些<em class="lr">讨厌的</em>问题。</p><h2 id="f2cc" class="mz jw in bd jx na nb dn kb nc nd dp kf le ne nf kj li ng nh kn lm ni nj kr nk bi translated">接下来呢？</h2><p id="d740" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">从现在开始，您可以:</p><ul class=""><li id="6b4d" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mt md me mf bi translated">保护您的数据库</li><li id="dde8" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">在AWS上尝试不同的MySQL配置</li><li id="453b" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">终止您的RDS实例！</li></ul><p id="96fc" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">我将在未来发布更多关于如何做到这一切的教程，但现在，这里有一些资源:</p><ul class=""><li id="5edc" class="lx ly in kv b kw ls la lt le lz li ma lm mb lq mt md me mf bi translated">Node.js中的MySQL:【https://www.w3schools.com/nodejs/nodejs_mysql.asp T4】</li><li id="3168" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">删除一个实例:<a class="ae nl" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_DeleteInstance.html" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/rds/</a></li><li id="7846" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mt md me mf bi translated">亚马逊RDS中的安全性:<a class="ae nl" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/Amazon RDS/latest/user guide/usingwithrds . html</a></li></ul></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><p id="0949" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">感谢你把这篇文章看完！我真的很高兴找到像我一样对计算机科学充满热情的人。</p><p id="601a" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">确保<strong class="kv io">喜欢</strong> / <strong class="kv io">分享</strong>这篇文章😁，并评论你的阅读体验！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Avoiding If Statements in Our JavaScript Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在我们的JavaScript代码中避免If语句</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/avoiding-if-statements-in-our-javascript-code-29406677268e?source=collection_archive---------2-----------------------#2020-05-04">https://javascript.plainenglish.io/avoiding-if-statements-in-our-javascript-code-29406677268e?source=collection_archive---------2-----------------------#2020-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c48f99991a09a2c4e6862a010aec5273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lssDIAPpSFA0cNTa"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rcorneto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rafael Rodrigues Machado</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="000c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript代码中的If语句可能会很麻烦。它们很啰嗦，在很多地方，我们不需要它们。</p><p id="2b1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用其他类型的代码替换<code class="fe lb lc ld le b">if</code>语句，使我们的代码更短更简洁。</p><p id="07a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看可以替换JavaScript代码中的<code class="fe lb lc ld le b">if</code>语句的地方。</p><h1 id="ebc5" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">三元运算符</h1><p id="af7c" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果我们想用一个条件返回一个东西，否则返回另一个东西，三元运算符就很有用。</p><p id="b82f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="aabf" class="mq lg iq le b gy mr ms l mt mu">const bar = foo ? 'foo' : 'bar';</span></pre><p id="ff87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，如果<code class="fe lb lc ld le b">foo</code>是<code class="fe lb lc ld le b">true</code>，那么我们返回<code class="fe lb lc ld le b">'foo'</code>。否则，我们返回<code class="fe lb lc ld le b">'bar'</code>。</p><p id="8abd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么如果<code class="fe lb lc ld le b">foo</code>是<code class="fe lb lc ld le b">true</code>，那么<code class="fe lb lc ld le b">bar</code>就是<code class="fe lb lc ld le b">'foo'</code>。否则，<code class="fe lb lc ld le b">bar</code>就是<code class="fe lb lc ld le b">'bar'</code>。</p><p id="0a36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这比以下短得多:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="6a17" class="mq lg iq le b gy mr ms l mt mu">const bar = ((foo) =&gt; {<br/>  if (foo) {<br/>    return 'foo'<br/>  }<br/>  return 'bar'<br/>})(foo);</span></pre><p id="7f5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">取而代之。有了三元运算符，我们不必定义一个匿名函数，如果<code class="fe lb lc ld le b">foo</code>为<code class="fe lb lc ld le b">true</code>则返回<code class="fe lb lc ld le b">'foo'</code>，否则返回<code class="fe lb lc ld le b">'bar'</code>。</p><p id="8395" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们不必在定义它之后马上用<code class="fe lb lc ld le b">foo</code>调用它。因此，读和写就容易多了。</p><p id="a0b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们不应该滥用三元运算符，像这样嵌套它们:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="557d" class="mq lg iq le b gy mr ms l mt mu">const foo = a ? b ? c ? 'foo' : 'bar' : 'baz' : 'qux';</span></pre><p id="a052" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码很难阅读，因为我们必须在自己的头脑中把它们放入括号中。</p><p id="c803" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对我们的大脑来说很难，所以我们不应该有像上面这样的表达。</p><h1 id="ff38" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">短路</h1><p id="47a3" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">&amp;&amp;</code>或<code class="fe lb lc ld le b">||</code>操作符作为短路操作符。</p><p id="1002" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果第一个操作数为真，那么<code class="fe lb lc ld le b">&amp;&amp;</code>操作符对于在第二个操作数中运行代码很有用。如果第一个操作数是falsy，那么<code class="fe lb lc ld le b">||</code>操作符对于在第二个操作数中运行代码很有用。</p><p id="ddaf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="1770" class="mq lg iq le b gy mr ms l mt mu">const isOnline = true;<br/>const makeRequest = () =&gt; {<br/>  //...<br/>}</span><span id="b753" class="mq lg iq le b gy mv ms l mt mu">isOnline &amp;&amp; makeRequest();</span></pre><p id="7bcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，如果<code class="fe lb lc ld le b">isOnline</code>是<code class="fe lb lc ld le b">true</code>，我们就调用<code class="fe lb lc ld le b">makeRequest</code>。所以，既然<code class="fe lb lc ld le b">isOnline</code>是<code class="fe lb lc ld le b">true</code>，我们就调用<code class="fe lb lc ld le b">makeRequest</code>函数。</p><p id="d3ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这取代了下面的<code class="fe lb lc ld le b">if</code>语句:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="cb0d" class="mq lg iq le b gy mr ms l mt mu">if (isOnline) {<br/>  makeRequest();<br/>}</span></pre><p id="b479" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所见，使用<code class="fe lb lc ld le b">if</code>语句，在给定相同的<code class="fe lb lc ld le b">isOnline</code>和<code class="fe lb lc ld le b">makeRequest</code>值的情况下，只需要3行代码就可以做同样的事情。</p><p id="fe2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe lb lc ld le b">||</code>操作符，如果第一个操作数是falsy，我们可以用它来设置默认值。</p><p id="0932" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下内容:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="a687" class="mq lg iq le b gy mr ms l mt mu">const foo = null;<br/>const bar = foo || 'abc';</span></pre><p id="f432" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将<code class="fe lb lc ld le b">foo</code>设置为<code class="fe lb lc ld le b">null</code>，这是falsy。因此，在第2行中，<code class="fe lb lc ld le b">||</code>运算符将计算<code class="fe lb lc ld le b">foo</code>常数，也就是<code class="fe lb lc ld le b">null</code>，所以它是falsy。</p><p id="dcd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后因为它是falsy，它将继续计算第二个操作数，然后返回它。</p><p id="539e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe lb lc ld le b">bar</code>的值将是<code class="fe lb lc ld le b">'abc'</code>。代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="831d" class="mq lg iq le b gy mr ms l mt mu">const bar = foo || 'abc';</span></pre><p id="f320" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">替换以下代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="58ec" class="mq lg iq le b gy mr ms l mt mu">const bar = ((foo) =&gt; {<br/>  if (!foo) {<br/>    return 'abc'<br/>  }<br/>  return foo;<br/>})(foo)</span></pre><p id="76b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所看到的，我们必须定义一个匿名函数，然后调用它。</p><p id="b5eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该函数以<code class="fe lb lc ld le b">foo</code>为参数，然后在函数内部，我们检查<code class="fe lb lc ld le b">foo</code>是否为falsy。如果是falsy，那么我们返回<code class="fe lb lc ld le b">'abc'</code>。否则，我们返回<code class="fe lb lc ld le b">foo</code>。</p><p id="3a49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">||</code>操作符的替代选项更长更复杂。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/17e18a731d9e58e8a38b99562e7cf9e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*24-tlxwbM8WZKNKG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@wxco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Warren Coetzer</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b07d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">避免使用Switch语句</h1><p id="0182" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">switch</code>语句的许多用法可以用更简单的东西来代替。例如，代替编写下面的<code class="fe lb lc ld le b">switch</code>语句:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="5702" class="mq lg iq le b gy mr ms l mt mu">const getDescription = (breed) =&gt; {<br/>  switch (breed) {<br/>    case 'border':<br/>      return 'kind dog';<br/>    case 'pitbull':<br/>      return 'angry dog';<br/>    case 'german':<br/>      return 'smart dog';<br/>    default:<br/>      return ''<br/>  }<br/>}</span><span id="12e5" class="mq lg iq le b gy mv ms l mt mu">const desc = getDescription('border');</span></pre><p id="6934" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将值放入对象中，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d7c6" class="mq lg iq le b gy mr ms l mt mu">const descs = {<br/>  'border': 'kind dog',<br/>  'pitbull': 'angry dog',<br/>  'german': 'smart dog',<br/>}</span><span id="b96b" class="mq lg iq le b gy mv ms l mt mu">const desc = descs['border'];</span></pre><p id="300b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将事例值作为属性，将返回值作为属性的值。</p><p id="768c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以用与上一行相同的方式获取值，而不是调用冗长的<code class="fe lb lc ld le b">switch</code>语句。</p><p id="97e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想得到默认情况，我们可以如下使用<code class="fe lb lc ld le b">||</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="001e" class="mq lg iq le b gy mr ms l mt mu">const desc = descs['foo'] || '';</span></pre><p id="5a52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们将一个冗长的<code class="fe lb lc ld le b">switch</code>语句压缩成一个小对象。</p><h1 id="3212" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="7bc9" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">在许多情况下，我们可以将<code class="fe lb lc ld le b">if</code>和<code class="fe lb lc ld le b">switch</code>语句简化成更短的代码。我们应该记得使用类似三元运算符、短路运算的快捷方式，并将<code class="fe lb lc ld le b">switch</code>语句改为字典对象，以使我们的代码更短。</p><h2 id="366f" class="mq lg iq bd lh mx my dn ll mz na dp lp ko nb nc lt ks nd ne lx kw nf ng mb nh bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="b3f5" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a><a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a><a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p><p id="0f19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
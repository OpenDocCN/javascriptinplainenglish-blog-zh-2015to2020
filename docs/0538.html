<html>
<head>
<title>Nuxt Storybooking: The Painless Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nuxt故事书:无痛之路</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nuxt-storybooking-the-painless-way-eb5a3653265f?source=collection_archive---------8-----------------------#2019-11-04">https://javascript.plainenglish.io/nuxt-storybooking-the-painless-way-eb5a3653265f?source=collection_archive---------8-----------------------#2019-11-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="057f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TL；DR —“故事书”是组织项目和组件需求(也称为“故事”)的过程，通过这种方式，用户界面部分的所有方面都可以传达给所有利益相关者。这篇文章向读者介绍了[ <a class="ae ki" href="https://bundlephobia.com/result?p=nuxt-stories" rel="noopener ugc nofollow" target="_blank">微小！</a> *] <a class="ae ki" href="http://npmjs.com/package/nuxt-stories" rel="noopener ugc nofollow" target="_blank"> nuxt-stories </a>模块，旨在为nuxt框架提供相对轻松有趣的故事书。</p><p id="92b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">声明:我是nuxt-stories模块的作者。(*我会尽量保持微小……)</p></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="3a0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">简介:</strong></p><p id="5d11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恰当地记录和交流需求可以说是任何项目中最重要的部分。然而，在许多项目中，需求似乎很容易与实际编写的代码脱节。通常需求写在单独的静态位置，比如电子表格或幻灯片，而代码写在其他地方。这听起来像是组织关注点的一种相当简单的方法，但是当一次性的书面期望和不断变化的现实之间出现不匹配时，就会出现问题。通常需要不断迭代需求和代码，直到达到预期。对于web前端来说尤其如此，在那里许多需求可能是完全主观的(例如，基于审美)。</p><blockquote class="kq kr ks"><p id="0fe2" class="jk jl kt jm b jn jo jp jq jr js jt ju ku jw jx jy kv ka kb kc kw ke kf kg kh ig bi translated">如果简单的英语要求不能被正确地解决，代码就没有机会了！</p></blockquote><p id="71fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">故事书试图通过将需求(又名“故事”)直接放在与代码库相同的工作空间中来解决这种脱节。这样，如果我们可以把web应用程序的每个页面简单地看作是组件和布局的集合，那么故事就可以很容易地访问它们。理想情况下，当故事书作者写故事时，实际的组件正在被编写和测试。因此，当这些组件在实际页面中使用时，页面将总是与需求保持同步。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/2c82fdb4880744599ff708eebac3807f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vJbRm49ex06m9iKTEu8Gg.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Requirements Heaven vs. Requirements Hell</figcaption></figure><p id="95d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上图中，让相同的组件与故事、测试和页面共享和同步是最理想的。从我的经验来看，当故事存在于分散的位置，并且，有时，以相互冲突或不明确的需求来编写时，它只会延迟真正的进展。可以理解，控制项目需求的人可能有最好的意图和深思熟虑的想法，但可能很快意识到需要进行重大调整。故事书将显示需要立即进行哪些调整。</p><p id="b818" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然组件确实可以直接在页面上设计，但是开发人员很快就会发现，将它们与页面隔离开来设计要容易得多。有时希望看到虚拟数据而不是真实数据的组件是什么样子，因为…应用程序还没有创建！但是，即使这款应用已经投入生产，故事书也是在事后出现的(喘息！)，通常不希望“dummyData.json”文件污染页面文件夹。最好把它放在stories文件夹中(或者虚拟数据库！)，以及特殊的“UX/flavor-123”git分支中。然后，快速改变视图只是简单地改变git分支。</p><p id="7769" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">Nuxt中的故事书</strong>:</p><p id="0ba2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有很多很棒的故事书解决方案，很多都有很棒的社区、功能和附加组件。我非常尊重这些解决方案！这些远比我一周前开发的Nuxt模块有经验。然而，我选择创建这个模块是因为当它涉及到Nuxt时，当我想写故事书并且仍然使用一些“Nuxt的东西”并且以“Nuxt的方式”做事时，我面临了几个挑战。</p><p id="ae5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最终，在这个问题上花了几个小时后，我有了重大的认识，Nuxt <em class="kt">已经</em>提供了一个强大的架构，可以简单地<em class="kt">扩展</em>以在需要时(即在开发模式下)包含故事书，而在不需要时(在生产中)省略。这意味着有了这个模块，启用故事书就像在Nuxt config中注册这个模块一样简单。留出一整个星期天来让故事书工作的需要已经一去不复返了。</p><p id="ccab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">安装</strong>:</p><ol class=""><li id="2141" class="ln lo in jm b jn jo jr js jv lp jz lq kd lr kh ls lt lu lv bi translated">nuxt-stories模块依赖于:glob、pify和@nuxt/utils。这些应该在运行<code class="fe lw lx ly lz b">npx create-nuxt-app</code>后就已经安装好了。如果没有，安装它们:<code class="fe lw lx ly lz b">npm i -D glob pify @nuxt/utils</code></li></ol><p id="3237" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.安装模块:<code class="fe lw lx ly lz b">npm i -D nuxt-stories</code></p><p id="45be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该模块还将安装bootstrap，用于设计示例故事的样式。安装后，将自动运行一个安装后脚本，将示例故事复制到项目文件夹的<code class="fe lw lx ly lz b">.stories</code>目录中，以帮助您尽快开始。请放心，它会“轻轻地复制”，所以如果你已经有内容在该文件夹中，他们不会被覆盖。</p><p id="df92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">配置:</strong></p><p id="0489" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您的<code class="fe lw lx ly lz b">nuxt.config.js</code>文件中，只需将<code class="fe lw lx ly lz b">nuxt-stories</code>指定为您的<code class="fe lw lx ly lz b">buildModules</code>之一。只有当您的环境处于开发模式或者您指定了<code class="fe lw lx ly lz b">forceBuild: true</code>时，它才会被启用。有时，您可能希望将应用程序托管为静态站点，这样您也可以分享故事。然而，通常在生产中，您可能不想打包它们。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/d24ffd253e51799b5472df70d8ad57d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*0rl-6CC0pejO9f5HY90gSA.jpeg"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Enable storybooking with ONE line in nuxt.config!</figcaption></figure><p id="9a7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">用法:(简单！)</strong></p><p id="212f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如前所述，当你第一次安装这个模块时，<code class="fe lw lx ly lz b">.stories</code>文件夹应该已经创建好了，里面有一些例子。这个文件夹<em class="kt">和你的pages文件夹</em>完全一样，除了你的故事放在这个文件夹里。路径是使用Nuxt用来创建页面路径的相同的<code class="fe lw lx ly lz b">createRoutes()</code>实用程序自动创建的，因此您可以类似地构建您的故事。为了避免与任何可能被命名为“故事”的真实路线冲突，故事路线将从“开始”。故事”。此外，您可能会发现在您的工作流程中使用。故事”非常接近你工作树中的“组件”文件夹。现在，在IDE中，在两个文件夹之间切换应该会快得多。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi mb"><img src="../Images/297693444a2051a175d882553df1fdb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cWr45qyVhbwOclAsOij8Q.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">“.stories” is closer to “components”! Less eye movement, less mouse movement</figcaption></figure><p id="d0a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要查看您的故事，请访问:<code class="fe lw lx ly lz b"><a class="ae ki" rel="noopener ugc nofollow" target="_blank" href="/[your">http://[your</a>LocalHost]/.stories</code>。对于不耐烦的人，或者想试驾的人，你可以在这里看演示:</p><p id="6dcb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://nuxt-stories.netlify.com/" rel="noopener ugc nofollow" target="_blank">https://nuxt-stories.netlify.com</a></p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi mc"><img src="../Images/d3188364a3f3b39979fc546bfb7aaba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b2OcsKbYHRqZcGXTHz6CWA.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">“Card” stories (Navbars expanded)</figcaption></figure><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi md"><img src="../Images/9412253988e43edc96aff0b54c7e7bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CxNLn89hNmaIu25Ms-nL-g.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">“Card” stories (Navbars collapsed)</figcaption></figure><p id="1e16" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您所看到的，这相当简单明了，没有什么太令人兴奋的，但这正是关键所在。这些故事可以根据个人喜好完全定制。更喜欢Vuetify而不是Bootstrap？没问题！关键的一点是，为了方便开发人员，需要的路线会随着故事的更新而自动生成。故事路线在<code class="fe lw lx ly lz b">this.$router.options.routes</code>都有。如果开发人员已经习惯于在“pages”文件夹中创建页面，这应该看起来很熟悉！</p><p id="c445" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">重要注意事项&amp;已知怪癖</strong>:</p><ol class=""><li id="d430" class="ln lo in jm b jn jo jr js jv lp jz lq kd lr kh ls lt lu lv bi translated">故事路线需要一个“故事根”。该模块使用第一个找到的"。vue“文件在”。stories”文件夹作为故事的根。因此，如果您在中既有index.vue又有root.vue文件。stories”，将使用index.vue，而不是其他。“index.vue”在Nuxt社区中更常用，这似乎是惯例。</li><li id="7272" class="ln lo in jm b jn me jr mf jv mg jz mh kd mi kh ls lt lu lv bi translated">nuxt-stories未来的每一次安装都将使用“温和复制”,这样就不会覆盖你已经完成的所有故事。如果有疑问，请在更新前提交您的故事。</li><li id="8479" class="ln lo in jm b jn me jr mf jv mg jz mh kd mi kh ls lt lu lv bi translated">可能有一段时间，你希望像我一样将你的故事部署到一个静态网站上(这样你就可以很容易地与利益相关者分享它们)。简单的解释是:查看或复制我的<a class="ae ki" href="https://github.com/richardeschloss/nuxt-stories/tree/gh-pages" rel="noopener ugc nofollow" target="_blank"> gh-pages </a>分支，看看我是如何配置的，然后简单地将你的dist推送给你的主机(不同的主机比其他主机更容易合作)。较长的解释是:选择”。stories”作为stories文件夹既是福也是祸。带有“.”的文件前缀通常被文件系统视为隐藏。如果你完全控制了服务器，你就可以提供隐藏文件。然而，其他平台不会包括隐藏文件，即使你推他们。因此，为了避免遇到404错误，您必须将。Stories”文件夹，就像“nuxtStories”或“stories”一样，只是确保不要与您的真实应用程序可能使用的任何其他真实“stories”路径冲突。</li><li id="7366" class="ln lo in jm b jn me jr mf jv mg jz mh kd mi kh ls lt lu lv bi translated">ESLint也可以忽略前缀为“.”的文件或文件夹。如果你打算包括”。stories”作为要链接的目录，您需要简单地“否定忽略”在<code class="fe lw lx ly lz b">.eslintignore</code>中的目录，方法是添加行:<code class="fe lw lx ly lz b">!/.stories</code></li></ol><p id="0f42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">结论:</strong></p><p id="a062" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果幸运的话，如果我解释的没错，您现在应该已经在Nuxt应用程序中启用了storybooking。在过去，编写和维护需求一直是令人生畏的枯燥任务，没有人愿意被打扰，但却一直被认为是最重要的。当你写的需求由<em class="kt">功能组件</em>组成，这些功能组件在你实际的应用程序页面中被保存和热重新加载时得到测试，你会立刻感到满足，你的应用程序正在做你和你的客户想要的事情(希望在比你预期的更短的时间内)。</p></div></div>    
</body>
</html>
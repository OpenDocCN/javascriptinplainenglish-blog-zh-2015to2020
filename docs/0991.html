<html>
<head>
<title>Redux + Hooks = Profit?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux + Hooks =利润？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/redux-hooks-profit-bf3f576e066d?source=collection_archive---------8-----------------------#2020-01-10">https://javascript.plainenglish.io/redux-hooks-profit-bf3f576e066d?source=collection_archive---------8-----------------------#2020-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/89a9b185eb6e3a0b507ac8aaf8edaa9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzeEjeK81Y3cRy6irHoaCw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">This blog will turn you into Captain… Hooks?</figcaption></figure><p id="8cf9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为一个受欢迎的“编码训练营”熨斗学校的学生，我有过很多次震惊的经历。从流行的简单易学的后端语言vanilla Ruby到ActiveRecord的SQL编写对象关系数据库(ORD)是一个巨大的飞跃。从Rack/ <a class="ae la" href="http://sinatrarb.com/" rel="noopener ugc nofollow" target="_blank"> Sinatra </a>令人沮丧的web生成框架的手工劳动到<a class="ae la" href="https://rubyonrails.org/" rel="noopener ugc nofollow" target="_blank"> Rails </a>的宏和简单路由的编程之美也是如此。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/5064d13c701cfe3aaf02485a02c4c31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/1*nrhyY4KW7uaxKKjDaA7Biw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Digivolve into (coding)champion…</figcaption></figure><p id="e11a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，我最近一次令人兴奋的经历是在React.js应用程序中同时实现Hooks和Redux，以便处理可能在应用程序生命周期中发生变化的数据。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/82ef60c4a12ecf21fcf13737f1afd015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*WBqW0kwjMCMqmCldpYfJVQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">typical state-based react programming</figcaption></figure><p id="5d81" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以上是我做的一个简单的React项目的代码，名为“用低音扬声器保持平静”，这是一个可爱的应用程序，用于查看狗狗的可爱照片。也许如果你表现好，我会在博客末尾奖励你一张狗狗照片。但是现在，观察基本的基于“状态”的程序。在这个“类”组件中，我有一个名为“状态”的普通对象，它包含了我要获取的所有狗(明白吗？)以及其他可能与我的应用程序相关的信息。</p><p id="ebfa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但是，我如何访问构成应用程序不同区域的其他“组件”中的数据呢？</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/4aee48b96b1f312d90befb3de929b4ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*GmhUGHS8MvQn34BQvz-AuQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Woof, that’s a lot of props.</figcaption></figure><p id="0f17" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">上面看到的答案是一个复杂的系列，将“状态”作为“道具”传递下去，一种在“父母”中设置变量的方式，以及“道具函数”，通过<a class="ae la" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank"> Javascript ES6箭头函数</a>固有地绑定到父母的函数。这很…复杂。有些函数返回组件，道具，有些函数是道具，但仍然会改变状态。这是一个错综复杂的网络，坦率地说，非常令人困惑。但是这种状态管理有一个流行的替代方法:Redux。</p><p id="b276" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当我听说Redux的时候，我太激动了。避免做所有的工作似乎很棒。不管是什么，都应该简单些，对吧？</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/ee94ab96dfb569b811cd01fda09e5535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bk3ggtUASHO29STut0H6SQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">right???</figcaption></figure><p id="d416" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这段代码来自<a class="ae la" href="https://medium.com/@hyeokjungkim" rel="noopener">埃里克·金</a>，他是我在熨斗的一位伟大的老师，在他向我们解释Redux的时候。然而，即使与我的“低音扬声器”的第一张图片相比，你可以看到我们正在导入更多的模块，我几乎不能声称理解的代码页，以便获得我可以在不同组件中更改的“状态”对象的效果。我们有中间件，一个称为“提供者”的组件，一个称为“存储”的对象和方法，我们从中获取状态。我们甚至有一些奇怪的东西叫做“thunk”。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/4c5c3ee794b37b0678315af556d60dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*8YzcSZOhWWx0m1UZxvOcdA.jpeg"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">did somebody say “chunk”?</figcaption></figure><p id="98cc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">更重要的是，我们甚至不能像访问“state”那样通过“this.store”直接访问“store”。我们甚至不能用公认的麻烦的“this.setState”函数来改变它。我们必须使用名为“actions”的对象，这些对象被发送给名为“reducers”的函数，这些函数本身通过路径来改变存储中的状态，这些路径通过大写字符串(如“ADD_GOAT ”)来描述。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/273475ef403c66ff0c97aec4dc474de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*TATEqAW2nrQCyOwXR-Yijw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">This is baaaaaaaa…rd.</figcaption></figure><p id="e534" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">TLDR，这和我们通常在React中使用的错综复杂的道具、状态和回调函数一样难。</p><p id="2ace" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，我从我的教练那里学到了另一种方法，安妮·苏扎，特别是T2·马赞·阿尔斯瓦和T4，他在JWT的惊人的媒体职位。</p><p id="8a0c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它是React、Redux和一个叫React Hooks的东西的组合。</p><div class="lc ld le lf gt ab cb"><figure class="ln jr lo lp lq lr ls paragraph-image"><img src="../Images/6d712480a9911d0adbaa6697d95efd09.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*KGxvpOUm8XDVmO8IrfE_Ig.png"/></figure><figure class="ln jr lt lp lq lr ls paragraph-image"><img src="../Images/91a9361d67fa2d1de35478bd56428d00.png" data-original-src="https://miro.medium.com/v2/resize:fit:416/format:webp/1*ZNmyKJaRsLfmfdY7APRipg.png"/><figcaption class="jy jz gj gh gi ka kb bd b be z dk lu di lv lw">(Captain) Hook vs. (Captain) State!</figcaption></figure></div><p id="1d9a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是一个简单的挂钩/状态比较。如前所述，State通常是包含可变数据的对象，而Hooks允许使用单独的变量来设置state，第一个变量设置为等于useState是所需的数据，第二个变量是更改该数据的函数。</p><p id="34f0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我经常发现，与设置状态的基础相比，钩子是不必要的复杂，尽管它们允许你在一个“功能”组件中使用状态，一个更小的React，通常更好地遵守编程的<a class="ae la" href="https://medium.com/@severinperez/writing-flexible-code-with-the-single-responsibility-principle-b71c4f3f883f" rel="noopener">“单一责任原则”</a>，否则就不能使用状态。</p><p id="044b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，钩子在Redux中的工作方式让生活变得简单多了。</p><p id="c2bc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通常，使用React-Redux，如果我们想要访问“store”中的“state ”,我们必须做这样的事情。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/85667199266bda8b25ef4f918a596fd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*fDCP0IaL7QOkVD7fA_gUew.png"/></div></figure><p id="fd07" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这更多的是埃里克的代码。我们导入了一个名为“connect”的东西，手动编写了一个名为mapStateToProps的方法，导入了另一个我们用来做“mapDispatchToProps”的方法，使用connect来获取这些函数和我们的原始组件，然后将它们混合到一个新的组件中，该组件可以从…本身(排序)接收属性，然后处理数据。</p><p id="3b2d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为对比，这段代码怎么样？</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/abf26b615fde51bbb82ef6c88179d0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*kCh6E4rbokpDh4EqWazNQQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">woah</figcaption></figure><p id="16f1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们只有两样进口的东西，但看看我们得到了什么！没有道具，没有书面状态或对商店的引用，什么都没有，我们只是使用行:</p><p id="747d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">const<em class="lz">username</em>=<em class="lz">use selector</em>(<em class="lz">state</em>=&gt;T14】state . user . username)；</p><p id="c976" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这只是从redux存储的状态中提取我们需要的任何东西，将其存储在一个变量中，然后使用它。我们跳过了大约20步！</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/ba492dc5408e20899f022023a30c1d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uP3QKngnRL_P5wQ1QnF9w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">We murdered those other pieces of code.</figcaption></figure><p id="e108" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae la" href="https://react-redux.js.org/next/api/hooks" rel="noopener ugc nofollow" target="_blank"> useSelector() </a>是一个钩子，可以让你瞬间访问商店！只要你已经在你的父目录中创建了你的存储，比如index.js或者App，你就可以访问一个字符串，一个数组，一个对象，甚至一个函数定义！</p><p id="728c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可能会问，调度呢？那有时候超级讨厌。一部分将继续，因为减速器和行动的概念仍然需要一些时间来掌握。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/eec46d3763794ba0da990c0da32cad52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*aicuwCF5Pk6y2-3OcFN8fQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">mapDispatch is dispatched with!</figcaption></figure><p id="9e11" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这更多的是<a class="ll lm ep" href="https://medium.com/u/b72ac0bfd7b?source=post_page-----bf3f576e066d--------------------------------" rel="noopener" target="_blank"> Mazen </a>的美丽代码。我们又一次跳过了这么多东西！我们没有将Dispatch映射到props，导入“connect”并返回一个新组件来继承props本身，而是使用了另一个钩子，<a class="ae la" href="https://react-redux.js.org/next/api/hooks" rel="noopener ugc nofollow" target="_blank"> useDispatch() </a>，我们可以直接使用它，也可以像Mazen一样抽象成一个简单的函数“dispatch”。这使得我们可以轻松地发送动作，而不需要使用来自父母的道具、状态、映射或绑定回调函数！通过使用钩子，我们已经成功地将Redux简化成了它本来的样子:一种让我们的生活变得更容易而不是更难跨组件共享状态的方式。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><p id="ef34" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">仅此而已。谢谢你对我的容忍。正如我在帖子开头所说的，从Redux到Redux with Hooks的简单性是我在这次疯狂的训练营之旅中经历的最棒的事情之一。</p><p id="4ccb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用useSelector()和useDispatch()可能并不适合每个正在开发适合state的小应用程序的人，或者不适合使用Redux的遗留应用程序(例如，不确定框架的公司工作),但我知道我会在自己的项目中使用它，并融入增加易用性的好处。</p><p id="c1f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，正如承诺的，是一只可爱的狗:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/b58f19687144cce6ce3be3d2d1a4942a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1OOFp_qIWgBAbI4oxgf3g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">cooper!</figcaption></figure><p id="aa15" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是诺伯·库珀，收容所男孩的混血儿。它很臭，喜欢跳上柜台偷自己的食物。他喜欢拥抱，但只是有时候。他正在努力。</p><p id="5127" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">他也喜欢钩子，这对他们来说是一个很好的论据。</p><p id="1921" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">非常爱你，</p><p id="37c7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">网络信息中心(Network Information Center)ˌ网路界面卡(Network Interface Card)ˌ全国工业理事会(National Industrial Council)ˌ航行情报中心(Navigation Information Center)</p></div></div>    
</body>
</html>
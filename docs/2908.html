<html>
<head>
<title>Create a Weather App in React.JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中创建天气应用程序。射流研究…</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-weather-app-in-react-js-d9a9b931142d?source=collection_archive---------4-----------------------#2020-08-04">https://javascript.plainenglish.io/create-a-weather-app-in-react-js-d9a9b931142d?source=collection_archive---------4-----------------------#2020-08-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="289f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用React、Redux、TypeScript和Tailwind创建天气应用程序。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/53e5c8555a842bd3f4f3e62619943d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWGx6GG9E-b3gVf4"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@wimvanteinde?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Wim van 't Einde</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fbb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">读者你好！</p><p id="2ef2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将了解如何使用React、Redux、TypeScript和Tailwind开发一个基本的天气应用程序。这篇文章是专门为React初学者准备的。所以它最适合那些读者。</p><p id="1541" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在进入正题之前，我构建这个应用的原因是什么？</p><p id="7d63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最简单的回答是，我总是喜欢在网络技术领域创造新事物。这对于最近开始学习web技术的人来说很有用。</p><p id="851d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我给你看看最终的应用程序是什么样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/f8594976110e4d7ab32248aa8b8a029c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQvUpS5hmFWHjw8_BVq2BQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Final Application</figcaption></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="21d6" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">我们开始吧</h1><p id="b0c3" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">开发这款应用的要求是:</p><ul class=""><li id="4bf0" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">节点. js</li><li id="a56e" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">npm</li></ul><h1 id="6366" class="ma mb iq bd mc md nl mf mg mh nm mj mk jw nn jx mm jz no ka mo kc np kd mq mr bi translated">第一步</h1><p id="d60a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">首先安装软件包。</p><p id="4a90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开您的终端并执行以下代码。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="4eaf" class="nv mb iq nr b gy nw nx l ny nz">npx create-react-app weather --template typescript</span><span id="52bd" class="nv mb iq nr b gy oa nx l ny nz">cd weather</span><span id="3968" class="nv mb iq nr b gy oa nx l ny nz">npm install react-icons react-redux react-router-dom redux redux-thunk tailwindcss postcss-cli autoprefixer @fullhuman/postcss-purgecss @types/react-redux @types/react-router-dom</span></pre><p id="80ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第<strong class="ky ir">个</strong>命令用于在Typescript中构建React模板。</p><p id="2106" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个命令<strong class="ky ir">将把我们带到应用程序目录。</strong></p><p id="344b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三个命令<strong class="ky ir">将安装所有的软件包。</strong></p><ul class=""><li id="6a02" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated"><strong class="ky ir"> react-icons </strong> -用于花式图标。</li><li id="a070" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> react-redux </strong> -用于连接redux和react。</li><li id="d1f7" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> react-router-dom </strong> -用于启用多条路由。</li><li id="d50b" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> redux </strong> -用于状态管理。</li><li id="0b67" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> redux-thunk </strong> -用于启用redux中的异步行为。</li><li id="22e4" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">用于样式的css框架。</li><li id="2e90" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> postcss-cli </strong> -用于启用缩小应用程序制作。</li><li id="2e92" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir"> autoprefixer </strong> -用于解析CSS解析器。</li><li id="abf7" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">@ full human/postcss-purge CSS</strong>-一个post CSS插件。</li><li id="7a9f" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">@ types/react-redux</strong>-Typescript的类型定义。</li><li id="a9aa" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">@ types/React-Router-DOM</strong>-React路由器的类型定义。</li><li id="8937" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">让我们使用命令启动应用程序。</li></ul><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="31da" class="nv mb iq nr b gy nw nx l ny nz">npm start</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="644b" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第二步</h1><p id="a1e5" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这一步是为了删除自动生成的代码。</p><p id="e4e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进入<strong class="ky ir">。/src/App.tsx </strong>并删除return语句中的代码。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="4a04" class="nv mb iq nr b gy nw nx l ny nz">return &lt;&gt;&lt;/&gt;;</span></pre><p id="6b28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在顶部，您会看到:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="d96f" class="nv mb iq nr b gy nw nx l ny nz">import logo from "./logo.svg";<br/>import "./App.css";</span></pre><p id="201c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">移除导入并删除<strong class="ky ir"> src/App.css </strong>并删除其他无用的代码。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="e136" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第三步</h1><p id="8ebe" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">建筑结构</p><p id="78da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在。/src。</p><ul class=""><li id="4f95" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated">行动</li><li id="bcb1" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">资产</li><li id="89d4" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">成分</li><li id="65ca" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">页</li><li id="9c1b" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">还原剂</li></ul><p id="f244" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">解释:</p><ul class=""><li id="95c5" class="mx my iq ky b kz la lc ld lf mz lj na ln nb lr nc nd ne nf bi translated"><strong class="ky ir">动作</strong> -用于存储动作类型和冗余动作。</li><li id="4079" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">资产</strong> -用于静态内容。</li><li id="6ebb" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">组件</strong> -你可以多次使用同一个组件，节省大量时间。</li><li id="2079" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated">这是一个干净代码的地方。</li><li id="2c4b" class="mx my iq ky b kz ng lc nh lf ni lj nj ln nk lr nc nd ne nf bi translated"><strong class="ky ir">reducers</strong>——redux动作改变应用程序状态的地方。</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="e832" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第四步</h1><p id="4e7d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">让顺风进入我们的项目。</p><p id="e234" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<strong class="ky ir">。/src/index.tsx </strong>并添加:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="adb6" class="nv mb iq nr b gy nw nx l ny nz">import "./tailwind.output.css";</span></pre><p id="1029" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后添加添加<strong class="ky ir">。/tailwind.config.js. </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="91e9" class="nv mb iq nr b gy nw nx l ny nz">module.exports = {<br/>  theme: {<br/>    extend: {<br/>      width: {<br/>        "410px": "410px",<br/>      },<br/>    },<br/>  },<br/>};</span></pre><p id="c906" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">执行<strong class="ky ir"> npm run build </strong>构建Tailwind，并在<strong class="ky ir"> package.json </strong>中添加“脚本”标签。</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="3489" class="nv mb iq nr b gy nw nx l ny nz">build:tailwind": "tailwind build src/tailwind.css -o src/tailwind.output.css",<br/>"prestart": "npm run build:tailwind",<br/>"prebuild": "npm run build:tailwind"</span></pre><p id="de99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建<strong class="ky ir"> src/tailwind.css </strong></p><p id="8659" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ob">。/src/tailwind.css </em> </strong>:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="42ed" class="nv mb iq nr b gy nw nx l ny nz">@tailwind base;<br/>@tailwind components;<br/>@tailwind utilities;</span></pre><p id="cdd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次运行<strong class="ky ir"> npm start </strong>编译所有代码。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="26fe" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第五步</h1><p id="390a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">准备Redux</p><p id="3671" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<strong class="ky ir">中。/src/减速器</strong>制造:</p><p id="48e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/reducers/Ajax reducer . js</strong>:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="f064" class="nv mb iq nr b gy nw nx l ny nz">const initialState = {<br/>    weather: {},<br/>  };<br/><br/>  export default function (state = initialState, action) {<br/>      switch (action.type) {<br/>          default:<br/>              return state;<br/>      }<br/>  }</span></pre><p id="ceb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以从OpenWeatherMap获取数据，数据将存储在天气状态组件中。</p><p id="1615" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们写样板代码。</p><p id="c9e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> src/reducers/index.js </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="fd11" class="nv mb iq nr b gy nw nx l ny nz">import { combineReducers } from "redux";<br/>import ajaxReducer from "./ajaxReducer";<br/><br/>export default combineReducers({<br/>  weatherReducer: ajaxReducer,<br/>});</span></pre><p id="5152" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于一个更大的项目，<strong class="ky ir"> index.js </strong>充当React Redux的中心位置。</p><p id="5cd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是行动的时候了…行动！</p><p id="f4d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建<strong class="ky ir"> types.js </strong>并存储Redux动作的所有类型。</p><p id="47df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/reducers/index.js </strong></p><p id="41be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于简单的项目，我们只有一个动作。</p><p id="1920" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/actions/types.js </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="bd88" class="nv mb iq nr b gy nw nx l ny nz">export const FETCH_WEATHER = "FETCH_WEATHER";</span></pre><p id="3535" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在做一个也是唯一的Ajax请求/还原操作。转到OpenWeatherMap并制作一个令牌。</p><p id="bfda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用OpenWeatherMap需要一个令牌，它可以免费提供大量API调用。</p><p id="8eb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/actions/ajaxactions . js</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="0d7a" class="nv mb iq nr b gy nw nx l ny nz">import { FETCH_WEATHER } from "./types";<br/><br/>export const fetchWeather = () =&gt; async (dispatch) =&gt; {<br/>  const ids = {<br/>    India: 2867714,<br/>    Canada: 2643743,<br/>    California: 4350049,<br/>  };<br/><br/>  const fetches = await Promise.all(<br/>    Object.values(ids).map((e) =&gt;<br/>      fetch(<br/>        `https://api.openweathermap.org/data/2.5/forecast?id=${e}&amp;appid=` // here you put your token key<br/>      ).then((e) =&gt; e.json())<br/>    )<br/>  );<br/><br/>  dispatch({<br/>    type: FETCH_WEATHER,<br/>    payload: {<br/>      // iterating through object does not guarantee order, so I chose manually<br/>      India: fetches[0],<br/>      Canada: fetches[1],<br/>      California: fetches[2],<br/>    },<br/>  });<br/>};</span></pre><p id="7261" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我选择我最喜欢的城市，你可以自己选择城市。</p><p id="2f15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先制作一个带有城市名和id的对象。然后将获取并解析的JSON存储到常量<strong class="ky ir"> fetches </strong>中。使用<strong class="ky ir"> Promise.all() </strong>获取城市数据。使用await关键字加载内容，这也使它变得漂亮。我们未完成<strong class="ky ir"> ajaxReducer.js </strong>让我们现在完成。</p><p id="3b86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/reducers/Ajax reducer . js</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="35c9" class="nv mb iq nr b gy nw nx l ny nz">import { FETCH_WEATHER } from "../actions/types";<br/><br/>const initialState = {<br/>  weather: {},<br/>};<br/><br/>export default function (state = initialState, action) {<br/>  switch (action.type) {<br/>    case FETCH_WEATHER:<br/>      return {<br/>        ...state,<br/>        weather: action.payload,<br/>      };<br/>    default:<br/>      return state;<br/>  }<br/>}</span></pre><p id="187b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Redux不允许我们从reducers中改变一个状态。所以我们只是用来自<strong class="ky ir">的动作有效载荷覆盖天气键。/src/actions/ajaxactions . js</strong>。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="9ae1" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第六步</h1><p id="cfeb" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">将应用程序连接到redux</p><p id="0a6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们必须为Redux创建一个文件，并将主Redux文件命名为。</p><p id="70e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/store.js </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="126b" class="nv mb iq nr b gy nw nx l ny nz">import { createStore, applyMiddleware } from "redux";<br/>import thunk from "redux-thunk";<br/>import rootReducer from "./reducers";<br/><br/>const initialState = {};<br/><br/>const middleware = [thunk];<br/><br/>const store = createStore(<br/>  rootReducer,<br/>  initialState,<br/>  applyMiddleware(...middleware)<br/>);<br/><br/>export default store;</span></pre><p id="983f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总是做一个更干净的代码。为更大的项目清理样板文件。</p><p id="9396" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<strong class="ky ir">。/src/App.tsx </strong>现在是做一些小改动的时候了。</p><p id="25e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/App.tsx </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="20eb" class="nv mb iq nr b gy nw nx l ny nz">import React from "react";<br/>import { Provider } from "react-redux";<br/>import store from "./store";<br/>import { BrowserRouter as Router, Switch, Route } from "react-router-dom";<br/><br/>import Home from "./pages/Home";<br/><br/>function App() {<br/>  return (<br/>    &lt;Provider store={store}&gt;<br/>      &lt;Router&gt;<br/>        &lt;Switch&gt;<br/>          &lt;Route path="/" component={Home} /&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/Provider&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="5f78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让React应用程序与Redux一起工作，我们必须将应用程序包装在其中，它接收<strong class="ky ir">。/src/store.js </strong>。这只是一个主页，还有更多的建设。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="f23c" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第七步</h1><p id="2674" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">命名资产</p><p id="d827" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于主页，这些是我用的gif。</p><p id="a407" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/clear.gif</p><p id="4844" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/clouds.gif</p><p id="0fdd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/毛毛雨. gif</p><p id="484e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/fog.gif</p><p id="6461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/rain.gif</p><p id="3b9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/snow.gif</p><p id="7212" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。/src/assets/雷暴. gif</p><p id="7837" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于主页，使用了八张图片。四个用于手机，四个用于台式机。</p><p id="a099" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于电话:</p><p id="a9ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">​ ./src/assets/p_bg1.jpg</p><p id="244f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">​ ./src/assets/p_bg4.jpg</p><p id="4ad8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于台式机:</p><p id="b5ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">​ ./src/assets/d_bg1.jpg</p><p id="b353" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">​ ./src/assets/d_bg4.jpg</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="e4b9" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第八步</h1><p id="3a50" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">家及其组成部分</p><p id="b9a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/pages/Home.tsx </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="862a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在将组件定义为一个<strong class="ky ir">类</strong>组件。使用<strong class="ky ir">反应钩子</strong>可以做同样的事情。</p><p id="b074" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">设置状态</strong>不会立即设置状态。它只在收到状态后的回调时执行。然后现在是递归调用改变背景照片的时候了。</p><p id="3512" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了清楚起见，让我们保持这样。</p><p id="4a81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">/src/components/home/card . tsx</strong></p><p id="d3c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用大写字母命名您的组件！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="23c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们收到的API请求是开尔文，所以要得到摄氏温度，我们必须减去273.15。</p><p id="e8c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您必须通过在请求URL上传递units=metric来做同样的事情。</p><p id="2875" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，这个组件可以被分成更小的部分，以便于理解和维护干净的代码。</p><p id="b059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有3个组件，我们必须探索。</p><p id="1918" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/components/home/left component . tsx</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="646a" class="nv mb iq nr b gy nw nx l ny nz">import React from "react";<br/>import { determineIcon } from "../Utils";<br/><br/>interface FormProps {<br/>  stateOfWeather: string;<br/>  idOfWeather: number;<br/>  day: boolean;<br/>}<br/><br/>function LeftComponent(props: FormProps) {<br/>  return (<br/>    &lt;div className="flex flex-col text-center"&gt;<br/>      {determineIcon(props.idOfWeather, props.day, "h-16 w-16")}<br/>      &lt;div&gt;{props.stateOfWeather}&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default LeftComponent;</span></pre><p id="e1cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/components/home/right component . tsx</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="299e" class="nv mb iq nr b gy nw nx l ny nz">import React from "react";<br/><br/>interface FormProps {<br/>  feelsLike: number;<br/>  deg: number;<br/>  speed: number;<br/>}<br/><br/>function RightComponent(props: FormProps) {<br/>  const determineLevel = (temp: number): string[] =&gt; {<br/>    if (temp &lt; 10 || temp &gt; 29) {<br/>      return ["Bad", "bg-red-600"];<br/>    }<br/><br/>    if ((temp &gt; 9 &amp;&amp; temp &lt; 18) || (temp &gt; 22 &amp;&amp; temp &lt; 30)) {<br/>      return ["ok", "bg-yellow-600"];<br/>    }<br/><br/>    if (temp &gt; 17 &amp;&amp; temp &lt; 23) {<br/>      return ["Good", "bg-green-600"];<br/>    }<br/><br/>    return [];<br/>  };<br/><br/>  const determineSide = (deg: number): string | undefined =&gt; {<br/>    if (deg &lt; 30) return "N";<br/><br/>    if (deg &lt; 60) return "NE";<br/><br/>    if (deg &lt; 120) return "E";<br/><br/>    if (deg &lt; 150) return "ES";<br/><br/>    if (deg &lt; 210) return "S";<br/><br/>    if (deg &lt; 240) return "SW";<br/><br/>    if (deg &lt; 300) return "W";<br/><br/>    if (deg &lt; 330) return "NW";<br/><br/>    if (deg &lt; 360) return "N";<br/>  };<br/><br/>  const feelsLikeProperties = determineLevel(props.feelsLike);<br/><br/>  return (<br/>    &lt;div className="self-end text-center"&gt;<br/>      &lt;div<br/>        className={`${feelsLikeProperties[1]} rounded-lg text-xs sm:text-sm p-1`}<br/>      &gt;<br/>        {props.feelsLike} {feelsLikeProperties[0]}<br/>      &lt;/div&gt;<br/>      &lt;div className="mt-1 text-xs md:text-sm"&gt;<br/>        {determineSide(props.deg)} {Math.round(props.speed * 3.6)} km/h<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default RightComponent;</span></pre><p id="472f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">风响应以米/秒为单位，因此要将其转换为千米/小时，需乘以3.6。</p><p id="917d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">。<strong class="ky ir">/src/components/home/tomorrow . tsx</strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="3e24" class="nv mb iq nr b gy nw nx l ny nz">import React from "react";<br/>import { RiArrowRightSLine } from "react-icons/ri";<br/>import { determineIcon } from "../Utils";<br/><br/>interface FormProps {<br/>  idOfWeather: number;<br/>  day: boolean;<br/>  list: [];<br/>}<br/><br/>function Tomorrow(props: FormProps) {<br/>  const determineNextDayAbb = (): string =&gt; {<br/>    const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];<br/><br/>    let date = new Date();<br/>    let index: number;<br/><br/>    if (date.getDay() === 6) {<br/>      index = 0;<br/>    } else {<br/>      index = date.getDay() + 1;<br/>    }<br/><br/>    return weekdays[index];<br/>  };<br/><br/>  const crawlNextDayTemps = (list: any[]): [number, number] | void =&gt; {<br/>    const d = new Date();<br/>    d.setDate(d.getDate() + 1); // tomorrow<br/><br/>    const tomorrow = d.getDate() &lt; 10 ? `0${d.getDate()}` : d.getDate();<br/><br/>    let min: number[] = [],<br/>      max: number[] = [];<br/><br/>    list.forEach((e) =&gt; {<br/>      if (`${e["dt_txt"][8]}${e["dt_txt"][9]}` === tomorrow.toString()) {<br/>        min.push(e.main.temp_min);<br/>        max.push(e.main.temp_max);<br/>      }<br/>    });<br/><br/>    return [<br/>      Math.round(Math.min(...min) - 273.15),<br/>      Math.round(Math.max(...max) - 273.15),<br/>    ];<br/>  };<br/><br/>  const nextDayTemps = crawlNextDayTemps(props.list);<br/><br/>  return (<br/>    &lt;div className="w-3/12"&gt;<br/>      &lt;div className="flex justify-between p-2"&gt;<br/>        &lt;div className="text-xs"&gt;{determineNextDayAbb()}&lt;/div&gt;<br/>        &lt;div className="text-xs flex items-center"&gt;<br/>          &lt;div&gt;More&lt;/div&gt;<br/>          &lt;RiArrowRightSLine /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="flex flex-col text-center"&gt;<br/>        &lt;div className="w-full"&gt;<br/>          {determineIcon(props.idOfWeather, props.day, "h-16 w-16 mx-auto")}<br/>        &lt;/div&gt;<br/>        &lt;div className="text-lg"&gt;<br/>          {Array.isArray(nextDayTemps) ? nextDayTemps[0] : "?"}/<br/>          {Array.isArray(nextDayTemps) ? nextDayTemps[1] : "?"}°<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default Tomorrow;</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="7331" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第九步</h1><p id="ff8e" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">城市及其组成部分</p><p id="04ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在先加上城市路线反应一下。</p><p id="8411" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/App.tsx </strong></p><p id="28ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之前:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="b9f5" class="nv mb iq nr b gy nw nx l ny nz">&lt;Route path="/" component={Home} /&gt;</span></pre><p id="ba4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="8b24" class="nv mb iq nr b gy nw nx l ny nz">&lt;Route path="/:city" component={City} /&gt;</span></pre><p id="825b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在“家”路线之前添加“城市”路线，或者利用<strong class="ky ir">确切的</strong>道具。</p><p id="7a2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在<strong class="ky ir">顶部添加。/src/App.tsx </strong>:</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="20ef" class="nv mb iq nr b gy nw nx l ny nz">import City from "./pages/City";</span></pre><p id="0d5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/pages/City.tsx </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="f2d4" class="nv mb iq nr b gy nw nx l ny nz">import React, { Component } from "react";<br/><br/>import Desktop from "../components/city/Desktop";<br/>import { connect } from "react-redux";<br/>import { fetchWeather } from "../actions/ajaxActions";<br/><br/>// match.params.city is URL (react-router) variable<br/>interface FormProps {<br/>  fetchWeather: Function;<br/>  match: {<br/>    params: {<br/>      city: string;<br/>    };<br/>  };<br/>  weather: Record&lt;string, any&gt;;<br/>}<br/><br/>interface FormState {<br/>  imageSrc: string;<br/>  random: number;<br/>}<br/><br/>class City extends Component&lt;FormProps, FormState&gt; {<br/>  constructor(props: any) {<br/>    super(props);<br/><br/>    if (<br/>      this.props.match.params.city !== "Munich" &amp;&amp;<br/>      this.props.match.params.city !== "London" &amp;&amp;<br/>      this.props.match.params.city !== "California"<br/>    ) {<br/>      window.location.replace("/404");<br/>      return;<br/>    }<br/><br/>    if (!Object.keys(this.props.weather).length) {<br/>      // fetch from api, if city is accessed directly<br/>      this.props.fetchWeather();<br/>    }<br/><br/>    const randomInt = (min: number, max: number) =&gt;<br/>      Math.floor(Math.random() * (max - min)) + min;<br/><br/>    this.state = {<br/>      imageSrc: "",<br/>      random: randomInt(1, 3), // choose random photo from 2 available photos<br/>    };<br/>  }<br/><br/>  updateDimensions = () =&gt; {<br/>    // change background photo for phone/desktop<br/>    this.setState({<br/>      imageSrc: require(`../assets/${<br/>        window.innerWidth &lt; 768 ? "p" : "d"<br/>      }_${this.props.match.params.city.toLowerCase()}${this.state.random}.jpg`),<br/>    });<br/>  };<br/><br/>  componentDidMount() {<br/>    this.updateDimensions();<br/>    window.addEventListener("resize", this.updateDimensions);<br/>  }<br/><br/>  render() {<br/>    return (<br/>      &lt;div<br/>        className="h-screen w-screen bg-cover bg-center"<br/>        style={{<br/>          backgroundImage: `url(${this.state.imageSrc})`,<br/>        }}<br/>      &gt;<br/>        &lt;Desktop<br/>          city={this.props.match.params.city}<br/>          info={this.props.weather[this.props.match.params.city]}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/><br/>const mstp = (state: { weatherReducer: { weather: {} } }) =&gt; ({<br/>  weather: state.weatherReducer.weather,<br/>});<br/><br/>export default connect(mstp, { fetchWeather })(City);</span></pre><p id="ac90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你可以看到，如果网址不符合这3个城市，我们重定向用户到404错误页面。最大的挑战是开发一个好看的404页面。</p><p id="f3fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样的模式被用于改变背景照片。</p><p id="c935" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果用户直接输入URL，即使状态中没有数据，应用程序也会从API获取数据。</p><p id="9637" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是代码中最大的部分。</p><p id="17ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/components/city/desktop . tsx</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="68b7" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">第十步</h1><p id="34b7" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">Utils.tsx</p><p id="d98a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多功能需要在组件之间共享。这些功能将根据我们的API通过改变图标和gif来适应。</p><p id="31c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/src/components/Utils.tsx </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc od l"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="24aa" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">步骤11</h1><p id="54d9" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">最终产品</p><p id="68fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/postcss.config.js </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="e7b1" class="nv mb iq nr b gy nw nx l ny nz">const purgecss = require("@fullhuman/postcss-purgecss")({<br/>  content: [<br/>    "./src/**/*.html",<br/>    "./src/**/*.ts",<br/>    "./src/**/*.tsx",<br/>    "./public/index.html",<br/>  ],<br/><br/>  defaultExtractor: (content) =&gt; {<br/>    const broadMatches = content.match(/[^&lt;&gt;"'`\s]*[^&lt;&gt;"'`\s:]/g) || [];<br/><br/>    const innerMatches = content.match(/[^&lt;&gt;"'`\s.()]*[^&lt;&gt;"'`\s.():]/g) || [];<br/><br/>    return broadMatches.concat(innerMatches);<br/>  },<br/>});<br/><br/>const cssnano = require("cssnano");<br/><br/>module.exports = {<br/>  plugins: [<br/>    require("tailwindcss"),<br/>    require("autoprefixer"),<br/>    cssnano({<br/>      preset: "default",<br/>    }),<br/>    purgecss,<br/>  ],<br/>};</span></pre><p id="9b2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">。/package.json </strong></p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="ba5c" class="nv mb iq nr b gy nw nx l ny nz">"build:tailwind": "tailwind build src/tailwind.css -o src/tailwind.output.css"</span></pre><p id="daab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换成</p><pre class="kg kh ki kj gt nq nr ns nt aw nu bi"><span id="32ec" class="nv mb iq nr b gy nw nx l ny nz">"build:tailwind": "postcss src/tailwind.css -o src/tailwind.output.css"</span></pre><p id="e7b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行<strong class="ky ir"> npm运行构建</strong>以在本地启动部署服务器。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="8605" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">结论</h1><p id="86b8" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">我希望你今天玩得开心并有所发现。我知道这篇文章比平时要长得多。感谢你的耐心，花时间在这上面。您可以通过添加更多功能来实现多种功能，并使其更加逼真。</p><p id="2899" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p><h2 id="6e78" class="nv mb iq bd mc oe of dn mg og oh dp mk lf oi oj mm lj ok ol mo ln om on mq oo bi translated">简单英语的JavaScript</h2><p id="5711" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="ky ir">！</strong></p></div></div>    
</body>
</html>
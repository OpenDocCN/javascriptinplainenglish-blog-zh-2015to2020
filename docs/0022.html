<html>
<head>
<title>Custom Elements — they’re easier to create than you think</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">定制元素——它们比你想象的更容易创建</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/custom-elements-its-easier-than-you-think-deb20c5474c8?source=collection_archive---------0-----------------------#2018-08-14">https://javascript.plainenglish.io/custom-elements-its-easier-than-you-think-deb20c5474c8?source=collection_archive---------0-----------------------#2018-08-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/22d95ff21b68f13cda7b45dbad5bdc9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ORD6DwvTrRLO4dq7MtSPQ.png"/></div></div></figure><p id="d346" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了<a class="ae kt" href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements" rel="noopener ugc nofollow" target="_blank">定制元素</a>，web开发者可以<strong class="jx io">创建新的HTML标签</strong>，增强现有的HTML标签，或者扩展其他开发者创作的组件。</p><p id="2ef3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了定义一个新的HTML元素，我们需要🔥JavaScript的力量！</p><h1 id="a106" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">定义元素的JavaScript API</h1><p id="22d2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用扩展了<code class="fe lx ly lz ma b"><strong class="jx io">HTMLElement</strong></code>的ES2015 <code class="fe lx ly lz ma b"><strong class="jx io">class</strong></code> <strong class="jx io"> </strong>来定义自定义元素的功能。</p><p id="dad6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">扩展<code class="fe lx ly lz ma b"><strong class="jx io">HTMLElement</strong></code> <strong class="jx io"> </strong>确保定制元素继承整个<strong class="jx io"> DOM API </strong>并意味着你添加到类中的任何<strong class="jx io">属性/方法</strong>成为元素的DOM接口的一部分。</p><p id="aca1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本质上，使用该类为您的标签创建一个<strong class="jx io">公共JavaScript API </strong>。</p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="4852" class="mj kv in ma b gy mk ml l mm mn"><strong class="ma io">class OurElement extends HTMLElement {...}</strong></span></pre><h1 id="bcff" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">定义新元素</h1><p id="eb69" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><code class="fe lx ly lz ma b"><strong class="jx io">customElements</strong></code> <strong class="jx io"> </strong>全局变量用于定义一个自定义元素，并向浏览器教授一个新标签。用您想要创建的标签名和一个JavaScript <code class="fe lx ly lz ma b"><strong class="jx io">class</strong></code> <strong class="jx io"> </strong>调用<code class="fe lx ly lz ma b"><strong class="jx io">customElements.define()</strong></code>来扩展基础<code class="fe lx ly lz ma b"><strong class="jx io">HTMLElement</strong></code></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="ac1f" class="mj kv in ma b gy mk ml l mm mn">window.customElements.define('our-element', <strong class="ma io">OurElement</strong>);</span></pre><blockquote class="mo mp mq"><p id="e51f" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated">重要的是要记住，使用定制元素与使用<code class="fe lx ly lz ma b">&lt;div&gt;</code>或任何其他元素没有什么不同。实例可以在页面上声明，在JavaScript中动态创建，可以附加事件监听器，等等。</p></blockquote><h1 id="6b26" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">生命周期</h1><p id="fc4a" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">自定义元素可以定义特殊的生命周期挂钩，用于在其存在的有趣时期运行代码。这些被称为<strong class="jx io">自定义元素反应</strong>。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/c6265d3ad98bacf644a8490966653844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nG29BKK8cx8rfpDn4LjEjg.png"/></div></div></figure><p id="55f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️ <strong class="jx io">构造器— </strong>元素的一个实例被创建或者<a class="ae kt" href="https://developers.google.com/web/fundamentals/web-components/customelements#upgrades" rel="noopener ugc nofollow" target="_blank">被升级</a></p><p id="6865" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️<strong class="jx io">connectedcallback</strong>——每次元素插入DOM时调用</p><p id="cdb3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️<strong class="jx io">disconnected callback</strong>—每次从DOM中移除元素时调用。对于运行清理代码很有用。</p><p id="f96e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️<strong class="jx io">attributechangedcallback</strong>—当一个<a class="ae kt" href="https://developers.google.com/web/fundamentals/web-components/customelements#attrchanges" rel="noopener ugc nofollow" target="_blank">观察属性</a>被添加、删除、更新或替换时调用。当解析器创建一个元素或者<a class="ae kt" href="https://developers.google.com/web/fundamentals/web-components/customelements#upgrades" rel="noopener ugc nofollow" target="_blank">升级</a>时，也需要初始值。</p><p id="a4e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️ <strong class="jx io">采用回调— </strong>自定义元素已经被移入一个新的<code class="fe lx ly lz ma b">document</code></p><h1 id="f124" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">入门指南👍</h1><p id="22e6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我们将在一个单独的JavaScript文件中创建所有内容，该文件将包含关于自定义元素的所有内容:样式规则、标记、ES6类定义，最后注册自定义元素。</p><p id="4071" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们想要使用自定义元素的HTML文件中，<strong class="jx io">我们所要做的就是包含那个JavaScript文件，然后我们就可以开始在我们的页面上使用新的标签了</strong></p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/e56e91e8342b93e054b33e2c27f1bcc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y062Q10AAg20vWPyE5XAbw.png"/></div></div></figure><p id="ec22" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是我们的自定义元素的类的定义，它应该扩展<strong class="jx io"> HTMLElement </strong>:</p><figure class="mb mc md me gt jo"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b023" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">这里有一些需要注意的事情:</strong></p><p id="fc4f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️类构造函数是一个附加影子根并定义其内部html的好地方。我们调用实现它的函数(<strong class="jx io"><em class="mr">)render(…)</em></strong>)。</p><p id="c51c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️当一个自定义元素的类有一个构造函数时，你应该总是在其中调用<strong class="jx io"> super() </strong>。</p><p id="4175" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">✔️阴影根的模式可以是开放的，也可以是封闭的。您可能只会使用open，因为否则您将无法为它设置任何innerHTML。</p><p id="bc4e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">使用影子DOM，下面是你的浏览器控制台中的标记外观:</strong></p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/7cdf370155bd66affae34cb79eae3f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VEISONJhJkNsvDJl3rtsFw.png"/></div></div></figure></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><h1 id="1145" class="ku kv in bd kw kx nh kz la lb ni ld le lf nj lh li lj nk ll lm ln nl lp lq lr bi translated">使用🔥</h1><p id="85a8" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用我们的定制元素非常简单，只需将脚本文件添加到页面中，然后像使用任何其他常规HTML元素一样使用我们的元素。</p><blockquote class="mo mp mq"><p id="c402" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated">但是请注意，自定义元素应该始终有一个结束标记:</p></blockquote><figure class="mb mc md me gt jo"><div class="bz fp l di"><div class="mx my l"/></div></figure><figure class="mb mc md me gt jo gh gi paragraph-image"><div class="ab gu cl nm"><img src="../Images/9d9154a4566ec3f663b7350d8b0fac28.png" data-original-src="https://miro.medium.com/v2/1*5m-Ty6IjvNBHM0vRBEiVDw.gif"/></div></figure><blockquote class="nn"><p id="9fbe" class="no np in bd nq nr ns nt nu nv nw ks dk translated">请记住，我们的元素还没有做好生产准备。现在，这个元素只能在一些现代浏览器中使用。</p><p id="c64a" class="no np in bd nq nr nx ny nz oa ob ks dk translated">对于ES6类或字符串文字等不被全面支持的JavaScript特性，您将希望通过Babel等transpiler运行代码，并且您将希望对自定义元素和阴影DOM使用polyfills。</p><p id="cf6b" class="no np in bd nq nr nx ny nz oa ob ks dk translated">我们将在另一篇文章中介绍如何使用Web组件polyfills。</p></blockquote></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><p id="d2a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi oc translated"><span class="l od oe of bm og oh oi oj ok di"> M </span>矿石环节:</p><div class="ol om gp gr on oo"><a href="https://www.webcomponents.org/introduction" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi translated">简介-webcomponents.org</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">Web组件是一组web平台API，允许您创建新的自定义的、可重用的、封装的HTML标记，以…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.webcomponents.org</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc jt oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://alligator.io/web-components/your-first-custom-element/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi translated">您的第一个自定义元素</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">那么您对学习Web组件和创建自己的定制HTML标签感兴趣吗？在本帖中，我们将探索…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">鳄鱼. io</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc jt oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://developers.google.com/web/fundamentals/web-components/customelements" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi translated">定制元素v1:可重用的Web组件| Web基础| Google开发者</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">自定义元素允许web开发人员定义新的HTML标记，扩展现有的标记，并创建可重用的web组件。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">developers.google.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc jt oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://habr.com/post/210058/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi translated">网页组件- будущее网页</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">спустяккоевремясталоясно，что основная идея原型вошлавпротиворечиесмиииом。Создатели браузеров ответили…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">habr.com</p></div></div><div class="ox l"><div class="pf l oz pa pb ox pc jt oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://learn.javascript.ru/webcomponents" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi">Веб-компоненты: взгляд в будущее</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">веб-компоненты-" будущего":совокупность，которыепозволяютописыватьновыетипыdom-элементов…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">learn.javascript.ru</p></div></div><div class="ox l"><div class="pg l oz pa pb ox pc jt oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://www.polymer-project.org/3.0/toolbox/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd io gy z fp ot fr fs ou fu fw im bi translated">聚合物应用工具箱-聚合物项目</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">编辑描述</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.polymer-project.org</p></div></div><div class="ox l"><div class="ph l oz pa pb ox pc jt oo"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Complex Angular Component Interaction Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">复杂角部件相互作用示例</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/complex-angular-component-interaction-examples-b1f9488a784c?source=collection_archive---------2-----------------------#2020-03-14">https://javascript.plainenglish.io/complex-angular-component-interaction-examples-b1f9488a784c?source=collection_archive---------2-----------------------#2020-03-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fac28728f6142116589fa7786e6b0ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RfzDcNuDZuQ1DRJr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@timmossholder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tim Mossholder</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="802f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="c20d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些复杂的角分量相互作用的例子。</p><h1 id="ae48" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">父节点通过局部变量与子节点交互</h1><p id="b699" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以为子元素创建模板引用变量，然后在模板中引用该变量来访问父元素中子组件的变量。</p><p id="fe4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码:</p><p id="80d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6902" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';</span><span id="a22c" class="mq lc iq mh b gy mv ms l mt mu">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { PersonComponent } from './person/person.component';</span><span id="3ed7" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>    PersonComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="81d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9dad" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from '@angular/core';</span><span id="42f5" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.css']<br/>})<br/>export class AppComponent {<br/>  person = {};<br/>}</span></pre><p id="b85f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d7bb" class="mq lc iq mh b gy mr ms l mt mu">&lt;app-person #appPerson&gt;&lt;/app-person&gt;<br/>&lt;button (click)='appPerson.setPerson()'&gt;Set Person&lt;/button&gt;<br/>&lt;p&gt;{{appPerson.person.name}}&lt;/p&gt;</span></pre><p id="5221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">person.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cce5" class="mq lc iq mh b gy mr ms l mt mu">import { Component, Output, EventEmitter } from '@angular/core';</span><span id="55c7" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-person',<br/>  templateUrl: './person.component.html',<br/>  styleUrls: ['./person.component.css']<br/>})<br/>export class PersonComponent {<br/>  person = {};</span><span id="1298" class="mq lc iq mh b gy mv ms l mt mu">  setPerson() {<br/>    this.person = { name: 'Jane' };<br/>  }<br/>}</span></pre><p id="a81d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们把<code class="fe me mf mg mh b">person.component.html</code>留为空白。</p><p id="f1ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有<code class="fe me mf mg mh b">PersonComponent</code>，它是<code class="fe me mf mg mh b">AppComponent</code>的子节点。</p><p id="f592" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">PeronComponent</code>中，我们有<code class="fe me mf mg mh b">person</code>变量和<code class="fe me mf mg mh b">setPerson</code>方法。</p><p id="dccc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">app.component.html</code>中，我们添加了一个<code class="fe me mf mg mh b">#appPerson</code>模板变量，这样我们就可以访问它的变量。</p><p id="0fb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用它在Set Person按钮上调用<code class="fe me mf mg mh b">PersonComponent</code>的<code class="fe me mf mg mh b">setPerson</code>方法。</p><p id="88a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还在p元素中显示了来自<code class="fe me mf mg mh b">PersonComponent</code>的<code class="fe me mf mg mh b">appPerson.person.name</code>。</p><p id="3739" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击Set Person按钮时，p标签自动更新以显示由<code class="fe me mf mg mh b">setPerson</code>设置的<code class="fe me mf mg mh b">appPerson.person.name</code>的值。</p><h1 id="18c3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Parent调用@ViewChild()</h1><p id="23fa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在前面的例子中，我们访问子组件的局部变量。简单易行，但因为亲子连线都是在父体内完成的，所以受限。</p><p id="7152" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">父组件不能访问子组件。</p><p id="e5d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在父组件的代码中访问子组件，我们可以使用一个<code class="fe me mf mg mh b">ViewChild</code>。</p><p id="4bf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用<code class="fe me mf mg mh b">ViewChild</code>，我们可以编写以下代码:</p><p id="35a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="51b7" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';</span><span id="6c8f" class="mq lc iq mh b gy mv ms l mt mu">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { PersonComponent } from './person/person.component';</span><span id="21f2" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>    PersonComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="85d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e331" class="mq lc iq mh b gy mr ms l mt mu">import { Component, ViewChild } from '@angular/core';<br/>import { PersonComponent } from './person/person.component';</span><span id="c427" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.css']<br/>})<br/>export class AppComponent {<br/>  @ViewChild(PersonComponent, {static: false})<br/>  private personComponent: PersonComponent;</span><span id="6edf" class="mq lc iq mh b gy mv ms l mt mu">setPerson(){<br/>    this.personComponent.setPerson();<br/>  }<br/>}</span></pre><p id="02b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7eaa" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)='setPerson()'&gt;Set Person&lt;/button&gt;<br/>&lt;p&gt;{{personComponent &amp;&amp; personComponent.person.name}}&lt;/p&gt;<br/>&lt;app-person&gt;&lt;/app-person&gt;</span></pre><p id="4e2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">person.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8753" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from '@angular/core';</span><span id="1764" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-person',<br/>  templateUrl: './person.component.html',<br/>  styleUrls: ['./person.component.css']<br/>})<br/>export class PersonComponent {<br/>  person = {};</span><span id="362e" class="mq lc iq mh b gy mv ms l mt mu">  setPerson() {<br/>    this.person = { name: 'Jane' };<br/>  }<br/>}</span></pre><p id="4427" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们又把<code class="fe me mf mg mh b">person.component.html</code>留空了。</p><p id="3cec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe me mf mg mh b">PersonComponent</code>中有相同的<code class="fe me mf mg mh b">person</code>和<code class="fe me mf mg mh b">setPerson</code>成员。</p><p id="44b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">AppComponent</code>中，我们添加了如下<code class="fe me mf mg mh b">ViewChild</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c98a" class="mq lc iq mh b gy mr ms l mt mu">@ViewChild(PersonComponent, {static: false})<br/>private personComponent: PersonComponent;</span></pre><p id="d0e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<code class="fe me mf mg mh b">AppComponent</code>内直接访问<code class="fe me mf mg mh b">PersonComponent</code>。我们需要<code class="fe me mf mg mh b">PersonComponent</code>模板中的<code class="fe me mf mg mh b">app-person</code>组件，尽管我们没有在其中显示任何东西，以便<code class="fe me mf mg mh b">AppComponent</code>可以访问<code class="fe me mf mg mh b">PersonComponent</code>。</p><p id="c93c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们就直接调用<code class="fe me mf mg mh b">AppComponent</code>的<code class="fe me mf mg mh b">setPerson</code>方法中的方法。</p><p id="d300" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们通过以下方式访问模板中的<code class="fe me mf mg mh b">app-person</code>组件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="78e3" class="mq lc iq mh b gy mr ms l mt mu">&lt;p&gt;{{personComponent &amp;&amp; personComponent.person.name}}&lt;/p&gt;</span></pre><p id="c190" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">显示来自<code class="fe me mf mg mh b">PersonComponent</code>的<code class="fe me mf mg mh b">person.name</code>属性。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/f3883cd5939328636a87fef20d42341f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dw1rMT68BYJ1VQtG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@designbytholen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Regine Tholen</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="cd36" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">父母和孩子通过服务进行交流</h1><p id="7589" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">父组件和子组件也可以通过共享服务进行通信。</p><p id="3817" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建一个服务，然后将数据从父组件监听的子组件发送到服务中的一个可观察对象，这样它就可以获得最新的数据。</p><p id="83ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以编写以下代码:</p><p id="4aa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c747" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';</span><span id="b1e2" class="mq lc iq mh b gy mv ms l mt mu">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { PersonComponent } from './person/person.component';<br/>import { PersonService } from './person.service';</span><span id="f2ba" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>    PersonComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule<br/>  ],<br/>  providers: [PersonService],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="5d40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">person.service.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="669d" class="mq lc iq mh b gy mr ms l mt mu">import { Injectable } from '@angular/core';<br/>import { Subject } from 'rxjs';</span><span id="c5e8" class="mq lc iq mh b gy mv ms l mt mu">@Injectable({<br/>  providedIn: 'root'<br/>})<br/>export class PersonService {<br/>  private personSource = new Subject();<br/>  personSource$ = this.personSource.asObservable();</span><span id="9ef9" class="mq lc iq mh b gy mv ms l mt mu">  announcePerson(person) {<br/>    this.personSource.next(person);<br/>  }</span><span id="5656" class="mq lc iq mh b gy mv ms l mt mu">}</span></pre><p id="80ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2968" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from '@angular/core';<br/>import { PersonService } from './person.service';</span><span id="9ca8" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.css']<br/>})<br/>export class AppComponent {<br/>  person = {};</span><span id="e776" class="mq lc iq mh b gy mv ms l mt mu">  constructor(private personService: PersonService) {<br/>    personService.personSource$.subscribe(<br/>      person =&gt; {<br/>        this.person = person;<br/>      });<br/>  }<br/>}</span></pre><p id="5992" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b199" class="mq lc iq mh b gy mr ms l mt mu">&lt;app-person&gt;&lt;/app-person&gt;<br/>&lt;p&gt;{{person.name}}&lt;/p&gt;</span></pre><p id="31c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">person.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="473a" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from '@angular/core';<br/>import { PersonService } from '../person.service';</span><span id="7928" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: 'app-person',<br/>  templateUrl: './person.component.html',<br/>  styleUrls: ['./person.component.css']<br/>})<br/>export class PersonComponent {<br/>  constructor(private personService: PersonService) { }</span><span id="07d0" class="mq lc iq mh b gy mv ms l mt mu">  setPerson() {<br/>    this.personService.announcePerson({ name: 'Jane' });<br/>  }<br/>}</span></pre><p id="23ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">person.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bd05" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)='setPerson()'&gt;Set Person&lt;/button&gt;</span></pre><p id="c268" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有了<code class="fe me mf mg mh b">PersonService</code>，在这里我们创建了一个新的<code class="fe me mf mg mh b">Subject</code>，并将其转换为可观察值。</p><p id="38c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">annoucePerson</code>方法中，我们接受一个<code class="fe me mf mg mh b">person</code>对象，并调用<code class="fe me mf mg mh b">personSource</code>上的<code class="fe me mf mg mh b">next</code>，通过<code class="fe me mf mg mh b">personSource$</code>可观察对象广播<code class="fe me mf mg mh b">person</code>对象。</p><p id="f8d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">AppComponent</code>中，我们订阅了<code class="fe me mf mg mh b">personSource$</code>可观察到的写法:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9c8c" class="mq lc iq mh b gy mr ms l mt mu">personService.personSource$.subscribe(<br/>      person =&gt; {<br/>        this.person = person;<br/>      });</span></pre><p id="e567" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从可观测值中获取<code class="fe me mf mg mh b">person</code>的最新值。</p><p id="98da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">person.component.html</code>中，我们添加了如下按钮:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2aeb" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)='setPerson()'&gt;Set Person&lt;/button&gt;</span></pre><p id="1897" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击它时，我们调用<code class="fe me mf mg mh b">setPerson</code>方法，该方法从上面的<code class="fe me mf mg mh b">PersonService</code>中调用<code class="fe me mf mg mh b">annoucePerson</code>方法，该方法带有我们想要传入的对象。</p><p id="ddfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于<code class="fe me mf mg mh b">AppComponent</code>订阅了<code class="fe me mf mg mh b">personSource$</code>可观测值，我们应该得到<code class="fe me mf mg mh b">person.name</code>的最新值。</p><p id="fb26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们单击Set Person时，我们应该在屏幕上显示“Jane”。</p><h1 id="a479" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="11a1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用许多方式在父组件和子组件之间进行通信。</p><p id="884e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在父模板的子组件上添加一个模板变量，然后在父模板上访问它的公共成员。</p><p id="47ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要访问父组件中子组件的成员，我们可以通过引用父组件中子组件的<code class="fe me mf mg mh b">ViewChild</code>来完成。</p><p id="2a8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们可以创建一个在父组件和子组件之间共享的服务，然后调用<code class="fe me mf mg mh b">Subject</code>的<code class="fe me mf mg mh b">next</code>方法通过可观察对象广播消息。</p><p id="e7e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后父订阅可观察值，并从那里获得最新的广播值。</p></div></div>    
</body>
</html>
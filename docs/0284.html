<html>
<head>
<title>How to create your command-line program (CLI) with NodeJS and Commander.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用NodeJS和Commander.js创建您的命令行程序(CLI)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-command-line-npm-module-cli-using-commander-js-1073e616aee7?source=collection_archive---------7-----------------------#2019-09-11">https://javascript.plainenglish.io/how-to-create-a-command-line-npm-module-cli-using-commander-js-1073e616aee7?source=collection_archive---------7-----------------------#2019-09-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b6980259e68b1577c5f6901194fcd989.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuVFluyU2hg8UQXloU6BIQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Create your own command line</figcaption></figure><p id="e9d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这篇文章将向你展示如何使用Commander.js模块创建命令行npm模块(CLI)。</p><p id="5d9f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Commander.js是一个非常受欢迎的模块，可以让你创建自己的CLI程序。</p><p id="f26e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，开始您的新项目——假设我的项目名称是“json-now”</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c106" class="lh li in ld b gy lj lk l ll lm">$ git clone https://github.com/yourname/json-<!-- -->now<!-- -->.git<br/>$ cd json-<!-- -->now</span></pre><p id="4537" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，创建您的package.json文件:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b36d" class="lh li in ld b gy lj lk l ll lm">{<br/>  "name": "json-now",<br/>  "version": "0.0.1",<br/>  "bin": {<br/>    "json-now": "./bin/index.js"<br/>  },<br/>  "dependencies": {<br/>    "commander": "^3.0.1"<br/>  }<br/>}</span></pre><p id="5917" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，安装依赖项:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ada6" class="lh li in ld b gy lj lk l ll lm">$ npm install</span></pre><p id="a513" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">“bin”部分指定您的命令行名称。如您所见，继续创建一个包含“index.js”文件的“bin”目录:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ecd4" class="lh li in ld b gy lj lk l ll lm">#!/usr/bin/env node</span><span id="f39d" class="lh li in ld b gy ln lk l ll lm">const program = require('commander');<br/>const ver = require('../lib/ver');</span><span id="3694" class="lh li in ld b gy ln lk l ll lm">program<br/>  .usage('[options] &lt;file&gt;')<br/>  .option('-v, --version', 'show version', ver, '')<br/>  .option('-p, --port &lt;port&gt;', 'use custom port')<br/>  .option('-f, --flag', 'boolean flag', false)<br/>  .action((file, options) =&gt; {<br/>    console.log('file name: ', file);<br/>    // more hanlder: require('../lib/moreHandler')(options);<br/>  })<br/>  .parse(process.argv);</span></pre><p id="98d2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们创建第一个名为“-v”或“-version”的选项，它显示版本号。创建一个名为“lib”的目录和一个新文件“ver.js ”:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="d8fd" class="lh li in ld b gy lj lk l ll lm">const package = require('../package.json')</span><span id="c7cc" class="lh li in ld b gy ln lk l ll lm">module.exports = () =&gt; {<br/>    console.log(package.version);<br/>};</span></pre><p id="1227" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">到目前为止，它看起来直截了当。您创建了一个commander“程序”，它通过运行“ver.js”来处理类似“-v”的选项</p><p id="247e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">打开终端并试用它:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3441" class="lh li in ld b gy lj lk l ll lm">$ node bin/index.js -v<br/>0.0.1</span><span id="c45f" class="lh li in ld b gy ln lk l ll lm">$ node bin/index.js sample.json<br/>file name: sample.json</span></pre><p id="a351" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，是时候发布您的命令行供全世界使用了！</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="397b" class="lh li in ld b gy lj lk l ll lm">$ npm login<br/>$ npm publish</span><span id="01c0" class="lh li in ld b gy ln lk l ll lm">Try out your shiny new command:</span><span id="9c78" class="lh li in ld b gy ln lk l ll lm">$ npm install json-now -g<br/>$ json-now -v</span></pre><p id="8901" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上述代码位于此处，供您参考:</p><div class="lo lp gp gr lq lr"><a href="https://github.com/ngduc/json-now" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd io gy z fp lw fr fs lx fu fw im bi translated">ngduc/json-now</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">github.com</p></div></div></div></a></div></div></div>    
</body>
</html>
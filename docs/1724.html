<html>
<head>
<title>Detect When Users Switch Tabs In JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">检测用户在JavaScript中切换标签的时间</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/detect-when-users-switch-tabs-in-javascript-c4bc6660f19e?source=collection_archive---------3-----------------------#2020-04-17">https://javascript.plainenglish.io/detect-when-users-switch-tabs-in-javascript-c4bc6660f19e?source=collection_archive---------3-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9f2c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用JavaScript中的页面可见性API</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1186b749ec5b0e3a5cfc32a5383d5d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fEu2jDGbqSFs-Jay"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@alexandruz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexandru Zdrobău</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3640" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将学习如何在JavaScript中使用页面可见性API。这将允许你检测你的页面何时进入隐藏或可见状态。所以基本上你可以知道你的用户是否切换了标签或者最小化了他们的窗口。</p><p id="6e61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显然，这是非常通用的，但你基本上可以把这个API和使用它的任何手段，你想。例如，当用户切换标签时暂停视频或音乐，甚至做一些像节省资源这样的事情。也许当页面不被使用或者不可见时停止密集的任务，并且基本上暂停任何种类的自动动作，这些动作可能在页面被隐藏时发生。</p><p id="f682" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始吧。</p><h1 id="7a10" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">开始</h1><p id="914a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面是一个示例代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/7de524e714b58b0223ff57e82660cf19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rfiDpIdlUdBbsP3n_5hZlA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sample Code</figcaption></figure><p id="64f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在脚本标记中，我们将向文档对象添加一个事件侦听器。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="c4b5" class="mv lt iq mr b gy mw mx l my mz">document.addEventListener('visibilitychange', function()<br/>   document.title = document.visibilityState;<br/>   console.log(document.visibilityState);<br/>});</span></pre><p id="7982" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用名为<strong class="ky ir"> visibilitychange </strong>的事件。然后提供一个回调函数，每当网页上的可见性发生变化时，这个函数就会用<strong class="ky ir"> visibilityState </strong>属性的值来改变页面的文档标题。</p><p id="f33e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">visibilityState属性的值只取隐藏或可见的两个值中的一个。</p><h1 id="6868" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结果</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/8b4a48889ab5bbff6f7bb97759727d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3AAdBGthEfZPsvRAfif9hA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result</figcaption></figure><p id="eb41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，当你切换到另一个标签页时，顶部的标签页标题变为<strong class="ky ir">隐藏</strong>，当切换回页面时，变为<strong class="ky ir">可见</strong>。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="488d" class="ls lt iq bd lu lv ni lx ly lz nj mb mc jw nk jx me jz nl ka mg kc nm kd mi mj bi translated">奖金</h1><p id="5d52" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有一种不同的方法可以确定他们是否将状态设置为隐藏或禁用。这将通过隐藏的属性，本质上你将有一个真或假的值。页面隐藏时为True，页面可见时为false。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/c738e1365c09f336d273fd73df18baab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Md9iYu2vZ2zTX6mane8sA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">document.hidden</figcaption></figure><p id="a7f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/42d2302882d455df5bf0d90f816d35ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Fc3k_pGVEvtmh1K3i2ByvQ.gif"/></div></div></figure><p id="332f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是如何在JavaScript中使用可见性API。</p><h2 id="bf61" class="mv lt iq bd lu nn no dn ly np nq dp mc lf nr ns me lj nt nu mg ln nv nw mi nx bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="96bd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物，表达对它们的爱:<a class="ae kv" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ky ir"/></a><a class="ae kv" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ky ir">UX</strong></a><a class="ae kv" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ky ir">Python</strong></a><strong class="ky ir"/>——谢谢，继续学习！</p><p id="cf09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kv" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">submissions @ plain English . io</strong></a><strong class="ky ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Introduction to the HTML Dialog Element</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML对话框元素介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-the-html-dialog-element-39a369d80028?source=collection_archive---------5-----------------------#2020-01-10">https://javascript.plainenglish.io/introduction-to-the-html-dialog-element-39a369d80028?source=collection_archive---------5-----------------------#2020-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f0b4a5b5116618c7b9ac214fd338f071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*av3QcNoGhNYMHrLd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben White</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3dea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">web应用程序中经常使用对话框。它们用于显示确认消息、警告和其他适合弹出窗口的东西。</p><p id="6436" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在对话框元素出现之前，我们只有内置在JavaScript中的<code class="fe lb lc ld le b">alert</code>和<code class="fe lb lc ld le b">confirm</code>函数来显示纯文本消息。它们不能设置样式，也不能显示除文本之外的任何内容。</p><p id="131d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外<code class="fe lb lc ld le b">alert</code>和<code class="fe lb lc ld le b">confirm</code>对话框除了内置的按钮之外不能有任何按钮。</p><p id="1490" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在不添加库的情况下更容易地创建对话框，现在我们可以使用<code class="fe lb lc ld le b">dialog</code>元素来创建弹出对话框。</p><p id="152b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何将<code class="fe lb lc ld le b">dialog</code>元素添加到我们的应用程序中，并用它们做些什么。</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lf"><img src="../Images/5f92efe8fe9caa2e75f19ea91f102daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X2m8qH9Ls4cDN34m"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@celine_sayuri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Celine Sayuri Tagami</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2048" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">创建对话框</h1><p id="4f2c" class="pw-post-body-paragraph kd ke iq kf b kg mi ki kj kk mj km kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">为了创建对话框，我们将添加如下的<code class="fe lb lc ld le b">dialog</code>元素:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="2be4" class="mr ll iq le b gy ms mt l mu mv">&lt;dialog open&gt;<br/>  &lt;p&gt;Greetings!&lt;/p&gt;<br/>&lt;/dialog&gt;</span></pre><p id="a158" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个带有<code class="fe lb lc ld le b">open</code>属性的<code class="fe lb lc ld le b">dialog</code>来显示对话框。默认样式取决于浏览器。</p><p id="38ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Chrome中，默认情况下是这样的:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/74bff6f2b04d2efc3d51bbbf8e66ca21.png" data-original-src="https://miro.medium.com/v2/resize:fit:394/format:webp/1*HqcGi0Npk8zpJW-B0awoCQ.png"/></div></figure><p id="5c0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以向一个<code class="fe lb lc ld le b">dialog</code>元素添加任何HTML。例如，我们可以添加如下表单:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="353f" class="mr ll iq le b gy ms mt l mu mv">&lt;dialog open&gt;<br/>  &lt;form method="dialog"&gt;<br/>    &lt;p&gt;<br/>      &lt;label&gt;<br/>        Name:<br/>      &lt;/label&gt;<br/>      &lt;input type='type' name='name'&gt;<br/>    &lt;/p&gt;</span><span id="a795" class="mr ll iq le b gy mx mt l mu mv">    &lt;p&gt;<br/>      &lt;label&gt;<br/>        Favorite Fruit:<br/>      &lt;/label&gt;<br/>      &lt;select name='fruit'&gt;<br/>        &lt;option value='apple' selected&gt;Apple&lt;/option&gt;<br/>        &lt;option value='banana'&gt;Banana&lt;/option&gt;<br/>        &lt;option value='grape'&gt;Grape&lt;/option&gt;<br/>      &lt;/select&gt;<br/>    &lt;/p&gt;</span><span id="d707" class="mr ll iq le b gy mx mt l mu mv">    &lt;menu&gt;<br/>      &lt;button value="cancel"&gt;Cancel&lt;/button&gt;<br/>      &lt;button id="confirm-btn" value="default"&gt;Confirm&lt;/button&gt;<br/>    &lt;/menu&gt;<br/>  &lt;/form&gt;<br/>&lt;/dialog&gt;</span><span id="3a77" class="mr ll iq le b gy mx mt l mu mv">&lt;menu&gt;<br/>  &lt;button id="dialog-button"&gt;Update Fruit&lt;/button&gt;<br/>&lt;/menu&gt;</span><span id="f5ba" class="mr ll iq le b gy mx mt l mu mv">&lt;output&gt;&lt;/output&gt;</span></pre><p id="83fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的<code class="fe lb lc ld le b">dialog</code>有一个<code class="fe lb lc ld le b">form</code>元素，其中<code class="fe lb lc ld le b">method</code>被设置为<code class="fe lb lc ld le b">dialog</code>。这允许我们设置对话框的返回值，我们可以在点击确认关闭<code class="fe lb lc ld le b">dialog</code>后使用。</p><p id="207e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有一个<code class="fe lb lc ld le b">input</code>和<code class="fe lb lc ld le b">select</code>元素，让我们在表单中输入一些东西。</p><p id="5c6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们有一个ID为<code class="fe lb lc ld le b">dialog-button</code>的按钮来打开我们的<code class="fe lb lc ld le b">dialog</code>元素</p><p id="a10f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的JavaScript代码中，我们可以控制对话框的打开和关闭，并获得如下输入值:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="e87f" class="mr ll iq le b gy ms mt l mu mv">const dialogButton = document.getElementById('dialog-button');<br/>const dialog = document.querySelector('dialog');<br/>const output = document.querySelector('output');<br/>const input = document.querySelector('input');<br/>const select = document.querySelector('select');<br/>const confirmBtn = document.getElementById('confirm-btn');</span><span id="3233" class="mr ll iq le b gy mx mt l mu mv">dialogButton.addEventListener('click', () =&gt; {<br/>  if (typeof dialog.showModal === "function") {<br/>    dialog.showModal();<br/>  }<br/>});</span><span id="c2e1" class="mr ll iq le b gy mx mt l mu mv">select.addEventListener('change', (e) =&gt; {<br/>  confirmBtn.value = [select.value, input.value].join(' ');<br/>});</span><span id="f440" class="mr ll iq le b gy mx mt l mu mv">input.addEventListener('change', (e) =&gt; {<br/>  confirmBtn.value = [select.value, input.value].join(' ');<br/>});</span><span id="8eee" class="mr ll iq le b gy mx mt l mu mv">dialog.addEventListener('close', () =&gt; {<br/>  output.value = dialog.returnValue;<br/>});</span></pre><p id="1c44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开<code class="fe lb lc ld le b">dialog</code>我们有:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="7ef9" class="mr ll iq le b gy ms mt l mu mv">dialogButton.addEventListener('click', () =&gt; {<br/>  if (typeof dialog.showModal === "function") {<br/>    dialog.showModal();<br/>  }<br/>});</span></pre><p id="6c89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">showModal</code>方法打开<code class="fe lb lc ld le b">dialog</code>。</p><p id="8c12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们为<code class="fe lb lc ld le b">select</code>和<code class="fe lb lc ld le b">input</code>准备了监听器，如果用户输入任何内容，监听器就会获取它们的值。</p><p id="c4b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="1046" class="mr ll iq le b gy ms mt l mu mv">confirmBtn.value = [select.value, input.value].join(' ');</span></pre><p id="7c12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取<code class="fe lb lc ld le b">input</code>和<code class="fe lb lc ld le b">select</code>的值，并将其设置为<code class="fe lb lc ld le b">confirmBtn</code>的<code class="fe lb lc ld le b">value</code>属性，即确认按钮。这也将<code class="fe lb lc ld le b">dialog</code>的<code class="fe lb lc ld le b">returnValue</code>设置为<code class="fe lb lc ld le b">confirmBtn.value</code>。</p><p id="b349" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们有:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="da07" class="mr ll iq le b gy ms mt l mu mv">dialog.addEventListener('close', () =&gt; {<br/>  output.value = dialog.returnValue;<br/>});</span></pre><p id="a3ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取<code class="fe lb lc ld le b">returnValue</code>，它是从<code class="fe lb lc ld le b">input</code>和<code class="fe lb lc ld le b">select</code>监听器中分配的<code class="fe lb lc ld le b">confirmBtn.value</code>中获得的。</p><p id="e99b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/d31dd2f67e6fb2a771f1347804c6b7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*43nWILkR2yqi9wQ9zAVeIA.png"/></div></figure><p id="531a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们点击确认，我们会得到:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/9d3a0165054175b97e6b42f099110377.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*HU1u9msUhWMuLIYM6cLzpQ.png"/></div></figure><h1 id="6bc8" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">设计背景</h1><p id="562e" class="pw-post-body-paragraph kd ke iq kf b kg mi ki kj kk mj km kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">要样式化<code class="fe lb lc ld le b">dialog</code>的背景，我们可以通过使用<code class="fe lb lc ld le b">::backdrop</code> CSS伪元素来选择它，并对其应用样式。仅当显示<code class="fe lb lc ld le b">dialog</code>时，才绘制背景。</p><p id="c4fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以将其样式化如下:</p><pre class="lg lh li lj gt mn le mo mp aw mq bi"><span id="8936" class="mr ll iq le b gy ms mt l mu mv">dialog::backdrop {<br/>  background-color: lightblue !important;<br/>}</span></pre><p id="d7e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码将背景颜色从默认改为<code class="fe lb lc ld le b">lightblue</code>。</p><p id="5b25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到以下结果:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/659100f565867ddaf12da35b30aec7ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*Vzze3gdLSfF1KwSGya3oEw.png"/></div></figure><p id="03b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在创建弹出对话框时,<code class="fe lb lc ld le b">dialog</code>元素为我们节省了一些精力。我们不需要库或大量代码来创建简单的对话框。</p><p id="54cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在<code class="fe lb lc ld le b">dialog</code>关闭时设置<code class="fe lb lc ld le b">dialog.returnValue</code>的值，我们将<code class="fe lb lc ld le b">form</code>元素的<code class="fe lb lc ld le b">method</code>设置为<code class="fe lb lc ld le b">dialog</code>，并将确认按钮的<code class="fe lb lc ld le b">value</code>属性设置为我们想要设置的值。</p><p id="62d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当<code class="fe lb lc ld le b">dialog</code>打开时，我们可以使用<code class="fe lb lc ld le b">::backdrop</code>伪元素来设计背景的颜色。</p></div></div>    
</body>
</html>
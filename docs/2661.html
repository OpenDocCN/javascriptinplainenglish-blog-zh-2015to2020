<html>
<head>
<title>React Native Scrollable Animated Header</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应原生可滚动动画标题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-native-scrollable-animated-header-6dfe453d7078?source=collection_archive---------1-----------------------#2020-07-13">https://javascript.plainenglish.io/react-native-scrollable-animated-header-6dfe453d7078?source=collection_archive---------1-----------------------#2020-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0549" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">平滑动画标题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e06bfac20f219092783b34b11bf9693f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqM88XiHeNR-IACxRRBFHg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Franck V.</a> on <a class="ae kv" href="https://unsplash.com/s/photos/future?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b383" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如今，动画标题是当今应用程序中最常见的设计模式。动画是移动应用的重要组成部分。因此，我想在我的React本地应用程序中使用一个令人惊叹的动画标题。</p><p id="c980" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我决定写这篇短文来展示如何构建一个带有ScrollView和动画API的标题。让我们一起做吧。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="751f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最终动画标题</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/a76ee99f16951fd1d848513feddc232d.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/1*LUUXRnDzCQt77_8jucFokw.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Scrollable Animated Header</figcaption></figure><p id="4e86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想检查所有代码，这里有<a class="ae kv" href="https://github.com/Gapur/react-native-scrollable-animated-header" rel="noopener ugc nofollow" target="_blank"> Github </a>的链接。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="33b3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置项目</h1><p id="0d3a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">让我们创建一个名为<code class="fe mx my mz na b">react_native_scrollable_animated_header</code>的新React原生项目:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="31da" class="nf ma iq na b gy ng nh l ni nj">react-native init <!-- -->react_native_scrollable_animated_header<br/>cd <!-- -->react_native_scrollable_animated_header<br/>npm run ios</span></pre><p id="e0a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经成功地创建了React本地项目。我们准备好编码了！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2ed3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">制作魔法代码</h1><p id="4995" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">首先，我们需要为动画标题定义一些常量，这些常量将用于插入滚动位置值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="23ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将使用<code class="fe mx my mz na b">faker.js</code>为<code class="fe mx my mz na b">ScrollView</code>生成用户数据。<code class="fe mx my mz na b">faker.js</code>是一个非常棒的生成虚假数据的库。您应该通过以下命令行安装它:</p><pre class="kg kh ki kj gt nb na nc nd aw ne bi"><span id="ec96" class="nf ma iq na b gy ng nh l ni nj">npm install faker --save</span></pre><p id="982e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我将使用<code class="fe mx my mz na b">ScrollView</code>组件显示用户数据。所以我们应该这样修改<code class="fe mx my mz na b">App.js</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="b4bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们需要在<code class="fe mx my mz na b">ScrollView</code>下创建标题。我们会用<code class="fe mx my mz na b">Animated.View</code>。最终，它将被动画化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ea40" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">魔幻动画</h1><p id="9bbe" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">React Native为动画提供动画API。动画API侧重于输入和输出之间的声明性关系，中间有可配置的转换，以及控制基于时间的动画执行的启动/停止方法。</p><p id="dbb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<code class="fe mx my mz na b">Animated.ScrollView</code>来制作滚动视图，并附加一个回调来在<code class="fe mx my mz na b">onScroll</code>事件发生变化时监听它。然后，使用插值来映射y轴和不透明度之间的值。<code class="fe mx my mz na b">The interpolation</code>将输入范围映射到输出范围，通常使用线性插值，但也支持缓动功能。</p><p id="0c9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用下面几行代码更新我们的<code class="fe mx my mz na b">App.js</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="001f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面，我们使用<code class="fe mx my mz na b">useRef</code>来保存动画值。<code class="fe mx my mz na b">useRef</code>返回一个可变的ref对象，其<code class="fe mx my mz na b">.current</code>属性被初始化为传递的参数。</p><p id="5389" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要在滚动<code class="fe mx my mz na b">ScrollView</code>时更新动画值。我们将在<code class="fe mx my mz na b">Animated.event</code>前捕捉事件。它直接映射到动画值<code class="fe mx my mz na b">scrollY</code>，并在我们平移或滚动时更新它。</p><p id="e540" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过在动画配置中指定<code class="fe mx my mz na b">useNativeDriver: true</code>来使用本地驱动程序。</p><p id="b543" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用下面的代码来制作我们组件的动画:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e02c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们将<code class="fe mx my mz na b">scrollEventThrottle</code> <em class="nm"> </em>道具设置为16，这样事件发送的频率就足够让动画流畅。</p><p id="0a8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们的<code class="fe mx my mz na b">App.js</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="321c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="6589" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">感谢阅读，希望这篇文章对你有用。编码快乐！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7365" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">资源</h1><div class="nn no gp gr np nq"><a href="https://medium.com/appandflow/react-native-scrollview-animated-header-10a18cb9469e" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">React本机滚动视图动画标题</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">更新:更改了项目源以使用Expo，并稍微更改了结构以使用transforms而不是…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kp nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://medium.com/hackernoon/react-native-animated-header-using-animated-and-scrollview-9749255c149a" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">使用动画和滚动视图的React-Native动画标题</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">动画是为移动应用创造良好用户体验的重要组成部分。这很关键…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="of l ob oc od nz oe kp nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://www.skptricks.com/2019/06/react-native-scrollview-animated-header-example.html" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">React Native ScrollView动画标题示例</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">React本机ScrollView动画标题示例。本教程解释了如何在滚动视图中创建动画标题…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">www.skptricks.com</p></div></div><div class="nz l"><div class="og l ob oc od nz oe kp nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://blog.codecentric.de/en/2019/07/react-native-animated-with-hooks/" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">以代码为中心的AG博客</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">如何用React自带的React钩子的React原生动画动画系统制作动画？的目的是什么</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">blog.codecentric.de</p></div></div><div class="nz l"><div class="oh l ob oc od nz oe kp nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://github.com/Gapur/react-native-scrollable-animated-header" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">gapur/react-原生-可滚动-动画-标题</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">用ScrollView反应原生动画标题。为Gapur/react-native-scrollable-animated-header开发做出贡献…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">github.com</p></div></div><div class="nz l"><div class="oi l ob oc od nz oe kp nq"/></div></div></a></div><h2 id="a1df" class="nf ma iq bd mb oj ok dn mf ol om dp mj lf on oo ml lj op oq mn ln or os mp ot bi translated"><strong class="ak">简单英语的JavaScript</strong></h2><p id="e835" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="ky ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
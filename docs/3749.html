<html>
<head>
<title>Applying CSS Transitions with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React挂钩应用CSS过渡</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/applying-css-transitions-with-react-hooks-7bd84671bc6b?source=collection_archive---------2-----------------------#2020-10-22">https://javascript.plainenglish.io/applying-css-transitions-with-react-hooks-7bd84671bc6b?source=collection_archive---------2-----------------------#2020-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1a8d2eaf9d75f29632221073f65d95d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yS8yvWY8piRHKRXQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@chrislawton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Lawton</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fb6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然有许多流行的库，如<a class="ae kc" href="https://reactcommunity.org/react-transition-group/" rel="noopener ugc nofollow" target="_blank"> React Transition Group </a>和<a class="ae kc" href="https://github.com/chenglou/react-motion" rel="noopener ugc nofollow" target="_blank"> React Motion </a>来制作组件动画，但了解某个东西如何工作的最好方法之一是从头开始构建它。在本文中，我们将学习如何只用钩子创建进入和退出过渡。</p><p id="ed30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，下面是组件生命周期中的各个过渡阶段。</p><ol class=""><li id="9f61" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">安装好的</li><li id="86c8" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">进入</li><li id="192f" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">进入</li><li id="bdcf" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">出口</li><li id="c942" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">退出</li><li id="078f" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">未上炮架的</li></ol><p id="b07f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当一个组件被<strong class="kf ir">挂载</strong>时，这意味着它作为一个DOM元素出现，不管它的风格如何。当<strong class="kf ir">卸载</strong>时，意思相反，即从DOM中移除。传统上，在一个元素被挂载后，在回车上合成动画是没有问题的，但是当它被卸载时，动画就比较棘手了，因为React会在过渡前移除元素。因此，我们需要一个过渡性的退出状态来隐藏元素。</p><p id="8532" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将逐步构建完整的功能，所以让我们从一个简单的钩子<code class="fe lp lq lr ls b">useTransitionState</code>开始，它将通过提供的<code class="fe lp lq lr ls b">duration</code>从<code class="fe lp lq lr ls b">entering -&gt; entered</code>和<code class="fe lp lq lr ls b">exiting -&gt; exited</code>改变状态。这是通过<code class="fe lp lq lr ls b">useEffect</code>钩子实现的，它允许你执行副作用，比如在DOM更新后执行定时器。作为一个清理功能，我们将确保计时器被清除，以避免内存泄漏。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/a17e373ab965f4a7e8aa6dd2f068c623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ntq-ng6U0pLyWojVdiB-jw.png"/></div></div></figure><p id="5c70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将把这个钩子放在另一个钩子<code class="fe lp lq lr ls b">useTransitionControl</code>中，这个钩子为用户提供了两个回调函数来在进入和退出状态之间切换。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/5a9df9a7e687c17c8dc9cf8652291551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CJZ7gswIJj-ga5lHK7ElQ.png"/></div></div></figure><p id="1969" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们已经准备好在一个实际的组件中使用它了。我们必须为它提供一个css样式的对象，以便根据不同的转换状态来应用，并提供<code class="fe lp lq lr ls b">transition</code>属性来平滑效果。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/054c2673ff4c6afd84d761e4bfd07b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gg7O6uD20dgdifnpJZr_pA.png"/></div></div></figure><p id="0ba5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想卸载组件，我们可以很容易地添加一个条件逻辑，当状态为<code class="fe lp lq lr ls b">exited</code>时返回<code class="fe lp lq lr ls b">null</code>。这对于呈现列表或其他组件组非常有用。</p><p id="8c72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是最终结果！</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/214fce8f2057f8bb2be48fb67d58113e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*b6o4qm6_K5oB9oSIdscoig.gif"/></div></div></figure><p id="9a5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mb">注意*:在这个例子中使用了内联样式，但是一般来说，类对于转换更有性能。另一种选择是使用CSS-in-JS解决方案，比如样式化组件。</em></p><p id="f9d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
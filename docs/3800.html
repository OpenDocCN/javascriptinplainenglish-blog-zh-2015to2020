<html>
<head>
<title>How to build a Star Rating component in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中构建星级组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-star-rating-component-in-react-dad06b05679b?source=collection_archive---------3-----------------------#2020-10-26">https://javascript.plainenglish.io/how-to-build-a-star-rating-component-in-react-dad06b05679b?source=collection_archive---------3-----------------------#2020-10-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7e683e1c0c01a90c227e8b0fcf137d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYvvCIiWR0ejxfaY3FwJgw.png"/></div></div></figure><p id="a138" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你正在开发一个博客或CMS，你可能希望用户能够对文章或产品进行评级。这将使你能够根据产品的受欢迎程度来推荐产品。</p><p id="87db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文将介绍如何使用Codepen在React中构建一个开始评级组件。</p><p id="22f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想直接进入代码，下面是代码笔:</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Star Rating Component in React</figcaption></figure><p id="481a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果您是React新手或喜欢了解如何使用功能组件，现在让我们一步步来。</p><p id="42a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先让我们前往<em class="ld"> https://heroicons.dev </em>并挑选一个星形图标。</p><div class="le lf gp gr lg lh"><a href="https://heroicons.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd io gy z fp lm fr fs ln fu fw im bi translated">免费开源SVG图标库</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">新的麻省理工学院开源SVG图标库由史蒂夫·舒格设计。实心和笔画变体，一键复制粘贴，以及…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">heroicons.dev</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv jt lh"/></div></div></a></div><pre class="kt ku kv kw gt lw lx ly lz aw ma bi"><span id="1467" class="mb mc in lx b gy md me l mf mg">function StarIcon(props) {<br/>  const { fill = 'none' } = props;<br/>  return (<br/>    &lt;svg class="w-6 h-6" fill={fill} stroke="currentColor" viewBox="0 0 24 24" ae mh" href="http://www.w3.org/2000/svg" rel="noopener ugc nofollow" target="_blank"&gt;http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"&gt;&lt;/path&gt;&lt;/svg&gt;<br/>  );<br/>}</span></pre><p id="a92a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我将用于星级评定的<em class="ld"> StarIcon </em>组件。除了需要传入fill属性之外，没有什么特别的东西。使用SVG，我们可以传递填充颜色。这使得当我们悬停在<em class="ld">星星图标</em>上时，可以用黄色渲染星星，当我们不悬停在上面时，我们可以不填充。我默认填充属性为无。</p><p id="276f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们来看一遍比赛。</p><pre class="kt ku kv kw gt lw lx ly lz aw ma bi"><span id="a4cb" class="mb mc in lx b gy md me l mf mg">function RatingIcon(props) {<br/>  const {<br/>    index,<br/>    rating,<br/>    hoverRating,<br/>    onMouseEnter,<br/>    onMouseLeave,<br/>    onSaveRating,<br/>  } = props;</span><span id="9f0a" class="mb mc in lx b gy mi me l mf mg">  const fill = React.useMemo(() =&gt; {<br/>    if (hoverRating &gt;= index) {<br/>      return 'yellow';<br/>    } else if (!hoverRating &amp;&amp; rating &gt;= index) {<br/>      return 'yellow';<br/>    }<br/>    return 'none';<br/>  }, [rating, hoverRating, index]);</span><span id="978f" class="mb mc in lx b gy mi me l mf mg">  return (<br/>      &lt;div <br/>        className="cursor-pointer"<br/>        onMouseEnter={() =&gt; onMouseEnter(index)} <br/>        onMouseLeave={() =&gt; onMouseLeave()} <br/>        onClick={() =&gt; onSaveRating(index)}&gt;<br/>        &lt;StarIcon fill={fill} /&gt;<br/>      &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="152d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，该组件将从props中获取一个索引，指示我们正在悬停或单击的星星。它将接受我们给它的实际评分，以及悬停评分，即我们当前悬停的当前指数。然后，当我们悬停在星星上或点击星星时，我们会触发一些事件，<em class="ld"> onMouseEnter </em>，<em class="ld"> onMouseLeave </em>，以及<em class="ld">on average</em>。</p><p id="a5cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了计算填充颜色是否是黄色，我取悬停等级并检查它是否大于或等于当前指数。例如，如果悬停等级为3，则1、2和2将变为黄色。然后，如果没有悬停评级，而有一个设置评级，我运行相同的逻辑。因此，当您单击并设置真实评级时，当您将鼠标从组件上移开时，它会保存该评级。</p><p id="c831" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们来看看容器组件。</p><pre class="kt ku kv kw gt lw lx ly lz aw ma bi"><span id="7b4d" class="mb mc in lx b gy md me l mf mg">const App = () =&gt; {<br/>  const [rating, setRating] = React.useState(0);<br/>  const [hoverRating, setHoverRating] = React.useState(0);<br/>  const onMouseEnter = (index) =&gt; {<br/>    setHoverRating(index);<br/>  };<br/>  const onMouseLeave = () =&gt; {<br/>    setHoverRating(0);<br/>  };<br/>  const onSaveRating = (index) =&gt; {<br/>    setRating(index);<br/>  };<br/>  return(<br/>    &lt;div className="box flex"&gt;<br/>      {[1, 2, 3, 4, 5].map((index) =&gt; {<br/>        return (<br/>          &lt;RatingIcon <br/>            index={index} <br/>            rating={rating} <br/>            hoverRating={hoverRating} <br/>            onMouseEnter={onMouseEnter} <br/>            onMouseLeave={onMouseLeave} <br/>            onSaveRating={onSaveRating} /&gt;<br/>        )<br/>      })}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5bde" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我设置了两个需要跟踪的状态，一个是当有人点击一颗星并对该项目进行评级时的真实评级，另一个是当有人悬停在某个项目上想要对其进行评级时的悬停评级。然后我设置我的事件，当触发<em class="ld"> onMouseEnter </em>事件时设置悬停等级。当触发<em class="ld"> onMouseLeave </em>事件时，我重置悬停评级，当触发<em class="ld">on averaging</em>事件时，我保存他们点击的评级。</p><p id="60ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我设置了一个从1到5的数组，并用正确的索引、状态和事件创建了一个<em class="ld"> RatingIcon </em>组件。</p><p id="5bef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是针对前端的，但是您可以很容易地调用API并根据id获取当前评级，或者在用户登录时创建、更新评级。选择是无限的。</p><p id="2f24" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我的训练博客使用星级的截图。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/d9e164b9977f42ee2c12d3e5f5890c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JNQps-CWT_oILsAWYrN8Dg.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">https://entryleveldeveloper.training</figcaption></figure><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="mk ky l"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Entry Level Developer Training</figcaption></figure></div></div>    
</body>
</html>
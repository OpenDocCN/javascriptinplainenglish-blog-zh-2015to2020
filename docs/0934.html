<html>
<head>
<title>Lessons I learnt from building my first large-scale app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从构建我的第一个大型应用程序中学到的经验</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lessons-i-learnt-from-building-my-first-large-scale-app-281c56df8571?source=collection_archive---------0-----------------------#2020-01-04">https://javascript.plainenglish.io/lessons-i-learnt-from-building-my-first-large-scale-app-281c56df8571?source=collection_archive---------0-----------------------#2020-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="115a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8个月前，我开始开发一个电子应用程序。为了完成这项任务，我必须构建3个独立的子应用程序，在不同的环境中运行。以下是我一路走来学到的经验:</p><h1 id="35c3" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">语境</h1><p id="a38d" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在我进入细节之前，让我们从一些背景信息开始。2019年初，我开始申请实习，攻读合作学位。到4月份，我已经提交了几十份量身定制的申请，总共收到0份回复。你可以想象，这让我感到挫败，觉得自己不够优秀，根本不适合做任何工作。但是我没有让我的感情战胜我，我选择向自己证明我是有知识的，有能力的。在这一切结束的时候，我明白了，我真的没有我以为自己知道的那么多。</p><p id="351b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我开始在我的项目中寻找一些东西，我可以把它们变得更大，更有挑战性，以此来抑制我的冲动。最后，我选择了Binder，当时它只是一个同时管理Onedrive、Google Drive和Dropbox文件的网络应用。目标是创建一个可与上述服务相媲美的备份服务，但不包括文件共享部分。</p><h1 id="f7aa" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">旅程开始了</h1><blockquote class="lo"><p id="dde8" class="lp lq iq bd lr ls lt lu lv lw lx kk dk translated">我把一个非常好的应用程序变成了一个廉价的教程级别的代码块</p></blockquote><p id="079b" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果我没有从一开始就设定一些有点妄想的目标，我可能无法完成这个项目。我为自己设定的第一个里程碑是在我七月中旬生日的时候拥有一个可用的alpha版本。我立即开始工作。到5月份，我已经克隆了Binder，并开始拆除它。去掉许多对我没用的功能。我把一个非常好的应用程序变成了一个廉价的教程级别的代码块。</p><p id="f5db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我决定开发4个独立的应用程序。第一，在用户的PC上本地运行的客户端；第二，一个API后端来促进安全请求；第三，使用云工具来确保所有数据的完整性；最后，一个“营销”网页，因为每个产品都需要一个华丽的网站。😁</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/ad69371e6f14e09c95a7d24e2fe876c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*euiMNj4VF3qLi9kNgBS4MQ.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">The original “Binder”</figcaption></figure><h1 id="7a72" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">精彩的部分来了</h1><p id="1f20" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">好的好的，是的。在此之前的一切都与电子很少或没有关系，更不用说大规模的app开发了。但是我需要为你添加背景来理解我学习的来源。以下是我学到的5条主要经验:</p><h2 id="039e" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">#1确保使用传统的前端/后端结构，因为IPC是愚蠢的</h2><p id="6c65" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">太多次了，我发脾气是因为在electronic中进程间的通信是多么的平凡(我将再发一次脾气)。当然，IPC可能没有被<em class="nf">设计成</em>执行javascript式的抽象，完成传递函数作为对象等等。但如果是的话肯定会有帮助的！我没有设计一个瘦“客户端”，我的大部分代码都在主进程中，我必须严格区分什么是面向用户的，什么不是。我用来决定什么在主进程中，什么在渲染器中的规则是一个简单的问题——这段代码提供服务了吗？这段代码有多小并不重要。如果它服务于其他代码，它就进入主进程。唯一的例外是Stripe支付端点，出于安全原因，我希望它尽可能靠近用户。</p><h2 id="5d58" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">#2确保数据的完整性非常非常困难</h2><blockquote class="lo"><p id="a96d" class="lp lq iq bd lr ls lt lu lv lw lx kk dk translated">后门和前门没有什么不同，所改变的只是谁在使用它。</p></blockquote><p id="2b01" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">直到我开始使用Binder，我才意识到确保从任意数量的客户端接收到的所有数据保持正确和可访问是多么困难。安全地保存数据已经够难的了，但是现在你希望我验证数据<em class="nf">和</em>确保它与其他数据一致，而实际上不知道那些数据是什么？！</p><p id="d95f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">诚然，这有点夸张，但我的观点仍然成立。验证应该尽可能早地发生，并且应该沿着数据流重复进行(以较小的程度)。通过在每次更改数据时应用事务模型，可以更容易地维护一致性。事实是，随着实际数据而来的是大量的元数据，管理这些元数据只是稍微容易一点。制作一个读取用户数据并执行完整性检查的函数听起来总是一个好主意。但是经过长时间的思考，我终于发现后门和前门没有什么不同，所改变的只是谁在使用它。</p><h2 id="2bbf" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">#3把你的用户界面当成一双定制的鞋子</h2><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi ng"><img src="../Images/375700073bdcac4198d48fb8f539afbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRCWp22BORwEhYHpKSpDNA.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">Binder’s UI</figcaption></figure><p id="4060" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设计一个漂亮、实用的UI的一个很好的方法是把它看做一双定制的鞋子(或者一套定制的西装，或者其他什么，都没关系)。我在设计时问自己的第一个问题是，谁会关注Binder的UI？请注意，我没有说谁将会是使用用户界面的T4。这应该是你的第二个问题，因为外表决定一切。我过去参与过很多项目，我可以完全肯定地告诉你，如果你的应用程序看起来不合适，没有人会对它嗤之以鼻。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nh"><img src="../Images/7af21a5ce3c7237d8649575332dab1ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbt_JnRZPJbAd3elVuNNxQ.jpeg"/></div></div></figure><p id="fbf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我从笔记本上的小草图开始(我是用钢笔画的，因为我总是事后批评自己)。我的第一张草图突出了界面的整体布局，当我画更多的时候，我会雕刻出我想要的每个“页面”的细节。对我来说，让信息看起来更容易比信息本身更重要。</p><h2 id="78ce" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">#4没有太多的故障保险</h2><p id="a000" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">老实说，我不知道你是怎么想的，但是一想到在我收到付款后的API中出现错误，我就感到焦虑。当我开始支付服务时，我对自己说“你不能让任何错误被忽视”。从API收到购买计划请求的那一刻起，直到Stripe通知应用程序的webhooks并激活该计划，我让自己在每个地方都实现了故障保护。这种偏执确实减缓了我的发展进程，但我不后悔。我确切地知道付款是什么时候送来的，送来的目的是什么，以及之后应该采取的任何行动的状态。</p><h2 id="e9ca" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">#5不完美没关系</h2><blockquote class="lo"><p id="71a8" class="lp lq iq bd lr ls lt lu lv lw lx kk dk translated">重要的是制造出你有信心使用的东西，而不是为了赢得什么大奖的东西</p></blockquote><p id="c94c" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">作为一个完美主义者，我创造美好事物的尝试会很快失控，让我对每一行代码都吹毛求疵，争论它是否真的有必要。一次又一次，我努力在效率和可读性之间取得平衡。在最初的几个月里，我没有意识到我的很多努力在实践中是没有用的，因为重要的是打造出你有信心使用的东西，而不是赢得一些花哨奖项的东西。讽刺的是，我的第五课与第四课相矛盾，但这是好的方面。后者教会我小心谨慎，留意用户的期望，而前者则创造了界限，防止我陷入单一功能的微调。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="8a88" class="kl km iq bd kn ko np kq kr ks nq ku kv kw nr ky kz la ns lc ld le nt lg lh li bi translated">走向</h1><p id="9972" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">干得好，你读了我的整篇文章，也许你注意到了，也许没有，但是活页夹还没有完全完成。在写这篇文章的时候，我刚刚发布了我的第一个公开版本(beta 4)。我不打算把Binder变成一个成熟的产品，但是，我确实把它建成了一个实际的产品，以防万一我有点野心😉。你可以在这里查看华丽的网页<a class="ae nu" href="https://binderapp.xyz" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="ea41" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">在你走之前</h1><p id="1ce9" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我认为对公众安全的一切都可以在<a class="ae nu" href="https://github.com/DeveloperRic/binder-local" rel="noopener ugc nofollow" target="_blank">GitHub页面</a>上看到。我将在那里发布更新(这也是你如何下载本地客户端和它如何更新自己)。如果你从这篇文章中学到了什么，或者你只是喜欢阅读它，请发送一些👏🏾这是我的方式。我真的很感激！</p><p id="a4cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哦，还有，这里是我计算的4个子应用程序的一些统计数据，以提高我的自我意识:</p><h2 id="8f5a" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">活页夹-本地(电子客户端)</h2><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nv"><img src="../Images/2b212f3944909c3327eeefa025e0ab82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SgXZVzQDXT40uDj6k1hksg.png"/></div></div></figure><h2 id="9209" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">活页夹-网页(精美的网页)</h2><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nw"><img src="../Images/5bad7f194bfb9128e663fa90dc6114df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eu5MecT9UPZMq6bld-DggQ.png"/></div></div></figure><blockquote class="nx ny nz"><p id="33d3" class="jn jo nf jp b jq jr js jt ju jv jw jx oa jz ka kb ob kd ke kf oc kh ki kj kk ij bi translated">出于安全考虑，我没有把剩下的两个放在计数器里。</p></blockquote><h2 id="f26d" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">粘合剂-api</h2><p id="54ca" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">JavaScript: 21个文件，4117行<br/>其他文件:~ 150行</p><h2 id="d78c" class="mt km iq bd kn mu mv dn kr mw mx dp kv jy my mz kz kc na nb ld kg nc nd lh ne bi translated">binder-mongo(完整性服务)</h2><p id="e116" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">JavaScript: 16个文件，2374行<br/>其他文件:~ 140行</p><p id="5cb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码总行数:30，015</p></div></div>    
</body>
</html>
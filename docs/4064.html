<html>
<head>
<title>Best of Modern JavaScript — Handler Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的最佳处理程序方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-handler-methods-b68a9f225977?source=collection_archive---------8-----------------------#2020-11-13">https://javascript.plainenglish.io/best-of-modern-javascript-handler-methods-b68a9f225977?source=collection_archive---------8-----------------------#2020-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/637d27e1fabae96bdb6718e8cb1b9365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Psuk9fJXWKtn3aI"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@fezbot2000?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fezbot2000</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d142" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何控制JavaScript对象操作。</p><h1 id="4f7f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使对象不可配置</h1><p id="ff6d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使对象不可配置。</p><p id="8b69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们不能改变对象的属性描述符。</p><p id="65c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性描述符包括属性值、属性是否可写或是否可配置。</p><p id="9add" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可配置意味着能够更改对象的属性描述。</p><p id="0c89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要禁用可配置性，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="593e" class="mn lc iq mj b gy mo mp l mq mr">const obj = {};<br/>Object.defineProperty(obj, 'foo', {<br/>  value: 'bar',<br/>  writable: false,<br/>  configurable: false<br/>});</span></pre><p id="2c5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">Object.defineProperty</code>方法定义了<code class="fe ms mt mu mj b">obj.foo</code>属性。</p><p id="6ed5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个参数具有属性描述符。</p><p id="4ed9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">configurable</code>设置为<code class="fe ms mt mu mj b">false</code>让我们禁止改变属性描述符。</p><p id="48e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将<code class="fe ms mt mu mj b">writable</code>设置为<code class="fe ms mt mu mj b">false</code>，这样我们就不能改变<code class="fe ms mt mu mj b">foo</code>属性的值。</p><h1 id="2107" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe ms mt mu mj b">enumerate</code>陷阱</h1><p id="d254" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ES6代理最初打算包括<code class="fe ms mt mu mj b">enumerate</code>陷阱，让我们改变for-in循环的行为。</p><p id="a209" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但它被简化为代理。</p><h1 id="3f20" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">代理API</h1><p id="1c6e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有两种方法来创建代理。</p><p id="1b76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种方法是使用<code class="fe ms mt mu mj b">Proxy</code>构造函数。</p><p id="0613" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="df43" class="mn lc iq mj b gy mo mp l mq mr">const proxy = new Proxy(target, handler)</span></pre><p id="5e03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Proxy</code>构造函数接受一个<code class="fe ms mt mu mj b">target</code>对象和一个<code class="fe ms mt mu mj b">handler</code>对象来让trap对象操作。</p><p id="98e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种方法是使用<code class="fe ms mt mu mj b">Proxy.revocable</code>工厂功能。</p><p id="0cda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ae5a" class="mn lc iq mj b gy mo mp l mq mr">const {<br/>  proxy,<br/>  revoke<br/>} = Proxy.revocable(target, handler)</span></pre><p id="bc91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">去使用它。</p><p id="3cb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不同之处在于有一个<code class="fe ms mt mu mj b">revoke</code>函数让我们撤销对代理的访问。</p><h1 id="b989" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">处理程序方法</h1><p id="44b0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">handler</code>对象可以有各种方法让我们控制各种对象操作。</p><p id="e9bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">defineProperty(target, propKey, propDesc)</code>让我们控制如何用<code class="fe ms mt mu mj b">Object.defineProperty</code>定义属性。</p><p id="80e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">target</code>是代理控制的目标对象。</p><p id="db10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">propKey</code>有属性键。</p><p id="a2f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">propDesc</code>是带有属性描述符的对象。</p><p id="b393" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个布尔值。</p><p id="0c07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">deleteProperty(target, propKey)</code>让我们控制如何定义属性。</p><p id="62d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们具有与<code class="fe ms mt mu mj b">defineProperty</code>相同的前两个参数。</p><p id="35b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们控制<code class="fe ms mt mu mj b">delete</code>操作符的工作方式。</p><p id="52ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们控制如何检索属性。</p><p id="c748" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">receiver</code>是代理对象。</p><p id="db67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回我们想要返回的属性值。</p><p id="9f95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">getOwnPropertyDescriptor(target, propKey)</code>让我们控制属性描述符的返回方式。</p><p id="b10b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它来回报我们的方式。</p><p id="0d78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它控制着<code class="fe ms mt mu mj b">Object.getOwnPropertyDescriptor(proxy, propKey)</code>如何行动。</p><p id="9be2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">getPrototypeOf(target)</code>返回<code class="fe ms mt mu mj b">target</code>对象的原型。</p><p id="e695" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它控制<code class="fe ms mt mu mj b">Object.getPrototypeOf(proxy)</code>如何动作。</p><p id="a09d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">has(target, propKey)</code>让我们控制<code class="fe ms mt mu mj b">in</code>操作符的行为。</p><p id="3b6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该返回一个布尔值。</p><p id="f355" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">isExtensible(target)</code>让我们修改<code class="fe ms mt mu mj b">Object.isExtensible(proxy)</code>方法的行为。</p><p id="b23f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该返回一个布尔值。</p><p id="27ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">ownKeys(target)</code>可以改变几种方法的行为。</p><p id="fa96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个属性键数组。</p><p id="c315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它控制<code class="fe ms mt mu mj b">Object.getOwnPropertyPropertyNames(proxy)</code>返回字符串键的行为。</p><p id="d33b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还可以控制<code class="fe ms mt mu mj b">Object.getOwnPropertyPropertySymbols(proxy)</code>返回符号键的行为。</p><p id="7f25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且，它可以控制<code class="fe ms mt mu mj b">Object.keys(proxy)</code>方法的行为。</p><p id="be4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">preventExtensions(target)</code>让我们改变<code class="fe ms mt mu mj b">Object.preventExtensions(proxy)</code>的行为。</p><p id="04f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回布尔值。</p><p id="ff4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">set(target, propKey, value, receiver)</code>控制如何设置对象属性。</p><p id="9fa7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还返回一个布尔值。</p><p id="7a97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">setPrototypeOf(target, proto)</code>让我们改变<code class="fe ms mt mu mj b">Object.setPrototypeOf(proxy, proto)</code>方法的行为。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/1df4c13918dac160ec1732377d71a754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g2fiLpbLqVdekiT0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@joyceromero?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joyce Romero</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1d15" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ee11" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用代理处理器方法控制许多对象操作。</p><p id="5b7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Object</code>静态方法也可以用代理处理程序方法来控制。</p><p id="b568" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Exploring Array.isArray vs Lodash.isArray</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Array.isArray vs Lodash.isArray</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/exploring-array-isarray-vs-lodash-isarray-1f03e5c2b6fd?source=collection_archive---------6-----------------------#2020-12-22">https://javascript.plainenglish.io/exploring-array-isarray-vs-lodash-isarray-1f03e5c2b6fd?source=collection_archive---------6-----------------------#2020-12-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/337f90795da239dfb5a41e6fafac6834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ypvjBof_B0Hmh4iZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@punk_rock_vegan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina Rumpf</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6779" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章谈到了我在代码审查中的一次经历，最终引导我发现了<code class="fe lb lc ld le b">Array.isArray</code>和Lodash <code class="fe lb lc ld le b">_.isArray</code>之间的区别。事不宜迟，我们开始故事吧。</p><h1 id="f316" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">介绍</h1><p id="94bd" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">故事从在Gitlab中发送合并请求开始。它类似于你在Github中知道的pull请求。</p><p id="abcd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在代码本身中，我使用lodash <code class="fe lb lc ld le b">isArray</code>来检查变量。参考下面的代码片段。</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="4373" class="mq lg iq le b gy mr ms l mt mu">const { isArray } = require('lodash');</span><span id="9f45" class="mq lg iq le b gy mv ms l mt mu">​const requiredFields = getRequiredFields();</span><span id="80e3" class="mq lg iq le b gy mv ms l mt mu">​if (isArray(requiredFields)) {<br/>  return requiredFields;<br/>} else {<br/>  // do something else<br/>}</span></pre><p id="6173" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时此刻，我在这里使用lodash的原因是</p><ul class=""><li id="66a8" class="mw mx iq kf b kg kh kk kl ko my ks mz kw na la nb nc nd ne bi translated">我首先想到的是——这是人类的本能。</li><li id="f374" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated">其次，<code class="fe lb lc ld le b">lodash</code>当时已经在我的项目中安装使用了。</li></ul><p id="b3a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，当我的同事开始审查我的代码时，他提出了一个非常好的问题，我自己在那之前从未考虑过这个问题。</p><blockquote class="nk nl nm"><p id="11d4" class="kd ke nn kf b kg kh ki kj kk kl km kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><em class="iq">为什么用lodash代替原生数组检查</em> <code class="fe lb lc ld le b"><em class="iq">Array.isArray()</em></code> <em class="iq">？</em></p></blockquote><p id="4e70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正是这个问题让我有了后来的发现，我真的很感谢我的同伴提出的这个问题，它激励我去做后来的研究。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="457d" class="lf lg iq bd lh li ny lk ll lm nz lo lp lq oa ls lt lu ob lw lx ly oc ma mb mc bi translated">isArray的研究和调查</h1><p id="47be" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我首先尝试了关键字“Array.isArray vs lodash isArray”。显然，也有一群特殊的人和我有着同样的疑问。</p><p id="a560" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面的截图显示了搜索结果。你可以看到他们之间甚至有一个两年前建立的性能基准。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/ddc7ce2bc256713876c77c412da86648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oG5K6BBksPzeKl3rY8t2Dw.png"/></div></div></figure><p id="81fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我决定钻研Lodash的源代码，自己去发现真相。最后，我在Lodash中找到了下面的代码片段。从下面的代码片段中，我发现Lodash中的<code class="fe lb lc ld le b">isArray</code>函数实际上也在使用本机<code class="fe lb lc ld le b">Array.isArray</code>。</p><p id="6c42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，这实际上告诉我们，在您的代码中使用lodash <code class="fe lb lc ld le b">isArray</code>和<code class="fe lb lc ld le b">Array.isArray</code>没有区别，因为它们无论如何都会导致相同的实现。</p><p id="37d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个发现之后，我可以与那些正在为此奋斗的人分享，他们告诉我你不应该使用lodash的<code class="fe lb lc ld le b">isArray</code>，原生<code class="fe lb lc ld le b">Array.isArray</code>的性能要比优化的&amp;好得多。<strong class="kf ir">不！！！它们毕竟是一样的东西。</strong></p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/eeff72d0c5c9afa4ed2773fbdbd5fa89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTOTGNF4NQPJ9G6e2epTVw.png"/></div></div></figure></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="122e" class="lf lg iq bd lh li ny lk ll lm nz lo lp lq oa ls lt lu ob lw lx ly oc ma mb mc bi translated">结论</h1><p id="e6bc" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">从发现来看，来自lodash库的<code class="fe lb lc ld le b">isArray</code>和本机内置的<code class="fe lb lc ld le b">Array.isArray</code>之间没有区别，因为它们都导致相同的实现。</p><p id="1968" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我想在这里强调一点。你不应该选择安装<code class="fe lb lc ld le b">lodash</code>只是为了使用<code class="fe lb lc ld le b">isArray</code>,即使他们正在使用相同的实现，因为这里更大的问题是你只是在你的项目中添加了一个依赖项，但是你可以不用安装它就使用那个功能。</p><p id="a166" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读，下一篇文章再见。</p></div></div>    
</body>
</html>
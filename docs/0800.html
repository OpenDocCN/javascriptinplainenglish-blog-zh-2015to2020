<html>
<head>
<title>Build An Amazing Application Using React and Node together</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">结合使用React和Node构建一个令人惊叹的应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-an-amazing-application-using-react-and-nodejs-together-fad13ab7b49c?source=collection_archive---------0-----------------------#2019-12-13">https://javascript.plainenglish.io/build-an-amazing-application-using-react-and-nodejs-together-fad13ab7b49c?source=collection_archive---------0-----------------------#2019-12-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6b2c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在Node.js中创建Rest API，在React中访问它，并在Redux中存储结果</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d5068e2375753138267d65ec40c51566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-VKvo6SmN_lt3Lgml3JxQ.png"/></div></div></figure><p id="8f14" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我们将看到如何一起使用React + Node来创建一个令人惊叹的应用程序。</p><p id="68ea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这个应用程序中，我们将使用<a class="ae lk" href="https://randomuser.me/" rel="noopener ugc nofollow" target="_blank">https://randomuser.me/</a>API在每次刷新时显示十个随机用户。</p><p id="f484" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将从我们在上一篇文章<a class="ae lk" href="https://medium.com/javascript-in-plain-english/webpack-and-babel-setup-with-react-from-scratch-bef0fe2ae3e7" rel="noopener">中创建的React Starter代码开始</a></p><p id="1d37" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，首先，从<a class="ae lk" href="https://github.com/myogeshchavan97/react_starter" rel="noopener ugc nofollow" target="_blank">https://github.com/myogeshchavan97/react_starter</a>克隆存储库代码</p><p id="aad0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一旦项目被克隆，转到该项目并通过运行以下命令安装所有的依赖项</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="0009" class="lq lr in lm b gy ls lt l lu lv">npm install</span></pre><p id="1c3b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们将使用<code class="fe lw lx ly lm b">Express.js</code>创建一个新的服务器</p><p id="4fa2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用以下工具安装<code class="fe lw lx ly lm b">express</code>包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="8ac9" class="lq lr in lm b gy ls lt l lu lv">npm install express@4.17.1</span></pre><p id="0525" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用安装<code class="fe lw lx ly lm b">nodemon</code>包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="c7fd" class="lq lr in lm b gy ls lt l lu lv">npm install nodemon@2.0.2</span></pre><p id="f8b2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当我们在节点js文件中做任何更改时，我们使用<code class="fe lw lx ly lm b">nodemon</code>来自动重启服务器。</p><p id="e53a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">创建一个新的<code class="fe lw lx ly lm b">server</code>文件夹，并在<code class="fe lw lx ly lm b">server/index.js</code>中添加以下代码</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="fd8f" class="lq lr in lm b gy ls lt l lu lv">// Section 1<br/>const express = require('express');</span><span id="bbef" class="lq lr in lm b gy lz lt l lu lv">// Section 2<br/>const app = express();</span><span id="879e" class="lq lr in lm b gy lz lt l lu lv">// Section 3<br/>app.get('/', (req, res) =&gt; { <br/> res.send("&lt;h1&gt;Home page&lt;/h1&gt;");<br/>});</span><span id="74df" class="lq lr in lm b gy lz lt l lu lv">// Section 4<br/>app.listen(3000, () =&gt; {<br/> console.log('server started on port 3000');<br/>});</span></pre><p id="294d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们理解这里发生了什么</p><p id="577a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">1.在第1节中，我们添加了快递包导入<br/> 2。在第2节中，我们调用express函数来初始化应用程序<br/> 3。在第3节中，当我们访问应用程序<br/> 4时，我们通过将h1标签添加到响应对象来发送回HTML内容。在第4节中，我们将在端口<code class="fe lw lx ly lm b">3000</code>上启动express js服务器</p><p id="b68c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，您的文件夹结构将如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ma"><img src="../Images/afa83940fbb120a9422ed6a7b15ae389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvHLB9KUbyWJOabyIO2BjA.png"/></div></div></figure><p id="3fb7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">将启动服务器脚本添加到<code class="fe lw lx ly lm b">package.json</code>的<code class="fe lw lx ly lm b">scripts</code>部分，如下所示</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="75ed" class="lq lr in lm b gy ls lt l lu lv">"start-server": "nodemon server/index.js"</span></pre><p id="ddc7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，你的<code class="fe lw lx ly lm b">package.json</code>将看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mb"><img src="../Images/97d38e259cc0e31b441903bbef3a4f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_ktTRW0c7rYIfR5ULYOnA.png"/></div></div></figure><p id="3120" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，通过从终端执行以下命令来启动<code class="fe lw lx ly lm b">express</code>服务器</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="0459" class="lq lr in lm b gy ls lt l lu lv">npm run start-server</span></pre><p id="869f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，通过导航到<a class="ae lk" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>来访问应用程序</p><p id="4977" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，您可以看到如下所示的输出</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mc"><img src="../Images/fa1f59e134c6f6d03b6588132389ddbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gt3FJI1kcNdD3vJSt3z9UA.png"/></div></div></figure><p id="c832" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将使用<code class="fe lw lx ly lm b">axios</code>从<a class="ae lk" href="https://randomuser.me/" rel="noopener ugc nofollow" target="_blank">https://randomuser.me/</a>API中随机获取用户</p><p id="32ba" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，使用以下方法安装<code class="fe lw lx ly lm b">axios</code>包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="7c7b" class="lq lr in lm b gy ls lt l lu lv">npm install axios@0.19.0</span></pre><p id="38d6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">server/index.js</code>中增加<code class="fe lw lx ly lm b">axios</code>的导入语句为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="ec3a" class="lq lr in lm b gy ls lt l lu lv">const axios = require('axios');</span></pre><p id="9155" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并添加以下代码来获取列表并将其发送回来作为响应</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="1e83" class="lq lr in lm b gy ls lt l lu lv">app.get('/users', (req, res) =&gt; {<br/> axios.get('<a class="ae lk" href="https://randomuser.me/api/?page=1&amp;results=10" rel="noopener ugc nofollow" target="_blank">https://randomuser.me/api/?page=1&amp;results=10</a>')<br/>  .then(response =&gt; {<br/>    res.send(response.data);<br/>  });<br/>});</span></pre><p id="eeea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你的<code class="fe lw lx ly lm b">index.js</code>将看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi md"><img src="../Images/2b1ed94a960848be4c5dbbd01a934834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*if55KL0Rgaz_qCMstQ23YA.png"/></div></div></figure><p id="3593" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您可能已经注意到，当您在<code class="fe lw lx ly lm b">index.js</code>中保存上述代码时，<code class="fe lw lx ly lm b">express</code>服务器会自动重启。<br/>如果没有自动重启，可以再次执行<code class="fe lw lx ly lm b">npm run start-server</code></p><p id="f2b4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在导航到<a class="ae lk" href="http://localhost:3000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/users</a>，您将看到来自API的JSON响应，如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi me"><img src="../Images/5992f75a4441d02a8d17655e8206b639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PKNJqm1n0C9nCbIPdDMqeA.png"/></div></div></figure><p id="f748" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你想以上述格式化的方式查看JSON响应，你可以从<a class="ae lk" href="https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en" rel="noopener ugc nofollow" target="_blank">这里</a>安装chrome的<code class="fe lw lx ly lm b">JSON Formatter</code>扩展</p><p id="d39f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将了解如何在react代码中使用Node.js API。</p><p id="bf36" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">src/app.js</code>文件中添加<code class="fe lw lx ly lm b">axios</code>导入为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="0007" class="lq lr in lm b gy ls lt l lu lv">import axios from 'axios';</span></pre><p id="c57b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并在文件中添加以下代码。</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="885e" class="lq lr in lm b gy ls lt l lu lv">componentDidMount() {<br/> axios.get('<a class="ae lk" href="http://localhost:3000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/users</a>')<br/>  .then(response =&gt; {<br/>    console.log(response.data);<br/>  })<br/>}</span></pre><p id="f900" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，您的<code class="fe lw lx ly lm b">app.js</code>文件将如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mf"><img src="../Images/e2becc80b5b72dfe87a86a3ee8597564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3nnvUd4CW20BuVoy1WltfQ.png"/></div></div></figure><p id="82e6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，打开另一个终端，使用</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="6dd9" class="lq lr in lm b gy ls lt l lu lv">npm run start</span></pre><p id="ee83" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你正在使用Visual Studio代码，你可以从VS代码的<code class="fe lw lx ly lm b">terminal -&gt; New Terminal</code>菜单中打开一个终端</p><p id="0db7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您现在通过导航到<a class="ae lk" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>并打开控制台来访问应用程序，您将在控制台中看到如下所示的错误</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mg"><img src="../Images/f5b776ebf07afa92978cfa03ba937310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwzsg8GXJVsxdhDgF2G2SA.png"/></div></div></figure><p id="f2ec" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是因为浏览器不允许访问在另一个端口上运行的应用程序的数据，因为我们在端口8080上运行react应用程序，在端口3000上运行Node.js应用程序。</p><p id="b96f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是出于安全原因和跨域策略。</p><p id="887e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以要解决这个问题，我们需要安装<code class="fe lw lx ly lm b">cors</code> npm包并在我们的<code class="fe lw lx ly lm b">server/index.js</code>文件中使用它，这样Node.js服务器将允许任何应用程序访问它的API。</p><blockquote class="mh mi mj"><p id="9ea1" class="ko kp mk kq b kr ks jo kt ku kv jr kw ml ky kz la mm lc ld le mn lg lh li lj ig bi translated"><em class="in">不要担心，我们将在本文后面的</em>中看到如何在不使用cors的情况下使用node . js<em class="in">API</em></p></blockquote><p id="7b61" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，现在，通过运行以下命令来安装<code class="fe lw lx ly lm b">cors</code>包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="704b" class="lq lr in lm b gy ls lt l lu lv">npm install cors@2.8.5</span></pre><p id="f5bc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">安装完成后，转到<code class="fe lw lx ly lm b">server/index.js</code>并将导入添加为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="3236" class="lq lr in lm b gy ls lt l lu lv">const cors = require('cors');</span></pre><p id="9fd5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并将其添加为express中间件，使用</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="1bfa" class="lq lr in lm b gy ls lt l lu lv">app.use(cors());</span></pre><p id="7ba3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你的<code class="fe lw lx ly lm b">index.js</code>将看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mo"><img src="../Images/18e7e3b1abaa3b7822c2b88b31bb8da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gc0GRaL1vCziQKOYBKRgBQ.png"/></div></div></figure><p id="b6c1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在使用以下命令停止并重启Node.js服务器和react应用服务器</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="21df" class="lq lr in lm b gy ls lt l lu lv">npm run start-server<br/>npm run start</span></pre><p id="9451" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，如果您使用<a class="ae lk" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>访问react应用程序，</p><p id="a3de" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您将在控制台中看到Node.js API结果，如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mp"><img src="../Images/1170e93678bc10bf34ca070907435854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ttN-b20ugmuQYvabBYurg.png"/></div></div></figure><blockquote class="mh mi mj"><p id="4c86" class="ko kp mk kq b kr ks jo kt ku kv jr kw ml ky kz la mm lc ld le mn lg lh li lj ig bi translated">哇，我们已经从react应用程序访问了我们的Node.js API。</p></blockquote><p id="9565" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们将看到如何使用redux将API JSON数据存储在store中，并以一种漂亮的格式在UI上显示用户数据<br/>,让我们深入了解一下</p><p id="e9be" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">停止react应用服务器，并从终端运行以下命令来安装redux</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="4ea0" class="lq lr in lm b gy ls lt l lu lv">npm install redux@4.0.4</span></pre><p id="4187" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，在<code class="fe lw lx ly lm b">src</code>文件夹中创建<code class="fe lw lx ly lm b">actions</code>和<code class="fe lw lx ly lm b">reducers</code>文件夹，并在这两个文件夹中创建<code class="fe lw lx ly lm b">users.js</code>文件</p><p id="df4f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，您的文件夹结构将如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/1da8842a6ee4685c1dde947c846bb697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*8r3AklkkAYprsqpkAwIwug.png"/></div></figure><p id="5fc6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">actions/users.js</code>文件中添加以下动作</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="5e6f" class="lq lr in lm b gy ls lt l lu lv">export const addUsers = (users) =&gt; {<br/> return {<br/>  type: 'ADD_USERS',<br/>  users<br/> };<br/>};</span></pre><p id="d20f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并在<code class="fe lw lx ly lm b">reducers/users.js</code>中添加以下代码</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="d52d" class="lq lr in lm b gy ls lt l lu lv">const usersReducer = (state = [], action) =&gt; {<br/> switch(action.type) {<br/>  case 'ADD_USERS':<br/>   return [...state, ...action.users];<br/> }<br/>};</span><span id="a8fd" class="lq lr in lm b gy lz lt l lu lv">export default usersReducer;</span></pre><p id="271b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">创建一个<code class="fe lw lx ly lm b">store</code>文件夹并添加创建一个新文件<code class="fe lw lx ly lm b">store.js</code>并在其中添加以下内容</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="a1c5" class="lq lr in lm b gy ls lt l lu lv">import { createStore } from 'redux';<br/>import usersReducer from '../reducers/users';</span><span id="387a" class="lq lr in lm b gy lz lt l lu lv">const store = createStore(usersReducer);</span><span id="53dd" class="lq lr in lm b gy lz lt l lu lv">store.subscribe(() =&gt; {<br/> console.log('store data:', store.getState());<br/>});</span><span id="b6f2" class="lq lr in lm b gy lz lt l lu lv">export default store;</span></pre><p id="86c1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里，我们添加了<code class="fe lw lx ly lm b">store.subscribe</code>方法，当我们调度任何动作时，它将被触发，我们将能够使用<code class="fe lw lx ly lm b">store.getState</code>方法查看更新的商店数据</p><p id="380d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在打开<code class="fe lw lx ly lm b">src/app.js</code>,将商店和用户操作文件的导入添加为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="f06d" class="lq lr in lm b gy ls lt l lu lv">import store from './store/store';<br/>import { addUsers } from './actions/users';</span></pre><p id="f3b5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们将分派<code class="fe lw lx ly lm b">addUsers</code>动作，并将来自<code class="fe lw lx ly lm b">then</code>块中<code class="fe lw lx ly lm b">axios</code>调用结果的数据发送给用户</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="67eb" class="lq lr in lm b gy ls lt l lu lv">axios.get('<a class="ae lk" href="http://localhost:3000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/users</a>')<br/> .then(response =&gt; {<br/>  console.log(response.data);<br/>  store.dispatch(addUsers(response.data.results));<br/>})</span></pre><p id="bac7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你的<code class="fe lw lx ly lm b">src/app.js</code>将看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/8e24760bbddfec888903fad86f23bc6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UVCg1tCDv1q4SBLB3Q2XDA.png"/></div></div></figure><p id="d6c5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在使用以下命令启动react应用程序</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="19cf" class="lq lr in lm b gy ls lt l lu lv">npm run start</span></pre><p id="aa9f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您将看到用户被添加到商店中，如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ms"><img src="../Images/be36cb8e3ae727770f17385a841acdf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xvza9TC2ddyv8BF_lVpmhA.png"/></div></div></figure><p id="16b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">恭喜，我们已经在redux商店中添加了用户数据。现在我们将看看如何在UI上显示数据。</p><p id="7737" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为此，我们将安装<code class="fe lw lx ly lm b">react-redux</code>包，它将允许我们访问不同组件中的商店数据。</p><p id="e592" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用以下命令安装npm软件包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="3889" class="lq lr in lm b gy ls lt l lu lv">npm install react-redux@7.1.3</span></pre><p id="e806" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lw lx ly lm b">react-redux</code>库提供了<code class="fe lw lx ly lm b">Provider</code>组件，我们在其中传递redux存储和<code class="fe lw lx ly lm b">connect</code>方法，使用它们我们可以访问任何组件中的存储数据</p><p id="ae37" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">src</code>文件夹中创建一个名为<code class="fe lw lx ly lm b">components</code>的新文件夹，并在其中创建一个新文件<code class="fe lw lx ly lm b">Header.js</code>。在其中增加以下内容</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="d562" class="lq lr in lm b gy ls lt l lu lv">import React from 'react';</span><span id="f1ce" class="lq lr in lm b gy lz lt l lu lv">const Header = () =&gt; {<br/> return &lt;h1&gt;Random Users Application&lt;/h1&gt;;<br/>};</span><span id="a95a" class="lq lr in lm b gy lz lt l lu lv">export default Header;</span></pre><p id="56db" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在将<code class="fe lw lx ly lm b">src/app.js</code>中的<code class="fe lw lx ly lm b">Header</code>组件导入为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="f4b7" class="lq lr in lm b gy ls lt l lu lv">import Header from './components/Header';</span></pre><p id="db91" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并将呈现方法更改为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="c286" class="lq lr in lm b gy ls lt l lu lv">render() {<br/> return (<br/>  &lt;div&gt;<br/>   &lt;Header /&gt;<br/>  &lt;/div&gt;<br/> )<br/>}</span></pre><p id="8c4b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">将<code class="fe lw lx ly lm b">src/app.js</code>中<code class="fe lw lx ly lm b">react-redux</code>的进口增加为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="8a80" class="lq lr in lm b gy ls lt l lu lv">import { Provider } from 'react-redux';</span></pre><p id="b4c2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">并将<code class="fe lw lx ly lm b">reactDOM.render</code>方法从</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="e2f2" class="lq lr in lm b gy ls lt l lu lv">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</span></pre><p id="761c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">到</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="3218" class="lq lr in lm b gy ls lt l lu lv">ReactDOM.render(<br/> &lt;Provider store={store}&gt;<br/>  &lt;App /&gt;<br/> &lt;/Provider&gt;,<br/>document.getElementById('root'));</span></pre><p id="7933" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这里，我们将store prop添加到<code class="fe lw lx ly lm b">Provider</code>组件，分配我们的redux store，并在其中添加App组件。所以现在可以在App组件中包含的任何组件中使用<code class="fe lw lx ly lm b">react-redux</code>的<code class="fe lw lx ly lm b">connect</code>方法来访问Redux store数据。</p><p id="83a9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">components</code>文件夹中创建一个<code class="fe lw lx ly lm b">User.js</code>文件，并在其中添加以下内容</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="bb87" class="lq lr in lm b gy ls lt l lu lv">import React from 'react';</span><span id="f79e" class="lq lr in lm b gy lz lt l lu lv">const User = ({ name, location, email, picture }) =&gt; {<br/> return (<br/>  &lt;div&gt;<br/>   &lt;div&gt;<br/>    &lt;img src={picture.medium} alt={name.first} /&gt;<br/>   &lt;/div&gt;<br/>   &lt;div&gt;&lt;strong&gt;Name:&lt;/strong&gt; {name.first} {name.last}&lt;/div&gt;<br/>   &lt;div&gt;&lt;strong&gt;Country:&lt;/strong&gt; {location.country}&lt;/div&gt;<br/>   &lt;div&gt;&lt;strong&gt;Email:&lt;/strong&gt; {email}&lt;/div&gt;<br/>  &lt;/div&gt;<br/> );<br/>};</span><span id="2c9a" class="lq lr in lm b gy lz lt l lu lv">export default User;</span></pre><p id="4b4f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在在<code class="fe lw lx ly lm b">components</code>文件夹中创建一个<code class="fe lw lx ly lm b">UsersList.js</code>文件，并在其中添加以下内容</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="78f8" class="lq lr in lm b gy ls lt l lu lv">import React from 'react';<br/>import { connect } from 'react-redux';<br/>import User from './User';</span><span id="8048" class="lq lr in lm b gy lz lt l lu lv">const UsersList = (props) =&gt; {<br/> return (<br/>  &lt;div&gt;<br/>   { props.users &amp;&amp; props.users.map((user) =&gt; &lt;User key={user.login.uuid} {...user} /&gt; ) }<br/>  &lt;/div&gt;<br/> );<br/>};</span><span id="3e0a" class="lq lr in lm b gy lz lt l lu lv">const mapStateToProps = (state) =&gt; {<br/> return {<br/>   users: state<br/> };<br/>};</span><span id="4bb1" class="lq lr in lm b gy lz lt l lu lv">export default connect(mapStateToProps)(UsersList);</span></pre><p id="ea41" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里，当我们调用connect方法并向其传递mapStateToProps时，<code class="fe lw lx ly lm b">mapStateToProps</code>方法自动获取状态参数中的redux store数据，并从<code class="fe lw lx ly lm b">mapStateToProps</code>返回组件需要的任何数据。这里我们返回带有<code class="fe lw lx ly lm b">users</code>数据的对象。</p><p id="3223" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在<code class="fe lw lx ly lm b">UsersList</code>组件将获得这个对象作为我们可以使用<code class="fe lw lx ly lm b">props.users</code>访问的道具，我们使用map方法将单个用户传递给<code class="fe lw lx ly lm b">User</code>组件。</p><p id="d56d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但不是添加单独的道具，比如</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="9195" class="lq lr in lm b gy ls lt l lu lv">&lt;User name={<a class="ae lk" href="http://user.name" rel="noopener ugc nofollow" target="_blank">user.name</a>} location={user.location} email={email.location} /&gt;</span></pre><p id="6111" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们正在传播用户对象，并将其作为<code class="fe lw lx ly lm b">{ ...user }</code>传递，这更方便，是一种广泛使用的传递道具的方式。</p><p id="fe8f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您看到JSON响应结构，它看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mp"><img src="../Images/1170e93678bc10bf34ca070907435854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ttN-b20ugmuQYvabBYurg.png"/></div></div></figure><p id="3a7f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以我们使用ES6析构语法来访问<code class="fe lw lx ly lm b">User.js</code>文件中的这些属性</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="3cc5" class="lq lr in lm b gy ls lt l lu lv">const User = ({ name, location, email, picture }) =&gt; {</span></pre><p id="baf5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，如果您运行react应用程序，您将看到页面上显示的结果</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mt"><img src="../Images/8ab18dfa9d67017ea410e0d8169b4e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsuudK-xJ4_rGmx13jd6YA.png"/></div></div></figure><p id="d54a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将在我们的应用程序中添加CSS，这样应用程序将看起来很好</p><p id="6f6f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了在应用程序中添加CSS支持，我们需要安装两个npm包。</p><p id="509c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">1.css-loader :这将允许解析javascript文件<br/> 2中的css导入语句。样式加载器:这将获取我们所有的CSS代码，并将其添加到最终呈现的HTML页面的样式标签中</p><p id="6940" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">执行以下命令来安装这些软件包</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="7f28" class="lq lr in lm b gy ls lt l lu lv">npm install style-loader@1.0.1 css-loader@3.3.0</span></pre><p id="15b0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将通知<code class="fe lw lx ly lm b">webpack</code>使用这些包来使用CSS。<br/>因此打开<code class="fe lw lx ly lm b">webpack.config.js</code>并在规则数组中添加以下代码</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="4b33" class="lq lr in lm b gy ls lt l lu lv">{<br/> use: ['style-loader', 'css-loader'],<br/> test: /\.css/<br/>}</span></pre><p id="9e1f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你的<code class="fe lw lx ly lm b">webpack.config.js</code>将看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/d0869cb50627db3739ac6cae9dcea77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3aXS5-aQdz2kj8DwM3aGg.png"/></div></div></figure><p id="3567" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">src</code>文件夹中新建一个CSS文件夹，并在其中添加文件<code class="fe lw lx ly lm b">styles.css</code>，内容如下</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="e334" class="lq lr in lm b gy ls lt l lu lv">* {<br/> box-sizing: border-box;<br/>}</span><span id="7a64" class="lq lr in lm b gy lz lt l lu lv">body {<br/> font-family: "Lato", "Helvetica", Helvetica, sans-serif;<br/> background: #aa9a96;<br/> color: #fff;<br/> letter-spacing: 1px;<br/> font-weight: 100;<br/>}</span><span id="5496" class="lq lr in lm b gy lz lt l lu lv">.main-section {<br/> width: 60%;<br/> margin: auto;<br/>}</span><span id="2daf" class="lq lr in lm b gy lz lt l lu lv">.header {<br/> color: #f7df1e;<br/> text-align: center;<br/>}</span><span id="8365" class="lq lr in lm b gy lz lt l lu lv">.user-list {<br/> width: 80%;<br/> margin: auto;<br/>}</span><span id="52a6" class="lq lr in lm b gy lz lt l lu lv">.random-user {<br/> width: 100%;<br/> line-height: 1.5;<br/> color: #000;<br/> box-sizing: inherit;<br/> position: relative;<br/> background: #fff;<br/> box-shadow: 0 1px 2px 0 rgba(34,36,38,.15);<br/> margin: 10px;<br/> padding: 15px;<br/> border-radius: 10px;<br/> border: 1px solid rgba(34,36,38,.15);<br/>}</span><span id="17b2" class="lq lr in lm b gy lz lt l lu lv">.user-image {<br/> float: left;<br/> margin-right: 20px;<br/>}</span><span id="c176" class="lq lr in lm b gy lz lt l lu lv">.user-image img {<br/> width: 100%;<br/> height: 100%;<br/> border-radius: 50%;<br/>}</span><span id="3e9e" class="lq lr in lm b gy lz lt l lu lv">@media screen and (max-width: 768px) {<br/> body {<br/>  font-size: 14px;<br/> }</span><span id="d611" class="lq lr in lm b gy lz lt l lu lv"> .main-section {<br/>  width: 90%;<br/> }</span><span id="b250" class="lq lr in lm b gy lz lt l lu lv"> .user-image {<br/>  width: 100%;<br/>  text-align: center;<br/> }</span><span id="6c61" class="lq lr in lm b gy lz lt l lu lv"> .user-image img {<br/>  width: 150px;<br/>  height: auto;<br/> }</span><span id="9cd1" class="lq lr in lm b gy lz lt l lu lv">.random-user {<br/>  text-align: left;<br/>  word-break: break-word;<br/>  padding: 10px;<br/> }<br/>}</span></pre><p id="7f16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<code class="fe lw lx ly lm b">src/app.js</code>里面添加导入的CSS文件为</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="d231" class="lq lr in lm b gy ls lt l lu lv">import './css/styles.css';</span></pre><p id="e1db" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们将在组件文件中使用这些类</p><ol class=""><li id="fe46" class="mv mw in kq b kr ks ku kv kx mx lb my lf mz lj na nb nc nd bi translated">将header类添加到<code class="fe lw lx ly lm b">Header.js</code>的h1标签中</li></ol><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="fc17" class="lq lr in lm b gy ls lt l lu lv"> &lt;h1 className="header"&gt;Random Users Application&lt;/h1&gt;;</span></pre><p id="529a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">2.将类<code class="fe lw lx ly lm b">random-user</code>和<code class="fe lw lx ly lm b">user-image</code>添加到<code class="fe lw lx ly lm b">User.js</code>中，这样代码看起来会像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/a8e478cc93787a2343142844b09c357b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRHoSpfy2cvV6NsruR5CEA.png"/></div></div></figure><p id="2266" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">3.将类<code class="fe lw lx ly lm b">user-list</code>添加到<code class="fe lw lx ly lm b">UsersList.js</code>内的主div中，如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/bd477ca12c1f36d47a71d83efb2eea3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDkUep12oB3q-okElxjfyQ.png"/></div></div></figure><p id="a14d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，在<code class="fe lw lx ly lm b">src/App.js</code>文件中呈现<code class="fe lw lx ly lm b">UsersList</code>组件</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="6f9b" class="lq lr in lm b gy ls lt l lu lv">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import axios from 'axios';<br/>import store from './store/store';<br/>import { addUsers } from './actions/users';<br/>import { Provider } from 'react-redux';<br/>import Header from './components/Header';<br/>import UsersList from './components/UsersList';<br/>import './css/styles.css';<br/><br/>class App extends React.Component {<br/>    componentDidMount() {<br/>        axios.get('/users')<br/>            .then(response =&gt; {<br/>                console.log(response.data);<br/>                store.dispatch(addUsers(response.data.results));<br/>            })<br/>    }<br/>    render() {<br/>        return (<br/>            &lt;div className="main-section"&gt;<br/>                &lt;Header /&gt;<br/>                <strong class="lm io">&lt;UsersList /&gt;</strong><br/>            &lt;/div&gt;<br/>        )<br/>    }<br/>}<br/><br/>ReactDOM.render(<br/>    &lt;Provider store={store}&gt;<br/>        &lt;App /&gt;<br/>    &lt;/Provider&gt;,<br/>document.getElementById('root'));</span></pre><p id="5acc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在使用以下命令重新启动应用程序</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="f4cb" class="lq lr in lm b gy ls lt l lu lv">npm run start</span></pre><p id="0bea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最终的应用程序现在看起来会好得多</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d5068e2375753138267d65ec40c51566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-VKvo6SmN_lt3Lgml3JxQ.png"/></div></div></figure><p id="97c6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将看看如何移除<code class="fe lw lx ly lm b">cors</code>的使用，并移除运行两个独立命令的需要</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="60ae" class="lq lr in lm b gy ls lt l lu lv">npm run start // to run react application</span><span id="71f0" class="lq lr in lm b gy lz lt l lu lv">npm run start-server // to start nodejs server</span></pre><p id="cfe5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">打开<code class="fe lw lx ly lm b">server/index.js</code>并删除<code class="fe lw lx ly lm b">cors</code>的导入及其使用，并为<code class="fe lw lx ly lm b">path</code>添加一个导入</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="5973" class="lq lr in lm b gy ls lt l lu lv">const path = require('path');</span></pre><p id="ec3f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此外，在第2节中添加以下语句</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="5b77" class="lq lr in lm b gy ls lt l lu lv">app.use(express.static(path.join(__dirname, '..', 'public')));</span></pre><p id="625e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里，我们告诉express从我们有<code class="fe lw lx ly lm b">index.html</code>的<code class="fe lw lx ly lm b">public</code>目录提供所有文件</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/c9890eaadf085c9dabb87aa255fe1a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMMVlhazFPk5N1cwhTnlpQ.png"/></div></div></figure><p id="5bc6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在打开<code class="fe lw lx ly lm b">src/app.js</code>并更换</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="6e54" class="lq lr in lm b gy ls lt l lu lv">axios.get('http://localhost:3000/users')</span></pre><p id="87f4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">到</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="db95" class="lq lr in lm b gy ls lt l lu lv">axios.get('/users')</span></pre><p id="4202" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在执行以下命令</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="3ccd" class="lq lr in lm b gy ls lt l lu lv">npm run build</span></pre><p id="1f64" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">只有当您对react代码进行任何更改时，才需要执行该命令。</p><p id="d864" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这将运行<code class="fe lw lx ly lm b">webpack</code>命令，并在<code class="fe lw lx ly lm b">public</code>目录中创建一个<code class="fe lw lx ly lm b">bundle.js</code>。现在，将<code class="fe lw lx ly lm b">bundle.js</code>脚本包含在<code class="fe lw lx ly lm b">public/index.html</code>文件中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/18b3333c73cb35d98e871e0db326ea22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g1GyWh2-htkzQ7X0SdMFwQ.png"/></div></div></figure><p id="0ee4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以现在当我们加载<code class="fe lw lx ly lm b">index.html</code>时，我们所有的react代码也将被加载，这些代码在<code class="fe lw lx ly lm b">bundle.js</code>中</p><p id="53c7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用以下命令启动应用程序</p><pre class="kd ke kf kg gt ll lm ln lo aw lp bi"><span id="cb22" class="lq lr in lm b gy ls lt l lu lv">npm run start-server</span></pre><p id="8c0b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您无需使用<code class="fe lw lx ly lm b">cors</code>即可访问我们的应用程序</p><p id="1ebf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">完整源代码</strong>:<a class="ae lk" href="https://github.com/myogeshchavan97/react_node" rel="noopener ugc nofollow" target="_blank">https://github.com/myogeshchavan97/react_node</a></p><p id="bac3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">这篇文章就讲到这里。希望你今天学到了新东西。</strong></p><p id="f32a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了优化这款应用并将其部署到Heroku，请点击这里查看下一篇文章<a class="ae lk" href="https://medium.com/javascript-in-plain-english/how-to-optimize-react-app-for-production-and-deploy-it-to-heroku-498fbf222de" rel="noopener"/></p><div class="ni nj gp gr nk nl"><a href="https://medium.com/javascript-in-plain-english/how-to-optimize-react-app-for-production-and-deploy-it-to-heroku-498fbf222de" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd io gy z fp nq fr fs nr fu fw im bi translated">如何针对生产优化React App并将其部署到Heroku</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">了解如何让您的React应用程序更快</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz km nl"/></div></div></a></div><p id="2637" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">别忘了直接在你的收件箱</strong> <a class="ae lk" href="https://yogeshchavan.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">这里</strong> </a> <strong class="kq io">订阅我的每周时事通讯，里面有惊人的技巧、诀窍和文章。</strong></p></div></div>    
</body>
</html>
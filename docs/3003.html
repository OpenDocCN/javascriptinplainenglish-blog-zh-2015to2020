<html>
<head>
<title>How to Type-check Your JavaScript Without TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有TypeScript的情况下对JavaScript进行类型检查</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-type-check-your-javascript-without-typescript-563e5d384576?source=collection_archive---------5-----------------------#2020-08-17">https://javascript.plainenglish.io/how-to-type-check-your-javascript-without-typescript-563e5d384576?source=collection_archive---------5-----------------------#2020-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4072" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用JSDoc键入您的JavaScript代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ead5ca90b01ce0264233f24e925ec0f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eo8SKdcZEGyPExY-llFC5Q.png"/></div></div></figure><p id="75e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TypeScript并不适用于所有项目，但是如果您希望在当前项目中使用类型化JavaScript，这可能是一个很好的开始策略。</p><p id="4f7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将看到如何配置您的项目来获得这种支持，以及如何使用JSDoc向您的代码添加类型。</p><h1 id="7006" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">让我们创建我们的项目</h1><h2 id="8f5b" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤1:在开发依赖项上安装bundler和TypeScript</h2><p id="3398" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">首先，我们必须安装TypeScript。TypeScript将根据JSDoc检查我们代码中的类型。在这个例子中，我将使用<a class="ae mw" href="https://github.com/developit/microbundle" rel="noopener ugc nofollow" target="_blank">微捆绑包</a>来压缩我们的代码，并生成ESM、CJS、UMD捆绑包。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="4c67" class="mf lo iq my b gy nc nd l ne nf">$ npm init -y<br/>$ npm i -D typescript <a class="ae mw" href="https://github.com/developit/microbundle" rel="noopener ugc nofollow" target="_blank">microbundle</a></span></pre><h2 id="2e73" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤2:配置类型脚本</h2><p id="ada6" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">我们必须配置TypeScript来允许<code class="fe ng nh ni my b">.js</code>文件并检查它们。为此，用道具<code class="fe ng nh ni my b">"allowJs": true</code>和<code class="fe ng nh ni my b">"checkJs": true</code>创建文件<code class="fe ng nh ni my b">tsconfig.json</code>。通过声明属性，它将为项目中的每个JavaScript文件生成<code class="fe ng nh ni my b">.d.ts</code>文件。完整的<code class="fe ng nh ni my b">tsconfig.json</code>文件在这里:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><blockquote class="nl nm nn"><p id="d7d7" class="kr ks no kt b ku kv jr kw kx ky ju kz np lb lc ld nq lf lg lh nr lj lk ll lm ij bi translated"><strong class="kt ir">专业提示</strong>:关于其他<code class="fe ng nh ni my b">tsconfig.json</code>属性的更多信息，请查看<a class="ae mw" href="https://www.typescriptlang.org/tsconfig" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></blockquote><h2 id="ebaa" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤3:创建构建脚本</h2><p id="38ee" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">构建脚本将生成所有的包，并对我们的源代码进行类型检查。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="c42e" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤4:编写应用程序</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/f5383adfb1f3390d696004e1475cb5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*3zQev-Hj5anEGstlx5Vlsg.gif"/></div></figure><p id="b417" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在是时候编写您的应用程序了。在这个例子中，我有一个用户模块，可以保存、更新和获取用户信息。</p><p id="7be0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了创建我们的用户类型，我们将像这样定义一个JSDoc:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="5922" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们使用<code class="fe ng nh ni my b">@typedef</code>来定义像User这样的复杂类型。在<code class="fe ng nh ni my b">@typedef</code>中，<code class="fe ng nh ni my b">@property</code>定义了<code class="fe ng nh ni my b">User</code>对象的每个属性的类型。</p><p id="084e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们定义更新、保存和获取用户函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="f4d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于函数，我们基本上定义了函数的参数和返回。正如我们所看到的，我们遵循与定义<code class="fe ng nh ni my b">User</code>类型相同的模式，带有JSDoc注释、类型和参数名。对于返回，我们只有<code class="fe ng nh ni my b">@returns</code>和花括号之间的返回类型。</p><blockquote class="nl nm nn"><p id="eab2" class="kr ks no kt b ku kv jr kw kx ky ju kz np lb lc ld nq lf lg lh nr lj lk ll lm ij bi translated"><a class="ae mw" href="https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html" rel="noopener ugc nofollow" target="_blank">点击此处</a>查看支持的JSDoc注释。</p></blockquote><p id="c738" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完整的示例文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="8969" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤5:构建项目</h2><p id="69ae" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">要构建项目，我们只需运行:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="6b83" class="mf lo iq my b gy nc nd l ne nf">$ npm run build</span></pre><p id="f0ee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本例中，它将生成以下文件:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="9016" class="mf lo iq my b gy nc nd l ne nf">.<br/>├── index.d.ts<br/>├── index.d.ts.map<br/>├── my-project.js<br/>├── my-project.js.map<br/>├── my-project.modern.js<br/>├── my-project.modern.js.map<br/>├── my-project.module.js<br/>├── my-project.module.js.map<br/>├── my-project.umd.js<br/>└── my-project.umd.js.map</span></pre><ul class=""><li id="7071" class="nt nu iq kt b ku kv kx ky la nv le nw li nx lm ny nz oa ob bi translated"><code class="fe ng nh ni my b">.d.ts</code>文件包含类型脚本类型。</li><li id="c183" class="nt nu iq kt b ku oc kx od la oe le of li og lm ny nz oa ob bi translated"><code class="fe ng nh ni my b">.js</code>文件是您的JavaScript源文件缩小。</li><li id="4a76" class="nt nu iq kt b ku oc kx od la oe le of li og lm ny nz oa ob bi translated"><code class="fe ng nh ni my b">.modern.js</code>捆绑专为在所有现代浏览器<em class="no"/>中工作而设计。</li><li id="dcdc" class="nt nu iq kt b ku oc kx od la oe le of li og lm ny nz oa ob bi translated"><code class="fe ng nh ni my b">.module.js</code>捆绑ESM (javascript模块)。</li><li id="1fa4" class="nt nu iq kt b ku oc kx od la oe le of li og lm ny nz oa ob bi translated"><code class="fe ng nh ni my b">.umd.js</code>捆绑UMD(通用模块定义)。</li></ul><h1 id="7200" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="0065" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">现在您已经有了一个代码库，可以开始键入您的JavaScript项目了。要获得更多关于如何使用JSDoc来键入代码的见解，请观看保罗·路易斯视频<a class="ae mw" href="https://www.youtube.com/watch?v=YHvqbeh_n9U" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=YHvqbeh_n9U</a>。看看这个用这个策略建造的项目<a class="ae mw" href="https://github.com/cesarwbr/loadx" rel="noopener ugc nofollow" target="_blank">https://github.com/cesarwbr/loadx</a>。</p></div></div>    
</body>
</html>
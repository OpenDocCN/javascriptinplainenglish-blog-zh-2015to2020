<html>
<head>
<title>React Hooks -useState, useEffect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应钩子-使用状态，使用效果</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-hooks-usestate-useeffect-54e23b019d32?source=collection_archive---------12-----------------------#2020-03-16">https://javascript.plainenglish.io/react-hooks-usestate-useeffect-54e23b019d32?source=collection_archive---------12-----------------------#2020-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2857a76ca0c4c3562df8f027aa1722fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c0QycHBcMTs5uJWL.png"/></div></div></figure><h1 id="014a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是React钩子？</h1><p id="c4f8" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">来自React文档</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="689b" class="md jz iq lz b gy me mf l mg mh"><em class="mi">Hooks</em> are a new addition in React 16.8. They let you use state and other React features without writing a class.</span></pre><blockquote class="mj mk ml"><p id="b812" class="kw kx mi ky b kz mm lb lc ld mn lf lg mo mp lj lk mq mr ln lo ms mt lr ls lt ij bi translated">换句话说，</p><p id="b762" class="kw kx mi ky b kz mm lb lc ld mn lf lg mo mp lj lk mq mr ln lo ms mt lr ls lt ij bi translated">在React 16.8之前，当开发人员需要使用状态和生命周期事件时，他们被迫使用类组件。因为功能组件是无状态组件，没有任何生命周期事件。</p></blockquote><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/d861e92e870e020ae922671688a7b697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*n4V8jBJAarLwDUxQ41Cm0g.png"/></div></figure><p id="1a63" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">钩子将打破这些障碍。</p><p id="ae18" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">通过钩子，可以在功能组件中使用状态(use State)和生命周期事件(useEffect)。</p><p id="e423" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">我们将把钩子的使用作为一个例子。</p><p id="b66e" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">下面的截图显示了名为<code class="fe mv mw mx lz b">Counter</code>的react应用程序的用户界面，它将</p><ul class=""><li id="47e6" class="my mz iq ky b kz mm ld mn lh na ll nb lp nc lt nd ne nf ng bi translated">点击<code class="fe mv mw mx lz b">Up</code>按钮时，计数增加1</li><li id="ba4c" class="my mz iq ky b kz nh ld ni lh nj ll nk lp nl lt nd ne nf ng bi translated">点击<code class="fe mv mw mx lz b">Down</code>按钮，计数减1。</li></ul><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8368d07aa06863e8543a8632f0c8ee6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*eQZlQpHYaiqBzYXPs1jONQ.png"/></div></figure><h1 id="3657" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">类别组件</h1><p id="8b3e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">下面是<code class="fe mv mw mx lz b">Counter</code> App的类组件代码。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/494cb241474e0bdedf6211cce3c9ec96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9pUxZFPhxdHdZV1z3AM5eA.png"/></div></div></figure><p id="8432" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">我们将count作为一个状态变量，并在单击按钮时更新状态变量。</p><h1 id="d81e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">功能成分</h1><p id="0a72" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们将看到，我们将如何实现相同的<code class="fe mv mw mx lz b">Counter</code>应用程序与使用功能组件挂钩。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/ac5662c8462b43b1be8b28fbe2a716c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uc8Gl0ZQVghG3lQNpRQPjQ.png"/></div></div></figure><h1 id="8b88" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">使用状态</h1><p id="0fcd" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">useState是一个钩子，技术上是一个JavaScript函数，可以从react库中导入。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/7f7b619a6bf4c6e26f2ec93146d5973e.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*FJe5ApMSW9gamgKSMxUzqQ.png"/></div></figure><p id="df60" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">它采用状态变量的默认值，并返回</p><ul class=""><li id="0e6b" class="my mz iq ky b kz mm ld mn lh na ll nb lp nc lt nd ne nf ng bi translated">状态变量(计数)</li><li id="f2a8" class="my mz iq ky b kz nh ld ni lh nj ll nk lp nl lt nd ne nf ng bi translated">设置状态变量(setCount)的函数引用</li></ul><p id="c8ae" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">count(state)和setCount(setState)可以引用和操纵功能组件中的状态。</p><h1 id="3114" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">使用效果</h1><p id="c536" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">useEffect是另一个可以在功能组件中实现生命周期事件的钩子。</p><p id="db3d" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">我们将采用以下两种场景</p><ul class=""><li id="e87a" class="my mz iq ky b kz mm ld mn lh na ll nb lp nc lt nd ne nf ng bi translated"><code class="fe mv mw mx lz b">Welcome message </code>应在<code class="fe mv mw mx lz b">Counter</code>应用首次打开时显示</li><li id="7651" class="my mz iq ky b kz nh ld ni lh nj ll nk lp nl lt nd ne nf ng bi translated">每当计数状态改变时，消息应该显示计数是奇数还是偶数。</li></ul><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/40099636ef638acc8817ef3b14fa9e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JncCn639KgEmydnopGIYHg.png"/></div></div></figure><p id="5193" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">当<code class="fe mv mw mx lz b">Counter</code>应用程序加载时，它会加载一条欢迎消息。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/4664096df3c88ca096484ba02a3ba1a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*VMOpQ2gR5WuQLhh9LTpPxA.png"/></div></figure><p id="afa5" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">这是因为下面有<code class="fe mv mw mx lz b">useEffect</code>挂钩。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/a79c15877c09f094e987fa1d270c2cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*tiqOlEAtoKRpLmO6__a_TA.png"/></div></figure><p id="d3d8" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">useEffect有两个参数:</p><ul class=""><li id="4681" class="my mz iq ky b kz mm ld mn lh na ll nb lp nc lt nd ne nf ng bi translated">回调函数。</li><li id="28fa" class="my mz iq ky b kz nh ld ni lh nj ll nk lp nl lt nd ne nf ng bi translated">排列</li></ul><p id="78b2" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">如果第二个参数是一个空数组，useEffect将在第一次渲染时只执行一次。</p><p id="1560" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">每当我们改变计数时，下面的钩子将显示计数是偶数还是奇数。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/54fd292780e34b39587509b2a4617a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*cUGuzd4waUZ6YXaFwFplJA.png"/></div></figure><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8b5ba16a44a2b2eac3a644335e21deaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*T-r21r_Zv4ZQOgqvEfOE3A.png"/></div></figure><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/dbe39c958508af650c8060817671008c.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*GJDEEN--70iUguei4n-EeQ.png"/></div></figure><p id="5bcc" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated">你可以注意到在<code class="fe mv mw mx lz b">useEffect</code>第二个参数中有<code class="fe mv mw mx lz b">count</code>状态变量。这是为了控制<code class="fe mv mw mx lz b">useEffect</code>仅在<code class="fe mv mw mx lz b">count</code>状态改变时执行。</p><h1 id="7c75" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="5104" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><code class="fe mv mw mx lz b">useState</code>和<code class="fe mv mw mx lz b">useEffect</code>是react中的基本钩子。这篇文章可以帮助你理解这一点。如果你有任何问题，请在评论中告诉我。感谢阅读我的文章。</p><p id="7fbd" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated"><em class="mi">更多内容请看</em><a class="ae nw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mi">plain English . io</em></strong></a><em class="mi">。</em></p><p id="2a1c" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated"><em class="mi">报名参加我们的</em> <a class="ae nw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mi">免费每周简讯</em> </strong> </a> <em class="mi">。关注我们关于</em> <a class="ae nw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mi">推特</em></strong></a><a class="ae nw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mi">LinkedIn</em></strong></a><em class="mi"/><a class="ae nw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mi">YouTube</em></strong></a><em class="mi"/><a class="ae nw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mi">不和</em> </strong> </a> <strong class="ky ir"> <em class="mi">。</em>T51】</strong></p><p id="920b" class="pw-post-body-paragraph kw kx iq ky b kz mm lb lc ld mn lf lg lh mp lj lk ll mr ln lo lp mt lr ls lt ij bi translated"><strong class="ky ir"> <em class="mi">对缩放您的软件启动感兴趣</em> </strong> <em class="mi">？检查</em> <a class="ae nw" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mi">电路</em> </strong> </a> <em class="mi">。</em></p></div></div>    
</body>
</html>
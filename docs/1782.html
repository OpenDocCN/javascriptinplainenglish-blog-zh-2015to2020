<html>
<head>
<title>Show Desktop Notifications With JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript显示桌面通知</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/show-desktop-notifications-with-javascript-d554a28f0b87?source=collection_archive---------1-----------------------#2020-04-22">https://javascript.plainenglish.io/show-desktop-notifications-with-javascript-d554a28f0b87?source=collection_archive---------1-----------------------#2020-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="615e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用JavaScript通知API获取桌面通知</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3e9326e3283ee73d64e95af1e62817c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q2KDiSEIjFiowfSN"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@glenncarstenspeters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Glenn Carstens-Peters</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a0da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通知API允许您使用浏览器中运行的纯JavaScript显示桌面风格的通知。请记住，这只适用于安全的环境。基本上，只有当你的网站支持HTTPS时，它才会起作用，但除此之外，它很容易做到，只需要几行JavaScript代码。</p><h1 id="e40e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">开始</h1><p id="b878" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面是一个示例代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/6d8064e892e3e316b7c43d999714f04e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GaZS9oOCRVt0p6tDpuz9qQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sample Code</figcaption></figure><p id="f90d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在JavaScript标记内添加以下代码。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="6ba7" class="mv lt iq mr b gy mw mx l my mz">&lt;script&gt;<br/>   console.log(Notification.permission);</span><span id="00fa" class="mv lt iq mr b gy na mx l my mz">   if (Notification.permission === "granted") {<br/>      alert("we have permission");<br/>   } else if (Notification.permission !== "denied") {<br/>      Notification.requestPermission().then(permission =&gt; {<br/>         console.log(permission);<br/>      });<br/>   }<br/>&lt;/script&gt;</span></pre><p id="cb6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一步是向用户请求许可，第二步是显示许可。</p><p id="dd69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该权限有3个可能的值。</p><ol class=""><li id="ffd4" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated"><strong class="ky ir">默认值</strong> —默认值。用户还没有说是或不是。</li><li id="8e11" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated"><strong class="ky ir">授予</strong> —允许显示通知。</li><li id="eb6b" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated"><strong class="ky ir">拒绝</strong> —拒绝显示通知。</li></ol><p id="a05a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的代码来看，如果我们选择了“是”来允许通知，我们将显示带有消息的警报。但是如果我们没有说是或否，我们将请求许可并显示许可。</p><p id="ff3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/13cd8b52c63fcc876818706a532d3fea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PFzoe_tms8u2mA3m_jGfnQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result</figcaption></figure><h1 id="0764" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">显示通知</h1><p id="ee7c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设我们已经给予了许可。现在我们实际上已经准备好显示通知了。</p><p id="d619" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个新函数来显示通知。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/2c7ab6967d5a417b007b56541c47df96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mpOGfRfZQCCUe7LYaX3S4w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">showNotification()</figcaption></figure><p id="2b01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们创建一个新的通知实例，作为第一个参数，我们把我们的标题。然后我们放一些期权。这里我们放入通知的body属性。如果许可被授予，或者在用户同意显示通知后，我们将调用该函数。</p><p id="e15a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/941df3409186106e33ede1f1fe5efb7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uYNP35TXXJvuoZcjWYZbEA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Display notification</figcaption></figure><h1 id="be62" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在通知中添加图标</h1><p id="a50a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们还可以在通知中添加图标。为此，请在通知实例中添加icon属性。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="733f" class="mv lt iq mr b gy mw mx l my mz">function showNotification() {<br/>   const notification = new Notification("New message incoming", {<br/>      body: "Hi there. How are you doing?",<br/>      icon: "yourimageurl.png"<br/>   })<br/>}</span></pre><h1 id="5498" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">点击通知</h1><p id="34af" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以做的另一件事是在我们点击通知后添加动作。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4faa" class="mv lt iq mr b gy mw mx l my mz">function showNotification() {<br/>   const notification = new Notification("New message incoming", {<br/>      body: "Hi there. How are you doing?"<br/>   })</span><span id="3dbb" class="mv lt iq mr b gy na mx l my mz">   notification.onclick = (e) =&gt; {<br/>      window.location.href = "https://google.com";<br/>   };<br/>}</span></pre><p id="8540" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们将网页重定向到google.com。它非常灵活，你可以做任何你想做的事情。</p><p id="ff87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/a4d0318d4294597cc636ca7e370991e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ROlDnoYFRPKvPMevBkE30w.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Click on notification</figcaption></figure><h2 id="7ffa" class="mv lt iq bd lu nt nu dn ly nv nw dp mc lf nx ny me lj nz oa mg ln ob oc mi od bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="6b31" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们已经推出了三种新的出版物！为我们的新出版物献上一点爱心吧，请跟随他们:<a class="ae kv" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ky ir">AI in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ky ir">UX in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ky ir">Python in Plain English</strong></a><strong class="ky ir"/>——谢谢，继续学习！</p><p id="ac6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kv" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">submissions @ plain English . io</strong></a><strong class="ky ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
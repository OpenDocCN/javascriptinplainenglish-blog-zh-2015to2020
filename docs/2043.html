<html>
<head>
<title>Is Deno the natural replacement for Node.JS?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno是Node的自然替代品吗？JS？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/is-deno-the-natural-replacement-of-nodejs-ed5a08399035?source=collection_archive---------2-----------------------#2020-05-15">https://javascript.plainenglish.io/is-deno-the-natural-replacement-of-nodejs-ed5a08399035?source=collection_archive---------2-----------------------#2020-05-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="26d5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript和TypeScript的安全运行时</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3365011db510fbbaf44d13e5728a38ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c9qLloy5Ts-lzAVkd3vgeA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image designed by Kevin Qian based on Ryan Dahl’s sketch.</figcaption></figure><h2 id="57a3" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">一、Deno是什么？</h2><p id="4e7f" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno是一个简单的现代安全的JavaScript和TypeScript运行时，它使用V8并内置于Rust中</p><p id="26b2" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">Deno由Ryan Dahl在2018年创建(他是NodeJs在2009年的创建者)，最近发布了1.0版本，作为NodeJs的演进。Deno是用<a class="ae mq" href="https://v8.dev/" rel="noopener ugc nofollow" target="_blank"> V8 </a>、<a class="ae mq" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> Rust </a>和<a class="ae mq" href="https://docs.rs/tokio/0.2.21/tokio/" rel="noopener ugc nofollow" target="_blank"> Tokio </a>打造的，侧重于安全性或易用性等方面。</p><h2 id="e846" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">它是NodeJS的好替代品吗？</h2><p id="bd35" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">简而言之，虽然Deno是JavaScript的一个很好的运行时环境，但是NodeJs是一个很大的、成熟的技术，将会存在几十年。尽管如此，Deno很快会成为NodeJs主要问题的一个很好的替代方案:</p><ul class=""><li id="35f2" class="mr ms iq lt b lu ml lx mm le mt li mu lm mv mj mw mx my mz bi translated">必须支持大量遗留API。</li><li id="8f13" class="mr ms iq lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">缺乏安全感。默认情况下，在NodeJs中，您可以访问文件系统或环境。</li><li id="63a2" class="mr ms iq lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">一个设计很差的模块系统，有集中的注册表。</li></ul><h2 id="f464" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Deno的顶级特性</h2><h2 id="4f73" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">安全性</h2><p id="97c6" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno默认情况下在沙箱中执行代码，因此在运行时默认情况下没有对文件系统或环境的访问权限，除非您显式启用它。</p><p id="763e" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">相反，您可以使用命令行参数或以编程方式启用或禁用不同的安全功能。</p><p id="1a3f" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">例如，如果您要求脚本从/assets文件夹中读取，您可以执行以下命令:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="bed0" class="kv kw iq ng b gy nk nl l nm nn">//--allow-read<br/>deno --allow-read=/assets yourScript.js</span></pre><p id="df54" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">这将允许您的代码读取文件夹。</p><p id="5d76" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">现在，如果您的脚本需要使用网络，例如，在8090端口发出获取请求，您可以使用以下标志:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="01b7" class="kv kw iq ng b gy nk nl l nm nn">//--allow-net</span><span id="98e8" class="kv kw iq ng b gy no nl l nm nn">deno yourScript.js --allow-net=:8090</span></pre><p id="a191" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">可用的标志有:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="bf57" class="kv kw iq ng b gy nk nl l nm nn">--allow-all (similar behavior to nodeJS)</span><span id="19cf" class="kv kw iq ng b gy no nl l nm nn">--allow-hrtime<br/>--allow-read=&lt;whitelist&gt;<br/>--allow-write=&lt;whitelist&gt;<br/>--allow-plugin<br/>--allow-env<br/>--allow-net=&lt;whitelist&gt;<br/>--allow-run</span></pre><h2 id="7c9f" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">支持现成的类型脚本</h2><p id="6211" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno是用TypeScript编写的，你可以在你的代码中直接使用TypeScript，而不需要任何transpiling步骤。另一方面，如果您愿意，也可以选择用普通javascript编写。</p><h2 id="e729" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">ES模块</h2><p id="771b" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno支持使用本地或远程URL的ES模块，使得依赖关系管理非常简单。Deno中的包分发不需要像NPM那样的集中注册中心。</p><p id="fa5e" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">如果需要，Npm仍然可以用作简单的本地文件URL。</p><p id="53a7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">NodeJs的其他差异包括:</p><ul class=""><li id="5439" class="mr ms iq lt b lu ml lx mm le mt li mu lm mv mj mw mx my mz bi translated">不支持require()。相反，它使用es模块标准语法(import from …)。</li><li id="39ab" class="mr ms iq lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">Deno下载所有的模块并缓存它们。一旦它们被缓存，Deno将不会再次下载它们，直到您用reload标志明确请求它们。</li><li id="79dc" class="mr ms iq lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">Deno认为远程代码是不可变的。如果你想修改它，你必须使用<reload flag="">。</reload></li><li id="f541" class="mr ms iq lt b lu na lx nb le nc li nd lm ne mj mw mx my mz bi translated">没有node_module文件夹。</li></ul><h2 id="aa5c" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">浏览器兼容性</h2><p id="7e47" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">由于Deno对ES模块的本地支持，您不必使用其他构建工具，如<a class="ae mq" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> WebPack </a>或<a class="ae mq" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank"> Parcel </a>来使我们的应用程序准备好在浏览器中使用。</p><h2 id="311a" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">标准模块</h2><p id="42d5" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno提供了一个没有外部依赖的模块列表，Deno核心团队审查这些模块。这些模块托管在deno.land/std<a class="ae mq" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank">的</a>，并像所有其他es模块一样分发。</p><h2 id="70b9" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">其他人</h2><p id="ffbb" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Deno在其API和库Node.js中使用最新的ECMAScript特性，相反，它使用一个旧的基于回调的库，并且不打算更新它。</p><p id="8e01" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">如果您想尝试Deno，安装过程很简单:</p><p id="6491" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">使用Shell (Linux):</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="0d1c" class="kv kw iq ng b gy nk nl l nm nn">$curl -fsSL <a class="ae mq" href="https://deno.land/x/install/install.sh" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/install/install.sh</a> | sh</span></pre><p id="e626" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">使用PowerShell(Windows):</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="836f" class="kv kw iq ng b gy nk nl l nm nn">iwr <a class="ae mq" href="https://deno.land/x/install/install.ps1" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/install/install.ps1</a> -useb -outf install.ps1; .\install.ps1 v0.38.0</span></pre><p id="7c48" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">使用包管理器</p><p id="b0a9" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">带巧克力的(Windows):</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="4c35" class="kv kw iq ng b gy nk nl l nm nn">choco install deno</span></pre><p id="7da7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">检查其安装是否正确:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="4be3" class="kv kw iq ng b gy nk nl l nm nn">//In ubuntu 20.04:</span><span id="d071" class="kv kw iq ng b gy no nl l nm nn">/home/xxx/.deno/bin/deno --help</span><span id="b62c" class="kv kw iq ng b gy no nl l nm nn">//In Windows 10:</span><span id="de1c" class="kv kw iq ng b gy no nl l nm nn">deno --help</span></pre><p id="6253" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">使用Deno运行脚本:</p><p id="08be" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">创建hello.js文件(如果是TypeScript，则创建hello.ts文件):</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="9020" class="kv kw iq ng b gy nk nl l nm nn">console.log("Hello world!");</span></pre><p id="e3b1" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">运行脚本:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3469" class="kv kw iq ng b gy nk nl l nm nn">//In ubuntu 20.04:<br/>/home/xxx/.deno/bin/deno run hello.js<br/>//Hello world!</span><span id="8b57" class="kv kw iq ng b gy no nl l nm nn">//In Windows 10:<br/>deno run hello.js<br/>//Hello world!</span></pre><p id="d8b8" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">Deno提供了一个安装选项来快速安装和共享可执行代码。此命令生成一个可执行的shell脚本，该脚本使用指定的CLI标志和主模块调用deno。它位于安装根目录的bin目录中:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="6da1" class="kv kw iq ng b gy nk nl l nm nn">deno install hello.js</span></pre><p id="4e63" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">✅ <em class="mk">成功安装你好</em></p><p id="1020" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated"><em class="mk"> /home/xxx/。deno/bin/hello </em></p><p id="210f" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">进入deno执行环境(类似nodeJs):</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3f5e" class="kv kw iq ng b gy nk nl l nm nn">./deno<br/>&gt;console.log("Hello world!");<br/>Hello world!</span></pre><h2 id="285b" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论</h2><p id="7449" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">学习像Deno这样的新技术需要很大的努力。我的建议是，如果您现在从服务器端JS开始，并且您还不知道Node，并且从未使用TypeScript编写过，请从Node开始。</p><p id="c367" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">尽管Deno对于我们的程序来说是一个优秀的运行时环境，但它仍处于早期阶段。Node.js仍然是一个巨大的、得到很好支持的、成熟的网站，但是在未来，Deno可能是一个很好的选择。</p><p id="6b96" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">非常感谢你阅读这篇文章！希望你觉得有用。</p><h2 id="c665" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">参考资料:</h2><p id="0f71" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae mq" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank">https://deno.land/</a></p><p id="3af7" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">下面是Deno演示的视频:</p><p id="a1e3" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated"><a class="ae mq" href="https://youtu.be/M3BM9TB-8yA" rel="noopener ugc nofollow" target="_blank">https://youtu.be/M3BM9TB-8yA</a></p><h2 id="bb92" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="2f3f" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae mq" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="lt ir">JavaScript in Plain English</strong></a><a class="ae mq" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="lt ir">AI in Plain English</strong></a><a class="ae mq" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="lt ir">UX in Plain English</strong></a><a class="ae mq" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="lt ir">Python in Plain English</strong></a><strong class="lt ir"/>—谢谢，继续学习！</p><p id="6501" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">我们还推出了一个YouTube，希望你能通过<a class="ae mq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lt ir">订阅我们的简明英语频道</strong> </a>来支持我们</p><p id="bfa1" class="pw-post-body-paragraph lr ls iq lt b lu ml jr lw lx mm ju lz le mn mb mc li mo me mf lm mp mh mi mj ij bi translated">一如既往,“简明英语”希望帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae mq" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="lt ir">submissions @ plain English . io</strong></a><strong class="lt ir"/>，并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Replace all occurrences of a string in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">替换JavaScript中出现的所有字符串</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/replace-all-occurrences-of-a-string-in-javascript-1bda30fb87?source=collection_archive---------6-----------------------#2020-01-07">https://javascript.plainenglish.io/replace-all-occurrences-of-a-string-in-javascript-1bda30fb87?source=collection_archive---------6-----------------------#2020-01-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bbbab6fc99628470add15052bb51d73c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-25KB7EbSHjv70HXrdl6w.png"/></div></div></figure><p id="8958" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在JavaScript中处理字符串时，我们可能会遇到用另一个字符串替换所有出现的字符串的任务。</p><p id="8ed4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个非常简单的测试用例来说明这个问题。首先，让我们定义一个<code class="fe kx ky kz la b">testString</code>，我们的目标是用<code class="fe kx ky kz la b">bar</code>替换<em class="kw">所有的</em> <code class="fe kx ky kz la b">foo</code>字符串:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="8eea" class="lj lk iq la b gy ll lm l ln lo">const testString = 'abc foo def foo xyz foo';</span></pre><p id="7d35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">简单而天真的方法是尝试类似于<code class="fe kx ky kz la b">replace()</code>函数的东西:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="3b42" class="lj lk iq la b gy ll lm l ln lo">const result = testString.replace('foo', 'bar')</span></pre><p id="c783" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我们运行它，我们只替换第一次出现的内容，结果将是:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="a97d" class="lj lk iq la b gy ll lm l ln lo">abc bar def foo xyz foo</span></pre><p id="e0e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">绝对不是我们想要的！</p><p id="facd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你有Java(而不是JavaScript！)体验你可以快速尝试类似于:<code class="fe kx ky kz la b">replaceAll()</code>的东西。不幸的是，JavaScript中没有这样的字符串函数。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="ce8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，有两种简单的方法来替换JS中出现的所有字符串。让我们使用<code class="fe kx ky kz la b">split()</code>和<code class="fe kx ky kz la b">join()</code>功能尝试第一种解决方案:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="aba2" class="lj lk iq la b gy ll lm l ln lo">const result = testString.split('foo').join('bar'); </span></pre><p id="8c80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">瞧。它确实起作用了，结果正如我们所料:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="f7a2" class="lj lk iq la b gy ll lm l ln lo">abc bar def bar xyz bar</span></pre><p id="1b53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们所做的是，首先通过使用<code class="fe kx ky kz la b">foo</code>作为分隔符将原始的<code class="fe kx ky kz la b">testString</code>转换成字符串的<em class="kw">数组</em>，然后我们用<code class="fe kx ky kz la b">bar</code>字符串将它连接在一起。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="dc3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二种解决方案是基于… <code class="fe kx ky kz la b">replace()</code>函数。这一次，我们将使用正则表达式，而不是搜索模式。这就像添加两个斜线<code class="fe kx ky kz la b">/</code>一样简单，重要的是，<code class="fe kx ky kz la b">g</code>修饰符(其中<code class="fe kx ky kz la b">g</code>代表<code class="fe kx ky kz la b">global</code>匹配，即替换将从给定字符串的开始到结束，而不是匹配第一个出现的字符串):</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="49d6" class="lj lk iq la b gy ll lm l ln lo">const result = testString.replace(/foo/g, 'bar');</span></pre><p id="a3c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答对了。这也很有效。</p><p id="821b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">事实上，<a class="ae lw" href="https://jsperf.com/replace-all-vs-split-join" rel="noopener ugc nofollow" target="_blank"> replace实际上比split-join方法更快</a>。因此，只需使用它，或者如果您在代码的其他地方看到拆分-连接方法，请用更快的代码替换它。</p></div></div>    
</body>
</html>
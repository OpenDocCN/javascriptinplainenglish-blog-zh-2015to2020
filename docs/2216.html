<html>
<head>
<title>Understanding JavaScript Callback Functions for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者理解JavaScript回调函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-javascript-callback-functions-for-beginners-9c1ab3352103?source=collection_archive---------7-----------------------#2020-05-31">https://javascript.plainenglish.io/understanding-javascript-callback-functions-for-beginners-9c1ab3352103?source=collection_archive---------7-----------------------#2020-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/72c4e153c5622157adf3cf3d77df152d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kh8hDiB8L5oYz5gkmRNL9A.png"/></div></div></figure><h1 id="6a59" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是回调函数？</h1><p id="0314" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果你从未听说过回调函数，我会用我能想到的最简单的方式告诉你它是什么…</p><blockquote class="lu lv lw"><p id="f488" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated"><em class="iq">它是作为另一个函数的参数传递的函数，稍后或立即执行。</em></p></blockquote><h1 id="fbc1" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">简单的例子</h1><p id="7d26" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">例如，看看这些函数:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="f1f3" class="mp jz iq ml b gy mq mr l ms mt">//Defining functions<br/>function prepare(ingredients, callback) {<br/>       console.log("Preparing " + ingredients);<br/>       callback();<br/>}<br/><br/>//callback function<br/>function chop(){<br/>       console.log("Chopping");<br/>}<br/><br/>//Calling the function<br/>prepare("onions and garlic", chop);</span></pre><p id="beb0" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">在你的日常生活中，你可能会注意到厨师会先准备食材，然后开始切。上面的函数说明了这一点。</p><p id="e81a" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated"><code class="fe mu mv mw ml b">prepare()</code>函数将“配料”作为第一个参数，将一个名为<code class="fe mu mv mw ml b">chop()</code>的回调函数作为第二个参数，这个回调函数稍后将在<code class="fe mu mv mw ml b">prepare()</code>函数中执行。因此控制台将打印:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="cb9a" class="mp jz iq ml b gy mq mr l ms mt">Preparing onions and garlic<br/>Chopping</span></pre><p id="f8a5" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">大多数时候，你不会看到像例子那样写的回调函数。开发人员喜欢保持代码简洁，所以我们可以直接将<code class="fe mu mv mw ml b">chop()</code>插入<code class="fe mu mv mw ml b">prepare()</code>，就像:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="3312" class="mp jz iq ml b gy mq mr l ms mt">//Defining function<br/>function prepare(ingredients, callback) {<br/>       console.log("Preparing " + ingredients);<br/>       callback();<br/>}<br/><br/>//Calling the function<br/>prepare("onions and garlic", function chop() {<br/>       console.log("Chopping" );<br/>});</span></pre><p id="6034" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">看到了吗？现在代码看起来更简洁了！如果你想更进一步，JavaScript有<strong class="ky ir">匿名函数</strong>，让你不用命名就可以声明和执行函数。回调函数可以是匿名函数，如下所示:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="702c" class="mp jz iq ml b gy mq mr l ms mt">//Defining function<br/>function prepare(ingredients, callback) {<br/>       console.log("Preparing " + ingredients); <br/>       callback();  <br/>}<br/><br/>//Calling the function<br/>prepare("onions and garlic", () =&gt; {<br/>       console.log("Chopping");<br/>});</span></pre><p id="4142" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">如上所示，现在回调函数不叫‘chop’。它是无名的，因此是匿名的。我希望这能帮助你更好地理解回调函数。</p><blockquote class="lu lv lw"><p id="54fb" class="kw kx lx ky b kz ly lb lc ld lz lf lg ma mb lj lk mc md ln lo me mf lr ls lt ij bi translated"><strong class="ky ir"> <em class="iq">关键提示:</em> </strong> <em class="iq">回调函数是作为另一个函数的参数传递的函数，最终会被执行。回调函数在主函数内部执行，由主函数决定何时执行。</em></p></blockquote><h1 id="22b0" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">一个有争议的例子</h1><p id="467e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在你知道了执行回调的主函数有权决定何时执行。在前面的例子中，它在main函数执行后立即执行。</p><p id="3a40" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">但是对于回调，main函数还决定了更多。它也可以将参数传递给回调函数。让我们看一个带有参数的回调函数的例子。</p><p id="725f" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">看看这段代码:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="b1f7" class="mp jz iq ml b gy mq mr l ms mt">//Defining function<br/>function prepare(ingredients, callback) {<br/>       console.log("Preparing " + ingredients);<br/>       callback(ingredients); //this time, ingredients is added as an argument for the callback<br/>}<br/><br/>//Calling the function<br/>prepare("onions and garlic", function chop(arg) { //chop() now takes in arg as an argument<br/>       console.log("Chopping " + arg);<br/>});</span></pre><p id="bf93" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">这一次，我们不只是调用回调函数<code class="fe mu mv mw ml b">chop()</code>，而是传入<code class="fe mu mv mw ml b">ingredients</code>作为参数，并告诉它在执行时打印“Chopping”及其参数。您应该看到控制台现在正在打印:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="cd5d" class="mp jz iq ml b gy mq mr l ms mt">Preparing onions and garlic <br/>Chopping onions and garlic</span></pre><h1 id="4353" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">回调函数的更多用途</h1><p id="8b93" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果所有的回调函数都只能像我给你展示的例子一样，那就显得很蹩脚了。但是回调函数也是函数！这意味着它也能做函数能做的任何事情！所以不要小看它！</p><p id="3782" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">我们再举一个例子。假设您希望控制台打印:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="752a" class="mp jz iq ml b gy mq mr l ms mt">Preparing onions and garlic <br/>Chopping onions</span></pre><p id="5602" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">这意味着回调函数必须接受<code class="fe mu mv mw ml b">ingredients</code>并过滤掉不是<code class="fe mu mv mw ml b">onions</code>的单词，这样它将只打印“切洋葱”而不是“切洋葱和大蒜”。让我们为此编写函数:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2818" class="mp jz iq ml b gy mq mr l ms mt">function chop(ingredients){<br/>  var value = ingredients.match(/\bonions\b/g);<br/>  // Chop onions if one of the ingredients are onions<br/>  if (value) { <br/>     console.log("Chopping " + value); <br/>  } <br/>  //if no onions are found, no need to chop<br/>  else { <br/>     console.log("Not chopping"); <br/>  }  <br/>}</span></pre><p id="4d9a" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">在这个回调函数中，我们要求它查找单词“onions”是否在ingredients参数中。如果是，它会打印“切洋葱”。如果没有，会打印“不劈”。让我们像往常一样运行这个回调函数。</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="323c" class="mp jz iq ml b gy mq mr l ms mt">function prepare(ingredients, callback) {<br/>       console.log("Preparing " + ingredients);<br/>       callback(ingredients); <br/>}<br/><br/>function chop(ingredients){<br/>  var value = ingredients.match(/\bonions\b/g);<br/>  // Chop onions if one of the ingredients are onions<br/>  if (value) { console.log("Chopping " + value); } <br/>  //if no onions are found, no need to chop<br/>  else { console.log("Not chopping"); }  <br/>}</span><span id="7106" class="mp jz iq ml b gy mx mr l ms mt">prepare("onions and garlic", chop);</span></pre><p id="ae05" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">我们的控制台应该显示:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="22f3" class="mp jz iq ml b gy mq mr l ms mt">Preparing onions and garlic <br/>Chopping onions</span></pre><p id="acbb" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">耶！这正是我们想要的！</p><h1 id="b300" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="6c8f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">希望这篇教程能帮助你理解什么是回调函数，如何带/不带参数使用它们，以及如何让它们像函数一样有用！关于回调函数还有很多东西需要学习，所以我鼓励你通过构建更多的项目来不断练习和学习。您很快就会看到回调函数的美丽和不可思议之处。</p><p id="50ba" class="pw-post-body-paragraph kw kx iq ky b kz ly lb lc ld lz lf lg lh mb lj lk ll md ln lo lp mf lr ls lt ij bi translated">如果您有任何问题，请记住我们都是来帮助您的，所以请随时留下您的评论！感谢阅读，祝学习愉快！干杯！</p><h2 id="b1ee" class="mp jz iq bd ka my mz dn ke na nb dp ki lh nc nd km ll ne nf kq lp ng nh ku ni bi translated"><strong class="ak">一张用浅白英语写的便条</strong></h2><p id="7247" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae nj" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> plainenglish.io </strong> </a>上找到所有这些——关注我们的出版物并<a class="ae nj" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a> <strong class="ky ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
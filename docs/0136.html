<html>
<head>
<title>React’s Higher-Order Components (HOCs)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React的高阶组件(hoc)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-reacts-higher-order-components-hocs-c42182fb634?source=collection_archive---------1-----------------------#2019-04-30">https://javascript.plainenglish.io/introduction-to-reacts-higher-order-components-hocs-c42182fb634?source=collection_archive---------1-----------------------#2019-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e03f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">借助用例理解React HOCs</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/66407055678dbe9e7a2ecbb45d18bd08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StfsbhAuFNwdx8ZCbb19NA.jpeg"/></div></div></figure><p id="8286" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.youtube.com/channel/UCo-h1M-5M6Y5D4Lgut8ge4w" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">techno漏斗</strong> </a> <strong class="kt ir"> </strong>带来另一篇关于<strong class="kt ir">React</strong>中高阶元件的文章。高阶函数<strong class="kt ir"> </strong>是一个<strong class="kt ir"> </strong>以一个函数作为输入参数或者返回一个新函数作为输出。在React的上下文中，<a class="ae ln" href="https://reactjs.org/docs/higher-order-components.html" rel="noopener ugc nofollow" target="_blank">高阶组件(hoc)</a>是将一个组件作为输入并返回另一个组件作为输出的组件。</p><p id="101d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React 16.8引入了高阶分量的概念。HOC是一种重用组件逻辑的高级技术。hoc不是某些React APIs的一部分，但是这个概念来自React的组合特性。组合是指将一种成分包含在另一种成分中。</p><p id="22a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有关高阶分量的视频教程，请参考以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="39c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React的复合特性允许我们创建包含更多子组件的组件。简单的组合示例是一个简单的web页面，包含多个组件，如<code class="fe lq lr ls lt b">&lt;HeaderComponent /&gt;</code>、<code class="fe lq lr ls lt b">&lt;FooterComponent /&gt;</code>、<code class="fe lq lr ls lt b">&lt;NavigationComponent /&gt;</code>和<code class="fe lq lr ls lt b">&lt;ContentContainer /&gt;</code>。所有这些组件组合在一起形成一个单一的网页。</p><p id="7a89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React进一步扩展了功能，使组件可以将一个组件作为输入，或者将一些组件作为输出返回。</p><p id="3b80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于组合的细节可以在React文章“<a class="ae ln" href="https://reactjs.org/docs/composition-vs-inheritance.html" rel="noopener ugc nofollow" target="_blank">组合与继承</a>”中找到</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="1d8d" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">向现有组件添加功能</h1><p id="b640" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">高阶组件<strong class="kt ir"> </strong>专注于扩展现有组件的功能。它将一个组件作为输入，并返回一个新组件，该组件包装了作为参数传递的输入组件。包装器可以向作为输入的原始组件提供一些附加数据或功能。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="a42e" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">确保代码的可重用性</h1><p id="ee0e" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">当我们在应用程序中使用多个组件时，可能会出现组件的某些部分可重用的情况(例如，进行异步数据调用)。高阶组件旨在提取代码的公共部分作为包装组件的一部分，包装组件可以被其他组件重用。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="163c" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">使用示例代码</h1><h2 id="25c5" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">用例场景</h2><p id="f80a" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">让我尝试借助一个简单的场景来解释这个用例:</p><p id="378c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的员工管理应用程序有两个组件。每个组件都需要呈现一些雇员数据。两个组件所需的数据可从同一逻辑/功能获得。这两个组件都需要调用数据的公共函数。</p><p id="17fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在记住上面的场景，让我们看看如何解决所需的使用场景，确保我们可以共享公共逻辑。</p><h2 id="369f" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">员工基本详细信息组件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk lp l"/></div></figure><p id="e025" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是应用程序所需的第一个组件。它显示员工的基本信息。上面给出的代码创建了一个简单的功能组件，它将雇员的详细信息作为输入参数<code class="fe lq lr ls lt b">props</code>，并显示雇员的基本详细信息(<code class="fe lq lr ls lt b">name</code>、<code class="fe lq lr ls lt b">age</code>、<code class="fe lq lr ls lt b">designation</code>)。所以输入的<code class="fe lq lr ls lt b">props</code>应该有指定的道具属性。</p><h2 id="e89e" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">员工薪金详细信息组件</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk lp l"/></div></figure><p id="b0ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们正在创建另一个组件(如上所述),向用户显示与工资相关的雇员信息。该功能组件将一个<code class="fe lq lr ls lt b">props</code>参数作为输入，并向用户显示与工资相关的信息(<code class="fe lq lr ls lt b">salary</code>和<code class="fe lq lr ls lt b">bonus</code>)。</p><h2 id="c004" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">员工详细信息的通用逻辑/功能</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk lp l"/></div></figure><p id="a332" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这两个组件都需要包含必需字段的对象文字。<code class="fe lq lr ls lt b">&lt;ShowEmployeeBasicDetails /&gt;</code>组件期望在<code class="fe lq lr ls lt b">props</code>对象中提供姓名、年龄和称谓属性。而<code class="fe lq lr ls lt b">&lt;ShowEmployeeSalaryDetails /&gt;</code>组件期望薪水和奖金属性作为<code class="fe lq lr ls lt b">props</code>对象的一部分。</p><p id="c9d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面给出的是一个获取两个组件所需细节的函数。它包含所有必需的字段。</p><h2 id="bd2e" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">解决HOCs的问题</h2><p id="7e57" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">因为两个组件所需的数据都可以从一个函数调用中获得，所以我们可以重用代码来获取两个组件的数据。可重用的代码可以作为一个单独的包装组件被分离出来，我们的主要组件可以作为一个参数传递给它。这个包装器组件提供了额外的功能来获取数据，并将这些数据提供给作为参数传递的任何组件。(<code class="fe lq lr ls lt b">ShowEmployeeBasicDetails</code>和<code class="fe lq lr ls lt b">ShowEmployeeSalaryDetails</code>)。包装函数被称为高阶组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk lp l"/></div><figcaption class="nl nm gj gh gi nn no bd b be z dk"><a class="ae ln" href="https://gist.github.com/Mayankgupta688/ff74c2afd77b216158a7de72d2098e4c" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Mayankgupta688/ff74c2afd77b216158a7de72d2098e4c</a></figcaption></figure><p id="ab35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码中，我们创建了一个函数<code class="fe lq lr ls lt b">higherOrderComponent</code>，它将一个组件作为输入并返回另一个组件。当呈现返回的组件时，构造函数执行获取组件的公共数据的公共任务。数据作为<code class="fe lq lr ls lt b">props</code>提供给包装的组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk lp l"/></div><figcaption class="nl nm gj gh gi nn no bd b be z dk"><a class="ae ln" href="https://gist.github.com/Mayankgupta688/f82d3dd53f56f64a626af245cb4c18dc" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Mayankgupta688/f82d3dd53f56f64a626af245cb4c18dc</a></figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="2cc1" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">总结和结论</h1><p id="04c3" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我再解释一下。<code class="fe lq lr ls lt b">ShowEmployeeBasicDetails</code>和<code class="fe lq lr ls lt b">ShowEmployeeSalaryDetails</code>组件作为输入传递给包装器组件。这些包装的组件需要<code class="fe lq lr ls lt b">props</code>数据。包装函数中指定的构造函数调用函数来获取数据，并将数据保存到状态变量中，这些数据可供组件使用。因此，我们减少了代码，因为两个组件都不需要在每个组件中有单独的数据获取代码。</p><p id="74ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">高阶组件提供了一种很好的方式，将常见的功能包装在一个包装器组件中，并使它们对包装的组件(作为参数传递的组件)可用。</p><p id="6c00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望这篇文章能够阐明高阶元件的基础知识。谢谢！</p><p id="f6d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是<a class="ae ln" href="https://jsfiddle.net/Mayankgupta688/4wcjgLqf/18/" rel="noopener ugc nofollow" target="_blank">提琴手</a>的工作代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np lp l"/></div><figcaption class="nl nm gj gh gi nn no bd b be z dk"><a class="ae ln" href="https://jsfiddle.net/Mayankgupta688/4wcjgLqf/18/" rel="noopener ugc nofollow" target="_blank">https://jsfiddle.net/Mayankgupta688/4wcjgLqf/18/</a></figcaption></figure><h2 id="ae80" class="my mc iq bd md mz na dn mh nb nc dp ml la nd ne mn le nf ng mp li nh ni mr nj bi translated">进一步阅读</h2><div class="nq nr gp gr ns nt"><a href="https://bit.cloud/blog/introducing-component-compare-easily-review-component-changes-l4qyxtoo" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">比特博客</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">组件驱动软件的官方博客。围绕现代组件驱动的web开发的文章…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">比特云</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><p id="7f7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="oi">更多内容请看</em><a class="ae ln" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oi">plain English . io</em></strong></a><em class="oi">。报名参加我们的</em> <a class="ae ln" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oi">免费周报</em> </strong> </a> <em class="oi">。关注我们关于</em><a class="ae ln" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oi">Twitter</em></strong></a><a class="ae ln" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oi">LinkedIn</em></strong></a><strong class="kt ir"><em class="oi"/></strong><a class="ae ln" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oi">YouTube</em></strong></a><strong class="kt ir"><em class="oi">，以及</em></strong><em class="oi"/><a class="ae ln" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="oi">不和</em> </strong> </a>  <em class="oi">对成长黑客感兴趣？检查</em> <a class="ae ln" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="oi">电路</em> </strong> </a> <strong class="kt ir"> <em class="oi">。</em> </strong></p></div></div>    
</body>
</html>
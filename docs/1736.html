<html>
<head>
<title>Introduction to Angular Template-Driven Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度模板驱动的表单简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-angular-template-driven-forms-4b6a44427665?source=collection_archive---------15-----------------------#2020-04-17">https://javascript.plainenglish.io/introduction-to-angular-template-driven-forms-4b6a44427665?source=collection_archive---------15-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a0d27f41bdd57edeb18b156bb6783fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vbBWhMvBwQjQH5DX"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@andyc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andy Chilton</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1394" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="5948" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何构建基本的角度模板驱动的表单。</p><h1 id="2246" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板驱动的表单</h1><p id="38a3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有了模板驱动的表单，我们可以用模板语法构建表单，而不是使用组件中的方法。</p><p id="bb8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它归结为使用<code class="fe me mf mg mh b">ngModel</code>创建一个双向绑定来读写表单控件的值，并验证模板而不是组件中的输入。</p><p id="6665" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">错误显示在模板中。</p><p id="11ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以创建一个简单的模板驱动表单，如下所示:</p><p id="8290" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="125a" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule } from "@angular/core";<br/>import { FormsModule } from "@angular/forms";<br/>import { AppComponent } from "./app.component";</span><span id="ac70" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [AppComponent],<br/>  imports: [BrowserModule, FormsModule],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule {}</span></pre><p id="16ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="98bf" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="1fc8" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  name: string;<br/>}</span></pre><p id="66e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="dc6a" class="mq lc iq mh b gy mr ms l mt mu">&lt;input type="text" [(ngModel)]="name" /&gt;<br/>&lt;p&gt;{{name}}&lt;/p&gt;</span></pre><p id="0f2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe me mf mg mh b">app.module.ts</code>中导入了<code class="fe me mf mg mh b">FormsModule</code>。</p><p id="5dd4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe me mf mg mh b">AppComponent</code>中创建<code class="fe me mf mg mh b">name</code>字段，这是我们绑定到双向绑定的模型。当我们在输入中输入一些东西时，它会被自动设置为<code class="fe me mf mg mh b">name</code>的值。</p><p id="bcbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们以编程方式更改<code class="fe me mf mg mh b">name</code>的值时，它也会反映在输入中。</p><p id="29c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在<code class="fe me mf mg mh b">app.component.html</code>中，我们有了带有<code class="fe me mf mg mh b">ngModel</code>指令的输入框。</p><p id="9883" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方括号和圆括号的组合表示双向绑定。</p><p id="20b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有一个带有<code class="fe me mf mg mh b">name</code>字段的p元素，用于显示我们在输入框中输入的值。</p><p id="3e32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们键入名称时，我们会看到它显示在p元素中。</p><h1 id="2990" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对ngModel使用*ngFor</h1><p id="24ec" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">ngFor</code>和<code class="fe me mf mg mh b">ngModel</code>一起添加多个动态输入。</p><p id="cd44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以一起创建一个带有动态选项的选择元素。</p><p id="8d5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以编写以下代码来制作一个:</p><p id="df93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ce8d" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="b4bb" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  names: string[] = ["Mary", "Jane", "Joe"];<br/>  name: string;<br/>}</span></pre><p id="e4c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="599b" class="mq lc iq mh b gy mr ms l mt mu">&lt;select required [(ngModel)]="name"&gt;<br/>  &lt;option *ngFor="let name of names" [value]="name"&gt;{{name}}&lt;/option&gt;<br/>&lt;/select&gt;<br/>&lt;p&gt;{{name}}&lt;/p&gt;</span></pre><p id="7020" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe me mf mg mh b">AppComponent</code>中有一个<code class="fe me mf mg mh b">names</code>数组，它是我们想要显示的项目。</p><p id="29a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在模板中，我们有了由<code class="fe me mf mg mh b">ngFor</code>生成的带有选项的select元素。</p><p id="f0fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有了<code class="fe me mf mg mh b">[value]</code>，这样我们就可以将<code class="fe me mf mg mh b">name</code>作为<code class="fe me mf mg mh b">value</code>属性的值传递给它。我们也有<code class="fe me mf mg mh b">{{name}}</code>来显示给用户选择。</p><p id="c54c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">p元素保持不变，将显示我们从下拉列表中选择的选项。</p><p id="4d20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在select上也有<code class="fe me mf mg mh b">required</code>，这样我们可以在提交之前检查它是否被选中。</p><p id="a742" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们有一个下拉列表，其中包含姓名条目作为选项。</p><h1 id="df62" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">NgForm指令</h1><p id="bfcb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">ngForm</code>指令为表单定义一个模板变量。有了它，我们可以检查模板中的表单状态，还可以将它传递给组件来检查那里的状态。</p><p id="4b36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以在我们的组件中添加一个具有各种字段的模型，然后添加一个找到这些字段并使它们成为必需字段的表单，如下所示:</p><p id="10c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f83f" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="1745" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  model = {<br/>    name: '',<br/>    address: '',<br/>  }<br/>}</span></pre><p id="6753" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4eba" class="mq lc iq mh b gy mr ms l mt mu">&lt;form #personForm="ngForm"&gt;<br/>  &lt;input<br/>    name="name"<br/>    placeholder="Name"<br/>    type="text"<br/>    [(ngModel)]="model.name"<br/>    required<br/>  /&gt;<br/>  &lt;br /&gt;<br/>  &lt;input<br/>    name="address"<br/>    placeholder="Address"<br/>    type="text"<br/>    [(ngModel)]="model.address"<br/>    required<br/>  /&gt;<br/>&lt;/form&gt;<br/>&lt;p&gt;{{model | json}}&lt;/p&gt;<br/>&lt;p&gt;{{personForm.valid}}&lt;/p&gt;</span></pre><p id="92f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将<code class="fe me mf mg mh b">AppComponent</code>中的<code class="fe me mf mg mh b">model</code>与<code class="fe me mf mg mh b">name</code>和<code class="fe me mf mg mh b">address</code>字段放在一起。</p><p id="3fe7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的模板中，我们有了用<code class="fe me mf mg mh b">ngForm</code>指令定义的<code class="fe me mf mg mh b">personForm</code>变量。</p><p id="cc68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们有2个输入分别用于<code class="fe me mf mg mh b">name</code>和<code class="fe me mf mg mh b">address</code>。它们都是必需的，因为我们有<code class="fe me mf mg mh b">required</code>属性。注意，我们有<code class="fe me mf mg mh b">name</code>属性。如果我们想让表单验证工作，这是必需的。</p><p id="5cae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个p标签显示<code class="fe me mf mg mh b">model</code>的值，最下面一个显示<code class="fe me mf mg mh b">personForm</code>的验证状态。</p><p id="cdaf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们留下任何输入空白时，我们将在底部的p标签中得到<code class="fe me mf mg mh b">false</code>,如果我们填写了所有内容，将得到<code class="fe me mf mg mh b">true</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/36fb8b61ba55e81faae4e6cedc518ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pHh46UhqNk4rCu5D"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rockthechaos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kolleen Gladden</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9a2d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用ngModel跟踪控制状态和有效性</h1><p id="9358" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">ngModel</code>不仅仅是双向数据绑定。它还告诉我们用户是否触摸了控件，值是否改变，或者值是否变得无效。</p><p id="1295" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果已经访问了一个控件，<code class="fe me mf mg mh b">ngModel</code>将在输入上设置<code class="fe me mf mg mh b">ng-touched</code>类。否则，它将被设置为<code class="fe me mf mg mh b">ng-untouched</code>。</p><p id="5c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果控制值已经改变，<code class="fe me mf mg mh b">ngModel</code>将在输入上设置<code class="fe me mf mg mh b">ng-dirty</code>类。否则，它将被设置为<code class="fe me mf mg mh b">ng-pristine</code>。</p><p id="b199" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果控制值有效，<code class="fe me mf mg mh b">ngModel</code>将在输入上设置<code class="fe me mf mg mh b">ng-valid</code>类。否则，它将被设置为<code class="fe me mf mg mh b">ng-invalid</code>。</p><h1 id="720c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4175" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">ngForm</code>和<code class="fe me mf mg mh b">ngModel</code>指令来构建模板驱动的表单。</p><p id="69fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">ngForm</code>为我们的表单定义一个模板变量。一旦我们用<code class="fe me mf mg mh b">ngForm</code>为表单定义了一个模板变量，我们就可以获得表单状态。</p><p id="f961" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">ngModel</code>为我们提供了输入和模型之间的双向绑定。它还根据状态设置表单的类。</p><h2 id="769d" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="5e3f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"> <strong class="kf ir"> AI in Plain English </strong> </a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p><p id="e5af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
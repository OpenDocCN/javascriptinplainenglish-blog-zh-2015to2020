# 如何转换您的代码库以做出反应

> 原文：<https://javascript.plainenglish.io/converting-your-code-base-to-react-1930945dc017?source=collection_archive---------0----------------------->

## 一些有用的入门技巧

![](img/58166b084523e06dd51229cf4f6b072b.png)

Photo by [Jeremy Bishop](https://unsplash.com/@jeremybishop?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## 仅仅为了转换旧代码而转换旧代码并不是最明智的想法。

当我们的团队着手将 React 引入我们的一些页面时，我们希望看到性能优势、更快的开发和更快乐的开发人员。

我们的前端项目很大，我们会遇到任何软件公司都会遇到的问题。我们有遗留的 Javascript 框架、丰富的 jQuery 插件和难以重构的代码。当把 React 添加到我们不断增长的库的列表中时，我们希望确保有一些东西正在被淘汰。

我们有一个 Angular 1 应用程序，已经几年没有更新了，我们认为首先替换这些页面将是一个好的开始。我建议采用这种方法，替换整个页面或功能，这样你就有了一个基准，而不是做一些全新的东西。

通过这种方式，您可以在 React 和之前的代码之间进行比较。

# 正在配置

## 创建 React 应用

如果你刚刚开始学习 React，很可能你已经安装了脸书提供的 create-react-app。这是一个很好的开始运行的平台，但是我们选择从头开始安装所有的东西。我建议进行手动安装，因为您将获得有价值的知识，并确切地知道发生了什么。您也不太可能创建一个空项目，而更有可能将 React 集成到一个现有项目中。

## 网络包

我们的团队最近引入了 Webpack 作为我们前端构建过程的一部分，并享受到了捆绑、版本控制和缩小的好处。Webpack 不仅对 React 项目很重要，对任何由几十个文件组成的大型项目也很重要。这一步完成后，我们继续引进巴别塔。

## 巴比伦式的城市

Babel 是一个 Javascript 编译器。它基本上允许你用最新的 Javascript 编码标准编写代码，并让它在旧的浏览器中工作。这是关键的一步，因为 React 利用了最新的编码标准，而且你将遇到的大多数教程都会假设你使用的是 Babel。就像 Webpack 一样，Babel 对于任何项目来说都是一个很好的补充，因为它免去了为特定浏览器编写代码的工作。您可以指定想要支持的浏览器。

## 反应

最后，好东西。现在已经安装了 Webpack 和 Babel，这是一个简单的 npm 安装 react 和 react-dom，您可以开始编写您的第一个组件了。

# 让一切都成为组件

## 成分

在编写任何代码之前，最好确定您想要创建的组件。因为我们将特性转换为 React，所以我们可以截屏一个页面，并轻松地画出我们认为应该分解的内容。如果我们觉得某样东西可以在将来重用，那么它就是自己组件的候选。按钮、图像路径生成器、头像、输入、用户卡，这些都将成为它们自己的表示组件。这样做的明显好处是它们可以重复使用很多次。如果它们包含任何逻辑或状态管理，它们可以被测试一次，我们就可以放心地重用它们。

有时候，决定某样东西是否值得成为组件并不是非黑即白的。我们有一个专为客户设计的页面，它的风格与我们应用程序的其他部分完全不同。这个页面及其特性很可能不会被重用，但是我们认为为了可读性，页面的逻辑和范围应该被分解。我们最终分解了正在迭代的 tile，并将其归类为*可能不可重用的组件*。

## 文件结构

关于文件结构的最佳建议来自 React 官方文档，并且非常简单。*不要想太多。*我们决定按照功能来构建我们的组件，在超过 20 个组件之后，我们仍然对这种方法感到满意。我们过去没有做过的事情是将规范包含在与组件相同的文件夹中。我们发现这非常有帮助，因为我们不必去一个不同的测试文件夹来查看哪些组件有测试覆盖。

```
src/
   api/
      loginApi.js
   components/
      avatar/
         index.js
         container.js
         container.spec
      common/
   utilities/
```

## API 的

API 对每个应用程序都至关重要，因此我们需要立即制定策略。我们首先将我们的 API 文件添加到它们最能代表的特性组件中。在编写了一些组件之后，我们发现这不是最好的方法，因为如果你有两个或更多的特性使用同一个 API，你应该把它放在哪里呢？

我们决定创建一个文件夹，并在其中添加所有的 API 文件，这样它们就可以被任何组件引用，而不会有一个误导性的文件路径。React 支持许多 AJAX 库，基于 Axios 提供的所有特性，我们决定选择它。用 Jest 编写测试时也很容易被嘲笑。【https://github.com/axios/axios 

## 测试

我们所有的特性通常被单元、集成和 UI 自动化测试所覆盖。我们决定重写我们的 React 组件，然后专注于测试。我发现这很有成效，因为团队更专注于学习 React，而不是测试。

如果您的项目没有现有的测试来防止回归，我不推荐这样做。关于我们测试策略的更多信息，以及了解 Jest 和 React 测试库，请查看我写的这篇详细文章。

# 事后思考

React 现在在前端世界无处不在，如果你的团队希望吸引人才，跟上 Javascript 的发展，或者只是想学习新东西，你应该尝试 React。

我认为这个库如此受欢迎的原因之一是因为它使可重用组件比过去更容易编写。你永远不会想到在你的 Javascript 文件中编写 CSS 甚至 HTML。

开发人员可以放心地将我们非常结构化的模板、Javascript 和 CSS 放在单独的文件中。React 挑战了这种想法，起初需要一些说服力，但大多数人认为这是朝着正确方向迈出的一步，减少了上下文切换。

构建新功能很有趣，但挑战自己写出更好的代码以供将来重用也很有趣。我们的团队已经有了一个 CSS 组件库，它使得创建新页面变得非常简单。

构建我们的 React 组件库似乎是一个很棒的下一步，它将帮助我们在未来更快地交付代码。
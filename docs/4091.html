<html>
<head>
<title>Vue 3 — Directives</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —指令</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-directives-698b0cd265c8?source=collection_archive---------13-----------------------#2020-11-15">https://javascript.plainenglish.io/vue-3-directives-698b0cd265c8?source=collection_archive---------13-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bccdbc5c3d4a672c1312000e9f09fd38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lIltz4765QovArwS"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@crystalsjo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Crystal Jo</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="054b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何创建更复杂的指令。</p><h1 id="78d2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">指示性参数</h1><p id="1931" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过从<code class="fe me mf mg mh b">binding.arg</code>属性中获取值来获取指令参数。</p><p id="f251" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6bc4" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p v-absolute:[direction]="50"&gt;foo&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="67da" class="mq lc iq mh b gy mv ms l mt mu">    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            direction: "right"<br/>          };<br/>        }<br/>      });</span><span id="d439" class="mq lc iq mh b gy mv ms l mt mu">      app.directive("absolute", {<br/>        mounted(el, binding) {<br/>          el.style.position = "absolute";<br/>          const s = binding.arg || "top";<br/>          el.style[s] = `${binding.value}px`;<br/>        }<br/>      });</span><span id="50fe" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="837b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了有一个<code class="fe me mf mg mh b">mounted</code>钩子的<code class="fe me mf mg mh b">absolute</code>指令。</p><p id="1a8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它接受一个具有<code class="fe me mf mg mh b">arg</code>属性的<code class="fe me mf mg mh b">binding</code>参数，参数值由我们传入指令的方括号中。</p><p id="72c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，它将是<code class="fe me mf mg mh b">direction</code>值。</p><p id="40d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">binding.value</code>设置<code class="fe me mf mg mh b">style</code>的属性，这是我们传递到等号右边的值。</p><p id="1eeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过传递一个表达式作为指令的值来确定指令的值。</p><p id="a848" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="432d" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input type="range" min="0" max="100" v-model="padding" /&gt;<br/>      &lt;p v-absolute:[direction]="padding"&gt;foo&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="7e88" class="mq lc iq mh b gy mv ms l mt mu">    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            direction: "left",<br/>            padding: 0<br/>          };<br/>        }<br/>      });</span><span id="154d" class="mq lc iq mh b gy mv ms l mt mu">      app.directive("absolute", {<br/>        mounted(el, binding) {<br/>          el.style.position = "absolute";<br/>          const s = binding.arg || "top";<br/>          el.style[s] = `${binding.value}px`;<br/>        },<br/>        updated(el, binding) {<br/>          const s = binding.arg || "top";<br/>          el.style[s] = `${binding.value}px`;<br/>        }<br/>      });</span><span id="7d82" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3829" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有添加了<code class="fe me mf mg mh b">updated</code>钩子的<code class="fe me mf mg mh b">absolute</code>指令。</p><p id="5fdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">updated</code>钩子将获取指令的<code class="fe me mf mg mh b">value</code>的任何更新。</p><p id="3658" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们移动滑块时,“foo”文本将随之移动。</p><h1 id="d550" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数速记</h1><p id="19af" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用函数速记来缩短我们的指令定义。</p><p id="2b46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们的指令中只有<code class="fe me mf mg mh b">mounted</code>和<code class="fe me mf mg mh b">updated</code>钩子，那么我们可以使用它。</p><p id="76a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="461d" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input type="range" min="0" max="100" v-model="padding" /&gt;<br/>      &lt;p v-absolute:[direction]="padding"&gt;foo&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="4208" class="mq lc iq mh b gy mv ms l mt mu">    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            direction: "left",<br/>            padding: 0<br/>          };<br/>        }<br/>      });</span><span id="9531" class="mq lc iq mh b gy mv ms l mt mu">      app.directive("absolute", (el, binding) =&gt; {<br/>        el.style.position = "absolute";<br/>        const s = binding.arg || "top";<br/>        el.style[s] = `${binding.value}px`;<br/>      });</span><span id="32fe" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="d7ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们缩短了我们的<code class="fe me mf mg mh b">absolute</code>指令，以包含一个回调，而不是一个带有钩子的对象。</p><p id="bfa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它做的事情和上一个例子一样，因为我们只有<code class="fe me mf mg mh b">mounted</code>和<code class="fe me mf mg mh b">update</code>钩子。</p><p id="4d5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一种避免重复代码的简便方法。</p><h1 id="53d3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对象文字</h1><p id="a4ba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在指令中需要多个值，我们可以传递一个对象文本给它。</p><p id="9c3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe me mf mg mh b">binding.value</code>有我们传入的对象。</p><p id="350e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4688" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p v-custom-text="{ color: 'green', text: 'hello!' }"&gt;&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="e5a4" class="mq lc iq mh b gy mv ms l mt mu">    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="0ab6" class="mq lc iq mh b gy mv ms l mt mu">      app.directive("custom-text", (el, binding) =&gt; {<br/>        const { color, text } = binding.value;<br/>        el.style.color = color;<br/>        el.textContent = text;<br/>      });</span><span id="5dd7" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="0350" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个接受对象的<code class="fe me mf mg mh b">custom-text</code>指令。</p><p id="422b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">binding.value</code>获得对象的<code class="fe me mf mg mh b">color</code>和<code class="fe me mf mg mh b">text</code>属性。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/792a35e78badfb89c23592081b1cff1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m1NHm2BQEsiivptJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@markkoenig?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mark König</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7ada" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cd95" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用一些快捷键更容易地创建指令。</p><p id="0f2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，指令可以接受参数和值。</p><p id="dd73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
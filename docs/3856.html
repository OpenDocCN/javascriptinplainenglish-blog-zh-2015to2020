<html>
<head>
<title>Vue 3 — Prop Types and Non-Prop Attributes Inheritance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">vue 3-道具类型和非道具属性继承</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-prop-types-and-non-prop-attributes-inheritance-a4d1a5540108?source=collection_archive---------5-----------------------#2020-10-29">https://javascript.plainenglish.io/vue-3-prop-types-and-non-prop-attributes-inheritance-a4d1a5540108?source=collection_archive---------5-----------------------#2020-10-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/884e38f5fb23a66ba1646ace25232b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_dKAUTtoUlIaQOK-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@thecreative_exchange?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">The Creative Exchange</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="18ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Vue 3处于测试阶段，可能会发生变化。</strong></p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的流行和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用Vue 3检查正确的数据类型和控制非正确的属性继承。</p><h1 id="654f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类型检查</h1><p id="eeb0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用道具的<code class="fe me mf mg mh b">type</code>属性进行数据类型检查。</p><p id="7fa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以采用以下任何本地构造函数和工厂:</p><ul class=""><li id="2a69" class="mi mj iq kf b kg kh kk kl ko mk ks ml kw mm la mn mo mp mq bi translated"><code class="fe me mf mg mh b">String</code></li><li id="6d61" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Number</code></li><li id="bcee" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Boolean</code></li><li id="e786" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Array</code></li><li id="8297" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Object</code></li><li id="8600" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Date</code></li><li id="e770" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Function</code></li><li id="21ca" class="mi mj iq kf b kg mr kk ms ko mt ks mu kw mv la mn mo mp mq bi translated"><code class="fe me mf mg mh b">Symbol</code></li></ul><p id="94ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过将值设置为我们自己的构造函数来检查我们自己的构造函数。</p><p id="90cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查将由<code class="fe me mf mg mh b">instanceof</code>操作员完成。</p><p id="999a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="fc9d" class="ne lc iq mh b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;blog-post v-for="post of posts" :author="post.author"&gt;&lt;/blog-post&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      class Person {<br/>        constructor(firstName, lastName) {<br/>          this.firstName = firstName;<br/>          this.lastName = lastName;<br/>        }<br/>      }</span><span id="3194" class="ne lc iq mh b gy nj ng l nh ni">      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            posts: [{ author: new Person("james", "smith") }]<br/>          };<br/>        }<br/>      });<br/>      app.component("blog-post", {<br/>        props: {<br/>          author: Person<br/>        },<br/>        template: `&lt;p&gt;{{author.firstName}} {{author.lastName}}&lt;/p&gt;`<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="99f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">author</code>道具的类别设置为<code class="fe me mf mg mh b">Person</code>类别，以便进行核对。</p><p id="3a69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们的<code class="fe me mf mg mh b">post</code>条目中的<code class="fe me mf mg mh b">author</code>属性是<code class="fe me mf mg mh b">Person</code>实例，因此正确的验证应该会成功。</p><h1 id="bc9e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">非道具属性</h1><p id="0046" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">非专有属性是传递给组件但没有定义相应专有属性的属性。</p><p id="9907" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们包括像<code class="fe me mf mg mh b">class</code>、<code class="fe me mf mg mh b">style</code>或<code class="fe me mf mg mh b">id</code>这样的HTML属性。</p><p id="59a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们将由组件继承。</p><p id="a9cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们将<code class="fe me mf mg mh b">data</code>属性传递给一个组件:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="ba46" class="ne lc iq mh b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;component-a data-status="foo"&gt;&lt;/component-a&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="51e8" class="ne lc iq mh b gy nj ng l nh ni">      app.component("component-a", {<br/>        template: `&lt;p&gt;component a&lt;/p&gt;`<br/>      });</span><span id="fd33" class="ne lc iq mh b gy nj ng l nh ni">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="1ff9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后呈现的HTML将是:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="b2ba" class="ne lc iq mh b gy nf ng l nh ni">&lt;p data-status="foo"&gt;component a&lt;/p&gt;</span></pre><p id="3b40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以禁用组件自动继承属性的能力。</p><p id="df66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以将组件的<code class="fe me mf mg mh b">inheritAttrs</code>属性设置为<code class="fe me mf mg mh b">false</code>。</p><p id="0904" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="17ea" class="ne lc iq mh b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;component-a data-status="foo"&gt;&lt;/component-a&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="e918" class="ne lc iq mh b gy nj ng l nh ni">      app.component("component-a", {<br/>        inheritAttrs: false,<br/>        template: `&lt;p&gt;component a&lt;/p&gt;`<br/>      });</span><span id="a14b" class="ne lc iq mh b gy nj ng l nh ni">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6aff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后呈现的HTML是:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="c80f" class="ne lc iq mh b gy nf ng l nh ni">&lt;p&gt;component a&lt;/p&gt;</span></pre><p id="d52e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，我们仍然可以使用<code class="fe me mf mg mh b">$attrs</code>变量访问属性。</p><p id="8e21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它包括所有不包含在组件道具或<code class="fe me mf mg mh b">emits</code>属性中的属性。</p><p id="d2fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">$attrs</code>会有类似<code class="fe me mf mg mh b">class</code>、<code class="fe me mf mg mh b">style</code>、<code class="fe me mf mg mh b">v-on</code>监听器等属性。</p><p id="195e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过<code class="fe me mf mg mh b">v-bind='$attrs'</code>将属性添加到非根组件中。</p><p id="14f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="c8fe" class="ne lc iq mh b gy nf ng l nh ni">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;component-a data-status="foo"&gt;&lt;/component-a&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="95d4" class="ne lc iq mh b gy nj ng l nh ni">      app.component("component-a", {<br/>        inheritAttrs: false,<br/>        template: `<br/>          &lt;div&gt;<br/>            &lt;p v-bind="$attrs"&gt;component a&lt;/p&gt;<br/>          &lt;/div&gt;`<br/>      });</span><span id="2ad4" class="ne lc iq mh b gy nj ng l nh ni">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="011c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过编写以下内容得到呈现的HTML:</p><pre class="mw mx my mz gt na mh nb nc aw nd bi"><span id="45d9" class="ne lc iq mh b gy nf ng l nh ni">&lt;div&gt;&lt;p data-status="foo"&gt;component a&lt;/p&gt;&lt;/div&gt;</span></pre><p id="5dde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在p标签上有了<code class="fe me mf mg mh b">data-status</code>属性，而不是外部div，因为我们禁用了自动继承，将<code class="fe me mf mg mh b">inheritAttrs</code>设置为<code class="fe me mf mg mh b">false</code>。</p><p id="eb42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">v-bind='$attrs'</code>将父元素传递的属性添加到<code class="fe me mf mg mh b">component-a</code>的p元素中。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/b862ec1791c5d8707d36225c5ee7329d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*esD-TsbNdtQW_R4U"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ornellabinni?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">ORNELLA BINNI</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="03e0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0165" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">默认情况下，非属性自动从父节点继承，并将填充到根节点中。</p><p id="3acd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，这可以关闭和自定义。</p><p id="f1f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以为道具添加类型检查。</p><p id="3270" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
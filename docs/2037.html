<html>
<head>
<title>React Tips — Component Organization and Web Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React提示—组件组织和Web组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-component-organization-and-web-components-26d4e89a1640?source=collection_archive---------6-----------------------#2020-05-14">https://javascript.plainenglish.io/react-tips-component-organization-and-web-components-26d4e89a1640?source=collection_archive---------6-----------------------#2020-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f7a9101613ead55a0e612e9f5be60837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*doQjQ-XZQxhEah9V"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@marxgall?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marek Szturc</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="156a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是构建现代交互式前端web应用最常用的前端库。它还可以用来构建移动应用程序。在本文中，我们将了解一些让React应用程序构建更容易的技巧和诀窍。</p><h1 id="921d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">保持元件小</h1><p id="3186" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">保持组件小，使其易于阅读、更改和测试。它们也更容易调试和维护。30多行代码，可能太大了。</p><p id="d1b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果组件是父组件和子组件，通过在它们之间传递道具，我们可以很容易地将它们分成更小的组件。</p><p id="5cae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们不相关，我们也可以使用像Redux或上下文API这样的状态管理解决方案。</p><p id="a5ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们做得更少，因此更有可能被重用，因为它们适合更多的用例。</p><p id="6eb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，下面是一个小组件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="95a0" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="b070" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [count, setCount] = React.useState(0);<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;<br/>      &lt;p&gt;{count}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="bcfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它很短，自己做不了多少事。</p><h1 id="5f58" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免过小的组件</h1><p id="a25a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">组件太小也是一个问题。我们不想要很多只有一两行的元件。此外，我们不希望每个div、span或段落都是自己的组件。</p><p id="7cad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该让他们接受道具，让他们可以重复使用。例如，我们不应该在应用程序中到处都有这样的组件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3391" class="mn lc iq mj b gy mo mp l mq mr">const Foo = &lt;p&gt;foo&lt;/p&gt;;</span></pre><h1 id="8383" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在React中使用Web组件</h1><p id="9568" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将web组件直接放入React组件并使用它们。</p><p id="1dd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以定义一个web组件，然后按如下方式使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f389" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="cc5a" class="mn lc iq mj b gy ms mp l mq mr">class FooParagraph extends HTMLElement {<br/>  constructor() {<br/>    super();<br/>  }</span><span id="bbb6" class="mn lc iq mj b gy ms mp l mq mr">  connectedCallback() {<br/>    const shadow = this.attachShadow({ mode: "open" });<br/>    const p = document.createElement("p");<br/>    p.setAttribute("class", "wrapper");<br/>    p.textContent = this.getAttribute("text");<br/>    shadow.appendChild(p);<br/>  }<br/>}</span><span id="69e9" class="mn lc iq mj b gy ms mp l mq mr">customElements.define("foo-paragraph", FooParagraph);</span><span id="8e9f" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;foo-paragraph text="abc" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="e2e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有了<code class="fe mt mu mv mj b">FooParagraph</code> web组件类。在类内部，我们有<code class="fe mt mu mv mj b">connectedCallback</code>，它获取<code class="fe mt mu mv mj b">text</code>的属性值，然后将带有<code class="fe mt mu mv mj b">text</code>值的p标签添加到影子DOM中。</p><p id="2be7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">customElements.define</code>来定义一个新的web组件。然后我们将它直接放入<code class="fe mt mu mv mj b">App</code> React组件。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/60bc87b0bed2084c0d93bbd5bde64814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GGc2W5L_iWcQ4e1R"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@soulsaperture?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lydia Torrey</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c5a6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在我们的Web组件中使用React</h1><p id="5bf3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以使用React创建web组件，方法是将React组件安装在web组件中，如下所示:</p><p id="c863" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">src/index.js</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="81fa" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import ReactDOM from "react-dom";</span><span id="9146" class="mn lc iq mj b gy ms mp l mq mr">class XParagraph extends HTMLElement {<br/>  connectedCallback() {<br/>    const mountPoint = document.createElement("div");<br/>    this.attachShadow({ mode: "open" }).appendChild(mountPoint);</span><span id="dcef" class="mn lc iq mj b gy ms mp l mq mr">    const text = this.getAttribute("text");<br/>    ReactDOM.render(&lt;p&gt;{text}&lt;/p&gt;, mountPoint);<br/>  }<br/>}<br/>customElements.define("x-paragraph", XParagraph);</span></pre><p id="14bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">index.html</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0d6f" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>  &lt;/head&gt;</span><span id="389b" class="mn lc iq mj b gy ms mp l mq mr">  &lt;body&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;x-paragraph text="foo"&gt;&lt;/x-paragraph&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="01a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码是用Parcel创建的项目的一部分。因此，我们可以在脚本中使用模块。</p><p id="f1a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe mt mu mv mj b">XParagraph</code> web组件，它调用<code class="fe mt mu mv mj b">ReactDOM.render</code>来呈现一个p React元素，其<code class="fe mt mu mv mj b">text</code>属性值取自web组件的属性。</p><p id="06e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">customElements.define</code>定义web组件，将元素的名称作为第一个参数，将<code class="fe mt mu mv mj b">HTMLElement</code>类作为第二个参数。</p><p id="5e34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">index.html</code>中，我们添加了<code class="fe mt mu mv mj b">x-paragraph</code> web组件，其<code class="fe mt mu mv mj b">text</code>属性被设置为<code class="fe mt mu mv mj b">foo</code>，因此我们通过调用<code class="fe mt mu mv mj b">this.getAttribute('text')</code>然后将返回值传递给<code class="fe mt mu mv mj b">ReactDOM.render</code>来显示元素内部的文本内容。</p><p id="95fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们在屏幕上看到‘foo’这个词。</p><h1 id="1787" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1743" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了使开发、测试和阅读代码变得容易，我们应该保持组件小。大约30行或更少是一个好的大小。</p><p id="2429" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，它们不应该太小，比如1或2行，因为我们必须管理太多的行。如果他们不拿任何道具，那就更糟了。为了确保它们是可重用的，我们应该确保如果它们共享任何数据，它们都需要道具。</p><p id="8767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React组件可以嵌入到web组件中，以便使用React创建易于重用的web组件。</p><p id="8347" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以在React组件中嵌入web组件，这样我们就可以利用符合标准的定制HTML元素，我们可以在任何地方使用这些元素。</p><h2 id="1457" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">来自简明英语团队的通知</strong></h2><p id="191b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kf ir">JavaScript in Plain English</strong></a><a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！我们还推出了一个YouTube，希望你能通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的英语频道</strong> </a>来支持我们</p><p id="e1f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一如既往,“简明英语”希望帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
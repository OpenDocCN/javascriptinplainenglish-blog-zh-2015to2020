<html>
<head>
<title>Common Vue Problems — Maps and Sets, Passing Methods, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见的Vue问题—地图和集合、传递方法等等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/common-vue-problems-maps-and-sets-passing-methods-and-more-5473a329e609?source=collection_archive---------9-----------------------#2020-06-27">https://javascript.plainenglish.io/common-vue-problems-maps-and-sets-passing-methods-and-more-5473a329e609?source=collection_archive---------9-----------------------#2020-06-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/93639df3d24fd8ef134e4545b2e204ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B50fTpd05Th_O1Ms"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@drewmark?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Stutesman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d51a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js让开发前端应用变得简单。然而，我们仍有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看一些常见的问题，并看看如何解决它们。</p><h1 id="34aa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Vue应用程序中的地图和集合</h1><p id="33fb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vue看不到地图和布景。</p><p id="82ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">v-for</code>，从它们创建一个计算属性，使用观察器，模板表达式等等。</p><p id="9715" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须创建该结构的可序列化副本，并将其暴露给Vue。</p><p id="4453" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们必须将它转换成一个数组，并与另一个变量组合。</p><p id="b895" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6178" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  ...<br/>  <!-- -->data() {<br/>    changeTracker: 1,<br/>    mySet: new Set(),<br/>  },<br/><br/>  computed: {<br/>    setAsList() { <br/>      return this.changeTracker &amp;&amp; [...this.mySet];<br/>    },<br/>  },<br/><br/>  methods: {<br/>    add(item) {<br/>      this.mySet.add(item);    <br/>      this.changeTracker += 1;<br/>    }<br/>  }<br/>  ...<br/>}</span></pre><p id="e964" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了一个<code class="fe me mf mg mh b">changeTracker</code>状态，Vue会监视它，以便在我们更新集合时计算我们的计算属性。</p><p id="d4ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，Vue跟踪赋值，所以当map或set更新时，我们可以将它重新赋值给同一个变量。</p><p id="5940" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4a90" class="mq lc iq mh b gy mr ms l mt mu">methods: {<br/>  add(item) {<br/>    this.mySet = new Set(this.mySet.add(item));<br/>  }<br/>}</span></pre><p id="e5e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当我们的设置更新时，我们分配给<code class="fe me mf mg mh b">this.mySet</code>，所以Vue将观看它。</p><h1 id="368c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将方法从父组件传递到子组件</h1><p id="17ee" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过props将一个方法直接从父节点传递给子节点。</p><p id="54ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6bea" class="mq lc iq mh b gy mr ms l mt mu">&lt;child-component :test="test"&gt;&lt;child-component&gt;</span></pre><p id="39a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将一个<code class="fe me mf mg mh b">test</code>方法作为<code class="fe me mf mg mh b">test</code>道具的值传递给<code class="fe me mf mg mh b">child-component</code>。</p><h1 id="c9f9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将ES6代码与IE11一起使用</h1><p id="d790" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ES6代码不运行IE 11。因此，我们需要在我们的Babel配置中特别针对IE 11，以便编译的代码将是ES5。</p><p id="da75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="907c" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "presets": [<br/>    [<br/>      "@vue/app",<br/>      {<br/>        "targets": {<br/>          "ie": "11"<br/>        }<br/>      }<br/>    ]<br/>  ]<br/>}</span></pre><p id="8ebd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">.babelrc</code>中。</p><p id="5486" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的配置是针对巴别7的。</p><p id="c200" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们使用巴别塔6，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4d85" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "presets": [<br/>    ["env", {<br/>      "targets": {<br/>        "browsers": [ "&gt;0.25%"]<br/>      }<br/>    }],<br/>    "vue"<br/>  ]<br/>}</span></pre><p id="c197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据browserlist显示的全球用户覆盖率。</p><p id="acc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将转换代码，使其覆盖IE 11。</p><h1 id="91cf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Vue CLI项目中使用引导程序</h1><p id="f017" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要在Vue项目中使用普通引导程序，我们可以将其作为节点包安装，</p><p id="bcc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="46fc" class="mq lc iq mh b gy mr ms l mt mu">npm install bootstrap</span></pre><p id="7148" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来安装它。</p><p id="f1dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="07e1" class="mq lc iq mh b gy mr ms l mt mu">npm install sass-loader node-sass --save-dev</span></pre><p id="f5ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加SASS加载程序和节点SASS。</p><p id="4625" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的Webpack配置中，我们可以通过编写以下内容来添加SASS配置:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="29ef" class="mq lc iq mh b gy mr ms l mt mu">sassLoader: {<br/>  includePaths: [<br/>    path.resolve(projectRoot, 'node_modules/bootstrap/scss/'),<br/>  ],<br/>},</span></pre><p id="1487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以通过编写以下代码来导入引导CSS:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e695" class="mq lc iq mh b gy mr ms l mt mu">&lt;style lang="scss"&gt;<br/>  @import "bootstrap";<br/>&lt;/style&gt;</span></pre><p id="290d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的组件中。</p><p id="d986" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用BootstrapVue，这是一个包含由Bootstrap构成的Vue组件的包。</p><h1 id="f819" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">观察Vue组件中的本地存储变化</h1><p id="5011" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过添加<code class="fe me mf mg mh b">localStorage.getItem</code>作为getter来观察Vue组件的变化。</p><p id="0ed8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0e85" class="mq lc iq mh b gy mr ms l mt mu">new Vue({<br/>  el: '#app',<br/>  data() {<br/>    return {<br/>      get count() {<br/>        return localStorage.getItem('count') || 0;<br/>      },<br/>      set count(value) {<br/>        localStorage.setItem('count', value);<br/>      }<br/>    };<br/>  }<br/>});</span></pre><p id="5c60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">get</code>为<code class="fe me mf mg mh b">localStorage.getItem(‘token’)</code>添加了一个getter。</p><p id="38bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们添加了一个带有<code class="fe me mf mg mh b">set</code>的setter来设置令牌。</p><p id="3db8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的模板中，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="de8a" class="mq lc iq mh b gy mr ms l mt mu">&lt;div id="app"&gt;<br/>  {{token}}<br/>  &lt;button @click="count++"&gt; + &lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="f1bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以因为setter而更新<code class="fe me mf mg mh b">count</code>变量。</p><p id="2ba8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它采用现有值，并将其增加1。</p><h1 id="1f91" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复制对象并将其添加到Vue组件的数组中</h1><p id="cce2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以复制一个对象，然后通过浅层或深层克隆将其添加到Vue数组中。</p><p id="d9e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要做浅层克隆，我们可以用<code class="fe me mf mg mh b">Object.assign</code>。</p><p id="f41b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0695" class="mq lc iq mh b gy mr ms l mt mu">addItem(e) {<br/>  this.items.push(Object.assign({}, this.newItem));<br/>}</span></pre><p id="dda1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以通过使用<code class="fe me mf mg mh b">JSON.stringify</code>和<code class="fe me mf mg mh b">JSON.parse</code>写来进行深度克隆:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a3b8" class="mq lc iq mh b gy mr ms l mt mu">addItem(e) {<br/>  this.items.push(JSON.parse(JSON.stringify(this.newItem)));<br/>}</span></pre><p id="5fac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用对象传播来制作对象的副本。</p><p id="4558" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="49c8" class="mq lc iq mh b gy mr ms l mt mu">addItem(e) {<br/>  this.items.push({...this.newItem});<br/>}</span></pre><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/ef37750254314fd2858ee0b9726cf170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JASCthmfAl1XjVTx"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jonathanborba?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jonathan Borba</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="95bc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="47e1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">Object.assign</code>、扩展操作符或<code class="fe me mf mg mh b">JSON</code>方法将一个对象的副本添加到一个数组中</p><p id="5f7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以用getters和setters来观察本地存储状态。</p><p id="1e0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须专门为IE编译。</p><h2 id="2f32" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="578f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
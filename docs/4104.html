<html>
<head>
<title>Understanding Async and Await in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解JavaScript中的异步和等待</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-async-and-await-in-javascript-471d85177d97?source=collection_archive---------9-----------------------#2020-11-16">https://javascript.plainenglish.io/understanding-async-and-await-in-javascript-471d85177d97?source=collection_archive---------9-----------------------#2020-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="760f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习如何在JavaScript中使用异步和等待</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8921635eb6d03bab8c9680d6f5653877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mLt5H4__lMOHPUJn"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@clark_fransa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Arnold Francisca</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0530" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="a96b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">JavaScript是一种单线程编程语言。这意味着它有一个调用堆栈和一个内存堆。正如预期，它按顺序执行代码，并且必须在进入下一个代码之前完成一段代码的执行。然而，由于有了V8引擎，JavaScript可以是异步的，这意味着我们可以一次在代码中执行多个任务。异步和等待是使异步代码的编写和工作更简单的一种方式。他们让承诺更容易写。</p><p id="3fd9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本文中，我们将在JavaScript中发现异步和等待，以及我们如何使用它们。让我们开始吧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/a80e8d221a12d5f3539d3f44235557dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cByLMD1sRhPI9mM3rPuWA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image Created with ❤️ ️By <a class="ae kv" href="https://mehdiouss315.medium.com/" rel="noopener">Mehdi Aoussiad</a>.</figcaption></figure><h1 id="601f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">异步语法</h1><p id="3a01" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">函数之前的关键字<code class="fe mq mr ms mt b">async</code>使函数返回一个承诺。这意味着函数将异步运行。请看下面的例子:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="5d55" class="my kx iq mt b gy mz na l nb nc"><strong class="mt ir">async</strong> function myFunction() {<br/>  return "Hello";<br/>}</span></pre><p id="a9f6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">它与以下相同:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="dd49" class="my kx iq mt b gy mz na l nb nc"><strong class="mt ir">async</strong> function myFunction() {<br/>  return Promise.resolve("Hello");<br/>}</span></pre><p id="fb37" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">以下是您使用承诺的方式:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="0d54" class="my kx iq mt b gy mz na l nb nc">myFunction().then(<br/>  function(value) { /* code if successful */ },<br/>  function(error) { /* code if there is an error */ }<br/>);</span></pre><p id="e708" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果一个函数返回一个承诺，你必须以正确的方式处理这个返回的承诺。这意味着使用方法<code class="fe mq mr ms mt b">then()</code>获取并处理该承诺的返回值。您也可以使用<code class="fe mq mr ms mt b">catch()</code>、<code class="fe mq mr ms mt b">finally()</code>等方法。</p><h1 id="a7fd" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">等待语法</h1><p id="bdcb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">函数前的关键字<code class="fe mq mr ms mt b">await</code>使函数等待承诺。请看下面的例子:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="ba66" class="my kx iq mt b gy mz na l nb nc">let value = await promise;</span></pre><p id="5411" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">关键字<code class="fe mq mr ms mt b">await</code>只能在<code class="fe mq mr ms mt b">async</code>功能中使用。它告诉JavaScript暂停异步函数的执行。然后该功能被暂停，直到承诺返回一些结果。</p><p id="75cb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们慢慢来，学习如何使用它:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="8d16" class="my kx iq mt b gy mz na l nb nc">async function myDisplay() {<br/>  let myPromise = new Promise(function(myResolve, myReject) {<br/>    myResolve("I love You !!");<br/>  });<br/>  document.getElementById("element").innerHTML = await myPromise;<br/>}<br/><br/>myDisplay();</span></pre><p id="72a8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如您在上面的例子中所看到的，我们在<code class="fe mq mr ms mt b">async</code>函数中有一个承诺。关键字<code class="fe mq mr ms mt b">await</code>等待解析消息的承诺，然后它在我们的HTML元素中显示它。</p><h1 id="b589" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">等待超时</h1><p id="cc6f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">方法<code class="fe mq mr ms mt b">setTimeout()</code>是一个异步函数。因此，我们将在下面的示例中使用它，在我们将设置的给定时间之后，在网页上显示文本。看看下面的例子:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="98ef" class="my kx iq mt b gy mz na l nb nc"><strong class="mt ir">async</strong> function myDisplay() {<br/>  let myPromise = new Promise(function(myResolve, myReject) {<br/>    setTimeout(function() { myResolve("I love You !!"); }, 3000);<br/>  });<br/>  document.getElementById("demo").innerHTML = <strong class="mt ir">await</strong> myPromise;<br/>}<br/><br/>myDisplay();</span></pre><p id="2a0c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如您所见，只有在承诺给出结果后(3000毫秒后)，消息才会显示在页面上。</p><h1 id="acb4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="8fb4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">异步和等待使得不必使用<code class="fe mq mr ms mt b">then</code>和<code class="fe mq mr ms mt b">catch</code>就可以更容易地写承诺。它使代码更清晰，易于维护。</p><p id="8bca" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">谢谢你阅读这篇文章，我希望你觉得它有用。</p><h1 id="857b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">更多阅读</h1><div class="nd ne gp gr nf ng"><a href="https://medium.com/javascript-in-plain-english/5-fun-apis-for-your-next-javascript-projects-1834626864c" rel="noopener follow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">您下一个JavaScript项目的5个有趣的API</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">您可以在JavaScript项目中使用的5个有用的API</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">medium.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kp ng"/></div></div></a></div></div></div>    
</body>
</html>
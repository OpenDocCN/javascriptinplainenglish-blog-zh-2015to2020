<html>
<head>
<title>Why does JavaScript have -0?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么JavaScript有-0？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-does-javascript-have-0-9b6e1965a075?source=collection_archive---------3-----------------------#2019-12-03">https://javascript.plainenglish.io/why-does-javascript-have-0-9b6e1965a075?source=collection_archive---------3-----------------------#2019-12-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e5b0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript有两个零:-0和+0。他们在某种程度上既相同又不同。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/29f0be868ab7e25d394c697431ce1775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dhVeOEORgwq2B3SGxRDfAA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Using strict equality comparison, -0 and +0 are equal</figcaption></figure><h1 id="2ea5" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">两个零的故事</h1><p id="940f" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">自从JavaScript的早期版本以来，一直有两种方式来执行<a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness" rel="noopener ugc nofollow" target="_blank">相等比较</a>:</p><ul class=""><li id="e4db" class="mh mi in lm b ln mj lq mk lt ml lx mm mb mn mf mo mp mq mr bi translated">使用<code class="fe ms mt mu mv b">==</code>的抽象相等比较，又名“双相等”</li><li id="c5d9" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated">使用<code class="fe ms mt mu mv b">===</code>即“三重相等”进行严格的相等比较</li></ul><p id="4dbb" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">ES6以<code class="fe ms mt mu mv b"><a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" rel="noopener ugc nofollow" target="_blank">Object.is</a></code>方法的形式提供了第三种选择。它有一些细微的差别，暗示着你甚至不知道你有问题。例如，你如何区分JavaScript的两个零？</p><p id="14fb" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">也许更好的问题是，JavaScript有两个零？为什么JavaScript有两个零？为什么任何语言都有两个零？</p><p id="c69a" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">其名称为<a class="ae mg" href="https://en.wikipedia.org/wiki/Signed_zero" rel="noopener ugc nofollow" target="_blank">带符号零</a>。原来JavaScript有<code class="fe ms mt mu mv b">-0</code>的原因是因为它是<a class="ae mg" href="https://en.wikipedia.org/wiki/IEEE_754" rel="noopener ugc nofollow" target="_blank"> IEEE 754 </a>浮点规范的一部分。两个零也出现在其他语言中，比如Ruby。</p><p id="0190" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">这两个零是:</p><ul class=""><li id="dc53" class="mh mi in lm b ln mj lq mk lt ml lx mm mb mn mf mo mp mq mr bi translated">正零<code class="fe ms mt mu mv b">+0</code></li><li id="ce8e" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated">负零<code class="fe ms mt mu mv b">-0</code></li></ul><p id="8f03" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">正如人们所料，上述两种等式比较方法都将它们视为“相同的”。毕竟零就是零。</p><pre class="kd ke kf kg gt ne mv nf ng aw nh bi"><span id="ea3e" class="ni kt in mv b gy nj nk l nl nm">-0 == +0   // true<br/>-0 === +0  // true</span></pre><p id="c8f1" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">这就是<code class="fe ms mt mu mv b">Object.is</code>的用武之地。它将两个零视为不相等。</p><pre class="kd ke kf kg gt ne mv nf ng aw nh bi"><span id="f164" class="ni kt in mv b gy nj nk l nl nm">Object.is(+0, -0)  // false</span></pre><p id="9d89" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">在ES6之前，仍然可以区分这两个零。看看其他运营商的结果就知道了。</p><pre class="kd ke kf kg gt ne mv nf ng aw nh bi"><span id="f493" class="ni kt in mv b gy nj nk l nl nm">-0 &gt; +0  // false<br/>+0 &gt; -0  // false<br/>-0 + -0  // -0<br/>-0 + +0  // +0<br/>+0 + +0  // +0<br/>+1 / -0  // -Infinity<br/>+1 / +0  // +Infinity</span></pre><p id="e68d" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">最后两个操作特别有用。不像Ruby或Python那样除以零得到一个<code class="fe ms mt mu mv b">ZeroDivisionError</code>，JavaScript返回<code class="fe ms mt mu mv b"><a class="ae mg" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity" rel="noopener ugc nofollow" target="_blank">Infinity</a></code>。现在来看看MDN上提供的<code class="fe ms mt mu mv b">Object.is</code>的polyfill。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3f5f" class="pw-post-body-paragraph lk ll in lm b ln mj jo lp lq mk jr ls lt nb lv lw lx nc lz ma mb nd md me mf ig bi translated">因为在JavaScript中除以有符号的零会返回有符号的无穷大，所以可以比较这些结果来区分两个零。</p><h1 id="0b56" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">资源</h1><ul class=""><li id="2ac7" class="mh mi in lm b ln lo lq lr lt np lx nq mb nr mf mo mp mq mr bi translated"><a class="ae mg" href="https://hackernoon.com/negative-zero-bbd5fd790af3" rel="noopener ugc nofollow" target="_blank">负零</a></li><li id="885a" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated"><a class="ae mg" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html" rel="noopener ugc nofollow" target="_blank">关于浮点运算，每个计算机科学家都应该知道的事情</a></li><li id="e3cd" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated"><a class="ae mg" href="https://people.freebsd.org/~das/kahan86branch.pdf" rel="noopener ugc nofollow" target="_blank">无事生非的标志位</a></li></ul><h1 id="9648" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">TLDR</h1><ul class=""><li id="6419" class="mh mi in lm b ln lo lq lr lt np lx nq mb nr mf mo mp mq mr bi translated">JavaScript(和许多语言)有两个带符号的零</li><li id="0892" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated">在ES6之前，可以使用<code class="fe ms mt mu mv b">Object.is</code>来区分它们</li><li id="ea0b" class="mh mi in lm b ln mw lq mx lt my lx mz mb na mf mo mp mq mr bi translated">只有在进行有符号运算时，这种差异才是明显的</li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>A Vue Event Handling Cheatsheet — The Essentials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue事件处理备忘单—要点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-vue-event-handling-cheatsheet-the-essentials-19462263e594?source=collection_archive---------4-----------------------#2020-01-30">https://javascript.plainenglish.io/a-vue-event-handling-cheatsheet-the-essentials-19462263e594?source=collection_archive---------4-----------------------#2020-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ab36f93175e6444e38604285b6ecf169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-LxI7kEinezx4kZk.jpg"/></div></div></figure><p id="eb22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Vue事件处理是每个Vue项目的一个必要方面。</p><p id="552d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我将介绍一些基础知识，并提供一些处理事件的代码示例。它将只包括我认为最有用的技巧/方法，要深入了解Vue能做的所有事情，请查看<a class="ae kw" href="https://vuejs.org/v2/guide/events.html" rel="noopener ugc nofollow" target="_blank"> Vue文档。</a></p><h1 id="f38e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">基本事件处理</h1><p id="5cb3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">使用<code class="fe ma mb mc md b">v-on</code> <a class="ae kw" href="https://learnvue.co/2020/01/creating-your-first-vuejs-custom-directive/" rel="noopener ugc nofollow" target="_blank">指令</a>(简称为<code class="fe ma mb mc md b">@</code>)我们可以监听DOM事件并运行处理程序方法或内联Javascript</p><p id="61ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将会报道一些你可能想要捕捉的更常见的事件，点击这里查看<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/Events" rel="noopener ugc nofollow" target="_blank"> DOM事件</a>的完整列表。</p><h1 id="219a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">发出自定义事件</h1><p id="6dba" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">除了DOM事件，我们可以通过使用实例方法<code class="fe ma mb mc md b">$emit</code>来创建自定义事件。然后，此自定义事件可以由发出该事件的实例的父组件来处理。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="9c7d" class="mm ky iq md b gy mn mo l mp mq">// Child Component </span><span id="a94d" class="mm ky iq md b gy mr mo l mp mq">this.$emit('close') </span><span id="3afd" class="mm ky iq md b gy mr mo l mp mq"><br/>// Parent Component </span><span id="c3a8" class="mm ky iq md b gy mr mo l mp mq">&lt;child-component @close='handleClose' /&gt;</span></pre><p id="dcd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以将数据传递给我们的父组件。这很重要，因为这是一种在组件中实现双向数据绑定的技术。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="4542" class="mm ky iq md b gy mn mo l mp mq">// Child Component <br/>this.$emit('close', false) </span><span id="4ce9" class="mm ky iq md b gy mr mo l mp mq">// Parent Component <br/>&lt;child-component @close='isOpen = $event' /&gt;</span></pre><h1 id="da78" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">处理鼠标修改器</h1><p id="e67f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">下面是我们可以在<code class="fe ma mb mc md b">v-on</code>指令中捕获的主要DOM <a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent" rel="noopener ugc nofollow" target="_blank">鼠标事件</a>的列表:</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="a456" class="mm ky iq md b gy mn mo l mp mq">&lt;div <br/>  @mousedown='handleEvent'<br/>  @mouseup='handleEvent'<br/>  @click='handleEvent'<br/>  @dblclick='handleEvent'<br/>  @mousemove='handleEvent'<br/>  @mouseover='handleEvent'<br/>  @mousewheel='handleEvent'<br/>  @mouseout='handleEvent'<br/>&gt;<br/>Interact with Me!<br/>&lt;/div&gt;</span></pre><p id="4e5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我们的点击事件，我们还可以添加鼠标事件修饰符来限制哪些鼠标按钮将触发我们的事件。有三个(每个按钮一个):<code class="fe ma mb mc md b">left</code>、<code class="fe ma mb mc md b">right</code>和<code class="fe ma mb mc md b">middle</code>。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3e23" class="mm ky iq md b gy mn mo l mp mq">&lt;!-- This will only trigger for the left mouse click --&gt;<br/>&lt;div @mousedown.left='handleLeftClick'&gt; Left &lt;/div&gt;</span></pre><h1 id="3ec1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">关键修饰符</h1><p id="616b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们可以监听三个DOM键盘事件</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6b37" class="mm ky iq md b gy mn mo l mp mq">&lt;input<br/>   type='text'<br/>   placeholder='Type something'<br/>   @keypress='handkeKeyPressed'<br/>   @keydown='handleKeyDown'<br/>   @keyup='handleKeyUp'<br/>/&gt;</span></pre><p id="d4ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常，我们希望检测某个键上的这些事件，有两种方法可以做到这一点。</p><ol class=""><li id="bacf" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated"><a class="ae kw" href="https://keycode.info/" rel="noopener ugc nofollow" target="_blank">键码</a></li><li id="94c2" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated">Vue对某些键有别名(<code class="fe ma mb mc md b">enter</code>、<code class="fe ma mb mc md b">tab</code>、<code class="fe ma mb mc md b">delete</code>、<code class="fe ma mb mc md b">esc</code>、<code class="fe ma mb mc md b">space</code>、<code class="fe ma mb mc md b">up</code>、<code class="fe ma mb mc md b">down</code>、<code class="fe ma mb mc md b">left</code>、<code class="fe ma mb mc md b">right</code>)</li></ol><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="9d62" class="mm ky iq md b gy mn mo l mp mq">&lt;!-- Trigger even when enter is released --&gt;<br/>&lt;input<br/>   type='text'<br/>   placeholder='Type something'<br/>   @keyup.enter='handleEnter'<br/>/&gt;<br/><br/>&lt;!-- OR --&gt;<br/>&lt;input<br/>   type='text'<br/>   placeholder='Type something'<br/>   @keyup.13='handleEnter'<br/>/&gt;</span></pre><h1 id="28c4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">系统修改器</h1><p id="3b1d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">对于某些项目，我们可能只想在用户按下修饰键时触发事件。修饰键类似于command或shift。</p><p id="17e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Vue中，有四个系统修改器。</p><ol class=""><li id="d374" class="ms mt iq ka b kb kc kf kg kj mu kn mv kr mw kv mx my mz na bi translated"><code class="fe ma mb mc md b">shift</code></li><li id="b72f" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><code class="fe ma mb mc md b">alt</code></li><li id="c66e" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><code class="fe ma mb mc md b">ctrl</code></li><li id="8d2d" class="ms mt iq ka b kb nb kf nc kj nd kn ne kr nf kv mx my mz na bi translated"><code class="fe ma mb mc md b">meta</code>(MAC上的cmd和windows上的windows键)</li></ol><p id="1d1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这对于在Vue应用程序中创建自定义键盘快捷键等功能非常有用。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="28a9" class="mm ky iq md b gy mn mo l mp mq">&lt;!-- Custom Shortcut that creates a list for Shift + 8 --&gt;<br/>&lt;input<br/>   type='text'<br/>   placeholder='Type something'<br/>   @keyup.shift.56='createList'<br/>/&gt;</span></pre><p id="40f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">浏览Vue文档，还有一个<code class="fe ma mb mc md b">exact</code>修饰符，确保只有当<strong class="ka ir">我们指定的</strong>键被按下而没有其他键被按下时，事件才会被触发。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="5863" class="mm ky iq md b gy mn mo l mp mq">&lt;!-- Custom Shortcut that creates a list for Shift + 8 ONLY --&gt;<br/>&lt;input<br/>   type='text'<br/>   placeholder='Type something'<br/>   @keyup.shift.56.exact='createList'<br/>/&gt;</span></pre><h1 id="d17c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">事件修改器</h1><p id="9361" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">对于所有的DOM事件，我们可以使用一些修改器来改变它们的运行方式。无论是停止传播还是阻止默认动作，Vue都有几个内置的DOM事件修饰符。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3c8f" class="mm ky iq md b gy mn mo l mp mq">&lt;!-- Prevent Default Action --&gt;<br/>&lt;form @submit.prevent&gt;<br/><br/>&lt;!-- Stop Event Propagation --&gt;<br/>&lt;form @submit.stop='submitForm'&gt;<br/><br/>&lt;!-- Easy to Join Modifiers --&gt;<br/>&lt;form @submit.stop.prevent='submitForm'&gt;<br/><br/>&lt;!-- Prevent event from being triggered more than once --&gt;<br/>&lt;div @close.once='handleClose'&gt;</span></pre><h1 id="16a6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用$listeners</h1><p id="f8f5" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这个题目是比较高级的。本质上，每个Vue实例都有一个包含其父级<code class="fe ma mb mc md b">v-on</code>事件监听器的<code class="fe ma mb mc md b">$listeners</code>属性。</p><p id="7e4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们想从子进程调用一个方法事件处理程序而不必创建一个长长的<code class="fe ma mb mc md b">$emit</code>链时，使用这个属性会非常有用</p><p id="7727" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">相反，我们可以简单地将父组件的事件侦听器包含到子组件的元素中。当我们想要<a class="ae kw" href="https://learnvue.co/2019/12/building-reusable-components-in-vuejs-tabs/" rel="noopener ugc nofollow" target="_blank">可重用组件</a>和清晰的组件结构时，这真的很有帮助。</p><p id="0090" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://vuedose.tips/tips/adaptive-components-using-v-bind-and-v-on/" rel="noopener ugc nofollow" target="_blank"> VueDose写了一篇关于这些“自适应组件”的精彩文章</a>，以下是我的主要观点。</p><blockquote class="ng nh ni"><p id="cb5f" class="jy jz nj ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><em class="iq">一种情况是，我们有一个基础组件，比如说</em> <code class="fe ma mb mc md b"><em class="iq">BaseList</em></code> <em class="iq">，你想创建一个类似的组件，在它的基础上添加一些额外的功能，比如</em> <code class="fe ma mb mc md b"><em class="iq">SortableList</em></code> <em class="iq">。我称它们为</em> <strong class="ka ir"> <em class="iq">自适应组件</em> </strong> <em class="iq">(也称代理或包装组件)。构建自适应组件时，通常希望</em> <code class="fe ma mb mc md b"><em class="iq">SortableList</em></code> <em class="iq">与原来的</em> <code class="fe ma mb mc md b"><em class="iq">BaseList</em></code> <em class="iq">保持相同的API，以保持组件的一致性。也就是说从</em> <code class="fe ma mb mc md b"><em class="iq">SortableList</em></code> <em class="iq">开始你需要把所有的道具都传下来，听完</em> <code class="fe ma mb mc md b"><em class="iq">BaseList</em></code> <em class="iq">的所有事件。</em></p><p id="a7a8" class="jy jz nj ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><em class="iq">来自VueDose </em></p></blockquote><p id="2ae6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了监听来自原始基本组件的所有事件，我们可以使用$listeners。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="80e5" class="mm ky iq md b gy mn mo l mp mq">&lt;BaseList<br/>  v-on='$listeners'<br/>/&gt;</span></pre><p id="7049" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们想要更多地控制我们调用的侦听器，我们可以添加对象析构和一个<a class="ae kw" href="https://learnvue.co/2019/12/mastering-computed-properties-in-vuejs/" rel="noopener ugc nofollow" target="_blank">计算属性</a>来挑选我们想要的元素。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="1a2d" class="mm ky iq md b gy mn mo l mp mq">&lt;BaseList<br/>   @click='click'<br/>   v-on='listeners'<br/>/&gt;<br/><br/>// ...<br/><br/>computed: {<br/>  listeners: () =&gt; {<br/>    const { click, ...listeners } = this.$listeners;<br/>    return listeners;<br/>}</span></pre><h1 id="7d10" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="e816" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">希望这篇简短的备忘单能让您更好地了解Vue事件处理以及可能发生的事情。</p><p id="9385" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和往常一样，我建议也查看一下<a class="ae kw" href="https://vuejs.org/v2/guide/events.html" rel="noopener ugc nofollow" target="_blank">官方Vue文档</a>，以便更深入地了解Vue事件处理的特性。</p><p id="ec29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编码快乐！</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="951a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://learnvue.co/vue-3-essentials-cheatsheet/" rel="noopener ugc nofollow" target="_blank">如果你有兴趣了解更多关于Vue 3的知识，请下载我的免费Vue 3备忘单，里面有一些基本知识，比如合成API、Vue 3模板语法和事件处理。</a></p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="6676" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nj">原载于2020年1月30日https://learnvue.co</em><a class="ae kw" href="https://learnvue.co/2020/01/a-vue-event-handling-cheatsheet-the-essentials/" rel="noopener ugc nofollow" target="_blank"><em class="nj"/></a><em class="nj">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Different uses for Template Literals in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中模板文字的不同用法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/different-uses-of-template-literals-in-javascript-50e22a618436?source=collection_archive---------7-----------------------#2020-07-05">https://javascript.plainenglish.io/different-uses-of-template-literals-in-javascript-50e22a618436?source=collection_archive---------7-----------------------#2020-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ecab" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你可以用它们做比你想象的更多的事情</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b424bcba20ddd192d8c6cd0e1e1026f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LeYBjLHr6kmYIoSx-aHdDA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Two monitors with background code</figcaption></figure><p id="6247" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ES2015版ECMAScript规范(ES6)中引入的模板文字(<em class="lr">或模板文字的旧名称:模板字符串</em>)提供了一种在JavaScript中制作字符串的新方法，增加了许多强大的新功能，例如使用占位符在字符串中嵌入表达式，以及更容易地生成多行字符串。</p><p id="152a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">语法很简单，只需使用<em class="lr">反斜杠</em>而不是双引号或单引号:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="208d" class="lx ly iq lt b gy lz ma l mb mc">const literal = `hello!`</span></pre><p id="9909" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它们提供了几个用引号构建的常规字符串所没有的功能，特别是:</p><ul class=""><li id="c6a4" class="md me iq kx b ky kz lb lc le mf li mg lm mh lq mi mj mk ml bi translated">它们提供了一种在字符串中包含变量和表达式的简单方法。</li><li id="16b5" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">模板文字为定义多行字符串提供了很好的语法。</li><li id="11a1" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">他们允许使用模板标签创建<a class="ae mr" href="https://martinfowler.com/books/dsl.html" rel="noopener ugc nofollow" target="_blank">DSL</a>。</li><li id="d8df" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">格式化一个字符串更简单，因为格式保持不变。</li></ul><h2 id="dbae" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">索引:</h2><ul class=""><li id="1477" class="md me iq kx b ky nj lb nk le nl li nm lm nn lq mi mj mk ml bi translated">声明字符串</li><li id="fd11" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">带有插值表达式的多行</li><li id="4441" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">标记模板</li><li id="dca7" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">Shell命令</li><li id="e9d4" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">嵌入式HTML</li><li id="ca3a" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">原始字符串</li><li id="ac67" class="md me iq kx b ky mm lb mn le mo li mp lm mq lq mi mj mk ml bi translated">可定制的正则表达式</li></ul><p id="7c71" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们看一些有用的例子。</p><h2 id="b8af" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">声明字符串</h2><p id="fe99" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">在JavaScript中，您可以使用单引号(“”)编写字符串:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="5cce" class="lx ly iq lt b gy lz ma l mb mc">const single = 'Hello'</span></pre><p id="c8f7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者使用双引号(" "):</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="12ca" class="lx ly iq lt b gy lz ma l mb mc">const double = "Hello"</span></pre><p id="85bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在JavaScript中，单引号和双引号字符串没有明显的区别。</p><p id="e194" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，如果您想包含一个表达式，您可以:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="82cd" class="lx ly iq lt b gy lz ma l mb mc">let name= "Kesk";</span><span id="f359" class="lx ly iq lt b gy nr ma l mb mc">const hello = "Hello" + name + "!";</span><span id="9d49" class="lx ly iq lt b gy nr ma l mb mc">console.log(hello);<br/>//Hello Kesk</span></pre><p id="9246" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是，如果你想格式化一个文本，或者文本中有多个表达式，这就变得复杂了:</p><p id="bf50" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要实现这一点:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="d80a" class="lx ly iq lt b gy lz ma l mb mc">//Hello Kesk!<br/>  //.This is a multiline message<br/>    //that maintains the format</span></pre><p id="1bc9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以做到:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="1368" class="lx ly iq lt b gy lz ma l mb mc">const name = "Kesk"</span><span id="21d0" class="lx ly iq lt b gy nr ma l mb mc">const s1 = "Hello " + name + "! \n"<br/>+   ".This is a multiline message \n"<br/>+      "that maintains the format \n";</span><span id="ce17" class="lx ly iq lt b gy nr ma l mb mc">console.log(s1);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/45d9613c03e06f9e34f783faeea49e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*SuT4oYShwDL14u09a1b7Lg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result in chrome dev tools.</figcaption></figure><p id="3a12" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是如果您使用ES6字符串文字，就更简单了:</p><h2 id="9538" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">带有插值表达式的多行</h2><p id="7e64" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">正如您在本例中看到的，我们在文本中包含了一个变量。此外，它保持了我们给它的格式，结果更清晰、更明显。</p><p id="eeec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们使用反勾号来编写一个字符串文字:“带有表达式的字符串”。要插入变量和表达式，可以使用${…}语法。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="73ec" class="lx ly iq lt b gy lz ma l mb mc">const name = 'Kesk';</span><span id="d709" class="lx ly iq lt b gy nr ma l mb mc">console.log(`Hello ${name}!<br/>  this is a multiline message<br/>    that maintains the format`);</span><span id="5322" class="lx ly iq lt b gy nr ma l mb mc">//Result:<br/>//Hello Kesk!<br/>  //this is a multiline message<br/>    //that maintains the format</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/38886b15880abdeffe541db5b11ccb4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*bukLyng5pKvOveXBmEdpcQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result in chrome dev tools.</figcaption></figure><h2 id="4968" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">其他使用案例:</h2><h2 id="dc95" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">标记模板</h2><p id="2364" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">多亏了模板文字，你可以创建<strong class="kx ir">标记的</strong>模板文字，它是允许嵌入表达式的字符串文字。您可以对它们使用多行字符串和字符串插值功能。</p><p id="6147" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">被标记的模板以一个<strong class="kx ir"> <em class="lr">标记函数</em> </strong>开始，该函数解析模板文字，返回一个动态字符串。“标记函数”的第一个参数是一个包含所有字符串的数组。剩下的参数是表达式。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="a598" class="lx ly iq lt b gy lz ma l mb mc">let name = 'Kesk';<br/>let gender = 'female';<br/>function greetingTag (strings, name, gender) {</span><span id="8f44" class="lx ly iq lt b gy nr ma l mb mc"> //strings is an array.<br/> console.log(strings);</span><span id="43d4" class="lx ly iq lt b gy nr ma l mb mc"> //"Hello"<br/> let str0 = strings[0];<br/> //"you are a beutiful"<br/> let str1 = strings[1];<br/>  <br/> let text = gender === 'female' ? 'girl' : 'man'<br/>  <br/> //Return a string built <br/> //using a template literal<br/>  return `<strong class="lt ir">${str0}<br/>   ${name} ${str0} ${str1}:<br/>     ${text}  </strong><br/> `;<br/>}</span><span id="7bfc" class="lx ly iq lt b gy nr ma l mb mc">let result = greetingTag`Hello ${name} you are a beatiful ${gender}`;</span><span id="ad80" class="lx ly iq lt b gy nr ma l mb mc">console.log(result);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7bb053f0c980df46275bd195219bc082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*GqY4ZJuimPwmNypDwdo0Gw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result of executing greetingTag in chrome dev tools.</figcaption></figure><p id="1b99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以使用ES6模板文字做的其他事情:</p><h2 id="5857" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">Shell命令</h2><p id="c735" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">使用<a class="ae mr" href="http://shjs.tuton.fr/" rel="noopener ugc nofollow" target="_blank"> sh.js </a>和模板文字，您可以编写和执行shell命令。</p><p id="0ebf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">sh.js是运行在<a class="ae mr" href="http://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> node.js </a>上的Unix shell脚本的JavaScript库。</p><p id="8c02" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您需要编写一个JavaScript文件，并用node.js运行它</p><ul class=""><li id="e8c8" class="md me iq kx b ky kz lb lc le mf li mg lm mh lq mi mj mk ml bi translated">npm安装sh</li></ul><p id="f26f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ls.js</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="7afa" class="lx ly iq lt b gy lz ma l mb mc">let sh = require('sh');</span><span id="c971" class="lx ly iq lt b gy nr ma l mb mc">let ls = sh`ls -a`;</span></pre><p id="ed94" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">&gt;节点ls.js</p><h2 id="c82e" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">嵌入式HTML</h2><p id="ecd5" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">使用<a class="ae mr" href="https://lit-html.polymer-project.org/" rel="noopener ugc nofollow" target="_blank"> lit-html </a>和JavaScript模板文字，您可以快速编写html模板。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="113b" class="lx ly iq lt b gy lz ma l mb mc">import {html} from 'lit-html';</span><span id="005c" class="lx ly iq lt b gy nr ma l mb mc">//A lit-html template<br/>//uses the `html`<br/>//template tag:<br/>html`&lt;div&gt;<br/>       &lt;a href="${url}"&gt;${name}&lt;/a&gt;<br/>     &lt;/div&gt;`<br/>...</span></pre><h2 id="23fe" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">原始字符串</h2><p id="aebb" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">template literal的Raw方法允许在输入时访问原始字符串，而不处理转义序列。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="d81a" class="lx ly iq lt b gy lz ma l mb mc">const value= String.raw`this is a multiline message<br/>    that maintains the format.<br/>    Escapes are not interpreted,<br/>\n is not a newline.`;</span><span id="fea3" class="lx ly iq lt b gy nr ma l mb mc">console.log(value);</span><span id="f6e1" class="lx ly iq lt b gy nr ma l mb mc">//this is a multiline message<br/>//    that maintains the format.<br/>//    Escapes are not interpreted,<br/>//\n is not a newline.</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2ca52b3dcd9878eb1f8c7fe17763723f.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*zynhFIOCN5bBaTN0txqsBg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result of executing our <code class="fe nw nx ny lt b">String.raw </code>function in chrome dev tools.</figcaption></figure><h2 id="e42c" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">可定制的正则表达式</h2><p id="0ed8" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">您也可以使用regexp构造函数通过文字模板构建RegExp:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="eba6" class="lx ly iq lt b gy lz ma l mb mc">const regex = new RegExp(String.raw`write pattern as in regex literal without delimiters`)</span></pre><p id="70fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者用标记模板和模板文字构建复杂的RegExp:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="ef25" class="lx ly iq lt b gy lz ma l mb mc">// tagged template function<br/>const rgExpTag = (str0, str1) =&gt; {<br/>  return new<br/>  RegExp(`${str0.raw[0]}${str1}${str0.raw[1]}`, 'gi')<br/>}</span><span id="c0ab" class="lx ly iq lt b gy nr ma l mb mc">const regex = "~!@#$%^&amp;*()_" ;<br/>const rawData= "$100.50$$$$";</span><span id="61db" class="lx ly iq lt b gy nr ma l mb mc">const number =<br/> rawData.replace(rgExpTag`[${regex}]`, '');</span><span id="4ba8" class="lx ly iq lt b gy nr ma l mb mc">console.log(number)<br/>//100.50</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/29aaf14b8cf9c5bf9b9b7ad4e48d1642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*OC8BIRrJuBqmgoFr6O6LIw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result of executing our rgExpTag function in chrome dev tools.</figcaption></figure><h2 id="4df7" class="lx ly iq bd ms mt mu dn mv mw mx dp my le mz na nb li nc nd ne lm nf ng nh ni bi translated">结论</h2><p id="70bc" class="pw-post-body-paragraph kv kw iq kx b ky nj jr la lb nk ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">使用模板文字，处理字符串更加自然，您可以创建字符串并在字符串中插入表达式，而无需任何连接或转义。模板标签也是许多流行库使用的一个有用的特性，但是正如您所看到的，您可以将模板文字用于其他有用的事情。</p><p id="780b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">非常感谢您阅读这篇文章。希望对你有用！保重！</p></div></div>    
</body>
</html>
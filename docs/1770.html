<html>
<head>
<title>One night stand with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带React挂钩的一夜情</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/one-night-stand-with-react-hooks-92999797c3d3?source=collection_archive---------13-----------------------#2020-04-20">https://javascript.plainenglish.io/one-night-stand-with-react-hooks-92999797c3d3?source=collection_archive---------13-----------------------#2020-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2eb32a99e3834313cc3e5083f24ed08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y7KENk29Xw7pzel6kMb2PA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Illustration by <a class="ae kc" href="https://twitter.com/SouravInsights" rel="noopener ugc nofollow" target="_blank">SouravInsights</a></figcaption></figure><h1 id="00b2" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">我新恋情的开始</h1><p id="3daa" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">原谅我这样的标题，但我的创作自由只能想出这个…然而，我是认真的。我是说<strong class="ld ir">胡克斯</strong>就是这样一个<strong class="ld ir">辣妹</strong>让每个人都疯狂<strong class="ld ir">。事实上</strong>，所有的JavaScript卡萨诺瓦都在寻找机会用<strong class="ld ir">钩子</strong>把钩住。😝所以，当世界为React Hooks疯狂的时候，我没花太多时间就发现了React Hooks的热门。到这个时候，我已经开始渴望和<strong class="ld ir">的一夜情了，最后，我走运了。😬现在<strong class="ld ir">找个座位</strong>我给你讲我如何和React钩子做爱的下流故事。🥰</strong></p><p id="1e2b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在Hooks之前，我和<strong class="ld ir">类组件</strong>结婚是为了能够处理状态。我们的关系很好，也许现在还是。但事情变得复杂了，至少对我来说是这样。🥴</p><p id="5b8c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我敢肯定，很多<strong class="ld ir"> JavaScript卡萨诺瓦</strong>也是这样。作为一种人类特质，我们都会瞬间爱上一个闪亮的新事物。但是有了<strong class="ld ir">反应钩</strong>就不一样了，我发誓这不是一次<strong class="ld ir">放纵</strong>。😌好了，够了，现在你能给我解释一下什么是反应钩吗？🙏</p><p id="b173" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">先等等</strong>，在我谈论钩子之前，讨论一下我和常规<strong class="ld ir">类组件的关系不是更有意义吗？</strong>🤔那就让我允许你调查我的前任。👇</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/e69ae465dcae8d99593629127edbe822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwszIVISUx8bX8EaylQ8jQ.png"/></div></div></figure><p id="0c1f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">嗯，她也很漂亮。至少在我看到钩子之前。😌我假设你能清楚地阅读那些解释每一行代码片段的注释行。那么，我们来谈谈<code class="fe mj mk ml mm b">componentDidMount()</code>生命周期法。这是事实上获取数据的方式。人们仍然在使用它，这完全没问题。在React的未来更新中，我们可以用<a class="ae kc" href="https://reactjs.org/docs/concurrent-mode-suspense.html" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir"/></a><strong class="ld ir">更有效地做同样的事情。</strong>但是让我们把它留到以后吧。<strong class="ld ir"> </strong>回到我们的话题。</p><p id="dfa1" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">因此，在方法<code class="fe mj mk ml mm b">componentDidMount,</code> <strong class="ld ir">中，DidMount </strong>表明当调用或运行该方法时，组件已经使用<strong class="ld ir"> render( ) </strong>方法运行，并且在<strong class="ld ir"> setState( ) </strong>的帮助下，当提取的数据存储在本地状态时，组件将再次运行。当它存储在本地状态中时，就可以在render()方法中使用它来显示一些东西或者将它们作为道具传递。</p><h1 id="d903" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">是时候建造一些东西了…</h1><p id="435b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">说得够多了，我们现在将构建一个小应用程序，它从广为人知的<a class="ae kc" href="https://hn.algolia.com/api/v1/search" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">hacker news API</strong></a>获取数据，并在我们的应用程序中呈现它们。太棒了，让我们开始编码吧…</p><p id="9645" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">你可以使用<code class="fe mj mk ml mm b">create-react-app</code>或者使用<strong class="ld ir"> Codesandbox。对于本教程，我将推荐Codesandbox。它易于设置，可以无缝地启动和部署应用程序。点击<a class="ae kc" href="https://codesandbox.io/s/new" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">此处</strong> </a>新建一个<strong class="ld ir"> Codesandbox </strong>项目。</strong></p><blockquote class="mn mo mp"><p id="7647" class="lb lc mq ld b le lz lg lh li ma lk ll mr mb lo lp ms mc ls lt mt md lw lx ly ij bi translated">请确保您键入每一行代码，而不是复制粘贴。重要的是把这些东西打出来，然后自己尝试。好吧，你说到点子上了，我们继续吧…</p></blockquote><p id="685d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在在<code class="fe mj mk ml mm b">App.js</code>文件中用下面的代码替换内容:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/1bd0b1598c9190fc04b50b015071dd43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlAFa0BGPbdrPKcvdLeY8A.png"/></div></div></figure><p id="ede0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">再次提醒你，这里我们使用<a class="ae kc" href="https://hn.algolia.com/api/v1/search?query=react" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">hacker news API</strong></a>来获取流行的React文章。显然，你可以使用你自己的API或者任何你自己选择的API。还有另一个由<a class="ae kc" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">JSONPlaceholder</strong></a>提供的用于测试目的的API。因此，在这里，一旦获取了数据，我们就使用<code class="fe mj mk ml mm b">this.setState()</code>方法将它存储在本地状态中。正如我前面解释的那样，一旦它存储在本地状态中，render()方法就会使用它。</p><p id="c239" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">酷，现在让我们写我们的渲染方法，我们将使用<strong class="ld ir"> map </strong>函数显示获取的数据。简单地说，它让我们用修改后的数据将一个数组转换成另一个数组。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/0434e8e7a402b61e37498b64f0063cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GBlSMVJlKVEblz6QZmAhxg.png"/></div></div></figure><p id="2218" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在这里，我们的应用程序组件使用<code class="fe mj mk ml mm b">map</code>函数创建一个新的数组，该数组具有相同数量的元素，其中每个元素都是调用我们提供的函数的结果。</p><p id="239b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们的代码中有一些小东西，比如:<code class="fe mj mk ml mm b">hit</code>、<code class="fe mj mk ml mm b">objectID</code>、<code class="fe mj mk ml mm b">url</code>、<code class="fe mj mk ml mm b">title</code>，如果你想知道这一切到底是从哪里来的，那么请在你的浏览器中打开<a class="ae kc" href="https://hn.algolia.com/api/v1/search?query=react" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">hacker news API</strong></a>或者<a class="ae kc" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir"> Postman </strong> </a>。正如您在JSON响应中看到的，<code class="fe mj mk ml mm b"><strong class="ld ir">hits</strong></code> <strong class="ld ir"> </strong>是来自HN API的一个数据数组，它有下面的键对:<code class="fe mj mk ml mm b">objectID</code>、<code class="fe mj mk ml mm b">url</code>和<code class="fe mj mk ml mm b">title</code>。</p><p id="8dd5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">还有一件事你可能已经注意到了，我在上面的例子中使用了项目的数组索引作为<code class="fe mj mk ml mm b">key</code>道具。React依靠<code class="fe mj mk ml mm b">key</code>来识别列表上的项目。记住React使用一个虚拟DOM，它只重画自上次渲染以来发生变化的组件。这就是了。现在一切都应该正常了。</p><h2 id="0d0d" class="mw ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated"><a class="ae kc" href="https://codesandbox.io/s/data-fetching-using-conventional-class-component-gf5iw" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">在Codesandbox上试试吧。</strong>T24】</a></h2><h1 id="98cc" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">见见我的新女友，React Hooks女士:</h1><p id="852c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在是时候向你介绍我的新女友了。我知道你们都在等待这一刻。😏</p><p id="c1cc" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">很多时候，当我们构建React应用程序时，我们看到自己在两个或更多不同的组件中编写几乎完全相同的代码。理想情况下，我们在这种情况下可以做的是将递归逻辑提取到一段<strong class="ld ir">可重用代码(hook) </strong>中，并在需要的地方重用它。</p><p id="fe2c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这就是定制挂钩背后的整个想法。所以，事不宜迟，<strong class="ld ir">让我们构建一个自定义钩子</strong>来从广为人知的<a class="ae kc" href="https://hn.algolia.com/api" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">黑客新闻API </strong> </a>中获取数据，从壁橱中获取流行的React文章。</p><h1 id="f48b" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">好吧，让我们用React钩子重新发明轮子:</h1><p id="9162" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">正如你已经知道的，我们将在一个类组件中使用React钩子，以一种更可持续的方式实现我们之前用<code class="fe mj mk ml mm b">componentDidMount()</code>实现的相同特性。所以，让我们把手弄脏吧。😬</p><p id="5518" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">点击<a class="ae kc" href="https://codesandbox.io/s/new" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">此处</strong> </a>创建一个新的Codesandbox项目。</p><p id="9f17" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">完成后，用下面的代码替换您的<code class="fe mj mk ml mm b">app.js</code>文件。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/46b6c6c58e45852c67a3533f6ee6c380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAZi39bfIZxN-6z1NfX-Kw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Generate beautiful images of your source code using <a class="ae kc" href="https://carbon.now.sh/" rel="noopener ugc nofollow" target="_blank"><strong class="bd nj">Carbon</strong></a>.</figcaption></figure><p id="f43a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果您已经编写了代码片段，它可能会显示一些错误。暂时不要惊慌。</p><p id="df1b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">因此，我们在这里写了一个功能组件，它将显示黑客新闻中的热门反应文章列表。我们正在使用一个名为<strong class="ld ir"> useState </strong>的钩子，负责管理我们要为应用组件获取的数据的<strong class="ld ir">本地状态</strong>。<strong class="ld ir">参照下图</strong>了解<strong class="ld ir">使用状态</strong>挂钩。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/ab23b9327494ff1eae7fda6aa65d53bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXlcy1eh-7AfpK-C2umjDA.jpeg"/></div></div></figure><p id="f196" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在我们的例子中，初始状态是<strong class="ld ir">命中</strong>的空列表，这是一个表示我们的数据的对象。</p><p id="5349" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们将使用<a class="ae kc" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>来获取数据，但是您可以使用另一个数据获取库或浏览器的本机<strong class="ld ir">获取API </strong>。在Codesandbox中添加axios作为依赖项，或者在CLI中键入<code class="fe mj mk ml mm b">npm install axios</code>(如果您正在本地系统中这样做)。</p><h2 id="d9e2" class="mw ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated">useEffect Hook的魔力:</h2><p id="399d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们现在将使用另一个名为<strong class="ld ir"> useEffect </strong>的内置钩子。它允许您在功能组件中执行副作用。副作用可能意味着从更新文档标题到发出API请求的任何事情。在“反应”渲染树之外发生的任何事情都是组件的副作用。</p><p id="2856" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">把它想象成一个可以直接在<strong class="ld ir">功能组件</strong>中处理<strong class="ld ir">生命周期事件</strong>的功能。这是最棒的部分，useEffect取代了三种不同的API方法(<code class="fe mj mk ml mm b">componentDidMount</code>、<code class="fe mj mk ml mm b">componentDidUpdate</code>和<code class="fe mj mk ml mm b">componentWillUnmount</code>)。所有功能都是一个！很疯狂，不是吗？让我们通过在我们的例子中实际使用它来看看魔法。</p><blockquote class="mn mo mp"><p id="d854" class="lb lc mq ld b le lz lg lh li ma lk ll mr mb lo lp ms mc ls lt mt md lw lx ly ij bi translated">此外，您还可以通过<strong class="ld ir"> </strong> <a class="nl nm ep" href="https://medium.com/u/a3a8af6addc1?source=post_page-----92999797c3d3--------------------------------" rel="noopener" target="_blank"> <strong class="ld ir">丹·阿布拉莫夫</strong> </a>阅读<a class="ae kc" href="https://overreacted.io/a-complete-guide-to-useeffect/" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">使用效果完整指南</strong> </a> <strong class="ld ir"> </strong>以深入了解使用效果。</p></blockquote><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/a7e05eecc0452b5c0f687bb8bacd4597.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5nAeS5lrOxoMro2s4oM5w.png"/></div></div></figure><p id="6a98" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在，让我们将这个功能添加到我们的应用程序组件中，一切都将正常工作。请注意，我们在这里使用<code class="fe mj mk ml mm b">async</code>、<code class="fe mj mk ml mm b">await</code>来获取数据。在上面的例子中，我们使用了处理JavaScript承诺的常见方式，即使用它们的<code class="fe mj mk ml mm b">then()</code>块。JavaScript中的下一代异步请求呢？这就是为什么我将这个例子重构为使用async/await。</p><p id="61d8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">好吧，所以上面的代码感觉很熟悉，看起来像我的前女友，但穿着不同的西装。😜是的，我说的是常规类组件中的<code class="fe mj mk ml mm b">componentDidMount</code>。这并不完全相似，但是是的，它现在更加<strong class="ld ir">易读</strong>，更加<strong class="ld ir">清晰</strong>，非常<strong class="ld ir">简洁</strong>和<strong class="ld ir">直截了当</strong>。我告诉过你，React Hook是个<strong class="ld ir">辣妹</strong>。👌</p><p id="703f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">但是等等，先别激动。上面的代码有个<strong class="ld ir"> bug </strong>！<em class="mq">美丽是有代价的</em>。😏现在在浏览器的另一页打开预览，然后转到网络选项卡。如你所见，它在获取数据的<strong class="ld ir">无限循环</strong>中。哪里出了问题？🤔在一个类组件中，<code class="fe mj mk ml mm b">componentDidMount</code>在组件挂载后被调用。它只发射一次。但另一方面，默认情况下，<code class="fe mj mk ml mm b">useEffect</code>内部的效果会应用于每一次渲染。它让我们传递一个可选参数——一个<code class="fe mj mk ml mm b">dependencies</code>的<strong class="ld ir">数组</strong>,通知React何时应该重新应用效果。如果所有依赖项都没有改变，则不会重新应用该效果。所以，让我们像这样在末尾添加一个<strong class="ld ir">空数组</strong></p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/33c1f8d114f0717f6fa726eabc54d2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PV6j8wh5ZlI31Wv4waeWHA.png"/></div></div></figure><p id="4a1f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">厉害！现在一切都正常了。检查你的代码是否有不一致的地方，并与我的code sandbox<a class="ae kc" href="https://codesandbox.io/s/a-simple-custom-hook-for-data-fetching-non-encapsulated" rel="noopener ugc nofollow" target="_blank"><strong class="ld ir">Demo</strong></a>进行比较。让我们提取我们的定制钩子，这样我们可以在其他地方重用组件逻辑。</p><h1 id="1bbc" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">封装我们的定制钩子:</h1><p id="7096" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">创建另一个名为<strong class="ld ir"><em class="mq">use fetch . js</em></strong><em class="mq">的文件，用下面的代码替换。</em></p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/59e5af8a64951c49f8efaf2aac0f47fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tfgvpdUrl7BxRtpDZulQ_w.png"/></div></div></figure><p id="3761" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">相当直接。只是不要忘记返回数据对象。否则，您会看到类似这样的错误:<em class="mq">无法读取未定义的属性“hits”。这很明显，因为我们的函数应该总是返回一些东西。</em></p><p id="ff6a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在转到<strong class="ld ir"> <em class="mq"> App.js </em> </strong>用这个替换它:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/8542bc2b40f360d909d6e573f56e2b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M6QpUmiHb6gGAcR42lWGPQ.png"/></div></div></figure><h2 id="eb38" class="mw ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated"><a class="ae kc" href="https://codesandbox.io/s/a-simple-custom-usefetch-hook-dc0tb?file=/src/App.js:215-317" rel="noopener ugc nofollow" target="_blank">在Codesandbox上尝试。</a></h2><p id="8b75" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated"><strong class="ld ir">祝贺你！！🥳 </strong>很显然，你刚刚爱上了我的新女朋友，<strong class="ld ir">胡克小姐反应过来。😜</strong>同样，<strong class="ld ir"> </strong>祝贺您创建第一个<strong class="ld ir"> </strong>自定义反作用挂钩<strong class="ld ir">。👏</strong></p><p id="2e76" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">但这并不是故事的结尾。首先，我只是想有一个一夜情，然后忘记。但由于这种情况在生活中很少发生，我们最终总是会产生某种依恋。这就是我的遭遇。我现在爱上了反作用钩子。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="adbd" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">感谢你到目前为止阅读这篇文章。如果您有任何反馈，请在下面发表评论。</p><p id="5dd7" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">你可以在<a class="ae kc" href="https://medium.com/@souravinsights" rel="noopener">中</a>和<a class="ae kc" href="https://twitter.com/SouravInsights" rel="noopener ugc nofollow" target="_blank">推特</a>上跟着我。如果你有任何疑问，或者需要任何类型的指导，或者只是想随意谈论你的生活，请在推特上与我联系。我很乐意帮忙。</p><p id="d644" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我目前正在寻找一些自由职业的机会。我对开发任何类型的软件即服务产品感兴趣，也很想听听你的想法。请在<a class="ae kc" href="mailto:howdysourav@gmail.com" rel="noopener ugc nofollow" target="_blank">howdysourav@gmail.com</a>与我联系🔥🔥🔥</p><p id="9f27" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">到那时<br/>快乐编码！</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h2 id="0b5c" class="mw ke iq bd kf mx my dn kj mz na dp kn lm nb nc kr lq nd ne kv lu nf ng kz nh bi translated"><strong class="ak">简单明了的JavaScript</strong></h2><p id="ec3d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ld ir">订阅我们的YouTube频道</strong> </a> <strong class="ld ir">获取更多类似内容吧！</strong></p></div></div>    
</body>
</html>
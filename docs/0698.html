<html>
<head>
<title>Webpack and Babel setup for React from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头开始React的Webpack和Babel设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/webpack-and-babel-setup-with-react-from-scratch-bef0fe2ae3e7?source=collection_archive---------0-----------------------#2019-11-28">https://javascript.plainenglish.io/webpack-and-babel-setup-with-react-from-scratch-bef0fe2ae3e7?source=collection_archive---------0-----------------------#2019-11-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="692f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">不使用create-react-app运行React应用程序</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/51a179fe9153f3b2ee4275d6962eabd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UvbYdc4NyT7fH7Qv"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@sapegin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Artem Sapegin</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="89f7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">React</code>是世界上最受欢迎的javascript库，用于创建前端应用程序。React出名是因为以下几个原因。</p><ul class=""><li id="0d7a" class="lt lu in kv b kw kx kz la lc lv lg lw lk lx lo ly lz ma mb bi translated">React在语法方面的简单性使得对于具有良好HTML工作知识的开发人员来说，学习起来更加容易。这是React与Angular和Vue比较中React得分领先的主要因素之一。</li><li id="c251" class="lt lu in kv b kw mc kz md lc me lg mf lk mg lo ly lz ma mb bi translated">React具有很高的灵活性和响应能力。</li><li id="25cd" class="lt lu in kv b kw mc kz md lc me lg mf lk mg lo ly lz ma mb bi translated">React使用虚拟DOM，这允许快速更改DOM，并使应用程序更快。</li><li id="14cf" class="lt lu in kv b kw mc kz md lc me lg mf lk mg lo ly lz ma mb bi translated">React是一个100%开源的库，由于世界各地开发人员的贡献，它每天都有许多改进和更新。</li></ul><p id="bba3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">创建react应用程序的简单方法是使用脸书团队开发的<strong class="kv io"> create-react-app </strong>工具。这是一个很好的开始工作的反应，但它隐藏了很多细节</p><p id="75c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.引擎盖下发生了什么</p><p id="45c5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.使用最新功能需要什么配置</p><p id="8f44" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.从ES6到ES5的转换是如何发生的</p><p id="69ad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了理解所有这些，在本文中我们将设置<code class="fe lp lq lr ls b">webpack + Babel</code>与<code class="fe lp lq lr ls b">React</code>一起工作。</p><p id="18da" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以不浪费太多时间，让我们从配置开始。</p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="714f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.创建一个名为<code class="fe lp lq lr ls b">react_starter</code>的新文件夹(您可以随意命名)。</p><p id="13dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.在终端中运行以下命令，创建一个<code class="fe lp lq lr ls b">package.json</code>文件</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="0186" class="ms mt in ls b gy mu mv l mw mx">npm init -y</span></pre><p id="2a62" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.通过运行以下命令安装babel和使用babel所需的插件</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="2728" class="ms mt in ls b gy mu mv l mw mx">npm install @babel/core@7.7.4 @babel/preset-env@7.7.4 @babel/preset-react@7.7.4</span></pre><p id="5b3e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们了解一下这些包是做什么的。<br/> <em class="my"> @babel/core —提供基本的核心babel配置</em></p><p id="cd06" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="my"> @babel/preset-env —它允许使用最新的ES6/ES7/ES8功能</em></p><p id="d916" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="my">@ babel/preset-react——它允许使用JSX的react语法</em></p><p id="c33b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.创建一个名为<code class="fe lp lq lr ls b">public</code>的新文件夹，并在其中创建一个包含以下内容的新文件<code class="fe lp lq lr ls b">index.html</code>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">index.html</figcaption></figure><p id="7ff2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">5.创建一个新文件夹<code class="fe lp lq lr ls b">src</code>和一个名为<code class="fe lp lq lr ls b">app.js</code>的新文件</p><p id="240d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">6.在<code class="fe lp lq lr ls b">react_starter</code>目录下创建一个名为<code class="fe lp lq lr ls b">webpack.config.js</code>的新文件，并在其中添加以下内容</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">webpack.config.js</figcaption></figure><p id="9c16" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们告诉<code class="fe lp lq lr ls b">webpack</code>，应用程序的入口点是什么，并将生成的输出文件<code class="fe lp lq lr ls b">bundle.js</code>放在<code class="fe lp lq lr ls b">public</code>目录中。</p><p id="5593" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是你的文件夹结构现在的样子</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/8e73ca10ac40f3c94febff2aa5a04458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*VLF2Oew8vNIhP-6lMzX2Hg.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Folder Structure</figcaption></figure><p id="5bfa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">7.现在安装<code class="fe lp lq lr ls b">webpack</code>、<code class="fe lp lq lr ls b">webpack-cli</code>和<code class="fe lp lq lr ls b">webpack-dev-server</code>(用于服务<code class="fe lp lq lr ls b">public</code>目录，并在我们对代码进行任何更改时在浏览器中重新加载更改)</p><p id="ae46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">执行以下命令来安装它</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="c16e" class="ms mt in ls b gy mu mv l mw mx">npm install webpack@4.41.2 webpack-cli@3.3.10 webpack-dev-server@3.9.0</span></pre><p id="07a0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">8.现在通知<code class="fe lp lq lr ls b">webpack-dev-server</code>从<code class="fe lp lq lr ls b">public</code>目录加载文件，在<code class="fe lp lq lr ls b">webpack.config.js</code>中添加以下代码</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="7c25" class="ms mt in ls b gy mu mv l mw mx">devServer: {<br/> contentBase: path.join(__dirname, 'public')<br/>}</span></pre><p id="03ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，您的<code class="fe lp lq lr ls b">webpack.config.js</code>文件将如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/1e5dd9d619c46d9348638f33cfb03e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*brG6mMKWMQBWBGTJTATpGQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">webpack.config.js</figcaption></figure><p id="0500" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">9.现在要安装<code class="fe lp lq lr ls b">react</code>、<code class="fe lp lq lr ls b">react-dom</code>和<code class="fe lp lq lr ls b">babel-loader</code>，在终端中运行以下命令</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="167e" class="ms mt in ls b gy mu mv l mw mx">npm install react@16.12.0 react-dom@16.12.0 babel-loader@8.0.6</span></pre><p id="f794" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">10.现在我们将设置<code class="fe lp lq lr ls b">babel-loader</code>，它将把你的ES6和React代码转换成ES5。<br/>在<code class="fe lp lq lr ls b">output</code>属性后的<code class="fe lp lq lr ls b">webpack.config.js</code>中添加以下代码。</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="e022" class="ms mt in ls b gy mu mv l mw mx">module: {<br/> rules: [{<br/>  loader: 'babel-loader',<br/>  test: /\.js$/,<br/>  exclude: /node_modules/<br/> }]<br/>}</span></pre><p id="e488" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们告诉<code class="fe lp lq lr ls b">babel-loader</code>只寻找<code class="fe lp lq lr ls b">.js</code>文件来转换成ES5代码，但是从<code class="fe lp lq lr ls b">node_modules</code>目录中排除<code class="fe lp lq lr ls b">.js</code>文件。</p><p id="1462" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，您的<code class="fe lp lq lr ls b">webpack.config.js</code>文件将如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/ef8804da629749785e78731a6157395a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mmlb0FFruQ6cUBJKKchU8g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">webpack.config.js</figcaption></figure><p id="1a60" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">11.现在创建一个名为<code class="fe lp lq lr ls b">.babelrc</code>的新文件(注意文件名以点开始)，并在其中添加以下内容</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">.babelrc</figcaption></figure><p id="23dd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">该文件将告诉<code class="fe lp lq lr ls b">babel-loader</code>在将ES6转换为ES5时使用<code class="fe lp lq lr ls b">env</code>和<code class="fe lp lq lr ls b">react</code>预设(只是插件)</p><p id="71b9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">瞧，我们现在都完成了设置。</p><p id="fdc8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们编写一些React代码来检查应用程序。</p><p id="8250" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在<code class="fe lp lq lr ls b">src</code>目录下的<code class="fe lp lq lr ls b">app.js</code>文件中增加以下内容</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">app.js</figcaption></figure><p id="a5db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在要运行这个应用程序，我们需要做两处修改</p><p id="534c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">a)将由<code class="fe lp lq lr ls b">webpack</code>生成的<code class="fe lp lq lr ls b">bundle.js</code>文件包含在<code class="fe lp lq lr ls b">index.html</code>中</p><p id="4aa4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在div标签后的<code class="fe lp lq lr ls b">index.html</code>中添加下面一行</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="c88c" class="ms mt in ls b gy mu mv l mw mx">&lt;script src="bundle.js"&gt;&lt;/script&gt;</span></pre><p id="cbca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以最终的<code class="fe lp lq lr ls b">index.html</code>会是这样的</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">index.html</figcaption></figure><p id="2383" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">b)将以下两个脚本添加到<code class="fe lp lq lr ls b">package.json</code>(替换旧脚本的条目)</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="72c4" class="ms mt in ls b gy mu mv l mw mx">"scripts": {<br/> "build": "webpack",<br/> "start": "webpack-dev-server --watch"<br/>}</span></pre><p id="380d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以<code class="fe lp lq lr ls b">package.json</code>现在会是这个样子</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="b387" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在通知<code class="fe lp lq lr ls b">webpack</code>，它应该以开发模式(默认为生产模式)运行，以加快构建过程，在<code class="fe lp lq lr ls b">webpack.config.js</code>中添加以下行</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="48a6" class="ms mt in ls b gy mu mv l mw mx">mode: 'development'</span></pre><p id="3d43" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，最终的<code class="fe lp lq lr ls b">webpack.config.js</code>文件将是这样的</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1514" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要运行该应用程序，请从终端执行以下命令</p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="6439" class="ms mt in ls b gy mu mv l mw mx">npm start</span></pre><p id="9de1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在导航到<a class="ae ks" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>，您将看到来自<code class="fe lp lq lr ls b">app.js</code>的内容，如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/77848045dc52b1f1a132e6fa9485f47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BJPbm1n9qzbgtGJ8tSkIA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Application</figcaption></figure><p id="3154" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">恭喜你！你做到了</p><p id="2109" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，尝试在<code class="fe lp lq lr ls b">app.js</code>中做一些改变，比如将<code class="fe lp lq lr ls b">"Welcome to REACT!" </code>改为<code class="fe lp lq lr ls b">"Welcome to REACT!!"</code>，然后保存。</p><p id="94fc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在你会看到<code class="fe lp lq lr ls b">webpack-dev-server</code>会自动重启你的应用程序，你会看到浏览器中反映的变化。</p><p id="7a51" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">注意:</strong> <code class="fe lp lq lr ls b">webpack-dev-server</code>将直接为<code class="fe lp lq lr ls b">bundle.js</code>服务，不会在公共文件夹内创建本地文件来加速页面加载。</p><p id="3bfa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果需要，您可以通过执行以下命令手动创建<code class="fe lp lq lr ls b">bundle.js</code></p><pre class="kd ke kf kg gt mo ls mp mq aw mr bi"><span id="7bd2" class="ms mt in ls b gy mu mv l mw mx">npm run build</span></pre><p id="7f40" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请注意，我们之前在<code class="fe lp lq lr ls b">package.json</code>中添加的构建脚本</p><p id="7719" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在这里找到这个应用程序的完整源代码</p><p id="ebf6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天到此为止。我希望你喜欢这篇文章。</p><p id="fb46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">别忘了直接在你的收件箱</strong> <a class="ae ks" href="https://yogeshchavan.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">这里</strong> </a> <strong class="kv io">订阅我的每周时事通讯，里面有惊人的技巧、诀窍和文章。</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Add a Gauge Chart to Your Vue.js App with VGauge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用VGauge向您的Vue.js应用程序添加仪表图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-a-gauge-chart-to-your-vue-js-app-with-vgauge-802c788254e6?source=collection_archive---------4-----------------------#2020-01-02">https://javascript.plainenglish.io/add-a-gauge-chart-to-your-vue-js-app-with-vgauge-802c788254e6?source=collection_archive---------4-----------------------#2020-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2d9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果某样东西接近最大值或最小值，量规图很方便显示。这对于可视化任何具有最大值或最小值的量是很方便的。制作自己的将是一个真正的痛苦，因为我们必须在画布上绘制形状、线条和文本来创建标尺。幸运的是，开发者创造了预制的解决方案供我们使用。</p><p id="5274" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于Vue.js应用程序，我们可以使用位于<a class="ae kl" href="https://github.com/amroessam/vgauge" rel="noopener ugc nofollow" target="_blank">https://github.com/amroessam/vgauge</a>的VGauge库，在我们自己的应用程序上放置量表。在本文中，我们将创建一个存钱罐应用程序，让用户设定他们的储蓄目标，并添加他们在给定日期的储蓄金额。我们将显示量表，让用户知道他们是否达到了节约目标。首先，我们将通过运行以下命令来运行Vue CLI:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="eac9" class="kv kw iq kr b gy kx ky l kz la">npx @vue/cli create piggy-bank</span></pre><p id="d08d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在向导中，我们选择“手动选择功能”，并选择Vue路由器、Vuex和Babel。</p><p id="ebb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们安装一些软件包。我们将使用Axios进行HTTP请求，使用BootstrapVue进行样式化，使用VGauge显示与目标相关的节省量，使用VueFilterDateFormat格式化模板中的日期，使用Vee-Validate进行表单验证。要安装它们，我们运行:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="1778" class="kv kw iq kr b gy kx ky l kz la">npm i axios bootstrap-vue vgauge vee-validate vue-filter-date-format</span></pre><p id="30ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以构建我们的应用程序了。在<code class="fe lb lc ld kr b">components</code>文件夹中创建一个名为<code class="fe lb lc ld kr b">GoalForm.vue</code>的文件，并添加:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="909d" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kl" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group label="Savings Amount Goal"&gt;<br/>        &lt;ValidationProvider name="amount" rules="required|min_value:0" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.amount"<br/>            required<br/>            placeholder="Savings Amount Goal"<br/>            name="amount"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="455a" class="kv kw iq kr b gy le ky l kz la">&lt;b-button type="submit" variant="primary"&gt;Save&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="3e05" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="c3f0" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  name: "SavingForm",<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  computed: {<br/>    goal() {<br/>      return this.$store.state.goal;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getSavingsGoal();<br/>  },<br/>  methods: {<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    },</span><span id="7a8f" class="kv kw iq kr b gy le ky l kz la">async getSavingsGoal() {<br/>      const { data } = await this.getGoal();<br/>      this.$store.commit("setGoal", data);<br/>    },</span><span id="8350" class="kv kw iq kr b gy le ky l kz la">async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }<br/>      await this.setGoal(this.form);</span><span id="9d7a" class="kv kw iq kr b gy le ky l kz la">const { data } = await this.getSavings();<br/>      this.$store.commit("setGoal", data);<br/>      this.$emit("saved");<br/>    }<br/>  },<br/>  watch: {<br/>    goal: {<br/>      handler(val) {<br/>        this.form = val || {};<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="171c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件是让用户输入其储蓄目标的表单。我们有一个<code class="fe lb lc ld kr b">getSavingsGoal</code>功能，从后端获取用户的储蓄。它在<code class="fe lb lc ld kr b">beforeMount</code>钩子中被调用，并在<code class="fe lb lc ld kr b">onSubmit</code>函数的末尾被调用，以获取最新的值。</p><p id="c6a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">onSubmit </code>函数中，我们通过调用<code class="fe lb lc ld kr b">this.$refs.observer.validate();</code>来使用Vee-Validate验证我们的表单，以确保输入了<code class="fe lb lc ld kr b">amount </code>，并且在保存之前它为0或更高。我们使用Vee-Validate来验证表单字段。<code class="fe lb lc ld kr b">ValidationObserver</code>组件用于验证整个表单，而<code class="fe lb lc ld kr b">ValidationProvider</code>组件用于验证它所包装的表单字段。验证规则由<code class="fe lb lc ld kr b">amount </code>字段的<code class="fe lb lc ld kr b">rule</code>属性指定。<code class="fe lb lc ld kr b">state</code>道具用于设置验证状态，当<code class="fe lb lc ld kr b">errors</code>长度为0时显示绿色，否则显示红色。错误信息显示在<code class="fe lb lc ld kr b">b-form-invalid-feedback</code>组件中。此页面只有国家下拉列表。</p><p id="aab0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在同一文件夹中创建一个<code class="fe lb lc ld kr b">SavingForm.vue</code>文件，并添加:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="f7f3" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kl" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group label="Date"&gt;<br/>        &lt;ValidationProvider name="date" rules="required|date" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.date"<br/>            required<br/>            placeholder="Date"<br/>            name="date"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="9c78" class="kv kw iq kr b gy le ky l kz la">&lt;b-form-group label="Amount Saved"&gt;<br/>        &lt;ValidationProvider name="amount" rules="required|min_value:0" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.amount"<br/>            required<br/>            placeholder="Amount Saved"<br/>            name="amount"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="4e91" class="kv kw iq kr b gy le ky l kz la">&lt;b-button type="submit" variant="primary"&gt;Save&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="8c02" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import * as moment from "moment";</span><span id="367f" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  name: "SavingForm",<br/>  props: {<br/>    saving: Object,<br/>    edit: Boolean<br/>  },<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  computed: {<br/>    savings() {<br/>      return this.$store.state.savings;<br/>    }<br/>  },<br/>  methods: {<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    },</span><span id="d1fb" class="kv kw iq kr b gy le ky l kz la">    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }<br/>      const offDate = new Date(this.form.date);<br/>      const correctedDate = new Date(<br/>        offDate.getTime() + Math.abs(offDate.getTimezoneOffset() * 60000)<br/>      );</span><span id="c6e0" class="kv kw iq kr b gy le ky l kz la">      const params = {<br/>        ...this.form,<br/>        date: correctedDate<br/>      };</span><span id="0821" class="kv kw iq kr b gy le ky l kz la">      if (!this.edit) {<br/>        await this.addSaving(params);<br/>      } else {<br/>        await this.editSaving(params);<br/>      }<br/>      const { data } = await this.getSavings();<br/>      this.$store.commit("setSavings", data);<br/>      this.$emit("saved");<br/>    }<br/>  },<br/>  watch: {<br/>    saving: {<br/>      handler(val) {<br/>        this.form = JSON.parse(JSON.stringify(val || {}));<br/>        if (this.form.date) {<br/>          this.form.date = moment(this.form.date).format("YYYY-MM-DD");<br/>        }<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="aa69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件是让用户输入其储蓄数据的表单。我们有一个带有<code class="fe lb lc ld kr b">date </code>和<code class="fe lb lc ld kr b">amount </code>字段的表单，让用户保存他们输入日期的储蓄金额。</p><p id="7447" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">onSubmit </code>函数中，我们通过调用<code class="fe lb lc ld kr b">this.$refs.observer.validate();</code>来使用Vee-Validate验证我们的表单，以确保在保存之前输入了<code class="fe lb lc ld kr b">date </code>和<code class="fe lb lc ld kr b">amount </code>，并且日期为YYYY-MM-DD格式，金额为0或更大。我们使用Vee-Validate来验证表单字段。<code class="fe lb lc ld kr b">ValidationObserver</code>组件用于验证整个表单，而<code class="fe lb lc ld kr b">ValidationProvider</code>组件用于验证它所包装的表单字段。验证规则由表单字段的<code class="fe lb lc ld kr b">rule</code>属性指定。<code class="fe lb lc ld kr b">date</code>是我们将添加的自定义验证规则。<code class="fe lb lc ld kr b">state</code>道具用于设置验证状态，当<code class="fe lb lc ld kr b">errors</code>长度为0时显示绿色，否则显示红色。错误信息显示在<code class="fe lb lc ld kr b">b-form-invalid-feedback</code>组件中。此页面只有国家下拉列表。</p><p id="d255" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们在<code class="fe lb lc ld kr b">src</code>文件夹中创建一个<code class="fe lb lc ld kr b">mixins</code>文件夹，并创建一个名为<code class="fe lb lc ld kr b">requestsMixin.js</code>文件的文件。在那里，我们添加:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="0b62" class="kv kw iq kr b gy kx ky l kz la">const APIURL = "<a class="ae kl" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="813f" class="kv kw iq kr b gy le ky l kz la">export const requestsMixin = {<br/>  methods: {<br/>    getSavings() {<br/>      return axios.get(`${APIURL}/savings`);<br/>    },</span><span id="e4e0" class="kv kw iq kr b gy le ky l kz la">    addSaving(data) {<br/>      return axios.post(`${APIURL}/savings`, data);<br/>    },</span><span id="3cb3" class="kv kw iq kr b gy le ky l kz la">    editSaving(data) {<br/>      return axios.put(`${APIURL}/savings/${data.id}`, data);<br/>    },</span><span id="c46d" class="kv kw iq kr b gy le ky l kz la">    deleteSaving(id) {<br/>      return axios.delete(`${APIURL}/savings/${id}`);<br/>    },</span><span id="52a0" class="kv kw iq kr b gy le ky l kz la">    getGoal() {<br/>      return axios.get(`${APIURL}/goal`);<br/>    },</span><span id="c323" class="kv kw iq kr b gy le ky l kz la">    setGoal(data) {<br/>      return axios.post(`${APIURL}/goal`, data);<br/>    }<br/>  }<br/>};</span></pre><p id="d3e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是获取并保存我们的储蓄和储蓄目标数据到后端的功能。</p><p id="2766" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe lb lc ld kr b">views</code>文件夹中，我们将<code class="fe lb lc ld kr b">Home.vue</code>文件中的代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="053b" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Piggy Bank App&lt;/h1&gt;</span><span id="2b6c" class="kv kw iq kr b gy le ky l kz la">    &lt;b-button-toolbar class="button-toolbar"&gt;<br/>      &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()" variant="primary"&gt;Add Money Saved&lt;/b-button&gt;<br/>      &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openGoalModal()" variant="primary"&gt;Set Saving Goal&lt;/b-button&gt;<br/>    &lt;/b-button-toolbar&gt;</span><span id="20b6" class="kv kw iq kr b gy le ky l kz la">    &lt;div class="text-center" v-if="goal &amp;&amp; totalSavings"&gt;<br/>      &lt;v-gauge :maxValue="+goal" :minValue="0" :value="+totalSavings" unit="USD" top /&gt;<br/>      &lt;p&gt;Savings goal is {{+goal}} USD.&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="3b20" class="kv kw iq kr b gy le ky l kz la">    &lt;b-modal id="add-modal" title="Add Money Saved" hide-footer&gt;<br/>      &lt;SavingForm <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false" /&gt;<br/>    &lt;/b-modal&gt;</span><span id="e63c" class="kv kw iq kr b gy le ky l kz la">    &lt;b-modal id="edit-modal" title="Edit Money Saved" hide-footer&gt;<br/>      &lt;SavingForm<br/>        <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()"<br/>        <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()"<br/>        :edit="true"<br/>        :saving="selectedSaving"<br/>      /&gt;<br/>    &lt;/b-modal&gt;</span><span id="c448" class="kv kw iq kr b gy le ky l kz la">    &lt;b-modal id="goal-modal" title="Set Saving Goal" hide-footer&gt;<br/>      &lt;GoalForm <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" /&gt;<br/>    &lt;/b-modal&gt;</span><span id="23f3" class="kv kw iq kr b gy le ky l kz la">    &lt;b-table-simple responsive&gt;<br/>      &lt;b-thead&gt;<br/>        &lt;b-tr&gt;<br/>          &lt;b-th sticky-column&gt;Date&lt;/b-th&gt;<br/>          &lt;b-th&gt;Money Saved&lt;/b-th&gt;<br/>          &lt;b-th&gt;Edit&lt;/b-th&gt;<br/>          &lt;b-th&gt;Delete&lt;/b-th&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-thead&gt;<br/>      &lt;b-tbody&gt;<br/>        &lt;b-tr v-for="s in savings" :key="s.id"&gt;<br/>          &lt;b-th sticky-column&gt;{{ new Date(s.date) | dateFormat('YYYY-MM-DD') }}&lt;/b-th&gt;<br/>          &lt;b-td&gt;{{s.amount}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openEditModal(s)"&gt;Edit&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOneSaving(s.id)"&gt;Delete&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-tbody&gt;<br/>    &lt;/b-table-simple&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9627" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>// @ is an alias to /src<br/>import SavingForm from "@/components/SavingForm.vue";<br/>import GoalForm from "@/components/GoalForm.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import VGauge from "vgauge";</span><span id="2f13" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  name: "home",<br/>  components: {<br/>    SavingForm,<br/>    GoalForm,<br/>    VGauge<br/>  },<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      selectedSaving: {},<br/>      goal: 0,<br/>      totalSavings: 0<br/>    };<br/>  },<br/>  computed: {<br/>    savings() {<br/>      return this.$store.state.savings.sort(<br/>        (a, b) =&gt; +new Date(b.date) - +new Date(a.date)<br/>      );<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllSavings();<br/>    this.getSavingsGoal();<br/>  },<br/>  methods: {<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },</span><span id="1cc8" class="kv kw iq kr b gy le ky l kz la">    openEditModal(saving) {<br/>      this.$bvModal.show("edit-modal");<br/>      this.selectedSaving = saving;<br/>    },</span><span id="a1e4" class="kv kw iq kr b gy le ky l kz la">    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("edit-modal");<br/>      this.$bvModal.hide("goal-modal");<br/>      this.getSavingsGoal();<br/>      this.getAllSavings();<br/>    },</span><span id="2754" class="kv kw iq kr b gy le ky l kz la">    openGoalModal() {<br/>      this.$bvModal.show("goal-modal");<br/>    },</span><span id="3dc9" class="kv kw iq kr b gy le ky l kz la">    async getAllSavings() {<br/>      this.totalSavings = 0;<br/>      const { data } = await this.getSavings();<br/>      this.$store.commit("setSavings", data);<br/>      this.totalSavings = +this.$store.state.savings<br/>        .map(s =&gt; s.amount)<br/>        .reduce((a, b) =&gt; +a + +b, 0);<br/>    },</span><span id="3122" class="kv kw iq kr b gy le ky l kz la">    async deleteOneSaving(id) {<br/>      await this.deleteSaving(id);<br/>      this.getAllSavings();<br/>    },</span><span id="9c69" class="kv kw iq kr b gy le ky l kz la">    async getSavingsGoal() {<br/>      this.goal = 0;<br/>      const { data } = await this.getGoal();<br/>      this.goal = +data.amount;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="8502" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有按钮添加保存数据，以及编辑和删除他们在每一行。添加节省的钱和设定节省目标将分别用<code class="fe lb lc ld kr b">SavingForm </code>和<code class="fe lb lc ld kr b">GoalForm</code>打开模式。我们使用<code class="fe lb lc ld kr b">SavingForm</code>来添加和编辑保存条目。</p><p id="3cc5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">节省数据从后端获取，并保存在我们的Vuex商店中。一旦它存在，我们就在<code class="fe lb lc ld kr b">computed</code>属性中获取数据，然后显示来自<code class="fe lb lc ld kr b">computed</code>属性的数据。</p><p id="dcad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个表格来显示输入的保存数据。我们按日期降序排列，以时间倒序显示。在<code class="fe lb lc ld kr b">scripts</code>部分，我们用<code class="fe lb lc ld kr b">beforeMount</code>钩子在页面加载期间用我们在mixin中编写的<code class="fe lb lc ld kr b">getAllSavings </code>函数获取所有密码条目。当点击编辑按钮时，<code class="fe lb lc ld kr b">selectedSaving</code>变量被设置，我们将它传递给<code class="fe lb lc ld kr b">SavingForm</code>进行编辑。</p><p id="d4f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要删除一个食谱，我们在mixin中调用<code class="fe lb lc ld kr b">deleteSaving</code>通过<code class="fe lb lc ld kr b">deleteOneSaving</code>函数向后端发出请求。</p><p id="2549" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里使用了VGauge组件。模板中的<code class="fe lb lc ld kr b">v-gauge</code>元素将显示仪表图。<code class="fe lb lc ld kr b">maxValue</code>道具被设置为我们的保存目标，保存在<code class="fe lb lc ld kr b">goal</code>变量中，而<code class="fe lb lc ld kr b">value</code>道具被设置为<code class="fe lb lc ld kr b">totalSavings</code>变量。<code class="fe lb lc ld kr b">units</code>设置为USD并显示在金额的末尾，而<code class="fe lb lc ld kr b">top</code>支柱使<code class="fe lb lc ld kr b">value</code>显示在标尺的顶部。<code class="fe lb lc ld kr b">v-if=”goal &amp;&amp; totalSavings”</code>非常重要。它允许我们通过将<code class="fe lb lc ld kr b">goal</code>和<code class="fe lb lc ld kr b">totalSavings</code>设置为0来刷新图形，然后再次设置从存储或后端获得的值。我们在<code class="fe lb lc ld kr b">getAllSavings</code>和<code class="fe lb lc ld kr b">getSavingsGoal</code>函数中完成了这项工作。</p><p id="a8ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe lb lc ld kr b">App.vue</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="6a8f" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand to="/"&gt;Piggy Bank App&lt;/b-navbar-brand&gt;</span><span id="444a" class="kv kw iq kr b gy le ky l kz la">      &lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="67b8" class="kv kw iq kr b gy le ky l kz la">      &lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path  == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b2b4" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="774b" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getSavingsGoal();<br/>  },<br/>  methods: {<br/>    async getSavingsGoal() {<br/>      const { data } = await this.getGoal();<br/>      this.$store.commit("setGoal", data);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="ccea" class="kv kw iq kr b gy le ky l kz la">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}</span><span id="de62" class="kv kw iq kr b gy le ky l kz la">button,<br/>.btn.btn-primary {<br/>  margin-right: 10px !important;<br/>}</span><span id="615b" class="kv kw iq kr b gy le ky l kz la">.button-toolbar {<br/>  margin-bottom: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="3ebe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面顶部添加一个引导导航条，以及一个显示我们定义的路线的<code class="fe lb lc ld kr b">router-view</code>。这个<code class="fe lb lc ld kr b">style</code>部分没有限定范围，所以样式将全局应用。在<code class="fe lb lc ld kr b">.page</code>选择器中，我们给页面添加一些填充。我们还在这里为应用程序的按钮添加了边距。</p><p id="f0bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">script</code>部分，我们通过调用<code class="fe lb lc ld kr b">this.getSavingsGoal</code>获得节约目标，并将它们放入我们的Vuex商店。</p><p id="65a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe lb lc ld kr b">main.js</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="9ee7" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import { required, min_value } from "vee-validate/dist/rules";<br/>import VueFilterDateFormat from "vue-filter-date-format";</span><span id="9641" class="kv kw iq kr b gy le ky l kz la">extend("required", required);<br/>extend("min_value", min_value);<br/>extend("date", {<br/>  validate: value =&gt;<br/>    /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(value),<br/>  message: "Date must be in YYYY-MM-DD format"<br/>});<br/>Vue.use(VueFilterDateFormat);<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);<br/>Vue.use(BootstrapVue);</span><span id="4448" class="kv kw iq kr b gy le ky l kz la">Vue.config.productionTip = false;</span><span id="a90a" class="kv kw iq kr b gy le ky l kz la">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="c13d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加了我们需要的所有库，包括BootstrapVue JavaScript和CSS、Vee-Validate组件以及验证规则。我们创建了<code class="fe lb lc ld kr b">date</code>规则，它验证使用该规则的输入将是YYYY-MM-DD格式。此外，我们添加了VueFilterDateFormat包来格式化<code class="fe lb lc ld kr b">Home.vue</code>中表的日期列中的日期。</p><p id="e874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">router.js</code>中，我们用以下代码替换现有代码:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="4320" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="a3e3" class="kv kw iq kr b gy le ky l kz la">Vue.use(Router);</span><span id="ac6c" class="kv kw iq kr b gy le ky l kz la">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="928f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将主页包含在我们的路线中，以便用户可以看到该页面。</p><p id="c371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">store.js</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="e746" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="2a95" class="kv kw iq kr b gy le ky l kz la">Vue.use(Vuex);</span><span id="dc6e" class="kv kw iq kr b gy le ky l kz la">export default new Vuex.Store({<br/>  state: {<br/>    savings: [],<br/>    goal: {}<br/>  },<br/>  mutations: {<br/>    setSavings(state, payload) {<br/>      state.savings = payload;<br/>    },</span><span id="536e" class="kv kw iq kr b gy le ky l kz la">    setGoal(state, payload) {<br/>      state.goal = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="8122" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将我们的<code class="fe lb lc ld kr b">recipes</code>状态添加到存储中，这样我们就可以在<code class="fe lb lc ld kr b">GoalForm</code>、<code class="fe lb lc ld kr b">SavingForm, </code>和<code class="fe lb lc ld kr b">HomePage</code>组件的<code class="fe lb lc ld kr b">computed</code>块中观察到它。我们用<code class="fe lb lc ld kr b">setSavings </code>函数来更新<code class="fe lb lc ld kr b">savings </code>状态，并像在<code class="fe lb lc ld kr b">SavingForm</code>中一样通过调用<code class="fe lb lc ld kr b">this.$store.commit(“setSavings”, data);</code>在组件中使用它，用<code class="fe lb lc ld kr b">setGoal</code>为<code class="fe lb lc ld kr b">GoalForm</code>和<code class="fe lb lc ld kr b">HomePage</code>设置储蓄目标数据。</p><p id="9dcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe lb lc ld kr b">index.html</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="12e6" class="kv kw iq kr b gy kx ky l kz la">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Piggy Bank App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vgauge-tutorial-app doesn't work properly without<br/>        JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3397" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">改一下标题。</p><p id="e3cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在所有的努力之后，我们可以通过运行<code class="fe lb lc ld kr b">npm run serve</code>来启动我们的app。</p><p id="05fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了启动后端，我们首先通过运行<code class="fe lb lc ld kr b">npm i json-server</code>来安装<code class="fe lb lc ld kr b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="9c31" class="kv kw iq kr b gy kx ky l kz la">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">db.json</code>中，将文本改为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="d789" class="kv kw iq kr b gy kx ky l kz la">{<br/>  "savings": [],<br/>  "goal": {}<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们有了在<code class="fe lb lc ld kr b">requests.js</code>中定义的<code class="fe lb lc ld kr b">savings</code>和<code class="fe lb lc ld kr b">goal</code>端点。</p><p id="5e9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们得到了:</p><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/bc82ed45a62c922e2965e61f507b7b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XhD_mMUMufbYgCVjHuoFkg.png"/></div></div></figure><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/26d869646c343899bedb398e19fb5cb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gS_W2kppaWMm18_4z-S9g.png"/></div></div></figure><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/0ad7231dbd340c7ee43240da6274539a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGXEicdlBFfHpg_M1jvm3Q.png"/></div></div></figure></div></div>    
</body>
</html>
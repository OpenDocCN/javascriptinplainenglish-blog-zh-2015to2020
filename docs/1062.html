<html>
<head>
<title>Upload photos from Expo to Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将世博会的照片上传到Firebase</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/upload-photos-from-expo-to-firebase-3051c80c23eb?source=collection_archive---------2-----------------------#2020-01-23">https://javascript.plainenglish.io/upload-photos-from-expo-to-firebase-3051c80c23eb?source=collection_archive---------2-----------------------#2020-01-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/90c0f9dee95d4f630a3a04fa700a1df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46GqOWphjbU-73tdWoVvmg.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Expo + Firebase</figcaption></figure><div class=""/><p id="6b50" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb jd"> <em class="kx">将您的图片或照片从您的Expo客户端上传到您的firebase存储器。</em>T3】</strong></p><h1 id="f586" class="ky kz jc bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">重要编辑</h1><p id="9bdf" class="pw-post-body-paragraph jz ka jc kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">自从expo更新以来，有了一种新的更好的方法，下面是它如何工作的一个例子:<a class="ae mb" href="https://github.com/expo/examples/blob/master/with-firebase-storage-upload/App.js" rel="noopener ugc nofollow" target="_blank">https://github . com/Expo/examples/blob/master/with-firebase-storage-upload/app . js</a></p><h1 id="1834" class="ky kz jc bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">过时的方式</h1><p id="8029" class="pw-post-body-paragraph jz ka jc kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">有一天，我需要将一张用ImagePicker从Expo拍摄的照片上传到我的firebase存储，并将下载url保存到firestore，我发现的一个解决方案是创建一个上传base 64的firebase函数。</p><p id="fe15" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">问题是你不能使用putString，因为firebase并不是真正为expo设计的，所以我们需要做一些变通。</p></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><p id="bf4f" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，让我们创建firebase函数，我假设你已经知道如何创建一个，这是我使用的函数:</p><figure class="mj mk ml mm gt ip"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="2d85" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我正在手动创建下载url，但是如果需要对url的权限，并且它对您不起作用，您可以总是使用<a class="ae mb" href="https://firebase.google.com/docs/storage/web/download-files" rel="noopener ugc nofollow" target="_blank"> getDownloadUrl() </a>从ref到图像。</p><p id="2361" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，要将base64字符串发送到我们刚刚创建的firebase函数，您需要这样的东西</p><figure class="mj mk ml mm gt ip"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="a5a7" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我不知道这是否是最好的方法，但firebase功能定价非常便宜，firebase定价的问题应该是您的firestore使用情况，这可能不是最快的方法(上传图像需要几秒钟)，但它对我有效，我希望它对您有效。</p><p id="84ed" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">感谢阅读💖</p></div></div>    
</body>
</html>
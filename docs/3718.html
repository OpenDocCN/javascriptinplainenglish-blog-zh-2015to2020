<html>
<head>
<title>Best of Modern JavaScript — Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华——模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-modules-c5f66b9f28d8?source=collection_archive---------19-----------------------#2020-10-19">https://javascript.plainenglish.io/best-of-modern-javascript-modules-c5f66b9f28d8?source=collection_archive---------19-----------------------#2020-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b1b0a0d62858ba5d5499d466e8e45a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x3fa8MFVfCP1pwk0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@lazycreekimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Michael Dziedzic</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="54b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了很大的改进。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在使用它比以往任何时候都愉快。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用JavaScript模块。</p><h1 id="3ba7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">导出函数表达式</h1><p id="c9b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">导出函数表达式，我们可以在我们的<code class="fe me mf mg mh b">export</code>语句周围加上括号。</p><p id="e72e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c1f8" class="mq lc iq mh b gy mr ms l mt mu">export default (function () {});<br/>export default (class {});</span></pre><p id="0f6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类是JavaScript中的函数，所以同样的规则适用。</p><h1 id="b065" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">直接导出默认值</h1><p id="79a1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以直接默认导出值。</p><p id="9e07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2769" class="mq lc iq mh b gy mr ms l mt mu">export default 'foo';</span></pre><p id="1cbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要导出字符串<code class="fe me mf mg mh b">'foo'</code>。</p><p id="37f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="430a" class="mq lc iq mh b gy mr ms l mt mu">const foo = function() {};</span><span id="7fb1" class="mq lc iq mh b gy mv ms l mt mu">export { foo as default };</span></pre><p id="d34a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个函数<code class="fe me mf mg mh b">foo</code>并使用<code class="fe me mf mg mh b">as default</code>关键字导出，以进行默认导出。</p><p id="6c0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要这个语法，这样我们就可以将变量声明转换成默认的导出。</p><h1 id="28b9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">进出口必须处于最高水平</h1><p id="f6ab" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">进出口必须处于最高水平。</p><p id="621f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d715" class="mq lc iq mh b gy mr ms l mt mu">import 'foo';</span></pre><p id="c74e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是我们不能写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="52ea" class="mq lc iq mh b gy mr ms l mt mu">if (true) {<br/>  import 'foo';<br/>}</span></pre><p id="8329" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4be7" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  import 'foo';<br/>}</span></pre><p id="c3ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们都会提高语法分析器。</p><h1 id="066e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">进口被吊起</h1><p id="e39f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">进口产品不是吊装的，所以我们可以在定义之前使用它们。</p><p id="1a4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0d26" class="mq lc iq mh b gy mr ms l mt mu">console.log(add(1, 2));</span><span id="fd8f" class="mq lc iq mh b gy mv ms l mt mu">import { add } from "./math";</span></pre><p id="e1a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe me mf mg mh b">add</code>的返回值将被记录。</p><h1 id="2bbd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">进出口</h1><p id="9944" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">导入是只读的。</p><p id="c595" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这使得模块系统允许循环依赖。</p><p id="b67e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以将代码分成多个模块，只要我们不改变它们的价值，它仍然可以工作。</p><h1 id="3fca" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">循环依赖</h1><p id="ffc5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">循环依赖是2个模块相互导入成员的地方。</p><p id="ce9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们应该避免，因为它使两个模块紧密耦合。</p><p id="d87a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们可能无法完全消除它们，所以我们不得不忍受它们。</p><p id="545d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过如下方式在ES6中添加循环依赖</p><p id="3dc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="c7f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">math.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="21b0" class="mq lc iq mh b gy mr ms l mt mu">import { foo } from "./index";</span><span id="50c8" class="mq lc iq mh b gy mv ms l mt mu">export const bar = () =&gt; {<br/>  foo();<br/>};</span></pre><p id="41df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bb25" class="mq lc iq mh b gy mr ms l mt mu">import { bar } from "./math";</span><span id="1d50" class="mq lc iq mh b gy mv ms l mt mu">export const foo = () =&gt; {<br/>  bar();<br/>};</span></pre><p id="f0e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">math.js</code>中的<code class="fe me mf mg mh b">index.js</code>导入<code class="fe me mf mg mh b">foo</code>，并使用导入的功能。</p><p id="e833" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们从<code class="fe me mf mg mh b">math.js</code>导入<code class="fe me mf mg mh b">bar</code>，并将其称为。</p><h1 id="d1f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">其他导入样式</h1><p id="94bd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">除了命名和默认导出之外。</p><p id="ced2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">import</code>只加载模块，不导入任何东西。</p><p id="5f27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0bd9" class="mq lc iq mh b gy mr ms l mt mu">import 'lib';</span></pre><p id="d42b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，要重命名导入，我们可以使用<code class="fe me mf mg mh b">as</code>关键字。</p><p id="76dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7967" class="mq lc iq mh b gy mr ms l mt mu">import { name as foo, bar } from "baz";</span></pre><p id="140f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">as</code>关键字用于重命名已命名的导出<code class="fe me mf mg mh b">name</code>。</p><p id="7d80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用它来重命名默认导出。</p><p id="3caf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d7de" class="mq lc iq mh b gy mr ms l mt mu">import { default as foo } from "baz";</span></pre><p id="a435" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以通过书写来使用<code class="fe me mf mg mh b">as</code>关键词:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b662" class="mq lc iq mh b gy mr ms l mt mu">import * as baz from "baz";</span></pre><p id="9087" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导入整个模块并命名为<code class="fe me mf mg mh b">baz</code>。</p><p id="2b18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认导入可以与命名导入混合使用。</p><p id="6d79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="42ef" class="mq lc iq mh b gy mr ms l mt mu">import foo, { bar, qux } from "baz";</span></pre><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/41e00759404f98c8d300d97162a37c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TQJ2gPlSYN4MPm94"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@justinveenema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Justin Veenema</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3cb1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5e78" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用各种方式导出和导入模块成员，</p><p id="bbe2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">循环依赖也适用于ES6的模块系统。</p><p id="8405" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
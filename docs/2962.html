<html>
<head>
<title>React v17.0: An Update With No New Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React v17.0:没有新特性的更新</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-v17-0-an-update-with-no-new-features-42951237c91a?source=collection_archive---------1-----------------------#2020-08-11">https://javascript.plainenglish.io/react-v17-0-an-update-with-no-new-features-42951237c91a?source=collection_archive---------1-----------------------#2020-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="246f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">没有增加新功能的主要新版本？</h2></div><p id="dfc5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">距离React v16首次发布已经过去了两年半。开发团队承诺更新v17对React的未来非常重要，但声称不会增加新功能。那到底是什么意思呢？React怎么能声称要发布一个新的重要版本而不增加新特性呢？</p><h2 id="81c7" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">逐步反应更新</h2><p id="46a3" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">过去的React更新总是导致旧版本被弃用。这可能会让团队难以置信地难以升级他们的React版本，尤其是在处理大型或被忽视的代码库时。因此，React团队决定v17将为采用更新的新方法奠定基础。当React v18发布时，开发人员将能够选择只升级他们应用程序的一部分，而保持其他部分在v17上运行。如果您的应用程序正在积极维护或处于大规模生产中，React建议不要这样做，但它可以帮助那些不积极维护应用程序或不需要将某些组件迁移到新版本的团队。未来，新的React版本不会抛弃这些应用，也不会要求大规模迁移。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/4687b65b3e8dd3c4ec04fd5ca0d30066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LLG9U_zoPanCPD_g.jpeg"/></div></div></figure><p id="c34f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了实现这种能力，React团队花了一些时间重新设计事件系统。这些更新使得React v17成为一个主要版本，因为它可能会破坏许多应用程序。</p><h2 id="873e" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">事件不再附加到文档</h2><p id="92c6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">与您可能想到的相反，React没有将事件附加到单个元素上。相反，React将每个事件类型的一个处理程序绑定到<code class="fe ml mm mn mo b">document</code>节点。这种方法提高了具有大型元素树的应用程序的性能，还支持重放事件等功能。</p><p id="07fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在后台，React可以捕获一个事件，并在将事件传播到组件树之前确定调用哪个组件。然而，在本地Javascript中，事件已经传播到了<code class="fe ml mm mn mo b">document</code>级别。虽然这听起来不像是一个问题，但是当运行React的多个实例时，这个系统会崩溃。如果嵌套在另一个React应用程序中的React应用程序停止了事件的传播，父React应用程序仍将捕获事件。对于希望嵌套不同版本的React的开发人员来说，这是一个非常头疼的问题。您可能不会想到这种情况会发生在生产中，但是Atom代码编辑器在四年前<a class="ae mp" href="https://github.com/facebook/react/pull/8117" rel="noopener ugc nofollow" target="_blank">就遇到了这个问题</a>！</p><p id="78a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React现在会将事件处理程序附加到React应用程序的根节点。这一改变将允许反应树之间的安全嵌套。当然，所有React实例都必须在版本17或更高版本上运行才能工作。这一更新也意味着React应用程序更容易嵌入到jQuery等其他框架中。正如所料，React现在将阻止事件传播到jQuery。</p><h2 id="879f" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">优化效果清理</h2><p id="f679" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在一个<code class="fe ml mm mn mo b">useEffect</code>方法中返回一个清理函数来停止函数中运行的任何代码是相当常见的。过去，这种清理功能会在绘制下一帧之前同步运行。事实上，大多数应用程序并不需要延迟屏幕更新来运行清理方法。所以它们现在将在React渲染下一帧后异步运行。这将加快组件之间的切换时间。您仍然可以使用<code class="fe ml mm mn mo b">useLayoutEffect</code>方法来运行阻塞渲染循环的清理方法。</p><h2 id="3830" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">不再有事件池</h2><p id="5897" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">事件池令人难以置信地混乱，并且在现代浏览器上不提供任何优化。相反，当处理接收相同事件的多个组件时，它会导致一些奇怪的错误。一个事件处理程序可能将事件设置为null，因此使用该事件的其他组件将遇到null变量错误。简而言之，新的React版本将允许在需要时访问事件字段。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="c55c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React v17可能不是React开发人员希望的功能丰富的更新。相反，这更像是一种思想上的更新。因此，虽然我们可能不会得到很酷的新组件或挂钩，但这些附加功能将在以后的更新中得到回报。你现在可以通过在React项目中运行<code class="fe ml mm mn mo b">npm install react@17.0.0-rc.0 react-dom@17.0.0-rc.0</code>来尝试React v17。</p></div></div>    
</body>
</html>
# æ‰€æœ‰å…³äºååº”é’©å­-ä½¿ç”¨æ•ˆæœ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/all-about-react-hooks-useeffect-b02b7e8d7b5a?source=collection_archive---------6----------------------->

![](img/59edf846320e4f5de5df1f50237c4416.png)

é’©å­æ˜¯åœ¨ [React 16.8](https://reactjs.org/blog/2019/02/06/react-v16.8.0.html) ç‰ˆæœ¬ä¸­æ–°åŠ å…¥çš„ã€‚å®ƒä»¬å…è®¸æ‚¨ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ï¼Œè€Œæ— éœ€ç¼–å†™ç±»ç»„ä»¶ã€‚

> useEffect æŒ‚é’©å…è®¸æ‚¨åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨

ä½¿ç”¨æ•ˆæœæŒ‚é’©æ˜¯ä¸‡èƒ½çš„ğŸ‘‘é’©å­çš„å½¢çŠ¶ã€‚æ˜¯`componentDidMount`ã€`componentDidUpdate`å’Œ`componentWillUnmount`çš„ç»„åˆã€‚å®ƒç”¨äºåœ¨ç»„ä»¶æŒ‚è½½æ—¶è·å–æ•°æ®ï¼Œåœ¨çŠ¶æ€æˆ–å±æ€§æ”¹å˜æ—¶æ‰§è¡Œæ•°æ®ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†æ•°æ®ã€‚è¿™ä¸ª useEffect æŒ‚é’©å¯èƒ½çœŸçš„ä»¤äººå›°æƒ‘ğŸ’¡ç›´åˆ°ä½ ç†è§£æˆ–çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ç”¨ä»£ç ç‰‡æ®µè§£é‡Š`useEffect`æŒ‚é’©ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥ç†è§£ useEffect æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

# åƒ componentDidMount ä¸€æ ·è¿è¡Œä¸€æ¬¡

é»˜è®¤æƒ…å†µä¸‹ï¼ŒuseEffect é’©å­åœ¨ç»„ä»¶çš„æ¯æ¬¡æ¸²æŸ“åè¿è¡Œï¼Œä¸ºäº†åªåœ¨æŒ‚è½½æ—¶è¿è¡Œ useEffectï¼Œä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„`[]`ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚useEffect éœ€è¦ä¸€ä¸ª*ä¾èµ–*æ¥é‡æ–°æ¸²æŸ“ï¼Œè¿™é‡Œæˆ‘ä»¬å£°æ˜è¿™ä¸ª useEffect æ²¡æœ‰ä»»ä½•*ä¾èµ–*æ¥é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥å®ƒåªæ¸²æŸ“ä¸€æ¬¡ã€‚

```
useEffect(() => {
 // Your code here
}, []);
```

# å…³äºé“å…·/çŠ¶æ€çš„å˜åŒ–

é»˜è®¤æƒ…å†µä¸‹ï¼ŒuseEffect é’©å­åœ¨æ¯æ¬¡æ¸²æŸ“åè¿è¡Œï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡å°† props æˆ– state å˜é‡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ¥æ§åˆ¶ä½•æ—¶é‡æ–°æ¸²æŸ“ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªä¾èµ–å…³ç³»æ•°ç»„ï¼Œå¦‚æœä¾èµ–å…³ç³»æ•°ç»„ä¸­çš„ä»»ä½•å˜é‡å‘ç”Ÿå˜åŒ–ï¼ŒuseEffect é’©å­å°†è¿è¡Œã€‚

```
useEffect(() => {
 // Your code here
}, [variableName]);
```

# æ¯æ¬¡æ¸²æŸ“å

useEffect é’©å­åœ¨æ¯æ¬¡æ¸²æŸ“åè¿è¡Œï¼Œå¦‚æœä½ ç®€å•åœ°å¿½ç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒå°†å®Œæˆè¿™é¡¹å·¥ä½œğŸ™ƒ

```
useEffect(() => {
 // Your code here
});
```

# å¸è½½æ—¶

è¦æ‰§è¡Œå¸è½½ç»„ä»¶çš„æ“ä½œï¼Œ

```
useEffect(() => {
  return () => {
   // unmount code here
  }
});
```

æ‚¨å°†æ”¾åœ¨`return () â‡’ { }`å—ä¸­çš„ä»£ç å°†åœ¨å¸è½½ä¹‹å‰æ‰§è¡Œã€‚å¸è½½åŠŸèƒ½ä¸åªæ˜¯åœ¨å¸è½½ç»„ä»¶æ—¶æ‰§è¡Œã€‚å®ƒåœ¨æ¯æ¬¡ useEffect è¿è¡Œä¹‹å‰æ‰§è¡Œï¼Œä»æœ€åä¸€æ¬¡æ¸²æŸ“å¼€å§‹æ¸…ç†ã€‚

![](img/f4d98cb97821b4e2da91401647c9aba3.png)

å‚è€ƒ

1.  [https://reactjs.org/docs/hooks-intro.html](https://reactjs.org/docs/hooks-intro.html)
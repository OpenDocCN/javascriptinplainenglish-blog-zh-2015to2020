<html>
<head>
<title>Let’s Build a YouTube Clone with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React构建一个YouTube克隆</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-youtube-clone-using-react-part-2-a23a9dded270?source=collection_archive---------7-----------------------#2020-10-26">https://javascript.plainenglish.io/building-a-youtube-clone-using-react-part-2-a23a9dded270?source=collection_archive---------7-----------------------#2020-10-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b447" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第2部分:在本教程中，我们将通过构建显示推荐视频的主页来继续构建YouTube克隆</h2></div><p id="e9a9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第1部分的<a class="ae lb" href="https://medium.com/@nouman10/building-a-youtube-clone-using-react-part-1-40fb09ae2837" rel="noopener">中，我们设置了React项目，从YouTube数据API v3中获取API密钥，并创建了<code class="fe lc ld le lf b">Header</code>和<code class="fe lc ld le lf b">SideBar</code>组件。在这一部分，我们将致力于创建<code class="fe lc ld le lf b">RecommendedVideos</code>页面，该页面将从API获取最受欢迎的视频并进行渲染。我们开始吧</a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/4a69e4b7d27efc8c1972af6eed1af957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6rElRlTRsifm2bZzGgQFA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Search page of our Youtube clone</figcaption></figure><p id="00b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是构建这个YouTube克隆的部分列表:</p><ul class=""><li id="22af" class="lw lx iq kh b ki kj kl km ko ly ks lz kw ma la mb mc md me bi translated">第1部分—获取API密钥并构建侧栏和标题(<a class="ae lb" href="https://medium.com/@nouman10/building-a-youtube-clone-using-react-part-1-40fb09ae2837" rel="noopener">此处为</a>)</li><li id="85d1" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la mb mc md me bi translated">第2部分—构建推荐视频页面(这一页)</li><li id="a6a7" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la mb mc md me bi translated">第3部分—构建搜索页面(<a class="ae lb" href="https://nouman10.medium.com/building-a-youtube-clone-using-react-part-3-d86db83d3b33" rel="noopener">此处为</a>)</li><li id="69ab" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la mb mc md me bi translated">第4部分—构建视频播放器页面(<a class="ae lb" href="https://nouman10.medium.com/lets-build-a-youtube-clone-with-react-part-4-48dd9e9d8cef" rel="noopener">此处为</a>)</li></ul><p id="33df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不喜欢阅读，对源代码感兴趣，可以滚动到故事的结尾。</p><blockquote class="mk ml mm"><p id="9aca" class="kf kg mn kh b ki kj jr kk kl km ju kn mo kp kq kr mp kt ku kv mq kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>本教程假设您对JavaScript和React有基本的了解。</p><p id="27ad" class="kf kg mn kh b ki kj jr kk kl km ju kn mo kp kq kr mp kt ku kv mq kx ky kz la ij bi translated"><strong class="kh ir">注意:</strong>本教程不包含所有的代码，尤其是样式，而是解释了项目的主要部分</p></blockquote></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h2 id="9525" class="my mz iq bd na nb nc dn nd ne nf dp ng ko nh ni nj ks nk nl nm kw nn no np nq bi translated">使用<code class="fe lc ld le lf b">axios</code>访问API</h2><p id="dde4" class="pw-post-body-paragraph kf kg iq kh b ki nr jr kk kl ns ju kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">我们将从访问API开始，以获取YouTube上最受欢迎的视频。为此，我们将使用<code class="fe lc ld le lf b">axios</code>。该请求将在页面加载时执行一次，因此我们将使用<code class="fe lc ld le lf b">useEffect()</code> hook来发送请求。我们现在只需要<code class="fe lc ld le lf b">console.log</code>回应。确保将以下内容放入<code class="fe lc ld le lf b">React</code>组件中。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="41c3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在YouTube Data API v3页面上查看各种类型的请求。让我们看看这里的输出:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/8aaa7d427933f564366ed9e1d79d2e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iyijvb8hQphz981un6kcLg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Response from the YouTube API</figcaption></figure><p id="8f63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了更好地显示内容，我扩展了一个数组。这里有很多信息。让我们列出我们感兴趣的数据:</p><ol class=""><li id="2067" class="lw lx iq kh b ki kj kl km ko ly ks lz kw ma la ny mc md me bi translated">视频ID</li><li id="e17c" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">频道标题</li><li id="e1f8" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">频道ID(我们将发送另一个请求来获取频道的头像)</li><li id="af06" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">标题</li><li id="6060" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">缩略图图像</li><li id="9135" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">出版时间</li><li id="2991" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">视频视图</li></ol></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h2 id="1854" class="my mz iq bd na nb nc dn nd ne nf dp ng ko nh ni nj ks nk nl nm kw nn no np nq bi translated">从API中清除数据</h2><p id="bbf9" class="pw-post-body-paragraph kf kg iq kh b ki nr jr kk kl ns ju kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">我们现在将编写一个函数，它将接受上述信息，并根据我们的需要提取这些信息。最后，我们将在组件的状态中存储干净的数据。</p><p id="be89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用<code class="fe lc ld le lf b">useState()</code>钩子来设置视频项，以存储组件是否仍在访问和清理响应，以及在出现错误的情况下。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="d6c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我们在这里使用<code class="fe lc ld le lf b">async/await</code>,因为我们需要等待来自通道API的响应，以便用更新的数据调用<code class="fe lc ld le lf b">setVideoCards()</code>。</p><p id="afcd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们已经访问了API，清理了响应，并将其存储在我们的状态中。现在我们必须呈现响应。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h2 id="ba41" class="my mz iq bd na nb nc dn nd ne nf dp ng ko nh ni nj ks nk nl nm kw nn no np nq bi translated">视频卡组件</h2><p id="7bdc" class="pw-post-body-paragraph kf kg iq kh b ki nr jr kk kl ns ju kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated"><code class="fe lc ld le lf b">React</code>的主要优势是它允许我们创建可重用的组件，这有助于遵循DRY(不要重复自己)原则。因此，我们将创建一个<code class="fe lc ld le lf b">VideoCard</code>组件，它将接受我们清理的数据作为道具并呈现视频，而不是分别呈现每个视频。</p><p id="5e3a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">遵循我们最初使用的相同模式，在<code class="fe lc ld le lf b">components/</code>文件夹中创建一个视频卡文件夹，分别包含两个文件<code class="fe lc ld le lf b">VideoCard.js</code>和<code class="fe lc ld le lf b">VideoCard.css</code>。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="34b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所见，<code class="fe lc ld le lf b">VideoCard</code>组件将接受视频细节作为道具并进行渲染。让我们给组件添加样式。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h1 id="a0d7" class="nz mz iq bd na oa ob oc nd od oe of ng jw og jx nj jz oh ka nm kc oi kd np oj bi translated">渲染视频</h1><p id="7218" class="pw-post-body-paragraph kf kg iq kh b ki nr jr kk kl ns ju kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">让我们最后连接一切，渲染元素。我们将使用<code class="fe lc ld le lf b">.map()</code>函数将每个视频的细节映射到<code class="fe lc ld le lf b">videoCards</code>数组中，以返回一个<code class="fe lc ld le lf b">VideoCard</code>组件。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="67e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我们在这里给每个元素分配了<code class="fe lc ld le lf b">key</code>。这在<code class="fe lc ld le lf b">React</code>中非常重要，无论你何时呈现一个列表。这有助于<code class="fe lc ld le lf b">React</code>跟踪列表中哪些组件发生了变化，这样它只能在需要的地方重新呈现组件，而不是整个列表。你可以在这里读到更多</p><p id="502d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们给组件添加一些样式:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="79f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们最终的输出会是这样的:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ok"><img src="../Images/6c5cfa811dbc8447f7f260100ee65d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uMkKZtALyziOGJ6e2jexzA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Final Output of the RecommendedVideos Component</figcaption></figure><p id="46b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们最后的<code class="fe lc ld le lf b">RecommendedVideos.js</code>文件:</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="4e3d" class="my mz iq bd na nb nc dn nd ne nf dp ng ko nh ni nj ks nk nl nm kw nn no np nq bi translated"><strong class="ak">结论</strong></h2><p id="a007" class="pw-post-body-paragraph kf kg iq kh b ki nr jr kk kl ns ju kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">这部分到此为止。让我们总结一下我们在本教程中所做的工作:</p><ol class=""><li id="936e" class="lw lx iq kh b ki kj kl km ko ly ks lz kw ma la ny mc md me bi translated">使用<code class="fe lc ld le lf b">axios</code>向Youtube数据API发出请求</li><li id="fcf4" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">从API中提取并清理响应。</li><li id="3522" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">创建了一个<code class="fe lc ld le lf b">VideoCard</code>组件来渲染单个视频。</li><li id="8b6b" class="lw lx iq kh b ki mf kl mg ko mh ks mi kw mj la ny mc md me bi translated">创建了一个<code class="fe lc ld le lf b">RecommendedVideos</code>组件来呈现所有的视频。</li></ol><p id="28c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一堂课中，我们将创建<code class="fe lc ld le lf b">SearchPage</code>组件，每当您搜索某个内容时，它都会呈现，并显示相关的频道和视频。</p><p id="ec7e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在我的GitHub上查看完整的源代码</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="4b9c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您觉得以上内容对您有用，请分享并随时支持我--&gt;</p><ul class=""><li id="86c7" class="lw lx iq kh b ki kj kl km ko ly ks lz kw ma la mb mc md me bi translated">https://www.buymeacoffee.com/nouman10<a class="ae lb" href="https://www.buymeacoffee.com/nouman10" rel="noopener ugc nofollow" target="_blank"/></li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>How to Format Dates in JavaScript with Moment.JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Moment在JavaScript中格式化日期？射流研究…</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-format-dates-in-javascript-with-moment-js-a9b38e320d35?source=collection_archive---------3-----------------------#2020-06-05">https://javascript.plainenglish.io/how-to-format-dates-in-javascript-with-moment-js-a9b38e320d35?source=collection_archive---------3-----------------------#2020-06-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d0f8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让时间飞逝</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cd0d287226087b2afebc6d80b0160768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9UBX0_vg-C36c7gg.jpg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/webandi-1460261/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1990453" rel="noopener ugc nofollow" target="_blank">Andreas Lischka</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1990453" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="ca93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们承认:我们不喜欢在应用程序中处理日期和时间。但是，我们对此无能为力:世界其他地方依赖于这种时间定位方法。但是你可以通过使用特殊的库，比如<code class="fe ls lt lu lv b">moment.js</code>，让你的生活变得简单很多。</p><h1 id="c1e3" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">什么是时刻？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/a32b70d1c97bf23625588c0da7f4ba9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*ax5jCqEd1zYEen0I.png"/></div></figure><p id="a123" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MomentJS是JavaScript应用程序中日期时间处理的一体化解决方案。它允许您创建时间戳、修改时间戳(加、减等)、查询时间戳(一个接一个)，并以各种人类可读的格式显示时间戳。它有一个非常简单明了的API，几乎是JavaScript应用程序中与日期相关的任务的行业标准。</p><h1 id="75f4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">安装时刻</h1><p id="5245" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">您可以使用您选择的软件包管理器来安装它:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="8acd" class="my lx iq lv b gy mz na l nb nc">npm i -S momentjs</span></pre><p id="bc5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="79e7" class="my lx iq lv b gy mz na l nb nc">yarn add momentjs</span></pre><p id="131c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您没有使用包管理器，您可以直接将脚本包含在HTML中:</p><p id="09c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，可以像这样导入:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="f8ca" class="my lx iq lv b gy mz na l nb nc">const moment = require('momentjs'); <br/>// or <br/>import moment from 'momentjs';</span></pre><p id="31ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您将脚本包含在HTML中，<code class="fe ls lt lu lv b">moment</code>对象将是全局可用的，因此您不必导入它。</p><h1 id="b815" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">转换时间</h1><p id="7274" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">要以人类可读的格式输出时间，首先必须将其转换为<code class="fe ls lt lu lv b">moment</code>对象。如果从服务器获取时间戳，它必须是符合ISO的日期字符串，或者是以毫秒为单位的Unix时间戳:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="dff9" class="my lx iq lv b gy mz na l nb nc">const timestamp = await getTimeFromServer(); <br/>const momentTimestamp = moment(timestamp); console.log(momentTimestamp.format()); <br/>// 2020-09-08T08:02:17-05:00</span></pre><p id="468f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您正在使用内置的<code class="fe ls lt lu lv b">new Date()</code>创建时间戳，您也可以使用它来创建<code class="fe ls lt lu lv b">moment</code>对象:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7c78" class="my lx iq lv b gy mz na l nb nc">const timestamp = new Date(); <br/>const momentTimestamp = moment(timestamp);</span></pre><p id="76c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想使用当前日期和时间创建一个<code class="fe ls lt lu lv b">moment</code>对象，只需不带任何参数地调用<code class="fe ls lt lu lv b">moment()</code>即可。</p><h1 id="7efc" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">格式化时间</h1><p id="ea5b" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">Moment为格式化时间提供了一个简单的接口。您唯一需要的函数是<code class="fe ls lt lu lv b">format</code>，它接受一个字符串作为模板。像这样使用它:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="fb42" class="my lx iq lv b gy mz na l nb nc">moment().format(); // "2020-06-05T12:28:46-04:00"</span><span id="43fb" class="my lx iq lv b gy nd na l nb nc">moment().format("dddd, MMMM Do YYYY, h:mm:ss a"); <br/>// "Friday, June 5th 2020, 12:29:07 pm" </span><span id="2bd7" class="my lx iq lv b gy nd na l nb nc">moment().format("ddd, hA"); // "Fri, 12PM"</span></pre><p id="d160" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是您可以在<code class="fe ls lt lu lv b">format()</code>中使用的常见格式化标记列表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/138f3d4623746622188064916224ed8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*KYjKRcmv7-T1_jxBZYC_dg.png"/></div></figure><p id="b339" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，有几个方便的函数可以使格式化更加容易。例如，如果您需要显示上次看到的状态，您可以使用<code class="fe ls lt lu lv b">fromNow</code>功能:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="335c" class="my lx iq lv b gy mz na l nb nc">const almostNow = moment().subtract(15, 'minutes'); <br/>const yesterday = moment().subtract(1, 'day'). <br/>const monthAgo = moment().subtract(1, 'month');<br/> <br/>console.log(almostNow.fromNow()); // 15 minutes ago console.log(yesterday.fromNow()); // a day ago console.log(monthAgo.fromNow()); // a month ago</span></pre><p id="ca4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，有一个函数<code class="fe ls lt lu lv b">toNow()</code>做相反的事情。</p><h1 id="197b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">操纵时间</h1><p id="1166" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">格式化时间并不是MomenJS的唯一优势。它还可以通过简单的界面以多种方式操纵时间。例如，下面是如何直接更改值:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3efd" class="my lx iq lv b gy mz na l nb nc">const jesusBday = moment()<br/> .hour(1)<br/> .day(1)<br/> .month(1)<br/> .year(1);</span></pre><p id="0703" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，对于不同的用例，有更简单的方法来控制时间。例如，您可以增加或减少:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="31df" class="my lx iq lv b gy mz na l nb nc">const past = moment().subtract(2, 'month'); // To past <br/>const future = moment().add(1, 'year'); // Back to future</span></pre><p id="fa63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于第二个参数，您可以提供以下任意内容:</p><ul class=""><li id="4979" class="nf ng iq ky b kz la lc ld lf nh lj ni ln nj lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">years</code></li><li id="956f" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">quarters</code></li><li id="38c8" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">months</code></li><li id="b650" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">weeks</code></li><li id="20d9" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">days</code></li><li id="2293" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">hours</code></li><li id="69ec" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">minutes</code></li><li id="690d" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">seconds</code></li><li id="0568" class="nf ng iq ky b kz no lc np lf nq lj nr ln ns lr nk nl nm nn bi translated"><code class="fe ls lt lu lv b">milliseconds</code></li></ul><p id="c403" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，你可以快进时间。假设，你需要得到下个月(或者明年)月初的时间戳。为此，您可以使用<code class="fe ls lt lu lv b">endOf</code>功能:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="1f81" class="my lx iq lv b gy mz na l nb nc">const today = moment(); <br/>const nextMon = moment().endOf('month');<br/> // nextMon is now set to the ending of the current month <br/>// 1 millisecond before that, to be precise</span></pre><p id="aa0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，还有一个功能<code class="fe ls lt lu lv b">startOf</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="daad" class="my lx iq lv b gy mz na l nb nc">const today = moment(); <br/>const lastNewYear = moment().startOf('year'); <br/>// lastNewYear is set to the first millisecond <br/>// of the current year</span></pre><h1 id="db11" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">询问时间</h1><p id="d75a" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">如果你什么都不知道，修改时间有什么用？MomenJS有几个函数可以帮助你做到这一点。首先，有<code class="fe ls lt lu lv b">isBefore</code>和<code class="fe ls lt lu lv b">isAfter</code>:几乎不言自明:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="509f" class="my lx iq lv b gy mz na l nb nc">const now = moment(); <br/>const then = moment().add(1, 'day');<br/>console.log(now.isAfter(then)); // false<br/>console.log(then.isAfter(now)); // true<br/>console.log(now.isBefore(then)); // true<br/>console.log(then.isBefore(now)); // false</span></pre><p id="4b21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，还有这些函数的非严格版本:<code class="fe ls lt lu lv b">isSameOrBefore</code>和<code class="fe ls lt lu lv b">isSameOrAfter</code>。另一个值得了解的功能是<code class="fe ls lt lu lv b">isBetween</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="0eca" class="my lx iq lv b gy mz na l nb nc">const now = moment();<br/>const past = moment().subtract(1, 'day');<br/>const future = moment().add(1, 'day');<br/>console.log(now.isBetween(past, future)); // true<br/>console.log(past.isBetween(now, future)); // false</span></pre><p id="baec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后是<code class="fe ls lt lu lv b">max</code>和<code class="fe ls lt lu lv b">min</code>功能。它们完全按照您的预期工作:从一列矩中返回最小值或最大值:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="64cf" class="my lx iq lv b gy mz na l nb nc">const now = moment();<br/>const past = moment().subtract(1, 'year');<br/>const future = moment().add(1, 'year');<br/>console.log(moment.min(now, past, future).year()); // 2019<br/>console.log(moment.max(now, past, future).year()); // 2021</span></pre><h1 id="4f71" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结束语</h1><p id="9440" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">感谢您的阅读，希望您喜欢这篇文章。继续订阅更多关于JavaScript和软件开发的有趣内容！</p><h1 id="f612" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">资源</h1><ul class=""><li id="adb8" class="nf ng iq ky b kz mp lc mq lf nt lj nu ln nv lr nk nl nm nn bi translated"><a class="ae kv" href="https://momentjs.com" rel="noopener ugc nofollow" target="_blank"> MomentJS文档</a></li></ul></div></div>    
</body>
</html>
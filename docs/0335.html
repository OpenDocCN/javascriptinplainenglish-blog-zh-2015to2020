<html>
<head>
<title>How to properly extend Material-UI theme in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在TypeScript中正确扩展Material-UI主题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/extend-material-ui-theme-in-typescript-a462e207131f?source=collection_archive---------0-----------------------#2019-09-21">https://javascript.plainenglish.io/extend-material-ui-theme-in-typescript-a462e207131f?source=collection_archive---------0-----------------------#2019-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5c50415d79b56da35d31de1a64f3f14f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2MhdGr4xjfETCVAqJ1eeg.png"/></div></div></figure><p id="fc90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Material-UI是世界上最流行的React组件库之一，因为它易于使用并且速度很快。最好的事情是看起来很好！另一方面，现在许多React用户将TypeScript与React一起使用，因为它有助于许多潜在的运行时错误，尤其是对于大型应用程序。React和TypeScript的结合超级强大和漂亮。所以他们两个注定要相遇。</p><p id="f473" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随着您的使用，您会知道将TypeScript集成到Material-UI并不困难。你可以在Material-UI网站找到好的文档。但是你遇到的一个困难是关于主题，尤其是调色板。不幸的是，默认的材质界面主题有点有限。因此，本文解释了如何在TypeScript中扩展Material-UI主题。实际上，如果您掌握了这篇文章，您可以扩展其他类型！</p><h1 id="14e0" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">材质问题——UI主题</h1><p id="bd67" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">正如我上面解释的，默认的材质界面主题有点受限，如下所示。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7e04" class="mi kx iq me b gy mj mk l ml mm">theme.ts</span><span id="2b19" class="mi kx iq me b gy mn mk l ml mm">theme.palette<br/>├──── primary<br/>│      ├──── main: string;<br/>│      ├──── dark: string;<br/>│      ├──── light: string;<br/>│      ├──── contrastText: string;<br/>│      ├──── 50: string;<br/>│      ├──── 100: string;<br/>│      ├──── 200: string;<br/>│      ├──── 300: string;<br/>│      ├──── 400: string;<br/>│      ├──── 600: string;<br/>│      ├──── 700: string;<br/>│      ├──── 800: string;<br/>│      ├──── 900: string;<br/>│      ├──── A100: string;<br/>│      ├──── A200: string;<br/>│      ├──── A400: string;<br/>│      └──── A700: string;<br/>│<br/>├──── secondary<br/>│      ...same as primary<br/>│<br/>├──── error<br/>│      ...same as primary<br/>│<br/>|____ text<br/>│      ├──── primary: string;<br/>│      ├──── secondary: string;<br/>│      ├──── disabled: string;<br/>│      └──── hint: string;<br/>│<br/>|____ divider: string;<br/>│<br/>|____ action<br/>│      ├──── active: string;<br/>│      ├──── hover: string;<br/>│      ├──── hoverOpacity: string;<br/>│      ├──── selected: string;<br/>│      ├──── disabled: string;<br/>│      └──── disabledBackground: string;<br/>|<br/>|____ background<br/>       ├──── default: string;<br/>       └──── card: string;</span></pre><p id="cfcf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常将一种颜色分配给一个调色板选项。例如，原色是红色，二次色是蓝色。但是当你创建一个主题时，你可能需要更多的调色板选项，如下所示。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="ffc9" class="mi kx iq me b gy mj mk l ml mm">theme.palette<br/>├──── primary<br/>├──── secondary<br/>├──── error<br/>├──── grey<br/>|____ text<br/>|____ divider<br/>|____ action<br/>|____ background<br/>|____ success<br/>      green here??<br/>|____ failure<br/>      red more??<br/>|____ warning<br/>      yellow here??<br/>|____ info<br/>      gray here??</span></pre><p id="5f36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是当你尝试的时候，你会得到如下的错误。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/a0a9db88873f877d63df2d8afa2b1c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ikllMlwblo9o34VWGbefw.png"/></div></div></figure><p id="f511" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关键信息是最后一条。<code class="fe mp mq mr me b">Object literal may only specify known properties, and ‘success' does not exist in type ‘PaletteOptions’</code>。这意味着因为Material-UI包已经提供了调色板选项的类型声明，所以您不能向它添加额外的键。</p><p id="78f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么如何使用额外的钥匙呢？答案是自己扩展Material UI主题类型。</p><p id="4f17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">※2020年1月25日更新</p><p id="be65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为Material UI 4.8.1版本为<code class="fe mp mq mr me b">PaletteOptions</code>添加了成功、警告和信息键，所以您不会再从它们那里得到错误。但是如果你尝试用<code class="fe mp mq mr me b">failure</code>来做，你会得到和上面一样的错误。</p><p id="c1f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为这篇文章是在发布之前写的，所以请把<code class="fe mp mq mr me b">success</code>键换成<code class="fe mp mq mr me b">failure</code>。</p><h1 id="34a7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">在TypeScript中扩展材质用户界面主题</h1><p id="8371" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如上所述，您应该扩展的目标类型是<code class="fe mp mq mr me b">PaletteOptions</code>。所以首先，让我们检查默认声明。你可以在<code class="fe mp mq mr me b">node_modules/@material-ui/core/styles/createPalette.d.ts</code>或者最初的<a class="ae ms" href="https://github.com/mui-org/material-ui/blob/89687f38cae750650555772ba4d821c9084d8dfc/packages/material-ui/src/styles/createPalette.d.ts" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面找到它们。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7101" class="mi kx iq me b gy mj mk l ml mm">node_modules/@material-ui/core/styles/createPalette.d.ts</span><span id="2f57" class="mi kx iq me b gy mn mk l ml mm">...<br/>import { Color, PaletteType } from '..';<br/>...</span><span id="4d07" class="mi kx iq me b gy mn mk l ml mm">export <em class="mt">interface</em> PaletteOptions {<br/>    primary?: PaletteColorOptions;<br/>    secondary?: PaletteColorOptions;<br/>    error?: PaletteColorOptions;<br/>    type?: PaletteType;<br/>    tonalOffset?: <em class="mt">number</em>;<br/>    contrastThreshold?: <em class="mt">number</em>;<br/>    common?: Partial&lt;CommonColors&gt;;<br/>    grey?: ColorPartial;<br/>    text?: Partial&lt;TypeText&gt;;<br/>    divider?: <em class="mt">string</em>;<br/>    action?: Partial&lt;TypeAction&gt;;<br/>    background?: Partial&lt;TypeBackground&gt;;<br/>    getContrastText?: (<em class="mt">background</em>: <em class="mt">string</em>) <em class="mt">=&gt;</em> <em class="mt">string</em>;<br/>}</span></pre><p id="608a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，PaletteOptions键中没有“成功”。但是现在，你可能会猜想如果你给PaletteOptions添加键，你就可以扩展主题了！</p><h2 id="87a3" class="mi kx iq bd ky mu mv dn lc mw mx dp lg kj my mz lk kn na nb lo kr nc nd ls ne bi translated">实施</h2><p id="cc57" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">请随意触摸<code class="fe mp mq mr me b">createPalette.d.ts</code>文件。通常，在src目录下创建类型目录，并将类型文件放入其中。</p><p id="8ed1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并添加PaletteOptions和Palette类型扩展，如下所示。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="d69b" class="mi kx iq me b gy mj mk l ml mm">src/types/createPalette.d.ts</span><span id="5d26" class="mi kx iq me b gy mn mk l ml mm">import * as createPalette from '@material-ui/core/styles/createPalette';</span><span id="e97f" class="mi kx iq me b gy mn mk l ml mm">declare module '@material-ui/core/styles/createPalette' {<br/>    interface PaletteOptions {    <br/>        success?: PaletteColorOptions;<br/>        warning?: PaletteColorOptions;<br/>    }<br/>}</span></pre><p id="db6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您想要与primary inside success相同的键时，您可以只使用用于<code class="fe mp mq mr me b">primary</code>的PaletteColorOptions。所以让我们在theme.ts中加入“成功”键吧！</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/e164795fed2d4c9b0e74f041026d4b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fN7SETbFHFJMErX0teWCog.png"/></div></div></figure><p id="d3d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你不会得到一个错误！反之，可以获得推荐！</p><p id="e3f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于高级用户，您可能需要自定义调色板颜色选项。例如，如果您为每个扩展名定义文件图标主题，如pdf、csv，您需要为每个扩展名指定特定的颜色。在这种情况下，您可以在<code class="fe mp mq mr me b">createPalette.d.ts</code>中创建一个自定义类型。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="8f9a" class="mi kx iq me b gy mj mk l ml mm">import * as createPalette from '@material-ui/core/styles/createPalette';</span><span id="b513" class="mi kx iq me b gy mn mk l ml mm">declare module '@material-ui/core/styles/createPalette' {<br/>    interface IconPaletteColorOptions {<br/>        pdf?: string;<br/>        csv?: string;<br/>    }</span><span id="83e0" class="mi kx iq me b gy mn mk l ml mm">    interface PaletteOptions {    <br/>        success?: PaletteColorOptions;<br/>        warning?: PaletteColorOptions;<br/>        icon?: IconPaletteColorOptions;<br/>    }<br/>}</span></pre><p id="4a95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如您所看到的，您可以创建一个新的类型并将其分配给PaletteOptions。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/7100e83113ef06f8dc2001c1cf94d4b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q0jjT5nod4Z3VIZuWKdo8w.png"/></div></div></figure><h2 id="74da" class="mi kx iq bd ky mu mv dn lc mw mx dp lg kj my mz lk kn na nb lo kr nc nd ls ne bi translated">哎呀！</h2><p id="95fe" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">不幸的是，类型扩展仍然不够。当你试图在每个组件中使用扩展主题时，你会得到一个错误。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/daf27e06f20469f0ff45217b11c518af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isoGsWOY43WIoAV35BOR-A.png"/></div></div></figure><p id="cf24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为<code class="fe mp mq mr me b">theme</code>是用<code class="fe mp mq mr me b">Theme</code>打出来的，这个错误的原因可能在<code class="fe mp mq mr me b">Theme</code>和<code class="fe mp mq mr me b">Palette</code>附近。再次转到<code class="fe mp mq mr me b">createPalette.d.ts</code>。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="6de4" class="mi kx iq me b gy mj mk l ml mm">node_modules/@material-ui/core/styles/createPalette.d.ts</span><span id="08cb" class="mi kx iq me b gy mn mk l ml mm">...<br/>export <em class="mt">interface</em> Palette {<br/>    common: CommonColors;<br/>    type: PaletteType;<br/>    contrastThreshold: <em class="mt">number</em>;<br/>    tonalOffset: <em class="mt">number</em>;<br/>    primary: PaletteColor;<br/>    secondary: PaletteColor;<br/>    error: PaletteColor;<br/>    grey: Color;<br/>    text: TypeText;<br/>    divider: TypeDivider;<br/>    action: TypeAction;<br/>    background: TypeBackground;<br/>    getContrastText: (<em class="mt">background</em>: <em class="mt">string</em>) <em class="mt">=&gt;</em> <em class="mt">string</em>;<br/>    augmentColor: {<br/>        (<br/>            <em class="mt">color</em>: ColorPartial,<br/>            <em class="mt">mainShade</em>?: <em class="mt">number</em> | <em class="mt">string</em>,<br/>            <em class="mt">lightShade</em>?: <em class="mt">number</em> | <em class="mt">string</em>,<br/>            <em class="mt">darkShade</em>?: <em class="mt">number</em> | <em class="mt">string</em>,<br/>        ): PaletteColor;<br/>        (<em class="mt">color</em>: PaletteColorOptions): PaletteColor;<br/>    };<br/>}<br/>...</span></pre><p id="8b3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr me b">Palette</code>和<code class="fe mp mq mr me b">PaletteOptions</code>很像。但是<code class="fe mp mq mr me b">Palette</code>和<code class="fe mp mq mr me b">PaletteOptions</code>都是出口的。并且它们用在<code class="fe mp mq mr me b">createMuiTheme.d.ts</code>中。并且可以找到<code class="fe mp mq mr me b">Theme</code>类型如下图。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3c82" class="mi kx iq me b gy mj mk l ml mm">node_modules/@material-ui/core/styles/createMuiTheme.d.ts<br/>...<br/>export <em class="mt">interface</em> Theme {<br/>    shape: Shape;<br/>    breakpoints: Breakpoints;<br/>    direction: Direction;<br/>    mixins: Mixins;<br/>    overrides?: Overrides;<br/>    palette: Palette;<br/>    props?: ComponentsProps;<br/>    shadows: Shadows;<br/>    spacing: Spacing;<br/>    transitions: Transitions;<br/>    typography: Typography;<br/>    zIndex: ZIndex;<br/>}</span></pre><p id="d300" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是啊！你找到了！在<code class="fe mp mq mr me b">Theme</code>类型声明中，<code class="fe mp mq mr me b">Palette</code>用于调色板键。所以你不仅要扩展<code class="fe mp mq mr me b">PaletteOptions</code>还要扩展<code class="fe mp mq mr me b">Palette</code>。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="a413" class="mi kx iq me b gy mj mk l ml mm">import * as createPalette from '@material-ui/core/styles/createPalette';</span><span id="6171" class="mi kx iq me b gy mn mk l ml mm">declare module '@material-ui/core/styles/createPalette' {<br/>    interface IconPaletteColorOptions {<br/>        pdf?: string;<br/>        csv?: string;<br/>    }</span><span id="09c3" class="mi kx iq me b gy mn mk l ml mm">    interface IconPaletteColor {<br/>        pdf: string;<br/>        csv: string;<br/>    }</span><span id="afb4" class="mi kx iq me b gy mn mk l ml mm">    interface PaletteOptions {    <br/>        success?: PaletteColorOptions;<br/>        warning?: PaletteColorOptions;<br/>        icon?: IconPaletteColorOptions;<br/>    }</span><span id="d736" class="mi kx iq me b gy mn mk l ml mm">    interface Palette {    <br/>        success: PaletteColor;<br/>        warning: PaletteColor;<br/>        icon: IconPaletteColor;<br/>    }<br/>}</span></pre><p id="42d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。现在你可以完美地使用自定义主题了！你不会得到任何错误！</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/bd0f8f1e006292341782407f68a75b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBaw8dJ7v9j1V7Db7rP9WQ.png"/></div></div></figure><h2 id="91c1" class="mi kx iq bd ky mu mv dn lc mw mx dp lg kj my mz lk kn na nb lo kr nc nd ls ne bi translated">更新于2020年1月25日</h2><p id="45b3" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><a class="ae ms" href="https://github.com/mui-org/material-ui/releases/tag/v4.8.1" rel="noopener ugc nofollow" target="_blank">物料UI 4.8.1版本</a>中新增了警告、成功、信息！所以不用加了。</p><p id="9d85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但遗憾的是一个真正的产品并不是材质UI主题那么简单。我已经将“失败”和“正在处理”添加到我的一个公司服务中。所以知道怎么编辑就好！</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="d5ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文解释了如何在TypeScript中扩展Material-UI主题。但是当您通读本文时，您也理解了如何在包中扩展类型声明。如果你理解如何扩展类型，你的打字技巧将会更上一层楼！</p></div></div>    
</body>
</html>
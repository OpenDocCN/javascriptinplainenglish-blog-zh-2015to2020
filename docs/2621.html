<html>
<head>
<title>Building a game with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用TypeScript构建游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/gamedev-patterns-and-algorithms-in-action-with-typescript-d29b913858e?source=collection_archive---------0-----------------------#2020-07-10">https://javascript.plainenglish.io/gamedev-patterns-and-algorithms-in-action-with-typescript-d29b913858e?source=collection_archive---------0-----------------------#2020-07-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="dd6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于如何使用TypeScript和本机浏览器API从头开始构建游戏的系列教程</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/06b2ca698ca99959ac2c5c80d6bd9abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sDzscFtcyBq-WyJcXYUwnA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://www.freepik.com/free-photos-vectors/background" rel="noopener ugc nofollow" target="_blank">Background vector created by rawpixel.com</a></figcaption></figure><p id="72ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">视频游戏是一个迷人的软件。开发人员必须解决的独特挑战的数量是巨大的。矢量数学和物理，运动和人工智能，图形和渲染…甚至术语本身听起来都很可怕！更不用说，将它们结合和混合在一起会很困难，让人不知所措。但是一定要这样吗？</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="4cfe" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">让我邀请你踏上旅程</h1><p id="eef0" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在这一系列的文章中，我将带你创建一个简单的游戏。我们将从零开始，在艰难险阻中慢慢建立自己的道路。我们将学习什么是<strong class="jm io">实体组件系统</strong>以及如何使用<strong class="jm io"> Canvas API </strong>渲染网格结构。<strong class="jm io">状态玛奇纳</strong>如何帮助设置游戏不同系统的行为。甚至如何实现我们自己的<strong class="jm io">人工智能敌人</strong>。随着每一个新的步骤，我们的工艺变得更加复杂，但可管理和可预测。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2917186140506f56b51e678b7f9ea3c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0sC_nFeCkjmV8JhrHjapMQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://www.freepik.com/free-photos-vectors/car" rel="noopener ugc nofollow" target="_blank">Car vector created by vectorpouch</a></figcaption></figure><p id="113b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有很多优秀的软件都是由聪明且专注的人创造的:Phaser.js、Pixi.js、Unity3d、Three.js，仅举几个例子。但是，我不会在这个系列中涉及这些令人难以置信的技术。我的目标是讲<strong class="jm io">原理</strong>和<strong class="jm io">概念</strong>、<strong class="jm io">模式</strong>和<strong class="jm io">算法</strong>，而不是具体的工具。我们将从头开始构建这个游戏。然而，你将获得的知识是非常可转让的。比方说，如果你意识到如何实现一个<strong class="jm io"> minimax </strong>或<strong class="jm io">寻路</strong>算法，你可以将它们应用于Unity/C#、Unreal/C+、Phaser/TS。这也有助于更好地理解开发人员为这些技术付出的努力。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="af11" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">项目概述</h2><p id="a028" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在本教程中，我们将构建一个简单的棋盘游戏:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl mv"><img src="../Images/c4053cd159230fb881091b535d64148c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qg7x40V-xhhoF3tIXJfiBA.png"/></div></figure><p id="883c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它有两个玩家，每个玩家有N艘船。玩家可以在他们的回合中进行一次“移动”:转移船只或者攻击敌人。当一个玩家失去了所有的船，游戏就结束了。</p><p id="cc2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">听起来很简单，对吧？但是就像其他软件一样，游戏视觉上的简单并不一定意味着开发的简单。为了实施这个简单的游戏，我们必须问(并找到答案！)相当多的问题:</p><ul class=""><li id="24b3" class="mw mx in jm b jn jo jr js jv my jz mz kd na kh nb nc nd ne bi translated">游戏怎么知道现在轮到哪个玩家了？</li><li id="6f0f" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">游戏如何突出和限制玩家重新定位他们的船的距离？</li><li id="0d93" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">我们怎么能渲染网格和船只呢？</li><li id="9206" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">船如何逐渐改变它的位置(也叫动画移动)？</li><li id="5397" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">玩家如何与船只互动以使其移动？</li><li id="b07e" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">“玩家可以攻击敌舰”是什么意思？什么是健康和伤害？</li><li id="a18f" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">游戏敌人AI如何分析并做出合理的决策来试图赢得游戏？</li><li id="0542" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">游戏如何追踪玩家输赢？它将如何让玩家知道它？</li><li id="6f07" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">还有很多很多其他人！</li></ul></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="ddfb" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">先决条件</h2><p id="d548" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在我们进入第一章之前，先说一句预防措施。本教程假设您已经掌握了一套特定的知识。你应该有:</p><ul class=""><li id="8c44" class="mw mx in jm b jn jo jr js jv my jz mz kd na kh nb nc nd ne bi translated">使用现代浏览器执行的经验<strong class="jm io"> javascript </strong></li><li id="d046" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">至少对<strong class="jm io">打字稿</strong>有基本的了解</li><li id="a662" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">很好地掌握了面向对象的编程</li><li id="461f" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nb nc nd ne bi translated">你知道如何使用git</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/c01a75083c1b5824f84678409f471faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gnQi-VwtNPjc6F29Nw8maQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://www.freepik.com/free-photos-vectors/map" rel="noopener ugc nofollow" target="_blank">Map vector created by stories</a> — <a class="ae ky" href="http://www.freepik.com" rel="noopener ugc nofollow" target="_blank">www.freepik.com</a></figcaption></figure><p id="fa75" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">总而言之，你应该知道如何在浏览器中运行、测试和调试你的代码，不要害怕类和接口(它们会有很多！).我不会在本教程中介绍TypeScript的基础知识。幸运的是，有太多的课程/文章/视频可以消化其中的每一部分。就挑一两个你最喜欢的，准备好了再回来！我保证当你具备这些先决条件时，你的旅程将会更加愉快。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="a2b9" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">如何使用本教程</h2><p id="46cb" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">你可以在<a class="ae ky" href="https://github.com/soloschenko-grigoriy/gamedev-patterns-ts" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到源代码。本教程的每一章都包含一个专门的git分支。在每一章的开始，我们将从上一章离开的地方开始。</p><p id="97bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要运行开发服务器，只需使用<code class="fe nl nm nn no b">npm run serve</code>。运行测试:<code class="fe nl nm nn no b">npm t</code>，在观察模式下:<code class="fe nl nm nn no b">npm run test:watch</code></p><blockquote class="np nq nr"><p id="1013" class="jk jl ns jm b jn jo jp jq jr js jt ju nt jw jx jy nu ka kb kc nv ke kf kg kh ig bi translated">请注意，我在这个项目中为TypeScript设置了相当严格的ESLint规则。我使用显式函数返回类型(表达式和高阶函数除外)。我对接口强制使用前缀“I”。我也禁止使用无用的变量和构造函数、分号和双引号。我发现这些规则非常有用。但是记住，这是我的主观选择，不是终极真理。您可以在项目中使用任何林挺规则。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/aa3bf1632ff86e6f12b038001a75cb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5NnV78ETBhS3eMwMk3CoXg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://www.freepik.com/free-photos-vectors/school" rel="noopener ugc nofollow" target="_blank">School vector created by freepik</a></figcaption></figure><p id="f642" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每章中的每个步骤都包含代码片段。您可以复制粘贴它们，然后运行项目。但是我会建议你输入它们。这将帮助你更好地理解和记忆这段代码，并提高教程的效率。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="a89b" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">测试</h2><p id="b313" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">游戏软件相当精细，测试它是一个额外的挑战。然而，这是至关重要的。然而，我并不指望提供100%的覆盖面。否则，这些教程会变得非常长，而且很可能会很无聊。我将花一些时间解释如何对这个游戏中最关键的元素进行单元测试。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="1a15" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">为什么打字稿？</h2><p id="77c2" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">游戏开发行业有两大主导者:C++和C#。虽然许多开发人员使用其他语言，但这两种语言(可以说)是最流行和最广泛的。</p><p id="a898" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TypeScript实际上是JavaScript和C#的后代。它遵循“经典的”面向对象设计，这种设计很好地配合了游戏开发行业中流行的许多模式和方法。而且从句法上来说，非常接近C#。将我们即将获得的知识转移到下一个层次会容易得多，比如说Unity3D/C#</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="37e2" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">等等，gamdev的JavaScript？这不是表演！</h2><p id="3705" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">JavaScript在浏览器中运行，浏览器对其运行的软件进行限制。JS引擎也有其局限性。比较我们开发主机游戏和浏览器游戏的机会是没有意义的。然而，我们并不期待这种水平的性能。</p><p id="49ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的目标是在行动中学习<strong class="jm io">原则</strong>和<strong class="jm io">想法</strong>，而不是发布AAA游戏。所以，javascript和浏览器对我们来说已经足够好了。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="20a5" class="mj lh in bd li mk ml dn lm mm mn dp lq jv mo mp lu jz mq mr ly kd ms mt mc mu bi translated">那么，有什么计划？</h2><p id="63e2" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">在这一系列教程中，我们将涵盖:</p><ol class=""><li id="eb3b" class="mw mx in jm b jn jo jr js jv my jz mz kd na kh nw nc nd ne bi translated"><a class="ae ky" href="https://medium.com/@gregsolo/entity-component-system-in-action-with-typescript-f498ca82a08e" rel="noopener">实体和组件</a> s</li><li id="f4b5" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">游戏循环(<a class="ae ky" href="https://medium.com/@gregsolo/gamedev-patterns-and-algorithms-with-typescript-game-loop-part-1-2-699919bb9b71" rel="noopener">第一部分</a>，<a class="ae ky" href="https://medium.com/@gregsolo/gamedev-patterns-and-algorithms-in-action-with-typescript-game-loop-2-2-c0d57a8e5ec2" rel="noopener">第二部分</a>)</li><li id="d16a" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">绘制网格(<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-drawing-grid-1-5-aaf68797a0bb" rel="noopener">第1部分</a>、<a class="ae ky" href="https://medium.com/javascript-in-plain-english/building-a-game-with-typescript-drawing-grid-2-5-206555719490" rel="noopener">第2部分</a>、<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-drawing-grid-3-5-1fb94211c4aa" rel="noopener">第3部分</a>、<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-iii-drawing-grid-4-5-398af1dd638d" rel="noopener">第4部分</a>、<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-drawing-grid-5-5-49454917b3af" rel="noopener">第5部分</a>)</li><li id="016e" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">舰船(<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-colors-and-layers-337b0e4d71f" rel="noopener">第一部分</a>、<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-team-and-fleet-f223d39e9248" rel="noopener">第二部分</a>、<a class="ae ky" href="https://medium.com/@gregsolo/building-a-game-with-typescript-drawing-ship-14e6c19caa38" rel="noopener">第三部分</a>、<a class="ae ky" href="https://gregsolo.medium.com/building-a-game-with-typescript-ship-and-locomotion-4f5969675993" rel="noopener">第四部分</a>)</li><li id="9dbb" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">输入系统(<a class="ae ky" href="https://gregsolo.medium.com/building-a-game-with-typescript-input-system-1-3-46d0b3dd7662" rel="noopener">第一部分</a>、<a class="ae ky" href="https://gregsolo.medium.com/building-a-game-with-typescript-input-system-2-3-cd419e36027c" rel="noopener">第二部分</a>、<a class="ae ky" href="https://gregsolo.medium.com/building-a-game-with-typescript-input-system-3-3-8492552579f1" rel="noopener">第三部分</a>)</li><li id="33e8" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">第六章。寻路和移动(<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-17-introduction" rel="noopener ugc nofollow" target="_blank">部分1 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-27-highlighting-locomotion-range" rel="noopener ugc nofollow" target="_blank">部分2 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-37-graph-and-priority-queue" rel="noopener ugc nofollow" target="_blank">部分3 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-47-pathfinder" rel="noopener ugc nofollow" target="_blank">部分4 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-57-finding-the-path" rel="noopener ugc nofollow" target="_blank">部分5 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/building-a-game-with-typescript-pathfinding-and-movement-6-instant-locomotion" rel="noopener ugc nofollow" target="_blank">部分6 </a>、<a class="ae ky" href="https://blog.gregsolo.me/articles/pathfinding-and-movement-7-animated-locomotion" rel="noopener ugc nofollow" target="_blank">部分7 </a>)</li><li id="64d5" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">玛奇纳州</li><li id="de55" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">攻击系统:生命和伤害</li><li id="a2b2" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">比赛的输赢</li><li id="3da4" class="mw mx in jm b jn nf jr ng jv nh jz ni kd nj kh nw nc nd ne bi translated">敌人AI</li></ol><p id="6c0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">厉害！介绍到此为止。我迫不及待地想在第一章中见到你！</p></div></div>    
</body>
</html>
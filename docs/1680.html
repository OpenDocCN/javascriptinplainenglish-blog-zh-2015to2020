<html>
<head>
<title>How to Publish Your React component on npm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在npm上发布您的反应组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-publish-your-react-component-on-npm-9cf48d91944d?source=collection_archive---------0-----------------------#2020-04-14">https://javascript.plainenglish.io/how-to-publish-your-react-component-on-npm-9cf48d91944d?source=collection_archive---------0-----------------------#2020-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0b46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">本教程是为经验丰富的反作用开发人员编写的。如果你只是想学习如何构建一个</em><a class="ae km" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"><em class="kl">reactor app</em></a><em class="kl">，网上有大量的教程可供选择！</em></p><p id="257b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，那么你已经阅读了教程，想出了如何使用<code class="fe kn ko kp kq b">create-react-app</code>建立一个反应项目，学习了如何安装npm包，最后创建了你自己的非常实用的反应应用程序，对此我表示祝贺！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f8495ad59c6b620e0c211c0a26e44b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o6QbQCwuPjbSTS6NJhhtSg.png"/></div></div></figure><p id="b93a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您开发应用程序的过程中，您无疑会遇到一些很酷的开源npm包，无论是<a class="ae km" href="https://www.npmjs.com/package/@material-ui/core" rel="noopener ugc nofollow" target="_blank"> material-ui </a>、<a class="ae km" href="https://www.npmjs.com/package/react-router-dom" rel="noopener ugc nofollow" target="_blank">reactor-router</a>还是<a class="ae km" href="https://www.npmjs.com/package/react-spinners" rel="noopener ugc nofollow" target="_blank">reactor-spinners</a>，这些包都让您的开发变得更容易。见鬼，很可能你甚至已经想出了一些你自己的酷反应组件！现在你想知道，我该如何与世界其他人分享？</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="9c69" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">包装您的反应组件</h1><p id="c050" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">在向npm发布任何东西之前，第一步是将您的组件文件放入一个漂亮、干净的包中。我已经创建了一个模板，以使一切更容易理解，继续并<a class="ae km" href="https://github.com/Groftware/template-reactnpm" rel="noopener ugc nofollow" target="_blank">首先下载这个</a>。完成后，在您最喜欢的代码编辑器中打开该文件夹。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/805f5808107ff261c36c91020d444add.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*Qj35PGdY8C59bxibYig6Yg.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">my favorite one is definitely <a class="ae km" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">Visual Studio Code</a></figcaption></figure><h2 id="7927" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">1.添加您的反应组件</h2><p id="3899" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">您要做的第一件事是将您的反应组件文件移动到<code class="fe kn ko kp kq b">/src</code>文件夹中。出于演示的目的，我创建了一个名为<code class="fe kn ko kp kq b">MyCoolButton.js</code>的组件。确保还包括组件所需的所有文件。在这种情况下，我在<code class="fe kn ko kp kq b">MyCoolButton.css</code>中也增加了。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/4ce60f979a1d9df61494552965a8774c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*6f3MFY2r2ZYHb5VkcP33pA.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">Add your component files into /src folder</figcaption></figure><h2 id="c65b" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">2.整理依赖关系</h2><p id="3759" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">下一件你必须做的事情是弄清楚你的组件是否需要任何其他的依赖。您可以通过打开您的组件文件并检查它是否导入任何其他依赖项来发现这一点。在这种情况下，我的组件需要依赖<code class="fe kn ko kp kq b">prop-types</code>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nf ng l"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">MyCoolButton.js</figcaption></figure><p id="0564" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们打开<code class="fe kn ko kp kq b">package.json</code>，并添加依赖项。通常您会在<code class="fe kn ko kp kq b">dependencies</code>下添加您的依赖项，但是在这种情况下，您必须将它们添加到<code class="fe kn ko kp kq b">peerDependencies</code>和<code class="fe kn ko kp kq b">devDependencies</code>中。这就是你的<code class="fe kn ko kp kq b">package.json</code>应该的样子。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nf ng l"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">Notice that the list of dependencies is empty</figcaption></figure><p id="c3e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，运行<code class="fe kn ko kp kq b">npm install</code>(或者如果使用<a class="ae km" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> yarn </a>，<code class="fe kn ko kp kq b">yarn install</code>)安装所需的依赖项。</p><h2 id="6d11" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">3.网络包.配置. js</h2><p id="b59b" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">接下来，我们将使用Webpack将React组件捆绑到一个漂亮的CommonJS模块中。点击这里了解更多关于Webpack及其功能的信息。先开<code class="fe kn ko kp kq b">webpack.config.js</code>吧。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7b65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个文件包含Webpack将用来捆绑React组件的不同配置。以下是对重要设置的描述:</p><p id="a5b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kn ko kp kq b">entry</code> —这是指您的React组件。您应该将其更改为您在<strong class="jp ir">步骤1 </strong>中添加的组件。</p><p id="9fbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kn ko kp kq b">output</code> —指定输出文件的路径。您应该更新<code class="fe kn ko kp kq b">filename</code>来匹配您的组件的文件名。</p><p id="4dc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kn ko kp kq b">module.rules</code> —这是我们应用于模块的一组规则。第一个规则寻找任何<code class="fe kn ko kp kq b">.js</code>文件，并尝试使用<code class="fe kn ko kp kq b">babel-loader</code>将它<a class="ae km" href="https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them" rel="noopener ugc nofollow" target="_blank">转换为</a>。然而，第二条规则只有在您的组件使用<code class="fe kn ko kp kq b">css</code>时才相关。如果你的组件使用任何<code class="fe kn ko kp kq b">css</code>，你将不得不添加它。点击此处了解更多关于<code class="fe kn ko kp kq b"><a class="ae km" href="https://webpack.js.org/loaders/css-loader/" rel="noopener ugc nofollow" target="_blank">css-loader</a></code>和<code class="fe kn ko kp kq b"><a class="ae km" href="https://webpack.js.org/loaders/style-loader/" rel="noopener ugc nofollow" target="_blank">style-loader</a></code>的信息。</p><blockquote class="nh ni nj"><p id="e4ae" class="jn jo kl jp b jq jr js jt ju jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj kk ij bi translated"><strong class="jp ir">重要提示</strong></p><p id="15da" class="jn jo kl jp b jq jr js jt ju jv jw jx nk jz ka kb nl kd ke kf nm kh ki kj kk ij bi translated">如果您的组件使用了<code class="fe kn ko kp kq b">.sass</code>或<code class="fe kn ko kp kq b">.scss</code>，那么您必须将<code class="fe kn ko kp kq b"><a class="ae km" href="https://webpack.js.org/loaders/sass-loader" rel="noopener ugc nofollow" target="_blank">sass-loader</a></code>添加到您的Webpack模块规则中，并将其添加到您在<code class="fe kn ko kp kq b">package.json</code>中的<code class="fe kn ko kp kq b">devDependencies</code>列表中。<a class="ae km" href="https://webpack.js.org/loaders/" rel="noopener ugc nofollow" target="_blank">点击此处</a>查看您可能需要使用的装载机列表。</p></blockquote><p id="ecbf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我只浏览了与本教程相关的选项。点击查看选项的完整列表<a class="ae km" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="a979" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">4.把他们捆起来</h2><p id="76fd" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">运行<code class="fe kn ko kp kq b">npm run build</code>(或者如果使用纱线，<code class="fe kn ko kp kq b">yarn build</code>)。这将生成一个名为<code class="fe kn ko kp kq b">/lib</code>的文件夹，其中包含新打包的组件，在本例中为<code class="fe kn ko kp kq b">MyCoolButton.js</code>。</p><h2 id="be7a" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">5.测试您的组件</h2><p id="0ae8" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">在你向全世界发布它之前，先对你的包进行一次测试是有意义的(或者如果你绝对相信它可以工作，可以随意跳到【T21出版】到NPM )。</p><p id="db34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行<code class="fe kn ko kp kq b">npm pack</code>。这将在根目录下生成一个<code class="fe kn ko kp kq b">.tgz</code>文件。</p><p id="1af3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">打开任何想要测试新包的React应用程序，然后运行<code class="fe kn ko kp kq b">npm install path_to_tgz_file</code>。用您的实际路径替换<code class="fe kn ko kp kq b">path_to_tgz_file</code>。</p><p id="96aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的例子中，整个命令看起来像这样:<code class="fe kn ko kp kq b">npm install /Users/Groftware/mycoolbutton/mycoolbutton-0.0.1.tgz</code>。</p><p id="dd26" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来您要做的就是导入组件并正常使用它</p><pre class="ks kt ku kv gt nn kq no np aw nq bi"><span id="530c" class="ms ll iq kq b gy nr ns l nt nu">import React from 'react';<br/>import MyCoolButton from 'mycoolbutton';</span><span id="ce41" class="ms ll iq kq b gy nv ns l nt nu">function App() {<br/> return (<br/>    &lt;div&gt;<br/>      &lt;MyCoolButton title="Click Me!"/&gt;<br/>    &lt;div&gt;<br/>  )<br/>}</span><span id="d309" class="ms ll iq kq b gy nv ns l nt nu">export default App;</span></pre><p id="bc52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有用吗？太好了！让我们继续向全世界发布它。</p><h1 id="2b50" class="lk ll iq bd lm ln nw lp lq lr nx lt lu lv ny lx ly lz nz mb mc md oa mf mg mh bi translated">发布到NPM</h1><p id="5b2b" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">好了，现在你有了你的<code class="fe kn ko kp kq b">/lib</code>文件夹和你新打包的组件，接下来要做的就是把它发布到npm。</p><p id="2cb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行<code class="fe kn ko kp kq b">npm login</code>并使用您的npm帐户登录。如果您还没有，请在此处创建一个<a class="ae km" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f4fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">登录后，最后要做的是<code class="fe kn ko kp kq b">npm publish</code>，一切就绪！</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><div class="ks kt ku kv gt ob"><a href="http://eepurl.com/gZEdtb" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">软件开发</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">你准备好进入下一关了吗？🚀立即注册我们的时事通讯，接收新鲜出炉的软件开发…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">eepurl.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op lb ob"/></div></div></a></div><h1 id="9aa6" class="lk ll iq bd lm ln nw lp lq lr nx lt lu lv ny lx ly lz nz mb mc md oa mf mg mh bi translated">链接</h1><h2 id="f7fc" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">教程模板和完整示例</h2><ul class=""><li id="b152" class="oq or iq jp b jq mi ju mj jy os kc ot kg ou kk ov ow ox oy bi translated"><a class="ae km" href="https://github.com/Groftware/template-reactnpm" rel="noopener ugc nofollow" target="_blank">模板</a></li><li id="6ec9" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://github.com/Groftware/MyCoolButton" rel="noopener ugc nofollow" target="_blank">完整示例</a></li><li id="2a09" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://www.npmjs.com/package/mycoolbutton" rel="noopener ugc nofollow" target="_blank">发布npm包</a></li></ul><h2 id="ee9b" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">反应</h2><ul class=""><li id="acef" class="oq or iq jp b jq mi ju mj jy os kc ot kg ou kk ov ow ox oy bi translated"><a class="ae km" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/</a></li></ul><h2 id="78cd" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">Npm</h2><ul class=""><li id="8bfb" class="oq or iq jp b jq mi ju mj jy os kc ot kg ou kk ov ow ox oy bi translated"><a class="ae km" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/signup</a></li><li id="8c53" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://www.npmjs.com/package/@material-ui/core" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/@material-ui/core</a></li><li id="9974" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://www.npmjs.com/package/react-router-dom" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-router-dom</a></li><li id="6db5" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://www.npmjs.com/package/react-spinners" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-spinners</a></li></ul><h2 id="6e85" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">故事</h2><ul class=""><li id="5007" class="oq or iq jp b jq mi ju mj jy os kc ot kg ou kk ov ow ox oy bi translated"><a class="ae km" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">https://yarnpkg.com/</a></li></ul><h2 id="df5a" class="ms ll iq bd lm mt mu dn lq mv mw dp lu jy mx my ly kc mz na mc kg nb nc mg nd bi translated">网络包</h2><ul class=""><li id="2df6" class="oq or iq jp b jq mi ju mj jy os kc ot kg ou kk ov ow ox oy bi translated"><a class="ae km" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/</a></li><li id="d699" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://webpack.js.org/loaders/css-loader/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/loaders/css-loader/</a></li><li id="4eae" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://webpack.js.org/loaders/style-loader/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/loaders/style-loader/</a></li><li id="1873" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://webpack.js.org/loaders/sass-loader" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/loaders/sass-loader</a></li><li id="9bd8" class="oq or iq jp b jq oz ju pa jy pb kc pc kg pd kk ov ow ox oy bi translated"><a class="ae km" href="https://webpack.js.org/loaders/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/loaders/</a></li></ul></div></div>    
</body>
</html>
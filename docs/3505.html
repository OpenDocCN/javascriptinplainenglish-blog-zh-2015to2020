<html>
<head>
<title>Query vs. URL Parameters in Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Express.js中的查询与URL参数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/query-strings-url-parameters-d1a35b9a694f?source=collection_archive---------2-----------------------#2020-10-05">https://javascript.plainenglish.io/query-strings-url-parameters-d1a35b9a694f?source=collection_archive---------2-----------------------#2020-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a274" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">区别以及何时使用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/450fc1c2b182d6c5ebcc85bdb8b0d217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dmCJUNB4kZH3rs7Bec9gBQ.png"/></div></div></figure><p id="1574" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个常见的问题是，对于一个API，您应该使用查询参数还是URL参数，以及这两者之间的区别在哪里，这完全独立于Express.js框架。</p><p id="21fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里是所有的答案和代码示例，您需要了解它们的区别和应用，并使用它们构建您的下一个Express.js API。</p><h1 id="7ddd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">基本语法</h1><p id="fd13" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们先来看看两者是如何架构的。</p><p id="d4b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">查询参数:<code class="fe mk ml mm mn b">domain.com/path?key=value</code></p><p id="28f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">URL参数:<code class="fe mk ml mm mn b">domain.com/path/value</code></p><p id="4832" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这两种情况下，路径都是可选的，当然，我们也可以接受参数为root-URL ( <code class="fe mk ml mm mn b">domain.com/</code>)。</p><p id="97a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">真实例子:</p><p id="3307" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">查询参数:<code class="fe mk ml mm mn b">domain.com/products?search=tomato</code></p><p id="a94e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">URL参数:<code class="fe mk ml mm mn b">domain.com/products/tomato</code></p><p id="820f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这两种情况下，<em class="mo"> tomato </em>是我们发送给web服务器的值。</p><h1 id="f024" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">区别——以及何时使用什么</h1><p id="8073" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">简而言之，我们可以对两者做同样的事情——技术上没有区别，所以我们可以对查询参数或URL参数(也称为路由参数)使用相同的API。正如您马上会看到的，您可以用两者传递多个数据。所以最终，还是取决于你。然而，至于其他几乎所有的事情，都有标准。遵循它们是有意义的——首先，你知道标准本身，可以更好地理解别人的代码。其次，遵循这些标准，你可以编写自己的代码，让别人理解。</p><p id="7f9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是标准:</p><p id="156e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们使用URL / Path参数来访问服务器上的资源。例如，可以通过ID或标签找到的用户。实际的例子是互联网上具有以下URL语法的平台:<code class="fe mk ml mm mn b">domain.com/&lt;username&gt;</code>。有时候前面还有一个@标志。</p><p id="715d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以用一个URL参数简单而优雅地实现这一点:</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="db71" class="mt lo iq mn b gy mu mv l mw mx">app.get(“/:username”, (req, res) =&gt; {<br/>  res.send(req.params.username)<br/>})</span></pre><p id="c7d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在在斜杠后面输入的所有内容都可以被Express.js处理——例如在数据库查询中。对于现实世界的平台，这些通常是像<code class="fe mk ml mm mn b">twitter.com/louispetrik</code>这样的URL。</p><p id="6188" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">URL参数较短，但可读性较差，因此不太适合将多个参数放在一行中。</p><p id="2728" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">特别是对于搜索引擎优化，我们希望保持我们的网址苗条。并且应该在搜索引擎中显示的页面是例如用户页面或者产品和类别页面。而不是代表猫粮价格排序列表的页面(没有人会谷歌这样的东西)。</p><p id="37a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，URL参数So应该用来输出一个“整体的”、静态的资源。</p><p id="0976" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一个的优点是另一个的缺点。查询参数更长，可读性更强，因为它们表示URL中的键。这使得它更容易，例如在开发过程中，它们应该被用来链接到不应该在搜索引擎中排名的页面，通常在一个URL中有几个查询参数，例如对于结果页面，对于产品。例如，我们需要一个关键字和一个排序。</p><h2 id="fa18" class="mt lo iq bd lp my mz dn lt na nb dp lx la nc nd lz le ne nf mb li ng nh md ni bi translated">总结一下:</h2><ul class=""><li id="4503" class="nj nk iq kt b ku mf kx mg la nl le nm li nn lm no np nq nr bi translated"><strong class="kt ir"> URL参数</strong>用于指向静态资源的干净的、小的、搜索引擎友好的URL</li><li id="1b55" class="nj nk iq kt b ku ns kx nt la nu le nv li nw lm no np nq nr bi translated"><strong class="kt ir">查询参数</strong>更长、可读性更强的网址，后面跟着动态内容，与搜索引擎无关。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/c97ff0f48327401b6d76a875df9cb781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E3ts2iGTnvlIizZLE-wHjQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">Query Parameter in the Amazon Product Search</figcaption></figure><h1 id="5e05" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">Express.js中的URL参数</h1><p id="1cc9" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">请求URL参数并不难。我们通过<code class="fe mk ml mm mn b">:param_name</code>来识别它们，然后可以将它们作为request-object的一个元素输出。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="138e" class="mt lo iq mn b gy mu mv l mw mx">// localhost/max =&gt; output: max</span><span id="616b" class="mt lo iq mn b gy oc mv l mw mx">app.get(“/:username”, (req, res) =&gt; {<br/>  res.send(req.params.username)<br/>})</span></pre><p id="0011" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也可以在一行中有几个参数。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="1920" class="mt lo iq mn b gy mu mv l mw mx">// localhost/max/23 =&gt; output: max 23</span><span id="c479" class="mt lo iq mn b gy oc mv l mw mx">app.get(“/user/:name/:age”, (req, res) =&gt; {<br/>  res.send(req.params.name + “ “ + req.params.age)<br/>})</span></pre><h1 id="1c57" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">Express.js中的查询参数</h1><p id="346c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">查询参数的工作方式几乎相同。但是与URL参数相反，我们没有定义我们所期望的。所有接收到的参数都可以在<code class="fe mk ml mm mn b">req.query</code>对象中获得。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="1dee" class="mt lo iq mn b gy mu mv l mw mx">// localhost/user?name=max =&gt; output: max</span><span id="a85d" class="mt lo iq mn b gy oc mv l mw mx">app.get(“/user”, (req, res) =&gt; {<br/>  res.send(req.query.name)<br/>})</span></pre><p id="bb8b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">新参数总是用问号标记。</p><p id="865a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也可以在URL中传递多个参数。重要的是，我们用and符号将它们分开。但是我们不需要另一个问号。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="cf45" class="mt lo iq mn b gy mu mv l mw mx">// localhost/user?name=max&amp;age=23 output: max 23</span><span id="83b6" class="mt lo iq mn b gy oc mv l mw mx">app.get(“/user”, (req, res) =&gt; {<br/>  res.send(req.query.name + “ “ + req.query.age)<br/>})</span></pre><p id="c1b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读！</p><p id="8569" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae od" href="http://eepurl.com/hacY0v" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">加入我的简讯保持联系</strong> </a></p></div></div>    
</body>
</html>
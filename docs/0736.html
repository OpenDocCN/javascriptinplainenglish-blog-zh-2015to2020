<html>
<head>
<title>Improve your conditional blocks with enhanced switch/case statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用增强的switch/case语句改进您的条件块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/improve-you-conditional-blocks-with-enhanced-switch-case-statements-8f4cadd20b27?source=collection_archive---------7-----------------------#2019-12-03">https://javascript.plainenglish.io/improve-you-conditional-blocks-with-enhanced-switch-case-statements-8f4cadd20b27?source=collection_archive---------7-----------------------#2019-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="b8af" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">Javascript的基础知识</h2><div class=""/><div class=""><h2 id="327f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">一些你可能不知道的关于switch/case语句的基本技巧，可以帮助你在某些情况下写出更好的代码。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/4d450db52fc10bbdecc1ffcd607744a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2u0sSNn2QudoJC6AdMHRWA.png"/></div></div></figure><p id="75b2" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="lw">有大的条件块？需要用非常简单的代码构建一个定制的验证器吗？想要一个很酷的IDE折叠功能？</em></p><p id="5cfd" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">我们来探讨一下</strong> <code class="fe lx ly lz ma b"><strong class="lc ja">switch/case</strong></code> <strong class="lc ja">指令之外的基础知识。</strong></p><p id="88f1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><code class="fe lx ly lz ma b">switch</code>语句确实是一个很好的工具。它是一种语言，允许你为一个值选择不同的选项，并根据设置的值运行不同的代码。</p><p id="7427" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">如果你重复大量的</strong> <code class="fe lx ly lz ma b"><strong class="lc ja">if</strong></code> <strong class="lc ja">语句，使用switch语句可以极大地简化你的代码。</strong></p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="20db" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">👨🏻‍🎓switch/case语句的基础</h1><p id="edde" class="pw-post-body-paragraph la lb iq lc b ld na ka lf lg nb kd li lj nc ll lm ln nd lp lq lr ne lt lu lv ij bi translated">但首先，让我们简单回顾一下这句话的目的。</p><p id="9b47" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">考虑下面的代码示例，它根据上下文显示一些文本:</p><pre class="kp kq kr ks gt nf ma ng nh aw ni bi"><span id="2fe0" class="nj mj iq ma b gy nk nl l nm nn">const color= "green";</span><span id="83b7" class="nj mj iq ma b gy no nl l nm nn">if(color === "red")<br/>  console.log("color is red");<br/>else if (color === "blue"){<br/>  console.log("color is blue");<br/>} else {<br/>  console.log("color might be green…");<br/>}</span></pre><p id="290c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">没什么特别的，我们可以注意到，这是一个有点难以阅读的指示，如果不是相同的缩进。此外，一些代码编辑器的折叠功能可能不会像我们预期的那样直观地工作。</p><p id="c53c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在让我们看看使用<code class="fe lx ly lz ma b">switch/case</code>语句的相同指令:</p><pre class="kp kq kr ks gt nf ma ng nh aw ni bi"><span id="1029" class="nj mj iq ma b gy nk nl l nm nn">const color = "green";</span><span id="6993" class="nj mj iq ma b gy no nl l nm nn">switch(color){<br/>  case "red":<br/>    console.log("color is red");<br/>    break;<br/>  case "blue":<br/>    console.log("color is blue");<br/>    break;<br/>  default:<br/>    console.log("color might be green…");<br/>}</span></pre><p id="b23f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这有点冗长，但标准化的缩进更具可读性。事实上对于这样的小条件，if/else是完美的，你可以避免使用switch语句。</p><p id="e490" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当我们有一个大的<code class="fe lx ly lz ma b">if</code>语句序列时，或者在稍微复杂一点的条件块中，比如下面的级联用例中，<code class="fe lx ly lz ma b">switch/case</code>语句大放异彩。</p><h1 id="6ba8" class="mi mj iq bd mk ml np mn mo mp nq mr ms kf nr kg mu ki ns kj mw kl nt km my mz bi translated">switch语句的🤿穿越/级联</h1><p id="4dc5" class="pw-post-body-paragraph la lb iq lc b ld na ka lf lg nb kd li lj nc ll lm ln nd lp lq lr ne lt lu lv ij bi translated"><code class="fe lx ly lz ma b">switch/case</code>的一个很好的特性是落差(或层叠)。</p><p id="af8d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这意味着无论何时出现大小写匹配，解释器都会逐行执行指令，直到遇到<strong class="lc ja">停止指令</strong>。该指令将使解释器退出交换机。</p><p id="a0d4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">有3个停止指令:</strong><code class="fe lx ly lz ma b"><strong class="lc ja">break</strong></code><strong class="lc ja"/><code class="fe lx ly lz ma b"><strong class="lc ja">return</strong></code><strong class="lc ja"/><code class="fe lx ly lz ma b"><strong class="lc ja">throw</strong></code><strong class="lc ja">。</strong></p><p id="d081" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">💡注意:<em class="lw"> </em> </strong> <em class="lw">你可以依赖其中任何一个，但不要忘记使用其中一个。否则，您可能会触发不自觉的级联、意外状态，并以难以调试的情况结束。</em></p><p id="15f0" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">以下示例演示了使用级联的<code class="fe lx ly lz ma b">switch/case</code>语句的访问控制功能。</p><ul class=""><li id="2706" class="nu nv iq lc b ld le lg lh lj nw ln nx lr ny lv nz oa ob oc bi translated">如果用户角色是<code class="fe lx ly lz ma b">EDITOR</code>或<code class="fe lx ly lz ma b">ADMIN</code>，那么用户可以编辑文章。</li><li id="a44c" class="nu nv iq lc b ld od lg oe lj of ln og lr oh lv nz oa ob oc bi translated">否则，用户将被拒绝编辑。</li></ul><pre class="kp kq kr ks gt nf ma ng nh aw ni bi"><span id="cdb3" class="nj mj iq ma b gy nk nl l nm nn">const requestUserRole = "ADMIN";</span><span id="8e5c" class="nj mj iq ma b gy no nl l nm nn">function isAllowedToEdit(role){<br/>  switch(role){<br/>    case "ADMIN":<br/>    case "EDITOR":<br/>      return true; // User is allowed<br/>    default:<br/>      return false; // User is denied<br/>  }<br/>}</span><span id="ccaa" class="nj mj iq ma b gy no nl l nm nn">console.log(isAllowedToEdit(requestUserRole));<br/>// Returns true</span></pre><p id="f050" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在第一种情况下不使用停止指令会使解释器逐行执行，直到第一条返回指令。所以这里它返回<code class="fe lx ly lz ma b">true</code>。</p><h1 id="4834" class="mi mj iq bd mk ml np mn mo mp nq mr ms kf nr kg mu ki ns kj mw kl nt km my mz bi translated">🦾高级开关/外壳使用</h1><p id="0bc8" class="pw-post-body-paragraph la lb iq lc b ld na ka lf lg nb kd li lj nc ll lm ln nd lp lq lr ne lt lu lv ij bi translated">我们甚至可以更进一步，你可能没有意识到:<code class="fe lx ly lz ma b">switch </code>指令不仅允许打开一个变量的值，而且任何表达式也是<strong class="lc ja">可用的，只要我们给出一个匹配</strong>的例子。</p><p id="57f9" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">例如，这里有一个使用<code class="fe lx ly lz ma b">switch</code>语句编写的简单数据验证器，它符合以下规则:</p><ul class=""><li id="9f11" class="nu nv iq lc b ld le lg lh lj nw ln nx lr ny lv nz oa ob oc bi translated">该字符串至少有5个字符长。</li><li id="90cb" class="nu nv iq lc b ld od lg oe lj of ln og lr oh lv nz oa ob oc bi translated">该字符串不应包含任何数字。</li></ul><p id="ba5d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为此，我们将使用一个<code class="fe lx ly lz ma b">switch(true)</code>语句。</p><pre class="kp kq kr ks gt nf ma ng nh aw ni bi"><span id="a705" class="nj mj iq ma b gy nk nl l nm nn">const valueToValidate = "hello world";</span><span id="4c5b" class="nj mj iq ma b gy no nl l nm nn">async function customValidation(value){<br/>  switch(true) {<br/>    case (value.length &lt; 5):<br/>      throw new Error("Given string is too short!");<br/>    case (value.match(/\d+/) !== null):<br/>      throw new Error("No numeric allowed!");<br/>    default:<br/>      return Promise.resolve("String is valid");<br/>  }<br/>}</span><span id="5c18" class="nj mj iq ma b gy no nl l nm nn">customValidation(valueToValidate)<br/>  .then(success =&gt; console.log(success))<br/>  .catch(err =&gt; console.log(err));<br/>// Displays « String is valid »</span></pre><ul class=""><li id="66a0" class="nu nv iq lc b ld le lg lh lj nw ln nx lr ny lv nz oa ob oc bi translated">如果字符串少于5个字符，第一种情况将返回true，触发我们的错误。</li><li id="c90a" class="nu nv iq lc b ld od lg oe lj of ln og lr oh lv nz oa ob oc bi translated">如果在字符串中检测到任何数字，第二种情况将为true并抛出。</li></ul><p id="3e38" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们在这里使用了简单的比较，但是您可以完美地使用任何返回布尔值的函数。当你有大量的条件逻辑并且不想依赖太多的if/else语句时，这可能很酷。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div></div>    
</body>
</html>
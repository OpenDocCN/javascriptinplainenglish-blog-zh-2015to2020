<html>
<head>
<title>An Introduction to JavaScript’s Geolocation API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript地理定位API简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-javascripts-geolocation-api-b01ca61e47f8?source=collection_archive---------0-----------------------#2019-12-27">https://javascript.plainenglish.io/introduction-to-javascripts-geolocation-api-b01ca61e47f8?source=collection_archive---------0-----------------------#2019-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="bc1b" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">地理编码入门</h2><div class=""/><div class=""><h2 id="d43f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">JavaScript的地理定位API是什么，如何使用客户端API</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/cc1102751679055ca4848ef018eab53a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqymJuhjJY8iaam76iOShg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by AbsolutVision on <a class="ae le" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1bc1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi mb translated"><span class="l mc md me bm mf mg mh mi mj di"> L </span>让我们探索一种简单的方法来获取我们网站上用户的纬度和经度，以及他们调用它的位置的地图。这个过程是所谓的<a class="ae le" href="https://en.wikipedia.org/wiki/Geocoding" rel="noopener ugc nofollow" target="_blank">地理编码</a>的一部分。</p><blockquote class="mk"><p id="ca3c" class="ml mm iq bd mn mo mp mq mr ms mt ma dk translated">有趣的是，在这篇文章中，你可以用你自己的位置做到这一点。</p></blockquote><p id="5ec8" class="pw-post-body-paragraph lf lg iq lh b li mu ka lk ll mv kd ln lo mw lq lr ls mx lu lv lw my ly lz ma ij bi translated">JavaScript提供了一个API，<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" rel="noopener ugc nofollow" target="_blank">地理定位API </a>，它为我们提供了一种获取纬度和经度等信息的方法。</p><p id="0b78" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有了这个，我们就可以使用我们最喜欢的地图软件，显示它们的位置，或者将它们存储在数据库中，以备日后分析。</p><p id="9584" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我们将只关注纬度和经度，并在<a class="ae le" href="https://wiki.openstreetmap.org/wiki/About_OpenStreetMap" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a>中查看。</p><h2 id="baa6" class="mz na iq bd nb nc nd dn ne nf ng dp nh lo ni nj nk ls nl nm nn lw no np nq iw bi translated">我们将使用地理定位API的哪一部分？</h2><p id="371a" class="pw-post-body-paragraph lf lg iq lh b li nr ka lk ll ns kd ln lo nt lq lr ls nu lu lv lw nv ly lz ma ij bi translated">对于本文，我们将使用<strong class="lh ja"> navigator.geolocation </strong>和方法<strong class="lh ja"> getCurrentPosition() </strong>。</p><p id="2fd8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如MDN中所述，</p><blockquote class="nw nx ny"><p id="8a13" class="lf lg nz lh b li lj ka lk ll lm kd ln oa lp lq lr ob lt lu lv oc lx ly lz ma ij bi translated">通过调用<code class="fe od oe of og b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/geolocation" rel="noopener ugc nofollow" target="_blank">Navigator.geolocation</a></code>来访问地理定位API这将导致用户的浏览器询问他们是否允许访问他们的位置数据。如果他们接受，那么浏览器将使用设备上最好的可用功能来访问这些信息(例如，GPS)。</p></blockquote><p id="03e0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe od oe of og b"><a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition" rel="noopener ugc nofollow" target="_blank">Geolocation.getCurrentPosition()</a></code>:检索设备的当前位置、纬度和经度。</p><p id="0887" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了使本文简短，我们将只提供所需的参数，这是一个成功时的回调函数。我们将为此使用一个箭头函数。</p><h2 id="ff79" class="mz na iq bd nb nc nd dn ne nf ng dp nh lo ni nj nk ls nl nm nn lw no np nq iw bi translated">HTML</h2><p id="d7c3" class="pw-post-body-paragraph lf lg iq lh b li nr ka lk ll ns kd ln lo nt lq lr ls nu lu lv lw nv ly lz ma ij bi translated">创建一个叫做<strong class="lh ja">geo.html的页面。</strong>根据需要保存。</p><pre class="kp kq kr ks gt oh og oi oj aw ok bi"><span id="f612" class="mz na iq og b gy ol om l on oo">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>&lt;meta charset="UTF-8"&gt;<br/>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>&lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;</span><span id="71b6" class="mz na iq og b gy op om l on oo">&lt;title&gt;Location Test&lt;/title&gt;<br/>&lt;/head&gt;</span><span id="8e8f" class="mz na iq og b gy op om l on oo">&lt;body&gt;<br/>&lt;button onclick='locate();' &gt;Get Location&lt;/button&gt;<br/>&lt;h1 id = 'posStatus'&gt;&lt;/h1&gt;<br/>&lt;a id = 'locInfo' target="#"&gt;&lt;/a&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><ul class=""><li id="9c64" class="oq or iq lh b li lj ll lm lo os ls ot lw ou ma ov ow ox oy bi translated"><strong class="lh ja"> posStatus </strong>将仅显示信息“定位…”但也可作为错误显示。</li><li id="cf51" class="oq or iq lh b li oz ll pa lo pb ls pc lw pd ma ov ow ox oy bi translated"><strong class="lh ja"> locInfo </strong>将显示纬度和经度以及到OpenStreetMap的链接，带有纬度和经度参数。</li></ul><h2 id="eaa2" class="mz na iq bd nb nc nd dn ne nf ng dp nh lo ni nj nk ls nl nm nn lw no np nq iw bi translated">JavaScript</h2><p id="23bd" class="pw-post-body-paragraph lf lg iq lh b li nr ka lk ll ns kd ln lo nt lq lr ls nu lu lv lw nv ly lz ma ij bi translated">在标签中添加以下内容。</p><pre class="kp kq kr ks gt oh og oi oj aw ok bi"><span id="e530" class="mz na iq og b gy ol om l on oo">&lt;script&gt;</span><span id="3e19" class="mz na iq og b gy op om l on oo">function locate() {<br/>   const posStatus = document.querySelector('#posStatus');<br/>   const locInfo = document.querySelector('#locInfo');</span><span id="05e1" class="mz na iq og b gy op om l on oo">   posStatus.innerHTML='Locating...'</span><span id="3362" class="mz na iq og b gy op om l on oo">   if (navigator.geolocation) {<br/>      navigator.geolocation.getCurrentPosition((position)=&gt;{<br/>      const lat  = position.coords.latitude;<br/>      const long = position.coords.longitude;</span><span id="e71f" class="mz na iq og b gy op om l on oo">      posStatus.innerHTML='Location';</span><span id="f2d4" class="mz na iq og b gy op om l on oo">      // Display Latitude and Longitude<br/>      locInfo.innerHTML = `Latitude: ${lat}, Longitude: ${long}`;</span><span id="eec6" class="mz na iq og b gy op om l on oo">      // Create the link. Use map=15-19 for zooming out and in<br/>      // Pass lat and long to openstreetmap<br/>      locInfo.href = `https://www.openstreetmap.org/#map=19/${lat}  /${long}`;</span><span id="7a47" class="mz na iq og b gy op om l on oo">      });<br/>   }<br/>}<br/>&lt;/script&gt;</span></pre><h2 id="b3a9" class="mz na iq bd nb nc nd dn ne nf ng dp nh lo ni nj nk ls nl nm nn lw no np nq iw bi translated">运行它</h2><p id="d016" class="pw-post-body-paragraph lf lg iq lh b li nr ka lk ll ns kd ln lo nt lq lr ls nu lu lv lw nv ly lz ma ij bi translated">在浏览器中打开geo.html，然后单击“获取位置”按钮。</p><p id="4302" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">出现提示时，点按“允许访问”</p><p id="9288" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">过了一会儿，您应该会看到，</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/39877659ab1b18b58e404c4b94fe6783.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*m4ohwG75dFMQ8b6MTHFjgQ.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Your current location</figcaption></figure><blockquote class="nw nx ny"><p id="a415" class="lf lg nz lh b li lj ka lk ll lm kd ln oa lp lq lr ob lt lu lv oc lx ly lz ma ij bi translated">如果你点击纬度或经度链接，它会以19倍的缩放比例显示你在OpenStreetMap中的位置。</p></blockquote><h1 id="093d" class="pf na iq bd nb pg ph pi ne pj pk pl nh kf pm kg nk ki pn kj nn kl po km nq pp bi translated">结论</h1><p id="2100" class="pw-post-body-paragraph lf lg iq lh b li nr ka lk ll ns kd ln lo nt lq lr ls nu lu lv lw nv ly lz ma ij bi translated">这是一个简单的例子，旨在向您介绍一个很酷的JavaScript API。</p><p id="e71b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我鼓励你探索其他一些很酷的选项，比如<em class="nz">高度、航向和速度</em>。可通过访问<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" rel="noopener ugc nofollow" target="_blank"> MDN </a>获得。</p><p id="a862" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">感谢您的阅读和快乐编码(定位和跟踪！)</strong></p><p id="d2d4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在Medium上阅读所有你想要的文章，并通过成为Medium会员来帮助我继续写作，每月只需5美元。</p><div class="pq pr gp gr ps pt"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd ja gy z fp py fr fs pz fu fw iz bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qc l"><div class="qd l qe qf qg qc qh ky pt"/></div></div></a></div><p id="c995" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您可能还喜欢node.js中的一些服务器端地理编码。</p><div class="pq pr gp gr ps pt"><a href="https://medium.com/javascript-in-plain-english/an-introduction-to-geocoding-using-node-js-fe1a5d3aa05c" rel="noopener follow" target="_blank"><div class="pu ab fo"><div class="pv ab pw cl cj px"><h2 class="bd ja gy z fp py fr fs pz fu fw iz bi translated">使用Node.js进行地理编码简介</h2><div class="qa l"><h3 class="bd b gy z fp py fr fs pz fu fw dk translated">地理信息的服务器端访问</h3></div><div class="qb l"><p class="bd b dl z fp py fr fs pz fu fw dk translated">medium.com</p></div></div><div class="qc l"><div class="qi l qe qf qg qc qh ky pt"/></div></div></a></div></div></div>    
</body>
</html>
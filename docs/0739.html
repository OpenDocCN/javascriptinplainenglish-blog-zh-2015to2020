<html>
<head>
<title>Handy JavaScript Tricks — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方便的JavaScript技巧—第2部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/handy-javascript-tricks-part-2-7ad61cb3a2f8?source=collection_archive---------10-----------------------#2019-12-03">https://javascript.plainenglish.io/handy-javascript-tricks-part-2-7ad61cb3a2f8?source=collection_archive---------10-----------------------#2019-12-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/18a326d03ff3914ff80eeaf13df97e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6hfCDTV_IQ8od20G"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tonito?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Anthony Mapp</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="70fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript和其他编程语言一样，有许多方便的技巧，让我们可以更容易地编写程序。在本文中，我们将看看如何将对象属性和数组元素分解成单独的变量，将多个对象合并成一个，并用<code class="fe lb lc ld le b">URL</code>对象操纵URL。</p><h1 id="8af3" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">分解对象属性和数组元素</h1><p id="7d80" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">使用ES6，我们可以使用快捷方式将一个对象的值赋给它自己的变量，也可以将单个数组条目赋给它们自己的变量。多亏了析构赋值语法，我们可以做到这一点，而不需要通过索引显式地检索对象键值对或数组条目。</p><p id="c6bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在对象上使用它的最简单的方法是编写如下代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="878a" class="mq lg iq le b gy mr ms l mt mu">const {<br/>  a,<br/>  b<br/>} = {<br/>  a: 1,<br/>  b: 2<br/>};</span></pre><p id="84d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上面的代码，JavaScript解释器将右边的键名与右边的变量名匹配。这样，它可以将1分配给<code class="fe lb lc ld le b">a</code>，将2分配给<code class="fe lb lc ld le b">b</code>。我们也可以把右边的值赋给左边一个不同名字的变量。为此，我们可以编写以下代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="4c0b" class="mq lg iq le b gy mr ms l mt mu">const {<br/>  a: foo,<br/>  b: bar<br/>} = {<br/>  a: 1,<br/>  b: 2<br/>};</span></pre><p id="1c78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码首先将右边的键名与左边的键名进行匹配，然后将匹配这些键名的值传递给左边冒号右边的变量。</p><p id="8c9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着右边的<code class="fe lb lc ld le b">a</code>键将与左边的<code class="fe lb lc ld le b">a</code>键匹配。这意味着右边的值为1的<code class="fe lb lc ld le b">a</code>将被赋给变量名，即<code class="fe lb lc ld le b">a</code>键的值，即<code class="fe lb lc ld le b">foo</code>。</p><p id="56e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，右边的<code class="fe lb lc ld le b">b</code>键将与左边的<code class="fe lb lc ld le b">b</code>键匹配，右边的<code class="fe lb lc ld le b">b</code>键的值将被分配给与左边的<code class="fe lb lc ld le b">b</code>键对应的变量名。所以最后我们得到的是变量<code class="fe lb lc ld le b">foo</code>为1，变量<code class="fe lb lc ld le b">bar</code>为2。</p><p id="c374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以把默认值赋给左边的变量，这样就不用担心它们在析构赋值操作后被<code class="fe lb lc ld le b">undefined</code>了。</p><p id="84c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了做到这一点，我们编写下面的代码，像典型的赋值操作一样，用<code class="fe lb lc ld le b">=</code>操作符设置左侧变量的默认值。例如，我们可以为左边的变量设置默认值，如下面的代码所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="1a7a" class="mq lg iq le b gy mr ms l mt mu">const {<br/>  a = 0,<br/>  b = 0<br/>} = {<br/>  a: 1<br/>};<br/>console.log(a, b);</span></pre><p id="2caf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们像上面那样记录<code class="fe lb lc ld le b">a</code>和<code class="fe lb lc ld le b">b</code>的值，我们应该为<code class="fe lb lc ld le b">a</code>得到1，为<code class="fe lb lc ld le b">b</code>得到0，因为我们没有为左侧的<code class="fe lb lc ld le b">b</code>分配任何值，所以我们指定的默认值0会像我们指定的那样自动分配给<code class="fe lb lc ld le b">b</code>的值。</p><p id="3f7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以对数组使用析构赋值语法。我们可以在下面的代码中使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b07d" class="mq lg iq le b gy mr ms l mt mu">const [a, b] = [1, 2];</span></pre><p id="8a06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于数组，JavaScript解释器会将变量的位置与变量名称所在位置的数组条目相匹配。因此，右边的第一个数组条目将被赋予左边的第一个变量名，右边的第二个数组条目将被赋予左边的第二个变量名，依此类推。我们还可以使用它来交换变量值，如下面的代码所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d3b4" class="mq lg iq le b gy mr ms l mt mu">let a = 1,<br/>  b = 2;<br/>[a, b] = [b, a];</span></pre><p id="8e4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在析构赋值后对<code class="fe lb lc ld le b">a</code>和<code class="fe lb lc ld le b">b</code>运行<code class="fe lb lc ld le b">console.log</code>，我们得到<code class="fe lb lc ld le b">a</code>是2而<code class="fe lb lc ld le b">b</code>是1。这非常方便，因为我们不必将变量赋给临时变量来交换变量的值。</p><p id="eaad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在析构语法中使用变量时，我们也可以给数组中的变量赋值默认值，这样我们就不必担心在用析构语法给变量赋值后变量会变成<code class="fe lb lc ld le b">undefined</code>了。例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="813a" class="mq lg iq le b gy mr ms l mt mu">let a,b;<br/>([a=1,b=2] = [0])</span></pre><p id="11ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个有效的语法。在上面的代码中，我们得到<code class="fe lb lc ld le b">a</code>是0，因为我们给它赋值了0。<code class="fe lb lc ld le b">b</code>是2，因为我们没有给它赋值。</p><h1 id="1b7e" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">将多个对象合并成一个</h1><p id="43f5" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">使用spread操作符，我们可以用它将多个对象合并成一个。在使用spread操作符之前，我们必须遍历每个对象的键，然后用我们自己的代码手动将每个对象的键值对放入一个新对象中，并且我们必须对我们想要合并在一起的所有对象都这样做。</p><p id="7b46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这真的很痛苦。但是现在，有了spread操作符语法，我们可以在新对象的每个对象中应用spread操作符，然后我们得到一个包含新对象所有键的新对象。例如，如果我们有这些对象:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="2a14" class="mq lg iq le b gy mr ms l mt mu">const obj1 = {<br/>  a: 1,<br/>  b: 2<br/>};<br/>const obj2 = {<br/>  c: 3,<br/>  d: 4<br/>};<br/>const obj3 = {<br/>  e: 5,<br/>  f: 6<br/>};<br/>const obj4 = {<br/>  g: 7,<br/>  h: 8<br/>};<br/>const obj5 = {<br/>  i: 9,<br/>  j: 10<br/>};</span></pre><p id="db5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用spread运算符将它们合并在一起，如下面的代码所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="291c" class="mq lg iq le b gy mr ms l mt mu">const obj1 = {<br/>  a: 1,<br/>  b: 2<br/>};<br/>const obj2 = {<br/>  c: 3,<br/>  d: 4<br/>};<br/>const obj3 = {<br/>  e: 5,<br/>  f: 6<br/>};<br/>const obj4 = {<br/>  g: 7,<br/>  h: 8<br/>};<br/>const obj5 = {<br/>  i: 9,<br/>  j: 10<br/>};<br/>const mergedObj = {<br/>  ...obj1,<br/>  ...obj2,<br/>  ...obj3,<br/>  ...obj4,<br/>  ...obj5<br/>};</span></pre><p id="416c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们记录<code class="fe lb lc ld le b">mergedObj</code>的值时，我们得到:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7cd1" class="mq lg iq le b gy mr ms l mt mu">{<br/>  "a": 1,<br/>  "b": 2,<br/>  "c": 3,<br/>  "d": 4,<br/>  "e": 5,<br/>  "f": 6,<br/>  "g": 7,<br/>  "h": 8,<br/>  "i": 9,<br/>  "j": 10<br/>}</span></pre><p id="91c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们的对象有一些或所有的键彼此相同，那么后来合并的重叠键的值将会覆盖先前合并的值。例如，如果我们有:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="393c" class="mq lg iq le b gy mr ms l mt mu">const obj1 = {<br/>  a: 1,<br/>  b: 2<br/>};<br/>const obj2 = {<br/>  a: 3,<br/>  d: 4<br/>};<br/>const obj3 = {<br/>  a: 5,<br/>  f: 6<br/>};<br/>const obj4 = {<br/>  g: 7,<br/>  h: 8<br/>};<br/>const obj5 = {<br/>  i: 9,<br/>  j: 10<br/>};<br/>const mergedObj = {<br/>  ...obj1,<br/>  ...obj2,<br/>  ...obj3,<br/>  ...obj4,<br/>  ...obj5<br/>};</span></pre><p id="5ac6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们记录<code class="fe lb lc ld le b">mergedObj</code>的值时，我们得到:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="ce4f" class="mq lg iq le b gy mr ms l mt mu">{<br/>  "a": 5,<br/>  "b": 2,<br/>  "d": 4,<br/>  "f": 6,<br/>  "g": 7,<br/>  "h": 8,<br/>  "i": 9,<br/>  "j": 10<br/>}</span></pre><p id="a5c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所看到的，属性<code class="fe lb lc ld le b">a</code>的值是5。这是因为我们首先在<code class="fe lb lc ld le b">obj1</code>中合并<code class="fe lb lc ld le b">a</code>的值为1，然后在<code class="fe lb lc ld le b">obj2</code>中合并<code class="fe lb lc ld le b">a</code>的值为3，覆盖了原来的值1，然后在<code class="fe lb lc ld le b">obj3</code>中合并<code class="fe lb lc ld le b">a</code>的值为5，覆盖了之前合并的值3。因此，我们得到<code class="fe lb lc ld le b">a</code>的最终值5。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/62f25f76257c580b7a0047d9f6d7b50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EkT8S3oMKozgd4N_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jhawk00?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jacob Hawk</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c3a0" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">操纵URL</h1><p id="f238" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">使用URL对象，我们可以传入一个URL字符串，提取并设置URL的各个部分，然后获得一个新的URL。我们可以使用构造函数创建一个URL对象。</p><p id="7a3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">构造函数最多接受2个参数。要么我们有一个参数作为完整的URL字符串，要么我们可以传入一个相对URL字符串，它是完整URL的一部分，作为第一个参数，完整URL字符串的第一部分，或者主机名，作为第二个参数。例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d83a" class="mq lg iq le b gy mr ms l mt mu">new URL('http://medium.com');</span></pre><p id="6c56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="89b3" class="mq lg iq le b gy mr ms l mt mu">new URL('/@hohanga', 'http://medium.com');</span></pre><p id="87ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用URL对象，我们可以获取和设置各种属性来获取URL的一部分，还可以设置URL的一部分来创建新的URL。利用<code class="fe lb lc ld le b">hash</code>属性，我们可以设置URL的hash部分，也就是URL在井号(<code class="fe lb lc ld le b">#</code>)之后的部分。例如，我们可以编写类似下面的代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="383c" class="mq lg iq le b gy mr ms l mt mu">const url = new URL('<a class="ae kc" href="http://example.com/#hash'" rel="noopener ugc nofollow" target="_blank">http://example.com/#hash'</a>);<br/>console.log(url.hash);<br/>url.hash = 'newHash';<br/>console.log(url.toString());</span></pre><p id="bdbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们运行代码，我们可以看到第一个<code class="fe lb lc ld le b">console.log</code>语句记录了<code class="fe lb lc ld le b">'#hash'</code>。然后我们将值<code class="fe lb lc ld le b">'newHash'</code>赋给<code class="fe lb lc ld le b">url</code>的<code class="fe lb lc ld le b">hash</code>属性。然后，当我们对<code class="fe lb lc ld le b">url</code>对象运行<code class="fe lb lc ld le b">toString()</code>方法，并对<code class="fe lb lc ld le b">toString()</code>返回的值运行<code class="fe lb lc ld le b">console.log</code>方法时，我们得到的<code class="fe lb lc ld le b">'<a class="ae kc" href="http://example.com/#newHash" rel="noopener ugc nofollow" target="_blank">http://example.com/#newHash</a>'</code>是带有新散列的URL的新值。</p><p id="c9ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以通过设置<code class="fe lb lc ld le b">host</code>属性来更改主机名，主机名是URL的第一部分。像<code class="fe lb lc ld le b">hash</code>属性一样，<code class="fe lb lc ld le b">host</code>属性也有一个获取URL主机名的getter函数。例如，我们可以编写类似下面的代码:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d779" class="mq lg iq le b gy mr ms l mt mu">const url = new URL('<a class="ae kc" href="http://example.com/#hash'" rel="noopener ugc nofollow" target="_blank">http://example.com/#hash'</a>);<br/>console.log(url.host);<br/>url.host = 'newExample.com';<br/>console.log(url.toString());</span></pre><p id="ab5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们运行代码，我们可以看到第一个<code class="fe lb lc ld le b">console.log</code>语句记录了<code class="fe lb lc ld le b">'#hash'</code>。然后我们将值<code class="fe lb lc ld le b">'example.com'</code>赋给<code class="fe lb lc ld le b">url</code>的<code class="fe lb lc ld le b">hash</code>属性。然后，当我们对<code class="fe lb lc ld le b">url</code>对象运行<code class="fe lb lc ld le b">toString()</code>方法，并对<code class="fe lb lc ld le b">toString()</code>返回的值运行<code class="fe lb lc ld le b">console.log</code>方法时，我们会得到<code class="fe lb lc ld le b">‘<a class="ae kc" href="http://newexample.com/#hash" rel="noopener ugc nofollow" target="_blank">http://newexample.com/#hash</a>’</code>，这是带有新散列的URL的新值。</p><p id="c693" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">URL对象中有更多属性。请继续关注下一部分，我们将探索URL对象的更多部分。</p><p id="ecac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript和其他编程语言一样，有许多方便的技巧，让我们更容易编写程序。在本文中，我们研究了如何将对象属性和数组元素分解成单独的变量，将多个对象合并成一个，并使用<code class="fe lb lc ld le b">URL</code>对象操作URL。有了这些技巧，我们减少了编写代码的工作量，使我们的生活更加轻松。</p></div></div>    
</body>
</html>
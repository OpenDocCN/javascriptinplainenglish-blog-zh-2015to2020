<html>
<head>
<title>Implementing Drag and Drop on a Web Page</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在网页上实现拖放</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/implementing-drag-and-drop-on-a-web-page-7d34e211c8b?source=collection_archive---------2-----------------------#2019-09-06">https://javascript.plainenglish.io/implementing-drag-and-drop-on-a-web-page-7d34e211c8b?source=collection_archive---------2-----------------------#2019-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6a29" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">快速简单地使用HTML5和JavaScript</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/36b0052132014755a562ebc70f288ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWieOPqWdcbECoNk2P2jdw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Kamil Pietrzak on <a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fcdc" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">目标</strong></h1><blockquote class="lo lp lq"><p id="2636" class="lr ls lt lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">我们的目标是使网页元素可拖放。</p></blockquote><p id="80de" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">这在HTML5中很容易做到</p><blockquote class="mr"><p id="adad" class="ms mt iq bd mu mv mw mx my mz na mn dk translated">在HTML5中，拖放是标准的一部分:任何元素都可以拖动。</p></blockquote><p id="b40f" class="pw-post-body-paragraph lr ls iq lu b lv nb jr lx ly nc ju ma mo nd md me mp ne mh mi mq nf ml mm mn ij bi translated">和几行JavaScript代码。</p><p id="114f" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">我们将构建一个简单的网页，并在两个<div>元素之间拖动图片。</div></p><p id="5e11" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">我们的例子非常简单，但在我看来，它开启了一个被广泛忽视的可能性世界。</p><h2 id="6186" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated"><strong class="ak">工具</strong></h2><p id="87e1" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">我们不需要太多工具。</p><ul class=""><li id="471c" class="nx ny iq lu b lv lw ly lz mo nz mp oa mq ob mn oc od oe of bi translated">选择任何你喜欢的HMTL或文本编辑器，然后编码！我将使用<a class="ae kv" href="https://www.textpad.com/download/" rel="noopener ugc nofollow" target="_blank"> Textpad </a>。</li><li id="2c34" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn oc od oe of bi translated">您不需要web服务器来运行html页面，您可以通过双击它或在编辑器中启动它来从本地文件系统运行它。</li></ul><h2 id="7e4f" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated">我们开始吧！</h2><p id="fdf5" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated"><strong class="lu ir">我们流程的概述</strong></p><ol class=""><li id="2b46" class="nx ny iq lu b lv lw ly lz mo nz mp oa mq ob mn ol od oe of bi translated">我们将使一个或多个html元素可拖动。</li><li id="22a8" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn ol od oe of bi translated">我们将指定JavaScript函数来处理当我们开始拖放时发生的事情。</li><li id="930c" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn ol od oe of bi translated">我们将使一个或多个html元素能够接受被拖动的对象、放置位置——使它们可被放下。</li></ol><p id="c6f9" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">就是这样！</p><h2 id="4be2" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated"><strong class="ak">第一步:创建一个HTML5页面。</strong></h2><p id="9813" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">打开编辑器，创建html页面的基础。如所愿，取名<em class="lt">somename.html。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/edd293ba4d9a76dce29a320991ef1ff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*b-oIcCBcr_RQdckz5dhQMg.jpeg"/></div></figure><h2 id="d58e" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated"><strong class="ak">步骤2:使元素可拖动。</strong></h2><p id="4f0f" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">要使元素可拖动，您需要将<strong class="lu ir"> draggable </strong>属性设置为true。</p><p id="f72f" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><strong class="lu ir">&lt;<em class="lt">element name</em>draggable = " true "&gt;</strong></p><p id="2d11" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">在我们的例子中，我们将制作三个可拖动的图像。</p><p id="4bb5" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">将以下内容添加到您的网页中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/6540884c9f4c22ad3af92298944e25a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVYM3KqxhorRGV0gx1rSew.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">draggable=”true”</figcaption></figure></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="380f" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">你可以随意使用任何你想要的图片。如果你想用我用过的图片，只需右键点击并保存到你的html页面所在的文件夹。</p><p id="dc6c" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><strong class="lu ir">注</strong> : <em class="lt">这些图片可能受版权保护。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/aff9d47565fb20ff21fbe9870fc148ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wq1EDODgM4de4nsUdm26zw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Nosy</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/5e3a476752bdcd662b63964b9d28ddcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*lKXVtZVzII-UQXiFKtk0jg.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Oreo</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/c8b859bf0848853a8744e7ae574f7dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N3G0Vm7xAAad-xUVl3Qzxw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sadeyes</figcaption></figure></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><h2 id="10c8" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated"><strong class="ak">步骤3 </strong>:设置当一个元素被拖动时应该发生什么。</h2><p id="aac7" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">这是通过以下一般步骤完成的。</p><ol class=""><li id="801f" class="nx ny iq lu b lv lw ly lz mo nz mp oa mq ob mn ol od oe of bi translated">向可拖动元素添加<em class="lt"> ondragstart </em>属性。</li><li id="7aa8" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn ol od oe of bi translated">向html页面添加开始和结束标签<script>，这样我们就可以添加JavaScript了。&lt;/root&gt;</script></li><li id="69d5" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn ol od oe of bi translated">指定将在“ondragstart”中调用的JavaScript函数(处理程序)</li><li id="9f35" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn ol od oe of bi translated">使用JavaScript函数中的<strong class="lu ir"> dataTranser.setData() </strong>方法指定被拖动数据的<strong class="lu ir">数据类型</strong>和<strong class="lu ir">值</strong>。当最初查看时，这经常会令人困惑，因为<em class="lt">第一个参数通常是“文本”或“文本/普通”</em>。当我们意识到它是被拖动对象的DOM字符串时，谜底就解开了。这就是为什么它是文本。</li></ol><p id="ea9a" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">在html页面中，修改您的<img/>元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/e04dabc4e8958d29e2819ce15169919e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fnJEG2Qy5X0oHY-hTvYoYQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">dragStart() will be our JavaScript function</figcaption></figure><p id="df24" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">添加开始和结束标记<script>以及下面的JavaScript函数dragStart()&lt;/root&gt;</script></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/9c1b184bdf7f86081077b84ae0c2ceea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ElaKQinKt_-w1Ia-3HzQqw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">dragStart(). The ondragstart event handler.</figcaption></figure><p id="ed09" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">对于dataTransfer.setData()，在我们的例子中，数据类型是“text”(被拖动对象的DOM字符串[1])，值是被拖动元素的id。同样，在我们的例子中，这将是图像的id，“Nosey”，“Oreo”和“Sadeyes”</p><h2 id="d367" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated">第4步:添加我们可以放入对象的元素，一些属性和JavaScript。</h2><p id="f4c3" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">在我们的例子中，我们希望能够在两个<div>元素之间拖放。因此，我们将把我们的图像包装在一个<div>(我们将开始拖动)中，并创建第二个<div>来放入它们。但是，我们将添加一些必要的东西，以便能够在两个div之间进行拖放。</div></div></div></p><p id="bab0" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">我们将添加div的两个属性，<em class="lt"> ondrop </em>和<em class="lt"> ondragover </em>。</p><ul class=""><li id="94f3" class="nx ny iq lu b lv lw ly lz mo nz mp oa mq ob mn oc od oe of bi translated">对于<em class="lt"> ondrop </em>，我们将指定JavaScript函数，该函数将处理我们放下时要做的事情。</li><li id="26df" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn oc od oe of bi translated">对于<em class="lt"> ondragover </em>，当一个元素或文本选择被拖动到一个有效的拖放目标上时被触发，我们将通过使用<strong class="lu ir"> preventDefault() </strong>方法向浏览器指定“允许拖放”。</li><li id="ccd9" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn oc od oe of bi translated"><strong class="lu ir"> preventDefault() </strong>阻止浏览器对数据的默认处理(<strong class="lu ir">不允许丢弃。</strong>)我们绝对不会想阻止它，<strong class="lu ir">所以这很关键！</strong></li></ul><p id="d463" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">添加以下<div>元素。一个在图像周围，另一个在第一个div的正下方。</div></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/43cdf9e92e03a76ab0b23250d7deb88a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R5EWohjC4pFLpDZAu-n2GQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Two divs to drag and drop between</figcaption></figure><p id="083d" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">为<em class="lt"> ondrop </em>和<em class="lt"> allowDrop </em>属性添加以下JavaScript函数和事件处理程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/4fd40cf0273721947d8f895f7200a65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*snCGse1hAK-HLLe1ykAKPQ.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">A lot going on here</figcaption></figure><p id="6bf7" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">观察:发生了很多事情。</p><ul class=""><li id="435e" class="nx ny iq lu b lv lw ly lz mo nz mp oa mq ob mn oc od oe of bi translated">你会注意到<strong class="lu ir"> preventDefault() </strong>在处理函数<strong class="lu ir"> dropIt() </strong>和<strong class="lu ir"> dropIt2() </strong>以及<strong class="lu ir"> allowDrop() </strong>中。这是必要的，否则处理程序将试图打开图像链接。</li><li id="b6c2" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn oc od oe of bi translated">有两个<strong class="lu ir"> dropIt() </strong>函数。我们这样做是为了让两个div的功能略有不同。我们可以两个div只使用一个。</li><li id="b76c" class="nx ny iq lu b lv og ly oh mo oi mp oj mq ok mn oc od oe of bi translated"><strong class="lu ir"> dropIt() </strong>它使用<strong class="lu ir"> dataTransfer() </strong>方法来获取被拖动的数据。被拖动的数据是元素的id。最后，它将它附加到事件对象的目标(div-Drop对象)。)</li></ul><h1 id="6d8b" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">可选步骤(5和6)</h1><h2 id="3bed" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated">只是为了好玩</h2><p id="7a8d" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">在倒数第二步中，我们将添加一个文本输入元素，并添加更多的代码来显示/删除狗的名字，以及更多的标记。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/546386c1a4df0eac0b3b9db809eb074a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6nIry9LfZFrQ8w8It41Wow.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">&lt;input type=”text”… and some code in dropIt() and dropIt2()</figcaption></figure><h2 id="3026" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated">第六步:让它看起来稍微好一点。</h2><p id="1a9c" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">在这一步，我们将添加CSS样式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/6a4a3c47784e4ba6da9f42a59d8be16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*dYjguOZS2Nk24rAKEPV6Fg.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Styling</figcaption></figure><h2 id="664a" class="ng kx iq bd ky nh ni dn lc nj nk dp lg mo nl nm li mp nn no lk mq np nq lm nr bi translated">成品！</h2><p id="9f72" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">成品应该如下所示。这是在两个图像中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/e50fff3ea9e7dddbfc0aeebaf9126826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*RTkt_bZsQu7kK12q8Xclwg.jpeg"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/4bdad825e266e8c88609a109ac788ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdrv72U6E0cRTkQN0Oplig.jpeg"/></div></div></figure><p id="a1cb" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><strong class="lu ir">双击html文件，在浏览器中运行。</strong></p><h1 id="f9ac" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论:</h1><p id="4edc" class="pw-post-body-paragraph lr ls iq lu b lv ns jr lx ly nt ju ma mo nu md me mp nv mh mi mq nw ml mm mn ij bi translated">这是非常强大的，这个主题还有很多，例如，我们可以指定拖动时使用的鼠标图像，拖动时复制对象而不是移动它，等等。</p><p id="3eaf" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">我想我会建一个滑块拼图。</p><p id="1577" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">喜欢尝试，并访问下面的MDN链接。</p><p id="0768" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">感谢阅读！</p><p id="f152" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated"><strong class="lu ir">有用链接</strong></p><p id="85f2" class="pw-post-body-paragraph lr ls iq lu b lv lw jr lx ly lz ju ma mo mc md me mp mg mh mi mq mk ml mm mn ij bi translated">[1]https://developer.mozilla.org/en-US/<a class="ae kv" href="https://developer.mozilla.org/en-US/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>
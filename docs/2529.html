<html>
<head>
<title>Vue Problems — Deep Model Properties, DOM Element Access, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue问题-深层模型属性、DOM元素访问等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-problems-deep-model-properties-dom-element-access-and-more-128add76278c?source=collection_archive---------10-----------------------#2020-07-02">https://javascript.plainenglish.io/vue-problems-deep-model-properties-dom-element-access-and-more-128add76278c?source=collection_archive---------10-----------------------#2020-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/31f20ca8b4da80202ba45b97ca4dd01b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qWLhvD-ho_DjvDEz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sreckoskrobic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Srecko Skrobic</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js使开发前端应用程序变得容易。然而，我们仍然有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将查看一些常见问题，并了解如何解决它们。</p><h1 id="cc3a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">具有深度属性的Vue.js v-model</h1><p id="448e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过首先初始化将<code class="fe me mf mg mh b">v-model</code>绑定到深度嵌套的属性。</p><p id="79c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a00a" class="mq lc iq mh b gy mr ms l mt mu">data(){<br/>  return {<br/>    filters: { name: null },<br/>  }<br/>}</span></pre><p id="3670" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的组件中初始化数据。</p><p id="fddf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="627d" class="mq lc iq mh b gy mr ms l mt mu">&lt;input v-model="filters.name"&gt;</span></pre><h1 id="0c9f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在项目中使用全局变量</h1><p id="f5ae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有一个全局变量，那么我们必须在组件代码中引用它，然后才能在模板中使用它。</p><p id="d467" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="740b" class="mq lc iq mh b gy mr ms l mt mu">&lt;script&gt;<br/>window.globalVar = 'global';</span><span id="f85e" class="mq lc iq mh b gy mv ms l mt mu">new Vue({<br/>  el: "#app",<br/>  data: {<br/>  },<br/>  computed: {<br/>    globalVar() {<br/>      return window.globalVar;<br/>    },<br/> },<br/>  methods: {<br/>    ...<br/>  }<br/>})<br/>&lt;/script&gt;</span></pre><p id="a00f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了一个计算的<code class="fe me mf mg mh b">globalVar</code>属性，通过返回它来引用<code class="fe me mf mg mh b">window.globalVar</code>。</p><p id="f40b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以通过编写以下内容在模板中使用<code class="fe me mf mg mh b">globalVar</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="76d9" class="mq lc iq mh b gy mr ms l mt mu">&lt;div id="app"&gt;<br/>  &lt;p&gt;<br/>    {{<!-- -->globalVar<!-- -->}}<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="01d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用任何全局变量来实现。</p><h1 id="8ec6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Vuex将数据从父母发送给孩子</h1><p id="a33b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过首先在父节点中提交一个动作，使用Vuex将数据从父节点发送到子节点。</p><p id="0c97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们总是可以使用getters获取子组件中的最新值。</p><p id="9997" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6ca2" class="mq lc iq mh b gy mr ms l mt mu">...</span><span id="8d61" class="mq lc iq mh b gy mv ms l mt mu">const actions = {<br/>  updateCategory ({commit}, payload) {<br/>    commit('<!-- -->updateCategory<!-- -->', payload)<br/>  }<br/>}</span><span id="bb82" class="mq lc iq mh b gy mv ms l mt mu">const mutations = {<br/>  updateCategory(state, payload) { <br/>    state.category = payload<br/>  }<br/>}<br/>export default {<br/>    state,<br/>    getters,<br/>    actions,<br/>    mutations<br/>}</span></pre><p id="dec9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个带有<code class="fe me mf mg mh b">updateCategory</code>突变的Vuex商店。</p><p id="22d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在我们的组件代码中使用<code class="fe me mf mg mh b">mapActions</code>添加动作:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2b86" class="mq lc iq mh b gy mr ms l mt mu">methods: {<br/>  ...mapActions(['updateCategory']),<br/>}</span></pre><p id="a6b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在代码中调用<code class="fe me mf mg mh b">this.updateCategory('newCategory')</code>。</p><p id="c832" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在子组件中，我们调用<code class="fe me mf mg mh b">mapGetters</code>将吸气剂映射到子组件中:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="af0b" class="mq lc iq mh b gy mr ms l mt mu">computed: {<br/>  ...mapGetters(['getCategory'])<br/>},</span></pre><p id="2d37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe me mf mg mh b">this.category</code>状态得到类别。</p><h1 id="2ab3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取包含组件的元素</h1><p id="9f10" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过给我们想要得到的元素分配一个引用，我们可以得到一个没有组件的元素。</p><p id="c1e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以在组件代码中引用该元素。</p><p id="85e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="aeac" class="mq lc iq mh b gy mr ms l mt mu">&lt;div id="app"&gt;<br/>  &lt;span ref="someName"&gt;hello&lt;/span&gt;<br/>&lt;/div&gt;</span></pre><p id="d092" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过编写以下内容来获得span element对象:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="21ff" class="mq lc iq mh b gy mr ms l mt mu">this.$refs.someName</span></pre><p id="2c97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的代码中。</p><p id="7b70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在<code class="fe me mf mg mh b">v-for</code>渲染的元素中添加一个引用，那么我们得到一个元素数组。</p><p id="2e45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fa99" class="mq lc iq mh b gy mr ms l mt mu">&lt;div v-for="age in ages"&gt;<br/>  &lt;span ref="ageSpan"&gt;{{ age }}&lt;/span&gt;<br/>&lt;/div&gt;</span></pre><p id="837b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe me mf mg mh b">this.$refs.ageSpan</code>将是跨度元素的数组。</p><h1 id="4e03" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">v-bind:样式和背景图像</h1><p id="604c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想用<code class="fe me mf mg mh b">v-bind:style</code>设置背景图像，我们可以写如下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="57ea" class="mq lc iq mh b gy mr ms l mt mu">&lt;div v-bind:style="{ backgroundImage: `url(${image})` }"&gt;&lt;/div&gt;</span></pre><p id="9024" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">image</code>变量插入到<code class="fe me mf mg mh b">url</code>字符串中。</p><p id="af2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，我们可以在组件代码的图像上调用<code class="fe me mf mg mh b">require</code>。</p><p id="0f6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以引用组件中的对象作为<code class="fe me mf mg mh b">style</code>值。</p><p id="ccb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c859" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div :style="cssProps"&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2b9f" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>  export default {<br/>    data() {<br/>      return {<br/>        cssProps: {<br/>          backgroundImage: `url(${require('@/assets/img.jpg')})`<br/>        }<br/>      }<br/>    }<br/>  }<br/>&lt;/script&gt;</span></pre><p id="0504" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有具有<code class="fe me mf mg mh b">backgroundImage</code>属性的<code class="fe me mf mg mh b">cssProps</code>对象。</p><p id="b154" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把它设为<code class="fe me mf mg mh b">:style</code>的值。</p><h1 id="ba68" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Vue方法中使用setTimeout</h1><p id="0f3f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Vue组件方法中使用<code class="fe me mf mg mh b">setTimeout</code>。</p><p id="2874" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a71f" class="mq lc iq mh b gy mr ms l mt mu">setTimeout(() =&gt; {<br/>   this.aMethod()<br/>}, 1000);</span></pre><p id="45c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在组件代码中称之为<code class="fe me mf mg mh b">this.aMethod</code>。</p><h1 id="ef38" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用$emit传递参数</h1><p id="5902" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用第二个参数调用<code class="fe me mf mg mh b">$emit</code>来传递事件数据。</p><p id="67b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fc9d" class="mq lc iq mh b gy mr ms l mt mu">methods: {<br/>  updateName(name) { <br/>    this.bus.$emit('updateName', name); <br/>  },<br/>}</span></pre><p id="2a9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个组件中发出事件。</p><p id="a24a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在另一个组件中，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5c69" class="mq lc iq mh b gy mr ms l mt mu">created() {<br/>  this.bus.$on('updateName', (name) =&gt; alert(name));<br/>}</span></pre><p id="2b8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">this.bus</code>是一个<code class="fe me mf mg mh b">Vue</code>实例。</p><h1 id="b925" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Vue组件中使用保活组件</h1><p id="09fc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">keep-alive</code>组件来防止内部组件的状态被重置。</p><p id="8245" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7f12" class="mq lc iq mh b gy mr ms l mt mu">&lt;keep-alive&gt;<br/>  //...<br/>&lt;/keep-alive&gt;</span></pre><p id="deac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在里面的组件即使被卸载也不会被重置。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/bb5307cb8bac2a1952fcfd20460b13a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iwCYIr0qsRgg5fMf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sharonmccutcheon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sharon McCutcheon</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0ce6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2c9b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">backgroundImage</code>属性来添加样式。</p><p id="6f4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以将URL插入到<code class="fe me mf mg mh b">url</code>字符串中，或者需要图像。</p><p id="bdaf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们分配refs，然后引用ref，就可以得到元素。</p><h1 id="4813" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">简单英语的JavaScript</h1><p id="2c35" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">plain English . io</strong></a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
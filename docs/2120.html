<html>
<head>
<title>React Styled Components — More Complex Selectors and Selectively Passing Props</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React风格的组件——更复杂的选择器和选择性传递道具</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-styled-components-more-complex-selectors-and-selectively-passing-props-9e12a3d60167?source=collection_archive---------5-----------------------#2020-05-21">https://javascript.plainenglish.io/react-styled-components-more-complex-selectors-and-selectively-passing-props-9e12a3d60167?source=collection_archive---------5-----------------------#2020-05-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/198b16b5ea20154195d5e964e1e5193a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ss79o-QQgbnH4wus"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Waldemar Brandt</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0912" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是构建现代交互式前端web应用最常用的前端库。它还可以用来构建移动应用程序。</p><p id="9258" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究用伪选择器创建样式化的组件，并为其他组件创建样式化的包装器。</p><h1 id="71a8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Render方法之外定义样式组件</h1><p id="d66c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">styled-components</code>在render方法之外定义样式化组件。</p><p id="7572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下定义包装组件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="edf3" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import styled from "styled-components";</span><span id="376f" class="mq lc iq mh b gy mv ms l mt mu">const StyledWrapper = styled.div`<br/>  font-weight: bold;<br/>`;</span><span id="8b83" class="mq lc iq mh b gy mv ms l mt mu">const Wrapper = ({ message }) =&gt; {<br/>  return &lt;StyledWrapper&gt;{message}&lt;/StyledWrapper&gt;;<br/>};</span><span id="9343" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Wrapper message="foo" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="631e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们创建了具有自己风格的<code class="fe me mf mg mh b">StyledWrapper</code>组件。然后我们创建了使用它的<code class="fe me mf mg mh b">Wrapper</code>组件。随着<code class="fe me mf mg mh b">message</code>道具传了进去。然后我们就可以把<code class="fe me mf mg mh b">message</code>当做<code class="fe me mf mg mh b">Wrapper</code>的道具用在<code class="fe me mf mg mh b">App</code>上了。</p><p id="1911" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们将在屏幕上看到粗体字“foo”。</p><h1 id="d11b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">赝元素、赝选子和嵌套</h1><p id="e662" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">styled-components</code>支持类似SCSS的语法来定义样式化组件的样式。用于转换CSS的预处理器是stylis。</p><p id="1dd4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码来定义带有props和stylis代码的样式，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ce1" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import styled from "styled-components";</span><span id="44c3" class="mq lc iq mh b gy mv ms l mt mu">const Thing = styled.div.attrs(() =&gt; ({ tabIndex: 0 }))`<br/>  color: blue;<br/>  &amp;:hover {<br/>    color: red;<br/>  }<br/>  &amp; ~ &amp; {<br/>    background: tomato;<br/>  }<br/>  &amp; + &amp; {<br/>    background: lime;<br/>  }<br/>  &amp;.foo {<br/>    background: orange;<br/>  }<br/>  .foo &amp; {<br/>    border: 1px solid ${props =&gt; (props.primary ? "red" : "green")};<br/>  }<br/>`;</span><span id="41a5" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Thing&gt;foo&lt;/Thing&gt;<br/>      &lt;Thing className="foo" primary&gt;<br/>        &lt;Thing&gt;abc&lt;/Thing&gt;<br/>        &lt;Thing primary&gt;abc&lt;/Thing&gt;<br/>        bar<br/>      &lt;/Thing&gt;<br/>      &lt;Thing className="bar"&gt;baz&lt;/Thing&gt;<br/>      &lt;Thing&gt;baz&lt;/Thing&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="6c61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有<code class="fe me mf mg mh b">Thing</code>组件，其中我们用伪选择器定义了样式。</p><p id="8f58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">&amp;:hover</code>是<code class="fe me mf mg mh b">Thing</code>悬停时的选择器。</p><p id="c1de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">&amp; ~ &amp;</code>是<code class="fe me mf mg mh b">Thing</code>同级的选择器，但它可能不直接紧挨着它。</p><p id="95b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">&amp; + &amp;</code>是<code class="fe me mf mg mh b">Thing</code>旁边的一个<code class="fe me mf mg mh b">Thing</code>。</p><p id="dda7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">&amp;.foo</code>是带有<code class="fe me mf mg mh b">foo</code> CSS类的<code class="fe me mf mg mh b">Thing</code>。</p><p id="f2a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">.foo &amp;</code>是<code class="fe me mf mg mh b">Thing</code>里面跟<code class="fe me mf mg mh b">foo</code>一类的东西。我们也有一个动态风格的<code class="fe me mf mg mh b">${props =&gt; (props.primary ? “red” : “green”)}</code>，我们检查<code class="fe me mf mg mh b">primary</code>道具，然后相应地应用颜色。</p><p id="9a97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到下面的彩色文本:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9ee9c1e510eac4538c315ec6a20288da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*_iLnNUBtn56UGwbCIndtNg.png"/></div></figure><p id="a247" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">&amp;&amp;</code>伪选择符来增加规则在组件上的特异性。</p><p id="bcd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ee4" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import styled from "styled-components";</span><span id="411d" class="mq lc iq mh b gy mv ms l mt mu">const Thing = styled.div`<br/>  &amp;&amp; {<br/>    color: blue;<br/>  }<br/>`;</span><span id="cc52" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Thing&gt;foo&lt;/Thing&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="0128" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们只对<code class="fe me mf mg mh b">Thing</code>应用指定的样式。因此，我们用<code class="fe me mf mg mh b">&amp;&amp;</code>避免与其他组件中的样式冲突。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/322d95eccf57cd86405077304903599d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6EWIIYfNAKR-RWVf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pineapple?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pineapple Supply Co.</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6d2f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">附加附加道具</h1><p id="1bf9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以传入一个对<code class="fe me mf mg mh b">attrs</code>方法的回调，这样我们就可以选择基本元素接收的道具。例如，如果我们有一个输入，我们希望它只接收<code class="fe me mf mg mh b">value</code>属性和<code class="fe me mf mg mh b">size</code>属性，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="aea4" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import styled from "styled-components";</span><span id="ed6c" class="mq lc iq mh b gy mv ms l mt mu">const Input = styled.input.attrs(({ value, size }) =&gt; ({<br/>  size,<br/>  value<br/>}))`<br/>  color: palevioletred;<br/>  font-size: 1em;<br/>  margin: ${props =&gt; props.size};<br/>  padding: ${props =&gt; props.size};<br/>`;</span><span id="d672" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Input value="foo" size="5px" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="0346" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们获取了<code class="fe me mf mg mh b">value</code>和<code class="fe me mf mg mh b">size</code>道具，并在回调中将它们设置为属性，然后传递给<code class="fe me mf mg mh b">attrs</code>方法。</p><p id="dcf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还在字符串中动态地将<code class="fe me mf mg mh b">size</code>属性传递给我们的样式。</p><p id="8598" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们添加<code class="fe me mf mg mh b">Input</code>并将<code class="fe me mf mg mh b">value</code>设置为<code class="fe me mf mg mh b">'foo'</code>并将<code class="fe me mf mg mh b">size</code>设置为<code class="fe me mf mg mh b">'5px'</code>时，我们将会看到它们反映在我们的样式化输入中。</p><h1 id="277d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e4ef" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在render方法之外创建样式化的组件。此外，除了CSS选择器，我们可以使用SCSS选择器来选择元素。</p><p id="4d4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">&amp;</code>选择器用于选择当前元素。然后，我们可以使用其他选择器来选择相邻元素或子元素。</p><p id="f22e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用<code class="fe me mf mg mh b">&amp;&amp;</code>选择器选择一个特定的元素。</p><p id="9cec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们可以使用<code class="fe me mf mg mh b">attrs</code>方法有选择地传递props作为组件的属性值。</p><h2 id="d459" class="mq lc iq bd ld my mz dn lh na nb dp ll ko nc nd lp ks ne nf lt kw ng nh lx ni bi translated">进一步阅读</h2><div class="nj nk gp gr nl nm"><a href="https://bit.cloud/blog/introducing-component-compare-easily-review-component-changes-l4qyxtoo" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">比特博客</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">组件驱动软件的官方博客。围绕现代组件驱动的web开发的文章…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">比特云</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa jw nm"/></div></div></a></div><p id="f2b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ob">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="ob">plain English . io</em></strong></a><em class="ob">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="ob">免费周报</em> </strong> </a> <em class="ob">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="ob">Twitter</em></strong></a><a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="ob">LinkedIn</em></strong></a><strong class="kf ir"><em class="ob"/></strong><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="ob">YouTube</em></strong></a><strong class="kf ir"><em class="ob">，以及</em></strong><em class="ob"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="ob">不和</em> </strong> </a>  <em class="ob">对成长黑客感兴趣？检查</em> <a class="ae kc" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="ob">电路</em> </strong> </a> <strong class="kf ir"> <em class="ob">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>In Defence of jQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为jQuery辩护</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/in-defence-of-jquery-6dfe6dcfb5c?source=collection_archive---------4-----------------------#2020-02-12">https://javascript.plainenglish.io/in-defence-of-jquery-6dfe6dcfb5c?source=collection_archive---------4-----------------------#2020-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="304a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">和其他过去的罪恶</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d201d5a902cf293d09c87d302af665fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_pIxhqQ-UbHOyALH"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@nypl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">The New York Public Library</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="308c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何事情都有时间和地点——jQuery的时代大约是2012年，这可能是为什么我的年轻同事对它的反感程度与他们对三列固定宽度表格布局的反感程度相同。</p><p id="8987" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在jQuery的黄金时代，我是一名前端开发人员，远在npm成为我们安装库的方式之前。不久前，回想起来，我还在一个名为“functions.js”的文件中为整个网站编写jQuery代码。最终，这个文件变得太大了，以至于无法在我的IDE中轻松加载，有几千行。我的解决方案？创建“functions2.js”以分担负载。</p><p id="a495" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我直觉告诉我这是错误的，就像未来的我在愤怒地呼喊过去的岁月，我天真的大脑不知何故意识到我会带着耻辱回顾这一天。他们说分享你的痛苦是一种宣泄，所以我在这里，告诉你我过去是如何写JavaScript的。</p><p id="62f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个jQuery脚本都以相同的方式启动:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="5b0c" class="lx ly iq lt b gy lz ma l mb mc">$(document).ready(function() {<br/>    // Do the thing<br/>});</span></pre><p id="87a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着装载顺序不再重要。你们这些年轻人可能会问“他说的装货顺序是什么意思，爷爷？”好吧，围过来让我告诉你。</p><h1 id="0f32" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">我们过去如何获得Javascript依赖关系</h1><p id="e662" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">你看，在我的时代，没有<code class="fe na nb nc lt b">require(that)</code>和<code class="fe na nb nc lt b">import thing from ‘somewhere’</code>。如今，您倾向于在页面中包含一个脚本标签，它可以抓取您需要的所有内容。大概是这样的:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="449a" class="lx ly iq lt b gy lz ma l mb mc">&lt;script src="./app.js" type="text/javascript"&gt;&lt;/script&gt;</span></pre><p id="f7ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能会关闭并通过前面提到的<code class="fe na nb nc lt b">require</code>或<code class="fe na nb nc lt b">import</code>语句获取您的其他依赖项。它的美妙之处在于，这两种方法都允许您在需要时从另一个文件中获取所需的内容。很明显，如果你做了这样的事情，它就坏了:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="18a8" class="lx ly iq lt b gy lz ma l mb mc">console.log(data.toString()); // error: data is not defined<br/>let data = require('data');</span></pre><p id="f8a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这时你说“哦，是的，我应该在使用它之前导入/要求它”。但是在过去，如果<code class="fe na nb nc lt b">data</code>在另一个文件中定义，它通常是全局声明的——即附加到<code class="fe na nb nc lt b">window</code>对象上。您没有将它从一个文件中导出并导入到另一个文件中。您将它附加到全局上下文中，并希望在尝试和使用它之前加载“data.js”。</p><p id="b4e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您必须使用脚本标签来包含新的JavaScript功能。脚本标签，我告诉你！恐怖还没有结束。您的脚本标签可能描述了您想要实现的功能，但是它没有收集您需要的所有内容。如果该文件有依赖项，您也必须导入它们。重复直到精神错乱。</p><p id="ecdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到你的HTML中，你必须非常熟悉每一个脚本标签的用途，才能知道它们的加载顺序。如果你在“librarybhickendsona”之后加载“libraryA”<em class="mz">，你甚至可能不会马上知道哪里出了问题。</em></p><p id="9c4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者你也可以，你知道，你一直等到“就绪”事件从文档中被触发，到那时所有的东西都被加载并准备好使用。这成了一种很常见的模式。这不是jQuery发明的，但是浏览器对“onLoad”事件的支持是零星的。document.ready事件是我第一次看到这种模式被广泛使用。它在很大程度上解决了整个装载顺序问题。</p><p id="e55a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，它没有解决在一个文件中为应用程序编写整个逻辑的问题。我记得当人们开始大声谈论AngularJS(在它有JS后缀之前)并认为它不会流行起来的时候。我和我的2000行jQuery意大利面代码都很好，非常感谢。</p><p id="cc9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，我错了。曾几何时，我不计后果地将页面拼凑在一起，并不关心架构或可维护性之类的概念。我也不太担心微优化。有更大的鱼要炸，就像我展示的原始大小为200像素的3MB图片。</p><h1 id="b9c4" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">jQuery包的大小</h1><p id="d42e" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">信不信由你，曾经有一段时间，网络由许多通过超链接连接在一起的页面组成。如今，一切都是单页应用，用简单换取速度，最大限度地减少需要下载两次的内容。那个标题，导航——你页面上所有的共享内容都是有代价的。如果你的请求重复了你以前见过的东西，你必须做的每一个额外的请求都有一个不可接受的开销。</p><p id="4e37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">jQuery的一个经常被吹捧的弱点是它的包大小，好像90kb的迷你JavaScript将是你的网站，不，你的业务的终结。然而，为了获得相同的最终结果——一个显示内容的页面，我们欣然接受了109kb的React + React-Dom。哦，是的，你可以用React做更多的事情，我听到了大众的呼声，但是在jQuery中你也可以做很多事情。这些千字节必须有所用途。</p><p id="a97b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，Gzip有助于将影响最小化，但关键是，即使在网速缓慢的时代，当我们的56k调制解调器在HTML的重压下颤抖时，文件大小也不是jQuery的批评者所说的那样可怕。追求更小的包裹尺寸可能更适合用来晒太阳或遛狗。</p><p id="ca81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">至于jQuery本身的大小，内容交付网络非常有效地解决了这个问题。</p><p id="0312" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你看，jQuery在某种程度上是JavaScript的同义词，这是前无古人后无来者的。每个人和他们的妈妈都在使用它，这意味着引用CDN托管的jQuery库可以节省成本。</p><h2 id="dfeb" class="lx ly iq bd me nd ne dn mi nf ng dp mm lf nh ni mo lj nj nk mq ln nl nm ms nn bi translated">CDN是什么鬼？</h2><p id="1107" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">听起来像是开发商新闻网，不是吗？但事实并非如此，内容交付网络托管着流行的JavaScript和CSS库，鼓励你引用它们的拷贝，而不是将其上传到你的网站。有几个好处:</p><ul class=""><li id="27e6" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">首先，你的浏览器会缓存结果，这意味着任何引用相同文件的网站都不必再次下载。曾几何时，jQuery非常丰富，几乎每个人都在使用它，这意味着在您用户的浏览历史中，很有可能有人在使用与您相同的CDN。您站点的用户可能根本不需要下载jQuery。</li><li id="efac" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">其次，通过引用另一个域，您可以增加您的站点可以同时列出的文件数量。你看，浏览器从同一个域并行执行的请求有一个最大数量。一些网站把它们的图片放在一个子域上，就是为了应对这种情况。</li></ul><p id="1412" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，您可以通过从CDN加载现代框架来获得这些好处，但是像WebPack这样的工具的激增意味着您更有可能只是提供一个本地包，将所有脚本包含在一个文件中。这种方法对于复杂的站点更有效，因为它创建了一个高度优化的单一下载。但是这样的工具属于高级阵营。见鬼，作为一名前端开发人员，我有13年的经验，在一个好日子里努力配置WebPack。jQuery的美妙之处在于它既容易上手，又广受欢迎。</p><p id="d5b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使没有WebPack，现代框架从CDN中获得的好处也不会比jQuery多，因为没有一个框架是如此的占主导地位，以至于每个人都在使用它。React、Angular、Vue——他们都与许多其他竞争对手共享舞台。过去，jQuery唯一真正的竞争对手是Prototype，即使是它，在过去十年的黎明也已经奄奄一息。</p><p id="ac87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不相信我？让我们使用谷歌趋势的高度科学和可靠的艺术:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/8c5f2a70181b6b9f3355fe3a06a42e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4m8C38lnAKe8_JA7Q7-4jA.png"/></div></div></figure><p id="36a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">起初，我对Prototype框架兴趣的这种现象性的暂时上升感到困惑，直到我意识到2009年6月Steam和XBox 360上最畅销的游戏正是Prototype。</p><p id="36fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这确实使jQuery在上面的图表中占主导地位更加令人印象深刻。想想它的竞争对手——React、Angular、Prototype——所有这些都是常用词，可能会合理地出现在搜索中，而与JavaScript没有任何关系。你认为有多少人不小心夸大了jQuery搜索结果？</p><p id="47ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React也许有一天会达到jQuery统治地位的巅峰，但是按照上面的标准，它目前只达到了三分之二。当您将“JavaScript”加入其中时，结果会更加令人印象深刻:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/4c1f0775c4df6a4c009d76c7ea99a36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FVhoQDET9fHLP_38_gDgQA.png"/></div></div></figure><p id="8582" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">奇怪的是，自2004年以来，JavaScript作为一个搜索词的受欢迎程度一直在下降——如果你能解释原因，可以在明信片上找到答案。也许是因为人们在搜索其他东西，但是jQuery直到2006年才出现。</p><p id="23ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无论如何，让我们放大一点，看看2012年到2014年之间发生了什么…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/b91d4c860bd2e321f7a5eb7d75e6d9ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vq_eugbuEKj0nb0w7MuSWg.png"/></div></div></figure><p id="7a59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你看到了吗？当我说jQuery在某种程度上是JavaScript的同义词，这是前所未有的，这在很大程度上是夸张的。但是数字证明了这一点——有时，jQuery甚至比JavaScript更容易被搜索到，因为许多开发人员不知道两者之间的区别。</p><p id="2307" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我曾经认为“一些愚蠢的人不知道JavaScript和jQuery之间的区别”，但事实上，这证明了jQuery的巨大成功。有多少品牌希望自己能以这种方式称霸？它没有得到像谷歌或脸书这样的大公司的支持就做到了这一点。</p><p id="3549" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在一个憎恨jQuery成为潮流的时代，它仍然保持着令人印象深刻的数字，这是一个不小的成就。当然，除非它被谈论得太多<em class="mz">，因为</em>它被如此诋毁。有点像唐纳德·特朗普(我可能已经疏远了我的许多读者，但你已经阅读了大部分文章，所以我不介意)。</p><p id="006b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在许多方面，jQuery是一个先驱——在React Native或Ionic诞生之前很久，jQuery Mobile就帮助开创了一个使用JavaScript开发移动应用程序的时代。Bootstrap是web上最流行的CSS框架，它使用jQuery来支持它的许多组件。早在CSS解决这个特殊问题之前，jQuery就将基于JavaScript的动画带给了大众。</p><p id="b1e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更不用说连锁了。哦连锁。这是一种漂亮、优雅的代码编写方式。整个库基本上是一个返回jQuery对象的函数，其中包含了您需要的所有方法。当你调用其中一个方法时，它会返回另一个jQuery对象。我敢肯定它以前一定存在过——毕竟，jQuery并没有为JavaScript语言增加新的特性，但是如果有人在jQuery之前就这样做了，他们也不会像jQuery那样为此赢得赞誉。</p><p id="3c68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的，它正在开辟一条道路，以便其他人可以跟随。</p><p id="84f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么它有哪些做得不太好的地方呢？我一直称它为框架，但我认为它更像是一个库，一个只有像我这样迂腐的开发者才会关心的区别。但是作为一个库，它对一个典型的框架所需要的很多东西都不是很有主见:路由、状态管理、组件化(如果那是一个词的话)。它有一个模板语法，但是我不知道有多少人知道它的存在，更不用说使用它了。想做什么就做什么的自由意味着没有人真正认为这是一个完整的解决方案。不过话又说回来，React也做着同样的事情，而且似乎欣欣向荣。</p><h1 id="5f5b" class="md ly iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">所以我应该重新开始使用jQuery？</h1><p id="6b21" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">我不是这个意思。如果你看到这篇文章时，希望能得到一个连贯的观点，那你一定没有读过我的其他作品。这在很大程度上是一种思想流。但是请允许我试着从我混乱的头脑中阐明一个观点。</p><p id="8cf9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的许多同行吐槽jQuery这个名字，好像它是一个骂人的词或者是一个特别有力的诅咒。我并不是说jQuery是当今重量级产品的现实替代品。我记得用jQuery构建了复杂的电子商务网站，但是一团糟。它的后继者解决了很多jQuery不太适合的问题。</p><p id="848f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但它仍有一席之地。如果你正在创建一个需要一点“活力”和“流行”的小网站，jQuery可能就是你要找的东西。它很容易学习，大量的插件让你很容易获得视觉天赋，否则你可能不得不自己编写。是不是最有效率的选择？当然不是。但它能做很多事情。而像一个上了年纪的亲人，坚持给你讲那些光辉岁月的故事，是值得你尊敬的。</p><p id="64a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们今天所知道的网络在很大程度上要归功于jQuery，现代JavaScript的巨人是建立在它的成功背后，如果不是它的代码库的话。下一次，你需要快速组装一个动态前端，掸掉旧内存盒上的灰尘，重温辉煌的日子，哪怕只是一会儿。你可能会惊讶你有多喜欢它。</p><p id="06cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我设法看完了整篇文章，没有用jQuery这个词开始一个句子，因此不得不在品牌和语法之间做出选择。不客气。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting Into Three.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">进入Three.js</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-into-three-js-70e99edf1c0e?source=collection_archive---------1-----------------------#2020-01-02">https://javascript.plainenglish.io/getting-into-three-js-70e99edf1c0e?source=collection_archive---------1-----------------------#2020-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c79f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">火星的形成</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b1f8a31eb42e9e7bd14e3a9970aaff57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1anHpoz4LifHrxOKy1NBQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.webtips.dev/getting-into-three-js"><div class="gh gi kr"><img src="../Images/c19cb3069af1beba3c93258d9fcfe139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*-PVzecNs3s4ZbJsdsgIsGA.png"/></div></a></figure><p id="7d7d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Three.js是一个3D JavaScript库，使我们能够在浏览器中构建美丽的3D世界。如果你只知道JavaScript，但想让你的想象力在画布上栩栩如生，现在是时候了。</p><p id="8341" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">有了它，你不必担心物理和数学计算，因为每一件重要的事情都通过一个简化的API公开。</p><p id="ce2b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你访问three.js的官方网站，你可以看到大量的例子来说明这个图书馆真正的可能性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lp"><img src="../Images/8653c2664e4194b42e9d777fdf2d8884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-4VAsUJesriPKQrQmZKHQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Different examples on threejs.org</figcaption></figure><p id="d336" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在three.js的帮助下，我们将深入了解3D的基础知识，在本教程结束时，您将实现如下内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/41d4277b081bd836cc6bcaee09136e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HhG_iKia8p-resWBroKcsg.gif"/></div></div></figure></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="2bae" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">设置Three.js</h1><p id="2ae4" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">在我们开始创建世界之前，我们需要一个画布来显示任何东西。将以下索引文件添加到项目根目录中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="f7a3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我从threejs.org官方网站下载了这个库。我们实现的所有东西都会进入<code class="fe nb nc nd ne b">mars.js</code>，所以在这个阶段你可以在<code class="fe nb nc nd ne b">index.html</code>旁边创建一个空文件。</p><p id="09c2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">您可能还注意到，文档中没有<code class="fe nb nc nd ne b">canvas</code>元素。我们不需要指定一个，因为我们将在脚本中创建它。我还添加了一个小的样式来使画布全屏显示。</p><p id="c89e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">现在要在画布上显示任何东西，我们需要三样东西:一个场景、一个摄像机和一个渲染器。要创建这三个文件，请将以下几行添加到空的<code class="fe nb nc nd ne b">mars.js</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="3a09" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">首先，我们有场景。</p><h2 id="87e3" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">事件</h2><p id="d35a" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">场景只是一个空间，你可以在其中放置各种物体，如几何体、灯光或摄像机。在场景内部，您可以告诉three.js在哪里显示这些对象。接下来我们有相机。</p><h2 id="789d" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">照相机</h2><p id="08fd" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">在这个例子中，我们使用three.js的<code class="fe nb nc nd ne b">PerspectiveCamera</code>,它接受四个参数:</p><p id="0457" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">第一个参数是视场，简称FOV。这是我们的相机看到的场景的可见部分，用度数表示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/a5e11cc5701e0d58e27c24718226ec54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEgOiZqCZYJcfAqDvuoVog.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Field of view / visible area</figcaption></figure><p id="01c0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">第二个参数是纵横比。您几乎总是希望它被设置为画布的宽度除以其高度。否则，你会得到一个扭曲的图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/2a22d3a9388fab46b5bb5a936d9917fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fD-91XRtQ727EOkpESyzSA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Aspect ratio set to 1, width/height, 2</figcaption></figure><p id="b137" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">最后，我们定义近裁剪平面和远裁剪平面。这意味着任何比第一个数字更靠近相机的东西都不会被渲染。这同样适用于第二个数字。距离相机超过指定值的所有内容都不会被渲染。</p><h2 id="2981" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">渲染器</h2><p id="1a56" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">然后我们有渲染器。我们将使用它来渲染场景中的一切。Three.js附带了一些内置的渲染器。通常情况下，你会选择WebGL，其他的通常用于老版本的浏览器作为后备。</p><p id="249a" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">为了最终将画布添加到文档中，用下面两行代码扩展<code class="fe nb nc nd ne b">mars.js</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="20dd" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这里我们告诉渲染器使用画布元素的可用宽度和高度，然后我们可以将它附加到主体。如果你在浏览器中打开它，你会看到一个黑色的空白画布。现在就来添加星球吧！</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="081b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">将火星添加到场景中</h1><p id="83b7" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">为了创造这个星球，我们又需要三样东西:</p><ul class=""><li id="dbb1" class="nt nu iq ku b kv kw ky kz lb nv lf nw lj nx ln ny nz oa ob bi translated">定义对象形状的几何图形</li><li id="6315" class="nt nu iq ku b kv oc ky od lb oe lf of lj og ln ny nz oa ob bi translated">材质-几何图形的外观和感觉，例如颜色和纹理</li><li id="0d5a" class="nt nu iq ku b kv oc ky od lb oe lf of lj og ln ny nz oa ob bi translated">由几何体和材质组成的网格，可以在以后添加到场景中</li></ul><p id="a045" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">让我们将以下内容添加到我们的脚本中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="57d1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">首先，我们通过调用<code class="fe nb nc nd ne b">SphereGeometry</code>创建一个球体。函数调用中的第一个参数是半径，第二个和第三个是球体的宽度和高度部分。请注意，当我将它们的值增加到32时，我们得到了一个更细粒度的球体:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/35fb0003d7f057bee99bd2f312ddd183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_2tcTOtLZ491dG2XIcdCwg.gif"/></div></div></figure><p id="7d82" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">对于材质，我们用的是<code class="fe nb nc nd ne b">MeshPhongMaterial</code>。你现在需要知道的是，这样球体将会受到光线的影响。不像我们用一个<code class="fe nb nc nd ne b">MeshBasicMaterial</code>做例子。</p><p id="4eca" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">要创建一个网格，我们只需将<code class="fe nb nc nd ne b">geometry</code>和<code class="fe nb nc nd ne b">material</code>传递给<code class="fe nb nc nd ne b">Three.Mesh</code>，并将其添加到我们的场景中，名为<code class="fe nb nc nd ne b">scene.add</code>。</p><p id="9301" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">就在这个阶段，如果你刷新浏览器，你仍然什么也看不到。这是因为我们又一次错过了三样东西:</p><h2 id="ee41" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">渲染场景</h2><p id="590b" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">最重要的一点是我们没有告诉three.js渲染场景。为此，我们需要一个渲染循环:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="7f56" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们可以使用<code class="fe nb nc nd ne b">requestAnimationFrame</code>，这将导致大多数屏幕的60fps。为了渲染一切，我们需要用我们的<code class="fe nb nc nd ne b">scene</code>和<code class="fe nb nc nd ne b">camera</code>调用<code class="fe nb nc nd ne b">renderer.render</code>。</p><h2 id="db6a" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">缩小</h2><p id="fe61" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">还有两个障碍阻止我们看到任何东西。第一，我们没有光源，意味着一切都是纯黑的。第二，我们的摄像机的位置在球体中心的内部。因此，即使我们有光源，我们仍然什么也看不见。首先，让我们把镜头往后移一点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/0f13d6ad19bb72954d1c17efb46760ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gdMHfyLYHXuN48RYlS8Bzw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/0576fbfdc522b866b64f0d9c689a9fe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WOY9AZ0_RpHGFTrBl298pQ.gif"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Moving the camera out of the sphere</figcaption></figure><h2 id="e573" class="nf md iq bd me ng nh dn mi ni nj dp mm lb nk nl mo lf nm nn mq lj no np ms nq bi translated">让那里有光</h2><p id="4b9e" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">为了最终看到一些东西，让我们用这三行来扩展<code class="fe nb nc nd ne b">mars.js</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="6f2d" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们添加一个新的<code class="fe nb nc nd ne b">DirectionalLight</code>，设置它的颜色为<code class="fe nb nc nd ne b">#ccc</code>，亮度为100%。默认情况下，其方向设置为<code class="fe nb nc nd ne b">0, 1, 0</code>，即y轴为1，x、z轴为0。我们希望将这个设置为<code class="fe nb nc nd ne b">5, 3, 5</code>以达到我们通常在电影中看到的行星的效果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/147bde6117fc36424114a5d582301314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Pzid8-7oOHcW0r1bsGGoXw.gif"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Adjusting the x, y and z-axis of the directional light</figcaption></figure></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="5b5a" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">添加材料</h1><p id="0a06" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">为了让球体看起来像火星，我们需要添加一些纹理。我使用两个图像来获得最终结果。一个用于漫反射贴图，一个用于凹凸贴图。漫射贴图用于星球的颜色和纹理，而凹凸贴图用于创建不平坦的表面，使山脉突出并缩进沟渠和运河。</p><p id="1396" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我将在文章的最后提供一个包含纹理的GitHub链接，但是你也可以从以下来源下载图片:</p><ul class=""><li id="c78a" class="nt nu iq ku b kv kw ky kz lb nv lf nw lj nx ln ny nz oa ob bi translated"><a class="ae lo" href="http://solarviews.com/raw/mars/marscyl1l.jpg" rel="noopener ugc nofollow" target="_blank">漫射贴图</a></li><li id="5b0a" class="nt nu iq ku b kv oc ky od lb oe lf of lj og ln ny nz oa ob bi translated"><a class="ae lo" href="https://www.deviantart.com/oleg-pluton/art/Mars-elevation-map-773130208" rel="noopener ugc nofollow" target="_blank">凹凸贴图</a></li></ul><p id="a2cc" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在你的项目结构中创建一个名为“<em class="ok">纹理</em>的新文件夹，并将图片放在那里。然后用以下三行代码扩展脚本文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c1ef" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><em class="ok">注意，为了加载本地文件，你需要运行一个web服务器。在本教程中，我一直使用</em><a class="ae lo" href="https://www.npmjs.com/package/http-server" rel="noopener ugc nofollow" target="_blank"><em class="ok">http-server</em></a><em class="ok">包。</em></p><p id="5f7f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们为之前为这个星球创建的<code class="fe nb nc nd ne b">MeshPhongMaterial</code>设置了这些。我发现对<code class="fe nb nc nd ne b">bumpScale</code>使用<code class="fe nb nc nd ne b">0.015</code>效果最好。否则效果太强。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/6b70db22beff58449c7051ce8ecf75b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cvyw1TrB4S8B8-hJhI4Phw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Initial value of bumpScale vs 0.015</figcaption></figure><p id="4dba" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">最后，让我们添加星星。为此，我在Unsplash上使用了<a class="ae lo" href="https://unsplash.com/@weirick" rel="noopener ugc nofollow" target="_blank">杰克·威瑞克</a>的这张漂亮图片。我们可以为它创建另一个网格，使用<code class="fe nb nc nd ne b">MeshBasicMaterial</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="0dc3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">为了达到星星的效果，我们使用了另一个球体，但是这一次，将较大的半径设置为4。您还希望只渲染球体的背面。这就是我们通过设置<code class="fe nb nc nd ne b">starsMaterial.side</code>所做的事情。如果我们一直放大，你会看到，本质上，我们把整个星球包裹在一个更大的球体里。它有星星的纹理。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/221914ac6d147468ce9aaa30f7627eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqaEirV_wPs-Wh5_v3OuXA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">We can see the shape of the sphere by zooming all the way out</figcaption></figure><p id="7142" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">为了总结一切，让我们添加一些动画。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="6895" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">添加交互性</h1><p id="23d7" class="pw-post-body-paragraph ks kt iq ku b kv mu jr kx ky mv ju la lb mw ld le lf mx lh li lj my ll lm ln ij bi translated">首先，让我们给行星添加一个小的旋转。用以下代码行扩展<code class="fe nb nc nd ne b">animate</code>功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="5117" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们还想在用户移动光标时，让相机在地球上移动。为此，我们可以将下面的事件侦听器添加到文档中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="208c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">相机的原始x位置设置为0。当我们将鼠标移动到左边时，我们希望减小该值，当我们将鼠标移动到右边时，我们希望增大该值。</p><p id="1bb2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">问题是，保持鼠标水平位置的<code class="fe nb nc nd ne b">e.x</code>从屏幕左边缘的0开始，一直向上，直到达到最大宽度。没有负值。我们希望从屏幕中间的0开始。这就是我们从<code class="fe nb nc nd ne b">e.x</code>开始否定一半屏幕宽度的原因。为了缩小运动的规模，我还将数字乘以了<code class="fe nb nc nd ne b">0.005</code>。这样，我们只有少量的移动。而要让摄像头一直对着我们的星球，我们需要调用<code class="fe nb nc nd ne b">camera.lookAt</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/1becb0e70caf86099512b58a01e172b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDxhEoeaBbxx4sx79Xka5w.png"/></div></div></figure><p id="f8c9" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">现在，每当用户在地球上移动光标时，摄像机也会随之改变:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/41d4277b081bd836cc6bcaee09136e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HhG_iKia8p-resWBroKcsg.gif"/></div></div></figure><p id="916e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你想加深对Three.js的了解，我强烈建议你浏览一下threejs.org<a class="ae lo" href="https://threejs.org/docs/" rel="noopener ugc nofollow" target="_blank">的示例和官方文档。</a></p><p id="667c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">你不仅可以找到关于它的API的全部文档，还可以找到关于如何开始、画线、创建文本和动画、加载3D模型等等的多个循序渐进的教程。</p><p id="f054" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">希望你学到了新的有用的东西。要获得最终项目的源代码，请访问我在Github 上的<a class="ae lo" href="https://github.com/flowforfrank/threejs" rel="noopener ugc nofollow" target="_blank"> Threejs资源库。🪐感谢你花时间阅读这篇文章，编码快乐！</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://medium.com/@ferencalmasi/membership"><div class="gh gi oo"><img src="../Images/e66c4cd6d9849ac0bd245f3fc39b65c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZ9xuLqLkbqUG65sgVB3gg.png"/></div></a></figure></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.webtips.dev/"><div class="gh gi kr"><img src="../Images/b0d8e0a0c2689a59aa62a677429b83b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*_QOx8lB1bc1rVmMjWQ3Yfw.png"/></div></a></figure></div></div>    
</body>
</html>
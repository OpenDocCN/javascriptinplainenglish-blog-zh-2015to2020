<html>
<head>
<title>Object-Oriented JavaScript — Event Handling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向对象的JavaScript —事件处理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/object-oriented-javascript-event-handling-c978c226da3e?source=collection_archive---------14-----------------------#2020-11-22">https://javascript.plainenglish.io/object-oriented-javascript-event-handling-c978c226da3e?source=collection_archive---------14-----------------------#2020-11-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7520cc6071dde25d409e3be9d5846ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qsPsR97o9R7POPgC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@will0629?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Will Porada</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cf17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript部分是面向对象的语言。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要学习JavaScript，我们必须学习JavaScript的面向对象部分。</p><p id="6eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究事件处理。</p><h1 id="9782" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">停止传播</h1><p id="f1dd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">stopPropagation</code>方法阻止事件冒泡。</p><p id="d0a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不希望事件从事件发生的元素传播到<code class="fe me mf mg mh b">document</code>和两者之间的所有元素，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bcfd" class="mq lc iq mh b gy mr ms l mt mu">const div = document.querySelector('div');<br/>div.addEventListener('click', (e) =&gt; {<br/>  e.stopPropagation();<br/>  alert('clicked');<br/>});</span></pre><p id="3a85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">e</code>是事件对象。</p><p id="c454" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以对它调用<code class="fe me mf mg mh b">stopProgation</code>，这样只有div的监听器会监听click事件。</p><h1 id="e8b4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">防止默认行为</h1><p id="9806" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在浏览器上调用<code class="fe me mf mg mh b">preventDefault</code>方法来阻止浏览器的默认行为。</p><p id="21f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="789a" class="mq lc iq mh b gy mr ms l mt mu">&lt;a href='http://example.com'&gt;click me&lt;/a&gt;</span></pre><p id="4f8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下内容来监听点击事件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7247" class="mq lc iq mh b gy mr ms l mt mu">const a = document.querySelector('a');<br/>a.addEventListener('click', (e) =&gt; {<br/>  if (!confirm('You sure you want to leave?')) {<br/>    e.preventDefault();<br/>  }</span><span id="ab89" class="mq lc iq mh b gy mv ms l mt mu">});</span></pre><p id="68ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe me mf mg mh b">confirm</code>函数调用来显示一个对话框。</p><p id="ec56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果用户点击取消，那么函数返回<code class="fe me mf mg mh b">false</code>并且<code class="fe me mf mg mh b">preventDefault</code>将被调用。</p><p id="f854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦完成，那么<code class="fe me mf mg mh b">a</code>元素的默认动作，即转到<code class="fe me mf mg mh b">href</code>属性中的URL，将被停止。</p><p id="8864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并不是所有的事件都让我们阻止默认行为，但大多数情况下是这样的。</p><p id="c6a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想要确定，我们可以检查事件对象的<code class="fe me mf mg mh b">cancellable</code>属性。</p><h1 id="4584" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">跨浏览器事件侦听器</h1><p id="149b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">大多数现代浏览器都实现了DOM 2规范，所以我们编写的代码大多与它们兼容。</p><p id="a60f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">唯一不同的是IE，它正被迅速淘汰。</p><h1 id="8cd9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">事件的类型</h1><p id="cc17" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">可以发出不同种类的事件。</p><p id="f156" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">包括<code class="fe me mf mg mh b">mousemove</code>、<code class="fe me mf mg mh b">mouseup</code>、<code class="fe me mf mg mh b">mousdown</code>、<code class="fe me mf mg mh b">click</code>和<code class="fe me mf mg mh b">dblclick</code>等鼠标事件。</p><p id="a69c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">mouseover</code>当用户将鼠标放在一个元素上时发出。</p><p id="fc22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">mouseout</code>当鼠标在一个元素上但离开它时发出。</p><p id="4945" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关键字事件包括<code class="fe me mf mg mh b">keydown</code>、<code class="fe me mf mg mh b">keypress</code>和<code class="fe me mf mg mh b">keuyup</code>。</p><p id="fa9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些按顺序发生。</p><p id="0591" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">加载和窗口事件包括<code class="fe me mf mg mh b">load</code>事件，当一幅图像或一个页面及其所有组件完成加载时会发出该事件。</p><p id="ac69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">unload</code>在用户离开页面时发出。</p><p id="4db3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">beforeunload</code>用户离开页面前加载。</p><p id="0411" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出现JavaScript错误时会发出<code class="fe me mf mg mh b">error</code>。</p><p id="2d6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">调整浏览器大小时发出<code class="fe me mf mg mh b">resize</code>。</p><p id="1da1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">滚动页面时发出<code class="fe me mf mg mh b">scroll</code>。</p><p id="6d69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出现右键菜单时会发出<code class="fe me mf mg mh b">contextmenu</code>。</p><p id="7a8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们进入一个表单域时，表单事件包括<code class="fe me mf mg mh b">focus</code>。</p><p id="d31b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">blur</code>是我们离开一个表单域时发出的。</p><p id="ab1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在值改变后离开一个字段时，发出<code class="fe me mf mg mh b">change</code>。</p><p id="3fc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们选择一个文本字段时会发出<code class="fe me mf mg mh b">select</code>。</p><p id="19b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">清除所有输入时发出<code class="fe me mf mg mh b">reset</code>,发送表单时发出<code class="fe me mf mg mh b">submit</code>。</p><p id="03c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现代浏览器也有类似<code class="fe me mf mg mh b">dragstart</code>、<code class="fe me mf mg mh b">dragend</code>、<code class="fe me mf mg mh b">drop</code>等拖拽事件。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/1d8ae56aed03aaa7cc65a645f2497b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MdNi3JuvRYn9_jTx"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@eugenechystiakov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eugene Chystiakov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3d02" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ae76" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以停止事件的传播或默认行为。</p><p id="c814" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以听各种各样的事件。</p><p id="f467" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
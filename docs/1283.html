<html>
<head>
<title>Getting Started with React Native and Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native和Redux入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-react-native-and-redux-cc0205a30175?source=collection_archive---------4-----------------------#2020-02-24">https://javascript.plainenglish.io/getting-started-with-react-native-and-redux-cc0205a30175?source=collection_archive---------4-----------------------#2020-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5402383ed79de4ce28a6fe71d6c07e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_sJXi_XSXLadaRcxitcGdg.png"/></div></div></figure><p id="e967" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Redux是一个流行的React和React本机状态管理库，旨在用于复杂的React和React本机应用程序，在这些应用程序中，在多级组件之间共享状态会变得非常难以管理。在本文中，我们将通过构建一个真正的React本机应用程序来学习如何使用Redux和React挂钩。</p><p id="de64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是最终应用程序的样子</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/cb2978679615e1b571bf7152f4c179c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*ZvDRiA7KcPndcUQN.gif"/></div></figure><p id="3d58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，让我们来看看由<code class="fe lb lc ld le b">react-redux</code>库提供的一些挂钩，这些挂钩提供了一种在使用<code class="fe lb lc ld le b">connect()</code>高阶组件时避免编写样板代码的方法(如果您不熟悉<em class="lf"> connect() </em>，不要担心，这不再那么重要了)。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/385b52fc1e9f0930d799059159aeda20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*THXLQpbtMjCJkhNW.png"/></div></div></figure><h2 id="d24f" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">1.创建新的React本机应用程序</h2><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="bf52" class="lh li iq le b gy me mf l mg mh">expo init projectname</span></pre><p id="c99b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">项目生成后，请在目录中导航并安装以下依赖项。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="b185" class="lh li iq le b gy me mf l mg mh">yarn add redux react-redux @react-navigation/native @react-navigation/stack</span></pre><p id="b1de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用expo-cli，请运行以下命令来安装navigator工作所需的依赖项。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="4baf" class="lh li iq le b gy me mf l mg mh">expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view</span></pre><p id="70ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用的是由<code class="fe lb lc ld le b">react-native-cli</code>生成的项目，建议您遵循此处<a class="ae mi" href="https://reactnavigation.org/docs/en/getting-started.html#installing-dependencies-into-a-bare-react-native-project" rel="noopener ugc nofollow" target="_blank">的说明</a>来安装所需的依赖项和本地操作系统平台的任何其他配置。</p><h2 id="5001" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">2.创建两个模拟屏幕</h2><p id="871e" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在设置好stack navigator之前，每个屏幕文件都会显示一些随机数据。</p><p id="7e95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是<code class="fe lb lc ld le b">ListScreen.js</code>的代码片段:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="cd24" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { StyleSheet, Text, View } from 'react-native'<br/><br/>function ListScreen() {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text&gt;List Screen&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    backgroundColor: '#fff',<br/>    alignItems: 'center',<br/>    justifyContent: 'center'<br/>  }<br/>})<br/><br/>export default ListScreen</span></pre><p id="de08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是<code class="fe lb lc ld le b">ModalScreen.js</code>的代码片段:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="0aa6" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { StyleSheet, Text, View } from 'react-native'<br/><br/>function ModalScreen() {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text&gt;Modal Screen&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    backgroundColor: '#fff',<br/>    alignItems: 'center',<br/>    justifyContent: 'center'<br/>  }<br/>})<br/><br/>export default ModalScreen</span></pre><h2 id="3a6d" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">3.设置堆栈导航器</h2><p id="ea39" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">随着最近发布的<code class="fe lb lc ld le b">react-navigation</code>版本5，配置堆栈导航器的方式发生了变化。这些新变化的主要亮点是基于组件的配置。维护者团队在一篇博客文章<a class="ae mi" href="https://reactnavigation.org/blog/" rel="noopener ugc nofollow" target="_blank">中列举的一些其他亮点是，导航模式现在更加基于组件，常见用例现在可以用预定义的钩子处理，新的架构允许您在组件本身内配置和更新屏幕。还有一些其他的变化。</a></p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="f177" class="lh li iq le b gy me mf l mg mh">import * as React from 'react'<br/>import { NavigationContainer } from '@react-navigation/native'<br/>import { createStackNavigator } from '@react-navigation/stack'<br/><br/>import ListScreen from '../screens/ListScreen'<br/>import ModalScreen from '../screens/ModalScreen'</span></pre><p id="5b0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lb lc ld le b">NavigationContainer</code>是由管理导航树的<code class="fe lb lc ld le b">react-navigation</code>库提供的一个组件。它包含了<code class="fe lb lc ld le b">navigation</code>状态并包装了所有导航器的结构。</p><p id="9cc7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lb lc ld le b">createStackNavigator</code>是一个实现堆栈导航模式的函数。该函数返回两个React组件:<code class="fe lb lc ld le b">Screen</code>和<code class="fe lb lc ld le b">Navigator</code>，这将允许配置每个组件屏幕。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="a026" class="lh li iq le b gy me mf l mg mh">const Stack = createStackNavigator()<br/><br/>function MainStackNavigator() {<br/>  return (<br/>    &lt;NavigationContainer&gt;<br/>      &lt;Stack.Navigator&gt;<br/>        &lt;Stack.Screen name='List' component={ListScreen} /&gt;<br/>        &lt;Stack.Screen name='Modal' component={ModalScreen} /&gt;<br/>      &lt;/Stack.Navigator&gt;<br/>    &lt;/NavigationContainer&gt;<br/>  )<br/>}<br/><br/>export default MainStackNavigator</span></pre><p id="66dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开<code class="fe lb lc ld le b">App.js</code>文件，导入app根目录下的<code class="fe lb lc ld le b">MainStackNavigator</code>，如下图所示:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="c63d" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import MainStackNavigator from './src/navigation/AppNavigator'<br/><br/>export default function App() {<br/>  return &lt;MainStackNavigator /&gt;<br/>}</span></pre><p id="dfe8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，进入终端窗口并执行命令<code class="fe lb lc ld le b">expo start</code>。在运行Expo客户端的模拟器或真实设备中，您将会注意到类似的结果，如下所示:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/82e96a3e85873ecebabc23663b64ad54.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/0*dsf3bduWObobAVVI.png"/></div></figure><h2 id="8f12" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">4.创建一个透明背景的叠加模型</h2><p id="58e1" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated"><code class="fe lb lc ld le b">modal</code>可以很容易地配置一个堆栈导航器，在显示它的屏幕上覆盖一层透明背景。在当前的应用程序中，由于<code class="fe lb lc ld le b">ListScreen</code>将是第一个屏幕，并显示一个项目列表，因此<code class="fe lb lc ld le b">ModalScreen</code>将是一个对话框，通过单击<code class="fe lb lc ld le b">ListScreen</code>上的按钮出现。这个对话框打开后，会在它后面的屏幕上添加一个透明层。在此对话框下方可以看到上一个屏幕。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="e5df" class="lh li iq le b gy me mf l mg mh">function MainStackNavigator() {<br/>  return (<br/>    &lt;NavigationContainer&gt;<br/>      &lt;Stack.Navigator<br/>        mode='modal'<br/>        headerMode='none'<br/>        screenOptions={{<br/>          cardStyle: { backgroundColor: 'transparent' },<br/>          cardOverlayEnabled: true,<br/>          cardStyleInterpolator: ({ current: { progress } }) =&gt; ({<br/>            cardStyle: {<br/>              opacity: progress.interpolate({<br/>                inputRange: [0, 0.5, 0.9, 1],<br/>                outputRange: [0, 0.25, 0.7, 1]<br/>              })<br/>            },<br/>            overlayStyle: {<br/>              opacity: progress.interpolate({<br/>                inputRange: [0, 1],<br/>                outputRange: [0, 0.5],<br/>                extrapolate: 'clamp'<br/>              })<br/>            }<br/>          })<br/>        }}&gt;<br/>        &lt;Stack.Screen name='List' component={ListScreen} /&gt;<br/>        &lt;Stack.Screen name='Modal' component={ModalScreen} /&gt;<br/>      &lt;/Stack.Navigator&gt;<br/>    &lt;/NavigationContainer&gt;<br/>  )<br/>}</span></pre><p id="5539" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从现在起什么都不会发生。您仍然需要配置两个屏幕的样式，并添加一个从<code class="fe lb lc ld le b">ListScreen</code>打开模态对话框的方法。</p><h2 id="6f16" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">5.导航到模式屏幕</h2><p id="a6d7" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">该按钮将是可触摸的，单次触摸将导航至<code class="fe lb lc ld le b">ModalScreen</code>。导航将由可以作为参数传递给功能组件<code class="fe lb lc ld le b">ListScreen</code>的<code class="fe lb lc ld le b">navigation</code>属性来处理。这是可能的，因为<code class="fe lb lc ld le b">ListScreen</code>是堆栈导航器的一部分。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="e5fc" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import {<br/>  StyleSheet,<br/>  StatusBar,<br/>  Text,<br/>  View,<br/>  TouchableOpacity<br/>} from 'react-native'<br/>import { Ionicons } from '@expo/vector-icons'<br/><br/>function ListScreen({ navigation }) {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;View style={styles.fabContainer}&gt;<br/>        &lt;TouchableOpacity<br/>          onPress={() =&gt; navigation.navigate('Modal')}<br/>          style={styles.fabButton}&gt;<br/>          &lt;Ionicons name='ios-add' color='#fff' size={70} /&gt;<br/>        &lt;/TouchableOpacity&gt;<br/>      &lt;/View&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    backgroundColor: 'blue'<br/>  },<br/>  fabContainer: {<br/>    justifyContent: 'flex-end',<br/>    flexDirection: 'row',<br/>    position: 'absolute',<br/>    right: 10,<br/>    bottom: 20<br/>  },<br/>  fabButton: {<br/>    backgroundColor: 'blue',<br/>    borderRadius: 35,<br/>    width: 70,<br/>    height: 70,<br/>    alignItems: 'center',<br/>    justifyContent: 'center'<br/>  }<br/>})<br/><br/>export default ListScreen</span></pre><p id="a1c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">回到模拟器设备，你会注意到变化。首先要注意的是右下角浮动的动作按钮。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/12d37d78821c8cdc1762ceeae7162d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/0*tW1JL2wWBatSHjla.png"/></div></figure><p id="46ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">按下此按钮将打开一个全模式屏幕。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/2ae5aa24bdfbbdda76ebd4b9f6643566.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*Wx0FCHFt9WaUbPtb.gif"/></div></figure><h2 id="1ce0" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">6.添加带有透明背景的自定义模式</h2><p id="858a" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">这个模式将来会有一个输入字段，让用户向列表中添加条目。然而，现在，它将显示一个文本和一个关闭按钮。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="89cd" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { StyleSheet, TouchableOpacity, Text, View } from 'react-native'<br/>import { Ionicons } from '@expo/vector-icons'<br/><br/>function ModalScreen({ navigation }) {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;View style={styles.innerContainer}&gt;<br/>        &lt;View style={styles.closeButtonContainer}&gt;<br/>          &lt;TouchableOpacity<br/>            style={styles.closeButton}<br/>            onPress={() =&gt; navigation.goBack()}&gt;<br/>            &lt;Ionicons name='ios-close' color='#101010' size={40} /&gt;<br/>          &lt;/TouchableOpacity&gt;<br/>        &lt;/View&gt;<br/>        &lt;View style={styles.modalContainer}&gt;<br/>          &lt;Text style={{ color: '#444', fontSize: 20 }}&gt;<br/>            What do you want to do?<br/>          &lt;/Text&gt;<br/>        &lt;/View&gt;<br/>      &lt;/View&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1<br/>  },<br/>  innerContainer: {<br/>    borderTopLeftRadius: 10,<br/>    borderTopRightRadius: 10,<br/>    justifyContent: 'flex-end',<br/>    flexDirection: 'row',<br/>    height: '30%',<br/>    width: '100%',<br/>    position: 'absolute',<br/>    bottom: 0,<br/>    right: 0,<br/>    backgroundColor: '#fff'<br/>  },<br/>  closeButtonContainer: {<br/>    position: 'absolute',<br/>    alignItems: 'flex-end',<br/>    right: 10<br/>  },<br/>  closeButton: {<br/>    backgroundColor: '#d3d3d3',<br/>    borderRadius: 20,<br/>    width: 40,<br/>    height: 40,<br/>    top: 10,<br/>    alignItems: 'center',<br/>    justifyContent: 'center'<br/>  },<br/>  modalContainer: {<br/>    justifyContent: 'center',<br/>    alignItems: 'center',<br/>    position: 'absolute',<br/>    margin: 60,<br/>    top: 10,<br/>    left: 50<br/>  }<br/>})<br/><br/>export default ModalScreen</span></pre><p id="3fbf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成此步骤后，您将在设备中获得以下输出:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/7a611f7fbd80463920fd7a02117d7c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*ZAmBbnH2Gv1Aklf8.gif"/></div></figure><h2 id="5194" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">7.在自定义模式屏幕中添加文本输入</h2><p id="f901" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在本节中，让我们从<code class="fe lb lc ld le b">react-native</code>核心添加一个文本输入组件。这将允许用户输入他们想要添加到列表中的项目的名称。现在，因为我们还没有配置Redux来管理应用程序状态，所以让我们使用钩子<code class="fe lb lc ld le b">useState</code>来本地管理组件状态。</p><p id="6e50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开<code class="fe lb lc ld le b">ModalScreen.js</code>，从<code class="fe lb lc ld le b">react-native</code>内核导入<code class="fe lb lc ld le b">TextInput</code>。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="f2a5" class="lh li iq le b gy me mf l mg mh">import {<br/>  StyleSheet,<br/>  TouchableOpacity,<br/>  Text,<br/>  View,<br/>  TextInput<br/>} from 'react-native'</span></pre><p id="d95e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，在样式为<code class="fe lb lc ld le b">modalContainer</code>的<code class="fe lb lc ld le b">View</code>中添加下面的<code class="fe lb lc ld le b">TextInput</code>组件以及一个可触摸的提交按钮。当用户在输入字段中输入一个值时，这个可触摸按钮将导航回列表屏幕。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="a837" class="lh li iq le b gy me mf l mg mh">&lt;View style={styles.modalContainer}&gt;<br/>  &lt;Text style={{ color: '#444', fontSize: 20 }}&gt;What do you want to do?&lt;/Text&gt;<br/>  &lt;TextInput<br/>    style={{<br/>      height: 50,<br/>      width: 200,<br/>      padding: 5,<br/>      borderColor: 'gray',<br/>      borderBottomWidth: 1<br/>    }}<br/>    numberOfLines={1}<br/>    onChangeText={value =&gt; setValue(value)}<br/>    value={value}<br/>    clearButtonMode='while-editing'<br/>  /&gt;<br/>  &lt;TouchableOpacity<br/>    style={{<br/>      marginTop: 10,<br/>      backgroundColor: 'blue',<br/>      width: 50,<br/>      height: 50,<br/>      alignItems: 'center',<br/>      justifyContent: 'center',<br/>      borderRadius: 5<br/>    }}<br/>    onPress={() =&gt; navigation.navigate('List')}&gt;<br/>    &lt;Ionicons name='ios-arrow-dropright-circle' size={40} color='#fff' /&gt;<br/>  &lt;/TouchableOpacity&gt;<br/>&lt;/View</span></pre><h2 id="83cb" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">8.向列表屏幕添加自定义标题</h2><p id="aa4e" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在目录<code class="fe lb lc ld le b">src/components</code>中创建一个名为<code class="fe lb lc ld le b">Header.js</code>的新文件。该功能组件将在列表屏幕中显示标题。</p><p id="b329" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将以下代码片段添加到刚刚创建的文件中:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="5fc0" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { View, Text, StyleSheet } from 'react-native'<br/><br/>function Header(props) {<br/>  const { title } = props<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text style={styles.text}&gt;{title}&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>    backgroundColor: 'blue',<br/>    height: 125,<br/>    paddingTop: 20<br/>  },<br/>  text: {<br/>    color: '#fff',<br/>    fontSize: 28,<br/>    fontWeight: '500'<br/>  }<br/>})<br/><br/>export default Header</span></pre><p id="16f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，转到<code class="fe lb lc ld le b">ListScreen.js</code>并在其他语句下导入这个功能组件。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="11fe" class="lh li iq le b gy me mf l mg mh">// after other import statements import Header from '../components/Header'</span></pre><p id="e32a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，在浮动按钮之前添加要呈现的组件。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="d745" class="lh li iq le b gy me mf l mg mh">function ListScreen({ navigation }) {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Header title={'List'} /&gt;<br/>      {/* rest of the code remains same */}<br/>    &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="3534" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在模拟器中，您将看到如下所示的标题:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b6df944e5f87ce9995502e0df11a6a74.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/0*52MOkZnFLaXGnj4q.png"/></div></figure><p id="f8e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">状态栏和页眉背景不搭，对吧？</p><h2 id="3e26" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">9.更改状态栏外观</h2><p id="3fbe" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">为了改变状态栏的外观，让我们从<code class="fe lb lc ld le b">react-native</code>核心API导入它。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="abd3" class="lh li iq le b gy me mf l mg mh">import {<br/>  StyleSheet,<br/>  StatusBar,<br/>  Text,<br/>  View,<br/>  TouchableOpacity<br/>} from 'react-native'</span></pre><p id="8f56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，使用带尖括号的React片段缩写，修改<code class="fe lb lc ld le b">ListScreen</code>组件的返回语句，如下所示:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="0d56" class="lh li iq le b gy me mf l mg mh">function ListScreen({ navigation }) {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;StatusBar barStyle='light-content' /&gt;<br/>      &lt;View style={styles.container}&gt;<br/>        &lt;Header title={'List'} /&gt;<br/>        &lt;View style={styles.fabContainer}&gt;<br/>          &lt;TouchableOpacity<br/>            onPress={() =&gt; navigation.navigate('Modal')}<br/>            style={styles.fabButton}&gt;<br/>            &lt;Ionicons name='ios-add' color='#fff' size={70} /&gt;<br/>          &lt;/TouchableOpacity&gt;<br/>        &lt;/View&gt;<br/>      &lt;/View&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span></pre><p id="24bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你现在会注意到状态栏有一个白色的外观。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/b0c08f75467253fda16dfe6873baba25.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/0*sgPN1gFjDq4xourt.png"/></div></figure><h2 id="4f59" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">10.添加列表视图</h2><p id="fca5" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在这一节中，让我们实现将显示一个项目列表的主视图。在<code class="fe lb lc ld le b">ListScreen.js</code>中，添加以下名为<code class="fe lb lc ld le b">ListView</code>的功能组件。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="b112" class="lh li iq le b gy me mf l mg mh">function ListView() {<br/>  return (<br/>    &lt;View<br/>      style={{<br/>        backgroundColor: 'white',<br/>        flex: 1,<br/>        borderTopLeftRadius: 20,<br/>        borderTopRightRadius: 20,<br/>        paddingHorizontal: 20,<br/>        paddingVertical: 20<br/>      }}&gt;<br/>      &lt;Text&gt;Here goes list items&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="16eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，修改<code class="fe lb lc ld le b">ListScreen</code>使其显示在<code class="fe lb lc ld le b">Header</code>下方。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="2807" class="lh li iq le b gy me mf l mg mh">&lt;View style={styles.container}&gt;<br/>  &lt;Header title={'List'} /&gt;<br/>  &lt;ListView /&gt;<br/>  {/* rest of the code remains same */}<br/>&lt;/View&gt;</span></pre><p id="32ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到运行该应用程序的设备，您会注意到它的外观有了很大的不同。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/d0257724c2401f1bb56dd5bf812190a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/0*rEC7djcEAe7QOuda.png"/></div></figure><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/b7119df8f754cb701019f5edd5a6eb14.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*_KgZCn9FntJQxzIX.gif"/></div></figure><h2 id="aa0f" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">11.创建根缩减器</h2><p id="5eeb" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">创建一个名为<code class="fe lb lc ld le b">src/redux/</code>的新目录，并在其中创建一个名为<code class="fe lb lc ld le b">reducer.js</code>的新文件。该文件将包含动作类型的定义、动作创建者以及我们将在该应用程序中创建的唯一缩减器。这个减速器将被称为<code class="fe lb lc ld le b">rootReducer</code>。</p><p id="6d8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当使用Redux管理整个应用程序的状态时，状态本身由一个JavaScript对象表示。把这个对象看作是只读的(不可变的)，因为你不能直接改变这个状态或对象(以树的形式表示)。这需要采取行动。</p><p id="5f9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">动作类似于Redux中的事件。它们可以在按键、定时器或网络请求中触发。</p><p id="9ea0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先定义一个动作类型，如下所示。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="bdea" class="lh li iq le b gy me mf l mg mh">export const addItem = item =&gt; ({<br/>  type: ADD_ITEM,<br/>  payload: item<br/>})</span></pre><p id="c408" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">定义一个初始状态，它将有一个名为<code class="fe lb lc ld le b">itemList</code>的空数组。每当一个动作被触发时，应用程序的状态就会改变。应用程序状态的处理由reducers完成。</p><p id="3ab7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个初始状态将作为参数传递给<code class="fe lb lc ld le b">rootReducer</code>。调用<em class="lf"> create </em>动作将调用为reducer中相同动作类型定义的逻辑。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="9d84" class="lh li iq le b gy me mf l mg mh">const initialState = {<br/>  itemList: []<br/>}<br/><br/>const rootReducer = (state = initialState, action) =&gt; {<br/>  switch (action.type) {<br/>    case ADD_ITEM:<br/>      return {<br/>        ...state,<br/>        itemList: state.itemList.concat({<br/>          id: Math.random(),<br/>          name: action.payload<br/>        })<br/>      }<br/><br/>    default:<br/>      return state<br/>  }<br/>}<br/><br/>export default rootReducer</span></pre><h2 id="8fae" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">12.配置商店</h2><p id="bbb9" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">创建一个新文件<code class="fe lb lc ld le b">src/redux/store.js</code>。存储是一个将动作和减少器集合在一起的对象。这个文件将实现这一点。</p><p id="c2c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">存储提供并保存应用程序级别的状态，而不是单个组件。向其中添加以下代码片段:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="d43f" class="lh li iq le b gy me mf l mg mh">import { createStore } from 'redux'<br/>import rootReducer from './reducer'<br/><br/>const store = createStore(rootReducer)<br/><br/>export default store</span></pre><p id="c6d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，要将该商店连接到应用程序，请打开<code class="fe lb lc ld le b">App.js</code>文件并从该文件导入<code class="fe lb lc ld le b">store</code>，以及从<code class="fe lb lc ld le b">react-redux</code> npm包导入高阶组件<code class="fe lb lc ld le b">Provider</code>。这有助于你将商店传递给当前应用程序的其余组件。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="1e4f" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { Provider as StateProvider } from 'react-redux'<br/>import store from './src/redux/store'<br/>import MainStackNavigator from './src/navigation/AppNavigator'<br/><br/>export default function App() {<br/>  return (<br/>    &lt;StateProvider store={store}&gt;<br/>      &lt;MainStackNavigator /&gt;<br/>    &lt;/StateProvider&gt;<br/>  )<br/>}</span></pre><h2 id="001f" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">13.用户选择器挂钩</h2><p id="b137" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">钩子和参数之间的主要区别(旧的方法)是钩子可以返回任何值作为结果，而不仅仅是一个对象。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="be4e" class="lh li iq le b gy me mf l mg mh">import { useSelector } from 'react-redux'</span></pre><p id="1eb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，使用<code class="fe lb lc ld le b">ListView</code>组件内的钩子<code class="fe lb lc ld le b">useSelector</code>获取<code class="fe lb lc ld le b">listItems</code>数组。此外，如果列表为空或不为空，则通过显示一条消息来修改它的return语句。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="42a6" class="lh li iq le b gy me mf l mg mh">function ListView() {<br/>  const listItems = useSelector(state =&gt; state.itemList)<br/><br/>  return (<br/>    &lt;View<br/>      style={{<br/>        backgroundColor: 'white',<br/>        flex: 1,<br/>        borderTopLeftRadius: 20,<br/>        borderTopRightRadius: 20,<br/>        paddingHorizontal: 20,<br/>        paddingVertical: 20<br/>      }}&gt;<br/>      {listItems.length !== 0 ? (<br/>        &lt;Text&gt;Contains List items&lt;/Text&gt;<br/>      ) : (<br/>        &lt;Text style={{ fontSize: 30 }}&gt;You list is empty :'(&lt;/Text&gt;<br/>      )}<br/>    &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="e002" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是您将得到的输出:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/137458e0ed7389c4016cf3c06fbf366e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/0*0tKNCWpT1syxz92_.png"/></div></figure><h2 id="c0b7" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">14.通过分派动作创建者向列表添加项目</h2><p id="82e3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated"><code class="fe lb lc ld le b">useDispatch()</code>钩子完全引用了Redux存储中的调度函数。这个钩子只在需要分派一个动作的时候使用。在<code class="fe lb lc ld le b">ModalScreen.js</code>中，要根据<code class="fe lb lc ld le b">TextInput</code>的值添加一个项目，必须更新状态。这可以通过触发在<code class="fe lb lc ld le b">redux/reducer.js</code>文件中创建动作时定义的名为<code class="fe lb lc ld le b">addItem</code>的动作创建器方法来实现。</p><p id="cd2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先导入以下语句:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="6be5" class="lh li iq le b gy me mf l mg mh">import { useDispatch } from 'react-redux' <br/>import { addItem } from '../redux/reducer'</span></pre><p id="c2b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，在<code class="fe lb lc ld le b">ModalScreen</code>组件中，创建一个名为<code class="fe lb lc ld le b">onSaveNote</code>的助手方法，当提交文本输入时，它将触发动作创建器，并将用户带回列表屏幕。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="93ad" class="lh li iq le b gy me mf l mg mh">const [value, setValue] = useState('')<br/><br/>const dispatch = useDispatch()<br/><br/>const onSaveNote = value =&gt; {<br/>  dispatch(addItem(value))<br/>  navigation.navigate('List')<br/>}</span></pre><p id="c5c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，在提交按钮上添加这个帮助器方法作为<code class="fe lb lc ld le b">onPress</code>的值。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="f622" class="lh li iq le b gy me mf l mg mh">&lt;TouchableOpacity<br/>  style={{<br/>    marginTop: 10,<br/>    backgroundColor: 'blue',<br/>    width: 50,<br/>    height: 50,<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>    borderRadius: 5<br/>  }}<br/>  onPress={() =&gt; onSaveNote(value)}&gt;<br/>  &lt;Ionicons name='ios-arrow-dropright-circle' size={40} color='#fff' /&gt;<br/>&lt;/TouchableOpacity&gt;</span></pre><h2 id="ca29" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">15.添加平面列表以显示列表中的项目</h2><p id="cbbf" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">要在列表屏幕上显示项目列表，打开文件<code class="fe lb lc ld le b">ListScreen.js</code>并从<code class="fe lb lc ld le b">react-native</code>导入<code class="fe lb lc ld le b">FlatList</code>。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="2dc9" class="lh li iq le b gy me mf l mg mh">import {<br/>  StyleSheet,<br/>  StatusBar,<br/>  Text,<br/>  View,<br/>  TouchableOpacity,<br/>  FlatList<br/>} from 'react-native'</span></pre><p id="d0ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，修改<code class="fe lb lc ld le b">ListView</code>渲染函数如下:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="af9f" class="lh li iq le b gy me mf l mg mh">{<br/>  listItems.length !== 0 ? (<br/>    &lt;FlatList<br/>      data={listItems}<br/>      keyExtractor={item =&gt; item.id.toString()}<br/>      renderItem={({ item }) =&gt; (<br/>        &lt;View style={styles.listItemContainer}&gt;<br/>          &lt;View style={styles.listItemMetaContainer}&gt;<br/>            &lt;Text style={styles.itemTitle} numberOfLines={1}&gt;<br/>              {item.name}<br/>            &lt;/Text&gt;<br/>          &lt;/View&gt;<br/>        &lt;/View&gt;<br/>      )}<br/>    /&gt;<br/>  ) : (<br/>    &lt;Text style={{ fontSize: 30 }}&gt;You list is empty :'(&lt;/Text&gt;<br/>  )<br/>}</span></pre><h2 id="90c9" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">16.更新标题</h2><p id="bcc7" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在这一部分，使用当前应用程序的状态，让我们显示列表中要在标题中显示的项目数。这可以通过使用<code class="fe lb lc ld le b">react-redux</code>的<code class="fe lb lc ld le b">useSelector</code>钩来完成。</p><p id="3809" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将文件<code class="fe lb lc ld le b">components/Header.js</code>修改如下:</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="dc3a" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import { View, Text, StyleSheet } from 'react-native'<br/>import { useSelector } from 'react-redux'<br/><br/>function Header(props) {<br/>  const { title } = props<br/>  const listItems = useSelector(state =&gt; state.itemList)<br/><br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;<br/>      &lt;Text style={styles.subTitle}&gt;Left: {listItems.length}&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>    backgroundColor: 'blue',<br/>    height: 125,<br/>    paddingTop: 20<br/>  },<br/>  title: {<br/>    color: '#fff',<br/>    fontSize: 28,<br/>    fontWeight: '500'<br/>  },<br/>  subTitle: {<br/>    paddingTop: 5,<br/>    fontSize: 18,<br/>    color: '#fff'<br/>  }<br/>})<br/><br/>export default Header</span></pre><p id="864d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是列表中有一个项目时更新的标题栏。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/881101ff3cdc5753081d31d5c48f6803.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/0*r_ZG9HrXWl2W5ng_.png"/></div></div></figure><h2 id="a277" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">17.移除项目</h2><p id="5bc0" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">由于我们已经了解了redux挂钩如何与React原生应用程序一起工作，请尝试添加一个remove item按钮，该按钮将从列表中删除一个项目，如下所示。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/6e5218d936b8f2671b2b01c361d8f680.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/0*6xiIaCyQbh7FTnLq.png"/></div></figure><p id="3c84" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你需要任何帮助，你可以回到下面的源代码。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="463c" class="lh li iq le b gy me mf l mg mh">export const ADD_ITEM = 'ADD_ITEM'<br/>export const REMOVE_ITEM = 'REMOVE_ITEM'<br/><br/>export const addItem = item =&gt; ({<br/>  type: ADD_ITEM,<br/>  payload: item<br/>})<br/><br/>export const removeItem = id =&gt; ({<br/>  type: REMOVE_ITEM,<br/>  payload: id<br/>})<br/><br/>const initialState = {<br/>  itemList: []<br/>}<br/><br/>const rootReducer = (state = initialState, action) =&gt; {<br/>  switch (action.type) {<br/>    case ADD_ITEM:<br/>      return {<br/>        ...state,<br/>        itemList: state.itemList.concat({<br/>          id: Math.random(),<br/>          name: action.payload<br/>        })<br/>      }<br/>    case REMOVE_ITEM:<br/>      return {<br/>        ...state,<br/>        itemList: state.itemList.filter(item =&gt; item.id !== action.payload)<br/>      }<br/><br/>    default:<br/>      return state<br/>  }<br/>}<br/><br/>export default rootReducer</span></pre><p id="a397" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，这里是更新的<code class="fe lb lc ld le b">ListScreen.js</code>，您可以添加按钮来删除相应样式的项目。</p><p id="386f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要触发一个动作，您必须使用<code class="fe lb lc ld le b">useDispatch()</code>钩子。</p><pre class="kx ky kz la gt ma le mb mc aw md bi"><span id="8ff7" class="lh li iq le b gy me mf l mg mh">import React from 'react'<br/>import {<br/>  StyleSheet,<br/>  StatusBar,<br/>  Text,<br/>  View,<br/>  TouchableOpacity,<br/>  FlatList<br/>} from 'react-native'<br/>import { Ionicons } from '@expo/vector-icons'<br/>import { useSelector, useDispatch } from 'react-redux'<br/>import { removeItem } from '../redux/reducer'<br/><br/>import Header from '../components/Header'<br/><br/>function ListView() {<br/>  const listItems = useSelector(state =&gt; state.itemList)<br/>  console.log({ listItems })<br/><br/>  const dispatch = useDispatch()<br/><br/>  return (<br/>    &lt;View<br/>      style={{<br/>        backgroundColor: 'white',<br/>        flex: 1,<br/>        borderTopLeftRadius: 20,<br/>        borderTopRightRadius: 20,<br/>        paddingHorizontal: 20,<br/>        paddingVertical: 20<br/>      }}&gt;<br/>      {listItems.length !== 0 ? (<br/>        &lt;FlatList<br/>          data={listItems}<br/>          keyExtractor={item =&gt; item.id.toString()}<br/>          renderItem={({ item }) =&gt; (<br/>            &lt;View style={styles.listItemContainer}&gt;<br/>              &lt;Text style={styles.itemTitle} numberOfLines={1}&gt;<br/>                {item.name}<br/>              &lt;/Text&gt;<br/>              &lt;TouchableOpacity<br/>                onPress={() =&gt; dispatch(removeItem(item.id))}<br/>                style={styles.button}&gt;<br/>                &lt;Ionicons name='ios-trash' color='#fff' size={20} /&gt;<br/>              &lt;/TouchableOpacity&gt;<br/>            &lt;/View&gt;<br/>          )}<br/>        /&gt;<br/>      ) : (<br/>        &lt;Text style={{ fontSize: 30 }}&gt;You list is empty :'(&lt;/Text&gt;<br/>      )}<br/>    &lt;/View&gt;<br/>  )<br/>}<br/><br/>function ListScreen({ navigation }) {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;StatusBar barStyle='light-content' /&gt;<br/>      &lt;View style={styles.container}&gt;<br/>        &lt;Header title={'List'} /&gt;<br/>        &lt;ListView /&gt;<br/>        &lt;View style={styles.fabContainer}&gt;<br/>          &lt;TouchableOpacity<br/>            onPress={() =&gt; navigation.navigate('Modal')}<br/>            style={styles.fabButton}&gt;<br/>            &lt;Ionicons name='ios-add' color='#fff' size={70} /&gt;<br/>          &lt;/TouchableOpacity&gt;<br/>        &lt;/View&gt;<br/>      &lt;/View&gt;<br/>    &lt;/&gt;<br/>  )<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    backgroundColor: 'blue'<br/>  },<br/>  fabContainer: {<br/>    justifyContent: 'flex-end',<br/>    flexDirection: 'row',<br/>    position: 'absolute',<br/>    right: 10,<br/>    bottom: 20<br/>  },<br/>  fabButton: {<br/>    backgroundColor: 'blue',<br/>    borderRadius: 35,<br/>    width: 70,<br/>    height: 70,<br/><br/>    alignItems: 'center',<br/>    justifyContent: 'center'<br/>  },<br/>  listItemContainer: {<br/>    flex: 1,<br/>    flexDirection: 'row',<br/>    paddingTop: 10,<br/>    paddingBottom: 5,<br/>    paddingRight: 5,<br/>    justifyContent: 'space-between',<br/>    width: '100%',<br/>    borderBottomWidth: 0.25<br/>  },<br/>  itemTitle: {<br/>    fontSize: 22,<br/>    fontWeight: '400'<br/>  },<br/>  button: {<br/>    borderRadius: 8,<br/>    backgroundColor: '#ff333390',<br/>    padding: 5<br/>  }<br/>})<br/><br/>export default ListScreen</span></pre><p id="eb68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是演示应用程序的最终输出:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/47b7289f54ec340d8106f5aef626590d.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*p-2TOK-QCMdOOH2O.gif"/></div></figure><h2 id="060d" class="lh li iq bd lj lk ll dn lm ln lo dp lp kj lq lr ls kn lt lu lv kr lw lx ly lz bi translated">结论</h2><p id="3cf3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">关于Redux钩子的高级用法，可以在这里 查阅官方文档<a class="ae mi" href="https://react-redux.js.org/next/api/hooks" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">。</strong></a></p><p id="185f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望你现在已经掌握了如何使用钩子在react原生应用中使用Redux，并且对React导航的基础有了更好的理解。如果你喜欢这个React Native教程，请与你的朋友分享。编码快乐！</p><h1 id="3b20" class="ms li iq bd lj mt mu mv lm mw mx my lp mz na nb ls nc nd ne lv nf ng nh ly ni bi translated">后续步骤</h1><p id="f83c" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">既然您已经学习了在React Native中使用Redux，下面是一些您可以研究的其他主题</p><ul class=""><li id="ed28" class="nj nk iq ka b kb kc kf kg kj nl kn nm kr nn kv no np nq nr bi translated">Firebase — <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/push-notifications-react-native-firebase/" rel="noopener ugc nofollow" target="_blank">推送通知</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-firebase-storage/" rel="noopener ugc nofollow" target="_blank"> Firebase存储</a></li><li id="cc94" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated">如何in React Native—<a class="ae mi" href="https://enappd.com/blog/react-native-life-cycle-hooks/79" rel="noopener ugc nofollow" target="_blank">WebView</a>|<a class="ae mi" href="https://www.instamobile.io/mobile-development/gradients-react-native/" rel="noopener ugc nofollow" target="_blank">渐变</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/capturing-photos-and-videos-with-the-camera-in-react-native/" rel="noopener ugc nofollow" target="_blank">相机</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/giphy-react-native/" rel="noopener ugc nofollow" target="_blank">添加GIF </a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/react-native-maps/" rel="noopener ugc nofollow" target="_blank">谷歌地图</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-redux/" rel="noopener ugc nofollow" target="_blank"> Redux </a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/react-native-breakpoints-debugging/" rel="noopener ugc nofollow" target="_blank">调试</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-hooks/" rel="noopener ugc nofollow" target="_blank">钩子</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-dark-mode/" rel="noopener ugc nofollow" target="_blank">黑暗模式</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/deep-linking-react-native/" rel="noopener ugc nofollow" target="_blank">深度链接</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/react-native-graphql-apollo-client/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/asyncstorage-example-react-native/" rel="noopener ugc nofollow" target="_blank">异步存储【T22</a></li><li id="abf4" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated">支付— <a class="ae mi" href="https://www.instamobile.io/react-native-controls/apple-pay-integrate-android-pay-react-native/" rel="noopener ugc nofollow" target="_blank"> Apple Pay </a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/accept-payments-android-ios-apps-react-native-checkout/" rel="noopener ugc nofollow" target="_blank">条纹</a></li><li id="385c" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated">认证— <a class="ae mi" href="https://www.instamobile.io/mobile-development/google-login-react-native-firebase/" rel="noopener ugc nofollow" target="_blank">谷歌登录</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/facebook-login-react-native-firebase/" rel="noopener ugc nofollow" target="_blank">脸书登录</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/firebase-phone-authentication-react-native/" rel="noopener ugc nofollow" target="_blank">手机认证</a> |</li><li id="2e93" class="nj nk iq ka b kb ns kf nt kj nu kn nv kr nw kv no np nq nr bi translated">最佳资源— <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/react-native-app-ideas-beginners/" rel="noopener ugc nofollow" target="_blank">应用创意</a> | <a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-podcasts/" rel="noopener ugc nofollow" target="_blank">播客</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/best-react-native-newsletters/" rel="noopener ugc nofollow" target="_blank">时事通讯</a> | <a class="ae mi" href="https://www.instamobile.io/react-native-tutorials/best-free-react-native-app-templates-2018/" rel="noopener ugc nofollow" target="_blank">应用模板</a></li></ul><p id="d459" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你需要一个基础来开始你的下一个React原生应用，你可以使用许多<a class="ae mi" href="https://www.instamobile.io/templates/" rel="noopener ugc nofollow" target="_blank"> React原生模板</a>来制作你的下一个令人敬畏的应用。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="4889" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lf">原载于2020年2月24日</em><a class="ae mi" href="https://www.instamobile.io/mobile-development/react-native-redux/" rel="noopener ugc nofollow" target="_blank"><em class="lf">https://www . insta mobile . io</em></a><em class="lf">。</em></p></div></div>    
</body>
</html>
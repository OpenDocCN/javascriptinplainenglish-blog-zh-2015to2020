<html>
<head>
<title>Handling callbacks in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中处理回调</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/easy-tutorial-on-react-callbacks-fad6a51cc8f1?source=collection_archive---------2-----------------------#2020-01-31">https://javascript.plainenglish.io/easy-tutorial-on-react-callbacks-fad6a51cc8f1?source=collection_archive---------2-----------------------#2020-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3349" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">最近，我有机会在React上工作，几乎立刻就遇到了组件间通信的场景。</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><h1 id="164f" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">孩子与父母的交流</h1><p id="bf73" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">回调在处理从子组件到父组件的信息流时尤其重要。</p><p id="0edc" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">先说react最流行的入门app:<a class="ae mf" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"><strong class="lg ir">create-react-app</strong></a></p><p id="8c60" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">打开终端，让我们创建一个新项目(注意:您需要在机器上安装节点来完成以下任务)</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="ca3b" class="mp kn iq ml b gy mq mr l ms mt">npx create-react-app callback-tut </span></pre><p id="261b" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">好吧，我们有了一个好的开始。我们的应用已经准备好了。导航到新创建的文件夹，并键入以下内容</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2e36" class="mp kn iq ml b gy mq mr l ms mt">npm start</span></pre><p id="5031" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这将启动一个本地开发服务器，并在<a class="ae mf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> <em class="mu">打开默认浏览器</em></a></p><figure class="mg mh mi mj gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mv"><img src="../Images/695dd1e80ab2a719c50491f7513c1bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cBMnYYXGuxzL0zcXsJXLJw.png"/></div></div></figure></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><h1 id="cc19" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">创建子组件</h1><p id="4281" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们创建一个新组件。</p><p id="fac3" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">创建名为Child.js的新文件。</p><p id="c75f" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">这是一个超级简单的组件</p><ul class=""><li id="88ae" class="nd ne iq lg b lh ma lk mb ln nf lr ng lv nh lz ni nj nk nl bi translated">显示一个按钮</li><li id="7de4" class="nd ne iq lg b lh nm lk nn ln no lr np lv nq lz ni nj nk nl bi translated">单击该按钮会显示一个警告</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="03ae" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">import </strong>* <strong class="ml ir">as <em class="mu">React </em>from "react"</strong>;<br/><br/><strong class="ml ir">const </strong><em class="mu">Child </em>= () =&gt; {<br/><br/>    <strong class="ml ir">const </strong>handleClick = () =&gt; {<br/>        <em class="mu">alert</em>(<strong class="ml ir">'button clicked'</strong>);<br/>    }<br/><br/>    <strong class="ml ir">return </strong>(<br/>        &lt;&gt;<br/>            &lt;<strong class="ml ir">button<br/>                onClick=</strong>{() =&gt; handleClick()}<br/>            &gt;<br/>                Click me<br/>            &lt;/<strong class="ml ir">button</strong>&gt;<br/>        &lt;/&gt;<br/>    );<br/>}<br/><br/><strong class="ml ir">export default </strong><em class="mu">Child</em>;</span></pre><h1 id="4f5f" class="km kn iq bd ko kp nr kr ks kt ns kv kw jw nt jx ky jz nu ka la kc nv kd lc ld bi translated">将其添加到父项</h1><p id="ee6b" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们把它加到父节点上。修改App.js，以便添加子组件。</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="b0c8" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">import <em class="mu">React </em>from 'react'</strong>;<br/><strong class="ml ir">import </strong>logo <strong class="ml ir">from './logo.svg'</strong>;<br/><strong class="ml ir">import './App.css'</strong>;<br/><strong class="ml ir">import </strong><em class="mu">Child </em><strong class="ml ir">from "./Child"</strong>;<br/><br/><strong class="ml ir">function </strong><em class="mu">App</em>() {<br/>  <strong class="ml ir">return </strong>(<br/>    &lt;<strong class="ml ir">div className="App"</strong>&gt;<br/>      &lt;<strong class="ml ir">header className="App-header"</strong>&gt;<br/>        &lt;<strong class="ml ir">img src=</strong>{logo} <strong class="ml ir">className="App-logo" alt="logo" </strong>/&gt;<br/>        &lt;<strong class="ml ir">p</strong>&gt;<br/>          Edit &lt;<strong class="ml ir">code</strong>&gt;src/App.js&lt;/<strong class="ml ir">code</strong>&gt; and save to reload.<br/>        &lt;/<strong class="ml ir">p</strong>&gt;<br/>        &lt;<strong class="ml ir">a<br/>          className="App-link"<br/>          href="https://reactjs.org"<br/>          target="_blank"<br/>          rel="noopener noreferrer"<br/>        </strong>&gt;<br/>          Learn React<br/>        &lt;/<strong class="ml ir">a</strong>&gt;<br/>      &lt;/<strong class="ml ir">header</strong>&gt;<br/>      &lt;<strong class="ml ir">Child</strong>/&gt;<br/>    &lt;/<strong class="ml ir">div</strong>&gt;<br/>  );<br/>}<br/><br/><strong class="ml ir">export default </strong><em class="mu">App</em>;</span></pre><p id="08ac" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">您应该会在屏幕底部看到一个小按钮，让我们单击它来查看警告。</p><figure class="mg mh mi mj gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nw"><img src="../Images/dda5c7fc219ea82b32f5bbecf61af9e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MH5dqMH8A2maGMu7BxLnA.png"/></div></div></figure><h1 id="c026" class="km kn iq bd ko kp nr kr ks kt ns kv kw jw nt jx ky jz nu ka la kc nv kd lc ld bi translated">将功能传递给孩子</h1><p id="4843" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们在父类中创建一个函数，它可以明显地改变页面上的某些内容。</p><p id="d12b" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">我们将使用<em class="mu"> useState </em>来管理一个简单的状态变量。</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6099" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">import <em class="mu">React</em></strong>, {<em class="mu">useState</em>} <strong class="ml ir">from 'react'</strong>;<br/><strong class="ml ir">import </strong>logo <strong class="ml ir">from './logo.svg'</strong>;<br/><strong class="ml ir">import './App.css'</strong>;<br/><strong class="ml ir">import </strong><em class="mu">Child </em><strong class="ml ir">from "./Child"</strong>;<br/><br/><strong class="ml ir">function </strong><em class="mu">App</em>() {<br/><br/>    <strong class="ml ir">const </strong>[linkText, setLinkText] = <em class="mu">useState</em>(<strong class="ml ir">'Learn React'</strong>);<br/>    <strong class="ml ir">const </strong>changeLinkText = (text) =&gt; {<br/>        setLinkText(text);<br/>    };<br/><br/>    <strong class="ml ir">return </strong>(<br/>        &lt;<strong class="ml ir">div className="App"</strong>&gt;<br/>            &lt;<strong class="ml ir">header className="App-header"</strong>&gt;<br/>                &lt;<strong class="ml ir">img src=</strong>{logo} <strong class="ml ir">className="App-logo" alt="logo"</strong>/&gt;<br/>                &lt;<strong class="ml ir">p</strong>&gt;<br/>                    Edit &lt;<strong class="ml ir">code</strong>&gt;src/App.js&lt;/<strong class="ml ir">code</strong>&gt; and save to reload.<br/>                &lt;/<strong class="ml ir">p</strong>&gt;<br/>                &lt;<strong class="ml ir">a<br/>                    className="App-link"<br/>                    href="https://reactjs.org"<br/>                    target="_blank"<br/>                    rel="noopener noreferrer"<br/>                </strong>&gt;<br/>                    {linkText}<br/>                &lt;/<strong class="ml ir">a</strong>&gt;<br/>            &lt;/<strong class="ml ir">header</strong>&gt;<br/>            &lt;<strong class="ml ir">Child changeLinkText=</strong>{changeLinkText}/&gt;<br/>        &lt;/<strong class="ml ir">div</strong>&gt;<br/>    );<br/>}<br/><br/><strong class="ml ir">export default </strong><em class="mu">App</em>;</span></pre><p id="c23c" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">你问我们加了什么？</p><ul class=""><li id="a64b" class="nd ne iq lg b lh ma lk mb ln nf lr ng lv nh lz ni nj nk nl bi translated">我们在App.js的顶部添加了两行</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="5666" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">const </strong>[linkText, setLinkText] = <em class="mu">useState</em>(<strong class="ml ir">'Learn React'</strong>);</span></pre><p id="1ce9" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">我们没有显示“Learn React ”,而是有一个名为“linkText”的变量，它的初始值被设置为“Learn React”。</p><ul class=""><li id="0f5d" class="nd ne iq lg b lh ma lk mb ln nf lr ng lv nh lz ni nj nk nl bi translated">我们添加了一个函数，它接受一个值，并将其分配给上面定义的“链接文本”</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="a2a9" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">const </strong>changeLinkText = (text) =&gt; {<br/>        setLinkText(text);<br/>    };</span></pre><ul class=""><li id="022f" class="nd ne iq lg b lh ma lk mb ln nf lr ng lv nh lz ni nj nk nl bi translated">使用“linkText”变量，你猜对了，作为链接</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6216" class="mp kn iq ml b gy mq mr l ms mt">               &lt;<strong class="ml ir">a<br/>                    className="App-link"<br/>                    href="https://reactjs.org"<br/>                    target="_blank"<br/>                    rel="noopener noreferrer"<br/>                </strong>&gt;<br/>                    {linkText}<br/>                &lt;/<strong class="ml ir">a</strong>&gt;</span></pre><ul class=""><li id="da54" class="nd ne iq lg b lh ma lk mb ln nf lr ng lv nh lz ni nj nk nl bi translated">最后，让我们把功能传递给孩子</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="1815" class="mp kn iq ml b gy mq mr l ms mt">&lt;<strong class="ml ir">Child changeLinkText=</strong>{changeLinkText}/&gt;</span></pre><h1 id="410d" class="km kn iq bd ko kp nr kr ks kt ns kv kw jw nt jx ky jz nu ka la kc nv kd lc ld bi translated">在子进程中使用回调</h1><p id="d984" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们修改子对象以接收来自父对象的道具</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6d39" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">import </strong>* <strong class="ml ir">as <em class="mu">React </em>from "react"</strong>;<br/><br/><strong class="ml ir">const </strong><em class="mu">Child </em>= (props) =&gt; {<br/><br/>    <strong class="ml ir">const </strong>handleClick = () =&gt; {<br/>        props.<strong class="ml ir">changeLinkText</strong>(<strong class="ml ir">'Congratulations! This is sent from the child'</strong>);<br/>    }<br/><br/>    <strong class="ml ir">return </strong>(<br/>        &lt;&gt;<br/>            &lt;<strong class="ml ir">button<br/>                onClick=</strong>{() =&gt; handleClick()}<br/>            &gt;<br/>                Click me<br/>            &lt;/<strong class="ml ir">button</strong>&gt;<br/>        &lt;/&gt;<br/>    );<br/>}<br/><br/><strong class="ml ir">export default </strong><em class="mu">Child</em>;</span></pre><p id="0a1a" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">注意，现在孩子接受了“(道具)”。</p><p id="9a85" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">从父代传递的函数现在在子代中可用</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="9ca5" class="mp kn iq ml b gy mq mr l ms mt"><strong class="ml ir">const </strong>handleClick = () =&gt; {<br/>        props.<strong class="ml ir">changeLinkText</strong>(<strong class="ml ir">'Congratulations! This is sent from the child'</strong>);<br/>    }</span></pre><h1 id="bf7d" class="km kn iq bd ko kp nr kr ks kt ns kv kw jw nt jx ky jz nu ka la kc nv kd lc ld bi translated">最后</h1><p id="acd8" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们都准备好了。让我们导航到<a class="ae mf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>并一直点击底部的按钮，嘣！！看看吧，我们刚刚将链接文本从子节点传递到了父节点，并在父节点中呈现了它！！</p><p id="264e" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">好样的。</p><figure class="mg mh mi mj gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nx"><img src="../Images/88a68cb8a7d9c19ee21ff781dde3cb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H73Pn63XzFHAgZgEZDHMxA.png"/></div></div></figure><h1 id="d564" class="km kn iq bd ko kp nr kr ks kt ns kv kw jw nt jx ky jz nu ka la kc nv kd lc ld bi translated">结论</h1><p id="3eb5" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这是一个非常简短的教程，介绍了如何在React中实现子组件与父组件之间的通信。</p><p id="26d1" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">如果你喜欢这个，请鼓掌并留下评论。</p><p id="b750" class="pw-post-body-paragraph le lf iq lg b lh ma jr lj lk mb ju lm ln mc lp lq lr md lt lu lv me lx ly lz ij bi translated">在下一篇文章中，我将做一个简单的教程，介绍如何在React 中实现兄弟组件甚至无关组件之间的通信，敬请关注！</p></div></div>    
</body>
</html>
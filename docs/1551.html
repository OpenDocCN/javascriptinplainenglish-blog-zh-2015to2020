<html>
<head>
<title>Why you can’t break a forEach loop in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么在JavaScript中不能中断forEach循环</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-cant-break-a-foreach-loop-in-javascript-83f270269e1c?source=collection_archive---------0-----------------------#2020-03-31">https://javascript.plainenglish.io/why-you-cant-break-a-foreach-loop-in-javascript-83f270269e1c?source=collection_archive---------0-----------------------#2020-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b2d381c4931c5f6bd5ee4855f1f1b4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rLRLGPfriU5OwYhICVAy-g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">No break in ForEach()</figcaption></figure><p id="3d41" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我最近参加了一次编码面试，涉及到评估一个模式和另一个模式。细节并不重要，但是(在面试过程中)有一点是你不能打破循环。我已经忘记了那件小事，它可能会毁了我被雇用的机会。在你读完这篇文章后，希望你不会犯和我一样的错误！不要像我一样。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi le"><img src="../Images/8efd0a58600a934d217c7f553fa0c0db.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/0*Ph8fBog5sWy2Nnbu.gif"/></div></figure><h1 id="0ea7" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">视频版本</h1><p id="1bfd" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">如果你喜欢看而不是读，看看这个的视频版本！</p><figure class="lf lg lh li gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="7750" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">MDN无所不知</h1><p id="5d56" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">正如MDN所指出的:</p><blockquote class="mo mp mq"><p id="82db" class="kc kd mr ke b kf kg kh ki kj kk kl km ms ko kp kq mt ks kt ku mu kw kx ky kz ij bi translated"><em class="iq">除了抛出异常，没有其他方法可以停止或中断forEach()循环。如果需要这样的行为，forEach()方法就是错误的工具</em></p></blockquote><p id="6363" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是来自MDN文档的一些硬核sass。然而，他们是对的，知道选择哪种工具很重要。</p><p id="4b3a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们深入了解为什么你不能打破一个<code class="fe la lb lc ld b">forEach()</code>之前，让我们检查一下什么是循环，以及<code class="fe la lb lc ld b">forEach()</code>从何而来。</p><h1 id="7288" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">什么是循环</h1><p id="7cf8" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">编程中的一个循环解决了一个很常见的问题:我需要对所有这些数据运行相同的代码。简单来说，就是:</p><blockquote class="mo mp mq"><p id="f9b7" class="kc kd mr ke b kf kg kh ki kj kk kl km ms ko kp kq mt ks kt ku mu kw kx ky kz ij bi translated"><em class="iq">一遍又一遍地重复相同的代码(循环)，直到我们达到一个定义的结束状态。</em></p></blockquote><h1 id="69c4" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">问题是</h1><p id="ae63" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">为了便于比较，我们将使用不同的循环类型来解决同一个问题。问题是这样的:</p><p id="2536" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">比较两个数组，看其中的项是否相同。</p><p id="df1f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面是我们要比较的数据:</p><pre class="lf lg lh li gt mv ld mw mx aw my bi"><span id="fd59" class="mz lk iq ld b gy na nb l nc nd">const jedis = ["Anakin","Luke"]<br/>const sith = ["Palpatine", "Anakin"]</span></pre><p id="e25d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们有两个数组，都有几个名字。你可能会注意到阿纳金既是绝地又是西斯。这是一个微不足道的例子，然而与我在面试中被测试的内容相差不远。</p><h1 id="6f92" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">一种方式</h1><p id="a918" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我不想让你从这篇文章中得到的是一个循环比另一个循环好。它们都提供独特的编程解决方案，并有特定的用例。诀窍在于知道何时使用哪一个。</p><h1 id="03b3" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">传统For循环</h1><p id="2386" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">如果你曾经上过任何类型的编程课程，你可能已经接触过我们的好朋友<code class="fe la lb lc ld b">for</code>循环。很长一段时间以来，它一直是程序员的一个方便工具，今天仍然有用。让我们用它来解决我们的问题。</p><pre class="lf lg lh li gt mv ld mw mx aw my bi"><span id="526a" class="mz lk iq ld b gy na nb l nc nd">// Our data again, for reference<br/>const jedis = ["Anakin", "Luke"];<br/>const sith = ["Palpatine", "Anakin"];<br/>// start our loop, define our iterator variable<br/>for (let i = 0; i &lt; jedis.length; i++) {<br/>  // create a variable we can reference<br/>  const thisJedi = jedis[i];<br/>  // see if the item in the array we are testing exists<br/>  if (sith.includes(thisJedi)) {<br/>    // If it does exist, then that jedi is also a sith<br/>    console.log(`${thisJedi} is also a Sith`);<br/>    // we can exit out<br/>    break;<br/>  }<br/>  console.log(`${thisJedi} is not a Sith`);<br/>}</span></pre><p id="708d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果满足我们选择的条件，for循环提供了一种非常方便的退出代码的方法。这在处理大量数据时非常有用。它对解决一些项目欧拉问题非常有帮助，特别是<a class="ae ne" href="https://codeburst.io/project-euler-problem-5-solved-with-javascript-13427e907e71" rel="noopener" target="_blank">这个</a>。</p><h1 id="9de9" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">新的另一种方式</h1><p id="edaf" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">除此之外，<code class="fe la lb lc ld b">forEach()</code>在2009年和所有其他在ES5中给我们的好处一起被印在了规范中。它是一种方便的方法，可以用来编写简洁的代码，轻松地遍历数组中的项。</p><h1 id="1a7e" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">它在做什么？</h1><p id="5496" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated"><code class="fe la lb lc ld b">forEach()</code>循环是对数组中的每一项运行另一个函数(回调)的函数。我们定义回调函数中发生的事情。JS很好，在函数中给了我们三个参数:</p><ol class=""><li id="c6f2" class="nf ng iq ke b kf kg kj kk kn nh kr ni kv nj kz nk nl nm nn bi translated">数组中的项目</li><li id="879d" class="nf ng iq ke b kf no kj np kn nq kr nr kv ns kz nk nl nm nn bi translated">项目的索引</li><li id="4252" class="nf ng iq ke b kf no kj np kn nq kr nr kv ns kz nk nl nm nn bi translated">整个阵列</li></ol><p id="7510" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们用一个<code class="fe la lb lc ld b">forEach()</code>循环来看看我们的问题。我已经在函数中包含了所有三个参数，但是我们只使用了第一个，即项目，我将它命名为<code class="fe la lb lc ld b">jedi</code></p><pre class="lf lg lh li gt mv ld mw mx aw my bi"><span id="5cce" class="mz lk iq ld b gy na nb l nc nd">// We have to create a global state variable to keep track<br/>    let matching<br/>    // loop over array <br/>    jedis.forEach((jedi,index,array) =&gt; {<br/>      // check to see if jedi is in sith<br/>      if(!sith.includes(jedi)) {<br/>        // if it isn't, set global variable to false<br/>        matching = false<br/>      }<br/>      // it keeps going...<br/>    })<br/>    console.log(matching) // false</span></pre><p id="e3e3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果更有意义，可以将回调函数重构为命名函数。我认为这使它更具可读性。它还允许我们在任何需要的地方重用这个函数。耶函数式编程！</p><pre class="lf lg lh li gt mv ld mw mx aw my bi"><span id="836f" class="mz lk iq ld b gy na nb l nc nd">let matching<br/>function isJediAlsoSith(jedi,index,array) {<br/>    if(!sith.includes(jedi)) {<br/>      matching = false<br/>   }<br/>}<br/>jedis.forEach(isJediAlsoSith)</span></pre><p id="d2ef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们的解决方案本质上做同样的事情。唯一的区别是它会一直运行，直到到达<code class="fe la lb lc ld b">jedis</code>数组的末尾。对于这么小的数组，我怀疑它会带来多大的性能差异。</p><h1 id="1efb" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">但是为什么呢？</h1><p id="8b91" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">这终于给我们带来了问题的答案，为什么我们不能打破<code class="fe la lb lc ld b">forEach()</code>循环？这是因为循环在每个项目上运行回调函数，所以即使你写了一个<code class="fe la lb lc ld b">return</code>，它也只是在函数的那个实例上返回。它继续前进。对于<code class="fe la lb lc ld b">forEach()</code>函数，它不会对返回的代码做任何事情。请注意，对于其他一些数组方法来说，情况并非如此。</p><p id="95fe" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">此外，因此，<code class="fe la lb lc ld b">break</code>或<code class="fe la lb lc ld b">continue</code>不是有效的语句。</p><h1 id="68a8" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">其他方式</h1><p id="98b2" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">有相当多不同类型的循环。它们都有不同的目的，我建议仔细研究每一种。你并不总是需要一个<code class="fe la lb lc ld b">forEach()</code>循环。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c3feab7f5589b68bd91470f4a4f09c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*ETL6WisyW-rYEQR3.gif"/></div></figure><h1 id="6089" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">forEach()与map()</h1><p id="d2d2" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">很可能，教程中最常见的数组方法是<code class="fe la lb lc ld b">forEach()</code>和<code class="fe la lb lc ld b">map()</code>。两者最大的区别就是<code class="fe la lb lc ld b">map</code>会返回一个新数组，而a <code class="fe la lb lc ld b">forEach()</code>不会。</p><h1 id="60a1" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">传统循环</h1><p id="71b8" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">while循环</p><h1 id="22c2" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">数组方法</h1><p id="5980" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">Array.forEach()</p><p id="12f7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.map()</p><p id="a205" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.filter()</p><p id="bb90" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.reduce()</p><p id="4a05" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.reduceRight()</p><p id="0050" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.every()</p><p id="a5f9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.some()</p><p id="809c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.indexOf()</p><p id="80a8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.lastIndexOf()</p><p id="3274" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.find()</p><p id="19d7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Array.findIndex()</p><h1 id="6629" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">可迭代对象循环(包括数组)</h1><p id="44b4" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">因为在</p><p id="9f2d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于...来说</p><h1 id="6a00" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">这是方法</h1><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7d6fea698e96cbb3b8ef37b269b6ef98.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*Nspiuzmn_7bBOyCI.gif"/></div></figure><p id="ab22" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">正如先前那些非常时髦的MDN文档所提到的，选择正确的工具对成功至关重要。一开始，选项的数量可能看起来有点多，但是我喜欢采取这样的方法:“如果它有效，它就是正确的工具。”</p><p id="1d23" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一般来说，你可以重构你的代码，但是你只是在浪费时间，你可以构建东西。在我的面试中，我使用了正确的工具，错误的方式。如果我知道并记得不能中断forEach循环，事情可能会有所不同🤷🏼‍♂️.</p><p id="e124" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你有任何额外的信息分享，请写在下面的评论里！</p><p id="13ec" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一如既往，快乐编码。</p><h1 id="d035" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">插头</h1><h1 id="4885" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">书</h1><p id="0fe1" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我正在写一本关于图形设计及其与软件开发的关系的书！如果你感兴趣，在这里注册更新。</p><p id="c784" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae ne" href="https://digitalnutt.substack.com/p/coming-soon?r=34slo&amp;utm_campaign=post&amp;utm_medium=web&amp;utm_source=copy" rel="noopener ugc nofollow" target="_blank">https://digitalnutt.substack.com/p/coming-soon?r=34slo&amp;UTM _ campaign = post&amp;UTM _ medium = web&amp;UTM _ source = copy</a></p><h1 id="0176" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">音乐</h1><p id="ead7" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我也写音乐！看看这里:<a class="ae ne" href="https://open.spotify.com/artist/1o6CGTMPjk1C0IdK9jV2H1" rel="noopener ugc nofollow" target="_blank">Spotify</a>|<a class="ae ne" href="https://www.youtube.com/channel/UCqxQspCPTcE_wH0KBE5J-aw" rel="noopener ugc nofollow" target="_blank">Youtube</a>|<a class="ae ne" href="https://music.apple.com/us/artist/modulo/1499420471" rel="noopener ugc nofollow" target="_blank">Apple Music</a></p><figure class="lf lg lh li gt jr"><div class="bz fp l di"><div class="nv mn l"/></div></figure><h1 id="6f16" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">支持</h1><p id="7fe1" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">如果你喜欢这篇文章并想看更多，最好的方法是订阅/关注我！如果你觉得亲切，你可以请我喝杯咖啡！</p><h2 id="4710" class="mz lk iq bd ll nw nx dn lp ny nz dp lt kn oa ob lx kr oc od mb kv oe of mf og bi translated"><strong class="ak">用简单的英语写的JavaScript的注释:</strong></h2><p id="ae36" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的Medium用户名给我们发邮件到<a class="ae ne" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">submissions@javascriptinplainenglish.com</a>，我们会把你添加为作者。</p></div></div>    
</body>
</html>
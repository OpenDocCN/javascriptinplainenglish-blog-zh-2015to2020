<html>
<head>
<title>JavaScript Basics — Bugs and Errors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript基础——错误和错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-basics-bugs-and-errors-3ccfbee89619?source=collection_archive---------6-----------------------#2020-06-17">https://javascript.plainenglish.io/javascript-basics-bugs-and-errors-3ccfbee89619?source=collection_archive---------6-----------------------#2020-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/812630eccb35a7e554aac56eae00fa9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HUZZB_skoQPDkxFV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@qurratulayin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Qurratul Ayin Sadia</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6ad2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何处理JavaScript程序中的错误。</p><h1 id="c5ab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">疯狂的</h1><p id="be52" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们计算机程序中的缺陷被称为bug。</p><h1 id="4e49" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">语言错误</h1><p id="3f82" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">很多bug都是语言错误造成的。</p><p id="4788" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单的语法或逻辑错误都会导致错误。</p><p id="9bdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们试图将一个数字乘以一个字符串，那么我们得到<code class="fe me mf mg mh b">NaN</code>。</p><p id="e072" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript不会抱怨很多错误。</p><p id="b65b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它抱怨语法错误，比如拼写错误。</p><p id="97b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们试图引用一个未定义变量的属性，它也会抛出一个错误。</p><p id="fc14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，它确实隐藏了许多错误，这使得它们更容易受到bug的攻击。</p><h1 id="ba00" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">严格模式</h1><p id="3d5b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">严格模式使得JavaScript解释器在解释代码时更加严格。</p><p id="d350" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在顶部使用<code class="fe me mf mg mh b">'use strict'</code>指令，让解释器知道我们想要打开严格模式。</p><p id="04a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f141" class="mq lc iq mh b gy mr ms l mt mu">for (i = 0; i &lt; 10; i++) {<br/>  console.log("hi");<br/>}</span></pre><p id="4c2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后它会运行，但是它会创建一个全局变量<code class="fe me mf mg mh b">i</code>，因为我们没有严格模式。</p><p id="4868" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有严格模式，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3726" class="mq lc iq mh b gy mr ms l mt mu">"use strict";<br/>for (i = 0; i &lt; 10; i++) {<br/>  console.log("hi");<br/>}</span></pre><p id="815e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到了'<code class="fe me mf mg mh b">i</code>未定义'的错误。</p><p id="8ceb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要意外地创建全局变量是一个好主意，因此这是打开严格模式的一个好理由。</p><p id="04e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">this</code>绑定是<code class="fe me mf mg mh b">undefined</code>在JavaScript严格模式开启的情况下，不作为方法调用的函数中。</p><p id="8e09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，它将被绑定到全局对象，这是不好的。</p><p id="306a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果关闭了严格模式，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7247" class="mq lc iq mh b gy mr ms l mt mu">function foo(){<br/>  return this;<br/>}</span><span id="f054" class="mq lc iq mh b gy mv ms l mt mu">console.log(foo());</span></pre><p id="e8d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了<code class="fe me mf mg mh b">window</code>对象。</p><p id="6645" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，如果严格模式打开:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a03" class="mq lc iq mh b gy mr ms l mt mu">'use strict'</span><span id="5e2e" class="mq lc iq mh b gy mv ms l mt mu">function foo(){<br/>  return this;<br/>}</span><span id="ba9d" class="mq lc iq mh b gy mv ms l mt mu">console.log(foo());</span></pre><p id="afc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe me mf mg mh b">undefined</code>。</p><p id="f54b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，如果我们忘记了使用带有构造函数的<code class="fe me mf mg mh b">new</code>，那么在没有严格模式的情况下，我们不会得到错误。</p><p id="15ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8466" class="mq lc iq mh b gy mr ms l mt mu">function Person(name){<br/>  this.name = name;<br/>}</span><span id="2fd7" class="mq lc iq mh b gy mv ms l mt mu">Person('james')<br/>console.log(name);</span></pre><p id="08b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们错误地调用了<code class="fe me mf mg mh b">Person</code>构造函数，因此创建了<code class="fe me mf mg mh b">name</code>全局变量，其值为<code class="fe me mf mg mh b">'james'</code>。</p><p id="bee9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此控制台日志会显示<code class="fe me mf mg mh b">'james'</code>。</p><p id="d70c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这绝对不是我们想要的。</p><p id="8079" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们打开了JavaScript严格模式，那么我们会得到一个错误:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9c8f" class="mq lc iq mh b gy mr ms l mt mu">"use strict";</span><span id="3c32" class="mq lc iq mh b gy mv ms l mt mu">function Person(name) {<br/>  this.name = name;<br/>}</span><span id="7168" class="mq lc iq mh b gy mv ms l mt mu">Person("james");<br/>console.log(name);</span></pre><p id="8ad7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于<code class="fe me mf mg mh b">this</code>是<code class="fe me mf mg mh b">undefined</code>，我们将得到“无法设置未定义的属性”名称。</p><p id="ce2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">严格模式也不允许给一个函数多个同名的参数。</p><p id="ba9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还禁用了一些不应该使用的语言功能，如<code class="fe me mf mg mh b">with</code>。</p><h1 id="bc9e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类型</h1><p id="91d6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript变量是动态类型的，所以我们只能从代码判断数据类型是什么。</p><p id="5502" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使我们的生活更容易，我们可能想用类型前缀来命名它们。</p><p id="7059" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可能想用前缀<code class="fe me mf mg mh b">num</code>来命名一个数字变量。</p><h1 id="63a6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">测试</h1><p id="bd7e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript解释器不会捕捉很多错误。</p><p id="b60a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会捕捉一些错误，比如语法和基本类型错误，但是很多逻辑错误不会被捕捉到。</p><p id="3f1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要检查逻辑错误，我们必须自己测试。</p><p id="5d3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最简单的方法是编写自动测试来检查逻辑错误。</p><p id="c799" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就不用手工做所有的测试了。</p><p id="88d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最初，编写测试比手工测试更费工夫，但是我们不必反复手工测试我们的代码，所以它们值得编写。</p><p id="32b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写以下代码来为我们的代码编写一些测试:</p><p id="10ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">sum.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0a45" class="mq lc iq mh b gy mr ms l mt mu">const sum = (a, b) =&gt; {<br/>  return a + b;<br/>}<br/>module.exports = sum;</span></pre><p id="b678" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">sum.test.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e158" class="mq lc iq mh b gy mr ms l mt mu">const sum = require('./sum');</span><span id="6cfc" class="mq lc iq mh b gy mv ms l mt mu">test('adds 1 + 2 to equal 3', () =&gt; {<br/>  expect(sum(1, 2)).toBe(3);<br/>});</span></pre><p id="92e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">sum.js</code>中有一个简单的函数，在<code class="fe me mf mg mh b">sum.test.js</code>中有相应的测试代码来测试<code class="fe me mf mg mh b">sum</code>函数。</p><p id="f0c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们不用亲自检查了。</p><p id="6adc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试是防止错误的好方法。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/fe6fe6a50934ed318a8a6894b51f2635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2yRHQb21shUDr0bF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@olia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Olia Gozha</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fc49" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="552d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">bug是我们程序中的缺陷。</p><p id="8b85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript解释器可以捕捉一些基本错误。</p><p id="0b8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了防止JavaScript程序中的错误，我们可以打开严格模式，禁用一些不好的特性。</p><p id="ba3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以编写测试来确保一切工作正常。</p><h2 id="63eb" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="09e2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Using the Debugger to track events in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用调试器跟踪JavaScript中的事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/debugger-and-events-4b3d1514e34b?source=collection_archive---------1-----------------------#2019-10-29">https://javascript.plainenglish.io/debugger-and-events-4b3d1514e34b?source=collection_archive---------1-----------------------#2019-10-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="aedd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用debugger关键字仔细查看提交事件。</h2></div><p id="8579" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的上一篇文章关注了使用调试器来降低时间的<a class="ae ky" href="https://medium.com/javascript-in-plain-english/using-debugger-in-javascript-e5947aa528ca" rel="noopener">,以便更好地理解我们代码中的活动变量发生了什么。现在，我想仔细看看如何使用调试器来公开有关事件的信息。</a></p><h1 id="267f" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">事件</h1><p id="dd31" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">JavaScript如此激动人心是因为我们可以利用事件；这是用户(或DOM)和呈现给浏览器的HTML元素之间的交互，结果导致HTML元素的改变。</p><p id="05ba" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以监听事件并在事件发生时执行JS代码——这可能是一次点击、提交一个表单或者将鼠标悬停在一个元素上。如果你需要重温事件，这里有一个由<a class="ae ky" href="https://medium.com/@willbush" rel="noopener"> Will Bush </a>制作的<a class="ae ky" href="https://will-bush.github.io/event-listener-fun/" rel="noopener ugc nofollow" target="_blank">伟大的小应用</a>，它展示了一些可以用来触发DOM变化的事件监听器。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/877819286a9d9976f38b81ded7a11714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRJ8qkDnonzctjTL3Sd_0w.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk"><a class="ae ky" href="https://will-bush.github.io/event-listener-fun/" rel="noopener ugc nofollow" target="_blank">https://will-bush.github.io/event-listener-fun/</a></figcaption></figure><p id="94c6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一个简单的家务清单应用程序，在这里我可以命名家务，并将它们分配给不同的家庭成员！完成后，可以将它们从列表中删除。</p><p id="19f3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我创建一个新任务时，它应该在我的后端创建一个新条目:一个本地托管的J <a class="ae ky" href="https://medium.com/codingthesmartway-com-blog/create-a-rest-api-with-json-server-36da8680136d" rel="noopener"> SON服务器API </a>。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mm"><img src="../Images/99fcbacad2b346f9e41a99ce49b98c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RhGOPNUf8uVO0G6KNbbqLA.gif"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">App functionality</figcaption></figure><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mn"><img src="../Images/ffee16a26a48b6be3f8d81e7a69d5227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_0V9R6fQFk2XJfvhK80dgQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">JSON server backend</figcaption></figure><h1 id="d888" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">我打破了它</h1><p id="1140" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">不知何故我弄坏了我的应用！提交任务后，它无法正确显示任务。我可以看到一个奇怪的事情涉及括号代替。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mo"><img src="../Images/37fad0b3e718cd0433a0a9fc8952b278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QKBQkkKbodCq-BHk5WWH3g.gif"/></div></div></figure><p id="d588" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们是否能让它再次工作。</p><p id="a7bf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将在代码中单击“创建新任务”的地方放置debugger关键字，因为这似乎是我遇到问题的地方。</p><p id="5e9d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我有一个事件监听器，连接到我的表单元素(formEl ),监听一个“提交”事件。(当用户点击“创建新任务”按钮时。)<br/>当使用表单向后端发送信息时，使用“提交”事件监听器很有用，这样我们就可以访问表单中的所有元素。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mp"><img src="../Images/eb58216a8439257903ffe42e726b7586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GzAs_y3xo3qAjqCTfL9B2A.gif"/></div></div></figure><p id="60b0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将事件作为参数传递给一个匿名函数，这个匿名函数又被传递给事件监听器。</p><p id="82c9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为提交事件的默认动作是刷新网页，所以我在事件上调用preventDefault()，所以我没有得到页面刷新。</p><p id="ff6b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我想把输入到表单中的值作为一个带有“文本”和“名称”关键字的对象发送到我的后端。“文本”键将由用户在“任务描述”输入中键入的任何内容填充，“名称”将由“谁应该做这件事？”填充输入。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mq"><img src="../Images/818af8aeef67ce15edda12ebb7a28385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSirJmgpp8dpZZVMWZkniQ.png"/></div></div></figure><p id="22e8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要触发调试器，我单击按钮，调用事件监听器函数，应用程序暂停。当我的页面在debugger中暂停时，我可以在Dev Tools的console选项卡中访问该事件，并查看它是什么类型的事件，该事件的目标是什么，如果有任何其他元素，我可以访问它们的值…了解该事件并探索从中可以使用哪些信息是值得的。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi mr"><img src="../Images/22941ee423a6081667ebc57310559b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cNZTdnq1g84AnGSqUQ-ATg.gif"/></div></div></figure><p id="fe24" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我的应用程序在调试器中暂停时，我可以访问提交事件。我现在可以通过在控制台中键入“event”来浏览该事件。这将向我显示触发了哪种事件、目标以及一大堆其他信息。</p><p id="d6d9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我可以看到键入event.target正在返回表单元素！如果我打开可扩展菜单，我可以看到表单的子元素列表。这个列表就像一个数组，从0开始。所以如果我输入:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="d2ae" class="mx la in mt b gy my mz l na nb">event.target[0]</span><span id="4e00" class="mx la in mt b gy nc mz l na nb"><em class="nd">&lt;input required name="task" type="text" id="new-task-description" placeholder="description"&gt;</em></span><span id="77fd" class="mx la in mt b gy nc mz l na nb">event.target[1]</span><span id="3386" class="mx la in mt b gy nc mz l na nb"><em class="nd">&lt;input required name="person" type="text" id="task-doer" placeholder="who?"&gt;</em></span></pre><p id="973c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我可以访问表单上的输入！</p><p id="c785" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我的应用程序在调试器中暂停时，我还可以访问我在本地文件中设置的任何全局变量。例如，当我将表单元素保存到变量formEl中时，我可以键入:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="56ef" class="mx la in mt b gy my mz l na nb">formEl</span></pre><p id="8694" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">进入控制台查看元素。我已经为表单的每个输入赋予了name属性，所以我也可以使用它来访问输入:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="f1db" class="mx la in mt b gy my mz l na nb">formEl.task                // returns the first input</span><span id="fdd9" class="mx la in mt b gy nc mz l na nb"><em class="nd">&lt;input required name="task" type="text" id="new-task-description" placeholder="description"&gt;</em></span><span id="fcac" class="mx la in mt b gy nc mz l na nb">formEl.person              //returns the second input</span><span id="1acb" class="mx la in mt b gy nc mz l na nb"><em class="nd">&lt;input required name="person" type="text" id="task-doer" placeholder="who?"&gt;</em></span></pre><p id="4b74" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们快速回顾一下我的源代码:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ne"><img src="../Images/5c26d31893b89474243c353dda275d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8PtGw_CoRC5uxhfWpGmUg.png"/></div></div></figure><p id="b61f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我正在把这个发送回我的后台:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="43ff" class="mx la in mt b gy my mz l na nb">formEl.task</span></pre><p id="c860" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它返回:</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="16aa" class="mx la in mt b gy my mz l na nb"><em class="nd">&lt;input required name="task" type="text" id="new-task-description" placeholder="description"&gt;</em></span></pre><p id="7eec" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">啊啊！这就是为什么我的任务以如此怪异的方式呈现！我发送回整个HTML元素，我们不希望这些元素保存在db.json文件中。我想把输入表单的内容发送回去。我该如何访问它？</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nf"><img src="../Images/d165abee87a90f8afe13c57c60ae58ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n0Xd5d9v1-v-ezco0k7OCA.png"/></div></div></figure><p id="881c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在控制台中，我在表单元素的name属性后面键入了一个句号。这将带来一个包含所有可用属性的自动更正菜单！你可以访问父元素，高度，大小…在这里，我在寻找值。这将返回输入的任何内容…</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="a0bd" class="mx la in mt b gy my mz l na nb">formEl.person.value<br/><em class="nd">“charl”</em></span></pre><p id="aaec" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是我的代码中缺少的东西！我现在就做更改…</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ng"><img src="../Images/8c6b1cfc5ad65eec80d9026dddc0d087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q8z8LfywnhWphcE9dtREQA.png"/></div></div></figure><p id="801b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将测试行为…</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nh"><img src="../Images/6a4a18b92f2186dc10707246f2e7aadf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WQbk6SIUuMF-QAH3NxlaZw.gif"/></div></div></figure><p id="32b3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看起来没错！</p><p id="284d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望这是一个有用的演示，展示了如何在代码中使用debugger关键字来暂停应用程序，并仔细查看发生了什么，以及如何使用事件来访问有用的DOM元素和值。如果你觉得这很有用，请给我一个掌声，并请在下面评论你需要的任何问题或澄清。你有更多的调试器提示吗？</p></div></div>    
</body>
</html>
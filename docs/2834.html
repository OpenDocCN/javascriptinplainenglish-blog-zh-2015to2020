<html>
<head>
<title>Date manipulation in JS made easy with date-fns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JS中的日期操作通过date-fns变得简单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/date-manipulation-in-js-made-easy-with-date-fns-6c66706a5874?source=collection_archive---------1-----------------------#2020-07-28">https://javascript.plainenglish.io/date-manipulation-in-js-made-easy-with-date-fns-6c66706a5874?source=collection_archive---------1-----------------------#2020-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d6e9e5c244ea28b90d36be6cb83d783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mMVWG17x2hyjIEu-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@fabrizioverrecchia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fabrizio Verrecchia</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c1f3" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">概观</h1><p id="8332" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">曾经写过一个方法来获取GMT时间吗？或者想知道我是否需要将时间转换成UTC？大多数应用程序都有一些常见的日期时间操作，这些操作经常重复，过一段时间后会变得非常难以维护。此外，在国际化应用程序时，日期和时间操作是您将面临的主要挑战之一。以至于你会忘记修改的时间😉。</p><p id="e706" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">滴答滴答！别害怕，我们会保护你。<code class="fe me mf mg mh b">date-fns</code>就是这样一个包，它为日期时间操作提供了简单的帮助函数。有了国际化选项，您可以随时利用它，快速走向国际化。</p><h1 id="5e30" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">突出</h1><p id="7dbb" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">开始使用date-fns相当容易。可以通过运行命令<code class="fe me mf mg mh b">npm install date-fns</code>来安装。所有的帮助器方法都可以通过主程序包导入，也可以只安装所需的子模块。其中一个是<code class="fe me mf mg mh b">fp</code>,它有两个带和不带格式选项的方法副本。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8712" class="mq ke iq mh b gy mr ms l mt mu">/* Babel or ES6 */<br/>import {methodName} from "date-fns";</span><span id="6326" class="mq ke iq mh b gy mv ms l mt mu">/* Node or requireJs */<br/>const methodName = require("date-fns").methodName;</span></pre><p id="6c42" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">它值得额外的加分，因为它提供了typescript支持而不需要任何额外的包，并帮助开发人员不必维护另一个开发依赖。它的包结构促进了<code class="fe me mf mg mh b">tree-shaking</code>，这有助于整个应用程序的大小，因此我们建议安装主模块，因为只有所需的方法会被捆绑进来。开发者必须处理三种类型之一，即:</p><ul class=""><li id="55c8" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> Interval: </strong>这是两个日期实例之间时间间隔的简单表示。它纯粹用于对时间跨度进行操作的方法中。</li><li id="d07d" class="mw mx iq ld b le nf li ng lm nh lq ni lu nj ly nb nc nd ne bi translated"><strong class="ld ir"> Locale: </strong>表示用于格式化日期的所需国家的数据。</li><li id="8a8e" class="mw mx iq ld b le nf li ng lm nh lq ni lu nj ly nb nc nd ne bi translated"><strong class="ld ir">持续时间:</strong>标准的<code class="fe me mf mg mh b">Date</code>对象和持续时间对象的主要区别在于，后者没有任何地区信息。持续时间可以部分包含以下任何内容:</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="565d" class="mq ke iq mh b gy mr ms l mt mu">{    <br/>    years, months, weeks, days, hours, minutes, seconds      <br/>}</span></pre><p id="9a5d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">提供的大多数助手可以根据它们帮助简化的日期-时间维度分为以下四类。</p><h1 id="3b99" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">时间助手</h1><p id="64bc" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这些助手主要关注于操作和验证时间方面的谓词，比如秒、分、小时。它通过<code class="fe me mf mg mh b">Interval</code>型提供有用的时间跨度。下表很好地概述了一些方法:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/6e0d080c6042e5fd42c74b442ecd4eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rbc1YcpwDjI1yI4U_rsQmA.png"/></div></div></figure><p id="8357" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">有助于您熟悉上述功能的一些示例如下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ba8" class="mq ke iq mh b gy mr ms l mt mu">const interval1 = {<br/>  start: new Date(2014, 0, 10), // 10th Jan 2014<br/>  end: new Date(2014, 11, 21) // 21st Dec 2014<br/>};</span><span id="55a3" class="mq ke iq mh b gy mv ms l mt mu">const interval2 = {<br/>  start: new Date(2014, 6, 10), // 10th July 2014<br/>  end: new Date(2015, 0, 10) // 10th Jan 2015<br/>};</span><span id="ddc0" class="mq ke iq mh b gy mv ms l mt mu">const interval3 = {<br/>  start: new Date(2015, 6, 10), // 10th July 2015<br/>  end: new Date(2020, 11, 10) // 10th Dec 2020<br/>};</span><span id="7bbb" class="mq ke iq mh b gy mv ms l mt mu">const interval4 = {<br/>  start: new Date(2015, 11, 10), // 10th Dec 2015<br/>  end: new Date(2015, 11, 10) // 10th Dec 2015<br/>};</span></pre><ul class=""><li id="a6a6" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">areintervaloverlapping:</strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a7b" class="mq ke iq mh b gy mr ms l mt mu">console.log(areIntervalsOverlapping(interval1, interval2)); <br/>// =&gt; true<br/>console.log(areIntervalsOverlapping(interval1, interval3));  <br/>// =&gt; false</span></pre><ul class=""><li id="23ca" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">每一天的间隔:</strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e79" class="mq ke iq mh b gy mr ms l mt mu">console.log(eachDayOfInterval(interval4));<br/>// =&gt; [Sun Jan 10 2016 00:00:00 GMT+0530 (India Standard Time)]</span></pre><ul class=""><li id="7f2c" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> isWithinInterval: </strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="700b" class="mq ke iq mh b gy mr ms l mt mu">console.log(isWithinInterval(Date.now(), interval1)); // =&gt; false<br/>console.log(isWithinInterval(Date.now(), interval3)); // =&gt; true</span></pre><ul class=""><li id="9783" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> fromUnixTime: </strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c7f6" class="mq ke iq mh b gy mr ms l mt mu">console.log(fromUnixTime(1595157314)); <br/>// =&gt; Sun Jul 19 2020 16:45:14 GMT+0530 (India Standard Time)</span></pre><ul class=""><li id="a544" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated">getTime: </li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="52a8" class="mq ke iq mh b gy mr ms l mt mu">console.log(getTime(Date.now())); // =&gt; 1595157440507</span></pre><ul class=""><li id="1161" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> getUnixTime: </strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2ff7" class="mq ke iq mh b gy mr ms l mt mu">console.log(getUnixTime(Date.now())); // =&gt; 1595157492</span></pre><ul class=""><li id="6c53" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">开始时间分钟:</strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="da1c" class="mq ke iq mh b gy mr ms l mt mu">console.log(startOfMinute(Date.now())); // =&gt; Sun Jul 19 2020 17:02:00 GMT+0530 (India Standard Time)</span></pre><ul class=""><li id="0cbc" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">是时间分钟:</strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="10cd" class="mq ke iq mh b gy mr ms l mt mu">console.log(isThisMinute(Date.now())); // =&gt; true<br/>console.log(isThisMinute(new Date(2020, 6, 10, 17, 4))); // =&gt; false</span></pre><ul class=""><li id="0ffe" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">roundonearestminute</strong>:将时间舍入到给定日期最接近的分钟开始时间。我们可以通过提供在1 - 30之间的<code class="fe me mf mg mh b">nearestTo</code>选项来改变这一点。如果它与前一个间隔和下一个间隔距离相等，则向上取整。</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ab57" class="mq ke iq mh b gy mr ms l mt mu">console.log(roundToNearestMinutes(Date.now())); <br/>// =&gt; Sun Jul 19 2020 17:12:00 GMT+0530 (India Standard Time)</span><span id="be5e" class="mq ke iq mh b gy mv ms l mt mu">console.log(roundToNearestMinutes(Date.now(), {nearestTo: 15})); <br/>// =&gt; // =&gt; Sun Jul 19 2020 17:15:00 GMT+0530 (India Standard Time)</span><span id="3b10" class="mq ke iq mh b gy mv ms l mt mu">console.log(roundToNearestMinutes(new Date(2020, 6, 10, 17, 13), {nearestTo: 8})); <br/>// =&gt; Fri Jul 10 2020 17:16:00 GMT+0530 (India Standard Time)</span><span id="ce68" class="mq ke iq mh b gy mv ms l mt mu">console.log(roundToNearestMinutes(new Date(2020, 6, 10, 17, 11), {nearestTo: 8})); <br/>// =&gt; Fri Jul 10 2020 17:08:00 GMT+0530 (India Standard Time)</span><span id="73f4" class="mq ke iq mh b gy mv ms l mt mu">/* here 17:12 is equidistant from 17:8 and 17:16, the method rounds it off to 16 */</span><span id="34e7" class="mq ke iq mh b gy mv ms l mt mu">console.log(roundToNearestMinutes(new Date(2020, 6, 10, 17, 12), {nearestTo: 8})); <br/>// =&gt; Sun Jul 19 2020 17:16:00</span></pre><p id="cbe9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">让我们看看如何将我们的时间助手应用于一些现实生活中的用例:</p><ul class=""><li id="3881" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated">计算登记时间内是否有预订:</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f525" class="mq ke iq mh b gy mr ms l mt mu">const checkIfBookingIsValid = timeOfBooking =&gt; isWithinInterval(timeOfBooking, {<br/>  start: startTimeOfRegistration,<br/>  end: endTimeOfRegistration<br/>});</span></pre><ul class=""><li id="383d" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated">指定计划作业下一次运行的时间:</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="eafa" class="mq ke iq mh b gy mr ms l mt mu">const getNextStartTimeOfJob = (lastExecutionTime, {days, hours, minutes, seconds}) =&gt; add(lastExecutionTime, {days, hours, minutes, seconds})</span></pre><h1 id="c1ad" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">约会助手</h1><p id="fe4b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">虽然时间助手在处理微观方面很有用，但是日助手用于操纵宏观方面，例如日、周、季度、年、十年。这些助手简化了我们的应用程序，在这些应用程序中，我们可能需要计算用户是否超过年龄阈值，对数据进行分组，并执行批量操作。更多此类突出显示的功能如下所示:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/9156d44ff34f8dab457ffe96d72fc83b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rW6DdgUJvg7eAJVYceAxPg.png"/></div></div></figure><p id="ac75" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">上面解释的大多数方法都可以扩展到月、季度和年。如<code class="fe me mf mg mh b">differenceInMonths</code>、<code class="fe me mf mg mh b">differenceInCalendarMonths</code>、<code class="fe me mf mg mh b">isSameMonth</code>、<code class="fe me mf mg mh b">isSameYear</code>、<code class="fe me mf mg mh b">setMonth</code>、<code class="fe me mf mg mh b">setYear</code>、<code class="fe me mf mg mh b">eachWeekendOfMonth</code>等。</p><p id="fe55" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">有助于您熟悉上述功能的一些示例如下:</p><ul class=""><li id="42cb" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> differenceInWeeks </strong>:左边的日期必须是最新的，否则该方法返回-1。</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="dbff" class="mq ke iq mh b gy mr ms l mt mu">console.log(differenceInWeeks(new Date(2015, 11, 22), new Date(2015, 11, 10))); // =&gt; 1</span></pre><ul class=""><li id="e3d3" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">差异日历周</strong>:</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="35eb" class="mq ke iq mh b gy mr ms l mt mu">console.log(differenceInCalendarWeeks(new Date(2015, 11, 25), new Date(2015, 11, 10))); // =&gt; 2</span></pre><ul class=""><li id="2640" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> getWeek </strong>:我们也可以通过<code class="fe me mf mg mh b">weekStartsOn</code>标志来指定一周从哪一天开始。范围从0-6，0为星期日。周数从1开始。</li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="206a" class="mq ke iq mh b gy mr ms l mt mu">console.log(getWeek(Date.now())); // =&gt; 30<br/>console.log(getWeek(Date.now(), {weekStartsOn: 1})); // =&gt; 29</span></pre><ul class=""><li id="956c" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir"> isThisWeek: </strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="be73" class="mq ke iq mh b gy mr ms l mt mu">console.log(isThisWeek(Date.now())); // =&gt; true</span></pre><ul class=""><li id="a4d4" class="mw mx iq ld b le lz li ma lm my lq mz lu na ly nb nc nd ne bi translated"><strong class="ld ir">每年的每个周末</strong></li></ul><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f411" class="mq ke iq mh b gy mr ms l mt mu">console.log(eachWeekendOfYear(Date.now())); <br/>// =&gt; [Sat Jan 04 2020 00:00:00 GMT+0530 (India Standard Time)...]</span></pre><h1 id="045b" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">常见助手和用例</h1><h2 id="0994" class="mq ke iq bd kf nm nn dn kj no np dp kn lm nq nr kr lq ns nt kv lu nu nv kz nw bi translated">简单的操作</h2><p id="1c56" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">除此之外，我们还可以对两个<code class="fe me mf mg mh b">Date</code>对象进行加减运算，并且它们的命名非常直观，如下图所示:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/57ff2ca72349ec2ef7196455480406b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWOIyKnqH3lA8ggT6q9v3A.png"/></div></div></figure><p id="0ef2" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">详述上述方法的一些例子是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="27aa" class="mq ke iq mh b gy mr ms l mt mu">addQuarters(new Date("2020-01-01"), 3); <br/>// =&gt; Thu Oct 01 2020 05:30:00 GMT+0530 (India Standard Time)</span><span id="911f" class="mq ke iq mh b gy mv ms l mt mu">max([new Date(2020, 2, 22), new Date(2020, 2, 2)]); <br/>// =&gt; Sun Mar 22 2020 00:00:00 GMT+0530 (India Standard Time)</span></pre><h2 id="8b9f" class="mq ke iq bd kf nm nn dn kj no np dp kn lm nq nr kr lq ns nt kv lu nu nv kz nw bi translated">格式化日期时间</h2><p id="d2b5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最常见的问题之一是将日期和时间格式化为适合应用程序要求的特定格式。这也意味着这是最自我管理的方法，如果格式改变，它可能会失控。date-fns <code class="fe me mf mg mh b">format</code> util有各种各样的格式选项，方法的签名非常简单，我们可以通过更新字符串来改变格式。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6ea5" class="mq ke iq mh b gy mr ms l mt mu">format(date, formatOptions)</span></pre><p id="d6ad" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">虽然<code class="fe me mf mg mh b">formatOptions</code>列表很广泛，但涵盖一些最常用的示例如下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9bea" class="mq ke iq mh b gy mr ms l mt mu">const date = new Date("2020-07-19 18:32:00");</span><span id="a20c" class="mq ke iq mh b gy mv ms l mt mu">format(date, "yy-MM-dd") =&gt; 20-07-19<br/>format(date, "dd/MM/yyyy") =&gt; 19/07/2020<br/>format(date, "do LLL yyyy") =&gt; 19th Jul 2020<br/>format(date, "HH:mm:ss") =&gt; 18:32:00<br/>format(date, "dd/MM/yyy hh:mm:ss x") =&gt; 19/07/2020 12:32:00 +0530<br/>format(date, "dd/MM/yyy hh:mm:ss O) =&gt; 19/07/2020 06:32:00 GMT+5:30<br/>format(new Date("2020-07-19 00:32:00"), "hh:mm:ss a") =&gt; 12:32:00 PM<br/>format(new Date("2020-07-19 12:00:00"), "hh:mm:ss b") =&gt; 12:00:00 noon<br/>format(new Date("2020-07-19 00:32:00"), "kk:mm:ss") =&gt; 24:32:00<br/>format(new Date("2020-07-19 00:32:00"), "KK:mm:ss") =&gt; 00:32:00</span><span id="512f" class="mq ke iq mh b gy mv ms l mt mu">//second timestamp<br/>format(date, "t") =&gt; 1595163720<br/>//millisecond timestamp<br/>format(date, "T") =&gt; 1595163720000</span><span id="08fe" class="mq ke iq mh b gy mv ms l mt mu">/* some really interesting built-ins */</span><span id="11f8" class="mq ke iq mh b gy mv ms l mt mu">//Localized date<br/>format(date, "P") =&gt; 07/19/2020<br/>format(date, "PPPP") =&gt; Sunday, July 19th, 2020<br/>format(date, "PPPP G") =&gt; Sunday, July 19th, 2020 AD</span><span id="c01c" class="mq ke iq mh b gy mv ms l mt mu">//Localized time<br/>format(date, "p") =&gt; 6:32 PM<br/>format(date, "pppp") =&gt; 6:32:00 PM GMT+05:30</span><span id="18cf" class="mq ke iq mh b gy mv ms l mt mu">// Localized date and time<br/>format(date, "PPPPpppp") =&gt; Sunday, July 19th, 2020 at 6:32:00 PM GMT+05:30</span></pre><p id="55a5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果您在格式化时不需要如此小的区域设置选项，那么您可以使用<code class="fe me mf mg mh b">lightFormat</code>。它被称为相同的格式方式，并且不考虑与<code class="fe me mf mg mh b">Era</code>、<code class="fe me mf mg mh b">Quarter</code>、<code class="fe me mf mg mh b">Extended year</code>相关的某些选项。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="144a" class="mq ke iq mh b gy mr ms l mt mu">lightFormat(new Date("2020-07-19 18:32:00"), "dd/MM/yy") =&gt; 19/07/20<br/>lightFormat(new Date("2020-07-19 18:32:00"), "p") =&gt;  throws RangeError</span></pre><p id="e4bf" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">date-fns允许我们通过它的<code class="fe me mf mg mh b">formatDistance</code>和<code class="fe me mf mg mh b">formatDuration</code>方法格式化时间间隔和持续时间。它们之间的主要区别在于，前者根据给定的日期格式化日期，而后者只是用文字表示持续时间。<code class="fe me mf mg mh b">formatDistanceToNow</code>与<code class="fe me mf mg mh b">formatDistance</code>相同，参考设置为<code class="fe me mf mg mh b">now()</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="917a" class="mq ke iq mh b gy mr ms l mt mu">formatDistance(Date.now(), sub(Date.now(), {hours: 4})); <br/>// =&gt; About 4 hours</span><span id="5900" class="mq ke iq mh b gy mv ms l mt mu">formatDistance(Date.now(), sub(Date.now(), {hours: 4}), {addSuffix: true}); <br/>// =&gt; in about 4 hours</span><span id="21a8" class="mq ke iq mh b gy mv ms l mt mu">formatDistance(Date.now(), sub(Date.now(), {seconds: 4}), { addSuffix: true, includeSeconds: true}); <br/>// =&gt; in less than 5 seconds</span><span id="ce4b" class="mq ke iq mh b gy mv ms l mt mu">formatDistanceStrict(Date.now(), sub(Date.now(), {seconds: 4}), { addSuffix: true, includeSeconds: true }); <br/>// =&gt; in 4 seconds</span><span id="7fd0" class="mq ke iq mh b gy mv ms l mt mu">formatDuration({days: 4, hours: 3}); // =&gt; 4 days 3 hours</span><span id="b001" class="mq ke iq mh b gy mv ms l mt mu">formatDuration({days: 4, hours: 3}, {delimiter: "|"}); <br/>// =&gt; 4 days|3 hours</span><span id="8ffa" class="mq ke iq mh b gy mv ms l mt mu">formatDuration({days: 4, hours: 3, months: 44}, {delimiter: "|", format: [ "months", "hours"]}) <br/>// =&gt; 44 months|3 hours</span></pre><h1 id="0bd8" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">ISO格式</h1><p id="bbd5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">ISO日期格式是表示日期的标准方式，定义为<code class="fe me mf mg mh b">YYYY-MM-DDTHH:mm:ss.sssZ</code>，而UTC是主要的时间标准。ISO格式总是以UTC作为时间标准，并在末尾用<code class="fe me mf mg mh b">Z</code>表示。date-fns有办法以ISO格式实现上述所有功能。下面是一些例子:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/aa58cc9cdf5b19ee29b8e8b02657b4ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TY0xPfAw42TMJePMIffjWw.png"/></div></div></figure><h1 id="cc70" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">国际化</h1><p id="a1b5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">大多数开发者和应用都面临国际化的问题，因为它不在<code class="fe me mf mg mh b">TODO</code>列表的首位。date-fns附带了一个名为<code class="fe me mf mg mh b">date-fns-tz</code>的模块，用于处理时区格式和转换。这个助手模块可以通过运行<code class="fe me mf mg mh b">npm install date-fns-tz</code>来安装，也提供了类型脚本支持。</p><h2 id="386a" class="mq ke iq bd kf nm nn dn kj no np dp kn lm nq nr kr lq ns nt kv lu nu nv kz nw bi translated">将时区时间转换为UTC和ISO</h2><p id="19f1" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果您的系统将日期时间存储在特定的时区，并且必须将其转换为UTC，那么可以使用<code class="fe me mf mg mh b">zonedTimeToUTC</code>方法。它采用输入日期时间的<code class="fe me mf mg mh b">IANA</code>格式的日期和时区。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c722" class="mq ke iq mh b gy mr ms l mt mu">zonedTimeToUTC(date, originTimeZone)</span><span id="3e6d" class="mq ke iq mh b gy mv ms l mt mu">examples:</span><span id="3a0d" class="mq ke iq mh b gy mv ms l mt mu">zonedTimeToUtc(new Date("Sun Jul 19 2020 14:41:43"), "America/Los_Angeles"); <br/>// =&gt; Mon Jul 20 2020 03:11:43 GMT+0530 (India Standard Time)</span><span id="5454" class="mq ke iq mh b gy mv ms l mt mu">zonedTimeToUtc(new Date("Sun Jul 19 2020 14:41:43"), "Asia/Bangkok"); <br/>// =&gt; Sun Jul 19 2020 13:11:43 GMT+0530 (India Standard Time)</span></pre><h2 id="81fd" class="mq ke iq bd kf nm nn dn kj no np dp kn lm nq nr kr lq ns nt kv lu nu nv kz nw bi translated">将UTC转换为时区时间</h2><p id="8266" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">考虑这样一个用例，您要向您的用户发送通知或电子邮件，如果您以UTC格式发送时间和日期细节，而他们必须将其转换为当地时间，这对他们来说是一个麻烦。因此，另一个常见的用例是将存储在数据库中的UTC时间转换为任何时区。这是通过<code class="fe me mf mg mh b">utcToZonedTime</code>实现的。这也采用了<code class="fe me mf mg mh b">IANA</code>格式的日期和时区，但是时区代表了您想要转换到的时区。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="16d3" class="mq ke iq mh b gy mr ms l mt mu">utcToZonedTime(date, destinationTimeZone)</span><span id="8923" class="mq ke iq mh b gy mv ms l mt mu">examples:</span><span id="360c" class="mq ke iq mh b gy mv ms l mt mu">console.log(utcToZonedTime(Date.now(), "Asia/Kolkata")); <br/>// =&gt; Mon Jul 20 2020 02:06:59 GMT+0530 (India Standard Time)</span><span id="9b34" class="mq ke iq mh b gy mv ms l mt mu">console.log(utcToZonedTime(Date.now(), "America/Los_Angeles")); <br/>// Sun Jul 19 2020 13:36:59 GMT+0530 (India Standard Time)</span></pre><h1 id="75e8" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">评估指标</h1><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/656ca12cd61bb6359d26b41eb2a4f72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ctgSSZCQLwb3xIc5coWphw.png"/></div></div></figure><h1 id="b9c4" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">看看这个包裹和一些阅读材料</h1><ul class=""><li id="e583" class="mw mx iq ld b le lf li lj lm nz lq oa lu ob ly nb nc nd ne bi translated"><a class="ae kc" href="https://date-fns.org/v2.14.0/docs" rel="noopener ugc nofollow" target="_blank">https://date-fns.org/v2.14.0/docs</a></li><li id="e337" class="mw mx iq ld b le nf li ng lm nh lq ni lu nj ly nb nc nd ne bi translated">在https://codesandbox.io/s/lyq47o17z9尝试这些方法</li><li id="0a4e" class="mw mx iq ld b le nf li ng lm nh lq ni lu nj ly nb nc nd ne bi translated">https://www.npmjs.com/package/date-fns-tz<a class="ae kc" href="https://www.npmjs.com/package/date-fns-tz" rel="noopener ugc nofollow" target="_blank"/></li><li id="256b" class="mw mx iq ld b le nf li ng lm nh lq ni lu nj ly nb nc nd ne bi translated"><a class="ae kc" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="noopener ugc nofollow" target="_blank"> https://en .维基百科. org/wiki/List _ of _ tz _ database _ time _ zones</a></li></ul><h1 id="fdfc" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">包装的视频审查</h1><p id="1ec4" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">视频回顾，其中包含有趣的使用案例和对即将推出的功能的深入探索！更多相关内容，请查看<a class="ae kc" href="https://unpackaged.reviews/" rel="noopener ugc nofollow" target="_blank">未打包的评论</a></p><h1 id="d08f" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">揭发</h1><p id="0e6f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">本文/评论中提到的内容和评估分数是主观的，是作者在无包装评论中基于日常使用和对流行开发者论坛的研究的个人意见。它们不代表任何公司的观点，也不受任何赞助/合作的影响。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Next.js — Route Links and Dynamic Routes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js路径链接和动态路径</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/next-js-route-links-and-dynamic-routes-479522adbb27?source=collection_archive---------2-----------------------#2020-12-25">https://javascript.plainenglish.io/next-js-route-links-and-dynamic-routes-479522adbb27?source=collection_archive---------2-----------------------#2020-12-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f2d5059e1e218ed5a78ec6a499c6b5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*napt7AbviK5CegmI"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jjying?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JJ Ying</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c85f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以轻松地创建服务器端呈现的React应用程序和静态站点。</p><p id="b37f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看使用Next.js的路由。</p><h1 id="df3b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态路由链接</h1><p id="d40f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以为动态路由添加链接。</p><p id="c1d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><p id="aa51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/foo.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1dd2" class="mq lc iq mh b gy mr ms l mt mu">import Links from './links';</span><span id="98a9" class="mq lc iq mh b gy mv ms l mt mu">function Foo() {<br/>  return &lt;div&gt;<br/>    &lt;Links /&gt;<br/>    &lt;p&gt;foo&lt;/p&gt;<br/>  &lt;/div&gt;<br/>}</span><span id="133c" class="mq lc iq mh b gy mv ms l mt mu">export default Foo</span></pre><p id="1080" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/blog/[slug].js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1b86" class="mq lc iq mh b gy mr ms l mt mu">import { useRouter } from 'next/router'<br/>import Links from '../links';</span><span id="b712" class="mq lc iq mh b gy mv ms l mt mu">const Post = () =&gt; {<br/>  const router = useRouter()<br/>  const { slug } = router.query</span><span id="431c" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;<br/>    &lt;Links /&gt;<br/>    &lt;p&gt;Post: {slug}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>}</span><span id="7c70" class="mq lc iq mh b gy mv ms l mt mu">export default Post</span></pre><p id="e3e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/links.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="682d" class="mq lc iq mh b gy mr ms l mt mu">import Link from 'next/link'</span><span id="ad64" class="mq lc iq mh b gy mv ms l mt mu">const posts = [<br/>  { slug: 'hello-world', title: 'hello world', id: 1 },<br/>  { slug: 'good-news', title: 'good news', id: 2 },<br/>  { slug: 'great-news', title: 'great news', id: 3 },<br/>]</span><span id="a2cd" class="mq lc iq mh b gy mv ms l mt mu">function Links() {<br/>  return (<br/>    &lt;ul&gt;<br/>      &lt;li&gt;<br/>        &lt;Link href="/foo"&gt;<br/>          &lt;a&gt;foo&lt;/a&gt;<br/>        &lt;/Link&gt;<br/>      &lt;/li&gt;<br/>      {posts.map((post) =&gt; (<br/>        &lt;li key={post.id}&gt;<br/>          &lt;Link href="/blog/[slug]" as={`/blog/${post.slug}`}&gt;<br/>            &lt;a&gt;{post.title}&lt;/a&gt;<br/>          &lt;/Link&gt;<br/>        &lt;/li&gt;<br/>      ))}<br/>    &lt;/ul&gt;<br/>  )<br/>}</span><span id="29db" class="mq lc iq mh b gy mv ms l mt mu">export default Links</span></pre><p id="ce9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe me mf mg mh b">[slug].js</code>文件，它显示了我们传入的slug。</p><p id="39ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">router.query</code>对象中有URL参数。</p><p id="22c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以有和我们传入的一样多的URL参数。</p><p id="8194" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useRouter</code>钩子有路线数据。</p><p id="5907" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要括号来表示该文件用于可以接受URL参数的动态路由。</p><p id="f240" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">links.js</code>文件包含链接。</p><p id="aa9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">Link</code>组件来添加链接。</p><p id="69cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">href</code>具有路由的URL模式。</p><p id="06ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe me mf mg mh b">as</code>具有到fo的路由的实际路径。</p><p id="c3dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们有一个到<code class="fe me mf mg mh b">foo</code>页面的静态链接。</p><p id="3d3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们单击链接时，我们将转到映射到路线的页面。</p><p id="7092" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击最后3个链接时，我们应该会看到这个小块。</p><h1 id="5e5b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">捕捉所有路线</h1><p id="97bf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在文件名前添加<code class="fe me mf mg mh b">...</code>来添加无遗漏路线。</p><p id="d793" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="e4aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/blog/[...slug].js:</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="165c" class="mq lc iq mh b gy mr ms l mt mu">import { useRouter } from 'next/router'<br/>import Links from '../links';</span><span id="75d2" class="mq lc iq mh b gy mv ms l mt mu">const Post = () =&gt; {<br/>  const router = useRouter()<br/>  const { slug } = router.query</span><span id="b091" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;<br/>    &lt;Links /&gt;<br/>    &lt;p&gt;Post: {slug.join(', ')}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>}</span><span id="f581" class="mq lc iq mh b gy mv ms l mt mu">export default Post</span></pre><p id="5a51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/links.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="661f" class="mq lc iq mh b gy mr ms l mt mu">import Link from 'next/link'</span><span id="161d" class="mq lc iq mh b gy mv ms l mt mu">const posts = [<br/>  { slug: 'hello-world/1', title: 'hello world', id: 1 },<br/>  { slug: 'good-news/2', title: 'good news', id: 2 },<br/>  { slug: 'great-news/3', title: 'great news', id: 3 },<br/>]</span><span id="76d2" class="mq lc iq mh b gy mv ms l mt mu">function Links() {<br/>  return (<br/>    &lt;ul&gt;<br/>      &lt;li&gt;<br/>        &lt;Link href="/foo"&gt;<br/>          &lt;a&gt;foo&lt;/a&gt;<br/>        &lt;/Link&gt;<br/>      &lt;/li&gt;<br/>      {posts.map((post) =&gt; (<br/>        &lt;li key={post.id}&gt;<br/>          &lt;Link href="/blog/[slug]" as={`/blog/${post.slug}`}&gt;<br/>            &lt;a&gt;{post.title}&lt;/a&gt;<br/>          &lt;/Link&gt;<br/>        &lt;/li&gt;<br/>      ))}<br/>    &lt;/ul&gt;<br/>  )<br/>}</span><span id="d1d3" class="mq lc iq mh b gy mv ms l mt mu">export default Links</span></pre><p id="cff6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为每个<code class="fe me mf mg mh b">slug</code>添加了一个额外的URL参数。</p><p id="c28c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们在<code class="fe me mf mg mh b">[...slug].js</code>中被渲染成数组。</p><p id="fc4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们调用<code class="fe me mf mg mh b">join</code>将数组转换成逗号分隔的字符串。</p><h1 id="846a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可选的全包路线</h1><p id="b8e6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在文件名周围添加额外的括号来使全包路由可选。</p><p id="5e5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="45b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pages/blog/[[...slug]].js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="14e5" class="mq lc iq mh b gy mr ms l mt mu">import { useRouter } from 'next/router'<br/>import Links from '../links';</span><span id="a498" class="mq lc iq mh b gy mv ms l mt mu">const Post = () =&gt; {<br/>  const router = useRouter()<br/>  const { slug } = router.query</span><span id="580b" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;<br/>    &lt;Links /&gt;<br/>    &lt;p&gt;Post: {slug &amp;&amp; slug.join(', ')}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>}</span><span id="ba19" class="mq lc iq mh b gy mv ms l mt mu">export default Post</span></pre><p id="f0e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在文件名周围加了一组括号。</p><p id="35e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以转到<code class="fe me mf mg mh b">/blog</code>路径，我们将看到在<code class="fe me mf mg mh b">Post:</code>之后没有任何内容的同一个页面。</p><h1 id="32a0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ff51" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Next.js添加动态路由链接。</p><p id="bec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们所要做的就是遵循文件名约定，使用带有<code class="fe me mf mg mh b">Link</code>组件的<code class="fe me mf mg mh b">href</code>和<code class="fe me mf mg mh b">as</code>道具。</p><p id="a275" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
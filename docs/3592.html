<html>
<head>
<title>Architecting and Making a Modal with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React设计和制作模型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/architecting-and-making-a-modal-with-react-75bf652ccc70?source=collection_archive---------4-----------------------#2020-10-11">https://javascript.plainenglish.io/architecting-and-making-a-modal-with-react-75bf652ccc70?source=collection_archive---------4-----------------------#2020-10-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6f48" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">而不牺牲用户或开发人员的体验</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b02d6fe2f17d513e62aec4c52f770393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0-AwdyefU826j3dQCgUUw.jpeg"/></div></div></figure><h1 id="f5c1" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">我们为什么爱做出反应？</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/11992aec5de0f60a055a72a8166d1df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*0hFQVJQjzk4Sa2pqsDB84Q.jpeg"/></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">how I usually be</figcaption></figure><p id="dfe5" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">这是一个声明式UI构建工具。它以一种让一个组件做一件事的方式来分离关注点，而且它做得非常好。目前，我们编写函数，这些函数被其他函数调用，它们在屏幕上显示一些东西。很简单，也应该如此💅。我可以说几天我为什么喜欢这个库，但是我不会说，因为你们想做一个更好的模型。</p><h1 id="c961" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated"><strong class="ak">先决条件— </strong>故事和造型</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/615f8098dc5315734f2f4aef32ad22b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*dokroGxeatu0k7feiZe1lw.gif"/></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">aka the boring stuff</figcaption></figure><p id="cde0" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">该模式有一个带主体的包装。该主体有一个标题、退出按钮和内容。只是复制和粘贴样式，但我鼓励你写自己的。大多数样式来自用户故事。</p><p id="b1f6" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">包装器是固定的，因为我们总是希望它在视图的前面。当用户单击按钮时，模式在视图中打开，提供上下文中的内容，例如，阅读更多按钮。如果用户在主体外部或退出按钮上单击，则模式关闭。应该有一个进入/退出动画，并且模态内容在动画的整个持续时间内保持可见。当模式在视图中时，用户不能滚动页面。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/fb24d1ba6039fe7a8cc3771ad56e642d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*968A1YWE0c3KsmNvvPqzsA.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">the .scss file</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/9efde940c7c2a68723f6ea28b9ab2fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRfN_ap6m2qQWh47Pv-Wqw.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">the html</figcaption></figure><p id="6510" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">好了，现在已经解决了这个问题，我们可以开始讨论细节了。</p><h1 id="bc89" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">建筑——肉和土豆</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mk"><img src="../Images/eb40ff9364a8a82750a68eb846eb8bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlXkQB2k1-HevUYPuY9LvA.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">how this thing is gonna go down</figcaption></figure><p id="6fd5" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们会把整个事情放在一个环境中。上下文有两个功能和一个状态。上下文将公开这两个函数。一个函数将接受一个组件，该组件将放在内容变量中。另一个将关闭模态，一旦动画完成，它将清除内容。该内容将是一个准挂钩，这将公开一个有2个键{标题，儿童}的对象。这将允许我们使用钩子，而不牺牲可定制性。很简单。我们开始吧。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/f9c49af6e22da7fc9dabc1bed84eb17f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPU_9OiDH9Y72WMJBEBwIA.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">ModalContext.jsx — AKA the meat and potatoes</figcaption></figure><p id="9e38" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">让我们弄清楚到底发生了什么。我们正在创建一个带有初始值的模态上下文，并创建一个助手钩子useModalContext。我们正在创建实际的模态扩展组件，它将使用模态的内容作为一个“钩子”,它将公开一个孩子和标题属性。</p><p id="5b51" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">让我们创建第一个模态扩展组件。我们只是要做一个普通的函数组件，返回一个对象，而不是JSX。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/5cc6ce39499f4bde789f4875c81825ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kyNccjaTiaKvrYcq_32cpQ.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">Example Content for the Modal aka our Quasi Hook</figcaption></figure><p id="1bb0" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">怎么叫情态？这其实很简单。首先，我们需要将我们的应用程序包装在ModalProvider和on the click函数中，我们将使用我们漂亮的小openModal函数将模态扩展组件放入ModalContext的内容中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/be0cc5038441f8458a97208bfee3e7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBUF8SEP25ODCWF2pv1KJQ.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">App.jsx — This is basically how your app is going to look like.</figcaption></figure><h1 id="935e" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">用反应弹簧增加一些闪光</h1><p id="ea58" class="pw-post-body-paragraph ll lm in ln b lo mm jo lq lr mn jr lt lu mo lw lx ly mp ma mb mc mq me mf mg ig bi translated">我可能有偏见，但我爱React-Spring。这是目前React最好的动画库。它在你的组件之外制作动画，所以它不会渲染组件一百万次(或者准确地说是每秒60次)。它是声明性的，而且钩子非常棒。</p><p id="5866" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为此，我们将不得不重新安排一切，这样我们就不会因为这样做而产生无数的错误，然后我会告诉你为什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/f20f5e19dbd9ee100e504cd0fe9175f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nd5yJSg_XsQRqwYj_Ddcsw.png"/></div></div></figure><p id="0867" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">首先，我移动了模态的父对象，这样我就可以将弹簧移动到模态上下文中，这样可以获得更好的性能和响应。然后，我将ModalContent移到另一个组件中。这很难解释，但是在执行这些准钩子时，会有堆栈跟踪错误。React通常不想这么做，所以你得稍微欺骗一下(但是嘘，不要告诉任何人🤫).这避免了任何和所有的错误。</p><h1 id="e207" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">VAC —瞧，注意事项</h1><p id="3c32" class="pw-post-body-paragraph ll lm in ln b lo mm jo lq lr mn jr lt lu mo lw lx ly mp ma mb mc mq me mf mg ig bi translated">就我所见，一个也没有。我正在为一家相当大的公司(是一家汽车公司)的网站使用这个模态组件，它一直都很顺利。他们有50种不同的形式，有台阶和其他东西，而且支撑得非常好。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">here’s the sandbox</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/c43daddfda933dc0e762c7e9b44a167e.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/0*UpEn2bIMpeiObU8k"/></div><figcaption class="lh li gj gh gi lj lk bd b be z dk">Hey, that’s me</figcaption></figure><h1 id="5988" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">社交——跟踪我</h1><p id="664f" class="pw-post-body-paragraph ll lm in ln b lo mm jo lq lr mn jr lt lu mo lw lx ly mp ma mb mc mq me mf mg ig bi translated">我是一名全栈开发者。我举重(不是现在，因为整个COVID的事情)。我看动漫。我写JavaScript，我没有斯德哥尔摩综合症。</p><p id="ad30" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">🔗<a class="ae mu" href="https://alekangelov.com/" rel="noopener ugc nofollow" target="_blank">网站</a></p><p id="e6fb" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">🔒<a class="ae mu" href="https://www.linkedin.com/in/alekangelov/" rel="noopener ugc nofollow" target="_blank">领英</a></p></div></div>    
</body>
</html>
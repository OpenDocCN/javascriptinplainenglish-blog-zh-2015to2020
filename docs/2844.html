<html>
<head>
<title>jQuery Tips — Slim Package, each and reverse, Copy to Clipboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">jQuery技巧——超薄包，正反两面，复制到剪贴板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/jquery-tips-slim-package-each-and-reverse-copy-to-clipboard-2b179dd6b3d5?source=collection_archive---------11-----------------------#2020-07-28">https://javascript.plainenglish.io/jquery-tips-slim-package-each-and-reverse-copy-to-clipboard-2b179dd6b3d5?source=collection_archive---------11-----------------------#2020-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fc77d57d96968845489539cfd97468a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eNQRG_ueE03KXwfK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@frenjaminbenklin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Frenjamin Benklin</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f257" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管年代久远，jQuery仍然是操纵DOM的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些使用jQuery的技巧。</p><h1 id="7024" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用jQuery。向后迭代的each()</h1><p id="5e69" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要调用<code class="fe me mf mg mh b">each</code>向后遍历数组，我们可以使用<code class="fe me mf mg mh b">reverse</code>方法来反转项目。</p><p id="93df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1ccb" class="mq lc iq mh b gy mr ms l mt mu">$($("li").get().reverse()).each(function() { <br/>  /* ... */ <br/>});</span></pre><p id="1639" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们获取所有的li元素，用<code class="fe me mf mg mh b">get</code>将节点列表转换成一个数组。</p><p id="3485" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">reverse</code>来反转物品。</p><p id="3702" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以调用<code class="fe me mf mg mh b">each</code>来逆向遍历每一项。</p><p id="8283" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以创建自己的<code class="fe me mf mg mh b">reverse</code>插件来反转项目。</p><p id="d7e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f4b7" class="mq lc iq mh b gy mr ms l mt mu">$.fn.reverse = [].reverse;<br/>$("li").reverse().each(function (i) {<br/>    $(this).text(`item-${i}`);<br/>});</span></pre><p id="6e62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过获取数组的<code class="fe me mf mg mh b">reverse</code>方法并返回它来创建<code class="fe me mf mg mh b">reverse</code> jQuery插件。</p><p id="4404" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用我们的jQuery对象调用<code class="fe me mf mg mh b">reverse</code>。</p><p id="b189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后返回一个数组，我们可以对它调用<code class="fe me mf mg mh b">each</code>。</p><h1 id="2001" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">通过jQuery对多个元素使用相同的Click事件</h1><p id="0211" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">on</code>方法向多个元素添加相同的点击处理程序。</p><p id="465a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e43" class="mq lc iq mh b gy mr ms l mt mu">$('.foo, .bar').on('click', onClick);</span></pre><p id="e2d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<code class="fe me mf mg mh b">onClick</code>是一个事件处理函数。</p><p id="3ea3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们监听类为<code class="fe me mf mg mh b">foo</code>和<code class="fe me mf mg mh b">bar</code>的所有元素上的点击事件。</p><p id="2829" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以使用<code class="fe me mf mg mh b">on</code>方法来监听具有多个元素的多个事件。</p><p id="1dae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="83b0" class="mq lc iq mh b gy mr ms l mt mu">$(document).on("click touchend", ".foo, .bar, .baz", function () {<br/>  //...<br/>});</span></pre><p id="92e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们监听包含所有元素的<code class="fe me mf mg mh b">click</code>和<code class="fe me mf mg mh b">touchend </code>事件，所有元素都有<code class="fe me mf mg mh b">foo</code>、<code class="fe me mf mg mh b">bar</code>和<code class="fe me mf mg mh b">baz</code>类。</p><p id="53c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该函数是事件处理程序。</p><p id="fe0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">document</code>对象上调用<code class="fe me mf mg mh b">on</code>，这样我们就可以用它进行事件委托。</p><h1 id="8ba3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">jQuery普通包和精简包的区别</h1><p id="013a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">slim jQuery包从普通jQuery包中删除了几个特性。</p><p id="124c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jQuery.fn.extend</code>被移除，因为我们不能用<code class="fe me mf mg mh b">jQuery</code>构造函数创建自己的实例方法。</p><p id="f337" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jQuery.fn.load</code>也被移除了，所以我们不能从ether中加载数据，也不能将返回的HTML放到给定的元素中。</p><p id="a84b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jQuery.each</code>也被移除，所以我们不能用它迭代数组项。</p><p id="1f30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jQuery.expr.filters.animated</code>被移除，这样我们就不能在动画中使用它了。</p><p id="7558" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像<code class="fe me mf mg mh b">jQuery.ajaxSettings.xhr</code>、<code class="fe me mf mg mh b">jQuery.ajaxPrefilter</code>、<code class="fe me mf mg mh b">jQuery.ajaxSetup</code>、<code class="fe me mf mg mh b">jQuery.ajaxPrefilter</code>和<code class="fe me mf mg mh b">jQuery.ajaxTransport</code>这样的Ajax方法也消失了。</p><p id="df82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像<code class="fe me mf mg mh b">jQuery.parseXML</code>这样的XML解析方法也被删除了。</p><p id="1939" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jQuery.easing</code>、<code class="fe me mf mg mh b">jQuery.animation</code>和<code class="fe me mf mg mh b">jQuery.speed</code>不包含在jQuery slim包中。</p><p id="e946" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些是我们可能不需要的动画效果包。</p><p id="3a03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不使用这些方法，那么我们可以使用jQuery slim包来代替普通包。</p><h1 id="c7d4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">jQuery在文本区域设置光标位置</h1><p id="a6a4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">setSelectionRange</code>或<code class="fe me mf mg mh b">createTextRange</code>方法在文本区域设置光标位置。</p><p id="dc14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cd19" class="mq lc iq mh b gy mr ms l mt mu">const setSelectionRange = (input, selectionStart, selectionEnd) =&gt; {<br/>  if (input.setSelectionRange) {<br/>    input.focus();<br/>    input.setSelectionRange(selectionStart, selectionEnd);<br/>  }<br/>  else if (input.createTextRange) {<br/>    const range = input.createTextRange();<br/>    range.collapse(true);<br/>    range.moveEnd('character', selectionEnd);<br/>    range.moveStart('character', selectionStart);<br/>    range.select();<br/>  }<br/>}</span></pre><p id="0ae7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">setSelectionRange</code>方法是否存在，如果存在就使用它。</p><p id="bf27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在输入上调用<code class="fe me mf mg mh b">focus</code>，然后调用<code class="fe me mf mg mh b">setSelectionRange</code>来设置起始和结束位置的选择。</p><p id="99f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe me mf mg mh b">createTextRange</code>方法，我们可以做同样的事情。</p><p id="570d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比<code class="fe me mf mg mh b">setSelectionRange</code>更复杂。</p><p id="f790" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">moveEnd</code>和<code class="fe me mf mg mh b">moveStart</code>来移动选择光标到我们想要的位置。</p><p id="6ba6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">select</code>进行选择。</p><h1 id="afdf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用jQuery复制到剪贴板</h1><p id="eb2a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用jQuery创建一个复制到剪贴板的函数。</p><p id="7300" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该函数将创建一个输入，将文本放入其中，然后选择文本。</p><p id="7ba5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用参数<code class="fe me mf mg mh b">'copy'</code>调用<code class="fe me mf mg mh b">execCommand</code>将选择复制到剪贴板。</p><p id="d9f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们移除我们创建的元素。</p><p id="ecb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a37e" class="mq lc iq mh b gy mr ms l mt mu">const copyToClipboard = (element) =&gt; {<br/>  const $tempInput = $("&lt;input&gt;");<br/>  $("body").append($tempInput);<br/>  $tempInput.val($(element).text()).select();<br/>  document.execCommand("copy");<br/>  $tempInput.remove();<br/>}</span></pre><p id="467d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创造了一个输入元素，把它附在身体上。</p><p id="de5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后将任何元素的文本作为值放入元素中。</p><p id="2160" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在其中调用<code class="fe me mf mg mh b">select</code>来选择所有的文本。</p><p id="5248" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在上面调用<code class="fe me mf mg mh b">execCommand</code>。</p><p id="593e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦完成，我们通过调用<code class="fe me mf mg mh b">remove</code>移除元素。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/ba1941eb02dfe480930e25b3e36d33c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9HicQZR5XLq3LzYx"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kgcre8tive?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kim Green</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0fab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="7dac" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将文本复制到剪贴板，把它放入输入中，然后在上面发送<code class="fe me mf mg mh b">'copy'</code>命令。</p><p id="6696" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用jQuery，我们可以将多个事件附加到多个元素上。</p><p id="ad18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的<code class="fe me mf mg mh b">reverse</code> jQuery插件来反转我们迭代的项目。</p><h2 id="c83d" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="0430" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
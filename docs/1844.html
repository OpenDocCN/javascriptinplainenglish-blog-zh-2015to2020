<html>
<head>
<title>Creating Components in VueJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在VueJS中创建组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-components-in-vuejs-c7a61d84430c?source=collection_archive---------2-----------------------#2020-04-28">https://javascript.plainenglish.io/creating-components-in-vuejs-c7a61d84430c?source=collection_archive---------2-----------------------#2020-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3ac2cc2c6fd7dadb18992b62ae5e3b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BimlaAiN4oI9fMJZ4DBlg.png"/></div></div></figure><p id="04fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://vuejs.org/v2/guide/components.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">组件</strong> </a>是一种为你的Vue.js应用编写模块化、可重用代码的方式。组件可以被认为是定制的HTML元素，可以被主<code class="fe kx ky kz la b">Vue</code>实例和/或其他组件使用。它们也可以被认为是小型或子<code class="fe kx ky kz la b">Vue</code>实例。</p><p id="1741" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建一个组件，可以用<code class="fe kx ky kz la b">Vue</code>构造函数的<code class="fe kx ky kz la b">component</code>方法对其进行全局注册。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="e92e" class="lj lk iq la b gy ll lm l ln lo">Vue.component('some-component', {<br/>    /* data, methods, etc. go here */<br/>});</span></pre><p id="849e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个参数是用作组件名称的字符串。您可以在HTML中将该名称用作标记名来呈现组件。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="2853" class="lj lk iq la b gy ll lm l ln lo">&lt;some-component&gt;&lt;/some-component&gt;</span></pre><p id="d41e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">习惯上，名称全部小写，并用连字符分隔单词(kebab-case)。</p><p id="fa8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二个参数是一个配置对象，也可以传递给<code class="fe kx ky kz la b">Vue</code>构造函数。几乎所有可以传递给<code class="fe kx ky kz la b">Vue</code>构造函数的东西都可以传递给<code class="fe kx ky kz la b">Vue.component</code>。两个重要的例外是<code class="fe kx ky kz la b">el</code>和<code class="fe kx ky kz la b">data</code>。</p><p id="797a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您没有将一个<code class="fe kx ky kz la b">el</code>传递给<code class="fe kx ky kz la b">Vue.component</code>，因为它们是在遇到它们的标签的地方呈现的。您可以为组件的DOM子树指定一个模板，而不是一个<code class="fe kx ky kz la b">el</code>。</p><p id="f649" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在适当的时候你确实传递了<code class="fe kx ky kz la b">data</code>，但是它与你传递给<code class="fe kx ky kz la b">Vue</code>构造函数的<code class="fe kx ky kz la b">data</code>采用了不同的形式。传递给<code class="fe kx ky kz la b">Vue.component</code>的<code class="fe kx ky kz la b">data</code>必须是一个返回对象的函数，而不是一个对象。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="8cfa" class="lj lk iq la b gy ll lm l ln lo">Vue.component('some-component', {<br/>    data: function() {<br/>        return {<br/>            heading: 'Some Component'<br/>        };<br/>    }<br/>});</span></pre><p id="3d18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是必要的，因为组件可以多次使用，我们希望每个组件都有自己的数据对象。请看<a class="ae kw" href="https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function" rel="noopener ugc nofollow" target="_blank">这里</a>的一个例子，如果你为一个组件的数据使用一个共享对象会发生什么。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lp"><img src="../Images/9d2de8fb869c2a15f59b95370826cce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sRcQ_fCH2KKHDYgA"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yancy Min</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="611f" class="lu lk iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">模板</h1><p id="c5d0" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">有几种方法可以为组件指定模板。</p><p id="67c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一种方法是将模板的内容放在组件本身的标记内。为此，您需要向标签添加一个名为<code class="fe kx ky kz la b">inline-template</code>的属性。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="af70" class="lj lk iq la b gy ll lm l ln lo">&lt;some-component inline-template&gt;<br/>    &lt;div&gt;<br/>        &lt;h1&gt;{{heading}}&lt;/h1&gt;<br/>        &lt;p&gt;This is a component&lt;/p&gt;<br/>    &lt;/div&gt;<br/>&lt;/some-component&gt;</span></pre><p id="641d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种方法的价值有限，因为您经常想要重复使用组件，并且每次都必须重写模板是非常烦人的。</p><p id="af99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一个选择是为你的模板使用一个<code class="fe kx ky kz la b">&lt;script&gt;</code>标签。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="1bd7" class="lj lk iq la b gy ll lm l ln lo">&lt;some-component&gt;&lt;/some-component&gt;</span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><pre class="lf la lg lh aw li bi"><span id="6a80" class="lj lk iq la b gy nd ne nf ng nh lm l ln lo">&lt;script id="some-template" type="text/x-template"&gt;<br/>&lt;div&gt;<br/>    &lt;h1&gt;{{ heading }}&lt;/h1&gt;<br/>    &lt;p&gt;This is a component!!!&lt;/p&gt;<br/>&lt;/div&gt;<br/>&lt;/script&gt;</span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><pre class="lf la lg lh aw li bi"><span id="28fa" class="lj lk iq la b gy nd ne nf ng nh lm l ln lo">Vue.component('some-component', {<br/>    data: function() {<br/>        return {<br/>            heading: 'Some Component'<br/>        };<br/>    },<br/>    template: '#some-template'<br/>});</span></pre><p id="308b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也可以将<code class="fe kx ky kz la b">template</code>属性直接设置为包含模板的字符串。这只适用于短的(单行)模板。较长的模板变得难以使用。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="c9f9" class="lj lk iq la b gy ll lm l ln lo">Vue.component('some-component', {<br/>    data: function() {<br/>        return {<br/>            heading: 'Some Component'<br/>        };<br/>    },<br/>    template: '&lt;h1&gt;{{heading}}&lt;/h1&gt;'<br/>});</span></pre><p id="4846" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，在上面的所有模板示例中，只有一个根元素包含在模板中，而所有其他元素都包含在模板中。这是对Vue模板的要求。</p><h1 id="b74d" class="lu lk iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated"><code class="fe kx ky kz la b">props</code></h1><p id="3999" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">数据可以作为自定义属性传递给组件。这些数据在Vue.js术语中被称为<code class="fe kx ky kz la b">props</code>。为了将一个属性传递给一个组件，您必须通过在一个名为<code class="fe kx ky kz la b">props</code>的数组中列出它来声明它的名称。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="e828" class="lj lk iq la b gy ll lm l ln lo">&lt;div id="main"&gt;<br/>    &lt;ul&gt;<br/>        &lt;li v-for="city in cities"&gt;<br/>            &lt;individual-city v-bind:id="city.id" v-bind:name="city.name" v-bind:country="city.country"&gt;&lt;/individual-city&gt;<br/>        &lt;/li&gt;<br/>    &lt;/ul&gt;<br/>&lt;/div&gt;</span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><pre class="lf la lg lh aw li bi"><span id="a4eb" class="lj lk iq la b gy nd ne nf ng nh lm l ln lo">Vue.component('individual-city', {<br/>    props: ['id', 'name', 'country'],<br/>    template: '&lt;span&gt;{{name}}, {{country}}&lt;/span&gt;'<br/>});<br/><br/>new Vue({<br/>    el: '#main',<br/>    data: {<br/>        cities: [<br/>            {<br/>                id: 1,<br/>                name: 'Berlin',<br/>                country: 'Germany'<br/>            },<br/>            {<br/>                id: 2,<br/>                name: 'Hamburg',<br/>                country: 'Germany'<br/>            }<br/>        ]<br/>    }<br/>});</span></pre><p id="d8a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你将道具传递给一个组件时，组件将道具作为自身的属性存储，就像它在<code class="fe kx ky kz la b">data</code>中传递的项目一样。如果父对象将其自己的反应属性作为道具传递，当这些属性的值发生变化时，组件将接收更新后的值，并在必要时重新渲染组件。</p><p id="20ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为传递给组件的属性会随着父组件的相应属性的改变而改变，所以组件最好将它们收到的属性作为只读属性对待。如果他们改变了其中任何一个人的价值观，他们不能确定他们不会通过自己的行动改变到别的东西。</p><p id="ff7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果一个组件改变了它的一个属性的值，并且这个属性是一个原始值，那么父属性<em class="ni">的相应属性将不会受到影响。组件不能改变其父组件是设计使然。通过确保数据单向流动——从父组件到组件——vue . js消除了许多潜在的混乱。</em></p><p id="c5c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想让组件影响它的父组件，您可以让组件发出父组件侦听的事件。您使用组件的<code class="fe kx ky kz la b">$emit</code>方法来完成这项工作。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="c390" class="lj lk iq la b gy ll lm l ln lo">&lt;div id="main"&gt;<br/>    &lt;ul&gt;<br/>        &lt;li v-for="city in cities"&gt;<br/>            &lt;strong&gt;Component for {{city.name}}:&lt;/strong&gt;<br/>            &lt;individual-city<br/>                  v-bind:id="city.id"<br/>                  v-bind:name="city.name"<br/>                  v-bind:country="city.country"<br/>                  v-on:changed="updateCityName"&gt;&lt;/individual-city&gt;<br/>        &lt;/li&gt;<br/>    &lt;/ul&gt;<br/>&lt;/div&gt;</span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><pre class="lf la lg lh aw li bi"><span id="6891" class="lj lk iq la b gy nd ne nf ng nh lm l ln lo">Vue.component('individual-city', {<br/>        props: ['id', 'name', 'country'],<br/>        methods: {<br/>            changed: function(e) {<br/>                this.$emit('changed', this.id, e.target.value);<br/>            }<br/>        },<br/>        template:<br/>            '&lt;span&gt;{{name}}, {{country}} &lt;input v-bind:value="name" v-on:input="changed"&gt;&lt;/span&gt;'<br/>    });<br/><br/>    new Vue({<br/>        el: '#main',<br/>        data: {<br/>            cities: [<br/>                {<br/>                    id: 1,<br/>                    name: 'Berlin',<br/>                    country: 'Germany'<br/>                },<br/>                {<br/>                    id: 2,<br/>                    name: 'Hamburg',<br/>                    country: 'Germany'<br/>                }<br/>            ]<br/>        },<br/>        methods: {<br/>            updateCityName: function(id, name) {<br/>                for (var i = 0; i &lt; this.cities.length; i++) {<br/>                    if (this.cities[i].id == id) {<br/>                        this.cities[i].name = name;<br/>                        return;<br/>                    }<br/>                }<br/>            }<br/>        }<br/>    });</span></pre><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/72a6632e5265c3d83bdd93f746f6200b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tWNsD82pT0xLNiLj08A_ew.gif"/></div></div></figure><p id="0dd6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果将对象或数组作为属性传递给组件，组件对对象或数组所做的更改将影响父对象。您应该注意不要让组件改变传递给它们的任何对象或数组。如果组件需要改变传递给它的对象或数组，那么应该传递对象或数组的克隆。</p><p id="8749" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您的阅读！</p><h2 id="e381" class="lj lk iq bd lv nk nl dn lz nm nn dp md kj no np mh kn nq nr ml kr ns nt mp nu bi translated">进一步阅读</h2><div class="nv nw gp gr nx ny"><a href="https://bit.cloud/blog/meet-component-driven-content-applicable-composable-l24cw7ku" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">满足组件驱动的内容:适用的、可组合的</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">自从React和Angular等技术出现以来，我们经常将术语“组件”与…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">比特云</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om jw ny"/></div></div></a></div><p id="572a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ni">更多内容请看</em><a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ni">plain English . io</em></strong></a><em class="ni">。报名参加我们的</em> <a class="ae kw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ni">免费周报</em> </strong> </a> <em class="ni">。关注我们关于</em><a class="ae kw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ni">Twitter</em></strong></a><a class="ae kw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ni">LinkedIn</em></strong></a><strong class="ka ir"><em class="ni"/></strong><a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ni">YouTube</em></strong></a><strong class="ka ir"><em class="ni">，以及</em></strong><em class="ni"/><a class="ae kw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ni">不和</em> </strong> </a>  <em class="ni">对成长黑客感兴趣？检查</em> <a class="ae kw" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="ni">电路</em> </strong> </a> <strong class="ka ir"> <em class="ni">。</em> </strong></p></div></div>    
</body>
</html>
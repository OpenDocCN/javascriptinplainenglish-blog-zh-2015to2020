# 是时候离开虚拟 DOM (React)了吗？

> 原文：<https://javascript.plainenglish.io/is-it-time-to-move-on-from-virtual-dom-reactjs-2c01afbf81fb?source=collection_archive---------0----------------------->

![](img/642d048389dd1b89d3ecdc9078b14bb5.png)

Designed by vectorpocket / Freepik updated by [Shashank Sharma](https://medium.com/u/14bb3e347adc?source=post_page-----2c01afbf81fb--------------------------------)

## 理解框架的地狱模式并预测下一次范式转变。

十多年来，我一直在开发 web 应用程序，见证了许多 JavaScript 库和框架的兴衰。在框架的地狱中，变化是不可避免的。作为一名开发人员，我想知道是否存在一种模式，更重要的是，我们能预测下一次转变吗？

> 今天最受欢迎的继任者填补了前任留下的空白

为了理解框架的这种变化模式，让我们稍微回到 **JQuery** 的时代。

![](img/2853ce302615eb62bcb90b42d0e581f8.png)

当时，维护对任何 web 应用程序的跨浏览器支持对开发人员来说都是一场噩梦。JQuery(和相关的库)是 web 开发的实际方法。然而，它有其局限性。为了支持不同的浏览器，代码变得臃肿，而且大部分的生命周期管理必须分开进行，这增加了更多的代码占用空间。此外，最大的问题是不同的 **jQuery** 插件如何能够共存并互相通信而不互相干扰。

> 任何新的框架在解决一些问题的同时也会产生新的需求

![](img/d37bbaa8420a36136e028c65236f8394.png)

最终，库开始演变成框架，并为整个 web 应用程序提供了框架。这是模块驱动开发(**amd**/**requires**/**Dojo**等)兴起的时候。).

企业很快采用了这些模式。许多这些库很快被企业采用。很快，模块化 JavaScript 生态系统中出现了几个不兼容的标准。甚至 HTML 社区也注意到了这一点，并分享了 Web 组件的初稿

![](img/dc8a2f7accc6000c5f4783e70b1df641.png)

Web 组件规范支持扩展现有 HTML 元素的能力。这就催生了 HTML 扩展模型(自定义 HTML 元素***<【my-elements/>***)的兴起。

然而，它还远未被浏览器所采用，但这激发了一个基于组件的 JS 框架的新时代，包括 AngularJS(由 Google 开发)和 React(由脸书开发)。他们提出了组件生命周期管理模型，剩下的就是历史了

![](img/3985736d849b08b73da1b0e2ea3c2986.png)

**Angular 1.x** 以创新的变更检测机制(Watchers)神奇地操纵 HTML DOM，像风暴一样接管了 web，成为 web 开发的新标准。

然而，随着应用程序大小的增加，出现了许多问题，包括检测变化时的帧速率下降。当组件或观察器的数量增加时，性能和效率都不是很好。

![](img/813d9621546d62cdce02363a43c86afd.png)

**ReactJS** 提出了改进的变化检测和更新机制，称为 **Virtual-DOM** ，它优于 angular 的范围和监视技术

Angular2.x 很快出现，试图修复 Angular 1 造成的混乱，但为时已晚，因为 React 已经超过了当时抛出的事实

此外，市场上很少有像 **VueJS** 这样的玩家在 Angular 或 React 缺乏的几个方面做得更好。

此外，记住所有这些框架也在发展。他们发布了新版本，试图在每个后续版本中进行改进。然而，大多数时候他们通过保持核心架构相似来坚持向后兼容性。

# 你能看出这里的模式吗？

开发人员寻找更新的选项

1.  现有框架中存在明显的缺陷，这些缺陷不能很快修复，或者必须进行重大更改(没有向后兼容性)
2.  存在解决上述问题的可选方案

# 是时候离开虚拟 DOM(ReactJS)了吗？

要回答这个问题，我们需要两样东西

1.  不进行重大变更就无法修复的缺陷列表
2.  今天我们有其他选择吗？

# 缺陷👎🏻

> **Desclaimer**——react js 是一个很棒的合作生态系统。我使用 react 已经有一段时间了，它帮助我高效快速地运送网络应用程序。然而，这并不意味着它是完美的

1.  到目前为止讨论的所有这些框架都严重依赖于浏览器处理其算法的能力。示例变化检测/观察器/虚拟 DOM 操作等。不管差分算法的效率有多高，它总是会耗尽客户端的硬件资源。尽管很少有人尝试使用 Web Workers、Web Assembly 等各种概念来加速浏览器的处理能力，但潜在的挑战仍然是一样的。
2.  无论应用程序本身有多小或多大，应用程序都必须附带库和依赖项。现代网页的平均大小已经超过 2MB，其中大部分时间包含大量的样板文件。

# 当今的替代方案

我们能继续享受这些框架的好处，避免捆绑包膨胀吗？优秀的开发者和用户体验？嗯**是的！**

> 框架消失的时代

**细长/模板/角形元素/聚合物/网状组件**是这种新兴趋势的例子。

![](img/3d21dfb6393ad53a2225bc2bf7a0c371.png)

尤其是 velte，最初引起了我的注意，因为它不是一个客户端框架；相反，它是一个编译时框架。它不再严重依赖浏览器进行处理，而是在编译时转移大量工作，最后，只提供渲染的 HTML/CSS/JS。编译后的包不包含也不依赖于任何库代码。

# 结论

那么模式是什么呢？进步是典型的模式。大多数现有框架生态系统都存在一个共同的问题，即向客户端发送大量样板代码，并且严重依赖浏览器的资源进行状态管理、路由等。在框架的后续版本中，很难解决这些具有突破性变化的问题。与此同时，有一些替代方案可以继续提供当前开发人员社区所习惯的好处，而不会增加浏览器的工作量。

> 消失的框架确实值得投资，值得一试。

我希望这篇文章将有助于理解 JS 框架中不断变化的模式，并有助于在个人或企业项目开发中做出明智的决定。

# 资源

特别感谢[彼得·奥肖内西](https://medium.com/u/27616666fa21?source=post_page-----2c01afbf81fb--------------------------------)和里奇·哈里斯——重新思考反应能力，将所有观点汇集在一起。

[](https://medium.com/samsung-internet-dev/disappearing-frameworks-ed921f411c38) [## 消失的框架

### 新的 web 平台特性和编译时框架如何建立 web 开发的下一个时代

medium.com](https://medium.com/samsung-internet-dev/disappearing-frameworks-ed921f411c38)
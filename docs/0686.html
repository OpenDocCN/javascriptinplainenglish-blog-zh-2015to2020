<html>
<head>
<title>Understanding the Basics to CORS and Fetch Credentials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解CORS的基本知识并获取证书</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-the-basics-to-fetch-credentials-863b25968ed5?source=collection_archive---------2-----------------------#2019-11-26">https://javascript.plainenglish.io/understanding-the-basics-to-fetch-credentials-863b25968ed5?source=collection_archive---------2-----------------------#2019-11-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5b80" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">作为一名开发人员，当你试图在一个API上使用fetch时，你将不可避免地遇到各种错误，因为它没有被授权，对吗？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c30e543d56d0bb570e5ca825ab02d8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*77ZKxPbuB62AG0iopi2bXA.png"/></div></div></figure><p id="bd71" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你可能会揪着头发走</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/6455d01528bd9febe51f1bde1db8808c.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*3z_Gefkm4YdzczvmfSOd7A.jpeg"/></div></figure><p id="9919" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对吗？</p><p id="88c7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">嗯，当在各种API上使用Fetch时，有时各种证书会被添加到它们的API中，以便允许站点保持安全。API有三种类型的请求:省略、允许同源和包含？这到底是什么意思？要理解Fetch中的凭证，首先必须对CORS(跨源资源共享)有一个基本的了解。</p><p id="f7df" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">CORS是一个跨源资源共享的标准。我们为什么需要这个？嗯，现代浏览器有安全功能，可以防止黑客攻击的发生。这被称为同源策略。这是为了不允许来自一个来源的文档或脚本访问外来来源的资源。为什么这如此重要？基本上，它是为了阻止一个跨站请求伪造。</p><p id="8a40" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">根据维基百科:</p><p id="4162" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">跨站点请求伪造(CSRF)是一种攻击，它迫使最终用户在他们当前已通过身份验证的web应用程序上执行不需要的操作。CSRF攻击专门针对状态改变请求，而不是窃取数据，因为攻击者无法看到对伪造请求的响应。在社会工程的一点帮助下(例如通过电子邮件或聊天发送链接)，攻击者可以欺骗web应用程序的用户执行攻击者选择的操作。如果受害者是普通用户，成功的CSRF攻击可迫使用户执行状态更改请求，如转移资金、更改电子邮件地址等。如果受害者是一个管理帐户，CSRF可以危及整个网络应用程序。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/2b6de9335bcd8c4b5ccd27b7b33585bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*FhRruzwioJZKzDZv.png"/></div></figure><p id="c8e0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果这个网站是你的银行信息，或者至少是一个亚马逊账户，那就糟了。基本上，如果你要对你的facebook账户这么做</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/7fcf01d45242fe2401f5b57cff0e9e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*M7WWOruiBQI7jVijAk8tWg.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Please, don’t do this</figcaption></figure><p id="ea0a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你可能会问，“那么，什么是起源？”。这意味着混合使用协议、域和端口来确定资源是否来自同一个地方。例如，“http://api.facebook.com”与“http://facebook.com”不同。这也适用于“http://localhost:3000”与“http://localhost:8080”。</p><p id="de80" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，为了保证用户在站点上的安全，您可以根据是否希望共享这些cookies，向获取请求添加凭证！</p><p id="db06" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您可以省略aka从不发送或接收cookies。</p><p id="2bfa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您可以使用同源发送用户凭证(cookies、基本http认证等..)如果URL与调用脚本位于同一原点。<strong class="kq io">这是默认值。</strong></p><p id="f90c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，您可以使用Include，它总是发送用户凭证(cookies、基本http auth等..)，即使是跨来源呼叫。</p><p id="9373" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">需要记住的一点是，如果网站配置不当，这对用户来说是多么危险。</p><p id="5ff4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您的凭据配置错误，可以参考以下资源来了解恶意参与者会做些什么:</p><p id="7c4d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lr" href="https://portswigger.net/research/exploiting-cors-misconfigurations-for-bitcoins-and-bounties" rel="noopener ugc nofollow" target="_blank">https://ports wigger . net/research/exploining-CORS-misconfiguration-for-bit coins-and-bounts</a></p><p id="2e85" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正确理解CORS，对规范有一个基本的理解，并意识到你的站点的个人需求，将允许你确保在你的特定领域或应用上最安全的用户体验。</p><p id="1ace" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下资源将更深入地介绍如何使用凭据:</p><div class="ls lt gp gr lu lv"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">请求.凭据</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">接口的凭据只读属性指示用户代理是否应该从另一个…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">developer.mozilla.org</p></div></div><div class="me l"><div class="mf l mg mh mi me mj km lv"/></div></div></a></div><p id="d3cc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lr" href="https://www.moesif.com/blog/technical/cors/Authoritative-Guide-to-CORS-Cross-Origin-Resource-Sharing-for-REST-APIs/#" rel="noopener ugc nofollow" target="_blank">https://www . moes if . com/blog/technical/CORS/authority-Guide-to-CORS-跨产地-资源共享-休息-API/#</a></p><div class="ls lt gp gr lu lv"><a href="https://github.com/github/fetch/issues/349" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">即使使用“同源”凭据，请求标头中也未设置Cookie。问题#349 github/fetch</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">向Django API发出请求需要设置csrftoken cookie。我无法设置和发送…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mk l mg mh mi me mj km lv"/></div></div></a></div></div></div>    
</body>
</html>
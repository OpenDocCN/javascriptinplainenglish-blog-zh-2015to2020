<html>
<head>
<title>How to create and write to a CSV file in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Node.js中创建和写入CSV文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-and-write-to-a-csv-file-in-node-js-b4e194747e56?source=collection_archive---------1-----------------------#2020-05-03">https://javascript.plainenglish.io/how-to-create-and-write-to-a-csv-file-in-node-js-b4e194747e56?source=collection_archive---------1-----------------------#2020-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b344" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我如何在2分钟内制作我的口袋妖怪数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f20dd2b969938aab50d91aea6687060a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCPGDxueHVx_8lgPJxntEA.png"/></div></div></figure><p id="24ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们并不总是得到我们想要的，不是吗？</p><p id="675d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">同样的事情也发生在我身上！我想要一个关于每个口袋妖怪的适当的数据集，所以我开始寻找不同的API或npm包。</p><p id="db29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我无法在单一来源中找到我要找的所有东西，但我能够在2个不同的包中找到它。所以我决定从每个文件中提取所需的信息到一个CSV文件中。</p><p id="bb7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而且，(我不是吹牛)，我不到2分钟就能做到！怎么会？使用<code class="fe ln lo lp lq b">objects-to-csv</code>库。在这篇博客中，你将了解到如何快速地将你的对象数组转换成一个CSV文件。让我们开始吧。</p><p id="d667" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您只对代码感兴趣，您可以在GitHub repo中找到它:</p><div class="lr ls gp gr lt lu"><a href="https://github.com/MadhavBahlMD/pokeData" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">MadhavBahlMD/pokeData</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">通过制作自己的口袋妖怪数据集学习用NodeJS写CSV文件。我如何在2分钟内制作我的口袋妖怪数据集ᕦ(…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi kp lu"/></div></div></a></div><h1 id="065a" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">关于包裹</h1><p id="d50b" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">对于口袋妖怪的数据，我遇到了这三个有特定问题的包—</p><ol class=""><li id="8d38" class="ng nh iq kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated"><a class="ae np" href="https://www.npmjs.com/package/pokedex" rel="noopener ugc nofollow" target="_blank">pokedex</a>——不能同时搜索所有的口袋妖怪。</li><li id="3f9a" class="ng nh iq kt b ku nq kx nr la ns le nt li nu lm nl nm nn no bi translated"><a class="ae np" href="https://www.npmjs.com/package/pokemon" rel="noopener ugc nofollow" target="_blank">口袋妖怪</a>——只是所有口袋妖怪的列表，但是解决了获得所有口袋妖怪的问题。</li><li id="1209" class="ng nh iq kt b ku nq kx nr la ns le nt li nu lm nl nm nn no bi translated"><a class="ae np" href="https://www.npmjs.com/package/objects-to-csv" rel="noopener ugc nofollow" target="_blank"> objects-to-csv </a> —将一组JavaScript对象转换成csv格式。救命恩人。</li></ol><p id="6d37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以我决定把这些结合起来:)</p><h1 id="6a6a" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">安装软件包</h1><p id="8375" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">如果你熟悉NodeJS，我想我不需要告诉你这些步骤，但是，如果你来自不同的语言，我会告诉你如何安装这些。</p><p id="1fc4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">只需一个命令！</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="4e9c" class="nz mk iq lq b gy oa ob l oc od">npm install --save objects-to-csv pokemon pokedex</span></pre><h1 id="8900" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">写剧本</h1><p id="22a1" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">太棒了，现在是主要部分。在我们继续之前，让我们看看从上面两个包中得到的响应。</p><h2 id="b710" class="nz mk iq bd ml oe of dn mp og oh dp mt la oi oj mv le ok ol mx li om on mz oo bi translated">口袋妖怪套装</h2><p id="7f77" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">这个包可以用来获得一个特定的口袋妖怪的名字/id。它还可以用来获取所有口袋妖怪的列表。</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="c18c" class="nz mk iq lq b gy oa ob l oc od">const pokemon <strong class="lq ir">=</strong> require('pokemon');</span><span id="32d1" class="nz mk iq lq b gy op ob l oc od">pokemon.all();<br/><em class="oq">//=&gt; ['Bulbasaur', …]</em></span></pre><h2 id="44a8" class="nz mk iq bd ml oe of dn mp og oh dp mt la oi oj mv le ok ol mx li om on mz oo bi translated">Pokedex包</h2><p id="c26e" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">这个包可以用来获取关于口袋妖怪的信息，包括他们的精灵。</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="6a66" class="nz mk iq lq b gy oa ob l oc od">var Pokedex <strong class="lq ir">=</strong> require('pokedex'),<br/>pokedex <strong class="lq ir">=</strong> <strong class="lq ir">new</strong> Pokedex();</span><span id="c308" class="nz mk iq lq b gy op ob l oc od">console.log( pokedex.pokemon('garbodor') );</span></pre><p id="cb80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果会是—</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="ce69" class="nz mk iq lq b gy oa ob l oc od">{<br/>  id<strong class="lq ir">:</strong> 569,<br/>  species_id<strong class="lq ir">:</strong> 569,<br/>  height<strong class="lq ir">:</strong> 19,<br/>  weight<strong class="lq ir">:</strong> 1073,<br/>  base_experience<strong class="lq ir">:</strong> 166,<br/>  order<strong class="lq ir">:</strong> 617,<br/>  is_default<strong class="lq ir">:</strong> 1,<br/>  name<strong class="lq ir">:</strong> 'garbodor',<br/>  sprites<strong class="lq ir">:</strong> {<br/>    normal<strong class="lq ir">:</strong> 'http://img.pokemondb.net/sprites/black-white/normal/garbodor.png',<br/>    animated<strong class="lq ir">:</strong> 'http://img.pokemondb.net/sprites/black-white/anim/normal/garbodor.gif'<br/>  }<br/>}</span></pre><p id="602a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以你可能已经猜到了，我想要一个所有口袋妖怪的这些细节的csv。我们来写剧本吧。</p><p id="74d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就像在任何其他节点项目中一样，第一步是导入库。</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="8961" class="nz mk iq lq b gy oa ob l oc od">const ObjectsToCsv = require('objects-to-csv')<br/>const Pokedex = require('pokedex');<br/>const pokemon = require('pokemon');</span></pre><p id="119a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们创建一个Pokedex实例，并获取所有的口袋妖怪</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="4719" class="nz mk iq lq b gy oa ob l oc od">const pokedex = new Pokedex();<br/>let pokemons = pokemon.all();</span></pre><p id="30fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们制作一个对象数组，每个对象都有关于口袋妖怪的信息。不要忘记对嵌套的对象进行字符串化(否则它们会在写入CSV时产生问题)。</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="4a82" class="nz mk iq lq b gy oa ob l oc od">let pokemonData = pokemons.map (pokemon =&gt; {<br/>  let pokemonDetails = pokedex.pokemon(pokemon.toLowerCase());<br/>  <em class="oq">// Stringify the nested object<br/>  </em>pokemonDetails = {<br/>    ...pokemonDetails,<br/>    sprites: JSON.stringify(pokemonDetails.sprites)<br/>  }<br/>  return pokemonDetails;<br/>})</span></pre><p id="2925" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，这是我们的最后一步，写CSV。</p><p id="1b4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我正在使用<code class="fe ln lo lp lq b"><a class="ae np" href="https://www.npmjs.com/package/objects-to-csv" rel="noopener ugc nofollow" target="_blank">objects-to-csv</a></code>库，这使得工作变得非常简单。看到下面的代码，就不言自明了！</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="2a4a" class="nz mk iq lq b gy oa ob l oc od"><em class="oq">// Write to CSV File<br/></em>const writeToCsv = async (data) =&gt; {<br/>  const csv = new ObjectsToCsv(data);</span><span id="fda9" class="nz mk iq lq b gy op ob l oc od"><em class="oq">// Save to file:<br/>  </em>await csv.toDisk('./pokedex.csv');<br/>}</span></pre><p id="337a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经走了这么远，让我们跑吧！</p><pre class="kg kh ki kj gt nv lq nw nx aw ny bi"><span id="1ffd" class="nz mk iq lq b gy oa ob l oc od">node fileName.js</span></pre><p id="a4f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样！魔法。我们的CSV准备好了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/d5b7231a3abc39b8c5ee040cc8e6504d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CMQmyVza0t91h5k-itjA9w.gif"/></div></div></figure><p id="c9ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是完整的代码—</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="os ot l"/></div></figure></div><div class="ab cl ou ov hu ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ij ik il im in"><p id="a4e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就这些了，希望你觉得这个帖子有用！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/6a3a9293da64140fa5227d4cca2d807b.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*6GmDGGhAdDYvnCpO.png"/></div></figure><p id="0711" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想讨论什么，随时联系我，:D</p><p id="0c8d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您能发送您的反馈、建议或询问，我将非常高兴。此外，我喜欢交新朋友，我们可以成为朋友，只要给我发邮件。</p><blockquote class="pc pd pe"><p id="1800" class="kr ks oq kt b ku kv jr kw kx ky ju kz pf lb lc ld pg lf lg lh ph lj lk ll lm ij bi translated"><em class="iq">非常感谢阅读到最后。如有需要可以联系我:<br/>邮箱:theleanprogrammer@gmail.com<br/>网页:</em><a class="ae np" href="http://madhavbahl.tech/" rel="noopener ugc nofollow" target="_blank"><em class="iq">http://madhavbahl.tech/</em></a><em class="iq"><br/>Github:</em><a class="ae np" href="https://github.com/MadhavBahlMD" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://github.com/MadhavBahlMD</em></a><em class="iq"><br/>LinkedIn:</em><a class="ae np" href="https://www.linkedin.com/in/madhavbahl/" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://www.linkedin.com/in/madhavbahl/</em></a><em class="iq"><br/>insta gram:</em><a class="ae np" href="https://www.instagram.com/theleanprogrammer/" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://www.instagram.com/theleanprogrammer/</em></a></p></blockquote><h2 id="97d1" class="nz mk iq bd ml oe of dn mp og oh dp mt la oi oj mv le ok ol mx li om on mz oo bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="ddeb" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物，表达对它们的爱:<a class="ae np" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kt ir">AI in Plain English</strong></a><a class="ae np" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kt ir">UX in Plain English</strong></a><a class="ae np" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kt ir">Python in Plain English</strong></a><strong class="kt ir"/>——谢谢，继续学习！</p><p id="b93b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae np" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">submissions @ plain English . io</strong></a><strong class="kt ir"/>，并使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
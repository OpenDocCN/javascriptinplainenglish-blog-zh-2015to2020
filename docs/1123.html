<html>
<head>
<title>Testing vanilla JavaScript with Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Jest测试普通JavaScript</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/testing-vanilla-javascript-with-jest-8a7eaca80d40?source=collection_archive---------2-----------------------#2020-02-01">https://javascript.plainenglish.io/testing-vanilla-javascript-with-jest-8a7eaca80d40?source=collection_archive---------2-----------------------#2020-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f2f9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">两分钟内的完整示例:从安装到测试</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a92258aa41470d9bebf40f21338058a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6U7XOPa_p7nuS4AmxNtNlw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Shutterstock</figcaption></figure><p id="3d15" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://jestjs.io/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> Jest </strong> </a> <strong class="kx ir"> </strong>是一个注重简单性的JavaScript测试框架。它可以和Angular这样的框架或者React这样的库一起工作。同样，用普通的JavaScript。</p><p id="8d1b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用Jest测试普通JS非常容易。我将介绍jest安装中的一个简单示例，并测试一个简单的函数。</p><p id="c51f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，你需要在你的电脑上安装npm或者yarn。</p><ul class=""><li id="6615" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">安装NPM:<a class="ae lr" href="https://www.npmjs.com/get-npm" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/get-npm</a></li><li id="73a4" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">安装纱线:<a class="ae lr" href="https://www.npmjs.com/package/yarn" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/yarn</a></li></ul><ol class=""><li id="246f" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq mg ly lz ma bi translated">初始化新的npm项目</li></ol><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="37dc" class="mm mn iq mi b gy mo mp l mq mr"><strong class="mi ir">$ npm init</strong></span><span id="5624" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">This utility will walk you through creating a </em><strong class="mi ir"><em class="mt">package.json</em></strong><em class="mt"> file.<br/>It only covers the most common items, and tries to guess sensible defaults.</em></span><span id="841b" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">See `npm help json` for definitive documentation on these fields<br/>and exactly what they do.</em></span><span id="d78d" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">Use `npm install &lt;pkg&gt; --save` afterwards to install a package and<br/>save it as a dependency in the package.json file.</em></span><span id="45db" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">Press ^C at any time to quit.<br/>name: (jest_example)</em></span><span id="cec7" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">version: (1.0.0) <br/>description: my first test<br/>entry point: (index.js) <br/>test command: <br/>git repository: <br/>keywords: <br/>author: <br/>license: (ISC)</em></span><span id="9180" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">{<br/>  "name": "jest_example",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC"<br/>}</em></span><span id="927d" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">Is this ok? (yes) Aborted.</em></span></pre><p id="7983" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将创建一个名为package.json的文件</p><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="e806" class="mm mn iq mi b gy mo mp l mq mr"><em class="mt">{<br/>  "name": "jest_example",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "</em><strong class="mi ir"><em class="mt">test</em></strong><em class="mt">": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC"<br/>}</em></span></pre><ol class=""><li id="669d" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq mg ly lz ma bi translated">使用npm或yarn安装Jest:</li></ol><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="cb6f" class="mm mn iq mi b gy mo mp l mq mr"><strong class="mi ir">$ npm install --save-dev jest<br/>  or<br/>$ yarn add --dev jest</strong></span><span id="640c" class="mm mn iq mi b gy ms mp l mq mr"><em class="mt">Note: yarn require node version ^8.12.0 || &gt;=9.7.0". Got "8.10.0"</em></span></pre><p id="d9c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们从编写一个简单函数的测试开始，这个函数将两个数相减。</p><p id="8118" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.创建我们想要测试的函数</p><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="4b86" class="mm mn iq mi b gy mo mp l mq mr">//subtract.js file.</span><span id="a54c" class="mm mn iq mi b gy ms mp l mq mr">const subtract = (a,b) =&gt; a - b;</span><span id="907b" class="mm mn iq mi b gy ms mp l mq mr">//export default subtract; ES6 , require babel<br/>//Node CommonJS module system:<br/>module.exports = subtract;</span></pre><p id="e9ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.创建测试文件</p><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="d40b" class="mm mn iq mi b gy mo mp l mq mr">//subtract.test.js file.</span><span id="f960" class="mm mn iq mi b gy ms mp l mq mr">//import * as myModule from 'subtract.js'; ES6, require babel.<br/>const subtract = require('./subtract');</span><span id="cd74" class="mm mn iq mi b gy ms mp l mq mr">test('subtract 2 - 1 to equal 1', () =&gt; {expect(subtract(2, 1)).toBe(1);});</span></pre><p id="21fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.在package.json文件中添加/修改以下内容。</p><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="ee0c" class="mm mn iq mi b gy mo mp l mq mr">{<br/>  "scripts": {<br/>    "test": <strong class="mi ir">"jest"</strong><br/>  }<br/>}</span></pre><p id="079f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">5.最后，运行纱线测试或npm运行测试，Jest将打印以下消息:</p><pre class="kg kh ki kj gt mh mi mj mk aw ml bi"><span id="eddc" class="mm mn iq mi b gy mo mp l mq mr"><strong class="mi ir">$ npm run test</strong></span><span id="5ae9" class="mm mn iq mi b gy ms mp l mq mr">&gt; jest_example@1.0.0 test /jest_example<br/>&gt; jest</span><span id="2669" class="mm mn iq mi b gy ms mp l mq mr">PASS  ./subtract.test.js<br/>  ✓ subtract 2 - 1 to equal 1 (5ms)</span><span id="ee95" class="mm mn iq mi b gy ms mp l mq mr">Test Suites: 1 passed, 1 total<br/>Tests:       1 passed, 1 total<br/>Snapshots:   0 total<br/>Time:        0.945s, estimated 1s<br/>Ran all test suites.</span></pre><h2 id="ced9" class="mm mn iq bd mu mv mw dn mx my mz dp na le nb nc nd li ne nf ng lm nh ni nj nk bi translated">结论</h2><p id="9ab7" class="pw-post-body-paragraph kv kw iq kx b ky nl jr la lb nm ju ld le nn lg lh li no lk ll lm np lo lp lq ij bi translated">这是一个非常基本的例子，但是您可以看到用普通的JavaScript用Jest创建一个测试是多么容易。</p><p id="4b8f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果这对你有帮助，请点击下面的拍手按钮！非常感谢！</p></div></div>    
</body>
</html>
# å¦‚ä½•åœ¨ react-navigation å†…è·å– React ä¸­çš„å½“å‰å±å¹•å…ƒæ•°æ®ï¼Ÿ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/how-to-get-the-current-screen-metadata-in-react-within-react-navigation-b9c18206e9c4?source=collection_archive---------2----------------------->

## ä½¿ç”¨å¯¼èˆªçŠ¶æ€æ’é™¤å…¬å…±é™·é˜±çš„å°æŒ‡å—ï¼

![](img/f9984b2d3e03cb0f3447459afb5ab0a9.png)

å½“å°† [react-navigation](https://reactnavigation.org/) ä¸ [react-native](https://facebook.github.io/react-native/) æˆ–[ç»å…¸çš„åŸºäºç½‘ç»œçš„ react åº”ç”¨](https://reactjs.org/)ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œä½ å¯èƒ½æœ‰ä¸€å¤©ä¼šé—®è‡ªå·±:

> å¦‚ä½•è·å–**å½“å‰è·¯çº¿**å…ƒæ•°æ®ï¼Œå¦‚è·¯çº¿åç§°ï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹ï¼Œä½†æœ‰æ—¶å¯èƒ½ä¼šæœ‰ç‚¹æ£˜æ‰‹ï¼Œå¾ˆéš¾æ‰¾åˆ°å¦‚ä½•å¤„ç†å®ƒã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸ä½ åˆ†äº«è¿™ä¸ªå°æŒ‡å—æ¥å…‹æœä½ å¯èƒ½ç»å†çš„å¤§å¤šæ•°å¤±è´¥æ¡ˆä¾‹ï¼Œåœ¨å‡ ä¸ªå°æ—¶çš„æŒ£æ‰åï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªæ¨¡å¼èƒ½å¸®åŠ©ä½ ä¸è¦é‡è¹ˆæˆ‘çš„è¦†è¾™ã€‚

# ğŸ‘¨ğŸ»â€ğŸ”¬è®©æˆ‘ä»¬ä»ä¸€ç‚¹ç†è®ºå¼€å§‹

åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¯å¢ƒä¸­ï¼Œåœ¨`react-navigation`é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸¤ç§ç»„ä»¶:

1.  å¯¼èˆªç»„ä»¶çš„ç›´æ¥å­ç»„ä»¶ï¼Œç§°ä¸º**å±å¹•ç»„ä»¶**
2.  å¯¼èˆªæ ‘çš„ä»»ä½•å…¶ä»–åµŒå¥—å­èŠ‚ç‚¹ï¼Œä¸æ˜¯å±å¹•ç»„ä»¶ï¼Œæˆ‘å°†è°ƒç”¨**å±å¹•ç»„ä»¶çš„åµŒå¥—å­èŠ‚ç‚¹**ã€‚

**è¿˜æœ‰ä¸€ä¸ªä¸»è¦çš„ç¼ºé™·ï¼Œæ ¹æ®ç»„ä»¶çš„ä¸Šä¸‹æ–‡ï¼Œä½ ä»é“å…·ä¸­å¾—åˆ°çš„å¯¼èˆªçŠ¶æ€æ˜¯ä¸ä¸€æ ·çš„**

è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹æˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆæ¥æ­£ç¡®åœ°è·å¾—å½“å‰çš„å±å¹•å…ƒæ•°æ®ã€‚

## â¡ï¸ä»å±å¹•ç»„ä»¶è·å–å½“å‰å±å¹•å…ƒæ•°æ®

> å±å¹•ç»„ä»¶æ˜¯å¯¼èˆªå™¨çš„ç›´æ¥å­ç»„ä»¶ã€‚

![](img/65b1931b5271e7bdcba66da00c69083f.png)

**MainScreen** and **SelectPlayersScreen** are direct children of your SwitchNavigator.

è¿™é‡Œå¾ˆç®€å•:åªè¦ä½ çš„å±å¹•æ˜¯ä½ çš„å¯¼èˆªå™¨çš„ç›´æ¥å­©å­ï¼Œä½ åªéœ€è¦ä¾èµ–æ¥è‡ª`react-navigation-hooks`çš„`props.navigate.state`æˆ–`const navState = useNavigationState()`ã€‚

è¿™å°†ä¸ºä½ çš„å±å¹•æä¾›ä½ éœ€è¦çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚ T4ã€‚

## â¡ï¸ä»å±å¹•ç»„ä»¶çš„åµŒå¥—å­ç»„ä»¶è·å–å½“å‰å±å¹•å…ƒæ•°æ®

å¦‚æœæ‚¨éœ€è¦å€¼çš„ç»„ä»¶ä¸æ˜¯ç›´æ¥å¯¼èˆªå­ç»„ä»¶ï¼Œæ— è®ºæ˜¯ä½¿ç”¨`withNavigation` HOCã€`useNavigation`è¿˜æ˜¯`useNavigationState`é’©å­ï¼Œæ‚¨éƒ½å¯èƒ½å¾—åˆ°æ•´ä¸ªçŠ¶æ€æ ‘ï¼Œå› ä¸º react-navigation å°†æ— æ³•è§£æå½“å‰ä¸Šä¸‹æ–‡ã€‚

**âœ‹ğŸ»âš ï¸è­¦å‘Š:**ä½ å¯ä»¥ä½¿ç”¨é“å…·å°†å±å¹•ç»„ä»¶çš„å€¼ä¼ é€’ç»™å­©å­ï¼Œè¿™æ˜¯ä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨çš„é¦–é€‰æ–¹æ³•ã€‚ä½†æ˜¯å¦‚æœä½ ä¸èƒ½ï¼Œå¹¶ä¸”ä½ åœ¨ç»„ä»¶æ ‘ä¸­åµŒå¥—å¾ˆæ·±ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µåŠ ä¸Šä¸€äº›ä¼ ç»Ÿçš„ä»£ç ï¼Œè¿™å°†å¸®åŠ©ä½ å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚

> getActiveRouteMetadata æ˜¯ä¸€ä¸ªå°çš„å®ç”¨å‡½æ•°ï¼Œå®ƒå°†å¸®åŠ©æ‚¨ä»å®Œæ•´çš„å¯¼èˆªçŠ¶æ€æ ‘å¯¹è±¡ä¸­æ£€ç´¢å½“å‰çš„å±å¹•å…ƒæ•°æ®ã€‚

A small utility function to dig into the navigation state tree

å°±è¿™æ ·è¿‡äº†å¯¼èˆªçŠ¶æ€å°±å¥½äº†ï¼

```
import { useNavigationState } from "react-navigation-hooks";function MyNestedComponent(){
  const navState = useNavigationState();
  const myScreenMetadata = getActiveRouteMetadata(navState); return (
    // â€¦ your component JSX â€¦
  )
}
```

# ğŸš›å¤–å–/TLDRï¼›ğŸ“¦

åœ¨ react-navigation ä¸­:è·å–å½“å‰æ´»åŠ¨è·¯çº¿çš„å…ƒæ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼Œè¿™å°†å–å†³äºæ‚¨å®é™…æ‰€å¤„çš„ç¯å¢ƒ:

*   **å±å¹•ç»„ä»¶:**ä»…ä½¿ç”¨`props.navigation.state`æˆ–æŒ‚é’©`useNavigationState`ã€‚
*   **Screen ç»„ä»¶çš„åµŒå¥—å­ç»„ä»¶:**ä½¿ç”¨`props.navigation.state`æˆ–é’©å­`useNavigationState`å¹¶å°†çŠ¶æ€ä¼ é€’ç»™ä¸Šé¢å®šä¹‰çš„çˆ¬è¡Œå‡½æ•°ã€‚
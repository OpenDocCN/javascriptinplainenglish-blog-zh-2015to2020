<html>
<head>
<title>How Does TypeScript Work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript是如何工作的？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-does-typescript-work-cb253cce81b3?source=collection_archive---------2-----------------------#2020-06-10">https://javascript.plainenglish.io/how-does-typescript-work-cb253cce81b3?source=collection_archive---------2-----------------------#2020-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/663fff9a8d7a5324e02902df76c624ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A1qJW286_tDOKPKT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@marvelous?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marvin Meyer</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ba7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript是JavaScript的自然扩展，在许多项目中取代了JavaScript。</p><p id="cc57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，并不是每个人都知道它实际上是如何工作的。</p><p id="c256" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看TypeScript如何让JavaScript项目变得更好。</p><h1 id="29ba" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">什么是TypeScript？</h1><p id="8b5c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">TypeScript是JavaScript语言的超集，它让我们能够生成安全且可预测的代码。</p><p id="302f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它生成的代码可以在任何JavaScript运行时运行。</p><p id="4d65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它为我们提供了JavaScript所缺乏的类型检查。</p><h1 id="c26f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">我们应该使用TypeScript吗？</h1><p id="0f82" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">TypeScript不是JavaScript项目中所有问题的解决方案。</p><p id="f9f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该知道TypeScript有什么用。</p><p id="2de7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript通过静态类型专注于开发人员的生产力。</p><p id="543a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使得JavaScript类型系统更容易使用。</p><p id="2e94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它为我们提供了访问控制关键字，并增强了类构造函数的语法。</p><p id="e7c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用JavaScript或类型脚本专用语法编写类型脚本代码。</p><p id="4829" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有代码都要经过TypeScript编译器，这是为JavaScript构建的。</p><p id="83bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript和TypeScript的结合为我们提供了两者的灵活组合。</p><p id="90a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以有选择地应用TypeScript特性。</p><h1 id="a4d5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">生产力功能的限制</h1><p id="bc03" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">编写TypeScript主要是编写带有一些额外特性的JavaScript。</p><p id="3cf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript增强了JavaScript的类型系统，并像JavaScript一样提供了灵活的类型。</p><p id="58f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们理解了JavaScript的类型系统，那么我们就理解了为什么TypeScript的类型系统是这样的。</p><p id="12be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript不仅为我们提供了静态类型系统，还提供了更多的动态类型，如联合类型、交集类型、文字类型等等。</p><h1 id="8d01" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript版本特性</h1><p id="fd07" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">旧的JavaScript运行时不支持许多普遍支持的现代特性。</p><p id="b40a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们需要一个类似TypeScript编译器的编译器来将代码转换成我们的目标JavaScript运行时。</p><p id="d74c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编译器在转换成更兼容的JavaScript代码方面做得很好。</p><h1 id="becc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript的数据类型</h1><p id="bbb3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了理解TypeScript，我们必须理解JavaScript的数据类型。</p><p id="668e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不理解JavaScript的类型系统，那么我们使用TypeScript id的效率不会很高。</p><h1 id="01b7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript带来的困惑</h1><p id="8142" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript中数据存储的基础是变量。</p><p id="a949" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">let</code>或者<code class="fe me mf mg mh b">const</code>来声明变量。</p><p id="aaf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">let</code>变量可以重新分配，而<code class="fe me mf mg mh b">const</code>变量不能。</p><h1 id="88f9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript类型</h1><p id="ad84" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript有明确的系统类型。它的规则在整个语言中是一致的。</p><p id="e50b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最基本的JavaScript数据类型是原始值和<code class="fe me mf mg mh b">object</code>复合类型。</p><p id="44e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">原语有<code class="fe me mf mg mh b">number</code>、<code class="fe me mf mg mh b">string</code>、<code class="fe me mf mg mh b">boolean</code>、<code class="fe me mf mg mh b">symbol</code>、<code class="fe me mf mg mh b">null</code>、<code class="fe me mf mg mh b">undefined.</code></p><p id="8cdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">object</code>是复合型。</p><p id="91dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">number</code>是用于表示所有数值的数据类型。JavaScript不区分整数和浮点值。</p><p id="6308" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">string</code>是一种用于表示文本数据的类型。</p><p id="f8e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">boolean</code>可以是<code class="fe me mf mg mh b">true</code>也可以是<code class="fe me mf mg mh b">false</code></p><p id="1a1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">symbol</code>表示唯一的常量值，就像对象中的键。</p><p id="d982" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">null</code>表示不存在的引用。</p><p id="d491" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">undefined</code>由已定义但尚未赋值的变量使用。</p><p id="da27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">object</code>是用于表示复合值的类型，由单个属性和值组成。</p><h1 id="1a61" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用原始数据类型</h1><p id="c7e4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript中，我们不明确写出数据类型。</p><p id="4fc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们给变量赋值时，它会自己计算出变量的类型。</p><p id="f7e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="73fc" class="mq lc iq mh b gy mr ms l mt mu">let foo = "bar";</span></pre><p id="4b38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">声明一个字符串变量。</p><p id="be12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们需要检查类型，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6eb8" class="mq lc iq mh b gy mr ms l mt mu">typeof foo</span></pre><p id="13fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回变量的类型。</p><p id="9b80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">typeof</code>是标识值类型并返回<code class="fe me mf mg mh b">'string'</code>的运算符。</p><p id="37d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">typeof null</code>返回<code class="fe me mf mg mh b">'object'</code>，这不是正确的行为，但是它已经在所有运行时和代码中实现了，所以我们不能使用<code class="fe me mf mg mh b">typeof</code>来检查<code class="fe me mf mg mh b">null</code>。</p><h1 id="e522" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类型强制</h1><p id="3e3d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript在执行某些操作时会对其变量进行数据类型强制。</p><p id="33da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它产生一致的结果，我们只需要知道它是如何工作的。</p><p id="2cbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们使用<code class="fe me mf mg mh b">==</code>操作符来比较对象，那么类型强制将在比较操作完成之前完成。</p><p id="381f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可能有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5c22" class="mq lc iq mh b gy mr ms l mt mu">let applePrice = 1;<br/>let orangePrice = '1';<br/>if (applePrice == orangePrice) {<br/>  //...<br/>}</span></pre><p id="e643" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么在比较之前，两者都将被转换成数字。</p><p id="2891" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3209" class="mq lc iq mh b gy mr ms l mt mu">let totalPrice = applePrice + orangePrice;</span></pre><p id="f1d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么两者在串联之前都会被转换成字符串，这很可能不是我们想要的。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/56e783eb8d38d6a12782ed6213f0648f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mt00kGslud9gVRKM"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@brookecagle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Brooke Cagle</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2a7c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免无意的类型强制</h1><p id="2547" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了使我们的生活更容易，我们应该采取措施避免无意的数据类型强制。</p><p id="ef92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以使用<code class="fe me mf mg mh b">===</code>操作符进行比较，并在进行连接之前先显式转换类型。</p><h1 id="9dcc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="c42f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">TypeScript的工作方式是向JavaScript添加增强的语法，然后在TypeScript编译器完成自己的检查后将其转换为JavaScript。</p><p id="93f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它没有改变JavaScript的类型系统。相反，它增加了更多的检查。</p></div></div>    
</body>
</html>
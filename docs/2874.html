<html>
<head>
<title>How to Build a Token Server for Agora Applications using NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用NodeJS为Agora应用程序构建令牌服务器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-token-server-for-agora-applications-using-nodejs-c08259479c22?source=collection_archive---------4-----------------------#2020-07-31">https://javascript.plainenglish.io/how-to-build-a-token-server-for-agora-applications-using-nodejs-c08259479c22?source=collection_archive---------4-----------------------#2020-07-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/cbc4b3b0e99164bde4deead43b2e931c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-VqtQPQsreSN7Fave3bmOw.png"/></div></div></figure><p id="3796" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">视频聊天应用的安全性是目前的热门话题。随着远程工作和虚拟事件越来越多，对安全性的需求也会增加。</p><p id="0dd0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<a class="ae kt" href="https://www.agora.io/?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=How_to_Build_a_Token_Server_for_Agora_Applications_using_NodeJS" rel="noopener ugc nofollow" target="_blank"> Agora平台</a>中，一层安全以令牌认证的形式出现。对于那些不知道的人来说，令牌是一个使用一组给定输入生成的动态密钥。Agora的平台使用令牌来认证用户。</p><p id="ef71" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Agora为其RTC和RTM SDKs提供令牌安全性。本指南将解释如何使用<a class="ae kt" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>和<a class="ae kt" href="https://expressjs.com" rel="noopener ugc nofollow" target="_blank"> Express </a>构建一个简单的微服务来生成Agora RTC令牌。该示例可以很容易地修改为包括RTM令牌，因为它遵循类似的模式。</p><h1 id="75ba" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">先决条件</h1><ul class=""><li id="f4b7" class="ls lt in jx b jy lu kc lv kg lw kk lx ko ly ks lz ma mb mc bi translated">基本了解JavaScript ES6、<a class="ae kt" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>和<a class="ae kt" href="https://www.npmjs.com" rel="noopener ugc nofollow" target="_blank"> NPM </a> <br/> ( <em class="md">所需的最少知识</em>)</li><li id="9ca7" class="ls lt in jx b jy me kc mf kg mg kk mh ko mi ks lz ma mb mc bi translated">了解express web服务器如何运行<br/> ( <em class="md">所需的最少知识</em>)</li><li id="a956" class="ls lt in jx b jy me kc mf kg mg kk mh ko mi ks lz ma mb mc bi translated"><a class="ae kt" href="https://sso2.agora.io/en/signup?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=how-to-build-a-token-server-for-agora-applications-using-nodejs" rel="noopener ugc nofollow" target="_blank">Agora开发者账户——在此注册</a></li></ul><h1 id="1cbd" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">项目设置</h1><p id="ffbd" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">为了开始我们的项目，我们将创建一个新文件夹，并在该文件夹中打开一个终端窗口。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/bb8e8b5e65f98a8427652925ea65c37c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*owzs9rKzs8vNSDvFRX7Jmg.gif"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">I named my folder AgoraTokenServer</figcaption></figure><p id="e719" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在终端中，我们将运行<code class="fe mv mw mx my b">npm init</code>来设置节点项目。将出现创建项目提示。我使用了默认设置，但是可以随意定制这一部分。</p><p id="32f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在项目已经创建好了，我们可以添加我们的NPM依赖项(<code class="fe mv mw mx my b"><a class="ae kt" href="https://www.npmjs.com/package/express" rel="noopener ugc nofollow" target="_blank">express</a></code>和<code class="fe mv mw mx my b"><a class="ae kt" href="https://www.npmjs.com/package/agora-access-token" rel="noopener ugc nofollow" target="_blank">agora-access-token</a></code>)，使用:</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="46e1" class="nd kv in my b gy ne nf l ng nh">npm install express<br/>npm install agora-access-token</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/8854f6fd63afdf010f4013d71c3036d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NY3AEVbjarU5oUuItL9OGg.gif"/></div></div></figure><h1 id="b656" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">构建Express服务器</h1><p id="f999" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">现在项目已经设置好了，在您喜欢的代码编辑器中打开文件夹。查看<code class="fe mv mw mx my b">package.json</code>，您会注意到入口文件是<code class="fe mv mw mx my b">index.js</code>，但是这个文件在我们的项目中不存在，所以我们必须创建一个新文件，并将其命名为<code class="fe mv mw mx my b">index.js</code>。</p><p id="393b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe mv mw mx my b">index.js</code>中，我们将从要求我们的模块开始。从<code class="fe mv mw mx my b">express</code>开始，我们将需要<code class="fe mv mw mx my b">express</code>对象，从<code class="fe mv mw mx my b">agora-access-token</code>开始，我们将利用ES6的<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">析构赋值</a>来提取对<code class="fe mv mw mx my b">RtcTokenBuilder</code>和<code class="fe mv mw mx my b">RtcRole</code>对象的引用。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="daa9" class="nd kv in my b gy ne nf l ng nh">const express = require('express');<br/>const {RtcTokenBuilder, RtcRole} = require('agora-access-token');</span></pre><p id="59f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们为用于监听请求的<code class="fe mv mw mx my b"><strong class="jx io">PORT</strong></code>号定义常数，我喜欢用8080。我们还将为我们的Agora <code class="fe mv mw mx my b"><strong class="jx io">AppID</strong></code>和<code class="fe mv mw mx my b"><strong class="jx io">AppCertificate</strong></code>定义常量，我喜欢使用环境变量，所以我们不会在代码中暴露这些值，但是您也可以将这些值设置为包含您各自的Agora关键字的<em class="md">字符串</em>。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="cbd3" class="nd kv in my b gy ne nf l ng nh">const PORT = 8080;</span><span id="38ae" class="nd kv in my b gy ni nf l ng nh">const APP_ID = process.env.APP_ID;<br/>const APP_CERTIFICATE = process.env.APP_CERTIFICATE;</span></pre><p id="54a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们将定义我们的<code class="fe mv mw mx my b">app</code>常量，它将实例化我们的<code class="fe mv mw mx my b"><strong class="jx io">Express</strong></code>对象，并允许我们设置我们的服务器。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="778d" class="nd kv in my b gy ne nf l ng nh">const app = express();</span></pre><p id="8f8f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们为Express服务器设置<code class="fe mv mw mx my b"><em class="md">GET</em></code>端点之前，我们需要定义当端点被访问时调用的函数。第一个函数(<code class="fe mv mw mx my b"><strong class="jx io">nocache</strong></code>)将应用响应头，强制浏览器永远不缓存响应，这样我们就能确保总是获得新的令牌。你会注意到我们在最后调用了<code class="fe mv mw mx my b">next()</code>方法，因为这个函数是系列中的第一个中间件函数，所以我们需要调用<code class="fe mv mw mx my b">next()</code>让Express知道继续系列中的下一个中间件函数。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="5e5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第二个函数(<code class="fe mv mw mx my b"><strong class="jx io">generateAccessToken</strong></code>)将处理请求并返回<em class="md"> JSON </em>响应。我们现在将定义函数，并在完成设置<code class="fe mv mw mx my b">Express</code>服务器后添加主体。这是系列中的最后一个函数，所以我们不需要<code class="fe mv mw mx my b"><strong class="jx io">next</strong></code>参数/函数。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="fcfa" class="nd kv in my b gy ne nf l ng nh">const generateAccessToken = (req, resp) =&gt; { };</span></pre><p id="ebb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们定义一个<code class="fe mv mw mx my b">GET</code>端点，传入<code class="fe mv mw mx my b"><strong class="jx io">nochache</strong></code>和<code class="fe mv mw mx my b"><strong class="jx io">generateAccessToken</strong></code>函数。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="94d5" class="nd kv in my b gy ne nf l ng nh">app.get('/access_token', nocache, generateAccessToken);</span></pre><p id="948f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为创建Express服务器的最后一步，我们将实现<code class="fe mv mw mx my b">.listen()</code>方法，并在服务器准备好并监听给定端口后传入<code class="fe mv mw mx my b"><strong class="jx io">PORT</strong></code>和一个回调。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="82ea" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">生成广场令牌</h1><p id="1dbe" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">现在我们已经有了我们的Express服务器设置，我们准备添加功能到<code class="fe mv mw mx my b"><strong class="jx io">generateAccessToken</strong></code>功能中。我们将从设置响应头开始，以确保我们不会遇到任何CORS问题。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="4984" class="nd kv in my b gy ne nf l ng nh">resp.header('Access-Control-Allow-Origin', '*');</span></pre><h2 id="357e" class="nd kv in bd kw nl nm dn la nn no dp le kg np nq li kk nr ns lm ko nt nu lq nv bi translated">获取查询参数</h2><p id="fff5" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">接下来，我们将检查<code class="fe mv mw mx my b">channelName</code>查询参数。这是一个必需的参数，因此如果channelName未定义，我们需要返回一个带有<em class="md"> 500 </em>响应代码的错误和一个带有错误的<em class="md"> JSON </em>对象。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="9bc0" class="nd kv in my b gy ne nf l ng nh">const channelName = req.query.channelName;</span><span id="36b3" class="nd kv in my b gy ni nf l ng nh">if (!channelName) {<br/>  return resp.status(500).json({ 'error': 'channel is required' });<br/>}</span></pre><p id="93e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来的几个参数(<code class="fe mv mw mx my b"><strong class="jx io">uid</strong></code>、<code class="fe mv mw mx my b"><strong class="jx io">role</strong></code>、<code class="fe mv mw mx my b"><strong class="jx io">expirationTime</strong></code>)不是必需的，所以我们将根据需要分配默认值。</p><p id="6a83" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<code class="fe mv mw mx my b"><strong class="jx io">uid</strong></code>,我们将默认值设置为<code class="fe mv mw mx my b">0</code>,这允许我们生成一个“<em class="md">通配符</em>”令牌，该令牌可用于将给定的<em class="md">通道</em>与任何<code class="fe mv mw mx my b"><strong class="jx io">uid</strong></code>连接起来。这仅适用于安全性较低的情况(<em class="md">或在开发过程中</em>)，在这种情况下，所有用户可以共享一个令牌。</p><p id="4a9a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">低安全性情况的一个例子是现场直播，任何人都可以作为观众加入并观看。</p><p id="39fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<code class="fe mv mw mx my b"><strong class="jx io">role</strong></code>，我们将默认每个用户为<code class="fe mv mw mx my b">SUBSCRIBER</code>，并且只检查请求是否传递了值<code class="fe mv mw mx my b">publisher</code>，否则任何其他值都可以忽略。</p><blockquote class="nw nx ny"><p id="5366" class="jv jw md jx b jy jz ka kb kc kd ke kf nz kh ki kj oa kl km kn ob kp kq kr ks ig bi translated"><strong class="jx io">请注意:</strong>Agora平台默认只强制特权。这是加入频道特权，要启用其他特权，您需要通过<a class="ae kt" href="https://agora-ticket.agora.io" rel="noopener ugc nofollow" target="_blank"> Agora支持</a>提出请求。</p></blockquote><p id="b7b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<code class="fe mv mw mx my b"><strong class="jx io">expirationTime</strong></code> <strong class="jx io"> </strong>，我们将默认为<code class="fe mv mw mx my b">3600</code>秒，这给用户一个小时的时间在权限到期前加入频道。关于到期时间需要注意的一点是，令牌的特权生存期需要是一个整数，表示自1970年1月1日以来的时间。我们将使用当前时间，并添加我们的到期时间。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="dfcf" class="nd kv in bd kw nl nm dn la nn no dp le kg np nq li kk nr ns lm ko nt nu lq nv bi translated">构建令牌</h2><p id="345b" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">现在我们已经拥有了令牌的所有元素，我们准备使用<code class="fe mv mw mx my b">RtcTokenBuilder</code>对象的<code class="fe mv mw mx my b">buildTokenWithUid</code>来生成令牌。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="99c1" class="nd kv in my b gy ne nf l ng nh">const token = RtcTokenBuilder.buildTokenWithUid(APP_ID, APP_CERTIFICATE, channelName, uid, role, privilegeExpireTime);</span></pre><h2 id="168b" class="nd kv in bd kw nl nm dn la nn no dp le kg np nq li kk nr ns lm ko nt nu lq nv bi translated">返回响应</h2><p id="012d" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">生成令牌的最后一步是返回包含令牌的JSON响应。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="476e" class="nd kv in my b gy ne nf l ng nh">return resp.json({ 'token': token });</span></pre><h1 id="e306" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">测试令牌服务器</h1><p id="5580" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">让我们回到我们的<code class="fe mv mw mx my b">package.json</code>，在“<em class="md">脚本</em>对象中添加一个“<em class="md">开始</em>命令。start命令将执行“<em class="md"> node index.js </em>”命令，这样我们就可以运行我们的服务器实例了。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="bcf9" class="nd kv in my b gy ne nf l ng nh">"scripts": {<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>  "start": "node index.js"<br/>},</span></pre><h2 id="4204" class="nd kv in bd kw nl nm dn la nn no dp le kg np nq li kk nr ns lm ko nt nu lq nv bi translated">启动服务器</h2><p id="ea40" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">让我们回到命令提示符窗口，使用我们的新命令:</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="f9ed" class="nd kv in my b gy ne nf l ng nh">npm start</span></pre><p id="e514" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦服务器实例开始监听，我们将在终端窗口中看到“监听端口:8080”。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oc"><img src="../Images/18c184f27a5f89a78038005fe9fef8f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghTKgxHbNtICQDKBQO3Azw.png"/></div></div></figure><h2 id="3d42" class="nd kv in bd kw nl nm dn la nn no dp le kg np nq li kk nr ns lm ko nt nu lq nv bi translated">测试端点</h2><p id="70b8" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">现在我们的服务器实例正在运行，让我们打开web浏览器并进行测试。对于这些测试，我们将尝试一些省略各种查询参数的变化。</p><p id="ae55" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将从省略所有查询参数开始:</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="cc2c" class="nd kv in my b gy ne nf l ng nh">localhost:8080/access_token</span></pre><p id="5aad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将显示:</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="c315" class="nd kv in my b gy ne nf l ng nh">{"error":"channel is required"}</span></pre><p id="0f78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们将通过“测试”作为通道名称:</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="d2d8" class="nd kv in my b gy ne nf l ng nh">localhost:8080/access_token?channelName=test</span></pre><p id="96f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将输出一个任何用户都可以使用的令牌。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="7e0f" class="nd kv in my b gy ne nf l ng nh">{"token":"0062ec0d84c41c4442d88ba6f5a2beb828bIAD9qg4N4hd04MvaY6A72m4BjYmO/7+xnRMinaI0ncLzkAx+f9gAAAAAEACS0zcn9gASXwEAAQCGvRBf"}</span></pre><p id="6957" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以继续测试其余的查询参数，我们将得到与上面类似的响应。</p><pre class="mn mo mp mq gt mz my na nb aw nc bi"><span id="fc63" class="nd kv in my b gy ne nf l ng nh">localhost:8080/access_token?channelName=test&amp;role=subscriber</span><span id="d159" class="nd kv in my b gy ni nf l ng nh">localhost:8080/access_token?channelName=test&amp;role=subscriber&amp;uid=1234</span><span id="02e4" class="nd kv in my b gy ni nf l ng nh">localhost:8080/access_token?channelName=test&amp;role=subscriber&amp;uid=1234&amp;expireTime=6400</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/477cc1011f7dd3c75455d5182c6de0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zG0YAv4W5ZkoS05Yl2RnWg.gif"/></div></div></figure><h1 id="2a5b" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">搞定了。</h1><p id="e489" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">就这样我们结束了！如果你不想编码或者想一起看成品，我已经把所有代码上传到GitHub了。</p><div class="od oe gp gr of og"><a href="https://github.com/digitallysavvy/Agora-Node-TokenServer" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd io gy z fp ol fr fs om fu fw im bi translated">digitallysavvy/Agora-Node-token server</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">一个用于Agora应用程序的简单令牌服务器，使用NodeJS和Express以及Agora访问令牌模块。GitHub是家…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">github.com</p></div></div><div class="op l"><div class="oq l or os ot op ou jt og"/></div></div></a></div><p id="993b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您花时间阅读我的教程，如果您有任何问题，请留言告诉我。如果您看到任何改进的空间，请随意叉回购并提出拉动请求！</p><h1 id="f801" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">其他资源</h1><p id="9176" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg mj ki kj kk mk km kn ko ml kq kr ks ig bi translated">有关Agora.io应用程序令牌的更多信息，请查看<a class="ae kt" href="https://docs.agora.io/en/Agora%20Platform/token?platform=All%20Platforms" rel="noopener ugc nofollow" target="_blank">设置认证</a>指南和<a class="ae kt" href="https://docs.agora.io/en/Video/token_server_nodejs?platform=Node.js" rel="noopener ugc nofollow" target="_blank"> Agora高级指南:如何构建令牌</a> ( <em class="md"> NodeJS </em>)。</p><p id="ef67" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我也邀请你<a class="ae kt" href="http://bit.ly/2IWexJQ" rel="noopener ugc nofollow" target="_blank">加入Agoira.io开发者Slack社区</a>。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Building a Pokemon web app with React Hooks and the Context API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React钩子和上下文API构建口袋妖怪web应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-pokemon-web-app-with-react-hooks-and-the-context-api-995e1d3686de?source=collection_archive---------5-----------------------#2020-04-23">https://javascript.plainenglish.io/building-a-pokemon-web-app-with-react-hooks-and-the-context-api-995e1d3686de?source=collection_archive---------5-----------------------#2020-04-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cb12a7a084c17df90024dbbab5fda91d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dj3JzrdHVLiSaxymlH2bhg.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Ash Art by <a class="ae kc" href="https://www.instagram.com/kazuh.illust" rel="noopener ugc nofollow" target="_blank">kazuh.yasiro</a></figcaption></figure><p id="8bab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本帖最初发表于<a class="ae kc" href="https://leandrotk.github.io/tk/2020/04/react-hooks-context-api-and-pokemons/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="lb"> TK的博客</em> </strong> </a>。</p><p id="499e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">经过7年使用Ruby、Python和vanilla JavaScript的全栈开发，我现在主要使用JavaScript、Typescript、React和Redux。JavaScript社区非常棒..而且非常快。很多东西都是“一夜之间”创造出来的，只是象征性的，但有时也是真实的。而且真的很难跟上。</p><blockquote class="lc ld le"><p id="04af" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">心理提示:我总觉得我在JavaScript聚会上迟到了。我想去那里。尽管我不太喜欢派对。</p></blockquote><p id="70d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用React和Redux年，我觉得我需要学习新的东西，比如钩子和上下文API来管理状态。在阅读了一些关于它的文章后，我想尝试这些概念，所以我创建了一个简单的项目作为实验室来试验那些东西。</p><p id="f88d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我从小就对口袋妖怪充满热情。玩Game Boy，征服所有联赛，这是一段有趣的时光。现在，作为一名开发者，我想玩玩<a class="ae kc" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank">口袋妖怪API </a>。</p><p id="b2a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以基本上我想建立一个简单的网页，我可以在这个页面的各个部分之间共享数据。我想:如果我建立一个包含三个框的页面会怎么样:</p><ul class=""><li id="2e07" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">一个盒子，里面有所有现存口袋妖怪的清单</li><li id="13eb" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">一个盒子，里面有所有捕获的口袋妖怪的清单</li><li id="3401" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">一个可以向列表中添加新口袋妖怪的输入框</li></ul><p id="d530" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我可以为每个盒子构建行为或动作:</p><ul class=""><li id="3c31" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">对于第一个盒子里的每个口袋妖怪，我可以捕捉它们并发送到第二个盒子</li><li id="96a8" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">对于第二个盒子里的每个口袋妖怪，我可以释放它们并发送到第一个盒子</li><li id="af64" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">作为一个游戏神，我能够通过填充输入来创建口袋妖怪，并将它们发送到第一个盒子</li></ul><p id="eb5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，我很清楚我们需要在这里实现的所有特性。列表和动作。我们开始吧！</p><h1 id="f56b" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">列出口袋妖怪</h1><p id="b4c9" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">我想首先建立的基本功能是列出口袋妖怪。所以对于一个对象数组，我想列出并显示每个对象的<code class="fe mz na nb nc b">name</code>属性。就这样。</p><p id="78a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将从第一个盒子开始:现存的口袋妖怪。起初，我想，我不需要口袋妖怪API，我们只是模拟一下列表，看看它是否有效。使用<code class="fe mz na nb nc b">useState</code>，我可以声明我的组件状态并使用它。</p><p id="9067" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用模拟口袋妖怪的默认值来定义它，只是为了测试它。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="b2f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我们有三个口袋妖怪对象的列表。<code class="fe mz na nb nc b">useState</code>钩子提供了两个项目:当前状态和一个让您更新这个已创建状态的函数。</p><p id="ef86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在有了口袋妖怪的状态，我们可以对它进行映射，并呈现每个口袋妖怪的名称。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="c639" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它只是一个在段落标签中返回每个口袋妖怪名字的地图。</p><p id="a4c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是实现的整个组件:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e535" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一点小小的改动:</p><ul class=""><li id="bf4b" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">在口袋妖怪的<code class="fe mz na nb nc b">id</code>和<code class="fe mz na nb nc b">name</code>的组合中增加了<code class="fe mz na nb nc b">key</code></li><li id="50c4" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">并为<code class="fe mz na nb nc b">id</code>属性渲染一段(我只是测试一下。但我们稍后会删除它)</li></ul><p id="e0c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了！现在我们有了第一份名单。</p><p id="3a69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想做同样的实现，但现在是为了捕捉口袋妖怪。但是对于捕捉到的口袋妖怪，我想做成空单。因为“游戏”开始的时候，我其实并没有什么被捕获的口袋妖怪，对吧？对！</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="278b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样，真的很简单！</p><p id="eded" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个组件看起来与另一个组件相似:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="07b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我们映射，但是因为数组是空的，所以它不呈现任何东西。</p><p id="b403" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我有了两个主要组件，我可以将它们放在<code class="fe mz na nb nc b">App</code>组件中:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="9595" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">捕获和释放</h1><p id="937b" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">这是我们应用程序的第二部分。我们将捕捉和释放口袋妖怪。所以让我们想想预期的行为。</p><p id="201e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于可用口袋妖怪列表中的每个口袋妖怪，我想启用一个动作来捕捉它们。捕捉动作会将它们从列表中删除，并将其添加到已捕捉的口袋妖怪列表中。</p><p id="00af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">释放动作将具有类似的行为。但是不是从可用列表移动到捕获列表，而是相反。我们会将它们从捕获列表移动到可用列表。</p><p id="e988" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，两个盒子需要共享数据，以便能够将口袋妖怪添加到另一个列表中。我们如何做到这一点，因为它们是应用程序中的不同组件？我们来谈谈React上下文API。</p><p id="30e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上下文API被设计为为一个已定义的React组件树创建全局数据。由于数据是全局的，我们可以在这个定义的树中的组件之间共享它。所以让我们用它在两个盒子之间分享我们简单的口袋妖怪数据。</p><blockquote class="lc ld le"><p id="03af" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><em class="iq">心理提示:“上下文主要用于不同嵌套层次的许多组件需要访问某些数据的时候。”—反应文件</em></p></blockquote><p id="489f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用API，我们简单地创建一个新的上下文:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="bf52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，有了<code class="fe mz na nb nc b">PokemonContext</code>，我们可以使用它的提供者。它将作为组件树的组件包装器。它向这些组件提供全局数据，并使它们能够订阅与该上下文相关的任何更改。看起来是这样的:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="dea8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">value</code>属性只是上下文提供给包装组件的一个值。我们应该向可用列表和捕获列表提供什么？</p><ul class=""><li id="4cdf" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><code class="fe mz na nb nc b">pokemons</code>:在可用列表中列出</li><li id="35fb" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><code class="fe mz na nb nc b">capturedPokemons</code>:在捕获列表中列出</li><li id="a19c" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><code class="fe mz na nb nc b">setPokemons</code>:能够更新可用列表</li><li id="d1ab" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><code class="fe mz na nb nc b">setCapturedPokemons</code>:能够更新捕获列表</li></ul><p id="f2d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我在前面的<code class="fe mz na nb nc b">useState</code>部分提到的，这个钩子总是提供一对:状态和更新这个状态的函数。这个函数将处理和更新上下文状态。换言之，他们是<code class="fe mz na nb nc b">setPokemons</code>和<code class="fe mz na nb nc b">setCapturedPokemons</code>。怎么会？</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="75dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了<code class="fe mz na nb nc b">setPokemons</code>。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="c9ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而现在我们也有了<code class="fe mz na nb nc b">setCapturedPokemons</code>。</p><p id="07ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了所有这些值，我们现在可以将它们传递给提供者的<code class="fe mz na nb nc b">value</code> prop。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="93c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我创建了一个<code class="fe mz na nb nc b">PokemonProvider</code>来包装所有这些数据和API，以创建上下文并返回带有定义值的上下文提供者。</p><p id="df07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是我们如何向组件提供这些数据和API呢？我们需要做两件主要的事情:</p><ul class=""><li id="7d76" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated">将组件包装到这个上下文提供者中</li><li id="b509" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated">在每个组件中使用上下文</li></ul><p id="e106" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们先把它们包起来:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="5f26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过使用<code class="fe mz na nb nc b">useContext</code>并传递创建的<code class="fe mz na nb nc b">PokemonContext</code>来使用上下文。像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="9f81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于可用的口袋妖怪，我们想要捕获它们，所以有<code class="fe mz na nb nc b">setCapturedPokemons</code>函数API来更新捕获的口袋妖怪会很有用。当口袋妖怪被捕获时，我们需要将它从可用列表中删除。<code class="fe mz na nb nc b">setPokemons</code>这里也需要。为了更新每个列表，我们需要最新的数据。所以基本上我们需要来自上下文提供者的一切。</p><p id="a41f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要构建一个带有捕捉口袋妖怪动作的按钮:</p><ul class=""><li id="5ce9" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><code class="fe mz na nb nc b">&lt;button&gt;</code>标签带<code class="fe mz na nb nc b">onClick</code>调用<code class="fe mz na nb nc b">capture</code>函数并传递口袋妖怪</li></ul><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><ul class=""><li id="bcb1" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><code class="fe mz na nb nc b">capture</code>功能将更新<code class="fe mz na nb nc b">pokemons</code>和<code class="fe mz na nb nc b">capturedPokemons</code>列表</li></ul><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="9499" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要更新<code class="fe mz na nb nc b">capturedPokemons</code>，我们可以用当前的<code class="fe mz na nb nc b">capturedPokemons</code>和要捕捉的口袋妖怪调用<code class="fe mz na nb nc b">setCapturedPokemons</code>函数。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="f55d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而要更新<code class="fe mz na nb nc b">pokemons</code>列表，只需过滤将要捕捉的口袋妖怪即可。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">removePokemonFromList</code>只是一个简单的功能，通过删除捕获的口袋妖怪来过滤口袋妖怪。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8163" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组件现在看起来怎么样？</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="4010" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将看起来非常类似于捕捉口袋妖怪组件。代替<code class="fe mz na nb nc b">capture</code>，它将是一个<code class="fe mz na nb nc b">release</code>功能:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="f304" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">降低复杂性</h1><p id="6526" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">现在我们使用<code class="fe mz na nb nc b">useState</code>、上下文API、上下文提供者和<code class="fe mz na nb nc b">useContext</code>。更重要的是，我们可以在口袋妖怪盒子之间共享数据。</p><p id="cc24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种管理状态的方法是使用<code class="fe mz na nb nc b">useReducer</code>作为<code class="fe mz na nb nc b">useState</code>的替代。</p><p id="5e17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">减速器的生命周期是这样工作的:<code class="fe mz na nb nc b">useReducer</code>提供了一个<code class="fe mz na nb nc b">dispatch</code>功能。通过这个函数，我们可以在组件内部分派一个<code class="fe mz na nb nc b">action</code>。<code class="fe mz na nb nc b">reducer</code>接收动作和状态。它理解动作的类型，处理数据，并返回新的状态。现在，新状态可以在组件中使用了。</p><p id="7f73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一个练习，为了更好地理解这个钩子，我试着用它来代替<code class="fe mz na nb nc b">useState</code>。</p><p id="4f91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">useState</code>在<code class="fe mz na nb nc b">PokemonProvider</code>里面。我们可以在这个数据结构中重新定义可用的和捕获的口袋妖怪的初始状态:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="abff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并将该值传递给<code class="fe mz na nb nc b">useReducer</code>:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="af04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">useReducer</code>接收两个参数:减速器和初始状态。让我们现在建造<code class="fe mz na nb nc b">pokemonReducer</code>。</p><p id="09dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">缩减器接收当前状态和被调度的动作。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8568" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我们得到动作类型并返回一个新的状态。动作是一个对象。看起来是这样的:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="590c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但也可能更大:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="9644" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是这样的，我们传递一个口袋妖怪给动作对象。让我们暂停一分钟，想一想我们想在减速器内部做什么。</p><p id="676a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我们通常更新数据和处理动作。动作被分派。所以行动就是行为。我们的应用程序的行为是:捕获和释放！这些是我们在这里需要处理的行动。</p><p id="a941" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们的减速器的样子:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="ac98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们的动作有一个类型<code class="fe mz na nb nc b">CAPTURE</code>，我们用一种方式处理它。如果我们的动作类型是<code class="fe mz na nb nc b">RELEASE</code>，我们用另一种方式处理它。如果动作类型与这些类型都不匹配，就返回当前状态。</p><p id="7241" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们捕获口袋妖怪时，我们需要更新两个列表:从可用列表中删除口袋妖怪，并将其添加到捕获列表中。这个状态就是我们需要从reducer返回的。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3136" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">capturePokemon</code>函数只返回更新后的列表。<code class="fe mz na nb nc b">getPokemonsList</code>从可用列表中删除捕获的口袋妖怪。</p><p id="759e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在减速器中使用了这个新功能:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="81e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在的<code class="fe mz na nb nc b">release</code>功能！</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="b4ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">getCapturedPokemons</code>从捕获列表中移除释放的口袋妖怪。<code class="fe mz na nb nc b">releasePokemon</code>函数返回更新后的列表。</p><p id="078c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的减速器现在看起来像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="ba16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只有一个小的重构:动作类型！这些是字符串，我们可以将它们提取到一个常量中，并提供给调度程序。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="df65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">减速器:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7f42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个reducer文件如下所示:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="9572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于缩减器现在已经实现，我们可以将它导入到我们的提供者中，并在<code class="fe mz na nb nc b">useReducer</code>钩子上使用它。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d900" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在<code class="fe mz na nb nc b">PokemonProvider</code>中时，我们希望为消费组件提供一些值:捕获和释放动作。</p><p id="540e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些函数只需要调度正确的动作类型，把口袋妖怪传给减速器就可以了。</p><ul class=""><li id="c6fc" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><code class="fe mz na nb nc b">capture</code>函数:它接收pokemon并返回一个新函数，该函数调度类型为<code class="fe mz na nb nc b">CAPTURE</code>的动作和被捕获的pokemon。</li></ul><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><ul class=""><li id="7e8e" class="li lj iq kf b kg kh kk kl ko lk ks ll kw lm la ln lo lp lq bi translated"><code class="fe mz na nb nc b">release</code>函数:它接收pokemon并返回一个新函数，该函数调度一个类型为<code class="fe mz na nb nc b">RELEASE</code>的动作并释放pokemon。</li></ul><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="62a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，有了实现的状态和动作，我们可以向消费组件提供这些值。只需更新提供商价值主张。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="42a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了！现在回到组件。让我们用这些新动作。所有的捕获和释放逻辑都封装在我们的provider和reducer中。我们的组件现在很干净了。<code class="fe mz na nb nc b">useContext</code>将看起来像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8b2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个组件:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="af6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于捕获的口袋妖怪组件，它看起来会非常相似。<code class="fe mz na nb nc b">useContext</code>:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="0e81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个组件:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="a6a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有逻辑。只是UI。非常干净。</p><h1 id="bae5" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">口袋妖怪之神:创造者</h1><p id="3814" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">现在我们有了两个列表之间的通信，我想建立第三个盒子。这将是我们如何创造新的口袋妖怪。但它只是一个简单的输入和提交按钮。当我们在输入中添加一个口袋妖怪名称并按下按钮时，它会调度一个动作将这个口袋妖怪添加到可用列表中。</p><p id="ad05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们需要访问可用列表来更新它，所以我们需要共享状态。所以我们的组件将被我们的<code class="fe mz na nb nc b">PokemonProvider</code>和其他组件包装在一起。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1a5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们构建<code class="fe mz na nb nc b">PokemonForm</code>组件。表单非常简单:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="84ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个表单、一个输入和一个按钮。总的来说，我们还有一个函数来处理表单提交，另一个函数来处理关于更改的输入。</p><p id="5e4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当用户输入或删除一个字符时，就会调用<code class="fe mz na nb nc b">handleNameOnChange</code>。我想建立一个地方州，一个口袋妖怪名字的代表。有了这个状态，我们可以在提交表单时使用它来调度。</p><p id="a3d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们想尝试钩子，所以我们将使用<code class="fe mz na nb nc b">useState</code>来处理这个本地状态。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7ed4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每次用户与输入交互时，我们使用<code class="fe mz na nb nc b">setPokemonName</code>来更新<code class="fe mz na nb nc b">pokemonName</code>。</p><p id="b9a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe mz na nb nc b">handleFormSubmit</code>是调度新口袋妖怪以将其添加到可用列表的功能。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="0b3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">addPokemon</code>是我们稍后将构建的API。它接收口袋妖怪:一个id和名字。名字就是我们定义的本地状态:<code class="fe mz na nb nc b">pokemonName</code>。</p><p id="395c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">generateID</code>只是我构建的一个简单函数，用来生成一个随机数。看起来是这样的:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e1d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">addPokemon</code>将由我们构建的上下文api提供。这样，这个功能可以接收新的口袋妖怪，并添加到可用列表中。看起来是这样的:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="78b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会调度这个动作类型<code class="fe mz na nb nc b">ADD_POKEMON</code>，还会传口袋妖怪。</p><p id="f8c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的reducer中，我们为<code class="fe mz na nb nc b">ADD_POKEMON</code>添加了案例，并处理状态以将新的pokemon添加到状态中。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1a6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe mz na nb nc b">addPokemon</code>功能将是:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="aa38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种方法是破坏状态，只改变pokemons属性。像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="65e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回到我们的组件，我们只需要让<code class="fe mz na nb nc b">useContext</code>提供基于<code class="fe mz na nb nc b">PokemonContext</code>的<code class="fe mz na nb nc b">addPokemon</code>调度API:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="bafd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个组件看起来像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="d150" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了可用的口袋妖怪列表，捕获的口袋妖怪列表，以及创建新口袋妖怪的第三个盒子。</p><h1 id="eab8" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">口袋妖怪效果</h1><p id="3fbe" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">现在我们的应用程序几乎完成了，我们可以用PokeAPI中的口袋妖怪列表来替换被嘲笑的口袋妖怪。</p><p id="19ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在函数组件内部，我们不能真正地产生像登录或订阅这样的副作用。这就是<code class="fe mz na nb nc b">useEffect</code>挂钩存在的原因。有了这个钩子，我们可以获取口袋妖怪(一个副作用)，并添加到列表中。</p><p id="a7eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取PokeAPI将如下所示:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="578a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">results</code>属性是获取的口袋妖怪列表。有了这些数据，我们将能够添加到口袋妖怪列表。</p><p id="253d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们获取<code class="fe mz na nb nc b">useEffect</code>中的请求代码:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="90c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了能够调用<code class="fe mz na nb nc b">async-await</code>，我们需要创建一个函数并在以后调用它。空数组是一个参数，使<code class="fe mz na nb nc b">useEffect</code>知道它将查找以重新运行的依赖关系。</p><p id="2b9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认行为是运行每个已完成渲染的效果。如果我们在这个列表中添加一个依赖项，那么<code class="fe mz na nb nc b">useEffect</code>只会在依赖项改变时重新运行，而不是在所有完成的渲染中运行。</p><p id="336a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们获取了口袋妖怪，我们需要更新列表。这是一种行动，一种新的行为。我们需要再次使用dispatch，在reducer中实现一个新的类型，并在上下文提供者中更新状态。</p><p id="49ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mz na nb nc b">PokemonContext</code>中，我们创建了<code class="fe mz na nb nc b">addPokemons</code>函数，为使用它的消费组件提供一个API。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8837" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它接收口袋妖怪，并派遣一个新的行动:<code class="fe mz na nb nc b">ADD_POKEMONS</code>。</p><p id="ee55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在reducer中，我们添加这个新类型，expect pokemons，并调用一个函数将pokemons添加到可用列表状态。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="39f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">addPokemons</code>功能只是将口袋妖怪添加到列表中:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="6d84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过进行状态析构和对象属性值简写来对此进行重构:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="4b42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们现在向消费组件提供了这个函数API，所以我们可以使用<code class="fe mz na nb nc b">useContext</code>来获取它。</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e7d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整个组件看起来像这样:</p><figure class="nd ne nf ng gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="b2ec" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">包扎</h1><p id="6954" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">这是我尝试分享我的学习和经验，同时尝试在一个迷你副业挂钩。我们学习了如何用<code class="fe mz na nb nc b">useState</code>处理局部状态，用<code class="fe mz na nb nc b">Context API</code>构建全局状态，如何用<code class="fe mz na nb nc b">useReducer</code>重写和替换<code class="fe mz na nb nc b">useState</code>，以及在<code class="fe mz na nb nc b">useEffect</code>中产生副作用。</p><blockquote class="lc ld le"><p id="9cfd" class="kd ke lb kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><em class="iq">免责声明:这只是一个实验项目。只是为了学习。我没有关于Hooks良好实践的答案，也不知道如何让它在大项目中可扩展。</em></p></blockquote><p id="cd0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这是一本好书！继续学习，继续编码！</p><h2 id="4610" class="nj lx iq bd ly nk nl dn mc nm nn dp mg ko no np mk ks nq nr mo kw ns nt ms nu bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="c863" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">我们已经推出了三种新的出版物！为我们的新出版物献上一点爱心吧，请跟随他们:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p><p id="59d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至:<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p><h1 id="8a29" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">资源</h1><ul class=""><li id="b3db" class="li lj iq kf b kg mu kk mv ko nv ks nw kw nx la ln lo lp lq bi translated"><a class="ae kc" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">反应文档:上下文</a></li><li id="b947" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://reactjs.org/docs/hooks-reference.html" rel="noopener ugc nofollow" target="_blank">反应文件:挂钩</a></li><li id="ea78" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://github.com/leandrotk/pokehooks-labs" rel="noopener ugc nofollow" target="_blank">口袋妖怪挂钩侧-项目:源代码</a></li><li id="5bec" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://BeginnerJavaScript.com/friend/LEANDRO" rel="noopener ugc nofollow" target="_blank">初级JavaScript课程</a></li><li id="1e92" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://ReactForBeginners.com/friend/LEANDRO" rel="noopener ugc nofollow" target="_blank">针对初学者的React课程</a></li><li id="63ad" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://AdvancedReact.com/friend/LEANDRO" rel="noopener ugc nofollow" target="_blank">高级反应课程</a></li><li id="70ca" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://ES6.io/friend/LEANDRO" rel="noopener ugc nofollow" target="_blank"> ES6课程</a></li><li id="3fc4" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://mbsy.co/lFtbC" rel="noopener ugc nofollow" target="_blank">为期一个月的JavaScript课程</a></li><li id="8972" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV" rel="noopener ugc nofollow" target="_blank">学习之路有什么反应</a></li><li id="4452" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV" rel="noopener ugc nofollow" target="_blank">学习React前的JavaScript基础知识</a></li><li id="9889" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV" rel="noopener ugc nofollow" target="_blank">重新推出React: V16及更高版本</a></li><li id="10de" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV" rel="noopener ugc nofollow" target="_blank">带挂钩的高级反应模式</a></li><li id="ff35" class="li lj iq kf b kg lr kk ls ko lt ks lu kw lv la ln lo lp lq bi translated"><a class="ae kc" href="https://www.educative.io/courses/practical-redux" rel="noopener ugc nofollow" target="_blank">实用Redux </a></li></ul></div></div>    
</body>
</html>
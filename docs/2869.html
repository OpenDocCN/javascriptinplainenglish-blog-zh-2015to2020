<html>
<head>
<title>jQuery Tips — Arrays, Ajax, Textbox Changes, and Arrow Keys</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">jQuery技巧——数组、Ajax、文本框更改和箭头键</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/jquery-tips-arrays-ajax-textbox-changes-and-arrow-keys-670e88adbed?source=collection_archive---------11-----------------------#2020-07-30">https://javascript.plainenglish.io/jquery-tips-arrays-ajax-textbox-changes-and-arrow-keys-670e88adbed?source=collection_archive---------11-----------------------#2020-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a3ff7141553bc86f62edf3343d60c9bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sTvxy1iEZiyM_JK3"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@andy_brunner?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andy Brunner</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b32c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管年代久远，jQuery仍然是操纵DOM的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些使用jQuery的技巧。</p><h1 id="9a34" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用jQuery从数组中删除特定值</h1><p id="a68c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">jQuery有一个<code class="fe me mf mg mh b">grep</code>方法让我们返回一个新的数组，其中不包含我们想要删除的项。</p><p id="ad7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="07fb" class="mq lc iq mh b gy mr ms l mt mu">const arr = [1, 2, 2, 6, 2, 6, 8, 3];<br/>const itemToRemove = 2;</span><span id="ca34" class="mq lc iq mh b gy mv ms l mt mu">const newArr = $.grep(arr, (value) =&gt; {<br/>  return value !== itemToRemove;<br/>});</span></pre><p id="aea8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个数组调用<code class="fe me mf mg mh b">$.grep</code>来检查。</p><p id="bec5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一个回调函数来返回一个数组，该数组返回一个布尔表达式来返回匹配项。</p><p id="7c9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value !== itemToRemove</code>表示我们返回一个没有<code class="fe me mf mg mh b">itemToRemove</code>值的数组。</p><h1 id="a5ca" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对jQuery和Ajax使用基本身份验证</h1><p id="4a4c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用jQuery，如果我们设置了请求头，就可以使用基本身份验证。</p><p id="4f16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="78b6" class="mq lc iq mh b gy mr ms l mt mu">beforeSend(xhr) {<br/>  const token = btoa(`${username}:${password}`);<br/>  xhr.setRequestHeader ("Authorization", `Basic ${token}`);<br/>},</span></pre><p id="f62a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从组合在一起的<code class="fe me mf mg mh b">username</code>和<code class="fe me mf mg mh b">password</code>中创建一个令牌。</p><p id="10ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用令牌设置<code class="fe me mf mg mh b">Authorization</code>头。</p><h1 id="6750" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用jQuery绑定箭头键</h1><p id="ceca" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">keydown</code>方法来监听箭头键的按下。</p><p id="af2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="99b9" class="mq lc iq mh b gy mr ms l mt mu">const arrow = { left: 37, up: 38, right: 39, down: 40 };</span><span id="8837" class="mq lc iq mh b gy mv ms l mt mu">$(window).keydown((e) =&gt; {<br/>  switch (e.which) {<br/>    case arrow.left:<br/>      //..<br/>      break;<br/>    case arrow.up:<br/>      //..<br/>      break;<br/>    case arrow.right:<br/>      //..<br/>      break;<br/>    case arrow.down:<br/>      //..<br/>      break;<br/>  }<br/>});</span></pre><p id="12db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们听着窗户上的按键声。</p><p id="2ad4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在回调的参数中获取事件对象。</p><p id="c9be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有<code class="fe me mf mg mh b">which</code>属性，带有我们按下的键的键码。</p><p id="fbf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用一个<code class="fe me mf mg mh b">switch</code>语句来查找被按下的键的匹配。</p><h1 id="f4fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用jQuery将JavaScript对象转换为数组</h1><p id="10ed" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">map</code>方法将JavaScript对象转换成数组。</p><p id="6b94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它对对象和数组都有效。</p><p id="44fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="033e" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  1: 'foo',<br/>  2: 'bar'<br/>};</span><span id="deee" class="mq lc iq mh b gy mv ms l mt mu">const array = $.map(obj, (value, index) =&gt; {<br/>  return [value];<br/>});</span><span id="7ca4" class="mq lc iq mh b gy mv ms l mt mu">console.log(array);</span></pre><p id="5182" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用我们的<code class="fe me mf mg mh b">obj</code>对象作为第一个参数调用<code class="fe me mf mg mh b">map</code>。</p><p id="45cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第二个参数中，我们传入一个回调，该回调将每个对象条目的<code class="fe me mf mg mh b">value</code>作为第一个参数。</p><p id="0e38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index</code>是被循环的键，是第二个参数。</p><p id="27ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们返回数组中的<code class="fe me mf mg mh b">value</code>来返回放入数组中的条目。</p><p id="10fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该包含在一个数组中。</p><p id="292d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用控制台日志检查<code class="fe me mf mg mh b">array</code>值。</p><h1 id="ea23" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何检测文本框的内容已经改变</h1><p id="1fe7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了检测文本框的内容是否已经改变，我们可以监听输入事件。</p><p id="737a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5263" class="mq lc iq mh b gy mr ms l mt mu">$('#textarea').on('input', () =&gt; {<br/>  //...<br/>});</span></pre><p id="b546" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">bind</code>做同样的事情:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5487" class="mq lc iq mh b gy mr ms l mt mu">$('#textarea').bind('input', () =&gt; {<br/>  //...<br/>});</span></pre><p id="022e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以监听<code class="fe me mf mg mh b">propertychange</code>和<code class="fe me mf mg mh b">paste</code>事件来监听输入更改和粘贴文本。</p><p id="7ee6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1c74" class="mq lc iq mh b gy mr ms l mt mu">$('#textarea').on('input propertychange paste', () =&gt; {<br/>  //...<br/>});</span></pre><h1 id="bfec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自动滚动到页面底部</h1><p id="8fa8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过调用<code class="fe me mf mg mh b">animate </code>自动滚动到页面底部。</p><p id="da6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4fed" class="mq lc iq mh b gy mr ms l mt mu">$('html,body').animate({ scrollTop: document.body.scrollHeight }, "fast");</span></pre><p id="df3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个物体来称呼<code class="fe me mf mg mh b">animate</code>。</p><p id="749c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该对象有一些滚动选项。</p><p id="b5af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">scrollTop</code>是我们想要滚动到的y坐标。</p><p id="8532" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是动画的速度。</p><h1 id="d3cc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在jQuery中显示加载微调器</h1><p id="bfeb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">show</code>和<code class="fe me mf mg mh b">hide</code>方法显示和隐藏装载微调器。</p><p id="13bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3fb7" class="mq lc iq mh b gy mr ms l mt mu">const spinner = $('#spinner').hide();<br/>$(document)<br/>  .ajaxStart(() =&gt; {<br/>    spinner.show();<br/>  })<br/>  .ajaxStop(() =&gt; {<br/>    spinner.hide();<br/>  });</span></pre><p id="eedf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">spinner</code>具有加载微调器元件。</p><p id="78e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们一开始就藏起来了。</p><p id="93b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当Ajax请求开始时，我们会显示微调器。</p><p id="9a1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是通过传入对<code class="fe me mf mg mh b">ajaxStart</code>方法的回调，然后在我们的微调器元素上调用<code class="fe me mf mg mh b">show</code>来完成的。</p><p id="337b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以通过在<code class="fe me mf mg mh b">ajaxStop</code>方法的回调中调用<code class="fe me mf mg mh b">spinner.hide()</code>来隐藏微调器。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/64d004bb603728796981269c80c2f8f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eKG0iCHdtchnpop8"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@lh_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lisa H</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1982" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="43c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">jQuery有一个<code class="fe me mf mg mh b">grep</code>方法，其作用类似于JavaScript数组的<code class="fe me mf mg mh b">filter</code>方法。</p><p id="b079" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过jQuery收听箭头键的按压。</p><p id="c2de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">ajaxStart</code>和<code class="fe me mf mg mh b">ajaxStop</code>让我们分别在Ajax请求开始和结束时运行代码。</p><p id="402c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">jQuery的<code class="fe me mf mg mh b">map</code>方法适用于对象和数组。</p><h2 id="db68" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">简单明了的JavaScript</strong></h2><p id="562b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码得到更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Explaining Async/Await Using Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用承诺解释异步/等待</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/explaining-async-await-using-promises-c315c85d6165?source=collection_archive---------22-----------------------#2020-11-11">https://javascript.plainenglish.io/explaining-async-await-using-promises-c315c85d6165?source=collection_archive---------22-----------------------#2020-11-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/a9bc4bc8a0ca7def3308a7937e780881.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/0*z2tNUDxLd8Cymwqh.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk"><a class="ae jv" href="https://commons.wikimedia.org/wiki/File:JavaScript-logo.png" rel="noopener ugc nofollow" target="_blank">JavaScript</a></figcaption></figure><h1 id="9502" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">承诺</h1><h2 id="c250" class="ku jx in bd jy kv kw dn kc kx ky dp kg kz la lb kk lc ld le ko lf lg lh ks li bi translated">解决</h2><p id="72f9" class="pw-post-body-paragraph lj lk in ll b lm ln lo lp lq lr ls lt kz lu lv lw lc lx ly lz lf ma mb mc md ig bi translated">用值调用<code class="fe me mf mg mh b"><a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve" rel="noopener ugc nofollow" target="_blank">Promise.resolve</a></code>:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="2836" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">与在回调函数中用一个<em class="mt">实现的</em>值实例化一个<code class="fe me mf mg mh b"><a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">Promise</a></code>是一样的:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h2 id="2eec" class="ku jx in bd jy kv kw dn kc kx ky dp kg kz la lb kk lc ld le ko lf lg lh ks li bi translated">拒绝</h2><p id="789b" class="pw-post-body-paragraph lj lk in ll b lm ln lo lp lq lr ls lt kz lu lv lw lc lx ly lz lf ma mb mc md ig bi translated">打电话给<code class="fe me mf mg mh b"><a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject" rel="noopener ugc nofollow" target="_blank">Promise.reject</a></code>是有原因的:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7dd4" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">等同于在回调函数中实例化一个带有<em class="mt">拒绝</em>原因的<code class="fe me mf mg mh b">Promise</code>:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="b1db" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">异步/等待</h1><h2 id="14b4" class="ku jx in bd jy kv kw dn kc kx ky dp kg kz la lb kk lc ld le ko lf lg lh ks li bi translated">异步功能</h2><p id="a0ec" class="pw-post-body-paragraph lj lk in ll b lm ln lo lp lq lr ls lt kz lu lv lw lc lx ly lz lf ma mb mc md ig bi translated">一个<a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank">异步函数</a>被声明，函数前面有<code class="fe me mf mg mh b">async</code>:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="eacb" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">这类似于异步<a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank">箭头功能</a>:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="d74c" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">当调用一个异步函数时，它返回一个<code class="fe me mf mg mh b">Promise</code>:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="113a" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">比较</h1><h2 id="a0e6" class="ku jx in bd jy kv kw dn kc kx ky dp kg kz la lb kk lc ld le ko lf lg lh ks li bi translated">感到满足的</h2><p id="bbe2" class="pw-post-body-paragraph lj lk in ll b lm ln lo lp lq lr ls lt kz lu lv lw lc lx ly lz lf ma mb mc md ig bi translated">Async/await是使承诺看起来同步的语法糖(但实际上不是):</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="8805" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">这相当于:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="6352" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">对于实现的承诺，您可以将<code class="fe me mf mg mh b">await</code>视为承诺链中的<code class="fe me mf mg mh b"><a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" rel="noopener ugc nofollow" target="_blank">then()</a></code>方法。</p><h2 id="334f" class="ku jx in bd jy kv kw dn kc kx ky dp kg kz la lb kk lc ld le ko lf lg lh ks li bi translated">拒绝</h2><p id="975a" class="pw-post-body-paragraph lj lk in ll b lm ln lo lp lq lr ls lt kz lu lv lw lc lx ly lz lf ma mb mc md ig bi translated">当一个承诺在异步函数中被拒绝时，你可以用一个<a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" rel="noopener ugc nofollow" target="_blank"> try…catch </a>来处理它:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="8e24" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">这与以下情况相同:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1e2d" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated">对于一个被拒绝的承诺，可以把<code class="fe me mf mg mh b">catch</code>块想象成承诺链中的<code class="fe me mf mg mh b"><a class="ae jv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" rel="noopener ugc nofollow" target="_blank">catch()</a></code>方法。</p></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><p id="3881" class="pw-post-body-paragraph lj lk in ll b lm mo lo lp lq mp ls lt kz mq lv lw lc mr ly lz lf ms mb mc md ig bi translated"><a class="ae jv" href="https://b.remarkabl.org/3lwbhGI" rel="noopener ugc nofollow" target="_blank">【remarkablemark.org】本文原载于2020年8月19日。 </a></p></div></div>    
</body>
</html>
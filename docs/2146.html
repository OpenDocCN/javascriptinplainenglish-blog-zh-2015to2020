<html>
<head>
<title>Creating boilerplate templates for your projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的项目创建样板模板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-boilerplate-templates-for-your-projects-215bd9365053?source=collection_archive---------1-----------------------#2020-05-24">https://javascript.plainenglish.io/creating-boilerplate-templates-for-your-projects-215bd9365053?source=collection_archive---------1-----------------------#2020-05-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/24ab74f01ba00e92792ed57b75bd7b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZkV2evZT885DbdOi4ulasA.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Photo by <a class="ae ja" href="https://unsplash.com/@nitram509?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Martin W. Kirst</a> on <a class="ae ja" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="e118" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有多少次你开始一个新项目，然后花几分钟时间安装依赖项，为你的设置写配置文件。如果有一种更好的方法来生成样板文件并立即开始编码会怎么样。在今天的文章中，我将向您展示如何创建您自己的cli来设置您的项目，并且您将准备好开箱即用地开始编码。</p><p id="9aba" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要做的第一件事是初始化一个项目。让我们打开我们最喜欢的终端，为我们的项目创建一个新目录。然后我们用npm初始化它。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="828f" class="lh li jd ld b gy lj lk l ll lm">mkdir cli-project &amp;&amp; cd create-express-app<br/>npm init -y</span></pre><p id="adaa" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于我们的CLI，我们需要一些包:</p><ul class=""><li id="9682" class="ln lo jd kc b kd ke kh ki kl lp kp lq kt lr kx ls lt lu lv bi translated"><em class="lw"> arg </em></li><li id="f03b" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated"><em class="lw">粉笔</em></li><li id="4b6f" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">放电合成法（Electric Synthetic Method的缩写）</li><li id="904a" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">execa</li><li id="ba9b" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">调查者</li><li id="ee3a" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">列表</li><li id="3cda" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">国家汽车停车场</li><li id="f278" class="ln lo jd kc b kd lx kh ly kl lz kp ma kt mb kx ls lt lu lv bi translated">pkg-安装</li></ul><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f9e9" class="lh li jd ld b gy lj lk l ll lm">npm i -S arg chalk esm execa inquirer listr ncp pkg-install</span></pre><p id="fb4c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦我们安装了软件包，让我们设置我们的目录结构:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="aba4" class="lh li jd ld b gy lj lk l ll lm">mkdir {bin,src,templates}</span></pre><p id="491c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将从bin目录开始，让我们创建我们的文件，<code class="fe mc md me ld b">create-express-app</code>。注意没有文件扩展名，这是有意的。现在让我们设置我们的文件:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="724a" class="lh li jd ld b gy lj lk l ll lm">#!/usr/bin/env node </span><span id="4c58" class="lh li jd ld b gy mf lk l ll lm">require = require('esm')(module /*,options*/);<br/>require('../src/cli').cli(process.argv);</span></pre><p id="ab99" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第1行告诉shell用node运行这个脚本。我们使用esm，因此我们可以使用ES6导入语法。第三行调用cli。</p><p id="5c05" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要在package.json中添加一个键，告诉我们的脚本在哪里:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="2c27" class="lh li jd ld b gy lj lk l ll lm">"bin": {<br/>  "@npmusername/create-express-app": "bin/create-express-app",<br/>  "create-express-app": "bin/create-express-app"<br/>},<br/>"publishConfig": {<br/>  "access": "public"<br/>}</span></pre><p id="da54" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的src目录中，我们将创建我们的文件。我已经决定将文件分成几个关注的区域，即文件复制、git、初始化npm、包和实用程序。让我们从<code class="fe mc md me ld b">utils.js</code>文件开始:</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="a3be" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有两个助手函数，一个用于包，另一个包装我们的子任务。</p><p id="ef08" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的下一个文件是我们的<code class="fe mc md me ld b">pkgjson.js</code>文件。我们在这里处理NPM、Git的初始化，并复制模板文件。它还根据您是否需要typescript来处理<code class="fe mc md me ld b">package.json</code>中的scripts键。</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="a9e5" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们列表中的下一个文件是<code class="fe mc md me ld b">packages.js</code>文件。它列出了项目的所有依赖项。我将包存储为键，每个键是包的数组。我有两个独立的变量，一个用于开发依赖，一个用于依赖。我可以用Object.keys方法遍历这些键，并创建一个名为<code class="fe mc md me ld b">pkgList</code>的新变量。在<code class="fe mc md me ld b">packageListGenerator</code>助手功能的帮助下，我能够从包中创建任务。然后在TaskListGenerator的帮助下，我可以制作父列表。您还会注意到第三个参数是一个布尔值，它告诉Listr任务是否要运行。当你运行这个的时候，它会问你是否要安装TypeScript，如果你选择no，它不会运行任何基于<code class="fe mc md me ld b">options.typescript</code>变量的带有TypeScript的任务。</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="d48e" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">既然我们已经复制了文件，也准备好了安装包，我们需要把它和一个<code class="fe mc md me ld b">main.js</code>文件放在一起。</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="67a4" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该文件根据您的选择和目标目录设置模板。之后，它调用我们为复制文件和安装包而创建的两个函数。在它运行之后，它将在您将它传递给<code class="fe mc md me ld b">create-express-app</code>命令时指定的目录中创建您的项目。这是最后一个<code class="fe mc md me ld b">cli.js</code>文件，当你输入cli命令时，它会加载这个文件。</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="3db1" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">CLI可以接受两个参数，一个是创建的目录的项目名，另一个是启用typescript的<code class="fe mc md me ld b">--typescript</code>或<code class="fe mc md me ld b">-ts</code>命令。如果您不提供任何命令，CLI将提示您输入问题和默认答案，默认答案是Yarn、api和TypeScript的N。您可以根据自己的喜好进行定制。</p><p id="8985" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有了这些之后，我们需要创建模板文件。这个项目的模板文件应该位于templates目录中，有两个目录，一个用于<code class="fe mc md me ld b">typescript</code>，一个用于<code class="fe mc md me ld b">javascript</code>。根据您传入的内容，将是它复制的目录。对于JavaScript，目录中只有一个文件，一个简单的express api:</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="65df" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的typescript文件位于它的src目录中，基本上是相同的，只是使用了es6语法。</p><figure class="ky kz la lb gt ip"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="fd5e" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当然，这不是一个很好的服务器，因为它是用于演示的目的。但是您可以用它来创建任何您想要的样板模板。如果你不想把它发布到NPM注册中心，你可以使用命令<code class="fe mc md me ld b">npm link</code>把它链接到你的本地机器上并在本地使用它。</p><p id="f148" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">github库可以在这里找到:<a class="ae ja" href="https://github.com/dswhitely1/create-express-app" rel="noopener ugc nofollow" target="_blank">https://github.com/dswhitely1/create-express-app</a></p><p id="8906" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想看React版本，你可以在这里找到:<a class="ae ja" href="https://github.com/dswhitely1/create-react-project" rel="noopener ugc nofollow" target="_blank">https://github.com/dswhitely1/create-react-project</a></p><h1 id="edcd" class="mi li jd bd mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne bi translated"><strong class="ak">简明英语团队的说明</strong></h1><p id="193b" class="pw-post-body-paragraph ka kb jd kc b kd nf kf kg kh ng kj kk kl nh kn ko kp ni kr ks kt nj kv kw kx ig bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae ja" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc je">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae ja" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kc je">订阅我们的YouTube频道</strong> </a> <strong class="kc je">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
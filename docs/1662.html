<html>
<head>
<title>How to build a simple cipher machine with vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用普通的JavaScript构建一个简单的密码机</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-simple-cipher-machine-with-vanilla-javascript-62d401d4841?source=collection_archive---------1-----------------------#2020-04-12">https://javascript.plainenglish.io/how-to-build-a-simple-cipher-machine-with-vanilla-javascript-62d401d4841?source=collection_archive---------1-----------------------#2020-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8845" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">加密和解密与凯撒的算法在一个简单的方式</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/9760e4e08f9ea120b2e97c2e4f0d0f7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PH1A8Lor_L1S8LzrXFGzQw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">A woman with a background code by <a class="ae lb" href="https://www.pexels.com/es-es/@thisisengineering?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">ThisIsEngineering</a> en <a class="ae lb" href="https://www.pexels.com/es-es/foto/mujer-internet-tecnologia-hembra-3861969/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="fe12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将构建简单的加密和解密函数，对一部分文本进行编码，然后在客户端对编码后的字符串进行解码。</p><p id="6abb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我要用凯撒密码。这是已知最早也是最简单的密码之一。这是一种替代密码，其中，为了对文本进行编码，原始文本中的每个字母都被“移位”到字母表的某些位置，而为了对文本进行解码，你只需进行相反的过程。例如，移位1时，“A”将被替换为“B”，移位2时，“A”将被替换为“c”</p><p id="9995" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在一个在线HTML文本编辑器中尝试最后一个例子，比如<a class="ae lb" href="https://jsbin.com" rel="noopener ugc nofollow" target="_blank"> jsbin </a>。</p><h2 id="b627" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">凯撒密码算法</h2><p id="1224" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">首先，我们要定义我们的字母表。您可以使用您的语言字符:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5f07" class="lc ld iq mb b gy mf mg l mh mi">const alphabet = [<br/>      'A’,’B’,’C’,’D’,’E’,’F’,<br/>      'G’,’H’,’I’,’J’,’K’,’L’,<br/>      'M’,’N’,’O’,’P’,’Q’,’R’,<br/>      'S’,’T’,’U’,’V’,’W’,’X’,<br/>      'Y’,’Z’<br/>];</span></pre><p id="ccfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们定义我们的加密函数。我们使用一个条件语句，使用includes()数组方法检查参数是否是字母表的一部分。我们还使用toUpperCase()方法将输入字符转换为大写，因为字母表数组中的所有字母都是大写的。</p><p id="6591" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们的encrypt函数使用indexOf函数获得了每个字符在字母表中的位置。例如，字符“A”在第0位，字母“Z”在第25位。然后，我们用移位值增加位置变量的值，并使用新位置从字母数组中获取字符。</p><p id="edc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果我们使用移位值1，在字符“A”的位置增加1之后，我们获得值为1(0+1)的新位置，它对应于字母数组中的字符“B”。</p><p id="a77e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，我们使用模操作符“%”来做模除法。在我们的例子中，我们的字母数组大小是26(0到25)，这意味着任何超过25的值都将“回送”到数组的开头:26将到达0、28到2或29到3。例如，移位2的字符“Y”将回到字母表的开头，并映射到字母“a”</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5967" class="lc ld iq mb b gy mf mg l mh mi">function encrypt(char, shift) {<br/>  let include =        <br/>   alphabet.includes(<br/>      char.toUpperCase()); <br/>     <br/>  if (include){      <br/>   let position =         <br/>    alphabet.<strong class="mb ir">indexOf</strong>(<br/>     char.toUpperCase());<br/>      <br/><strong class="mb ir">   let newPosition = <br/>    (position + shift) %  <br/>      alphabet.length;</strong></span><span id="3d03" class="lc ld iq mb b gy mj mg l mh mi">   return alphabet[newPosition];<br/> } else  return char;<br/>}</span></pre><p id="673b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的encrypText helper函数读取我们在表单中引入的文本和移位值，并将其转换为数字。然后使用map函数为每个字符调用加密函数。为此，首先，我们使用spread操作符将输入字符串sourceTest从字符串转换为数组。最后，我们将所有字母连接起来，得到最终结果:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="d9fd" class="lc ld iq mb b gy mf mg l mh mi">function encryptText() {<br/>  <br/>  const form = document.forms[0];<br/>  <br/>  let title=<br/>   document.getElementById("titleId");  <br/>     <br/>  title.innerHTML = "Encrypted text";<br/>  <br/>  let shift= Number(form.shift.value); <br/>     <br/>  let sourceText =  <br/>    form.sourceText.value;       <br/>     <br/><strong class="mb ir">  form.sourceText.value <br/>    = [... sourceText ].map(char =&gt;<br/>      encrypt(char, shift)).join(’’);</strong><br/> }</span></pre><p id="2a55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">decryptText辅助函数类似于我们的encryptText函数，但是这里我们从字母表的长度中减去移位值以获得新的偏移值:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="4c6f" class="lc ld iq mb b gy mf mg l mh mi">function decryptText() {</span><span id="da7f" class="lc ld iq mb b gy mj mg l mh mi"> const form = document.forms[0];</span><span id="8d60" class="lc ld iq mb b gy mj mg l mh mi"> let title = document.getElementById("titleId");       <br/>  <br/> title.innerHTML = "Plain text";<br/>     <br/> let shift =   <br/>  Number(form.shift.value);</span><span id="1adc" class="lc ld iq mb b gy mj mg l mh mi"> let sourceText = <br/>  form.sourceText.value;    <br/>     <br/> shift = <br/> (<strong class="mb ir">alphabet.length - shift</strong>) %  <br/>   alphabet.length;<br/>    <br/> form.sourceText.value =<br/>    [...sourceText].map(char =&gt; <br/>       <strong class="mb ir"> encrypt(char ,shift))</strong>.join(’’);<br/> }</span></pre><p id="aa27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用一些Html来测试的结果代码是:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="b9f2" class="lc ld iq mb b gy mf mg l mh mi">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  <br/>&lt;head&gt;<br/> &lt;meta charset="utf-8"&gt;<br/> &lt;meta name="viewport"    <br/>  content="width=device-width"&gt;<br/> <br/> &lt;title&gt;Cipher machine&lt;/title&gt;<br/>      <br/> &lt;script&gt;  <br/>          <br/>  const alphabet = [<br/>      'A','B','C','D','E','F',<br/>      'G','H','I','J','K','L',<br/>      'M','N','O','P','Q','R',<br/>      'S','T','U','V','W','X',<br/>      'Y','Z' <br/>  ];<br/>    <br/> function encryptText() {<br/>  <br/>  const form = document.forms[0];<br/>  <br/>  let title=<br/>   document.getElementById("titleId");  <br/>     <br/>  title.innerHTML = "Encrypted text";<br/>  <br/>  let shift= Number(form.shift.value); <br/>     <br/>  let sourceText =  <br/>    form.sourceText.value;       <br/>     <br/>  form.sourceText.value <br/>    = [... sourceText ].map(char =&gt;<br/>      encrypt(char, shift)).join('');<br/> }<br/>    <br/> function decryptText() {<br/>  const form = document.forms[0];</span><span id="bc08" class="lc ld iq mb b gy mj mg l mh mi">  let title = document.getElementById("titleId");       <br/>  <br/>  title.innerHTML = "Plain text";<br/>       <br/>  let shift =   <br/>    Number(form.shift.value);</span><span id="2cab" class="lc ld iq mb b gy mj mg l mh mi">  let sourceText = <br/>    form.sourceText.value;    <br/>     <br/>  shift = <br/>     (alphabet.length - shift) %  <br/>      alphabet.length;<br/>    <br/>  form.sourceText.value <br/>      = [... sourceText ].map(char =&gt; <br/>        encrypt(char,    <br/>        shift)).join('');<br/> }<br/>    <br/> function encrypt(char, shift) {<br/>  let include =        <br/>   alphabet.includes(<br/>    char.toUpperCase()); <br/>     <br/>  if (include){      <br/>   let position =         <br/>    alphabet.indexOf(<br/>     char.toUpperCase());<br/>      <br/>  let newPosition = <br/>    (position+shift) %  <br/>      alphabet.length;</span><span id="428f" class="lc ld iq mb b gy mj mg l mh mi">  return alphabet[newPosition];<br/> }else  return char;<br/>}        <br/>&lt;/script&gt;<br/>&lt;/head&gt;</span><span id="e068" class="lc ld iq mb b gy mj mg l mh mi">&lt;body&gt;<br/>  &lt;form&gt;       <br/>   &lt;h1&gt;My Cipher machine&lt;/h1&gt;   <br/>   &lt;p id="titleId"&gt;Plain text&lt;/p&gt;<br/>  <br/>   &lt;div&gt;          <br/>    &lt;textarea name="sourceText" <br/>       rows="8"<br/>       cols="50"         <br/>       spellcheck="false"<br/>       value=""&gt;                       <br/>    &lt;/textarea&gt;<br/>   &lt;/div&gt;<br/>  <br/>   &lt;div&gt;      <br/>    &lt;label for="shift"&gt;Shift:&lt;/label&gt;<br/>    &lt;select id="shift" name="shift"&gt;<br/>     &lt;option value="1"&gt;1&lt;/option&gt;<br/>     &lt;option value="2"&gt;2&lt;/option&gt;<br/>     &lt;option value="5"&gt;5&lt;/option&gt;<br/>     &lt;option value="10"&gt;10&lt;/option&gt;<br/>    &lt;/select&gt; <br/>  &lt;/div&gt;<br/>   <br/>  &lt;div&gt;      <br/>    &lt;input type="button" id="decrypt" <br/>       value="Encrypt" <br/>       onclick="encryptText();"&gt;</span><span id="eec6" class="lc ld iq mb b gy mj mg l mh mi">    &lt;input type="button" id="decrypt" <br/>       value="Decrypt the text" <br/>       onclick="decryptText();"&gt;    <br/>  &lt;/div&gt;<br/>  <br/>  &lt;/form&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="1480" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">结论</h2><p id="a75c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">如果您正在寻找可靠的加密算法，您可以使用AES或其他类型的加密。例如，在JavaScript中，你有CryptoJS。CryptoJS是一个标准和安全的加密集合，具有一致和简单的接口。在本文中，我想展示现有的快速加密文本的最简单算法之一，但是对于真正的开发，建议使用标准库，而不要重复发明。</p><h2 id="eed3" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">感谢您花时间阅读这篇文章。希望你觉得有用！</h2><h2 id="0947" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated"><strong class="ak">用简单的英语写的JavaScript的注释:</strong></h2><p id="fc6f" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae lb" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="jp ir">AI in Plain English</strong></a><a class="ae lb" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="jp ir">UX in Plain English</strong></a><a class="ae lb" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="jp ir">Python in Plain English</strong></a><strong class="jp ir"/>——谢谢，继续学习！</p></div></div>    
</body>
</html>
<html>
<head>
<title>To infinity and beyond with JavaScript Proxy API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript代理API无限超越</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/to-infinity-and-beyond-with-javascript-proxy-api-8d4f7a26c8dc?source=collection_archive---------5-----------------------#2020-01-31">https://javascript.plainenglish.io/to-infinity-and-beyond-with-javascript-proxy-api-8d4f7a26c8dc?source=collection_archive---------5-----------------------#2020-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/804bb0230bba049ab5881c953c5856c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4HKNNFQl1Kj8PAZE.png"/></div></div></figure><p id="5a4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代理API旨在彻底改变JavaScript开发体验，使以前不可能的壮举成为可能，于2015年在ES6中推出。这是一个先进的概念，但是如果你想掌握JavaScript，代理API是你必须要学习的东西。</p><p id="bab8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代理API的目标是扩展JS <strong class="ka ir">元编程</strong>能力。元编程是一种编程技术，可以让你改变程序的行为，分析程序的内部结构，甚至动态地改变源代码。代理API允许您覆盖JS内部操作，例如对象属性查找、枚举、赋值、迭代、函数调用、生成器行为等等。</p><p id="5e44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代理API的基本术语包括以下术语:</p><h1 id="c645" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">随身行李</h1><p id="5c4b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">陷阱是您正在重写的方法。下面是可能的陷阱的完整列表，即可以使用代理API覆盖的函数列表:</p><ul class=""><li id="ec3b" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated"><strong class="ka ir">对象方法:</strong></li><li id="480a" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">getPrototypeOf()</code></li><li id="604d" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">setPrototypeOf()</code></li><li id="c71d" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">isExtensible()</code></li><li id="fc11" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">preventExtensions()</code></li><li id="c8a3" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">getOwnPropertyDescriptor()</code></li><li id="c753" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">ownKeys()</code></li><li id="a787" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><strong class="ka ir">属性获取器/设置器:</strong></li><li id="1cd3" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">has()</code></li><li id="bd58" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">get()</code></li><li id="6dae" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">set()</code></li><li id="b61e" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">deleteProperty()</code></li><li id="9646" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><strong class="ka ir">功能方法:</strong></li><li id="49ff" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">apply()</code></li><li id="1d6d" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated"><code class="fe mn mo mp mq b">construct()</code></li></ul><h1 id="7479" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">处理者</h1><p id="4d7e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">Handler是一个对象，其属性是<strong class="ka ir">陷阱</strong>。这意味着您可以在一个处理程序上定义多个陷阱！</p><h1 id="5273" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">目标</h1><p id="c4f5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">目标是其方法被重写的对象。它可以是任何对象，这意味着您可以将代理应用于第三方模块、内置对象甚至代理对象本身！</p><h1 id="2f6b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用GET陷阱</h1><p id="bbd0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在，让我们看一些例子。我能想到的最简单的方法是使用<code class="fe mn mo mp mq b">get</code>陷阱为未定义的属性提供默认值:</p><figure class="mr ms mt mu gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="c588" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以看到，在第1–4行，我们为代理创建了一个处理程序。它定义了一个<code class="fe mn mo mp mq b">get</code>函数，该函数覆盖了属性查找行为。如果对象上没有定义属性，我们返回<code class="fe mn mo mp mq b">'general kenobi</code>，而不是undefined。然后，在第6行，我们使用代理API来实现这一点。注意<code class="fe mn mo mp mq b">new</code>关键字，它是必需的，因为<code class="fe mn mo mp mq b">Proxy</code>是一个构造函数。最后，在第10-11行您可以看到我们的代理在工作:对于不存在的<code class="fe mn mo mp mq b">'hello there'</code>属性，返回默认值<code class="fe mn mo mp mq b">'general kenobi'</code>。</p><h1 id="3143" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">使用设置的陷阱</h1><p id="2364" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在我们来看一个更高级的例子。我们将使用<code class="fe mn mo mp mq b">set</code>陷阱来(1)验证属性值以确保它是一个字符串，以及(2)将字符串转换成大写。代码如下:</p><figure class="mr ms mt mu gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9387" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们使用处理程序中的<code class="fe mn mo mp mq b">set</code>陷阱来覆盖属性赋值行为。它首先检查值是否是字符串，如果是，用指定的键保存对象的大写版本。您可以在第13-15行看到它的行为:如果您试图传递<code class="fe mn mo mp mq b">5</code>并将<code class="fe mn mo mp mq b">'abacaba'</code>转换为<code class="fe mn mo mp mq b">'ABACABA'</code>时抛出。</p><p id="ff02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望现在您已经理解了JavaScript中的代理API以及如何使用它。让我知道你使用这种技术的经验，以及你用它解决了什么问题！此外，如果您想了解关于这种令人敬畏的语言的更多信息，请查看我关于JavaScript高级主题的其他文章:</p><div class="mx my gp gr mz na"><a href="https://medium.com/javascript-in-plain-english/deep-dive-into-es6-symbols-3b44f4ba7eb3" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">深入探究ES6符号</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在这篇文章中，我将解释什么是ES6符号，为什么你可能想要使用它们，以及它们是如何工作的。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jw na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://medium.com/javascript-in-plain-english/implementing-the-builder-pattern-in-javascript-without-classes-eaf41f93b9c0" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">在没有类的情况下用JavaScript实现构建器模式</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在JavaScript中使用高级设计模式的力量，而没有类的开销</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no jw na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://medium.com/javascript-in-plain-english/please-stop-using-classes-in-javascript-and-become-a-better-developer-a185c9fbede1" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">请停止使用JavaScript中的类，成为一个更好的开发者</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">在这篇文章中，我将谈论为什么在JavaScript中使用类是一个坏主意，以及有哪些…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no jw na"/></div></div></a></div><figure class="mr ms mt mu gt jr gh gi paragraph-image"><a href="http://eepurl.com/gYiA29"><div class="gh gi nr"><img src="../Images/446049aa060bbaea15a64e1a907b1030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*zWeFS3E1gbkEuBmpbvm6Rg.jpeg"/></div></a></figure></div></div>    
</body>
</html>
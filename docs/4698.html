<html>
<head>
<title>Set up GraphQL with Fastify, mercurius, TypeScript, and automated testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Fastify、mercurius、TypeScript和自动化测试设置GraphQL</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/set-up-graphql-with-fastify-mercurius-typescript-and-automated-testing-f4fc17420945?source=collection_archive---------4-----------------------#2020-12-31">https://javascript.plainenglish.io/set-up-graphql-with-fastify-mercurius-typescript-and-automated-testing-f4fc17420945?source=collection_archive---------4-----------------------#2020-12-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="19f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个简短的教程中，我想向您展示如何设置一个<a class="ae kl" href="https://www.fastify.io/" rel="noopener ugc nofollow" target="_blank"> Fastify </a> web服务器，通过<a class="ae kl" href="https://github.com/mercurius-js/mercurius" rel="noopener ugc nofollow" target="_blank"> mercurius </a>模块实现<a class="ae kl" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>，并在使用TypeScript的同时使用<a class="ae kl" href="https://github.com/visionmedia/supertest" rel="noopener ugc nofollow" target="_blank"> supertest </a>添加第一个自动化测试。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/f3c1b3975c34651fd0f7624f94b45952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*98jH3k99WMjeNojfPKgUDw.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae kl" href="https://unsplash.com/@florianolv" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae kl" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9221" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了给你将来的项目提供一些样板文件，并作为本文的参考，我创建了一个小的GitHub库，其中包含了本文中提到的所有代码，所以在阅读本文时，一定要克隆它并将其作为参考打开。</p><div class="lc ld gp gr le lf"><a href="https://github.com/Abszissex/medium-fastify-graphql" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">abszisex/medium-fastify-graphql</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">使用mercurius开始Fastify和GraphQL的小样本。开始###安装所有模块npm…</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">github.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt kw lf"/></div></div></a></div></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="c784" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们有一个非常简单的文件结构。在根级别，我们有自己的配置文件，如<code class="fe mb mc md me b">tsconfig.json</code>、<code class="fe mb mc md me b">.eslintrc.json</code>、<code class="fe mb mc md me b">jest.config.js</code>和<code class="fe mb mc md me b">package.json</code>。在我们的正下方只有我们的<code class="fe mb mc md me b">src</code>、<code class="fe mb mc md me b">dist</code>和<code class="fe mb mc md me b">node_modules</code>文件夹，所以这里没有什么特别的东西。</p><p id="72db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">整个源代码(在我们的例子中只有一个<code class="fe mb mc md me b">index.ts</code>)位于<code class="fe mb mc md me b">src</code>文件夹下，在它的正下方有一个包含我们的测试的<code class="fe mb mc md me b">test</code>文件夹。当然，你完全可以根据自己的喜好随意改变结构。我个人喜欢在应该测试的实际实现文件下面有一个测试文件，尽管我在这里做了一点其他的事情。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="f09d" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">设置项目并启动服务器</h2><p id="acc3" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">正如您已经在<code class="fe mb mc md me b">README.md</code>文件中看到的，在本地机器上启动Fastify支持的、用TypeScript编写的GraphQL服务器非常容易。</p><p id="377d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只需运行<code class="fe mb mc md me b">npm install</code>安装所有需要的模块，然后通过<code class="fe mb mc md me b">npm run dev</code>启动服务器。在后台，<code class="fe mb mc md me b">npm run dev</code>使用<a class="ae kl" href="https://www.npmjs.com/package/ts-node-dev" rel="noopener ugc nofollow" target="_blank"> ts-node-dev </a> NPM包直接运行你的类型脚本文件<code class="fe mb mc md me b">src/index.ts</code>，而不需要事先传输任何文件。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nd"><img src="../Images/a59a86a310c860c01a8019b5305b2f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j9TxhfbggVaZOH0n7nQ3ew.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Installing node modules and start the server for the first time</figcaption></figure><h2 id="f847" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">其他有用的命令</h2><p id="b026" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">除此之外，我还在<code class="fe mb mc md me b">package.json</code>中添加了一些其他常用命令来帮助你快速入门:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="6a7e" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">类型定义</h2><p id="ab89" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">不过，关于一般工具/命令的东西已经说得够多了，让我们来看看一些代码。要了解全貌，请确保您已经克隆了存储库，或者至少在第二个窗口中打开了它，这样您就可以了解全貌，因为<strong class="jp ir">我不会查看每个LoC </strong>。</p><p id="0ffd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了创建运行实际服务器的<code class="fe mb mc md me b">FastifyInstance</code>之外，我们还需要定义我们的GraphQL规范。您可能知道，GraphQL是基于模式的。使用<code class="fe mb mc md me b">mercurius</code>，你可以直接定义它，也可以使用由<code class="fe mb mc md me b">@graphql-tools/schema</code>模块提供的<code class="fe mb mc md me b">makeExecuteableSchema</code>支持。在我的例子中，我选择了第二个。但这只是一种主观偏好。</p><p id="09b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我们的小型示例服务器，我们希望提供一些简单的<code class="fe mb mc md me b">Query</code>，它公开了一些<code class="fe mb mc md me b">add</code>方法，这些方法接受两个参数并返回两者的总和。</p><p id="2e28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面的代码片段中，我们定义了我们的类型定义。此外，永远不要忘记向您的模式中添加适当的文档，以便其他团队(或者甚至是您，当您在几周/几个月后看到它时)知道查询是为了什么，以及期望从参数中得到什么。如果你也检查来自仓库的代码，你会看到我定义了两个变量，它们都包含了一个<code class="fe mb mc md me b">type Query</code>的模式。当您的应用程序变得更大时，根据您当前正在实现的模块来拆分您的模式是一个很好的实践，所以我将很快向您展示如何简单地合并这两个类型定义变量。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5ea5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模板字符串前面的<code class="fe mb mc md me b">gql</code>是从<code class="fe mb mc md me b">mercurius-codegen</code>包中导入的，它提供了正确的语法高亮显示、关于悬停的文档以及自动完成功能，这可以在下面的截图中看到(我在这里使用的是安装了<code class="fe mb mc md me b">JS GraphQL</code>插件的WebStorm IDE)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/02a4821a6cec7d9ae820d20e3d3efac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*o9AYx_siw_Av3L8ydZDlOw.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Autocomplete inside the “gql” template string</figcaption></figure><h2 id="6958" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">设置解析器</h2><p id="d47b" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">在我们定义了我们的类型定义之后，我们还必须定义我们的解析器，它们被链接到所提供的模式。在下面的<code class="fe mb mc md me b">Query.add</code>解析器中，我试图提供完整的类型，并且只使用了一个小箭头函数来返回两个提供值的总和。与类型定义一样，我定义了第二个解析器对象，包含第二个类型定义对象的解析器(在这个代码片段中不可见，但是在repo内部)。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="36c8" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">将GraphQL添加到Fastify</h2><p id="886f" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">在我们为我们的服务器定义了GraphQL规范(类型定义+解析器)之后，我们现在必须把它们放在一起。</p><p id="272f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在下一个片段中看到的，我们首先创建了Fastify服务器的一个新实例。您可能会注意到我们在这里使用了<code class="fe mb mc md me b">export</code>,这并不常见，因为这个<code class="fe mb mc md me b">app</code>实例是我们应用程序的主入口点，所以其他文件都不应该使用它。你是对的，但是通过这个简单的改变，我们以后可以很容易地编写我们的集成测试，因为我们可以简单地在测试代码中导入我们的实际服务器，但是稍后会有更多的介绍。</p><p id="c755" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二步，我们将<code class="fe mb mc md me b">mercurius</code> GraphQL适配器注册到我们的Fastify实例中。通过这样做，我们也在服务器上自动公开了路由<code class="fe mb mc md me b">/graphql</code>,之后我们可以将我们的GraphQL查询发送到那里。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="c431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我们非常简单的用例，我们只设置了<code class="fe mb mc md me b">options</code>对象的两个参数。首先，我们提供了<code class="fe mb mc md me b">schema,</code>，这样我们的服务器就知道应该向外部公开什么(<code class="fe mb mc md me b">typeDefs</code>)以及如何解决它(<code class="fe mb mc md me b">resolvers</code>)。在这里你也可以看到我使用了一些由<code class="fe mb mc md me b">@graphql-tools</code>模块提供的超级简洁的<code class="fe mb mc md me b">mergeXXX</code>方法，这样我们就可以根据模块的结构轻松地拆分类型定义和解析器，然后再合并它们。除此之外，我还将<code class="fe mb mc md me b">graphiql</code>属性设置为<code class="fe mb mc md me b">'playground'</code>。将它设置为这个值告诉<code class="fe mb mc md me b">mercurius</code>适配器我也想在<code class="fe mb mc md me b">/playground</code>下托管GraphQL Playground(稍后我将展示)。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="5bb7" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">GraphQL游乐场</h2><blockquote class="nh ni nj"><p id="f358" class="jn jo nk jp b jq jr js jt ju jv jw jx nl jz ka kb nm kd ke kf nn kh ki kj kk ij bi translated">不幸的是，GraphQL游乐场在2021年7月6日通过以下合并被移除:<a class="ae kl" href="https://github.com/mercurius-js/mercurius/pull/453" rel="noopener ugc nofollow" target="_blank">https://github.com/mercurius-js/mercurius/pull/453</a>。感谢伯恩哈德·舍恩伯格指出这一点。</p></blockquote><p id="6759" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我们现在已经有了GraphQL规范，并且连接到了我们的服务器，那么在我们编写自动化测试用例之前，是时候做一些快速的手工测试了。</p><p id="cb54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们通过<code class="fe mb mc md me b">npm run dev</code>启动本地服务器，然后在<a class="ae kl" href="http://localhost:8080/playground" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/Playground</a>上查看我们的GraphQL Playground。</p><p id="dc43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看操场页面的右侧，我们可以看到“文档”和“模式”部分。在“模式”一节中，我们可以对通过两个类型定义变量(包括我们的文档)定义的合并模式有一个简短的了解。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nq"><img src="../Images/217f6026400c9f45d53d92d6cdedf472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_3LPWM8k5fYOfsakUDtr2g.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">The full schema in the GraphQL Playground</figcaption></figure><p id="a92a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管大多数时候使用操场上的“文档”区更方便。在这里，您可以使用一些搜索功能，或者直接选择您想要检查的查询/变异。在下一张图中，我选择了我们的<code class="fe mb mc md me b">add</code>查询，然后选择了它的参数<code class="fe mb mc md me b">x</code>。您可以看到，我们在类型定义中定义的文档字符串，在这里显示为方法和参数。所以，请务必在这里插入好的价值观，让每个人的生活变得更好，只要你好好照顾这里，你就不必写大文档，因为这已经是你自动生成的文档了😉</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nr"><img src="../Images/bf60d1cd571a43727a62bc334741c585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*htLHejuUBHw7hlQ0ZptbWw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Full documentation of “query.add”</figcaption></figure><p id="b933" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以现在是时候快速检查我们的服务器是否真的做了我们期望他做的事情。为此，我们将来到操场的左侧，输入我们的查询，然后点击“Play”按钮。</p><pre class="kn ko kp kq gt ns me nt nu aw nv bi"><span id="5ee9" class="mf mg iq me b gy nw nx l ny nz"># Example Query<br/>query {<br/>  add(x: 4, y: 10)<br/>}</span></pre><p id="c62e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在下图中看到的，服务器响应了我们的求和值(<code class="fe mb mc md me b">4 + 10 = 14</code>)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oa"><img src="../Images/1bcf9eca45de1ccb92fbfc59b5c88dd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QaF9XClkP7JMOQVPd_H9sw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Test “query.add” on the GraphQL Playground</figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="fc23" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">自动化测试</h2><p id="d5ab" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">当然，我们希望我们的服务器将来也能正常工作，当我们或其他人做了一些更改，而没有在每个拉请求上手动检查所有可能的情况时。所以让我们从自动化测试用例开始。</p><p id="33f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，我不会进行单元测试(尽管我很喜欢单元测试)，而是简单地测试服务器的实际请求/响应。为此，我将使用<code class="fe mb mc md me b">supertest</code>模块。</p><p id="942c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面的例子非常简单。注意，我没有在这个代码片段中添加对<code class="fe mb mc md me b">query.sub</code>的测试，因为它与<code class="fe mb mc md me b">query.add</code>的情况非常相似，但是它可以在资源库中找到。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><ol class=""><li id="be99" class="ob oc iq jp b jq jr ju jv jy od kc oe kg of kk og oh oi oj bi translated">我们创建了一个小助手，它简单地用一个名为<code class="fe mb mc md me b">data</code>的属性将我们期望的响应包装在另一个对象中，因为GraphQL规范要求结果应该总是响应对象的<code class="fe mb mc md me b">data</code>键值。</li><li id="75ca" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们添加了一个<code class="fe mb mc md me b">beforeEach()</code>，在这里我们将一直等待我们的Fastify实例准备好响应请求。注意，我们从我们的<code class="fe mb mc md me b">index.ts</code>文件中导入了<code class="fe mb mc md me b">app</code>。还记得我在开始时提到过，我们必须导出应用程序，以便在测试中轻松使用它吗？它在这里😉</li><li id="1d3a" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们添加一个<code class="fe mb mc md me b">describe</code>块，它应该包含我们对<code class="fe mb mc md me b">query.add</code>端点的所有测试，并添加一个测试用例，其中我们的端点应该返回一个正确的响应。</li><li id="171d" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们的单一测试用例非常简单。我们创建希望发送到服务器的查询(再次使用<code class="fe mb mc md me b">gql</code>)</li><li id="fab3" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们创造出预期的反应</li><li id="c8fe" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们从4发送我们创建的查询。到我们在<code class="fe mb mc md me b">/graphql</code>路线上的服务器</li><li id="0d16" class="ob oc iq jp b jq ok ju ol jy om kc on kg oo kk og oh oi oj bi translated">我们检查服务器响应是否有状态码<code class="fe mb mc md me b">200</code>，以及响应负载是否与我们的<code class="fe mb mc md me b">exptectedResponse</code>匹配</li></ol><p id="943a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经定义了我们的测试用例，让我们通过简单地输入<code class="fe mb mc md me b">npm run test</code>来运行它:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/62a4c8e7e1b5870253eab45ab7b11465.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*Z7V2IK-IudJaZ4dAFevWxw.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Passing tests of “integration.spec.ts”</figcaption></figure><h2 id="fff5" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">结论</h2><p id="b3fc" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">我希望我可以向您展示，将GraphQL添加到Fastify服务器并不复杂，并且我提供的小样本代码可以帮助您在创建一个新的GraphQL web服务器时有一个小小的开端，这个服务器已经包含了一些工作林挺和测试设置。</p><p id="1900" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您花时间阅读我的文章。</p><h2 id="8aa9" class="mf mg iq bd mh mi mj dn mk ml mm dp mn jy mo mp mq kc mr ms mt kg mu mv mw mx bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jn jo iq jp b jq my js jt ju mz jw jx jy na ka kb kc nb ke kf kg nc ki kj kk ij bi translated">如果你想联系我，请在LinkedIn上打电话给我。</p><p id="c598" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另外，请随意查看<a class="ae kl" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">我的书籍推荐</a>📚。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><div class="kn ko kp kq gt lf"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">我的书籍推荐</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="lo l"><div class="oq l lq lr ls lo lt kw lf"/></div></div></a></div></div></div>    
</body>
</html>
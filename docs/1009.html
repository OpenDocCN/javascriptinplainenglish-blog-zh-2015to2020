<html>
<head>
<title>Deep dive into ES6 Symbols</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入探究ES6符号</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deep-dive-into-es6-symbols-3b44f4ba7eb3?source=collection_archive---------0-----------------------#2020-01-14">https://javascript.plainenglish.io/deep-dive-into-es6-symbols-3b44f4ba7eb3?source=collection_archive---------0-----------------------#2020-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5facbe87166d1115401b504c63324742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CTxOCsIKSsG0piTn.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image by <a class="ae kc" href="https://carbon.sh" rel="noopener ugc nofollow" target="_blank">carbon.sh</a></figcaption></figure><p id="8798" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2015年发布的ES6引入了很多功能:<code class="fe lb lc ld le b">class</code>关键字、生成器、<code class="fe lb lc ld le b">const</code> / <code class="fe lb lc ld le b">let</code>声明等等。但是有一个不为人知的特性是<code class="fe lb lc ld le b">Symbol</code>数据结构。在这篇文章中，我将解释什么是ES6符号，为什么你可能想要使用它们，以及它们是如何工作的。</p><p id="3207" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实际类型叫做<code class="fe lb lc ld le b">symbol</code>，<code class="fe lb lc ld le b">Symbol()</code>是它的构造函数。<code class="fe lb lc ld le b">symbol</code>是一个<em class="lf">原语</em>数据类型。一个<em class="lf">原语</em>数据类型意味着<code class="fe lb lc ld le b">symbol</code>不是一个对象，也没有附加到它的方法。此外，基本数据类型还有一个重要的属性:不变性。观察原始数据类型和复杂数据类型之间的差异:</p><figure class="lg lh li lj gt jr"><div class="bz fp l di"><div class="lk ll l"/></div></figure><h1 id="f82a" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">ES6符号是做什么的？</h1><p id="6d6a" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">ES6符号的主要目的是返回唯一的值。就是这样。您将一个人类可读的名称传递给符号构造函数，它将返回一个可以在其他地方使用的唯一值。事实上，这些值是如此独特，以至于可能会令人困惑:</p><figure class="lg lh li lj gt jr"><div class="bz fp l di"><div class="lk ll l"/></div></figure><p id="e0b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您永远不会直接使用符号值，也没有简单的方法来这样做。如果您想在代码库中的其他地方访问相同的符号，您可以使用<code class="fe lb lc ld le b">Symbol.for()</code>:</p><figure class="lg lh li lj gt jr"><div class="bz fp l di"><div class="lk ll l"/></div></figure><p id="b542" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接受一个符号的键，并试图从全局符号注册表中获取这个符号。如果没有找到，它将创建一个，存储并返回。你可以想象它是这样工作的(非常简化的版本):</p><figure class="lg lh li lj gt jr"><div class="bz fp l di"><div class="lk ll l"/></div></figure><h1 id="e198" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">ES6符号有什么用途？</h1><p id="b524" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">符号最常见的用例是将其用作对象属性。它们的优点是这些属性不会出现在属性枚举中(例如<code class="fe lb lc ld le b">for..of</code>循环)，这使得它们非常适合元编程和定义对象的隐藏/内部方法。</p><p id="ece0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数JS引擎内部已经在使用符号，因此有了元编程特性。例如，iterable对象有一个由<code class="fe lb lc ld le b">for..of</code>循环使用的<code class="fe lb lc ld le b">Symbol.iterator</code>函数。可以被转换为图元的对象(<code class="fe lb lc ld le b">String</code>、<code class="fe lb lc ld le b">Number</code>等)。)有一个这样做的<code class="fe lb lc ld le b">Symbol.toPrimitive</code>函数。以下是它们的完整列表:</p><figure class="lg lh li lj gt jr"><div class="bz fp l di"><div class="lk ll l"/></div></figure><h1 id="8f54" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">ES6符号不用于什么？</h1><p id="77ca" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">理解符号不能做什么也是非常重要的，因为在这里它会变得有点混乱。我的第一个例子是关于Redux的，所以如果你不熟悉它，你可以跳到下一段。现在，在redux动作创建器中使用符号作为动作类型可能很有诱惑力。这也是我的第一个想法，但有一个很好的论点，符号不适合它。原因是符号是不可序列化的，并且(还)没有办法将它们保存到存储器中，或者发送到另一个实体。因此，如果使用符号作为redux动作的类型，重放、持久性甚至调试都将不起作用。你可以关注<a class="ae kc" href="https://github.com/reduxjs/redux/issues/4" rel="noopener ugc nofollow" target="_blank">这个</a>讨论，了解更多信息。</p><p id="06cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">符号也不是定义<em class="lf">私有</em>对象属性的方法。即使这些属性不会出现在常规的枚举中，您仍然可以使用<code class="fe lb lc ld le b">Object.getOwnPropertySymbols</code>来访问它们。我们仍在等待真正的私有财产，这个提议可能就是它。</p><p id="eaec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您阅读本文，希望您觉得有用。请随时分享你的想法或在评论中纠正我。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Introduction to Angular Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角形介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-angular-forms-4f5ce6da55e?source=collection_archive---------7-----------------------#2020-04-12">https://javascript.plainenglish.io/introduction-to-angular-forms-4f5ce6da55e?source=collection_archive---------7-----------------------#2020-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d9983df7d907279f98ae3b43ff6afb16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IkIvnOqX_3LCV9Gm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jrduncan11?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John Duncan</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f773" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="0b1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看用Angular创建表单的基础。</p><h1 id="62e4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不同种类的形式</h1><p id="ef9d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Angular提供了两种不同的方法来处理表单中的用户输入。</p><p id="73b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们要么是反应式的，要么是模板驱动的。它们都从视图中捕获事件，验证用户输入，创建表单模型和数据模型进行更新，并提供跟踪更改的方法。</p><p id="6418" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">反应型更强。它们更具可扩展性、可重用性和可测试性。</p><p id="8fca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模板驱动的表单对于在应用程序中添加简单的表单非常有用。它们很容易添加，但是它们的伸缩性不如反应式表单。</p><h1 id="45f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">共同基础</h1><p id="e125" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这两种形式共享以下构件:</p><ul class=""><li id="41ff" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">FormControl</code> —跟踪单个表单控件的值和验证状态</li><li id="0b13" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">FormGroup</code> —跟踪表单控件集合的相同值和状态</li><li id="4cbd" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">FormArray</code> —跟踪表单控件数组的相同值和状态</li><li id="7548" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la mj mk ml mm bi translated"><code class="fe mn mo mp mq b">ControlValueAccessor</code> —在有角度的<code class="fe mn mo mp mq b">FormControl</code>实例和本地DOM元素之间建立桥梁。</li></ul><h1 id="4ba8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">表单模型设置</h1><p id="a3c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过设置输入元素的<code class="fe mn mo mp mq b">formControl</code>属性来设置反应式表单的表单模型。</p><p id="1100" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码:</p><p id="cbe9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.module.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="ec3f" class="ne lc iq mq b gy nf ng l nh ni">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule } from "@angular/core";<br/>import { ReactiveFormsModule } from "@angular/forms";<br/>import { AppComponent } from "./app.component";</span><span id="916b" class="ne lc iq mq b gy nj ng l nh ni">@NgModule({<br/>  declarations: [AppComponent],<br/>  imports: [BrowserModule, ReactiveFormsModule],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule {}</span></pre><p id="eb66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="90f1" class="ne lc iq mq b gy nf ng l nh ni">import { Component } from "@angular/core";<br/>import { FormControl } from "@angular/forms";</span><span id="41c4" class="ne lc iq mq b gy nj ng l nh ni">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  nameControl = new FormControl("");<br/>}</span></pre><p id="b47b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.html</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="6db6" class="ne lc iq mq b gy nf ng l nh ni">&lt;input type="text" [formControl]="nameControl" /&gt;</span></pre><p id="e0e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将<code class="fe mn mo mp mq b">ReactiveFormsModule</code>添加到了<code class="fe mn mo mp mq b">AppModule</code>中。</p><p id="ae7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe mn mo mp mq b">AppComponent</code>中创建了<code class="fe mn mo mp mq b">nameControl</code>。</p><p id="8734" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们将<code class="fe mn mo mp mq b">formControl</code>属性设置为<code class="fe mn mo mp mq b">nameControl</code>，以将输入连接到<code class="fe mn mo mp mq b">FomControl</code>。</p><h1 id="697a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板驱动表单中的设置</h1><p id="31e2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe mn mo mp mq b">ngModel</code>指令将输入值绑定到组件中的a字段。</p><p id="9c6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样写:</p><p id="791d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.module.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="9539" class="ne lc iq mq b gy nf ng l nh ni">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule } from "@angular/core";<br/>import { FormsModule } from "@angular/forms";<br/>import { AppComponent } from "./app.component";</span><span id="0e1f" class="ne lc iq mq b gy nj ng l nh ni">@NgModule({<br/>  declarations: [AppComponent],<br/>  imports: [BrowserModule, FormsModule],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule {}</span></pre><p id="1c57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.ts</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="6741" class="ne lc iq mq b gy nf ng l nh ni">import { Component } from "@angular/core";</span><span id="487d" class="ne lc iq mq b gy nj ng l nh ni">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  name: string;<br/>}</span></pre><p id="e7b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mn mo mp mq b">app.component.html</code>:</p><pre class="mw mx my mz gt na mq nb nc aw nd bi"><span id="f674" class="ne lc iq mq b gy nf ng l nh ni">&lt;input type="text" [(ngModel)]="name" /&gt;</span></pre><p id="1a16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe mn mo mp mq b">app.module.ts</code>中导入了<code class="fe mn mo mp mq b">FormsModule</code>。</p><p id="f640" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe mn mo mp mq b">AppComponent</code>中创建了<code class="fe mn mo mp mq b">name</code>字段，将数据绑定到该字段。</p><p id="9a1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过<code class="fe mn mo mp mq b">ngModel</code>将输入值绑定到<code class="fe mn mo mp mq b">name</code>。</p><p id="d5f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">反应式表单和模板驱动表单都提供了模型和输入之间的双向绑定。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/02f99446cce3ee1086cf89f1ad27c787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9fJKzAIZsaWCdvld"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@noah2199?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Noah Rosenfield</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b14d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应形式的数据流</h1><p id="2442" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从视图到模型，数据流遵循以下步骤:</p><ol class=""><li id="0c11" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nl mk ml mm bi translated">用户在输入中键入一些内容</li><li id="84c4" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">表单输入发出输入事件</li><li id="4fa3" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">控件值访问器监听表单输入上的事件，并将新值发送到<code class="fe mn mo mp mq b">FormControl</code>实例。</li><li id="3ac3" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">FormControl</code>实例通过<code class="fe mn mo mp mq b">valueChanges</code>可观察对象发出新值。</li><li id="fb5d" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">订阅<code class="fe mn mo mp mq b">valueChanges</code>接收新值</li></ol><p id="f685" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从模型到视图，流程如下:</p><ol class=""><li id="1ea9" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nl mk ml mm bi translated">用户调用<code class="fe mn mo mp mq b">nameControl.setValue</code>方法来更新<code class="fe mn mo mp mq b">FormControl</code>值</li><li id="7bb6" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">FormControl</code>实例通过<code class="fe mn mo mp mq b">valueChanges</code>可观察对象发出新值。</li><li id="3e0c" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">任何<code class="fe mn mo mp mq b">valueChanges</code>可观察值的订阅者都会收到新值</li><li id="49c8" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">表单输入元素上的控件值访问器用新值更新元素</li></ol><h1 id="697b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板驱动表单中的数据流</h1><p id="c8a1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">模板驱动表单中从视图到模型的数据如下:</p><ol class=""><li id="ab72" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nl mk ml mm bi translated">用户在输入元素中输入内容。</li><li id="e4d6" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">input元素发出一个带有输入值的输入事件</li><li id="e9ad" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">附加到输入的控制值访问器触发了<code class="fe mn mo mp mq b">FormControl</code>实例上的<code class="fe mn mo mp mq b">setValue</code>方法</li><li id="ad27" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">FormControl</code>实例通过<code class="fe mn mo mp mq b">valueChanges</code> observable发出新值</li><li id="14e7" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">任何<code class="fe mn mo mp mq b">valueChanges</code>可观察值的订阅者都会收到新值</li><li id="2778" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">控制值访问器还调用发出<code class="fe mn mo mp mq b">ngModelChange</code>事件的<code class="fe mn mo mp mq b">NgModel.viewToModelUpdate</code>方法</li><li id="714e" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">ngModelChanges</code>触发模型值更新</li></ol><p id="b579" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从模型到视图，流程如下:</p><ol class=""><li id="a730" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la nl mk ml mm bi translated">该值在组件中更新</li><li id="09a3" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">变化检测开始</li><li id="9785" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">因为输入值已更改，所以在<code class="fe mn mo mp mq b">NgModel</code>指令实例上调用了<code class="fe mn mo mp mq b">ngOnChanges</code></li><li id="d29f" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">ngOnChanges</code>将一个异步任务排队以设置<code class="fe mn mo mp mq b">FormControl</code>实例的值</li><li id="fc71" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">变更检测完成</li><li id="1c4a" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">设置<code class="fe mn mo mp mq b">FormControl</code>实例值的任务在下一个节拍运行</li><li id="2da3" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated"><code class="fe mn mo mp mq b">FormControl</code>实例通过<code class="fe mn mo mp mq b">valueChanges</code>可观察对象发出最新的变化</li><li id="90f0" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">任何<code class="fe mn mo mp mq b">valueChanges</code>可观察值的订阅者都会收到新值</li><li id="1122" class="me mf iq kf b kg mr kk ms ko mt ks mu kw mv la nl mk ml mm bi translated">控件值访问器更新视图中的表单输入元素</li></ol><h1 id="2a84" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="266a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建角形作为反应或模板驱动的形式。</p><p id="ba53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">反应式表单更健壮，模板驱动的表单适合简单的表单。</p><p id="846a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们都有相同的部分。控制值访问器获取输入值并将其设置为模型。</p><h2 id="7513" class="ne lc iq bd ld nm nn dn lh no np dp ll ko nq nr lp ks ns nt lt kw nu nv lx nw bi translated">用简单英语写的JavaScript的注释</h2><p id="e737" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到submissions@javascriptinplainenglish.com<a class="ae kc" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"/></a>给我们，我们会把你添加为作者。</p><p id="b8fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"> <strong class="kf ir"> AI in Plain English </strong> </a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Automatically Format Your Code Before Pushing to the Remote Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在推送到远程服务器之前自动格式化您的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-automatically-format-your-code-before-pushing-to-the-remote-server-a5ace1dc2fa7?source=collection_archive---------6-----------------------#2020-10-25">https://javascript.plainenglish.io/how-to-automatically-format-your-code-before-pushing-to-the-remote-server-a5ace1dc2fa7?source=collection_archive---------6-----------------------#2020-10-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/24591e4c35ec0b208225605b66feb9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NoK4YkhyxbK81k3ueePufA.png"/></div></div></figure><h2 id="6bed" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">快速小结</h2><p id="413d" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">如果你和两个以上的开发人员一起开发一个项目，你可能会注意到不同格式的代码会产生不同类型的问题，比如合并冲突、代码不可读等等。为了避免这种情况，我们可以设置git挂钩，在推入远程服务器之前格式化代码。</p><h2 id="55b7" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">我们开始吧</h2><p id="e437" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">为了简单起见，我将使用一个简单的react应用程序，它通过create-react-app来创建。</p><h2 id="3660" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">设置Git挂钩</h2><p id="92af" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">Git挂钩基本上是一种事件监听器，你可以通过使用git挂钩来监听任何git事件。</p><p id="20ec" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">在Javascript世界里，<a class="ae lr" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> Husky </a>让Git挂钩变得简单🐶汪汪！。</p><p id="525c" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">让我们在项目中安装哈士奇。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="d96e" class="jv jw in lx b gy mb mc l md me">npm install husky --save-dev</span></pre><p id="bc4b" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">我们将使用<a class="ae lr" href="https://www.npmjs.com/package/lint-staged" rel="noopener ugc nofollow" target="_blank"> lint-staged </a></p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="a620" class="jv jw in lx b gy mb mc l md me">npm install lint-staged</span></pre><p id="ba80" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">现在打开package.json文件并添加这个条目外壳条目</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="4f2d" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">这段代码将在代码提交之前运行，这意味着无论何时运行命令<code class="fe mh mi mj lx b">git commit -m "dsad"</code>，它都会运行。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="7bf8" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">通过使用lint-staged，您可以单独为所需的文件扩展名运行Git挂钩。</p><h2 id="0041" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">格式化代码</h2><p id="6bb5" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">为了格式化代码，我们将使用<a class="ae lr" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮的</a>。漂亮是一个优秀的工具，通过编程来格式化代码。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="0be9" class="jv jw in lx b gy mb mc l md me">npm install prettier --save-dev</span></pre><p id="d58f" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">如果你想定制格式化，你可以在<code class="fe mh mi mj lx b">package.json</code>上添加<code class="fe mh mi mj lx b">prettier</code>条目</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h2 id="95ff" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">排序导入</h2><p id="c41f" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">很多时候，import语句会产生合并冲突。我们可以通过配置来避免Githooks上的排序导入。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="12fe" class="jv jw in lx b gy mb mc l md me">npm install import-sort-cli import-sort-style-renke --save-dev</span></pre><p id="f442" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><a class="ae lr" href="https://npmjs.com/package/import-sort-style-renke" rel="noopener ugc nofollow" target="_blank">导入-排序-样式-任可</a>是<code class="fe mh mi mj lx b">sort-importen</code>工具的一个样式，与其他样式相比，它非常好。</p><p id="3601" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">让我们在package.json中配置<a class="ae lr" href="https://npmjs.com/package/import-sort-cli" rel="noopener ugc nofollow" target="_blank"> import-sort-cli </a></p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="b77d" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">好了，我们的最终代码！</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h2 id="e183" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">让我们测试你的代码</h2><p id="5dc6" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">每当你提交代码的时候,<code class="fe mh mi mj lx b">lint-staged</code>就会运行得更漂亮并导入排序。这些将自动格式化和导入代码。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="7c8b" class="jv jw in lx b gy mb mc l md me">git add .<br/>git commit -m "Test the husky"</span></pre></div><div class="ab cl mk ml hr mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ig ih ii ij ik"><p id="c0ab" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><strong class="kt io"> <em class="mr">感谢坚持到最后:)</em> </strong> <em class="mr">如果你喜欢这篇文章，可以考虑</em> <a class="ae lr" href="https://twitter.com/NaveenDA_" rel="noopener ugc nofollow" target="_blank"> <em class="mr">在Twitter上关注我</em> </a> <em class="mr">并与你的开发者朋友分享这篇文章🐋😀</em></p></div></div>    
</body>
</html>
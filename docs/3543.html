<html>
<head>
<title>Using JavaScript Symbols in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中使用JavaScript符号</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-javascript-symbols-in-react-js-5b0fcd8b6660?source=collection_archive---------1-----------------------#2020-10-07">https://javascript.plainenglish.io/using-javascript-symbols-in-react-js-5b0fcd8b6660?source=collection_archive---------1-----------------------#2020-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/261f414731d7b3150cc53d138476447f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Pj2rtZCIHhho1_cMBjvMg.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@goshua13?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Joshua Aragon</a> on <a class="ae jd" href="https://unsplash.com/s/photos/reactjs-%2Bjavascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="e370" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">React应用程序中JavaScript符号的用例</h2></div><p id="2739" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ES6版本的一个特性是<code class="fe lr ls lt lu b">Symbol</code>数据结构——但是许多开发人员并不知道它在应用程序代码中的用例。在本文中，我将通过一个场景来讲述我认为<code class="fe lr ls lt lu b">Symbol</code>可能是最合适的。</p><p id="f880" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最近，我在开发一个功能，其中我们有嵌套的表单组件，需要从父组件重置或验证。最初，我想通过将布尔值作为道具从父组件传递给子组件来实现，方法是将它设置为true，然后在验证完成后将其重置为false，以便为下一次迭代做好准备，如果我们想要再次验证/重置表单的话。</p><p id="3413" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以，一个简单的伪代码看起来像这样:</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lv"><img src="../Images/2eef337c95388c362cac295bfd19e819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ld3d_H1a214xN_2fkUgPcA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Triggering change detection to run validation in child component from parent component</figcaption></figure><p id="9205" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在父组件中，我们先将<code class="fe lr ls lt lu b">validate</code>值设置为<code class="fe lr ls lt lu b">true</code>，然后将其重置为<code class="fe lr ls lt lu b">false</code>。在子组件中，我们寻找<code class="fe lr ls lt lu b">validate</code>值来运行我们的验证逻辑。但是正如你注意到的，我们必须在每次完成验证后重置<code class="fe lr ls lt lu b">validate</code>标志，以便以后运行验证。</p><p id="c2c4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那么，我们为什么要这样做呢？这个问题的答案与变更检测如何运行有关。在react中，像许多现代框架一样，变化检测过程运行的方式之一是当组件中的属性值发生变化时。如果该值是一个基本类型，它将比较前一个值和当前值，其中对于对象，它检查引用。</p><p id="4785" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">来自MDN文档:</p><p id="517e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ma">数据类型</em> <strong class="kx jh"> <em class="ma">符号</em> </strong> <em class="ma">是一种</em> <a class="ae jd" href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" rel="noopener ugc nofollow" target="_blank"> <em class="ma">原始数据类型</em> </a> <em class="ma">。</em> <code class="fe lr ls lt lu b"><em class="ma">Symbol()</em></code> <em class="ma">函数返回类型为</em> <strong class="kx jh"> <em class="ma">符号</em> </strong> <em class="ma">的值，具有公开内置对象的几个成员的静态属性，具有公开全局符号注册表的静态方法，类似于内置对象类，但作为构造函数是不完整的，因为它不支持语法“</em> <code class="fe lr ls lt lu b"><em class="ma">new Symbol()</em></code> <em class="ma">”。</em></p><p id="6f82" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以，符号是一种原始类型，但没有两个符号是相等的。这正是我们需要的。</p><p id="a079" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们用符号重写我们的逻辑，将会变成如下所示:</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lv"><img src="../Images/1be7b9c0acaee41c89f42d5e2be4e824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IzasLMSfRK8mHS9M5abTVg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Symbols to trigger validation from parent components</figcaption></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="f977" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们现在想要在子组件中运行验证时，我们需要通过调用<code class="fe lr ls lt lu b">Symbol()</code>传递一个新的符号。</p><h1 id="8d71" class="mi mj jg bd mk ml mm mn mo mp mq mr ms km mt kn mu kp mv kq mw ks mx kt my mz bi translated"><strong class="ak">概要:</strong></h1><p id="46ce" class="pw-post-body-paragraph kv kw jg kx b ky na kh la lb nb kk ld le nc lg lh li nd lk ll lm ne lo lp lq ij bi translated">符号是唯一的数据类型，没有两个符号是不相等的。这个特性开辟了在React应用程序中使用它们的许多可能性之一，通过将它们作为道具传递来运行子组件中的代码。</p><p id="7385" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢阅读！关注更多有趣的文章。</p><p id="b71a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae jd" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kx jh">！</strong></p></div></div>    
</body>
</html>
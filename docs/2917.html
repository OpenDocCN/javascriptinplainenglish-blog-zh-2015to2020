<html>
<head>
<title>Reducing Headaches with Some JavaScript Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用一些JavaScript最佳实践来减少麻烦</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/reducing-headaches-with-some-javascript-best-practices-f7ec0cea5e0b?source=collection_archive---------6-----------------------#2020-08-05">https://javascript.plainenglish.io/reducing-headaches-with-some-javascript-best-practices-f7ec0cea5e0b?source=collection_archive---------6-----------------------#2020-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6c59bf33f1fa3452e593cd664b0dee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KWm60hqybpgfzZVC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@fahimhasan999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fahim</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5d09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="8c92" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">首先声明所有变量</h1><p id="ab27" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了更容易找到变量，我们可以在顶部声明它们。</p><p id="631e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9e36" class="mn lc iq mj b gy mo mp l mq mr">function foo(){<br/>  let i = 100;<br/>  console.log(i);<br/>  let j;<br/>}</span></pre><p id="aadc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:"</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1818" class="mn lc iq mj b gy mo mp l mq mr">function foo(){<br/>  let i = 100;<br/>  let j;<br/>  console.log(i);<br/>}</span></pre><p id="d48e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们在寻找变量定义时就不会有困难。</p><p id="6f62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也不用担心使用<code class="fe ms mt mu mj b">var</code>或函数声明时的提升问题。</p><h1 id="75d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">小心使用类型of</h1><p id="4383" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须知道<code class="fe ms mt mu mj b">typeof null</code>返回<code class="fe ms mt mu mj b">'object'</code>。</p><p id="0c13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以不能用它来查<code class="fe ms mt mu mj b">null</code>。</p><p id="1da6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，<code class="fe ms mt mu mj b">typeof NaN</code>返回<code class="fe ms mt mu mj b">'number'</code>，这可能不是我们所期望的。</p><p id="cd5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们不应该用它们来检查这些。</p><h1 id="4c58" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">小心对待parseInt</h1><p id="133d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">也有一些我们必须考虑的怪癖。</p><p id="ff7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回它找到的所有转换成数字的数字字符。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b4db" class="mn lc iq mj b gy mo mp l mq mr">parseInt("11");</span></pre><p id="7e37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会返回11。</p><p id="7a01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1838" class="mn lc iq mj b gy mo mp l mq mr">parseInt("11james");</span></pre><p id="41b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也将返回11。</p><p id="a5b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ff78" class="mn lc iq mj b gy mo mp l mq mr">parseInt("11.22");</span></pre><p id="50df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也返回11。</p><p id="728e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该注意这些怪癖，这样当我们试图用<code class="fe ms mt mu mj b">parseInt</code>将非数字转换成数字时就不会得到意想不到的结果。</p><p id="9824" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，如果数字从0开始，它会假设这是一个八进制数。</p><p id="b6f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="34b5" class="mn lc iq mj b gy mo mp l mq mr">parseInt("08");</span></pre><p id="49b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么在旧的浏览器中它将返回0。</p><p id="51d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，在现代浏览器中，它应该被转换为十进制数。</p><h1 id="0751" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用开关失败</h1><p id="9135" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在<code class="fe ms mt mu mj b">switch</code>语句的每个<code class="fe ms mt mu mj b">case</code>子句中，我们应该在子句的末尾有一个<code class="fe ms mt mu mj b">break</code>或<code class="fe ms mt mu mj b">return</code>语句。</p><p id="c2dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c186" class="mn lc iq mj b gy mo mp l mq mr">switch (val) {<br/>  case 1:<br/>    console.log('One');<br/>    break;<br/>  case 2:<br/>    console.log('Two');<br/>    break;<br/>  case 3:<br/>    console.log('Three');<br/>    break;<br/>  default:<br/>    console.log('Unknown');<br/>    break;<br/>}</span></pre><p id="e6c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以便JavaScript解释器不会运行匹配的<code class="fe ms mt mu mj b">case</code>子句下的代码。</p><h1 id="5aa1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免For…循环</h1><p id="0041" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对于数组，应该避免for-in循环。</p><p id="779f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它不能保证迭代顺序，而且比标准的for循环要慢。</p><p id="e88e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它用于遍历对象的非继承和继承属性。</p><p id="6ab2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着以下循环是不等价的:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1b7e" class="mn lc iq mj b gy mo mp l mq mr">for (let i = 0; i &lt; arr.length; i++) {}</span><span id="f8b1" class="mn lc iq mj b gy mv mp l mq mr">for (let i in arr) {}</span></pre><p id="d6d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想以更短的方式遍历数组，我们可以使用for-of循环:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ddeb" class="mn lc iq mj b gy mo mp l mq mr">for (let a in arr) {}</span></pre><p id="2c62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">a</code>是数组条目。</p><h1 id="44a5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免使用保留的或特殊的词语</h1><p id="3a25" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该使用保留字来定义我们自己的标识符。</p><p id="3926" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果关闭了严格模式，这是允许的。</p><p id="0ad6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以定义如下函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6227" class="mn lc iq mj b gy mo mp l mq mr">function foo(arguments){}</span></pre><p id="eb5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这在严格模式关闭时是允许的。</p><p id="eaff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它是开着的，那么我们会得到一个错误。</p><p id="2d80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是打开严格模式的一个很好的理由。</p><p id="bad1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以避免定义与保留字同名的标识符。</p><h1 id="40f3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">保持一致</h1><p id="638c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该保持代码风格的一致性。</p><p id="48e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用ESLint可以很容易做到这一点。</p><p id="3145" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它很擅长为我们解决这些样式问题，所以我们不必担心它们。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ce32070051448738ab825f1b08e5976a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rL16NmP9lPA1pevH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@melissaaskew?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Melissa Askew</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9a2d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2f84" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过遵循一些简单易行的规则来减少头痛。</p><h2 id="ce4c" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="a953" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
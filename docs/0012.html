<html>
<head>
<title>Use Yup with Redux-form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Yup与Redux-form一起使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/use-yup-with-redux-form-684d6c23ab41?source=collection_archive---------1-----------------------#2018-07-07">https://javascript.plainenglish.io/use-yup-with-redux-form-684d6c23ab41?source=collection_archive---------1-----------------------#2018-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d1c460585aca3246a3055d54546c614e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*erClk0tCK2gB6XO1"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@fr3nks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daniel Frank</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f86e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我想分别用<code class="fe ky kz la lb b"><a class="ae jz" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank">Yup</a></code>和<code class="fe ky kz la lb b"><a class="ae jz" href="https://github.com/jaredpalmer/formik" rel="noopener ugc nofollow" target="_blank">Formik</a></code>替换<code class="fe ky kz la lb b">Joi</code>和<code class="fe ky kz la lb b">Redux-Form</code>。“现在你为什么要这么做！?"，你可能会问。好吧，让我们快速地过一遍，是和福米克的原因。</p><h2 id="3e1e" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">为什么是的</h2><ol class=""><li id="ca1b" class="lv lw in kc b kd lx kh ly kl lz kp ma kt mb kx mc md me mf bi translated">比Joi 轻得多的<a class="ae jz" href="https://bundlephobia.com/result?p=yup@0.25.1" rel="noopener ugc nofollow" target="_blank"/>。</li></ol><p id="87f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是“轻量级”如此重要的原因:</p><blockquote class="mg mh mi"><p id="b047" class="ka kb mj kc b kd ke kf kg kh ki kj kk mk km kn ko ml kq kr ks mm ku kv kw kx ig bi translated"><strong class="kc io">TL；dr:代码少=解析/编译少+传输少+解压少</strong> <a class="ae jz" href="https://medium.com/dev-channel/the-cost-of-javascript-84009f51e99e" rel="noopener"> <em class="in">来源</em> </a></p></blockquote><p id="2502" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.更容易从返回的错误对象中解析错误消息。</p><p id="9cb4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.非常灵活地定制错误消息，没有字符串操作诡计。</p><p id="c2ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.Yup与Joi共享非常相似的语法和方法名，使得替换Joi成为一件容易的事情。</p><h2 id="351a" class="lc ld in bd le lf lg dn lh li lj dp lk kl ll lm ln kp lo lp lq kt lr ls lt lu bi translated">为什么是福米克</h2><p id="aa54" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl mn kn ko kp mo kr ks kt mp kv kw kx ig bi translated">见<a class="ae jz" href="https://github.com/jaredpalmer/formik#why-not-redux-form" rel="noopener ugc nofollow" target="_blank">为什么不是Redux-Form？</a></p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="9c88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然而，对我来说，用Formik替换redux-form比用Yup替换Joi要困难得多，因此这里有一篇关于它的“友好的”中型文章——让Yup很好地使用redux-form的要点。</p><p id="ae2a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们创建一个验证器函数，稍后它将接受我们的<code class="fe ky kz la lb b">Yup</code>模式。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="c70d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我遇到的主要问题对我来说并不明显——直到我阅读了<a class="ae jz" href="https://github.com/patwritescode/redux-form-yup/" rel="noopener ugc nofollow" target="_blank"> redux-form-yup </a>包的<a class="ae jz" href="https://github.com/patwritescode/redux-form-yup/blob/master/src/asyncValidate.ts" rel="noopener ugc nofollow" target="_blank">代码</a>——是<code class="fe ky kz la lb b">Line-3</code>上的那个<code class="fe ky kz la lb b">abortEarly: false</code>对象。其默认值为<code class="fe ky kz la lb b">true</code>，这意味着:</p><blockquote class="mg mh mi"><p id="388b" class="ka kb mj kc b kd ke kf kg kh ki kj kk mk km kn ko ml kq kr ks mm ku kv kw kx ig bi translated"><code class="fe ky kz la lb b"><em class="in">abortEarly</em></code>:在第一个错误时从验证方法返回，而不是在所有验证运行之后。</p></blockquote><p id="f269" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，如果您希望在第一次呈现时验证所有字段的行为，您应该将它设置为<code class="fe ky kz la lb b">false</code>，在我看来，这将产生一个好的UX，例如，如果用户做的第一件事是单击“提交”按钮，他们将会看到所有字段的错误消息。</p><p id="57ee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们将在redux-form组件中使用上面的验证函数！：</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="974d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是我在这方面的全部内容！谢谢！</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/762c192a0a9a74b8ae1766233c9a88e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zXNRib66Aebce6MM"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@yongchuannnnn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yong Chuan</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>
<html>
<head>
<title>React Tips — State vs Props, Focus Inputs, and Conditional Rendering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—状态与道具、焦点输入和条件渲染</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-state-vs-props-focus-inputs-and-conditional-rendering-a948ef1f4a7e?source=collection_archive---------5-----------------------#2020-07-19">https://javascript.plainenglish.io/react-tips-state-vs-props-focus-inputs-and-conditional-rendering-a948ef1f4a7e?source=collection_archive---------5-----------------------#2020-07-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/682f0176b648c68a4e3de3e575dbf28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5DjExo_Yq_uUC-Vy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sharonmccutcheon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sharon McCutcheon</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="20f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="3678" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">呈现后在输入字段上设置焦点</h1><p id="a452" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过给输入字段分配一个ref来设置焦点，并对其调用<code class="fe me mf mg mh b">focus</code>。</p><p id="4d60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0c06" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component{<br/>  componentDidMount(){<br/>    this.nameInput.focus();<br/>  }<br/>  render() {<br/>    return(<br/>      &lt;div&gt;<br/>        &lt;input <br/>          ref={(input) =&gt; { this.nameInput = input; }} <br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/>    <br/>ReactDOM.render(&lt;App /&gt;, document.getElementById('app'));</span></pre><p id="ee83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用带有<code class="fe me mf mg mh b">ref</code>属性的ref设置输入。</p><p id="64c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe me mf mg mh b">componentDidMount</code>里把所有<code class="fe me mf mg mh b">focus</code>放在它身上，让它专注于负载，</p><p id="828d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们使用函数组件，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9f96" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect, useRef } from 'react';</span><span id="911c" class="mq lc iq mh b gy mv ms l mt mu">const Page = () =&gt; {<br/>  const textInput = useRef(null);</span><span id="d79b" class="mq lc iq mh b gy mv ms l mt mu">  useEffect(() =&gt; {<br/>    textInput.current.focus();<br/>  }, []);</span><span id="880f" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;input ref={textInput} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><p id="e6ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用带有的<code class="fe me mf mg mh b">useRef</code>钩子来获取一个ref，并将其传递给输入的<code class="fe me mf mg mh b">ref</code>属性。</p><p id="2269" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">useEffect</code>钩子中的<code class="fe me mf mg mh b">current.focus()</code>来将输入集中在load上。</p><p id="eaa7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为第二个参数的空数组将使回调只在第一次加载时运行。</p><h1 id="6e08" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用React获取初始状态</h1><p id="0c95" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用各种方法用React得到初始状态。</p><p id="b033" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe me mf mg mh b">createClass</code>，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a0c6" class="mq lc iq mh b gy mr ms l mt mu">const App = React.createClass({ <br/>  getInitialState () { <br/>    return {<br/>      items: []<br/>    }; <br/>  }<br/>});</span></pre><p id="2722" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">getInitialState</code>方法返回初始数据。</p><p id="8959" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于类组件，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2c51" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component {<br/>  constructor () {<br/>    super()<br/>    this.state = {<br/>      items: []<br/>    }<br/>  }<br/>};</span></pre><p id="322e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">this.state</code>设置为一个对象来设置<code class="fe me mf mg mh b">constructor</code>中的初始状态。</p><p id="3041" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于功能组件，我们通过编写使用<code class="fe me mf mg mh b">useState</code>钩子:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d18f" class="mq lc iq mh b gy mr ms l mt mu">import React, { useState } from 'react';</span><span id="e27a" class="mq lc iq mh b gy mv ms l mt mu">function App() {<br/>  const items = useState([]);<br/>}</span></pre><h1 id="fa1a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">React中状态和道具之间的差异</h1><p id="1639" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">知道React中状态和道具的区别很重要。</p><p id="ad1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">道具是不变的，从父代传递到子代。</p><p id="57f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">状态是动态的，它们停留在一个组件中。</p><p id="1333" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">setState</code>设置状态。</p><p id="4075" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过以下方式传递道具:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7093" class="mq lc iq mh b gy mr ms l mt mu">&lt;Child name={this.state.childsName} /&gt;</span></pre><p id="3e32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">name</code>是道具，<code class="fe me mf mg mh b">this.state.childName</code>是状态。</p><p id="7af3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过书写来改变状态:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1bc2" class="mq lc iq mh b gy mr ms l mt mu">this.setState({ childsName: 'some name' });</span></pre><p id="92f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一个对象来改变状态。</p><p id="c1ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以上都适用于类组件。</p><p id="8267" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于函数组件，属性在函数的参数中。</p><p id="53e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3feb" class="mq lc iq mh b gy mr ms l mt mu">function A(props) {<br/>  return &lt;h1&gt;{props.message}&lt;/h1&gt;<br/>}</span></pre><p id="a477" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">props</code>拥有所有的道具。</p><p id="2484" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们也可以通过编写以下内容来析构这些属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a51" class="mq lc iq mh b gy mr ms l mt mu">function A({ message }) {<br/>  return &lt;h1&gt;{message}&lt;/h1&gt;<br/>}</span></pre><h1 id="fd43" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">有条件地向反应组件添加属性</h1><p id="70d9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用布尔表达式有条件地添加属性。</p><p id="13d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="951e" class="mq lc iq mh b gy mr ms l mt mu">let cond = true;</span><span id="2b82" class="mq lc iq mh b gy mv ms l mt mu">return (<br/>  &lt;Button bsStyle={cond ? 'success' : undefined} /&gt;<br/>);</span></pre><p id="404a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是<code class="fe me mf mg mh b">true</code>我们可以检查<code class="fe me mf mg mh b">cond</code>返回<code class="fe me mf mg mh b">'success'</code>，否则返回<code class="fe me mf mg mh b">undefined</code>。</p><p id="9e62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="24c2" class="mq lc iq mh b gy mr ms l mt mu">const cond = true;</span><span id="4c86" class="mq lc iq mh b gy mv ms l mt mu">const component = (<br/>  &lt;div<br/>    value="foo"<br/>    { ...( cond &amp;&amp; { disabled: true } ) } /&gt;<br/>);</span></pre><p id="3469" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">cond</code>，如果是<code class="fe me mf mg mh b">true</code>，则返回<code class="fe me mf mg mh b">{ disabled: true }</code>。</p><h1 id="3146" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在React中显示或隐藏元素</h1><p id="cb4a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用一些boolan表达式显示或隐藏React中的元素。</p><p id="9598" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8d17" class="mq lc iq mh b gy mr ms l mt mu">const App = () =&gt; {<br/>  const [toggle, setToggle] = React.useState(false);<br/>  const onClick = () =&gt; setToggle(true);<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={onClick}&gt;click me&lt;/button&gt;<br/>      { toggle ? &lt;Results /&gt; : null }<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="5d8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">useState</code>钩子来创建<code class="fe me mf mg mh b">toggle</code>状态，使用<code class="fe me mf mg mh b">setToggle</code>函数来设置状态。</p><p id="81ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该函数用在<code class="fe me mf mg mh b">onClick</code>函数中，它是由一次点击触发的，因为我们将它传递到按钮的<code class="fe me mf mg mh b">onClick</code>道具中。</p><p id="d3af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当<code class="fe me mf mg mh b">toiggle</code>是<code class="fe me mf mg mh b">true</code>时，我们渲染<code class="fe me mf mg mh b">Result</code>组件。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4104af65aa8c064c7d06ea5b1ea3e706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZQyPMfh9sRGQ_hDE"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3b8b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0e03" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以切换状态以有条件地显示某些内容。</p><p id="5ba3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了聚焦一个输入，我们给这个输入分配一个ref，并对它调用<code class="fe me mf mg mh b">focus</code>。</p><p id="2b6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用各种方式设置组件的初始值。</p><p id="7621" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React中状态和道具有很大的区别。</p><h2 id="217d" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="af1d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
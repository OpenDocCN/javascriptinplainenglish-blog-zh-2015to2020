<html>
<head>
<title>Routing in Vue.js — Starting Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js中的布线—入门指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/routing-vue-js-starting-guide-81a8f39c5222?source=collection_archive---------2-----------------------#2020-09-22">https://javascript.plainenglish.io/routing-vue-js-starting-guide-81a8f39c5222?source=collection_archive---------2-----------------------#2020-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="6309" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">java描述语言</h2><div class=""/><div class=""><h2 id="506a" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在Vue.js中设置路由所需的一切</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/ff7017f81b7d6ead09047265a76a5738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_nmn8_XM-MqigO6EOS2Lg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://www.pexels.com/ru-ru/@tincho-fernandez-2641571?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Tincho Fernandez</a>: <a class="ae le" href="https://www.pexels.com/ru-ru/photo/4220739/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="9f17" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">随着web应用程序的出现，有必要使用JavaScript修改URL。<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">浏览器的历史API </strong> </a>来救场了。</p><p id="66cd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因此，所有主要的现代框架都允许您以编程方式控制路由，从而使URL与应用程序视图同步。</p><p id="707e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于Vue应用程序中的路由，您可以使用历史API创建自己的集成，但最好使用官方的Vue库— <a class="ae le" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Vue-Router </strong> </a></p><h1 id="741d" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">基本的东西</h1><p id="7bce" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">您甚至可以通过CDN安装开始使用它:</p><p id="0a0c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;script src="https://unpkg.com/vue-router"&gt;&lt;/script&gt;</strong></code></p><p id="13c9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是我们将从<em class="nc">【正确】</em>选项开始— <strong class="lh ja"> Vue Cli </strong>:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="077b" class="nh mc iq nb b gy ni nj l nk nl"><strong class="nb ja">yarn global add @vue/cli</strong></span><span id="49ec" class="nh mc iq nb b gy nm nj l nk nl"># OR</span><span id="38f1" class="nh mc iq nb b gy nm nj l nk nl"><strong class="nb ja">npm i -g @vue/cli</strong></span></pre><p id="4d79" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们使用VUE CLI和一个基本模板创建一个项目—默认([Vue 2] babel，eslint):</p><p id="faaa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">vue create vue-router-test-app</strong></code></p><h1 id="c392" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">最低配置</h1><p id="c009" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">添加路由器:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="1e14" class="nh mc iq nb b gy ni nj l nk nl"><strong class="nb ja">yarn add vue-router</strong></span><span id="774b" class="nh mc iq nb b gy nm nj l nk nl"># OR</span><span id="247a" class="nh mc iq nb b gy nm nj l nk nl"><strong class="nb ja">npm i --save vue-router</strong></span></pre><p id="b250" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们将最小路由器配置添加到<strong class="lh ja"> /src/main.js </strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="25f3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Routes是一个数组，数组中的每个元素都是一个对象，你需要在这里指定<code class="fe my mz na nb b">path</code>和<code class="fe my mz na nb b">component</code>。</p><p id="a3c0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要查看更改，您需要显示路由器组件— <code class="fe my mz na nb b">routerView</code>，它负责显示。为此，让我们更改<strong class="lh ja"> /src/App.vue </strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="984a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，去<strong class="lh ja"><em class="nc">http://localhost:8080/</em></strong>。我们将看到一个带有<strong class="lh ja">"/</strong>route的页面，其中显示了<strong class="lh ja"> HelloWorld.vue </strong>组件，而不是我们在App.vue中编写的标签<code class="fe my mz na nb b">router-view</code>。</p><h1 id="ab50" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路径层次结构</h1><p id="9735" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">让我们给<strong class="lh ja"> main.js </strong>(数组<code class="fe my mz na nb b">routes</code>)添加一个路由:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c3f8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们去地址<strong class="lh ja"><em class="nc">http://localhost:8080/</em></strong>板。我们将看到显示渲染功能的第二个页面。</p><h1 id="f2ce" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路线道具</h1><p id="f46d" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">让我们为<strong class="lh ja"> main.js </strong>中的<strong class="lh ja"><em class="nc">/</em></strong><em class="nc">板卡</em>走线确定子走线。对于子组件，您需要指定在父组件中的什么地方显示子组件<code class="fe my mz na nb b">router-view</code>。在我们的例子中，这是在渲染函数中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6043" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我提醒你，模板视图中的渲染函数看起来像这样:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="35a5" class="nh mc iq nb b gy ni nj l nk nl">&lt;template&gt;<br/>  &lt;div&gt;<br/>    Board Page<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="6bcb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们创建一个<strong class="lh ja"><em class="nc">/src/components/board . vue</em></strong><em class="nc"/>组件，内容为:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6455" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们转到地址<strong class="lh ja">http://localhost:8080/board/21</strong>，看看父组件和子组件<code class="fe my mz na nb b">Board</code>传递的参数<code class="fe my mz na nb b">id</code>等于21。</p><p id="a8c6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过组件<code class="fe my mz na nb b">this.$route.params</code>可获得路线参数。</p><p id="336b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果我们想更明确地显示组件对输入参数的依赖性，我们在配置路线时使用设置<code class="fe my mz na nb b">props: true</code>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="37ea" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">并且在<strong class="lh ja"><em class="nc">/src/components/</em>board . vue</strong>组件中，接受<code class="fe my mz na nb b">id</code>作为组件的输入参数:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="65e8" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路由元</h1><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="39f8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们现在可以从<strong class="lh ja"> HelloWorld.vue </strong>组件访问路线元数据，如下所示:<code class="fe my mz na nb b">this.$route.meta.dataInMeta</code>。</p><h1 id="3cc2" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">更深的Vue.js路由(嵌套子节点)</h1><p id="0f60" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">您可以更深入地研究子组件(直到服务器限制)。</p><p id="f4ab" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们为子路由创建一个子路由:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6e1e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">render函数现在被写成一个常规函数，因为您需要一个组件上下文:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f524" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们像普通组件一样通过路由器视图组件将参数传递给子组件的子组件。这听起来很复杂，但很直观。所以，我们降低了孩子的道具——孩子的孩子:<code class="fe my mz na nb b"><strong class="lh ja">&lt;router-view :prop-to-child="parseInt(id)" /&gt;</strong></code></p><h1 id="8b2d" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路径的解释</h1><p id="ff12" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">视图<code class="fe my mz na nb b">path: "child"</code>意味着我们引用父路径并继续它的路径:<code class="fe my mz na nb b">{parent-route}/child</code></p><p id="061e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">可以从子组件中引用路线的任何其他级别:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="ed47" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这个条目处理一个地址为:<strong class="lh ja"><em class="nc">http://localhost:8080/一级</em> </strong>的页面。</p><h1 id="9ea8" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">更宽的Vue.js路由(多路由器视图)</h1><p id="dd27" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">可以在一个组件中使用多个<code class="fe my mz na nb b">router-view</code>。为此，在routes配置中，我们编写了component - components，它接受一个对象，其中键是属性<code class="fe my mz na nb b">name</code><code class="fe my mz na nb b">router-view</code>。如果您指定键“default ”,那么如果该组件未被<code class="fe my mz na nb b">router-view</code>命名(没有属性<code class="fe my mz na nb b">name</code>),则将显示该组件。</p><p id="84ba" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> /src/main.js </strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="34a7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">/components/board . vue</strong>T36:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="7c2b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们去地址:<strong class="lh ja"><em class="nc">http://localhost:8080/board/23/child</em></strong>看一个切换主动路由器的小互动——views。</p><h1 id="bac4" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">404错误页面</h1><p id="6a9b" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">要创建错误页面，只需将以下结构放在路由列表的末尾:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="7504" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，当跟随一个不存在的路径(例如，<strong class="lh ja"><em class="nc">http://localhost:8080/mission</em></strong>)时，会显示一个错误组件。</p><p id="32cf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最好用这种形式写:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6cc6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们有了一个错误页面，我们可以问心无愧地重定向用户(如果有一天我们需要这么做怎么办)。</p><h1 id="09a0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路线保护</h1><p id="1a08" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">使用路由元数据和<code class="fe my mz na nb b">beforeEach</code>路由器挂钩执行路由保护:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f293" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，当试图访问需要授权的页面时，我们将被重定向到<strong class="lh ja"><em class="nc">/需要授权的</em> </strong>页面。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="4e26" class="mb mc iq bd md me nw mg mh mi nx mk ml kf ny kg mn ki nz kj mp kl oa km mr ms bi translated">路线之间的导航</h1><h1 id="2159" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">软件导航</h1><p id="bb6d" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">可以从应用程序中的任何地方调用编程导航，如下所示:</p><p id="807d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">$router.push('/dash/23/child')</strong></code></p><p id="97e7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果我们想要传递参数，我们需要使用基于路由名称的不同方法。</p><p id="a78f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们指定路线的名称<code class="fe my mz na nb b">/board/:id</code>:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="9b33" class="nh mc iq nb b gy ni nj l nk nl">...<br/>   children: [<br/>      {<br/>        path: "/board/:id",<br/>        name: 'board',<br/>        component: Board,<br/>        props: true,<br/>        children: [<br/>   ....</span></pre><p id="651c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们可以传递参数:</p><p id="6434" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">$router.push({ name: 'board', params: { id: 100500 }})</strong></code></p><p id="2110" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们将得到一个错误无效属性:属性id的类型检查失败。应为值为100500的字符串，但得到值为100500的数字。</p><p id="41d0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">原因是<code class="fe my mz na nb b">url</code>——它始终是一个数据类型<code class="fe my mz na nb b">String</code>，我们用类型<code class="fe my mz na nb b">Number</code>编程传递了它<code class="fe my mz na nb b">id</code>。修复很简单:我们在组件中列出可能的数据类型。</p><p id="44f3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="nc">组件/Board.vue </em> </strong> <em class="nc"> : </em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="c7b5" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路由器链接组件</h1><p id="ddfe" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">组件<code class="fe my mz na nb b">routerLink</code>允许您在站点内创建链接，这些链接被转换成“本地”浏览器链接(标签<code class="fe my mz na nb b">&lt;а&gt;</code>):</p><p id="d39d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;router-link to='/dash/23/child'&gt; Link &lt;/router-link&gt;</strong></code></p><p id="8269" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">可以将类自动添加到这样的链接中:</p><ul class=""><li id="6dec" class="ob oc iq lh b li lj ll lm lo od ls oe lw of ma og oh oi oj bi translated"><code class="fe my mz na nb b">router-link-exact-active</code> <strong class="lh ja"> - </strong>完全匹配；</li><li id="f0fa" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated"><code class="fe my mz na nb b">router-link-active</code> -部分(在<code class="fe my mz na nb b">to</code> route属性中指定的子组件是活动的)。</li></ul><p id="1e1c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了不显示活动的父类，只需编写属性<code class="fe my mz na nb b">exact</code>:</p><p id="3f4a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;router-link to='/dash/23/child' exact&gt; Link &lt;/router-link&gt;</strong></code></p><p id="4a96" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以覆盖我们创建的元素:</p><p id="2e4d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;router-link tag="button" to='/dash'&gt; Button &lt;/router-link&gt;</strong></code></p><p id="1a1c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">不幸的是，在这种情况下，类没有被分配。</p><p id="da95" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们也可以传递一个对象:</p><p id="5c70" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;router-link :to="{ path: '/dash/23' "&gt; Link &lt;/router-link&gt;</strong></code></p><p id="f5de" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">&lt;router-link :to="{ name: 'board', params: { id: 123 } }"&gt; Link &lt;/router-link&gt;</strong></code></p><h1 id="2841" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">最佳实践</h1><p id="bfe7" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">我们将在这一部分致力于重构我们上面写的内容。</p><p id="bddb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为路由器创建一个文件夹结构:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="5a7b" class="nh mc iq nb b gy ni nj l nk nl">src/router/router.js<br/>src/router/routes.js</span></pre><p id="b786" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们把所有与路由器设置相关的东西转移到<strong class="lh ja"> router.js </strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c6e5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们把routes.js和路线设置有关的一切都传过来。</p><p id="7a5d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">并立即将导入替换为动态导入。</p><p id="b699" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您已经分配了许多路线，手动更改可能会非常耗时。常规将有助于:</p><p id="c0e7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">^import (\w+) from (".+")$</strong></code></p><p id="dc38" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">替换为</p><p id="2dd5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe my mz na nb b"><strong class="lh ja">const $1 = () =&gt; import(/* webpackChunkName: "$1" */ $2)</strong></code></p><p id="8642" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，在Chrome Dev Tools的Network选项卡中，您将看到何时从网络中加载了哪个组件，而之前所有的路由都是立即加载到1兆包中的。</p><p id="9dc9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"><em class="nc">/src/router/routes . js</em></strong><em class="nc">:</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="856b" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">Vue.s路由中的高级技巧</h1><p id="7fd3" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">“高级”意味着使用它们的“愉悦”。例如，这些技术包括以下主题:</p><ul class=""><li id="fdf4" class="ob oc iq lh b li lj ll lm lo od ls oe lw of ma og oh oi oj bi translated">按访问级别划分权限；</li><li id="5a20" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated">页面之间过渡的动画；</li><li id="df72" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated">路由切换时的负载指示；</li><li id="e86e" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated">在路由之间切换时更改标题；</li><li id="f1f2" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated">向后移动时在页面上平滑滚动；</li><li id="fccb" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated">等等。</li></ul><p id="c541" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">一切正常。</p><h1 id="2301" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">按访问级别划分权限</h1><p id="01c3" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">有一种情况是用户有两种以上的状态:不仅是授权，还有其他状态。例如，付费订阅。从现在开始，我们考虑无限级的权利分离。这只用了几十行代码就完成了，但是为了简洁、方便和避免重复劳动，我们将使用一个现成的库。让我们安装它:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="da47" class="nh mc iq nb b gy ni nj l nk nl"><strong class="nb ja">yarn add vue-router-middleware-plugin</strong></span></pre><p id="b713" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们创建特殊的中间件文件来检查用户权限:</p><p id="43f7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="nc">路由器/中间件/认证中间件. js </em> </strong> <em class="nc"> : </em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="8093" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="nc">路由器/中间件/guest middleware . js</em></strong><em class="nc">:</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="6b8a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="nc">路由器/中间件/订户中间件. js </em> </strong> <em class="nc"> : </em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="3f59" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后一个清单展示了一个异步检查的例子，这意味着您可以访问存储的动作并向服务器发出请求。</p><p id="ecb5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，让我们对所有路由进行授权检查，然后我们将对一些路由进行例外处理:</p><p id="a0c4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"><em class="nc">/src/router/router . js</em></strong>T34】:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f148" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们来处理一下具体的路线。</p><p id="5c80" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们致力于应用程序的架构，使其更可预测。让我们制作一个单独的Auth.vue模板并把它放在pages中，在那里使用的组件，即在<strong class="lh ja"> <em class="nc"> /auth </em> </strong>部分，把组件放在适当的部分。</p><p id="0811" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">因此获得了方便的结构:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="865e" class="nh mc iq nb b gy ni nj l nk nl">pages<br/>--Auth.vue<br/>components<br/>-- auth<br/>---- Login.vue<br/>---- Register.vue<br/>---- Forgot.vue</span></pre><p id="4644" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们创建一个助手函数来生成这样的路线<code class="fe my mz na nb b">genAuthRoutes</code>。</p><p id="b181" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"><em class="nc">/src/路由器/routes.js </em> </strong> <em class="nc"> : </em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="aee9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们移除属性<code class="fe my mz na nb b">ignore</code>中的全局授权检查，并在<code class="fe my mz na nb b">attach</code>对象属性<code class="fe my mz na nb b">meta.middleware</code>中添加另一个检查:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="b403" class="nh mc iq nb b gy ni nj l nk nl">middleware: {<br/>    ignore: [authMiddleware],<br/>    attach: [guestMiddleware], <br/> }</span></pre><p id="3360" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们创建组件:</p><ul class=""><li id="ae2c" class="ob oc iq lh b li lj ll lm lo od ls oe lw of ma og oh oi oj bi translated"><strong class="lh ja">/src/components/auth/log in . vue</strong>；</li><li id="4e44" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated"><strong class="lh ja">/src/components/auth/register . vue</strong>；</li><li id="35bb" class="ob oc iq lh b li ok ll ol lo om ls on lw oo ma og oh oi oj bi translated"><strong class="lh ja">/src/components/auth/forget . vue</strong>，</li></ul><p id="9373" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于典型的模板:</p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="c02c" class="nh mc iq nb b gy ni nj l nk nl">&lt;template&gt;<br/>  &lt;div&gt;<br/>    Forgot Page<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="391f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们还将重构页面<code class="fe my mz na nb b">Board</code>，姑且称之为<code class="fe my mz na nb b">MainBoard</code></p><p id="bb8a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"><em class="nc">/src/pages/main board . vue</em></strong><em class="nc">:</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="48e9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">相应地，我们将组件添加到组件中的适当类别:</p><p id="ff9d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"><em class="nc">/src/components/board/board component . vue</em></strong><em class="nc">:</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="1eb5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">剩下的就是重构主要组件——<strong class="lh ja"><em class="nc">/src/app . vue</em></strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="4627" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，取消选中“已登录”，尝试按照路线<strong class="lh ja"><em class="nc">http://localhost:8080/board</em></strong>。我们将立即被重定向到<strong class="lh ja">“需要授权”</strong>页面。</p><p id="b23b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">勾选<strong class="lh ja">“已登录”</strong>，取消勾选<strong class="lh ja">“已许可”</strong>，导航至<strong class="lh ja"><em class="nc">http://localhost:8080/board/33/child</em></strong>。我们将被带到许可证页面，但是，如果您取消选中<strong class="lh ja">“已登录”</strong>并刷新页面，我们将返回到<strong class="lh ja">“需要授权”</strong>页面。</p><p id="9993" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在让我们检查当用户已经被授权时是否有可能进入授权页面。勾选<strong class="lh ja">“已登录”</strong>框，转到<strong class="lh ja">http://localhost:8080/auth/register</strong>。我们将被重定向到主页。</p><h1 id="09c2" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">页面之间过渡的动画</h1><p id="1062" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">很简单。我们包装主要的<code class="fe my mz na nb b">RouterView</code>动画组件<code class="fe my mz na nb b">transition</code>并添加样式:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="b9bf" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">路径切换时的负载指示</h1><p id="a775" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">这也很容易。安装<strong class="lh ja">程序库:</strong></p><pre class="kp kq kr ks gt nd nb ne nf aw ng bi"><span id="eae0" class="nh mc iq nb b gy ni nj l nk nl">yarn add nprogress</span></pre><p id="cdf0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">添加到<strong class="lh ja"><em class="nc">/src/router/router . js</em></strong>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="430a" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">在路线之间切换时更改标题</h1><p id="acf2" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">这也很简单。</p><p id="1974" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们填写<code class="fe my mz na nb b">meta.title</code>路线，并把<code class="fe my mz na nb b">document.title</code>每页放在<code class="fe my mz na nb b">beforeEach</code>钩里:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="5b06" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">向前/向后移动时在页面上平滑滚动</h1><p id="9333" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">当您按下浏览器的“系统”按钮后退或前进时，浏览器会记住滚动位置并返回。我们可以重复这种行为:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="5f11" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">阅读更多</h1><p id="1e13" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated"><em class="nc">如果您觉得本文有帮助，请点击💚或者👏按钮或分享关于脸书的文章，这样你的朋友也可以从中受益。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="op no l"/></div></figure></div></div>    
</body>
</html>
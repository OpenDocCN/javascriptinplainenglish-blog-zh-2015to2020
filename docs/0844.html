<html>
<head>
<title>JavaScript Algorithm: Sock Merchant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript算法:袜子商人</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-algorithm-sock-merchant-de9ffa754dfc?source=collection_archive---------4-----------------------#2019-12-20">https://javascript.plainenglish.io/javascript-algorithm-sock-merchant-de9ffa754dfc?source=collection_archive---------4-----------------------#2019-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dd8392fd4b2878c96e2c410a37fb7559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zl6u8f5oa19DEyiqB90sXw.png"/></div></div></figure><p id="f481" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于今天的算法，我们将编写一个名为<code class="fe kw kx ky kz b">sockMerchant</code>的函数，它将接受两个输入，一个整数<code class="fe kw kx ky kz b">n</code>和一个数组<code class="fe kw kx ky kz b">ar</code>。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi la"><img src="../Images/8eba6dd23a9c5e85bb0776a9286e2553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pCLFY7ZHCOtopJe6dfUYkw.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">A store called Brada.</figcaption></figure><p id="b06f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">想象一下，你在一家服装店工作，你有一大堆袜子，你必须在商店开门前按颜色配对。这个函数的目的是确定有多少双袜子可以搭配成对。该数组包含表示颜色类型的整数。让我们看一个例子。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="1d92" class="ln lo iq kz b gy lp lq l lr ls">let n = 7; // the array length<br/>let ar = [1, 2, 1, 2, 4, 4, 2];</span></pre><p id="f777" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们有两个输入，<code class="fe kw kx ky kz b">n</code>表示数组长度或袜子的数量，<code class="fe kw kx ky kz b">ar</code>表示数组本身包含袜子。在阵列中，我们可以看到:</p><p id="5054" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有两只颜色为1的袜子。</p><p id="6d4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有三双颜色为2的袜子。</p><p id="188e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有两只颜色为4的袜子。</p><p id="7e4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看上面的信息，我们可以看到我们可以创建一双颜色为1的袜子，我们可以创建另一双颜色为4的袜子。对于颜色为2的袜子，有三只袜子，我们只能从这些袜子中创建一双。这样我们就剩下三双袜子和一只剩下的袜子了。该功能将输出<code class="fe kw kx ky kz b">3</code>。</p><p id="694d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们把这变成代码。我们创造变量。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="96b5" class="ln lo iq kz b gy lp lq l lr ls">let numPairs = 0;<br/>let currentColor = 0;</span></pre><p id="fe64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">numPairs</code>变量将保存袜子对的数量。这是函数将输出的变量。</p><p id="d951" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">currentColor</code>变量将保存颜色类型。我们将在遍历数组时使用这个变量。</p><p id="672f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们要做的第一件事是对数组输入进行排序。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="09bf" class="ln lo iq kz b gy lp lq l lr ls">let arSorted = ar.sort(function(a, b) {<br/>    return a - b;<br/>});</span></pre><p id="b242" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们本可以使用<code class="fe kw kx ky kz b">ar.sort()</code>，但问题是当我们的数组包含一位数到多位数的组合值时。让我们使用一个示例数组:</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="17b8" class="ln lo iq kz b gy lp lq l lr ls">let arr = [2, 32, 5, 63, 6].sort();<br/>// will output [2, 32, 5, 6, 63] ???</span></pre><p id="d023" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">sort方法的作用是将值转换成字符串，然后根据UTF-16代码单元值对它们进行排序。我们希望sort方法将我们的数字作为数字而不是字符串进行比较，所以我们使用了compare函数。为了比较数字，我们使用compare函数从a中减去b。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="9fa2" class="ln lo iq kz b gy lp lq l lr ls">function compareNumbers(a, b) {<br/>  return a - b;<br/>}</span></pre><p id="ea8d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们用for循环遍历数组。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="729b" class="ln lo iq kz b gy lp lq l lr ls">for (let i = 0; i &lt; n; i++) {<br/>    if (arSorted[i] === currentColor) {<br/>        continue;<br/>    } else {<br/>        numPairs += Math.floor(((arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1) / 2);<br/>        currentColor = arSorted[i];<br/>    }<br/>}</span></pre><p id="e217" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">先来看看我们的<code class="fe kw kx ky kz b">else</code>块。我们有一个很长的等式分配给<code class="fe kw kx ky kz b">numPairs</code>变量。让我们仔细看看，从最里面的括号开始，然后一步步来。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="b7ff" class="ln lo iq kz b gy lp lq l lr ls">(arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1</span></pre><p id="e2ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为我们对数组进行了排序，所以所有重复的颜色类型都在一起。我们可以很容易地使用<code class="fe kw kx ky kz b">lastIndexOf</code>和<code class="fe kw kx ky kz b">indexOf</code>方法从颜色类型的第一个出现值的索引中减去最后一个出现值的索引。这个计算计算了在我们的数组中有多少只这种颜色的袜子。IndexOf方法从零开始计数，所以我们加1得到总值，就好像我们从1开始计数一样。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="9276" class="ln lo iq kz b gy lp lq l lr ls">(arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1) / 2</span></pre><p id="01ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们知道有多少只特定颜色的袜子，我们除以2，因为我们在数双。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="0800" class="ln lo iq kz b gy lp lq l lr ls">Math.floor(((arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1) / 2);</span></pre><p id="1f77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们取这个数字并使用<code class="fe kw kx ky kz b">Math.floor</code>,这样如果我们遇到带小数的数字，我们就想向下取整，以得到袜子堆中该颜色的最大数量。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="aee3" class="ln lo iq kz b gy lp lq l lr ls">numPairs += Math.floor(((arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1) / 2);</span></pre><p id="caea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们获取该值并将其添加到我们的<code class="fe kw kx ky kz b">numPairs</code>变量中。我们使用JavaScript的赋值操作符来帮助缩短我们的语句。</p><p id="ea51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">回到for循环中的条件，我们将当前的颜色类型赋给了<code class="fe kw kx ky kz b">currentColor</code>变量。这是为了当我们转到数组中的下一个值时，如果我们遇到相同的颜色类型，我们使用<code class="fe kw kx ky kz b">continue</code>关键字跳过数组中具有相同数字的其余值。我们已经知道在<code class="fe kw kx ky kz b">currentColor</code>变量中有多少对颜色类型，所以我们跳过，直到我们得到另一种颜色类型。</p><p id="0dab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">循环结束后，我们返回袜子对的数量。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="76b8" class="ln lo iq kz b gy lp lq l lr ls">return numPairs;</span></pre><p id="438e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的功能到此结束。这是我们的完整代码。</p><pre class="lb lc ld le gt lj kz lk ll aw lm bi"><span id="85da" class="ln lo iq kz b gy lp lq l lr ls">function sockMerchant(n, ar) {<br/> <br/>    let numPairs = 0;<br/>    let currentColor = 0;</span><span id="9931" class="ln lo iq kz b gy lt lq l lr ls">    let arSorted = ar.sort(function(a, b) {<br/>        return a - b;<br/>    });</span><span id="2924" class="ln lo iq kz b gy lt lq l lr ls">    for (let i = 0; i &lt; arSorted.length; i++) {<br/>        if (arSorted[i] === currentColor) {<br/>            continue;<br/>        } else {<br/>            numPairs += Math.floor(((arSorted.lastIndexOf(arSorted[i]) - arSorted.indexOf(arSorted[i])) + 1) / 2);<br/>            currentColor = arSorted[i];<br/>        }<br/>    }<br/>    return numPairs;<br/>}</span></pre><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi la"><img src="../Images/7a392d909c861c6755e9e5f0322fef0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXRTkGP0CGu3TX3Oln1N5Q.png"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="6a96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们讨论了方法索引和赋值操作符。关于这些文章中的那些，你可以看看我的其他文章:</p><div class="mb mc gp gr md me"><a href="https://medium.com/javascript-in-plain-english/javascript-algorithm-migratory-birds-848ad6a99ac3" rel="noopener follow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">JavaScript算法:候鸟</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">对于今天的算法，我们将编写一个名为migratoryBirds的函数，在这个函数中，我们将接受一个…</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">medium.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms jw me"/></div></div></a></div><div class="mb mc gp gr md me"><a href="https://levelup.gitconnected.com/javascript-basics-mathematical-assignment-operators-e888e78fd391" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">JavaScript基础:数学赋值运算符</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">在JavaScript中做数学运算时，您可能希望继续增加值。我们可以通过以下组合来实现这一点…</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms jw me"/></div></div></a></div></div></div>    
</body>
</html>
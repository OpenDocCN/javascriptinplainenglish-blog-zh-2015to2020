<html>
<head>
<title>React 17 and JSX Transform: Removing one line of code from your Component files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 17和JSX变换:从组件文件中删除一行代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-17-and-jsx-transform-removing-one-line-of-code-from-your-component-files-fadb2d13545c?source=collection_archive---------12-----------------------#2020-12-29">https://javascript.plainenglish.io/react-17-and-jsx-transform-removing-one-line-of-code-from-your-component-files-fadb2d13545c?source=collection_archive---------12-----------------------#2020-12-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e6e160302c0d14614458221ca371d0a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4h79TN4fgwKKdUNomIB4Mg.jpeg"/></div></div></figure><h1 id="a209" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">你有没有想过为什么写一个功能组件一定要导入React？</h1><p id="5c30" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">根据您对React的经验水平，这个问题可能很明显，或者您可能已经习惯于在所有组件文件的顶部添加<code class="fe lr ls lt lu b">import React from 'react'</code>。</p><p id="5fff" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">让我们考虑下面的例子:</p><pre class="ma mb mc md gt me lu mf mg aw mh bi"><span id="e19c" class="mi jw in lu b gy mj mk l ml mm">import React from 'react';</span><span id="bea2" class="mi jw in lu b gy mn mk l ml mm">export const ImABoringComponent = () =&gt; &lt;p&gt; I'm boring! &lt;/p&gt;;</span></pre><p id="6ba6" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">简单吧？我们创建一个箭头函数，返回我们认为看起来像普通HTML的内容。这里不可忽视的最重要的一点是，我们不仅编写了HTML，实际上还编写了JSX。</p><h1 id="1f4c" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">太棒了，什么是JSX，为什么它看起来像HTML？</h1><p id="af9e" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在这篇文章中，我们不会详细讨论JSX与HTML的区别，但简而言之，JSX是<code class="fe lr ls lt lu b">React.createElement</code>的语法糖。它允许我们写一些看起来像HTML的东西，但是为了被你的浏览器理解和执行，它需要被转换成<code class="fe lr ls lt lu b">React.createElement</code>。</p><h1 id="dadc" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">JSX是如何转变为React.createElement的？</h1><p id="c3a6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">幸运的是，万事皆有工具，Babel是最流行的将一种JavaScript语言语法编译成另一种语言的工具。你可以在这里阅读更多关于<code class="fe lr ls lt lu b">@babel/react-preset</code> <a class="ae mo" href="https://babeljs.io/docs/en/#jsx-and-react" rel="noopener ugc nofollow" target="_blank">的内容</a>。</p><p id="d623" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">使用这个预设，Babel将从我们的示例中输出以下内容:</p><pre class="ma mb mc md gt me lu mf mg aw mh bi"><span id="19af" class="mi jw in lu b gy mj mk l ml mm">import React from 'react';</span><span id="08b6" class="mi jw in lu b gy mn mk l ml mm">export const ImABoringComponent = () =&gt; React.createElement('p', null, "I'm boring!");</span></pre><h1 id="87be" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">还不明显吗？</h1><p id="e8c3" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">根据上面的片段，如果我们没有导入React，然后Babel继续进行它的JSX转换，我们最终会试图调用<code class="fe lr ls lt lu b">React.createElement</code>而没有引用<code class="fe lr ls lt lu b">React</code>。</p><h1 id="4be3" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">太好了，那么React 17和JSX变换是怎么回事呢？</h1><p id="cca8" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">React的团队与babel合作更新了Babel插件<code class="fe lr ls lt lu b">@babel/plugin-transform-react-jsx</code>。有了这个更新版本，您不再需要手动导入React，它将自动导入和引用！我们上面的例子将被编译成类似于:</p><pre class="ma mb mc md gt me lu mf mg aw mh bi"><span id="37a9" class="mi jw in lu b gy mj mk l ml mm">// This is what Babel adds<br/>import {jsx as _jsx} from 'react/jsx-runtime';</span><span id="089d" class="mi jw in lu b gy mn mk l ml mm">export const ImABoringComponent = () =&gt; _jsx('p', null, "I'm boring!");</span></pre><p id="d00b" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">我们省去了为React编写额外导入的努力！</p><p id="d14a" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">非常感谢阅读，我希望这是有帮助的！</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="8935" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">参考资料及延伸阅读:<br/>-<a class="ae mo" href="https://reactjs.org/docs/react-api.html#createelement" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/react-api.html#createelement</a><br/>-<a class="ae mo" href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/introducing-jsx.html</a><br/>-<a class="ae mo" href="https://babeljs.io/docs/en/#jsx-and-react" rel="noopener ugc nofollow" target="_blank">https://babeljs.io/docs/en/#jsx-and-react</a><br/>-<a class="ae mo" href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html" rel="noopener ugc nofollow" target="_blank">https://react js . org/blog/2020/09/22/introducing-the-new-jsx-transform . html</a><br/>-<a class="ae mo" href="https://babeljs.io/blog/2020/03/16/7.9.0#a-new-jsx-transform-11154httpsgithubcombabelbabelpull11154" rel="noopener ugc nofollow" target="_blank">https://babel js . io/blog/2020/03/16/7 . 9 . 0 # a-new-transform</a></p></div></div>    
</body>
</html>
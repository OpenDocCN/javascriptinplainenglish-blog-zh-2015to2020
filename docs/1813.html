<html>
<head>
<title>TypeScript non-goals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">打字稿非目标</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-non-goals-43f47c1ecd84?source=collection_archive---------5-----------------------#2020-04-25">https://javascript.plainenglish.io/typescript-non-goals-43f47c1ecd84?source=collection_archive---------5-----------------------#2020-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a978" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从一开始，TypeScript就有<a class="ae kl" href="https://github.com/microsoft/TypeScript/wiki/TypeScript-Design-Goals" rel="noopener ugc nofollow" target="_blank">明确定义的设计目标</a>。</p><p id="344a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是你知道TypeScript也有一套<em class="km">非目标</em>吗？让我们逐一讨论，因为它们非常有趣，非常值得了解。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/cdcdbac27589ebb071d21f47df3ed984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MJUczDO1VL5cQrOXx-Wp4A.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Picture courtesy of <a class="ae kl" href="https://unsplash.com/@herrond" rel="noopener ugc nofollow" target="_blank">@herrond</a></figcaption></figure></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="4a32" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">完全模仿现有语言的设计</h1><p id="9eee" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">TypeScript的目的不是简单地<em class="km">复制</em>EcmaScript/JavaScript的设计。</p><p id="856b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然它确实严格尊重JavaScript的运行时行为，以保持语言的超集，但它<em class="km">确实</em>引入了自己的语法，让我们以更强的表达性、更清晰和更安全的类型来实现我们的目标。</p><p id="c536" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，EcmaScript中不存在TypeScript泛型，但它为我们提供了创建数据结构、类型和函数的方法，这些数据结构、类型和函数可以安全地处理各种类型。</p><p id="8dc4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事实上，TypeScript的这个非目标实际上是该语言所有伟大之处的基础:充分尊重运行时，但提高代码的可读性、健壮性和开发者体验。</p><p id="815b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TypeScript带来了无数令人惊叹的特性和语法优势，极大地改善了开发人员的体验(DX)。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="eceb" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">积极优化程序的运行时性能</h1><p id="85b5" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">TypeScript不会尝试发出超级优化的JavaScript代码。</p><p id="448c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个非目标的意思是，TypeScript编译器生成的代码旨在成为<em class="km">惯用的</em> JavaScript代码；也就是说，代码保持与JS最佳实践一致，并且人类仍然能够破译。</p><p id="ce35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是不要误解这一点；性能<a class="ae kl" href="https://github.com/microsoft/TypeScript/wiki/Performance" rel="noopener ugc nofollow" target="_blank">显然不会被TypeScript团队忽视</a>，最近的<a class="ae kl" href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-9-beta/" rel="noopener ugc nofollow" target="_blank"> 3.9 beta发行说明</a>再次证明了这一点。</p><h1 id="0cdb" class="lk ll iq bd lm ln mn lp lq lr mo lt lu lv mp lx ly lz mq mb mc md mr mf mg mh bi translated">应用一个健全的或“可能正确的”类型系统</h1><p id="8437" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">TypeScript试图在正确性和开发人员生产力之间找到一个平衡，而不是仅仅关注于创建一个可证明的(从数学上看)正确的类型系统。</p><p id="5603" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，随着时间的推移，类型系统变得越来越强大，但同时，开发者体验是最前端和中心的，这让我想起了为什么我马上就爱上了Kotlin。</p><p id="f82a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对我来说，TypeScript和Kotlin是我一直在使用的两种最令人愉快的编程语言。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="b846" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">提供端到端的构建管道</h1><p id="642a" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">TypeScript并不打算自己做所有的事情。相反，它试图开放和易于扩展，以便其他工具可以轻松地使用编译器，并将其集成到编辑器、ide和构建链中。</p><p id="8b76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从一开始，TypeScript的架构就被定义为能够与尽可能多的构建/开发工具/ide很好地集成。</p><p id="e804" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是由两部分主要架构实现的:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ms"><img src="../Images/0c74ea5c2fa7baa9897936124d020b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgJ5m8J-9-dzUd3zL0XX3Q.png"/></div></div></figure><p id="f65a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一个令人感兴趣的部分是语言服务，它通过提供对熟悉的代码编辑器特性的支持，如自动完成、彩色化、代码格式化、代码重构、调试/断点等等，补充了核心编译器管道。你可以在这里了解更多信息。</p><p id="3550" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个难题的第二个非常重要的部分是TSServer，它包装了核心编译器和语言服务，并通过基于JSON的协议公开它们。</p><p id="4d79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过直接在JSON上公开编译器+语言服务特性，IDE集成实际上对编辑器/IDE开发者来说变得轻而易举。此外，通过将编译器管道直接集成到ide中，它们都可以立即受益于强大的特性集。</p><p id="3140" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有这种架构，每个编辑器/ IDE都必须付出更多的努力来增加对该语言的支持，并且编辑器之间会有巨大的差异，由于TypeScript的设计，今天不会出现这种情况。N-e-a-t！</p><p id="629a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想看一个例子，那么看看<a class="ae kl" href="https://github.com/microsoft/vscode/tree/master/extensions/typescript-language-features" rel="noopener ugc nofollow" target="_blank">VSCode如何集成TypeScript支持</a>(顺便说一句，vs code本身是使用TypeScript编写的，这是“自食其果”原则的一个很好的例子:p)。</p><p id="c61c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，TSServer也使得在构建工具/构建链中与编译器交互变得容易，这打开了一个可能性的世界。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="26fc" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">在程序中添加或依赖运行时类型信息，或者根据类型系统的结果发出不同的代码</h1><p id="e157" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">这是TypeScript的非目标之一，对此我感到有点难过。</p><p id="1625" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着TypeScript不打算将其类型信息推送到运行时，甚至不打算让我们在运行时保存类型元数据。</p><p id="8bd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TypeScript的设计选择是为了在开发时尽可能地帮助我们开发人员，并限制/试图消除我们对运行时类型安全的需要。我猜想这个想法是“简单的”,如果我们在编译时有足够的确定性，那么运行时类型安全就没那么重要了。</p><p id="b76a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而在实践中(IMHO)，在一些场景中，运行时类型安全确实是有益的。首先，当我们从后端或外部客户端接收数据时，能够断言类型是预期的通常是有用的。这不是TypeScript语言想要帮助我们的。</p><p id="474f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但这并不意味着这是不可能的。稍后我会写一些类似于<a class="ae kl" href="https://github.com/gcanti/io-ts" rel="noopener ugc nofollow" target="_blank"> io-ts </a>的解决方案(提示:有很多)。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="5f1c" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">提供额外的运行时功能或库</h1><p id="d27c" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">TypeScript不通过扩展/库提供特定的运行时功能。</p><p id="5056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TypeScript专门关注编译时。从那里，它生成EcmaScript兼容的代码，但是发出的代码在运行时不依赖于TypeScript特定的元素；它只是可以在任何ES运行时运行的JavaScript。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="e33d" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">介绍可能让用户感到惊讶的行为</h1><p id="82fc" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">哦，我多么喜欢这个非目标！它实际上是我的最爱之一。</p><p id="55b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总结这一条，假设TypeScript不是数学家用的语言，像Scala可以(哎呀，那里，我刚写的，不好意思，不是不好意思！).</p><p id="b62a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对一些人来说，这听起来可能很悲伤，但对我来说，这是<em class="km">太棒了</em>。编程语言不应该(仅仅)是为真正的科学家制造的。代码读起来应该像散文，而不是方程式。</p><p id="898f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一种语言的可读性和可访问性越强，就越有可能增加软件开发对最大人群的可访问性。晦涩的语法对任何人都没有帮助。</p><p id="0d59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我已经开始教我的儿子编程，我当然不打算给他介绍像Scala这样只会让他尝到苦果并迫使他放弃而不是享受<em class="km">乐趣</em>的语言。相反，我会教他Python(为了易用和简单)，Kotlin，当然还有TypeScript！</p><p id="8291" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">TypeScript在这方面很棒。只要看看一些打字稿代码，享受其中的美妙！</p><h1 id="7a72" class="lk ll iq bd lm ln mn lp lq lr mo lt lu lv mp lx ly lz mq mb mc md mr mf mg mh bi translated">结论</h1><p id="fcca" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">在本文中，我们快速回顾了TypeScript的非目标，这些目标与我们今天所见证的语言的成功紧密相关。</p><p id="b3db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过关注可读性、开发人员体验、工具集成以及应用最小惊奇原则，TypeScript已经取得了很少编程语言所拥有的东西:伟大和开发乐趣。(无处不在正在路上，但请再给它一些时间！；-))</p><p id="4885" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止！</p><h1 id="06ba" class="lk ll iq bd lm ln mn lp lq lr mo lt lu lv mp lx ly lz mq mb mc md mr mf mg mh bi translated">喜欢这篇文章吗？点击下面“喜欢”按钮查看更多内容，并确保其他人也能看到！</h1><p id="9b00" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">PS:如果你想了解大量关于软件开发、Web开发、TypeScript、Angular、React、Vue、Kotlin、Java、Docker/Kubernetes和其他很酷的主题的其他很酷的东西，那么不要犹豫<a class="ae kl" href="https://www.amazon.com/Learn-TypeScript-Building-Applications-understanding-ebook/dp/B081FB89BL" rel="noopener ugc nofollow" target="_blank">去拿一本我的书</a>并订阅<a class="ae kl" href="https://mailchi.mp/fb661753d54a/developassion-newsletter" rel="noopener ugc nofollow" target="_blank">我的简讯</a>！</p></div></div>    
</body>
</html>
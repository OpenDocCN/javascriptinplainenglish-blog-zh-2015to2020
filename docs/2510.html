<html>
<head>
<title>JavaScript Problems — Object Properties, Multiple Ajax Calls, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript问题——对象属性、多个Ajax调用等等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-problems-object-properties-multiple-ajax-calls-and-more-aac85a3cd7f4?source=collection_archive---------6-----------------------#2020-06-30">https://javascript.plainenglish.io/javascript-problems-object-properties-multiple-ajax-calls-and-more-aac85a3cd7f4?source=collection_archive---------6-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fa57d5c546173e7eba54e0a9a3b7541f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JzqrMY_Za7Mvv1wz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@olav_ahrens?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Olav Ahrens Røtne</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5092" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="2954" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查对象属性是否存在</h1><p id="a096" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有几种方法可以检查对象属性是否存在。</p><p id="42c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">in</code>操作符，它检查对象本身及其原型。</p><p id="6d95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7d71" class="mq lc iq mh b gy mr ms l mt mu">const myProp = 'prop';<br/>if (myProp in obj){<br/>  //...<br/>}</span></pre><p id="5847" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用<code class="fe me mf mg mh b">hasOwnProperty</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="14fb" class="mq lc iq mh b gy mr ms l mt mu">const myProp = 'prop';<br/>if (obj.hasOwnProperty(myProp)){<br/>  //...<br/>}</span></pre><p id="20fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">hasOwnProperty</code>只检查对象本身内部的属性，不检查它的原型。</p><h1 id="6d85" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">等到所有JavaScript ajax调用都完成后，再运行一些代码</h1><p id="2675" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">jQuery有一个<code class="fe me mf mg mh b">when</code>方法，可以进行ajax调用，并在完成所有调用后通过回调调用上面的<code class="fe me mf mg mh b">done</code>来运行代码。</p><p id="7ee7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8ea3" class="mq lc iq mh b gy mr ms l mt mu">$.when(ajax1(), ajax2(), ajax3())<br/>  .done((a1, a2, a3) =&gt; {<br/>    //...<br/>  });</span></pre><p id="673d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<code class="fe me mf mg mh b">ajax1</code>、<code class="fe me mf mg mh b">ajax2</code>和<code class="fe me mf mg mh b">ajax3</code>是返回<code class="fe me mf mg mh b">$.ajax</code>调用的函数:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4bb6" class="mq lc iq mh b gy mr ms l mt mu">const ajax1 = () =&gt; {<br/>  <!-- -->return $.ajax({<br/>    url: "url",<br/>    dataType: "json",<br/>    data,            <br/>    ...<br/>  });<br/>}</span></pre><p id="814e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">ajax2</code>和<code class="fe me mf mg mh b">ajax3</code>相同。</p><h1 id="7a1b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从日期获取月份名称</h1><p id="1c8b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从<code class="fe me mf mg mh b">Date</code>实例中获取货币名称的最方便的方法是使用<code class="fe me mf mg mh b">toLocaleString</code>方法。</p><p id="637c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6609" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date(2020, 10, 10);<br/>const month = date.toLocaleString('default', { month: 'long' });</span></pre><p id="4e63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">month</code>设置为<code class="fe me mf mg mh b">'long'</code>以返回完整的月份名称。</p><p id="ea67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">'default'</code>是区域设置。</p><p id="e893" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，有一个<code class="fe me mf mg mh b">Intl.DateTimeFormat</code>构造函数让我们做同样的事情:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4c28" class="mq lc iq mh b gy mr ms l mt mu">const formatter = new Intl.DateTimeFormat('en', { month: 'long' });<br/>const month = formatter.format(new Date(2020, 10, 10));</span></pre><h1 id="b1d1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查用户是否已经滚动到底部</h1><p id="fb55" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">scrollTop</code>方法检查用户是否滚动到底部。</p><p id="5f49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4d7e" class="mq lc iq mh b gy mr ms l mt mu">$(window).scroll(() =&gt; {<br/>   if($(window).scrollTop() + $(window).height() === $(document).height()) {<br/>     console.log('scrolled to bottom');<br/>   }<br/>});</span></pre><p id="16a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过对带有<code class="fe me mf mg mh b">height</code>的窗口使用<code class="fe me mf mg mh b">scrollTop</code>方法来检查jQuery，以获得总的滚动高度。</p><p id="6f62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们对照文档的高度来检查用户是否滚动到了底部。</p><h1 id="4f04" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">确定两个JavaScript对象是否相等</h1><p id="6254" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Lodash <code class="fe me mf mg mh b">isEqual</code>方法检查两个对象是否相等。</p><p id="1aef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9cd2" class="mq lc iq mh b gy mr ms l mt mu">_.isEqual(object, other);</span></pre><p id="f1c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">object</code>和<code class="fe me mf mg mh b">other</code>是我们正在比较的对象。</p><h1 id="4d30" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在JavaScript中将字符串转换为日期</h1><p id="d699" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过将字符串传递给<code class="fe me mf mg mh b">Date</code>构造函数，将字符串转换为<code class="fe me mf mg mh b">Date</code>。</p><p id="c9e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1ff3" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date('2020-01-01');</span></pre><p id="888b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以将字母<code class="fe me mf mg mh b">Z</code>添加到字符串中，将时区设置为UTC。</p><p id="7e3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e6e4" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date('2020-01-01T10:10:20Z')</span></pre><h1 id="c50e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">枚举JavaScript对象的属性</h1><p id="2318" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有几种方法可以枚举JavaScript对象的属性。</p><p id="a28d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用for-in循环。例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="565b" class="mq lc iq mh b gy mr ms l mt mu">for (const prop in obj) {<br/>   //...<br/>}</span></pre><p id="5dfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将遍历<code class="fe me mf mg mh b">obj</code>的所有属性，包括它的原型。</p><p id="036d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以将for-in与<code class="fe me mf mg mh b">hasOwnProperty</code>结合起来，只遍历对象本身的属性。</p><p id="ef06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8fca" class="mq lc iq mh b gy mr ms l mt mu">for (const prop in obj) {<br/>  if (obj.hasOwnProperty(prop)) {<br/>    console.log(name);<br/>  }<br/>}</span></pre><p id="9f5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8fa6" class="mq lc iq mh b gy mr ms l mt mu">for (const prop of Object.keys(obj)) {<br/>   //...<br/>}</span></pre><p id="f60c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.keys</code>返回一个我们用for-of循环遍历的键数组。</p><p id="d399" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它只返回非继承的键。</p><h1 id="c4c0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">替换字符串中某个字符的所有实例</h1><p id="3b05" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以替换字符串中的所有字符。</p><p id="dd9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2d47" class="mq lc iq mh b gy mr ms l mt mu">str.replace(/foo/g, "bar")</span></pre><p id="7096" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用字符串中的<code class="fe me mf mg mh b">'bar'</code>替换<code class="fe me mf mg mh b">'foo'</code>的所有实例。</p><p id="e37f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以使用<code class="fe me mf mg mh b">RegExp</code>构造函数来创建正则表达式。</p><p id="38a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f03d" class="mq lc iq mh b gy mr ms l mt mu">const pattern = "foo",<br/>const re = new RegExp(pattern, "g");</span></pre><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/a4dd7e87f31a375ea11105397065fc18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*siHW6t-BSmy3C_4L"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ro_ka?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robert Katzki</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3d89" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="61c1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用<code class="fe me mf mg mh b">Date</code>构造函数将字符串转换成日期很容易。</p><p id="d5a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用许多方式列举JavaScript属性。</p><p id="ad5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有一种方法可以检查页面的滚动位置。</p><p id="fa02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了从<code class="fe me mf mg mh b">Date</code>实例中获取月份名称，我们必须将<code class="fe me mf mg mh b">Date</code>对象格式化为一个字符串。</p><h2 id="19c3" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="f3c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">plain English . io</strong></a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>What the heck is the Virtual DOM?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">虚拟DOM到底是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-the-heck-is-the-virtual-dom-3ef1ae4a950b?source=collection_archive---------1-----------------------#2019-02-28">https://javascript.plainenglish.io/what-the-heck-is-the-virtual-dom-3ef1ae4a950b?source=collection_archive---------1-----------------------#2019-02-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/3152e85cbcd03c77a969fcea8db5a53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdr2-oN0TgYQvqmTnvUvKw.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">source: react-js.us</figcaption></figure><div class=""/><p id="aea0" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你在React工作过，你一定听说过虚幻的虚拟DOM，，但是它到底是什么，它和普通的DOM有什么不同？</p><p id="ad0b" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，让我们后退一步，看看DOM。</p><blockquote class="ky kz la"><p id="f05c" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">“文档对象模型(DOM)是HTML和XML文档的编程接口。它表示页面，以便程序可以更改文档结构、样式和内容。DOM将文档表示为节点和对象。这样，编程语言就可以连接到页面。”</p><p id="3df7" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated"><em class="jc"> -MDN网络文档</em></p></blockquote><p id="1373" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本质上，我们使用JavaScript来处理和操作页面上的节点元素，而DOM允许我们建立这种联系。</p><p id="77d4" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">什么是节点？一切。一切都是一个节点。从最里面的文本到文档本身，DOM上的所有东西都是一个节点。</p><p id="6420" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">基本JS DOM操作的最大问题是DOM不能在给定时刻更新任何一个项目，它必须重新呈现所有内容来改变一件事。最重要的是，随着越来越多的JS框架变得流行和快速，这种操作变得缓慢和过时。因此，随着单页面应用程序和框架的通用性增加，必须有更好的方法来管理这一点…进入虚拟DOM！</p><blockquote class="ky kz la"><p id="58c3" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">虚拟DOM (VDOM)是一个编程概念，其中UI的理想或“虚拟”表示保存在内存中，并通过ReactDOM等库与“真实”DOM同步。这个过程叫做<a class="ae le" href="https://reactjs.org/docs/reconciliation.html" rel="noopener ugc nofollow" target="_blank">对账</a>。</p><p id="4b2b" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">这种方法启用了React的声明式API:您告诉React您希望UI处于什么状态，它确保DOM匹配该状态。这抽象出了属性操作、事件处理和手动DOM更新，否则您将不得不使用它们来构建您的应用程序。"</p><p id="8436" class="jz ka kx kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated"><em class="jc">直接来源于-ReactJS文档</em></p></blockquote><p id="a06b" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们创建虚拟DOM的方式是通过React组件。通过将react中的组件导入到我们的应用程序中，我们可以访问组件。</p><figure class="lg lh li lj gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi lf"><img src="../Images/92a986ba74fbbb702d7fe358cf668ff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OidoEVu9wTLj_X8yRe8ytQ.png"/></div></div></figure><p id="6deb" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要使任何HTML代码成为静态React组件，只需要在React的<code class="fe lk ll lm ln b">render()</code>方法中返回HTML代码。这是以JSX的形式完成的，它类似于JavaScript和HTML的混合。Render是react的生命周期方法之一，你可以在这里阅读更多关于<a class="ae le" href="https://reactjs.org/docs/state-and-lifecycle.html" rel="noopener ugc nofollow" target="_blank">的内容</a>，但是现在我们知道render是我们代码中开始构建React元素树的地方。</p><figure class="lg lh li lj gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi lo"><img src="../Images/03f9ab21fe5d75e953377cefce61e6f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAMjV0agUQlShyaVnltxjQ.png"/></div></div></figure><p id="cd12" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">每当应用程序中的状态改变时，虚拟DOM开始改变/添加/更新它的元素树，而实际DOM保持不变。然后，React将我们的虚拟DOM树与“快照”或虚拟DOM树的先前状态进行比较。这个过程被称为“差异”</p><p id="e1c5" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，React只改变那些在真实DOM上已经改变的元素。</p><figure class="lg lh li lj gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi lp"><img src="../Images/92c29b418055c732edb37558a8d3f21c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxYM-BFdvy6q0etoWCsFaA.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk"><strong class="bd lq">source: </strong><a class="ae le" href="https://www.oreilly.com/library/view/learning-react-native/9781491929049/ch02.html" rel="noopener ugc nofollow" target="_blank"><strong class="bd lq">https://www.oreilly.com/library/view/learning-react-native/9781491929049/ch02.html</strong></a></figcaption></figure><p id="de78" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从本质上讲，React去掉了繁琐的DOM树遍历，并做了这些底层的事情，使开发人员做任何事情都更容易，并且运行起来更加高效和流畅。</p><p id="5ca0" class="pw-post-body-paragraph jz ka jc kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">概括一下:</p><ul class=""><li id="deb7" class="lr ls jc kb b kc kd kg kh kk lt ko lu ks lv kw lw lx ly lz bi translated">尽管DOM操作是交互式web的核心，但它比大多数现代JS操作和框架都要慢。</li><li id="5e69" class="lr ls jc kb b kc ma kg mb kk mc ko md ks me kw lw lx ly lz bi translated">虚拟DOM本质上是位于更新的DOM之上的DOM的副本。</li><li id="3df1" class="lr ls jc kb b kc ma kg mb kk mc ko md ks me kw lw lx ly lz bi translated">对于每个DOM对象，都有一个对应的虚拟DOM对象，它们具有相同的属性，只是缺少实际改变屏幕内容的能力，这就是为什么它要快得多。</li><li id="2978" class="lr ls jc kb b kc ma kg mb kk mc ko md ks me kw lw lx ly lz bi translated">我们通过使用JSX来写入虚拟DOM，它是JS，看起来很像直接的HTML来编写react elements——表示真实DOM元素的元素。</li><li id="5683" class="lr ls jc kb b kc ma kg mb kk mc ko md ks me kw lw lx ly lz bi translated">当我们改变状态时，虚拟DOM在更新真实DOM之前会检查虚拟DOM中哪些元素发生了变化，哪些元素没有发生变化。这就叫差异化。</li><li id="79ed" class="lr ls jc kb b kc ma kg mb kk mc ko md ks me kw lw lx ly lz bi translated">实际上，React不需要遍历DOM树，而是为您做底层的工作。</li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create a Build Pipeline for Angular in Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Azure DevOps中为Angular创建构建管道</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-build-pipeline-for-angular-in-azure-devops-a9255385275e?source=collection_archive---------6-----------------------#2020-10-19">https://javascript.plainenglish.io/how-to-create-a-build-pipeline-for-angular-in-azure-devops-a9255385275e?source=collection_archive---------6-----------------------#2020-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8589" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为Angular创建持续集成(CI)构建管道</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9f7de58405b5743d69941e48fb289be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qf5CWJF2z_JRof5izZI8IA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@saj_shafique?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Saj Shafique</a> on <a class="ae kv" href="https://unsplash.com/s/photos/build?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ff77" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="ed75" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">软件构建管道结合了持续集成(CI)和持续交付(CD)来一致地测试、构建和交付您的代码。这极大地提高了产品代码的质量和涉众的参与。</p><p id="5997" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本指南中，我将向您展示如何在Azure DevOps中建立持续集成(CI)管道。每当您将代码推送到远程Git存储库时，CI管道都会生成应用程序的生产版本。</p><p id="8a0c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">注意</strong> : Azure DevOps是一个<strong class="lq ir">免费的</strong>服务，不要误认为是Azure云服务。</p><h1 id="a0a5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">入门</strong></h1><p id="e2d0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本指南旨在全面介绍，因此我们将从头开始构建。我们将创建一个Angular应用程序，然后将其推送到远程GitHub存储库，最后设置构建管道。</p><p id="4009" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你已经在GitHub上安装了你的应用程序，可以直接跳到你只创建管道的部分，也就是在Azure DevOps中创建一个构建管道。</p><h2 id="2b65" class="mp kx iq bd ky mq mr dn lc ms mt dp lg lx mu mv li mb mw mx lk mf my mz lm na bi translated">创建角度应用程序</h2><p id="688e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您可以使用Angular CLI通过以下命令轻松创建Angular应用程序。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="7d75" class="mp kx iq nc b gy ng nh l ni nj">$ ng new angular-azure-pipeline --defaults</span></pre><p id="b1f5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一旦创建了应用程序，您就可以进入它的根目录并初始化git存储库，如下所示:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="ef3a" class="mp kx iq nc b gy ng nh l ni nj">$ cd ./angular-azure-pipeline &amp;&amp; git init</span></pre><h1 id="6cc4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">创建应用程序的GitHub库</strong></h1><p id="25bd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本节中，我们将为Angular应用程序创建一个相应的远程GitHub存储库。如果您愿意，可以随意使用其他GitHub替代方案，如Azure、Bitbucket等。</p><p id="a3d8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">登录你的GitHub账户，点击下面红色突出显示的新建按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/5afc7406f38ae7149e98cedca4d8a1f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEKg4ZQQc99fiuQdpm4aOQ.png"/></div></div></figure><p id="191e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后，您可以为远程存储库提供一个名称。我将我的<strong class="lq ir"> <em class="nl">命名为angular-azure-pipeline</em></strong>与应用程序的名称一致。最后，单击Create repository按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/555656f571897b4acb3bc61b4aef5dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bLgjQ_RKdb4xeAGPYUBK0w.png"/></div></div></figure><p id="7ece" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">GitHub将创建资源库，并向您提供一些快速设置信息。重要的是git存储库名称。我在下图中突出显示了这一点。</p><p id="afbb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">复制存储库名称，以便您可以在下面的部分中使用它，将其添加为本地存储库的远程源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/644212da79454f6d60af26d22556e30d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNnRPH_3LZmma8xVV6FCLA.png"/></div></div></figure><h1 id="878c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">进行初始提交</h1><p id="89ef" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">返回本地存储库，使用下面的命令将其链接到远程存储库。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="7de2" class="mp kx iq nc b gy ng nh l ni nj">git remote add origin <strong class="nc ir">https://github.com/Mwiku/angular-azure-pipeline.git</strong></span></pre><p id="cb09" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">注意</strong>:记住用您从GitHub复制的正确的库名替换上面粗体的库名。</p><p id="6013" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，您可以使用以下三个命令进行初始提交并将代码推送到GitHub存储库。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="410b" class="mp kx iq nc b gy ng nh l ni nj">git add .</span><span id="2de9" class="mp kx iq nc b gy no nh l ni nj">git commit -m “initialize repository”</span><span id="6036" class="mp kx iq nc b gy no nh l ni nj">git push -u origin master</span></pre><h1 id="a94a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">在Azure DevOps中创建构建管道</h1><p id="70b4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本节中，我们将创建必要的基础设施，以便在Azure DevOps中使用管道。</p><p id="485c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你可以点击<a class="ae kv" href="https://dev.azure.com/" rel="noopener ugc nofollow" target="_blank">链接</a>访问Azure DevOps。如果您没有帐户，请登录或注册免费的。</p><p id="f9eb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一旦登录Azure DevOps，您需要创建一个项目，该项目将包含管道和其他相关资源或信息。</p><p id="636b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要创建一个项目，单击新建项目按钮，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/c465bdf91bb4acbcfbbf33a26c2f0aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWUjDLqAJ552zk1hYqRv4A.png"/></div></div></figure><p id="daac" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您将被提示输入项目名称，为了方便起见，我用应用程序的名称来命名它。您可以保留默认设置，但是如果您愿意，可以随意修改。最后，点击底部的创建按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/6921f4c6e3e60a973c96f23175066847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xw5Gd3zUyt-or8SONMEKiw.png"/></div></div></figure><p id="3958" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">创建项目后，单击左侧导航菜单上的pipeline链接。然后单击出现在主要内容区域的“创建管道”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/1031eba9f24b9d0575911340fa54561c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8D7ktLo9sWs-uGex1eKtbQ.png"/></div></div></figure><p id="d6f2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Azure DevOps提供了两种创建新管道的主要方法。</p><p id="820f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">1.经典编辑器——基本上是一个GUI变体，用于创建管道和</p><p id="60e5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">2.YAML文件——使用YAML标记来创建和编辑管道</p><p id="8b74" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们会选择YAML，因为它更直接，并且为您提供了更多的定制能力。</p><p id="6624" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">因为我已经使用GitHub作为我的远程存储库主机，所以我将选择GitHub，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/dcb2c16e9a8cea6923862c02d4cc65fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hS866hHuIBOMp0u7ZjDT9w.png"/></div></div></figure><p id="66f9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在我们选择GitHub之后，我们会被要求选择一个存储库。我正在寻找的存储库以红色突出显示，所以我选择了它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/cdd5fa9f9eaead973fd45a1c6e1faf5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qmT7iB38-jOBNE736ldE7w.png"/></div></div></figure><p id="3c51" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">选择GitHub存储库后，会出现一个登录GitHub帐户的屏幕提示。提供您的登录凭据。</p><p id="33a1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">通过身份验证后，如果您的存储库已被选中，您可以单击“批准并安装”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/0b7d3aa840e6b2f1faa1cd7a4031b9c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJq8gMcBnoypAKiwbP_abA.png"/></div></div></figure><p id="4f09" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">完成上述步骤后，您将被重定向到Azure DevOps。其中将提示您通过选择要用来构建管道的引擎来配置管道。</p><p id="5d55" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">由于我们的应用程序使用Angular，我将选择这样的选项:<strong class="lq ir"> Node.js with Angular </strong>。这将为我们提供一个非常好的管道模板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/0c612862eb4cba4b2e70e74927b9d728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdLczvVwk-u2hceCQj-mHA.png"/></div></div></figure><p id="fcb5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">下图是Azure DevOps根据我选择的配置创建的管道文件的预览。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/3ccc2e0df038abb925748e32e9bc8498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XH6Y2g1faKYo0ggTHjtluA.png"/></div></div></figure><p id="bc3f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">YAML档案有三个主要部分</p><ol class=""><li id="ed09" class="nw nx iq lq b lr mk lu ml lx ny mb nz mf oa mj ob oc od oe bi translated">trigger——这指定什么将导致管道自动运行。在这种情况下，它是主分支。每当您将代码更改推送到主分支时，管道都会运行。</li><li id="0057" class="nw nx iq lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">池-池指定运行管道时将使用的操作系统。这个管道使用的是<strong class="lq ir"><em class="nl">Ubuntu-最新的</em> </strong>，在本文写作时是Ubuntu 20.04焦窝LTS。</li><li id="7625" class="nw nx iq lq b lr of lu og lx oh mb oi mf oj mj ob oc od oe bi translated">步骤——最后，YAML文件指定了构建Angular应用程序的步骤。它将首先安装angular CLI，然后恢复依赖关系，最后创建一个生产版本。如果将来您希望管道运行单元测试并执行其他任务，可以在steps部分进行编辑。</li></ol><p id="54a1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要保存并运行管道文件，您可以单击上面突出显示的保存并运行按钮。</p><p id="28a5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在下一个提示中，您只需单击保存并运行即可。如果您愿意，请输入提交消息。Azure DevOps将继续运行管道。如果构建成功运行，您将看到一个绿色的勾号，如下所示。</p><p id="8042" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要查看有关管道构建的更多信息，您可以展开它。如果管道失败，这也是查找错误消息和哪个步骤失败的地方。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/5f710c4399b02b641fd8edaa4528ff14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FALASCwFyVvGH-tX3oXEmg.png"/></div></div></figure><p id="7979" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">下次向主分支提交内容时，管道将自动运行。此外，管道构建输出报告将发送到您注册的电子邮件地址。</p><h1 id="93f9" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">结论</strong></h1><p id="1686" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本指南中，我们创建了一个Angular应用程序，然后将其推送到GitHub，最后使用Azure DevOps为该应用程序创建了一个连续构建(CI)管道。</p><p id="1494" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">将DevOps实践整合到您的软件开发工作流中对于交付高质量的软件是至关重要的。</p></div></div>    
</body>
</html>
<html>
<head>
<title>The Comprehensive Guide to Angular 8 Reactive Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度8反应形式综合指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-comprehensive-guide-to-angular-8-reactive-forms-f3c509ff9656?source=collection_archive---------1-----------------------#2019-11-08">https://javascript.plainenglish.io/the-comprehensive-guide-to-angular-8-reactive-forms-f3c509ff9656?source=collection_archive---------1-----------------------#2019-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/aeffc9aa873d180c407270a4fbbd6d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*a89OmsHxeFZt6tSq.jpg"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Photo by <a class="ae jy" href="https://www.pexels.com/@kevin-ku-92347?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Kevin Ku </a>from <a class="ae jy" href="https://www.pexels.com/photo/coding-computer-data-depth-of-field-577585/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="4cc4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在构建任何类型的web应用程序时，表单验证都是至关重要的。根据复杂性，我们可以使用两种方法；模板驱动方法和反应式方法。这篇文章深入介绍了角度反应式，这样你就不需要在网上寻找其他教程了。</p><h1 id="f3e9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是角形反应？</h1><p id="c0d5" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">如果你熟悉angular的模板驱动方法来验证表单，你会知道在我们在代码的模板部分(即HTML部分)编写代码后，angular会自己创建<a class="ae jy" href="https://www.concretepage.com/angular-2/angular-2-formcontrol-example" rel="noopener ugc nofollow" target="_blank"> FormControl </a>和<a class="ae jy" href="https://www.concretepage.com/angular-2/angular-2-formgroup-example" rel="noopener ugc nofollow" target="_blank"> FormGroup </a>对象。</p><p id="a8cb" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">但是，如果我们想对我们的验证逻辑有更多的控制，那么我们应该使用反应式表单。这种方法有助于处理各种复杂的场景。例如，假设您想要构建一个表单，根据从服务器获得的数据显示输入字段，那么您只有一个选择，您必须使用反应式表单。</p><p id="3b71" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">当我们使用反应式表单时，我们需要显式地编写代码来以编程方式处理表单验证。</p><h1 id="6872" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">为什么使用角反应形式？</h1><p id="6e84" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">在angular中使用反应式有许多优点，如下所示。</p><ul class=""><li id="6db3" class="ma mb iq kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">读取/写入任意点的输入值。(甚至在构建表单之前)</li><li id="4c34" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">定义高级验证规则，支持异步验证器，这在用户填写表单的同时向服务器发送HTTP请求时特别有用。</li><li id="a6e3" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">当值发生变化时，得到通知并立即做出反应。</li><li id="d917" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">访问本机HTML表单元素。</li><li id="697a" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">重置表单。</li><li id="4789" class="ma mb iq kb b kc mj kg mk kk ml ko mm ks mn kw mf mg mh mi bi translated">反应型更容易测试。</li></ul><h1 id="b7d3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">反应形式:它们实际上是如何工作的？</h1><p id="eab4" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">为了理解反应式表单如何工作，首先你需要知道<a class="ae jy" href="https://www.devhelperworld.in/2019/10/know-everything-about-angular-8-template-driven-forms.html" rel="noopener ugc nofollow" target="_blank">模板驱动表单</a>如何工作的基础知识。在基于反应式表单的方法中，我们通过组件类中的FormGroup和FormControl实例来定义表单模型。</p><p id="10b6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">然后我们将模板绑定到表单模型，这意味着我们的表单没有直接修改数据模型。现在，您可能会问，如何创建表单模型？</p><p id="7352" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">为了创建一个表单模型，我们需要在表单的模板部分定义一个FormGroup指令。该表单组代表整个表单。FormGroup包含引用表单本身状态的属性。为了表示状态，我们需要提供FormControl对象的实例作为FormGroup对象中的键值对。</p><p id="84aa" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">下面是在组件的HTML文件中定义表单模型的示例。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/1671542d6c70fcd2b974aac795ace7c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*2y0LPW8QSLVU3uq4.png"/></div></figure><p id="6c35" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">FormControl对象引用表单中的每个输入元素。要将输入字段与FormControl对象绑定，我们需要在组件的HTML文件中指定FormControlName值。然后，我们需要在组件的typescript文件中引用该值。</p><p id="6437" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">下面是在组件的typescript文件中定义表单模型的示例。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/4a3a2e4b6a8396a6affb7c56247a09b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/0*aB4nEzlZrR_ya7Z_.png"/></div></figure><h1 id="89b4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">FormBuilder在Angular中有什么用？</h1><p id="879a" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">有时，您需要处理大型复杂的表单，然后您需要重复键入“new FormControl(')”、“new FormGroup({})”。因此，用这种单调乏味的方式来表示如此大的表单。此外，您几乎无法阅读代码，代码调试可能需要很长时间。</p><p id="7075" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">幸运的是，angular在这方面帮助了我们。您可以使用FormBuilder类来表示更大、更复杂的表单，以便于阅读、理解、调试和维护。</p><p id="2950" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">下面的屏幕截图是使用FormBuilder类的示例。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/e239a6e9f84367305645dbce609631d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/0*cSwi5DhA1lmTP_if.png"/></div></figure><h2 id="02ff" class="mu ky iq bd kz mv mw dn ld mx my dp lh kk mz na ll ko nb nc lp ks nd ne lt nf bi translated">什么是正式婚姻？</h2><p id="e6be" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">根据angular的官方文档:<em class="ng">它跟踪FormControl、FormGroup或FormArray实例数组的值和有效性状态。</em></p><p id="b2d2" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">让我解释一下这是什么意思。简而言之，FormArray是一个确保FormControl实例放在一个数组中的类。您可以将FormArray类视为类似于FormGroup类，它保存FormControl实例的对象。</p><h2 id="fa54" class="mu ky iq bd kz mv mw dn ld mx my dp lh kk mz na ll ko nb nc lp ks nd ne lt nf bi translated">那么，FormArray和FormGroup在Angular上有什么区别呢？</h2><p id="abc0" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">简而言之，对于管理未知数量的表单元素，FormArray是FormGroup的替代方案。FormArray和FormGroup都允许操作表单元素。</p><p id="4363" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">但是，如果我们比较它们，那么FormArray方法更好，因为它的方法确保控件在表单的层次结构中被正确跟踪。</p><p id="4ea4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">需要注意的另一点是，FormArray的数据被序列化为数组，而FormGroup的数据被序列化为对象。</p><h1 id="b63c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">角反应形式示例</h1><p id="8510" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">让我们构建一个表单，收集用户的各种信息，如姓名、电子邮件地址、年龄、地址、卡号等。</p><p id="1558" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">以下是我们将创建的应用程序的屏幕截图。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/4a948b6a651086ca6e68fa128995909e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*N5pM0NR2HXXOJxge.png"/></div></figure><p id="5bd8" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如果你点击<a class="ae jy" href="https://drive.google.com/file/d/1GsGdxgQpdFr5nVT0jxpQj6hU3dgAygMM/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>下载完整的项目会更好。</p><h1 id="8494" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">app.component.ts文件说明</h1><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4c87f71ec3587e0ba9cc7a615886f9ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*ZTeyzN3Z6SX7V5fm.png"/></div></figure><p id="eea9" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在上面的截图中，我们讨论了我们需要一个form group指令，在这个指令中我们可以将单个子元素放入一个对象中。在第25行，我们想在“contactInfo”对象下发送联系信息。这就是我们使用表单生成器对象的组功能的原因。</p><p id="db52" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在该函数中，我们编写了“contactInfo”对象下的字段，例如，姓名、年龄、电子邮件、地址等。类似地，在第33行，我们将卡号字段放在“paymentInfo”对象下。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/7c85aa7778b9b022fadcd777a1e227e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*haTZl34cqwTaQo8-.png"/></div></figure><p id="d76c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在上面的截图中，我们使用了angular已经提供给我们实现的一些内置验证器。如果这些内置的验证器对我们来说还不够，那么我们应该实现我们自己的定制验证器。</p><p id="016e" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">例如，我们实现了一个定制的年龄验证器，它负责验证年龄必须在18到60岁之间。实现验证器的代码片段如下所示。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/448ddde21aa27a69059fd41dd54542b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*D0c2hAhiskDMvjSh.png"/></div></figure><p id="8e94" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">为了创建一个定制的验证器，我们需要实现“ValidatorFn”接口。为此，我们在“AgeValidators”类中创建了“validateAge”静态函数。我们这样做是为了不用创建类的实例就可以轻松地调用函数。</p><p id="e188" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">该函数将AbstractControl作为参数，如果存在任何错误，则返回ValidationErrors，如果不存在任何错误，则返回null。为了表示“ValidationErrors”，我们需要返回一个键值对(例如，“validateAge: true”)。</p><p id="2958" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们已经编写了实现自定义验证器的逻辑，现在我们必须在用户输入不在18到60岁之间的年龄时显示错误消息。要显示该错误消息，我们需要编写如下突出显示部分所示的代码。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/f78d5c81a8bce13471a3b8c6b93e2c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*bLdrhc9yEZR9FkOu.png"/></div></figure><p id="2e22" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">最后，我们添加了一些功能，以便用户可以添加多个地址。为了实现这一点，我们使用了数组。首先，我们在FormBuilder类下定义了形式数组。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/b26236e7556a17adae0e6a6d08f6c6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*sz6LtVuYargqBuI1.png"/></div></figure><p id="9814" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们需要引用FormArray实例，在我们的模板文件中也是如此，我们可以借助FormArrayName指令来做到这一点。然后，我们遍历所有动态添加的地址字段，并附加一个名为“removeAddress()”的事件来删除特定索引处的地址字段。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/7dbcc2d9f1d7822ec6e1ea295f366b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*LCDqUN7-xLQKJvJH.png"/></div></figure><p id="53b6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在循环之外，我们添加了一个执行“addFields()”事件的按钮。addFields()和removeAddress()的代码片段如下所示。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/e4541e571672e6dfa4ad1fdb65aaf82a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*FOlMwXqmOiWuysG5.png"/></div></figure><h1 id="832f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><em class="ni">遗言</em></h1><p id="6446" class="pw-post-body-paragraph jz ka iq kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ij bi translated">我希望在读完这篇关于角反应形式的文章后，你对它有一个坚实的理解。如果你有任何疑问，可以问我问题。如果这篇文章对你有帮助，请分享给其他人。谢谢大家！</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="3c94" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><em class="ng">原载于</em><a class="ae jy" href="https://www.devhelperworld.in/2019/11/comprehensive-guide-to-angular-8-reactive-forms.html" rel="noopener ugc nofollow" target="_blank"><em class="ng">https://www . devhelperworld . in</em></a><em class="ng">。</em></p></div></div>    
</body>
</html>
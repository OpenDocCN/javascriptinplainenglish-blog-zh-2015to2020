<html>
<head>
<title>Why you should start using Snowpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你应该开始使用Snowpack</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-start-to-use-snowpack-86a9cf999800?source=collection_archive---------1-----------------------#2020-05-07">https://javascript.plainenglish.io/why-you-should-start-to-use-snowpack-86a9cf999800?source=collection_archive---------1-----------------------#2020-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="45ae" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">面向现代web应用的快速简单的免捆绑构建工具</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/891b28e37174b12d68bd4ca03f4760e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNzRdo4zdmOXAxmLq-BJxQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Polina Zimmerman in Pexels</figcaption></figure><p id="3628" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天，我们相信我们需要一个像Webpack这样的模块捆绑器来构建我们的应用程序，开发简单的应用程序，或者在开发期间，但是这不是真的。</p><p id="2cb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在过去的某个时候，JavaScript模块捆绑器成为web开发的任何阶段的必要部分，增加了任何开发的复杂性。</p><p id="4ebc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现代模块捆扎机的一个例子是<a class="ae lr" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>。Webpack是一个强大的工具，可以做很多事情，但同时，可能很难配置，并且有很大的学习曲线。Webpack是在2012年推出的，当时ES模块还不存在。</p><p id="1aa2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如今，我们有了其他替代产品，如无模块捆绑包的Snowpack，2.0版本将于本月晚些时候发布，但我们现在可以尝试一下。</p><p id="7798" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:<em class="ls">这些例子在Snowpack的2.0版本和之前的版本</em>中都有效。</p><p id="ea7b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Snowpack模块是在2019年推出的，当时现代浏览器已经支持ES模块。也就是说，我认为Snowpack在许多方面更容易使用，在许多情况下更实用，在本文中，我将向您展示一个简单的示例。</p><p id="cd78" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，创建一个<a class="ae lr" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>项目(如果您想使用yarn，情况类似):</p><p id="f72b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">这将创建一个package.json文件，您将使用它来添加项目依赖项:</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="0e28" class="ly lz iq lu b gy ma mb l mc md">$npm init</span></pre><p id="2328" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装Snowpack:</p><p id="8b32" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">我觉得还是本地安装比较好，不过随你喜欢。</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="4e0e" class="ly lz iq lu b gy ma mb l mc md">//Install locally, in your project:<br/>$npm install --save-dev snowpack<strong class="lu ir">@next</strong></span><span id="2a65" class="ly lz iq lu b gy me mb l mc md">//Install glaobaly:<br/>$npm install -g snowpack</span></pre><p id="b7b8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注:添加“@ <em class="ls">下一个”尝试新的2.0版本。</em></p><p id="06cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装“js-storage”依赖项:</p><p id="3b5a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">在这个例子中，我将使用“</em>JS-Storage<em class="ls">”:</em>JS Storage是一个简化存储访问的插件(HTML5)。</p><p id="74e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">js-存储</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="14f6" class="ly lz iq lu b gy ma mb l mc md">$npm install --save-dev js-storage</span></pre><p id="9151" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">前面的命令在/node_modules/文件夹中安装“js_storage”库。但是请注意，您不能直接使用它，因为它不符合ESM模块规范。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="2a55" class="ly lz iq lu b gy ma mb l mc md">import js_storage from 'js-storage'; //No a valid ESM.</span></pre><p id="40df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">虽然我们大多数人写的是“</em> js-storage <em class="ls">”，而不是“</em> js-storage <em class="ls">。如果没有文件扩展名，浏览器就无法理解它，因为它不是一个有效的URL。Snowpack允许您将npm包捆绑成单个文件，因此它可以生成那个</em> js-storage <em class="ls">。浏览器能理解的js。</em></p><p id="1a7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">运行SnowPack:</p><p id="0edd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用npx来执行snowpack二进制文件，因此我们需要安装npx(执行npm包二进制文件)。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="2022" class="ly lz iq lu b gy ma mb l mc md">$ npm install -g npx</span><span id="fed1" class="ly lz iq lu b gy me mb l mc md">//Execute<br/>$ npx snowpack</span></pre><p id="b205" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">什么也没发生:</p><p id="6699" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">⠼积雪场正在安装<br/> ✖没什么可安装的。</p><p id="2988" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要解决这个问题，请打开package.json文件，并将您的依赖项添加到Snowpack config:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="15c9" class="ly lz iq lu b gy ma mb l mc md">{<br/>  "name": "example",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC",<br/>  "devDependencies": {<br/>    "js_storage": "^1.1.0",<br/>    "snowpack": "^2.0.0-beta.9"<br/>  },</span><span id="d267" class="ly lz iq lu b gy me mb l mc md">"snowpack": {<br/>    "knownEntrypoints": [<br/>      "js_storage"<br/>    ]<br/>  }<br/>}</span></pre><p id="e4d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意:<em class="ls">在以前版本的SnowPack( &lt; 2)中，“knownEntrypoints”被称为“webDependencies”。</em></p><p id="6a3e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">再次运行:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="56d9" class="ly lz iq lu b gy ma mb l mc md">npx snowpack</span></pre><p id="d6b7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">✔扫雪包安装完成。[0.77秒]</p><p id="4105" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">⦿网_模块/大小gzip <br/> └─ js-storage.js</p><p id="7b5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Snowpack安装您的npm依赖项，以便它们可以直接在现代浏览器中运行(通过原生ESM导入)。</p><p id="b631" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Snowpack将您的软件包安装在“/web_modules”目录中(您可以配置路径*)。现在，您可以直接在浏览器中导入和使用它们，而无需额外的捆绑阶段。</p><p id="7bc5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">请注意，这种无需使用模块捆绑器就能在浏览器中导入npm包的能力是所有无捆绑开发和Snowpack的基础。</em></p><p id="40ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">直接在浏览器上使用依赖关系:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="6a94" class="ly lz iq lu b gy ma mb l mc md">&lt;script type="module"&gt;<br/>   import js-storage <br/>       from "/web_modules/js_storage.js";<br/>&lt;/script&gt;</span></pre><p id="e163" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者在js文件中使用依赖关系:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="ba3f" class="ly lz iq lu b gy ma mb l mc md">import js-storage<br/>       from '/web_modules/js_storage.js';</span></pre><p id="d251" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">* *在package.json(可选)文件中配置输出路径:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="91d3" class="ly lz iq lu b gy ma mb l mc md">...<br/>"snowpack": {<br/>    ...<br/>    "installOptions": {<br/>      "dest": "/<strong class="lu ir">my_web_modules</strong>"<br/>    }<br/>  }<br/>...</span></pre><p id="7b37" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是全部。直截了当地说，您可以在浏览器或js文件中使用npm依赖项。</p><p id="f05c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Snowpack还有一个“开发服务器”(一个用于web应用程序的即时开发环境)。如果执行以下命令，将启动一个静态服务器:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="027b" class="ly lz iq lu b gy ma mb l mc md">$snowpack dev</span></pre><p id="5864" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在“无捆绑”开发中，每个文件都是根据浏览器的请求构建的，所以启动时不需要做任何工作，也不需要在每次更改单个文件时再次“捆绑”。</p><p id="66e9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还可以部署您的应用程序，并通过执行以下命令为生产生成您的站点的静态副本:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="57bd" class="ly lz iq lu b gy ma mb l mc md">$snowpack build</span></pre><p id="f4af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，您可以通过为生产环境“捆绑”您的最终部署(js文件、css文件)来优化您的站点，方法是执行以下命令:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="a7a3" class="ly lz iq lu b gy ma mb l mc md">$snowpack build -bundle</span></pre><p id="40cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还可以使用Snowpack来驱动整个构建管道。Babel、TypeScript和其他构建工具可以通过行转换直接连接到Snowpack。这些转换被称为“构建脚本”</p><p id="33b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，创建snowpack.config.json文件:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="ad3d" class="ly lz iq lu b gy ma mb l mc md">{<br/>  "scripts": {<br/>   //Pipe every .js file through Babel CLI<br/>   "build:js": "babel --no-babelrc"    <br/>  }<br/>}</span></pre><h2 id="a01a" class="ly lz iq bd mf mg mh dn mi mj mk dp ml le mm mn mo li mp mq mr lm ms mt mu mv bi translated">结论</h2><p id="6e78" class="pw-post-body-paragraph kv kw iq kx b ky mw jr la lb mx ju ld le my lg lh li mz lk ll lm na lo lp lq ij bi translated">现在，现代浏览器已经支持ES模块，Snowpack是一个完美的工具:如果您需要从头开始，它可以直接使用，并且您不需要编写大量的配置。它也很快，您可以以简单的方式在dev o prod模式下使用它。Webpack配置更强大，但是也许你不需要这么多的个性化。</p><p id="25d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我正在一个大项目中使用Snowpack，到目前为止，我没有遇到任何问题，而且，我的性能也有所提高。</p><h2 id="fa9b" class="ly lz iq bd mf mg mh dn mi mj mk dp ml le mm mn mo li mp mq mr lm ms mt mu mv bi translated">参考</h2><p id="d229" class="pw-post-body-paragraph kv kw iq kx b ky mw jr la lb mx ju ld le my lg lh li mz lk ll lm na lo lp lq ij bi translated"><a class="ae lr" href="https://www.snowpack.dev/" rel="noopener ugc nofollow" target="_blank">积雪场网站</a></p><p id="6644" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望你喜欢这篇文章。非常感谢你阅读我！</p></div></div>    
</body>
</html>
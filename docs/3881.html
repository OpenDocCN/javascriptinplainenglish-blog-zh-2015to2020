<html>
<head>
<title>12 Super Useful techniques in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的12个超级有用的技巧</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/12-super-useful-tricks-in-javascript-65c0595d309b?source=collection_archive---------2-----------------------#2020-10-31">https://javascript.plainenglish.io/12-super-useful-tricks-in-javascript-65c0595d309b?source=collection_archive---------2-----------------------#2020-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="344d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在我看来，强制性的知识</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5b9a6dcd793dec0a62b2913287e38ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLXiPG50N4wqwjRbmYASbA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by Gratisography in <a class="ae kv" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="3c58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我整理了一些日常生活中常用的JavaScript“技巧”，节省了大量时间。希望你觉得有用！</p><h1 id="469c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.创建通用函数</h1><p id="fd93" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">假设我们想开发一个通用函数，给定一些参数和一个函数。然后使用这些参数执行该功能。<br/>比如有N个参数，N个运算的计算器。使用spread运算符和reduce函数可以轻松实现这一点:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c354" class="mu lt iq mq b gy mv mw l mx my">function calculator(operation, ...numbers) {<br/>    return operation(...numbers);<br/>}</span><span id="21f6" class="mu lt iq mq b gy mz mw l mx my">function add(...numbers) {<br/>    return numbers.reduce( (total, num) =&gt; total + num, 0);<br/>}</span><span id="04f4" class="mu lt iq mq b gy mz mw l mx my">function subtract(...numbers) {<br/>    return numbers.reduce( (total, num) =&gt; total - num, 0);<br/>}</span><span id="170e" class="mu lt iq mq b gy mz mw l mx my">function multiply(...numbers) {<br/>    return numbers.reduce( (total, num) =&gt; total * num, 1);<br/>}</span><span id="f980" class="mu lt iq mq b gy mz mw l mx my">console.log(calculator(add, 1, 2, 3, 4, 5));<br/>console.log(calculator(subtract, 10, 2, 1));<br/>console.log(calculator(multiply, 2, 2, 2, 2));</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/11d868f7134d672f213989226bed6e61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*fkOVPACDJPQ3tOUL70VWTg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Different operations with our generic function</figcaption></figure><h1 id="9033" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.切换范围</h1><p id="0edc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有时你可能会发现在Switch语句中使用范围很有用。下面是一个如何做到这一点的例子:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f658" class="mu lt iq mq b gy mv mw l mx my">function chooseSportByTemperature(fahrenheit) { <br/>  let sport;<br/>  switch (true) {<br/>   <br/>   case (fahrenheit &gt;= 15 &amp;&amp; fahrenheit &lt;=20):<br/>     sport = 'Running';<br/>     break;</span><span id="c678" class="mu lt iq mq b gy mz mw l mx my">   case (fahrenheit &gt; 20 &amp;&amp; fahrenheit &lt;= 30):<br/>    sport = 'Cycling';<br/>    break;</span><span id="ab0a" class="mu lt iq mq b gy mz mw l mx my">   case (fahrenheit &gt; 30):<br/>    sport = 'Stay in home';<br/>    break;</span><span id="3775" class="mu lt iq mq b gy mz mw l mx my">   default:<br/>    sport = 'Sex';<br/>   <br/>   }<br/>return sport;<br/>}</span></pre><h1 id="5d4a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.将多个开关箱分组</h1><p id="de42" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一种简单的对案例句子进行分组的方法:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="88df" class="mu lt iq mq b gy mv mw l mx my">function setMyValueByValue(value) { <br/>    let myValue;<br/>  switch (value)<br/>  {<br/>     case "value1":<br/>     case "value2":<br/>     case "value3": <br/>         myValue = "My value 1-2-3"<br/>         break;<br/>     case "value4":     <br/>         myValue = "My value 4"<br/>         break;<br/>     default: <br/>         myValue = "Default value"<br/>  }<br/> return myValue;<br/>}</span><span id="56d9" class="mu lt iq mq b gy mz mw l mx my">console.log(setMyValueByValue("value1"));<br/>console.log(setMyValueByValue("value2"));<br/>console.log(setMyValueByValue("value3"));<br/>console.log(setMyValueByValue("value4"));<br/>console.log(setMyValueByValue("value5"));</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/8c3ee25597101da3ef66f0c77bd5280e.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*3pgitN6uJPgn0cqa4_uPRg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Grouping multiple switch cases.</figcaption></figure><h1 id="812c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.用async/await等待多个异步函数</h1><p id="105d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">可以在异步函数中使用(Promise.all)来等待多个异步函数完成。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="8ea6" class="mu lt iq mq b gy mv mw l mx my">function resolveAfter1Seconds() {<br/>  return new Promise(resolve =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve('resolved');<br/>    }, 1000);<br/>  });<br/>}</span><span id="eeb4" class="mu lt iq mq b gy mz mw l mx my">function resolveAfter2Seconds() {<br/>  return new Promise(resolve =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve('resolved');<br/>    }, 2000);<br/>  });<br/>}</span><span id="f11e" class="mu lt iq mq b gy mz mw l mx my">function resolveAfter3Seconds() {<br/>  return new Promise(resolve =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve('resolved');<br/>    }, 3000);<br/>  });<br/>}</span><span id="7dbc" class="mu lt iq mq b gy mz mw l mx my">function resolveAfter4Seconds() {<br/>  return new Promise(resolve =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve('resolved');<br/>    }, 4000);<br/>  });<br/>}</span><span id="463e" class="mu lt iq mq b gy mz mw l mx my">async function asyncFunction() {<br/>  console.log('start');<br/>  const result = <strong class="mq ir">await Promise.all</strong>(<br/>  <br/>  [resolveAfter1Seconds(),<br/>   resolveAfter2Seconds(),<br/>   resolveAfter3Seconds(),<br/>   resolveAfter4Seconds()])</span><span id="e3c4" class="mu lt iq mq b gy mz mw l mx my">  console.log(result); //resolved after 4 seconds !<br/>  console.log('end');<br/>}</span><span id="4610" class="mu lt iq mq b gy mz mw l mx my">asyncFunction();</span></pre><h1 id="19b7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.一步展平二维数组</h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0714" class="mu lt iq mq b gy mv mw l mx my">const multidimensionalArray = [1,2, [3, 4], [5, 6], 7, [8] ];</span><span id="43c4" class="mu lt iq mq b gy mz mw l mx my">const flatArray = (original) =&gt; [].concat(...original);</span><span id="7d7f" class="mu lt iq mq b gy mz mw l mx my">const flattenedArray = flatArray(multidimensionalArray);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/fb2f70ef4a04864e7b852386a63b5579.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*-4tzsJnNJGZPe6EWIhfLHQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Bidimensional flattened Array</figcaption></figure><h1 id="73e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.一步展平多维数组</h1><p id="c9ab" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用flat()方法，我们可以创建一个新数组，将所有子数组元素递归连接到指定深度。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7c05" class="mu lt iq mq b gy mv mw l mx my">const multidimensionalArray = [0, 1, 2, [[[3, 4, 5]]]];</span><span id="e21e" class="mu lt iq mq b gy mz mw l mx my">console.log(multidimensionalArray.flat());</span><span id="02ba" class="mu lt iq mq b gy mz mw l mx my">console.log(multidimensionalArray.flat(3)); //depth 3.</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/98f90864ac287d27f8c43c2b83ae710c.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*7uvYMG8trKWeLyaYxBY3-g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Multidimensional flattened array</figcaption></figure><h1 id="9f9e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.用JavaScript创建纯对象</h1><p id="e865" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建不继承任何对象属性的纯JavaScript对象通常很有趣。实现这一点非常简单，只需执行以下操作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="4361" class="mu lt iq mq b gy mv mw l mx my">const car = {type:"Ford", model:"250", color:"black"};</span><span id="d948" class="mu lt iq mq b gy mz mw l mx my">console.log(car);<br/>console.log(car.constructor);<br/>console.log(car.toString);<br/>console.log(car.hasOwnProperty);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/17b02f6a3734a69a51e6130b135a5ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*_SYMAN0p-B_muiE_MqcTIg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Regular JavaScript Object</figcaption></figure><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9555" class="mu lt iq mq b gy mv mw l mx my">const  pureCar = Object.create(null);</span><span id="6424" class="mu lt iq mq b gy mz mw l mx my">console.log(pureCar);<br/>console.log(pureCar.__proto__);<br/>console.log(pureCar.constructor);<br/>console.log(pureCar.toString);<br/>console.log(pureCar.hasOwnProperty);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/35ac6963546950ac29169e19678561b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*hRKnS9LR28J4HeGZ1yYfTg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Pure JavaScript Object</figcaption></figure><h1 id="cccf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">8.一步移除数组中的重复元素</h1><p id="a43e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要移除数组中的重复元素，可以使用destructuring和ES6 Set:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0816" class="mu lt iq mq b gy mv mw l mx my">const removeDuplicatesFromArray = arr =&gt; [...new Set(arr)];<br/> <br/>removeDuplicatesFromArray([1,1,2,3,4,4,4,true,true,'foo','foo']);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/600ea774605e4d2929fffb762d7a9b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*-8m4AAbK6zM_s4zQKNCM8g.png"/></div></figure><h1 id="315d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">9.当页面开始并完成加载时，在控制台中显示</h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="a8fd" class="mu lt iq mq b gy mv mw l mx my">&lt;script&gt;<br/>   window.onload=() =&gt;{console.log('Start');}<br/>   window.onunload=() =&gt;{console.log('Finish');}<br/>&lt;/script&gt;</span><span id="86b7" class="mu lt iq mq b gy mz mw l mx my">Or better:</span><span id="0686" class="mu lt iq mq b gy mz mw l mx my">&lt;script&gt;<br/>   window.onload=() =&gt;{console.time('pageLoadingTime');}<br/>   window.onunload=() =&gt;{console.timeEnd('pageLoadingTime');}<br/>&lt;/script&gt;</span></pre><p id="b382" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还可以使用console.time('一个唯一的名称')和console.timeEnd('一个唯一的名称')函数来启动和结束一个计时器，以跟踪一个操作需要多长时间。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0279fcbf25b81706a7da255f40f53870.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*1GTkauQOlxjLW4iigxt5Fw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Using console.time() and console.timeEnd()</figcaption></figure><h1 id="f6a9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">10.按钮打印当前页面</h1><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="56cc" class="mu lt iq mq b gy mv mw l mx my">&lt;input type="button" value="Print this page!" onclick="window.print()"&gt;</span></pre><h1 id="8d5e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">11.四舍五入数字</h1><p id="78c6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以舍入到最接近的整数，向下舍入，或向上舍入。JavaScript使用三种方法来实现这一点:数学</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="36a5" class="mu lt iq mq b gy mv mw l mx my">let myNumber= 1.56789;<br/>myNumber = myNumber.toFixed(2);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/d8e6138b6c58c11c48e42ea72a546767.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*BDowKrDviHl1ckqCU9JbFA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">myNumber round to two decimals</figcaption></figure><p id="4f7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出是一个字符串，需要传递给parseFloat()函数以返回一个数字。可惜这个真的很慢。但是如果你需要精确，这是更好的方法。</p><p id="168b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是使用Math.round舍入到最接近的整数:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="6abc" class="mu lt iq mq b gy mv mw l mx my">let myNumber= 1.56789;<br/>Math.round(myNumber);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/2fa4de10d1e95b07eb5374f728a5543c.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*ZZQ5b_0Cb1TWc276GNi2ag.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">myNumber round with Math.round</figcaption></figure><p id="8e95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者向下舍入的Math.floor()和向上舍入的Math.ceil()。</p><p id="0c27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，舍入不同于截断:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="811d" class="mu lt iq mq b gy mv mw l mx my">let myNumber= 1.56789;<br/>Math.trunc(myNumber);</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d998d8fd3d62708734739d6adb8063f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*SMtAkIe5iXB6LBfUWkDdoQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">myNumber truncated with Math.trunc</figcaption></figure><p id="7f67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Math.trunc()删除所有小数。</p><h1 id="f99e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">12.清空数组</h1><p id="db22" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">就像给他的length属性赋值一样简单:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="e5dd" class="mu lt iq mq b gy mv mw l mx my">let myArray = [1,2,3,4,5,6,7,8,9,10];<br/>myArray.length = 0;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/55c12e3f6b65fabc84d7e19770910c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*mbFMfpWGXCEBhwh3lcBdpw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">My new empty array</figcaption></figure><h1 id="109d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="0562" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我希望这篇文章对你有用，让你愉快。通过结合语言带给我们的东西，我们经常可以实现强大而实用的东西，比如用几步就可以创建一个通用的计算器。</p><p id="a4bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多尽在<a class="ae kv" href="https://link.medium.com/gkH7UBqmebb" rel="noopener"> <strong class="ky ir"> 12更JavaScript </strong> </a>新超级有用的招数</p><p id="7837" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这篇文章，可以考虑通过我的<a class="ae kv" href="https://kesk.medium.com/membership" rel="noopener">个人资料</a>订阅Medium。谢谢大家！</p></div></div>    
</body>
</html>
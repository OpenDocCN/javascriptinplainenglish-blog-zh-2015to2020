<html>
<head>
<title>Common Vue Problems — Background Image in Style Tag, Plugins, Previous Routes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见的Vue问题——样式标签、插件、以前路线中的背景图像</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/common-vue-problems-background-image-in-style-tag-plugins-previous-routes-d313d6e8fbdf?source=collection_archive---------5-----------------------#2020-07-10">https://javascript.plainenglish.io/common-vue-problems-background-image-in-style-tag-plugins-previous-routes-d313d6e8fbdf?source=collection_archive---------5-----------------------#2020-07-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2e8c0c29a4c03e63f3c120533cec51a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GHt9V4c6vh0xwfVG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pactovisual?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pacto Visual</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="91b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js让开发前端应用变得简单。然而，我们仍有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看一些常见的问题，并看看如何解决它们。</p><h1 id="2d83" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在样式标签中添加背景图像</h1><p id="3601" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fa61" class="mn lc iq mj b gy mo mp l mq mr">url('~@/assets/image.png').</span></pre><p id="5584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe ms mt mu mj b">assets</code>文件夹中的图像作为背景图像。</p><p id="3db6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4ca9" class="mn lc iq mj b gy mo mp l mq mr">background-image: url('~@/assets/image.png');</span></pre><p id="b459" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的<code class="fe ms mt mu mj b">style</code>标签中。</p><p id="63b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">@</code>将解析为一个别名。<code class="fe ms mt mu mj b">~</code>表示解析到一个模块请求。</p><p id="488b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，图像将被视为一个模块。</p><h1 id="fd3b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在使用Vue路由器中创建404组件</h1><p id="5cf5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一个404组件可以用<code class="fe ms mt mu mj b">'*'</code>路径创建，所以我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6a33" class="mn lc iq mj b gy mo mp l mq mr">{ path: '*', <!-- -->component: NotFound<!-- --> },</span></pre><p id="7c03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在路线数组中添加它。</p><h1 id="ae2e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Vue应用中包含全局功能</h1><p id="733e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有几种方法可以包含全局函数。</p><p id="c7ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将它作为静态属性附加到<code class="fe ms mt mu mj b">Vue</code>构造函数上。</p><p id="20b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ef90" class="mn lc iq mj b gy mo mp l mq mr">Vue.globalMethod = () =&gt; {}</span></pre><p id="8692" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以通过编写以下代码来添加一个全局资产，如指令或过滤器:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d4df" class="mn lc iq mj b gy mo mp l mq mr">Vue.directive('my-directive', {})</span></pre><p id="5017" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f595" class="mn lc iq mj b gy mo mp l mq mr">Vue.filter('my-filter', {})</span></pre><p id="9de8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以通过编写以下代码将其添加为实例方法:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7ea3" class="mn lc iq mj b gy mo mp l mq mr">Vue.prototype.globalMethod = function(){}</span></pre><p id="ef70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下代码将所有这些东西放在一个插件中:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8699" class="mn lc iq mj b gy mo mp l mq mr">MyPlugin.install = function (Vue, options) {<br/>  Vue.globalMethod = ...</span><span id="84c5" class="mn lc iq mj b gy mv mp l mq mr">  Vue.directive('my-directive', {})</span><span id="c725" class="mn lc iq mj b gy mv mp l mq mr">  Vue.prototype.$globalMethod = ...<br/>}</span></pre><p id="a37e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们定义了<code class="fe ms mt mu mj b">install</code>方法，让我们可以将所有这些东西添加到任何使用我们插件的应用程序中。</p><p id="7116" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe ms mt mu mj b">Vue.use</code>在我们的应用程序中注册插件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bf1c" class="mn lc iq mj b gy mo mp l mq mr">Vue.use(MyPlugin)</span></pre><p id="9834" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在它可以在任何地方使用。</p><p id="ca37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下代码来调用静态全局方法:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3592" class="mn lc iq mj b gy mo mp l mq mr">Vue.globalMethod()</span></pre><h1 id="e09e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">重新安装组件</h1><p id="e9cf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过设置<code class="fe ms mt mu mj b">key</code>道具来重新安装一个组件。</p><p id="d14a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过这种方式，<code class="fe ms mt mu mj b">key</code>值发生了变化，因此我们重新安装了组件。</p><p id="e975" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="27f8" class="mn lc iq mj b gy mo mp l mq mr">&lt;div id="app"&gt;<br/>  &lt;my-component :key="key"&gt;&lt;/my-component&gt;<br/>  &lt;button @click="key = !key"&gt;reload&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="5cd6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击按钮打开和关闭按键时，<code class="fe ms mt mu mj b">my-component</code>将重新加载。</p><h1 id="b6b8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">侦听窗口滚动事件</h1><p id="b7d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们甚至可以通过在<code class="fe ms mt mu mj b">created</code>钩子中添加事件监听器来监听窗口滚动。</p><p id="1603" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，当组件被卸载时，我们必须记住删除事件监听器，以便我们自己清理。</p><p id="b9d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fa33" class="mn lc iq mj b gy mo mp l mq mr">export default {<br/>  created () {<br/>    window.addEventListener('scroll', this.handleScroll);<br/>  },<br/>  destroyed () {<br/>    window.removeEventListener('scroll', this.handleScroll);<br/>  },<br/>  methods: {<br/>    handleScroll (event) {<br/>      // ...<br/>    }<br/>  }<br/>}</span></pre><p id="1cc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在创建组件时会运行<code class="fe ms mt mu mj b">created</code>钩子，所以我们可以用<code class="fe ms mt mu mj b">addEventListener</code>在那里添加事件监听器。</p><p id="bd15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后当组件被破坏时，我们调用<code class="fe ms mt mu mj b">removeListener</code>。</p><h1 id="be93" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">订购项目和v-for</h1><p id="4c98" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了按照我们想要的顺序呈现数组项目，我们应该创建一个计算属性来对项目进行排序，并用<code class="fe ms mt mu mj b">v-for</code>来呈现。</p><p id="8bc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写以下内容来创建它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c159" class="mn lc iq mj b gy mo mp l mq mr">computed: {<br/>  orderedBooks() {<br/>    return _.orderBy(this.books, 'author')<br/>  }<br/>}</span></pre><p id="76bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe ms mt mu mj b">v-for</code>而不是<code class="fe ms mt mu mj b">books</code>来渲染<code class="fe ms mt mu mj b">orderedBooks</code>数组。</p><p id="2c51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e014" class="mn lc iq mj b gy mo mp l mq mr">&lt;p v-for="book in orderedBooks"&gt;{{ book.author }}&lt;/p&gt;</span></pre><h1 id="dfeb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">这之间的区别。$set和Vue.set</h1><p id="4cae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">this.$set</code>和<code class="fe ms mt mu mj b">Vue.set</code>都让我们更新一个对象或数组条目，并触发模板中的更新。</p><p id="f01b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">this.$set</code>仅在组件实例中可用。</p><p id="0155" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Vue.set</code> in用于我们引用了一个反应性对象，但我们没有在定义状态的组件实例之外引用它们的情况。</p><h1 id="0f9a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Vue路由器中获取上一页URL</h1><p id="a7a2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以从<code class="fe ms mt mu mj b">beforeRouteEnter</code>钩子中的<code class="fe ms mt mu mj b">from</code>参数得到Vue路由器中的上一页URL。</p><p id="9fc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9c10" class="mn lc iq mj b gy mo mp l mq mr">data() {<br/> return {<br/>   ...<br/>   prevRoute: null<br/> }<br/>},<br/>beforeRouteEnter(to, from, next) {<br/>  next(vm =&gt; {<br/>    vm.prevRoute = from<br/>  })<br/>},</span></pre><p id="9a20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码是组件代码的一部分。</p><p id="1ed6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需给它加上<code class="fe ms mt mu mj b">beforeRouteEnter</code>挂钩，然后就可以得到之前导航到的路线。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4a25031f6d48438308a15e0bc8d8678a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i_jjbYJDBwaJxJkR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@snowboardinec?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Max Baskakov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5006" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f556" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以从<code class="fe ms mt mu mj b">beforeRouteEnter</code>钩子中得到之前路线的URL。</p><p id="5b82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要添加图像，我们可以在路径中使用前缀<code class="fe ms mt mu mj b">~@</code>将图像作为模块导入CSS中。</p><p id="c529" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">全局属性可以作为静态变量或实例变量添加。</p><h2 id="1463" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="25f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Learn Immutability in JavaScript with Immer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Immer学习JavaScript中的不变性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/learn-immutability-in-javascript-with-immer-5c515ff2982?source=collection_archive---------6-----------------------#2020-05-29">https://javascript.plainenglish.io/learn-immutability-in-javascript-with-immer-5c515ff2982?source=collection_archive---------6-----------------------#2020-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f1ea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">如果知道如何使用Object.assign()和spread运算符，就可以不用了！</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/a540d0d20c01188e9ec81cf8a99e21d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*Bd1Q0PSnKyGAvlfFi7HdnQ.png"/></div></div></figure><h1 id="b35b" class="ks kt iq bd ku kv kw kx ky kz la lb lc jw ld jx le jz lf ka lg kc lh kd li lj bi translated">了解如何使用不变性</h1><p id="9e07" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">我将向您展示如何停止使用Object.assign()和spread运算符。但如果你还不知道怎么用，请先学这个。如果你知道怎么做，你可以在这个棒极了的库的帮助下让它变得更容易。</p><h1 id="9a28" class="ks kt iq bd ku kv kw kx ky kz la lb lc jw ld jx le jz lf ka lg kc lh kd li lj bi translated">总是（德语词）</h1><p id="8d1f" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">所以有一个非常有用的小图书馆。当更新React或Redux中的状态时，我们需要以不可变的方式来完成。基本上，这意味着我们正在复制当前状态，转换副本，并用新状态替换旧状态。这需要一种不容易阅读或维护的编程方式。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi mg"><img src="../Images/575e80aa77efaf6a81044031063fd72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*23DfA8BQQ7EkPVV9.png"/></div></div></figure><p id="436a" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated">那是Immer加入派对的地方。Immer为我们提供了编写代码的选项，就像我们希望的那样，并在幕后的某个地方执行不变的部分</p><h1 id="f288" class="ks kt iq bd ku kv kw kx ky kz la lb lc jw ld jx le jz lf ka lg kc lh kd li lj bi translated">生产</h1><p id="e880" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">Produce是Immer库公开的默认函数。这个函数基本上完成了所有的魔法。</p><pre class="kh ki kj kk gt mm mn mo mp aw mq bi"><span id="b275" class="mr kt iq mn b gy ms mt l mu mv">produce(currentState, producer: (draftState) =&gt; void): nextState</span></pre><p id="2d17" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated">【https://immerjs.github.io/immer/docs/produce】来源<a class="ae mx" href="https://immerjs.github.io/immer/docs/produce" rel="noopener ugc nofollow" target="_blank">T5来源</a></p><p id="696b" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated"><strong class="lm ir"> currentState </strong>期望您想要以不可变的方式执行更改的状态</p><p id="e012" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated"><strong class="lm ir">生产者</strong>将作为一个代理函数，其中drafState将接收当前状态作为默认值。<br/>这意味着你可以传递一个带有参数的函数，你可以用一种可变的方式对它进行修改。</p><h2 id="ed8d" class="mr kt iq bd ku my mz dn ky na nb dp lc lt nc nd le lx ne nf lg mb ng nh li ni bi translated">基本示例</h2><pre class="kh ki kj kk gt mm mn mo mp aw mq bi"><span id="9d58" class="mr kt iq mn b gy ms mt l mu mv">npm init -y<br/>npm install immer --save</span></pre><p id="f29a" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated">创建文件useImmer.js</p><pre class="kh ki kj kk gt mm mn mo mp aw mq bi"><span id="0c23" class="mr kt iq mn b gy ms mt l mu mv">node useImmer.js</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/64a1aba3e2c3d751358716ac2775bff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*Go1QcjhTd6GPeILLzkjn_A.png"/></div></figure><h2 id="9d03" class="mr kt iq bd ku my mz dn ky na nb dp lc lt nc nd le lx ne nf lg mb ng nh li ni bi translated">做这件事的另一种方法</h2><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/b71452fd0a74af8878583e11a0301a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*Nh0goQY3pKj1kci4nhSyzA.png"/></div></figure><h2 id="db8d" class="mr kt iq bd ku my mz dn ky na nb dp lc lt nc nd le lx ne nf lg mb ng nh li ni bi translated">将Immer与数组一起使用</h2><p id="65e1" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">您还可以像在正常情况下一样对阵列进行更改。看一下这个例子:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/3dbcb6efe250bebab73c6738face5374.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*yQuQNJnjh9ht3tQBvtSBCA.png"/></div></figure><h1 id="dbd7" class="ks kt iq bd ku kv kw kx ky kz la lb lc jw ld jx le jz lf ka lg kc lh kd li lj bi translated">在反应状态下使用Immer</h1><p id="5a33" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">不变性通常用于React项目中的状态。<br/>看一下这个简单的例子，看看普通方式和Immer方式的区别:</p><h1 id="cae4" class="ks kt iq bd ku kv kw kx ky kz la lb lc jw ld jx le jz lf ka lg kc lh kd li lj bi translated">结论</h1><p id="ad6c" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">深入研究可变性的概念非常有趣。我会建议多了解这个话题，而不是盲目使用Immer库。但是当您理解了这些概念之后，这个库就可以很容易地在项目中与React、Redux和其他库结合使用。</p><p id="3910" class="pw-post-body-paragraph lk ll iq lm b ln mh jr lp lq mi ju ls lt mj lv lw lx mk lz ma mb ml md me mf ij bi translated">阅读更多关于这个项目的信息:<br/><a class="ae mx" href="https://immerjs.github.io/immer/docs/introduction" rel="noopener ugc nofollow" target="_blank">https://immerjs.github.io/immer/docs/introduction</a></p><blockquote class="nm nn no"><p id="c948" class="lk ll mw lm b ln mh jr lp lq mi ju ls np mj lv lw nq mk lz ma nr ml md me mf ij bi translated">如果你喜欢我的内容，请随时关注我！</p><p id="cd05" class="lk ll mw lm b ln mh jr lp lq mi ju ls np mj lv lw nq mk lz ma nr ml md me mf ij bi translated">—托马斯</p></blockquote><h2 id="5031" class="mr kt iq bd ku my mz dn ky na nb dp lc lt nc nd le lx ne nf lg mb ng nh li ni bi translated"><strong class="ak">用简单英语写的便条</strong></h2><p id="ec46" class="pw-post-body-paragraph lk ll iq lm b ln lo jr lp lq lr ju ls lt lu lv lw lx ly lz ma mb mc md me mf ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae mx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm ir"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae mx" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lm ir">订阅我们的YouTube频道</strong> </a> <strong class="lm ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
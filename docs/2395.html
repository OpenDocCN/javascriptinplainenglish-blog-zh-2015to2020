<html>
<head>
<title>Why you should consider using localStorage and sessionStorage instead of cookies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该考虑使用localStorage和sessionStorage而不是cookies</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-consider-using-localstorage-and-sessionstorage-instead-of-cookies-e0f83bf819d9?source=collection_archive---------6-----------------------#2020-06-20">https://javascript.plainenglish.io/why-you-should-consider-using-localstorage-and-sessionstorage-instead-of-cookies-e0f83bf819d9?source=collection_archive---------6-----------------------#2020-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/834ddf19ede921e847432bb8692f6dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uyqdMNf_bTB3mGBwiR24dQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by Mollie Sivaram on Unsplash</figcaption></figure><p id="3a9d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">当您想到web应用程序的数据持久性时，我敢打赌您首先想到的是cookies。你没有错。Cookies是在应用程序中保存数据的一种非常常见的方式。在需要由服务器读取数据的情况下，例如身份验证，它们绝对是正确的选择。然而，在大多数其他情况下，更好的工具是<code class="fe kx ky kz la b">localStorage</code>或<code class="fe kx ky kz la b">sessionStorage</code>。</p><p id="f86d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">那么什么是<code class="fe kx ky kz la b">localStorage</code>和<code class="fe kx ky kz la b">sessionStorage</code>？它们是web存储API的一部分，用于存储键值对。总的来说，这两者可以互换使用，因为它们都执行完全相同的功能并使用完全相同的语法。两者之间的主要区别在于存储的数据持续多长时间。在<code class="fe kx ky kz la b">sessionStorage</code>的情况下，数据将持续到窗口或标签关闭。然而，使用<code class="fe kx ky kz la b">localStorage </code>时，数据将一直存在，直到浏览器缓存被手动清除，或者直到您的代码清除了应用程序中的数据。因为<code class="fe kx ky kz la b">localStorage</code>和<code class="fe kx ky kz la b">sessionStorage</code>执行相同的任务，所以从现在开始我只提到<code class="fe kx ky kz la b">sessionStorage</code>，我们都会同意我也在谈论<code class="fe kx ky kz la b">localStorage</code>。记住，语法是一样的！</p><h2 id="caac" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">为什么在cookies上使用<code class="fe kx ky kz la b">sessionStorage</code>？</h2><p id="a770" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">使用<code class="fe kx ky kz la b">sessionStorage</code>代替cookies有很多好处。</p><ul class=""><li id="2f4f" class="lz ma in kb b kc kd kg kh kk mb ko mc ks md kw me mf mg mh bi translated">数据保存在本地，这意味着它不能被服务器读取。如果您试图执行某种身份验证，这显然是一件坏事，但在其他情况下，它通常会消除cookies带来的安全问题。</li><li id="d735" class="lz ma in kb b kc mi kg mj kk mk ko ml ks mm kw me mf mg mh bi translated"><code class="fe kx ky kz la b">sessionStorage</code>可以存储的数据量要大得多。在大多数浏览器中，这是10Mb，而cookies允许的是4Kb。存储容量增加了2500倍！</li><li id="f3b9" class="lz ma in kb b kc mi kg mj kk mk ko ml ks mm kw me mf mg mh bi translated">所有现代浏览器都支持它。</li><li id="04bd" class="lz ma in kb b kc mi kg mj kk mk ko ml ks mm kw me mf mg mh bi translated">语法非常简单，使得<code class="fe kx ky kz la b">sessionStorage</code>更容易使用。</li></ul><p id="e67e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以现在你在想，“这太神奇了！如果他能给我一些例子，我可以立即开始使用sessionStorage！”</p><h2 id="a9f3" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">创建新条目</h2><p id="6046" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">使用语法<code class="fe kx ky kz la b">sessionStorage.setItem</code>创建新的<code class="fe kx ky kz la b">sessionStorage</code>条目，然后分配一个键值对。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="533d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果需要更新现有条目，方法与创建新条目相同。使用<code class="fe kx ky kz la b">sessionStorage.setItem</code>，但不使用新键，而是使用现有键并输入新值。现有键现在将指向<code class="fe kx ky kz la b">sessionStorage</code>中的更新值。</p><h2 id="828f" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">读取现有条目</h2><p id="878b" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">使用语法<code class="fe kx ky kz la b">sessionStorage.getItem</code>从<code class="fe kx ky kz la b">sessionStorage</code>中读取条目，然后调用所需的键。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="0016" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">删除现有条目</h2><p id="e31c" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">使用<code class="fe kx ky kz la b">sessionStorage.removeItem</code>方法可以删除现有的<code class="fe kx ky kz la b">sessionStorage</code>条目。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="7794" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">清除所有的东西！</h2><p id="bd21" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">还记得我在文章开头提到的保存到<code class="fe kx ky kz la b">localStorage</code>的数据会一直存在，直到用户手动清除浏览器缓存，或者直到您的应用程序清除来自<code class="fe kx ky kz la b">localStorage</code>的数据吗？如果你想清除一个条目，你可以使用前面提到的删除方法。但是如果你想清除所有已经保存到<code class="fe kx ky kz la b">localStorage</code>或者<code class="fe kx ky kz la b">sessionStorage</code>的数据呢？为此，您可以简单地使用<code class="fe kx ky kz la b">clear</code>方法。事实上，它太简单了，甚至不值得创建一个要点给你看。就叫<code class="fe kx ky kz la b">sessionStorage.clear()</code>。就是这样。</p><h2 id="364e" class="lb lc in bd ld le lf dn lg lh li dp lj kk lk ll lm ko ln lo lp ks lq lr ls lt bi translated">存储非字符串值</h2><p id="12e2" class="pw-post-body-paragraph jz ka in kb b kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ly ku kv kw ig bi translated">关于sessionStorage需要记住的一点是，您只能存储字符串值。这意味着，如果您想要存储更复杂的数据，比如来自API get请求的JSON响应，就需要进行更多的数据操作。为了存储数据，您需要使用<code class="fe kx ky kz la b">JSON.stringify</code>，然后以JSON的形式从会话存储中读取对象，您需要使用<code class="fe kx ky kz la b">JSON.parse</code>。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="eda2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">总而言之，如果您没有使用sessionStorage或localStorage，那么您应该使用它们！这种语法使它们比cookie更容易使用，可以存储的数据量要大得多，而且由于数据存储在本地，因此消除了服务器读取cookie的安全风险。</p></div></div>    
</body>
</html>
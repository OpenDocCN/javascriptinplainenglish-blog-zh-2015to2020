<html>
<head>
<title>Basic Webpack configuration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本Webpack配置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/basic-webpack-configuration-9e9d066ccc14?source=collection_archive---------2-----------------------#2019-09-22">https://javascript.plainenglish.io/basic-webpack-configuration-9e9d066ccc14?source=collection_archive---------2-----------------------#2019-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="655e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Webpack启动节点项目的简单步骤。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7c185edd6ca0c08a04999774e6b2ceb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CK_XKOD0rHt7mEo8"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Max Nelson</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e0d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是初学者，想了解node js，了解一下Webpack是很好的。配置Webpack可能是一项令人沮丧的任务。随着每一个版本日复一日的到来，插件中断和混乱的例子曲线学习网络包可以是粗糙的。</p><p id="e023" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">直接冲向配置好的样板文件可能会有帮助，但有时开发人员应该编写不带框架或任何花哨东西的普通javascript。因此，让我们在接下来的两分钟内消除这些疑虑。</p><h1 id="3e6b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">入门指南</h1><p id="9538" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/chitru/webpack-basic-configuration" rel="noopener ugc nofollow" target="_blank">这里的</a>就是我们要做的。浏览一遍，有个基本概念。</p><h2 id="1e8d" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">项目结构</h2><p id="1889" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">看项目结构。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="44d7" class="mp lt iq nc b gy ng nh l ni nj">your_project(root folder)<br/>|--fonts<br/>|--images<br/>|--sass<br/>|--src<br/>  -index.js<br/>|--index.html</span></pre><h2 id="b512" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">安装Webpack</h2><p id="a09b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用<code class="fe nk nl nm nc b">npm init</code>命令在项目文件夹中创建package.json文件，开始使用Nodejs项目。然后我们可以用<code class="fe nk nl nm nc b">npm i --save-dev webpack webpack-cli</code>安装Webpack作为开发依赖。</p><h2 id="c500" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">创建条目</h2><p id="544f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Webpack从一个名为entry point的JavaScript文件开始工作。在<code class="fe nk nl nm nc b">src</code>文件夹中创建<code class="fe nk nl nm nc b">index.js</code>。</p><h2 id="1690" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">正在创建webpack.config.js</h2><p id="e28b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Webpack的魔力始于以下几点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="a3c7" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">编辑package.json中的npm脚本以运行Webpack</h2><p id="31b6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要运行Webpack，我们必须使用带有简单的<code class="fe nk nl nm nc b">webpack</code>命令的<code class="fe nk nl nm nc b">npm</code>脚本和我们的配置文件作为配置选项。<br/>删除此<code class="fe nk nl nm nc b">“test”: “echo \”Error: no test specified\” &amp;&amp; exit 1"</code>增加<code class="fe nk nl nm nc b">“build”: “webpack — config webpack.config.js”</code></p><p id="527b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而<code class="fe nk nl nm nc b">package.json</code>文件中的<code class="fe nk nl nm nc b">scirpts</code>应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="ebe1" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">运行Webpack</h2><p id="2d1b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">用基本设置运行<code class="fe nk nl nm nc b">npm run build</code>命令。它的作用是:</p><ul class=""><li id="81a0" class="np nq iq ky b kz la lc ld lf nr lj ns ln nt lr nu nv nw nx bi translated">查找条目文件，解析其中的导入模块依赖关系，并将其捆绑到名为<em class="ny"> dist的新文件夹中的单个<em class="ny"> bundle.js </em>文件中。</em></li></ul><blockquote class="nz"><p id="3736" class="oa ob iq bd oc od oe of og oh oi lr dk translated">到目前为止还能期待什么？</p><p id="13ab" class="oa ob iq bd oc od oj ok ol om on lr dk translated">你应该预料到当你运行<code class="fe nk nl nm nc b">npm run build </code>命令时，你会在根文件夹中有一个<em class="oo"> dist </em>文件夹，里面有<em class="oo"> bundle.js </em>。如果你想检查，你可以在你的文件夹里创建一个HTML文件。在<em class="oo"> index.js </em>中创建add <code class="fe nk nl nm nc b">console.log(“Hello world”); </code>并将<code class="fe nk nl nm nc b">&lt;script src=”dist/bundle.js”&gt;&lt;/script&gt;</code>添加到您的HTML文件中，并在浏览器<em class="oo">控制台</em>中查看Hello world是否已打印。你应该会看到“你好，世界”的字样。</p></blockquote><p id="8dcb" class="pw-post-body-paragraph kw kx iq ky b kz op jr lb lc oq ju le lf or lh li lj os ll lm ln ot lp lq lr ij bi translated">现在我们捆绑了标准的JavaScript。那么现在我们来谈谈装载机。如果你想冷却ES6(和未来版本)的功能，并兼容浏览器，该怎么办？如果你想把ES6代码转换成浏览器兼容的呢？这就是<em class="ny">装载机</em>发挥作用的地方。加载器是Webpack的一个主要特性，它可以转换我们的代码。让我们将<code class="fe nk nl nm nc b">module.rules</code>添加到<code class="fe nk nl nm nc b">webpack.config.js</code>中，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="291f" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">使用Babel-loader安全地避开ES6</h2><p id="702a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Babel是最好的JavaScript transpiler，我们在捆绑它之前用它来转换现代JavaScript代码。基本上，它所做的是在捆绑之前，将我们的现代JavaScript代码转换成浏览器兼容的JavaScript代码。安装它与</p><p id="27b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nk nl nm nc b">npm i --save-dev babel-loader @babel/core @babel/preset-env</code></p><p id="35ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在将规则添加到JavaScript文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="2875" class="np nq iq ky b kz la lc ld lf nr lj ns ln nt lr nu nv nw nx bi translated"><code class="fe nk nl nm nc b">test</code>是文件JavaScript文件扩展名的<em class="ny">正则表达式</em>。</li><li id="c66b" class="np nq iq ky b kz ou lc ov lf ow lj ox ln oy lr nu nv nw nx bi translated"><code class="fe nk nl nm nc b">exclude</code>告诉Webpack在传输时排除<code class="fe nk nl nm nc b">node_modules</code>文件夹。</li><li id="d30b" class="np nq iq ky b kz ou lc ov lf ow lj ox ln oy lr nu nv nw nx bi translated"><code class="fe nk nl nm nc b">use</code>是我们设置加载器的主要规则，加载器将应用于与<code class="fe nk nl nm nc b">test</code> regexp(我们文件中的Javascript)相对应的文件。</li><li id="c969" class="np nq iq ky b kz ou lc ov lf ow lj ox ln oy lr nu nv nw nx bi translated"><code class="fe nk nl nm nc b">options</code>因装载机而异。在我们的文件中，我们已经为Babel设置了默认预设，以考虑它应该转换哪些ES6功能，而不应该转换哪些功能。如果你想学的话，这本身就是一个很大的话题，但是为了简单起见，我们将保持原样。</li></ul><p id="a9d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在ES6可以安全地放在我们的代码中了。它将传输浏览器理解的JavaScript。</p><p id="7465" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你的代码还没有工作，这里有一个自我提醒。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/a535a63fb2c1ef322fa7042bfc8528f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p5uVTItGmble7UX6"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@whitfieldjordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jordan Whitfield</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="9d94" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">使用CSS-loader、SASS-loader和MiniCSSExtractPlugin添加CSS功能</h2><p id="c565" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">SASS预处理程序是一种新的样式化方法。它支持各种简单的HTML组件样式化方法。之后，我们可以使用自动前缀或缩小等。所以Webpack完全可以做到我们想要的。</p><p id="037a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在入口点文件<code class="fe nk nl nm nc b">index.js</code>中使用<code class="fe nk nl nm nc b">import ‘./sass/style.scss</code>，它会给出一个错误，因此我们可以将SASS-loader添加到我们的Webpack配置中。</p><p id="9005" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以在<code class="fe nk nl nm nc b">webpack.config.js</code>文件中为SASS文件添加一个新规则。同时，我们希望将所有转换后的CSS提取到单独的<em class="ny"> bundle.css </em>文件中，为此，我们有一个名为<em class="ny">minicsextractplugin的特殊插件。</em>安装时使用:</p><p id="e4b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nk nl nm nc b">npm i --save-dev mini-css-extract-plugin</code></p><p id="bc9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在。<em class="ny">萨斯曼。scss，。css </em>文件可以在你的<em class="ny"> index.js </em>文件中安全使用。加载器的Webpack数组将被逐个应用。这是我们的webpack.config.js文件的样子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="5648" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">使用文件加载器</h2><p id="92e7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，用<code class="fe nk nl nm nc b">npm i — save-dev file-loader</code>安装<code class="fe nk nl nm nc b">file-loader</code>，并给<code class="fe nk nl nm nc b">webpack.config.js</code>添加一条新规则。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="bc2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果Webpack可以成功解析<code class="fe nk nl nm nc b">dist</code>文件夹中的<code class="fe nk nl nm nc b">images</code>文件夹中的文件，如果你的CSS文件中有图片。</p><p id="2550" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在最后运行<code class="fe nk nl nm nc b">npm run build</code>,你将有你的上传准备好的文件供网络服务器使用。</p><p id="56f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">享受吧。如果你需要任何帮助，请留言。感谢您的阅读。</p></div></div>    
</body>
</html>
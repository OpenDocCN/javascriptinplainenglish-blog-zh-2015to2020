<html>
<head>
<title>How &amp; Why to Implement Error Tracking in Web Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何&amp;为什么在Web应用程序中实现错误跟踪</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-why-to-implement-error-tracking-in-web-applications-2a50390e02a9?source=collection_archive---------4-----------------------#2019-09-17">https://javascript.plainenglish.io/how-why-to-implement-error-tracking-in-web-applications-2a50390e02a9?source=collection_archive---------4-----------------------#2019-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9cf0ea7bb379446f49cf022a210c0a95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*teXZgzO2Ve0UUWCJ"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@maxchen2k?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Max Chen</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="738d" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">更快地发现并修复关键软件问题</h2></div><p id="abc8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">软件可以在各种设备上运行:服务器、网络浏览器、手机甚至你的手表。应用程序越成长，就会出现越多的错误。想想像脸书和Airbnb这样的公司，他们有数百万用户在各种设备上使用他们的产品。在一个需要快速发展的行业中，在开发过程中引入新的软件错误是不可避免的。但是，您可以大大改进查找和修复bug的过程。</p><h2 id="c88b" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">为什么我们需要错误跟踪和监控？</h2><ul class=""><li id="dae8" class="mk ml jg kx b ky mm lb mn le mo li mp lm mq lq mr ms mt mu bi translated"><strong class="kx jh">大部分用户不会报错</strong>。如果你有一个B2B应用程序，用户很可能会报告错误，因为他们可能会为你使用它付费。对于B2C应用程序(如网上商店、报纸),用户不太可能报告错误，只会停止使用你的应用程序，而不会通知你。特别是如果用户第一次使用你的应用程序，他们很容易安静地退出。</li><li id="18e9" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">用户报错往往不够</strong>。“我什么也买不到，请解决这个问题！”不是一个非常有用的错误报告。作为开发人员，您对错误日志、环境(例如浏览器)和重现错误的步骤感兴趣。</li><li id="ea1f" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">有些错误很严重，需要尽快解决</strong>。如果用户在使用Mozilla Firefox浏览器时无法登录，这需要尽快得到确认和解决。</li><li id="dd92" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">错误监控可以让你更好地理解问题发生的原因</strong>。一个模式可能是，40%的错误报告是由于使用了在旧浏览器中不工作的JavaScript特性而发生的。</li><li id="8d1d" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">软件测试无法发现所有问题</strong>。虽然良好的测试覆盖率可以帮助防止bug被发布到产品中，但是你不可能测试所有的东西。单元测试不会捕捉所有问题，因为单独测试每个部分不同于测试整个系统。端到端测试执行起来相当慢，所以您通常只测试快乐的路径。</li></ul><blockquote class="na"><p id="ae8c" class="nb nc jg bd nd ne nf ng nh ni nj lq dk translated">“不要指望你的用户会报告错误”——sentry . io</p></blockquote><p id="8ada" class="pw-post-body-paragraph kv kw jg kx b ky nk kh la lb nl kk ld le nm lg lh li nn lk ll lm no lo lp lq ij bi translated">这应该让您知道为什么拥有错误跟踪和监控是一个好主意。让我们看看这些服务能为我们做些什么。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="2cb5" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">错误跟踪和监控服务可以提供哪些功能？</h2><ul class=""><li id="1429" class="mk ml jg kx b ky mm lb mn le mo li mp lm mq lq mr ms mt mu bi translated"><strong class="kx jh">未处理异常的自动错误捕获</strong></li><li id="4de3" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">用于服务器、客户端&amp;移动设备</strong>的SDK:这些包括最常见的语言，如Java、PHP、JavaScript、Swift和C#</li><li id="fd47" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">警报和工作流集成</strong>与Slack、Pagerduty和JIRA等流行工具的实时通知</li><li id="b110" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">导致每个异常的事件的面包屑</strong>:这使得开发人员更容易重现问题，因为您可以看到用户在遇到这个错误时做了什么</li><li id="c819" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">环境和用户背景</strong>:你可以获得有用的信息，比如网络浏览器版本、操作系统、网址和用户</li><li id="0524" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">当错误发生时请求用户反馈</strong>:有时候，你想让你的用户在应用程序出错时直接给出反馈</li><li id="232b" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">一个基本的免费版本，它提供了足够的入门功能</li></ul><p id="320c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">既然我们已经知道了错误跟踪和监控会带来什么，那么让我们来看看一些流行的解决方案。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="489d" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">有哪些流行的错误跟踪和监控解决方案？</h2><ul class=""><li id="1f9b" class="mk ml jg kx b ky mm lb mn le mo li mp lm mq lq mr ms mt mu bi translated"><a class="ae jd" href="https://sentry.io/welcome/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh"> Sentry </strong> </a>是一个开源的错误跟踪解决方案，帮助开发人员实时监控和修复崩溃</li><li id="a5c6" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><a class="ae jd" href="https://www.bugsnag.com/" rel="noopener ugc nofollow" target="_blank"/></li><li id="191e" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><a class="ae jd" href="https://rollbar.com/product/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh">滚动条</strong> </a>为敏捷开发和持续交付提供错误监控和崩溃报告</li></ul><p id="13b2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如上所述，像Sentry这样流行的错误跟踪解决方案可以在包括web应用程序在内的大多数平台上工作。在本教程中，我们将在Angular web应用程序中使用Sentry进行错误跟踪。然而，一般步骤同样适用于其他框架和平台。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nw"><img src="../Images/0a77c0a0a9b47b5b37d08ab297660f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M1K0D1TOtf_sdScVxQ7Z9A.png"/></div></div></figure><h2 id="ef6d" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">如何在web应用程序中实现哨兵错误监控</h2><ol class=""><li id="35a2" class="mk ml jg kx b ky mm lb mn le mo li mp lm mq lq ob ms mt mu bi translated"><a class="ae jd" href="https://sentry.io/signup/" rel="noopener ugc nofollow" target="_blank">创建哨兵账户</a>并创建项目。</li><li id="355d" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq ob ms mt mu bi translated">安装JavaScript的哨兵库:<code class="fe oc od oe of b">npm install @sentry/browser</code></li><li id="f37e" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq ob ms mt mu bi translated">我们需要在您的页面加载期间尽快初始化Sentry浏览器SDK。对于Angular应用程序，在AppModule中这样做是有意义的。</li><li id="230d" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq ob ms mt mu bi translated">此外，可以配置Sentry来捕捉通过<a class="ae jd" href="https://angular.io/api/core/ErrorHandler" rel="noopener ugc nofollow" target="_blank">@ Angular/core/error handler</a>报告的任何特定于Angular的异常。</li><li id="298a" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq ob ms mt mu bi translated">可选项:当发生错误时，通过调用<code class="fe oc od oe of b">Sentry.showReportDialog({eventId})</code>请求用户反馈。</li></ol><pre class="nx ny nz oa gt og of oh bn oi oj bi"><span id="6ebb" class="ok ls jg of b be ol om l on oo">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule, ErrorHandler, Injectable } from "@angular/core";<br/>import { AppComponent } from "./app.component";<br/><br/>import * as Sentry from "@sentry/browser";<br/><br/>Sentry.init({<br/>  dsn: "https://&lt;key&gt;@sentry.io/&lt;project&gt;"<br/>});<br/>// Angular specific code<br/>@Injectable()<br/>export class SentryErrorHandler implements ErrorHandler {<br/><br/>  handleError(error) {<br/>    const eventId = Sentry.captureException(error.originalError || error);<br/>    Sentry.showReportDialog({ eventId }); // optional<br/>  } <br/>}<br/><br/>@NgModule({<br/>  declarations: [AppComponent, ...],<br/>  imports: [BrowserModule, ...],<br/>  providers: [<br/>    { provide: ErrorHandler, useClass: SentryErrorHandler },<br/>    ...<br/>  ],<br/>  ...<br/>})<br/>export class AppModule {}</span></pre></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="81f4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了错误监控之外，还有一些方法可以减少交付到产品中的bug数量，我想简单介绍一下。</p><h2 id="0a35" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">如何减少交付生产的bug数量</h2><ul class=""><li id="bda9" class="mk ml jg kx b ky mm lb mn le mo li mp lm mq lq mr ms mt mu bi translated"><a class="ae jd" href="https://medium.com/@ali.dev/why-software-qa-matters-not-only-for-testers-and-how-to-get-into-it-65669f77e746" rel="noopener"> <strong class="kx jh">自动化测试和持续集成</strong> </a>有助于减少回归，更有信心地交付代码，并捕捉早期问题。您应该同时拥有单元测试和端到端测试。<a class="ae jd" href="https://medium.com/sedeo/why-software-qa-matters-not-only-for-testers-and-how-to-get-into-it-65669f77e746" rel="noopener">如果你想了解更多关于软件质量保证</a>的信息，请点击这里。</li><li id="c8ee" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">做<a class="ae jd" href="https://medium.com/palantir/code-review-best-practices-19e02780015f" rel="noopener"> <strong class="kx jh">代码评审</strong> </a> <strong class="kx jh"> </strong>另一个开发者评审你写的代码。</li><li id="440b" class="mk ml jg kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx jh">跨浏览器/跨平台测试</strong>像<a class="ae jd" href="https://www.browserstack.com/" rel="noopener ugc nofollow" target="_blank"> Browserstack </a>这样的服务允许你在多个浏览器和平台上测试你的应用。</li></ul></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="cf19" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">结论</h2><p id="6c51" class="pw-post-body-paragraph kv kw jg kx b ky mm kh la lb mn kk ld le op lg lh li oq lk ll lm or lo lp lq ij bi translated">感谢阅读这篇文章。正如您所看到的，错误跟踪和监控很容易设置，但提供了很多价值。你用的是什么解决方案？请在评论中告诉我。</p></div></div>    
</body>
</html>
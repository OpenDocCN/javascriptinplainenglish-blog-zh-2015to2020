<html>
<head>
<title>Face Detection with FaceApiJS 📣 😳</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用FaceApiJS进行人脸检测📣 😳</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/face-detection-just-using-faceapijs-d03d737e87be?source=collection_archive---------1-----------------------#2020-02-28">https://javascript.plainenglish.io/face-detection-just-using-faceapijs-d03d737e87be?source=collection_archive---------1-----------------------#2020-02-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5a2f8c4ded17b9eb7353eb1e8066ccb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YtsSfrhiF0rCGqEY.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://github.com/rymaruk/app-face-detection" rel="noopener ugc nofollow" target="_blank">https://github.com/rymaruk/app-face-detection</a></figcaption></figure><p id="5c74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将使用人工智能通过网络摄像头设置实时<strong class="kf ir">人脸检测</strong>。我们将研究一个简单的代码示例，它只需要几行代码就可以让您立即开始使用这个包。</p><p id="e7ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">目标:</strong></p><ul class=""><li id="3f91" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">通过HTML流式传输网络摄像头</li><li id="e12c" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">利用人脸API实时检测人脸</li><li id="2e0f" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">实时绘制面部标志</li></ul></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="f624" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用TensorFlow上构建的<a class="ae kc" href="https://github.com/justadudewhohacks/face-api.js/" rel="noopener ugc nofollow" target="_blank"> face-api.js </a>库，该库实现了几个<strong class="kf ir"> CNN </strong> s <strong class="kf ir"> ( </strong>卷积神经网络)来解决人脸检测、人脸识别和人脸地标检测，针对web和移动设备进行了优化。</p><p id="dad1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以使用这个库来实时跟踪和检测人脸。</p><p id="8ac0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们深入研究一下💻…</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="48fe" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">自定义您的项目</h1><p id="6429" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">在开始之前，我们需要设置一个本地开发服务器。使用WebPack dev服务器就足够了。</p><figure class="mz na nb nc gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="43dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，您应该在您的项目中添加一个<code class="fe nf ng nh ni b">models</code>,并下载位于<a class="ae kc" href="https://github.com/WebDevSimplified/Face-Detection-JavaScript/tree/master/models" rel="noopener ugc nofollow" target="_blank">https://github . com/WebDevSimplified/Face-Detection-JavaScript/tree/master/models</a>的文件</p><p id="0165" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nf ng nh ni b">models</code>将看起来像:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/91692ba67124bee42c1fd9477db56497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*JdRuv-T5dCY0AcKNYLdZvg.png"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="d528" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe nf ng nh ni b">src</code>文件夹中创建一个文件<code class="fe nf ng nh ni b">index.js</code>，这将包含我们所有的逻辑。</p><p id="2a98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Index.js </strong>将只包含一个import语句作为<strong class="kf ir"> face-api.js </strong>(在tensorflow.js核心之上实现的浏览器和NodeJS的JavaScript人脸识别api)。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/9788e2623bd540d73dd76efd02e6a30e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjDS84IbgyCngLKqgeAeRQ.png"/></div></div></figure><p id="73d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将定义我们的face-API模型URL。只需加载您要用于人脸检测的模型。</p><blockquote class="nl nm nn"><p id="0181" class="kd ke no kf b kg kh ki kj kk kl km kn np kp kq kr nq kt ku kv nr kx ky kz la ij bi translated">我使用异步函数来获取模型。这将允许摄像机在模型加载后立即启动。</p></blockquote><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/d2460b07710524f0bbfaa5ee359a8ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9hEp464-y82PC7PzXE91Fg.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="85dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">media devices . getuser media()</strong></p><p id="0b7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方法提示用户允许使用产生一个<code class="fe nf ng nh ni b"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream" rel="noopener ugc nofollow" target="_blank">MediaStream</a>.</code>的媒体输入，该流可以包含一个视频轨道。</p><blockquote class="nl nm nn"><p id="285b" class="kd ke no kf b kg kh ki kj kk kl km kn np kp kq kr nq kt ku kv nr kx ky kz la ij bi translated">它返回一个解析为一个<code class="fe nf ng nh ni b"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream" rel="noopener ugc nofollow" target="_blank">MediaStream</a></code>对象的<code class="fe nf ng nh ni b"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">Promise</a></code>。如果用户拒绝许可，或者匹配媒体不可用，则分别用<code class="fe nf ng nh ni b">NotAllowedError</code>或<code class="fe nf ng nh ni b">NotFoundError</code>拒绝承诺。</p></blockquote><div class="nt nu gp gr nv nw"><a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">MediaDevices.getUserMedia()</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">媒体设备。getUserMedia()方法提示用户允许使用媒体输入，这将产生一个…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">developer.mozilla.org</p></div></div><div class="of l"><div class="og l oh oi oj of ok jw nw"/></div></div></a></div></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="9448" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated"><strong class="ak">实现摄像头捕捉能力&lt;画布&gt;T5】</strong></h1><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/d833fc7bee02295fc3c03edd71002c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ilau_ksKwNQJ0AeRV5Sqpw.png"/></div></div></figure><p id="e34b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，需要从Video元素创建一个Canvas元素并初始化显示值。</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/d6d746850241b1f97036dbc88596ecf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w7glvoPPUNGkLIWRvQDFYA.png"/></div></div></figure><h2 id="e8ef" class="om lx iq bd ly on oo dn mc op oq dp mg ko or os mk ks ot ou mo kw ov ow ms ox bi translated">匹配维度</h2><p id="3801" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">faceapi.matchDimensions —调整媒体元素大小的辅助函数。</p><p id="412c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只需传递你的“视频画布”和“显示值”作为参数</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/5c416bdeec0cd2b9ad61ae9d34ff8407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XAnB6CnL9cnAvR3QDiAdMQ.png"/></div></div></figure><h2 id="38aa" class="om lx iq bd ly on oo dn mc op oq dp mg ko or os mk ks ot ou mo kw ov ow ms ox bi translated">收到完整的面部描述</h2><p id="f848" class="pw-post-body-paragraph kd ke iq kf b kg mu ki kj kk mv km kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">神经网络接受HTML图像、画布或视频元素或张量作为输入。为了检测输入图像的所有人脸的边界框，我们简单地说:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/64299df6aa8925233f3e322bde0fda4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyUP-8XbQwavNLTIQ0BG-g.png"/></div></div></figure><p id="55f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回的边界框和界标位置是相对于原始媒体大小的。如果显示的图像尺寸与原始图像尺寸不一致，您可以简单地调整它们的大小:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/5a7da7027a5df34c920544b72cb7f5a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2o68FWArWu988HPQBAUhHQ.png"/></div></div></figure><p id="e9f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过将边界框绘制到画布中来可视化检测结果:</p><figure class="mz na nb nc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/d0e515017a2e354a20dc37a59dcfb907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Lj88ryvp54L6C75CVVv0g.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="d392" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">源代码</h1><figure class="mz na nb nc gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="33c3" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated"><strong class="ak">建议</strong></h1><div class="nt nu gp gr nv nw"><a href="https://github.com/WebDevSimplified/Face-Detection-JavaScript" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">web dev simplified/人脸检测-JavaScript</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">navigator.getUserMedia现已被弃用，并被navigator . media devices . get user media所取代</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="oy l oh oi oj of ok jw nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://itnext.io/face-api-js-javascript-api-for-face-recognition-in-the-browser-with-tensorflow-js-bcc2a6c4cf07" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">Face-API . js-使用tensorflow.js在浏览器中进行人脸识别的JavaScript API</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">用于人脸检测、人脸识别和人脸标志检测的JavaScript API</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">itnext.io</p></div></div><div class="of l"><div class="oz l oh oi oj of ok jw nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://github.com/justadudewhohacks/face-api.js" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">justadudehohacks/face-API . js</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">在tensorflow.js核心之上实现的浏览器和nodejs的JavaScript人脸识别API</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="pa l oh oi oj of ok jw nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://justadudewhohacks.github.io/face-api.js/docs/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">face-api.js</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">在tensorflow.js核心API上实现的用于浏览器中人脸检测和人脸识别的JavaScript API</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">justadudehohacks . github . io</p></div></div><div class="of l"><div class="pb l oh oi oj of ok jw nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://developers.google.com/web/updates/2015/10/media-devices" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">从您的Web应用程序中选择摄像头、麦克风和扬声器</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">现代浏览器使得选择输入和输出设备成为可能，包括照相机、麦克风和扬声器。对于…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">developers.google.com</p></div></div><div class="of l"><div class="pc l oh oi oj of ok jw nw"/></div></div></a></div></div></div>    
</body>
</html>
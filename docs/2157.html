<html>
<head>
<title>Angular Template-driven Forms — Styling and Submitting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度模板驱动的表单—样式化和提交</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-template-driven-forms-styling-and-submitting-586382712625?source=collection_archive---------5-----------------------#2020-05-25">https://javascript.plainenglish.io/angular-template-driven-forms-styling-and-submitting-586382712625?source=collection_archive---------5-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c9552a79e062dd5fc9620a9130799f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zN5ptgP9Oc6RHUCj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jrduncan11?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John Duncan</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bc3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="3701" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何设计模板驱动表单的样式和处理提交事件。</p><h1 id="f0fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为视觉反馈添加自定义CSS</h1><p id="4a44" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以设计模板驱动的表单，让用户知道他们必须做些什么来使输入有效。</p><p id="995a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码来设计表单的样式:</p><p id="118f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c5ab" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule } from "@angular/core";<br/>import { FormsModule } from "@angular/forms";<br/>import { AppComponent } from "./app.component";</span><span id="3b83" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [AppComponent],<br/>  imports: [BrowserModule, FormsModule],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule {}</span></pre><p id="6a1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e941" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="b570" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  model = {<br/>    name: '',<br/>    address: '',<br/>  }<br/>}</span></pre><p id="df83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="070a" class="mq lc iq mh b gy mr ms l mt mu">&lt;form #personForm="ngForm"&gt;<br/>  &lt;input<br/>    name="name"<br/>    placeholder="Name"<br/>    type="text"<br/>    [(ngModel)]="model.name"<br/>    required<br/>  /&gt;<br/>  &lt;br /&gt;<br/>  &lt;input<br/>    name="address"<br/>    placeholder="Address"<br/>    type="text"<br/>    [(ngModel)]="model.address"<br/>    required<br/>  /&gt;<br/>&lt;/form&gt;</span></pre><p id="c71c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.css</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f39c" class="mq lc iq mh b gy mr ms l mt mu">.ng-valid[required],<br/>.ng-valid.required {<br/>  border-left: 3px solid green;<br/>}</span><span id="9478" class="mq lc iq mh b gy mv ms l mt mu">.ng-invalid:not(form) {<br/>  border-left: 3px solid red;<br/>}</span></pre><p id="e537" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们通过向每个输入添加<code class="fe me mf mg mh b">required</code>属性并使用<code class="fe me mf mg mh b">ngModel</code>绑定到<code class="fe me mf mg mh b">model</code>中的每个字段，创建了一个在<code class="fe me mf mg mh b">AppComponent</code>中进行验证的表单。</p><p id="b866" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们添加了<code class="fe me mf mg mh b">name</code>属性，这样我们就可以对我们的字段进行适当的验证。</p><p id="9613" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">ngForm</code>指令定义了<code class="fe me mf mg mh b">personForm</code>模板变量。</p><p id="9777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">app.component.css</code>中，我们为<code class="fe me mf mg mh b">ng-valid[required]</code>设置样式，当我们的输入有效时，Angular会应用这些样式。</p><p id="0e9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还为<code class="fe me mf mg mh b">ng-invalid</code>类添加了样式，并从<code class="fe me mf mg mh b">ng-invalid</code>中排除了<code class="fe me mf mg mh b">form</code>，这样我们只将边框应用于输入，而不是表单本身。</p><h1 id="b43f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">添加验证消息</h1><p id="e799" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以通过使用<code class="fe me mf mg mh b">ngModel</code>指令定义模板变量来添加验证消息，然后使用它来获取每个字段的状态。</p><p id="30d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们将<code class="fe me mf mg mh b">app.component.html</code>改为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b7a5" class="mq lc iq mh b gy mr ms l mt mu">&lt;form #personForm="ngForm"&gt;<br/>  &lt;input<br/>    name="name"<br/>    placeholder="Name"<br/>    type="text"<br/>    [(ngModel)]="model.name"<br/>    required<br/>    #name="ngModel"<br/>  /&gt;<br/>  &lt;div [hidden]="name.valid || name.pristine"&gt;<br/>    Name is required<br/>  &lt;/div&gt;<br/>  &lt;br /&gt;<br/>  &lt;input<br/>    name="address"<br/>    placeholder="Address"<br/>    type="text"<br/>    [(ngModel)]="model.address"<br/>    required<br/>    #address="ngModel"<br/>  /&gt;<br/>  &lt;div [hidden]="address.valid || address.pristine"&gt;<br/>    Address is required<br/>  &lt;/div&gt;<br/>&lt;/form&gt;</span></pre><p id="e0ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们添加了:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="83d7" class="mq lc iq mh b gy mr ms l mt mu">#name="ngModel"</span></pre><p id="6bba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1326" class="mq lc iq mh b gy mr ms l mt mu">#address="ngModel"</span></pre><p id="b5b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分别输入到姓名和地址。</p><p id="087b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些是模板变量，让我们获得每个字段的验证状态，并在字段无效时显示如下内容:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e0a4" class="mq lc iq mh b gy mr ms l mt mu">&lt;div [hidden]="name.valid || name.pristine"&gt;<br/>  Name is required<br/>&lt;/div&gt;</span></pre><p id="4d44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b857" class="mq lc iq mh b gy mr ms l mt mu">&lt;div [hidden]="address.valid || address.pristine"&gt;<br/>  Address is required<br/>&lt;/div&gt;</span></pre><p id="9d0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果字段是原始的，这意味着我们没有输入它，那么我们隐藏消息。如果它们是有效的，我们也隐藏消息。</p><p id="9e25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们给他们看。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/11bbf2aed524874ffaa63961925bf047.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1mZKryH3pxX9AB8m"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@zmachacek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Zdeněk Macháček</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f0eb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提交带有ngSubmit的表单</h1><p id="d60f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果一切都有效，那么用户可以提交表单。为了让他们这样做，我们添加了<code class="fe me mf mg mh b">ngSubmit</code>事件处理程序来处理表单提交。</p><p id="e6e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样做:</p><p id="e75a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c6bd" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "<a class="ae kc" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>";</span><span id="672e" class="mq lc iq mh b gy mv ms l mt mu"><a class="ae kc" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  model = {<br/>    name: "",<br/>    address: ""<br/>  };</span><span id="b07a" class="mq lc iq mh b gy mv ms l mt mu">  onSubmit() {<br/>    alert("form submitted");<br/>  }<br/>}</span></pre><p id="e49c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f91a" class="mq lc iq mh b gy mr ms l mt mu">&lt;form #personForm="ngForm" (ngSubmit)="onSubmit()"&gt;<br/>  &lt;input<br/>    name="name"<br/>    placeholder="Name"<br/>    type="text"<br/>    [(ngModel)]="model.name"<br/>    required<br/>    #name="ngModel"<br/>  /&gt;<br/>  &lt;div [hidden]="name.valid || name.pristine"&gt;<br/>    Name is required<br/>  &lt;/div&gt;<br/>  &lt;br /&gt;<br/>  &lt;input<br/>    name="address"<br/>    placeholder="Address"<br/>    type="text"<br/>    [(ngModel)]="model.address"<br/>    required<br/>    #address="ngModel"<br/>  /&gt;<br/>  &lt;div [hidden]="address.valid || address.pristine"&gt;<br/>    Address is required<br/>  &lt;/div&gt;<br/>  &lt;br /&gt;<br/>  &lt;button type="submit" [disabled]="!personForm.form.valid"&gt;<br/>    Submit<br/>  &lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="df57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们添加了一个<code class="fe me mf mg mh b">onSubmit</code>方法来处理表单提交。</p><p id="e7b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们补充道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="79de" class="mq lc iq mh b gy mr ms l mt mu">(ngSubmit)="onSubmit()"</span></pre><p id="61eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来监听提交事件。</p><p id="a7f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加一个提交按钮，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d139" class="mq lc iq mh b gy mr ms l mt mu">&lt;button type="submit" [disabled]="!personForm.form.valid"&gt;<br/>  Submit<br/>&lt;/button&gt;</span></pre><p id="2d41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以便用户可以提交他们的表单。</p><p id="0ff0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">personForm</code>无效，我们需要<code class="fe me mf mg mh b">[disabled]=”!personForm.form.valid”</code>来禁用提交按钮。</p><p id="db01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们填写所有内容并单击提交时，我们会得到一个警告框，显示“表单已提交”。</p><p id="14e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，什么都不会发生，我们会得到一个错误显示和红色左边框。</p><h1 id="c213" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3e52" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">ngSubmit</code>让用户提交数据。</p><p id="021d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了验证每个字段，我们使用<code class="fe me mf mg mh b">ngModel</code>指令为每个输入定义模板变量，然后我们可以得到它们的验证状态。</p><p id="379b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了根据输入的有效性来样式化输入，我们可以分别根据有效和无效输入的<code class="fe me mf mg mh b">ng-valid</code>和<code class="fe me mf mg mh b">ng-invalid</code>来样式化它们。</p><h2 id="6c9a" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">进一步阅读</h2><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-multi-page-job-application-form-using-angular-f0b1640f4195"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">使用Angular创建多页工作申请表</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">一步一步的教程，以建立一个多页的工作申请表使用Angular和SurveyJS，一个免费的，开源的…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz jw nl"/></div></div></a></div><p id="1cb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="oa">更多内容看</em> <a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="oa">说白了就是io </em> </strong> </a> <em class="oa">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="oa">免费周报</em> </strong> </a> <em class="oa">。关注我们关于</em><a class="ae kc" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="oa">Twitter</em></strong></a>，<a class="ae kc" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="oa">LinkedIn</em></strong></a><em class="oa">，</em><a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="oa">YouTube</em></strong></a><em class="oa"/><a class="ae kc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="oa">不和</em> </strong> </a> <strong class="kf ir"> <em class="oa">。</em>T55】</strong></p><p id="5399" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="oa">对缩放您的软件启动感兴趣</em> </strong> <em class="oa">？检查出</em> <a class="ae kc" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="oa">电路</em> </strong> </a> <em class="oa">。</em></p></div></div>    
</body>
</html>
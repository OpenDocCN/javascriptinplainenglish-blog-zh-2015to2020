<html>
<head>
<title>Making Draggable Components in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中制作可拖动组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/making-draggable-components-in-react-4c6d4d1df95f?source=collection_archive---------7-----------------------#2020-09-13">https://javascript.plainenglish.io/making-draggable-components-in-react-4c6d4d1df95f?source=collection_archive---------7-----------------------#2020-09-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="76ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着用户交互在现代应用程序中变得越来越普遍，在应用程序中实现可拖动的组件有时会很好。想想Trello或者Wix这样的网站建设者。他们有拖放元素，这使得它对用户来说简单而直观。</p><p id="d8ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好！在这篇文章中，我将使用<a class="ae kl" href="https://www.npmjs.com/package/react-draggable" rel="noopener ugc nofollow" target="_blank"> react-draggable package </a>演示一些在React中制作可拖动组件的简单方法。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/394cdff182e54d255b68eab45ecc5d55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ULom0Nb_GAmNEOaAVGEXkQ.png"/></div></div></figure><h1 id="10ce" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤1:安装npm软件包</h1><p id="9151" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">使用<code class="fe mb mc md me b">npx create-react-app my-app</code>创建React应用程序后，运行:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="d143" class="mj kz iq me b gy mk ml l mm mn">npm install react-draggable</span></pre><h1 id="d9e6" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步骤2:添加一个可拖动的组件</h1><p id="c7d2" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在<code class="fe mb mc md me b">App.js</code>中，只需导入可拖动的组件:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="7483" class="mj kz iq me b gy mk ml l mm mn">import Draggable from 'react-draggable';</span></pre><p id="4e49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后将您希望可拖动的元素包装在其中，如下所示:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="f79a" class="mj kz iq me b gy mk ml l mm mn">&lt;Draggable&gt;<br/>    &lt;div className="box"&gt;<br/>        &lt;div&gt;Move me around!&lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><p id="47d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以给<code class="fe mb mc md me b">box</code>添加一些CSS:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="73ad" class="mj kz iq me b gy mk ml l mm mn">.box {<br/>  position: absolute;<br/>  cursor: move;<br/>  color: black;<br/>  max-width: 215px;<br/>  border-radius: 5px;<br/>  padding: 1em;<br/>  margin: auto;<br/>  user-select: none;<br/>}</span></pre><h1 id="ddcb" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">就是这样！</h1><p id="cb0a" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">这很简单，不是吗？现在让我们讨论一下Draggable组件中一些很酷的属性，您可以添加这些属性来对拖动进行更多的定制。</p><h1 id="3162" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">1.在一个轴上拖动</h1><p id="5857" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">默认情况下,<code class="fe mb mc md me b">axis</code>属性被设置为<code class="fe mb mc md me b">both</code>,所以从上面的例子可以看出，它允许组件被拖动到任何方向。可以设置的其他值有:</p><ul class=""><li id="7a49" class="mo mp iq jp b jq jr ju jv jy mq kc mr kg ms kk mt mu mv mw bi translated"><strong class="jp ir"> axis="x" </strong>:组件只能水平拖动。</li><li id="490c" class="mo mp iq jp b jq mx ju my jy mz kc na kg nb kk mt mu mv mw bi translated"><strong class="jp ir"> axis="y" </strong>:组件只能垂直拖动。</li><li id="6f1d" class="mo mp iq jp b jq mx ju my jy mz kc na kg nb kk mt mu mv mw bi translated"><strong class="jp ir"> axis="none" </strong>:组件不能拖动。</li></ul><h1 id="94c9" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">2.跟踪可拖动的位置</h1><p id="5f23" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">每当组件被拖动时，就会触发<code class="fe mb mc md me b">onDrag</code>事件处理程序。我们可以用它来跟踪组件的位置。</p><p id="df0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，导入<code class="fe mb mc md me b">useState</code>挂钩:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="2f24" class="mj kz iq me b gy mk ml l mm mn">import React, { useState } from "react";</span></pre><p id="cbe1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，初始化<code class="fe mb mc md me b">position</code>状态来存储我们的位置。</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="370b" class="mj kz iq me b gy mk ml l mm mn">const [position, setPosition] = useState({ x: 0, y: 0 });</span></pre><p id="fd40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们的“trackPos”函数将在触发<code class="fe mb mc md me b">onDrag</code>时更新我们的<code class="fe mb mc md me b">position</code>。</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="0178" class="mj kz iq me b gy mk ml l mm mn">const trackPos = (data) =&gt; {<br/>    setPosition({ x: data.x, y: data.y });<br/> };</span></pre><p id="d911" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而我们会在<code class="fe mb mc md me b">onDrag</code>被触发的时候调用这个函数。</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="e4e7" class="mj kz iq me b gy mk ml l mm mn">&lt;Draggable onDrag={(e, data) =&gt; trackPos(data)}&gt;<br/>   &lt;div className="box"&gt;<br/>       &lt;div&gt;Here's my position...&lt;/div&gt;<br/>       &lt;div&gt;<br/>            x: {position.x.toFixed(0)}, y: {position.y.toFixed(0)}<br/>       &lt;/div&gt;<br/>   &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><h1 id="63d6" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">3.仅在手柄上可拖动</h1><p id="c004" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们可以包含<code class="fe mb mc md me b">handle</code>属性，只允许在该手柄上拖动。例如:</p><pre class="kn ko kp kq gt mf me mg mh aw mi bi"><span id="dc26" class="mj kz iq me b gy mk ml l mm mn">&lt;Draggable handle="#handle"&gt;<br/>   &lt;div className="box"&gt;<br/>      &lt;span id="handle"&gt;Drag here&lt;/span&gt;<br/>         &lt;div style={{ padding: "1em" }}&gt;Cannot drag here&lt;/div&gt;<br/>   &lt;/div&gt;<br/>&lt;/Draggable&gt;</span></pre><h1 id="d1ff" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="4e16" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在本文中，我们将介绍react-draggable以及如何使用它来制作可拖动的组件。我们还讨论了它的一些属性，这些属性可以进一步定制可拖动组件。拥有可拖动的元素有助于构建交互式应用。看看我做的这个迷你项目，它是一个利用可拖动特性的<a class="ae kl" href="https://victoria-lo.github.io/bulletin-board/" rel="noopener ugc nofollow" target="_blank">公告板应用</a>。</p><p id="795e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有关react-draggable的更多信息，请查看其文档<a class="ae kl" href="https://www.npmjs.com/package/react-draggable" rel="noopener ugc nofollow" target="_blank">这里</a>。希望这篇文章有所帮助。如果是请点赞分享。欢迎在下面的评论中提出任何问题或分享你用这个包做的任何项目。干杯！</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="e64c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nj">最初发表于</em><a class="ae kl" href="https://lo-victoria.com/making-draggable-components-in-react" rel="noopener ugc nofollow" target="_blank">T5【https://lo-victoria.com】</a><em class="nj">。</em></p><h2 id="6d8a" class="mj kz iq bd la nk nl dn le nm nn dp li jy no np lm kc nq nr lq kg ns nt lu nu bi translated">简单英语的JavaScript</h2><p id="f9be" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kl" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="jp ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
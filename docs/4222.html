<html>
<head>
<title>Stop Using REST For APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止对API使用REST</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stop-using-rest-for-apis-d697727ae6dd?source=collection_archive---------0-----------------------#2020-11-26">https://javascript.plainenglish.io/stop-using-rest-for-apis-d697727ae6dd?source=collection_archive---------0-----------------------#2020-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="db88" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">GraphQL更好</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2122ea22770348e52be200ead6ff48ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TN-YU3dZzFE3BW4a"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">bruce mars</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4246" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多开发人员使用REST通过HTTP发送数据，而GraphQL通常是作为一种替代REST APIs的技术出现的。在这篇文章中，我将解释这两者的优点、局限性和区别，这将帮助您决定下一个项目的选择。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d7be" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">什么是休息？</h1><p id="254c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><strong class="ky ir"> REST(表述性状态转移)</strong>是一个API设计架构，用于通过使用一组预定义的无状态操作(包括<code class="fe mw mx my mz b">GET</code>、<code class="fe mw mx my mz b">POST</code>、<code class="fe mw mx my mz b">PUT</code>和<code class="fe mw mx my mz b">DELETE</code>)来实现web服务。</p><p id="61f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">REST的核心思想是通过向资源的URL发送请求并获得响应(通常是JSON，但也取决于API)来检索资源。</p><h2 id="494d" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">休息的好处</h2><ul class=""><li id="1974" class="nm nn iq ky b kz mr lc ms lf no lj np ln nq lr nr ns nt nu bi translated">REST是<strong class="ky ir">可扩展的</strong>，因为它将客户机和服务器分开，所以你可以轻松地扩展你的应用程序。</li><li id="8012" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><strong class="ky ir">灵活性</strong>是使用REST的另一个优势，因为它可以被设计成处理不同类型的调用并返回不同的数据格式。</li></ul><h2 id="ac8f" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">休息的限制</h2><ul class=""><li id="1aa0" class="nm nn iq ky b kz mr lc ms lf no lj np ln nq lr nr ns nt nu bi translated"><strong class="ky ir">超取</strong> —这是API端点提供的信息比客户端要求的多得多的时候。</li><li id="be8f" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><strong class="ky ir">提取不足</strong> —这是API端点没有提供所有必需信息的时候。因此，客户端必须发出多个请求才能获得应用程序需要的一切。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6171" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">GraphQL是什么？</h1><p id="512e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><strong class="ky ir"> GraphQL </strong>是一个API设计架构，它采用了一种不同的方法，将所有东西都视为一个图形，暗示它们是相互关联的。这也意味着您可以定制您的请求，您可以从端点请求任何东西，您将得到您所请求的任何东西，仅此而已。我们传递查询并得到响应。除此之外，它还允许您将不同的实体合并到一个查询中。</p><h2 id="40ce" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">GraphQL的优势</h2><ul class=""><li id="1420" class="nm nn iq ky b kz mr lc ms lf no lj np ln nq lr nr ns nt nu bi translated"><strong class="ky ir">检索精确的数据</strong>，没有额外的东西。在GraphQL中，您可以得到您所请求的，这是一个很大的优势。</li><li id="9589" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><strong class="ky ir">更快的开发</strong>在客户端。通常，当数据需求发生变化时，您只需要修改查询，不需要太多的变化，因此允许快速的产品迭代。只要客户端和服务器团队都知道数据的结构，他们就可以独立工作。</li></ul><h2 id="e414" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">GraphQL的局限性</h2><ul class=""><li id="6bb2" class="nm nn iq ky b kz mr lc ms lf no lj np ln nq lr nr ns nt nu bi translated">对于简单的应用程序来说，设置类型、查询等可能有点复杂，因为使用REST可以轻松完成。</li><li id="b3bb" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated">它使用一个<strong class="ky ir">单一端点</strong>，而不是遵循HTTP规范进行缓存。网络级缓存非常重要，因为它可以减少服务器的流量。</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4d3f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">比较两者的简单示例</h1><p id="3cf2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">比方说，我们正在显示一个用户的提要，其中包含该用户的帖子及其关注者的列表。在我们的例子中，我们必须显示帖子的作者、帖子以及该用户的关注者。</p><p id="96c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们使用REST，我们将至少发出2或3个请求，如下所示:</p><ul class=""><li id="6777" class="nm nn iq ky b kz la lc ld lf oa lj ob ln oc lr nr ns nt nu bi translated"><code class="fe mw mx my mz b">/user/&lt;id&gt;</code>获取用户(作者)详细信息，可能是姓名。</li><li id="ae27" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe mw mx my mz b">/user/&lt;id&gt;/posts</code>获取该用户发布的帖子列表。</li><li id="4170" class="nm nn iq ky b kz nv lc nw lf nx lj ny ln nz lr nr ns nt nu bi translated"><code class="fe mw mx my mz b">/user/&lt;id&gt;/followers</code>获取用户的关注者列表。</li></ul><p id="a02a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但在所有这些情况下，我们都在过度获取数据。例如，在第一个请求中，我们只需要名字，但是当我们使用这种方法时，我们得到了关于用户的所有细节。</p><p id="953e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是GraphQL显示其威力的时候了。我们需要指定查询，然后我们可以得到想要的输出。为了使用GraphQL达到同样的效果，我们可以使用类似如下的查询:</p><pre class="kg kh ki kj gt od mz oe of aw og bi"><span id="7453" class="na ma iq mz b gy oh oi l oj ok">query {<br/>  User(id: '123') {<br/>    name<br/>    posts {<br/>      title<br/>    }<br/>    followers {<br/>      name<br/>    }<br/>  }<br/>}</span></pre><p id="8c75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过使用这样的查询，我们将能够获得具有以下属性的JSON响应。简洁明了，不是吗？</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="850a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">GraphQL与REST</h1><p id="672c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">总而言之，以下是一些突出的差异:</p><h2 id="c07b" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">1.数据提取</h2><p id="8631" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">REST会导致提取过量或提取不足，而GraphQL不会出现这种情况。在GraphQL中，<em class="ol">你要求的就是你得到的。</em></p><h2 id="b6bf" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">2.对象定义(JSON响应)</h2><p id="9755" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在REST中，您在后端定义对象，而在GraphQL中，您在前端定义这个对象。</p><h2 id="46d3" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">3.自动缓存</h2><p id="0626" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">REST自动实施缓存，而GraphQL没有自动缓存系统，而是使用诸如Apollo Client、Relay等客户端。将使缓存成为可能。</p><h2 id="6b85" class="na ma iq bd mb nb nc dn mf nd ne dp mj lf nf ng ml lj nh ni mn ln nj nk mp nl bi translated">4.错误处理</h2><p id="c418" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">与GraphQL相比，REST中的错误处理要简单得多，graph QL通常会给出一个<em class="ol"> 200 OK </em>状态代码，即使有错误也是如此。但是，在使用诸如Apollo客户端、Relay等客户端时。很有可能轻松处理错误。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="366c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="be9f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">GraphQL当然比REST有很多优势，但是它可能并不总是最好的实现。就像我前面说的，选择取决于您的应用程序，是选择REST还是GraphQL。</p><p id="b53b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这能帮助你在未来的项目中做决定。如果你喜欢分享你关于GraphQL或REST的经验，请把它们放在评论区。感谢您的阅读！</p></div></div>    
</body>
</html>
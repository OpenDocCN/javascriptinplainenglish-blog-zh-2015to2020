<html>
<head>
<title>Tinder Style Movie Night Picker with VueJs, Vuetify, VueFire, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火绒风格的电影夜采摘与VueJs，Vuetify，VueFire，和Firebase</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-vuetify-vuefire-and-firebase-part-3-partners-dbeebfa97572?source=collection_archive---------17-----------------------#2020-10-28">https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-vuetify-vuefire-and-firebase-part-3-partners-dbeebfa97572?source=collection_archive---------17-----------------------#2020-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="681b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第3部分—合作伙伴</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6913a2638ee75ebf44b4b15bcdd33395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*an600SZ0cnSSFywtk-oLsw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/dbreen-1643989/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1085072" rel="noopener ugc nofollow" target="_blank">Devon Breen</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1085072" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="7e89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" href="https://medium.com/javascript-in-plain-english/tinder-style-movie-night-picker-with-vuejs-vuetify-vuefire-and-firebase-part-2-authentication-6969c27cdad0" rel="noopener">第二部分</a>中，我们在电影《夜盗》中设置了认证。现在我们可以开始关注核心逻辑了。我们要做的第一件事是添加一个合作伙伴。完成之后，我们将开始电影的展示和投票。</p><h1 id="f337" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">添加合作伙伴</h1><p id="b4ea" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了在我们的系统中进行匹配，我们需要链接合作伙伴。现在，我们将允许用户选择一个合作伙伴。如果你想把它用于朋友，可以随意扩展到多个伙伴。</p><p id="9ac1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要添加合作伙伴，我们将在系统中搜索电子邮件。当我们找到一个匹配，我们将允许用户添加他们为合作伙伴。为了简单起见，我们不会从被添加的用户创建一个验证系统。但是，这将是一个非常好的功能，可以阻止用户未经允许添加其他人。</p><h2 id="7648" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">Vuex商店</h2><p id="f476" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">由于我们将所有用户信息存储在Vuex商店中，我们需要做的第一件事是将我们合作伙伴的id添加到其中。在src/store/modules/user.js中，让我们添加一个名为partnerId的新状态属性。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="8ca2" class="mp lt iq nc b gy ng nh l ni nj">const<em class="nk"> state </em>=<em class="nk"> </em>{<br/> <em class="nk">id</em>:<em class="nk"> </em>'',<br/> <em class="nk">name</em>:<em class="nk"> </em>'',<br/> <em class="nk">email</em>:<em class="nk"> </em>'',<br/> <strong class="nc ir"><em class="nk">partnerId</em>:<em class="nk"> </em>''</strong><br/>}</span></pre><p id="8da5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将更新我们的SET_USER_DATA变异，并添加一个名为SET_PARTNER_ID的新变异。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="3425" class="mp lt iq nc b gy ng nh l ni nj">const<em class="nk"> mutations </em>=<em class="nk"> </em>{<br/> <em class="nk">SET_USER_DATA</em>:<em class="nk"> </em>(<em class="nk">state</em>,<em class="nk"> payload</em>)<em class="nk"> </em>=&gt;<em class="nk"> </em>{<br/>  <em class="nk">state.id </em>=<em class="nk"> payload.id<br/>  state.name </em>=<em class="nk"> payload.name<br/>  state.email </em>=<em class="nk"> payload.email<br/>  </em><strong class="nc ir"><em class="nk">state.partnerId </em>=<em class="nk"> payload.partnerId</em></strong><em class="nk"><br/> </em>},<br/> <strong class="nc ir"><em class="nk">SET_PARTNER_ID</em>:<em class="nk"> </em>(<em class="nk">state</em>,<em class="nk"> payload</em>)<em class="nk"> </em>=&gt;<em class="nk"> </em>{<br/>  <em class="nk">state.partnerId </em>=<em class="nk"> </em>payload<br/> }</strong><br/>}</span></pre><p id="1e37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将添加一个名为setPartnerId的新操作，我们可以在添加或更新我们的合作伙伴时使用它:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="f973" class="mp lt iq nc b gy ng nh l ni nj">const<em class="nk"> actions </em>=<em class="nk"> </em>{<br/> <em class="nk">setUserData</em>(<em class="nk">context</em>,<em class="nk"> userData</em>)<em class="nk"> </em>{<br/>  <em class="nk">context.commit</em>('SET_USER_DATA',<em class="nk"> </em>userData)<br/> },<br/> <strong class="nc ir"><em class="nk">setPartnerId</em>(<em class="nk">context</em>,<em class="nk"> id</em>)<em class="nk"> </em>{<br/>  <em class="nk">context.commit</em>('SET_PARTNER_ID',<em class="nk"> </em>id)<br/> }</strong><br/>}</span></pre><h2 id="4af3" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">添加合作伙伴页面</h2><p id="70ee" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了添加这个特性，我们将在src/views下创建一个名为AddPartner.vue的新文件。我们的用户将通过电子邮件搜索其他用户。如果他们找到一个匹配并添加他们，我们将在我们的用户表中一个名为partner的字段下创建一个条目。如果您想要多个伙伴，我建议您要么使用一个名为partners的数组，要么使用一个子集合。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h2 id="5ea6" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">登录页面更新</h2><p id="e36a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们需要做的最后一件事是在用户登录时将我们的partnerId传递给商店。回到src/views/SignIn.vue，将partnerId添加到我们的商店行动分派中:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="607a" class="mp lt iq nc b gy ng nh l ni nj">this<em class="nk">.$store.dispatch</em>('user/setUserData', {<br/> id: <em class="nk">dbUser.</em>id,<br/> name: <em class="nk">userData.</em>name,<br/> email: <em class="nk">userData.</em>email,<br/> <strong class="nc ir">partnerId: <em class="nk">userData.</em>partnerId || ''</strong><br/>})</span></pre><h2 id="95ad" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">路由器</h2><p id="df01" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在页面已经设置好了，让我们将它添加到路由器中。在“路线”下，添加以下内容:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="340c" class="mp lt iq nc b gy ng nh l ni nj">{<br/> <em class="nk">path</em>:<em class="nk"> </em>'/add-partner',<br/> <em class="nk">name</em>:<em class="nk"> </em>'Add Partner',<br/> <em class="nk">beforeEnter</em>:<em class="nk"> </em>guard,<br/> <em class="nk">component</em>:<em class="nk"> </em>()<em class="nk"> </em>=&gt;<br/>  <em class="nk">import</em>(/*<em class="nk"> webpackChunkName: "add-partner" </em>*/ '../views/AddPartner.vue')<br/>}</span></pre><h2 id="a1df" class="mp lt iq bd lu mq mr dn ly ms mt dp mc lf mu mv me lj mw mx mg ln my mz mi na bi translated">航行</h2><p id="8f1c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要访问此页面，我们需要将其添加到我们的导航中。因此，请转到src/App.vue，将它添加到应用程序栏中，就在h2:</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="7eb7" class="mp lt iq nc b gy ng nh l ni nj">&lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>&lt;v-btn <em class="nk">text</em> <em class="nk">small</em> <em class="nk">color</em>="white" <em class="nk">to</em>="/add-partner"&gt;Add Partner&lt;/v-btn&gt;</span></pre><h1 id="27a3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">视频教程</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn nm l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Video Tutorial</figcaption></figure><h1 id="0d28" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="2337" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们的应用进展非常顺利。到目前为止，我们已经进行了身份验证和合作伙伴选择。在<a class="ae kv" href="https://diligentdev.medium.com/tinder-style-movie-night-picker-with-vuejs-and-firebase-60a1c5200c" rel="noopener">的下一篇文章</a>中，我们将致力于让电影进入我们的应用程序，并对它们进行投票。请务必关注我，以便在发布时得到通知。</p></div></div>    
</body>
</html>
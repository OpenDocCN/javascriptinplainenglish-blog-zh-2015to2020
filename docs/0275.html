<html>
<head>
<title>How to create a Blockchain in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript创建区块链</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/byob-build-your-own-blockchain-93ecfdc388ad?source=collection_archive---------7-----------------------#2019-09-10">https://javascript.plainenglish.io/byob-build-your-own-blockchain-93ecfdc388ad?source=collection_archive---------7-----------------------#2019-09-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5769" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">让我们通过编写自己的简单版本来揭开神秘的区块链，并了解它在幕后是如何工作的。</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/80ccf19445d83bdfe5200ec5bf0c7d69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xy9HoHgcOCGhQ2E7"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk"><a class="ae kt" href="https://images.unsplash.com/photo-1456428746267-a1756408f782?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><h1 id="d9bd" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated"><em class="kc">最终，它可能会让你建立自己的实验性微型区块链网络，而天空是你真正能做的极限。</em></h1><h1 id="0b60" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated"><strong class="ak">先决条件</strong></h1><ul class=""><li id="be0d" class="lm ln in lo b lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">区块链基础知识(有史以来最全面的文章- <a class="ae kt" href="https://blockgeeks.com/guides/what-is-blockchain-technology/" rel="noopener ugc nofollow" target="_blank">区块极客</a>)</li><li id="7491" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">Javascript基础知识</li><li id="636e" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">热情:)</li></ul><h1 id="6f33" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">让我们开始吧</h1><p id="7758" class="pw-post-body-paragraph mj mk in lo b lp lq jo ml lr ls jr mm lt mn mo mp lv mq mr ms lx mt mu mv lz ig bi translated">在实际编写我们自己的区块链之前，第一步是弄清楚我们需要哪些不同的信息。因为我已经做了所有的工作，所以下面是我们的微型区块链实现所需的构建块列表:</p><ul class=""><li id="52ea" class="lm ln in lo b lp mw lr mx lt my lv mz lx na lz ma mb mc md bi translated">类块(索引、时间戳、数据、以前的哈希、哈希、随机数)</li><li id="45ad" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">类区块链(追加所有区块，从genesis区块开始)</li><li id="0a59" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">用于计算哈希的库(sha256)</li><li id="98a7" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">帮助器函数来使用我们实现的类</li></ul><p id="4004" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">现在让我们开始，</p><p id="4b2e" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">我们首先需要的是一个能够在javascript中创建散列的库，我们将使用<a class="ae kt" href="https://www.npmjs.com/package/crypto-js" rel="noopener ugc nofollow" target="_blank">这个</a>。一旦安装了npm，就可以简单地添加它(<strong class="lo io"> npm安装crypto-js </strong>)</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/6552baf34995690a9f99927f60ad5aab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*QLxAk2Zw72nHEr7bAUSs4Q.png"/></div></figure><p id="fef8" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">现在你有了所有需要的依赖/库，所以让我们开始编码我们的块，</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi nf"><img src="../Images/80ca334032a0db8e0aaec5d6985a9300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gTDdkbvCs04s6aNGEMVrlg.png"/></div></div></figure><p id="f611" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">我们在这里所做的是为我们的区块链实现中的构造块创建一个类。它是通过调用一个构造函数来完成的，这个构造函数在每次被调用时都会创建一个新的块(new block())。我们还使用了库中的SHA256函数来创建散列。接下来，我们将实现区块链类，这将帮助我们创建不可变的独立区块链。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi ng"><img src="../Images/6515a63cc94eb75ea6c60f38cb3bafbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9XkAvVan-0YyNCFLmWYAQA.png"/></div></div></figure><p id="a001" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">这里要注意的重要部分是，构造函数应该总是只被调用一次，为什么，因为genesis块总是在块链调用时创建的。因此，我们将只做<strong class="lo io"> new Blockchain () </strong>一次，之后我们将只访问同一个对象来添加块或查询已经创建的对象的任何内容。还有一个有效性检查功能，用于查询区块链是否合法。这是一个非常幼稚的实现，但是我们在这里也实现了区块链的幼稚版本。现在，我们有了区块链设置的基本构建模块，但我们仍然缺少一些东西，是的助手功能，它将帮助我们在控制台和区块链初始化中看到输出。这是最后一段代码。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi nh"><img src="../Images/31399052fb92aae9d25ae5c41152ca2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDP7xYzYHVhXmK5lztLn9w.png"/></div></div></figure><p id="05ee" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">这里需要注意的几件重要事情是索引函数的编写方式，它从第0块开始索引到第n块。我添加了一些帮助函数，使它更具交互性，如下所示:</p><ul class=""><li id="4e24" class="lm ln in lo b lp mw lr mx lt my lv mz lx na lz ma mb mc md bi translated"><strong class="lo io"> showBlockchain() - </strong>在你第一次运行文件之后，请调用这个来监控我们在这里创建的区块链的结构。</li><li id="124e" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><strong class="lo io">add(x)——</strong>这里x可以是任意数，比如说50，它要做的是在我们的区块链中添加50个随机数据块。</li><li id="c255" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><strong class="lo io"> addData(string) </strong> - ex。addData("whatDaBlock ")，将在我们新创建的块中添加一个带有字符串数据的块，使用<strong class="lo io"> showBlockchain() </strong>来验证我们新创建的块的添加。</li><li id="0e9b" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><strong class="lo io"> latestBlock() - </strong>将给出区块链中添加的最新(仅最后一个)块。</li><li id="f945" class="lm ln in lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><strong class="lo io"> isValid() - </strong>将导致显示<strong class="lo io">真</strong>或<strong class="lo io">假</strong>，这取决于我们的原始条件是否被利用。</li></ul><p id="9b9b" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">请使用本文底部提供的沙盒环境中的控制台来尝试上述命令；)</p><h1 id="7c5d" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated"><strong class="ak">少了点什么</strong></h1><p id="89ba" class="pw-post-body-paragraph mj mk in lo b lp lq jo ml lr ls jr mm lt mn mo mp lv mq mr ms lx mt mu mv lz ig bi translated">是的，你是对的，看起来这就是我们设置区块链实现所需要的一切，但是我们仍然遗漏了这个模型中的一些重要主题，比如nonce部分。您可能想知道为什么nonce对于所有块都是0，而挖掘功能又是什么呢？我省略了所有这些，因为我还没有实现它们中的任何一个，这是下一部分，我们可以讨论PoS，merkle树🌲、采矿、nonce和其他疯狂的东西；)</p><h1 id="caf2" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">代码在哪里？</h1><p id="8c9d" class="pw-post-body-paragraph mj mk in lo b lp lq jo ml lr ls jr mm lt mn mo mp lv mq mr ms lx mt mu mv lz ig bi translated">我知道你会看这一篇，但是让你等着看完整篇文章。</p><p id="a2fe" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">实际上，我已经让您更容易地开始我们刚刚实施的区块链计划，而不需要您去任何其他地方，因为我已经完成了整个过程，并在这里为您设置了一个沙箱。没有什么是需要进一步的，只是疯狂与它:D</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">I find <a class="ae kt" href="https://repl.it/" rel="noopener ugc nofollow" target="_blank"><strong class="ak">Repl.it</strong></a> a great source for online coding / collaboration / mentoring . Highly recommended</figcaption></figure><p id="6bb2" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">如果你仍然觉得有必要看看我的完整代码，那么去<a class="ae kt" href="https://repl.it/@AkshatJain5/BYOB" rel="noopener ugc nofollow" target="_blank"> <strong class="lo io">这里</strong> </a> <strong class="lo io">。</strong></p><p id="5803" class="pw-post-body-paragraph mj mk in lo b lp mw jo ml lr mx jr mm lt nb mo mp lv nc mr ms lx nd mu mv lz ig bi translated">希望你喜欢我的帖子。谢谢，请分享:)</p></div></div>    
</body>
</html>
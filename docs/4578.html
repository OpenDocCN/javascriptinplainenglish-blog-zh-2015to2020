<html>
<head>
<title>How To Write Functions In TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在TypeScript中编写函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-write-functions-in-typescript-4fe5cea4c9d?source=collection_archive---------24-----------------------#2020-12-21">https://javascript.plainenglish.io/how-to-write-functions-in-typescript-4fe5cea4c9d?source=collection_archive---------24-----------------------#2020-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="dce6" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">初学者友好系列，让您的应用程序经得起未来考验</h2></div><h2 id="16c0" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">嘿，你好</h2><p id="98c0" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">为了方便起见，本系列的其他部分如下。🥳</p><p id="3527" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated"><a class="ae lw" href="https://blog.usejournal.com/future-proof-your-react-app-pt-1-10213b1d0022" rel="noopener ugc nofollow" target="_blank">面向未来的应用第1部分</a></p><p id="f7bd" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated"><a class="ae lw" href="https://medium.com/javascript-in-plain-english/future-proof-your-react-app-55fc6ac2cb10" rel="noopener">让你的应用适应未来的第二部分</a></p><p id="a5c9" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">我们之前讨论了prop-type，并继续介绍TypeScript。尽管如此，我们的TypeScript介绍还是非常简短，主要集中在原始数据类型的类型化系统上。这篇文章将继续展示一个函数如何在执行函数体之前先检查参数类型。在探索了TypeScript如何处理函数之后，我们还将看看一些更复杂的类型。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/ac7624c74c34de4d604eabdb20956b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g52kN9U6dAix65nu"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">Photo by <a class="ae lw" href="https://unsplash.com/@jstrippa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on <a class="ae lw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="8cab" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">JavaScript缺陷</h2><p id="45ae" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">首先，让我们来看看处理JavaScript中的类型错误或意外行为所需的额外代码量，这只是在您实际上有经验和远见来预料这些事情的时候。JavaScript代码实际上不能期望传入的参数类型。JavaScript函数可以接受任何数据类型，但是我们在函数体中指定处理意外数据类型的逻辑。</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="01ed" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">JS code:</strong><br/>const findSum = (numOne, numTwo) =&gt; numOne + numTwo</span><span id="31c2" class="kc kd in mo b gy mw mt l mu mv">findSum(5, '6') -&gt; outputs 56 </span><span id="4dec" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">* Notice the '6' is a string in this case and the integer 5 gets coerced into a string as well, resulting in a concatenated string value. Definitely not what we want in this case - and sure, we can write logic inside the function body like below.</strong></span><span id="5edc" class="kc kd in mo b gy mw mt l mu mv">const findSum = (numOne, numTwo) =&gt; {<br/>  if(typeof numOne !== 'number' || typeof numTwo !== 'number'){<br/>    throw new Error('passed in args are not integers')<br/>  }<br/>  return numOne + numTwo<br/>}</span></pre><p id="cf56" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">第二段JavaScript代码肯定是有效的，而且它工作正常。然而，在TypeScript中有一种更简单的方法来编写它。我们写的代码越少，通常意味着我们需要阅读和维护的代码就越少。每个人都“喜欢”那个！</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="ba86" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">TS code:<br/></strong>const findSum = (numOne:number, numTwo:number) =&gt; numOne + numTwo</span><span id="de4f" class="kc kd in mo b gy mw mt l mu mv">findSum(5, '6')</span><span id="672a" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">* This will result in an error that looks like the line below.</strong></span><span id="3833" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">Error</strong> - Argument of type 'string' is not assignable to parameter of type 'number'.</span></pre><p id="fccd" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">我们可以在声明变量时利用相同语法的类型注释— <strong class="la io"> &lt;变量/参数:期望的数据类型&gt; </strong>。TypeScript中的类型系统将处理意外数据类型的逻辑，并在不编写额外代码的情况下引发错误。请注意，如果参数旁边没有提供类型，将会推断出“any”类型。</p><h2 id="9268" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">功能，参数，自变量…太空堡垒卡拉狄加？</h2><p id="cd1b" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">还记得JavaScript如何喜欢在大多数时候无声地失败，并且每当某个地方有一个小bug时就抛出undefined吗？有时这是由于缺少参数，它不会以与TypeScript相同的方式运行。让我们看看下面代码中的TypeScript错误是什么样子的。</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="2426" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">JS code:<br/></strong>const findSum = function (numOne, numTwo) =&gt; {<br/>  console.log(numOne, numTwo) ------&gt; <strong class="mo io">// 6, undefined</strong><br/>  return numOne + numTwo<br/>}</span><span id="2fc5" class="kc kd in mo b gy mw mt l mu mv">console.log(findSum(6)) ------------&gt; <strong class="mo io">// NaN</strong></span><span id="c0c1" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">TS code:<br/></strong>const findSum = (numOne:number, numTwo:number) =&gt;  numOne + numTwo</span><span id="4ac9" class="kc kd in mo b gy mw mt l mu mv">findSum(5)</span><span id="8b6f" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">Error</strong> - Expected 2 arguments, but got 1.<br/>      - An argument for 'numTwo' was not provided.</span></pre><p id="29cd" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">这些错误是有益的，除非在TypeScript中用可选参数显式指定，否则灵活性肯定会降低。</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="173b" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">JS code:<br/></strong>const greeting = function (name) =&gt; {<br/>  return "hello " + (name || 'stranger')<br/>}</span><span id="ed70" class="kc kd in mo b gy mw mt l mu mv">console.log(greeting()) <strong class="mo io">// hello stranger</strong></span><span id="9cdc" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">TS code:<br/></strong>const greeting = (name?:string) =&gt; {  <strong class="mo io">&lt;-- notice the question mark?</strong><br/>  return `hello ${name || 'stranger'}`<br/>}</span><span id="a119" class="kc kd in mo b gy mw mt l mu mv">The question mark after the parameter allows developers to make a given parameter optional.</span></pre><p id="7192" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">为参数分配默认值看起来与JavaScript相同。</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="cb90" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">TS code:<br/></strong>const greeting = (name = 'stranger') =&gt; {<br/>  return `hello ${name}`<br/>}</span><span id="ecbb" class="kc kd in mo b gy mw mt l mu mv">console.log(greeting()) <strong class="mo io">// outputs 'hello stranger'</strong></span></pre><p id="3456" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">TypeScript将根据默认值的类型在这里执行类型推断。因此，在这种情况下，默认值是“string”类型——接收任何其他数据类型都会导致错误。既然我们讨论的是类型推断的话题，还值得一提的是，TypeScript通过查看return语句后的值来推断返回类型。在上面的代码中，问候函数的返回类型将是一个“字符串”如果出于某种原因，您必须将返回值存储到另一个指定数据类型的变量中，这将导致抛出错误。现在让我们看看显式声明返回类型。</p><pre class="ly lz ma mb gt mn mo mp mq aw mr bi"><span id="7036" class="kc kd in mo b gy ms mt l mu mv"><strong class="mo io">TS code:<br/></strong>const myAge = (age = '18')<strong class="mo io">: string</strong> =&gt; { <br/>  return Number(18)  <strong class="mo io"> <br/>  // returning any other data type will cause an error</strong><br/>}</span><span id="f044" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">// explicit annotation after closing parenthesis to state return type</strong></span><span id="4dbb" class="kc kd in mo b gy mw mt l mu mv"><strong class="mo io">// Type 'number' is not assignable to type 'string'.</strong></span></pre><p id="5f72" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">如果一个函数因为缺少参数或者忘记返回值而返回<strong class="la io"> undefined </strong>，TypeScript会产生一个有用的错误，因为<strong class="la io"> undefined </strong>也是一个数据类型。超级整洁！</p><h2 id="e777" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h2><p id="98fe" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">感谢您加入我学习TypeScript的旅程。我个人认为TypeScript有助于保护我们的代码。这无疑有助于提高可读性，并消除了在大型工程环境中工作时对函数应该接收和返回什么的猜测。</p><p id="ee47" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">希望我能够清楚地表达我的想法，我们都从这篇文章中学到了很多。现在，我们知道了如何读写参数的类型注释，像在JavaScript中一样给出默认值，以及如何确定或显式声明函数的返回类型。这可能已经成功了一半以上，因为函数被视为一等公民，可以传递给其他函数。</p><p id="5781" class="pw-post-body-paragraph ky kz in la b lb lr jo ld le ls jr lg kl lt li lj kp lu ll lm kt lv lo lp lq ig bi translated">关于TypeScript的下一篇文章将介绍如何将类型应用于更复杂的数据结构，如数组和对象。永远学习，对吗？！下次再见了。</p><h2 id="42cb" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">参考</h2><div class="mx my gp gr mz na"><a href="https://www.tutorialsteacher.com/typescript/typescript-variable" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">TypeScript变量声明:var，let，const</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">了解使用var、let和const关键字在TypeScript中声明变量的不同方式。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">www.tutorialsteacher.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no mh na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://ts.chibicode.com/todo/" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">面向知道如何构建Todo应用程序的JS程序员的TypeScript教程</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">2011年，Backbone.js是最受欢迎的JavaScript库之一(React于2013年问世；2014年的Vue)。当…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">ts.chibicode.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no mh na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://www.typescriptlang.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">任意比例的输入JavaScript。</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">TypeScript通过向语言中添加类型来扩展JavaScript。TypeScript通过以下方式加速您的开发体验…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">www.typescriptlang.org</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no mh na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://2ality.com/2018/04/type-notation-typescript.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">理解TypeScript的类型标记法</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">这篇博客文章是对静态类型的TypeScript符号的快速介绍。目录:看完这个…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">2ality.com</p></div></div><div class="nj l"><div class="nr l nl nm nn nj no mh na"/></div></div></a></div></div></div>    
</body>
</html>
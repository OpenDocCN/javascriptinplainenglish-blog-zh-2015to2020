<html>
<head>
<title>A basic understanding of Redux with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对Redux with React的基本理解</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/redux-basic-understanding-via-react-4fb470d6fd3e?source=collection_archive---------3-----------------------#2019-08-02">https://javascript.plainenglish.io/redux-basic-understanding-via-react-4fb470d6fd3e?source=collection_archive---------3-----------------------#2019-08-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f5246af38e3f0ab3b03dfc42d71622dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ccshZmB0aKTZVyY2ceJCg.png"/></div></div></figure><p id="96f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你好连接！今天我们将讨论<strong class="jx io"> Redux </strong>。在这次短途旅行中，我们将涵盖对<strong class="jx io"> Redux </strong>的基本理解，为什么我们需要<strong class="jx io"> Redux </strong>，它是如何工作的，以及我们如何将其与React连接起来。它相比正常状态&amp;道具有什么好处。所以让我们开始吧，不要再浪费时间了。</p><p id="0439" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，要精通<strong class="jx io"> Redux </strong>我们需要知道我们为什么需要它。为了让我们的概念更清晰，比如说我们拥有一家银行'<strong class="jx io"> XYZ </strong>'在“XYZ”银行，最重要的特点是在银行里存钱。对于这些功能，我们可以有不同的选项，客户可以从中选择。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8620fdc279d7cdd4ae1faf77d208f26f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSazOUmSO74ialAcWeWgBA.png"/></div></div></figure><p id="7ddc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为一名开发者，考虑到所有关于功能的选项，我们需要建立一个我们可以信任的真实来源，并复制到我们的每个选项中，以便在交易时不会出现金额不匹配的情况。为了高效地完成我们的工作，我们需要采取集中行动，让我们所有的选择都能发挥作用，并利用它们来完善银行设施。因此，我们可以将两个操作“取款”和“存款”作为一个公共操作，连接到我们的“中央服务器”来更新客户的数据库。通过这种方式，每当顾客从给予他的任何选项中访问他的账户时，他发现在(他/她)交易之前或之后的金额是相同的。</p><p id="95e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我们上面所讨论的，必须有一个中心“存储”和“动作”,我们所有的CRUD操作都可以从一个真实的来源获得数据。那么让我们从<strong class="jx io"> redux </strong>官方文档开始陈述:<strong class="jx io"> <em class="kx"> Redux </em> </strong>是一个状态管理库，它让你可以访问组件中任何地方的状态，而不需要传递属性。因此，它可以与Angular和React等任何前端库一起使用，但它与React一起使用效果最好。”“react-redux”是连接两者的官方库。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/63c79da206ccbd5601eb2a28694214fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RX6MVIR5zsTNLpZH0_FgRg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Redux Flow</figcaption></figure><p id="5bf6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的图片中，我们可以看到两个组件或页面之间的REDUX流。假设我们有一个应用程序，其中我们维护了一个redux来控制前端级别的应用程序状态(数据)。为了建立一个我们可以信任的真理的中心来源，我们建立了一个redux“STORE ”,其中有2样东西:</p><p id="f2ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1)应用程序的状态。2) Reducer(包含我们所有动作的定义)。</p><p id="45a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设我们的两个组件或页面正在使用状态值，例如其中一个页面1:想要将count的值增加1。因此，第1页将向“reducer”发送一个“action”来执行此操作。然后reducer会发现他是否得到了增量动作的定义，如果发现他对中心状态做了同样的事情&amp;发出它的更新状态。像Page 2这样已经订阅了它的值的其他页面将会得到关于这个值的更新，并且现在会在它们的页面上显示更新后的值。为了充分理解这一点，让我们开始使用React-redux应用程序。</p><blockquote class="lc ld le"><p id="a907" class="jv jw kx jx b jy jz ka kb kc kd ke kf lf kh ki kj lg kl km kn lh kp kq kr ks ig bi translated">如果你是react新手，你可以找我的Github库(https://github.com/<a class="ae li" href="http://React CRUD APP for Beginners" rel="noopener ugc nofollow" target="_blank">vinodchauhan 7</a>/React-CRUD-operation-with-router . git)React CRUD for初学者，我在那里做了5课(分支)，你可以在具备JS基础知识的前提下一步一步地学习“React”。要安装react，您必须在系统中安装npm。</p></blockquote><p id="630f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要安装react : " <code class="fe lj lk ll lm b"><strong class="jx io">npm install -g create-react-app</strong></code>"</p><p id="d9f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建react应用程序:"<code class="fe lj lk ll lm b"><strong class="jx io">create-react-app react-redux-app</strong></code>"</p><p id="f708" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在你的应用中安装redux:“<code class="fe lj lk ll lm b"><strong class="jx io">npm install — save redux react-redux</strong></code></p><p id="f9bd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kx">如果从这一点上你没有进一步理解任何事情，不要沮丧，我将创建一个GITHUB REPO，其中将通过多个课程(分支)一步一步地给出方法，在那里你可以理解如何顺利地将REACT转换为“REACT-REDUX-APP”。</em></p><p id="6bb5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装后转到react-redux-app/src/index.js</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="fa89" class="lr ls in lm b gy lt lu l lv lw">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>	</span><span id="1ebc" class="lr ls in lm b gy lx lu l lv lw">ReactDOM.render(</span><span id="9d0b" class="lr ls in lm b gy lx lu l lv lw">&lt;App /&gt;,document.getElementById('root'));</span></pre><p id="a5c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">和react-redux-app/src/App.js</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="924e" class="lr ls in lm b gy lt lu l lv lw">import React, { Component } from 'react';<br/>	</span><span id="7803" class="lr ls in lm b gy lx lu l lv lw">	class App extends Component {<br/>	  render() {<br/>	      return (<br/>	      &lt;div className="App"&gt;<br/>	        &lt;h1&gt;Hello React!&lt;/h1&gt;<br/>	      &lt;/div&gt;<br/>	      );<br/>	  }<br/>	  }</span><span id="35b1" class="lr ls in lm b gy lx lu l lv lw">export default App;</span></pre><p id="dbf1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在在终端运行命令:“npm启动”。这将启动你的应用程序和你的最爱。浏览器将打开“localhost:3000”并显示“Hello React”。</p><p id="42af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们将首先创建一个存储，/src/store/reducer.js</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="294c" class="lr ls in lm b gy lt lu l lv lw">const initialState = {<br/>  count: 1<br/>};<br/></span><span id="be94" class="lr ls in lm b gy lx lu l lv lw">const reducer = (state = initialState, action) =&gt; {<br/>  const newState = { ...state };<br/>  switch (action.type) {<br/>    case "INC":<br/>      return {<br/>        ...state,<br/>        count: state.count + action.value<br/>      };<br/></span><span id="27c3" class="lr ls in lm b gy lx lu l lv lw">    case "DEC":<br/>      return {<br/>        ...state,<br/>        count: state.count - action.value<br/>      };<br/></span><span id="c585" class="lr ls in lm b gy lx lu l lv lw">    default:<br/>      break;<br/>  }<br/>  return newState;<br/>};<br/></span><span id="d9f9" class="lr ls in lm b gy lx lu l lv lw">export default reducer;</span></pre><p id="94ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个文件中，我们为“count”值创建了一个“initialState”和一个“reducer”函数，其中定义了“INC”和“DEC”操作。此操作只是根据参数中给定的值更新state.count值。</p><p id="6252" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Now /src/app.js</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="685a" class="lr ls in lm b gy lt lu l lv lw">import React, { Component } from "react";<br/>import "./App.css";<br/>import { connect } from "react-redux";<br/></span><span id="8ef9" class="lr ls in lm b gy lx lu l lv lw">class App extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;h3&gt;Count : {this.props.count}&lt;/h3&gt;<br/>        &lt;button onClick={this.props.handleINC}&gt;Inc&lt;/button&gt;<br/>        &lt;button onClick={this.props.handleDEC}&gt;Dec&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/></span><span id="a888" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">//subscriber</em><br/>const mapStateToProps = state =&gt; {<br/>  return {<br/>    count: state.count<br/>  };<br/>};<br/></span><span id="b74b" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">//eventHandler(Action)</em><br/>const mapDespachToProps = dispach =&gt; {<br/>  return {<br/>    handleINC: () =&gt; dispach({ type: "INC", value: 1 }),<br/>    handleDEC: () =&gt; dispach({ type: "DEC", value: 1 })<br/>  };<br/>};<br/></span><span id="114e" class="lr ls in lm b gy lx lu l lv lw">export default connect(<br/>  mapStateToProps,<br/>  mapDespachToProps<br/>)(App);</span></pre><p id="3b4c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个文件有5个主要步骤，但要理解这个概念，你首先必须知道“高阶组件”，这基本上意味着将一个函数作为参数传递给另一个函数，并在该函数中设置状态。要完全理解这个概念，现在就谷歌一下。</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="ffda" class="lr ls in lm b gy lt lu l lv lw">1)  Get the subscriber so that we can show count value in our app.js component.</span><span id="d507" class="lr ls in lm b gy lx lu l lv lw"> <em class="kx">//subscriber</em><br/>const mapStateToProps = state =&gt; {<br/>  return {<br/>    count: state.count<br/>  };<br/>};</span><span id="73a3" class="lr ls in lm b gy lx lu l lv lw">2) Show the value in render() method. All redux values comes in props only.</span><span id="0d68" class="lr ls in lm b gy lx lu l lv lw">render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;h3&gt;Count : {this.props.count}&lt;/h3&gt;<br/>        &lt;button onClick={this.props.handleINC}&gt;Inc&lt;/button&gt;<br/>        &lt;button onClick={this.props.handleDEC}&gt;Dec&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }</span></pre><p id="4b5e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到目前为止，我们已经使计数值对组件可见，但这将不起作用。</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="7763" class="lr ls in lm b gy lt lu l lv lw">//eventHandler(Action)<br/>const mapDespachToProps = dispach =&gt; {<br/>  return {<br/>    handleINC: () =&gt; dispach({ type: "INC", value: 1 }),<br/>    handleDEC: () =&gt; dispach({ type: "DEC", value: 1 })<br/>  };<br/>};</span></pre><blockquote class="lc ld le"><p id="f6fd" class="jv jw kx jx b jy jz ka kb kc kd ke kf lf kh ki kj lg kl km kn lh kp kq kr ks ig bi translated">现在从' react-redux '导入{connect}来连接我们的减速器组件。</p></blockquote><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="cbef" class="lr ls in lm b gy lt lu l lv lw">export default connect(<br/>  mapStateToProps,<br/>  mapDespachToProps<br/>)(App);</span></pre><blockquote class="lc ld le"><p id="a60f" class="jv jw kx jx b jy jz ka kb kc kd ke kf lf kh ki kj lg kl km kn lh kp kq kr ks ig bi translated">上面的代码片段将订户和调度连接到我们的主存储(reducer ),这是使用redux最重要的一点。这个概念是特设的(高阶组件)。</p></blockquote><p id="b390" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在查找/src/index.js</p><pre class="kt ku kv kw gt ln lm lo lp aw lq bi"><span id="89c1" class="lr ls in lm b gy lt lu l lv lw">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "./index.css";<br/>import App from "./App";<br/>import * as serviceWorker from "./serviceWorker";</span><span id="4f22" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">//Provider provides to store to our all components</em><br/>import { Provider } from "react-redux";<br/><em class="kx">//createStore is redux app to create store in our app from redux.</em><br/>import { createStore } from "redux";</span><span id="f986" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">//importing our reducer in index.js</em><br/>import reducer from "./store/reducer";<br/></span><span id="edfc" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">//creating store from createStore which takes reducer as argument.</em><br/>const store = createStore(reducer);<br/></span><span id="c1a0" class="lr ls in lm b gy lx lu l lv lw">ReactDOM.render(<br/><em class="kx">//Here we are providing Provider with store prop to our app component so that </em><br/><em class="kx">//count will be available to it as a props.</em><br/>  &lt;Provider store={store}&gt;<br/>    &lt;App /&gt;<br/>  &lt;/Provider&gt;,<br/>  document.getElementById("root")<br/>);<br/></span><span id="457a" class="lr ls in lm b gy lx lu l lv lw"><em class="kx">// If you want your app to work offline and load faster, you can change</em><br/><em class="kx">// unregister() to register() below. Note this comes with some pitfalls.</em><br/><em class="kx">// Learn more about service workers: </em><a class="ae li" href="https://bit.ly/CRA-PWA" rel="noopener ugc nofollow" target="_blank"><em class="kx">https://bit.ly/CRA-PWA</em></a><br/>serviceWorker.unregister();</span></pre><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ly"><img src="../Images/9361519fa7ccaa14368aa66e3cfa3b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gz-wPoInPMTbnFJFKlefEA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Result inbrowser</figcaption></figure><p id="ef17" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是你将在浏览器上的应用程序中看到的结果。我希望你们理解这篇文章中的一些东西，如果有人需要它的一步一步的git repo，不要担心，我将很快用diff branches更新这篇文章。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Automate Firebase Hosting with Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Github动作自动化Firebase托管</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/automate-firebase-hosting-with-github-actions-6747ca5218e9?source=collection_archive---------8-----------------------#2020-05-23">https://javascript.plainenglish.io/automate-firebase-hosting-with-github-actions-6747ca5218e9?source=collection_archive---------8-----------------------#2020-05-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/8c64a51cb07cad3c6c218d5b69d1f9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pR1139SQG-TktBi7Pm3D_Q.png"/></div></div></figure><div class=""/><blockquote class="jv jw jx"><p id="bfcd" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">更新01/21/21:使用“firebase init”命令，您现在可以通过CLI从Github自动设置部署，您不必遵循本教程的任何内容。先试试那个。它应该为合并设置一个操作，为PR设置一个操作，为每个PR创建预览站点。</p></blockquote><p id="e178" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这是一个快速设置Github动作来部署一个站点到Firebase主机的教程。这将包括用Vue、React、Gatsby、Next.js静态生成器或任何其他客户端站点构建的站点。几分钟后你就可以设置好了，这样每次你把代码推给master，它就会自动被Github构建并部署到Firebase。我假设您已经在Github上编写了代码，并设置了firebase项目。如果您的项目在根目录中没有一个<code class="fe la lb lc ld b">firebase.json</code>文件，或者如果该文件没有托管部分，您可能需要运行<code class="fe la lb lc ld b">firebase init</code>。还要确保您有一个带有您的项目ID的<code class="fe la lb lc ld b">.firebaserc</code>文件，否则部署功能将无法工作。如果您运行<code class="fe la lb lc ld b">firebase init</code>，它应该已经为您创建好了。</p><p id="6dae" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这里有一个关于<code class="fe la lb lc ld b">firebase.json</code>文件应该是什么样子的例子:</p><figure class="le lf lg lh gt ip"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="43c8" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe la lb lc ld b">site-name</code>应该替换为您想要部署到的站点的名称，而<code class="fe la lb lc ld b">dist</code>应该是您的站点构建到的目录。通常不是dist就是public。</p><p id="26b1" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">接下来，您需要在路径<code class="fe la lb lc ld b">.github/workflows/</code>下创建一个名为<code class="fe la lb lc ld b">main.yml</code>的文件。该文件应该包含以下内容:</p><figure class="le lf lg lh gt ip"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="410a" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这里您可能需要更改的是对<code class="fe la lb lc ld b">dist</code>的任何引用，更改为您的构建脚本输出最终代码的任何内容，并且<code class="fe la lb lc ld b">npm run build</code>行可以更改为您的构建命令。还要确保将<code class="fe la lb lc ld b">site-name</code>更改为您在最后一步中在<code class="fe la lb lc ld b">firebase.json</code>文件中使用的内容。注意:您可以很容易地用yarn替换npm，yarn目前在构建环境中是全局可用的。</p><p id="b2fb" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这个文件基本上运行两个独立的任务:一个从源代码构建站点文件，另一个获取工件并将其部署到Firebase主机。</p><p id="8b9a" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这里需要做的最后一件事是将您的秘密Firebase令牌添加到Github，这样它就有权限为您部署站点。要获得这个令牌，在您的终端中运行<code class="fe la lb lc ld b">firebase login:ci</code>并复制生成的代码。您将把该代码粘贴到秘密页面上Github项目的设置中。创建一个名为<code class="fe la lb lc ld b">FIREBASE_TOKEN</code>的新密码，并粘贴您从终端获得的代码。</p><p id="4d20" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在，您可以提交这两个文件并推送到Github，Github动作会处理剩下的事情。推送之后，你应该可以在Github项目的actions标签中看到进度。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><p id="8e97" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><em class="ka">最初发表于</em><a class="ae lr" href="https://codegregg.com/blog/firebaseHostingGithubActions/" rel="noopener ugc nofollow" target="_blank"><em class="ka">【https://codegregg.com】</em></a><em class="ka">。</em></p><h2 id="d1bf" class="ls lt iy bd lu lv lw dn lx ly lz dp ma kx mb mc md ky me mf mg kz mh mi mj mk bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="2b59" class="pw-post-body-paragraph jy jz iy kb b kc ml ke kf kg mm ki kj kx mn km kn ky mo kq kr kz mp ku kv kw ig bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae lr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb iz">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae lr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kb iz">订阅我们的YouTube频道</strong> </a> <strong class="kb iz">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
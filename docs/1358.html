<html>
<head>
<title>React Native — How to create a Multi-Select list with highlight options based on Nativebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native —如何基于Nativebase创建带有高亮选项的多选列表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-native-how-to-create-a-multi-select-list-with-highlight-options-based-on-nativebase-d0aca4a43804?source=collection_archive---------2-----------------------#2020-03-06">https://javascript.plainenglish.io/react-native-how-to-create-a-multi-select-list-with-highlight-options-based-on-nativebase-d0aca4a43804?source=collection_archive---------2-----------------------#2020-03-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cf11" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">让我们创建一个列表，该列表可以基于原生基本用户界面库选择多个项目。</em></h2></div><h1 id="87e8" class="kg kh iq bd ki kj kk kl km kn ko kp kq jw kr jx ks jz kt ka ku kc kv kd kw kx bi translated">为什么是NativeBase？</h1><p id="3322" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Native Base是我最喜欢的React原生UI库之一。这个项目背后的团队设法在标准的React本地组件上构建了一个很好的层。Native Base中的大多数组件都非常容易使用，并且比标准组件可读性更好。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lu"><img src="../Images/6340264d5fade2639d04d508023cd95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6bzQBGcrfBxucfio.jpg"/></div></div></figure><p id="0603" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">假设我们的列表中有两种模式，每种模式都会改变屏幕的行为。</p><h1 id="d8d8" class="kg kh iq bd ki kj kk kl km kn ko kp kq jw kr jx ks jz kt ka ku kc kv kd kw kx bi translated">显示方式</h1><ul class=""><li id="523f" class="ml mm iq la b lb lc le lf lh mn ll mo lp mp lt mq mr ms mt bi translated">未选择任何项目。</li><li id="e8f1" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">在一个项目上的单次按压应该触发默认动作。比如说；导航到详细信息屏幕。</li><li id="c28b" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">长按一个项目选择该项目并触发选择模式。</li><li id="5b92" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">标题处于标准状态。我只想看到一个标题。</li></ul><h1 id="ea31" class="kg kh iq bd ki kj kk kl km kn ko kp kq jw kr jx ks jz kt ka ku kc kv kd kw kx bi translated">选择模式</h1><ul class=""><li id="c61d" class="ml mm iq la b lb lc le lf lh mn ll mo lp mp lt mq mr ms mt bi translated">无，可以选择1个或多个项目。</li><li id="8fec" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">在项目上的单次按压将选择或取消选择该项目，而不是执行默认动作。</li><li id="ac28" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">屏幕的标题工具栏处于选择模式；在左上角，我们将显示一个取消选择所有项目的后退按钮。在这个按钮旁边，我们将显示当前选择了多少个项目。在右上角，我们将显示一个按钮，该按钮打开一个动作菜单，其中包含可供选择的事件。</li></ul><p id="e222" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">它应该是这样的:</p><div class="lv lw lx ly gt ab cb"><figure class="mz lz na nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><img src="../Images/22e67e2933e77a175c65cd43c21eb741.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*baZmmohXat8tPbu1GWeNmg.png"/></div></figure><figure class="mz lz na nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><img src="../Images/826bc7942be9ed933e46b2750cdae647.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*fQUlHSZseAS5kdS-8ynr3Q.png"/></div></figure><figure class="mz lz na nb nc nd ne paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><img src="../Images/dff8759d5e73d3a9efccb72134c336b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*GPT7qQDFOILT-16KcfHWdA.png"/></div></figure></div><h1 id="158c" class="kg kh iq bd ki kj kk kl km kn ko kp kq jw kr jx ks jz kt ka ku kc kv kd kw kx bi translated">积木</h1><p id="f2fb" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">将本机基础添加到我们的项目:</p><pre class="lv lw lx ly gt nf ng nh ni aw nj bi"><span id="3343" class="nk kh iq ng b gy nl nm l nn no">npm install native-base --save</span></pre><p id="1989" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">原生基地组件<strong class="la ir">清单、表头</strong>和<strong class="la ir">行动表</strong>。我们会把这三个放在一起，加入一些我们自己的逻辑来实现我们的目标。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="0a65" class="kg kh iq bd ki kj nw kl km kn nx kp kq jw ny jx ks jz nz ka ku kc oa kd kw kx bi translated">创建我们的组件</h1><p id="efaf" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">因此，我们将创建2个组件:</p><p id="b0d7" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir"> Main.js </strong>和<strong class="la ir">selectionlisheader . js</strong></p><p id="c4bf" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">主要组件将保持我们的项目的状态，并显示我们的列表。SelectionListHeader将用于显示基于列表状态的动态标题。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi ob"><img src="../Images/b250854533c4c24de6e8cdc096d4b187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0zrxp7eR1s8nLEFBoWk_A.jpeg"/></div></div></figure><h1 id="9cd3" class="kg kh iq bd ki kj kk kl km kn ko kp kq jw kr jx ks jz kt ka ku kc kv kd kw kx bi translated">主要的</h1><p id="0f59" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们定义一个自定义钩子，它将根据我们的项目数组返回一个选择模式。</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="a8a2" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">每当我们的items数组更新时，我们的useSelectionChange钩子将被调用，以便我们的selectionMode被更新。这样，我们可以确保selectionMode布尔值始终是最新的:</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="5463" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir">让我们添加其余的逻辑:</strong></p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="b03f" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">toggleSelect和clearSelection应该是非常简单的函数。</p><p id="dc4e" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">正如您在onPress和onLongPress函数中看到的，我们可以很容易地使用selectionMode布尔值来确定要执行哪个逻辑。当处于选择模式时，我们希望<strong class="la ir"> onPress </strong>功能切换该项目的选择。</p><p id="c33b" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">当不在selectionMode时，我们希望<strong class="la ir"> onPress </strong>执行一些其他逻辑。例如，导航到详细页面。</p><p id="7429" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir"> onLongPress </strong>应仅在不处于选择模式时切换选择。当我们第一次选择一个项目时，selectionMode会因为我们的自定义钩子而更新。</p><p id="9340" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">renderItem 将处理如何在我们的列表中显示单个项目。我们将根据项目的选定属性，动态地为ListItem分配一个样式。这样，我们可以在选中和未选中的项目之间产生视觉差异。</p><p id="d5c9" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">我们将在列表顶部插入我们的<strong class="la ir">选择列表头</strong>:</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="144a" class="kg kh iq bd ki kj nw kl km kn nx kp kq jw ny jx ks jz nz ka ku kc oa kd kw kx bi translated">SelectionListHeader</h1><p id="3949" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们来看看传递给<strong class="la ir">选择列表头</strong>的道具:</p><ul class=""><li id="42ea" class="ml mm iq la b lb mg le mh lh oe ll of lp og lt mq mr ms mt bi translated"><strong class="la ir">选择模式</strong>:布尔型<br/>定义我们的列表当前是否处于“选择模式”</li><li id="835f" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated"><strong class="la ir">标题</strong>:字符串<br/>标题显示在我们的头中</li><li id="dec5" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated"><strong class="la ir">selecteditems count</strong>:number<br/>所选项目的金额(显示在表头)</li><li id="8f6a" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated"><strong class="la ir">clear selection</strong>:function<br/>当我们点击标题右上方的取消图标时调用的函数</li><li id="38c5" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated"><strong class="la ir"> selectedActions </strong>:对象数组<br/>选择几个项目时ActionSheet (title + function)中可用的动作。</li></ul><p id="83ea" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir">渲染标题</strong>:</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="3484" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir"> SelectionMode === true: </strong></p><ul class=""><li id="b9a9" class="ml mm iq la b lb mg le mh lh oe ll of lp og lt mq mr ms mt bi translated">左:显示后退按钮-&gt;这将通过调用由<strong class="la ir"> clearSelection </strong> prop传递的方法来清除我们的选择</li><li id="8a9f" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">正文:显示<strong class="la ir">所选项目的编号</strong>而不是标题</li><li id="055b" class="ml mm iq la b lb mu le mv lh mw ll mx lp my lt mq mr ms mt bi translated">右图:打开我们的<strong class="la ir">动作表</strong>菜单的图标按钮</li></ul><p id="aa1c" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir">选择模式===假:</strong></p><ul class=""><li id="ee07" class="ml mm iq la b lb mg le mh lh oe ll of lp og lt mq mr ms mt bi translated">正文:展示<strong class="la ir">道具.标题</strong></li></ul><p id="d463" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir">动作片:</strong></p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="f489" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">我们希望我们的<strong class="la ir">动作表</strong>执行来自我们的<strong class="la ir">主</strong>组件的动作。<br/>选项将用我们动作的标题填充，这些将显示在ActionSheet中。</p><p id="8762" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated"><strong class="la ir">oneexecuteaction</strong>将决定执行哪个功能。基于动作的索引，应用由我们的主组件传递的正确函数。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="b5a0" class="kg kh iq bd ki kj nw kl km kn nx kp kq jw ny jx ks jz nz ka ku kc oa kd kw kx bi translated">修复Android中不显示的图标</h1><p id="ecf9" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">可能是标题中的图标在Android中显示不正确。修复方法如下！</p><p id="a64d" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">在android/app/build.gradle中添加:</p><pre class="lv lw lx ly gt nf ng nh ni aw nj bi"><span id="6ad2" class="nk kh iq ng b gy nl nm l nn no">apply from: "../../node_modules/react-native-vector-icons/fonts.gradle"</span></pre><p id="1b7e" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">来源:<a class="ae oh" href="https://github.com/GeekyAnts/NativeBase/issues/2806" rel="noopener ugc nofollow" target="_blank">https://github.com/GeekyAnts/NativeBase/issues/2806</a></p><p id="5423" class="pw-post-body-paragraph ky kz iq la b lb mg jr ld le mh ju lg lh mi lj lk ll mj ln lo lp mk lr ls lt ij bi translated">所以现在看起来是这样的:</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/f3b3eeb8897fb500cdf441c0599732cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*Stg7Cdn_1bJbbEgBE30w7g.png"/></div></figure></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="0b86" class="kg kh iq bd ki kj nw kl km kn nx kp kq jw ny jx ks jz nz ka ku kc oa kd kw kx bi translated">完整代码</h1><div class="oj ok gp gr ol om"><a href="https://github.com/ThomasSwolfs/React-Native-Multi-Select-List" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd ir gy z fp or fr fs os fu fw ip bi translated">Thomas wolfs/React-Native-多选列表</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">在GitHub上创建一个帐户，为Thomas wolfs/React-Native-Multi-Select-List的开发做出贡献。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa me om"/></div></div></a></div></div></div>    
</body>
</html>
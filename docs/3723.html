<html>
<head>
<title>How to use Cookies to Store Secrets in Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Postman中使用Cookies存储秘密</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-cookies-to-store-secrets-in-postman-afa9a666590d?source=collection_archive---------3-----------------------#2020-10-20">https://javascript.plainenglish.io/how-to-use-cookies-to-store-secrets-in-postman-afa9a666590d?source=collection_archive---------3-----------------------#2020-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a5a876f0b9d5e3ea572007a0353a9d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vegGJ_HGePvFXGfy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@starvingartistfoodphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina Branco</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ad92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Postman环境中存储您的秘密(例如，API密钥和密码)可能无法满足您的安全需求。尽管它们是静态存储的，但是每个团队成员都可以明文访问它们。您可以利用Postman cookies作为替代，因为它们对于机器、计算机用户和Postman桌面客户端来说都是本地的。</p><p id="9991" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能会想，“饼干不好。它们也是纯文本。”</p><p id="a203" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没错。是的，但至少它们没有存储在Postman服务器中，每个团队成员都可以访问。</p><p id="580a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://learning.postman.com/docs/writing-scripts/script-references/postman-sandbox-api-reference/#using-external-libraries" rel="noopener ugc nofollow" target="_blank">邮差沙箱</a>支持<a class="ae kc" href="https://www.npmjs.com/package/crypto-js" rel="noopener ugc nofollow" target="_blank"> crypto-js </a>包，你可以用它来增加cookie值的安全性。</p><p id="01ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来探索如何使用邮递员cookie。为了简单起见，我就不做加密了。</p><h2 id="3f93" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建Cookie</h2><p id="0121" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在您的请求中，单击“Cookies”链接。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/c3e817872af32375a61b2a11617ea08e.png" data-original-src="https://miro.medium.com/v2/resize:fit:326/format:webp/1*EMZdGGgX_fh45e3-IOEFWQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The “Cookies” link is below the “Send” button in your request.</figcaption></figure><p id="d7ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将域列入白名单。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/9333e7d6e80d112a9f01f06866587896.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/1*VrBMhxrMZdNS0KbeFNtBQg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">This link is located at the bottom-left of the Cookies dialog.</figcaption></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/5679d64782722b56757f41c668c95527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*bLoNVU4c1rcXxpSvWbsehw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Use a fake domain.</figcaption></figure><p id="8674" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将域添加到您的cookies中。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/1030024da3ac0d1a11387f512a1baf8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKLPtFZUURX2iVQCoctsQw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Add the fake domain to your cookies.</figcaption></figure><p id="44fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加一个cookie。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/1ebe1a6cd5e5f7079c840137eaceb386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*SxMpPyZNkDJdnPWXDahvZA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Add a cookie to the fake domain.</figcaption></figure><p id="fa67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您可以在请求中使用cookie的值。</p><h2 id="0aee" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">使用cookie</h2><p id="8b68" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">使用请求前脚本设置局部变量。局部变量只适用于邮递员<a class="ae kc" href="https://learning.postman.com/docs/sending-requests/variables/#variable-scopes" rel="noopener ugc nofollow" target="_blank">文档</a>的请求。</p><pre class="ma mb mc md gt mi mj mk ml aw mm bi"><span id="bd36" class="lb lc iq mj b gy mn mo l mp mq"><em class="mr">const</em> cookieJar = pm.cookies.jar();</span><span id="578e" class="lb lc iq mj b gy ms mo l mp mq"><em class="mr">const</em> cookieName = "apiKey"</span><span id="1b0e" class="lb lc iq mj b gy ms mo l mp mq">cookieJar.get('my-secrets.com', cookieName, (<em class="mr">error</em>, <em class="mr">cookie</em>) <em class="mr">=&gt;</em> {</span><span id="1bf5" class="lb lc iq mj b gy ms mo l mp mq">  if (error) {</span><span id="d4c8" class="lb lc iq mj b gy ms mo l mp mq"><em class="mr">    console</em>.error(error);</span><span id="dc99" class="lb lc iq mj b gy ms mo l mp mq">    pm.variables.set(cookieName, "error");</span><span id="bbfd" class="lb lc iq mj b gy ms mo l mp mq">  }</span><span id="8a6d" class="lb lc iq mj b gy ms mo l mp mq">  if (cookie) {</span><span id="a032" class="lb lc iq mj b gy ms mo l mp mq">    pm.variables.set(cookieName, cookie);</span><span id="c2d2" class="lb lc iq mj b gy ms mo l mp mq">  } else {</span><span id="3635" class="lb lc iq mj b gy ms mo l mp mq"><em class="mr">    console</em>.error("Cookie is missing")</span><span id="7f49" class="lb lc iq mj b gy ms mo l mp mq">    pm.variables.set(cookieName, "missing");</span><span id="9565" class="lb lc iq mj b gy ms mo l mp mq">  }</span><span id="8847" class="lb lc iq mj b gy ms mo l mp mq">});</span></pre><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/a1da8515d0ea28b244470755a41fc013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*2Vc5ghThlVE8wS3-nhV90g.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The pre-request script code.</figcaption></figure><p id="72c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">照常在请求中使用变量。在这个例子中，我们将在头中使用“apiKey”变量。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/a8122c1f0f42806964901014b7ff4c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*unvf-2EtTg-g9k48h2gS4A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Setting the header using the variable containing the cookie’s value.</figcaption></figure><p id="cad2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了安全起见，请确保清除局部变量。我们将在测试中这样做。</p><pre class="ma mb mc md gt mi mj mk ml aw mm bi"><span id="5b6e" class="lb lc iq mj b gy mn mo l mp mq">// clear just the variable</span><span id="2d21" class="lb lc iq mj b gy ms mo l mp mq">pm.variables.unset("apiKey")</span><span id="d570" class="lb lc iq mj b gy ms mo l mp mq">// or clear all the local variables</span><span id="b069" class="lb lc iq mj b gy ms mo l mp mq">pm.variables.clear()</span></pre><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f95b99b1e30e3dc21c413567a5cb9ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*Fs1jkVGjN5q6dHQfssirJg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Clearing the variable after the request.</figcaption></figure><h2 id="b841" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">结论</h2><p id="444d" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">该方法将允许您在Postman中使用秘密，而无需与世界共享。</p><p id="7dff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阅读第2部分:“如何在Postman中使用CryptoJS和Cookies处理秘密。”</p><div class="mw mx gp gr my mz"><a rel="noopener  ugc nofollow" target="_blank" href="/postman-secrets-cookies-cryptojs-4051db70e8c2"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">如何使用CryptoJS和Cookies在Postman中处理秘密</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">在我之前的文章中，我们探讨了如何在Postman中使用cookies来存储您的秘密。取决于您的安全性…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jw mz"/></div></div></a></div><h1 id="588d" class="no lc iq bd ld np nq nr lg ns nt nu lj nv nw nx lm ny nz oa lp ob oc od ls oe bi translated">作者的笔记</h1><p id="70ea" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">加入我的邮件列表来接收关于我写作的更新。</p><p id="42d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">访问<a class="ae kc" href="https://miguelacallesmba.com/subscribe" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">miguelacallesmba.com/subscribe</strong></a>并报名。</p><p id="30ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保持安全，米格尔</p><h2 id="7329" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">关于作者</h2><p id="968f" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">Miguel是首席安全工程师，也是“<a class="ae kc" href="https://ServerlessSecurityBook.com" rel="noopener ugc nofollow" target="_blank">无服务器安全</a>”一书的作者。作为一名开发人员和安全工程师，他参与了多个无服务器项目，为开源无服务器项目做出了贡献，并以各种工程角色参与了大型军事系统。</p></div></div>    
</body>
</html>
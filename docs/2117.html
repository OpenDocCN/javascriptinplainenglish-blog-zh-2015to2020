<html>
<head>
<title>6 Pure Angular Pipes for Human-Readable UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个纯角度管道，用于人类可读的UI</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-pure-angular-pipes-for-human-readable-ui-c76b4e6fafa1?source=collection_archive---------2-----------------------#2020-05-21">https://javascript.plainenglish.io/6-pure-angular-pipes-for-human-readable-ui-c76b4e6fafa1?source=collection_archive---------2-----------------------#2020-05-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6835" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">定制角形管道，改善用户界面，促进“干”原则，并解决日常任务。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/991993cdb1aacac199d3ad8af4cc3482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EHo4OK8MQONB_SllyblniA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Angular Pipe — The StrawPipe</figcaption></figure><h1 id="6398" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">用于性能和用户界面的角形管道</h1><p id="b7f4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">角形管道是将小的转换应用到UI的有效方式。使用管道让你的应用更加<strong class="lp ir">干巴巴</strong>(不要重复自己)。</p><blockquote class="mj mk ml"><p id="7d87" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">它允许您分离关注点，并将UI转换逻辑从组件逻辑中移出。</p></blockquote><blockquote class="mv"><p id="9e8c" class="mw mx iq bd my mz na nb nc nd ne mi dk translated">纯角度管道是您可以在角度应用程序中采用的许多性能优化策略之一。默认情况下，管道是纯的。</p></blockquote><p id="dc8f" class="pw-post-body-paragraph ln lo iq lp b lq nf jr ls lt ng ju lv lw nh ly lz ma ni mc md me nj mg mh mi ij bi translated">一个角形管道接收一个输入，并通过一个<code class="fe nk nl nm nn b">transform</code>函数将该输入转换成所需的输出。<code class="fe nk nl nm nn b">Pipe</code>类实现了<code class="fe nk nl nm nn b">PipeTransform</code>接口，可以是<strong class="lp ir">纯的或不纯的。</strong></p><h2 id="2fc3" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">纯的</h2><p id="b984" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果管道是纯的，这意味着计算结果被缓存，并且<code class="fe nk nl nm nn b">transform</code>函数仅在输入改变时运行。纯管道的行为类似于记忆化。</p><h2 id="7274" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">肮脏的</h2><p id="e920" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">另一方面，如果管道<strong class="lp ir">不是</strong>纯的，这将意味着管道<code class="fe nk nl nm nn b">transform</code>功能在每个变化检测周期期间运行。如果您的管道具有影响转换结果的内部状态，这将非常有用。</p><blockquote class="mj mk ml"><p id="3ff6" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">重要的是要注意，即使输入值没有变化，具有<code class="fe nk nl nm nn b">pure: false</code>的管道也会在变化检测周期<strong class="lp ir">运行。意识到这种行为导致的性能瓶颈非常重要。</strong></p></blockquote><div class="oa ob gp gr oc od"><a href="https://angular.io/guide/pipes" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">有角的</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">Angular是一个构建移动和桌面web应用程序的平台。加入数百万开发者的社区…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">angular.io</p></div></div></div></a></div><p id="be19" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">让我们开始吧…</p><h1 id="522b" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">1) URL友好字符串——将<code class="fe nk nl nm nn b">string</code>转换成一个slug</h1><h2 id="0cc5" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">ToSlugPipe</h2><p id="df81" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">当实现由于用户输入、类别和其他人类可读数据而生成的动态URL时，您通常会希望通过一个函数来处理字符串，从而生成一个URL安全版本。</p><blockquote class="mv"><p id="7252" class="mw mx iq bd my mz om on oo op oq mi dk translated"><strong class="ak">URL不应该使用下划线、空格或任何其他字符来分隔单词。</strong></p></blockquote><div class="or os ot ou ov od"><a href="https://moz.com/learn/seo/url" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">URL结构[2020 SEO最佳实践]</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">尽可能保持URL的简单、相关、吸引人和准确是获得用户和搜索的关键…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">moz.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kp od"/></div></div></a></div><blockquote class="mj mk ml"><p id="05ed" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">最好这个方法是<strong class="lp ir"> DRY，</strong>以便URL遵循相同的约定。这是弯管的完美用例。</p></blockquote><p id="ecf9" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">管道将一个URL转换成一个slug。它去除了URL中不允许或不相关的任何字符，包括在用作URL路径/段时可能会导致问题的字符串。<code class="fe nk nl nm nn b">toSlug</code>使用正则表达式(Regex)去除不符合URL的字符。</p><p id="12dc" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated"><strong class="lp ir"/><code class="fe nk nl nm nn b"><strong class="lp ir">toSlug</strong></code><strong class="lp ir">做什么简单来说:</strong></p><ul class=""><li id="e264" class="pc pd iq lp b lq mn lt mo lw pe ma pf me pg mi ph pi pj pk bi translated">转换为<strong class="lp ir">小写</strong></li><li id="48c4" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">用<code class="fe nk nl nm nn b">-</code>替换<strong class="lp ir">空格</strong></li><li id="200d" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">替换<strong class="lp ir">特殊</strong>字符</li><li id="9fc7" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">将<strong class="lp ir"> &amp; </strong>替换为<code class="fe nk nl nm nn b">and</code></li><li id="d17b" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">删除所有<strong class="lp ir">非单词</strong>字符</li><li id="b4ff" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">用单个<code class="fe nk nl nm nn b">—</code>替换多个<code class="fe nk nl nm nn b"><strong class="lp ir">--</strong></code></li><li id="7284" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">从<strong class="lp ir">开始</strong>修剪<code class="fe nk nl nm nn b">—</code></li><li id="0530" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">从<strong class="lp ir">端</strong>修剪<code class="fe nk nl nm nn b">—</code></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">ToSlugPipe — Transform string to URL slug</figcaption></figure><h2 id="825f" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated"><strong class="ak">奖励—让您的网址独一无二</strong></h2><p id="19d3" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">可选的<code class="fe nk nl nm nn b">id</code>参数将<strong class="lp ir">将传递的<code class="fe nk nl nm nn b">id</code>值的</strong> <strong class="lp ir">一半</strong>附加到废料的末尾。</p><p id="ef31" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">如果你有机会通过这种转换生成相似或重复的碎片，这是很有用的<strong class="lp ir">。它确保了slugs是唯一的，从而使你的应用程序的URL是唯一的。</strong></p><blockquote class="mv"><p id="2ca7" class="mw mx iq bd my mz om on oo op oq mi dk translated">可以理解的是，通过提高可发现性和相关性，这对SEO有很大的影响。</p></blockquote><p id="3fac" class="pw-post-body-paragraph ln lo iq lp b lq nf jr ls lt ng ju lv lw nh ly lz ma ni mc md me nj mg mh mi ij bi translated"><strong class="lp ir">在一个中等URL中可以看到一个示例输出:</strong><a class="ae ps" href="https://itnext.io/smoother-ux-on-page-load-with-angular-resolvers-e063ef035124" rel="noopener ugc nofollow" target="_blank">https://it next . io/smoother-UX-on-page-load-with-angular-resolvers-e 063 ef 035124</a></p><h1 id="8273" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">2)显示与其值(数字)相关联的枚举键(字符串)</h1><blockquote class="mv"><p id="49d5" class="mw mx iq bd my mz om on oo op oq mi dk translated">对于检索要在UI中显示的类别名称非常有用。</p></blockquote><h2 id="e5a6" class="no kw iq bd kx np pt dn lb nr pu dp lf lw pv nu lh ma pw nw lj me px ny ll nz bi translated">CategoryAsStringPipe</h2><p id="82dd" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><code class="fe nk nl nm nn b">CategoryAsString</code>管道获取TypeScript <strong class="lp ir"> enum </strong> <code class="fe nk nl nm nn b">Category</code>并检索与enum值相关联的键。</p><p id="2d20" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">如果你已经在你的应用中为类别使用了一个<strong class="lp ir">枚举</strong>，这是很有用的。这个管道允许您将枚举值作为一个<code class="fe nk nl nm nn b">number</code>(类别类型)传递给它，它返回与它关联的<strong class="lp ir">标签</strong>，标签的类型为<code class="fe nk nl nm nn b">string</code>。</p><blockquote class="mj mk ml"><p id="2582" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">这节省了大量重复的代码，因为没有这个管道，您必须将<code class="fe nk nl nm nn b">Category</code>导入到在HTML模板中显示<code class="fe nk nl nm nn b">Category</code>名称的每个组件中</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">CategoryAsStringPipe — Get enum key from the value</figcaption></figure><p id="32a3" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">例如，<code class="fe nk nl nm nn b">Category</code>枚举可能看起来像…</p><pre class="kg kh ki kj gt py nn pz qa aw qb bi"><span id="b49f" class="no kw iq nn b gy qc qd l qe qf">enum Category {</span><span id="ed27" class="no kw iq nn b gy qg qd l qe qf">    All = 0<br/>    Fitness // 1<br/>    Music // 2<br/>    Entertainment // 3<br/>    ...</span><span id="c8fa" class="no kw iq nn b gy qg qd l qe qf"><br/>}</span></pre><p id="1ce5" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">有了这个枚举，如果你通过了类别<code class="fe nk nl nm nn b">Music</code>比如…</p><pre class="kg kh ki kj gt py nn pz qa aw qb bi"><span id="f647" class="no kw iq nn b gy qc qd l qe qf">{{ <!-- -->Category.Music | categoryAsString }}</span></pre><p id="57c0" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">或者更真实地来自真实数据…</p><pre class="kg kh ki kj gt py nn pz qa aw qb bi"><span id="95dc" class="no kw iq nn b gy qc qd l qe qf">{{item.category | categoryAsString}}</span></pre><p id="ebbc" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">它将返回<strong class="lp ir">字符串</strong> <code class="fe nk nl nm nn b">Music</code></p><h2 id="fa1b" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">奖励—在URL中使用类别关键字</h2><p id="601c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">使类别URL符合<code class="fe nk nl nm nn b">toSlug</code>管道。</p><p id="70b0" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">在这里，我们使用<code class="fe nk nl nm nn b">categoryAsString</code>管道将<code class="fe nk nl nm nn b">number</code>类型的类别转换为<code class="fe nk nl nm nn b">string</code>键，然后使用<code class="fe nk nl nm nn b">toSlug</code>将结果转换为slug。</p><p id="0c5a" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">这将产生<code class="fe nk nl nm nn b">sports-fitness</code>而不是<code class="fe nk nl nm nn b">Sports and Fitness</code>。更加URL友好。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Category To Slug — URL compliant categories</figcaption></figure><h1 id="5c9c" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">3)用省略号截断溢出的文本</h1><h2 id="3f0d" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">椭圆形</h2><p id="efe6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">有时，您会有溢出的文本，您正在努力防止溢出。也许你想严格控制从一个<code class="fe nk nl nm nn b">string</code>显示的字符数。或者你可能只想展示一定数量的角色作为<strong class="lp ir">预告片。</strong></p><p id="35ee" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">无论您的具体使用情况如何，<code class="fe nk nl nm nn b">ellipsis</code>管道会将<code class="fe nk nl nm nn b">string</code>修剪成不超过预定义最大长度的字符串。最大长度作为参数传递给转换函数。</p><p id="666f" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">当接收到比最大长度更长的字符串时，它会在末尾追加一个<code class="fe nk nl nm nn b">...</code>。如果不是，那么它返回未修改的<code class="fe nk nl nm nn b">string</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">EllipsisPipe — Truncate Text With Ellipsis</figcaption></figure><p id="1ede" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">要使用这个，你<strong class="lp ir">提供一个数字给<code class="fe nk nl nm nn b">ellipsis</code>管道的最大参数</strong>。生成的用户简介不会超过50个字符+ <code class="fe nk nl nm nn b">...</code>。</p><blockquote class="mj mk ml"><p id="ca1f" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">如果该值不长于最大值，则不会发生省略号。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Ellipsis Use Case — HTML</figcaption></figure><h2 id="2e8b" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated"><strong class="ak">奖励——提供一个动态参数来代替省略号</strong></h2><p id="d60f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">这允许你添加一个<strong class="lp ir">定制的动态替换</strong>到削减的<code class="fe nk nl nm nn b">string</code>。</p><p id="74c9" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">原来<code class="fe nk nl nm nn b">ellipsis</code>管道的区别是<strong class="lp ir">可选</strong> <code class="fe nk nl nm nn b"><strong class="lp ir">append</strong></code> <strong class="lp ir">自变量。</strong>参数<code class="fe nk nl nm nn b">append</code>有一个默认值，即省略符号<code class="fe nk nl nm nn b">...</code>。</p><p id="1c35" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">让我们给它起一个更合适的名字:<strong class="lp ir"> TruncatePipe </strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">TruncatePipe — Truncate Text</figcaption></figure><p id="26ce" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">要使用这个，你需要<strong class="lp ir">提供你自己的</strong> <code class="fe nk nl nm nn b"><strong class="lp ir">string</strong></code> <strong class="lp ir">来附加你想要的，而不是</strong> <code class="fe nk nl nm nn b"><strong class="lp ir">...</strong></code> <strong class="lp ir">作为右边的第二个参数。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Truncate Use Case — HTML</figcaption></figure><p id="4a26" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">这使得我们省略管道更加“干燥”(不要重复)，因为所有的截断都可以由一个管道来处理。</p><h1 id="563e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">4)将一个数(1)转换成它的等效值(1st)</h1><h2 id="9171" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">普通吸管</h2><p id="6f86" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">当基于数字数据创建动态<strong class="lp ir">摘要</strong>、<strong class="lp ir">描述</strong>和<strong class="lp ir">标签</strong>时，您必须将数字转换为人类可读的文本。</p><p id="4de3" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">这通常需要复杂的代码来将统计数据转换成更可读的形式，<strong class="lp ir">一种更少机器人化、更人性化的形式</strong>。</p><p id="c1ce" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated"><strong class="lp ir">根据数据和图表自动生成报告</strong>是常见的做法，需要这种格式。</p><p id="fed5" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">此外，<strong class="lp ir">自动化交易电子邮件</strong>需要将数据转换成人类可读的形式。</p><p id="0348" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated"><strong class="lp ir">例如:</strong></p><blockquote class="mj mk ml"><p id="2811" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">“你刚刚雇佣了第32名员工”</p></blockquote><p id="be69" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">听起来比...</p><blockquote class="mj mk ml"><p id="07e9" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">“你刚刚雇佣了32号员工”或“你刚刚雇佣了32号员工”</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">OrdinalSuffix — Convert Number to Ordinal</figcaption></figure><p id="ce77" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">使用<code class="fe nk nl nm nn b">ordinalSuffix</code> …</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">OrdinalSuffix Use Case — HTML</figcaption></figure><h1 id="79f7" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">5)截止时间—(天、月、小时、SECS)直到某个日期</h1><h2 id="d29d" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">时间管道</h2><p id="34f0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><strong class="lp ir">依赖关系:</strong></p><ul class=""><li id="f5da" class="pc pd iq lp b lq mn lt mo lw pe ma pf me pg mi ph pi pj pk bi translated">日期-fns</li></ul><div class="oa ob gp gr oc od"><a href="https://date-fns.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">现代JavaScript日期实用程序库</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">date-fns提供了最全面、最简单、最一致的工具集，用于在</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">date-fns.org</p></div></div><div class="ow l"><div class="qh l oy oz pa ow pb kp od"/></div></div></a></div><p id="3d27" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">这个管道接受两个日期(<strong class="lp ir">一个是今天的日期</strong>)，并以人类可读的形式返回它们之间的差异。</p><p id="59c9" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">您需要从<strong class="lp ir"> date-fns、</strong>导入<code class="fe nk nl nm nn b">formatDistanceToNow</code>，这将是完成大部分格式化工作的函数。</p><p id="7820" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">它采用了一个<code class="fe nk nl nm nn b"><strong class="lp ir">options</strong></code>参数，我们可以在这里指定是否要在返回值中包含秒。</p><blockquote class="mj mk ml"><p id="27ff" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">可用的选项有<code class="fe nk nl nm nn b">includeSeconds</code>、<code class="fe nk nl nm nn b">locale</code>和<code class="fe nk nl nm nn b">addSuffix</code>。</p></blockquote><blockquote class="mv"><p id="002f" class="mw mx iq bd my mz na nb nc nd ne mi dk translated">为了使用这个管道，您只需要提供未来的日期…date——DNS处理开始日期(现在是日期时间)</p></blockquote><figure class="or os ot ou ov kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">TimeUntilPipe — Get time until a future date</figcaption></figure><p id="5a32" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">如果您有需要显示的功能，这个管道特别有用:</p><ul class=""><li id="d271" class="pc pd iq lp b lq mn lt mo lw pe ma pf me pg mi ph pi pj pk bi translated">离<strong class="lp ir">事件开始还有多长时间</strong></li><li id="6522" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">离你<strong class="lp ir">开始工作还有多长时间</strong></li></ul><blockquote class="mj mk ml"><p id="ec01" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">它本质上是一个<strong class="lp ir">倒计时。</strong></p></blockquote><p id="cc23" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">你可以像这样使用它…</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">TimeUntil — Use Case</figcaption></figure><h1 id="cde2" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">6)花费的时间/差异—两个日期之间的差异</h1><h2 id="599b" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">数据差异管道</h2><p id="caaa" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">与前面的管道<code class="fe nk nl nm nn b">timeUntil</code>类似，这个管道<strong class="lp ir">将两个日期作为输入，并以人类可读的格式返回两者之间的差异</strong>。</p><blockquote class="mv"><p id="c462" class="mw mx iq bd my mz om on oo op oq mi dk translated">如果您想要显示开始日期和结束日期之间的时间，这个管道非常有用。</p></blockquote><p id="e10a" class="pw-post-body-paragraph ln lo iq lp b lq nf jr ls lt ng ju lv lw nh ly lz ma ni mc md me nj mg mh mi ij bi translated">示例输出:<code class="fe nk nl nm nn b">23 hrs 59 mins 30 secs</code></p><p id="81c9" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">诸如<strong class="lp ir">行程时间或两个目的地之间的行程时间</strong>的功能。</p><blockquote class="mj mk ml"><p id="8a4f" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">我们将使用另一个<strong class="lp ir"> date-fns函数</strong>来检索人类可读的(天、小时、分钟、SECS)差异。</p></blockquote><p id="73bf" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated"><strong class="lp ir">这根管子有两个部分:</strong></p><ul class=""><li id="5140" class="pc pd iq lp b lq mn lt mo lw pe ma pf me pg mi ph pi pj pk bi translated">将<code class="fe nk nl nm nn b">fromDate</code>和<code class="fe nk nl nm nn b">toDate</code>作为参数传递给<code class="fe nk nl nm nn b">transform()</code>函数。</li><li id="8a85" class="pc pd iq lp b lq pl lt pm lw pn ma po me pp mi ph pi pj pk bi translated">然后，<code class="fe nk nl nm nn b">formatDistance()</code>函数返回两者之间的差，<strong class="lp ir"> PLUS将差格式化为人类可读的</strong> <code class="fe nk nl nm nn b"><strong class="lp ir">string</strong></code> <strong class="lp ir">。</strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">DateDiffPipe — Time Difference in hours, minutes, seconds</figcaption></figure><p id="1589" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">使用它就像将<code class="fe nk nl nm nn b">fromDate</code>作为第二个参数<strong class="lp ir">(右边的参数)传递一样简单。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">DateDiff Use Case — HTML</figcaption></figure><h2 id="1eb5" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">奖金-获得严格模式的差异</h2><p id="6a7b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">使用与<code class="fe nk nl nm nn b">dateDiff</code>相同的逻辑，您可以在我们的<code class="fe nk nl nm nn b">transform()</code>函数中从date-fns调用<code class="fe nk nl nm nn b">formatDistanceStrict()</code>函数。</p><p id="ece9" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated"><strong class="lp ir">这将改变返回的差异字符串中使用的语言</strong>。<code class="fe nk nl nm nn b">formatDistance</code>和<code class="fe nk nl nm nn b">formatDistanceStrict</code>函数的区别在于，后面的<strong class="lp ir">函数不会使用‘大约5个月’之类的近似语言。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">DateDiff Strict</figcaption></figure><p id="01dd" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">你也可以强制一个单位，如<strong class="lp ir">选项</strong>参数中的<code class="fe nk nl nm nn b">’second’ | ‘minute’ | ‘hour’ | ‘day’ | ‘month’ | ‘year’</code>。</p><blockquote class="mj mk ml"><p id="a6d1" class="ln lo mm lp b lq mn jr ls lt mo ju lv mp mq ly lz mr ms mc md mt mu mg mh mi ij bi translated">注:<strong class="lp ir">还有一个严格版的</strong> <code class="fe nk nl nm nn b"><strong class="lp ir"><em class="iq">formatDistanceToNow</em></strong></code> <strong class="lp ir">函数</strong>叫做<code class="fe nk nl nm nn b"><em class="iq">formatDistanceToNowStrict</em></code>。因此您可以在我们的<code class="fe nk nl nm nn b"><em class="iq">timeUntil</em></code>管道中实现严格模式。</p></blockquote><p id="dec0" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">要使用它，您只需为<code class="fe nk nl nm nn b">strict</code>参数提供一个<code class="fe nk nl nm nn b">true</code>值来启用严格模式。</p><h2 id="1e13" class="no kw iq bd kx np nq dn lb nr ns dp lf lw nt nu lh ma nv nw lj me nx ny ll nz bi translated">就这样……我们现在有了6个更有用的管道，让我们的开发生活变得更简单了。</h2><blockquote class="mv"><p id="533f" class="mw mx iq bd my mz om on oo op oq mi dk translated">感谢阅读！</p><p id="8331" class="mw mx iq bd my mz om on oo op oq mi dk translated">有什么问题吗？请在评论中告诉我。</p></blockquote><div class="or os ot ou ov od"><a href="https://www.npmjs.com/package/date-fns" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">日期-fns</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">现代JavaScript日期实用程序库</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.npmjs.com</p></div></div><div class="ow l"><div class="qi l oy oz pa ow pb kp od"/></div></div></a></div><h1 id="c055" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">简明英语团队的笔记</strong></h1><p id="35c2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae ps" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="lp ir">JavaScript in Plain English</strong></a><a class="ae ps" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="lp ir">AI in Plain English</strong></a><a class="ae ps" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="lp ir">UX in Plain English</strong></a><a class="ae ps" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="lp ir">Python in Plain English</strong></a><strong class="lp ir"/>—谢谢，继续学习！</p><p id="7525" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">我们还推出了一个YouTube，希望你能通过<a class="ae ps" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir">订阅我们的简明英语频道</strong> </a>来支持我们</p><p id="995f" class="pw-post-body-paragraph ln lo iq lp b lq mn jr ls lt mo ju lv lw mq ly lz ma ms mc md me mu mg mh mi ij bi translated">一如既往,“简明英语”希望帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae ps" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir">submissions @ plain English . io</strong></a><strong class="lp ir"/>，并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
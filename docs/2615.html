<html>
<head>
<title>Common Vue Problems — Scoped CSS, Computed Properties and Watchers, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见的Vue问题——作用域CSS、计算属性和观察器等等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/common-vue-problems-scoped-css-computed-properties-and-watchers-and-more-e1f700c75a62?source=collection_archive---------6-----------------------#2020-07-09">https://javascript.plainenglish.io/common-vue-problems-scoped-css-computed-properties-and-watchers-and-more-e1f700c75a62?source=collection_archive---------6-----------------------#2020-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ea191f608e4dbfbe798a05b08895d5aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RyMtzAWWMrvRKmPN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@agebarros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Agê Barros</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2c3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js让开发前端应用变得简单。然而，我们仍有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看一些常见的问题，并看看如何解决它们。</p><h1 id="a251" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">范围引导CSS</h1><p id="381f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过将引导CSS和<code class="fe me mf mg mh b">scoped</code>属性一起包含在<code class="fe me mf mg mh b">style</code>标签的深度选择器中来确定它们的范围。</p><p id="daeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1fa7" class="mq lc iq mh b gy mr ms l mt mu">&lt;style scoped lang="scss"&gt;<br/>.main-wrapper /deep/ {<br/>  @import "~bootstrap/dist/css/bootstrap.min";<br/>}<br/>&lt;/style&gt;</span></pre><p id="f3ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将作用域CSS放在一个包装器中，这样作用域CSS样式就不会传播到父类。</p><p id="24a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为它被限制在包含类<code class="fe me mf mg mh b">main-wrapper</code>及其子类的元素中。</p><h1 id="a816" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">构建相对路径</h1><p id="5a7c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果资产位于与托管资产的域不同的域中，那么我们需要使用绝对URL而不是相对URL。</p><h1 id="aac2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Vue.extend的目的</h1><p id="4fbe" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Vue.extend</code>用于创建<code class="fe me mf mg mh b">Vue</code>的子类，并返回我们添加的额外内容的构造函数。</p><p id="aa0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Vue.component</code>用于关联带有字符串ID的给定构造函数，这样Vue可以在模板中选择它们。</p><p id="6760" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们可以在模板中添加任何内容。</p><p id="7f9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">Vue.directive</code>和<code class="fe me mf mg mh b">Vue.filter</code>做同样的事情。</p><p id="ca35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Vue.component</code>用于创建和注册新组件。</p><p id="d619" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Vue.directive</code>用于创建和注册新指令。</p><p id="613c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Vue.filter</code>用于创建和注册一个新的过滤器。</p><h1 id="7d66" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">计算属性和观察器之间的差异</h1><p id="ccb6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">计算属性用于创建从另一个属性派生的属性。</p><p id="31b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">依赖项由反应性属性组成，如数据属性和其他计算属性。</p><p id="d092" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算的属性在getter中不能有参数，但是在setter中可以有新值作为参数。</p><p id="f0b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a811" class="mq lc iq mh b gy mr ms l mt mu">computed: {<br/>  totalPrice() {<br/>    return this.price * this.quantity;<br/>  }<br/>}</span></pre><p id="31a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们还可以在计算属性中使用getters和setters:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4084" class="mq lc iq mh b gy mr ms l mt mu">// ...<br/>computed: {<br/>  fullName: {<br/>    get() {<br/>      return `${this.firstName} ${this.lastName}`;<br/>    },<br/><br/>    set(newValue) {<br/>      var names = newValue.split(' ')<br/>      this.firstName = names[0]<br/>      this.lastName = names[names.length - 1]<br/>    }<br/>  }<br/>}<br/>// ...</span></pre><p id="f5ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个用<code class="fe me mf mg mh b">fullName</code>的<code class="fe me mf mg mh b">get</code>方法编写的getter。</p><p id="49f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个使用<code class="fe me mf mg mh b">fullName</code>的<code class="fe me mf mg mh b">set</code>方法的setter。</p><p id="4557" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参数是<code class="fe me mf mg mh b">newValue</code>，它有我们想要设置为<code class="fe me mf mg mh b">fullName</code>新值的值。</p><p id="ac79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">观察器的不同之处在于，我们可以用它来观察一个反应性属性，并基于它执行一个动作。</p><p id="8a04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以用来产生副作用。</p><p id="3642" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b438" class="mq lc iq mh b gy mr ms l mt mu">watch: {<br/>  somethingSelected() {<br/>    this.router.push('someOtherRoute')<br/>  }<br/>}</span></pre><p id="afa5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以像上面所做的那样，在事情发生变化时使用观察器来调用方法。</p><p id="c895" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以监听嵌套属性，将<code class="fe me mf mg mh b">deep</code>属性设置为<code class="fe me mf mg mh b">true</code>。</p><h1 id="dcae" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将数字输入转换为数值</h1><p id="bcfa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">number</code>修饰符将输入的值自动转换成数字。</p><p id="cbaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="de0a" class="mq lc iq mh b gy mr ms l mt mu">&lt;input v-model.number="value" type="number"&gt;</span></pre><p id="5223" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">value</code>将是一个数字而不是一个字符串，因为在<code class="fe me mf mg mh b">v-model</code>指令后有<code class="fe me mf mg mh b">number</code>修饰符。</p><h1 id="c07f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在车身上安装Vue应用程序</h1><p id="1f3c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在body元素上安装Vue实例，</p><p id="19ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们这样做，Vue会给我们一个错误。</p><h1 id="2b0d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">引导模式隐藏事件</h1><p id="b3cd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加一个对模态的引用，然后用它来监听<code class="fe me mf mg mh b">hidden.bs.modal</code>事件。</p><p id="7e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e03c" class="mq lc iq mh b gy mr ms l mt mu">new Vue({<br/>  el:"#app",<br/>  data:{<br/>  },<br/>  methods:{<br/>    onHidden(){<br/>      //do something<br/>    }<br/>  },<br/>  mounted(){<br/>    $(this.$refs.vuemodal).on("hidden.bs.modal", this.onHidden)<br/>  }<br/>})</span></pre><p id="be63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">$(this.$refs.vuemodal</code>获得引导模式的DOM元素。</p><p id="9fa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以从jQuery调用<code class="fe me mf mg mh b">on</code>方法来监听<code class="fe me mf mg mh b">hidden.nbs.modal</code>事件，以运行<code class="fe me mf mg mh b">this.onHidden</code>方法来执行模态关闭操作。</p><h1 id="0b41" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">未捕获的引用错误:在index.html没有定义Vue</h1><p id="2869" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们没有定义Vue，那么我们可能忘记在HTML文件中包含Vue。</p><p id="0b85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该通过编写以下内容来确保我们有一个Vue的脚本标签:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a6e9" class="mq lc iq mh b gy mr ms l mt mu">&lt;script src="https://unpkg.com/vue@2.4.2"&gt;&lt;/script&gt;</span></pre><p id="d183" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在这个加载之后使用Vue，这意味着Vue代码应该在这个脚本标签之后。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/b6525f69a65dc639ee63106f5818fc50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2u7kmA5YG9BxPNxV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@handywicaksono?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Handy Wicaksono</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e8f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a4a8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们将引导CSS包含在选择器中，</p><p id="9b2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要将输入的值自动转换成数字，我们可以使用<code class="fe me mf mg mh b">v-model</code>上的<code class="fe me mf mg mh b">number</code>修饰符。</p><p id="40d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算属性和观察器之间有很大的区别。</p><h2 id="8b40" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="a117" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Lesser-known features of React-Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React路由器鲜为人知的特性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lesser-known-features-of-react-router-28319fd30965?source=collection_archive---------6-----------------------#2020-06-04">https://javascript.plainenglish.io/lesser-known-features-of-react-router-28319fd30965?source=collection_archive---------6-----------------------#2020-06-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="373b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">#2内存路由器</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3a8369d8959acff1220c345b4fd74f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWdAgyGFRfizRLVlwC8hbg.png"/></div></div></figure><p id="d320" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React-router是React中使用最多的路由库之一。它方便了web (React.js)和mobile (React Native)的路由和导航，因此我们可以依靠一个单一的解决方案来满足React生态系统中的所有导航需求。然而，我们中的大多数人，尤其是React的初学者，经常坚持React-Router的基础知识，而不知道它提供的一些其他功能。本文介绍了React路由器的一些较少讨论的特性。对这些有一个公平的理解可能会在你的React开发者之旅中派上用场。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="b69a" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">01.提示</h1><p id="3d72" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">当用户在我们的web应用程序中填写长/多步表单时，他/她可能会意外关闭浏览器选项卡。这可能导致用户不得不重新开始漫长、单调的表单填写。如果我们可以在用户将要关闭标签页时警告他们，会怎么样？有了React-Router的<code class="fe mr ms mt mu b">Prompt</code>组件就没那么难了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Usage of the Prompt Component of React-Router</figcaption></figure><p id="63e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码片段中，只有当表单没有完成并且用户关闭选项卡时，<code class="fe mr ms mt mu b">Prompt</code>才会出现。这可以防止我们的用户意外关闭网页并丢失未保存的进度。</p><h1 id="b167" class="lu lv iq bd lw lx nb lz ma mb nc md me jw nd jx mg jz ne ka mi kc nf kd mk ml bi translated">02.内存路由器</h1><p id="0b23" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">您是否曾经遇到过我们希望在非浏览器环境中保留路由历史的情况(例如，React Native)？也有一些情况下，我们只需要模拟导航，比如在测试中。<code class="fe mr ms mt mu b">MemoryRouter</code>是React-Router在这种情况下的解决方案。它接受一组路由，您可以通过编程来处理有关路由器的所有事情，这样您就可以完全控制您定义的路由器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">MemoryRouter of React Router in a testing environment</figcaption></figure><p id="aadc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码片段展示了如何在测试中使用<code class="fe mr ms mt mu b">MemoryRouter</code>。这里，我们检查<code class="fe mr ms mt mu b">Home</code>组件是否为<code class="fe mr ms mt mu b"> /</code>路线渲染。在这种情况下，我们只需要模拟导航，而<code class="fe mr ms mt mu b">MemoryRouter</code>就是这样的工具。</p><h1 id="c476" class="lu lv iq bd lw lx nb lz ma mb nc md me jw nd jx mg jz ne ka mi kc nf kd mk ml bi translated">03.静态路由器</h1><p id="31fc" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在React服务器端渲染中，React应用程序请求的内容首先在服务器上编译，然后发送到客户端。在这种情况下，我们既不能使用<code class="fe mr ms mt mu b">BrowserRouter</code>也不能使用<code class="fe mr ms mt mu b">HashRouter</code>，因为它们只在浏览器环境下工作。因此，我们需要在服务器端用相应的内容来映射路线。React-Router的<code class="fe mr ms mt mu b">StaticRouter</code>可以为我们解决这个问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Using StaticRouter in Node.js/Express.js server</figcaption></figure><p id="fce6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">静态路由器接受一个<code class="fe mr ms mt mu b">route</code> prop，使用它来确定要提供的相应内容。还有一个<code class="fe mr ms mt mu b">context</code>属性，可用于将附加数据传递给呈现组件。React-Router仅在呈现的组件内发生重定向时将一个<code class="fe mr ms mt mu b">url</code>属性插入到<code class="fe mr ms mt mu b">context</code>对象中。除此之外，你可以完全控制<code class="fe mr ms mt mu b">context</code>对象，这样你就可以给它添加你自己的属性。这就是我们如何在React中的服务器端渲染中处理路由。</p><h1 id="5c5a" class="lu lv iq bd lw lx nb lz ma mb nc md me jw nd jx mg jz ne ka mi kc nf kd mk ml bi translated">04.生成路径</h1><p id="8eb7" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">有时，您希望根据特定条件在几个不同的URL之间切换同一个链接的目的地。React-Router的<code class="fe mr ms mt mu b">generatePath</code>功能使基于不同标准的不同URL之间的切换变得简单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">generatePath example</figcaption></figure><p id="d610" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码中，你可以看到随着<code class="fe mr ms mt mu b">isPosts</code>的改变，<code class="fe mr ms mt mu b">url</code>变量的值在<code class="fe mr ms mt mu b">users/:id/comments</code>和<code class="fe mr ms mt mu b">users/:id/posts , </code>之间切换。考虑到状态变量<code class="fe mr ms mt mu b">isPosts</code>的值，<code class="fe mr ms mt mu b">generatePath</code>产生相应的URL。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><p id="eeab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们讨论了React-Router库的一些不太常见的特性。我期待着阅读您深思熟虑的建议和反馈。</p><p id="aa34" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保持安全，感谢阅读💖</p><p id="e6fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">资源:</strong></p><div class="ng nh gp gr ni nj"><a href="https://reacttraining.com/react-router/web/guides/quick-start" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">React路由器:React的声明式路由</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">学习一次，路由到任何地方</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">reacttraining.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><h2 id="58ba" class="ny lv iq bd lw nz oa dn ma ob oc dp me la od oe mg le of og mi li oh oi mk oj bi translated">简单英语的JavaScript</h2><p id="a784" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">通过<a class="ae ok" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">订阅我们的YouTube频道</strong> </a> <strong class="kt ir">来表达爱意吧！</strong></p></div></div>    
</body>
</html>
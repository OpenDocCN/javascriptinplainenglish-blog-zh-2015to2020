<html>
<head>
<title>How to Use Axios in Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在普通JavaScript中使用Axios</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-axios-in-vanilla-javascript-2dbf176e08d4?source=collection_archive---------0-----------------------#2020-12-09">https://javascript.plainenglish.io/how-to-use-axios-in-vanilla-javascript-2dbf176e08d4?source=collection_archive---------0-----------------------#2020-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6756" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过实例了解Axios</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a0ba92a72566b15c619aee289816d77c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-_tD9m_jNPNnohhUjJD3g.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created with ❤️️ By author.</figcaption></figure><h1 id="7d13" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">介绍</h1><p id="1128" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Axios是一个基于promise的HTTP客户端，可以在浏览器和NodeJS环境中工作。它提供了一个API来处理XMLHttpRequests和节点的HTTP接口。Axios类似于fetch API，它可以用在普通JavaScript中，也可以用在React、Angular和Vue等现代JavaScript框架中。</p><p id="5b73" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在本文中，我们将了解如何在普通JavaScript中使用Axios。让我们开始吧。</p><h1 id="eb7f" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">装置</h1><p id="6cf8" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在安装任何东西之前，创建一个包含两个文件的项目文件夹:<code class="fe mo mp mq mr b">index.html</code>和<code class="fe mo mp mq mr b">index.js</code>文件。</p><p id="1271" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在该项目文件夹中，您可以使用节点包管理器(NPM)安装Axios，或者只使用链接了JavaScript文件的HTML文件上的CDN。</p><p id="0a78" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果您喜欢使用节点程序包管理器，请在终端中运行以下命令:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="193b" class="mw kw iq mr b gy mx my l mz na">// Install axios<br/>  <!-- --> <strong class="mr ir">npm i axios -S</strong></span></pre><p id="5ad7" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">它会将库下载到<code class="fe mo mp mq mr b">node_modules</code>文件夹中，您可以将它添加到您的项目中:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="95c2" class="mw kw iq mr b gy mx my l mz na">&lt;script src="./node_modules/axios/dist/axios.min.js"&gt;&lt;/script&gt;</span></pre><p id="5653" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如果你想快速完成，你可以直接使用HTML格式的CDN。</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="5958" class="mw kw iq mr b gy mx my l mz na">&lt;script src="https://unpkg.com/axios/dist/axios.min.js"&gt;&lt;/script&gt;</span></pre><h1 id="3621" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">使用Axios从API获取数据</h1><p id="c85d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在您的项目文件夹中安装Axios之后，您可以使用它来执行一些get请求。我们将使用<a class="ae nb" href="http://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSONplaceholder </a>从他们的API中获取假数据。</p><p id="c316" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们打开我们的<code class="fe mo mp mq mr b">index.js</code>文件，创建一个使用Axios在控制台中打印一些用户信息的函数。</p><p id="eb12" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">看看下面的例子:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="8cb3" class="mw kw iq mr b gy mx my l mz na">const getUsers = () =&gt; {</span><span id="73bf" class="mw kw iq mr b gy nc my l mz na"> <strong class="mr ir">axios.get('https://reqres.in/api/users')</strong></span><span id="1c12" class="mw kw iq mr b gy nc my l mz na"> .then(response =&gt; {</span><span id="814c" class="mw kw iq mr b gy nc my l mz na">  const users = response.data.<strong class="mr ir">data</strong>;</span><span id="117d" class="mw kw iq mr b gy nc my l mz na">  console.log(`GET users`, users);</span><span id="ca1c" class="mw kw iq mr b gy nc my l mz na">})<br/> .catch(error =&gt; console.error(error));<br/>};</span><span id="54f8" class="mw kw iq mr b gy nc my l mz na">getUsers();</span></pre><p id="ff54" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如您所见，由于Axios是一个基于promise的HTTP客户端，我们使用<code class="fe mo mp mq mr b">then()</code>和<code class="fe mo mp mq mr b">catch()</code>方法来处理结果。</p><p id="bd7d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">当承诺成功解决，你将获得一个对象<code class="fe mo mp mq mr b">response</code>回来。这个对象有关于响应的信息，例如<code class="fe mo mp mq mr b">headers</code>、<code class="fe mo mp mq mr b">data</code>、<code class="fe mo mp mq mr b">config</code>、<code class="fe mo mp mq mr b">status</code>，甚至完成<code class="fe mo mp mq mr b">request</code>对象。在我们的例子中，我们使用<code class="fe mo mp mq mr b">data</code>来访问控制台中的用户信息。</p><p id="fa0d" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">以下是控制台结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/00807057fbd791900ecc04460d905c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*xpPI5INGBOsyFcmSKtBoPw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The console results.</figcaption></figure><p id="f97e" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在，您可以使用DOM轻松地在页面上显示这些信息。</p><h1 id="fdff" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">发布请求</h1><p id="0f4e" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们可以用<code class="fe mo mp mq mr b">axios.post()</code>方法向REST API添加一个新用户。只需在<code class="fe mo mp mq mr b">index.js</code>内添加一个新功能<code class="fe mo mp mq mr b">createUser()</code>。</p><p id="272c" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里有一个例子:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="50d4" class="mw kw iq mr b gy mx my l mz na">const createUser = (user) =&gt; {</span><span id="3560" class="mw kw iq mr b gy nc my l mz na"> <strong class="mr ir">axios.post('https://reqres.in/api/users', user)</strong></span><span id="d443" class="mw kw iq mr b gy nc my l mz na"> .then(response =&gt; {</span><span id="5e94" class="mw kw iq mr b gy nc my l mz na"> const addedUser = response.data;</span><span id="86b4" class="mw kw iq mr b gy nc my l mz na"> console.log(`POST: user is added`, addedUser);</span><span id="3ca9" class="mw kw iq mr b gy nc my l mz na">// append to DOM<br/> appendToDOM([addedUser]);<br/> })<br/> .catch(error =&gt; console.error(error));<br/>};</span></pre><p id="c895" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">要创建一个新用户，您需要在<code class="fe mo mp mq mr b">index.html</code>文件中添加一个<code class="fe mo mp mq mr b">&lt;form&gt;</code>来捕获用户信息。</p><h1 id="1916" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">删除请求</h1><p id="2872" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Axios提供了<code class="fe mo mp mq mr b">axios.delete()</code>方法来发出删除请求。</p><p id="5120" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">这里有一个例子:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="6b0f" class="mw kw iq mr b gy mx my l mz na">const deleteUser = (elem, id) =&gt; {</span><span id="19c8" class="mw kw iq mr b gy nc my l mz na"><strong class="mr ir">axios.delete(`https://reqres.in/api/users/${id}`)</strong></span><span id="b139" class="mw kw iq mr b gy nc my l mz na">.then(response =&gt; {<br/>console.log(`DELETE: user is removed`, id);</span><span id="6bd9" class="mw kw iq mr b gy nc my l mz na">// remove elem from DOM<br/>elem.remove();<br/>})<br/>.catch(error =&gt; console.error(error));</span><span id="28cd" class="mw kw iq mr b gy nc my l mz na">};</span></pre><p id="205f" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">现在更新<code class="fe mo mp mq mr b">createLi()</code>方法以附加一个事件<code class="fe mo mp mq mr b">onclick</code>，该事件处理用户被点击时的移除:</p><pre class="kg kh ki kj gt ms mr mt mu aw mv bi"><span id="ef43" class="mw kw iq mr b gy mx my l mz na">const createLi = (user) =&gt; {</span><span id="2f45" class="mw kw iq mr b gy nc my l mz na">const li = document.createElement('li');</span><span id="acad" class="mw kw iq mr b gy nc my l mz na">// add user details to `li`<br/>li.textContent = `${user.id}: ${user.first_name} ${user.last_name}`;</span><span id="b83a" class="mw kw iq mr b gy nc my l mz na">// attach onclick event<br/>li.onclick = e =&gt; deleteUser(li, user.id);</span><span id="c8bb" class="mw kw iq mr b gy nc my l mz na">return li;</span><span id="8839" class="mw kw iq mr b gy nc my l mz na">};</span></pre><h1 id="7e06" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="f7c4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Axios比<code class="fe mo mp mq mr b"><strong class="lp ir">XMLHttpRequest</strong></code>有了巨大的改进，拥有简单、优雅、易用的界面。请确保我们没有涵盖它的所有内容，您需要从其他资源了解更多信息。</p><p id="4437" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">感谢您阅读本文，希望您觉得有用。如果有，通过<a class="ae nb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir">订阅我们的YouTube频道</strong> </a> <strong class="lp ir">获取更多类似内容！</strong></p><h1 id="890e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">更多阅读</h1><div class="ne nf gp gr ng nh"><a href="https://medium.com/javascript-in-plain-english/how-to-fetch-data-from-an-api-in-javascript-dccde83619b2" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">如何在JavaScript中从API获取数据</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">通过实例了解fetch API</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">medium.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv kp nh"/></div></div></a></div></div></div>    
</body>
</html>
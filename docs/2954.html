<html>
<head>
<title>How To Build Animated Login Screens With React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React Native构建动画登录屏幕</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-animated-login-screens-with-react-native-edb81cb500aa?source=collection_archive---------3-----------------------#2020-08-10">https://javascript.plainenglish.io/how-to-build-animated-login-screens-with-react-native-edb81cb500aa?source=collection_archive---------3-----------------------#2020-08-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="41e3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何用动画组件构建一个漂亮的交互式登录界面</h2></div><p id="cae6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我将向您展示:</p><ul class=""><li id="b6fe" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">如何用一组简单的输入指令呈现和更新自定义输入块</li><li id="a940" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">如何调用基于键盘显示/隐藏状态的动画？</li><li id="ff61" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">如何创建外观平滑的自定义动画输入组件</li></ul><p id="516d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是给你一个最终结果是什么样子的想法。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/9899914dea248a8e1ce5c566f38a4bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/1*HRBEhCB6qg3OoLn30jveoQ.gif"/></div></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="957a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> React Native Starter Kit </strong>:这个登录界面是取自<em class="me">React Native Share Starter Kit</em>的样本，在<a class="ae mf" href="https://market.nativebase.io/view/react-native-share-app-theme" rel="noopener ugc nofollow" target="_blank">这里</a>可以买到。</p><p id="c4e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> React Native Resources: </strong>希望我们向您发送来自网络的最新React Native故事、教程、资源等，以帮助您构建更好的应用。<a class="ae mf" href="http://knowlephant.com" rel="noopener ugc nofollow" target="_blank">在此注册</a>。</p><p id="929a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Git repo </strong>:我在这里贴了一个公开的repo，里面有这个项目<a class="ae mf" href="https://bitbucket.org/henkcorporaal/ui_template_login_screen/src/master/" rel="noopener ugc nofollow" target="_blank">的源代码。</a></p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="5ad2" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">构建LogoView动画效果</h1><p id="4270" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">登录界面由三个独立的视图组成，为此我创建了三个不同的组件:logo view<em class="me">和InputView </em>和BlockButton 。</p><p id="eae8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从第一个开始:动画LogoView，为此我必须解决两个挑战:</p><ol class=""><li id="9a6c" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la nd lh li lj bi translated">如何跟踪键盘的显示/隐藏状态？</li><li id="0c0f" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la nd lh li lj bi translated">如何让logo动画显得流畅而不是跳动？</li></ol><p id="ade3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从第一个开始，<em class="me"> LogoView </em>包含两个事件监听器，跟踪键盘的显示/隐藏状态:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="e052" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">需要注意的是android和iOS的KeyboardEventName是不同的，因此需要进行平台检查。</p><p id="fd94" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个事件侦听器调用一个函数来放大或缩小徽标和徽标文本。这给我们带来了第二个挑战:</p><div class="lq lr ls lt gt ab cb"><figure class="ng lu nh ni nj nk nl paragraph-image"><img src="../Images/7c6c1131eb2a6b471e6ce3b0bd7c9d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/1*kEQMICD6-0S4SxT4E-Aulw.gif"/></figure><figure class="ng lu nh ni nj nk nl paragraph-image"><img src="../Images/fdb8d33d1c9ffd384d9d3c241b5166ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/1*gtiWHH13NzM1NbeGUissEg.gif"/><figcaption class="nm nn gj gh gi no np bd b be z dk nq di nr ns">Left: a not so smooth animation effect. Right: a much smoother animation effect</figcaption></figure></div><p id="af69" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">左边的“不太平滑的动画效果”发生在动画被直接修改时，而不是通过它的可变引用。</p><p id="87d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于这个容易被忽视的错误，React Native docs官方给出了以下警告:</p><p id="b479" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">注意:不要直接修改动画值。可以使用</em> <code class="fe nt nu nv nw b"><a class="ae mf" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"><em class="me">useRef</em></a></code> <a class="ae mf" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"> <em class="me">钩子</em> </a> <em class="me">返回一个可变的ref对象。这个ref对象的</em> <code class="fe nt nu nv nw b"><em class="me">current</em></code> <em class="me">属性被初始化为给定的参数，并在整个组件生命周期中保持不变。</em></p><p id="836d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记住这个有用的技巧，实际动画的代码非常简单:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3da0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有关使用<em class="me"> useNativeDriver </em>的更多背景信息，请参见本文<a class="ae mf" href="https://reactnative.dev/blog/2017/02/14/using-native-driver-for-animated" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="e02f" class="mg mh iq bd mi mj nx ml mm mn ny mp mq jw nz jx ms jz oa ka mu kc ob kd mw mx bi translated">从一组<em class="oc">输入选项</em>中创建自定义输入元素</h1><p id="4a2f" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">因为应用程序通常有许多需要多个自定义输入元素的身份验证屏幕，所以能够以一种快速、轻松地添加和修改输入元素的方式呈现我们的输入元素，同时编写最少的代码，这将是非常有用的。</p><p id="aeee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们面临的另一个挑战是，当我们与屏幕交互时，如何告诉屏幕哪个输入元素要增长，哪个要收缩。</p><p id="930b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从一组输入选项构建定制输入元素是这两个问题的答案。</p><p id="a2c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑以下设置:</p><ol class=""><li id="d282" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la nd lh li lj bi translated">登录屏幕跟踪每个输入值的状态，并检查在给定时刻哪个输入元素是活动的。</li><li id="3936" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la nd lh li lj bi translated">每个值的状态被传递给我们的输入选项对象数组。</li><li id="2d6b" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la nd lh li lj bi translated">相同的输入选项可以以类似的方式使用，以基于用户交互来更新每个值。</li></ol><p id="51d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实际上，这看起来如下:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9aa3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个options对象通过映射对象数组并通过props传递每组选项来呈现自定义输入元素。</p><p id="9779" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以简单地呈现我们的自定义输入组件，如下所示:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h1 id="be4a" class="mg mh iq bd mi mj nx ml mm mn ny mp mq jw nz jx ms jz oa ka mu kc ob kd mw mx bi translated">向我们的自定义输入元素添加动画效果</h1><p id="05ca" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">向自定义输入元素添加动画现在相当简单，因为它基本上可以归结为复制之前在动画<em class="me"> LogoView </em>组件中实现的设置。</p><p id="068e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">剩下的两个挑战是:</p><ul class=""><li id="b90b" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">当用户按下输入元素时，如何在每个<em class="me">文本输入</em>之间改变焦点——目标是整个输入元素变成交互式的，而不仅仅是<em class="me">文本输入</em>部分。</li><li id="eb22" class="lb lc iq kh b ki lk kl ll ko lm ks ln kw lo la lg lh li lj bi translated">如何仅在输入元素处于活动状态时渲染阴影，从而使其在非活动状态时不可见？</li></ul><p id="d93f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是让我们从第一个开始。您可能还记得，每个元素的<em class="me"> TextInput </em>组件都是根据它们传入的活动状态设置为活动/非活动的。通过将选项传递给useEffect中的第二个参数数组，我们可以确保每当input options对象改变时input元素都会更新。</p><p id="2096" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过检查active属性，并设置对<em class="me"> TextInput、</em>的引用，现在可以通过编程为每个单独的Input元素聚焦<em class="me"> TextInput </em>。</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="a504" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了显示输入组件的增长/收缩动画，我用两个动画<em class="me">包装了TextInput。查看</em>组件和一个<em class="me">可触摸不透明</em>组件。添加后者是为了确保on-press不仅限于TextInput，而是在整个输入块上注册。</p><p id="5bee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一步是停用TextInput手势处理程序，因为我们不再需要它们了——因为TextInput焦点现在是通过Touchable的onPress处理程序设置的。</p><p id="32ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过设置包装器视图的pointerEvents来实现这一点:<em class="me"> pointerEvents="none" </em></p><p id="ac65" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AnimatedTextInput组件的其余部分现在如下所示:</p><figure class="lq lr ls lt gt lu"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="4f98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能会注意到添加到动画视图组件的<code class="fe nt nu nv nw b"><em class="me">$activeShadow</em></code> styles属性。这有助于我们在选项的活动属性激活时渲染阴影。</p><p id="44e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就完成了教程。我希望这篇文章能启发你在下一个应用程序中使用身份验证屏幕。在下一篇教程中，我将向<a class="ae mf" href="https://medium.com/@henkcorporaal/creating-a-smooth-sign-in-and-logout-experience-with-react-native-62e5deffbff" rel="noopener">展示如何使用React Native </a>创建流畅的登录和注销体验。</p></div></div>    
</body>
</html>
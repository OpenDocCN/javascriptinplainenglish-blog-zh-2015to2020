<html>
<head>
<title>Build a Spotify-Inspired Music Player with React Hooks, Context, &amp; The Web Audio API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React Hooks、Context和网络音频API构建一个受Spotify启发的音乐播放器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-audio-player-build-a-spotify-inspired-music-player-with-react-hooks-context-the-web-3802be26d5cc?source=collection_archive---------3-----------------------#2020-08-04">https://javascript.plainenglish.io/react-audio-player-build-a-spotify-inspired-music-player-with-react-hooks-context-the-web-3802be26d5cc?source=collection_archive---------3-----------------------#2020-08-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e48d1f097cbed6899b78d749638d9feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3t-V6bQP4u2udqkB1jyCw.png"/></div></div></figure><h2 id="f83d" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">Spotify似乎是当今自切片面包以来最酷的东西，是随时随地听音乐的事实上的方式。</h2><p id="23ce" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">前几天在使用Spotify桌面播放器时，我想，看看在React中实现它的一些用户界面有多难，这可能是一件好事。几个小时后，压力比我想象的要小得多，我能够想出一些非常好的东西。</p><p id="a76f" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">因此，这篇文章(以及随后的文章)将面向那些希望提高反应技能的人，并使用其更新的功能来实现我认为是一个基本音乐播放器的优雅实现。</p><p id="5ffc" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">我们的音频播放器将利用现成的网络音频API，并将包括以下功能:</p><ul class=""><li id="26de" class="lu lv iq kw b kx lp lb lq kh lw kl lx kp ly lo lz ma mb mc bi translated">创建和移除播放列表</li><li id="14c0" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">查看和更新播放列表</li><li id="2680" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">播放、暂停、快进、倒带等。</li><li id="48b4" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">调节音量</li><li id="3f4f" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">喜爱的歌曲</li></ul><p id="2326" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">我强烈建议先通读教程，然后查看我为这篇文章上传到YouTube上的附带视频(<em class="mi">，你可以在文章的最后找到</em><em class="mi"/>)。</p><p id="c264" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">另外，如果你喜欢这篇文章，可以看看我在<a class="ae mj" href="https://dzuz14.medium.com/simple-file-uploading-with-react-hooks-fe89c225db57" rel="noopener">上传文件的文章，点击这里</a>。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="e083" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">设计布局</h1><p id="0fb3" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">通过剖析本文开头的图片，我想出了一个简单的图表来突出创建我们的音乐播放器所需的基本构件。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/cb219a6f8d20f48846dcbab5db74b94d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*ZSe9kyCfcGklnNatWJONNA.png"/></div></figure><p id="230b" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">我们将使用的四个组件命名为:</p><ul class=""><li id="0a47" class="lu lv iq kw b kx lp lb lq kh lw kl lx kp ly lo lz ma mb mc bi translated">顶部栏</li><li id="f4c7" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">补充报道</li><li id="d9c7" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">内容</li><li id="8848" class="lu lv iq kw b kx md lb me kh mf kl mg kp mh lo lz ma mb mc bi translated">播放栏</li></ul><p id="4533" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated"><strong class="kw ir">但是在我们开始实现它们之前</strong>，我们还需要一个入口点来导入这些组件。为了简单起见，让我们创建一个名为MusicPlayer的组件作为入口点，然后直接进入我们的前两个布局组件。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="a86e" class="jy jz iq no b gy ns nt l nu nv">/** @jsx jsx */<br/>import React from 'react'<br/>import { css, jsx } from '@emotion/core'</span><span id="2e07" class="jy jz iq no b gy nw nt l nu nv">const MusicPlayer = () =&gt; (<br/>  &lt;div&gt;<br/>    {/* ...Content Here */}<br/>  &lt;/div&gt;<br/>)</span><span id="33d8" class="jy jz iq no b gy nw nt l nu nv">export default MusicPlayer</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="ceb3" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">内容和侧边栏组件</h1><p id="5b4b" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">根据上一节中的图表，内容和侧边栏应该并排放置，侧边栏组件放在左侧。默认情况下，flex容器中的项目是并排放置的，我们将在MusicPlayer中使用flexbox来实现这个功能。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="2023" class="jy jz iq no b gy ns nt l nu nv">/** @jsx jsx */<br/>import React from 'react'<br/>import { css, jsx } from '@emotion/core'</span><span id="369c" class="jy jz iq no b gy nw nt l nu nv">const MusicPlayer = () =&gt; (<br/>  &lt;div css={CSS}&gt;<br/>    {/* ...Content Here */}<br/>  &lt;/div&gt;<br/>)</span><span id="20d0" class="jy jz iq no b gy nw nt l nu nv">const CSS = css`<br/>  height: 100%;<br/>  width: 100%;<br/>  display: flex;<br/>  position: relative;<br/>  color: white;<br/>`<br/>export default MusicPlayer</span></pre><p id="0704" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">有了这种风格，我们应该有信心，当我们以后将所有东西拼凑在一起时，内容和侧边栏将会并排放置。</p><h2 id="2f6f" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">内容</h2><p id="7b24" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">内容部分目前对我们来说并不重要。现在，让我们给它一些非常基本的造型。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="15f5" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">补充报道</h2><p id="04c9" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">边栏将是我们大部分播放列表的功能所在。让我们将它创建为一个无序列表，将其设置为200像素的固定宽度，并添加一个徽标。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="b21b" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">顶部栏</h1><p id="88a3" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">Topbar不会在这个系列中提供任何功能，但是拥有它确实会创造一个更好的整体视觉效果。我们可以给它指定一个高度和背景颜色，然后暂时保持原样。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="3c00" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">播放栏</h1><p id="9f6d" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">Playbar是我们将在本系列的后面花费大量时间的地方。但是对于它当前的需求，我们只需要把它放在屏幕的底部，让它看起来像个零件。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="df1f" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">测试布局</h1><p id="26e3" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">完成四个布局组件后，是时候将它们导入到我们的入口组件中，看看是否一切正常。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="d286" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">如果我们打开浏览器，一切都按照我们的计划进行，那么我们应该会看到我们的布局按预期工作！</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/c2246aefdafd7ae361b7c1634e89087e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pC-wuUUr_0oKkbZ8GDA9BQ.png"/></div></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="45df" class="mr jz iq bd ka ms mt mu kd mv mw mx kg my mz na kk nb nc nd ko ne nf ng ks nh bi translated">接下来</h1><p id="b5cf" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">那么，我们该何去何从呢？在本系列的第二部分中，我们将开始在侧边栏组件中工作，并开始实现播放列表工作所需的一些状态。当涉及到状态时，我们将使用“本地优先”策略，并且将推迟使用上下文，直到功能认为有必要。</p><p id="dd3a" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">如约而至，视频在此！第二部分的文章将很快发布，敬请关注！</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="oa ny l"/></div></figure></div></div>    
</body>
</html>
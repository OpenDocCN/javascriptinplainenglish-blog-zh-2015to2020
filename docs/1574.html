<html>
<head>
<title>Make Physics-based animations with React Spring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Spring制作基于物理的动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-physics-based-animations-with-react-spring-bf49e195752f?source=collection_archive---------2-----------------------#2020-04-02">https://javascript.plainenglish.io/make-physics-based-animations-with-react-spring-bf49e195752f?source=collection_archive---------2-----------------------#2020-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/f80a8516dece4eb119cff38c01cba55c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*g11KhI75LVqZWp0YRfGTyA.gif"/></div></figure><p id="cbcf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们都喜欢一个物体看起来有视觉吸引力，而不是静止不动，这完全取决于个人偏好，但我更喜欢它的原因是，它是一种向观众表达你的设计所传达的信息的方式。</p><p id="495d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">自上个世纪以来，我们一直在用动画来娱乐、宣传和讲述能唤起情感的故事。在我们当前的世界中，通过技术的掌握，讲故事和交流情感变得再容易不过了。</p><p id="3dc1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这篇文章中，我们将看到一个叫做<strong class="jw ir"> React Spring </strong>的惊人的库，它不仅使控制基于组件的动画变得超级容易，而且还提供了<em class="ks">钩子</em>，可以用一行代码将任何数据转换成动画数据。</p><h1 id="634c" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我们将建造什么？</h1><p id="20ca" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">因为互动和同时学习是最好的学习策略！我们将基于React Spring的<code class="fe lw lx ly lz b">useSpring</code>钩子构建一个迷你项目。结果会是这样的-</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="92ff" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是最简单的，任何你想要编辑或动画的值或属性！只要把它扔进<code class="fe lw lx ly lz b">useSpring</code>里，它就会帮你做好。您所要做的就是将输出放到您的视图中。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="0436" class="kt ku iq bd kv kw mn ky kz la mo lc ld le mp lg lh li mq lk ll lm mr lo lp lq bi translated">什么是React Spring？</h1><p id="129a" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">在所有制作组件动画的传统方法中，我们都没能实现惊人的自由动画。换句话说，React将总是渲染动画的每一帧，从而使它有点慢，不那么平滑。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/4a64a763a8d03734bfb3d9d752d586da.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*GTZ49n_vql-K--UpDmIvww.png"/></div></figure><blockquote class="mt"><p id="27ee" class="mu mv iq bd mw mx my mz na nb nc kr dk translated">React-spring是一个基于spring物理学的动画库，应该涵盖了你的大部分UI相关的动画需求。它给你足够灵活的工具来自信地将你的想法投射到移动界面中。</p></blockquote><p id="8d46" class="pw-post-body-paragraph ju jv iq jw b jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ij bi translated">使用React Spring的全部目的是通过为您提供更好的体验以及更快的交付和令人难以置信的性能，让您在动画中占据上风。</p><h1 id="9edf" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">为什么基于物理的动画更好？</h1><p id="8881" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">基于物理的动画是任何物理实体的模拟如此自然互动的原因。它们经常被用来模仿复杂的、受身体启发的行为。</p><p id="9ed5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们不再考虑<strong class="jw ir">持续时间</strong>或<strong class="jw ir">缓和曲线</strong>，取而代之的是，我们关注实际的物理属性。React Spring在其所有动画中大量使用了这种逻辑，这就是为什么它被认为像其他真实世界的属性一样工作。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f0721d0478c04ec2eaeb61238711ee80.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/1*ROgAmFquVVrDH_O9k16cPA.gif"/></div></figure><p id="f189" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ks">嗯，迷茫？让我给你解释清楚。想象你从一座建筑上垂直向下扔一个球，球不会问你它应该在多长时间后到达底部，对吗？相反，我们会让物理来说话。这同样适用于反作用力弹簧。</em></p><p id="f646" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">想自己试试吗？</strong>继续并<a class="ae nj" href="https://www.react-spring.io/docs/hooks/examples" rel="noopener ugc nofollow" target="_blank"> <em class="ks">检查他们提供的文档</em> </a>。实际上，你会发现所有的例子都是动态的，不以任何方式依赖于时间。你可以点击它们，移动它们，拖动它们，玩它们，它们会像真实世界一样自然流动。</p><p id="a516" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然而，在传统方法中(不依赖于基于物理的动画)，如果过渡/动画已经在运动，则需要您处于闲置状态，这意味着在处理过渡时，您不能单击或做任何其他事情。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="25af" class="kt ku iq bd kv kw mn ky kz la mo lc ld le mp lg lh li mq lk ll lm mr lo lp lq bi translated">在项目中安装Spring</h1><p id="4ee5" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">首先，我们首先需要安装库，以便能够在我们的项目中使用它。这就像通过CLI安装任何其他软件包一样简单。你可以选择</p><p id="7716" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe lw lx ly lz b">npm install react-spring</code>或<code class="fe lw lx ly lz b">yarn add react-spring</code></p><p id="ab9f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这取决于您的软件包管理员。你也可以使用任何其他的包管理器来安装，只要确保你输入库名为<code class="fe lw lx ly lz b">react-spring</code>，你就可以开始了。</p><h1 id="a6da" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">了解使用Spring</h1><p id="dee0" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated"><code class="fe lw lx ly lz b">useSpring</code>非常受欢迎，因为它能够将任何传入钩子的值转换成动画值。这个钩子常用的方法是:</p><ul class=""><li id="2f0f" class="nk nl iq jw b jx jy kb kc kf nm kj nn kn no kr np nq nr ns bi translated">覆盖先前的值以产生新的值，从而改变动画属性</li></ul><pre class="ma mb mc md gt nt lz nu nv aw nw bi"><span id="8cd7" class="nx ku iq lz b gy ny nz l oa ob">const value = useSpring({overwritingValue: property ? 1 : 0})</span></pre><ul class=""><li id="4865" class="nk nl iq jw b jx jy kb kc kf nm kj nn kn no kr np nq nr ns bi translated">通过使用<strong class="jw ir"> set，将函数作为参数直接传入钩子，并使用返回值更新动画属性。</strong></li></ul><pre class="ma mb mc md gt nt lz nu nv aw nw bi"><span id="8926" class="nx ku iq lz b gy ny nz l oa ob">const [value, set] = useSpring(() =&gt; ({returnsValue: 1}))</span><span id="450c" class="nx ku iq lz b gy oc nz l oa ob">set({returnsValue: property ? 1 : 0}) <em class="ks">//Update using returned value</em></span></pre><ul class=""><li id="8ce9" class="nk nl iq jw b jx jy kb kc kf nm kj nn kn no kr np nq nr ns bi translated">在视图中使用返回的动画值</li></ul><pre class="ma mb mc md gt nt lz nu nv aw nw bi"><span id="ba59" class="nx ku iq lz b gy ny nz l oa ob">return(<br/>    &lt;animated.div style={value}&gt; In the View &lt;/animated.div&gt;<br/>);</span></pre><h1 id="cff7" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">拿钩子</h1><p id="9c5e" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">先来导入几个必备品。我们将需要这个项目中的鼠标事件，因为它将是一个视差取决于当前屏幕上的光标的X和Y坐标。<code class="fe lw lx ly lz b">useSpring</code>是我们要制作动画的钩子。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><h1 id="f2ee" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">定义我们的职能</h1><p id="ef4c" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">因为我是在<code class="fe lw lx ly lz b">index.js</code>内部设计这个项目，所以我更喜欢把它命名为<strong class="jw ir">视差</strong>，这样我就可以直接从<strong class="jw ir">反应堆</strong>中渲染它。如果您正在使用另一个子组件或在<code class="fe lw lx ly lz b">App.js</code>中使用，请随意。</p><p id="6238" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们制作这个<strong class="jw ir">视差</strong>函数的目的是使用我们的<code class="fe lw lx ly lz b">useSpring</code>钩子返回<code class="fe lw lx ly lz b">props</code>和<code class="fe lw lx ly lz b">set</code>方法调用，因为我们将创建自己的算法来根据我们的意愿移动对象。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><p id="884c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当我们在屏幕上移动时，<code class="fe lw lx ly lz b">clientX</code>和<code class="fe lw lx ly lz b">clientY</code>捕获鼠标的当前<strong class="jw ir"> X </strong>和<strong class="jw ir"> Y </strong>坐标，<code class="fe lw lx ly lz b">set</code>方法通过将<strong class="jw ir"> X </strong>和<strong class="jw ir"> Y </strong>的值发送给<code class="fe lw lx ly lz b">calc</code>函数来更新属性<code class="fe lw lx ly lz b">xy</code>。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="of og di oh bf oi"><div class="gh gi oe"><img src="../Images/bba556dfd8f4b3d0c71b630f85c0c163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2V1OS413BWlVCsZRIkViLg.gif"/></div></div></figure><h1 id="f5d1" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">弹簧插值</h1><p id="2a94" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">因为<code class="fe lw lx ly lz b">useSpring</code>给了我们动画值！在我们的实际视图中，除了用CSS属性对其进行插值之外，没有其他方法可以使用它。弹簧插值的一个快速示例是</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><p id="f8c4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">因为对于这个项目，我们计划在我们的视图中有四个对象，我们打算创建一个视差效果，我们需要想出一些关于如何让这些对象在接收到那些<strong class="jw ir"> X </strong>和<strong class="jw ir"> Y </strong>坐标时移动的想法，现在我们已经把它们存储在<code class="fe lw lx ly lz b">xy</code>中了。</p><p id="dfe9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">基于我们的坐标在3D空间上重新定位对象的最好方法是使用属性<code class="fe lw lx ly lz b">translate3d</code>，相对地在与鼠标光标相同的方向上移动。它产生一个变换函数，使物体在一个给定的方向上移动。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><p id="7e9b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="ks">注</em> </strong> <em class="ks">:这些值不是固定的(x/10，x/8+35等)，你可以使用你喜欢的任何值，这些数字对我来说非常适用，所以我在使用它们。这些数字有助于确定鼠标移动时你的对象从左到右的摆动，所以你可以摆弄它们，直到找到满足你需要的东西。</em></p><h1 id="fcde" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">使用动画div</h1><p id="c5c0" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">到目前为止，在我们的项目中，我们已经设置了逻辑，但我们看不到任何东西，因为我们甚至没有四个对象中的一个来进行测试。不要担心，我们将通过在我们的项目中添加所有必要的样式来改变这一点，同时在我们的<code class="fe lw lx ly lz b">styles.css</code>中将对象作为<code class="fe lw lx ly lz b">background-image</code>属性插入</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><p id="fe8f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">理解样式很容易，但是识别卡片就不容易了！让我来帮你。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="of og di oh bf oi"><div class="gh gi oj"><img src="../Images/57c24cb4f2347446a929aa5116f84edb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9cVE4ZRvEGAb_mlFLnsCrQ.png"/></div></div></figure><p id="fbc5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是最后一步，我们已经完成了。为了在我们的视图中看到这些卡<em class="ks">(卡1、卡2、卡3、卡4) </em>，我们必须添加那些<strong class="jw ir">四个div</strong>，并用正确的卡名标记<strong class="jw ir">类名</strong>，并动画显示它们的变换。我们正在扩展<code class="fe lw lx ly lz b">animated</code>的div，它允许react-springs在react之外激活。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="od mf l"/></div></figure><h2 id="1908" class="nx ku iq bd kv ok ol dn kz om on dp ld kf oo op lh kj oq or ll kn os ot lp ou bi translated">瞧，给自己拍一下。</h2></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="d05e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你喜欢React Spring背后的想法，并有兴趣了解它的更多信息。我建议你去看看这个很酷的项目，自己想办法解决。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="1c51" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我希望你在学习中获得乐趣，并在尝试新事物时得到一个方便的项目。如果你有任何疑问，你可以在下面评论，我会尽快联系你。</p><p id="fa54" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢您阅读本文。✌️和平</p><h2 id="d59e" class="nx ku iq bd kv ok ol dn kz om on dp ld kf oo op lh kj oq or ll kn os ot lp ou bi translated"><strong class="ak">用简单的英语写的JavaScript的注释:</strong></h2><p id="c7bb" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到submissions@javascriptinplainenglish.com<a class="ae nj" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">给我们，我们会把你添加为作者。</a></p></div></div>    
</body>
</html>
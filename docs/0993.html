<html>
<head>
<title>Add a Timeline to Your Vue.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向您的Vue.js应用程序添加时间线</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-a-timeline-to-your-vue-js-app-3b0804c06c0a?source=collection_archive---------1-----------------------#2020-01-11">https://javascript.plainenglish.io/add-a-timeline-to-your-vue-js-app-3b0804c06c0a?source=collection_archive---------1-----------------------#2020-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="453e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">时间线非常适合显示按时间顺序排列的项目。很好看，也很好读。我们可以很容易地用位于<a class="ae kp" href="https://github.com/pablosirera/timeline-vuejs" rel="noopener ugc nofollow" target="_blank">https://github.com/pablosirera/timeline-vuejs</a>的<code class="fe kl km kn ko b">timeline-vuejs </code>包给Vue.js添加一个。它显示一个垂直的时间线，显示年份和您选择的内容。</p><p id="fa05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将构建一个日记条目应用程序，让用户在中输入日记条目并保存它们。他们也可以随意删除。保存的条目将显示在垂直时间线中，左边是年份，右边是内容。首先，我们将通过运行以下命令来运行Vue CLI:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="eac9" class="ky kz iq ko b gy la lb l lc ld">npx @vue/cli create journal-app</span></pre><p id="7eb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Vuex和Babel。</p><p id="ebb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们安装一些包。我们将使用Axios进行HTTP请求，使用BootstrapVue进行样式化，使用Timeline-Vuejs在时间轴中显示用户的日记，使用VueFilterDateFormat格式化模板中的日期，使用Vee-Validate进行表单验证。要安装它们，我们运行:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="1778" class="ky kz iq ko b gy la lb l lc ld">npm i axios bootstrap-vue timeline-vuejs vee-validate vue-filter-date-format</span></pre><p id="1a02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以开始构建我们的应用程序了。在<code class="fe kl km kn ko b">components</code>文件夹中创建一个名为<code class="fe kl km kn ko b">JournalForm.vue</code>的文件，并添加:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="d681" class="ky kz iq ko b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kp" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group label="Date"&gt;<br/>        &lt;ValidationProvider name="date" rules="required|date" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.date"<br/>            required<br/>            placeholder="Date"<br/>            name="date"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="b021" class="ky kz iq ko b gy le lb l lc ld">&lt;b-form-group label="Diary"&gt;<br/>        &lt;ValidationProvider name="diary" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;b-form-textarea<br/>            :state="errors.length == 0"<br/>            v-model="form.diary"<br/>            required<br/>            placeholder="Diary"<br/>            name="diary"<br/>            rows="3"<br/>          &gt;&lt;/b-form-textarea&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="67c0" class="ky kz iq ko b gy le lb l lc ld">&lt;b-button type="submit" variant="primary" style="margin-right: 10px"&gt;Submit&lt;/b-button&gt;<br/>      &lt;b-button type="reset" variant="danger" <a class="ae kp" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="cancel()"&gt;Cancel&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="a679" class="ky kz iq ko b gy le lb l lc ld">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="f020" class="ky kz iq ko b gy le lb l lc ld">export default {<br/>  name: "JournalForm",<br/>  mixins: [requestsMixin],<br/>  props: {<br/>    edit: Boolean,<br/>    journal: Object<br/>  },<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  methods: {<br/>    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }<br/>      const offDate = new Date(this.form.date);<br/>      const correctedDate = new Date(<br/>        offDate.getTime() + Math.abs(offDate.getTimezoneOffset() * 60000)<br/>      );</span><span id="9b42" class="ky kz iq ko b gy le lb l lc ld">      const params = {<br/>        ...this.form,<br/>        date: correctedDate<br/>      };</span><span id="b14a" class="ky kz iq ko b gy le lb l lc ld">      if (this.edit) {<br/>        await this.editJournal(params);<br/>      } else {<br/>        await this.addJournal(params);<br/>      }<br/>      const { data } = await this.getJournals();<br/>      this.$store.commit("setJournals", data);<br/>      this.$emit("saved");<br/>    },<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    }<br/>  },<br/>  watch: {<br/>    journal: {<br/>      handler(val) {<br/>        this.form = JSON.parse(JSON.stringify(val || {}));<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="25f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件是让用户输入日志条目的表单。</p><p id="c6a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">onSubmit </code>函数中，我们通过调用<code class="fe kl km kn ko b">this.$refs.observer.validate();</code>来使用Vee-Validate验证我们的表单，以确保输入了<code class="fe kl km kn ko b">diary</code>，并且在保存之前输入了它，日期字段以YYYY-MM-DD格式输入。</p><p id="4a48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用Vee-Validate来验证表单字段。<code class="fe kl km kn ko b">ValidationObserver</code>组件用于验证整个表单，而<code class="fe kl km kn ko b">ValidationProvider</code>组件用于验证它所包装的表单字段。</p><p id="d9af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">验证规则由<code class="fe kl km kn ko b">date</code>和<code class="fe kl km kn ko b">diary</code>字段的<code class="fe kl km kn ko b">rule</code>属性指定。</p><p id="0409" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">state</code>道具用于设置验证状态，当<code class="fe kl km kn ko b">errors</code>长度为0时显示绿色，否则显示红色。错误信息显示在<code class="fe kl km kn ko b">b-form-invalid-feedback</code>组件中。此页面只有国家下拉列表。</p><p id="8136" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在提交之前更正了日期，因为YYYY-MM-DD格式的日期必须通过添加时区偏移量来更正，以便以UTC格式保存日期。一旦保存了数据，我们就获得最新的数据，然后将数据放入存储中。然后我们向<code class="fe kl km kn ko b">HomePage</code>发出<code class="fe kl km kn ko b">saved</code>事件，这样我们就可以关闭模态。</p><p id="f65e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们在<code class="fe kl km kn ko b">src</code>文件夹中创建一个<code class="fe kl km kn ko b">mixins</code>文件夹，并创建一个名为<code class="fe kl km kn ko b">requestsMixin.js</code>的文件。在那里，我们添加:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="e845" class="ky kz iq ko b gy la lb l lc ld">const APIURL = "<a class="ae kp" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="9ded" class="ky kz iq ko b gy le lb l lc ld">export const requestsMixin = {<br/>  methods: {<br/>    getJournals() {<br/>      return axios.get(`${APIURL}/journals`);<br/>    },</span><span id="3087" class="ky kz iq ko b gy le lb l lc ld">    addJournal(data) {<br/>      return axios.post(`${APIURL}/journals`, data);<br/>    },</span><span id="455a" class="ky kz iq ko b gy le lb l lc ld">    editJournal(data) {<br/>      return axios.put(`${APIURL}/journals/${data.id}`, data);<br/>    },</span><span id="d1f3" class="ky kz iq ko b gy le lb l lc ld">    deleteJournal(id) {<br/>      return axios.delete(`${APIURL}/journals/${id}`);<br/>    }<br/>  }<br/>};</span></pre><p id="0073" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是获取日志数据并保存到后端的函数。</p><p id="28b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">views</code>文件夹中，我们将<code class="fe kl km kn ko b">Home.vue</code>文件中的代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="053b" class="ky kz iq ko b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Journal&lt;/h1&gt;</span><span id="fd54" class="ky kz iq ko b gy le lb l lc ld">    &lt;div class="text-center"&gt;<br/>      &lt;b-button <a class="ae kp" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()" variant="primary"&gt;Add Journal Entry&lt;/b-button&gt;<br/>      &lt;b-button <a class="ae kp" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openDeleteModal()" variant="primary"&gt;Delete Journal Entries&lt;/b-button&gt;<br/>    &lt;/div&gt;</span><span id="8a85" class="ky kz iq ko b gy le lb l lc ld">    &lt;br /&gt;</span><span id="1379" class="ky kz iq ko b gy le lb l lc ld">    &lt;Timeline<br/>      :timeline-items="journals"<br/>      message-when-no-items="No Entries Found"<br/>      :unique-year="true"<br/>      order="desc"<br/>    /&gt;</span><span id="174a" class="ky kz iq ko b gy le lb l lc ld">    &lt;b-modal id="add-modal" title="Add Journal" hide-footer&gt;<br/>      &lt;JournalForm <a class="ae kp" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kp" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false" /&gt;<br/>    &lt;/b-modal&gt;</span><span id="c66a" class="ky kz iq ko b gy le lb l lc ld">    &lt;b-modal id="delete-modal" title="Delete Journal Entries" hide-footer&gt;<br/>      &lt;b-card v-for="(j, i) of journals" :key="i"&gt;<br/>        &lt;b-card-text&gt;<br/>          &lt;h2&gt;{{j.from | dateFormat('YYYY-MM-DD')}}&lt;/h2&gt;<br/>          &lt;p&gt;{{j.description}}&lt;/p&gt;<br/>        &lt;/b-card-text&gt;<br/>        &lt;b-button <a class="ae kp" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOneJournal(j.id)" variant="primary"&gt;Delete&lt;/b-button&gt;<br/>      &lt;/b-card&gt;<br/>    &lt;/b-modal&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="1587" class="ky kz iq ko b gy le lb l lc ld">&lt;script&gt;<br/>// @ is an alias to /src<br/>import JournalForm from "@/components/JournalForm.vue";<br/>import Timeline from "timeline-vuejs";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="5e3a" class="ky kz iq ko b gy le lb l lc ld">export default {<br/>  name: "home",<br/>  components: {<br/>    JournalForm,<br/>    Timeline<br/>  },</span><span id="31f8" class="ky kz iq ko b gy le lb l lc ld">  mixins: [requestsMixin],<br/>  computed: {<br/>    journals() {<br/>      return this.$store.state.journals<br/>        .sort((a, b) =&gt; +new Date(b.date) - +new Date(a.date))<br/>        .map(j =&gt; ({<br/>          id: j.id,<br/>          from: new Date(j.date),<br/>          title: j.title,<br/>          description: j.diary<br/>        }));<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllJournals();<br/>  },<br/>  data() {<br/>    return {<br/>      selectedJournal: {}<br/>    };<br/>  },<br/>  methods: {<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },<br/>    openDeleteModal() {<br/>      this.$bvModal.show("delete-modal");<br/>    },<br/>    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("delete-modal");<br/>    },<br/>    async deleteOneJournal(id) {<br/>      await this.deleteJournal(id);<br/>      this.getAllJournals();<br/>    },<br/>    async getAllJournals() {<br/>      const { data } = await this.getJournals();<br/>      this.$store.commit("setJournals", data);<br/>      this.closeModal();<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="9878" class="ky kz iq ko b gy le lb l lc ld">&lt;style lang="scss" scoped&gt;<br/>.timeline {<br/>  margin: 0 auto;<br/>}<br/>&lt;/style&gt;</span></pre><p id="61f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是我们应用程序的主页。我们在页面顶部有一个添加和删除日志条目的按钮。当我们点击按钮时，我们打开模式，打开一个用于输入日记条目的表单，并显示一个日记列表，您可以点击删除按钮分别删除它们。按钮下面是显示日志条目的时间线。我们将<code class="fe kl km kn ko b">journals</code>数组传入<code class="fe kl km kn ko b">timeline-items</code>。</p><p id="4b74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面我们有显示<code class="fe kl km kn ko b">JournalForm</code>的模式和一个垂直堆叠的卡片列表来显示现有的项目，在那里它们可以被单独读取和删除。我们处理来自<code class="fe kl km kn ko b">JournalForm</code>的<code class="fe kl km kn ko b">saved</code>事件，在项目保存后关闭模态。</p><p id="14b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">delete-modal</code>中，我们列出了条目并有一个按钮来删除每个条目。VueFilterDateFormat包将<code class="fe kl km kn ko b">from</code>字段格式化为YYYY-MM-DD格式，以正确显示日期。</p><p id="c96d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">scripts</code>部分，我们在<code class="fe kl km kn ko b">computed</code>对象中有<code class="fe kl km kn ko b">journals</code>属性来获取最新的日志条目。</p><p id="2257" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将这些字段映射到Timeline-Vuejs包所需的字段，这样我们就可以正确地显示时间线。我们按时间倒序对它们进行排序，以查看顶部的最新项目和下面的旧项目。</p><p id="d77f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，我们使用在mixin中编写的<code class="fe kl km kn ko b">getJournals</code>函数，通过<code class="fe kl km kn ko b">beforeMount</code>钩子获取页面加载期间的所有密码条目。</p><p id="b4e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要删除一个日志条目，我们调用<code class="fe kl km kn ko b">deleteOneJournal</code>我们的mixin通过<code class="fe kl km kn ko b">deleteJournal</code>函数向后端发出请求。</p><p id="4f96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">App.vue</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="6a8f" class="ky kz iq ko b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand to="/"&gt;Journal App&lt;/b-navbar-brand&gt;</span><span id="7ff9" class="ky kz iq ko b gy le lb l lc ld">      &lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="ed93" class="ky kz iq ko b gy le lb l lc ld">      &lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path  == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="644d" class="ky kz iq ko b gy le lb l lc ld">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="649c" class="ky kz iq ko b gy le lb l lc ld">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}</span><span id="0693" class="ky kz iq ko b gy le lb l lc ld">button,<br/>.btn.btn-primary {<br/>  margin-right: 10px !important;<br/>}</span><span id="1182" class="ky kz iq ko b gy le lb l lc ld">.button-toolbar {<br/>  margin-bottom: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="2dfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面顶部添加一个引导导航条，并添加一个<code class="fe kl km kn ko b">router-view</code>来显示我们定义的路线。这个<code class="fe kl km kn ko b">style</code>部分没有限定范围，所以样式将适用于全球。在<code class="fe kl km kn ko b">.page</code>选择器中，我们给页面添加一些填充。我们还在这里为应用程序的按钮添加了边距。</p><p id="eeca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">main.js</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="9ee7" class="ky kz iq ko b gy la lb l lc ld">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import "../node_modules/timeline-vuejs/dist/timeline-vuejs.css";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import { required } from "vee-validate/dist/rules";<br/>import VueFilterDateFormat from "vue-filter-date-format";</span><span id="9f6e" class="ky kz iq ko b gy le lb l lc ld">extend("required", required);<br/>extend("date", {<br/>  validate: value =&gt;<br/>    /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(value),<br/>  message: "Date must be in YYYY-MM-DD format"<br/>});<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);<br/>Vue.use(VueFilterDateFormat);<br/>Vue.use(BootstrapVue);<br/>Vue.config.productionTip = false;</span><span id="e978" class="ky kz iq ko b gy le lb l lc ld">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="32b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加了我们需要的所有库，包括BootstrapVue JavaScript和CSS、Vee-Validate组件以及验证规则。我们创建了<code class="fe kl km kn ko b">date</code>规则，它验证使用该规则的输入是否为YYYY-MM-DD格式。此外，我们添加了VueFilterDateFormat包来格式化<code class="fe kl km kn ko b">Home.vue</code>中表的日期列中的日期。</p><p id="e874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">router.js</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="e0b7" class="ky kz iq ko b gy la lb l lc ld">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="4715" class="ky kz iq ko b gy le lb l lc ld">Vue.use(Router);</span><span id="c2c0" class="ky kz iq ko b gy le lb l lc ld">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="126b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将主页包含在我们的路线中，以便用户可以看到该页面。</p><p id="c371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">store.js</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="a75d" class="ky kz iq ko b gy la lb l lc ld">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="7aba" class="ky kz iq ko b gy le lb l lc ld">Vue.use(Vuex);</span><span id="44fc" class="ky kz iq ko b gy le lb l lc ld">export default new Vuex.Store({<br/>  state: {<br/>    journals: []<br/>  },<br/>  mutations: {<br/>    setJournals(state, payload) {<br/>      state.journals = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="7670" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将我们的<code class="fe kl km kn ko b">journals </code>状态添加到存储中，这样我们就可以在<code class="fe kl km kn ko b">JournalForm</code>和<code class="fe kl km kn ko b">HomePage</code>组件的<code class="fe kl km kn ko b">computed</code>块中观察到它。我们用<code class="fe kl km kn ko b">setSavings </code>函数来更新<code class="fe kl km kn ko b">savings </code>状态，并通过调用<code class="fe kl km kn ko b">this.$store.commit(“setJournals”, data);</code>在组件中使用它来设置<code class="fe kl km kn ko b">JournalForm</code>和<code class="fe kl km kn ko b">HomePage</code>的日志条目数据。</p><p id="e176" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe kl km kn ko b">index.html</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="12e6" class="ky kz iq ko b gy la lb l lc ld">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Journal App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-timeline-tutorial-app doesn't work properly without<br/>        JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="0c7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">改一下标题。</p><p id="e3cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在所有的努力之后，我们可以通过运行<code class="fe kl km kn ko b">npm run serve</code>来启动我们的app。</p><p id="05fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了启动后端，我们首先通过运行<code class="fe kl km kn ko b">npm i json-server</code>来安装<code class="fe kl km kn ko b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="9c31" class="ky kz iq ko b gy la lb l lc ld">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">db.json</code>中，将文本改为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="d789" class="ky kz iq ko b gy la lb l lc ld">{<br/>  "journals": [],<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们有了在<code class="fe kl km kn ko b">requests.js</code>中定义的<code class="fe kl km kn ko b">journals </code>端点。</p><p id="5e9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们得到了:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/57f2cd26b6e1ecee86d4b2f331430e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDC0CKyW7PrNOkF5dwRFrw.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/4d9f84f3adc9c0aa9f9d2856bc780598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3K_4wx-WWmyZnsvu7otLA.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/94accd444380203bd76a4641dcea974d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yq6OJSW5ud4E99DCKk28Gw.png"/></div></div></figure></div></div>    
</body>
</html>
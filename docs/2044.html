<html>
<head>
<title>React Tips — Input Focus and Choices Controls</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—输入焦点和选择控件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-input-focus-and-choices-controls-7aa9bd840b51?source=collection_archive---------3-----------------------#2020-05-15">https://javascript.plainenglish.io/react-tips-input-focus-and-choices-controls-7aa9bd840b51?source=collection_archive---------3-----------------------#2020-05-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/60e3ded3320738d9b7b79971e8f95a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EXBrZWY7KmsCzttJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@c_b_ozaltun?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cenk Batuhan Özaltun</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c881" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是构建现代交互式前端web应用最常用的前端库。它还可以用来构建移动应用程序。</p><p id="d044" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将输入和复选框和单选按钮的值绑定到状态。</p><h1 id="87c1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">渲染后将焦点设置在输入上</h1><p id="4d0e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了聚焦一个输入，我们必须使用原生DOM元素<code class="fe me mf mg mh b">focus</code>方法。该方法可用于输入元素，因此我们可以调用它。</p><p id="9aef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当组件渲染时，我们可以使用<code class="fe me mf mg mh b">useEffect</code>钩子来运行一些东西。如果我们传入一个空数组作为第二个参数，那么我们传入<code class="fe me mf mg mh b">useEffect</code>的回调只在组件第一次加载时运行。</p><p id="a77d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码来实现这一点:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2add" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";</span><span id="7a83" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const input = React.createRef();<br/>  React.useEffect(() =&gt; input.current.focus(), []);<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;input ref={input} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="83a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有用<code class="fe me mf mg mh b">createRef</code>方法创建的<code class="fe me mf mg mh b">useEffect</code>钩子和<code class="fe me mf mg mh b">input</code> ref，它们被传递到输入的<code class="fe me mf mg mh b">ref</code>道具中。</p><p id="035f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">useEffect</code>回调中，我们调用<code class="fe me mf mg mh b">input.current.focus()</code>来调用我们input元素的<code class="fe me mf mg mh b">focus</code>方法。</p><p id="92bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，当我们加载页面时，我们会看到当<code class="fe me mf mg mh b">App</code>如我们所愿加载时，输入被聚焦。</p><h1 id="0177" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检验盒</h1><p id="16be" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要创建复选框，我们必须将复选框值设置为<code class="fe me mf mg mh b">checked</code>属性的值。然后<code class="fe me mf mg mh b">onChange</code>处理程序将获取检查的值，然后将其设置为我们作为<code class="fe me mf mg mh b">checked</code>属性的值传入的状态。</p><p id="040b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码来实现这一点:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="176f" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";</span><span id="87e4" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [selected, setSelected] = React.useState({});<br/>  const handleInputChange = e =&gt; {<br/>    const { name, checked } = e.target;<br/>    setSelected(selected =&gt; ({<br/>      ...selected,<br/>      [name]: checked<br/>    }));<br/>  };<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;form&gt;<br/>        &lt;label&gt;<br/>          apple:<br/>          &lt;input<br/>            name="apple"<br/>            type="checkbox"<br/>            checked={selected.apple || false}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>        &lt;label&gt;<br/>          orange:<br/>          &lt;input<br/>            name="orange"<br/>            type="checkbox"<br/>            checked={selected.orange || false}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>        &lt;label&gt;<br/>          grape:<br/>          &lt;input<br/>            name="grape"<br/>            type="checkbox"<br/>            checked={selected.grape || false}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/form&gt;<br/>      &lt;p&gt;<br/>        {Object.keys(selected)<br/>          .filter(k =&gt; selected[k])<br/>          .join(", ")}<br/>      &lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="cc13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让复选框正常工作是很棘手的。在我们的<code class="fe me mf mg mh b">handleInputChange</code>函数中，我们必须确保<code class="fe me mf mg mh b">e.target</code>的<code class="fe me mf mg mh b">name</code>和<code class="fe me mf mg mh b">value</code>属性必须从同步上下文中访问，所以它不能在我们传递给<code class="fe me mf mg mh b">setSelected</code>的回调中。如果我们不这样做，我们会得到一个警告，说“由于性能原因，这个合成事件被重用”</p><p id="b002" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">setSelected</code>函数中，我们扩展了<code class="fe me mf mg mh b">selected</code>的现有属性，然后将<code class="fe me mf mg mh b">e.target</code>中的<code class="fe me mf mg mh b">name</code>和<code class="fe me mf mg mh b">checked</code>值更新到<code class="fe me mf mg mh b">setSelected</code>回调中返回的对象中。</p><p id="61f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">name</code>值来自每个复选框的<code class="fe me mf mg mh b">name</code>属性的值。</p><p id="b61e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了消除“在ReactJS中，一个组件正在将一个文本类型的非受控输入更改为受控输入”的错误，我们必须为每个<code class="fe me mf mg mh b">checked</code>属性设置一个默认值。在上面的代码中，我们将它们设置为<code class="fe me mf mg mh b">false</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3c46e279bd1d4dacab90453ec672750e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ITRVDhrH-YwZT7FJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@naadirshah?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Naadir Shahul</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5664" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">单选按钮</h1><p id="2405" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">单选按钮类似于复选框，但一次只能选中一个组中的一个单选按钮。例如，我们可以编写以下代码，将单选按钮的选中值绑定到如下状态:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="89a2" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";</span><span id="342d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [selected, setSelected] = React.useState("");<br/>  const handleInputChange = e =&gt; {<br/>    setSelected(e.target.value);<br/>  };<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;form&gt;<br/>        &lt;label&gt;<br/>          apple:<br/>          &lt;input<br/>            name="fruit"<br/>            type="radio"<br/>            value="apple"<br/>            checked={selected === "apple"}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>        &lt;label&gt;<br/>          orange:<br/>          &lt;input<br/>            name="fruit"<br/>            type="radio"<br/>            value="orange"<br/>            checked={selected === "orange"}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>        &lt;label&gt;<br/>          grape:<br/>          &lt;input<br/>            name="fruit"<br/>            type="radio"<br/>            value="grape"<br/>            checked={selected === "grape"}<br/>            onChange={handleInputChange}<br/>          /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/form&gt;<br/>      &lt;p&gt;{selected}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="dbf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有设置为表达式的<code class="fe me mf mg mh b">checked</code>属性，该表达式检查<code class="fe me mf mg mh b">selected</code>属性中的值是否设置为给定值。</p><p id="1e61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">handleInputChange</code>函数中，我们可以通过写<code class="fe me mf mg mh b">setSelected(e.target.value)</code>来调用<code class="fe me mf mg mh b">setSelected</code>，因为单选按钮集<code class="fe me mf mg mh b">e.target.value</code>被设置为单选按钮的值。</p><p id="05f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们单击单选按钮时，将显示<code class="fe me mf mg mh b">selected</code>值，并且我们还会看到，当我们单击单选按钮时，单选按钮会改变选择。</p><p id="58a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">checked</code>属性控制选择哪个单选按钮的渲染，p标签中显示的值用<code class="fe me mf mg mh b">handleInputChange</code>函数更新。</p><h1 id="a8b3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6605" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在React中设置复选框的值很复杂。如果我们没有在复选框的<code class="fe me mf mg mh b">checked</code>属性中设置默认值，我们将在控制台中得到警告。如果我们在状态改变函数的回调中访问<code class="fe me mf mg mh b">e.target</code>,我们也会得到警告。</p><p id="a8cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在React中单选按钮更容易处理，因为我们只需在单击单选按钮时将值设置为字符串。</p><p id="fbbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">聚焦输入很容易，因为我们可以将一个ref附加到一个输入上，然后对它调用<code class="fe me mf mg mh b">focus</code>。</p><h2 id="8dfb" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">来自简明英语团队的说明</h2><p id="3ce2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">简明英语刚刚推出了一个YouTube频道！我们希望您现在就通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅来支持我们！</strong> </a></p></div></div>    
</body>
</html>
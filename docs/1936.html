<html>
<head>
<title>Rock the IoT world with JavaScript and Espruino</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript和Espruino震撼物联网世界</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/rock-the-iot-world-with-javascript-and-espruino-a955a9b2ddd?source=collection_archive---------9-----------------------#2020-05-05">https://javascript.plainenglish.io/rock-the-iot-world-with-javascript-and-espruino-a955a9b2ddd?source=collection_archive---------9-----------------------#2020-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5858" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在ESP32上安装Espruino，只用JavaScript统治物联网世界的详细教程。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ba69a418247b555a302a1a68dae2be8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gwCge4h8vrV1bjQzO4gxQ.jpeg"/></div></div></figure><p id="6767" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几天前，在一次春季大扫除期间，我发现了我为一个旧项目买的一个<strong class="kt ir"> ESP32 </strong>(但从未用过)，埋在一个壁橱里。我说的是一种微控制器设备，它非常便宜，但具有许多出色的功能，如内置Wi-Fi模块。</p><p id="3944" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于这些天我几乎只使用JavaScript，我决定在上面安装Espruino，以便能够用我已经知道并且熟悉的语言来控制它。所以我立即吹走灰尘，并试图将其连接到我的Macbook上，但我在第一次设置时发现了一些问题。</p><p id="116c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以我花了几个小时在论坛和Stack Overflow上寻找修复它的方法，所以现在你有了如何在ESP32上安装Espruino和JavaScript的最终指南，以及所有可能问题的所有可能解决方案。</p><p id="1767" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，让我们从一个noob问题开始:</p><h1 id="e4c2" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">什么是ESP32？</h1><p id="82fc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">ESP32是一款集成Wi-FI和蓝牙低能耗的微控制器。<strong class="kt ir">它基本上是一个拇指大小的芯片，你可以用它来访问互联网、调用API或与手机通信。</strong>很酷，对吧？</p><p id="b4ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是我使用/推荐ESP32微控制器的一些优势:</p><ul class=""><li id="362d" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">创建一个自己动手的家庭住宅；</li><li id="ceea" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">每分钟读取你家的<a class="ae my" href="https://www.hackster.io/jaume_miralles/monitoring-temperature-and-humidity-with-esp32-f53465" rel="noopener ugc nofollow" target="_blank">温度(用外置传感器)和湿度，并发送给服务器</a>；</li><li id="0b10" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">建造一个空气质量传感器。</li><li id="c439" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">创建<a class="ae my" href="https://medium.com/hacksters-blog/display-your-spotify-album-art-on-a-led-matrix-with-a-sparkfun-esp32-thing-cdf0a805e350" rel="noopener">一个与Spotify连接的专辑封面可视化程序(这真的很酷)</a></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/2e51feeda7dac8a0f6092e19abfa65db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vp-Z3c3wjE0afINYa9cZsA.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Spotify cover visualiser with ESP32</figcaption></figure><p id="9f25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有…极其便宜！你可以在全球速卖通上找到一些3-4美元的单个ESP32或每个2美元的捆绑包。如果你想明天就拿到手，你也可以在亚马逊Prime上找到它们，每个10美元左右；与其他产品相比并不便宜，但仍比其他物联网板便宜！</p><p id="0c02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ESP32是<strong class="kt ir"> ESP8266 </strong>(我<a class="ae my" href="https://medium.com/@marassi/control-your-home-using-only-javascript-72a3b071c894" rel="noopener">几年前写了一篇关于它的文章</a>)的直接继任者，它携带一个更强大的双核处理器和更多的RAM。此外，它还具有一些额外的引脚和一些有用的内置传感器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/85e9641d11c9f37b854184ce3cfaa524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQxhd-V0hHggZVX-R7qfMA.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Comparison between ESP8266 and ESP32</figcaption></figure><p id="306e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有了这些额外的功能，你可以做一些非常酷的事情，最棒的是… <strong class="kt ir">你还可以用Espruino在上面安装JavaScript！</strong></p><h1 id="e557" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">Espruino是什么？</h1><p id="7bce" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">Espruino是用于微控制器的开源JavaScript解释器。它允许在低成本芯片中使用JavaScript，这意味着即使您不熟悉Arduino、Lua等编程语言，也可以立即开始使用它..</p><p id="5998" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是的，在征服了前端世界(JavaScript、React、Angular……)和后端世界(使用Node.js)之后，你也可以通过物联网设备在物理世界上使用JavaScript，最终能够在任何地方使用JavaScript<strong class="kt ir"/>。</p><h1 id="c6fd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">如何在ESP32上显示Espruino</h1><p id="1988" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">让我们从第一个设置开始:当你第一次使用ESP32时，它通常内部没有代码，或者有一些Lua代码来闪烁内部led。因此，我们需要安装Espruino，以便开始做我们伟大的JS东西。这样的过程被称为<strong class="kt ir">闪烁</strong>，但是不用担心，在公共场所暴露你的生殖器是没有必要的！请穿上你的内裤，<strong class="kt ir">谢谢</strong>。</p><p id="fcc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">首先:让我们下载Espruino吧！</strong></p><p id="568a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">进入espruino.com的<a class="ae my" href="http://www.espruino.com/Download" rel="noopener ugc nofollow" target="_blank">下载页面，选择ESP32的二进制文件，然后点击第一个链接，查看最新的Espruino版本(2020年5月为v2.05)</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/9fe206998df108d989fe0ab30cabaf0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*7bSj0fOoNd0vv0OzndcwCw.gif"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">How to download Espruino binaries</figcaption></figure><p id="eb47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下载所有3个文件:</p><ul class=""><li id="5ccc" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated"><a class="ae my" href="https://www.espruino.com/binaries/espruino_2v05_esp32/bootloader.bin" rel="noopener ugc nofollow" target="_blank"> bootloader.bin </a></li><li id="da71" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><a class="ae my" href="https://www.espruino.com/binaries/espruino_2v05_esp32/espruino_esp32.bin" rel="noopener ugc nofollow" target="_blank"> espruino_esp32.bin </a></li><li id="07fe" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><a class="ae my" href="https://www.espruino.com/binaries/espruino_2v05_esp32/partitions_espruino.bin" rel="noopener ugc nofollow" target="_blank">partitions _ espruin no . bin</a></li></ul><p id="4225" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们一会儿会用到它们。首先，我们需要确保我们的ESP32对我们的计算机可见。</p><h1 id="2351" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">找到我们的ESP32</h1><p id="4c0b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">让我们将ESP32连接到USB电缆和计算机上。如果它是全新的，它应该开始闪烁它的LED，因为这是它的默认安装程序(这也是我们确保设备没有损坏的好方法)。</p><p id="71e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们需要PC分配给ESP32的位置，以便在闪存时对其进行寻址。为此，我们需要在PC上安装一些驱动程序，让它能够成功查看ESP32。</p><p id="5e69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装这些驱动程序，以便能够从您的PC/Mac上查看设备(只需找到适合您的操作系统的驱动程序，下载可执行文件并运行即可)。</p><p id="95fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据您的ESP32硬件，您可能只需要安装其中一个驱动程序(例如，我只安装了第一个)。为了确保万无一失，请同时安装它们:)</p><div class="ng nh gp gr ni nj"><a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">USB转UART桥VCP驱动器-硅实验室</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">CP210x USB转UART桥虚拟COM端口(VCP)驱动程序是设备操作所必需的，作为虚拟COM端口以…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">www.silabs.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://www.ftdichip.com/Drivers/VCP.htm" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">虚拟COM端口驱动程序</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">虚拟COM端口驱动程序本页包含当前可用于FTDI设备的VCP驱动程序。对于D2XX Direct…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">www.ftdichip.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kp nj"/></div></div></a></div><p id="d4df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">装的？很好。</p><p id="6304" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在打开你的终端并输入(如果你在Linux上)</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="0523" class="oe lo iq oa b gy of og l oh oi">ls /dev/tty*</span></pre><p id="0eb8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者如果你在苹果电脑上</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="f56d" class="oe lo iq oa b gy of og l oh oi">ls /dev/cu*</span></pre><blockquote class="oj ok ol"><p id="46e9" class="kr ks om kt b ku kv jr kw kx ky ju kz on lb lc ld oo lf lg lh op lj lk ll lm ij bi translated"><strong class="kt ir">对于Windows用户</strong>:在本指南的末尾，你会找到一个关于如何找到你的ESP32的很好的指南！</p></blockquote><p id="e42d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你看到类似</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="c98e" class="oe lo iq oa b gy of og l oh oi">/dev/tty.SLAB_USBtoUART</span></pre><p id="d6a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="2b03" class="oe lo iq oa b gy of og l oh oi">/dev/cu.SLAB_USBtoUART</span></pre><p id="c1de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你已经准备好了！记住这个路径，因为它是我们的ESP32在PC上的位置(端口)。</p><blockquote class="oj ok ol"><p id="c758" class="kr ks om kt b ku kv jr kw kx ky ju kz on lb lc ld oo lf lg lh op lj lk ll lm ij bi translated"><strong class="kt ir">如果你在Mac上</strong>看不到任何设备，可能是因为MacOS阻止了驱动程序的加载。打开系统偏好设置- &gt;安全&amp;隐私- &gt;常规，检查是否有关于“开发者提供的系统软件……”的信息，其中开发者的名字是Silicon Labs或FTDI，在被询问时输入您的管理员密码后点击“允许”。</p></blockquote><h1 id="dbcb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">安装Espruino</h1><p id="66a9" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们将使用<strong class="kt ir"> esptool </strong>来安装Espruino。它是用Python写的，所以一定要在你的电脑上安装Python 2.7或&gt; 3.4。</p><p id="9e47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，使用<strong class="kt ir"> pip </strong>，运行以下命令:</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="cd49" class="oe lo iq oa b gy of og l oh oi">pip install esptool</span></pre><p id="eecc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这抛出一个错误，尝试<code class="fe oq or os oa b">python -m pip install esptool</code>或<code class="fe oq or os oa b">pip2 install esptool</code>。这将在可执行文件目录中安装esptool，我们将能够从任何地方运行它。</p><p id="8b31" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你还记得我们几个步骤前下载的那三个文件吗，我们把它们放在哪里了？很好，现在:使用您的终端进入该文件夹，稍微编辑该命令，以便添加我们的ESP32位置。</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="c128" class="oe lo iq oa b gy of og l oh oi">esptool.py                                          \<br/>        --chip esp32                                \<br/>        --port &lt;INSERT HERE YOUR ESP32 LOCATION&gt;    \<br/>        --baud 921600                               \<br/>        --after hard_reset write_flash              \<br/>        -z                                          \<br/>        --flash_mode dio                            \<br/>        --flash_freq 40m                            \<br/>        --flash_size detect                         \<br/>        0x1000 bootloader.bin                       \<br/>        0x8000 partitions_espruino.bin              \<br/>        0x10000 espruino_esp32.bin</span></pre><p id="0580" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">仅在之后替换—移植之前找到的位置。我用<code class="fe oq or os oa b">---port /dev/cu.SLAB_USBtoUART</code>代替了它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/0bf6a733adfeebbff2c10e1c59c6333e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qe6h6TiuRKZC2fttjf_lyw.gif"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Flashing Espruino on ESP32</figcaption></figure><p id="3d7e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有… <strong class="kt ir">你的ESP32现在闪了Espruino！</strong>💪</p><h1 id="01d2" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">安装Espruino Web IDE</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/38fa8cc8a0102d11598d56daae262e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p6DUpAr1cTHo_rNk5Y9x9A.png"/></div></div></figure><p id="56ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在ESP32上编写(和执行)代码的最简单方法是使用Espruino Web IDE，这是一款Chrome应用程序，可以:</p><ul class=""><li id="9750" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">连接一台ESP32(或任何其他Espruino设备)；</li><li id="f173" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">编写JS代码，然后在您的ESP32上执行它；</li><li id="f92f" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">打开一个交互式控制台，在刷新代码之前，您可以在其中调试代码或测试一些方法。</li></ul><p id="7690" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可从以下网址获得:</p><div class="ng nh gp gr ni nj"><a href="https://chrome.google.com/webstore/detail/espruino-web-ide/bleoifhkdalbjfbobjackfdifdneehpo" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">Espruino Web IDE</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">Espruino JavaScript微控制器的终端和图形代码编辑器</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">chrome.google.com</p></div></div><div class="ns l"><div class="ov l nu nv nw ns nx kp nj"/></div></div></a></div><p id="2a99" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要与我们的Espruino建立联系。为此，我们必须更改Espruino Web IDE的默认设置，否则我们将无法以正确的方式连接它。<strong class="kt ir">相信我，我在这上面损失了4个小时</strong>。</p><p id="20a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按右上角的设置按钮，打开“<strong class="kt ir">通信</strong>选项卡，将波特率从9600更改为115200。它将被自动保存。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/745247f11c6730c5d211f2ddf1ccee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TQGz16gBMShmVos7tppPWw.gif"/></div></div></figure><p id="7512" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，现在关闭设置，开始使用您的ESP32！</p><p id="d359" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">按下左上角的“<strong class="kt ir"> Plug </strong>”黄色按钮，选择我们之前找到的端口(在我的例子中是:/dev/cu。SLAB_USBtoUART)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/0485de7686850d1cbbefcf6c52592634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*a-rszGfKGeNWMLSdhq_GVw.gif"/></div></div></figure><p id="645f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果它变成绿色，那么我们是连接的。</p><p id="e8eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们尝试一些简单的东西:一个Hello World(显然)。</p><p id="1827" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，在ide的左侧，当我们连接到Espruino后，现在有一个提示。就是我之前公布的交互控制台。</p><p id="0cae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们写下<code class="fe oq or os oa b">console.log('Hello ESP32!');</code>并按回车键。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/0a80ee9e85df52520bd23b191154a43c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*34jp91zaX-U3VCFjS0xsWw.png"/></div></div></figure><p id="b8d2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这段代码在我们的ESP32上执行，并正确返回。(console.log总是返回undefined)。</p><h1 id="b4ec" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">(最后)我们来写点代码吧！</h1><p id="d150" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在接下来的部分中，我们将利用Espruino的全部潜力来……打开LED灯。(我们有一个良好而简单的开端，我们必须首先关注第一步。我保证，在接下来的文章中，我们会做一些更酷的东西！🤞)</p><p id="5cfe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我们在前面几段已经看到的，ESP32有一个内部LED，该LED连接到引脚n 5。在Espruino中，管脚用D1、D2、D3…D '表示为数字管脚，因此我们可以在变量D5中找到管脚n 5。所有的pin码都已经被Espruino初始化了，所以我们在开始使用它之前不需要声明D5。</p><p id="c5ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用Espruino方法<code class="fe oq or os oa b">digitalWrite</code>在引脚D5上写入，并将其状态从OFF更改为on。注意:<strong class="kt ir">要设置一个LED，你必须传递一个0值。默认情况下(LED关闭)，该值为1 </strong>。我知道这不是世界上最直观的东西，但是请记住它，因为我们将来也会用到它。关于这个，这里有一个很好的解释。</p><p id="ee73" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们试试吧！只要在控制台上写下<code class="fe oq or os oa b">digitalWrite(D5, 0)</code>或者<code class="fe oq or os oa b">digitalWrite(D5, false)</code>，回车即可。您将看到ESP32内部LED现在亮起！🥳</p><p id="b89a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想关掉它，只需执行<code class="fe oq or os oa b">digitalWrite(D5, 1)</code>。</p><p id="a17d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">到目前为止，我们给出了ESP32简单的单行指令，这些指令会立即执行。一些可以无限执行的代码呢？</p><p id="8a2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将编写一些代码来每500毫秒打开和关闭我们内部的LED D5。最好的部分是…我们将使用所有基本的JavaScript指令来完成它，因为我们不需要学习任何新的命令或语言。</p><p id="9afe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是代码，将其复制/粘贴到Espruino Web IDE的右边部分(白色部分):</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="8569" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看着眼熟？这是因为它几乎与您可以在浏览器中运行的JavaScript代码相同！这就是Espruino的美妙之处:它只是JavaScript😉</p><p id="4025" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将扩展Pin对象的<code class="fe oq or os oa b">prototype </code>来添加一个新方法，<strong class="kt ir"> blink </strong>。该方法有一个针对引脚当前状态(开/关)的内部变量，我们将使用<strong class="kt ir"> setInterval </strong>来切换状态，并使用<strong class="kt ir"> digitalWrite </strong>将其写入引脚。</p><p id="cb0c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要将这段代码加载到我们的ESP32中，我们需要按IDE中间的第三个按钮:“Send to Espruino”按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/0f3e5d0329a9f2dbd79c54e1c455a7d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sBTdJipM-Dq37shF7vXzCw.png"/></div></div></figure><p id="838d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几秒钟后，您会注意到LED在闪烁。不错！</p><p id="2758" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们的代码在ESP32的内存中，但是如果你拔掉它，然后再插上USB电缆，它将丢失所有指令并保持空闲。</p><p id="677b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要永久保存我们的指令，以便每次打开设备时它都会执行代码，您需要到控制台键入<strong class="kt ir"> save() </strong>。就这样，过一会儿代码将被保存，现在你也可以把它插入USB电源适配器或USB外部电池，它将按预期工作。</p><h1 id="9a75" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">下一步是什么</h1><p id="da63" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">本文是对以下内容的介绍:</p><ul class=""><li id="e409" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">什么是Espruino，什么是ESP32设备；</li><li id="14cb" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">如何安装Espruino以及如何避免所有首次设置的麻烦；</li><li id="2d97" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">如何使用Espruino Web IDE并连接到我们的ESP32</li><li id="efd5" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">在上面运行一些基本代码并保存代码。</li></ul><p id="e9bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是我们可以用这个便宜的小设备和Javascript做很多很酷的事情。</p><p id="c09a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将在未来几周发布一篇新文章，介绍如何将我们的ESP32连接到WI-FI网络，如何创建接入点，以及如何将其用作物联网节点，以将一些数据发送到外部服务并在浏览器中查看这些数据。</p><p id="f29b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你有任何问题，不要犹豫，在推特上联系我<a class="ae my" href="https://twitter.com/urcoilbisurco" rel="noopener ugc nofollow" target="_blank">！</a></p></div><div class="ab cl pa pb hu pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="ij ik il im in"><h1 id="ca82" class="ln lo iq bd lp lq ph ls lt lu pi lw lx jw pj jx lz jz pk ka mb kc pl kd md me bi translated">更多资源</h1><ul class=""><li id="0ed3" class="mk ml iq kt b ku mf kx mg la pm le pn li po lm mp mq mr ms bi translated">ESP32的Espruino指南:【https://www.espruino.com/ESP32 T4】</li><li id="e93b" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">关于驱动程序和如何找到您的ESP32串行连接的额外信息(<strong class="kt ir"> Windows用户</strong>:这是您的指南):<a class="ae my" href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/establish-serial-connection.html" rel="noopener ugc nofollow" target="_blank">https://docs . espressif . com/projects/esp-IDF/en/latest/ESP32/get-started/establish-serial-connection . html</a></li><li id="b536" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">Espruino方法文档:<a class="ae my" href="https://www.espruino.com/Reference#software" rel="noopener ugc nofollow" target="_blank">https://www.espruino.com/Reference#software</a></li></ul><h2 id="c5ba" class="oe lo iq bd lp pp pq dn lt pr ps dp lx la pt pu lz le pv pw mb li px py md pz bi translated"><strong class="ak">简明英语团队的说明</strong></h2><p id="abaa" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae my" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kt ir">JavaScript in Plain English</strong></a><a class="ae my" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kt ir">AI in Plain English</strong></a><a class="ae my" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kt ir">UX in Plain English</strong></a><a class="ae my" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kt ir">Python in Plain English</strong></a><strong class="kt ir"/>—谢谢，继续学习！</p><p id="c8df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae my" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">submissions @ plain English . io</strong></a><strong class="kt ir"/>，附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
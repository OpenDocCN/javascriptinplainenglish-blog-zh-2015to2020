<html>
<head>
<title>How to merge objects in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中合并对象</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-merge-objects-in-javascript-98f2209710e3?source=collection_archive---------0-----------------------#2019-06-06">https://javascript.plainenglish.io/how-to-merge-objects-in-javascript-98f2209710e3?source=collection_archive---------0-----------------------#2019-06-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="eb56" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何在JavaScript中合并两个或多个对象。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ec52c3b404d5af531739e398405611a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ZTLtP6uVkzLgf8awDgbKA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">learnersbucket.com</figcaption></figure><blockquote class="ks kt ku"><p id="003c" class="kv kw kx ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">我开了一个名为<a class="ae ls" href="https://learnersbucket.com/" rel="noopener ugc nofollow" target="_blank">learnersbucket.com</a>的博客，在那里我写了关于<a class="ae ls" href="https://learnersbucket.com/tutorials/es6/es6-intro/" rel="noopener ugc nofollow" target="_blank"> ES6 </a>、<a class="ae ls" href="https://learnersbucket.com/tutorials/topics/data-structures/" rel="noopener ugc nofollow" target="_blank">数据结构</a>和<a class="ae ls" href="https://learnersbucket.com/examples/topics/algorithms/" rel="noopener ugc nofollow" target="_blank">算法</a>的文章，帮助其他人破解编码面试。在Twitter<a class="ae ls" href="https://twitter.com/LearnersBucket" rel="noopener ugc nofollow" target="_blank">上关注我的定期更新。</a></p></blockquote><p id="87b9" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">JavaScript中几乎所有的东西都是对象，但它仍然没有任何好的方法来合并两个或更多不同的对象。</p><p id="772e" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">在<a class="ae ls" href="https://learnersbucket.com/tutorials/es6/es6-intro" rel="noopener ugc nofollow" target="_blank"> ES6 </a>之后，增加了新的方法，可以用来合并JavaScript中的对象。</p><p id="71c5" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">有两种不同类型的合并可以在对象上执行。<br/> 1)。浅层合并<br/> 2)。深度合并</p><h1 id="a13f" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">浅层合并对象</h1><p id="7faa" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated">在浅层合并中，只合并对象拥有的属性，而不会合并扩展属性或方法。</p><h1 id="20d6" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">使用<code class="fe mt mu mv mw b">...</code> <a class="ae ls" href="https://learnersbucket.com/tutorials/es6/spread-and-rest-operators-in-javascript" rel="noopener ugc nofollow" target="_blank">展开</a>操作符</h1><p id="3b32" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated"><code class="fe mt mu mv mw b">...</code> spread操作符将对象的所有属性复制到另一个对象中。</p><pre class="kd ke kf kg gt mx mw my mz aw na bi"><span id="5457" class="nb lx in mw b gy nc nd l ne nf">let obj1 = {<br/>  name: 'prashant',<br/>  age: 23,<br/>}</span><span id="0d16" class="nb lx in mw b gy ng nd l ne nf">let obj2 = {<br/>  qualification: 'BSC CS',<br/>  loves: 'Javascript'<br/>}</span><span id="1baf" class="nb lx in mw b gy ng nd l ne nf">let merge = {...obj1, ...obj2};</span><span id="f0dd" class="nb lx in mw b gy ng nd l ne nf">console.log(merge);</span><span id="3f55" class="nb lx in mw b gy ng nd l ne nf">/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  qualification: "BSC CS"<br/>}<br/>*/</span></pre><h1 id="3607" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated"><strong class="ak">使用</strong><a class="ae ls" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noopener ugc nofollow" target="_blank"><strong class="ak">object . assign()</strong></a><strong class="ak">方法</strong></h1><p id="21b9" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated"><code class="fe mt mu mv mw b">Object.assign(target, source1, soure2, ...)</code>方法将源对象所有可枚举的自身属性复制到目标对象并返回目标对象。</p><pre class="kd ke kf kg gt mx mw my mz aw na bi"><span id="3e12" class="nb lx in mw b gy nc nd l ne nf">let obj1 = {<br/>  name: 'prashant',<br/>  age: 23,<br/>}</span><span id="5d26" class="nb lx in mw b gy ng nd l ne nf">let obj2 = {<br/>  qualification: 'BSC CS',<br/>  loves: 'Javascript'<br/>}</span><span id="bba6" class="nb lx in mw b gy ng nd l ne nf">let merge = Object.assign({}, obj1, obj2);;</span><span id="b452" class="nb lx in mw b gy ng nd l ne nf">console.log(merge);</span><span id="6973" class="nb lx in mw b gy ng nd l ne nf">/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  qualification: "BSC CS"<br/>}<br/>*/</span></pre><p id="fd4d" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">我们使用了一个空对象<code class="fe mt mu mv mw b">{}</code>作为目标，并传递了应该合并到目标中的源对象。</p><h1 id="c909" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">使用自定义函数合并对象</h1><p id="0e5b" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated">我们也可以创建自定义函数来合并两个或多个对象。</p><pre class="kd ke kf kg gt mx mw my mz aw na bi"><span id="e1d9" class="nb lx in mw b gy nc nd l ne nf">let merge = (...arguments) =&gt; {<br/>  <br/>  // Create a new object<br/>  let target = {};</span><span id="140a" class="nb lx in mw b gy ng nd l ne nf">  // Merge the object into the target object<br/>  let merger = (obj) =&gt; {<br/>     for (let prop in obj) {<br/>       if (obj.hasOwnProperty(prop)) {<br/>         // Push each value from `obj` into `target`<br/>         target[prop] = obj[prop];<br/>       }<br/>     }<br/>  };</span><span id="f44f" class="nb lx in mw b gy ng nd l ne nf">   // Loop through each object and conduct a merge<br/>  for (let i = 0; i &lt; arguments.length; i++) {<br/>    merger(arguments[i]);<br/>  }</span><span id="2a85" class="nb lx in mw b gy ng nd l ne nf">  return target;<br/>}</span><span id="e631" class="nb lx in mw b gy ng nd l ne nf">let obj1 = {<br/>  name: 'prashant',<br/>  age: 23,<br/>}</span><span id="7047" class="nb lx in mw b gy ng nd l ne nf">let obj2 = {<br/>  qualification: 'BSC CS',<br/>  loves: 'Javascript'<br/>}</span><span id="f462" class="nb lx in mw b gy ng nd l ne nf">let merged = merge(obj1, obj2);;</span><span id="5701" class="nb lx in mw b gy ng nd l ne nf">console.log(merged);</span><span id="1a03" class="nb lx in mw b gy ng nd l ne nf">/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  qualification: "BSC CS"<br/>}<br/>*/</span></pre><h1 id="6aa6" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">深度合并对象</h1><p id="ea5a" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated">要深度合并一个对象，我们必须复制它自己的属性和扩展属性，如果它存在的话。</p><p id="2f17" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">最好的方法是创建一个自定义函数。</p><pre class="kd ke kf kg gt mx mw my mz aw na bi"><span id="1f15" class="nb lx in mw b gy nc nd l ne nf">let merge = (...arguments) =&gt; {<br/>  let target = {};</span><span id="a72c" class="nb lx in mw b gy ng nd l ne nf">  // Merge the object into the target object<br/>  let merger = (obj) =&gt; {<br/>      for (let prop in obj) {<br/>        if (obj.hasOwnProperty(prop)) {<br/>          if (Object.prototype.toString.call(obj[prop]) === '[object Object]'){<br/>            // If we're doing a deep merge <br/>            // and the property is an object<br/>            target[prop] = merge(target[prop], obj[prop]);<br/>          } else {<br/>            // Otherwise, do a regular merge<br/>            target[prop] = obj[prop];<br/>          }<br/>         }<br/>      }<br/>  };</span><span id="e800" class="nb lx in mw b gy ng nd l ne nf">   //Loop through each object and conduct a merge<br/>   for (let i = 0; i &lt; arguments.length; i++) {<br/>      merger(arguments[i]);<br/>   }</span><span id="42da" class="nb lx in mw b gy ng nd l ne nf">     return target;<br/>};</span><span id="98ae" class="nb lx in mw b gy ng nd l ne nf">let obj1 = {<br/>  name: 'prashant',<br/>  age: 23,<br/>  nature: {<br/>    "helping": true,<br/>    "shy": false<br/>  }<br/>}</span><span id="16d8" class="nb lx in mw b gy ng nd l ne nf">let obj2 = {<br/>  qualification: 'BSC CS',<br/>  loves: 'Javascript',<br/>  nature: {<br/>    "angry": false,<br/>    "shy": true<br/>  }<br/>}</span><span id="c208" class="nb lx in mw b gy ng nd l ne nf">console.log(merge(obj1, obj2));</span><span id="ec33" class="nb lx in mw b gy ng nd l ne nf">/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  nature: Object {<br/>    angry: false,<br/>    helping: true,<br/>    shy: true<br/>  },<br/>  qualification: "BSC CS"<br/>}<br/>*/</span></pre><p id="38f2" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">我们可以将浅层复制和深层复制的函数组合在一起，创建一个基于传递的参数执行merge的函数。</p><p id="ffb5" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">如果我们将<code class="fe mt mu mv mw b">true</code>作为第一个参数传递，那么它将执行深度合并，否则它将执行浅层合并。</p><pre class="kd ke kf kg gt mx mw my mz aw na bi"><span id="1bcc" class="nb lx in mw b gy nc nd l ne nf">let merge = (...arguments) =&gt; {</span><span id="c8d8" class="nb lx in mw b gy ng nd l ne nf">   // Variables<br/>   let target = {};<br/>   let deep = false;<br/>   let i = 0;</span><span id="a37a" class="nb lx in mw b gy ng nd l ne nf">   // Check if a deep merge<br/>   if (typeof (arguments[0]) === 'boolean') {<br/>      deep = arguments[0];<br/>      i++;<br/>   }</span><span id="8f00" class="nb lx in mw b gy ng nd l ne nf">   // Merge the object into the target object<br/>   let merger = (obj) =&gt; {<br/>      for (let prop in obj) {<br/>         if (obj.hasOwnProperty(prop)) {<br/>           if (deep &amp;&amp; Object.prototype.toString.call(obj[prop]) === '[object Object]') {<br/>           // If we're doing a deep merge <br/>           // and the property is an object<br/>              target[prop] = merge(target[prop], obj[prop]);<br/>          } else {<br/>           // Otherwise, do a regular merge<br/>           target[prop] = obj[prop];<br/>          }<br/>       }<br/>     }<br/>   };</span><span id="d63e" class="nb lx in mw b gy ng nd l ne nf">    //Loop through each object and conduct a merge<br/>    for (; i &lt; arguments.length; i++) {<br/>       merger(arguments[i]);<br/>    }</span><span id="6892" class="nb lx in mw b gy ng nd l ne nf">    return target;<br/>};</span><span id="1c35" class="nb lx in mw b gy ng nd l ne nf">let obj1 = {<br/>  name: 'prashant',<br/>  age: 23,<br/>  nature: {<br/>    "helping": true,<br/>    "shy": false<br/>  }<br/>}</span><span id="ba17" class="nb lx in mw b gy ng nd l ne nf">let obj2 = {<br/>  qualification: 'BSC CS',<br/>  loves: 'Javascript',<br/>  nature: {<br/>    "angry": false,<br/>    "shy": true<br/>  }<br/>}</span><span id="83c3" class="nb lx in mw b gy ng nd l ne nf">//Shallow merge<br/>console.log(merge(obj1, obj2));</span><span id="1e10" class="nb lx in mw b gy ng nd l ne nf">/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  nature: Object {<br/>    angry: false,<br/>    shy: true<br/>  },<br/>  qualification: "BSC CS"<br/>}<br/>*/</span><span id="26b3" class="nb lx in mw b gy ng nd l ne nf">//Deep merge<br/>console.log(merge(true, obj1, obj2));<br/>/*<br/>Object {<br/>  age: 23,<br/>  loves: "Javascript",<br/>  name: "prashant",<br/>  nature: Object {<br/>    angry: false,<br/>    helping: true,<br/>    shy: true<br/>  },<br/>  qualification: "BSC CS"<br/>}<br/>*/</span></pre><p id="7490" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated">还有其他一些库可以用来合并两个对象，比如</p><h1 id="7b92" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">Jquery的<a class="ae ls" href="https://api.jquery.com/jQuery.extend/#jQuery-extend-target-object1-objectN" rel="noopener ugc nofollow" target="_blank"> $。</a>扩展()【方法】</h1><p id="9089" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated"><code class="fe mt mu mv mw b">$.extend(deep, copyTo, copyFrom)</code>可用于对javascript中的任何数组或对象进行完整的深度复制。</p><h1 id="c1d2" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">洛达什<a class="ae ls" href="https://www.npmjs.com/package/lodash.merge" rel="noopener ugc nofollow" target="_blank">合并()</a>法</h1><p id="5ca6" class="pw-post-body-paragraph kv kw in ky b kz mo jo lb lc mp jr le lt mq lh li lu mr ll lm lv ms lp lq lr ig bi translated">它将通过递归执行深度合并来合并对象和数组。</p><p id="8bf5" class="pw-post-body-paragraph kv kw in ky b kz la jo lb lc ld jr le lt lg lh li lu lk ll lm lv lo lp lq lr ig bi translated"><em class="kx">原载于2019年6月6日</em><a class="ae ls" href="https://learnersbucket.com/examples/javascript/how-to-merge-objects-in-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="kx">https://learnersbucket.com</em></a><em class="kx">。</em></p></div></div>    
</body>
</html>
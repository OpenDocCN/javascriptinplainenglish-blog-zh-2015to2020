<html>
<head>
<title>Build A ToDo App Using GraphQL And Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GraphQL和Node.js构建一个ToDo应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-todo-app-using-graphql-and-node-js-59d16feef60f?source=collection_archive---------1-----------------------#2020-11-28">https://javascript.plainenglish.io/build-a-todo-app-using-graphql-and-node-js-59d16feef60f?source=collection_archive---------1-----------------------#2020-11-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c0cd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第1部分:实现后端服务</h2></div><p id="6f5f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们使用GraphQL和Node.js构建一个ToDo MERN应用程序，在这一部分，我们将实现一个后端服务。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/d223213b3bf0545bf81e4d13a6c0ce05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rCubdBhrW7XlUiyd"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Photo by <a class="ae lo" href="https://unsplash.com/@elisebouet?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Elise Bouet</a> on <a class="ae lo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="e8a6" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">介绍</h2><p id="dfa1" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在本文中，我们将使用GraphQL创建一个后端服务，即Apollo服务器和MongoDB数据库。</p><p id="19fb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将使用<code class="fe mn mo mp mq b">MongoDB</code>数据库，所以请确保您将它安装在本地，或者您可以使用MongoDB的免费<a class="ae lo" href="https://www.mongodb.com/cloud/atlas" rel="noopener ugc nofollow" target="_blank">云</a>服务。</p><p id="2942" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过创建此应用程序，您将了解到</p><ul class=""><li id="7f4f" class="mr ms in ke b kf kg ki kj kl mt kp mu kt mv kx mw mx my mz bi translated">如何设计GraphQL模式？</li><li id="e196" class="mr ms in ke b kf na ki nb kl nc kp nd kt ne kx mw mx my mz bi translated">如何设计查询和变异？</li><li id="8fcc" class="mr ms in ke b kf na ki nb kl nc kp nd kt ne kx mw mx my mz bi translated">如何使用GraphQL API构建CRUD app？</li></ul><h2 id="9633" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">初始设置</h2><p id="cf6e" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">使用<code class="fe mn mo mp mq b">npm</code>创建一个新项目</p><p id="f6b4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mn mo mp mq b">npm init -y</code></p><p id="aec5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该命令将在<code class="fe mn mo mp mq b">package.json</code>中设置默认值</p><p id="b0c4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建项目后，安装必要的依赖项</p><p id="ee33" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mn mo mp mq b">npm i apollo-server mongoose graphql dotenv</code></p><h2 id="2f94" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">创建初始文件</h2><p id="1454" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在项目的根目录下创建一个名为<code class="fe mn mo mp mq b">server.js</code>的新文件。</p><p id="ba5d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不要忘记添加<code class="fe mn mo mp mq b">.env</code>文件。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bb9594792be14e455534325465f506c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*KQ5lTgZ6gEFCAomqEHI_AQ.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Root Directory Structure</figcaption></figure><p id="6160" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个文件中，我们正在设置我们的服务器。目前，我们使用虚拟数据进行测试。</p><p id="756f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们定义了GraphQL模式和解析器。</p><p id="720e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每个GraphQL服务器都使用一个<strong class="ke io">模式</strong>来定义客户端可以查询的数据结构。</p><p id="ea49" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">解析器</strong>告诉GraphQL服务器获取与特定类型相关的数据。</p><p id="2a1e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意:目前我们使用一个<strong class="ke io">虚拟模式。</strong></p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Apollo Server running for testing</figcaption></figure><p id="d236" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们运行并检查，运行这个文件<code class="fe mn mo mp mq b">node server.js</code></p><h2 id="1932" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">设置数据库</h2><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="d0ae" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里<code class="fe mn mo mp mq b">process.env.DATABASE_URL</code>在<code class="fe mn mo mp mq b">.env</code>文件中保存实际的数据库服务器地址。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/63457aba54d1fb859d54add6bee9e05f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*0qTrTwN-lNvaofKmPULPSg.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">.env</figcaption></figure><h2 id="369d" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">设计猫鼬模型</h2><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Mongoose Model</figcaption></figure><h2 id="80e0" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">为ToDo设计GraphQL架构</h2><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">GraphQL schema</figcaption></figure><p id="340f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">A <code class="fe mn mo mp mq b">type</code>定义了数据库中每个待办事项的可查询字段，而<code class="fe mn mo mp mq b">input</code>定义了数据的输入结构。</p><p id="1f5d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mn mo mp mq b">Mutation</code>类型定义写操作的入口点。</p><p id="7dfb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">GraphQL支持开箱即用的标量类型:<code class="fe mn mo mp mq b">ID</code>、<code class="fe mn mo mp mq b">String</code>、<code class="fe mn mo mp mq b">Boolean</code>、<code class="fe mn mo mp mq b">Int</code>和<code class="fe mn mo mp mq b">Float</code>。</p><p id="bed8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">查询和变异接受标量和自定义类型的参数。</p><h2 id="e004" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">创建解析器</h2><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Resolvers</figcaption></figure><p id="396a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">解析器将接受来自客户端的参数。</p><h2 id="d0b8" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">运行应用程序</h2><p id="c153" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">使用<code class="fe mn mo mp mq b">node server.js</code>运行应用程序</p><p id="44aa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如你在这里看到的。在IDE中为您创建的文档。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nj"><img src="../Images/e4c0bf03468f3f332e6a424f011ccabc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFe4IXLPf4kMPmgUuAx8FA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">GraphQL Server running</figcaption></figure><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">GraphQL ToDo app</figcaption></figure><h2 id="f729" class="lp lq in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">代号:<a class="ae lo" href="https://github.com/pprathameshmore/todo-graphql-mern-app" rel="noopener ugc nofollow" target="_blank">https://github.com/pprathameshmore/todo-graphql-mern-app</a></h2></div></div>    
</body>
</html>
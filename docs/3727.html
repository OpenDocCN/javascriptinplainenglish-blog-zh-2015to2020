<html>
<head>
<title>Storybook Is Your New UI Component Explorer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">故事书是你新的UI组件浏览器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/storybook-is-your-new-ui-component-explorer-22e9e69b9d0f?source=collection_archive---------7-----------------------#2020-10-20">https://javascript.plainenglish.io/storybook-is-your-new-ui-component-explorer-22e9e69b9d0f?source=collection_archive---------7-----------------------#2020-10-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9a13" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">开发、演示和记录用户界面组件的单一工具</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2988e48bb1cdf347fce660da9d12ad3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FbJ0uZSryW9sQbpc"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@jannerboy62?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nick Fewings</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="bded" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">我的旅程</h1><p id="d7c4" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我的代码库有50多个不同的组件，用于输入、布局、导航和演示。这些组件中的每一个都有许多不同的道具来控制许多变化和功能。有这么多的可能性，很难跟踪和记住所有的功能。</p><p id="a98c" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">不过对我来说，自从我开发它们以来，这并不是什么大问题。但是新的贡献者没有这个背景和经验，结果学习组件库很费劲。他们必须通读组件代码，或者查看产品代码中组件的实际用法才能理解它。不管怎样，这都不是一次对开发者友好的体验。很明显，围绕组件库的某种形式的文档是必要的。这就是故事书的由来。</p><h1 id="4304" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">故事书</h1><p id="b0dc" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><a class="ae ks" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>是一个开发、演示和记录组件库的工具。它由一个个故事组成，每个故事都展示了一个特定的组成部分，提供了一个丰富的可视化和互动的平台。通过这个，用户可以了解一个组件是如何工作的以及它是如何被控制的。这些故事有效地变成了代码文档。</p><p id="fb1a" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">Storybook的这些演示和文档功能也可以用于组件开发。Storybook提供了一个非常适合创建通用组件的独立开发环境。它提供的平台可用于在不同的场景中快速测试新组件，以实现快速迭代开发。</p><h1 id="ef4b" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">故事书游乐场</h1><p id="3306" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">如前所述，故事书不仅仅是故事的静态展示。它也是一个交互式游戏场，用户可以动态地更改组件及其环境，以查看它在不同场景下的外观和行为。</p><p id="7dd5" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="https://www.npmjs.com/package/@storybook/addon-actions" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io">动作</strong> </a>允许您将模拟函数传递到您的组件中，该组件将在被调用时记录并显示动作选项卡中的输入数据，以便您可以了解这些函数是如何工作的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/ca7d4158a2788ac0c96faafd3ae3d48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5Nx-4R-DC1Z8Acz7GT8yag.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Storybook Actions</figcaption></figure><p id="d220" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="https://www.npmjs.com/package/@storybook/addon-backgrounds" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io">背景</strong> </a>允许你改变故事背景，这样你就可以看到组件在不同颜色环境下的样子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/c3edb1f99a9ec4619af6a27e929a283f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*e7M2sUeo4ncLZ1Jc82f22g.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Storybook Background Controls</figcaption></figure><p id="a725" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="https://www.npmjs.com/package/@storybook/addon-controls" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io">控件</strong> </a>允许您直接根据组件定义的<code class="fe mn mo mp mq b">propTypes</code>在UI中动态改变组件的属性，以便您可以了解属性如何影响组件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/55cc26ffe92ab3fcf49ef8b073227145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZHP6KU--bPKCjNcLJ6pNXw.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Storybook Component Controls</figcaption></figure><p id="a5a9" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="https://www.npmjs.com/package/@storybook/addon-docs" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io"> Docs </strong> </a>自动为您的故事生成文档，包括道具表、源代码和降价文档，所有这些都在一个视图中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/c65fea629a3a4f1b9bf7abc7a1bdb48a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SrosRK6cPpe0NtjOzfGzqQ.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Storybook Docs</figcaption></figure><p id="301e" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="https://www.npmjs.com/package/@storybook/addon-viewport" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io">视口</strong> </a>允许你改变视口，这样你就可以看到组件在不同屏幕尺寸环境下的表现。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/84666e868107e64f5243bbe791a13193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Jt2utPFZRbMLP0pP5wuh_A.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Storybook Viewport Controls</figcaption></figure><h1 id="fafd" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">故事书设置</h1><p id="dfa7" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">首先，Storybook提供了一个方便的设置工具:<code class="fe mn mo mp mq b">npx storybook init</code>。这将</p><ul class=""><li id="7e99" class="mr ms in ln b lo mh lr mi lu mt ly mu mc mv mg mw mx my mz bi translated">安装故事书和所有必要的依赖项</li><li id="7343" class="mr ms in ln b lo na lr nb lu nc ly nd mc ne mg mw mx my mz bi translated">向<code class="fe mn mo mp mq b">package.json</code>添加<code class="fe mn mo mp mq b">storybook</code>和<code class="fe mn mo mp mq b">build-storybook</code>命令，它们将分别在开发模式下运行Storybook和为生产构建Storybook</li><li id="a9b3" class="mr ms in ln b lo na lr nb lu nc ly nd mc ne mg mw mx my mz bi translated">创建一个包含运行故事书所需配置的<code class="fe mn mo mp mq b">.storybook</code>文件夹</li><li id="66d8" class="mr ms in ln b lo na lr nb lu nc ly nd mc ne mg mw mx my mz bi translated">创建一个<code class="fe mn mo mp mq b">stories</code>文件夹，你所有的故事都将存在其中</li></ul><h1 id="99b6" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">故事设置</h1><p id="d318" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">故事存在于以<code class="fe mn mo mp mq b">.stories.js</code>结尾的文件中。其中的每一个都是给定组件的故事集合。组件故事的设置是通过默认导出完成的。</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="4b93" class="nj ku in mq b gy nk nl l nm nn">// Button.stories.js<br/>import { Button } from './Button';</span><span id="a11a" class="nj ku in mq b gy no nl l nm nn">export default {<br/>  title: 'Example/Button',<br/>  component: Button,<br/>  argTypes: {<br/>    backgroundColor: { control: 'color' },<br/>  },<br/>  args: {<br/>    label: 'Button',<br/>  },<br/>  parameters: {<br/>    controls: {<br/>      expanded: true,<br/>    },<br/>  },<br/>  decorators: [<br/>    story =&gt; (<br/>      &lt;div style={{ display: 'flex', justifyContent: 'center' }}&gt;<br/>        {story()}<br/>      &lt;/div&gt;<br/>    ),<br/>  ],<br/>};</span></pre><p id="2edf" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">标题</strong>定义组件故事的标题以及它应该属于哪个部分。这个组件故事的标题是<code class="fe mn mo mp mq b">Button</code>，在<code class="fe mn mo mp mq b">Example</code>部分。这个标题在你的故事书中必须是唯一的。</p><p id="cdca" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">组件是一个可选的配置，你只需简单地传递组件本身。Storybook将使用该组件自动生成一个道具表，并根据组件的<code class="fe mn mo mp mq b">propTypes</code>和<code class="fe mn mo mp mq b">defaultProps</code>创建控件来动态控制道具。</p><p id="b819" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io"> ArgTypes </strong>是<strong class="ln io"> </strong>定义属性表内容的可选配置。大多数情况下，这是不必要的，因为您的故事书可以通过使用上面的<code class="fe mn mo mp mq b">component</code>字段自动生成它们，但有时需要手动干预。在这个例子中，<code class="fe mn mo mp mq b">backgroundColor</code>必须是一个颜色，但是为它定义的propType是<code class="fe mn mo mp mq b">PropType.string</code>，Storybook将把它解释为一个自由形式的文本输入控件。通过手动将控制设置为<code class="fe mn mo mp mq b">color</code>，现在可以通过色轮控制<code class="fe mn mo mp mq b">backgroundColor</code>。</p><p id="a025" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io"> Args </strong>是一个可选的配置，它定义了组件的所有<em class="np">故事都将拥有的道具，因此您不需要为单个故事反复定义道具。</em></p><p id="7348" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">参数</strong>是可选配置，用于配置故事书功能。在本例中，Controls有一个<code class="fe mn mo mp mq b">expanded</code>属性，当使用参数将其设置为<code class="fe mn mo mp mq b">true</code>时，将展开道具表以显示<em class="np">描述</em>和<em class="np">默认道具</em>列。</p><p id="d9fe" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">装饰者是一个可选的配置，它会用额外的JSX包装每个故事。在这个例子中，装饰者将使每个故事居中。当您的组件需要包装在React Router或React Redux之类的上下文中时，这尤其有用。</p><h1 id="ec57" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">故事内容</h1><p id="eefd" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">故事内容是通过命名导出创建的。每个命名的导出都会呈现一个组件的变体或功能。</p><pre class="kd ke kf kg gt nf mq ng nh aw ni bi"><span id="a5ec" class="nj ku in mq b gy nk nl l nm nn">// Button.stories.js<br/>import { Button } from './Button';</span><span id="0914" class="nj ku in mq b gy no nl l nm nn">const Template = args =&gt; &lt;Button {...args} /&gt;;</span><span id="7a3d" class="nj ku in mq b gy no nl l nm nn">export const Primary = Template.bind({});<br/>Primary.args = {<br/>  primary: true,<br/>};</span><span id="0afe" class="nj ku in mq b gy no nl l nm nn">export const Large = Template.bind({});<br/>Large.args = {<br/>  size: 'large',<br/>};</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nq"><img src="../Images/8a73d3757a3d9bced7086f5bc625ad54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2IDwNlq1k8rApBFZE95Qw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Story Content</figcaption></figure><p id="9d05" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><code class="fe mn mo mp mq b">Template</code>是一个抽象层，定义了组件是如何呈现的。每个命名的导出使用<code class="fe mn mo mp mq b">bind</code>创建这个模板的副本，并通过<code class="fe mn mo mp mq b">args</code>定义故事的道具。Storybook将采用这些并以导出名称作为标题展示故事。瞧，你有你的故事了！</p><p id="cd9a" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">现在，在你问之前，是的，有些看起来是不必要的，特别是对于React，但是Storybook支持其他Javascript框架，比如Vue和Angular，这种编码模式的好处更加明显。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><h1 id="55fc" class="kt ku in bd kv kw ny ky kz la nz lc ld jt oa ju lf jw ob jx lh jz oc ka lj lk bi translated">最后的想法</h1><p id="3f44" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">故事书让我和我的团队受益匪浅。它使开发人员能够通过动态UI控件在不同的场景中快速开发和测试新组件。它使开发人员能够在一个地方展示和记录他们组件库的所有特性。它使用户能够在一个简单而强大的交互式平台上快速学习组件库的特性。简单来说，Storybook是任何综合组件库的必备工具。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><h1 id="46b2" class="kt ku in bd kv kw ny ky kz la nz lc ld jt oa ju lf jw ob jx lh jz oc ka lj lk bi translated">资源</h1><ul class=""><li id="35da" class="mr ms in ln b lo lp lr ls lu od ly oe mc of mg mw mx my mz bi translated"><a class="ae ks" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">官方故事书文档</a></li><li id="6907" class="mr ms in ln b lo na lr nb lu nc ly nd mc ne mg mw mx my mz bi translated"><a class="ae ks" href="https://github.com/mjchang/medium/tree/master/storybook-1" rel="noopener ugc nofollow" target="_blank">本文Github回购</a></li></ul></div></div>    
</body>
</html>
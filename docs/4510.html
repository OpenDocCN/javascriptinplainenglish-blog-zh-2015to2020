<html>
<head>
<title>A Minimal Node.js Setup: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最简单的Node.js设置:第2部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-minimal-node-js-setup-part-2-eslint-prettier-vs-code-7963768dbb30?source=collection_archive---------0-----------------------#2020-12-17">https://javascript.plainenglish.io/a-minimal-node-js-setup-part-2-eslint-prettier-vs-code-7963768dbb30?source=collection_archive---------0-----------------------#2020-12-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1d63" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ESLint，更漂亮+ VSCode</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1f0384a88526abd967d10aa3a726edc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOZUzZPXVmPGr0OEU0Prag.png"/></div></div></figure><p id="1946" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是我关于使用Babel建立一个最小的Node.js &amp; Express项目的系列文章的第2/2部分。点击这里查看《T2》第一部:</p><div class="lk ll gp gr lm ln"><a href="https://medium.com/javascript-in-plain-english/a-minimal-node-js-express-babel-setup-part-1-6be7b3f3bb55" rel="noopener follow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">一个最小的Node.js、Express和Babel设置</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">让我们设置一个使用Babel的基本Node.js / Express.js API。巴别塔将“移植”我们的ES2015+代码和模块…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">medium.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb km ln"/></div></div></a></div><p id="f0c6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在<strong class="kq io"> Part 1 </strong>中，我在一个fresh Node / Express项目中设置了Babel，谈到了节点版本化，设置脚本使用Babel进行开发和生产，考虑Babel是否还值得(<em class="mc">tldr；我觉得两个方向都公平</em>。</p><p id="451f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这篇文章中，我们将通过在我们的节点项目中设置<a class="ae md" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>和<a class="ae md" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">beautiful</a>来工作，然后具体看看我在<a class="ae md" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS Code </a>中使用的几个设置选项。为什么这个设置在我的“最小设置”系列中？我认为用一些自动样式化和静态检查来启动项目是很关键的，这样可以发现开箱即用的最佳实践/ bug检测。</p><p id="7cc1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们要解决的一个关键问题是“<em class="mc">我们如何让ESLint和Prettier更好地合作？”</em>幸运的是，这是现代节点开发中非常常见的工作流。</p><p id="c3f2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">整个设置的代码(我的文章第1和第2部分)可以在这里找到:</p><div class="lk ll gp gr lm ln"><a href="https://github.com/neightjones/node-babel-template" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">邻居/节点巴别塔模板</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">该模板使用babel创建了一个基本的Node.js / Express.js API。它还为eslint和…设置了很好的默认值</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">github.com</p></div></div><div class="lw l"><div class="me l ly lz ma lw mb km ln"/></div></div></a></div></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="64b0" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">背景:ESLint &amp; Prettier</h1><p id="be67" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated"><strong class="kq io"> ESLint </strong></p><p id="3be8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ESLint直接从他们的网站静态地分析你的代码以快速发现问题。ESLint将检查您的代码，看您是否违反了它的任何规则(有许多默认值，您也可以自定义规则集)。例如，<a class="ae md" href="https://eslint.org/docs/rules/no-dupe-keys" rel="noopener ugc nofollow" target="_blank">这里有一个规则叫做</a> <code class="fe nj nk nl nm b"><a class="ae md" href="https://eslint.org/docs/rules/no-dupe-keys" rel="noopener ugc nofollow" target="_blank">no-dupe-keys</a></code>。这一点非常简单——如果你创建了一个类似于<code class="fe nj nk nl nm b">const x = { hello: 'world', hello: 'Nate' }</code>的对象，ESLint会认为这是你代码中的一个错误。像这样的规则非常有用，因为它们可以防止你犯错误。其他规则不太关注明显的错误，而更关注最佳实践。</p><p id="ab03" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">更漂亮</strong></p><p id="376f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正如他们提到的那样，Prettier是“一个固执己见的代码格式化程序”这意味着他们不想给你太多的选择，而是希望你接受他们帮助你维护的代码风格。不过，我们将讨论如何进行一些基本的样式覆盖。我不介意它的强烈意见——样式在很大程度上被开发人员社区所接受，自动格式化对于开发的一致性和易用性来说是一大胜利。</p><p id="5c3e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">那么有什么区别呢？有重叠吗？</strong></p><p id="c9fd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同时使用这两种工具一定有意义吗？绝对的。<a class="ae md" href="https://prettier.io/docs/en/comparison.html" rel="noopener ugc nofollow" target="_blank">漂亮点的说最好，这里。</a>本质上，Prettier负责所有与样式相关的规则(箭头函数中的空格、逗号、分号、括号)，ESLint负责所有与样式无关的事情，比如未使用的变量、对象文字中的重复键等等。</p><p id="9200" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是，事实上存在重叠，因为ESLint也包含一些与样式相关的规则。因此，我们的目标是设置一些东西，以确保ESLint的风格相关规则不会与我们的更漂亮的设置相冲突，因为我们选择使用更漂亮的作为我们的权威风格。</p><p id="d4f0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们从代码开始…第一步，让我们做一些基本的ESLint设置。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="0343" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">步骤1:基本ESLint设置</h1><p id="8492" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated"><a class="ae md" href="https://github.com/neightjones/node-babel-template" rel="noopener ugc nofollow" target="_blank">上面链接的回购</a>有此设置的所有最终代码。</p><p id="98fe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从以下安装开始:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="694d" class="nr mn in nm b gy ns nt l nu nv">npm install --save-dev eslint eslint-config-airbnb-base eslint-plugin-import</span></pre><p id="49f3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这些是干什么用的？</p><ul class=""><li id="f749" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">eslint</code>是主ESLint包</li><li id="fd3d" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">eslint-config-airbnb-base</code> : ESLint运行您或第三方可以定义的各种规则集，包括选择哪些语法规则是错误的，或者只是警告等。Airbnb规则集是一个非常受欢迎的选项，可以自动建立一套可靠的规则</li><li id="9d3c" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">eslint-plugin-import</code> <a class="ae md" href="https://www.npmjs.com/package/eslint-plugin-import" rel="noopener ugc nofollow" target="_blank">是一个</a>包，帮助林挺处理ES模块风格<code class="fe nj nk nl nm b">import</code> / <code class="fe nj nk nl nm b">export</code>语句以及文件路径等。事实上，我们的Airbnb包指出我们也需要这个包来使用它的规则</li></ul><p id="9792" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们创建一个名为<code class="fe nj nk nl nm b">.eslintrc.js</code>的文件，其中包含我们的ESLint配置。首先，它看起来像这样:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ok ol l"/></div></figure><ul class=""><li id="c2e7" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated">首先，<a class="ae md" href="https://eslint.org/docs/user-guide/configuring#specifying-environments" rel="noopener ugc nofollow" target="_blank">我们指定环境</a>，它定义了一组全局变量。我们用现代的<code class="fe nj nk nl nm b">es2021</code></li><li id="8e5d" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated">其次，我们<code class="fe nj nk nl nm b">extend</code><code class="fe nj nk nl nm b">airbnb-base</code>——现在我们使用Airbnb林挺规则</li><li id="4785" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated">最后，我们在<code class="fe nj nk nl nm b">parserOptions</code>中设置<code class="fe nj nk nl nm b">ecmaVersion</code>和<code class="fe nj nk nl nm b">sourceType</code>——<code class="fe nj nk nl nm b">ecmaVersion</code>实际上是由我们的<code class="fe nj nk nl nm b">es2021</code> <code class="fe nj nk nl nm b">env</code>值自动设置的(es2021 === es12)，但我们将把它留在这里，我们使用es模块，因此使用<code class="fe nj nk nl nm b">module</code></li></ul><p id="5502" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们检查一下到目前为止它是否工作。将这一行作为新脚本添加到您的<code class="fe nj nk nl nm b">package.json</code>中:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="7ee5" class="nr mn in nm b gy ns nt l nu nv">"scripts": {<br/>  // ...other scripts,<br/>  "lint": "eslint \"src/**/*.js\""<br/>}</span></pre><p id="8e9b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">继续从项目的根目录运行<code class="fe nj nk nl nm b">npm run lint</code>,看看会弹出什么。当本文发布时，我将修复示例回购中的林挺错误，但这里有一些我看到的示例错误(也有警告):</p><ul class=""><li id="49e7" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated">错误import语句后应有1个空行，后面没有另一个import import/newline-after-import `命令</li><li id="589e" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">Expected 1 empty line after import statement not followed by another import</code> —这是关于导入后空行的样式相关规则</li><li id="d03d" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">'next' is defined but never used</code> —这是一个未使用的变量错误，与Express端点中的<code class="fe nj nk nl nm b">next</code>参数有关(在我的设置的第1部分中生成)</li><li id="a0f0" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">Unable to resolve path to module '#routes/index'</code> —这个很有趣……<a class="ae md" href="https://medium.com/javascript-in-plain-english/a-minimal-node-js-express-babel-setup-part-1-6be7b3f3bb55" rel="noopener">在第1部分</a>中，我们用别名巴别塔建立了绝对进口ESLint应该如何理解这一点？我们将在稍后的帖子中处理它</li></ul><p id="f41e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是一个好的开始——现在我们知道我们的linter可以正常工作，并且是按照Airbnb规则正确设置的。我们已经可以看到ESLint在抱怨一个样式项目(导入后的空行)，所以接下来我们将设置prettle并确保ESLint <em class="mc">不关心样式规则，因为我们将这一任务专门委托给prettle。</em></p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="9172" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">第二步:添加更漂亮的</h1><p id="3440" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">接下来，让我们安装更漂亮的:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="0322" class="nr mn in nm b gy ns nt l nu nv">npm install --save-dev prettier </span></pre><p id="72ea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们再给我们的<code class="fe nj nk nl nm b">package.json</code>添加一个脚本:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="8a6d" class="nr mn in nm b gy ns nt l nu nv">"scripts": {<br/>  // ... other scripts,<br/>  "format": "prettier --write \"src/**/*.js\""<br/>}</span></pre><p id="57e3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">继续运行<code class="fe nj nk nl nm b">npm run format</code>，它会告诉prettle自动为我们检查并格式化代码(也就是说，如果你的文件还没有达到prettle的标准，它实际上会改变你的文件)。</p><p id="25d5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有用！但是有些东西对我来说并不理想…例如，你可以在示例项目中看到，我使用单引号。在运行完<code class="fe nj nk nl nm b">npm run format</code>之后，除了其他更新之外，Prettier更新了我所有的代码，使用双引号。我们可以在你的项目的顶部定制一个<code class="fe nj nk nl nm b">.prettierrc</code>文件，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="b4e9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该配置强制使用分号，在所有对象、数组等后面添加逗号。，强制使用单引号，并设置每行最多80个字符。再运行一次<code class="fe nj nk nl nm b">npm run format</code>，你会自动看到这些变化。</p><p id="a4a6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">很酷…但是ESLint和Pretty现在完全没有交流。目前，将会有一堆ESLint和Prettier规则<strong class="kq io">相冲突的情况，使得不可能同时满足两者。</strong>例如，你可能运行一个更漂亮的格式，它会以一种产生ESLint /Airbnb错误的方式改变代码…但是你不能把它改回来，因为更漂亮的会报告错误。</p><p id="5865" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们让他们一起工作。添加这两个包:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="a50f" class="nr mn in nm b gy ns nt l nu nv">npm install --save-dev eslint-plugin-prettier eslint-config-prettier</span></pre><ul class=""><li id="e714" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">eslint-plugin-prettier</code> <a class="ae md" href="https://www.npmjs.com/package/eslint-plugin-prettier" rel="noopener ugc nofollow" target="_blank">是一个ESLint插件</a>，它在后台运行得更漂亮，并报告结果为ESLint错误。我们在<code class="fe nj nk nl nm b">.eslintrc.js</code>文件中配置这个，因为它是一个ESLint插件，结果是ESLint将在后台使用Prettier作为工具来驾驶这艘船</li><li id="370c" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><code class="fe nj nk nl nm b">eslint-config-prettier</code> <a class="ae md" href="https://www.npmjs.com/package/eslint-config-prettier" rel="noopener ugc nofollow" target="_blank">是一个ESLint配置</a>，它简单地<em class="mc">关闭</em>任何与漂亮风格冲突的规则。正如他们提到的，因为他们只是关闭规则，不做任何其他事情，所以你想将它与另一个规则集(即我们的Airbnb规则集)结合使用，关闭会冲突的规则</li></ul><p id="f855" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，将您的<code class="fe nj nk nl nm b">.eslintrc.js</code>更新成这样:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="598f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下是更新内容:</p><ul class=""><li id="88dc" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated">在<code class="fe nj nk nl nm b">extends</code>键中，我们保留了<code class="fe nj nk nl nm b">airbnb-base</code>，但是在之后添加了<code class="fe nj nk nl nm b">prettier</code><em class="mc">Airbnb规则，上面写着“使用Airbnb规则，但是除此之外，禁用<code class="fe nj nk nl nm b">eslint-config-prettier</code>中指定的任何规则”</em></li><li id="b419" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated">在<code class="fe nj nk nl nm b">rules</code>中，我们将通过更漂亮(在<code class="fe nj nk nl nm b">eslint-plugin-prettier</code>中)显示的问题标记为ESLint <code class="fe nj nk nl nm b">error</code> s。</li><li id="4b95" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated">在<code class="fe nj nk nl nm b">plugins</code>中，我们必须指定我们确实在使用<code class="fe nj nk nl nm b">eslint-plugin-prettier</code></li></ul><p id="1185" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在发生了什么？ESLint现在已经关闭了所有可能与prettle<strong class="kq io">冲突的规则</strong>，所以我们知道当我们运行prettle(<code class="fe nj nk nl nm b">npm run format</code>正如我们所设置的那样)，<em class="mc">它不会再产生ESLint会认为是错误的格式化代码。</em></p><p id="e8d0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">其次，让我们仔细检查一下“将更漂亮的问题报告为ESLint错误”的概念在示例repo的<code class="fe nj nk nl nm b">app.js</code>文件中，第一行如下所示:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="aee9" class="nr mn in nm b gy ns nt l nu nv">import createError from 'http-errors';</span></pre><p id="ab44" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">将它改为像这样使用双引号，并删除分号:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="caf0" class="nr mn in nm b gy ns nt l nu nv">import createError from "http-errors"</span></pre><p id="0293" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">记住，在我们的<code class="fe nj nk nl nm b">.prettierrc</code>中，我们指定了单引号并要求分号。我们希望ESLint在后台使用更漂亮的，并报告更漂亮的错误(感谢<code class="fe nj nk nl nm b">eslint-plugin-prettier</code> )…运行<code class="fe nj nk nl nm b">npm run lint</code>，看看会发生什么:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="6b2f" class="nr mn in nm b gy ns nt l nu nv">error: Replace `"http-errors"` with `'http-errors';` prettier/prettier</span></pre><p id="02ef" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">酷！正如我们所希望的，我们有一个由更漂亮的支票驱动的ESLint错误。</p><p id="f0eb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的设置在这一点上非常顺利，但还有一个主要的林挺错误…</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="45b0" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">第三步:修复巴别塔绝对进口林挺错误</h1><p id="a7ce" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">在本系列的第1部分中，我们添加了一个名为<code class="fe nj nk nl nm b">babel-plugin-module-resolver</code>的Babel插件来帮助我们定义别名，从而在代码中实现绝对导入。<a class="ae md" href="https://github.com/neightjones/node-babel-template/blob/main/src/app.js#L7" rel="noopener ugc nofollow" target="_blank">这是该设置产生的导入结果</a>:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="a680" class="nr mn in nm b gy ns nt l nu nv">import indexRouter from '#routes/index';</span></pre><p id="a31d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为Babel在构建过程中会处理这些别名，所以ESLint不理解我们在这里所指的就不足为奇了。谢天谢地，我们可以用<code class="fe nj nk nl nm b"><a class="ae md" href="https://www.npmjs.com/package/eslint-import-resolver-babel-module" rel="noopener ugc nofollow" target="_blank">eslint-import-resolver-babel-module</a></code>。这有助于ESLint理解它可以查看Babel别名路径来确认导入的文件是否存在。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="3a5d" class="nr mn in nm b gy ns nt l nu nv">npm install --save-dev eslint-import-resolver-babel-module</span></pre><p id="db33" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后我们将添加一个<code class="fe nj nk nl nm b">settings</code>键到我们的<code class="fe nj nk nl nm b">.eslintrc.js</code>文件中，就像插件在它的文档中指定的那样…</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="1482" class="nr mn in nm b gy ns nt l nu nv">// ... the rest of your .eslintrc.js<br/>  settings: {<br/>    'import/resolver': {<br/>      'babel-module': {},<br/>    },<br/>  },</span></pre><p id="181e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">准备就绪后，您可以再次运行<code class="fe nj nk nl nm b">npm run lint</code>，您将看到这类错误消失了！</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="a507" class="mm mn in bd mo mp mq mr ms mt mu mv mw jt mx ju my jw mz jx na jz nb ka nc nd bi translated">步骤4:VS代码中的工具(可选)</h1><p id="b0e0" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">无论你是否使用VS代码，之前的一切都是好的。这一节只是一个如何使这个过程更加顺利的快速纲要。我们不会运行<code class="fe nj nk nl nm b">npm</code>命令来进行林挺和格式化，而是添加VS代码插件来持续监视我们的代码。</p><p id="b3fa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您将安装这些2 VS代码扩展:</p><ul class=""><li id="7073" class="nw nx in kq b kr ks ku kv kx ny lb nz lf oa lj ob oc od oe bi translated">埃斯林特公司</li><li id="884b" class="nw nx in kq b kr of ku og kx oh lb oi lf oj lj ob oc od oe bi translated"><a class="ae md" href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" rel="noopener ugc nofollow" target="_blank">更漂亮的</a>(由更漂亮的)</li></ul><p id="89c0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，你的代码已经在你输入的时候被ESLint插件链接了。例如，在任意一行键入以下内容:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="4212" class="nr mn in nm b gy ns nt l nu nv">const x = 'hi';</span></pre><p id="0f25" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">很快，您会看到一条红线，显示<code class="fe nj nk nl nm b">no-unused-vars</code>的林挺错误，因为这个变量没有做任何事情。现在你不必运行<code class="fe nj nk nl nm b">npm run lint</code>来查看发生了什么(尽管有时这样做来查看你的项目整体上发生了什么也是不错的)。</p><p id="0f8f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有了pretty，你可以格式化代码块，但是我们将设置它在你每次保存文件时自动运行pretty<em class="mc"/>。</p><p id="6e64" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">运行<code class="fe nj nk nl nm b">cmd+shift+p</code>，搜索<code class="fe nj nk nl nm b">Preferences: Open Settings (JSON)</code>。您可能会看到一个以<code class="fe nj nk nl nm b">"[javascript]"</code>为键的块(如果不是，用那个键创建一个空块)。然后将<code class="fe nj nk nl nm b">"editor.formatOnSave": true</code>添加到<code class="fe nj nk nl nm b">"[javascript]"</code>部分。因为我有一些默认的东西，我现在有:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="fcbe" class="nr mn in nm b gy ns nt l nu nv">// ... other stuff<br/>    "[javascript]": {<br/>        "editor.defaultFormatter": "esbenp.prettier-vscode",<br/>        "editor.formatOnSave": true<br/>    },</span></pre><p id="2dac" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后我为<code class="fe nj nk nl nm b">json</code>格式添加了一个类似的块(你也可以为<code class="fe nj nk nl nm b">typescript</code>等做其他的)。):</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="38fd" class="nr mn in nm b gy ns nt l nu nv">// ... other stuff<br/>    "[json]": {<br/>        "editor.formatOnSave": true<br/>    }</span></pre><p id="2bbc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，当你输入和保存文件的时候，漂亮将会和你一起工作。让我们回到之前在<code class="fe nj nk nl nm b">app.js</code>中的例子…同样，将第一个导入行改为使用双引号而不是单引号，并删除分号:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="2e98" class="nr mn in nm b gy ns nt l nu nv">import createError from "http-errors"</span></pre><p id="4522" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在保存文件…更漂亮的修复它！随着你的发展，这是如此方便。我经常会写一些我知道可能需要修复的代码(例如，我的代码行太长了)，依靠pretty立即为我修复它是很棒的。这为我节省了大量考虑格式化的时间。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="d27c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢跟随。一旦你有了我的教程和这篇文章的第1部分<strong class="kq io">中的代码，你就可以开始开发你的应用程序代码了。这两部分的所有代码都在示例repo中，您可以放心地将它作为项目的起点。</strong></p></div></div>    
</body>
</html>
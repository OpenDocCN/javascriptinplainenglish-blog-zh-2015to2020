<html>
<head>
<title>Promise based props in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中基于承诺的道具</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/promise-based-prop-in-react-78a77440f4fc?source=collection_archive---------0-----------------------#2019-02-06">https://javascript.plainenglish.io/promise-based-prop-in-react-78a77440f4fc?source=collection_archive---------0-----------------------#2019-02-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1839" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在React中，数据通过props在组件之间移动。这可以直接使用，也可以使用第三方库，如Redux或Context API。但是，如果您试图将数据直接发送到子组件，则应该在父组件的状态变量中设置该数据，如下面的示例代码所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/365bbd691cf7558665580f88828664c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bFlMcIWm7MtES2yYR-wrXg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Sending data via props using state variable</figcaption></figure><h2 id="1973" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated">那么这种方法有什么问题呢？</h2><p id="6b71" class="pw-post-body-paragraph jk jl in jm b jn lr jp jq jr ls jt ju jv lt jx jy jz lu kb kc kd lv kf kg kh ig bi translated">假设您正在创建一个通用组件来列出项目。该数据来自端点，而父组件对来自端点的所有数据不感兴趣。但是，您必须将所有数据保持在App组件的状态，以便通过props将其传递给list组件。这将产生无用的状态变量，可能导致状态变量膨胀。</p><h2 id="dce9" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated">发送基于承诺的道具</h2><p id="2380" class="pw-post-body-paragraph jk jl in jm b jn lr jp jq jr ls jt ju jv lt jx jy jz lu kb kc kd lv kf kg kh ig bi translated">为了克服我上面提到的问题，我使用了一个基于承诺的道具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/598ac737fea58ca94df526b0abb1224d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8TQr8qVYsM4pKy81w21VXw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Promise-based prop in ListItem component</figcaption></figure><ul class=""><li id="7f90" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh mc md me mf bi translated">定义一个具有promise返回类型的适当函数来获取ListComponent (child)中的数据</li><li id="4f82" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">调用ListComponent生命周期中componentDidMount函数</li><li id="bcd6" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">现在，您可以在应用程序组件中获取数据，并使用response解析ListComponent的promise函数。</li></ul><p id="46c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果这有点令人困惑，请查看我在codesandbox中创建的示例</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml mm l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Promise-based prop example</figcaption></figure><h2 id="cf49" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated">我得到了什么？</h2><ul class=""><li id="ee78" class="lx ly in jm b jn lr jr ls jv mn jz mo kd mp kh mc md me mf bi translated">父组件中减少的状态变量</li><li id="149a" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">我只是在子组件中使用componentDidMount事件来获取数据</li></ul></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="1383" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你喜欢我的文章，你可以鼓掌支持我，关注我。<br/>我也在 <a class="ae my" href="http://www.linkedin.com/in/muratcatal" rel="noopener ugc nofollow" target="_blank"> <em class="mx"> linkedin </em> </a> <em class="mx">上，欢迎所有邀请。</em></p></div></div>    
</body>
</html>
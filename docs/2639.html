<html>
<head>
<title>Instantiate a Service using an Angular Factory Provider</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度工厂提供者实例化服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/instantiate-a-service-using-an-angular-factory-provider-38670aea4a94?source=collection_archive---------4-----------------------#2020-07-11">https://javascript.plainenglish.io/instantiate-a-service-using-an-angular-factory-provider-38670aea4a94?source=collection_archive---------4-----------------------#2020-07-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e2d7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">需要在服务中通过构造函数注入一个变量？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ce39f6e89c1286c17357257272de886f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RmArQPDsgbKwUKGP.png"/></div></div></figure><h1 id="9810" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">问题</h1><p id="6a85" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">有些情况下，我们需要在服务中注入一些东西，同时完全控制我们的服务在运行时如何实例化。</p><p id="2143" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">假设我们需要传递一个标志变量来指示我们的服务是否将运行特定的任务。Angular的依赖注入(DI)不能指定值，因为它是我们需要明确提供的东西。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/6a5d8c2f0c7288d2d30175af8f1c4637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*No8WUiqGMc5z_7rf152JHQ.png"/></div></div></figure><p id="3537" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">让我们看一个简单的<em class="mi"> LoggerService </em>例子。</p><p id="aa4b" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">这里我们将一个<em class="mi"> isEnabled </em>变量注入到构造函数中，以指示<em class="mi"> log </em>函数是否会打印出消息。</p><p id="080a" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果我们运行这段代码，Angular会给我们一个错误“没有为Boolean定义的提供者”，因为Angular不能从我们的<em class="mi"> LoggerService </em>解析构造函数参数。</p><p id="1075" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">那么，我们如何提供这些值，并告诉角度DI使用所提供的值呢？🤔</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><h1 id="b15a" class="ko kp in bd kq kr mq kt ku kv mr kx ky jt ms ju la jw mt jx lc jz mu ka le lf bi translated">解决办法</h1><p id="feb5" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated"><strong class="li io">厂家</strong>来帮我们了！🙌</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/62613b990435b3b8d38ddaebce2ff496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8-j5mCAONRHBSPVw"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk"><a class="ae na" href="https://www.pexels.com/photo/people-are-working-wearing-blue-shirt-3637786/" rel="noopener ugc nofollow" target="_blank">pexels.com</a></figcaption></figure><p id="35c7" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">在我们的app.module.ts中，我们可以定义我们的提供商，如下图所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/112418c4859fceee6f9f2b175ee043fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y_zmQvRafLMDF1HNaY43qw.png"/></div></div></figure><p id="d3f9" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">基本上，我们告诉Angular无论何时使用<em class="mi"> LoggerService </em>或者将<em class="mi"> LoggerService </em>注入到某些构造函数中，都要使用<em class="mi"> loggerFactory </em>。</p><p id="a893" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="mi">loggerFactory</em><strong class="li io"><em class="mi"/></strong>是我们这样定义的函数名</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/dd45429333027a0598e3721bba41bd7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K9yqfr32StM9i6rGOGKm1g.png"/></div></div></figure><p id="1b7f" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">这是一个工厂函数，我们用一个布尔参数手动实例化我们的<em class="mi">LoggerService</em>(<em class="mi">is enabled</em>)。</p><p id="70d9" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如您所见，现在我们可以完全控制对象的创建方式。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/3651ce09569c84beafeb0d39dbc32e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3gItg-Z-xaUV0InUt65QA.png"/></div></div></figure><p id="739e" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我们可以将值切换到<strong class="li io">或<em class="mi">真或假。</em>T29】</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/071b1176717ebb9e28fc6866a9c90784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CrLHK-d46s39MdsDwgBctA.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/559ba655914b02dcbc326e87f8a9f148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BHxhg3bS50Aa7v71ByA-Fw.png"/></div></div></figure><p id="f2b3" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">如果<em class="mi">的布尔值被使能</em>应该是动态的，可以利用环境配置来动态地改变它。</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><h1 id="6664" class="ko kp in bd kq kr mq kt ku kv mr kx ky jt ms ju la jw mt jx lc jz mu ka le lf bi translated">进一步讨论</h1><p id="dbc0" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">那么，现在你可能会问，如果我们需要在工厂提供者中传递另一个服务作为我们的依赖怎么办？</p><p id="243c" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">为了确保这篇文章不会太长😃，让我们在下面的帖子中讨论它:</p><div class="ng nh gp gr ni nj"><a href="https://medium.com/@hengky.kaiqi/pass-dependencies-to-a-factory-provider-in-angular-9073502cae4" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">在Angular中将依赖项传递给工厂提供者</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">需要将其他服务作为依赖项传递给工厂提供者吗？</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx km nj"/></div></div></a></div><h1 id="f5e8" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">密码</h1><p id="6beb" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果你想看代码，你可以去我的GitHub库</p><div class="ng nh gp gr ni nj"><a href="https://github.com/hengkysanjaya123/angular-factory-provider" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">hengkysanjaya 123/角度-工厂-提供商</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">此项目是使用Angular CLI版本9.1.10生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx km nj"/></div></div></a></div></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><p id="e946" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">一如既往，我希望您从这篇文章中获得一些新的见解。😃</p><p id="5099" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">干杯，</p><p id="2f99" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">亨基·桑佳亚</p></div></div>    
</body>
</html>
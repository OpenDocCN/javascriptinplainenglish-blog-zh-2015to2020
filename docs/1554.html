<html>
<head>
<title>Creating Enum Types with Express Apollo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express Apollo创建枚举类型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-enum-types-with-express-apollo-6c59665e95d4?source=collection_archive---------3-----------------------#2020-03-31">https://javascript.plainenglish.io/creating-enum-types-with-express-apollo-6c59665e95d4?source=collection_archive---------3-----------------------#2020-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c189d027090adce4ec67569589fb1055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aB-JOmmEzpmxCza-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Micheile Henderson @micheile010 // Visual Stories [nl]</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e6fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Apollo Server可用作节点软件包。我们可以用它来创建一个接受GraphQL请求的服务器。</p><p id="2bb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用Express Apollo创建枚举类型。</p><h1 id="0117" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Enums</h1><p id="ef39" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">枚举类似于标量类型，但是它们只能采用模式中定义的一些可能的值。</p><p id="dd8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们必须在几个选项中做出选择时，它们很有用。它还为我们提供了GraphQL游乐场等工具中的自动完成功能。</p><p id="be10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以定义如下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e455" class="mn lc iq mj b gy mo mp l mq mr">const express = require('express');<br/>const { ApolloServer, gql } = require('apollo-server-express');</span><span id="f5ed" class="mn lc iq mj b gy ms mp l mq mr">const typeDefs = gql`<br/>  enum AllowedColor {<br/>    RED<br/>    GREEN<br/>    BLUE<br/>  }</span><span id="68cb" class="mn lc iq mj b gy ms mp l mq mr">  type Query {<br/>    pickColor(color: AllowedColor): String<br/>  }<br/>`;</span><span id="435f" class="mn lc iq mj b gy ms mp l mq mr">const resolvers = {<br/>  Query: {<br/>    pickColor(_, { color }) {<br/>      return color;<br/>    }<br/>  }<br/>};</span><span id="a744" class="mn lc iq mj b gy ms mp l mq mr">const app = express();<br/>const server = new ApolloServer({ typeDefs, resolvers });<br/>server.applyMiddleware({ app });</span><span id="ecb7" class="mn lc iq mj b gy ms mp l mq mr">app.listen(3000, () =&gt; console.log('server started'));</span></pre><p id="07bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用可能值<code class="fe mt mu mv mj b">RED</code>、<code class="fe mt mu mv mj b">GREEN </code>或<code class="fe mt mu mv mj b">BLUE</code>创建了<code class="fe mt mu mv mj b">AllowedColor</code>枚举类型。</p><p id="c4f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加了带有<code class="fe mt mu mv mj b">pickColor</code>查询的<code class="fe mt mu mv mj b">Query</code>类型，该查询接受一个<code class="fe mt mu mv mj b">color</code>参数并返回一个<code class="fe mt mu mv mj b">String</code>。</p><p id="0491" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们这样做是为了:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aebc" class="mn lc iq mj b gy mo mp l mq mr">const typeDefs = gql`<br/>  enum AllowedColor {<br/>    RED<br/>    GREEN<br/>    BLUE<br/>  }</span><span id="7f37" class="mn lc iq mj b gy ms mp l mq mr">  type Query {<br/>    pickColor(color: AllowedColor): String<br/>  }<br/>`;</span></pre><p id="c974" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们使用<code class="fe mt mu mv mj b">resolvers</code>在<code class="fe mt mu mv mj b">pickColor</code>解析器函数中获取参数，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7638" class="mn lc iq mj b gy mo mp l mq mr">const resolvers = {<br/>  Query: {<br/>    pickColor(_, { color }) {<br/>      return color;<br/>    }<br/>  }<br/>};</span></pre><p id="e840" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分解器返回<code class="fe mt mu mv mj b">color</code>。</p><h1 id="7ecc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">内部值</h1><p id="5382" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在冒号后放一个值来设置枚举的值。</p><p id="21e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下内容:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="273b" class="mn lc iq mj b gy mo mp l mq mr">const express = require('express');<br/>const { ApolloServer, gql } = require('apollo-server-express');</span><span id="6d61" class="mn lc iq mj b gy ms mp l mq mr">const typeDefs = gql`<br/>  enum AllowedColor {<br/>    RED<br/>    GREEN<br/>    BLUE<br/>  }</span><span id="537a" class="mn lc iq mj b gy ms mp l mq mr">  type Query {<br/>    pickColor(color: AllowedColor): String<br/>  }<br/>`;</span><span id="3f83" class="mn lc iq mj b gy ms mp l mq mr">const resolvers = {<br/>  AllowedColor: {<br/>    RED: '#f00',<br/>    GREEN: '#0f0',<br/>    BLUE: '#00f',<br/>  },<br/>  Query: {<br/>    pickColor(_, { color }) {<br/>      return color;<br/>    }<br/>  }<br/>};</span><span id="7df8" class="mn lc iq mj b gy ms mp l mq mr">const app = express();<br/>const server = new ApolloServer({ typeDefs, resolvers });<br/>server.applyMiddleware({ app });</span><span id="b418" class="mn lc iq mj b gy ms mp l mq mr">app.listen(3000, () =&gt; console.log('server started'));</span></pre><p id="1670" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们添加了:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1be9" class="mn lc iq mj b gy mo mp l mq mr">AllowedColor: {<br/>  RED: '#f00',<br/>  GREEN: '#0f0',<br/>  BLUE: '#00f',<br/>}</span></pre><p id="c637" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到<code class="fe mt mu mv mj b">resolvers</code>对象，将ENUM键映射到字符串值。</p><p id="3964" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在当我们进行以下查询时:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8958" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  pickColor(color: RED)<br/>}</span></pre><p id="682c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="80f1" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "data": {<br/>    "pickColor": "#f00"<br/>  }<br/>}</span></pre><p id="8c06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们为<code class="fe mt mu mv mj b">color</code>传入一个没有在项目中列出的值，那么我们会得到一个错误。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/2f010b9b8e12bcd85e923be892a0de75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RXWUE4fe4XLiQdR4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@historyhd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">History in HD</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1c4a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1f3c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在类型定义字符串中定义枚举。</p><p id="eef3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了定义一个，我们使用<code class="fe mt mu mv mj b">enum</code>关键字，后跟枚举类型的名称。然后，我们可以选择将枚举键映射到我们的<code class="fe mt mu mv mj b">resolvers</code>对象中的值。</p><p id="aa6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们这样做了，那么只有当我们将参数的类型设置为枚举类型时，我们才能传入枚举的可能值。</p><p id="bf8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【JavaScript简单明了的一句话:我们一直对帮助提升高质量内容感兴趣。如果您有文章想提交给JavaScript，请用您的中用户名在<a class="ae kc" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">submissions@javascriptinplainenglish.com</a>发邮件给我们，我们会将您添加为作者。</p></div></div>    
</body>
</html>
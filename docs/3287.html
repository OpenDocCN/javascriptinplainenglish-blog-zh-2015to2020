<html>
<head>
<title>Best of Modern JavaScript — Default Parameters and Rest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华——默认参数和Rest</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-default-parameters-and-rest-d9ed49f46cc8?source=collection_archive---------15-----------------------#2020-09-15">https://javascript.plainenglish.io/best-of-modern-javascript-default-parameters-and-rest-d9ed49f46cc8?source=collection_archive---------15-----------------------#2020-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1b1d8264a838f3566e5a9fea4e6f55aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RgBaTO7HPJVX06ws"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@janpadilla?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jan Padilla</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7041" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何使用参数和rest语法。</p><h1 id="48a2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么<code class="fe lz ma mb mc b">undefined</code>会触发默认值？</h1><p id="db76" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">undefined</code>表示某物不存在。</p><p id="b9c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这与<code class="fe lz ma mb mc b">null</code>不同，它表示一个空值。</p><p id="d9be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，只有<code class="fe lz ma mb mc b">undefined</code>会触发默认值的设置。</p><h1 id="84bb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">引用默认值中的其他参数</h1><p id="5bfe" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以参考默认值中的其他参数。</p><p id="69d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="0c46" class="mq lc iq mc b gy mr ms l mt mu">function foo(x = 13, y = x) {<br/>  console.log(x, y);<br/>}</span></pre><p id="f582" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们调用<code class="fe lz ma mb mc b">foo();</code>，那么我们得到<code class="fe lz ma mb mc b">x</code>和<code class="fe lz ma mb mc b">y</code>都是13。</p><p id="7eac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们调用<code class="fe lz ma mb mc b">foo(7);</code>，那么我们得到<code class="fe lz ma mb mc b">x</code>和<code class="fe lz ma mb mc b">y</code>都是7。</p><p id="ed78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们调用<code class="fe lz ma mb mc b">foo(17, 12);</code>，那么我们得到<code class="fe lz ma mb mc b">x</code>是17，而<code class="fe lz ma mb mc b">y</code>是12。</p><h1 id="94dc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在默认值中引用内部变量</h1><p id="4bfa" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果我们有这样的代码:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="10e7" class="mq lc iq mc b gy mr ms l mt mu">const x = 'outer';</span><span id="d68e" class="mq lc iq mc b gy mv ms l mt mu">function foo(a = x) {<br/>  const x = 'inner';<br/>  console.log(a);<br/>}</span><span id="f660" class="mq lc iq mc b gy mv ms l mt mu">foo()</span></pre><p id="4f46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将外部变量赋值为参数的值，那么即使我们在内部定义了一个同名的变量，它也会引用外部变量。</p><p id="09a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lz ma mb mc b">a</code>的默认值赋给了<code class="fe lz ma mb mc b">x</code>，所以即使我们用新值再次定义<code class="fe lz ma mb mc b">x</code>，我们仍然得到<code class="fe lz ma mb mc b">a</code>是<code class="fe lz ma mb mc b">'outer'</code>。</p><p id="ed85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果函数上面没有<code class="fe lz ma mb mc b">x</code>，我们将得到一个ReferenceError。</p><p id="91a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当参数是函数时，这也适用于参数。</p><p id="1cfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="91cd" class="mq lc iq mc b gy mr ms l mt mu">const bar = 2;</span><span id="57a5" class="mq lc iq mc b gy mv ms l mt mu">function foo(callback = () =&gt; bar) {<br/>  const bar = 3;<br/>  callback();<br/>}</span><span id="d239" class="mq lc iq mc b gy mv ms l mt mu">foo();</span></pre><p id="06bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，<code class="fe lz ma mb mc b">callback</code>被分配给返回<code class="fe lz ma mb mc b">bar</code>的函数，所以如果我们调用<code class="fe lz ma mb mc b">callback</code>而没有回调函数传递给它，那么就会调用这个函数。</p><p id="072f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe lz ma mb mc b">callback</code>返回2。</p><h1 id="5e14" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">休息参数</h1><p id="d3bc" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Rest参数让我们捕获没有设置任何参数的参数。</p><p id="8f7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="b6cf" class="mq lc iq mc b gy mr ms l mt mu">function foo(x, ...args) {<br/>  console.log(x, args);<br/>  //···<br/>}<br/>foo('a', 'b', 'c');</span></pre><p id="fa14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe lz ma mb mc b">x</code>就是<code class="fe lz ma mb mc b">'a'</code>而<code class="fe lz ma mb mc b">args</code>就是<code class="fe lz ma mb mc b">['b', 'c']</code>。</p><p id="fccc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有剩余的参数，那么<code class="fe lz ma mb mc b">args</code>将被设置为空数组。</p><p id="5c0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是对<code class="fe lz ma mb mc b">arguments</code>对象的一个很好的替代。</p><p id="a2ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在ES5或更早版本中，获取函数所有参数的唯一方法是使用<code class="fe lz ma mb mc b">arguments</code>对象:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="856c" class="mq lc iq mc b gy mr ms l mt mu">function logArgs() {<br/>  for (var i = 0; i &lt; arguments.length; i++) {<br/>    console.log(arguments[i]);<br/>  }<br/>}</span></pre><p id="45f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于ES6或更高版本，我们可以只使用rest参数来做同样的事情。</p><p id="ea99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="e20d" class="mq lc iq mc b gy mr ms l mt mu">function logArgs(...args) {<br/>  for (const arg of args) {<br/>    console.log(arg);<br/>  }<br/>}</span></pre><p id="2c13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用for-of循环记录所有的参数。</p><h1 id="a643" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组合析构和对析构值的访问</h1><p id="f06d" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">因为rest操作符给了我们一个数组，我们可以析构它。</p><p id="eef3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="8e1b" class="mq lc iq mc b gy mr ms l mt mu">function foo(...args) {<br/>  let [x = 0, y = 0] = args;<br/>  console.log(x, y);<br/>}</span></pre><p id="01b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lz ma mb mc b">args</code>的前2个条目分别设置为<code class="fe lz ma mb mc b">x</code>和<code class="fe lz ma mb mc b">y</code>。</p><p id="4bbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将它们的默认值设置为0。</p><p id="8643" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">析构也适用于对象参数。</p><p id="edd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="03c0" class="mq lc iq mc b gy mr ms l mt mu">function bar(options = {}) {<br/>  const {<br/>    x,<br/>    y<br/>  } = options;<br/>  console.log(x, y);<br/>}</span></pre><p id="1271" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带<code class="fe lz ma mb mc b">options</code>参数的<code class="fe lz ma mb mc b">bar</code>函数。</p><p id="a558" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将对象析构为<code class="fe lz ma mb mc b">x</code>和<code class="fe lz ma mb mc b">y</code>变量。</p><p id="ac65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">arguments</code>是可迭代对象。</p><p id="2e02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在ES6中使用spread操作符将其转换为数组。</p><p id="8fa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="eec9" class="mq lc iq mc b gy mr ms l mt mu">function foo() {<br/>  console.log([...arguments]);<br/>}</span></pre><p id="8bb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么数组将包含所有的参数。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9f1f0ed0372f026c369d787faab1001a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mE5aQic2ne261_CM"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@brookecagle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Brooke Cagle</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8ae0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="020c" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用rest参数将所有参数传递给函数。</p><p id="72a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以把其他值称为默认值。</p><h2 id="b44a" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="995f" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
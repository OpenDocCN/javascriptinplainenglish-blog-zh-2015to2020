<html>
<head>
<title>How to start writing less error-prone code in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何开始用JavaScript编写不易出错的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/weird-parts-in-javascript-part-2-c9a918e34c50?source=collection_archive---------6-----------------------#2020-05-03">https://javascript.plainenglish.io/weird-parts-in-javascript-part-2-c9a918e34c50?source=collection_archive---------6-----------------------#2020-05-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a772" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript更奇怪的部分</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/0c06e787dd13043efcbe34a7b9f6edf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ipk6Xeowueq40fBcdf72vA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@cgower?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Christopher Gower</a> on <a class="ae ks" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f437" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">JavaScript中的对象类型</h1><blockquote class="ll lm ln"><p id="b0a4" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">有些类型是子类型。</p></blockquote><p id="2fd2" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">JavaScript中的一切都是对象！。我们说这个断言是<strong class="lr io">假</strong>。JavaScript中的许多东西可以表现得像一个对象，但这并不意味着它就是对象。我们可以说JavaScript中有三种类型的对象(<strong class="lr io">对象</strong>、<strong class="lr io">函数</strong>和<strong class="lr io">数组</strong>)。</p><p id="8330" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">在ECMAScript规范中，函数不在<a class="ae ks" href="https://www.ecma-international.org/ecma-262/#sec-ecmascript-language-types" rel="noopener ugc nofollow" target="_blank">类型列表</a>中。直观地说，函数值有一个特定的行为，它不同于数值，例如- <strong class="lr io">那么它不是一个类型吗？</strong> JavaScript将函数称为对象类型的子类型——有时将它们称为<strong class="lr io">可调用对象</strong>。</p><p id="caab" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">结论:<strong class="lr io">函数是一种类型，但是是一种子类型——而不是顶级类型。</strong></p><p id="fa40" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">另一种类型是数组。我们一直在使用它们，看起来它们有着有趣的行为。它们有自动更新的长度属性，并且它们是数字索引的。数组也有很多方法。那么，他们是一个类型吗？是的，但是子类型，和函数一样，这是我们在考虑数组时必须采用的心理模型。数组是具有“神奇”属性长度的对象，我们用它来度量数组成员的数量。<strong class="lr io">我们需要能够分辨，并专有技术来确定它是不是这个阵列。</strong></p><p id="2f6d" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">结论:<strong class="lr io">它们是一类特殊的对象，语法上是糖-数字索引。</strong></p><p id="086f" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">最后，我们如何确定所有这些事情？阅读规格！说明书上怎么说的？对象有<strong class="lr io">对象</strong>、<strong class="lr io">函数</strong>和<strong class="lr io">数组</strong>。原语类型有<strong class="lr io">未定义</strong>、<strong class="lr io">数字</strong>、<strong class="lr io">字符串</strong>、<strong class="lr io">布尔</strong>、<strong class="lr io">符号</strong>、<strong class="lr io"> null </strong>和<strong class="lr io"> bigint </strong>。</p><p id="42c2" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">看看我们有多少非对象类型！所有这些类型可能有一个类似行为的对象，但它们不是对象。不像静态类型语言(Java，C等。)，在JavaScript(和其他动态类型语言)中，<strong class="lr io">不是变量有类型，而是值本身有类型(思考值而不是类型的主要原因)</strong>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/78a15498035e3b2eb00a4ac6ecb91865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*C-MnGycCJ20dfjKUTg-hRw.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Drawn with <a class="mp mq ep" href="https://medium.com/u/9ce34d1dcdce?source=post_page-----c9a918e34c50--------------------------------" rel="noopener" target="_blank">draw.io</a></figcaption></figure><p id="2eb7" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">结论:<strong class="lr io">变量没有类型，但值有。</strong></p><h1 id="b6e8" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">如何理解未定义？</h1><blockquote class="ll lm ln"><p id="077a" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">Undefined是默认值。</p></blockquote><p id="02f3" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">首先，我们将为变量赋值，然后我们将使用操作符的<em class="lq">类型:</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="67c5" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">返回的是什么类型的<em class="lq">？它返回“<em class="lq">字符串”</em>，该字符串引用了当前位于<em class="lq">名称</em>中的值的类型。</em></p><p id="bdbb" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">结论:<strong class="lr io">我们不是问变量<em class="lq">名称</em>的<em class="lq">类型是什么我们是问当前在<em class="lq">名称</em>中的值的<em class="lq">类型是什么。</em></em></strong></p><p id="72ea" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">在下一个例子中，我们不会赋值，这是一种默认的。我们将再试一次的<em class="lq">型:</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="c36b" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">当前在<em class="lq">姓</em>的是什么类型的值？你可以注意到的<em class="lq">类型返回了“<em class="lq">未定义”</em>。这很有趣，因为我们可以把<em class="lq">未定义的</em>想象成<strong class="lr io">默认值</strong>。<strong class="lr io">是在没有别的东西的时候存在的值(真空已经把一切都抽走了)</strong>。当没有其他值时，你有<em class="lq">未定义(值)</em>。<strong class="lr io">姓氏变量被初始化，<em class="lq">未定义</em>。</strong></em></p><p id="50c0" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">我们很多人认为:<strong class="lr io">未定义意味着还没有值</strong>。那不是事实！为什么？你需要有正确的心智模式。最合适的思考方式是什么？<strong class="lr io">目前，它没有任何价值！</strong>为什么会这样？在许多情况下，你会遇到，你将不得不'重置'价值的状态。</p><p id="805a" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">如果你用过库/框架(React.js，Vue.js，AngularJS等。)有时你必须“隐藏”一些用户界面。您的变量或属性有一个值(代表UI的一部分)。当要隐藏它时，你会回到没有价值的状态——将它设置为<em class="lq">未定义的</em>。不要把这个动作想成删除，移动，想想回到开始——<strong class="lr io">回到不再有价值的状态</strong>。</p><p id="927c" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">结论:<strong class="lr io">不要把<em class="lq">未定义</em>想成还没有价值，想想目前还没有价值。</strong></p><h1 id="5915" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">运算符的类型重要吗？</h1><blockquote class="ll lm ln"><p id="f523" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">我们能代表不存在的东西吗？</p></blockquote><p id="b42f" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">在上一篇文章中，我们谈到了<em class="lq">未定义的</em>值和运算符的<em class="lq">类型(<strong class="lr io">可以引用一个不存在的东西</strong>)。那么，</em>运算符的<em class="lq">类型是什么呢？让我们举几个例子:</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="abc0" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">当我们分配一个数时，我们得到“<em class="lq">数”</em>。给<em class="lq">布尔</em>赋值，得到<em class="lq">布尔</em>。你会注意到所有这些来自<em class="lq">类型的</em>操作符的<strong class="lr io">返回值都是字符串</strong>。当我们谈到<strong class="lr io">强制</strong>时，这一点很重要(在接下来的一个故事中会有更多)。我们需要理解的主要事情是，operator保证它总是返回一个字符串。<em class="lq"> Typeof </em>可以返回八个(字符串)值(<em class="lq">未定义</em>、<em class="lq">布尔</em>、<em class="lq">数字</em>、<em class="lq"> bigint </em>、<em class="lq">字符串</em>、<em class="lq">符号</em>、<em class="lq">函数</em>和<em class="lq">对象</em>)。这是一个可以返回的字符串的简短枚举列表。</p><p id="b8eb" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated"><strong class="lr io"><em class="lq"/>的类型永远不会返回空字符串。除了string之外，考虑返回其他任何东西是一个常见的错误。因此，您可以很容易地预测输出。了解编程中的输入和输出会让你成为编程之王。让我们考虑下一种情况:</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="0df8" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">正如我们在数组的情况下所能预料的那样，<em class="lq"> typeof </em>正在返回<em class="lq"> "object" </em>。函数来了。函数不是官方类型(如果你不相信我，请阅读<a class="ae ks" href="https://www.ecma-international.org/ecma-262/#sec-ecmascript-language-types" rel="noopener ugc nofollow" target="_blank">规范</a>)，但是结果呢？<em class="lq">类型</em>操作器正在返回<em class="lq">功能</em>？！这是一个很好的特性，但是为什么它不适用于数组呢？历史原因——未来在为过去而痛苦！许多代码依赖于这个bug，所以我们无法修复它。如果我们尝试，我们会破解一堆代码。没有抱怨的地方，要知道事情是怎样的。</p><p id="0764" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">想出解决这个问题的办法。为了确定它是否是一个数组，使用array的实例方法<em class="lq"> isArray(): </em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="39b1" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">我们需要null吗？</h1><blockquote class="ll lm ln"><p id="3e44" class="lo lp lq lr b ls lt jo lu lv lw jr lx ly lz ma mb mc md me mf mg mh mi mj mk ig bi translated">null是历史bug吗？</p></blockquote><p id="fde4" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">我们讨论了对象类型，但是这里有一个特殊的类型存在- <em class="lq"> null </em>。<em class="lq"> Null </em>表现为类对象类型:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="bce9" class="pw-post-body-paragraph lo lp in lr b ls lt jo lu lv lw jr lx ml lz ma mb mm md me mf mn mh mi mj mk ig bi translated">我们找回了<em class="lq">【对象】</em>。为什么？先说史实。此时此刻，仍然有来自ES1的‘傻’(对于今天的标准)声明:</p><blockquote class="mt"><p id="ea8c" class="mu mv in bd mw mx my mz na nb nc mk dk translated">如果你想取消一个常规值(数字，字符串等。)-使用<em class="nd">未定义，但是如果你想取消设置对象的引用，使用<em class="nd"> null </em>。</em></p></blockquote><p id="6e9f" class="pw-post-body-paragraph lo lp in lr b ls ne jo lu lv nf jr lx ml ng ma mb mm nh me mf mn ni mi mj mk ig bi translated">这就是<em class="lq"> typeof </em>返回<em class="lq">“object”的历史原因。</em> <strong class="lr io">说到底，那只是一个bug！</strong>返回<em class="lq">“null”就好了。</em>不幸的是，它返回<em class="lq">“对象”</em>。当我们做<em class="lq">类型的</em>检查时，我们必须非常小心。<em class="lq"> typeof </em>返回“<em class="lq">object”</em>时有哪两种可能的类型？<em class="lq"> </em>是对象(对象或数组)或类对象类型— <em class="lq"> null </em>。<strong class="lr io">一定要先检查类型！</strong></p><h2 id="b99a" class="nj ku in bd kv nk nl dn kz nm nn dp ld ml no np lf mm nq nr lh mn ns nt lj nu bi translated">来自简明英语团队的说明</h2><p id="1514" class="pw-post-body-paragraph lo lp in lr b ls nv jo lu lv nw jr lx ml nx ma mb mm ny me mf mn nz mi mj mk ig bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae ks" href="https://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="lr io">plain English . io</strong></a>找到所有这些信息——关注我们的出版物并<a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lr io">订阅我们的YouTube频道</strong> </a> <strong class="lr io">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
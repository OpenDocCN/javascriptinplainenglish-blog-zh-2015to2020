<html>
<head>
<title>Useful DOM Traversal Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的DOM遍历属性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/useful-dom-traversal-properties-782f34db44ab?source=collection_archive---------7-----------------------#2020-01-30">https://javascript.plainenglish.io/useful-dom-traversal-properties-782f34db44ab?source=collection_archive---------7-----------------------#2020-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bf24d27c39dee377c589fa8de156829c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yIAICariYpf3EG37"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hakonbrakon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Håkon Helberg</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7c6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">客户端JavaScript的主要用途是动态操作网页。我们可以用DOM节点对象可用的DOM遍历方法和属性来做到这一点。</p><p id="4ac8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于任何给定的节点，获取子元素和兄弟元素都很容易，因为DOM节点对象中内置了属性来实现这一点。下面是一个DOM节点对象的属性，用于获取父节点、子节点和兄弟节点或元素。</p><h1 id="708a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">子节点</h1><p id="2fa7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">属性让我们获得一个节点对象的子节点。它返回一个<code class="fe me mf mg mh b">NodeList</code>对象，这是一个类似数组的对象，我们可以用<code class="fe me mf mg mh b">for</code>和<code class="fe me mf mg mh b">for...of</code>循环遍历它，并用spread操作符进行扩展。这是一个只读属性。</p><p id="252f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0129" class="mq lc iq mh b gy mr ms l mt mu">const divChildren = document.querySelector('div').childNodes;</span><span id="655f" class="mq lc iq mh b gy mv ms l mt mu">for (let c of divChildren) {<br/>  console.dir(c);<br/>  console.log(c.textContent);<br/>}</span></pre><p id="50ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到文本节点和作为子节点的<code class="fe me mf mg mh b">p</code>节点，所以换行符和<code class="fe me mf mg mh b">p</code>元素都被包含在内。上面的<code class="fe me mf mg mh b">console.log</code>和<code class="fe me mf mg mh b">console.dir</code>语句应该反映了这一点。</p><p id="a22a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以改变上面的例子来改变文本的颜色。例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7f50" class="mq lc iq mh b gy mr ms l mt mu">const divChildren = document.querySelector('div').childNodes;</span><span id="6df4" class="mq lc iq mh b gy mv ms l mt mu">for (let c of divChildren) {<br/>  if (c.style) {<br/>    c.style.color = 'red';<br/>  }<br/>}</span></pre><p id="6963" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将所有<code class="fe me mf mg mh b">p</code>元素变为红色。我们必须检查<code class="fe me mf mg mh b">style</code>属性，因为文本节点没有<code class="fe me mf mg mh b">style</code>属性。</p><h1 id="24ac" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第一个孩子</h1><p id="70c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">属性获取给定节点对象的第一个子节点。例如，如果我们有以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7fa7" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>  &lt;p&gt;<br/>    bar<br/>  &lt;/p&gt;<br/>  &lt;p&gt;<br/>    baz<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="61b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到第一个子节点是一个带有换行符的文本节点，包含以下JavaScript代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a27b" class="mq lc iq mh b gy mr ms l mt mu">const firstChild = document.querySelector('div').firstChild;</span><span id="a5b4" class="mq lc iq mh b gy mv ms l mt mu">console.log(firstChild)</span></pre><p id="31bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此属性是只读属性。如果没有子节点，那么它将返回<code class="fe me mf mg mh b">null</code>。</p><h1 id="0b9c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最后一个孩子</h1><p id="4709" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">属性获取给定节点对象的第一个子节点。例如，如果我们有以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3ca3" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>  &lt;p&gt;<br/>    bar<br/>  &lt;/p&gt;<br/>  &lt;p&gt;<br/>    baz<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="d474" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到最后一个子节点是一个带有换行符的文本节点，其JavaScript如下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ef8" class="mq lc iq mh b gy mr ms l mt mu">const <!-- -->lastChild<!-- --> = document.querySelector('div').<!-- -->lastChild<!-- -->;</span><span id="903a" class="mq lc iq mh b gy mv ms l mt mu">console.log(<!-- -->lastChild<!-- -->)</span></pre><p id="a801" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此属性是只读属性。如果没有子节点，那么它将返回<code class="fe me mf mg mh b">null</code>。</p><h1 id="8889" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">下一个</h1><p id="5e4c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">nextSibling</code>属性是一个只读属性，表示树中的下一个节点，如果没有节点，则为<code class="fe me mf mg mh b">null</code>。</p><p id="0651" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ae50" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  foo<br/>&lt;/div&gt;<br/>&lt;div&gt;<br/>  bar<br/>&lt;/div&gt;</span></pre><p id="428e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以如下使用<code class="fe me mf mg mh b">nextSibling</code>属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a8ed" class="mq lc iq mh b gy mr ms l mt mu">const nextSibling = document.querySelector('div').nextSibling;<br/>console.log(nextSibling)</span></pre><p id="b3ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该从<code class="fe me mf mg mh b">nextSibling</code>中获得一个带有新行字符的文本节点作为节点。</p><p id="a699" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了获得HTML中的第二个div，我们可以如下链接<code class="fe me mf mg mh b">nextSibling</code>属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2518" class="mq lc iq mh b gy mr ms l mt mu">const barNode = document.querySelector('div').nextSibling.nextSibling;<br/>barNode.style.color = 'red';</span></pre><p id="24a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将第二个div的颜色设置为红色。</p><h1 id="5514" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">parentNode</h1><p id="c4f6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">parentNode</code>属性是一个只读属性，它获取给定节点的父节点，如果不存在，则获取<code class="fe me mf mg mh b">null</code>。节点可以包括HTML元素或其他节点，如文本节点或注释节点。</p><p id="f18a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，给定以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2c2c" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  foo<br/>&lt;/div&gt;<br/>&lt;div&gt;<br/>  bar<br/>&lt;/div&gt;</span></pre><p id="acfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以编写以下代码来获取父节点:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d5a5" class="mq lc iq mh b gy mr ms l mt mu">const parentNode = document.querySelector('div').parentNode;</span><span id="acb6" class="mq lc iq mh b gy mv ms l mt mu">console.log(parentNode);</span></pre><p id="06f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">console.log</code>应该从作为父节点的中获取<code class="fe me mf mg mh b">body</code>节点。</p><p id="95aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦有了父节点，我们就可以对它做一些事情。例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5a3f" class="mq lc iq mh b gy mr ms l mt mu">const parentNode = document.querySelector('div').parentNode;</span><span id="f9a7" class="mq lc iq mh b gy mv ms l mt mu">parentNode.style.color = 'red';</span></pre><p id="2a91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">把所有的文字都改成红色。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/b31f1ccae7857269881ca6a41afa9d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nLpe1PeGHyTsyqF1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@invent?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Colin Maynard</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="49b7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">parentElement</h1><p id="f6a9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">parentElement</code>属性是一个只读属性，用于获取给定节点的父元素。如果节点没有父节点或者父节点不是HTML元素，那么它返回<code class="fe me mf mg mh b">null</code>。</p><p id="31d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，给定以下HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8765" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  bar<br/>  &lt;div id='foo'&gt;<br/>    foo<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="4471" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以编写以下JavaScript来获取ID为<code class="fe me mf mg mh b">foo</code>的元素的父元素:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2638" class="mq lc iq mh b gy mr ms l mt mu">const parentElement = document.querySelector('#foo').parentElement;</span><span id="ef1f" class="mq lc iq mh b gy mv ms l mt mu">parentElement.style.color = 'red';</span></pre><p id="de54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们获得了<code class="fe me mf mg mh b">foo</code>的父元素，并将其<code class="fe me mf mg mh b">color</code>样式设置为红色，因此我们应该看到所有颜色为红色的文本，因为<code class="fe me mf mg mh b">foo</code>的父元素是我们的外部div。</p><h1 id="8e5d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">前兄弟姐妹</h1><p id="bc84" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">previousSibling</code>属性是一个只读属性，返回DOM树中的前一个节点，如果不存在则返回<code class="fe me mf mg mh b">null</code>。</p><p id="1c02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有给定的HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b685" class="mq lc iq mh b gy mr ms l mt mu">&lt;div&gt;<br/>  foo<br/>&lt;/div&gt;<br/>&lt;div id='bar'&gt;<br/>  bar<br/>&lt;/div&gt;</span></pre><p id="fe25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以得到前一个兄弟姐妹，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ac61" class="mq lc iq mh b gy mr ms l mt mu">const previousSibling = document.querySelector('#bar').previousSibling;</span><span id="3be3" class="mq lc iq mh b gy mv ms l mt mu">console.log(previousSibling);</span></pre><p id="fd52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到前一个兄弟节点是带有换行符的文本节点。</p><p id="4a34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获得带有单词“foo”的div，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8098" class="mq lc iq mh b gy mr ms l mt mu">const foo = document.querySelector('#bar').previousSibling.previousSibling;</span><span id="60d8" class="mq lc iq mh b gy mv ms l mt mu">foo.style.color = 'red';</span></pre><p id="1211" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一行获取包含单词“foo”的div。然后最后一行将其设置为红色。</p><h1 id="d66d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">文本内容</h1><p id="52fd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">textContent</code>是一个可读可写的属性，它允许我们设置元素及其所有后代的文本内容。例如，给定一个空的<code class="fe me mf mg mh b">p</code>元素:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="04b2" class="mq lc iq mh b gy mr ms l mt mu">&lt;p&gt;</span><span id="5ace" class="mq lc iq mh b gy mv ms l mt mu">&lt;/p&gt;</span></pre><p id="9777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下代码将其文本内容设置为“foo ”:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9b5f" class="mq lc iq mh b gy mr ms l mt mu">const p = document.querySelector('p')<br/>p.textContent = 'foo';</span></pre><p id="e5b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM节点对象方法对于获取父元素、子元素和兄弟元素非常有用。大多数属性都是只读的，因为它们是在其他地方设置的。对于获取各种节点对象的属性，我们必须小心不要选择错误的节点类型。这意味着我们不能假设所有的节点都是HTML元素。</p></div></div>    
</body>
</html>
# React-Native 应用程序的本地持久性策略的利弊

> 原文：<https://javascript.plainenglish.io/pros-cons-of-local-persistence-strategies-for-react-native-apps-52dd68b636b6?source=collection_archive---------1----------------------->

## 在 React Native 中使用本地存储或“伪后端”的一些好处

![](img/97a436151e160bebacf8e277190ca2fe.png)

使用本地存储或“**假后端”**的一些好处包括——改善用户体验、加快加载速度、简化消息传递界面和服务器端功能。下面是 3 种不同的数据持久性策略的利弊——考虑最佳实践和产品开发阶段(MVP 到大规模)。

1.  **AsyncStorage** —内置的本地和会话存储

它只存储字符串数据的键值对，不加密，每个应用程序限制为 5MB，并且是异步的。

**优点**

*   减轻了对服务器和外部数据库的依赖
*   易于使用且简单的一行程序实现
*   不会延迟应用程序的加载，并且比数据读取更快
*   **MVP 考虑事项—** 可能是 MVP/POC 产品的简单解决方案—在转换到生产就绪型解决方案之前可以使用。

**CONS**

*   悄悄达到 5MB 限制……—需要了解 5MB 对于应用程序的需求是否足够？
*   自 IOS 8 — *起，在设备内存不足的情况下，*可以清除 5MB 的限制😞
*   需要数据类型转换，因为它只保存字符串数据。
*   出于进一步的安全原因:需要制定序列化/去序列化和内容安全政策，以维护数据的安全。

**最佳实践建议**

*   广泛使用，但不推荐用于存储敏感数据。不建议依赖数据的**持久性**——至于上面的缺点。

阅读更多相关信息— [在 React Native 中持久化数据](https://pusher.com/tutorials/persisting-data-react-native)。

**2。REDUX-PERSIST 或 REDUX-OFFLINE** —保持减少器、动作和状态

使用现有 Redux 实现进行全局状态管理的库。

**赞成者**

*   可以在严重依赖 Redux 的应用程序中正常工作
*   可以保存轻量级数据(比如一系列 id ),这些数据将用于在服务器上获取数据。

**CONS**

*   对于大容量数据存储来说不是最好的
*   这些库正在经历大量的变化和被否决的版本…
*   存储缩减器、动作和状态的边缘情况增加了复杂性。
*   android 中的“扼流圈”
*   通常强烈反对——因为缺乏简单本地存储实现的优势，并且需要学习管理(如 redux-loggers 接口)它所提供的功能。

**最佳实践建议:**

*   应该只在很好理解的用例中使用——因为简单的 JS 对象和本地存储在大多数情况下就足够了。

了解更多信息— [丹·阿布拉莫夫讨论“为什么要使用 Redux？”](https://medium.com/@dan_abramov/you-might-not-need-redux-be46360cf367)具体来说，不是用一系列教程的其他简单解决方案。

**3。离线第一个移动应用** —带本地数据库

![](img/7b6c57bf65a60f5132de2c699a2e22b1.png)

离线优先移动应用程序开发—假设用户离线，网络速度慢，服务器不可靠，连接延迟高，公共 wifi 被代理。那么该架构由三个关键部分组成:

1.  使用简单的设备数据库(如 React Native 的[领域](https://realm.io/docs/javascript/latest/))
2.  与服务器的通信
3.  同步数据将驻留的服务器，以便可以将数据分发给任何有权限的人。

**优点**

*   无缝的在线和离线应用性能
*   尊重用户的电池和网络资源

**CONS**

*   引入了一系列新的应用程序开发模式，如 ass 发布-订阅流、缓存和同步——传统 CRUD 应用程序和少量本地存储的附加层将很好地发挥作用。
*   这很难😅— [**为什么大多数应用开发者都远离线下——先开发**](https://calvium.com/why-most-app-developers-run-a-mile-from-offline-app-development/) **t**

了解更多信息—h[ttps://www . sim form . com/react-native-database-selection-guide/](https://www.simform.com/react-native-database-selection-guide/)

**一些结论**

*   没有一种策略是明显的赢家😟因为每个人都有一些缺点，或者至少有一些值得警惕的地方。
*   AsyncStorage 是最直接的解决方案，适合保证使用少于 5MB 的应用程序，通过添加加密和安全策略小心处理敏感的用户数据。尽管要小心记忆擦拭🤯
*   离线优先的本地数据库实现似乎适合一个很好理解的产品，它有大量无缝离线性能的案例。拥有大量资源的非常敏锐的技术团队——因为性能的承诺是巨大的——但潜在的问题也很多…
*   正在经历巨大变化并与 Redux 集成的本地持久性库属于灰色地带，没有强烈建议使用那些没有良好用例的库，“只是存储 JS 对象！”😅

如果您遇到了其他优雅的本地持久性策略，请分享！🙌
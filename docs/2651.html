<html>
<head>
<title>JavaScript Best Practices — Mutation, Arguments, and Function Names</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—变异、参数和函数名</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-mutation-arguments-and-function-names-fa2e1b0b8f94?source=collection_archive---------3-----------------------#2020-07-12">https://javascript.plainenglish.io/javascript-best-practices-mutation-arguments-and-function-names-fa2e1b0b8f94?source=collection_archive---------3-----------------------#2020-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/aee661f76a8938d6b93ba77a4a2a0062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wkU7SlqjvWobOqXV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@shannonkay?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Shannon Richards</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3918" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使代码易于阅读和维护，我们应该遵循一些最佳实践。</p><p id="0f90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看我们应该遵循的一些最佳实践，以使每个人的生活更轻松。</p><h1 id="23a8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用<code class="fe lz ma mb mc b">arguments</code></h1><p id="ea46" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">arguments</code>是一个特殊的变量，它让我们获得函数的参数。</p><p id="869a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不应该使用它，因为有更好的选择。</p><p id="a7eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它也不适用于箭头函数。</p><p id="13af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="481c" class="mq lc iq mc b gy mr ms l mt mu">function sum() {<br/>  const numbers = Array.prototype.slice.call(arguments);<br/>  return numbers.reduce((a, b) =&gt; a + b);<br/>}</span></pre><p id="43c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="98dd" class="mq lc iq mc b gy mr ms l mt mu">function sum(...numbers) {<br/>  return numbers.reduce((a, b) =&gt; a + b);<br/>}</span></pre><p id="4acb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">rest运算符将参数作为数组返回。</p><h1 id="1215" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用<code class="fe lz ma mb mc b">delete</code></h1><p id="5455" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">delete</code>从对象中删除属性。</p><p id="b9b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使物体变异，所以我们可能不想使用它。</p><p id="e138" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="51b2" class="mq lc iq mc b gy mr ms l mt mu">delete foo.bar;</span></pre><p id="37c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="92e7" class="mq lc iq mc b gy mr ms l mt mu">const _ = require('lodash/fp');</span><span id="e906" class="mq lc iq mc b gy mv ms l mt mu">const fooWithoutBar = _.omit('bar', foo);</span></pre><p id="5b95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回一个没有<code class="fe lz ma mb mc b">bar</code>属性的新对象。</p><h1 id="3a65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Object.assign()，将变量作为第一个参数</h1><p id="e7da" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果我们用<code class="fe lz ma mb mc b">Object.assign</code>将一个变量作为第一个参数传入，那么我们将对该变量进行变异。</p><p id="ff1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着最好不要用变量设置第一个参数。</p><p id="0369" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们把一个物体。</p><p id="2e16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="3e98" class="mq lc iq mc b gy mr ms l mt mu">const foo = Object.assign({}, a, b);</span></pre><p id="ecbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="991a" class="mq lc iq mc b gy mr ms l mt mu">const a = { foo: 1, bar: 2 };<br/>const b = { bar: 3 };<br/>Object.assign(a, b);</span></pre><h1 id="a3b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">突变方法</h1><p id="dbf4" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">很容易做偶然突变，所以不要过多使用突变方法。</p><p id="c11e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比如<code class="fe lz ma mb mc b">push</code>、<code class="fe lz ma mb mc b">pop</code>、<code class="fe lz ma mb mc b">unshift</code>等数组方法。变异数组，所以我们可能要考虑不做变异的替代方案。</p><p id="caf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用spread代替<code class="fe lz ma mb mc b">push</code>。</p><p id="9c9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="4a88" class="mq lc iq mc b gy mr ms l mt mu">const bar = [...arr, 1];</span></pre><p id="af5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是<code class="fe lz ma mb mc b">push</code>。</p><p id="fccc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">pop</code>可替换为<code class="fe lz ma mb mc b">slice</code>:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="3e24" class="mq lc iq mc b gy mr ms l mt mu">const baz = arr.slice(-1);</span></pre><p id="3c48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">unshift</code>可以替换为价差:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="4a83" class="mq lc iq mc b gy mr ms l mt mu">const bar = [1, ...arr];</span></pre><p id="89fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">sort</code>更难替换，所以我们可能想继续使用它，但我们停止使用原始数组。</p><p id="973a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回排序后的数组。</p><h1 id="6aee" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">变异算子</h1><p id="0722" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们应该小心变异算子。</p><p id="e289" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像<code class="fe lz ma mb mc b">+=</code>这样的操作符做赋值来更新一个现有的变量。</p><p id="7fe7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们可以很容易地意外修改它们。</p><p id="8120" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还应该小心使用<code class="fe lz ma mb mc b">-=</code>、<code class="fe lz ma mb mc b">*=</code>、<code class="fe lz ma mb mc b">/=</code>、<code class="fe lz ma mb mc b">%=</code>、<code class="fe lz ma mb mc b">++</code>或<code class="fe lz ma mb mc b">--</code>。</p><p id="4ec4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">++</code>或<code class="fe lz ma mb mc b">--</code>的位置也很重要，所以我们应该小心。</p><p id="0a90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它既赋值又返回值。</p><p id="b44e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">++</code>后一个变量返回原来的值。</p><p id="66b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">++</code>在变量返回新值之前到来。</p><p id="6b77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这和<code class="fe lz ma mb mc b">--</code>是一样的。</p><h1 id="6aa1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用<code class="fe lz ma mb mc b">Proxy</code></h1><p id="54fc" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">代理会带来副作用，所以我们可能不想使用它们。</p><p id="d710" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="641b" class="mq lc iq mc b gy mr ms l mt mu">const handler = {<br/>  get(target, key) {<br/>    return Math.max(target[key], 0);<br/>  }<br/>};<br/>const object = new Proxy(variable, handler);<br/>object.a;</span></pre><p id="1e88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个函数来代替:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="ef73" class="mq lc iq mc b gy mr ms l mt mu">const negativeProp = (target, key) =&gt; {<br/>  return Math.min(target[key], 0);<br/>}<br/>negativeProp(object, 'a');</span></pre><h1 id="5d10" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数标识符和它们的调用之间的间距</h1><p id="2b75" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以在函数标识符和它们的调用之间增加间距。</p><p id="de4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="9b44" class="mq lc iq mc b gy mr ms l mt mu">alert('Hello');</span></pre><p id="08e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="3115" class="mq lc iq mc b gy mr ms l mt mu">alert ('Hello');</span></pre><p id="600e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">额外的空格不是很有用。</p><h1 id="1294" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数名应该与它们被赋予的变量或属性的名称相匹配</h1><p id="e326" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果我们要把函数名赋给一个变量，那么函数名是没有用的。</p><p id="27f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但如果我们有，至少名字应该匹配。</p><p id="b320" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="c004" class="mq lc iq mc b gy mr ms l mt mu">const foo = function bar() {};</span></pre><p id="9970" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe lz ma mb mc b">foo</code>调用函数。</p><p id="1396" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="fb0a" class="mq lc iq mc b gy mr ms l mt mu">const foo = function foo() {};</span></pre><p id="9cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="d312" class="mq lc iq mc b gy mr ms l mt mu">const foo = function() {};</span></pre><p id="1fbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性也是如此。</p><p id="a712" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="4d0a" class="mq lc iq mc b gy mr ms l mt mu">obj['foo'] = function bar() {};</span></pre><p id="9133" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="a679" class="mq lc iq mc b gy mr ms l mt mu">obj['foo'] = function() {};</span></pre><p id="dbe7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="9073" class="mq lc iq mc b gy mr ms l mt mu">obj['foo'] = function foo() {};</span></pre><p id="eaf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="aeb7" class="mq lc iq mc b gy mr ms l mt mu">obj['foo'] = function() {};</span></pre><p id="fecb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该移除它们或者使它们匹配。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/870aa4203dd9b7466d99f8151068ecd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QgziP4io1TIriybi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@agmakonts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adam Grabek</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6da7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="87e1" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果我们把一个函数赋给一个变量或属性，名字就是多余的。</p><p id="4747" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不应该使用<code class="fe lz ma mb mc b">arguments</code>对象。</p><p id="3f03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该小心变异的方法。</p><p id="dd60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该小心变异操作符。</p><p id="eede" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数调用的间隔是多余的。</p><h2 id="16c2" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="3572" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
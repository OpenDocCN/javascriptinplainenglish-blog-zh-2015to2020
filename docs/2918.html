<html>
<head>
<title>JavaScript Best Practices — Assumptions and Optimizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—假设和优化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-assumptions-and-optimizations-9d78929779eb?source=collection_archive---------7-----------------------#2020-08-05">https://javascript.plainenglish.io/javascript-best-practices-assumptions-and-optimizations-9d78929779eb?source=collection_archive---------7-----------------------#2020-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e815c96299f478ffd2c072d8103833b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZzMtjiPNL6qEvkc4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@reskp?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jametlene Reskp</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="290d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="96f3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用模块模式来封装</h1><p id="979a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用模块模式来封装我们的代码。</p><p id="19c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们可以在任何JavaScript代码中保存私有变量。</p><p id="68b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3a12" class="mn lc iq mj b gy mo mp l mq mr">(function(){<br/>  let x = 123;<br/>  console.log(x);<br/>})(); /</span></pre><p id="b6d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有只在函数内部可用的变量<code class="fe ms mt mu mj b">x</code>。</p><p id="7d3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当类或构造函数没有意义时，它也很有用。</p><h1 id="9cc8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">名称空间我们的JavaScript</h1><p id="a66d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们需要引用我们的JavaScript代码，我们应该给它们命名空间，以便容易找到它们。</p><p id="a963" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d808" class="mn lc iq mj b gy mo mp l mq mr">let MyNamespace = MyNamespace || {};<br/><br/>MyNamespace.MyModule = () =&gt; {<br/>    // ...<br/>}</span></pre><p id="f886" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的名称空间有属性，包括我们作为模块使用的对象。</p><h1 id="9621" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">匿名作用域JavaScript</h1><p id="d062" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们不在任何地方调用JavaScript，我们应该限定它的范围。</p><p id="2660" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ac8a" class="mn lc iq mj b gy mo mp l mq mr">(function(){<br/>  let x = 123;<br/>  console.log(x);<br/>})(); </span></pre><p id="dc16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将JavaScript的范围限定在函数内部。</p><p id="d07a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这使得我们的变量只能在函数内部使用。</p><p id="8d46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能不小心修改它们。</p><h1 id="7c88" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">优化时关注大事</h1><p id="c2df" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">大的性能改进可以来自几个地方。</p><p id="8bcf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM操作开销很大，所以我们应该尽量少做。</p><p id="f122" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何迫使页面重新呈现的方法都不是最佳的。</p><p id="3cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像调整大小和滚动这样一直被触发的事件也可以被谴责或抑制。</p><p id="17ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有很多HTTP请求，我们也可以减少它们。</p><p id="bbdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以解决这些问题来提高响应能力。</p><h1 id="99cf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">延迟加载不立即需要的资产</h1><p id="6e4f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有没有立即显示给用户的资产，那么我们应该延迟加载它们。</p><p id="b247" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，它们只在需要显示的时候才被加载。</p><h1 id="12d1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe ms mt mu mj b">unbind()</code>绑定前的所有事件处理程序</h1><p id="4f7c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该<code class="fe ms mt mu mj b">unbind</code>所有的事件处理程序，这样我们就不会有多个事件处理程序绑定到元素上。</p><p id="b02d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8bdf" class="mn lc iq mj b gy mo mp l mq mr">$("a.some-link").unbind(handleClick).click(handleClick);</span></pre><p id="cb20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">解除现有事件监听器的绑定，然后将一个新的点击监听器附加到<code class="fe ms mt mu mj b">a</code>链接。</p><p id="0beb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这确保了它只被绑定一次。</p><p id="21b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们在任何地方都需要它，所以我们可以创建一个助手函数来帮助我们在任何地方都这样做。</p><h1 id="1356" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要把JavaScript当成经典的OOP语言</h1><p id="8c32" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该把JavaScript当成经典的OOP语言。</p><p id="f6c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管类语法存在，但它只是其原型继承模型之上的语法糖。</p><p id="8984" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一点从未改变。</p><p id="7f59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以即使JavaScript有类，它也不是经典的OOP语言。</p><h1 id="75ca" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要滥用函数和对象文字的内联</h1><p id="88be" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">深嵌套肯定不好。</p><p id="c534" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们使得代码难以阅读。</p><p id="862a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嵌套越深，越难跟踪。</p><p id="39f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，没有人想读这样的东西:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6f47" class="mn lc iq mj b gy mo mp l mq mr">var myFunction = function() {<br/>  $('form#my-form').submit(<br/>    function(event) {<br/>      event.preventDefault();<br/>      $.ajax(<br/>        '/some_service', {<br/>          type: "POST",<br/>          data: {<br/>            name: name,<br/>            name: company<br/>          },<br/>          success: function(data) {<br/>            onSuccess({<br/>              response1: data.value1,<br/>              response2: data.value2<br/>            })<br/>          },<br/>          error: function(data) {<br/>            onError({<br/>              response1: data.value1,<br/>              response2: data.value2<br/>            })<br/>          }<br/>        }<br/>      );<br/>    }<br/>  );<br/>};</span></pre><p id="3e05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该通过减少嵌套来使其易于阅读。</p><p id="2d09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">内联一切也使得函数和变量无法重用。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/ea88f2e7974deaf67aa00c58eb95185b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wUoFvso6lugQGbgF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hendoo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hendo Wang</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ae76" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="9fc1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建模块来分隔值。</p><p id="e4a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们在附加事件处理程序之前，先解除它们与jQuery的绑定。</p><p id="e765" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且不要滥用内联，把JavaScript当成经典的OOP语言。</p><h2 id="0d27" class="mn lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="a953" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
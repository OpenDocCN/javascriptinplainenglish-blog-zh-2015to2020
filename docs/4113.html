<html>
<head>
<title>HTML Canvas is fire</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML画布火了</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/html-canvas-is-fire-1320b2b40c37?source=collection_archive---------5-----------------------#2020-11-17">https://javascript.plainenglish.io/html-canvas-is-fire-1320b2b40c37?source=collection_archive---------5-----------------------#2020-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="12ce" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">井字游戏系列—第二部分</h2><div class=""/><div class=""><h2 id="99c7" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">精确理解画布</h2></div><p id="2fd9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">嗨！我正在用我能想到的最简单的领域探索技术，井字游戏，查看其他文章:</p><ol class=""><li id="0d32" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated"><a class="ae lt" href="https://medium.com/javascript-in-plain-english/tic-tac-toe-react-typescript-xstate-fp-ts-css-grid-cbbb6455cbf7?source=friends_link&amp;sk=5a651587dc6376cfbd55596e30b6692e" rel="noopener">井字游戏:React，TypeScript，XState，fp-ts &amp; CSS网格</a> — <a class="ae lt" href="https://medium.com/codingedgar/tes-en-l%C3%ADnea-react-typescript-xstate-fp-ts-css-grid-esp-1373236189d1?source=friends_link&amp;sk=acd495a60f69e43c68e3f6970fa9da60" rel="noopener">西班牙语</a></li><li id="bf01" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">HTML Canvas是火的(本文)—西班牙语(proximamente)</li></ol><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/99cfbd56918bbcde24e73a520cc23cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWm7Um0v4qwwfeFzmhaEKA.png"/></div></div></figure><h1 id="01da" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">等等，什么是HTML画布？</h1><p id="577a" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">根据Mozilla的说法:</p><blockquote class="ni nj nk"><p id="cb3f" class="ko kp nl kq b kr ks ka kt ku kv kd kw nm ky kz la nn lc ld le no lg lh li lj ij bi translated"><strong class="kq ja"> Canvas API </strong>提供了通过<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>和<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/HTML" rel="noopener ugc nofollow" target="_blank"> HTML </a> <code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas" rel="noopener ugc nofollow" target="_blank">&lt;canvas&gt;</a></code>元素绘制图形的方法。除此之外，它还可以用于动画、游戏图形、数据可视化、照片处理和实时视频处理。</p><p id="1414" class="ko kp nl kq b kr ks ka kt ku kv kd kw nm ky kz la nn lc ld le no lg lh li lj ij bi translated">Canvas API主要关注2D图形。同样使用<code class="fe np nq nr ns b">&lt;canvas&gt;</code>元素的<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/WebGL" rel="noopener ugc nofollow" target="_blank"> WebGL API </a>绘制硬件加速的2D和3D图形。</p></blockquote><h1 id="3ce6" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">我们将如何探索HTML画布？</h1><p id="76bb" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我们将使用HTML Canvas实现井字游戏资产(X玩家、O玩家、棋盘和赢线)，但首先，我们如何画线？</p><h1 id="3abb" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">如何划清界限？</h1><p id="2c62" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我将向你展示一个最简单的教程，用来自w3schools 的HTML画布画线:</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f243c50f19349410e0b7f4bc26e56bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*dvJtUM-bfCD2E7BU55zt-g.png"/></div></figure><p id="6130" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">检查一下，在第5行我们添加了一个画布标签，带有一个稍后要引用的<code class="fe np nq nr ns b">id</code>、<code class="fe np nq nr ns b">width</code>和<code class="fe np nq nr ns b">height</code>。</p><p id="a0ca" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">使用Canvas API，您会注意到的第一件事是绘图命令完全是通过JavaScript来指示的。它们不能在<code class="fe np nq nr ns b">&lt;canvas/&gt;</code>标签内被内联指令。</p><p id="6971" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">绘制有6个基本步骤:</p><ol class=""><li id="09f7" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">包括一个可识别的画布标签(第5行)。</li><li id="bebb" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">将画布作为HTML元素访问(第9行)。</li><li id="d276" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">获取画布的2d上下文(第10行)。</li><li id="b88e" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">作为由给定坐标(第11行)指定的点处的新子路径。</li><li id="1353" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">通过将子路径的最后一点连接到指定的坐标，为当前子路径添加一条直线(第12行)。</li><li id="4d01" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">画出给定路径的轮廓(第13行)。</li></ol><h2 id="7124" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">画布渲染上下文2D</h2><p id="eb33" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">画布的背景不太明显，它是什么，为什么在那里？</p><p id="4381" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_usage" rel="noopener ugc nofollow" target="_blank">我会用Mozilla教程描述</a>:</p><blockquote class="ni nj nk"><p id="0470" class="ko kp nl kq b kr ks ka kt ku kv kd kw nm ky kz la nn lc ld le no lg lh li lj ij bi translated">画布最初是空白的。为了显示某些东西，脚本首先需要访问渲染上下文并在其上进行绘制。<code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas" rel="noopener ugc nofollow" target="_blank">&lt;canvas&gt;</a></code>元素有一个名为<code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext" rel="noopener ugc nofollow" target="_blank">getContext()</a></code>的方法，用于获取渲染上下文及其绘制函数。<code class="fe np nq nr ns b">getContext()</code>采用一个参数，即上下文的类型。对于2D图形，比如本教程所涉及的图形，您可以指定<code class="fe np nq nr ns b">"2d"</code>来获得一个<code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D" rel="noopener ugc nofollow" target="_blank">CanvasRenderingContext2D</a></code>。</p></blockquote><p id="2038" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">但是，什么是<code class="fe np nq nr ns b"><strong class="kq ja">CanvasRenderingContext2D</strong></code>？<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D" rel="noopener ugc nofollow" target="_blank">让我们再检查一下Mozilla</a>:</p><blockquote class="ni nj nk"><p id="54c6" class="ko kp nl kq b kr ks ka kt ku kv kd kw nm ky kz la nn lc ld le no lg lh li lj ij bi translated"><code class="fe np nq nr ns b"><strong class="kq ja">CanvasRenderingContext2D</strong></code>接口是<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" rel="noopener ugc nofollow" target="_blank"> Canvas API </a>的一部分，为<code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas" rel="noopener ugc nofollow" target="_blank">&lt;canvas&gt;</a></code>元素的绘制表面提供2D渲染上下文。它用于绘制形状、文本、图像和其他对象。</p></blockquote><p id="5077" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">上下文的另一个有趣属性如下，来自<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext" rel="noopener ugc nofollow" target="_blank"> Mozilla </a> <code class="fe np nq nr ns b"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext" rel="noopener ugc nofollow" target="_blank">getContext</a></code>:</p><blockquote class="ni nj nk"><p id="cc27" class="ko kp nl kq b kr ks ka kt ku kv kd kw nm ky kz la nn lc ld le no lg lh li lj ij bi translated">以后在同一个canvas元素上调用这个方法，使用相同的<code class="fe np nq nr ns b">contextType</code>参数，将总是返回与第一次调用该方法时返回的相同的绘图上下文实例。不可能在给定的画布元素上获得不同的绘图上下文对象。</p></blockquote><p id="1a60" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">上下文似乎是拥有所有画布绘制方法的实例，是区别于其他HTML元素的属性。</p><h2 id="5089" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">恭喜</h2><p id="e640" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我认为，现在，你和我已经掌握了Canvas的基本原理，其他的一切都是从这6个基本步骤开始的，现在让我们用我们的领域将它付诸实践。</p><h1 id="ecda" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">纸板帆布</h1><p id="edd0" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated"><a class="ae lt" href="https://medium.com/javascript-in-plain-english/tic-tac-toe-react-typescript-xstate-fp-ts-css-grid-cbbb6455cbf7" rel="noopener">在上一篇文章</a>中，我们将板实现为图像，在结构上实现为CSS网格，对于本文，我们将板构建为画布中的4行。</p><h2 id="c576" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">画布</h2><p id="b7ef" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">从前面的画线示例中，您可能注意到画布的中枢(0，0坐标)在左上角，坐标(宽度，高度)在右下角，如下所示:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oh"><img src="../Images/57f048d234ae1bc864c9c5363e6b1af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B8e8wdPwT1AADmGk88BW8g.png"/></div></div></figure><h2 id="9830" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">细胞与空间</h2><p id="aad1" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">这是我们以前的董事会:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/53b6afe077c305d49beffcc6773cd881.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/0*-whB06x9D8y0Vnn0.gif"/></div></figure><p id="40f5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果从器件角度分析电路板，我们希望:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/99cfbd56918bbcde24e73a520cc23cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWm7Um0v4qwwfeFzmhaEKA.png"/></div></div></figure><p id="5713" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">网格中有九个细胞，对吗？好吧，如果我们这样做，那么我们在哪里画棋盘线？</p><p id="684c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在我的上一次迭代中，这些线被画在细胞之间的分离中心，它们的宽度在一个细胞中是50%，在另一个细胞中是50%，这感觉不公平，不深思熟虑。</p><p id="7146" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我决定改变它，并为纸板线条添加合适的空间:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/d0655753f89f1c3f0e1e10b2d869ecb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_oQ97z99qtGcS_zPOAfmkA.png"/></div></div></figure><p id="101e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在我们的主板应该是208 x 208 px，3个64px的单元和2行8 px的水平和垂直。</p><h2 id="24ab" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">纸板线</h2><p id="9ab9" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">既然我们已经考虑了电路板的尺寸，让我们画出电路板线。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oj"><img src="../Images/02016c06f09c8021ff4aef13f67596aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DrvLXnSrFnXHwVuqX2QB_w.png"/></div></div></figure><p id="e4cd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这个布局有一些我们需要用来计算线条的重要元素:</p><ol class=""><li id="3f34" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">电路板尺寸，将为208像素。</li><li id="5ddb" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">纸板填充，线条和画布之间的空间，让它呼吸，这是纯粹的美学，4px。</li><li id="a85a" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">线宽，8px。</li><li id="0257" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">线帽大小，或圆形末端，4px或线宽的一半。</li><li id="4cfe" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">线长度，将为200 px或板尺寸减去两次划水。</li><li id="d7ac" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">最后，细胞大小，64像素。</li></ol><p id="c4d0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们将使用的方法是使电路板成为<a class="ae lt" href="https://reactjs.org/docs/components-and-props.html#function-and-class-components" rel="noopener ugc nofollow" target="_blank">功能反应组件</a>:</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h2 id="b78b" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">画一次</h2><p id="45fd" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">现在，我们需要绘制，但只绘制一次，这就是为什么我们将使用<code class="fe np nq nr ns b">useEffect</code>来仅在找到画布时进行更改，这种情况只发生一次。</p><h2 id="d30d" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">获取上下文</h2><p id="a0c5" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我们可以安全地使用<a class="ae lt" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-and-non-undefined-type-guards" rel="noopener ugc nofollow" target="_blank">非空和非未定义类型的防护(！)</a>因为我们应该有一个<code class="fe np nq nr ns b">canvas</code>在手边，并且这样应该有一个上下文，如果这些事情都不是真的，那么一定会发生错误，并且将被缓存在开发中。</p><h2 id="3d64" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">笔画风格</h2><p id="b161" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我们将只添加2种笔画样式:</p><ol class=""><li id="262f" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">线宽。</li><li id="5850" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated"><a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineCap" rel="noopener ugc nofollow" target="_blank">线帽</a> : <code class="fe np nq nr ns b">round</code>，是确定用于绘制线条端点的形状的属性。</li></ol><h2 id="61e9" class="nw mm iq bd mn nx ny dn mr nz oa dp mv kx ob oc mx lb od oe mz lf of og nb iw bi translated">进一步了解圆形线帽</h2><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/2c1a8b80a9ae19abae47cece21b5734f.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*nwi7rUBsoEuM3p2bAHRrqA.png"/></div></figure><p id="66b6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">线帽<code class="fe np nq nr ns b">round</code>比较棘手。</p><p id="4d18" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果我们设置线帽为<code class="fe np nq nr ns b">round</code>，那么当我们的线画半个圆时，它的长度会增加一半的宽度。</p><p id="4baf" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这个额外的空间需要考虑。</p><p id="c31d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">要注意的另一个重要优点是，画布线条易于消除锯齿，这是一种渲染平滑图像的技术，圆形形状总是消除锯齿的，因此会有一些具有不同色调的像素来显示平滑的圆形，如下所示:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ol"><img src="../Images/d0c0fee5f384e79d8c7ec6b9a098fde7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEX-vz3b2RFiLjhbD3UczQ.png"/></div></div><figcaption class="om on gj gh gi oo op bd b be z dk">Close up of the Board rendered in the Browser</figcaption></figure><p id="a689" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">请注意，线条，尤其是圆端是反锯齿的。</p><p id="4120" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这也使得计算<code class="fe np nq nr ns b">moveTo</code>和<code class="fe np nq nr ns b">lineTo</code>变得令人困惑，我认为一个图像可以帮助你更好地理解这条线的实际起点:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/2f8c709ad12b80944258d1e9e716063c.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*X3rWQPFKx0VJrnJ61AV2Qw.png"/></div></figure><p id="11c4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">因此，在这两种情况下，行首和行尾的圆形大写字母都是额外添加的空格。</p><p id="47bc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些盖子让我们的数学变得有点复杂，当然可以简化为电路板填充空间的一部分。如果我们将填充的大小增加一倍，我们就不需要将线帽大小常量添加到所有的计算中，但是我想让你明白这个值，以便做出精确的图形。</p><h1 id="0d97" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">玩家X</h1><p id="6975" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">这是我们要做的:</p><ol class=""><li id="46f1" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">我们将移动到单元格的左上角，考虑板填充、板线帽大小、单元格填充和X线帽大小，总结起来，4个4 px的空间。</li><li id="3895" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">然后，我们将再次对单元格大小划分4个空格。</li></ol><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi or"><img src="../Images/3a2b9b41721d255dc94410475b78cc00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBqWMZZmfq1LqUwiukDQdw.png"/></div></div></figure><p id="2f88" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我特别小心地画出了线条的起点和终点，以及我们要考虑的4个空间；现在我们的玩家X将非常适合我们的细胞。</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="6f98" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">如何画一个圆</h1><p id="0a0d" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">我们的参与人O将会是一个圆，这和我们目前所画的不同，线。</p><p id="55fb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我将用w3schools 中的一个<a class="ae lt" href="https://www.w3schools.com/html/html5_canvas.asp" rel="noopener ugc nofollow" target="_blank">简单的例子向你展示如何用画布画一个圆:</a></p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi os"><img src="../Images/ba2e093f947607a3b81fbf81ad4a6a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*OgqJzi1I97655FDkcUvaNA.png"/></div></figure><p id="9112" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">正如你所看到的，我们实际上画的是一个“弧”，而不是一个圆，弧更通用，可以画圆，所以这是画布API的一个好想法。</p><p id="9d0c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe np nq nr ns b">arc</code>方法有6个参数:</p><pre class="ma mb mc md gt ot ns ou ov aw ow bi"><span id="7d06" class="nw mm iq ns b gy ox oy l oz pa">void ctx.arc(x, y, radius, startAngle, endAngle [, anticlockwise]);</span></pre><ol class=""><li id="ff31" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">x，中心的水平坐标。</li><li id="3c1b" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">y，中心的垂直坐标。</li><li id="37f7" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">半径，从中心到圆弧起点的距离。</li><li id="61ab" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">startAngle，圆弧开始的角度，以弧度表示，从x轴正方向开始测量。</li><li id="afa7" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">endAngle，以弧度表示的圆弧结束的角度，从x轴正方向开始测量。</li><li id="9383" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">逆时针(可选)，如果<code class="fe np nq nr ns b">true</code>，在开始和结束角度之间逆时针画弧。默认为<code class="fe np nq nr ns b">false</code>(顺时针)。</li></ol><p id="864e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我将从Mozilla中选取一些例子来进一步演示如何使用弧线绘制不同的形状，并帮助您更好地理解角度的起点、终点以及形状的填充方式:</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/c6a8fe3dfbf5d07c216f39942a9816fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*Wu9i0bnRrKMkeu8jvSQNvw.png"/></div></figure><h1 id="9c69" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">玩家O</h1><p id="b4e1" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">现在我们知道了如何画圆，让我们画我们的玩家Y，但首先，我们的措施:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi pc"><img src="../Images/f906efdba98ccb29f226792574d251cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gx3zdTOrrW8mBx5bt-Iz6g.png"/></div></div></figure><p id="a811" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们将重复4个空格的模式，但是我们的第四个空格，尽管大小相同，却有另一个原因:</p><ol class=""><li id="7c7f" class="lk ll iq kq b kr ks ku kv kx lm lb ln lf lo lj lp lq lr ls bi translated">纸板衬垫。</li><li id="4d94" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">板线帽。</li><li id="c174" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">单元格填充。</li><li id="0ccc" class="lk ll iq kq b kr lu ku lv kx lw lb lx lf ly lj lp lq lr ls bi translated">半线宽。</li></ol><p id="c073" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">正如你所注意到的，弧线方法中的线条宽度是画在弧线的中间，向内和向外各扩展50%,所以，我们需要一半宽度的空间来画和x一样大的玩家O。</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="ca79" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">获奖台词</h1><p id="1a5e" class="pw-post-body-paragraph ko kp iq kq b kr nd ka kt ku ne kd kw kx nf kz la lb ng ld le lf nh lh li lj ij bi translated">获胜线的尺寸将是我们正常线的两倍，为我们的玩家增加了一个很好的区分。这意味着我们也需要两倍的线帽，别忘了！</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi pd"><img src="../Images/109056c8171cf0a594ab449dab582165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZrfE7HKWOskEaYSd3UX6g.png"/></div></div></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi pe"><img src="../Images/032df1d7ea3ba8ff9e6273161dbb7315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXx8tuF2qaCIVmBwaLbatw.png"/></div></div></figure><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="db24" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">就是这样！</h1><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/67342288530d0a6615b0e2b4f582e2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/1*O1h9CJ4Tg6GVbY5PYGKMIA.gif"/></div></figure><p id="78ad" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">整个项目在https://github.com/codingedgar/TicTacToe<a class="ae lt" href="https://github.com/codingedgar/TicTacToe" rel="noopener ugc nofollow" target="_blank">进行</a>去那里检查example2，并给它一个派生，欢迎任何问题和改进。</p><p id="f1da" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果你喜欢这篇文章，也许你会喜欢<a class="ae lt" href="http://eepurl.com/hg7AeP" rel="noopener ugc nofollow" target="_blank">订阅我的简讯</a>！下一集再见👋。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Hosting your React.js and Node.js Apps for Free with Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase免费托管React.js和Node.js应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/hosting-your-react-js-and-node-js-apps-for-free-with-firebase-6dc670564aca?source=collection_archive---------0-----------------------#2020-05-28">https://javascript.plainenglish.io/hosting-your-react-js-and-node-js-apps-for-free-with-firebase-6dc670564aca?source=collection_archive---------0-----------------------#2020-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a252" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Node.js作为后端，通过Firebase托管和云功能托管静态和动态应用——免费！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d177c0d29a097c10b461d7222a130826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWSENHn6SVsKZtbUehNsAA.png"/></div></div></figure><h1 id="dac3" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">什么是Firebase？</h1><p id="7af2" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Google的服务器平台Firebase提供了很多东西——不仅用Node.js托管自定义后端，还提供了fullstack项目所需的所有部分，如数据库、文件托管、认证等等。</p><p id="aa91" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">但无论我们是想用<strong class="ll ir"> Firebase托管</strong>的静态网站，还是用<strong class="ll ir">云功能</strong>后端a Node.js，Firebase都依赖于灵活的定价模式。在任何情况下，您都不必为免费计划指定支付方式，这非常方便，同时也令人放心。比如他们只要存你的信用卡，只有你真的用它的免费资源超过了免费额度才会被收费。</p><p id="7ca5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">此外，必须指出的是，免费并不能得到最好的，这一点应该很清楚——免费团队是小型项目的理想选择，可以尝试rum或平台。然而，你不应该用免费计划来托管你公司的专业网站——这会导致性能问题。</p><p id="ba19" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">让我们来看看我们是如何用Firebase托管静态网站和Node.js后端的。</p><h1 id="f9b0" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用Firebase的静态网站托管— Firebase托管</h1><p id="f27b" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">对于托管静态网站，例如，当我们以/build文件夹的形式接收它们时，当我们在create-react-app项目中执行构建过程时，Firebase提供Firebase托管服务。在带有CMD或Bash的终端中使用官方的Firebase CLI，您可以简单地部署您完成的静态网站的文件夹，这样它将被上传并在Firebase服务器上可用。</p><h2 id="c6d7" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated"><strong class="ak">功能:</strong></h2><ul class=""><li id="f4dd" class="mw mx iq ll b lm ln lp lq ls my lw mz ma na me nb nc nd ne bi translated">免费SSL</li><li id="2787" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">全球CDN始终快速提供静态内容</li><li id="f9bf" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">高达10 GB的托管内容</li><li id="1af6" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">每月10 GB免费带宽</li><li id="8b38" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">多个项目/网站</li><li id="990d" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">连接你自己的现有顶级域名，就像我用wieals.de做的那样</li><li id="95d5" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">每个项目都有免费的可选. firebaseapp.com和. web.app域名</li><li id="8dc4" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">使用CLI轻松部署</li></ul><h2 id="3189" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated"><strong class="ak">下面是一个简单的例子，说明如何用Firebase托管React.js应用程序:</strong></h2><ol class=""><li id="412b" class="mw mx iq ll b lm ln lp lq ls my lw mz ma na me nk nc nd ne bi translated">转到<a class="ae nl" href="https://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank">火焰基座控制台</a></li><li id="1921" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在那里创建一个新项目，当它被创建时，你可以离开控制台</li><li id="96ab" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">用<code class="fe nm nn no np b">create-react-app</code>创建一个新的React.js应用</li><li id="c000" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">编写您的React代码。我把它放在起始模板中</li><li id="b710" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">用<code class="fe nm nn no np b">npm run build</code>创建React应用程序的构建版本。您现在应该有一个/build目录。</li><li id="5e8a" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">用<code class="fe nm nn no np b">npm install -g firebase-tools</code>安装Firebase CLI</li><li id="9416" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在React.js应用程序目录的根目录下运行<code class="fe nm nn no np b">firebase init</code></li><li id="977d" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">选择“托管”，使用您在步骤2中创建的现有项目。，否则创建一个新项目。在公共目录中输入“build”，因为那里有我们的生产就绪的React应用程序。<br/>选择“是”配置为单页应用。(所以我们可以用react-router举例)【不要覆盖现有的index.html T4】</li><li id="0141" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">运行<code class="fe nm nn no np b">firebase deploy</code></li></ol><p id="c550" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">当在浏览器中查找Firebase CLI输出的托管URL时，您应该看到React.js应用程序正在运行。</p><h1 id="bcec" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">使用Firebase托管Node.js应用程序— Firebase云功能</h1><p id="abfa" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">为了用JavaScript操作后端，Firebase提供了所谓的<strong class="ll ir">云功能</strong>，它遵循无服务器方法。</p><p id="5c0a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果没有很好的预配置或管理知识，我们可以为我们的后端提供JavaScript，其中幕后的云函数使用Node.js。<br/>因此我们可以使用Express.js这样的节点框架，但也可以使用handlebars这样的模板引擎和其他可用于服务器端node . js或JavaScript的库。</p><h2 id="97a9" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated"><strong class="ak">功能:</strong></h2><ul class=""><li id="2bb1" class="mw mx iq ll b lm ln lp lq ls my lw mz ma na me nb nc nd ne bi translated">使用JavaScript或TypeScript托管Node.js应用程序</li><li id="99d4" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">访问其他Firebase服务，如Firestore数据库</li><li id="6bfd" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">功能的本地测试</li><li id="89c7" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">日志，使用和你的功能的状态数据，可在Firebase控制台查看</li><li id="f34d" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">易于部署</li></ul><h2 id="d90a" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">在这种情况下使用Firebase的好处</h2><ul class=""><li id="4782" class="mw mx iq ll b lm ln lp lq ls my lw mz ma na me nb nc nd ne bi translated">它是免费的</li><li id="fc0e" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">没有配置的困扰</li><li id="a494" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">可扩展，如果你想使用付费计划。您只需为您在Firebase中使用的内容付费</li><li id="78f0" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nb nc nd ne bi translated">安全性，因为您不需要自己进行配置，这降低了产生问题或潜在安全漏洞的风险</li></ul><p id="aca8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">因为我们必须遵守Firebase的“游戏规则”，所以让我们来看一个使用Express的小型“hello world”示例:</p><h2 id="0673" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">在Firebase云函数中使用Node.js &amp; Express的Hello World示例</h2><ol class=""><li id="7806" class="mw mx iq ll b lm ln lp lq ls my lw mz ma na me nk nc nd ne bi translated">转到<a class="ae nl" href="https://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank">火焰基座控制台</a></li><li id="2590" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">创建一个新的项目，当你完成后，控制台中就没有什么可做的了</li><li id="5078" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">为项目创建一个新的文件夹，到目前为止保持它为空</li><li id="6131" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">安装官方CLI: <code class="fe nm nn no np b">npm install -g firebase-tools</code></li><li id="92ba" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在你的项目文件夹中运行<strong class="ll ir"> firebase init </strong></li><li id="0289" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">选择“功能”(您可以选择带有空格的内容，然后按回车键)</li><li id="cf2d" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">选择选取一个现有项目，并选择您在步骤2中创建的项目的名称。</li><li id="ab43" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">对于使用JavaScript，你应该说“是”，自动安装依赖项，ESLint由你决定</li><li id="e80c" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">移动到/functions文件夹，安装express，用<code class="fe nm nn no np b">npm install express</code></li></ol><p id="96c4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在您已经完成了项目设置，在/functions文件夹中是我们后端函数的JavaScript文件。现在可以用以下内容填充<strong class="ll ir"> index.js </strong>:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="655b" class="mk ks iq np b gy nu nv l nw nx">const functions = require(‘firebase-functions’)<br/>const express = require(‘express’)</span><span id="a3b3" class="mk ks iq np b gy ny nv l nw nx">const app = express()</span><span id="3cbb" class="mk ks iq np b gy ny nv l nw nx">app.get(‘/’, (req, res) =&gt; {<br/>  res.send(‘hello world!’)<br/>})</span><span id="acfe" class="mk ks iq np b gy ny nv l nw nx">exports.app = functions.https.onRequest(app)</span></pre><p id="6ee6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在您可以运行<code class="fe nm nn no np b">firebase deploy</code>了，您的函数应该已经成功部署了。CLI应该将您运行的后端的URL作为<strong class="ll ir">函数URL </strong>输出，所以当您在浏览器中打开它时，您应该会看到“hello world”。<br/>否则，您可以在Firebase控制台的<em class="nz"> functions </em>选项卡中找到该函数的URL。</p><p id="cd09" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">重要<br/></strong><strong class="ll ir"><em class="nz">exports . app</em></strong>表示函数的名称在Firebase注册为“app”。由于您可以在一个项目中运行多个函数，这也意味着每个函数都有一个唯一的路径，就是它的名字。</p><p id="9602" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">比如<strong class="ll ir"> index.js </strong>函数会是这样的:<br/><a class="ae nl" href="https://us-central1-fullstack-4b168.cloudfunctions.net/app" rel="noopener ugc nofollow" target="_blank">https://us-central1-fullstack-4b168.cloudfunctions.net/app</a>。<br/>因此，如果我们想通过<strong class="ll ir"> app.get() </strong>函数在不同的路径上监听index.js，那么考虑index . js中的行为是很重要的。</p><h1 id="a28b" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">结合两者</h1><p id="79d8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们在一个项目中部署一个静态React应用程序和一个Express.js云函数，并使它们在同一个域下可达</p><ol class=""><li id="b998" class="mw mx iq ll b lm mf lp mg ls oa lw ob ma oc me nk nc nd ne bi translated">在<a class="ae nl" href="https://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>中创建一个新项目</li><li id="8d42" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在您的机器上创建一个新目录</li><li id="0427" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">创建一个新的反应应用程序，CRA在你的应用程序的根目录下。我把这个应用程序叫做客户端</li><li id="203d" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在目录中运行<code class="fe nm nn no np b">firebase init</code>。如果您还没有这样做，安装Firebase CLI之前:<code class="fe nm nn no np b">npm install -g firebase-tools</code></li><li id="505e" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">这一次，用空格选择主机<strong class="ll ir">和</strong>功能，然后回车</li><li id="77a3" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">主机和功能的设置和以前一样，但是这次主机的公共目录是React应用程序中的构建目录。在我的例子中，它是<em class="nz">客户端/构建</em></li><li id="22a4" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">在<em class="nz">函数</em>目录下安装express，如果你想使用一些React.js库，那么就把它们安装在<em class="nz">客户端</em>下</li></ol><p id="3ef3" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这应该是目前为止的结构。在我们的项目文件夹中有两个主目录:React应用程序的<em class="nz">客户端</em>，以及包含函数代码的Node.js文件的<em class="nz">函数</em>。</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="c8f5" class="mk ks iq np b gy nu nv l nw nx">├── /client<br/>│ ├── README.md<br/>│ ├── package.json<br/>│ ├── /public<br/>│ ├── /src<br/>│ └── yarn.lock<br/>├── firebase.json<br/>└── /functions<br/> ├── index.js<br/> ├── package-lock.json<br/> └── package.json</span></pre><p id="58a4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果您部署此功能，默认情况下该功能将驻留在不同的域中。为了避免这种情况，我们需要对URL进行重写。在这之后，我们编写函数的代码。</p><p id="d0e0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">重写可以用于我们的主机URL的某些路由，转发到其他Firebase服务，或者简单地为其他目录提供路由，以便它们可以从外部到达。</p><p id="624a" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们使用重写来确保我们的主机和函数可以通过同一个域到达，但是函数有它自己的路由。这当然都是整容，不用做这一步。</p><p id="78c1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如前所述，默认情况下，主机和函数具有完全不同的URL，如果您想在使用主机的React应用程序中对云函数进行API调用，即使该函数具有完全不同的URL，您也可以这样做。</p><p id="63a7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">此外，当然，通过重写，我们不仅可以用于API，还可以用于我们完成的网站的子页面，这些子页面将从Express提供，因此通过同一个域，用户甚至不会注意到他已经从React.js应用程序导航到我们的功能。</p><p id="fac2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这是我们在Firebase中创建重写的方式:</p><ol class=""><li id="624f" class="mw mx iq ll b lm mf lp mg ls oa lw ob ma oc me nk nc nd ne bi translated">打开firebase.json，它应该位于项目目录的根目录下</li><li id="0ced" class="mw mx iq ll b lm nf lp ng ls nh lw ni ma nj me nk nc nd ne bi translated">顶层对象应该是“hosting ”,这是使用Firebase托管项目时的正常情况</li></ol><p id="fcbe" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">默认情况下，应该已经有一个重写，对于每一个 (**)传入的<strong class="ll ir">路由，指向<strong class="ll ir">客户端/构建</strong>目录中的index.html。</strong></p><p id="41ad" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这意味着无论用户在我们的托管域下选择什么路线，他都将被定向到index.html，我们的React单页应用。</p><p id="1192" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们必须改变这种行为。用户不必再为每条路线都去React应用程序，只在“/”被调用时。此外，我们将为路由“/api”创建一个重写，它引用我们名为“api”的函数，我们将在functions目录下的index.js中创建该函数。记住函数的名字不是文件名，而是由<br/>定义的<em class="nz">导出。&lt;姓名&gt; </em>。</p><p id="77cc" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">重写完成的firebase.json :</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="7c95" class="mk ks iq np b gy nu nv l nw nx">“rewrites”: [<br/>  {<br/>    “source”: “/”,<br/>    “destination”: “/index.html”<br/>  },<br/>  {<br/>    “source”: “/api”,<br/>    “function”: “api”<br/>  }<br/>]</span></pre><p id="257f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们的<strong class="ll ir"> index.js </strong>函数代码:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="03d2" class="mk ks iq np b gy nu nv l nw nx">const functions = require('firebase-functions')<br/>const express = require('express')</span><span id="e79e" class="mk ks iq np b gy ny nv l nw nx">const app = express()</span><span id="260a" class="mk ks iq np b gy ny nv l nw nx">app.get('*', (req, res) =&gt; {<br/>  res.send("Hello from the API")<br/>})</span><span id="b197" class="mk ks iq np b gy ny nv l nw nx">exports.api = functions.https.onRequest(app)</span></pre><p id="e5ca" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在我们可以运行<code class="fe nm nn no np b">firebase deploy</code>。<br/>如果您查找部署后CLI提供的托管URL，在根页面“/”上，应该有React应用程序在运行，但如果您现在输入“/api”作为路由，您应该会看到api响应。</p><h2 id="7bc9" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">但是如果我们想要有多条路线，由Express处理呢？</h2><p id="25ff" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们只是用app.get("* ")使它变得简单，但是如果我们有多个需要它们自己的app.get()函数的路由，我们不能告诉它们都监听它们自己的所有路由—那将是不明确的。</p><p id="4d18" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这么说吧，除了可以访问API的API路径之外，我们还希望有一个由Express管理的管理区域。当然，我们必须首先创建一个重写。</p><p id="5ac2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">只需在我们的firebase.json中为它添加这一个，在其他两个重写的下面，这两个重写已经存在:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="749e" class="mk ks iq np b gy nu nv l nw nx">{<br/>  “source”: “/admin”,<br/>  “function”: “api”<br/>}</span></pre><p id="01e5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在，我们必须对index.js进行更改，以确保路由是唯一的:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="4f45" class="mk ks iq np b gy nu nv l nw nx">app.get(‘/api’, (req, res) =&gt; {<br/>  res.send(‘API output’)<br/>})</span><span id="66be" class="mk ks iq np b gy ny nv l nw nx">app.get(‘/admin’, (req, res) =&gt; {<br/>  res.send(‘This is the admin page’)<br/>})</span></pre><p id="0ab7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">现在可以再次运行<code class="fe nm nn no np b">firebase deploy</code>，应该可以访问“/”下的React app，以及“/api”和“/admin”两个Express.js路由。</p><h2 id="12a0" class="mk ks iq bd kt ml mm dn kx mn mo dp lb ls mp mq ld lw mr ms lf ma mt mu lh mv bi translated">我们做到了！</h2><p id="2d31" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir">感谢您的阅读！有兴趣订阅Medium.com，同时支持我吗？如果您的回答是肯定的，请确保查看:</strong></p><p id="483f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><a class="ae nl" href="https://louispetrik.medium.com/membership" rel="noopener">https://louispetrik.medium.com/membership</a></p><p id="993e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果您注册，通过此链接，我将收到您每月付款的一部分。然而，您无需支付额外费用。因此:</p><p id="204b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">提前谢谢您！:)</strong></p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="8ceb" class="kr ks iq bd kt ku ok kw kx ky ol la lb jw om jx ld jz on ka lf kc oo kd lh li bi translated"><strong class="ak">简单明了的注释</strong></h1><p id="29f8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">你知道我们有四个出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae nl" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir">上找到所有这些。io</strong></a>——关注我们的出版物并<a class="ae nl" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir">订阅我们的YouTube频道</strong> </a> <strong class="ll ir">来表达爱意吧！</strong></p></div></div>    
</body>
</html>
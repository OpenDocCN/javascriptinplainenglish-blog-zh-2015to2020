<html>
<head>
<title>Micro Frontends Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微型前端变得简单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/micro-frontends-made-easy-e49acceea536?source=collection_archive---------1-----------------------#2020-01-10">https://javascript.plainenglish.io/micro-frontends-made-easy-e49acceea536?source=collection_archive---------1-----------------------#2020-01-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9fe5" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">今天我们要用一种非常简单的方式来解释它，并用一个例子来说明如何使用它。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/baa46033787e179e8c6b3b44d82c090e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XyCziOza9NgVl4NZ-YPhng.png"/></div></div></figure><h2 id="5961" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">这是什么？(简答)</h2><p id="37e3" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">粗略地说，您只是将一个复杂的web应用程序拆分成较小的项目，然后用iframes将它们放在一个页面上。</p><p id="1fb9" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">Iframes并不是唯一的方法。我们将展示最常用的解决方案。但是，现在，让我们探索一下为什么我们应该使用微前端。</p><h2 id="976a" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">为什么公司在使用它？</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/f869735e0b06d7ce39bd850a7f41e507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGODcdTQYgpNxK0qV-LnPg.png"/></div></div></figure><p id="0c44" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">管理10个10人的项目比管理一个100人的大项目更容易。这里的关键概念是<strong class="lm io">可扩展性</strong>。通过打破大项目，我们可以:</p><ul class=""><li id="6a2f" class="mj mk in lm b ln md lq me kx ml lb mm lf mn mc mo mp mq mr bi translated">分离的储存库</li><li id="c628" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated">独立部署</li><li id="d450" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated">更快的构建和发布</li><li id="743f" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated">自主团队</li><li id="7abd" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated">更容易调试和维护</li></ul><h2 id="261c" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">按域划分应用程序</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mx"><img src="../Images/16eff14f940c58b06394a5b98c353f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfyyxbiAdKaxRHSaYmmNJQ.png"/></div></div></figure><p id="1b95" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">假设您正在为电影流创建一个复杂的React应用程序。你会有很多开发人员，但管理起来仍然很有挑战性。因此，您可以将应用程序分为四个主要领域:</p><ul class=""><li id="4655" class="mj mk in lm b ln md lq me kx ml lb mm lf mn mc mo mp mq mr bi translated"><strong class="lm io">电影目录</strong></li><li id="5671" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated"><strong class="lm io">视频播放器</strong></li><li id="7cc7" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated"><strong class="lm io">用户资料</strong></li><li id="a1e2" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated"><strong class="lm io">账户支付</strong></li></ul><p id="20c7" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">现在，您为每个域创建一个单独的React应用程序，并使用一些资源(如iframes)来合成一个页面，将四个应用程序作为一个显示给用户。</p><p id="d4ab" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">如果您向<strong class="lm io">账户支付</strong>添加新的支付方式，您只需重新部署其应用程序，而不是整个网站。</p><h1 id="cdb7" class="my kp in bd kq mz na nb kt nc nd ne kw jt nf ju la jw ng jx le jz nh ka li ni bi translated">怎么做</h1><h2 id="bca7" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">Iframes</h2><p id="fe92" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">最简单的开始方式。我们可以使用窗口<code class="fe nj nk nl nm b">postMessage()</code>在应用程序之间进行通信。我们将在我们的例子中使用它。</p><h2 id="fd28" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">单人水疗</h2><p id="0f62" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">这是一个在前端编写应用程序的框架。如果你今天需要开始一个现实生活中的项目，选择这个:<br/><a class="ae nn" href="https://single-spa.js.org/" rel="noopener ugc nofollow" target="_blank">single-spa.js.org</a></p><h2 id="1140" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">弗林特</h2><p id="92dc" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">在前端编写应用程序的另一个框架。比单一水疗更灵活，但更新，更不受欢迎:<br/><a class="ae nn" href="https://frint.js.org/" rel="noopener ugc nofollow" target="_blank">frint.js.org</a></p><h2 id="12e6" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">Web组件</h2><p id="95be" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">它不是一个框架，而是一个浏览器特性，也许是互联网的未来。这里有一篇关于它的文章:<br/><a class="ae nn" href="https://www.webcomponents.org/introduction" rel="noopener ugc nofollow" target="_blank">https://www.webcomponents.org/introduction</a></p><h2 id="931b" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">泰勒</h2><p id="d731" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">它使用了一种不同的方法，用node.js在后端编写路由页面。如果你喜欢这个想法，值得一试:<br/><a class="ae nn" href="https://github.com/zalando/tailor" rel="noopener ugc nofollow" target="_blank">https://github.com/zalando/tailor</a></p><h1 id="21c6" class="my kp in bd kq mz na nb kt nc nd ne kw jt nf ju la jw ng jx le jz nh ka li ni bi translated">在3个文件中组成微前端</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/7d655c3b313f49563bbf845d501a8317.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*XUfVvcACISi5XqIYTkObcA.png"/></div></div></figure><p id="e78f" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">现在，我们将使用3个文件创建一个极简的微前端集成:</p><ul class=""><li id="61da" class="mj mk in lm b ln md lq me kx ml lb mm lf mn mc mo mp mq mr bi translated">产品<strong class="lm io">目录</strong>，一个用普通javascript做的微前端。</li><li id="073a" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated">购物<strong class="lm io">购物车</strong>，另一个用Vue.js创建的微前端。</li><li id="0a99" class="mj mk in lm b ln ms lq mt kx mu lb mv lf mw mc mo mp mq mr bi translated"><strong class="lm io"> Composition </strong>，一个将两个app显示为一个页面的html文件。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/9a0a9af16cab013b5f59e2e0d55386c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*npviIreOkDIG8cPdJvQR2w.png"/></div></div></figure><p id="0021" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">主要的想法是在产品<strong class="lm io">目录</strong>上放置水果，允许用户将水果添加到购物车<strong class="lm io">中</strong>。<code class="fe nj nk nl nm b">PostMessage()</code>是一种浏览器资源，我们可以通过它进行亲子交流。</p><p id="5c94" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">好了，现在让我看看一些代码。</p><h2 id="f040" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">composition.html</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="db6a" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">在第13行，我们将<code class="fe nj nk nl nm b">cart</code> iframe与一个常量相关联。在第14行，我们设置复合页面监听消息事件，然后将相同的消息重定向到<code class="fe nj nk nl nm b">cart</code> iframe。</p><h2 id="48ae" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">目录/索引. html</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="7561" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">这里我们将所有按钮的点击与<code class="fe nj nk nl nm b">addToCart</code>功能相关联。这将向父窗口(即合成页面)发送一条消息，其中包含目标的值，即水果名称。</p><h2 id="d457" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">cart/index.html</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="958d" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">最后，我们在Vue.js中的购物车。在<code class="fe nj nk nl nm b">beforeMount()</code>上，我们设置了<code class="fe nj nk nl nm b">cart</code>窗口来监听来自父节点的消息。根据水果名称，<code class="fe nj nk nl nm b">add()</code>方法在<code class="fe nj nk nl nm b">products</code>数据上加1。</p><h2 id="6ad7" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">Git储存库</h2><p id="dc7c" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">你可以在GitHub上查看这个项目。我们改进了消息处理，并用bootstrap添加了一些样式。</p><p id="172c" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated"><a class="ae nn" href="https://github.com/andregardi/micro-frontends-iframe" rel="noopener ugc nofollow" target="_blank">https://github.com/andregardi/micro-frontends-iframe</a></p></div></div>    
</body>
</html>
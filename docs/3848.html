<html>
<head>
<title>Best of Modern JavaScript — Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华——地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-maps-de03148f11d2?source=collection_archive---------16-----------------------#2020-10-28">https://javascript.plainenglish.io/best-of-modern-javascript-maps-de03148f11d2?source=collection_archive---------16-----------------------#2020-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/98193e2f5df71ce5dcdd02f16e18931b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tuiwt9Iziqr7BY5G"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@drewmark?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Stutesman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c705" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何使用地图。</p><h1 id="3851" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">地图大小</h1><p id="44fa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">size</code>属性来获得地图的大小。</p><p id="360a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="03b3" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map();<br/>map.set('foo', 1);<br/>map.set('bar', 2);</span><span id="56b5" class="mq lc iq mh b gy mv ms l mt mu">console.log(map.size);</span></pre><p id="a7ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">map.size</code>会返回2。</p><h1 id="cab4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">清除地图</h1><p id="ce99" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">clear</code>方法清理地图。</p><p id="4c14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0e5e" class="mq lc iq mh b gy mr ms l mt mu">map.clear();</span></pre><p id="9e7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从地图中删除所有条目。</p><h1 id="87d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置地图</h1><p id="30f1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有两种方法可以设置地图。</p><p id="2c1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种方法是传入一个数组，数组中有键值对。</p><p id="d00d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="424c" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map([<br/>  ['foo', 'one'],<br/>  ['bar', 'two'],<br/>  ['baz', 'three'],<br/>]);</span></pre><p id="238b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建地图的另一种方法是调用<code class="fe me mf mg mh b">set</code>方法。</p><p id="378d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9009" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span></pre><p id="fc2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">set</code>以一个键及其值作为参数。</p><p id="6710" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们都用给定的键值对放入3个条目。</p><h1 id="7bbc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">地图键</h1><p id="ef0e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">映射键可以是任何东西，甚至是一个对象。</p><p id="d0c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ad04" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()</span><span id="18a8" class="mq lc iq mh b gy mv ms l mt mu">const KEY1 = {};<br/>map.set(KEY1, 'foo');</span><span id="771f" class="mq lc iq mh b gy mv ms l mt mu">const KEY2 = {};<br/>map.set(KEY2, 'bar');</span></pre><p id="4cf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了两个对象，并将它们用作键。</p><p id="bbac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用那些对象调用<code class="fe me mf mg mh b">get</code>来获取值。</p><p id="558a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3787" class="mq lc iq mh b gy mr ms l mt mu">console.log(map.get(KEY1));</span></pre><p id="370d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用键<code class="fe me mf mg mh b">KEY1</code>获取数值。</p><p id="6e2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该看到<code class="fe me mf mg mh b">'foo'</code>被记录。</p><p id="4511" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">键查找是用SameValueZero算法完成的，所以它与<code class="fe me mf mg mh b">===</code>基本相同，但<code class="fe me mf mg mh b">NaN</code>被认为等于自身。</p><p id="f595" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着只有当对象在内存中引用相同的东西时，它们才被认为是相等的。</p><p id="1b0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="abba" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>map.set(NaN, 'foo');</span><span id="6bde" class="mq lc iq mh b gy mv ms l mt mu">console.log(map.get(NaN));</span></pre><p id="85ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后控制台日志将记录<code class="fe me mf mg mh b">'foo'</code>，因为我们添加了一个以<code class="fe me mf mg mh b">NaN</code>为关键字的条目，并且<code class="fe me mf mg mh b">NaN</code>被认为等于自身。</p><p id="9ee9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">-0</code>和<code class="fe me mf mg mh b">+0</code>被认为是相同的值。</p><p id="b668" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ae1d" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>map.set(-0, 'foo');</span><span id="f89c" class="mq lc iq mh b gy mv ms l mt mu">console.log(map.get(+0));</span></pre><p id="01f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">'foo'</code>日志。</p><p id="dba4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">试图用不在映射中的键获取条目会返回<code class="fe me mf mg mh b">undefined</code>。</p><p id="c77b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2685" class="mq lc iq mh b gy mr ms l mt mu">new Map().get('foo')</span></pre><p id="fc5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">undefined</code>。</p><h1 id="d63a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">迭代地图</h1><p id="5539" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用for-of循环来迭代地图。</p><p id="aa82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要循环遍历这些键，我们可以用<code class="fe me mf mg mh b">map.keys()</code>方法获取它们。</p><p id="d89f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8e74" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="a92d" class="mq lc iq mh b gy mv ms l mt mu">for (const key of map.keys()) {<br/>  console.log(key);<br/>}</span></pre><p id="de6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们记录了<code class="fe me mf mg mh b">'foo'</code>、<code class="fe me mf mg mh b">'bar'</code>和<code class="fe me mf mg mh b">'baz'</code>。</p><p id="98ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方法返回一个带有地图值的迭代器。</p><p id="af86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="76b5" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="526c" class="mq lc iq mh b gy mv ms l mt mu">for (const value of map.values()) {<br/>  console.log(value);<br/>}</span></pre><p id="355b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们记录了<code class="fe me mf mg mh b">'one'</code>、<code class="fe me mf mg mh b">'two'</code>、<code class="fe me mf mg mh b">'three'</code>。</p><p id="8d17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">entries</code>方法返回一个数组中有键值对的迭代器。</p><p id="723b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f906" class="mq lc iq mh b gy mr ms l mt mu">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="0cb9" class="mq lc iq mh b gy mv ms l mt mu">for (const [key, value] of map.entries()) {<br/>  console.log(key, value);<br/>}</span></pre><p id="f32b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们析构了键和值并记录它们，因此我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fd39" class="mq lc iq mh b gy mr ms l mt mu">foo one<br/>bar two<br/>baz three</span></pre><p id="a472" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9f5924c106433a93a45ce05df1575c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wyjv76g6j3oTlll2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@thomaskinto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thomas Kinto</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3269" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0cba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用各种方式使用地图。我们可以添加、更新、获取和删除其中的条目。</p><p id="bacd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过各种方式循环它们。</p><p id="4411" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Integrating Immer.js With use-global-hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Immer.js与use-global-hook集成</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/integrating-immer-js-with-use-global-hook-4a1373d777a5?source=collection_archive---------5-----------------------#2020-09-14">https://javascript.plainenglish.io/integrating-immer-js-with-use-global-hook-4a1373d777a5?source=collection_archive---------5-----------------------#2020-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3e05" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">2020年的Pleasant React状态管理，结合了我最喜欢的两个库。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/35de144438bcbb7f6c60b34c97d0a8d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zjHKI3ZYhZmXfb-JFzvAYg.png"/></div></div></figure><p id="0d8b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> Immer.js </strong>是2019年“<strong class="kq io">年度突破</strong>”<a class="ae lk" href="https://osawards.com/react/" rel="noopener ugc nofollow" target="_blank">React开源奖</a>和“<strong class="kq io">最具影响力贡献</strong>”<a class="ae lk" href="https://osawards.com/javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript开源奖</a>的获得者。将它与<strong class="kq io"> use-global-hook </strong>结合起来，我们就有了我尝试过的最愉快的管理复杂状态的方法。</p><p id="2c64" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">假设你有一个复杂的状态，比如:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="a105" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">在Immer </strong>之前，如果你想改变:<code class="fe ln lo lp lq b">cities[0].weatherStatus.current.weather[0].description<br/></code>你需要这样的东西:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="2f68" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我们能做到以下几点，生活会变得更容易吗？</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="f415" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">是的，我们可以做到这一点，安装非常快。<strong class="kq io">动手吧！</strong></p><h2 id="9784" class="lr ls in bd lt lu lv dn lw lx ly dp lz kx ma mb mc lb md me mf lf mg mh mi mj bi translated">Immer是如何工作的</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mk"><img src="../Images/b2532e9c88842ef8bafd7a4a3829b356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jlmsx2doan2aDLYTkCxrPw.png"/></div></div></figure><p id="9591" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ml">使用Immer就像有了一个私人助理；他拿了一封信(当前状态)并给了你一份副本(草稿),让你在上面草草修改。一旦你完成了，助手会拿走你的草稿，为你产生真正的不可变的，最终的信(下一个状态)。</em></p><p id="9df4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您可以通过运行以下命令将其添加到您的项目中:</p><pre class="kd ke kf kg gt mm lq mn mo aw mp bi"><span id="bcee" class="lr ls in lq b gy mq mr l ms mt">npm install immer</span></pre><h2 id="e6f3" class="lr ls in bd lt lu lv dn lw lx ly dp lz kx ma mb mc lb md me mf lf mg mh mi mj bi translated">use-global-hook是如何工作的</h2><p id="d3a3" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">use-global-hook 是一个轻量级的状态管理库，它不需要redux样板文件，但保留了<strong class="kq io">通量模式</strong>。这意味着你仍然在创造行动来改变你的状态。下面是一个简单的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="3747" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您可以通过运行以下命令将其添加到您的项目中:</p><pre class="kd ke kf kg gt mm lq mn mo aw mp bi"><span id="3fc2" class="lr ls in lq b gy mq mr l ms mt">npm install use-global-hook</span></pre><h1 id="6d2c" class="mz ls in bd lt na nb nc lw nd ne nf lz jt ng ju mc jw nh jx mf jz ni ka mi nj bi translated">集成Immer和use-global-hook</h1><p id="a118" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">从版本<code class="fe ln lo lp lq b">0.2.1</code>开始，<strong class="kq io"> use-global-hook </strong>带有开箱即用的<strong class="kq io"> Immer </strong>集成。我们只需要将<strong class="kq io"> Immer </strong> lib作为use-global-hook选项中的依赖项发送。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="bea3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，让我们回到第一个天气例子。要创建一个改变天气描述的动作，我们只需:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="6006" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你的动作返回一个函数，<strong class="kq io"> use-global-hook </strong>会把它作为一个Immer函数来执行。例如，如果您想要一个将数字添加到当前人口的操作，您可以写为:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="010f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您想查看完整的示例，包括异步操作，您可以查看以下CodeSandbox:</p><p id="c336" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://codesandbox.io/s/immer-integration-e1hpj" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/immer-integration-e1hpj</a></p><p id="3461" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如需更多使用-global-hook，您还可以查看npm页面:</p><div class="nk nl gp gr nm nn"><a href="https://www.npmjs.com/package/use-global-hook" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd io gy z fp ns fr fs nt fu fw im bi translated">使用全局钩子</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">使用不到1kb的钩子轻松管理react的状态。目录或添加尽可能多的计数器，它…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">www.npmjs.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob km nn"/></div></div></a></div><h2 id="ccd1" class="lr ls in bd lt lu lv dn lw lx ly dp lz kx ma mb mc lb md me mf lf mg mh mi mj bi translated">简单英语的JavaScript</h2><p id="f9be" class="pw-post-body-paragraph ko kp in kq b kr mu jo kt ku mv jr kw kx mw kz la lb mx ld le lf my lh li lj ig bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae lk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kq io">！</strong></p></div></div>    
</body>
</html>
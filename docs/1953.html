<html>
<head>
<title>Hook into Webpack Updated Chunks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">挂钩到Webpack更新的块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/webpack-updated-chunks-89443d79dd77?source=collection_archive---------11-----------------------#2020-05-06">https://javascript.plainenglish.io/webpack-updated-chunks-89443d79dd77?source=collection_archive---------11-----------------------#2020-05-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3c37" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">通过仅对已更新的代码段执行某些任务来减少工作量</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ab829982ccee9dd494ca8182e87ebac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-nCc-REpGtYb0x2_z50xlw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@maltewingen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Malte Wingen</a> on <a class="ae ks" href="https://unsplash.com/s/photos/splitting?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4049" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Webpack是一个帮助我们以模块化方式捆绑所有文件的工具。默认情况下，Webpack生成一个输出包。在本文中，我们将研究一个场景，其中由于代码分割而生成了多个包。然而，代码分割并不是本文的本质。</p><h1 id="ef16" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">勾画场景</h1><p id="fe51" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">想象一下，您正在构建一个多品牌应用程序，所有这些都托管在同一个平台上。每次我们构建代码时，我们都必须将它推到这个平台上，以可视化我们的更改。</p><p id="1db7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">理想情况下，我们的代码库将被分成几个包，每个品牌单独的包，以及一些公共包。当更新链接到某个包的代码时，Webpack将确保在查看时只更新那个特定的块。</p><p id="9b43" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们想做一些构建后的步骤，比如将代码推送到平台，但只想将它们应用到更新的块。为此，我们将编写一个小的Webpack插件。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="6d7e" class="lp lq in bd lr ls mt lu lv lw mu ly lz jt mv ju mb jw mw jx md jz mx ka mf mg bi translated">处理更新块的Webpack插件</h1><h2 id="769b" class="my lq in bd lr mz na dn lv nb nc dp lz lc nd ne mb lg nf ng md lk nh ni mf nj bi translated">设置</h2><p id="1c8e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">使用以下样板代码为Webpack插件创建一个JavaScript文件。插件初始化时，将执行构造函数方法。当生成被触发时，将执行apply方法。编译器对象将让我们访问所有的构建信息。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">processUpdatedChunksPlugin.js</figcaption></figure><p id="75e4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将插件添加到您的Webpack配置中。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">webpack.config.js</figcaption></figure><h2 id="a6da" class="my lq in bd lr mz na dn lv nb nc dp lz lc nd ne mb lg nf ng md lk nh ni mf nj bi translated">查找更新的块</h2><p id="a4f0" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">当Webpack创建一个块时，它会在旁边保存块的散列。如果块的输出发生变化，哈希也会发生变化。因此，要检查块是否已经更新，我们只需要检查哈希是否已经更改。</p><p id="4c02" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，在我们的插件中，我们将保留一个块名和散列的映射。然后，我们将过滤掉散列值等于存储散列值的块。对于每个块，我们都存储更新后的哈希。这产生了一个更新块的列表，通过循环这个列表，我们可以为每个块执行一个任务。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="4d20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们有了一个可以访问我们的块数据的地方，只针对已经更新的块。您可以扩展它来采用回调方法，或者完全定制插件来实现特定的目标。</p><h2 id="eb18" class="my lq in bd lr mz na dn lv nb nc dp lz lc nd ne mb lg nf ng md lk nh ni mf nj bi translated">排除故障</h2><p id="44e7" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在IntelliJ中，你可以在你的插件文件中添加断点。接下来，在调试模式下运行Webpack脚本，检查里面发生了什么，并检查值。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="cc20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想检查插件并在你的项目中使用它，检查我的<a class="ae ks" href="https://www.npmjs.com/package/process-updated-chunks" rel="noopener ugc nofollow" target="_blank"> npm包</a>。</p><p id="9bc5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nm">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nm">plain English . io</em></strong></a><em class="nm">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nm">免费周报</em> </strong> </a> <em class="nm">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nm">社区</em> </strong> </a> <em class="nm">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>
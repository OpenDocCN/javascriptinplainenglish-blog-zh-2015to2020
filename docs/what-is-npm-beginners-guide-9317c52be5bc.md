# npm(èŠ‚ç‚¹åŒ…ç®¡ç†å™¨)åˆå­¦è€…æŒ‡å—ğŸ“¦

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/what-is-npm-beginners-guide-9317c52be5bc?source=collection_archive---------7----------------------->

## java æè¿°è¯­è¨€

## *å¦‚ä½•ä½¿ç”¨ NPMâ€”â€”node . js åŒ…ç®¡ç†å™¨å®‰è£…ã€å‘å¸ƒå’Œæµ‹è¯• JavaScript åŒ…çš„æ¼æ´*

![](img/528177546742300bd2f6820f9049b8a6.png)

Source: [npmjs](https://www.npmjs.com/)

[**Node.js**](https://en.wikipedia.org/wiki/Node.js) è½¯ä»¶å¹³å°äº 2009 å¹´å‡ºç°ï¼Œè‡ªé‚£ä»¥åï¼Œæˆåƒä¸Šä¸‡çš„åº”ç”¨ç¨‹åºå»ºç«‹åœ¨è¿™ä¸ªå¹³å°ä¸Šã€‚æˆåŠŸçš„åŸå› ä¹‹ä¸€æ˜¯ [**npm**](https://en.wikipedia.org/wiki/Npm_(software)) ï¼Œè¿™æ˜¯ä¸€ä¸ªæµè¡Œçš„åŒ…ç®¡ç†å™¨ï¼Œå…è®¸ JS å¼€å‘è€…å¿«é€Ÿå…±äº«åŒ…ã€‚

åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œnpm åŒ…å«äº†**130 ä¸‡ä¸ªåŒ…**ï¼Œæ€»å…±æœ‰**160 äº¿æ¬¡ä¸‹è½½(ï¼)**ã€‚

# 1.ä»€ä¹ˆæ˜¯ npmï¼Ÿ

npm(èŠ‚ç‚¹åŒ…ç®¡ç†å™¨)æ˜¯ç”± Node.js æ”¯æŒçš„é»˜è®¤ JavaScript åŒ…ç®¡ç†å™¨ã€‚

*   CLI(å‘½ä»¤è¡Œç•Œé¢) â€”æ‰˜ç®¡å’Œä¸‹è½½è½¯ä»¶åŒ…çš„å·¥å…·ï¼Œ
*   [**åœ¨çº¿çŸ¥è¯†åº“**](https://www.npmjs.com/) åŒ…å« JS åŒ…ã€‚

æ‚¨å¯ä»¥å°†[npmjs.com](https://npmjs.com/)å­˜å‚¨åº“ç»“æ„è§†ä¸ºä¸€ä¸ªå±¥è¡Œä¸­å¿ƒï¼Œå®ƒä»é”€å”®è€…(åŒ…ä½œè€…)é‚£é‡Œæ¥æ”¶äº§å“(npm åŒ…)å¹¶å°†è¿™äº›äº§å“åˆ†å‘ç»™è´­ä¹°è€…(åŒ…ç”¨æˆ·)ã€‚

åœ¨å±¥è¡Œä¸­å¿ƒ([npmjs.com](https://npmjs.com/))ï¼Œä¸€ç¾¤[è¢‹ç†Š](https://en.wikipedia.org/wiki/Wombat)ä¸ºæ¯ä¸ªé¡¾å®¢å……å½“ä¸ªäººç»ç†ã€‚`npm CLI`

ä¾èµ–é¡¹æä¾›å¦‚ä¸‹:

![](img/5b998ea912a4971501c6543bedd0f693.png)

The process of installing a package through **npm install**

å°è£…æ”¾ç½®è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤º:

![](img/a37615f3f4c1a3210a93b01da5cd6ef4.png)

The process of placing a package through `**npm publish**`

ç°åœ¨è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¢‹ç†Šçš„å·¥ä½œã€‚

# 1.1.Package.json æ–‡ä»¶

JavaScript ä¸­çš„æ¯ä¸ªé¡¹ç›®â€”â€”æ— è®ºæ˜¯ Node.js è¿˜æ˜¯ web åº”ç”¨ç¨‹åºâ€”â€”éƒ½å¯ä»¥è¢«å¤åˆ¶ï¼Ÿä½œä¸ºå…·æœ‰è‡ªå·±çš„æè¿°å’Œæ–‡ä»¶çš„ npm åŒ…ã€‚`package.json`

`package.json`å¯ä»¥è®¤ä¸ºæ˜¯ npm ç›’å­(é¡¹ç›®)ä¸Šçš„è´´çº¸(æ‰€éœ€ç‰ˆæœ¬çš„åŒ…åˆ—è¡¨)ã€‚è¯¥æ–‡ä»¶æ˜¯åœ¨ä½¿ç”¨ä»¥ä¸‹å…ƒæ•°æ®åˆ›å»º JavaScript / Node.js é¡¹ç›®æ—¶ç”±å‘½ä»¤ç”Ÿæˆçš„:`npm init`

*   `name`:JS åº“/é¡¹ç›®çš„åç§°ã€‚
*   `version`:é¡¹ç›®ç‰ˆæœ¬ã€‚
*   `description`:é¡¹ç›®æè¿°ã€‚
*   `license`:é¡¹ç›®è®¸å¯è¯ã€‚

# 1.2.Npm è„šæœ¬

æ„å»ºè‡ªåŠ¨åŒ–çš„`package.json`åŒ…å«å­—æ®µ`scripts`ï¼Œä¾‹å¦‚:

`eslint`ã€`prettier`ã€`ncc`ã€`jest`å¯ä»¥åœ¨`node_modules/.bin/`å†…å…¨å±€æˆ–å±€éƒ¨è®¾ç½®ã€‚

# 1.3.ä¾èµ–é¡¹å’Œå¼€å‘ä¾èµ–é¡¹

`dependencies`å’Œ`devdependencies`æ˜¯å…·æœ‰ npm åº“åç§°(key)å’Œå®ƒä»¬çš„[è¯­ä¹‰ç‰ˆæœ¬](https://semver.org/lang/ru/) (value)çš„å­—å…¸ã€‚æ¥è‡ª[ç±»å‹è„šæœ¬åŠ¨ä½œ](https://github.com/actions/typescript-action)æ¨¡æ¿çš„ç¤ºä¾‹:

ä½¿ç”¨å‘½ä»¤`npm install`æ ‡å¿—`--save`å’Œ`--save-dev`å®‰è£…è¿™äº›ä¾èµ–é¡¹ã€‚å®ƒä»¬åˆ†åˆ«ç”¨äºç”Ÿäº§å’Œå¼€å‘ã€‚

å…³äºç‰ˆæœ¬æ§åˆ¶:

*   `^`:æœ€åä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç‰ˆæœ¬`1.3.0`æ˜¯`1`ä¸»è¦ç‰ˆæœ¬ç³»åˆ—ä¸­çš„æœ€åä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬ï¼Œé‚£ä¹ˆ`^1.0.4`æ˜¯å¦ä¼šå®‰è£…è¯¥ç‰ˆæœ¬ã€‚
*   `~`:æœ€æ–°è¡¥ä¸å‘å¸ƒã€‚å¦‚æœè¿™æ˜¯ä¸€ç³»åˆ—æ¬¡è¦ç‰ˆæœ¬`1.0`ä¸­çš„æœ€åä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬ï¼Œåˆ™`~1.0.4`å°†è®¾ç½®`1.0.7`ã€‚

æ‰€æœ‰åŒ…ç‰ˆæœ¬å°†æ˜¾ç¤ºåœ¨ç”Ÿæˆçš„æ–‡ä»¶`package-lock.json`ä¸­ã€‚

# 1.4.Package-lock.json æ–‡ä»¶

è¯¥æ–‡ä»¶æè¿°äº† JavaScript é¡¹ç›®ä¸­ä½¿ç”¨çš„åŒ…ç‰ˆæœ¬ã€‚å¦‚æœå®ƒåŒ…æ‹¬å¯¹ä¾èµ–å…³ç³»(äº§å“åç§°)çš„ä¸€èˆ¬æè¿°ï¼Œé‚£ä¹ˆæ›´è¯¦ç»†çš„æè¿°â€”æ•´ä¸ªä¾èµ–å…³ç³»æ ‘ã€‚`package-lock.jsonpackage.jsonpackage-lock.json`

`package-lock.json`ç”±å‘½ä»¤`npm install`ç”Ÿæˆï¼Œç”± npm CLI è¯»å–ï¼Œä»¥ç¡®ä¿é¡¹ç›®ç¯å¢ƒé€šè¿‡`npm ci`æ’­æ”¾ã€‚

# 2.å®‰è£…è½¯ä»¶åŒ…

ç”±äºç”¨æˆ·ä¸‹è½½è½¯ä»¶åŒ…çš„é¢‘ç‡æ›´é«˜(160 äº¿æ¬¡ä¸‹è½½å¯¹æ¯” 1300 ä¸‡æ¬¡å‘å¸ƒ)ï¼Œæ‰€ä»¥å¼„æ¸…æ¥šå¦‚ä½•å®‰è£…å®ƒä»¬ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

# 2.1.npm å®‰è£…

`npm install`æ˜¯å®‰è£…åŒ…çš„å‘½ä»¤ã€‚

é»˜è®¤æƒ…å†µä¸‹`npm install <package-name>`ï¼Œå·²ç­¾åçš„`^`ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚`npm install`ä¼šæ ¹æ®`package.json`æ–‡ä»¶ä¸­çš„é…ç½®å°†åŒ…ä¸‹è½½åˆ°é¡¹ç›®æ–‡ä»¶å¤¹`node_modules`ï¼Œå°½å¯èƒ½æ›´æ–°åŒ…çš„ç‰ˆæœ¬(åè¿‡æ¥æ›´æ–°`package-lock.json`)ã€‚å¦‚æœè¦å…¨å±€å®‰è£…åŒ…ï¼Œå¯ä»¥æŒ‡å®šæ ‡å¿—`-g`ã€‚

npm ä½¿å¾— JavaScript åŒ…çš„å®‰è£…å˜å¾—å¦‚æ­¤ç®€å•ï¼Œä»¥è‡³äºè¯¥å‘½ä»¤ç»å¸¸è¢«é”™è¯¯åœ°ä½¿ç”¨ï¼Œå…³äºè¿™ä¸ªä¸»é¢˜çš„æ¨¡å› å·²ç»å‡ºç°åœ¨å¼€å‘äººå‘˜ç¤¾åŒºä¸­:

![](img/4ad1703925175ec2209a75fb5507f8e7.png)

Sometimes you think that node_modules are super heavy!

å½“æ‚¨æ·»åŠ ä¸€ä¸ªæ ‡å¿—æ—¶ï¼Œ`--production`åªæœ‰åº”ç”¨ç¨‹åºå·¥ä½œæ‰€å¿…éœ€çš„ä¾èµ–é¡¹æ‰ä¼šä»`dependencies`å®‰è£…ï¼Œè€Œä¸ä¼šå¢åŠ `node_modules`ã€‚

# 2.2.npm ci

å¦‚æœ`npm install --production`å¯¹äºç”Ÿäº§æ¥è¯´æ˜¯æœ€ä¼˜çš„ï¼Œæ˜¯å¦æœ‰ç±»ä¼¼çš„å›¢é˜Ÿè¿›è¡Œæœ¬åœ°å¼€å‘ï¼Ÿå¯¹ï¼Œå«`npm ci`ã€‚

å’Œå‰é¢ä¸€æ ·ï¼Œå¦‚æœ`package-lock.json`åœ¨é¡¹ç›®ä¸­è¿˜ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ—¶å°±ä¼šç”Ÿæˆã€‚`npm installnpm ci`è®¿é—®é”æ–‡ä»¶ä»¥ä¸‹è½½è½¯ä»¶åŒ…çš„ç¡®åˆ‡ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œä¸åŒæœºå™¨ä¸Šçš„è½¯ä»¶åŒ…é›†å°†ä¿æŒä¸å˜ã€‚

# 2.3.npm å®¡è®¡

ä¸ºäº†é¿å…å°†[æ¶æ„åŒ…](https://medium.com/@jsoverson/how-two-malicious-npm-packages-targeted-sabotaged-one-other-fed7199099c8)æ·»åŠ åˆ°å­˜å‚¨åº“ä¸­ï¼Œnpm.js ç»„ç»‡æå‡ºäº†[çš„æƒ³æ³•ï¼Œå³](https://blog.npmjs.org/post/173719309445/npm-audit-identify-and-fix-insecure)é€šè¿‡åˆ›å»ºæ¨¡å—`npm audit`æ¥å®¡è®¡ç”Ÿæ€ç³»ç»Ÿã€‚å®ƒæä¾›äº†å…³äºè½¯ä»¶åŒ…ä¸­çš„æ¼æ´å’Œä¿®è¡¥ç‰ˆæœ¬çš„å­˜åœ¨çš„ä¿¡æ¯ã€‚

![](img/564ada8e2e08f2ba83e58314b6e2115e.png)

Audit example for static-eval package

å¦‚æœåœ¨è½¯ä»¶åŒ…çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­æœ‰å¯ç”¨çš„è¡¥ä¸ï¼Œå®ƒ`npm audit fix`å°†è‡ªåŠ¨æ›´æ–°å—å½±å“çš„ä¾èµ–é¡¹çš„ç‰ˆæœ¬ã€‚

# 3.åŒ…è£…æ”¾ç½®

è®©æˆ‘ä»¬ä»æ¶ˆè´¹åŒ…è½¬ç§»åˆ°æ”¾ç½®åŒ…ã€‚

# 3.1.npm å‘å¸ƒ

å‘ npmjs.com æäº¤ä¸€ä¸ªåŒ…éå¸¸ç®€å•â€”â€”åªéœ€åœ¨æ§åˆ¶å°ä¸­é”®å…¥`npm publish`ã€‚ä½œè€…å¿½ç•¥çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†æ˜¯ç‰ˆæœ¬æ§åˆ¶ã€‚è¿™é‡Œæœ‰ä¸€å¥— semver.org çš„[ç»éªŒæ³•åˆ™ï¼Œç”¨äº](https://semver.org/lang/ru/)ä½•æ—¶å¢åŠ ç‰ˆæœ¬å·:

*   **ä¸»è¦ç‰ˆæœ¬:**å½“å‘åä¸å…¼å®¹çš„ API å‘ç”Ÿå˜åŒ–æ—¶ã€‚
*   **æ¬¡è¦ç‰ˆæœ¬:**å½“æ‚¨æ·»åŠ æ–°åŠŸèƒ½è€Œä¸ç ´åå‘åå…¼å®¹æ€§æ—¶ã€‚
*   **è¡¥ä¸ç‰ˆæœ¬:**åšå‘åå…¼å®¹ä¿®å¤æ—¶ã€‚

åœ¨å‘å¸ƒæ‚¨è‡ªå·±çš„åŒ…æ—¶ï¼Œéµå¾ªä¸Šè¿°æŒ‡å¯¼æ–¹é’ˆæ›´ä¸ºé‡è¦ï¼Œä»¥ç¡®ä¿æ‚¨ä¸ä¼šç ´åä»»ä½•äººçš„å…¼å®¹æ€§ï¼Œå› ä¸º npm é»˜è®¤ä½¿ç”¨ç‰ˆæœ¬`^`(ä¸‹ä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬)ã€‚

# ç»“è®º

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰äº†å›½å®¶é¢„é˜²æœºåˆ¶çš„ç»“æ„ï¼Œå¹¶äº†è§£åˆ°:

*   å…¶ä¸­æ–‡ä»¶æ˜¯ä¾èµ–æ•°æ®(`package.json`ã€`package-lock.json`)ã€‚
*   å¦‚ä½•åœ¨æœ¬åœ°æœºå™¨ä¸Šå®‰è£…ç”Ÿäº§åŒ…(`npm install`)ã€å®¡è®¡åŒ…(`npm audit`)ã€‚
*   å¦‚ä½•å°†è½¯ä»¶åŒ…æ·»åŠ åˆ°å­˜å‚¨åº“()ã€‚`npm publish`

## **é˜…è¯»æ›´å¤š:**

[](https://medium.com/@raevskymichail/frontend-and-backend-difference-797d3e975917) [## å‰ç«¯å’Œåç«¯â€”æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

### å‰ç«¯å’Œåç«¯ã€‚ä½ å¯èƒ½å·²ç»å¬è¯´è¿‡ç½‘ç»œç¼–ç¨‹é¢†åŸŸçš„è¿™äº›æµè¡Œè¯æ±‡ï¼Œä½†æ˜¯èƒŒåæ˜¯ä»€ä¹ˆâ€¦

medium.com](https://medium.com/@raevskymichail/frontend-and-backend-difference-797d3e975917) [](https://medium.com/javascript-in-plain-english/how-to-customize-an-angular-project-build-2e7e2c31ca6b) [## å¦‚ä½•è‡ªå®šä¹‰ Angular é¡¹ç›®æ„å»º

### å¯èƒ½ä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œåœ¨æ„å»ºæ‚¨çš„ Angular åº”ç”¨ç¨‹åºæ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªä»»åŠ¡ï¼Œå®ƒè¶…å‡ºäº†æ„å»ºâ€¦

medium.com](https://medium.com/javascript-in-plain-english/how-to-customize-an-angular-project-build-2e7e2c31ca6b)
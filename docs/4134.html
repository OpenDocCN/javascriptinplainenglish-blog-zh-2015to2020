<html>
<head>
<title>Forms with Formik &amp; Yup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Formik表单&amp;是的</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/forms-with-formik-yup-5ae384352f47?source=collection_archive---------3-----------------------#2020-11-19">https://javascript.plainenglish.io/forms-with-formik-yup-5ae384352f47?source=collection_archive---------3-----------------------#2020-11-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="191e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用Formik在ReactJS中轻松设置、验证和提交客户数据</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dda71ae9d8b262a5285a1f0211867c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8uMmsq_SYpqRM8_d"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@othentikisra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">israel palacio</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="bbb1" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">概观</h2><p id="279d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">开发移动应用和网站时，从用户那里获取数据很重要。当我们构建一个反应网站或一个反应本地的移动应用程序时，人们经常遇到的一个障碍是选择一个可靠的表单库来帮助捕获和管理信息——UI组件可能很容易构建，但是捕获输入；提供经过验证的有意义的反馈并提交表单是需要考虑的很多事情。</p><p id="2fe9" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><a class="ae kv" href="https://formik.org/" rel="noopener ugc nofollow" target="_blank"> Formik </a>是一个考虑了任何以前构建的库的所有缺点的库，并且引入了一种简单的方式来处理表单，没有任何“魔力”。有一个小的学习曲线，但一旦我们通过了这个，图书馆使形式状态管理变得轻而易举！</p><p id="2d17" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">本文将重点介绍如何使用Formik创建一个简单的登录页面，并提供代码示例供参考。在本文的最后，应该提到学习曲线。就上下文而言，结构将是:</p><p id="3f6b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">1.一般设置<br/> 2。验证输入并向用户提供有意义的反馈<br/> 3。了解如何提交表单</p><h2 id="48ec" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">用户界面设置</h2><p id="6c8e" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">React-Bootstrap附带了许多基本组件来制作一个像样的表单——不是超级花哨，但是设置如下，下面的代码只是UI设置，还没有实现任何逻辑。<br/> <em class="mq">注意:你可以使用任何用户界面库，有些有特殊的Formik插件——通过反应引导，我们可以直接使用Formik库。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Simple login form set up using a few react-bootstrap components we can interact with the form, add values, but this does nothing at this point.</figcaption></figure><h2 id="e600" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">通用Formik设置(布线)</h2><p id="eb1c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">现成的，Formik附带了一个直接的组件，我们把它包装在表单用户界面周围。想象正在发生的事情的最简单的方法是想象一个简单的父子方法，对孩子(字段，按钮)的更新被传递给父母(Formik Component ),来自父母的道具可以通过孩子访问，传递下来的道具给UI表单提供了“功能”,这些同样的道具允许孩子进行交流。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">View the Setup Form Tab — Basic Formik component wired up with our card</figcaption></figure><p id="4fe2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">最初，这个结构看起来令人生畏，似乎有很多事情要做，让我们把它分解一下:</p><ol class=""><li id="124a" class="mt mu iq lu b lv ml ly mm lf mv lj mw ln mx mk my mz na nb bi translated"><formik>组件是我们的父组件，它允许我们传递描述事物的特殊道具，即<em class="mq"> initialValues、validationSchema和onSubmit(我们将在后面详细介绍这些)</em></formik></li><li id="76e9" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">当我们在<formik>组件中定义子组件时，我们定义了一个胖箭头函数，这允许我们将道具从Formik(父组件)传递给子组件(字段、按钮)，道具如<em class="mq">手柄更改、手柄提交、手柄模糊、值、触摸、错误等。现在可供儿童使用</em></formik></li><li id="c7f5" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">当孩子们与道具“互动”时，结果会传递给父母<formik/></li></ol><p id="0a13" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在这一点上，我建议打开上面的代码沙箱，查看下面的代码</p><h2 id="32ae" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">验证输入并提供有意义的反馈</h2><p id="5435" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在建立了Formik的基本框架后，逻辑上接下来的重点应该是建立输入验证，在我们的场景中，当客户键入无效的电子邮件或不够长的密码时，我们希望提供一些有意义的反馈。</p><p id="d32a" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">组件带有一个验证模式属性——我们可以传入一种类型的对象，当特定字段更新时，会进行检查以确保值符合我们在模式中定义的规则。我们使用另一个名为<a class="ae kv" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank">是的</a>的库来定义我们的模式</p><p id="d495" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">是的概述</strong></p><blockquote class="nh ni nj"><p id="d94f" class="ls lt mq lu b lv ml jr lx ly mm ju ma nk mn mc md nl mo mf mg nm mp mi mj mk ij bi translated">Yup是一个用于值解析和验证的JavaScript模式构建器。定义模式、转换匹配的值、验证现有值的形状，或者两者都进行。Yup模式极具表现力，允许对复杂、相互依赖的验证或值转换进行建模。——<a class="ae kv" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank">https://github.com/jquense/yup</a></p></blockquote><p id="5a4f" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">本质上，让我们定义我们的验证模式，我们通过validationSchema prop将它传递给Formik。然后，Formik根据相应的yup验证检查字段值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><strong class="ak">Click the ‘Yup Validation’ tab in the UI pane and try type an invalid email address, Password hasn’t been wired up with validation, open the sandbox and try set up the validation as a small side activity.</strong></figcaption></figure><p id="bb82" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我们来分解一下上面的代码:</p><ol class=""><li id="0928" class="mt mu iq lu b lv ml ly mm lf mv lj mw ln mx mk my mz na nb bi translated">我们使用<em class="mq">Yep</em>定义了一个通用的<em class="mq">validationSchema</em>——有许多不同的验证<em class="mq">Yep</em>开箱即用，我们挑选了一些基本的<br/> <em class="mq">注意:在validation schema中，我们需要</em> <strong class="lu ir"> <em class="mq">与命名</em> </strong> <em class="mq">一致，如果我们的字段被称为“emailAddress ”,我们必须在下面的任何地方使用这个名称。</em></li><li id="5ab1" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">将已定义的模式应用到<formik>组件，这将告诉Formik我们想要运行的验证以及针对哪些字段。</formik></li><li id="224f" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">我们解构传递到子字段中的属性，为了使验证正常工作，我们需要来自Formik的<em class="mq"> handleChange(func)、handleBlur(func)、errors(obj)和touched(obj) </em>属性</li><li id="98e8" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">如果你使用的是反应引导表单，那么每个表单都很重要。Group有一个controlId(命名需要与<em class="mq">的</em> valIdationSchema一致，这样Formik就知道这个字段需要验证什么)<br/> <em class="mq">注意:如果您没有使用react-bootstrap，那么向您的输入传递一个id，这与</em>的工作方式相同</li><li id="5c2e" class="mt mu iq lu b lv nc ly nd lf ne lj nf ln ng mk my mz na nb bi translated">以我们的形式。“控制”或“输入组件”我们定义<em class="mq"> onChange </em>和<em class="mq"> onBlur </em>，分别传递<em class="mq"> handleChange </em>和<em class="mq"> handleBlur </em> props。注意:在这一点上，我们将信息从子节点传递回父节点。</li></ol><p id="9ab4" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">该流程的概述如下:用户对电子邮件字段进行更改，<em class="mq"> onChange </em>和<em class="mq"> onBlur </em>将每个更改传递回&lt; Formik &gt;。<br/> &lt; Formik &gt;消耗字段<em class="mq"> controlId </em>，针对out <em class="mq"> yup </em>模式运行验证，并更新其自身的<em class="mq">错误</em>和<em class="mq">用信息触动</em>道具。</p><p id="69fd" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">React-Bootstrap允许我们针对表单字段定义“is invalid”——我们可以对错误和接触的对象使用条件逻辑来确定某些内容是否无效:</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="50e5" class="kw kx iq no b gy ns nt l nu nv">//if emailAddress has been touched by the users and there are errors, if the errors are fixed or there are no errors, then the errors prop won't have our field.</span><span id="94db" class="kw kx iq no b gy nw nt l nu nv">isInvalid = { touched.emailAddress &amp;&amp; errors.emailAddress }</span></pre><p id="4cec" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">然后我们可以定义形式。control . Feedback(react-bootstrap)在输入无效时显示错误消息。</p><p id="4be0" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在这一点上，我建议打开上面的代码沙箱，查看src/LoginForm/YupValidation.js下的代码——使用validationSchema并尝试使密码字段的验证工作(下一节中的工作解决方案)</p><h2 id="49e4" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">提交输入</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Select the ‘OnSubmit’ Tab in the UI, type valid credentials and see it working</figcaption></figure><p id="4209" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><formik>继续遵循相同的模式，通过提交，我们从父节点传递了一个<em class="mq"> handleSubmit </em>函数作为道具，我们用登录按钮的<em class="mq"> onClick </em>连接这个调用。</formik></p><p id="47ba" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">Formik知道从子进程(使用其他道具，如<em class="mq"> handleChange </em>和<em class="mq"> handleBlur) </em>传递的值，因此将这些值传递给组件<em class="mq"> onSubmit </em>函数。在这里，我们可以处理值，调度redux操作来调用API或将值存储在存储中，向客户显示反馈或其他任何内容。</p><h2 id="6f93" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h2><p id="f72a" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">本文旨在帮助学习Formik附带的学习曲线，文章中提供了代码示例，可以免费复制或分支，不会产生任何后果。我真的希望在阅读完这篇关于Formik的文章后，不要感到害怕，并且清楚地知道如何在ReactJS或React-Native中设置表单。</p><p id="8522" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">如果有任何问题或者你认为有更好的方法，请留下评论让我知道！</p></div></div>    
</body>
</html>
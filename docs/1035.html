<html>
<head>
<title>3 Minimally-Invasive Supercharged JS DEBUG Tools You Didn’t Know You Had</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3种您不知道已有的微创增压JS调试工具</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-minimally-invasive-supercharged-js-debug-tools-you-didnt-know-you-had-e374974f5bae?source=collection_archive---------5-----------------------#2020-01-18">https://javascript.plainenglish.io/3-minimally-invasive-supercharged-js-debug-tools-you-didnt-know-you-had-e374974f5bae?source=collection_archive---------5-----------------------#2020-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/549637ffa911aca4061f4e36c5ee24ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vHtHvLPZplL527mXcUUFeA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">LocalStorage debug setup (Cover Image)</figcaption></figure><p id="bab9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我先描述以下行为，然后让我知道这听起来是否像你。您有如下代码:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="14e3" class="lg lh in lc b gy li lj l lk ll">const result = await getSomeData().catch(handleErr)<br/>console.log('result', result)</span></pre><p id="1812" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">但是，您有一个大的应用程序，所以您至少要重复这个片段一百次。代码的其他部分依赖于<code class="fe lm ln lo lc b">result</code>，当这些其他部分看起来不正确时，您会恐慌并疯狂地开始添加更多的<code class="fe lm ln lo lc b">console.log</code>语句，因为“代码应该在昨天完成”:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="6912" class="lg lh in lc b gy li lj l lk ll">console.log('result.id', result.id)<br/>console.log('typeof result.id', typeof result.id)<br/>...</span></pre><p id="9777" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">希望您不要练习上述行为，因为在所有这些地方都有调试语句，您必须记住清除它们。幸运的是，有更简单的方法来调试您的代码，而不需要您认为可能需要的所有努力。</p><p id="2699" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我会尽我最大的努力保持这篇文章<em class="lp">的简洁</em>并从简单到简单的组织这篇文章，因为我知道当你疯狂地试图调试某件事的时候，你想要尽快得到答案。</p><h1 id="0ffc" class="lq lh in bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">1)监视变量。</h1><p id="dd5a" class="pw-post-body-paragraph jz ka in kb b kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ig bi translated">首先，如果您必须绝对监视给定的变量，请停止这样做:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="66a7" class="lg lh in lc b gy li lj l lk ll">console.log('someVariable', someVariable)</span></pre><p id="97d2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">是的，上面很容易做到，而且我对那个坏习惯感到内疚，但下面更容易:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2c79" class="lg lh in lc b gy li lj l lk ll">console.log({ someVariable })</span></pre><p id="3a3e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然而，还有比以上更简单的事情。如果你有Chrome开发工具，你可以创建一些叫做“logPoints”的东西(就像<a class="ae ms" href="https://dev.to/nickytonline" rel="noopener ugc nofollow" target="_blank"> @nickytonline </a> <a class="ae ms" href="https://dev.to/nickytonline/comment/kd2n" rel="noopener ugc nofollow" target="_blank">提到的</a>；另请参见<a class="ae ms" href="https://developers.google.com/web/updates/2019/01/devtools#logpoints" rel="noopener ugc nofollow" target="_blank"> logpoints </a>。它们完全像断点，但不是中断，消息被记录在这些行中:(使用他引用的图像)</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/0aebfc00932a955342f7e0ccab9b40a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lr7sObcT0ejOm6Px.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Reference: developers.google.com</figcaption></figure><p id="28d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">具体来说，这是我今天早些时候做的一些简单的事情，来帮助一个新的开发朋友。我刚刚启动了Chrome开发工具代码片段编辑器，创建了代码片段，设置了logPoint(在“断点”下组织)，并运行了代码:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/2cffb65b10b45e91a9aad6bd276bc44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lJB29a55Kt9G-I9c.jpg"/></div></div></figure><p id="3703" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">导致:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/9d562b2829fda0c63d8f07ba18e6c285.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/0*nTTCuG-Q8jJNONMQ.jpg"/></div></figure><p id="bf02" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，我能够消除键入“console . log”(11个字符)的需要；我的调试工作变得更有效率了。此外，我可以很容易地禁用(但保留)日志点，只需取消选中复选框。由于日志点都组织在一个地方，这使得很容易禁用所有日志记录，或者如果日志点引脚在无数的地方，则很容易启用所有日志记录！但是等等，我们可以做得更好！</p><h1 id="9a15" class="lq lh in bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">2)T2模块。</h1><p id="c555" class="pw-post-body-paragraph jz ka in kb b kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ig bi translated">TL；灾难恢复—是的，您可以在浏览器中使用它！<br/>TL；DR2可以，您可以<code class="fe lm ln lo lc b">import</code>购买！</p><p id="c0dd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">检查您的“节点_模块”文件夹中的“调试”文件夹！考虑到这个模块每周被下载5600万次以上，很有可能你已经在你的机器上安装了它！即使你没有把它列为一个依赖项，因为很多项目都在使用它，很可能至少有一个依赖项附带了它。比如说，如果/当你安装了<code class="fe lm ln lo lc b">socket.io-client</code>，你<em class="lp">也</em>安装了<a class="ae ms" href="https://www.npmjs.com/package/debug" rel="noopener ugc nofollow" target="_blank">调试模块</a>却没有意识到！</p><p id="5fc2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">虽然我非常确信您可能已经使用它来调试您的服务器端代码，如下所示:</p><p id="2f31" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe lm ln lo lc b">server.js</code></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="0ac3" class="lg lh in lc b gy li lj l lk ll">const debug = require('debug')('server')</span></pre><p id="b20a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">终端:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2143" class="lg lh in lc b gy li lj l lk ll">DEBUG="server" node server.js</span></pre><p id="640f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你可能不知道的是，调试模块<em class="lp">也可以</em>在浏览器中使用！</p><p id="f94f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您不仅可以在浏览器中使用它，还可以使用您熟悉的<code class="fe lm ln lo lc b">import</code>语法<em class="lp">导入</em>调试模块:</p><p id="c3e1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe lm ln lo lc b">myComponent.js</code>:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="9bdc" class="lg lh in lc b gy li lj l lk ll">import Debug from 'debug'<br/>const debug = Debug('myComponent')</span><span id="ceb0" class="lg lh in lc b gy mv lj l lk ll">...<br/>const result = await getSomeData().catch(handleError)<br/>debug({ result })<br/>...</span></pre><p id="5b82" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，为了在浏览器的控制台日志中实际查看调试语句，您不需要设置任何环境变量，而是只需在<code class="fe lm ln lo lc b">localStorage</code>中设置<em class="lp">调试</em>变量。但是...无论您做什么，避免在您自己的代码中设置该变量！在你的Chrome开发工具中设置它要安全得多！这样，您的代码就不会意外地启用调试日志记录。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/6e83e7bc1018eb24745b05a7e3a36dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vdBQBex_iMR57pxw.jpg"/></div></div></figure><p id="e112" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以现在，当您设置了该变量后，所有的调试语句都将记录到控制台的<code class="fe lm ln lo lc b">myComponent.js</code>中。如果你想调试多个文件，每个文件可以得到它自己的或共享的调试字符串，在这种情况下<code class="fe lm ln lo lc b">localStorage.debug</code>变量只需要是逗号分隔的字符串或通配符(' * '):</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="53c7" class="lg lh in lc b gy li lj l lk ll">localStorage.debug = 'myComponent, otherComponent' // logs for both components</span><span id="ac5d" class="lg lh in lc b gy mv lj l lk ll">localStorage.debug = '*' // all debug log statements in browser will log to console</span></pre><p id="c000" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">许多依赖于调试模块<em class="lp">的模块已经有了</em>调试字符串，它们用来帮助自己(和你)调试<em class="lp">它们的</em>模块发生了什么。两个这样的模块是<code class="fe lm ln lo lc b">socket.io-client</code>和<code class="fe lm ln lo lc b">nuxt-socket-io</code>。这意味着当你想调试IO进出组件的每个部分时，你不需要写一个单独的<code class="fe lm ln lo lc b">console.log</code>语句！您只需将<code class="fe lm ln lo lc b">localStorage.debug</code>变量设置为正确的字符串:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="34e7" class="lg lh in lc b gy li lj l lk ll">localStorage.debug = 'socket.io-client:socket' // Monitor socket.io-client</span><span id="3abf" class="lg lh in lc b gy mv lj l lk ll">localStorage.debug ='nuxt-socket-io, socket.io-client:socket' // debug even more...<br/></span><span id="1ea4" class="lg lh in lc b gy mv lj l lk ll">// Then, when it is desired to mute the logs...simply make debug undefined:<br/>localStorage.debugX ='nuxt-socket-io, socket.io-client:socket' // debug nothing just by putting an X there (or whatever you like!)</span></pre><p id="507b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，当我将<code class="fe lm ln lo lc b">localStorage.debug</code>设置为:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/8bfe5304e463d77b6f2ea7abfda661e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B7s_AKIDMBWOcU-P.jpg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">LocalStorage debug setting (Zoom in, if needed)</figcaption></figure><p id="ab60" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我得到的日志是这样的:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/0c2c1ab3fba94c72bd2d860bd8d212ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0lic8Yv3n0s9_-JpXgBFQ.jpeg"/></div></div></figure><p id="c730" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然而，当我编写调试语句时，我只需编写:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="6aea" class="lg lh in lc b gy li lj l lk ll">debug('some message', { data })</span></pre><p id="2b24" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">但是……日志条目包含其他有用的信息，我不必考虑编码，例如:生成日志条目的文件和行，以及调试语句之间的时间间隔。如果日志变得很长，Chrome dev tools可以通过右键单击和菜单选择来轻松保存控制台日志。</p><h1 id="d629" class="lq lh in bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">3)<a class="ae ms" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger" rel="noopener ugc nofollow" target="_blank">“调试器”</a>关键字。</h1><p id="98a5" class="pw-post-body-paragraph jz ka in kb b kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ig bi translated">通常，在浏览器中运行的代码是源代码的一个巨大的丑化版本。试图将断点的一根针插入到一个非常杂乱的干草堆中是非常耗时的。幸运的是，语言内置了“debugger”关键字，可以用来打断感兴趣的地方:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="f35d" class="lg lh in lc b gy li lj l lk ll">function myCodeAintWorkin(arrrrgggh) {<br/>  let thisThing;<br/>  debugger; // &lt;-- runtime will break at this point! (even if this line is buried in the uglified code at line 1112442)<br/>  // Some buggy code here<br/>}</span></pre><p id="5ad8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以，回到最初的<code class="fe lm ln lo lc b">CarsArray</code>片段，我也可以像这样调试<code class="fe lm ln lo lc b">filtered</code>变量:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/015b2b1d6e339882db640a30df40d025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s8dS7eHzaOGQ51yA.jpg"/></div></div></figure><p id="282d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，虽然我不必键入“console . log”(11个字符)，但我必须键入“debugger”(8个字符)，但我得到的额外好处是，只需向右看几英寸，我就能够立即看到<em class="lp">局部范围</em>，并根据我的需要修改属性。所有这些<em class="lp">都不需要</em>再写几个<code class="fe lm ln lo lc b">console.log</code>语句:</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/8d1c0d9ebc56a70607461ddd1a28bac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4PlzxX-1DecfrnH_.jpg"/></div></div></figure><p id="8dc8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在上面的图片中，我将道奇的“年龄”属性设置为不到10年，尝试了第二个<code class="fe lm ln lo lc b">filtered2</code>语句。如果我怀疑我的第一个<code class="fe lm ln lo lc b">filtered</code>声明，我可以尝试改变属性，断言新的超过10年的汽车列表中少了一辆车。</p><p id="8dee" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">尽管“debugger”关键字很酷，但当您的代码准备合并到您团队的代码库中时，删除该行可能是一个非常好的主意，因为您的团队很可能不希望<em class="lp">他们的</em>代码在<em class="lp">您的</em>调试语句上中断。</p><h1 id="87cf" class="lq lh in bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="595f" class="pw-post-body-paragraph jz ka in kb b kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ig bi translated">“工具”这个术语是否适用于上面提到的所有三种调试方法，我认为还有待商榷。第一种方法利用了JS对象结构，您可以将它作为一种工具来监视变量(<code class="fe lm ln lo lc b">console.log({ someVar }</code>)。第二种方法使用JS生态系统中最流行的调试工具之一，结合Chrome开发工具来帮助您在浏览器中调试。最后，第三种方法是“debugger”关键字，它与Chrome开发工具一起使用，就像一种工具，可以用来判断代码中给定行的应用程序状态。</p><p id="268b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我尽最大努力按易用性来订购工具。某种调试方法有多“容易”当然是主观的。我个人认为第二种方法是最容易的，但是更多的人可能认为第三种方法是最容易的。不管怎样，即使你是一个有经验的开发者，我希望这篇文章对你有所帮助。</p></div></div>    
</body>
</html>
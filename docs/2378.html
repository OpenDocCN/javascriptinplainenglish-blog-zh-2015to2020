<html>
<head>
<title>DOM Manipulation — Stylesheets and Scripts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DOM操作—样式表和脚本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/dom-manipulation-stylesheets-and-scripts-af47f0705aa9?source=collection_archive---------8-----------------------#2020-06-18">https://javascript.plainenglish.io/dom-manipulation-stylesheets-and-scripts-af47f0705aa9?source=collection_archive---------8-----------------------#2020-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2032014187d24bb347eeb36df97f3546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KnYQsiuwA3wievnF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@shotbyrain?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ave Calvar</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8951" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何操作样式表中的数据和下载脚本。</p><h1 id="2cb8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">CSSStyleRule概述</h1><p id="e7c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一个<code class="fe me mf mg mh b">CSSStyleRule</code>对象代表一个样式表中的每个CSS规则，</p><p id="5e4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它是附加到选择器的CSS属性和值的接口。</p><p id="1cfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来访问它们，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e38e" class="mq lc iq mh b gy mr ms l mt mu">&lt;style id='styles'&gt;<br/>  body {<br/>    background-color: orange;<br/>    margin: 20px;<br/>  }<br/>  <br/>  p {<br/>    font-weight: 20px;<br/>    color: blue;<br/>  }<br/>&lt;/style&gt;</span></pre><p id="1672" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="61dd" class="mq lc iq mh b gy mr ms l mt mu">const styles = document.querySelector('#styles');<br/>console.dir(styles.sheet.cssRules);</span></pre><p id="56c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<code class="fe me mf mg mh b">style</code>元素中获取CSS规则。</p><h1 id="1a65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">CSSStyleRule属性和方法</h1><p id="6238" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一个<code class="fe me mf mg mh b">CSSStyleRule</code>有它自己的属性和方法。</p><p id="76c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它具有以下属性:</p><ul class=""><li id="ed9e" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe me mf mg mh b">cssText</code>—CSS规则的文本</li><li id="04d6" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">parentRule</code> —给定样式块的父规则</li><li id="7fb5" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">parentStylesSheet</code> —父样式表对象</li><li id="65cc" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">selectorText</code> —规则的选择器</li><li id="8e3f" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">style</code> —规则的样式</li><li id="b8ec" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">type</code> —规则的类型，为CSS规则，值为1</li></ul><p id="d692" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2c98" class="mq lc iq mh b gy mr ms l mt mu">const styles = document.querySelector('#styles');<br/>console.dir(styles.sheet.cssRules[0].<!-- -->cssText<!-- -->);</span></pre><p id="d95b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到body元素的样式，因为这是第一个条目。</p><h1 id="140c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取样式表中的CSS规则列表</h1><p id="a386" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">cssRules</code>有样式表的CSS规则列表。</p><p id="b928" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有与上一个例子相同的样式元素，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a6fe" class="mq lc iq mh b gy mr ms l mt mu">const styles = document.querySelector('#styles');<br/>console.dir(styles.sheet.cssRules);</span></pre><p id="e681" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了得到所有的<code class="fe me mf mg mh b">cssRules</code>。</p><h1 id="2990" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">插入或删除CSS规则</h1><p id="66b7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">insertRule</code>让我们在样式表中插入一个CSS规则。</p><p id="c3dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">deleteRule</code>让我们删除它们。</p><p id="1a20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有一个样式元素:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="220b" class="mq lc iq mh b gy mr ms l mt mu">&lt;style id='styles'&gt;<br/>  body {<br/>    background-color: orange;<br/>    margin: 20px;<br/>  }<br/>  <br/>  p {<br/>    font-weight: 20px;<br/>    color: blue;<br/>  }<br/>&lt;/style&gt;</span></pre><p id="cc82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="31ef" class="mq lc iq mh b gy mr ms l mt mu">const styles = document.querySelector('#styles');<br/>styles.sheet.insertRule('p { color:green }', 1);</span></pre><p id="72cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们为p标签添加了一个新的CSS规则，它被现有的规则覆盖。</p><p id="64bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过写下以下内容来删除旧规则:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bcda" class="mq lc iq mh b gy mr ms l mt mu">styles.sheet.deleteRule(1);</span></pre><p id="6805" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们的新规则是页面上p元素的规则。</p><p id="99a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们所做的就是为要删除的规则传入索引。</p><h1 id="dc36" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">编辑CSSStyleRule的值</h1><p id="89f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以给<code class="fe me mf mg mh b">style</code>属性赋值来改变样式值。</p><p id="43cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="77ea" class="mq lc iq mh b gy mr ms l mt mu">&lt;style id='styles'&gt;<br/>  body {<br/>    background-color: orange;<br/>    margin: 20px;<br/>  }</span><span id="9aa3" class="mq lc iq mh b gy nj ms l mt mu">p {<br/>    font-weight: 20px;<br/>    color: blue;<br/>  }</span><span id="d1e8" class="mq lc iq mh b gy nj ms l mt mu">&lt;/style&gt;<br/>&lt;p&gt;<br/>  foo<br/>&lt;/p&gt;</span></pre><p id="0170" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="79b2" class="mq lc iq mh b gy mr ms l mt mu">const styles = document.querySelector('#styles');<br/>styles.sheet.cssRules[1].style.color = 'green';</span></pre><p id="913a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将p元素的颜色设置为绿色。</p><h1 id="7995" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建新的内联CSS样式表</h1><p id="9e5a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">innerHTML</code>属性向样式元素添加新的样式。</p><p id="00e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e189" class="mq lc iq mh b gy mr ms l mt mu">const style = document.createElement('style');<br/>style.innerHTML = 'body { color: orange }';</span><span id="e4e8" class="mq lc iq mh b gy nj ms l mt mu">document.querySelector('head').appendChild(style);</span></pre><p id="7b38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，主体的所有内容都将是橙色的，因为我们有了一个添加了该样式的样式元素。</p><h1 id="d8ce" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">以编程方式添加外部样式表</h1><p id="8b3b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">以编程方式添加外部样式表可以像添加样式标签一样完成。</p><p id="762c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们只需使用<code class="fe me mf mg mh b">createElement</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e687" class="mq lc iq mh b gy mr ms l mt mu">const link = document.createElement('link');<br/>link.setAttribute('rel', 'stylesheet');<br/>link.setAttribute('type', 'text/css');<br/>link.setAttribute('id', 'link');<br/>link.setAttribute('href', 'https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css');</span></pre><p id="2478" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用Bootstrap样式表添加了一个新的link元素。</p><h1 id="080e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">禁用或启用样式表</h1><p id="559d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">属性是一个我们可以在样式表上设置的属性，用来打开和关闭样式表。</p><p id="b75a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有一个链接元素:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9abf" class="mq lc iq mh b gy mr ms l mt mu">&lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"&gt;</span></pre><p id="9b11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过书写来打开或关闭:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bd1f" class="mq lc iq mh b gy mr ms l mt mu">document.querySelector('link').disabled = true;</span></pre><p id="109d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们禁用了它。要启用它，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e307" class="mq lc iq mh b gy mr ms l mt mu">document.querySelector('link').disabled = false;</span></pre><h1 id="e750" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">插入和运行JavaScript</h1><p id="1060" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在HTML文档中插入JavaScript。</p><p id="48d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript代码总是作为外部文件或内联代码存在于脚本标签中。</p><p id="a599" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">脚本元素没有任何必需的属性。</p><p id="eaef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还应该避免自结束脚本标签。</p><p id="a556" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">试图包含一个操纵页面上脚本元素的外部脚本文件会导致页面上的脚本元素被忽略。</p><p id="6cfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="da12" class="mq lc iq mh b gy mr ms l mt mu">&lt;script&gt;<br/>console.log('hello');<br/>&lt;/script&gt;</span></pre><p id="5edc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">包含脚本标记。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/bf98be3d23ae4ed6a4610de9d57e7856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gEFTaM3KwEl-2H-z"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jimo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Barnett</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0456" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript同步加载</h1><p id="4868" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">加载脚本的默认选项是同步加载。</p><p id="87c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着他们会阻止其他脚本的渲染和下载，如果它们存在的话。</p><p id="9272" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一个脚本对文档来说是永恒的，并且阻止了其他所有东西的加载，那么这个脚本必须在解析之前先下载，这意味着它会更慢。</p><h1 id="8e2c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d7cb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">可以用JavaScript修改样式规则。</p><p id="e3e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，脚本是同步加载的。</p><h2 id="240a" class="mq lc iq bd ld nl nm dn lh nn no dp ll ko np nq lp ks nr ns lt kw nt nu lx nv bi translated">简单英语的JavaScript</h2><p id="f5cb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
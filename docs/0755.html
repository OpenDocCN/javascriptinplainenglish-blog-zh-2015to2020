<html>
<head>
<title>Using ES6 for your Node.js Application running on Express, using Babel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将ES6用于运行在Express上的Node.js应用程序，使用Babel</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-es6-for-your-backend-nodejs-application-running-on-express-using-babel-5503bded9842?source=collection_archive---------0-----------------------#2019-12-06">https://javascript.plainenglish.io/using-es6-for-your-backend-nodejs-application-running-on-express-using-babel-5503bded9842?source=collection_archive---------0-----------------------#2019-12-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="85a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们都喜欢<strong class="jm io"> ES6 </strong>语法，我们一直在react和其他框架上构建的前端应用程序中使用它。<br/>如果我们的<strong class="jm io">后端</strong> <strong class="jm io"> nodejs </strong>应用程序能够使用ES6语法就好了。<br/>非常<strong class="jm io">容易</strong>到<strong class="jm io">设置</strong>和漂亮<strong class="jm io">直截了当</strong>。我们将使用使用<strong class="jm io"> express-generator </strong>创建的现有项目，然后添加<strong class="jm io"> babel编译器</strong>以使用es6语法。</p><p id="e6e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">什么是<a class="ae ki" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank">巴别塔</a>？是一个<strong class="jm io">编译器</strong>将我们的es6代码<strong class="jm io">编译成nodejs可理解的代码</strong>。想了解更多关于巴别塔的信息，请去https://babeljs.io/</p><p id="df09" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于那些直接想看代码的人，去这里<a class="ae ki" href="https://github.com/tushartuteja/es6-sample-babel-nodejs" rel="noopener ugc nofollow" target="_blank">https://github.com/tushartuteja/es6-sample-babel-nodejs</a></p><p id="d9b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将做以下事情。</p><ol class=""><li id="6949" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">我们将使用express-generator创建一个后端应用程序。</li><li id="4449" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">添加babel依赖项和。<em class="kx"> babelrc </em>文件。</li><li id="b7d5" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">修改<em class="kx"> package.json </em>看看是否一切正常。</li><li id="0891" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">将一个文件改为es6语法。</li></ol></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="a1a1" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第1部分:<strong class="ak">创建</strong>一个示例应用程序</h1><p id="42b6" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">我们将使用以下命令。截图跟随。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="3015" class="mr lg in mn b gy ms mt l mu mv">express sampleApp<br/>cd sampleApp<br/>npm install<br/>npm start</span></pre><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mw"><img src="../Images/19dc6ec2bc094639012bb8f315e9f5f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*T9GUSkWU9XvDUq76iSmung.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Generating a sample app using express generator</figcaption></figure><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/0eb026be237ea7b519424718e6471397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*-8rBVUxy5FJ8X2BFBGqs_w.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Running npm install and npm start</figcaption></figure><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nj"><img src="../Images/f07dc4cec6fb7246cb10eb957b994bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4NVEioWE9ydBe5IuaL31A.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">A sample application running default route ‘/’</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="68a9" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第2部分:添加巴别塔。</h1><p id="5d22" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">我们将添加babel作为开发依赖，我们需要添加三个包到我们的项目。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="d3be" class="mr lg in mn b gy ms mt l mu mv">npm install --save-dev babel-cli babel-preset-env rimraf</span></pre><p id="70d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们添加了以下包</p><ol class=""><li id="6e51" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">使用babel的命令行工具。</li><li id="d1e6" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">要使用的预置。babel编译我们代码的一套规则。</li><li id="a1d0" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">rimraf:一个清理我们的dist文件夹的包。</li></ol><p id="cdca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在需要创建一个新文件<em class="kx">。babelrc，它包含以下</em></p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="062b" class="mr lg in mn b gy ms mt l mu mv">{</span><span id="55bd" class="mr lg in mn b gy nk mt l mu mv">"presets": ["env"]</span><span id="49bb" class="mr lg in mn b gy nk mt l mu mv">}</span></pre><h1 id="9e45" class="lf lg in bd lh li nl lk ll lm nm lo lp lq nn ls lt lu no lw lx ly np ma mb mc bi translated">第3部分:修改package.json</h1><p id="b10e" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">添加了构建脚本和启动脚本</p><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nq"><img src="../Images/dabdd235a2c8ce851a5907e23f19c5da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_FiiXuL0uNswMHw9zXr1aA.png"/></div></div></figure><p id="615e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">启动脚本</strong>现在<strong class="jm io">首先构建</strong>项目，然后运行相同的命令(bin/www)但是在<strong class="jm io"> dist </strong>文件夹之外，dist基本上是<strong class="jm io">发行版</strong>的简称。将被分发(部署)的代码。</p><p id="5b4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">构建</strong>脚本<strong class="jm io">首先清除</strong>dist文件夹(任何陈旧文件),然后<strong class="jm io">使用babel </strong>编译整个代码。</p><figure class="mi mj mk ml gt mx"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="03ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们检查一下这个项目是否仍然有效。</p><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nt"><img src="../Images/affcd77f53cbc289b51e2eed8774ecf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xb66BgaMypYy9aVBmshM-w.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Running npm start after adding babel to the project.</figcaption></figure><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7b71c65c57e7df2b412ebc9ff7e7ed2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*9CCz5-ocEJU3NNvaoeGkNQ.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Still works, we didn’t break anything.</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="b207" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第4部分:修改现有文件(index.js)</h1><p id="c461" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">该文件如下所示，在app.js中是必需的，附加了这两个文件。</p><figure class="mi mj mk ml gt mx"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="mi mj mk ml gt mx"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="5f65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们修改index.js文件。</p><figure class="mi mj mk ml gt mx"><div class="bz fp l di"><div class="nr ns l"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Modified file using ES6 syntax.</figcaption></figure><p id="dcf3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有use import语句和export default router语句，其余代码相同。这是我们这里的es6语法。</p><p id="f384" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在app.js中，我们做了以下更改:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="b1b1" class="mr lg in mn b gy ms mt l mu mv">import index from './routes/index';</span><span id="402d" class="mr lg in mn b gy nk mt l mu mv">app.use('/', index);</span></pre><p id="5a9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之前的这些行是:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="32ab" class="mr lg in mn b gy ms mt l mu mv">var indexRouter = require('./routes/index');</span><span id="b56a" class="mr lg in mn b gy nk mt l mu mv">app.use('/', indexRouter);</span></pre><p id="3907" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们检查一下我们的es6语法现在是否有效。</p><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f7bd4006a920c4b7c152a1beccfefc18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*REqp47SLtyAuB2vfKbSYzQ.png"/></div></figure><figure class="mi mj mk ml gt mx gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/1a5d16eee94783b590264815beec7626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*-N5dZ5kfElHUD3Vk7GMEzw.png"/></div></figure><p id="3598" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">瞧，成功了！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Writing integration test with Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与赛普拉斯的写作整合测试</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/writing-integration-test-with-cypress-280ae0f7abaf?source=collection_archive---------6-----------------------#2020-10-18">https://javascript.plainenglish.io/writing-integration-test-with-cypress-280ae0f7abaf?source=collection_archive---------6-----------------------#2020-10-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5d73390a7a79bf9c5f83fccd644a92ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrtpeXiRrTK74d7tZqeRaA.png"/></div></div></figure><p id="1f8b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Cypress是一个为现代web构建的开源测试运行程序，它使得集成测试比以前更容易和更快，在cypress的帮助下，您可以测试任何类型的web应用程序。Cypress直接与DOM交互，这使得它独立于应用程序使用的web框架。</p><h2 id="ff1b" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated"><strong class="ak">为什么集成测试很重要？</strong></h2><p id="547c" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">集成测试有助于模拟用户的旅程，它有助于检测用户使用应用程序时发生的错误。编写集成测试有很多好处，比如。</p><ul class=""><li id="3eaa" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks lw lx ly lz bi translated">它确保了集成模块按预期正常工作。</li><li id="9a07" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks lw lx ly lz bi translated">一旦待测模块可用，测试仪就可以开始测试。</li><li id="4fcf" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks lw lx ly lz bi translated">通常覆盖了系统的很大一部分，因此效率更高。</li><li id="9f7b" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks lw lx ly lz bi translated">增加测试覆盖率并提高测试的可靠性。</li></ul><p id="07f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我将分享如何使用cypress设置、编写和运行测试，为了演示的目的，我们将测试一个用react编写的TODO list应用程序。</p><p id="8421" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这篇文章是给初学者的，所以我已经详细讲解了每一步。</p><p id="e4d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">柏树先决条件</strong></p><ul class=""><li id="19ca" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks lw lx ly lz bi translated">需要JavaScript或TypeScript的基本知识。</li><li id="3828" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks lw lx ly lz bi translated">必须在您的系统中安装节点版本&gt; 10</li></ul><p id="a2b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">设置赛普拉斯测试的反应应用程序</strong></p><ol class=""><li id="dab5" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks mf lx ly lz bi translated">从<a class="ae mg" href="https://github.com/aniketchanana/react-todo-app" rel="noopener ugc nofollow" target="_blank">这里</a>下载react app的源代码。</li><li id="319a" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">运行npm install下载与应用程序相关的所有依赖项。</li><li id="648d" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">运行npm start在端口3000启动本地服务器。</li></ol><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/f52df621db0668bdddad81920d8f8c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GUUaJ7uOHdstVq1X1IazFA.png"/></div></div></figure><p id="5ac5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您的react应用程序已在<a class="ae mg" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">上启动并运行，http://localhost:3000/ </a>因此，让我们不要浪费任何时间，直接进入主要内容。</p><p id="4ab0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">立柏</strong></p><ol class=""><li id="e023" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks mf lx ly lz bi translated">使用<code class="fe mm mn mo mp b">npm init</code>创建一个空项目。</li><li id="7c2f" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">使用<br/> <code class="fe mm mn mo mp b">npm install cypress --save-dev</code>命令将柏树保存为开发依赖项。</li><li id="8409" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">使用<br/> <code class="fe mm mn mo mp b">npm install mocha --save-dev</code>命令将摩卡保存为开发依赖项</li><li id="6c76" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">使用<br/> <code class="fe mm mn mo mp b">npm install chai --save-dev</code>命令将chai保存为开发依赖项</li><li id="ec82" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">要使用命令<code class="fe mm mn mo mp b">npx cypress open</code>运行cypress，您也可以在package.json的脚本部分添加以下命令。</li></ol><p id="0330" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您的package.json将如下所示</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="7477" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在运行命令<code class="fe mm mn mo mp b">npm run cypress:open</code></p><p id="941a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">运行此命令将打开一个柏树测试运行程序，并将在你的项目下的柏树文件夹下创建一些样板代码。</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/f51ae9051963df330cec3be7de324ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*mQFulpBmUEQDE4_SCS6dAg.png"/></div></figure><p id="9121" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在集成文件夹下，您可以看到以下文件。</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/7a1c9856e7bccbe84f2858c036fd47fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*QwGWBWIkQUk42Cbzzfle2Q.png"/></div></figure><p id="029f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些是cypress给出的一些例子，你可以在cypress test runner中使用这些例子，或者你可以访问<a class="ae mg" href="https://example.cypress.io/commands/actions" rel="noopener ugc nofollow" target="_blank"> this </a>站点来查看这些例子的文档。</p><h2 id="bbea" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">用Cypress编写我们的第一个测试</h2><p id="9d27" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">由于我们要编写自己的测试用例，我们将使用我们最初下载的待办事项应用程序。</p><ol class=""><li id="f788" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks mf lx ly lz bi translated">在集成文件夹下创建一个名为todoapp的文件夹。</li><li id="c82a" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">创建一个名为actions.spec.js的文件，该文件包含与我们的TODO应用程序相关的所有测试。</li></ol><p id="ed92" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Cypress中，我们有一个描述块，也称为测试套件，其中包含各种it块，it块也称为测试用例，测试用例包含可能为真或假的断言。如果我们的断言为真，我们的测试就成功通过，否则就会失败。</p><h2 id="d4d4" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated"><strong class="ak">“描述”与“它”</strong></h2><p id="25e4" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated"><code class="fe mm mn mo mp b">describe</code>块接受两个参数</p><ol class=""><li id="c337" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks mf lx ly lz bi translated">描述测试套件的字符串。</li><li id="da37" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">一个回调函数，它运行所有的<strong class="jx io">并逐个阻塞其中的</strong>。</li></ol><p id="710a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mm mn mo mp b">it</code>块也接受2个参数</p><ol class=""><li id="dd9a" class="lr ls in jx b jy jz kc kd kg lt kk lu ko lv ks mf lx ly lz bi translated">描述测试用例的字符串</li><li id="4e45" class="lr ls in jx b jy ma kc mb kg mc kk md ko me ks mf lx ly lz bi translated">一个回调函数，一个接一个地运行里面所有的<strong class="jx io"> cypress命令</strong>。</li></ol><h2 id="be2d" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated"><strong class="ak">第一个测试套件测试添加待办事项功能</strong></h2><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="881c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码中，我们将具有name属性的输入作为输入我们的文本的任务，然后定位并单击add todo按钮。在我们使用contains命令放置断言之后，它会向列表中添加一个todo项，该命令检查ul是否包含带有输入文本的元素。</p><h2 id="8cfd" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated"><strong class="ak">测试删除待办事宜功能</strong></h2><p id="ae7b" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">不需要编写另一个测试套件(描述块)来测试它，因为这属于todo应用程序的操作，所以我们可以在前面的描述块中编写这个it块。</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="3964" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第二，它阻止对待办事项列表的删除功能的测试。它首先获得列表项目的计数，然后单击待办事项应用程序中的删除图标，然后再次检查某个项目是否被删除。如果没有，则期望这里是来自chai库的断言。</p><h2 id="7ee9" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated"><strong class="ak">测试编辑待办事宜功能</strong></h2><p id="2d79" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">此功能也属于todo应用程序的操作，因此对于这一个，我们也将在同一个describe块中编写它</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="ef45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，它块我们已经限制了<code class="fe mm mn mo mp b">cy</code>使用within命令的范围到最后一个todo项，所以从现在开始<code class="fe mm mn mo mp b">cy.get</code>将从最后一个Todo项块开始搜索元素。</p><p id="c5af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文涵盖了cypress的基本命令和用法，详细解释了每个命令的用法，访问cypress <a class="ae mg" href="https://docs.cypress.io/" rel="noopener ugc nofollow" target="_blank">官方网站</a>。</p><p id="832e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的宝贵时间，我希望您喜欢阅读这篇文章，<br/>我将在其他文章中介绍JavaScript应用程序的测试，该应用程序包含使用cypress的API调用。</p><p id="814b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">喜欢这篇文章吗？如果有，通过<a class="ae mg" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="jx io">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Making use of Node.js’s Built-in Debugger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用Node.js的内置调试器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nodejs-built-in-debugger-856a9a3c054b?source=collection_archive---------6-----------------------#2020-08-28">https://javascript.plainenglish.io/nodejs-built-in-debugger-856a9a3c054b?source=collection_archive---------6-----------------------#2020-08-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0327" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">不使用“调试器”调试Node.js中的文件</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/25633ddd87d57e28403b05b130cc4db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*ylsJy-f4x0w_wBuM-8BQcQ.png"/></div></figure><p id="1a07" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">让我们想象一下，我有一个简单的JavaScript文件，我想计算整数的和，但是我有一个问题，我想<strong class="km io">调试</strong>这个文件(但是我不想使用<code class="fe lg lh li lj b">console.log</code>作为调试器！)</p><p id="d8c7" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是文件:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lk"><img src="../Images/3df57a9924d564b81bc63e056e3facf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XF7cD17MYjJN9u19U2DQpA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">A simple function that we are going to debug.</figcaption></figure><p id="8fce" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">为了使用调试模式，我们需要使用以下命令运行文件:</p><pre class="kd ke kf kg gt lt lj lu lv aw lw bi"><span id="a807" class="lx ly in lj b gy lz ma l mb mc">node <strong class="lj io">inspect</strong> sumCalculator.js</span></pre><p id="eee5" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">此外，我们可以使用此命令，但已被否决:</p><pre class="kd ke kf kg gt lt lj lu lv aw lw bi"><span id="4a42" class="lx ly in lj b gy lz ma l mb mc">node <strong class="lj io">debug</strong> sumCalculator.js</span></pre><p id="f3f7" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">当我们进入<strong class="km io">调试模式</strong>时，我们可以在控制台上看到这些行:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi md"><img src="../Images/7cf19766a526c84fc052f85170b5d0a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*piQWZCf7wmwxDUK3C248sQ.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Nodejs debug mode</figcaption></figure><p id="0a5a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">正如我们所看到的，调试器正在监听端口<strong class="km io"> 9229 </strong>和一个唯一的URL。在调试模式下学习了一些命令后，我们将使用这个URL。</p><p id="270e" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们可以使用<code class="fe lg lh li lj b">help</code>命令来看看我们在这里能做什么:<code class="fe lg lh li lj b">help</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi md"><img src="../Images/019886ce389d0f4e82a14865d27a3955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkN5ARw8hajjZ5R8Bjzf6w.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Nodejs debug commands</figcaption></figure><h2 id="fc61" class="lx ly in bd me mf mg dn mh mi mj dp mk kt ml mm mn kx mo mp mq lb mr ms mt mu bi translated">基本调试命令:</h2><ul class=""><li id="cde5" class="mv mw in km b kn mx kq my kt mz kx na lb nb lf nc nd ne nf bi translated">继续执行(continue): <code class="fe lg lh li lj b">c</code>或<code class="fe lg lh li lj b">cont</code></li><li id="6175" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nc nd ne nf bi translated">下一行:<code class="fe lg lh li lj b">n</code>或<code class="fe lg lh li lj b">next</code></li><li id="c231" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nc nd ne nf bi translated">进入功能:<code class="fe lg lh li lj b">s</code>或<code class="fe lg lh li lj b">step</code></li><li id="983b" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nc nd ne nf bi translated">退出:<code class="fe lg lh li lj b">o</code>或<code class="fe lg lh li lj b">out</code></li><li id="d1e0" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nc nd ne nf bi translated">设置断点:<code class="fe lg lh li lj b">sb</code>或<code class="fe lg lh li lj b">setBreakpoint</code></li><li id="1bfe" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nc nd ne nf bi translated">清除断点:<code class="fe lg lh li lj b">sc</code>或<code class="fe lg lh li lj b">clearBreakpoint</code></li></ul><p id="e88b" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe lg lh li lj b">repl</code>命令为我们提供了一条<code class="fe lg lh li lj b">repl</code>模式命令行，我们可以在调试模式下访问函数和变量。(或如Node.js文档定义:打开调试器的<code class="fe lg lh li lj b">repl</code>在调试脚本的上下文中进行评估)</p><h2 id="e5a0" class="lx ly in bd me mf mg dn mh mi mj dp mk kt ml mm mn kx mo mp mq lb mr ms mt mu bi translated">让我们调试这个简单的文件</h2><p id="7a02" class="pw-post-body-paragraph kk kl in km b kn mx jo kp kq my jr ks kt nl kv kw kx nm kz la lb nn ld le lf ig bi translated">首先，我们需要一个断点。我认为第4行是我们设置断点的最佳位置。因此，为了在第4行设置断点，我们需要执行以下命令:<code class="fe lg lh li lj b">sb(4)</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi no"><img src="../Images/5b510b63dae2fa17ca54ba16d6e209aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_t3RUDSCstWDCezVlBYguQ.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Setting a breakpoint</figcaption></figure><p id="fb2a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们可以使用<code class="fe lg lh li lj b">cont</code>命令，但是如果我们看不到变量，那又有什么意义呢？<br/>调试模式下检查变量有两种方式:</p><p id="2e66" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">1.<code class="fe lg lh li lj b">repl</code>进入<code class="fe lg lh li lj b">repl</code>模式，可以访问变量和函数并进行检查。</p><p id="2a10" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">2.使用<code class="fe lg lh li lj b">watch</code>。</p><p id="3fd9" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们将使用第二种方式，因为当我们处于循环中时，这是一种更好的方式:</p><pre class="kd ke kf kg gt lt lj lu lv aw lw bi"><span id="cd93" class="lx ly in lj b gy lz ma l mb mc">watch('index')<br/>watch('sum')</span></pre><p id="ae25" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">注意<em class="np">手表</em>功能期待<em class="np">一串</em>。</p><p id="3c78" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">当我启动调试器时，我可能会遇到这样的错误:<code class="fe lg lh li lj b">sum is not defined</code>这没问题，因为在到达断点之前，这些变量没有被定义。</p><p id="6394" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">如果我们使用<code class="fe lg lh li lj b">cont</code>，那么我们可以看到这些变量的值:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nq"><img src="../Images/006490cd9bf01786d274cd430f027449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMgMkABS9az78XJBAQV7Ng.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Watching values</figcaption></figure><p id="99bd" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">所以我估计我函数的问题是我是从0开始的！</p><h2 id="a957" class="lx ly in bd me mf mg dn mh mi mj dp mk kt ml mm mn kx mo mp mq lb mr ms mt mu bi translated">在浏览器中调试</h2><p id="08ab" class="pw-post-body-paragraph kk kl in km b kn mx jo kp kq my jr ks kt nl kv kw kx nm kz la lb nn ld le lf ig bi translated">我们希望使用chrome开发工具来调试任何脚本:</p><ol class=""><li id="c333" class="mv mw in km b kn ko kq kr kt nr kx ns lb nt lf nu nd ne nf bi translated">进入调试模式:<code class="fe lg lh li lj b">node inspect yourFile.js</code></li><li id="9ff9" class="mv mw in km b kn ng kq nh kt ni kx nj lb nk lf nu nd ne nf bi translated">打开chrome，在地址栏输入<code class="fe lg lh li lj b">chrome://inspect</code>。</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nv"><img src="../Images/16c9901ccae09d65421a5bfd464c454a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*trx_nlYN72eVGD_RmaBsGg.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">chrome inspect tool</figcaption></figure><p id="61be" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">您可以看到，由于调试模式的端口，chrome正在监视该文件，通过单击蓝色的inspect文本，我们可以在chrome中进入调试模式:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nw"><img src="../Images/7ad2b5f7927f59e6182d2efd0df84fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cL5zA4csR9drx-vr-dPFQA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">chrome inspect tool</figcaption></figure><p id="8633" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">现在，您可以通过图形方式访问所有调试选项。</p></div></div>    
</body>
</html>
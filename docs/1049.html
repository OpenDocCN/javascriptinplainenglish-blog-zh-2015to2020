<html>
<head>
<title>How to generate PDF of a website page with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Node.js生成网站页面的PDF</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/generate-best-quality-pdf-of-any-webpage-html-page-in-nodejs-7b1223e1a3ac?source=collection_archive---------2-----------------------#2020-01-21">https://javascript.plainenglish.io/generate-best-quality-pdf-of-any-webpage-html-page-in-nodejs-7b1223e1a3ac?source=collection_archive---------2-----------------------#2020-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1152" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">轻松创建与我们在Chrome浏览器上使用Ctrl + P或Command + P (Mac)打印pdf相同质量的pdf</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/4f4f62a20d339799ec513ca2acaa2630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L7CuuzQIkJQLGwtY"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@bank_phrom?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Bank Phrom</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5023" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将看到使用Nodejs生成任何网页的PDF并将其发送回客户端应用程序是多么容易。</p><p id="03ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用<strong class="jp ir">木偶师</strong>工具，这是一个无头的chrome API来生成pdf <br/>，让我们开始吧。</p><p id="68d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用以下命令创建package.json文件</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="6d34" class="lh li iq ld b gy lj lk l ll lm">npm init -y</span></pre><p id="1f42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用安装木偶师</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="efb3" class="lh li iq ld b gy lj lk l ll lm">npm install --save puppeteer@2.0.0</span></pre><p id="d4df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将生成一个黑客新闻页面的样本pdf。</p><p id="a1d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个服务器文件夹，并使用以下代码在其中添加<code class="fe ln lo lp ld b">index.js</code>文件:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="8031" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">上面代码中的</strong> <code class="fe ln lo lp ld b"><strong class="jp ir">waitUntil</strong></code> <strong class="jp ir">选项会在生成pdf之前等待页面完全加载。</strong></p><p id="4f5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要执行代码，请运行</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="1370" class="lh li iq ld b gy lj lk l ll lm">node server/index.js</span></pre><p id="3f5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你执行了上面的命令，你会看到一个名为<code class="fe ln lo lp ld b">hacker_news.pdf</code>的新pdf文件生成了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ls"><img src="../Images/df62b99052862430570991fa1f6b2c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jNubqvECMIuuPJ9EvHyu_Q.png"/></div></div></figure><p id="216f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果想保持网页的背景色，需要在生成pdf时添加<code class="fe ln lo lp ld b">printBackground: true</code>选项</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lt"><img src="../Images/5f86c5f400049f77c3d38aa6167bde76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xgMP8pnwVX-eITOr1XK-g.png"/></div></div></figure><p id="b084" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用了<code class="fe ln lo lp ld b">A4</code>格式来创建pdf。<br/>使用最广泛的格式是<code class="fe ln lo lp ld b">A4</code>和<code class="fe ln lo lp ld b">Letter</code>。</p><p id="bcea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其他<code class="fe ln lo lp ld b">format</code>选项有:</p><ul class=""><li id="8cd8" class="lu lv iq jp b jq jr ju jv jy lw kc lx kg ly kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">Letter</code>:8.5英寸x 11in英寸</li><li id="a46e" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">Legal</code>:8.5英寸x 14in英寸</li><li id="dc47" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">Tabloid</code>:11英寸x 17in英寸</li><li id="3ea8" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">Ledger</code>:17英寸x 11英寸</li><li id="7d97" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A0</code>:33.1英寸x 46.8in英寸</li><li id="039f" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A1</code>:23.4英寸x 33.1in英寸</li><li id="5330" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A2</code>:16.54英寸x 23.4in英寸</li><li id="82ee" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A3</code>:11.7英寸x 16.54in英寸</li><li id="d686" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A4</code>:8.27英寸x 11.7in英寸</li><li id="15ac" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A5</code>:5.83英寸x 8.27in英寸</li><li id="bcd7" class="lu lv iq jp b jq md ju me jy mf kc mg kg mh kk lz ma mb mc bi translated"><code class="fe ln lo lp ld b">A6</code>:4.13英寸x 5.83in英寸</li></ul><p id="43bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在使用<code class="fe ln lo lp ld b">page.pdf</code>功能生成pdf之前，您可以使用<code class="fe ln lo lp ld b">setViewport</code>设置视窗宽度和高度</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="439c" class="lh li iq ld b gy lj lk l ll lm">await page.setViewport({ width: 1680, height: 1050 });</span></pre><p id="ed8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果要显示默认的页眉和页脚，需要添加<code class="fe ln lo lp ld b">displayHeaderFooter</code>选项并指定页眉和页脚的边距</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="2e48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在pdf中添加带有当前日期的标题，如下所示</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mi"><img src="../Images/debad512bce2941b6befe36a492958ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cehpi0xoaC-JaV1bpxvZMg.png"/></div></div></figure><p id="c741" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页面URL将被添加到pdf的页脚中，如下所示</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mj"><img src="../Images/55140f0989ade71a7480a83b5caadc61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrHY3X4-TVmHRYEqtJNEIg.png"/></div></div></figure><p id="1071" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们为页眉和页脚的所有边都提供了38px的边距，大约等于1cm。</p><p id="f993" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">自定义页眉和页脚:</strong> <br/>我们也可以分别使用<code class="fe ln lo lp ld b">headerTemplate</code>和<code class="fe ln lo lp ld b">footerTemplate</code>选项提供我们的自定义页眉和页脚。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="8e44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的所有例子中，我们将生成的pdf存储在根文件夹中，这并不理想。</p><p id="fb0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看如何更改位置来存储生成的pdf文件。<br/>我们将使用当前时间戳作为生成的pdf的名称。</p><p id="8303" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ln lo lp ld b">server</code>目录下新建一个<code class="fe ln lo lp ld b">files</code>文件夹。</p><p id="9be6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在顶部导入路径节点包:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="8565" class="lh li iq ld b gy lj lk l ll lm">const path = require('path');</span></pre><p id="be94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用以下方式获取今天的日期:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="2c33" class="lh li iq ld b gy lj lk l ll lm">const todays_date = new Date();</span></pre><p id="d130" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将page.pdf函数中的路径选项更改为</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b472" class="lh li iq ld b gy lj lk l ll lm">path: `${path.join(__dirname, 'files', todays_date.getTime() + '.pdf')}`,</span></pre><p id="54c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ln lo lp ld b">__dirname</code>指向当前目录，在我们的例子中是<code class="fe ln lo lp ld b">server</code> <strong class="jp ir"> </strong>。</p><p id="7c6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用路径节点包的join方法，这样它将正确地创建文件，因为Linux/mac路径在文件路径中有正斜杠，而windows有反斜杠。</p><p id="db58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ln lo lp ld b">path</code>节点包为我们自动处理这种转换。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="6c8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们将连接我们的后端节点和前端，这样当用户点击按钮或链接下载pdf时，我们可以从服务器发送pdf到客户端</p><p id="cb9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用以下方式安装express:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="336a" class="lh li iq ld b gy lj lk l ll lm">npm install --save express@4.17.1</span></pre><p id="6175" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个新文件<code class="fe ln lo lp ld b">server.js</code>，并使用</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="dc88" class="lh li iq ld b gy lj lk l ll lm">const express = require('express');<br/>const app = express();</span></pre><p id="0ef0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.在get处理程序中复制前面的pdf生成代码，并使用<code class="fe ln lo lp ld b">app.listen</code> <br/> 2启动服务器。将pdf文件路径存储在一个单独的变量中，以便我们以后使用</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="20e1" class="lh li iq ld b gy lj lk l ll lm"><strong class="ld ir">const pdfURL =</strong> path.join(__dirname, 'files', todays_date.getTime() + '.pdf');</span></pre><p id="50dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.将<code class="fe ln lo lp ld b">page.pdf</code>函数调用的结果存储在pdf变量<br/> 4中。设置响应内容类型，并使用</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="e4aa" class="lh li iq ld b gy lj lk l ll lm">res.set({<br/> "Content-Type": "application/pdf",<br/> "Content-Length": pdf.length<br/>});</span><span id="daea" class="lh li iq ld b gy mk lk l ll lm">res.sendFile(pdfURL);</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/de4d4dab54ebcca7605a02a0f749735b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvzRKnscR0PxOBRVu7FA3g.png"/></div></div></figure><p id="97b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在理解服务器创建代码方面有困难，请查看我以前关于在Nodejs <a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/easily-create-rest-apis-in-nodejs-using-express-d9a0484b3d59?source=friends_link&amp;sk=60f6d88fe8e24b69927445a363e45a2a">中创建REST API的文章。</a></p><p id="9dd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，通过执行以下命令启动express服务器</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="e1a7" class="lh li iq ld b gy lj lk l ll lm">node server/server.js</span></pre><p id="fab0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并导航到<a class="ae lb" href="http://localhost:5000/pdf" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/pdf</a></p><p id="0e61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将在浏览器中看到生成的pdf</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/8680e6134a5af2124a46c5f4cf00ffd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0oK4OqtPx0LPhHV7sS_Zw.png"/></div></div></figure><p id="4564" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，用以下内容创建一个公共文件夹和index.html</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="8ae3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ln lo lp ld b">server/server.js</code>文件中，在获取<code class="fe ln lo lp ld b">/pdf</code> <strong class="jp ir"> </strong>路径之前，指定<code class="fe ln lo lp ld b">public</code>文件夹路径以便我们可以访问公共文件夹下的所有文件</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="67b0" class="lh li iq ld b gy lj lk l ll lm">app.use(express.static(path.join(__dirname, '..', 'public')));</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/5bf26d8e4b2ccb90441cd3be196cf862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1dKc7IHgol6A0Amh3LUKGA.png"/></div></div></figure><p id="ae6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，使用以下命令重新启动服务器</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b5c1" class="lh li iq ld b gy lj lk l ll lm">node server/server.js</span></pre><p id="2268" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并导航到<a class="ae lb" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000/ </a>，这将加载我们创建的<code class="fe ln lo lp ld b">index.html</code>文件</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/feeaef8ec080223d92f261fabab2f108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgM0VocEN-97LKBZ0hujVA.png"/></div></div></figure><p id="dacc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您单击“获取pdf”链接，您将能够看到生成的pdf，您可以在其中查看或下载PDF文件</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/8680e6134a5af2124a46c5f4cf00ffd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0oK4OqtPx0LPhHV7sS_Zw.png"/></div></div></figure><p id="5ff4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以使用以下方法将任何CSS样式添加到生成的pdf中</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="7c11" class="lh li iq ld b gy lj lk l ll lm">await page.addStyleTag({<br/> content: `<br/>  body { border: 1px solid #ccc }<br/> `<br/>});</span></pre><p id="af64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在调用page.pdf方法之前，我们需要调用addStyleTag。</p><p id="0176" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">从本地HTML文件生成PDF:</strong></p><p id="204b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要从HTML文件生成pdf，我们需要在<code class="fe ln lo lp ld b">page.goto</code>方法中使用<strong class="jp ir">file:&lt;path _ of _ file&gt;</strong>来指定HTML文件的url</p><p id="ea05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ln lo lp ld b">public</code>目录下创建一个<code class="fe ln lo lp ld b">lorem.html</code>文件，内容如下</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="2bd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并引用<code class="fe ln lo lp ld b">page.goto</code>函数中的文件为</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="3669" class="lh li iq ld b gy lj lk l ll lm">await page.goto(`file:${path.join(__dirname, '..' , 'public', 'lorem.html')}`, { waitUntil: "networkidle2" });</span></pre><p id="4274" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要了解更多关于木偶师的信息，请点击<a class="ae lb" href="https://github.com/puppeteer/puppeteer" rel="noopener ugc nofollow" target="_blank">这里</a></p><p id="d89c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">木偶师文档:<a class="ae lb" href="https://pptr.dev/" rel="noopener ugc nofollow" target="_blank">https://pptr.dev/</a></p><p id="ed15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整的Github源代码:<a class="ae lb" href="https://github.com/myogeshchavan97/pdf_generation_puppeteer" rel="noopener ugc nofollow" target="_blank">https://github.com/myogeshchavan97/pdf_generation_puppeteer</a></p><p id="6a62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止。希望你今天学到了新东西。</p><p id="af35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">别忘了直接在你的收件箱</strong> <a class="ae lb" href="https://yogeshchavan.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">这里</strong> </a> <strong class="jp ir">订阅我的每周时事通讯，里面有惊人的技巧、诀窍和文章。</strong></p></div></div>    
</body>
</html>
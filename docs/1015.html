<html>
<head>
<title>JSON Parser with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有JavaScript的JSON解析器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/json-parser-with-javascript-1a04d699f86a?source=collection_archive---------1-----------------------#2020-01-15">https://javascript.plainenglish.io/json-parser-with-javascript-1a04d699f86a?source=collection_archive---------1-----------------------#2020-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d714" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">卡西杜每周时事通讯本周的面试问题是，</p><blockquote class="kl km kn"><p id="8857" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><em class="iq">编写一个函数，接受一个有效的JSON字符串，并将其转换成一个对象(或者你选择的语言使用的任何东西，字典，地图等等)。输入示例:</em></p></blockquote><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="c32b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一次，我忍不住想写:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="f176" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，我想，我已经写了不少关于AST的文章:</p><p id="3817" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中涵盖了编译器管道的概述，以及如何操作AST，但是我还没有过多介绍如何实现解析器。</p><p id="14bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是因为，在一篇文章中实现JavaScript编译器对我来说是一项艰巨的任务。</p><p id="9591" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">别担心。JSON也是一种语言。它有自己的语法，你可以从<a class="ae kz" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank">规范</a>中查阅。编写JSON解析器所需的知识和技术可以移植到编写JS解析器上。</p><p id="fcfd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，让我们开始编写一个JSON解析器吧！</p><h1 id="6502" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">理解语法</h1><p id="d54f" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果你看一下<a class="ae kz" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank">规格页</a>，有两个图表:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/6e34815e244726886943e6f742af9983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6pB3n1h_NpE9BVml"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Image source: <a class="ae kz" href="https://www.json.org/img/object.png" rel="noopener ugc nofollow" target="_blank">https://www.json.org/img/object.png</a></figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="0483" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">两张图是等效的。</p><p id="14e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个是视觉的，一个是基于文本的。基于文本的语法(巴克斯-诺尔形式)通常被提供给另一个解析器，该解析器解析该语法并为其生成一个解析器。说到解析器-异常！🤯</p><p id="52fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将关注铁路图，因为它是可视化的，对我来说似乎更友好。</p><p id="9fcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看第一张铁路图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/cc02d000663bf45ecb1b7839ca46b39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gZKaHPPczZbU5EeY"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Image source: <a class="ae kz" href="https://www.json.org/img/object.png" rel="noopener ugc nofollow" target="_blank">https://www.json.org/img/object.png</a></figcaption></figure><p id="7684" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是JSON中<strong class="jp ir">【object】</strong>的语法。</p><p id="b171" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从左边开始，跟着箭头走，然后在右边结束。</p><p id="a0e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">圆圈，如<code class="fe mo mp mq mr b">{</code>、<code class="fe mo mp mq mr b">,</code>、<code class="fe mo mp mq mr b">:</code>、<code class="fe mo mp mq mr b">}</code>，是字符，而方框，如<code class="fe mo mp mq mr b">whitespace</code>、<code class="fe mo mp mq mr b">string</code>和<code class="fe mo mp mq mr b">value</code>是另一个语法的占位符。因此，为了解析“空白”，我们需要查看<strong class="jp ir">“white space”</strong>的语法。</p><p id="6a2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，从左边开始，对于一个对象，第一个字符必须是一个开着的花括号，<code class="fe mo mp mq mr b">{</code>。接下来我们有两个选择:</p><p id="1b25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，当你达到“价值”时，你可以选择去:</p><p id="4e71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以继续循环，直到您决定前往:</p><p id="b798" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那么，我想我们现在已经熟悉了铁路图，让我们进行下一部分吧。</p><h1 id="c005" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">实现解析器</h1><p id="77c5" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">让我们从下面的结构开始:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="df22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将<code class="fe mo mp mq mr b">i</code>初始化为当前字符的索引，一旦<code class="fe mo mp mq mr b">i</code>到达<code class="fe mo mp mq mr b">str</code>的末尾，我们就结束。</p><p id="c5d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们实现<strong class="jp ir">“对象”的语法:</strong></p><p id="1b2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kz" href="https://gist.github.com/170e254c4980c9be20b489ef6e7db3c6" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/170e254c4980c9be20b489ef6e7db3c6</a></p><p id="8df7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe mo mp mq mr b">parseObject</code>中，我们将调用其他语法的解析，比如“字符串”和“空白”，当我们实现它们时，一切都将工作🤞。</p><p id="bb8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一点我忘了加，就是逗号，<code class="fe mo mp mq mr b">,</code>。<code class="fe mo mp mq mr b">,</code>只在我们开始第二个循环<code class="fe mo mp mq mr b">whitespace</code> → <code class="fe mo mp mq mr b">string</code> → <code class="fe mo mp mq mr b">whitespace</code> → <code class="fe mo mp mq mr b">:</code> →之前出现...</p><p id="ecb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于此，我们添加以下几行:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="f101" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一些命名约定:</p><ul class=""><li id="3aa2" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">当我们基于语法解析代码并使用返回值时，我们调用<code class="fe mo mp mq mr b">parseSomething</code></li><li id="19a8" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">我们称之为<code class="fe mo mp mq mr b">eatSomething</code>，当我们期望字符在那里，但是我们没有使用字符</li><li id="f5de" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">我们称之为<code class="fe mo mp mq mr b">skipSomething</code>，如果角色不在，我们会没事。</li></ul><p id="ca09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们实现<code class="fe mo mp mq mr b">eatComma</code>和<code class="fe mo mp mq mr b">eatColon</code>:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="4b6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经完成了<code class="fe mo mp mq mr b">parseObject</code>语法的实现，但是这个解析函数的返回值是什么呢？</p><p id="32c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要返回一个JavaScript对象:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="3942" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然您已经看到了我实现“对象”语法，那么是时候让您尝试一下“数组”语法了:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/83a78a2c47515638b804231cdc56b29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p42RQvve8g73GXB1"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Image source: <a class="ae kz" href="https://www.json.org/img/array.png" rel="noopener ugc nofollow" target="_blank">https://www.json.org/img/array.png</a></figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="fcef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，转到一个更有趣的语法，“值”:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ng"><img src="../Images/86f80a78891a10004ef07061b7ab4141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4D352G606PRU5PrA"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Image source: <a class="ae kz" href="https://www.json.org/img/value.png" rel="noopener ugc nofollow" target="_blank">https://www.json.org/img/value.png</a></figcaption></figure><p id="69b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">值以“空白”开头，然后是以下任何一项:“字符串”、“数字”、“对象”、“数组”、“真”、“假”或“空”，最后以“空白”结尾:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="e0cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mo mp mq mr b">??</code>被称为<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并运算符</a>，它类似于我们过去用来默认一个值<code class="fe mo mp mq mr b">foo || default</code>的<code class="fe mo mp mq mr b">||</code>，除了只要<code class="fe mo mp mq mr b">foo</code>为falsy<code class="fe mo mp mq mr b">||</code>就会返回<code class="fe mo mp mq mr b">default</code>，而无效合并运算符只有在<code class="fe mo mp mq mr b">foo</code>为<code class="fe mo mp mq mr b">null</code>或<code class="fe mo mp mq mr b">undefined</code>时才会返回<code class="fe mo mp mq mr b">default</code>。</p><p id="30a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">parseKeyword将检查当前的<code class="fe mo mp mq mr b">str.slice(i)</code>是否与关键字字符串匹配，如果匹配，将返回关键字值:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="3909" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mo mp mq mr b">parseValue</code>到此为止！</p><p id="9a91" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还有3个语法要学，但我会节省这篇文章的篇幅，并在下面的CodeSandbox中实现它们:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nh ky l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk"><a class="ae kz" href="https://codesandbox.io/s/json-parser-k4c3w" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/json-parser-k4c3w</a></figcaption></figure><p id="4aa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们完成了所有语法的实现之后，现在让我们返回json的值，它是由<code class="fe mo mp mq mr b">parseValue</code>返回的:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="e6c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！</p><p id="c3c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，别着急，我的朋友，我们刚刚完成了快乐之路，那么不快乐之路呢？</p><h1 id="d7fb" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">处理意外输入</h1><p id="24b8" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">作为一名优秀的开发人员，我们也需要优雅地处理不愉快的事情。对于一个解析器来说，这意味着用适当的错误消息向开发人员大喊。</p><p id="6008" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来处理两种最常见的错误情况:</p><ul class=""><li id="8c84" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">意外标记</li><li id="fdd4" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">意外的字符串结尾</li></ul><h1 id="4932" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">意外标记</h1><h1 id="7d7e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">意外的字符串结尾</h1><p id="395e" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">在所有while循环中，例如<code class="fe mo mp mq mr b">parseObject</code>中的while循环:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="85a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要确保访问的字符不会超过字符串的长度。当字符串意外结束，而我们仍在等待结束字符“}”时，就会发生这种情况，在本例中:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><h1 id="b680" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">多走一步</h1><p id="1fa7" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">你还记得当你还是一个初级开发人员的时候，每次当你遇到神秘消息的语法错误时，你完全不知道哪里出错了吗？</p><p id="f765" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你更有经验了，是时候停止这种良性循环，停止大喊大叫了</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="b388" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让用户困惑地盯着屏幕。</p><p id="8199" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了大喊大叫之外，还有很多更好的处理错误消息的方法，下面是一些您可以考虑添加到您的解析器中的要点:</p><h1 id="e777" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">错误代码和标准错误消息</h1><p id="f22d" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这是一个有用的标准关键字，用户可以用它向谷歌寻求帮助。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><h1 id="0e6c" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">更好地了解哪里出了问题</h1><p id="8049" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">像Babel这样的解析器会向你显示一个代码框架，一段带有下划线、箭头或者突出显示错误的代码</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="fc51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如何打印代码片段的示例:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><h1 id="976e" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">错误恢复的建议</h1><p id="c0ba" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">如果可能的话，解释哪里出了问题，并给出解决问题的建议</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="13eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果可能的话，根据解析器到目前为止收集的上下文提供建议</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="1364" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于上下文的建议会让人感觉更有关联性和可操作性。</p><p id="4442" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">记住所有的建议，查看更新的CodeSandbox</p><ul class=""><li id="3eeb" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">有意义的错误消息</li><li id="9b92" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">错误指向故障点的代码片段</li><li id="5408" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">为错误恢复提供建议</li></ul><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nh ky l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk"><a class="ae kz" href="https://codesandbox.io/s/json-parser-hjwxk" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/json-parser-hjwxk</a></figcaption></figure><h1 id="d60a" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">摘要</h1><p id="6aed" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">要实现一个解析器，需要从语法开始。</p><p id="45fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以用铁路图或巴科斯诺尔形式来形式化语法。设计语法是最难的一步。</p><p id="bf32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦确定了语法，就可以开始实现基于它的解析器了。</p><p id="f2ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">错误处理很重要，更重要的是要有有意义的错误信息，这样用户就知道如何修复它。</p><p id="9a21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在您已经知道了一个简单的解析器是如何实现的，是时候关注一个更复杂的解析器了:</p><p id="dfd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，一定要关注<a class="ae kz" href="https://twitter.com/cassidoo" rel="noopener ugc nofollow" target="_blank"> @cassidoo </a>，她的每周简讯棒极了！</p><p id="4e7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ko">最初发表于</em><a class="ae kz" href="https://lihautan.com/json-parser-with-javascript/" rel="noopener ugc nofollow" target="_blank">https://lihautan.com/</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Setting up Firebase Authentication in React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React应用程序中设置Firebase身份验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/setting-up-firebase-authentication-in-react-application-c49f1df8b8ab?source=collection_archive---------8-----------------------#2020-09-14">https://javascript.plainenglish.io/setting-up-firebase-authentication-in-react-application-c49f1df8b8ab?source=collection_archive---------8-----------------------#2020-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e7f4c999d71b51e27e57f1903b2286b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*miZISxi30uaen-u_CUK0ew.jpeg"/></div></div></figure><p id="06dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们将使用Firebase和私有路由构建一个简单的授权react应用程序。在我们深入了解细节之前，我想提一下一些现成的最好的<a class="ae kw" href="https://www.wrappixel.com/templates/category/react-templates/" rel="noopener ugc nofollow" target="_blank"> react dashboard模板</a>和web应用程序模板，它们带有Firebase身份验证。</p><p id="36d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以检查它们，并直接在你的项目中使用，以节省大量的时间和金钱，而且它们是由有经验的开发者开发的，所以你也有机会学到很多东西。</p><p id="fd6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们转到我们的教程。</p><h1 id="ce00" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">内容</h1><ul class=""><li id="04f1" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">介绍</li><li id="aa66" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">先决条件</li><li id="e2d7" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">设置React</li><li id="7339" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">在React中设置Firebase</li><li id="8c2e" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">反应路由器</li><li id="b071" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">使用Firebase和React的身份验证上下文</li><li id="55fa" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">React中的私有路由</li><li id="d0b2" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">在React中创建视图组件</li><li id="dbeb" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">在Firebase注册</li><li id="81ad" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">登录Firebase</li><li id="4a0a" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">在Firebase中注销</li><li id="96f4" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">结论</li></ul><h1 id="98c5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h1><p id="7871" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们使用身份验证来识别用户的身份。在本文的最后，我们将构建一个简单的React应用程序，允许用户使用Firebase进行身份验证，并且我们将确保只有经过身份验证的用户才能访问该应用程序。</p><h1 id="2686" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">先决条件</h1><ul class=""><li id="c61f" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">具备Javascript的基本知识</li><li id="7862" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">确保您的计算机上的节点&gt; =8.10，npm&gt;=5.6，以获得更好的体验</li><li id="4b26" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">对反应、上下文、钩子和路线有基本的了解。</li><li id="184f" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">熟悉命令行</li><li id="f3c7" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">文字编辑器</li><li id="9154" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">煽动性的报道</li></ul><h1 id="e91a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">设置React</h1><p id="6b60" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">要在React中创建项目，请运行下面的命令:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="dd76" class="mx ky iq mt b gy my mz l na nb">npx create-react-app react_firebase_auth</span></pre><p id="1056" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> npx </strong>是npm 5.2+自带的包运行器工具。我们刚刚创建了一个名为<strong class="ka ir">的项目。转到项目并启动它。</strong></p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="b8da" class="mx ky iq mt b gy my mz l na nb">cd react_firebase_auth<br/>npm start</span></pre><p id="4f70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的应用程序需要一些依赖项，例如:</p><ul class=""><li id="97f3" class="lv lw iq ka b kb kc kf kg kj nc kn nd kr ne kv mc md me mf bi translated"><strong class="ka ir"> react-dom </strong>包含<strong class="ka ir"> React Router </strong>的<strong class="ka ir"> DOM </strong>绑定，我指的是网站的<strong class="ka ir"> router </strong>组件。</li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="5b92" class="mx ky iq mt b gy my mz l na nb">npm install --save react-router-dom</span></pre><ul class=""><li id="1a74" class="lv lw iq ka b kb kc kf kg kj nc kn nd kr ne kv mc md me mf bi translated"><strong class="ka ir"> material-ui </strong>实现Google的材质设计。</li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="b384" class="mx ky iq mt b gy my mz l na nb">npm i @material-ui/core --save</span></pre><p id="e282" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的react应用程序设置成功。现在是时候设置火力基地了。</p><h1 id="c618" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">在React中设置Firebase</h1><p id="12a2" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">让我们从创建一个新的firebase应用程序开始。请遵循以下步骤。转到<a class="ae kw" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">火焰基座控制台</a>。</p><ol class=""><li id="29fe" class="lv lw iq ka b kb kc kf kg kj nc kn nd kr ne kv nf md me mf bi translated">按添加项目</li><li id="6b21" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">输入你的应用名称</li><li id="c766" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">接受条款</li><li id="b434" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">按创建项目</li><li id="4b63" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">等到ap创建完毕</li><li id="22c5" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">然后按继续</li><li id="d297" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">转到身份验证点击</li><li id="187b" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">单击设置登录方法</li><li id="2d93" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">选择电子邮件/密码并启用它。</li><li id="8367" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">完成后，进入项目设置，向下滚动到平台列表。选择Web。</li><li id="092e" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv nf md me mf bi translated">复制你的应用配置</li></ol><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/1c31420593c6acd66dd521f1ac93f908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/0*_LF0YEVwEmqL9OVy.jpg"/></div></figure><p id="6b1f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在侧边栏菜单上点击<strong class="ka ir">认证</strong>，进入登录方式，启用<strong class="ka ir">邮箱/密码</strong>。</p><p id="e0dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们在react应用程序中设置firebase。在你的<strong class="ka ir"> src </strong>文件夹中创建<strong class="ka ir"> firebase.js </strong>文件。使用下面的命令安装firebase dependecie:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="b5c1" class="mx ky iq mt b gy my mz l na nb">npm install --save firebase</span></pre><p id="09a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开<strong class="ka ir"> firebase.js </strong>，将你复制的javascript脚本粘贴到firebase控制台中。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/8b7c97d96d71299af93a091db16cc38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/0*z1NNaYsR_t2njT3S.jpg"/></div></figure><p id="31ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如你所见，我们可以使用firebase.initializeApp初始化firebase应用程序，并将其导出为<strong class="ka ir">应用程序</strong>。这样做，我们可以完全访问我们的数据库。</p><h1 id="d0a1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">反应路由器</h1><p id="387b" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">现在，去你的<strong class="ka ir"> App.js </strong>添加一些路由。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="b398" class="mx ky iq mt b gy my mz l na nb">import React from 'react';<br/>import "./App.css";<br/>import { BrowserRouter as Router, Route } from "react-router-dom";<br/>import Home from './Home'<br/>import Login from './Login'<br/>import SignUp from './Signup'<br/>function App() {<br/>  return (<br/>    &lt;Router&gt;<br/>        &lt;div&gt;<br/>          &lt;Route exact path="/" component={Home} /&gt;<br/>          &lt;Route exact path="/login" component={Login} /&gt;<br/>          &lt;Route exact path="/signup" component={SignUp} /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Router&gt;<br/>  );<br/>}<br/>export default App;</span></pre><p id="b164" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将我们的布局包装到<strong class="ka ir"> BrowserRouter </strong>中，为我们所有的应用程序提供浏览器上下文。基本上，它允许我们使用路由、链接、重定向和其他路由器功能。</p><p id="8ca9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，为了使用身份验证，我们需要存储我们的身份验证状态，无论您是否登录，并更新我们的组件树。为此，我们将使用React上下文API。</p><h1 id="25ea" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用Firebase和React的身份验证上下文</h1><p id="264e" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在你的<strong class="ka ir"> scr </strong>文件夹中创建<strong class="ka ir"> Authentication.js </strong>并通过这个:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="a0e5" class="mx ky iq mt b gy my mz l na nb">import React, { useEffect, useState } from "react";<br/>    import app from "./firebase.js";<br/>    export const AuthContext = React.createContext();<br/>    export const AuthProvider = ({ children }) =&gt; {<br/>      const [currentUser, setCurrentUser] = useState(null);<br/>      const [pending, setPending] = useState(true);<br/>      useEffect(() =&gt; {<br/>        app.auth().onAuthStateChanged((user) =&gt; {<br/>          setCurrentUser(user)<br/>          setPending(false)<br/>        });<br/>      }, []);<br/>      if(pending){<br/>        return &lt;&gt;Please wait...&lt;/&gt;<br/>      }<br/>      return (<br/>        &lt;AuthContext.Provider<br/>          value={{<br/>            currentUser<br/>          }}<br/>        &gt;<br/>          {children}<br/>        &lt;/AuthContext.Provider&gt;<br/>      );<br/>    };</span></pre><p id="645c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个文件中，我们必须从firebase.js导入<strong class="ka ir"> app </strong>，在那里我们有我们的firebase API，并且我们创建了一个上下文。react中的上下文允许您将一些数据传播到整个react组件树。</p><p id="cd6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们创建了一个提供者组件，让您可以存储我们的<strong class="ka ir">身份验证状态</strong>。它持有一个用户，我们将更新我们的身份验证状态将在firebase每次变化。为此，我们使用钩子<strong class="ka ir"> useEffect </strong>来注册对我们的firebase对象的更改，并且我们将一个空数组作为第二个参数传递给我们的<strong class="ka ir"> useEffect </strong>，以便当组件<strong class="ka ir"> AuthProvider </strong>将被挂载到我们的树中时，它将运行一次。</p><p id="0c7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在我们的<strong class="ka ir"> AuthProvider </strong>布局中我们使用了AuthProvider。Provider，我们传递了在<strong class="ka ir">上从firebase获得的当前用户。每次身份验证状态发生变化</strong>，我们都将其作为一个值传递给我们的<strong class="ka ir">身份验证提供者。提供者</strong>，然后我们呈现传递给这个组件的<strong class="ka ir">子组件</strong>。</p><p id="10fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，回到App.js，将我们的布局包装到<strong class="ka ir"> AuthProvider </strong>中。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f96c" class="mx ky iq mt b gy my mz l na nb">&lt;AuthProvider&gt;<br/>      &lt;Router&gt;<br/>        &lt;div&gt;<br/>          &lt;Route exact path="/" component={Home} /&gt;<br/>          &lt;Route exact path="/login" component={Login} /&gt;<br/>          &lt;Route exact path="/signup" component={SignUp} /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/AuthProvider&gt;</span></pre><p id="82f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，组件树中它下面的所有东西都可以通过上下文API访问当前用户。在我们的例子中，如果您登录，您将拥有包含所有用户描述的用户对象，如果您注销，您将拥有空或未定义状态的用户对象。</p><h1 id="bdfd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">React中的私有路由</h1><p id="145b" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们可以创建自己的私有路由，只允许经过身份验证的用户访问主页。</p><p id="24f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的<strong class="ka ir"> scr </strong>文件夹中创建PrivateRoute.js。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="aecf" class="mx ky iq mt b gy my mz l na nb">import React, { useContext } from "react";<br/>import { Route, Redirect } from "react-router-dom";<br/>import { AuthContext } from "./Authentication";<br/>const PrivateRoute = ({ component: RouteComponent, ...rest }) =&gt; {<br/>  const {currentUser} = useContext(AuthContext);<br/>  return (<br/>    &lt;Route<br/>      {...rest}<br/>      render={routeProps =&gt;<br/>        !!currentUser ? (<br/>          &lt;RouteComponent {...routeProps} /&gt;<br/>        ) : (<br/>          &lt;Redirect to={"/login"} /&gt;<br/>        )<br/>      }<br/>    /&gt;<br/>  );<br/>};</span><span id="af55" class="mx ky iq mt b gy ni mz l na nb">export default PrivateRoute</span></pre><p id="4180" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们需要知道如果用户通过了身份验证，应该呈现什么组件。所以我们用component和其余的props { component: RouteComponent，…rest }。PrivateRouter基本上是常规航线上的包装器。所以我们传递其余的道具{…rest}，然后在我们的<strong class="ka ir">路线呈现函数</strong>中，根据我们是否有用户，我们将呈现我们的<strong class="ka ir">路线组件</strong>或<strong class="ka ir">重定向到登录页面</strong>。</p><p id="4a7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">返回到您的<strong class="ka ir"> App.js </strong>并进行以下更改:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="290e" class="mx ky iq mt b gy my mz l na nb">&lt;AuthProvider&gt;<br/>      &lt;Router&gt;<br/>         &lt;div&gt;<br/>           &lt;PrivateRoute exact path="/" component={Home} /&gt;<br/>           &lt;Route exact path="/signin" component={Signin} /&gt;<br/>           &lt;Route exact path="/signup" component={SignUp} /&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Router&gt;<br/>  &lt;/AuthProvider&gt;</span></pre><p id="900f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们创建视图组件。为此，我们将使用材质用户界面。要更深入地了解Material-UI，你可以点击<a class="ae kw" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">这里</a>使用官方文档来完成。</p><h1 id="c02a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">在React中创建视图组件</h1><p id="686b" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们将使用materil-ui作为我们的界面。确保您已经安装了material-ui dependecie。</p><p id="7881" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:在本文中，我们将讨论Firebase认证。因此，关于<strong class="ka ir"> material-ui </strong>的更多细节，请访问<a class="ae kw" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><p id="380b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的<strong class="ka ir"> src </strong>文件夹中创建<strong class="ka ir"> SignIn.js </strong>并通过下面的代码。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="9ea4" class="mx ky iq mt b gy my mz l na nb">import React from 'react';<br/>import Button from '@material-ui/core/Button';<br/>import CssBaseline from '@material-ui/core/CssBaseline';<br/>import TextField from '@material-ui/core/TextField';<br/>import FormControlLabel from '@material-ui/core/FormControlLabel';<br/>import Checkbox from '@material-ui/core/Checkbox';<br/>import Grid from '@material-ui/core/Grid';<br/>import Box from '@material-ui/core/Box';<br/>import Typography from '@material-ui/core/Typography';<br/>import { makeStyles } from '@material-ui/core/styles';<br/>import Container from '@material-ui/core/Container';</span><span id="5680" class="mx ky iq mt b gy ni mz l na nb">import { Link } from 'react-router-dom'<br/>function Copyright() {<br/>  return (<br/>    &lt;Typography variant="body2" color="textSecondary" align="center"&gt;<br/>      {'Copyright © '}<br/>      &lt;Link color="inherit" href="https://pacoconsulting.co.mz/"&gt;<br/>        PACO IT Consulting<br/>      &lt;/Link&gt;{' '}<br/>      {new Date().getFullYear()}<br/>      {'.'}<br/>    &lt;/Typography&gt;<br/>  );<br/>}<br/>const useStyles = makeStyles((theme) =&gt; ({<br/>  paper: {<br/>    marginTop: theme.spacing(8),<br/>    display: 'flex',<br/>    flexDirection: 'column',<br/>    alignItems: 'center',<br/>  },<br/>  avatar: {<br/>    margin: theme.spacing(1),<br/>    backgroundColor: theme.palette.secondary.main,<br/>  },<br/>  form: {<br/>    width: '100%', // Fix IE 11 issue.<br/>    marginTop: theme.spacing(1),<br/>  },<br/>  submit: {<br/>    margin: theme.spacing(3, 0, 2),<br/>  },<br/>}));<br/>export default function SignIn() {<br/>  const classes = useStyles();<br/>  return (<br/>    &lt;Container component="main" maxWidth="xs"&gt;<br/>      &lt;CssBaseline /&gt;<br/>      &lt;div className={classes.paper}&gt;<br/>        &lt;Typography component="h1" variant="h5"&gt;<br/>          Sign in<br/>        &lt;/Typography&gt;<br/>        &lt;form onSubmit={handleLogin}  className={classes.form} noValidate&gt;<br/>          &lt;TextField<br/>            variant="outlined"<br/>            margin="normal"<br/>            required<br/>            fullWidth<br/>            id="email"<br/>            label="Email Address"<br/>            name="email"<br/>            autoComplete="email"<br/>            autoFocus<br/>          /&gt;<br/>          &lt;TextField<br/>            variant="outlined"<br/>            margin="normal"<br/>            required<br/>            fullWidth<br/>            name="password"<br/>            label="Password"<br/>            type="password"<br/>            id="password"<br/>            autoComplete="current-password"<br/>          /&gt;<br/>          &lt;FormControlLabel<br/>            control={&lt;Checkbox value="remember" color="primary" /&gt;}<br/>            label="Remember me"<br/>          /&gt;<br/>          &lt;Button<br/>            type="submit"<br/>            fullWidth<br/>            variant="contained"<br/>            color="primary"<br/>            className={classes.submit}<br/>          &gt;<br/>            Sign In<br/>          &lt;/Button&gt;<br/>          &lt;Grid container&gt;<br/>            &lt;Grid item xs&gt;<br/>              &lt;Link href="#" variant="body2"&gt;<br/>                Forgot password?<br/>              &lt;/Link&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid item&gt;<br/>              &lt;Link href="#" variant="body2"&gt;<br/>                {"Don't have an account? Sign Up"}<br/>              &lt;/Link&gt;<br/>            &lt;/Grid&gt;<br/>          &lt;/Grid&gt;<br/>        &lt;/form&gt;<br/>      &lt;/div&gt;<br/>      &lt;Box mt={8}&gt;<br/>        &lt;Copyright /&gt;<br/>      &lt;/Box&gt;<br/>    &lt;/Container&gt;<br/>  );<br/>}</span></pre><p id="e65b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的scr文件夹中创建<strong class="ka ir"> SignUp.js </strong>。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="7796" class="mx ky iq mt b gy my mz l na nb">import React from 'react';<br/>import Button from '@material-ui/core/Button';<br/>import CssBaseline from '@material-ui/core/CssBaseline';<br/>import TextField from '@material-ui/core/TextField';<br/>import FormControlLabel from '@material-ui/core/FormControlLabel';<br/>import Checkbox from '@material-ui/core/Checkbox';<br/>import Grid from '@material-ui/core/Grid';<br/>import Box from '@material-ui/core/Box';<br/>import Typography from '@material-ui/core/Typography';<br/>import { makeStyles } from '@material-ui/core/styles';<br/>import Container from '@material-ui/core/Container';<br/>import { Link } from 'react-router-dom'<br/>function Copyright() {<br/>  return (<br/>    &lt;Typography variant="body2" color="textSecondary" align="center"&gt;<br/>      {'Copyright © '}<br/>      &lt;Link color="inherit" href="https://material-ui.com/"&gt;<br/>        Your Website<br/>      &lt;/Link&gt;{' '}<br/>      {new Date().getFullYear()}<br/>      {'.'}<br/>    &lt;/Typography&gt;<br/>  );<br/>}<br/>const useStyles = makeStyles((theme) =&gt; ({<br/>  paper: {<br/>    marginTop: theme.spacing(8),<br/>    display: 'flex',<br/>    flexDirection: 'column',<br/>    alignItems: 'center',<br/>  },<br/>  avatar: {<br/>    margin: theme.spacing(1),<br/>    backgroundColor: theme.palette.secondary.main,<br/>  },<br/>  form: {<br/>    width: '100%', // Fix IE 11 issue.<br/>    marginTop: theme.spacing(3),<br/>  },<br/>  submit: {<br/>    margin: theme.spacing(3, 0, 2),<br/>  },<br/>}));<br/>export default function SignUp() {<br/>  const classes = useStyles();</span><span id="4099" class="mx ky iq mt b gy ni mz l na nb">  return (<br/>    &lt;Container component="main" maxWidth="xs"&gt;<br/>      &lt;CssBaseline /&gt;<br/>      &lt;div className={classes.paper}&gt;<br/>        &lt;Typography component="h1" variant="h5"&gt;<br/>          Sign up<br/>        &lt;/Typography&gt;<br/>        &lt;form onSubmit={handleSignUp} className={classes.form} noValidate&gt;<br/>          &lt;Grid container spacing={2}&gt;<br/>            &lt;Grid item xs={12} sm={6}&gt;<br/>              &lt;TextField<br/>                autoComplete="fname"<br/>                name="firstName"<br/>                variant="outlined"<br/>                required<br/>                fullWidth<br/>                id="firstName"<br/>                label="First Name"<br/>                autoFocus<br/>              /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid item xs={12} sm={6}&gt;<br/>              &lt;TextField<br/>                variant="outlined"<br/>                required<br/>                fullWidth<br/>                id="lastName"<br/>                label="Last Name"<br/>                name="lastName"<br/>                autoComplete="lname"<br/>              /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid item xs={12}&gt;<br/>              &lt;TextField<br/>                variant="outlined"<br/>                required<br/>                fullWidth<br/>                id="email"<br/>                label="Email Address"<br/>                name="email"<br/>                autoComplete="email"<br/>              /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid item xs={12}&gt;<br/>              &lt;TextField<br/>                variant="outlined"<br/>                required<br/>                fullWidth<br/>                name="password"<br/>                label="Password"<br/>                type="password"<br/>                id="password"<br/>                autoComplete="current-password"<br/>              /&gt;<br/>            &lt;/Grid&gt;<br/>            &lt;Grid item xs={12}&gt;<br/>              &lt;FormControlLabel<br/>                control={&lt;Checkbox value="allowExtraEmails" color="primary" /&gt;}<br/>                label="I want to receive inspiration, marketing promotions and updates via email."<br/>              /&gt;<br/>            &lt;/Grid&gt;<br/>          &lt;/Grid&gt;<br/>          &lt;Button<br/>            type="submit"<br/>            fullWidth<br/>            variant="contained"<br/>            color="primary"<br/>            className={classes.submit}<br/>          &gt;<br/>            Sign Up<br/>          &lt;/Button&gt;<br/>          &lt;Grid container justify="flex-end"&gt;<br/>            &lt;Grid item&gt;<br/>              &lt;Link to="/signin" variant="body2"&gt;<br/>                Already have an account? Sign in<br/>              &lt;/Link&gt;<br/>            &lt;/Grid&gt;<br/>          &lt;/Grid&gt;<br/>        &lt;/form&gt;<br/>      &lt;/div&gt;<br/>      &lt;Box mt={5}&gt;<br/>        &lt;Copyright /&gt;<br/>      &lt;/Box&gt;<br/>    &lt;/Container&gt;<br/>  );<br/>}</span></pre><p id="983f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的scr文件夹中创建<strong class="ka ir"> Home.js </strong>。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="acb3" class="mx ky iq mt b gy my mz l na nb">import React from 'react';<br/>import { makeStyles } from '@material-ui/core/styles';<br/>import AppBar from '@material-ui/core/AppBar';<br/>import Toolbar from '@material-ui/core/Toolbar';<br/>import Typography from '@material-ui/core/Typography';<br/>import Button from '@material-ui/core/Button';<br/>import IconButton from '@material-ui/core/IconButton';<br/>import MenuIcon from '@material-ui/icons/Menu';<br/>const useStyles = makeStyles((theme) =&gt; ({<br/>  root: {<br/>    flexGrow: 1,<br/>  },<br/>  menuButton: {<br/>    marginRight: theme.spacing(2),<br/>  },<br/>  title: {<br/>    flexGrow: 1,<br/>  },<br/>}));<br/>export default function ButtonAppBar() {<br/>  const classes = useStyles();<br/>  return (<br/>    &lt;div className={classes.root}&gt;<br/>      &lt;AppBar position="static"&gt;<br/>        &lt;Toolbar&gt;<br/>          &lt;IconButton edge="start" className={classes.menuButton} color="inherit" aria-label="menu"&gt;<br/>            &lt;MenuIcon /&gt;<br/>          &lt;/IconButton&gt;<br/>          &lt;Typography variant="h6" className={classes.title}&gt;<br/>            News<br/>          &lt;/Typography&gt;<br/>          &lt;Button color="inherit"&gt;Login&lt;/Button&gt;<br/>        &lt;/Toolbar&gt;<br/>      &lt;/AppBar&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><h1 id="4aa5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">在Firebase注册</h1><p id="4827" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在<strong class="ka ir"> SignUp.js </strong>文件中进行这些修改:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="7928" class="mx ky iq mt b gy my mz l na nb">import React, { useCallback} from "react";<br/>import { Link } from 'react-router-dom'<br/>import app from "./firebase.js";</span></pre><p id="2177" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="cb07" class="mx ky iq mt b gy my mz l na nb">export default function SignUp({ history }) {<br/>  const classes = useStyles();<br/>  const handleSignUp = useCallback(async event =&gt; {<br/>    event.preventDefault();<br/>    const { email, password } = event.target.elements;<br/>    try {<br/>      await app<br/>        .auth()<br/>        .createUserWithEmailAndPassword(email.value, password.value);<br/>      history.push("/");<br/>    } catch (error) {<br/>      alert(error);<br/>    }<br/>  }, [history]);<br/>...<br/>...<br/>...</span></pre><p id="eaf4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该组件正在从我们的路由上下文中获取<strong class="ka ir">历史</strong>对象。当我们点击那个按钮时，我们的<strong class="ka ir">手柄</strong>将会启动。在这个函数中，我们获取事件并调用<strong class="ka ir"> preventDefault() </strong>，因为我们希望在用户点击注册按钮时重新加载页面。然后，我们从<strong class="ka ir"> target.elements </strong>中获取电子邮件和密码输入，并从firebase API中调用<strong class="ka ir">createuserwhemailandpassword()</strong>，并传递我们的<strong class="ka ir">电子邮件</strong>和<strong class="ka ir">密码</strong>值:<strong class="ka ir">createuserwhemailandpassword(email . value，password.value) </strong>。然后我们将我们的<strong class="ka ir"> handleSignUp </strong>函数传递给表单的<strong class="ka ir"> onSubmit </strong>回调函数。</p><h1 id="3e4f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">登录Firebase</h1><p id="87da" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在<strong class="ka ir"> SignIn.js </strong>文件中，SignIn.js进行这些导入:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3203" class="mx ky iq mt b gy my mz l na nb">import React, { useCallback, useContext } from 'react'; // add {useCallback, useContext}<br/>import { withRouter, Redirect } from "react-router";<br/>import app from "./firebase.js";<br/>import { AuthContext } from "./Authentication.js";</span></pre><p id="eacc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir"> SignIn() </strong>功能中进行以下更改:</p><ul class=""><li id="2999" class="lv lw iq ka b kb kc kf kg kj nc kn nd kr ne kv mc md me mf bi translated">添加历史记录</li><li id="d0de" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">添加handleLogin方法。</li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="4295" class="mx ky iq mt b gy my mz l na nb">export default function SignIn({history}) {<br/>const classes = useStyles();<br/>const handleLogin = useCallback(<br/>  async event =&gt; {<br/>    event.preventDefault();<br/>    const { email, password } = event.target.elements;<br/>    try {<br/>      await app<br/>        .auth()<br/>        .signInWithEmailAndPassword(email.value, password.value);<br/>      history.push("/");<br/>    } catch (error) {<br/>      alert(error);<br/>    }<br/>  },<br/>  [history]<br/>);<br/>const { currentUser } = useContext(AuthContext);<br/>if (currentUser) {<br/>  return &lt;Redirect to="/" /&gt;;<br/>}</span></pre><p id="72c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注册页面有两个不同之处。这里我们使用<strong class="ka ir">signingwithemailandpassword()</strong>，并使用我们的认证上下文<code class="fe nj nk nl mt b">const { currentUser } = useContext(AuthContext);</code>。您可能还记得，我们正在跟踪firebase用户，并使用我们的auth模型用currentUser字段更新我们的上下文。然后我们检查:如果我们有currentUser，我们从react路由器呈现重定向组件。该组件在呈现时将只重定向到使用在<strong class="ka ir">到</strong>属性中设置的路径。</p><h1 id="db65" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">在Firebase中注销</h1><p id="6312" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">基本上，在<strong class="ka ir"> Home.js </strong>中，我们在注销按钮中从<strong class="ka ir"> auth </strong>模块调用<strong class="ka ir"> signOut() </strong>。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f44d" class="mx ky iq mt b gy my mz l na nb">onClick={() =&gt; app.auth().signOut()}</span></pre><p id="6368" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你！！！测试你的应用。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8d95" class="mx ky iq mt b gy my mz l na nb">npm start</span></pre><h1 id="8083" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/0eb5d5cafc2410ad15a77eb4bc284867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*jdzWKww4c43pXpUN.gif"/></div></figure><p id="7be6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的申请准备好了。现在，您可以在React应用程序中使用Firebase身份验证了。</p><p id="dcdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读！</p></div></div>    
</body>
</html>
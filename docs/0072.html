<html>
<head>
<title>Thinking in React: Manage User Interaction in React Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中思考:在React应用中管理用户交互</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/thinking-in-react-manage-user-interaction-in-react-apps-611074e004b8?source=collection_archive---------0-----------------------#2019-02-03">https://javascript.plainenglish.io/thinking-in-react-manage-user-interaction-in-react-apps-611074e004b8?source=collection_archive---------0-----------------------#2019-02-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0b797c9566697d2d4a5b49a8640c179e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MQrWFK6tDyUEOPy4PNYA7A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">user inactivity dialog alert on react application</figcaption></figure><p id="ad14" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">想法</strong>:</p><p id="a31d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果我们作为用户在使用它的时候不会被应用程序的警告所困扰，这不是很好吗？我们都讨厌烦人的弹出窗口和对话框。但这个应用程序应该足够智能，知道我什么时候在使用这个应用程序，什么时候没有。嗯…..</p><p id="2e46" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">最初的思考过程:</strong></p><ul class=""><li id="6500" class="kx ky in kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">不打扰用户？</li><li id="44eb" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">如果他有一段时间没有主动使用这个应用程序，你一定要担心。</li><li id="df5a" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">如果他没有回应，保护他的隐私。</li></ul><p id="834b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">要求</strong>:</p><ul class=""><li id="7545" class="kx ky in kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">当用户与应用程序交互时，会话不应结束。</li><li id="a998" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">如果用户注销，会话应该结束。</li><li id="fd3c" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">如果用户在一段时间内不活动，提醒用户，并给他们一个恢复活动的机会。</li><li id="2543" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">如果未得到确认，则结束用户会话并返回登录页面。</li><li id="90d5" class="kx ky in kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">确保用户会话细节是安全的。</li></ul><figure class="lm ln lo lp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/6e0a1227c0077e09a115ee12a63ba2d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ro3ZiG_Q5TsqHRR8P8ReYw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">options to store / retrieve user session</figcaption></figure><p id="f220" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">设计理念</strong>:</p><p id="2f24" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">考虑这将是react应用程序的一部分，并在react中构建这个组件。所以，设计会描绘出同样的东西，</p><p id="fd36" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">1.使它<em class="lq">模块化</em>，所以我们可以用任何其他应用程序来实现它。</p><p id="99f1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.一旦组件被挂载，就进行fetch调用以获取会话数据，因此利用<em class="lq">componentidmount</em>来避免任何副作用，并将细节存储在状态中。</p><p id="3c18" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.如果我们有<em class="lq">有效数据</em>，那么只把它传递给有业务逻辑的组件，否则就什么都不呈现。</p><p id="5ceb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.让我们使用单独的<em class="lq">存储助手</em>方法，该方法主要用于检索和/或保存数据到存储设备，以便快速访问。从主要组件中提取，以便可以轻松更新/更改。</p><p id="d06b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">5.通过store helper方法将来自fetch的响应更新到客户端存储(cookie或本地存储或会话存储)。</p><p id="5383" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">6.让counter helper方法每秒检查一次存储，<em class="lq">倒计数</em>，直到用户初始分配的会话几乎结束。</p><p id="3939" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="lq">注意事项</em> : ( a)像setTimeout一样不断检查客户端存储。(b)如果任何其他共享应用程序更新客户端存储，则我们将始终拥有最新数据(即注销等。)</p><p id="e768" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">7.让交互<em class="lq">处理器方法</em>在用户点击应用和/或按键时更新(发布)用户会话。</p><p id="7298" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="lq">注意事项</em> : ( a)这应该是独立于第一个提取操作的单独提取操作，在成功的更新响应之后，让我们使用存储助手方法更新客户端存储。(b)客户端存储将始终保持同步。(c)有阻止计时器助手，以避免每次用户点击时发送更新，而是可能会等待30秒(可能称之为“重置计时器”)才发送另一个。避免不必要的网络牵引和计算工作。</p><p id="c51d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">8.使对话框具有交互性，并允许用户<em class="lq">延长会话</em>或结束会话。</p><p id="0889" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="lq">注意事项</em> : ( a)如果扩展，使用与上面相同的获取来发布更新的会话细节。(b)注销应结束会话，一旦成功，将用户页面重定向到登录页面(初始应用程序页面)。(c)只需将window.location.href设置为相应的路由器状态，然后执行window.reload，即可导航回主页。</p><p id="04b3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">9.如果用户不确认警告对话框，让<em class="lq">应用程序自行注销</em>并结束会话。</p><p id="220f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="lq">注意事项</em>:(一)会议应该结束了。(b)清除客户端存储的数据。(c)重定向至登录页面。</p><p id="2ea6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">设计流程:</strong></p><figure class="lm ln lo lp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/c71d54324c23b86eb8d6d14215444d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iULGtP85cS2JFDeG5LP78w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">design flow for displaying inactivity dialog</figcaption></figure></div></div>    
</body>
</html>
<html>
<head>
<title>How TypeScript squashed all known bugs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript如何消除所有已知的错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-typescript-squashed-all-known-bugs-dcf574d69ce9?source=collection_archive---------4-----------------------#2019-09-22">https://javascript.plainenglish.io/how-typescript-squashed-all-known-bugs-dcf574d69ce9?source=collection_archive---------4-----------------------#2019-09-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3abf" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">你知道那个让你晚上睡不着觉，希望你不必改变它的应用程序吗？似乎我们都有一个。</h2></div><p id="37e0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的是JavaScript。这是一个只用jQuery和JavaScript编写的单页面应用程序，是我用过的最脆弱的东西。</p><p id="9f7a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我告诉你如何切换到<a class="ae ky" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>来修复应用程序的所有已知错误，同时防止所有类别的缺陷再次出现。</p><h1 id="1bf9" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">发现现有的“链接”问题</h1><p id="7755" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们在切换该应用程序时看到的第一个好处是，调用方法时参数太多或太少，或者方法名称明显拼写错误(这是一个庞大的、没有文档记录的代码库，没有多少有经验的人从事这方面的工作，也没有标准化的过程)，这些都是显而易见的。</p><p id="b612" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过强制一切通过<code class="fe lw lx ly lz b">tsc</code>(TypeScript编译器)，不存在的方法停止了程序流。</p><h1 id="c3ab" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">字符串类型变量</h1><p id="28e7" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们有一些变量，这些变量与一些地方的数字进行了比较。如果您使用的是JavaScript试图在字符串类型的数字和实际数字之间转换的<code class="fe lw lx ly lz b">==</code>比较，这还不错，但是如果您甚至试图使用<code class="fe lw lx ly lz b">===</code>(出于安全和性能考虑，您应该这样做)，您会很快发现<code class="fe lw lx ly lz b">'1' === 1</code>将是假的，并且会有很多错误。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ma"><img src="../Images/ce534c381c0fd16f75fa40817e2ca353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_0BH6pkeGcQZvhHqHYfY9w.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">Bringing order through type declarations</figcaption></figure><p id="892b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过用显式类型声明我们所有的参数和变量(例如使用<code class="fe lw lx ly lz b">: number</code>，我们也能够捕捉到这些问题。</p><p id="eeda" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有一些遗漏的地方——例如，我们将值声明为一个数字，但它实际上是作为一个字符串从用户界面读入的，但是一旦我们找到了要查找的代码类型，这些就不难找到了。</p><h1 id="dbf9" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">用ESLint捕捉愚蠢的错误</h1><p id="cb9f" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们使用<a class="ae ky" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>来Lint我们的类型脚本代码，因为TSLint当时表示它将在2019年的某个时候被弃用。</p><p id="4e7d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ESLint允许我们捕捉可能的问题，比如返回值没有赋给变量或者其他正确性问题。因为我们将ESLint合并到我们的构建过程中，这意味着任何时候我们构建时都会发现任何新的林挺错误。</p><h1 id="d84f" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">介绍课程</h1><p id="9ab3" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">此外，我们用更漂亮的代码格式增强了ESLint，给了我们一致的代码风格，而我们不必太担心它。</p><p id="f50b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为我们有transpiler来捕捉任何明显的问题，有林挺来捕捉任何新的错误，所以我们可以放心地开始使用松散的JavaScript函数并将它们移入类中，为我们的类型脚本带来更多的组织和标准化，并突出代码重用和整合的更多机会。</p><h1 id="d645" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">消除全局状态</h1><p id="ac94" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">因为我们引入了类，所以我们必须开始将状态从全局范围中移出，并移入负责它的单个类中。</p><p id="a673" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">事实证明，在明显的方法参数不匹配和比较不同数据类型的值的背后，糟糕的状态管理是应用程序中错误的第二大原因。</p><p id="8b11" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然我们没有时间在这个项目上引入像<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>或其他相关框架这样的解决方案，但是将状态转移到单独的类中的行为被证明是足够好的，给了我们找到不正确的状态操作代码并修复它所需的控制。</p><h1 id="0570" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">易测性</h1><p id="0828" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">将大量的JavaScript代码分割成TypeScript类还允许我们围绕单个类编写Jest测试，在对应用程序进行修改时，给了我们更高程度的安全性和信心。</p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="46e9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终，将旧的遗留JavaScript应用程序迁移到TypeScript对于开发、质量保证和最终用户来说都是一个了不起的举动，因为我们引入的额外的严格性和安全性措施将应用程序稳定到了我们可以在不破坏东西的情况下进行更改的程度。</p><p id="70c4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当然，我没有将应用程序转换成<a class="ae ky" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>或者添加一个像Redux这样的状态管理框架，但是最终，这个项目很早就完成了，没有任何缺陷，并且解决了过程中的大量现有缺陷——以至于将应用程序转移到TypeScript比找出JavaScript中的每个错误并修复它更快，希望我们能抓住它的所有方面。</p><p id="f86b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每个项目都是不同的，但是如果您需要为老化的应用程序带来秩序和质量，我强烈建议您考虑TypeScript。</p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="ecfb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mx">原载于2019年9月22日</em><a class="ae ky" href="https://dev.to/integerman/how-typescript-squashed-all-known-bugs-98c" rel="noopener ugc nofollow" target="_blank"><em class="mx">https://dev . to</em></a><em class="mx">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Read File Line by Line as Data Stream | Deno By Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å°†æ–‡ä»¶ä½œä¸ºæ•°æ®æµé€è¡Œè¯»å–</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/read-file-line-by-line-as-data-stream-deno-by-example-18fb340c9e1c?source=collection_archive---------6-----------------------#2020-05-27">https://javascript.plainenglish.io/read-file-line-by-line-as-data-stream-deno-by-example-18fb340c9e1c?source=collection_archive---------6-----------------------#2020-05-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1fba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ki kj kk kl b">Deno</code>æä¾›å¤šä¸ªAPIè¯»å–æ–‡ä»¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe ki kj kk kl b">Deno.readAll</code>å’Œ<code class="fe ki kj kk kl b">Deno.readTextFile</code>è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚ç„¶è€Œï¼Œé€è¡Œé˜…è¯»åœ¨<code class="fe ki kj kk kl b">std</code>åº“ä¸­ä»ç„¶ä¸å¯ç”¨ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•é€è¡Œ(æµ)è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/7efdf03bc47a594185ba60a27761a5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*L2RkHW8ALvGhjj7L.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Google</figcaption></figure><p id="6342" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨è¿›å…¥å®é™…ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆé€šè¿‡ä¾‹å­äº†è§£ä¸€ä¸‹æ ‡å‡†åº“ã€‚</p><p id="bd92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Denoæä¾›äº†<code class="fe ki kj kk kl b">Deno.open</code> APIæ¥æ‰“å¼€æ–‡ä»¶ã€‚è¿™æ˜¯å¼‚æ­¥APIã€‚æ„æ€ï¼Œä½ éœ€è¦<code class="fe ki kj kk kl b">await</code>ã€‚ä½œä¸ºå›æŠ¥ï¼Œä½ ä¼šå¾—åˆ°åŒ…å«<code class="fe ki kj kk kl b">rid</code>çš„<code class="fe ki kj kk kl b">File</code>ã€‚</p><h2 id="40f3" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">æ ·æœ¬:æ‰“å¼€æ–‡ä»¶<a class="ae lv" href="https://deepakshrma.github.io/deno-by-example/advance_readline/#sample-open-file" rel="noopener ugc nofollow" target="_blank"> # </a></h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="a94c" class="lc ld in kl b gy ma mb l mc md">// examples/06_readfile_chunk.ts<br/>async function main(name?: string) {<br/>  if (name) {<br/>    const file = await Deno.open(name);<br/>    console.log(file);<br/>  }<br/>}<br/>const [fileName] = Deno.args;<br/>main(fileName);</span></pre><h2 id="6316" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[è¿è¡Œ]</h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="edc9" class="lc ld in kl b gy ma mb l mc md">$ deno  run --allow-read  examples/06_readfile_chunk.ts examples/tom.json</span><span id="467d" class="lc ld in kl b gy me mb l mc md">## Output:<br/># File { rid: 3 }</span></pre><p id="a9c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¯ä»¥çœ‹åˆ°<code class="fe ki kj kk kl b">rid</code>ä½œä¸ºå›æŠ¥ã€‚è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ª<code class="fe ki kj kk kl b">rid</code>æ¥è·å–æ•°æ®å—ã€‚è¯»å–å—éœ€è¦API <code class="fe ki kj kk kl b">Deno.read</code></p><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="d65d" class="lc ld in kl b gy ma mb l mc md">// examples/06_readfile_chunk.ts<br/>async function main(name?: string) {<br/>  if (name) {<br/>    const file = await Deno.open(name);<br/>    const decoder = new TextDecoder();<br/>    let buf = new Uint8Array(100);<br/>    const numOfByteRead = await Deno.read(file?.rid, buf);<br/>    console.log(numOfByteRead);<br/>    console.log(decoder.decode(buf));<br/>  }<br/>}<br/>const [fileName] = Deno.args;<br/>main(fileName);</span></pre><h2 id="98d3" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated"><strong class="ak">ã€è¿è¡Œã€‘</strong></h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="90fa" class="lc ld in kl b gy ma mb l mc md">$ deno  run --allow-read  examples/06_readfile_chunk.ts examples/tom.json</span><span id="4e0b" class="lc ld in kl b gy me mb l mc md"># Output<br/># 100<br/>{<br/>   "id": 1,<br/>   "version": "1.0.1",<br/>   "contributors": [<br/>     "deepak",<br/>     "gary"<br/>   ],<br/>   "actor": {</span></pre><p id="22d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨è¿™é‡Œï¼Œæ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæ¯æ¬¡æ‚¨è°ƒç”¨<code class="fe ki kj kk kl b">Deno.read</code>æ—¶ï¼Œå®ƒéƒ½ä¼šè¿”å›å·²ç»è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦‚æœ<code class="fe ki kj kk kl b">numOfByteRead</code>æ˜¯<code class="fe ki kj kk kl b">null</code> ieã€‚æ˜¯æ–‡ä»¶<strong class="jm io">ã€EOFã€‘</strong>çš„ç»“å°¾ã€‚</p><p id="e5b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ki kj kk kl b">new Uint8Array(100);</code>è°ƒç”¨readæ—¶å°†å¡«å……Uint8Arrayã€‚ç¼“å†²åŒºå¤§å°å¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚è¯»å–å™¨å°†è¯»å–å­—èŠ‚ï¼Œç›´åˆ°è¾¾åˆ°ç¼“å†²åŒºå¤§å°ã€‚</p><p id="71e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚æœæ‚¨æ³¨æ„åˆ°ï¼Œè¯»å–çš„æ–‡ä»¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ã€‚æ‚¨éœ€è¦å¢åŠ ç¼“å†²åŒºå¤§å°æ¥è¯»å–æ‰€æœ‰æ–‡ä»¶ã€‚</p><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="2973" class="lc ld in kl b gy ma mb l mc md">// examples/06_readfile_chunk.ts<br/>async function main(name?: string) {<br/>  if (name) {<br/>    const file = await Deno.open(name);<br/>    const decoder = new TextDecoder();<br/>    let buf = new Uint8Array(1000); // 353<br/>    const numOfByteRead = await Deno.read(file?.rid, buf);<br/>    console.log(numOfByteRead);<br/>    console.log(decoder.decode(buf));<br/>  }<br/>}<br/>const [fileName] = Deno.args;<br/>main(fileName);</span></pre><h2 id="0d97" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[è¿è¡Œ]</h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="db31" class="lc ld in kl b gy ma mb l mc md">$ deno  run --allow-read  examples/06_readfile_chunk.ts examples/tom.json</span><span id="c71f" class="lc ld in kl b gy me mb l mc md"># Output<br/># 353<br/>## JSON here..</span></pre><p id="ed6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†ç¼“å†²åŒºå¤§å°å¢åŠ åˆ°äº†1000ï¼Œè¶…è¿‡äº†353ã€‚è¿™æ ·æˆ‘å°±å¯ä»¥è¯»å–æ•´ä¸ªJSONæ–‡ä»¶ã€‚</p><p id="4226" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">ã€æ³¨æ„ã€‘:</strong>ä½ åº”è¯¥é¿å…å¤§çš„ç¼“å†²åŒºå¤§å°ã€‚è¯»å–å¤§æ–‡ä»¶ä¼šäº§ç”Ÿå†…å­˜é—®é¢˜ã€‚åŒæ—¶ä¹Ÿå¾ˆéš¾é¢„æµ‹å®é™…çš„è§„æ¨¡ã€‚</p><p id="1209" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸ºäº†é€å—è¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code class="fe ki kj kk kl b">then</code> able APIä¸Šä½¿ç”¨é€’å½’ã€‚</p><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="b123" class="lc ld in kl b gy ma mb l mc md">// examples/06_readfile_chunk.ts<br/>async function main(name?: string) {<br/>  if (name) {<br/>    const file = await Deno.open(name);<br/>    const decoder = new TextDecoder();<br/>    let buf = new Uint8Array(100);<br/>    let chunk = new Uint8Array(0);<br/>    Deno.read(file?.rid, buf).then(function readByte(numOfByteRead) {<br/>      if (numOfByteRead) {<br/>        chunk = _append(chunk, buf, numOfByteRead);<br/>        Deno.read(file?.rid, buf).then(readByte);<br/>      } else {<br/>        console.log(decoder.decode(chunk));<br/>      }<br/>    });<br/>  }<br/>}<br/>const [fileName] = Deno.args;<br/>main(fileName);</span></pre><h2 id="3cdd" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[è¿è¡Œ]</h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="d790" class="lc ld in kl b gy ma mb l mc md">$ deno  run --allow-read  examples/06_readfile_chunk.ts examples/tom.json</span><span id="4d61" class="lc ld in kl b gy me mb l mc md"># Output<br/>{<br/>  "id": 1,<br/>  "version": "1.0.1",<br/>  "contributors": [<br/>    "deepak",<br/>    "gary"<br/>  ],<br/>  "actor": {<br/>    "name": "Tom Cruise",<br/>    "age": 56,<br/>    "Born At": "Syracuse, NY",<br/>    "Birthdate": "July 3 1962",<br/>    "movies": [<br/>      "Top Gun",<br/>      "Mission: Impossible",<br/>      "Oblivion"<br/>    ],<br/>    "photo": "<a class="ae lv" href="https://jsonformatter.org/img/tom-cruise.jpg" rel="noopener ugc nofollow" target="_blank">https://jsonformatter.org/img/tom-cruise.jpg</a>"<br/>  }<br/>}</span></pre><h2 id="e75b" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[æ•…éšœ]</h2><p id="32ae" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“æˆ‘è°ƒç”¨<code class="fe ki kj kk kl b">Deno.read(file?.rid, buf).then</code>æ—¶ã€‚å®ƒå°†è§¦å‘ä¸€ä¸ªå‘½åå‡½æ•°<code class="fe ki kj kk kl b">function readByte(numOfByteRead)</code>ã€‚è¿™å°†åœ¨æ¯æ¬¡å†…éƒ¨æ£€æŸ¥<code class="fe ki kj kk kl b">numOfByteRead</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡<code class="fe ki kj kk kl b">decoder.decode</code>è¿½åŠ è§£ç åè¿”å›çš„æ–‡æœ¬ã€‚æˆ‘è¿½åŠ ä¸ºUint8Arrayã€‚å¯¹äºå‘½åçš„Uint8Arrayæ•°ç»„ï¼Œæˆ‘åœ¨<code class="fe ki kj kk kl b">StackOverflow</code>ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p><p id="00f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">[_è¿½åŠ ã€‘</strong></p><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="7259" class="lc ld in kl b gy ma mb l mc md">function _append(a: Uint8Array, b: Uint8Array, numOfByteRead:number) {<br/>  var c = new Uint8Array(a.length + numOfByteRead);<br/>  c.set(a, 0);<br/>  c.set(b.slice(0, numOfByteRead), a.length);<br/>  return c;<br/>}</span></pre><p id="2797" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">ã€æ³¨æ„ã€‘:</strong>å¦‚æœæ²¡æœ‰é€šè¿‡<code class="fe ki kj kk kl b">numOfByteRead</code>ï¼Œå¯èƒ½ä¼šå¯¹ä¸Šæ¬¡è¯»å–çš„å€¼è¿›è¡Œåƒåœ¾å¤„ç†ã€‚</p><p id="6a3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å°¼æ–¯ï¼ˆæ³•å›½åŸå¸‚åï¼‰ğŸ™‚ï¼Œä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆå¥½ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶æ²¡æœ‰é€è¡Œé˜…è¯»ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¼‚æ­¥è¿­ä»£å™¨ã€‚</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mk"><img src="../Images/a35b0998e29330c4f2235376e8451aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DKk0FVYVE5aSi88g7UqpzA.gif"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">from: deadcoderising.com</figcaption></figure><h2 id="c62e" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">å¼‚æ­¥è¿­ä»£å™¨çš„åŸºæœ¬ç¤ºä¾‹<a class="ae lv" href="https://deepakshrma.github.io/deno-by-example/advance_readline/#basic-sample-for-async-iterator" rel="noopener ugc nofollow" target="_blank"> # </a></h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="bc3c" class="lc ld in kl b gy ma mb l mc md">let range = {<br/>  from: 1,<br/>  to: 5,<br/>  [Symbol.asyncIterator]() {<br/>    return {<br/>      current: this.from,<br/>      last: this.to,<br/>      async next() {<br/>        const value = await new Promise&lt;number&gt;((resolve) =&gt;<br/>          setTimeout(() =&gt; {<br/>            resolve(this.current++);<br/>          }, 1000)<br/>        );<br/>        if (value &lt;= this.last) {<br/>          return { done: false, value };<br/>        } else {<br/>          return { done: true };<br/>        }<br/>      },<br/>    };<br/>  },<br/>};<br/>(async () =&gt; {<br/>  for await (let value of range) {<br/>    console.log(value); // 1,2,3,4,5<br/>  }<br/>})();</span></pre><p id="3866" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">ã€è¾“å‡ºã€‘:</strong> `1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 '</p><p id="c29e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å°±åƒ<code class="fe ki kj kk kl b">Symbol.iterator</code>ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe ki kj kk kl b">Symbol.asyncIterator</code>æ¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è¿­ä»£å™¨ã€‚å› ä¸ºtypescriptæ”¯æŒç°æˆçš„å¼‚æ­¥è¿­ä»£å™¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªAPIã€‚è¦äº†è§£æ›´å¤šï¼Œä½ å¯ä»¥é˜…è¯»<a class="ae lv" href="https://javascript.info/async-iterators-generators" rel="noopener ugc nofollow" target="_blank">å¼‚æ­¥è¿­ä»£å™¨ç”Ÿæˆå™¨</a>ã€‚</p><p id="e895" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸ºäº†é€è¡Œè¯»å–ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªå®ç”¨æ–¹æ³•<code class="fe ki kj kk kl b">_readTillDone</code>å’Œ<code class="fe ki kj kk kl b">readLine</code>ã€‚</p><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="40ac" class="lc ld in kl b gy ma mb l mc md">const _readTillDone = async (<br/>  rid: number,<br/>  text: string = ""<br/>): Promise&lt;[string, string, boolean]&gt; =&gt; {<br/>  let buf = new Uint8Array(100);<br/>  let indexOfLine = text.indexOf("\n");<br/>  if (indexOfLine === -1) {<br/>    const num = await Deno.read(rid, buf);<br/>    if (num) {<br/>      text = text + decoder.decode(buf.slice(0, num));<br/>      return _readTillDone(rid, text);<br/>    } else {<br/>      return [text, "", true];<br/>    }<br/>  } else {<br/>    return [text.slice(0, indexOfLine), text.slice(indexOfLine + 1), false];<br/>  }<br/>};</span><span id="31b4" class="lc ld in kl b gy me mb l mc md">const readLine = async (fileName: string) =&gt; {<br/>  const file = await Deno.open(fileName);<br/>  let text = "";<br/>  let done = false;<br/>  return {<br/>    [Symbol.asyncIterator]() {<br/>      return {<br/>        async next() {<br/>          const [t, rest, d] = await _readTillDone(file?.rid, text);<br/>          if (done) {<br/>            return { done: true, value: t };<br/>          } else {<br/>            text = rest;<br/>            done = d;<br/>            return { done: false, value: t };<br/>          }<br/>        },<br/>      };<br/>    },<br/>  };<br/>};</span></pre><h2 id="78fd" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[æ•…éšœ]</h2><p id="39c5" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated"><code class="fe ki kj kk kl b">readLine</code>å¾ˆç®€å•ã€‚åœ¨æ¯æ¬¡å¼‚æ­¥è¿­ä»£å™¨è°ƒç”¨æ—¶ï¼Œå®ƒå°†è°ƒç”¨<code class="fe ki kj kk kl b">_readTillDone</code>å¹¶è¿”å›è¯¥è¡Œã€‚ä½†æ˜¯ï¼Œ_readTillDoneæœ‰ç‚¹å¤æ‚ã€‚æˆ‘ä½¿ç”¨<code class="fe ki kj kk kl b">file.rid</code>æ¥è·Ÿè¸ªæ–‡ä»¶çš„è¯»å–ã€‚</p><p id="cb64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ¯å½“æˆ‘ç”¨<code class="fe ki kj kk kl b">file?.rid, text</code>æ‰“<code class="fe ki kj kk kl b">_readTillDone</code>çš„æ—¶å€™ã€‚å®ƒè¯•å›¾ç”¨<code class="fe ki kj kk kl b">newLine</code>åˆ†å‰²æ–‡æœ¬ã€‚æˆ‘æ‰¾ä¸åˆ°çº½æ—ã€‚å®ƒè¯•å›¾è¯»å–æ›´å¤šçš„è¡Œï¼Œç›´åˆ°ç»“æŸã€‚<code class="fe ki kj kk kl b">_readTillDone</code>è¿”å›ä¸‰ä¸ªå‚æ•°<code class="fe ki kj kk kl b">[t, rest, d]</code>ã€‚è¿™é‡Œ<code class="fe ki kj kk kl b">t</code>ï¼Œé€è¡Œè¯»å–çš„æ–‡æœ¬ï¼Œ<code class="fe ki kj kk kl b">rest</code>ä½œä¸ºç¼“å†²æ–‡æœ¬ï¼Œ<code class="fe ki kj kk kl b">d</code>ä½œä¸ºå®Œæˆè¿”å›ã€‚</p><p id="784d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ml">è®©æˆ‘ä»¬å®Œæˆæ•™ç¨‹ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰äº†è¿™äº›å®ç”¨ç¨‹åºï¼Œå®ç°å°±éå¸¸ç®€å•äº†ã€‚</em> </strong></p><h2 id="2afa" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">ç¤ºä¾‹-æœ€ç»ˆä»£ç <a class="ae lv" href="https://deepakshrma.github.io/deno-by-example/advance_readline/#example-final-code" rel="noopener ugc nofollow" target="_blank"> # </a></h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="6319" class="lc ld in kl b gy ma mb l mc md">// examples/06_readfile_chunk.ts<br/>import { readLine } from "<a class="ae lv" href="https://raw.githubusercontent.com/deepakshrma/deno-by-example/master/examples/file_reader.ts" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/deepakshrma/deno-by-example/master/examples/file_reader.ts</a>";</span><span id="4a86" class="lc ld in kl b gy me mb l mc md">async function main(name?: string) {<br/>  if (name) {<br/>    // Example 6<br/>    const reader = await readLine(name);<br/>    for await (let value of reader) {<br/>      console.log(value);<br/>    }<br/>  }<br/>}<br/>const [fileName] = Deno.args;<br/>main(fileName);</span></pre><h2 id="0ef9" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">[è¿è¡Œ]</h2><pre class="kn ko kp kq gt lw kl lx ly aw lz bi"><span id="e429" class="lc ld in kl b gy ma mb l mc md">$ deno  run --allow-read  examples/06_readfile_chunk.ts examples/tom.json</span><span id="3b24" class="lc ld in kl b gy me mb l mc md"># Output<br/>{<br/>  "id": 1,<br/>  "version": "1.0.1",<br/>  "contributors": [<br/>    "deepak",<br/>    "gary"<br/>  ],<br/>  "actor": {<br/>    "name": "Tom Cruise",<br/>    "age": 56,<br/>    "Born At": "Syracuse, NY",<br/>    "Birthdate": "July 3 1962",<br/>    "movies": [<br/>      "Top Gun",<br/>      "Mission: Impossible",<br/>      "Oblivion"<br/>    ],<br/>    "photo": "<a class="ae lv" href="https://jsonformatter.org/img/tom-cruise.jpg" rel="noopener ugc nofollow" target="_blank">https://jsonformatter.org/img/tom-cruise.jpg</a>"<br/>  }<br/>}</span></pre><p id="b3ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TaDaï¼ğŸ‘ğŸ‘ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€è¡Œè¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚</p><p id="db5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªæ•™ç¨‹ã€‚è¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä½ çš„åé¦ˆã€‚è¯·æ”¯æŒ(ğŸ™ğŸ™)é€šè¿‡è®¢é˜…å’Œé¼“æŒã€‚</p><p id="d24f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ‰€æœ‰å·¥ä½œå®ä¾‹éƒ½å¯ä»¥åœ¨æˆ‘çš„Githubä¸­æ‰¾åˆ°:<a class="ae lv" href="https://github.com/deepakshrma/deno-by-example/tree/master/examples" rel="noopener ugc nofollow" target="_blank">https://Github . com/deepakshrma/deno-by-example/tree/master/examples</a></p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="c848" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ml">åŸè½½äº</em><a class="ae lv" href="https://deepakshrma.github.io/deno-by-example/advance_readline" rel="noopener ugc nofollow" target="_blank"><em class="ml">https://deepakshrma . github . io</em></a><em class="ml">ã€‚</em></p><h1 id="2578" class="mt ld in bd le mu mv mw lh mx my mz lk na nb nc ln nd ne nf lq ng nh ni lt nj bi translated">ç”¨ç®€å•è‹±è¯­å†™çš„ä¾¿æ¡</h1><p id="aafe" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">ä½ çŸ¥é“æˆ‘ä»¬æœ‰å››ä»½å‡ºç‰ˆç‰©å’Œä¸€ä¸ªYouTubeé¢‘é“å—ï¼Ÿä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„ä¸»é¡µ<a class="ae lv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">plain English . io</strong></a>æ‰¾åˆ°æ‰€æœ‰è¿™äº›å†…å®¹â€”â€”å…³æ³¨æˆ‘ä»¬çš„å‡ºç‰ˆç‰©å¹¶<a class="ae lv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">è®¢é˜…æˆ‘ä»¬çš„YouTubeé¢‘é“</strong> </a> <strong class="jm io">æ¥è¡¨è¾¾ä½ çš„çˆ±å§ï¼</strong></p></div></div>    
</body>
</html>
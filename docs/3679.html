<html>
<head>
<title>Stop Rashly Copying Commands From Websites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止轻率地从网站上复制命令</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-never-rashly-copy-commands-from-websites-4ae476441530?source=collection_archive---------3-----------------------#2020-10-17">https://javascript.plainenglish.io/why-you-should-never-rashly-copy-commands-from-websites-4ae476441530?source=collection_archive---------3-----------------------#2020-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0ccc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript可以利用这一点来执行恶意命令</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d5827d26f6b36307a7a1480b707ceb52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tj-DKkqYJEd6dA_G21225g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: the author</figcaption></figure><p id="30a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">昨天，我在红迪网上看到了令我震惊的东西。</p><p id="e1d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们几乎每天都这样做——我们在互联网上寻找东西，找到一个网站，复制终端命令，以及直接从网站上进行其他操作。</p><p id="9b74" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们将它们直接粘贴到终端中来安装东西、编写代码或进行配置。</p><p id="5dae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">但有一个巨大的问题:在网站上复制文本很容易被JavaScript利用。<br/> JavaScript可以对按下“<em class="lr"> copy </em>”或组合键做出反应，并自己将一些东西写入剪贴板——完全独立于我们实际想要复制的文本。<br/>这可能会导致我们将不想要的命令粘贴到终端中。</strong></p><p id="fe95" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更大的问题是，根据我们插入的命令，我们甚至不需要按enter键来确认执行。<br/>如果命令包含新的一行<code class="fe ls lt lu lv b">\n</code>，当我们将它插入终端时会立即执行。</p><p id="7c8a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">这里可以看到一个例子:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lw"><img src="../Images/6cb84c430e04a407ab55435d4d923c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*N7D7xLHquzYnZpgFRnvMfQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: the author</figcaption></figure><p id="22a4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lx" href="https://codingcheats.io/copy/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">您可以在这里自己试用。</strong> </a></p><p id="a3fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您所看到的，我只是粘贴复制的代码，它将立即被执行。<br/>如果此时您已经在会话中拥有根权限，几乎任何事情都有可能。一个您并不期望的命令就可以销毁重要文件或安装软件并立即执行。</p><p id="a2ae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我在Windows PC和MacBook上尝试过——在火狐、Safari、Chrome和Opera上。它在任何地方都可以工作——无论您是点击上下文菜单中的<em class="lr">还是使用组合键来复制</em>。</p><h2 id="0589" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">这是多么容易</h2><p id="acd4" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">如前所述，整个过程都是用JavaScript来完成的。我们可以单独对浏览器中的复制事件做出反应。JavaScript可以抑制标准反应(即复制实际文本)。如您所知，也可以将代码保存到剪贴板。<br/> <strong class="kx ir">两者结合便是剥削。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b571" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过<code class="fe ls lt lu lv b">document.getElementById</code>我们选择要拦截和操纵复制事件的元素。首先，我们将事件侦听器添加到复制事件中。<br/>然后我们调用一个函数将文本保存到剪贴板。<br/>最后，我们阻止<strong class="kx ir">默认事件</strong>，浏览器将执行该事件——剪贴板的非操作副本在没有JavaScript的情况下工作。<br/>浏览器复制文本本身现在被抑制。</p><h2 id="0e5c" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">也不要信任复制到剪贴板按钮。</h2><p id="10e5" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">我认为这是不言自明的。在许多网站上，提供了复制到剪贴板按钮。在这里，同样的功能被用来手动复制东西——当然，你可以操纵被复制的东西。</p><h2 id="40ac" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">你如何保护自己</h2><p id="39c4" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">唯一真正的可能是先把你拷贝的所有东西粘贴到某个地方，比如，粘贴到一个文本文件中。然后你可以看到它是什么，并决定是否要运行它。</p><h2 id="d2d0" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated"><strong class="ak">更新:</strong>有一个开源的浏览器扩展可用。</h2><p id="e736" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">它叫做<strong class="kx ir">复制守卫</strong>，当你的复制行动被劫持时会发出警告。你可以在GitHub上找到:<a class="ae lx" href="https://github.com/roedesh/copyguard" rel="noopener ugc nofollow" target="_blank">https://github.com/roedesh/copyguard</a></p><p id="a315" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">非常感谢您的阅读！如果你对网络的极限感兴趣，这里有更多你可能感兴趣的东西:</p><h1 id="bb1a" class="my lz iq bd ma mz na nb md nc nd ne mg jw nf jx mj jz ng ka mm kc nh kd mp ni bi translated">总结</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj mx l"/></div></figure><p id="578e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我认为整件事是一个巨大的安全问题。对于很多开发者来说，复制粘贴东西是很正常的套路。例如，为了从控制台安装和配置整个应用程序，我们经常要连续多次这样做。</p><p id="b5ef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我已经在Twitter上提到了这一点——我想不出有多少好的理由可以用<strong class="kx ir"> preventDefault </strong>来抑制文本复制。</p><p id="4492" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">没有它，您仍然可以使用复制到剪贴板功能。<br/>每个开发者也可以开发自己的<strong class="kx ir">上下文菜单</strong>，右键点击某个东西即可展开。这提供了在许多页面上复制和粘贴拖放元素的功能。</p><p id="cd6b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">元素已被复制的事实保存在app-state中，不需要将任何内容保存到剪贴板。</p><p id="d12b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">据我所知，<strong class="kx ir"> preventDefault </strong>用于复制可见文本的情况是当页面作者想要自动添加一个链接或其他东西到复制的文本中。</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/javascript-in-plain-english/tracking-with-css-ec98e3d81046" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">仅使用CSS进行用户跟踪</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">设备类型、操作系统和动作</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><h2 id="b759" class="ly lz iq bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated"><a class="ae lx" href="http://eepurl.com/hacY0v" rel="noopener ugc nofollow" target="_blank">加入我的简讯保持联系</a></h2></div></div>    
</body>
</html>
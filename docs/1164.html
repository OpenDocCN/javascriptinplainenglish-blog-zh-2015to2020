<html>
<head>
<title>My Approach to Readable CSS in HTML Emails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在HTML电子邮件中处理可读CSS的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-approach-to-readable-css-in-html-emails-3e2e9a22a72a?source=collection_archive---------3-----------------------#2020-02-06">https://javascript.plainenglish.io/my-approach-to-readable-css-in-html-emails-3e2e9a22a72a?source=collection_archive---------3-----------------------#2020-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="00cd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用JavaScript使内嵌的CSS在电子邮件中易于管理</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/02a63b27c937a2949c3038749c6f233c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L2eN0EKzt3uNNUzV"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@webaroo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Webaroo.com.au</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.webtips.dev/my-approach-to-readable-css-in-html-emails"><div class="gh gi kw"><img src="../Images/c19cb3069af1beba3c93258d9fcfe139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*-PVzecNs3s4ZbJsdsgIsGA.png"/></div></a></figure><p id="25f4" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最近，我开始致力于密码恢复的实现，我在想什么会是——即使不是最干净的<em class="lt">——但仍然是一个很好的解决方案，可以让我的电子邮件模板风格化，而不会在阅读内嵌CSS时发疯。</em></p><p id="3da8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">看，HTML电子邮件的问题在于，你不能从CSS样式声明中找出来源，你只有一个有限的选择:确切地说，就是使用内嵌样式。我想通过快递服务器发送电子邮件，所以很明显使用JavaScript，因此本文诞生了。</p><p id="45b2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然而，在我们开始编码之前，有一点很重要，那就是我们有一大堆用户友好的在线工具，它们都有一个图形用户界面，你可以用它来创建令人瞠目结舌的电子邮件模板。</p><p id="da41" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">对于我的问题来说，用JavaScript完成所有这些工作似乎是最佳和最简单的解决方案。我只需要一个单一的模板，也想拥有对一切的完全控制。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="27f0" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">创建模板</h1><p id="185d" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">首先，您当然希望有一个模板。我创建了一个导出以下字符串的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="cb3f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在这里，您可以看到我使用了一个模板文字，所以我可以包装HTML元素并使它们可读。我用一个函数调用解决了内嵌样式问题。它获取CSS样式，并将其转换为内嵌样式。但是函数在内部是做什么的，参数从哪里来？</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="a489" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">添加CSS</h1><p id="7185" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">首先，我创建了一个容器对象来存储CSS样式，并在其中创建了其他对象来定义每个元素的CSS属性。这些是传递给函数调用的对象:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="d855" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">对象中的每个属性都是与其CSS值相关联的CSS属性的名称。这就是我们传递给<code class="fe na nb nc nd b">getStyles</code>函数的内容，该函数的唯一职责是为它创建内嵌的CSS样式。</p><p id="708d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么，解决方案是什么呢？它实际上可以在一行代码中完成:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="1918" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们可以在每个值上循环使用<code class="fe na nb nc nd b">Object.keys</code>和<code class="fe na nb nc nd b">map</code>对象，其中我们使用冒号将键与值连接起来。之后，我们可以用分号将它们连接在一起。</p><p id="7f56" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">同一段代码还有其他用例，比如生成查询字符串:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/146aaa37ca4c442ef7f7d814e31af5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_eOMYLhp8FKA9z--gviWw.png"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="7bc9" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">添加本地化支持</h1><p id="e4fa" class="pw-post-body-paragraph kx ky iq kz b la mt jr lc ld mu ju lf lg mv li lj lk mw lm ln lo mx lq lr ls ij bi translated">当它在做的时候，而不是文本本身的来源？这样，我们就可以以相对简单的方式添加本地化支持。我们所要做的就是将一个对象传递给我们的函数，然后引用模板中的键:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="d0eb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在这里，我给函数添加了一个<code class="fe na nb nc nd b">i18n</code>参数，该参数将一个对象保存在几个键上。对于每种语言，您都可以创建一个包含必要翻译的新文件。我为他们创建了一个单独的文件夹，名为<code class="fe na nb nc nd b">i18n</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f87b99bcb4d8dc8330621f995fe1a5c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*NaeFVb2zg1mkk49ZyPavIQ.png"/></div></figure><p id="89df" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">每一个都导出了一个带有必要键的对象:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="459b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">您使用它们的方式是根据您的需要导入模板和一个本地化文件。您可以根据某些变量(例如，请求参数)导入它们，并调用函数来生成模板:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="344d" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">最终结果如何？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/db78b794a34d729c76af49bc035c4027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*5lXhvlxmZBIgatrwx4GM6Q.png"/></div></figure><p id="e226" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我在模板中使用了图像，但是要让它们出现，您需要通过受信任的SMTP服务器发送电子邮件。否则，您的图像不仅不会出现，更重要的是，您的电子邮件会落入垃圾邮件文件夹。</p><p id="47bb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">同样重要的是要提到，在CSS方面您有一些限制。电子邮件客户端并不支持所有样式。例如:虽然您看到一个很好的<code class="fe na nb nc nd b">box-shadow</code>应用在这里，但这是一个例外。包括Gmail在内的大多数电子邮件客户端都不支持它。如果你真的坚持，你最好使用图像。因为你的电子邮件客户端比浏览器多，为它们做一个一致的设计是一个挑战。</p><p id="05e5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这就是为什么我建议只包括最必要和最基本的东西，比如颜色或布局。其他的一切都应该只是赞美，即使没有它们，你的电子邮件也应该看起来很整洁。</p><p id="4055" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么，您实际上是如何使用快递发送邮件的呢？这值得我在不久的将来写一篇自己的文章，所以一定要跟进。🍊</p><p id="b871" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">感谢您花时间阅读本文，快乐造型！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://medium.com/@ferencalmasi/membership"><div class="gh gi nh"><img src="../Images/e66c4cd6d9849ac0bd245f3fc39b65c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZ9xuLqLkbqUG65sgVB3gg.png"/></div></a></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="http://webtips.dev/"><div class="gh gi kw"><img src="../Images/b0d8e0a0c2689a59aa62a677429b83b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*_QOx8lB1bc1rVmMjWQ3Yfw.png"/></div></a></figure></div></div>    
</body>
</html>
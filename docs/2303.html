<html>
<head>
<title>TypeScript Project Setup— Hot Reloading, Libraries and Build Targets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript项目设置—热重装、库和构建目标</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-project-setup-hot-reloading-libraries-and-build-targets-99863e746aca?source=collection_archive---------3-----------------------#2020-06-10">https://javascript.plainenglish.io/typescript-project-setup-hot-reloading-libraries-and-build-targets-99863e746aca?source=collection_archive---------3-----------------------#2020-06-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9f37807fb0b21068ae470d9f202afa5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*140EtunFhFlOSL2y"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@eaterscollective?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eaters Collective</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6382" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript是JavaScript的自然扩展，在许多项目中取代了JavaScript。</p><p id="cc57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，并不是每个人都知道它实际上是如何工作的。</p><p id="e149" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何创建一个进行热重载的TypeScript项目。</p><p id="dadc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将了解如何选择要包含在项目中的类型定义，以便我们可以使用我们想要的特性。</p><h1 id="5403" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用观察模式</h1><p id="591d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了让我们的生活更轻松，我们应该确保每次保存代码时，我们的项目都会重新编译和重新加载。</p><p id="b4b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就不必在每次修改代码时重新编译和重启我们的应用程序。</p><p id="46cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在watch模式下，我们会观察发生变化的源代码文件，然后编译器会自动重新构建应用。</p><p id="06a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的TypeScript项目应该已经安装了TypeScript编译器。</p><p id="e8b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8e1c" class="mn lc iq mj b gy mo mp l mq mr">tsc --watch</span></pre><p id="fac8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">监视代码更改并重新编译代码。</p><p id="faa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们更改代码，我们应该在编译时看到消息，如果发现任何编译器错误，就会显示出来。</p><h1 id="638d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">编译后自动执行代码</h1><p id="769c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">只重新编译文件，不运行它们。</p><p id="47ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要运行它们，我们必须使用另一个程序。</p><p id="6628" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">ts-watch</code>包以监视模式启动编译器，观察9的输出，并根据编译结果运行命令。</p><p id="d78f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0cbb" class="mn lc iq mj b gy mo mp l mq mr">npx tsc-watch --onsuccess "node dist/index.js"</span></pre><p id="8086" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在没有安装的情况下运行<code class="fe ms mt mu mj b">tsc-watch</code>，并在节点成功的情况下运行<code class="fe ms mt mu mj b">dist/index.js</code>。</p><h1 id="8a44" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用NPM启动编译器</h1><p id="daba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在<code class="fe ms mt mu mj b">package.json</code>中添加一个<code class="fe ms mt mu mj b">start</code>脚本来运行命令来启动项目。</p><p id="45e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9f7b" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  //...<br/>  "scripts": {  <br/>    "start": "tsc-watch --onsuccess \"node dist/index.js\""  <br/>  },<br/>  //...<br/>}</span></pre><h1 id="2908" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">版本定位</h1><p id="41db" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有了TypeScript编译器，我们可以在最终构建中针对不同版本的JavaScript。</p><p id="db26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以从低至ES3的版本升级到最新版本。</p><p id="0584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以轻松地支持传统浏览器。</p><p id="7276" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4f9f" class="mn lc iq mj b gy mo mp l mq mr">{  <br/>  "compilerOptions": {  <br/>    "target": "es5",<br/>    //...<br/>  }<br/>}</span></pre><p id="9731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">支持像Internet Explorer这样的浏览器，这些浏览器不支持内置的最新JavaScript特性。</p><p id="18b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">支持以下版本。</p><p id="c088" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es3</code>–该语言的第三版。当没有指定<code class="fe ms mt mu mj b">target</code>时，这是默认值。它是在1999年定义的</p><p id="0807" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es5</code>—2009年12月发布的JavaScript第五版</p><p id="00bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第六版JavaScript，增加了许多创建复杂应用的特性，如类、模块、箭头函数、承诺等。</p><p id="97e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015</code> —同<code class="fe ms mt mu mj b">es6</code></p><p id="47be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2016</code>–JavaScript规范的第七版包括了数组的<code class="fe ms mt mu mj b">includes</code>方法和取幂操作符</p><p id="6d8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2017</code>–JavaScript规范的第八版。它增加了检查对象和异步/等待的特性</p><p id="ffb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2018</code>–JavaScript规范的第9版。它将spread和rests操作或对象添加到字符串处理和异步操作中。</p><p id="8006" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">esNext</code> —目标特性将包含在下一版本的JavaScript规范中。</p><p id="cb64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从ES6开始，JavaScript版本由年份表示。</p><p id="c73b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ES6与ES2015相同。然后JavaScript开始每年递增地发布新特性。</p><p id="731a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以版本改成了年份。</p><p id="d7ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保存文件更改后，将编译并运行代码。</p><p id="7e3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">生成的代码在<code class="fe ms mt mu mj b">dist</code>文件夹中。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/6daf74e1badeae677cce80a0db529927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NLIP--bEUsDF1Bya"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@christine_siracusa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christine Siracusa</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a60f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为编译设置库文件</h1><p id="e4af" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要启用目标版本中没有的特性，我们可以更改目标。</p><p id="3bb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用以下选项设置<code class="fe ms mt mu mj b">lib</code>编译器选项。</p><p id="5fde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es5</code>、<code class="fe ms mt mu mj b">es2015</code>、<code class="fe ms mt mu mj b">es2016</code>、<code class="fe ms mt mu mj b">es2017</code>、<code class="fe ms mt mu mj b">es2018</code>改变对应JavaScript版本的类型定义文件。</p><p id="1866" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">esnext</code>让我们将提议的附加JavaScript包含到代码中。</p><p id="2293" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">dom</code>包含DOM库。</p><p id="0e6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">dom.iterable</code>为DOM API的添加提供类型信息，并允许在HTML元素上迭代。</p><p id="e8ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">webworker</code>包含web worker特性。</p><p id="f863" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.core</code>包含ES2015推出的主要功能的类型信息。</p><p id="4f6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.collection</code>设置包括<code class="fe ms mt mu mj b">Map</code>和<code class="fe ms mt mu mj b">Set</code>构造器的类型信息。</p><p id="3a33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.generator</code>和<code class="fe ms mt mu mj b">es2015.iterable</code>包括发生器和可重复特征的类型信息。</p><p id="40de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.promise</code> —包括承诺的类型信息。</p><p id="672c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.reflect</code> —包括反映特征的类型信息，以访问属性和原型</p><p id="d115" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">es2015.symbol</code>、<code class="fe ms mt mu mj b">es2015.symbol.wellknown</code> —包括符号的类型信息</p><p id="975d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe ms mt mu mj b">compilerSections</code>部分包含了<code class="fe ms mt mu mj b">lib</code>设置。</p><p id="b70a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="044e" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "compilerOptions": {<br/>    "target": "es5",<br/>    "outDir": "./dist",<br/>    "rootDir": "./src",<br/>    "noEmitOnError": true,<br/>    "lib": ["es2015", "dom", "es2015.collection"]<br/>   }<br/>}</span></pre><h1 id="c4f9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d8e6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了使用我们想要的JavaScript特性，我们必须在protect中包含TypeScript类型定义。</p><p id="40fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以为我们的TypeScript项目选择我们想要的JavaScript版本。</p></div></div>    
</body>
</html>
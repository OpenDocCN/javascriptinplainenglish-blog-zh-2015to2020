<html>
<head>
<title>Basics of showing readable dates with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript显示可读日期的基础知识</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/basics-of-showing-readable-dates-with-javascript-92235ee6ac89?source=collection_archive---------15-----------------------#2020-04-14">https://javascript.plainenglish.io/basics-of-showing-readable-dates-with-javascript-92235ee6ac89?source=collection_archive---------15-----------------------#2020-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a6182cdd40115ea267d1df36b0bb6441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5lJWzUwqV91X8gXR"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@harrisonbroadbent?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Harrison Broadbent</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="2a28" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">转换一个ISO日期很容易，但是人类的心理因素会影响你显示日期的方式</h2></div><p id="9324" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<a class="ae jd" href="http://www.epiloge.com" rel="noopener ugc nofollow" target="_blank"> Epiloge </a>我们使用MongoDB作为我们的通用数据库。在大多数文档中，我们至少有一个包含日期的字段。它通常是一个<code class="fe lr ls lt lu b">created</code>字段或一个<code class="fe lr ls lt lu b">updated</code>字段。有时候我们两者都需要。</p><p id="9c0a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些日期采用ISO格式，例如<em class="lv">2020–04–08t 16:00:00 z</em>，即2020年4月8日下午4点。点击阅读更多关于<a class="ae jd" href="https://www.cryptosys.net/pki/manpki/pki_iso8601datetime.html" rel="noopener ugc nofollow" target="_blank">ISO日期格式的信息。</a></p><p id="adb2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到目前为止一切顺利。在大多数情况下，你想用你的日期来分类你的文件。或者您只想确保知道文档最后一次更新是什么时候——例如，更新您的sitemap.xml。</p><p id="e4f2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您不必向用户显示您在数据库中使用的日期。但是，如果您确实想向用户显示ISO日期，那么helper方法中的最佳策略是什么呢？在本文中，我提供了一种无需插件就能工作的普通JavaScript方法。</p><h1 id="d78f" class="lw lx jg bd ly lz ma mb mc md me mf mg km mh kn mi kp mj kq mk ks ml kt mm mn bi translated">为您的网站创建一个全球可访问的助手方法来转换您的ISO日期</h1><p id="e0c0" class="pw-post-body-paragraph kv kw jg kx b ky mo kh la lb mp kk ld le mq lg lh li mr lk ll lm ms lo lp lq ij bi translated">可读的ISO日期不一定需要使用插件。插件经常会耗尽你部署的应用程序的空间。</p><p id="6bdf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">只需几行JavaScript，你就可以编写一个助手函数来转换你的ISO日期，并让你根据你想在应用程序中显示日期的位置来微调它。这种灵活性的第二部分可能是编写自己的Javascript helper方法来将ISO日期转换为可读文本的更重要的原因。</p><pre class="mt mu mv mw gt mx lu my mz aw na bi"><span id="50fd" class="nb lx jg lu b gy nc nd l ne nf">$_HelperFunctions_setOlderDate: function(oldDate) {<br/>    <br/>   var tempDate = new Date(oldDate);<br/>   var oldTime = Math.round(tempDate.getTime() / 1000);<br/>   var shownDate = '';</span><span id="e647" class="nb lx jg lu b gy ng nd l ne nf">   var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];<br/>                     <br/>   var year = tempDate.getFullYear(); <br/>   var month   = tempDate.getMonth();<br/>   var day     = tempDate.getDate();                 <br/>   shownDate = months[month] + ' ' + day + ', ' + year;    <br/>            <br/>   return showDate;<br/>}</span></pre><p id="e76f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个helper方法接受一个ISO日期，并使用<code class="fe lr ls lt lu b">new Date(oldDate)</code>创建一个date类型的新对象。</p><p id="d4b8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，您可以使用缩写的月份数组(一月、二月等。)或者如果您愿意，也可以使用月份的全名，并通过使用函数<code class="fe lr ls lt lu b">getFullYear()</code>、<code class="fe lr ls lt lu b">getMonth()</code>和<code class="fe lr ls lt lu b">getDate()</code>组合成一个可读的字符串。</p><p id="7648" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意，getMonth()返回一个从0到11的整数，可以用来从数组中选择月份。</p><figure class="mt mu mv mw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/b5635e1eb931d5c776a891ee455776b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZXUockF9zDU2Mpjksr-2w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Screenshot from <a class="ae jd" href="http://www.epiloge.com" rel="noopener ugc nofollow" target="_blank">Epiloge </a>showing dates in a list — modified based on how old the date is</figcaption></figure><h1 id="1baa" class="lw lx jg bd ly lz ma mb mc md me mf mg km mh kn mi kp mj kq mk ks ml kt mm mn bi translated">修改最近日期的助手方法</h1><p id="9db0" class="pw-post-body-paragraph kv kw jg kx b ky mo kh la lb mp kk ld le mq lg lh li mr lk ll lm ms lo lp lq ij bi translated">有些情况下，向用户显示发布或更新内容的日期，如<em class="lv">2020年4月8日</em>并不是首选方式。</p><p id="a87e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Epiloge的情况下，我们有文章和项目，但也有评论，可以在几分钟或几小时前发布。在这种情况下，你可能想切换到一种读者格式，说明帖子或评论是多久前发表的…或者如果你不想这样做，只需写“今天”而不是当前日期。</p><pre class="mt mu mv mw gt mx lu my mz aw na bi"><span id="cb83" class="nb lx jg lu b gy nc nd l ne nf">$_HelperFunctions_setOlderDate: function(oldDate) {<br/>    <br/>   var d = new Date(); <br/>   var currentTime = Math.round(d.getTime() / 1000);   <br/>   var tempDate = new Date(oldDate);<br/>   var oldTime = Math.round(tempDate.getTime() / 1000);<br/>   var showTimeAgo = false; var shownDate = '';</span><span id="28bc" class="nb lx jg lu b gy ng nd l ne nf">   var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];<br/>   if ((currentTime - oldTime) &lt; (86400*7)) showTimeAgo = true;<br/>                       <br/>   var year    = tempDate.getFullYear(); <br/>   var month   = tempDate.getMonth();<br/>   var day     = tempDate.getDate();                 <br/>   shownDate = months[month] + ' ' + day + ', ' + year;    <br/>            <br/>   return [showTimeAgo, shownDate];<br/>}</span></pre><p id="797a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个修改后的helper方法查看日期是否不超过7天。如果是这样，它返回一个变量<code class="fe lr ls lt lu b">showTimeAgo</code>,向我们表明我们不想显示2020年4月8日这样的日期，而是显示一串5天前的<em class="lv"/>。</p><p id="23bf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在前端使用Vue.js的Epiloge，我们使用一个名为<a class="ae jd" href="https://www.npmjs.com/package/vue-timeago" rel="noopener ugc nofollow" target="_blank"> VueTimeAgo </a>的便捷插件来显示不超过7天的日期。</p><p id="2e76" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以通过安装VueTimeAgo并将其添加到您的Vue应用程序中的main.js来添加它。如果你想支持英语以外的语言，使用这样的插件是非常明智的。</p><pre class="mt mu mv mw gt mx lu my mz aw na bi"><span id="0fd2" class="nb lx jg lu b gy nc nd l ne nf">//in console, install vue-timeago<br/>npm i vue-timeago</span><span id="1166" class="nb lx jg lu b gy ng nd l ne nf">//in your main.js, add VueTimeago<br/>import VueTimeago from 'vue-timeago'<br/>Vue.use(VueTimeago, {  <br/> locale: undefined, // Default locale  <br/>});</span></pre><p id="4edf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，如果你不想使用任何插件(或者找不到适合你的前端框架的插件)或者只是想保持你的灵活性，你可以写你自己的JavaScript代码。</p><p id="71f9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用户不一定需要比a .最近一小时发布的，B小时前发布的，c .一天前发布的或D天前发布的更多的信息。</p><p id="9fea" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以修改您的帮助器方法，使其包含以下选项:</p><pre class="mt mu mv mw gt mx lu my mz aw na bi"><span id="29ac" class="nb lx jg lu b gy nc nd l ne nf">$_HelperFunctions_setOlderDate: function(oldDate) {<br/>   ...            <br/>   shownDate = months[month] + ' ' + day + ', ' + year;  <br/>   var difference = currentTime - oldTime;<br/>   var days = 0; var hours = 0;<br/>   if (difference &lt; (86400*7)) {<br/>      days = Math.trunc(difference/86400);<br/>      if (days &gt; 1) shownDate = days + ' days ago';<br/>      if (days == 1) shownDate = 'one day ago';<br/>      if (days == 0) {<br/>         hours = Math.trunc(difference/3600);<br/>         if (hours &gt; 1) shownDate = hours + ' hours ago';<br/>         if (hours == 0) shownDate = 'less than an hour ago';<br/>      }<br/>   }           <br/>   return shownDate;<br/>}</span></pre><p id="d34a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe lr ls lt lu b">Math.trunc</code>是一个Javascript方法，它截断除法的余数。如果你用5除以3，这个方法会得到1的结果，2的余数被切掉。</p><p id="8e17" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该方法覆盖了默认的<code class="fe lr ls lt lu b">shownDate</code>变量，我们已经将它设置为一个日期，比如2020年4月8日，取而代之的是返回一个输出，比如5天前的<em class="lv"/>。</p><h1 id="d38f" class="lw lx jg bd ly lz ma mb mc md me mf mg km mh kn mi kp mj kq mk ks ml kt mm mn bi translated">还有一个提示，如果你在你的网页上使用了一年的版权免责声明</h1><p id="b4bb" class="pw-post-body-paragraph kv kw jg kx b ky mo kh la lb mp kk ld le mq lg lh li mr lk ll lm ms lo lp lq ij bi translated">很多网站都有类似<em class="lv"> Copyright 2020 Epilogue这样的内容。保留所有权利。在他们的网站上。</em>在页脚或其他地方。</p><p id="f10b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您还没有这样做，请使用一个简单的助手方法来自动更新当前年份，如下所示。</p><pre class="mt mu mv mw gt mx lu my mz aw na bi"><span id="87dc" class="nb lx jg lu b gy nc nd l ne nf">$_HelperFunctions_getCurrentYear: function() {<br/>    var date = new Date();<br/>    var currentYear = date.getFullYear();<br/>    return currentYear;<br/>}</span></pre><h2 id="96ff" class="nb lx jg bd ly ni nj dn mc nk nl dp mg le nm nn mi li no np mk lm nq nr mm ns bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="66e1" class="pw-post-body-paragraph kv kw jg kx b ky mo kh la lb mp kk ld le mq lg lh li mr lk ll lm ms lo lp lq ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到<a class="ae jd" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank"><strong class="kx jh">submissions@javascriptinplainenglish.com</strong></a>给我们，我们会把你添加为作者。</p><p id="15c0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还推出了三种新的出版物！请关注我们的新出版物:<a class="ae jd" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kx jh">AI in Plain English</strong></a><a class="ae jd" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kx jh">UX in Plain English</strong></a><a class="ae jd" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kx jh">Python in Plain English</strong></a><strong class="kx jh"/>——谢谢，继续学习！</p></div></div>    
</body>
</html>
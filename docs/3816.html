<html>
<head>
<title>Tinder Style Movie Night Picker with VueJs, Vuetify, VueFire, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火绒风格的电影夜采摘与VueJs，Vuetify，VueFire，和Firebase</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-vuetify-vuefire-and-firebase-part-2-authentication-6969c27cdad0?source=collection_archive---------19-----------------------#2020-10-26">https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-vuetify-vuefire-and-firebase-part-2-authentication-6969c27cdad0?source=collection_archive---------19-----------------------#2020-10-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a713" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第2部分—身份验证</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/715c21c3c402188d257c48deedf09614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ua8pJN43C6Lsf65Ms7uFLw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/igorovsyannykov-6222956/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2974645" rel="noopener ugc nofollow" target="_blank">Igor Ovsyannykov</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2974645" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="d5d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" href="https://medium.com/javascript-in-plain-english/tinder-style-movie-night-picker-with-vuejs-vuetify-vuexfire-and-firebase-part-1-app-setup-4f08840eef11" rel="noopener">第1部分</a>中，我们建立了我们的项目，以包括我们开发所需要的一切。现在，我们实际上可以开始编写应用程序了。我们首先需要的是身份认证。我们将使用<a class="ae kv" href="https://firebase.google.com/products/auth" rel="noopener ugc nofollow" target="_blank"> Firebase认证</a>来认证我们的用户。</p><h1 id="3c67" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Firebase身份验证设置</h1><p id="b069" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要设置Firebase身份验证，请前往firebase.google.com的<a class="ae kv" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"/>，选择您在第一部分中设置的项目，然后单击左侧菜单中的身份验证。然后，单击登录方法选项卡，选择电子邮件/密码，并启用它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/ba78644e51e98a762c4505707e749b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X7jfjAxLD8LOaBAsxsnOnQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Firebase Email/Password Authentication</figcaption></figure><h1 id="72e0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">向Vue添加Firebase身份验证</h1><p id="04d3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">既然我们已经在Firebase中设置了启用的电子邮件/密码验证，我们可以在Vue中设置我们的验证页面。为了在我们的项目中实现这一点，我们需要两个新的视图。一个用于注册，另一个用于登录。</p><h2 id="b8dc" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">签约雇用</h2><p id="fea9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们将从注册过程开始。为此，转到src/views并创建一个名为SignUp.vue的新文件。在<em class="nc"> v-card </em>内部，我们将创建一个<em class="nc"> v-form </em>用于注册。该注册表单将包括三个文本字段，分别用于名称、电子邮件和密码。我们还将在卡<em class="nc"> </em>中添加一个<em class="nc"> v-overlay </em>，以便在我们处理注册时显示一个加载图标。最后，我们将添加一个v-alert，以防Firebase Auth返回错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="07d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Vue Options API数据属性中，我们将创建绑定到每个文本字段、覆盖图和警告错误消息的v-model的属性。我们还将创建验证，并将其绑定到文本字段和表单作为一个整体。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">SignUp.vue Options API data properties</figcaption></figure><p id="81ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将创建一个注册方法。注册成功后，我们将使用从Firebase Auth返回的用户文档id向用户集合添加一条记录，并将用户信息存储在我们的Vuex存储中。要实现这一点，请导航到src/store文件夹。创建一个名为modules的新文件夹。然后创建一个名为user.js的文件，并添加以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Vuex store — user module</figcaption></figure><p id="8e50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以将它作为一个模块添加到src/store/index.js文件中。为此，在顶部导入用户文件，找到modules标记，然后将其添加到modules对象中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Vuex Store — User Module Addition</figcaption></figure><p id="18e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们关注实际的注册代码。回到src/views/SignUp.vue，在脚本标记的顶部从main.js导入firebase和db。然后，在options API中用一个名为<em class="nc">signuvemailandpassword</em>的异步函数创建一个方法属性，并添加以下代码<em class="nc"> : </em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">signUpWithEmailAndPassword</figcaption></figure><h2 id="633a" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">签到</h2><p id="5719" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们已经完成了注册过程，我们可以从登录页面开始。在src/views中创建一个名为SignIn.vue的新文件。该代码基本上与SignUp.vue相同。因此，复制SignUp.vue中的所有内容并将其复制到SignIn.vue中。</p><p id="20ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后在模板中，删除name字段。在电子邮件和密码字段中，将验证更改为仅必填。接下来，删除data属性中的name以及除必需验证之外的所有验证。然后我们将把<em class="nc">sign up email and password</em>方法的名称改为<em class="nc">sign in with email and password</em>，并对其进行编辑以调用正确的Firebase身份验证方法进行登录。此外，我们将获取用户并在存储中设置用户数据，而不是向用户中插入记录。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="fb4a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">路由器</h1><p id="f108" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们有了登录和注册页面，我们需要将它们添加到我们的路由器。为此，打开src/router/index.js。在那里，我们将删除/about路由并添加两个组件。我们将使我们的登录页面成为默认路径。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Vue Router</figcaption></figure><h2 id="777b" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">认证路由保护</h2><p id="ed99" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了锁定我们的路由，我们需要实现一个身份验证防护，如果用户没有通过身份验证，它会将用户重定向到登录页面。首先，我们将为路由器添加一个名为authGuard的新功能。这将在路线导航之前检查我们的商店中是否有有效的用户。然后，我们将为每个需要身份验证的路由添加一个beforeEnter属性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">VueJs Route Guards</figcaption></figure><h1 id="c299" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">认证陷阱</h1><p id="86a2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">由于我们使用商店作为我们的路由保护检查，如果用户刷新浏览器，我们会丢失商店中的数据。幸运的是，我们可以使用一个名为<a class="ae kv" href="https://www.npmjs.com/package/vuex-persist" rel="noopener ugc nofollow" target="_blank"> vuex-persist </a>的包来通过刷新来持久化数据。要安装它，请在项目根目录中打开一个终端并运行以下命令:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="7d14" class="mq lt iq ng b gy nk nl l nm nn">npm install vuex-persist</span></pre><p id="7a63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来转到vue.config.js并将其添加到transpileDependencies中:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="b4d5" class="mq lt iq ng b gy nk nl l nm nn">module<em class="nc">.</em>exports = { <br/> transpileDependencies: ['vuetify', <strong class="ng ir">'vuex-persist'</strong>]<br/>}</span></pre><p id="7a10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将把它添加到我们的商店。回到src/store/index.js，导入包，初始化它，并将其添加到store export:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="24c7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">视频教程</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no ne l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Video Tutorial</figcaption></figure><h1 id="1ece" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="fa7e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们已经在应用程序中建立了简单的身份验证。这将允许我们保持我们的Firestore安全，只有登录用户和锁定路线。在第三部中，我们将开始为我们的电影《夜盗》添加伙伴。</p></div></div>    
</body>
</html>
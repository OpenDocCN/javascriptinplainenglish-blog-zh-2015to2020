<html>
<head>
<title>Let’s flatten that multi-dimensional array</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们展平多维数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-flatten-that-multi-dimensional-array-79787a9b6d13?source=collection_archive---------4-----------------------#2020-02-28">https://javascript.plainenglish.io/lets-flatten-that-multi-dimensional-array-79787a9b6d13?source=collection_archive---------4-----------------------#2020-02-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ae24" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">解决JavaScript开发人员经常遇到的一个面试问题</h2></div><p id="bc18" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">大家好，你们好吗？这是我关于2020年的第一篇文章，今天让我们来做一些解决问题的练习。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/ddc36cc3f45167654dceb2339dc2ad17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKPK8mAD6FdHPLbAN1mbFA.png"/></div></div></figure><p id="cf5c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是JavaScript开发人员经常遇到的面试问题之一。我们将在这篇文章中讨论这个问题和解决方案。</p><h2 id="030b" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">问题陈述:</h2><p id="81c5" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">编写一个函数来展平一个多维数组(深度可以达到n层),结果不应该包含任何空值/未定义的值。</p><h2 id="e312" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">样本输入:</h2><p id="af1c" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">var testArray = [1，2，null，[4，undefined，[11，10]]，6，[7，null，0]，null，9]；</p><h2 id="4375" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">预期产出:</h2><pre class="kz la lb lc gt mi mj mk ml aw mm bi"><span id="9636" class="lk ll in mj b gy mn mo l mp mq">[1, 2, 4, 11, 10, 6, 7, 0, 9]</span></pre><h2 id="0060" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">解决方案1:使用“for”循环和“递归”</h2><pre class="kz la lb lc gt mi mj mk ml aw mm bi"><span id="36b3" class="lk ll in mj b gy mn mo l mp mq">// the utility function to flatten input array</span><span id="0af0" class="lk ll in mj b gy mr mo l mp mq">function flattenArray(arr) {  <br/>  let result = [];    </span><span id="66bb" class="lk ll in mj b gy mr mo l mp mq">  for(let index = 0; index &lt; arr.length; index++) {    <br/>     const currentValue = arr[index]; <br/>     if(Array.isArray(currentValue)) {<br/>       result = [...result, ...(flattenArray(currentValue))];</span><span id="45a1" class="lk ll in mj b gy mr mo l mp mq">       // we can also use concat method to achieve the same result<br/>       // result = result.concat(flattenArray(currentValue));</span><span id="a8b4" class="lk ll in mj b gy mr mo l mp mq">     } else {      <br/>       if(currentValue != null) {        <br/>          result.push(currentValue);      <br/>       }<br/>    }<br/>  }<br/>  return result;  <br/>} </span><span id="1b34" class="lk ll in mj b gy mr mo l mp mq"><br/>// use the code below to execute and test the functionality</span><span id="5120" class="lk ll in mj b gy mr mo l mp mq">const testArray = [1, 2, null, [4, undefined, [11, 10]], 6, [7, null, 0], null, 9]; </span><span id="3f5f" class="lk ll in mj b gy mr mo l mp mq">const result = flattenArray(testArray); </span><span id="ccee" class="lk ll in mj b gy mr mo l mp mq">console.log(result);  // [1, 2, 4, 11, 10, 6, 7, 0, 9]</span></pre><p id="9438" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们分解实现来理解这种方法:</p><ol class=""><li id="af0c" class="ms mt in ke b kf kg ki kj kl mu kp mv kt mw kx mx my mz na bi translated">我们创建了效用函数<code class="fe nb nc nd mj b">flattenArray</code>，它将多维数组作为输入，并返回没有空/未定义项的展平数组作为输出。</li><li id="40a5" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">创建一个名为<code class="fe nb nc nd mj b">result</code>的数组，它将包含要返回的最终数组。</li><li id="d2c8" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">对输入数组进行循环，以迭代每一项。为了简单起见，我在这里使用了<code class="fe nb nc nd mj b">for</code>循环。我们也可以使用<code class="fe nb nc nd mj b">forEach</code>循环或<code class="fe nb nc nd mj b"><a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank">reduce</a></code>(数组原型中的高阶函数)来达到同样的结果。</li><li id="bcc9" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">对于当前数组的每一项，我们需要首先检查该元素是否是一个数组？在上面的例子中，<code class="fe nb nc nd mj b"><a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray" rel="noopener ugc nofollow" target="_blank">Array.isArray</a></code>功能同样用于检查。</li><li id="9538" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">如果当前元素不是数组，我们可以在<code class="fe nb nc nd mj b">null</code>检查后将该元素推到<code class="fe nb nc nd mj b">result</code>数组上。记住，我们需要从数组中消除任何空值/未定义的值。如果您注意到，在代码中，我对空值(currentValue！= null)。这样做是有意的，以便从结果中消除空值和未定义的值。</li><li id="3440" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">但是如果当前元素是一个数组呢？我们将不得不再次执行第3步到第5步，以将这个新数组的单个项目推送到现有的结果数组中。这可以通过使用一个叫做<a class="ae nj" href="https://javascript.info/recursion" rel="noopener ugc nofollow" target="_blank">递归</a>的概念来实现(其中一个函数调用它自己，直到一个条件被满足)。</li><li id="0bda" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">由于递归函数也将返回一个项目数组，我们现在将把递归函数的结果与已经存在的结果数组连接起来。这将确保两个不同的数组得到合并。这个逻辑会一直持续到<em class="nk"> n级</em>(这里<em class="nk"> n </em>是输入数组的深度)。我已经使用了<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank"> ES6扩展操作符</a>来实现相同的结果。</li><li id="80a8" class="ms mt in ke b kf ne ki nf kl ng kp nh kt ni kx mx my mz na bi translated">最后，当输入数组的所有级别的项连接成一个一维数组时，该结果从函数返回。这将是我们最期待、最珍贵的结果，也是我们为之编码的结果。</li></ol><p id="8a70" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，如果你觉得代码太多，JavaScript有一个更简单的解决方案。下面介绍第二种解决方案。</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><h2 id="fe93" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">解决方案2:使用<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" rel="noopener ugc nofollow" target="_blank"> Array.prototype.flat() </a></h2><p id="cf01" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我们在数组原型上有一个<strong class="ke io"> flat </strong>方法来展平数组，我们可以提供一个可选参数来决定数组应该展平的深度。</p><p id="e254" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">尽管我们仍然需要编写逻辑来从结果中删除空/未定义的项，但它确实去掉了所有的循环和递归代码，只是为了使数组变平。</p><p id="92dd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，它为第一级深度展平数组。请在下面找到一个例子。</p><pre class="kz la lb lc gt mi mj mk ml aw mm bi"><span id="3831" class="lk ll in mj b gy mn mo l mp mq">const testArray = [1, 2, null, [4, undefined, [11, 10]], 6, [7, null, 0], null, 9];</span><span id="506d" class="lk ll in mj b gy mr mo l mp mq">console.log(testArray.flat()) </span><span id="d25e" class="lk ll in mj b gy mr mo l mp mq">// results as below<br/>// [1, 2, null, 4, undefined, [11, 10], 6, 7, null, 0, null, 9]</span></pre><p id="931e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们不知道数组的深度，希望它展平到第n层，那么我们可以传递<strong class="ke io"> Infinity </strong>作为深度参数。请参见下面的示例:</p><pre class="kz la lb lc gt mi mj mk ml aw mm bi"><span id="7301" class="lk ll in mj b gy mn mo l mp mq">const testArray = [1, 2, null, [4, undefined, [11, 10]], 6, [7, null, 0], null, 9];</span><span id="a9cb" class="lk ll in mj b gy mr mo l mp mq">console.log(testArray.flat(Infinity))</span><span id="f4d8" class="lk ll in mj b gy mr mo l mp mq">// results as below<br/>// [1, 2, null, 4, undefined, 11, 10, 6, 7, null, 0, null, 9]</span></pre><p id="64a4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后我们可以使用<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank">过滤器</a>从结果中删除所有空的/未定义的条目。PFB最终代码:</p><pre class="kz la lb lc gt mi mj mk ml aw mm bi"><span id="9f58" class="lk ll in mj b gy mn mo l mp mq">const testArray = [1, 2, null, [4, undefined, [11, 10]], 6, [7, null, 0], null, 9];</span><span id="9f3b" class="lk ll in mj b gy mr mo l mp mq">const result = testArray.flat(Infinity).filter(val =&gt; val != null);</span><span id="acb6" class="lk ll in mj b gy mr mo l mp mq">console.log(result);</span><span id="23b3" class="lk ll in mj b gy mr mo l mp mq">// [1, 2, 4, 11, 10, 6, 7, 0, 9]</span></pre><p id="188f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">注意</strong>:在开始在生产代码中使用它之前，您可能想要检查浏览器对此的支持。查看以下链接了解更多详细信息—<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Array/flat</a></p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><h2 id="67d6" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">Github链接</h2><p id="1227" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">FWIW，我也在<a class="ae nj" href="https://gist.github.com/anuk79/58da1549aa0827ea6a74cd78c10868cd" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/anuk 79/58da 1549 aa 0827 ea 6a 74 CD 78 c 10868 CD</a>添加了上述代码示例</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><h2 id="da4a" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated">结论</h2><p id="c641" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">这个问题陈述可以有多种解决方案。虽然我已经解释了其中的两个问题，但我想知道您将采用什么方法来解决这个问题。请在评论中告诉我你的解决方案/想法。</p><h2 id="1541" class="lk ll in bd lm ln lo dn lp lq lr dp ls kl lt lu lv kp lw lx ly kt lz ma mb mc bi translated"><strong class="ak">简明英语团队的一份说明</strong></h2><p id="d091" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">你知道我们有四种出版物吗？给他们一个关注来表达爱意:<a class="ae nj" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="ke io">JavaScript in Plain English</strong></a><a class="ae nj" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ke io">AI in Plain English</strong></a><a class="ae nj" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ke io">UX in Plain English</strong></a><a class="ae nj" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ke io">Python in Plain English</strong></a><strong class="ke io"/>——谢谢，继续学习！</p><p id="dd6b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae nj" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ke io">submissions @ plain English . io</strong></a><strong class="ke io"/>，附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
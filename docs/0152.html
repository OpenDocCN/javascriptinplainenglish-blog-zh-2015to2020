<html>
<head>
<title>Building Components with Angular and Storybook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用角和故事书构建组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/storybook-for-angular-components-with-markdown-support-72950cc3d9ee?source=collection_archive---------0-----------------------#2019-05-22">https://javascript.plainenglish.io/storybook-for-angular-components-with-markdown-support-72950cc3d9ee?source=collection_archive---------0-----------------------#2019-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e243" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">加上对Markdown的支持！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/58bab1b93784b4223ca5609ff744e0ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1bJuD1D5G2FvWP5IVyyFQ.png"/></div></div></figure><p id="7701" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个开发人员的噩梦都是保持文档更新，对吗？永远不会有什么灵丹妙药可以让这种需求消失，但是有一些工具可以让它变得更加令人愉快……故事书就是其中之一。</p><p id="67ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">故事书是用React写的，但是也有对Angular和Vue的支持。在这篇文章中，我将探讨他们对Angular的支持。</p><blockquote class="ln lo lp"><p id="3720" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><a class="ae lu" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>是一款开源工具，用于独立开发React、Vue和Angular的UI组件。它使构建令人惊叹的ui变得有条理和高效。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lv"><img src="../Images/002890b4cb97393fb836f592a6968e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8d_x1A1ZPAPlT-t6fmF9g.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">Storybook UI</figcaption></figure><p id="1870" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Storybook最大的优点之一是能够独立配置组件。将它们完全<em class="lq">脱离应用程序的上下文</em>可以让你思考和测试<em class="lq">的不同排列方式</em>组件在不同属性下的外观和行为等。这也使得检测那些棘手的边缘情况变得更加容易。</p><p id="74cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Storybook还提供了一个漂亮的平台来记录和展示每个用例，并与其他开发人员分享。</p><h1 id="b57b" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">创建一些角度组件</h1><p id="d30f" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">我在使用React时使用了Storybook，它是一个很好的工具。我最近在Angular中实现了它，我想分享一下我是如何配置它的。我将从头开始创建一个新的<strong class="kt ir"> ng </strong>项目，并完成设置:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="a4b9" class="nc mb iq my b gy nd ne l nf ng">ng new ng-storybook-markdown</span></pre><p id="b48f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们添加一些组件，我们可以在Storybook中记录这些组件:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="160a" class="nc mb iq my b gy nd ne l nf ng">ng generate component componentA<br/>ng generate component componentB</span></pre><p id="2f1c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于绝大多数用例，角度<strong class="kt ir">组件</strong>将基于<strong class="kt ir">输入</strong>参数进行渲染。这些是在组件级别定义的，通常告诉组件它需要知道什么，以便呈现它自己。组件还可以使用<strong class="kt ir">输出</strong>来分发事件，然后输出可以告诉父组件或应用服务在用户与组件交互(通常以事件的形式)时做什么。</p><p id="0441" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让组件对外部发生的事情保持沉默是一个好的设计。组件不需要关心周围发生的任何其他事情，除了应用程序告诉它们的内容(输入)和它们需要根据事件告诉应用程序的内容(输出)。</p><p id="aaeb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">component-a . component . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d672" class="nc mb iq my b gy nd ne l nf ng">import { Component, OnInit, <strong class="my ir">Input, Output, EventEmitter</strong> } from '@angular/core';</span><span id="8ab2" class="nc mb iq my b gy nh ne l nf ng">  @Component({<br/>    selector: 'app-component-a',<br/>    templateUrl: './component-a.component.html',<br/>    styleUrls: ['./component-a.component.scss']<br/>  })</span><span id="7b17" class="nc mb iq my b gy nh ne l nf ng">  export class ComponentAComponent implements OnInit {</span><span id="d113" class="nc mb iq my b gy nh ne l nf ng">   <strong class="my ir"> @Input() name: string;<br/>    @Output() myEvent: EventEmitter&lt;any&gt; = new EventEmitter();</strong></span><span id="399e" class="nc mb iq my b gy nh ne l nf ng">    constructor() { }<br/>    <br/>    ngOnInit() {</span><span id="ff92" class="nc mb iq my b gy nh ne l nf ng">  }</span><span id="7655" class="nc mb iq my b gy nh ne l nf ng">}</span></pre><p id="531a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在组件有了一个name值和一个它可以触发的事件。在我们的模板中使用这些很简单:</p><p id="8320" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">component-a . component . html:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="4ad7" class="nc mb iq my b gy nd ne l nf ng">&lt;p&gt;hello, my name is <strong class="my ir">{{name}}</strong>!&lt;/p&gt;<br/>&lt;button (click)="<strong class="my ir">myEvent.next()</strong>"&gt;Click me please&lt;/button&gt;</span></pre><p id="0908" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住<strong class="kt ir"> myEvent </strong>是可观察的，所以我们需要调用<strong class="kt ir"> next() </strong>。</p><p id="8cfc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有了一些组件，让我们开始运行Storybook并创建一些故事。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9c39684006836ad2eb0904e5f3ac03dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/0*M1hZcpfh7MTyvvqj.jpg"/></div></figure><h1 id="7d31" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">为角度配置故事书</h1><p id="7f24" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">首先，让我们通过运行以下命令向我们的项目添加Angular storybook支持:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="71dd" class="nc mb iq my b gy nd ne l nf ng">npx -p <a class="ae lu" href="http://twitter.com/storybook/cli" rel="noopener ugc nofollow" target="_blank">@storybook/cli</a> sb init --type angular</span></pre><p id="d6db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">如果你卡住了，这里有一个像样的手工演练</em><a class="ae lu" href="https://storybook.js.org/docs/guides/guide-angular/" rel="noopener ugc nofollow" target="_blank"><em class="lq"/></a><em class="lq">。</em></p><p id="9e2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此命令应该安装所有必需的依赖项，并为Angular配置storybook，包括对Typescript的支持。<em class="lq">赢家！</em></p><p id="552a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们来看看重要的部分:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/88a3df5dcd1952ce49ed593f9392a910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ja3TmaR4DUgMuLDuer-hUA.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">.storybook</figcaption></figure><p id="e69c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有的配置都保存在<strong class="kt ir">中。故事书</strong>目录。我们将在这里介绍一些选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/c19268f2492f2d64f09f1a20164c2692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riuGJg6cb340fe-mZ2hiew.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">src/stories</figcaption></figure><p id="f7b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将把我们的“故事”添加到<strong class="kt ir"> src/stories </strong>目录中。你会看到一个名为<strong class="kt ir"> index.stories.ts </strong>的例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/a79f06b115ae97e1b42df826acdce7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p2tV7FlbgfQ3KTVRkNo64A.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk">package.json</figcaption></figure><p id="ee5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Storybook也为我们创建了两个方便的脚本。一个用于启动本地开发实例，另一个用于将我们的故事书构建为静态HTML文件。</p><p id="a209" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们通过运行<code class="fe nm nn no my b">npm run storybook</code>并连接到<code class="fe nm nn no my b">http://localhost:6006</code>来启动本地dev实例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/950207a85d6d490640e317d8e3465af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*ONZqU9ODg31umNB5.png"/></div></figure><h1 id="ecc8" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">创作一些故事书故事</h1><p id="ed70" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">让我们在<strong class="kt ir"> src/stories </strong>中添加一个名为<strong class="kt ir"> component-a.stories.ts </strong>的新文件。Storybook将在该目录中查找任何以<strong class="kt ir"> .stories.ts </strong>结尾的文件，并尝试将它们作为故事加载。</p><p id="01c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在下面的示例中，我们创建了3个故事，每个故事都有一个不同的名称属性，映射到组件输入:</p><p id="756b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/component-a-stories . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="874f" class="nc mb iq my b gy nd ne l nf ng">import { storiesOf } from '@storybook/angular';</span><span id="06b9" class="nc mb iq my b gy nh ne l nf ng">import { ComponentAComponent } from '../../src/app/component-a/component-a.component';</span><span id="31eb" class="nc mb iq my b gy nh ne l nf ng">storiesOf('Component A', module)<br/>  .add('Chris', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Chris',<br/>    },<br/>  }))<br/>  .add('Jane', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Jane',<br/>    },<br/>  }))<br/>  .add('Joe', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Joe',<br/>    },<br/>  }));</span></pre><p id="063b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是事件呢？ Storybook提供了<strong class="kt ir">动作</strong>，可以作为事件触发，映射到角度分量输出:</p><p id="c2eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/component-a-stories . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="7a4a" class="nc mb iq my b gy nd ne l nf ng">import { storiesOf } from '@storybook/angular';<br/><strong class="my ir">import { action } from '@storybook/addon-actions';</strong></span><span id="b14c" class="nc mb iq my b gy nh ne l nf ng">import { ComponentAComponent } from '../../src/app/component-a/component-a.component';</span><span id="833e" class="nc mb iq my b gy nh ne l nf ng">storiesOf('Component A', module)<br/>  .add('Chris', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Chris',<br/><strong class="my ir">      myEvent: action('Hello Chris!')</strong><br/>    },<br/>  }))<br/>  .add('Jane', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Jane',<br/><strong class="my ir">      myEvent: action('Hello Jane!')</strong><br/>    },<br/>  }))<br/>  .add('Joe', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Joe',<br/><strong class="my ir">      myEvent: action('Hello Joe!')</strong><br/>    },<br/>  }));</span></pre><p id="7f83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">触发的动作随后在故事书用户界面中可视化:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/94977286a73449092c875848359859e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NkuzO0s78TllMzVBA_CkzA.png"/></div></div></figure><p id="6354" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的场景是基本的，如果一个组件有额外的需求，比如一个服务或者一个外部依赖，会发生什么，Storybook能处理这些吗？</p><p id="d336" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然可以。类似于编写模块或单元测试，你可以通过<strong class="kt ir">导入</strong>和<strong class="kt ir">提供者</strong>进入你的故事:</p><p id="9e8b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/component-a-stories . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="a7ce" class="nc mb iq my b gy nd ne l nf ng">storiesOf('Component A', module)<br/>  .add('Chris', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Chris',<br/>      myEvent: action('Hello Chris!')<br/>    },<br/><strong class="my ir">    imports: [ MyExampleModule ], <br/>    providers: [ MyExampleService ]</strong><br/>  }))<br/>  .add('Jane', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Jane',<br/>      myEvent: action('Hello Jane!')<br/>    },<br/><strong class="my ir">    imports: [ MyExampleModule ], <br/>    providers: [ MyExampleService ]</strong><br/>  }))<br/>  .add('Joe', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Joe',<br/>      myEvent: action('Hello Joe!')<br/>    },<br/><strong class="my ir">    imports: [ MyExampleModule ], <br/>    providers: [ MyExampleService ]</strong><br/>  }));</span></pre><p id="0bb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">故事的组成是在JSON中，所以你可以在如何组织它们上有创造性。</p><p id="c7a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您发现自己在每个故事中声明了相同的导入和提供者，您可以添加一个装饰器来将它们添加到模块中的所有故事中:</p><p id="6cbf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/component-a-stories . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="6261" class="nc mb iq my b gy nd ne l nf ng">import { storiesOf, <strong class="my ir">moduleMetadata</strong> } from '@storybook/angular';<br/>...</span><span id="4b8d" class="nc mb iq my b gy nh ne l nf ng">storiesOf('Component A', module)<br/><strong class="my ir">  .addDecorator(<br/>    moduleMetadata({<br/>      imports: [ MyExampleModule ],<br/>      providers: [ MyExampleService ]<br/>    }),<br/>  )</strong><br/>  .add('Chris', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Chris',<br/>      myEvent: action('Hello Chris!')<br/>    }<br/>  }))<br/>  .add('Jane', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Jane',<br/>      myEvent: action('Hello Jane!')<br/>    }<br/>  }))<br/>  .add('Joe', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Joe',<br/>      myEvent: action('Hello Joe!')<br/>    }<br/>  }));</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/803f023e9a71625b07de17e1b9c0f929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*YR74IMIXLekyT9jf.jpg"/></div></figure><h1 id="7750" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">添加降价支持</h1><p id="350d" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">Storybook的一个重要特性是它支持文档的降价。能够在源代码控制中记录组件和版本，并在Storybook干净的UI中呈现它们是一个很大的好处。</p><blockquote class="ln lo lp"><p id="15a6" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Markdown" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> Markdown </strong> </a>是一种轻量级标记语言，具有纯文本格式语法。它的设计允许它被转换成许多输出格式，但是同名的原始工具只支持HTML。</p></blockquote><p id="5b7f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可能已经注意到故事书用户界面中的“注释”选项卡:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/873a5cefff6fb18ce1a4fb0c1b3599b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6ElQL5hFWG9hOLMTpJD2g.png"/></div></div></figure><p id="0ef5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看使用<a class="ae lu" href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" rel="noopener ugc nofollow" target="_blank"> Markdown </a>格式化文本会涉及到什么。</p><p id="a3b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将创建一个<strong class="kt ir"> notes </strong>目录，放在我的<strong class="kt ir"> stories </strong>目录中，并在那里为<strong class="kt ir"> component-a.notes </strong>添加一个占位符:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="78c7" class="nc mb iq my b gy nd ne l nf ng">cd src/stories/<br/>mkdir notes<br/>cd notes<br/>touch component-a.notes.md</span></pre><p id="6349" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/notes/component-a . notes . MD:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="da51" class="nc mb iq my b gy nd ne l nf ng"><strong class="my ir"># Component A</strong></span><span id="e725" class="nc mb iq my b gy nh ne l nf ng">Some text to go here.</span></pre><p id="879e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们将降价文件导入到我们的故事模块中，并将其分配给我们的每个故事:</p><p id="cb02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">src/stories/component-a-stories . ts:</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="f064" class="nc mb iq my b gy nd ne l nf ng"><strong class="my ir">import * as markdown from './notes/component-a.notes.md';<br/>...</strong></span><span id="2dcc" class="nc mb iq my b gy nh ne l nf ng">storiesOf('Component A', module)<br/>  .addDecorator(<br/>    moduleMetadata({<br/>      imports: [ MyExampleModule ],<br/>      providers: [ MyExampleService ]<br/>    }),<br/>  )<br/>  .add('Chris', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Chris',<br/>      myEvent: action('Hello Chris!')<br/>    }<br/>  })<strong class="my ir">, { notes: { markdown }}</strong>)<br/>  .add('Jane', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Jane',<br/>      myEvent: action('Hello Jane!')<br/>    }<br/>  })<strong class="my ir">, { notes: { markdown }}</strong>)<br/>  .add('Joe', () =&gt; ({<br/>    component: ComponentAComponent,<br/>    props: {<br/>      name: 'Joe',<br/>      myEvent: action('Hello Joe!')<br/>    }<br/>  })<strong class="my ir">, { notes: { markdown }}</strong>);</span></pre><p id="98d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">轰！</em>当你尝试用上面的修改进行编译时，编译器会抱怨说找不到模块…</p><p id="7605" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为它本身不支持作为模块的Markdown文件，因此无法找到它:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="2436" class="nc mb iq my b gy nd ne l nf ng">ERROR in /ng-storybook-markdown/src/stories/component-a.stories.ts<br/>ERROR in /ng-storybook-markdown/src/stories/component-a.stories.ts(4,27):<br/>TS2307: <strong class="my ir">Cannot find module './notes/component-a.notes.md'.</strong></span></pre><p id="6ea0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了解决这个问题，我们需要在<strong class="kt ir">中添加一个名为<strong class="kt ir"> typings.d.ts </strong>的新文件。故事书</strong>文件夹:</p><p id="712a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">。故事书/打字本</em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="f4c8" class="nc mb iq my b gy nd ne l nf ng">declare module '*.md' {<br/>  const content: string;<br/>  export = content;<br/>}</span></pre><p id="edea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们需要告诉TypeScript寻找<strong class="kt ir"> *。参照<strong class="kt ir"> tsconfig.json </strong>中的<strong class="kt ir"> typings.d.ts </strong>文件，将md </strong>文件作为模块:</p><p id="c4a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">。storybook/tsconfig.json: </em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="1f63" class="nc mb iq my b gy nd ne l nf ng">{<br/>  "extends": "../src/tsconfig.app.json",<br/>  "compilerOptions": {<br/>    "types": [<br/>      "node"<br/>    ]<br/>  },<br/>  "exclude": [<br/>    "../src/test.ts",<br/>    "../src/**/*.spec.ts",<br/>    "../projects/**/*.spec.ts"<br/>  ],<br/>  include": [<br/>    "../src/**/*",<br/>    "../projects/**/*"<br/>  ],<br/><strong class="my ir">  "files": [<br/>    "./typings.d.ts"<br/>  ]</strong><br/>}</span></pre><p id="8d5e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">现在我们支持减价笔记了，看看吧！！</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/3e5445b300de8be6f5b5c939edd52969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D8KTfLbZh61NA7gzCjERRg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/5faa4c23802c0f7e48bd2683fcf49320.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*675ki8Ib1_8HyyKD"/></div></figure><h1 id="e9c2" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">配置插件</h1><p id="ad7f" class="pw-post-body-paragraph kr ks iq kt b ku ms jr kw kx mt ju kz la mu lc ld le mv lg lh li mw lk ll lm ij bi translated">Storybook是一个越来越受欢迎的平台，围绕它有一个强大的社区。Storybook还以插件的形式发布了一些附加功能。</p><p id="4841" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">也有开源社区项目支持该平台的新特性，您甚至可以创建自己的项目:</em></p><p id="d053" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有些还没有角撑，所以确保你在得意忘形之前找到它——<a class="ae lu" href="https://github.com/storybooks/storybook/blob/master/ADDONS_SUPPORT.md" rel="noopener ugc nofollow" target="_blank">你可以在这里找到它</a>。</p><div class="nv nw gp gr nx ny"><a href="https://storybook.js.org/addons/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">附件|故事书</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">插件支持高级功能和解锁新的工作流程。由核心维护者和令人惊叹的…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">storybook.js.org</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kp ny"/></div></div></a></div><p id="4e3e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了完成这篇文章，我将逐步添加<strong class="kt ir">视口。</strong></p><blockquote class="ln lo lp"><p id="14f5" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">故事书视窗插件允许你的故事在<a class="ae lu" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>中以不同的尺寸和布局显示。这有助于在Storybook中构建响应组件。</p></blockquote><p id="0aa5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">配置插件非常简单，首先您需要安装附加的依赖项:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="4240" class="nc mb iq my b gy nd ne l nf ng">npm i --save-dev @storybook/addon-viewport</span></pre><p id="59e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后在<strong class="kt ir">增加一行。故事书/插件. js </strong>:</p><p id="2fea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">。故事书/插件. js: </em></p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="807c" class="nc mb iq my b gy nd ne l nf ng">import '@storybook/addon-viewport/register';</span></pre><p id="cc65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">就是这样！</em>现在我们有了<strong class="kt ir">视口</strong>，可以查看各种设备屏幕尺寸的组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/374ac85839218d4b8a861a0d9b63151c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwtd6ikFMfuX7FYA9JUx4g.png"/></div></div></figure><p id="5140" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">一如既往，这是我的Github的工作版本，请欣赏！！:</em></p><div class="nv nw gp gr nx ny"><a href="https://github.com/chriskitson/ng-storybook-markdown" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">Chris kitson/ng-故事书-降价</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">通过在GitHub上创建一个帐户，为Chris kitson/ng-故事书降价开发做出贡献。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">github.com</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om kp ny"/></div></div></a></div><blockquote class="ln lo lp"><p id="27c9" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">谢谢你花时间阅读我的文章。</p></blockquote></div></div>    
</body>
</html>
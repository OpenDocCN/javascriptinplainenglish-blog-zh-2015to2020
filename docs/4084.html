<html>
<head>
<title>Async/await is awesome, but donâ€™t abandon Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Async/awaitå¾ˆæ£’ï¼Œä½†æ˜¯ä¸è¦æ”¾å¼ƒæ‰¿è¯º</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/async-await-is-awesome-but-dont-abandon-promises-f815b3df51dc?source=collection_archive---------6-----------------------#2020-11-15">https://javascript.plainenglish.io/async-await-is-awesome-but-dont-abandon-promises-f815b3df51dc?source=collection_archive---------6-----------------------#2020-11-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="297e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ä»€ä¹ˆæ˜¯JavaScriptæ‰¿è¯ºï¼Ÿæ¯æ¬¡éƒ½æ˜¯ä»£ç å‘èª“è¦å·¥ä½œçš„æ—¶å€™ã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c0d3443818f60dc3707d27ec32c471d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjATL-EAN7xvJf0kjMUh5Q.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Shoutout to <a class="ks kt ep" href="https://medium.com/u/4c5633187eea?source=post_page-----f815b3df51dc--------------------------------" rel="noopener" target="_blank">Cassidy Williams</a> ğŸ˜€</figcaption></figure></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="f958" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒå°†:</p><ul class=""><li id="951f" class="lx ly in ld b le lf lh li lk lz lo ma ls mb lw mc md me mf bi translated">æ‰§è¡Œæ˜‚è´µçš„åŒæ­¥æ“ä½œï¼Œ</li><li id="c447" class="lx ly in ld b le mg lh mh lk mi lo mj ls mk lw mc md me mf bi translated">å¯åŠ¨2ä¸ªAJAXè¯·æ±‚ï¼Œç„¶å</li><li id="b601" class="lx ly in ld b le mg lh mh lk mi lo mj ls mk lw mc md me mf bi translated">æ ¹æ®AJAXå“åº”æ›´æ–°DOMã€‚</li></ul><p id="addd" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">è¿™æ˜¯æ ‡è®°ã€‚</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="1c05" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">ä¸‹é¢æ˜¯å‡½æ•°ã€‚è®©æˆ‘ä»¬ä¹Ÿç”¨<a class="ae mn" href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/measure" rel="noopener ugc nofollow" target="_blank"> Performance API </a>æ¥æµ‹é‡æ¯ä¸ªæ“ä½œçš„æŒç»­æ—¶é—´ï¼Œå®ƒå¯è§†åŒ–äº†Chrome DevToolsæ€§èƒ½æ—¶é—´çº¿ä¸Šæ¯ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶é—´å’ŒæŒç»­æ—¶é—´ã€‚(æ„Ÿè°¢<a class="ae mn" href="https://jsonplaceholder.typicode.com" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder </a>çš„è™šæ‹Ÿç«¯ç‚¹ã€‚)</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="f407" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">ä½ è¿˜åœ¨è¿™é‡Œï¼Ÿå¥½ï¼Œæœ‰è¶£çš„éƒ¨åˆ†æ¥äº†:ä¸º<code class="fe mo mp mq mr b">button</code>ç¼–å†™<code class="fe mo mp mq mr b">onclick</code>å¤„ç†ç¨‹åºã€‚æ—¢ç„¶æ‰€æœ‰é…·å°å­©éƒ½è¿™ä¹ˆåšï¼Œé‚£å°±ç”¨<code class="fe mo mp mq mr b">async</code> / <code class="fe mo mp mq mr b">await</code>å§ã€‚</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="76df" class="mw mx in mr b gy my mz l na nb">async function handleClick() {<br/>   someSyncOperation(); // Expensive sync operation </span><span id="0e52" class="mw mx in mr b gy nc mz l na nb">   const postJson = await fetchPost(); // AJAX request #1</span><span id="bfbf" class="mw mx in mr b gy nc mz l na nb">   const commentsJson = await fetchComments(); // AJAX request #2</span><span id="a389" class="mw mx in mr b gy nc mz l na nb">   appendPostDOM(postJson);<br/>   appendCommentsDOM(commentsJson);<br/>}</span></pre><p id="6447" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">è¿™é‡Œæ˜¯ç‚¹å‡»<code class="fe mo mp mq mr b">button</code>åçš„è¡¨æ¼”æ—¶é—´çº¿ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/578d6f6b9dfb6e12fac8fcb9d1879a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPbydXJik0QO9KfFCcx97g.png"/></div></div></figure><p id="63b1" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/9d5db767fb0039760cba07fcedba0cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Afxib_uy8WZ53t31PLEX1w.png"/></div></div></figure><p id="0ca8" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">æœ‰é“ç†ï¼Œå…³äº<code class="fe mo mp mq mr b">async</code> / <code class="fe mo mp mq mr b">await</code>å¦‚ä½•å°†å¼‚æ­¥ä»£ç å˜æˆé˜»å¡ä»£ç çš„æ–‡ç« å¾ˆå¤šã€‚ä»…ä¾›å‚è€ƒï¼Œå½“å°†ç½‘ç»œèŠ‚æµåˆ°â€œæ…¢3Gâ€æ—¶ï¼Œæ¯ä¸ªæ¡å½¢çº¦ä¸º2ç§’ã€‚</p><p id="7160" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated"><strong class="ld io">æ‰€ä»¥æ€»å…±æ‰§è¡Œæ—¶é—´ä¸º6ç§’ã€‚</strong></p><p id="d716" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">å¥½çš„ã€‚<code class="fe mo mp mq mr b">fetchPost</code>å’Œ<code class="fe mo mp mq mr b">fetchComments</code>å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä½¿ç”¨<code class="fe mo mp mq mr b">await Promise.all</code>ç»„åˆã€‚</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="a84b" class="mw mx in mr b gy my mz l na nb">async function handleClick() {<br/>  someSyncOperation();</span><span id="a0ff" class="mw mx in mr b gy nc mz l na nb">  const [ postJson, commentsJson ] = await Promise.all([<br/>    fetchPost(), <br/>    fetchComments()<br/>  ]);</span><span id="7151" class="mw mx in mr b gy nc mz l na nb">  appendPostDOM(postJson);<br/>  appendCommentsDOM(commentsJson);<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/1b9211a0c3017f42c26e047aa74333a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*37EwgrRI3pE2GHO9axxQpA.png"/></div></div></figure><p id="7464" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated"><strong class="ld io">ç”±äº</strong> <code class="fe mo mp mq mr b"><strong class="ld io">fetchPost</strong></code> <strong class="ld io">å’Œ</strong> <code class="fe mo mp mq mr b"><strong class="ld io">fetchComments</strong></code> <strong class="ld io">å¹¶è¡Œæ‰§è¡Œï¼Œç°åœ¨æ€»æ‰§è¡Œæ—¶é—´ä¸º4ç§’ã€‚</strong></p><p id="0db6" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">å¥½çš„ã€‚ç”±äº<code class="fe mo mp mq mr b">someSyncOperation</code>ä¸ä¾èµ–äºAJAXè¯·æ±‚ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å°†å®ƒç§»åˆ°å‡½æ•°çš„æœ€åä¸€è¡Œæ˜¯å¦ä¼šåŠ å¿«é€Ÿåº¦ã€‚</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="c2f9" class="mw mx in mr b gy my mz l na nb">async function handleClick() {<br/>  const [ postJson, commentsJson ] = await Promise.all([<br/>    fetchPost(), <br/>    fetchComments()<br/>  ]);</span><span id="31b7" class="mw mx in mr b gy nc mz l na nb">  appendPostDOM(postJson);<br/>  appendCommentsDOM(commentsJson);</span><span id="645a" class="mw mx in mr b gy nc mz l na nb">  someSyncOperation();<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/825f2617c41849b71d7d5498fd4b9d21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIFtuI-vycSo2BLz15jZVg.png"/></div></div></figure><p id="8aa2" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">æ²¡æœ‰ï¼Œæ€»æ‰§è¡Œæ—¶é—´ä»ç„¶æ˜¯4ç§’ã€‚</p><p id="51cb" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">å¥½çš„ã€‚æ˜¯æ—¶å€™å»â€œå…¨é¢æ‰¿è¯ºâ€äº†ã€‚</p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="ca4f" class="mw mx in mr b gy my mz l na nb">function handleClick() {<br/>  Promise.all([<br/>    fetchPost(),<br/>    fetchComments()<br/>  ]).then(([ postJson, commentsJson ]) =&gt; {<br/>    appendPostDOM(postJson);<br/>    appendCommentsDOM(commentsJson)<br/>  });</span><span id="ef38" class="mw mx in mr b gy nc mz l na nb">  someSyncOperation();<br/>}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/955529e1cc9172729a2a0e80af48db93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sBJ0Vh_BHYVCzm4BF0dQoQ.png"/></div></div></figure><p id="1ef5" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated"><strong class="ld io">æ‰§è¡Œâ€œå®Œå…¨æ‰¿è¯ºâ€ä¼šå°†æ€»æ‰§è¡Œæ—¶é—´å‡å°‘åˆ°2ç§’ã€‚</strong></p><p id="07ce" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">ä¸ºä»€ä¹ˆè¿™ä¸ªä½œå“å€¼å¾—è‡ªå·±çš„æ–‡ç« ï¼Œä½†<a class="ae mn" href="http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D" rel="noopener ugc nofollow" target="_blank">åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªå¯æ€•çš„è§£é‡Šè€…</a>ã€‚</p><p id="3683" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">ä»Šå¤©æˆ‘å­¦ä¼šäº†ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/407ad2ccf21df147f0fa56a2dbb92123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-WWI7e_QvvXBYp7BPzw0PA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Source: <a class="ae mn" href="https://programmerhumour.tumblr.com/post/633961754778533888/google-my-saviour" rel="noopener ugc nofollow" target="_blank">Programmer Humor</a></figcaption></figure></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><h2 id="e342" class="mw mx in bd nj nk nl dn nm nn no dp np lk nq nr ns lo nt nu nv ls nw nx ny nz bi translated">å¥–é‡‘</h2><p id="41d2" class="pw-post-body-paragraph lb lc in ld b le oa jo lg lh ob jr lj lk oc lm ln lo od lq lr ls oe lu lv lw ig bi translated">å¯¹äºé‚£äº›é“æ†ç²‰ä¸æ¥è¯´ï¼Œæˆ‘äº†è§£åˆ°(å®é™…ä¸Šæ˜¯åœ¨å†™è¿™ä¸ªæ•…äº‹çš„é‚£å¤©)ä¸‹é¢çš„ç‰‡æ®µå®é™…ä¸Šåšäº†åŒæ ·çš„äº‹æƒ…ã€‚æ­¤æ–‡ç”±<a class="ks kt ep" href="https://medium.com/u/994dcd5bc2e8?source=post_page-----f815b3df51dc--------------------------------" rel="noopener" target="_blank">æœˆäº®</a>å½’åŠŸäº<a class="ae mn" href="https://medium.com/better-programming/an-extremely-easy-tip-to-improve-web-performance-with-async-await-b609e7e65744" rel="noopener">ã€‚</a></p><pre class="kd ke kf kg gt ms mr mt mu aw mv bi"><span id="dd59" class="mw mx in mr b gy my mz l na nb">async function handleClick() {<br/>  const postPromise = fetchPost();<br/>  const commentsPromise = fetchComments();<br/>  <br/>  someSyncOperation();<br/>  const postJson = await postPromise;<br/>  const commentsJson = await commentsPromise;</span><span id="f8b7" class="mw mx in mr b gy nc mz l na nb">  appendPostDOM(postJson);<br/>  appendCommentsDOM(commentsJson);<br/>}</span></pre></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="a283" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">å–œæ¬¢è¿™ç¯‡æ–‡ç« å—ï¼Ÿå¦‚æœæœ‰ï¼Œé€šè¿‡<a class="ae mn" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ld io">è®¢é˜…è·å–æ›´å¤šç±»ä¼¼å†…å®¹è§£ç ï¼Œæˆ‘ä»¬çš„YouTubeé¢‘é“</strong> </a> <strong class="ld io">ï¼</strong></p><p id="dbf2" class="pw-post-body-paragraph lb lc in ld b le lf jo lg lh li jr lj lk ll lm ln lo lp lq lr ls lt lu lv lw ig bi translated">ğŸ“«<em class="of">åœ¨</em><a class="ae mn" href="https://www.linkedin.com/in/suhanwijaya/" rel="noopener ugc nofollow" target="_blank"><em class="of">LinkedIn</em></a><em class="of">æˆ–</em> <a class="ae mn" href="mailto:suhanw@gmail.com" rel="noopener ugc nofollow" target="_blank"> <em class="of">é‚®ç®±</em> </a> <em class="of">ï¼</em></p></div></div>    
</body>
</html>
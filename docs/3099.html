<html>
<head>
<title>JavaScript Unit Test Best Practices — Test Categories</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript单元测试最佳实践—测试类别</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-unit-test-best-practices-test-categories-fa8a3ff8dead?source=collection_archive---------8-----------------------#2020-08-28">https://javascript.plainenglish.io/javascript-unit-test-best-practices-test-categories-fa8a3ff8dead?source=collection_archive---------8-----------------------#2020-08-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/86295077fe5871ce3adff7c6be65bff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YMZ5HYQDUoKbxDmj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@andyjh07?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andy Holmes</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c703" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单元测试对于检查我们的应用程序如何工作非常有用。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看在编写JavaScript单元测试时应该遵循的一些最佳实践。</p><h1 id="5158" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">标记我们的测试</h1><p id="b255" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该标记我们的测试，以便它们可以在提交或构建运行时运行。</p><p id="ab02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以，我们可以在提交任何东西之前，通过运行最关键的测试来进行健全性检查。</p><p id="2132" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9660" class="mn lc iq mj b gy mo mp l mq mr">describe("user service", function() {<br/>  describe("log in #sanity", function() {<br/>    test("can log in with the right username and password #sanity", function() {<br/>      //...<br/>    });<br/>  });<br/>});</span></pre><h1 id="b442" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将测试分为至少两个级别</h1><p id="be9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该将一些结构应用到我们的测试套件中，以便任何人都能理解需求。</p><p id="2480" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对测试进行分类将会提高测试报告的可读性。</p><p id="b56c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以直接转到所需的部分，找出失败的原因。</p><p id="014e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过书写来对它们进行分类:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ace0" class="mn lc iq mj b gy mo mp l mq mr">describe("user service", () =&gt; {<br/>  describe("log in", () =&gt; {<br/>    it("user can log in with right username and password", () =&gt; {});</span><span id="e943" class="mn lc iq mj b gy ms mp l mq mr">    it("should return error with wrong username or password", () =&gt; {});<br/>  });<br/>});</span></pre><p id="6883" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一点嵌套帮助我们发现我们的测试更容易。</p><h1 id="e67e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">后端测试</h1><p id="5b35" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们的测试组合可以通过单元测试之外的测试来改进。</p><p id="ceee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还关注集成测试和端到端测试，以改进我们的测试组合。</p><p id="db3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">三种测试结合在一起会有比单元测试更全面的测试覆盖面。</p><p id="72e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有很多事情单元测试没有涉及到，比如服务间调用和消息队列，它们没有用单元测试来测试。</p><p id="b5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是它们可以用端到端测试来测试。</p><p id="2777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以按照测试金字塔进行大量的单元测试、一些集成测试和一些端到端测试，以测试我们应用程序中最关键的部分。</p><h1 id="d8d5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件测试</h1><p id="de7c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">单元测试只覆盖了应用程序的一小部分，覆盖所有的部分是很昂贵的。</p><p id="07eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">端到端测试可以覆盖应用程序的多个部分，但它们不可靠且速度较慢。</p><p id="bc5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个平衡的方法会更合适。</p><p id="38df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写出比单元测试更大，比端到端测试更小的东西。</p><p id="926e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们可以测试组件，这是一个单元。</p><p id="b945" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以测试整个API，而不会嘲讽任何属于微服务本身的东西。</p><p id="789d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有真正的数据库，至少有一个内存版本。</p><p id="b029" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可以让我们在测试中获得更多的信心。</p><p id="3a64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们仍然保留外部API和其他外部依赖。</p><h1 id="cffc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">确保新版本不会破坏API</h1><p id="7552" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了确保我们在向客户发布API时不会破坏任何东西，我们应该测试API的契约。</p><p id="36ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们知道当我们用给定的有效负载发出请求时，我们得到的响应与客户机期望的相同。</p><p id="f77e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这确保了我们可以在客户得到他们的API之前测试我们的API。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/46696135e2e92be067a62c250b7ec330.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_kTBOtnNkIyUJ0k7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@otohp_by_sakul?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lukáš Vaňátko</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b7d0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1f7b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以标记我们的测试，使它们在提交期间快速运行。</p><p id="2e14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们对测试进行分类，使它们更容易找到。</p><p id="ee84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以添加组件测试，以确保我们不会破坏任何东西。</p><h2 id="4488" class="mn lc iq bd ld mu mv dn lh mw mx dp ll ko my mz lp ks na nb lt kw nc nd lx ne bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="a046" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有三份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T3【plain English . ioT5】找到一切的链接！</a></p></div></div>    
</body>
</html>
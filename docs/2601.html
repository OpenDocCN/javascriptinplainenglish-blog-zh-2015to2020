<html>
<head>
<title>Template Literals in JavaScript: The Complete Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的模板文字:完全指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/template-literals-in-javascript-the-complete-guide-e23f64c13aa1?source=collection_archive---------1-----------------------#2020-07-08">https://javascript.plainenglish.io/template-literals-in-javascript-the-complete-guide-e23f64c13aa1?source=collection_archive---------1-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7712" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">揭秘奇怪但非常实用的语法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/e7fdf80e343e618978639aa49a1db1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*owcnt7z0A672XA_WN9FoSA.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Source: The author</figcaption></figure><h1 id="ee0b" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated"><strong class="ak">目录</strong></h1><ul class=""><li id="1eac" class="lj lk iq ll b lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">公式</li><li id="97e6" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated">功能和参数</li><li id="1bda" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated">多行字符串</li><li id="6459" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated">标记的模板文字</li></ul><p id="6382" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">我们走吧！</p><h1 id="7ed4" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">基础知识—模板中的表达式</h1><p id="382a" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">顾名思义，模板字面量是用来创建模板的，我们可以很容易地用JavaScript表达式填充它们。</p><p id="c697" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">它们是传统方法的替代方法，在传统方法中，字符串、数字和其他对象与传统的“+”运算符组合在一起。</p><p id="365c" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">所以表达式意味着我们可以在其中运行真正的JS代码，而不只是像你可能已经知道的那样嵌入变量。</p><p id="e5c3" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">模板中的变量:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="150e" class="nd ks iq mz b gy ne nf l ng nh">let name = "Max"<br/>let age = 21</span><span id="aab8" class="nd ks iq mz b gy ni nf l ng nh">let desc = `${name} is ${age} years old`</span></pre><p id="ebed" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">而且还有更复杂的操作:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="290d" class="nd ks iq mz b gy ne nf l ng nh">`Pi times e is: ${Math.PI * Math.E}` </span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="8f7e" class="kr ks iq bd kt ku nq kw kx ky nr la lb jw ns jx ld jz nt ka lf kc nu kd lh li bi translated">功能和参数</h1><p id="9bb1" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">如你所见，我们真的可以在模板中执行一些JavaScript代码。这也适用于函数及其参数</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="39e3" class="nd ks iq mz b gy ne nf l ng nh">function greet() {<br/>  <em class="nv">return</em> ‘Hi there!’<br/>}</span><span id="03c3" class="nd ks iq mz b gy ni nf l ng nh">console.log(`Message: ${greet()}`)<br/>// "Message: Hi there!"</span></pre><p id="cb4f" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">添加参数:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="a3e7" class="nd ks iq mz b gy ne nf l ng nh">function greet(name) {<br/>  <em class="nv">return</em> ‘Hi there, ‘ + name<br/>}</span><span id="dc9e" class="nd ks iq mz b gy ni nf l ng nh">console.log(`Message: ${greet("Max")}`)<br/>// "Message: Hi there, Max"</span></pre></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="a6c9" class="kr ks iq bd kt ku nq kw kx ky nr la lb jw ns jx ld jz nt ka lf kc nu kd lh li bi translated">多行字符串和模板</h1><p id="796d" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">即使没有我在本文中提到的所谓的<strong class="ll ir">模板文字</strong>，我们几乎在所有可以想象的编程语言中都需要模板。</p><p id="9ac9" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">关于模板，我指的是变量内容、函数参数等的模板。然后用相应的变量填充这个模板。</p><p id="a473" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">因此，我们可以通过简单地使用链接变量和其他数据类型的函数，在JavaScript中构建一个模板。基本到此为止。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="f297" class="nd ks iq mz b gy ne nf l ng nh">let name = "Max"<br/>let age = 21</span><span id="d81c" class="nd ks iq mz b gy ni nf l ng nh">const person = name + "is "+ age + "years old"</span></pre><p id="50e6" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">当这些模板变得如此之长，以至于我们宁愿用几行来制作它们时，问题就来了。只有当我们使用操作符来连接时，这才是可能的，我们不能中断字符串。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="05c0" class="nd ks iq mz b gy ne nf l ng nh">const person = name + "is "<br/>+ age + "years old"<br/>+ "and he likes to do "+ hobby</span></pre><p id="3ec0" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">有了模板文字，我们不再有这个问题:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="4b75" class="nd ks iq mz b gy ne nf l ng nh">const person = `${name} is ${age} \<br/>years old and he \<br/>likes to do ${hobby}`</span></pre><p id="ded3" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">我们只需要考虑用<strong class="ll ir"> "\" </strong>标记换行符，否则换行符之前的整行都将被解释为空白。</p><h1 id="44c8" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">带标签的模板文字——这变得很奇怪</h1><p id="a946" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">我们还可以将<strong class="ll ir">模板文字传递给函数</strong>，使用一种非常规的语法，您可能以前在<a class="ae nw" href="https://medium.com/javascript-in-plain-english/how-to-use-react-js-props-with-styled-components-db11fc83f5c9" rel="noopener"> styled-components </a>中见过。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="4f00" class="nd ks iq mz b gy ne nf l ng nh">function person() {<br/>  <em class="nv">return</em> ‘a person’<br/>}</span><span id="012d" class="nd ks iq mz b gy ni nf l ng nh">const name = ‘Max’<br/>const age = 21</span><span id="2fca" class="nd ks iq mz b gy ni nf l ng nh">const description = person`He is ${name} and ${age} years old`</span></pre><p id="6ea3" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">我们只需将模板直接添加到我们想要传递给它的函数中。<br/>如果我们现在记录<strong class="ll ir">描述</strong>,“一个人”就会出现。</p><p id="7988" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">没意思，所以我们应该开始看看我们到底传递了什么参数。<br/> <strong class="ll ir">重要:</strong>我们的模板中有<strong class="ll ir">两个</strong>变量(姓名，年龄)，但总是传递变量个数+一个包含模板中字符串的数组作为第一个参数。自动地。我将把这个数组命名为“字符串”。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="2321" class="nd ks iq mz b gy ne nf l ng nh">function person(strings, name, age) {<br/>  <em class="nv">return</em> ‘a person’<br/>}</span></pre><p id="b21a" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">姓名</strong>和<strong class="ll ir">年龄</strong>果然只包含“Max”和“21”但是<strong class="ll ir">字符串</strong>有意思:<code class="fe nx ny nz mz b">['This man is ', ' and he is ', ' years old']</code></p><p id="92bf" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">数组由模板中的字符串组成，所有不可变的东西。所以我们从左到右得到模板的<strong class="ll ir">硬编码部分，作为数组的条目。</strong></p><h2 id="ab83" class="nd ks iq bd kt oa ob dn kx oc od dp lb lq oe of ld ls og oh lf lu oi oj lh ok bi translated">让我们用它来构建一个模板生成器</h2><p id="d3dd" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">尤其是在有Node.js的后端区域，恰好我们要动态生成HTML代码。多亏了带标签的模板文字，我们可以非常容易地做到这一点，甚至可以使用对象作为数据源。</p><p id="a496" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated">让我们仔细检查所有的部分。完整的和工作的源代码可以在最后找到。</p><p id="250e" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">定义我们的模板，调用生成器-函数:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="4786" class="nd ks iq mz b gy ne nf l ng nh">const personTemplate = templateGenerator`<br/>  &lt;div id=”person-wrapper”&gt;<br/>    &lt;h3&gt;${‘name’}&lt;/h3&gt;<br/>    &lt;p&gt;Age: ${‘age’} years&lt;/p&gt;<br/>  &lt;/div&gt;<br/>`</span></pre><p id="09ce" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">我们的数据源将是这个对象:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="7b91" class="nd ks iq mz b gy ne nf l ng nh">const john = {<br/>  name: ‘John Doe’,<br/>  age: 21,<br/>}</span></pre><p id="e0a2" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">调用函数，保存完成的模板:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="29c7" class="nd ks iq mz b gy ne nf l ng nh">const johnsTemplate = personTemplate(john)</span><span id="0a1b" class="nd ks iq mz b gy ni nf l ng nh">console.log(johnsTemplate)</span></pre><p id="9b2c" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">发电机本身，所有神奇的事情都发生在这里:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="4253" class="nd ks iq mz b gy ne nf l ng nh">function templateGenerator(strings, …keys) {<br/>  <em class="nv">return</em> function (data) {<br/>    let template = strings.slice()</span><span id="ba9c" class="nd ks iq mz b gy ni nf l ng nh">    keys.forEach((key, i) =&gt; {<br/>      template[i] = template[i] + data[key]<br/>  })<br/>  <em class="nv">return</em> template.join(``)<br/>  }<br/>}</span></pre><ul class=""><li id="8edb" class="lj lk iq ll b lm mi lo mk lq ol ls om lu on lw lx ly lz ma bi translated">数组<strong class="ll ir"> <em class="nv"> strings </em> </strong>包含了我们模板的所有字符串。</li><li id="09bc" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated"><strong class="ll ir"> <em class="nv">键</em> </strong>是一个由对象的姓名和年龄组成的数组。</li><li id="89f8" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated"><strong class="ll ir"> <em class="nv">数据</em> </strong>包含对象。</li><li id="3b4f" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated"><strong class="ll ir"> <em class="nv">模板</em> </strong>是<strong class="ll ir"> <em class="nv">字符串的副本。</em> </strong></li><li id="de88" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated">然后，<strong class="ll ir"> <em class="nv"> forEach </em> </strong>循环将来自对象的相应条目添加到数组中每个元素的末尾(模板的一部分)。</li><li id="d3a0" class="lj lk iq ll b lm mb lo mc lq md ls me lu mf lw lx ly lz ma bi translated">最后，模板被转换成一个字符串并返回</li></ul><p id="cc6f" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">输出:</strong></p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="ba47" class="nd ks iq mz b gy ne nf l ng nh">&lt;div id=”person-wrapper”&gt;<br/>  &lt;h3&gt;John Doe&lt;/h3&gt;<br/>  &lt;p&gt;Age: 21 years&lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="1a30" class="pw-post-body-paragraph mg mh iq ll b lm mi jr mj lo mk ju ml lq mm mn mo ls mp mq mr lu ms mt mu lw ij bi translated"><strong class="ll ir">完整代码:</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oo op l"/></div></figure><h2 id="1bd9" class="nd ks iq bd kt oa ob dn kx oc od dp lb lq oe of ld ls og oh lf lu oi oj lh ok bi translated">简单英语的JavaScript</h2><p id="169c" class="pw-post-body-paragraph mg mh iq ll b lm ln jr mj lo lp ju ml lq mv mn mo ls mw mq mr lu mx mt mu lw ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae nw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir">订阅我们的YouTube频道</strong> </a> <strong class="ll ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
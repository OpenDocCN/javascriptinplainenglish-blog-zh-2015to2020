<html>
<head>
<title>Tinder Style Movie Night Picker with VueJs, Vuetify, VuexFire, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火绒风格的电影夜采摘与VueJs，Vuetify，VuexFire，和Firebase</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-and-firebase-60a1c5200c?source=collection_archive---------12-----------------------#2020-11-05">https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-and-firebase-60a1c5200c?source=collection_archive---------12-----------------------#2020-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8a38" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第4部分—电影</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e59d3a6be75c61ed982099a040200d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAVlbFG1PmnQQvAtadb2bQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/stokpic-692575/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2545676" rel="noopener ugc nofollow" target="_blank">stokpic</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2545676" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="9575" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第三部分中，我们致力于添加合作伙伴。现在，让我们把重点放在电影的展示和投票上。为此，我们将使用<a class="ae kv" href="https://www.themoviedb.org/" rel="noopener ugc nofollow" target="_blank">电影数据库</a>。这个API完全可以免费使用<strong class="ky ir">，只要你正确地给数据源</strong>赋予属性。</p><p id="2ea5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得API密钥，请前往<a class="ae kv" href="https://www.themoviedb.org/" rel="noopener ugc nofollow" target="_blank">https://www.themoviedb.org/</a>并创建一个帐户。然后点击右上角的您的帐户。接下来，单击下拉菜单中的设置，并选择左侧的API选项。然后你必须申请一个API密匙，这是即时的。</p><h2 id="57a3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">发现API端点</h2><p id="db3b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们将用来显示电影的这个特定端点就是discover端点。这将允许我们以可预测的方式向用户展示随机电影。因此，请阅读此端点的<a class="ae kv" href="https://developers.themoviedb.org/3/discover/movie-discover" rel="noopener ugc nofollow" target="_blank">文档</a>来熟悉一下。在那里，您会发现一个开发人员友好的界面来创建确切的端点。</p><p id="112e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的使用中，我们将使用缺省端点并稍作修改来返回成人电影。我将使用文档接口来调整生成该URL的查询参数:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="b95e" class="ls lt iq mr b gy mv mw l mx my"><a class="ae kv" href="https://api.themoviedb.org/3/discover/movie?api_key=c9b1dcef3fc31d3fd438f59ca9214638&amp;language=en-US&amp;sort_by=popularity.desc&amp;include_adult=true&amp;include_video=false&amp;page=1" rel="noopener ugc nofollow" target="_blank">https://api.themoviedb.org/3/discover/movie?api_key=&lt;YOUR_API_KEY&gt;&amp;language=en-US&amp;sort_by=popularity.desc&amp;include_adult=true&amp;include_video=false&amp;page=1</a></span></pre><p id="aa0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了端点，当用户登陆主页时，我们将使用Axios调用它。由于API一次只返回10部电影，我们还需要跟踪结果的索引，并进行新的调用来获取下一页的结果。现在，我们将使用我们的方法来发出请求。</p><h2 id="a7cc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">Home.vue</h2><p id="ed47" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在src/views/Home.vue中，在options API中制作一个数据道具，并添加一个名为movies的数组。这将保留我们请求的电影。我们还将添加一个currentMovie和currentIndex属性，这样我们就知道屏幕上当前播放的是什么电影。最后，我们将创建一个isLoading属性，在获取电影时显示一个覆盖图。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="99d5" class="ls lt iq mr b gy mv mw l mx my"><em class="mz">data</em>: () =&gt; ({<br/> isLoading: false,<br/> movies: [],<br/> currentMovie: {},<br/> currentIndex: 0<br/>})</span></pre><p id="d7c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将创建从数据库获取电影的方法。在脚本的顶部标记import axios:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="554f" class="ls lt iq mr b gy mv mw l mx my"><em class="mz">import</em> axios <em class="mz">from</em> 'axios'</span></pre><p id="a182" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在选项API中创建一个方法属性，并添加以下函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">fetchMovies</figcaption></figure><p id="7553" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样用户就不会一遍又一遍地看同样的电影，我们也会跟踪他们最后一次浏览的页面。为此，我们需要更新我们的Vuex用户模块。因此，请转到src/store/modules/user.js。我们将添加一个名为movieApiPage的新状态属性，一个用于更新它的新变体，以及一个我们可以调度的操作。您的用户模块应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Vuex user module</figcaption></figure><p id="6c42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当用户登录时，如果我们在数据库中找到该属性，我们需要将它传递给商店。在src/views/SignIn.vue中找到我们设置用户数据并添加movieApiPage的商店分派。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="7fe3" class="ls lt iq mr b gy mv mw l mx my">this<em class="mz">.$store.dispatch</em>('user/setUserData', {<br/> id: <em class="mz">dbUser.</em>id,<br/> name: <em class="mz">userData.</em>name,<br/> email: <em class="mz">userData.</em>email,<br/> partnerId: <em class="mz">userData.</em>partnerId || '',<br/> <strong class="mr ir">movieApiPage: <em class="mz">userData.</em>movieApiPage || 1</strong><br/>})</span></pre><p id="643f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们将创建一些计算属性，使我们的代码更容易编写:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home Computed props</figcaption></figure><p id="b75a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要拇指向上和拇指向下点击的逻辑。因为它们都需要增加当前电影/索引，我们将添加一个increment方法。在这个方法中，我们必须检查电影是否是当前页面的最后一部。如果是，我们将需要获取更多内容，并将页码保存在用户的集合中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">incrementCurrentIndex</figcaption></figure><p id="be4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以实现拇指向上和向下逻辑:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">thumbsUp() &amp; thumbsDown()</figcaption></figure><p id="1358" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要做的最后一件事是在页面加载时填充我们的电影。为此，我们将使用创建的方法并触发fetchMovies方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home created()</figcaption></figure><p id="258f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经完成了所有的核心逻辑，我们可以构建我们的模板了。我们会有一张卡片，上面有电影海报、标题、描述和竖起/放下的拇指。还有，别忘了电影数据库的属性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home.vue template</figcaption></figure><h1 id="4366" class="nc lt iq bd lu nd ne nf lx ng nh ni ma jw nj jx md jz nk ka mg kc nl kd mj nm bi translated">视频教程</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Video Tutorial</figcaption></figure><h1 id="faf5" class="nc lt iq bd lu nd ne nf lx ng nh ni ma jw nj jx md jz nk ka mg kc nl kd mj nm bi translated">结论</h1><p id="61fc" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在我们有了电影和匹配逻辑，我们可以开始专注于包装应用程序。在<a class="ae kv" href="https://diligentdev.medium.com/tinder-style-movie-night-picker-with-vuejs-and-firebase-d62d6c39feb9" rel="noopener">第5部分</a>中，我们将着重于显示匹配。这也给了我们一个机会来完善我们忽略的任何错误或事情。当它出来的时候，请确保你跟随我得到更新！</p></div></div>    
</body>
</html>
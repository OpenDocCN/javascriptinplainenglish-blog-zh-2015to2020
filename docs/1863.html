<html>
<head>
<title>Recreate a Dribbble Animation on Codepen with Greensock’s GSAP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用格林索克的GSAP在Codepen上重新创建一个滴水不漏的动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/recreate-a-dribbble-animation-on-codepen-with-greensocks-gsap-d08874206ed0?source=collection_archive---------6-----------------------#2020-04-29">https://javascript.plainenglish.io/recreate-a-dribbble-animation-on-codepen-with-greensocks-gsap-d08874206ed0?source=collection_archive---------6-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3b81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我经常收到高级网页动画的请求。主要是针对那些想展示他们即将推出的闪亮产品的活动网站。很多时候，客户的艺术总监交付了一个疯狂的动画效果，需要在网站上实现。</p><blockquote class="kl km kn"><p id="c3bd" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">“让它在所有浏览器中都能工作！啊，你能让它在所有可能的屏幕尺寸上都有反应吗？并使其为30kb。</p></blockquote><p id="6a5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个项目都有它的挑战，但是讨论技术上的可能性总是会得到一个折中的结果。网络动画很有挑战性，但并不像看起来那么难。你唯一要做的就是练习…大量练习。</p><p id="8f2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我是一名开发人员，我的设计技能不是很好，所以总是很难创造出一些很酷的东西，当你想练习的时候，这有点让人泄气。这就是重现一个滴水镜头的想法的来源。</p><h1 id="59f4" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">再造一个滴水不漏的镜头</h1><p id="19c7" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我们将重现由<a class="ae lv" href="https://dribbble.com/seth_eckert" rel="noopener ugc nofollow" target="_blank">塞斯·埃克特</a>制作的这件精美艺术品。我们将一步一步地做它(双关语)。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/c792b7c6d9a7ef1979fda65dc7208daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hptbBC7gPFWGtt7i35IsGg.gif"/></div></div></figure><div class="mi mj gp gr mk ml"><a href="https://dribbble.com/shots/2613978-Kicks" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd ir gy z fp mq fr fs mr fu fw ip bi translated">踢</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">我们制作了一个网站的动画！查看这里的视频，我们被要求在设计的同时为网站制作动画…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">dribbble.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz mg ml"/></div></div></a></div><h1 id="f697" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">定义场景</h1><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi na"><img src="../Images/e06ad87d35db24c52099dd35da78af36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50-NLV2Dol14pg0oSu5thA.png"/></div></div></figure><p id="96aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">动画由几部分组成:</strong></p><ul class=""><li id="0fcc" class="nb nc iq jp b jq jr ju jv jy nd kc ne kg nf kk ng nh ni nj bi translated">具有从左到右动画的倾斜线条的循环背景。</li><li id="d8cd" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated">放鞋模的鞋盒。</li><li id="bfad" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated">一只上下弹跳的鞋。</li></ul><p id="0c3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">格林斯托克的《GSAP》将被用于制作动画。尼古拉斯·克莱默在上面写了一本很棒的<a class="ae lv" href="https://www.freecodecamp.org/news/the-beginners-guide-to-the-greensock-animation-platform-7dc9fd9eb826/" rel="noopener ugc nofollow" target="_blank">初学者指南</a>。</p><blockquote class="kl km kn"><p id="e9eb" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">GreenSock Animation Platform(简称为<a class="ae lv" href="https://greensock.com/gsap" rel="noopener ugc nofollow" target="_blank"> GSAP </a>)是一个强大的JavaScript库，使前端开发人员和设计人员能够创建健壮的基于时间轴的动画。<em class="iq"> </em>这允许对更复杂的动画序列进行精确控制，而不是CSS提供的有时具有约束性的<code class="fe np nq nr ns b">keyframe</code>和<code class="fe np nq nr ns b">animation</code>属性。</p></blockquote><h1 id="1976" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">准备新的密码笔</h1><p id="ac1b" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">从一支<a class="ae lv" href="https://codepen.io/pen" rel="noopener ugc nofollow" target="_blank">新笔</a>开始。Codepen允许你加载外部JS库。点击右上角的“设置”按钮，选择“JS”选项卡。您可以在这里添加Greensock库和EasePack。另外，一定要选择Babel作为Javascript预处理器。</p><ul class=""><li id="7d6b" class="nb nc iq jp b jq jr ju jv jy nd kc ne kg nf kk ng nh ni nj bi translated"><a class="ae lv" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs . cloud flare . com/Ajax/libs/gsap/3 . 2 . 6/gsap . min . js</a></li><li id="4c28" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><a class="ae lv" href="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/EasePack.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs . cloud flare . com/Ajax/libs/gsap/3 . 2 . 6/ease pack . min . js</a></li></ul><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi na"><img src="../Images/3f4a52fea87dce9f083c38a89d81f2fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UfGrqGkSQudtDWri3b9vMA.png"/></div></div></figure><h2 id="de4f" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated">创造一个场景</h2><p id="4ec6" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我更喜欢将我的动画包装在场景元素中。这将代表动画的根。我们在本文中创建的所有东西都将放在那里。这样很容易移动或删除动画。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="87c2" class="nt kt iq ns b gy oj ok l ol om">&lt;div class="scene shoe-1"&gt;&lt;/div&gt;</span></pre><p id="78ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个”。shoe-1 "类被添加到场景元素中，这将是动画的初始状态。稍后，这将被Javascript所取代。</p><p id="92d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，定义场景并创建一个<a class="ae lv" href="https://greensock.com/docs/v3/GSAP/gsap.timeline()" rel="noopener ugc nofollow" target="_blank">时间轴</a>。将“重复”属性设置为“-1”以无限循环时间轴。我们所有的动画都将被添加到这个时间线上。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="e384" class="nt kt iq ns b gy oj ok l ol om">const elements = {<br/>  scene: document.querySelector('.scene'),<br/>  // Later we will define more elements here.<br/>}</span><span id="b9db" class="nt kt iq ns b gy on ok l ol om">const timeline = gsap.timeline({<br/>  repeat: -1<br/>})</span></pre><blockquote class="kl km kn"><p id="f6c0" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">一个<a class="ae lv" href="https://greensock.com/docs/v3/GSAP/Timeline" rel="noopener ugc nofollow" target="_blank">时间线</a>是一个强大的排序工具，它充当补间动画和其他时间线的容器，使得从整体上控制它们并精确管理它们的时间变得简单。没有时间线，构建复杂的序列将会非常麻烦，因为你需要为每个动画使用一个<code class="fe np nq nr ns b"><em class="iq">delay</em></code>。</p></blockquote><h1 id="ebf1" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">背景</h1><p id="4f37" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">添加全屏div元素。向div添加两个子元素，它们将代表对角线:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="0d48" class="nt kt iq ns b gy oj ok l ol om">&lt;div class="background"&gt;<br/>  &lt;div class="line line-1"&gt;&lt;/div&gt;<br/>  &lt;div class="line line-2"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="1ec1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有一些款式:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="1711" class="nt kt iq ns b gy oj ok l ol om">.scene.shoe-1 {<br/> --bg-light: #ffd85d;<br/> --bg-dark: #ffbd51;<br/>}</span><span id="f3b2" class="nt kt iq ns b gy on ok l ol om">.background {<br/> position: fixed;<br/> left: 0;<br/> top: 0;<br/> width: 100%;<br/> height: 100%;<br/> background-color: var(--bg-light);<br/> color: var(--bg-dark);<br/>}</span><span id="07d3" class="nt kt iq ns b gy on ok l ol om">.background .line {<br/> position: absolute;<br/> top: 0;<br/> height: 100vh;<br/> background-color: currentColor;<br/>}</span><span id="61b8" class="nt kt iq ns b gy on ok l ol om">.background .line-1 {<br/> width: 35vw;<br/> left: 20vw;<br/> transform: skew(-45deg);<br/>}</span><span id="6d17" class="nt kt iq ns b gy on ok l ol om">.background .line-2 {<br/> width: 15vw;<br/> left: 60vw;<br/> transform: skew(-45deg);<br/>}</span></pre><p id="7078" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了能够容易地补间线的x位置，我选择使用“倾斜”而不是“旋转”。当我使用“旋转”时，x位置是对角线，这使得元素很难从左向右移动。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/7f7a34592ff050c2bbb1f3b9b8db7417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*Iukxpr6DPFvcjBOOFpD_Cg.png"/></div><figcaption class="op oq gj gh gi or os bd b be z dk">Rotate vs. Skew</figcaption></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="op oq gj gh gi or os bd b be z dk">Basic setup with a fullscreen background.</figcaption></figure><h2 id="fc75" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated">设置背景时间线</h2><p id="c291" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我总是喜欢将我创建的每个时间线包装在一个函数中，以保持可读性和易于管理。</p><p id="68d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先定义我们制作背景动画所需的元素。然后创建一个<code class="fe np nq nr ns b">createBackground</code>函数。这里我们为背景创建一个新的时间轴并返回它。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="b9bd" class="nt kt iq ns b gy oj ok l ol om">const elements = {<br/>  scene: document.querySelector('.scene'),<br/>  background: {<br/>    container: document.querySelector('.background'),<br/>    line1: document.querySelector('.background .line-1'),<br/>    line2: document.querySelector('.background .line-2')<br/>  }<br/>}</span><span id="dfdd" class="nt kt iq ns b gy on ok l ol om">const createBackground = () =&gt; {<br/>  const tl = gsap.timeline()</span><span id="b7e3" class="nt kt iq ns b gy on ok l ol om">  return tl<br/>}</span></pre><p id="750b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们将背景时间轴添加到根时间轴:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="d8c8" class="nt kt iq ns b gy oj ok l ol om">timeline.add(createBackground())</span></pre><h2 id="ae23" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated">对子时间轴中的线条进行补间</h2><p id="615e" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">由于两条线的补间是相同的，我们创建了一个<code class="fe np nq nr ns b">createLineTimeline</code>函数，它将返回另一个包含线条动画的时间轴。然后我们将它们添加到背景时间轴中。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="3593" class="nt kt iq ns b gy oj ok l ol om">const createBackground = () =&gt; {<br/>  const createLineTimeline = (element) =&gt; {  <br/>    const tl = gsap.timeline()</span><span id="344d" class="nt kt iq ns b gy on ok l ol om">    tl.fromTo(element, 0.75, {<br/>      x: "0",<br/>    },<br/>    {<br/>      x: "160vw",<br/>      ease: "expo.in",<br/>    });</span><span id="c22c" class="nt kt iq ns b gy on ok l ol om">    tl.fromTo(element, 1, {<br/>      x: "-100vw",<br/>    }, <br/>    {<br/>      x: "0",<br/>      ease: "expo.out",<br/>    }, "+=0.25");</span><span id="2965" class="nt kt iq ns b gy on ok l ol om">    return tl<br/>  }</span><span id="dc67" class="nt kt iq ns b gy on ok l ol om">  tl.add(createLineTimeline(elements.line2), 0)<br/>  tl.add(createLineTimeline(elements.line1), 0.05)<br/>}</span><span id="56cd" class="nt kt iq ns b gy on ok l ol om">timeline.add(createBackground())</span></pre><p id="8abb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">线条从  <em class="ko"> </em>向左<strong class="jp ir"> <em class="ko">向</em> </strong> <em class="ko"> </em>向右移动<strong class="jp ir"> <em class="ko">所以我们要使用从<a class="ae lv" href="https://greensock.com/docs/v3/GSAP/gsap.fromTo()" rel="noopener ugc nofollow" target="_blank">到</a>的方法。</em></strong></p><blockquote class="kl km kn"><p id="6dcc" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><code class="fe np nq nr ns b"><em class="iq">gsap.fromTo()</em></code>补间让您定义动画的起始值和结束值。</p></blockquote><ul class=""><li id="c081" class="nb nc iq jp b jq jr ju jv jy nd kc ne kg nf kk ng nh ni nj bi translated">首先，从中心向右补间线条<em class="ko">。因为我们指定补间为160vw，所以线条会向屏幕右侧移动。</em></li><li id="d5ee" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated">接下来，我们补间从屏幕左侧到屏幕中央的线<em class="ko">。</em></li><li id="8b2a" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated">使用<code class="fe np nq nr ns b">gsap.add</code>方法将补间添加到时间轴中。<code class="fe np nq nr ns b">0.05</code>是时间线中的位置，以秒为单位。第一场比赛将从<code class="fe np nq nr ns b">0</code>开始。第二个补间将在<code class="fe np nq nr ns b">0.05</code>秒开始。</li></ul><p id="40b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能会对我们从<code class="fe np nq nr ns b">0</code>到<code class="fe np nq nr ns b">160</code>的渐变开始感到困惑，因为线条是从屏幕的中央开始的。代表行的初始位置，我们在CSS中指定了这一点。使用下面代码笔中的补间值来理解补间值。</p><blockquote class="kl km kn"><p id="1c5f" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated">始终只使用CSS定位元素。然后使用Javascript来操作这些值。这样，当动画被禁用时，您仍然可以使用标记。</p></blockquote><p id="dcff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的动画的第一部分将是这样的:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="op oq gj gh gi or os bd b be z dk">Background timeline containing two tweens.</figcaption></figure><h1 id="cfd8" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">鞋盒</h1><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="0343" class="nt kt iq ns b gy oj ok l ol om">&lt;div class="shoebox-container"&gt;<br/>  &lt;div class="shoebox"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="d390" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和一些CSS:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="d19c" class="nt kt iq ns b gy oj ok l ol om">.shoebox-container {<br/> position: absolute;<br/> bottom: 0;<br/> left: 50%;<br/> height: 100vh;<br/> transform: translateX(-50%);<br/>}</span><span id="fa3a" class="nt kt iq ns b gy on ok l ol om">.shoebox {<br/> position: absolute;<br/> bottom: 0;<br/> left: 50%;<br/> transform: translateX(-50%);<br/> width: 90vw;<br/> height: 20vh;<br/> background-color: var(--box-dark);<br/> color: var(--box-light);<br/>}</span><span id="fc0b" class="nt kt iq ns b gy on ok l ol om">.shoebox::before {<br/> content: '';<br/> position: absolute;<br/> bottom: 100%;<br/> left: 50%;<br/> transform: translate(-50%, 50%);<br/> display: block;<br/> width: 105%;<br/> height: 10vh;<br/> border-radius: 10px;<br/> background-color: inherit;<br/> <br/>}</span><span id="89a9" class="nt kt iq ns b gy on ok l ol om">.shoebox::after {<br/> content: '';<br/> position: absolute;<br/> top: 5vh;<br/> left: 50%;<br/> transform: translateX(-50%);<br/> display: block;<br/> width: 100%;<br/> height: 3vh;<br/> background-color: currentColor;<br/>}</span></pre><h2 id="b501" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated">让它弹跳</h2><p id="65c8" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">为了能够补间鞋盒，做同样的背景。在elements对象中定义shoebox元素:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="030b" class="nt kt iq ns b gy oj ok l ol om">shoebox: {<br/>  container: document.querySelector(".shoebox-container"),<br/>  box: document.querySelector(".shoebox"),<br/>}</span></pre><p id="13a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后创建一个名为<code class="fe np nq nr ns b">createShoebox</code>的新函数，它返回鞋盒的新时间线:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="5e2d" class="nt kt iq ns b gy oj ok l ol om">const createShoeBox = () =&gt; {<br/>  const tl = gsap.timeline();</span><span id="d5b0" class="nt kt iq ns b gy on ok l ol om">  tl.to(elements.shoebox.container, 0.3, {<br/>    y: "+=10vh",<br/>    ease: "power4.out",<br/>  });</span><span id="bb81" class="nt kt iq ns b gy on ok l ol om">  tl.to(elements.shoebox.container, 1, {<br/>    y: "-=10vh",<br/>    ease: "power4.out",<br/>  }, "+=0.35");</span><span id="49db" class="nt kt iq ns b gy on ok l ol om">  return tl;<br/>};</span></pre><ul class=""><li id="34bf" class="nb nc iq jp b jq jr ju jv jy nd kc ne kg nf kk ng nh ni nj bi translated">我在“y”位置使用了相对值。您可以使用<code class="fe np nq nr ns b">+=</code>和<code class="fe np nq nr ns b">-=</code>来指定这些。这允许您获取元素的实际位置，并<em class="ko">添加</em>给定值。增加第一个<code class="fe np nq nr ns b">10vh</code>使鞋盒下移。然后增加<code class="fe np nq nr ns b">-10vh</code>使鞋盒再次上移。</li><li id="e9af" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><code class="fe np nq nr ns b">+=0.35</code>是时间线中的时间(秒)。而不指定补间将直接添加到时间轴中上一个补间之后的时间。使用此相对值，补间将在第一个补间完成后<code class="fe np nq nr ns b">0.35</code>秒添加。这将在两个补间之间产生一点延迟。你也可以给它一个负值，让补间重叠。</li></ul><p id="3965" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，我们有一个包含两个子时间轴的根时间轴。一个用于背景，一个用于鞋盒:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi na"><img src="../Images/3372dd489208a7512312e20604588978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-OeXSKAac_Gxt77YFsDIOQ.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk">Visual presentation of the timelines.</figcaption></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="op oq gj gh gi or os bd b be z dk">A root timeline containing two child timelines.</figcaption></figure><h1 id="2cec" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">添加鞋子</h1><p id="5590" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">它开始看起来像Dribbble拍摄了！唯一缺少的部分是鞋子。我更喜欢尽可能用HTML重新创建元素，但是因为鞋子有一些高级形状，所以最好使用内嵌SVG。我制作了一个Dribbble的截图，并将其加载到Sketch中，然后描绘出形状:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ov"><img src="../Images/ac407c3cdb27e1d50b24946d4dfbca27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RJiFE1IodJjOW_pygVlApA.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk">Screenshot of different shoe shapes.</figcaption></figure><p id="ead4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你描绘出形状，你就可以很容易地从Sketch中复制SVG代码。右键单击要导出的组，然后单击“复制SVG代码”。这是一个非常好的功能😎。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ow"><img src="../Images/5da980c77806211edbb5275a3454c201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzGQipwYxeua-wmgb5b9EA.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk">Right-click the group, Then copy the SVG code.</figcaption></figure><p id="092c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们对所有的鞋子都这样做，并将SVG包装在一个。鞋子”包装纸。包装将被定位在。鞋盒”。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="690c" class="nt kt iq ns b gy oj ok l ol om">&lt;div class="shoebox-container"&gt;<br/>  &lt;div class="shoebox"&gt;<br/>    &lt;div class="shoe"&gt;<br/>      &lt;svg class="shoe-1"&gt;...&lt;/svg&gt;<br/>      &lt;svg class="shoe-2"&gt;...&lt;/svg&gt;<br/>      &lt;svg class="shoe-3"&gt;...&lt;/svg&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="5308" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最初，我们只想看到第一只鞋，所以我们先隐藏所有的鞋。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="66a7" class="nt kt iq ns b gy oj ok l ol om">.shoe {<br/> position: absolute;<br/> top: 0;<br/> left: 50%;<br/> transform: translate(-50%, 0);<br/> width: 70vw;<br/> height: 40vh;<br/> margin-top: -45vh;<br/>}</span><span id="3955" class="nt kt iq ns b gy on ok l ol om">.shoe svg {<br/> display: none;<br/> position: absolute;<br/> left: 50%;<br/> bottom: 0;<br/> transform: translate(-50%);<br/> width: 100%;<br/> height: auto;<br/>}</span></pre><p id="0e18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们专门为第一只鞋添加一些款式。我们使用CSS变量定义鞋盒的配色方案，并使鞋子可见。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="e0c1" class="nt kt iq ns b gy oj ok l ol om">/* Shoe 1 */<br/>.scene.shoe-1 .shoebox {<br/> --box-light: #2982ff;<br/> --box-dark: #55a1ff;<br/>}</span><span id="4170" class="nt kt iq ns b gy on ok l ol om">.scene.shoe-1 .shoe-1 {<br/> display: block;<br/>}</span></pre><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="32dd" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated">旋转鞋子</h2><p id="1256" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">鞋子每次弹跳时都会旋转一点。因此，鞋子也将获得自己的时间线，我们也将把它添加到根时间线:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="4fb2" class="nt kt iq ns b gy oj ok l ol om">const createShoe = () =&gt; {<br/>  const tl = gsap.timeline({<br/>    delay: 0.5<br/>  })<br/> <br/>  tl.to(elements.shoebox.shoe, 1, {<br/>    yPercent: -50,<br/>    ease: 'power4.out'<br/>  }, 0)<br/> <br/>  tl.to(elements.shoebox.shoe, 0.5, {<br/>    yPercent: 0,<br/>    ease: 'power4.in'<br/>  }, 1)<br/> <br/>  tl.to(elements.shoebox.shoe, 0.5, {<br/>    rotation: '-5deg',<br/>  }, 0)<br/> <br/>  tl.to(elements.shoebox.shoe, 0.25, {<br/>    rotation: '5deg',<br/>  }, 0.25)<br/> <br/>  tl.to(elements.shoebox.shoe, 0.25, {<br/>    rotation: '0deg',<br/>    ease: 'power4.in'<br/>  }, 1.25)<br/> <br/>  return tl<br/>}</span><span id="20fb" class="nt kt iq ns b gy on ok l ol om">timeline.add(createShoe(), 0);</span></pre><h1 id="4777" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">改变主题</h1><p id="370b" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">一旦根时间轴播放完毕，颜色和鞋子必须改变。让我们先为另外两只鞋创建配色方案:</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="c43d" class="nt kt iq ns b gy oj ok l ol om">/* Shoe 2 */<br/>.scene.shoe-2 {<br/> --bg-light: #b5f4e8;<br/> --bg-dark: #6aceba;<br/>}</span><span id="8fb6" class="nt kt iq ns b gy on ok l ol om">.scene.shoe-2 .shoe-2 {<br/> display: block;<br/>}</span><span id="7283" class="nt kt iq ns b gy on ok l ol om">.scene.shoe-2 .shoebox {<br/> --box-light: #ff8751;<br/> --box-dark: #ffa144;<br/>}</span><span id="89a7" class="nt kt iq ns b gy on ok l ol om">/* Shoe 3 */<br/>.scene.shoe-3 {<br/> --bg-light: #c69ced;<br/> --bg-dark: #b98de7;<br/>}</span><span id="095f" class="nt kt iq ns b gy on ok l ol om">.scene.shoe-3 .shoe-3 {<br/> display: block;<br/>}</span><span id="0f7e" class="nt kt iq ns b gy on ok l ol om">.scene.shoe-3 .shoebox {<br/> --box-light: #00957c;<br/> --box-dark: #00a78c;<br/>}</span></pre><p id="d0f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">剩下的唯一一件事就是在时间线到达终点时改变当前的鞋子。我们将用一个事件回调来切换shoe类。</p><blockquote class="kl km kn"><p id="cc3f" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir"> eventCallback() <br/> </strong>获取或设置事件回调，如“onComplete”、“onUpdate”、“onStart”、“onReverseComplete”或“onRepeat”(onRepeat仅适用于TweenMax或TimelineMax实例)，以及应传递给该回调的任何参数。</p></blockquote><ul class=""><li id="adaa" class="nb nc iq jp b jq jr ju jv jy nd kc ne kg nf kk ng nh ni nj bi translated"><strong class="jp ir"> onComplete: </strong>每次时间轴完成时触发。</li><li id="3bbf" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><strong class="jp ir"> onUpdate: </strong>每次时间轴更新时触发。</li><li id="7fa5" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><strong class="jp ir"> onStart: </strong>每次时间轴开始播放时触发。</li><li id="2105" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><strong class="jp ir"> onRepeat: </strong>每当时间线重复时触发。</li><li id="cfd3" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated"><strong class="jp ir"> onReverseComplete: </strong>每次时间轴以反转模式完成时触发。</li></ul><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="e579" class="nt kt iq ns b gy oj ok l ol om">const timeline = gsap.timeline({ <br/> repeat: -1, <br/> onRepeat: setColorClass<br/>});</span></pre><p id="4c5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">时间线每重复一次<code class="fe np nq nr ns b">setColorClass</code>就会被触发。这里我们的一个鞋类基于<code class="fe np nq nr ns b">repeatIndex</code>被分配到背景。</p><pre class="lx ly lz ma gt of ns og oh aw oi bi"><span id="c4fa" class="nt kt iq ns b gy oj ok l ol om">let repeatIndex = 0</span><span id="9f5c" class="nt kt iq ns b gy on ok l ol om">const setColorClass = () =&gt; {<br/>  const index = repeatIndex % 3<br/>  elements.scene.classList = `scene shoe-${index + 1}`<br/>  repeatIndex++;<br/>};</span><span id="9961" class="nt kt iq ns b gy on ok l ol om">const timeline = gsap.timeline({ <br/>  repeat: -1, <br/>  onRepeat: setColorClass<br/>});</span></pre><h1 id="ecf2" class="ks kt iq bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">决赛成绩</h1><p id="382b" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">现在，每一次迭代，颜色都会改变，活动的鞋子就会可见。Tadaa！这里我们有完整的动画:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="op oq gj gh gi or os bd b be z dk">Final result</figcaption></figure><p id="9c78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢这篇文章，我很好奇你的<a class="ae lv" href="http://dribbble.com/" rel="noopener ugc nofollow" target="_blank">无聊的</a>拍摄娱乐。或者你有没有看到一个你想写出来的好镜头？请随时在Twitter上联系我，或者在回复中发表评论。</p><p id="c739" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你也可以在我的<a class="ae lv" href="https://codepen.io/timrijkse" rel="noopener ugc nofollow" target="_blank"> Codepen </a>账号上找到更多例子。</p><p id="9d7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">补间快乐！👊</p><h2 id="18ab" class="nt kt iq bd ku nu nv dn ky nw nx dp lc jy ny nz lg kc oa ob lk kg oc od lo oe bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="25c1" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae lv" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="jp ir">AI in Plain English</strong></a><a class="ae lv" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="jp ir">UX in Plain English</strong></a><a class="ae lv" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="jp ir">Python in Plain English</strong></a><strong class="jp ir"/>——谢谢，继续学习！</p><p id="9deb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae lv" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">submissions @ plain English . io</strong></a><strong class="jp ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>More JavaScript Array Tips — Removing Falsy Values, Random Array Entry, and Reversing Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更多JavaScript数组技巧——移除虚假值、随机数组条目和反转数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/more-javascript-array-tips-removing-falsy-values-get-random-array-entry-and-reversing-arrays-759473ba25a4?source=collection_archive---------2-----------------------#2019-12-30">https://javascript.plainenglish.io/more-javascript-array-tips-removing-falsy-values-get-random-array-entry-and-reversing-arrays-759473ba25a4?source=collection_archive---------2-----------------------#2019-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/061bd8beea270cda7b7fc59a9f0f078e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mLsGO1273qywZBVi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@theluckyneko?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">The Lucky Neko</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5c95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript和其他编程语言一样，有许多方便的技巧，让我们更容易编写程序。在这篇文章中，我们将看看如何做不同的事情，涉及到数组，如删除falsy值，从一个数组中获得随机值，以及反转数组。</p><h1 id="4ca0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">删除虚假值</h1><p id="b000" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript中，falsy值包括0、空字符串、<code class="fe me mf mg mh b">null</code>、<code class="fe me mf mg mh b">undefined</code>、<code class="fe me mf mg mh b">false</code>和<code class="fe me mf mg mh b">NaN</code>。我们在处理数组时经常会遇到这些值，它们可能会导致错误。</p><p id="b4f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像<code class="fe me mf mg mh b">null</code>、<code class="fe me mf mg mh b">undefined</code>和<code class="fe me mf mg mh b">NaN</code>这样的值经常是意想不到的，如果我们在对它们做任何事情之前从一个数组中消除它们会更容易。</p><p id="aa88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用一些方法来实现这一点，包括使用数组可用的<code class="fe me mf mg mh b">filter</code>方法。<code class="fe me mf mg mh b">filter</code>方法接受一个回调函数。</p><p id="6981" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调函数有两个参数，第一个是数组条目，第二个是被<code class="fe me mf mg mh b">filter</code>方法迭代的数组的索引。<code class="fe me mf mg mh b">filter</code>方法过滤器让我们定义我们想要保留的内容，并返回一个新数组，根据我们返回的布尔表达式保存条目。</p><p id="b515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何被定义为至少接受值并返回布尔值的函数都可以被用作回调函数，所以我们可以使用<code class="fe me mf mg mh b">filter</code>方法过滤掉的一种方式是使用<code class="fe me mf mg mh b">Boolean</code>工厂函数，该函数在其第一个参数中接受任何对象，如果是true，则返回<code class="fe me mf mg mh b">true</code>，如果是falsy，则返回<code class="fe me mf mg mh b">false</code>。如果<code class="fe me mf mg mh b">true</code>从回调函数返回，那么该项目将被保留。</p><p id="5a6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，它将丢弃它返回的数组中的值。例如，我们可以通过直接传入<code class="fe me mf mg mh b">filter</code>方法来使用<code class="fe me mf mg mh b">Boolean</code>函数，就像我们在下面的代码中做的那样:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8766" class="mq lc iq mh b gy mr ms l mt mu">let arr = [0, 'yellow', '', NaN, 1, true, undefined, 'orange', false];<br/>arr = arr.filter(Boolean);<br/>console.log(arr);</span></pre><p id="1079" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe me mf mg mh b">console.log</code>得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d5c4" class="mq lc iq mh b gy mr ms l mt mu">["yellow", 1, true, "orange"]</span></pre><p id="d5a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以使用感叹号运算符两次，将the值强制转换为<code class="fe me mf mg mh b">true</code>，将falsy值强制转换为<code class="fe me mf mg mh b">false</code>。为此，我们只需在value前面加两次感叹号，这样我们就可以使用类似下面代码中的操作符来过滤掉falsy值:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="44f7" class="mq lc iq mh b gy mr ms l mt mu">let arr = [0, 'yellow', '', NaN, 1, true, undefined, 'orange', false];<br/>arr = arr.filter(a =&gt; !!a);<br/>console.log(arr);</span></pre><p id="58f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们运行上面的代码，我们应该得到和以前一样的东西。同样，我们可以传递一个从<code class="fe me mf mg mh b">Boolean</code>函数返回值的函数，而不是将<code class="fe me mf mg mh b">Boolean</code>函数直接传递给<code class="fe me mf mg mh b">filter</code>方法，以使表达式更加清晰:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ad6" class="mq lc iq mh b gy mr ms l mt mu">let arr = [0, 'yellow', '', NaN, 1, true, undefined, 'orange', false];<br/>arr = arr.filter(a =&gt; Boolean(a));<br/>console.log(arr);</span></pre><p id="709d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们运行上面的代码，应该会得到和以前一样的结果。</p><h1 id="8623" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从数组中随机获取一个值</h1><p id="0ffa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了从一个数组中获取一个随机值，我们可以使用<code class="fe me mf mg mh b">Math.random</code>方法来获取一个随机索引以及一些其他代码。</p><p id="553a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们比仅仅调用<code class="fe me mf mg mh b">Math.random</code>方法需要更多的代码，因为它只返回一个介于0和1之间的随机数，这意味着它返回一个介于0和1之间的十进制数，这是我们不想要的。</p><p id="f9d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着它必须乘以数组的长度才能得到一个介于0和数组长度之间的值。然后，我们需要对该结果调用<code class="fe me mf mg mh b">Math.floor</code>，将其向下舍入到最接近的整数。</p><p id="d5d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以像下面的代码一样使用<code class="fe me mf mg mh b">Math.random</code>方法:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ca9b" class="mq lc iq mh b gy mr ms l mt mu">let arr = ['yellow', 'orange', 'blue', 'purple', 'green'];<br/>const chosenValue = arr[(Math.floor(Math.random() * (arr.length)))]<br/>console.log(chosenValue);</span></pre><p id="798e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码通过运行<code class="fe me mf mg mh b">Math.random() * (arr.length)</code>生成索引，其范围从0到数组的长度。然后，我们使用<code class="fe me mf mg mh b">Math.floor</code>方法将其向下舍入，该方法采用我们想要向下舍入的数字，这样我们可以将该数字向下舍入到最接近的整数，因为我们不想要非整数。</p><p id="02f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以把它传递到括号中，得到生成的索引。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/e8f86f74bf1e67c1553adca848a61c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3QgzvyO9JfuroGhk"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rpnickson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Roberto Nickson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="4c7b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反转数组</h1><p id="0404" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用JavaScript数组对象附带的<code class="fe me mf mg mh b">reverse</code>方法来反转数组。它不接受任何参数，就地反转一个数组。例如，我们可以在下面的代码中使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1c38" class="mq lc iq mh b gy mr ms l mt mu">let arr = ['yellow', 'orange', 'blue', 'purple', 'green'];<br/>arr.reverse();<br/>console.log(arr);</span></pre><p id="7d5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="45d2" class="mq lc iq mh b gy mr ms l mt mu">["green", "purple", "blue", "orange", "yellow"]</span></pre><p id="b12f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面的<code class="fe me mf mg mh b">console.log</code>输出。除了对象之外，<code class="fe me mf mg mh b">reverse</code>方法还可以处理任何基本对象。例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3ebd" class="mq lc iq mh b gy mr ms l mt mu">let arr = [{<br/>  a: 1<br/>}, {<br/>  b: 2<br/>}, {<br/>  c: 3<br/>}];<br/>arr.reverse();<br/>console.log(arr);</span></pre><p id="beed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe me mf mg mh b">console.log</code>得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="adcc" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  {<br/>    "c": 3<br/>  },<br/>  {<br/>    "b": 2<br/>  },<br/>  {<br/>    "a": 1<br/>  }<br/>]</span></pre><p id="edb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">reverse</code>方法也适用于任何有数字键的对象。例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3c44" class="mq lc iq mh b gy mr ms l mt mu">let arrLikeObj = {<br/>  0: 'a',<br/>  1: 'b',<br/>  2: 'c',<br/>  length: 3<br/>}<br/>Array.prototype.reverse.call(arrLikeObj);<br/>console.log(arrLikeObj);</span></pre><p id="b321" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe me mf mg mh b">console.log</code>得到以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="61b2" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "0": "c",<br/>  "1": "b",<br/>  "2": "a",<br/>  "length": 3<br/>}</span></pre><p id="671f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要对象有从0开始并从0开始递增1的数字键和一个<code class="fe me mf mg mh b">length</code>属性，上面的代码就能工作。我们也可以使用<code class="fe me mf mg mh b">apply</code>方法来做同样的事情，如下面的代码所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b864" class="mq lc iq mh b gy mr ms l mt mu">let arrLikeObj = {<br/>  0: 'a',<br/>  1: 'b',<br/>  2: 'c',<br/>  length: 3<br/>}<br/>Array.prototype.reverse.apply(arrLikeObj);<br/>console.log(JSON.stringify(arrLikeObj, (key, value) =&gt; value, 2));</span></pre><p id="9e7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们再次从<code class="fe me mf mg mh b">console.log</code>获得以下输出:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a016" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "0": "c",<br/>  "1": "b",<br/>  "2": "a",<br/>  "length": 3<br/>}</span></pre><h1 id="af30" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="18ae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript中，falsy值包括0、空字符串、<code class="fe me mf mg mh b">null</code>、<code class="fe me mf mg mh b">undefined</code>、<code class="fe me mf mg mh b">false</code>和<code class="fe me mf mg mh b">NaN</code>。我们在处理数组时经常会遇到这些值，它们可能会导致错误。像<code class="fe me mf mg mh b">null</code>、<code class="fe me mf mg mh b">undefined</code>和<code class="fe me mf mg mh b">NaN</code>这样的值经常是意想不到的，如果我们在对它们做任何事情之前从一个数组中消除它们会更容易。</p><p id="752b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过一些方法来实现这一点，包括使用数组可用的<code class="fe me mf mg mh b">filter</code>方法。</p><p id="97d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">Boolean</code>函数或者应用感叹号两次来将一个对象转换成一个布尔值。要反转一个数组，我们可以使用调用数组上的<code class="fe me mf mg mh b">reverse</code>方法来反转它。</p><p id="d392" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">reverse</code>方法也适用于任何具有从0开始递增1的数字键和一个<code class="fe me mf mg mh b">length</code>属性的对象。我们可以通过使用<code class="fe me mf mg mh b">Math.random</code>乘以数组的长度和<code class="fe me mf mg mh b">Math.floor</code>方法从数组中获得一个随机条目。</p></div></div>    
</body>
</html>
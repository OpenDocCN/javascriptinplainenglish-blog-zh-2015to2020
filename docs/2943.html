<html>
<head>
<title>Getting Started With Testing in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript测试入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-testing-in-js-d7cca461740a?source=collection_archive---------12-----------------------#2020-08-08">https://javascript.plainenglish.io/getting-started-with-testing-in-js-d7cca461740a?source=collection_archive---------12-----------------------#2020-08-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6cc3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Jest库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2a2c5242c526eae50e5d7097986824e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MG9E-4jtWcOFDhJvp-1ttA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@noguidebook?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Rachel</a> on <a class="ae kv" href="https://unsplash.com/s/photos/jester?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fb3c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="4d97" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我最近开始尝试向我的项目添加测试，以便了解它们是如何工作的，并确保我的函数返回它们应该返回的结果。在我学习如何实现测试的过程中，我发现了Jest测试框架。</p><h1 id="e835" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">入门指南</h1><p id="84e6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为了从Jest开始，您需要确保它作为一个依赖项保存在您的<code class="fe mk ml mm mn b">package.json</code>中。如果您的项目还没有一个<code class="fe mk ml mm mn b">package.json</code>文件，在您的终端运行:</p><p id="ea5a" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">npm init -y</code></p><p id="a7b8" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这将用默认值初始化<code class="fe mk ml mm mn b">package.json</code>。</p><p id="ba9c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">从这里开始，我们要给我们的<code class="fe mk ml mm mn b">package.json</code>添加一个笑话。在您的终端中，写下:</p><p id="e9b7" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">npm i --save-dev jest</code></p><p id="0548" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">我们将把它保存为dev依赖项，因为我们只在开发项目时使用它。</p><p id="8f6e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">现在，进入package.json并在<code class="fe mk ml mm mn b">"scripts"</code>下，在显示<code class="fe mk ml mm mn b">"tests"</code>的地方，写入:<code class="fe mk ml mm mn b">"jest"</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/6792f090c290bc50716cba56a81523ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J2M3XjbCvmGOK698ZrgLZQ.png"/></div></div></figure><p id="f899" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">要查看它是否工作，运行:<code class="fe mk ml mm mn b">npm test</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/8e1fd510e1fe7f2e8af360a8db5365bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2CYhvPZNW_n5L2FMQuHItw.png"/></div></div></figure><p id="777b" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">您应该看到它显示“测试失败”，但这是因为我们没有编写任何测试或代码来测试。</p><h2 id="ddb1" class="mv kx iq bd ky mw mx dn lc my mz dp lg lx na nb li mb nc nd lk mf ne nf lm ng bi translated">让我们添加一些代码并编写我们的测试</h2><p id="a665" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我已经创建了一个名为<code class="fe mk ml mm mn b">testing_file.js</code>的文件。在那个文件中，我有两个函数叫做<code class="fe mk ml mm mn b">map</code>和<code class="fe mk ml mm mn b">cubeAll</code>。</p><p id="4bfc" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">map</code>是一个高阶函数。它需要两个参数:<em class="nh">一个数组</em>和一个<em class="nh">回调函数</em>。它将遍历数组中的每个元素，对每个元素应用一个回调函数。然后，它应该返回一个新数组，该数组的元素是将回调函数应用于输入数组中的每个元素的结果。</p><p id="c829" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><code class="fe mk ml mm mn b">cubeAll</code>取一个参数:<em class="nh">一个数组</em>。它调用内部的<code class="fe mk ml mm mn b">map</code>函数。<code class="fe mk ml mm mn b">cubeAll</code>将返回这些数字的立方数组。在文件的底部，我添加了导出，这样我就可以将它导入到包含我们测试的文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="b48a" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">然后我们将创建我们的测试文件。我们将名字定为<code class="fe mk ml mm mn b">testing_file.test.js</code>。</p><p id="e63e" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">我们将把函数导入到新的测试文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="1b49" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">现在我们想测试一下<code class="fe mk ml mm mn b">cubeAll</code>功能是否正常工作。我们希望看到无论传入哪个数组，所有的元素都应该被立方化并产生一个新的数组。</p><p id="a471" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">Jest有一个名为<code class="fe mk ml mm mn b">test</code>的内置函数，它有两个参数:<em class="nh">测试描述</em>和<em class="nh">函数</em>。我们将在控制台中看到测试描述，它将让我们知道正在运行什么测试。</p><p id="394c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">第二个参数是运行测试所调用的内容。在这个函数内部，我们将调用<code class="fe mk ml mm mn b">cubeAll</code>函数及其参数。Jest有一些关键字，我们将在名为<code class="fe mk ml mm mn b">expect</code>和<code class="fe mk ml mm mn b">.toStrictEqual</code>的函数中使用。由于我们使用的是数组，我将使用<code class="fe mk ml mm mn b"> .toStrictEqual</code>，但是根据您测试的内容，这个匹配器可能会有所不同。查看Jest中的<a class="ae kv" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">文档</a>，看看你应该使用什么样的匹配器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="9ad7" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">如果这看起来有点混乱，让我解释一下语法。</p><p id="923c" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">在第3行，第一个参数是我的字符串形式的测试描述。我的测试描述了我想让<strong class="lq ir">原始数组的元素在一个新数组中返回，这些元素是</strong>的立方。</p><p id="2e4d" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">第5行，我<strong class="lq ir">期望</strong>传递给参数<code class="fe mk ml mm mn b">[1,2,3]</code>到<strong class="lq ir">的<code class="fe mk ml mm mn b">cubeAll</code>函数的结果严格等于</strong>到<code class="fe mk ml mm mn b">[1,8,27]</code>。</p><p id="6c21" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated"><em class="nh">(你可以输入任何你想要的参数。我只是碰巧写了</em> <code class="fe mk ml mm mn b"><em class="nh">[1,2,3]</em></code>)</p><p id="7c98" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">我的第二个测试<strong class="lq ir">期望</strong>得到的数组<strong class="lq ir">与</strong>的长度为三。</p><p id="f5ed" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">现在我们将运行<code class="fe mk ml mm mn b">npm test</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/c7cc1c8a284be662eef90d14e33e95e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWjxtWLHmx5lpes1N2A-HQ.png"/></div></div></figure><p id="17eb" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">如您所见，我的测试已经通过，我们可以在控制台中看到到底通过了哪些测试。</p><p id="2211" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">这个库的伟大之处在于，如果测试失败，它还会向您显示您的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/846834c05d4c8fbac9c1fcd4df6eda2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neSV3vTYISapkG7phFwgRA.png"/></div></div></figure><p id="80e6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">我们可以清楚地看到哪些测试没有通过，绿色表示预期结果，红色表示实际结果。我的数组应该等于<code class="fe mk ml mm mn b">[1,8,27]</code>，但是它返回了<code class="fe mk ml mm mn b">[1,4,9]</code>。</p><h1 id="a276" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么我们要写测试？</h1><p id="552e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这种测试方式被称为单元测试。我们正在检查每一小段代码，原因是这样可以更容易地找到有问题的代码。最终，它使得编写更大代码库的过程更加高效。一开始可能会很耗时，但是现在有短期的痛苦总比写一堆代码然后不知道哪里出了问题要好。</p><p id="6fe6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">例如，如果我不小心在<code class="fe mk ml mm mn b">cubeAll</code>函数中写了<code class="fe mk ml mm mn b">n * n</code>而不是<code class="fe mk ml mm mn b">n ** 3</code>，那该怎么办？嗯，当我编写“应该返回这些数字的立方数组”的测试时，它会失败，然后我可以看到预期的结果与我实际收到的结果相比较。</p><p id="2009" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">现在你可能会问，难道我就不能<code class="fe mk ml mm mn b">console.log</code>一下函数，看看我没有得到正确的结果吗？是的，你可以，但是如果你知道你的函数可能有多种情况呢？如果您在代码中不断地修改内容，但仍然想要相同的输出，该怎么办？换句话说，写出测试用例比必须不断地<code class="fe mk ml mm mn b">console.log</code>每件事要容易得多。</p><p id="a0f5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx mq lz ma mb mr md me mf ms mh mi mj ij bi translated">此外，想想当你和其他开发人员一起工作的时候。如果我将这些代码发送给其他人，他们可以自动看到我到底在测试什么，并且每当他们对函数进行更改或添加一些东西时，测试也会在那里供他们使用。虽然你显然不能测试所有的东西，但它确实使编写更干净的代码变得更容易。</p><h1 id="6070" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="2b68" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我希望这是关于如何开始编写自己的测试的有用介绍。查看<a class="ae kv" href="https://jestjs.io/docs/en/getting-started" rel="noopener ugc nofollow" target="_blank"> Jest库</a>了解更多信息。</p><h2 id="8c33" class="mv kx iq bd ky mw mx dn lc my mz dp lg lx na nb li mb nc nd lk mf ne nf lm ng bi translated">简单英语的JavaScript</h2><p id="2332" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="lq ir">！</strong></p></div></div>    
</body>
</html>
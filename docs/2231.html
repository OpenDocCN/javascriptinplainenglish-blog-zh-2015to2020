<html>
<head>
<title>Make a Browser Console Log Wait for a Page Reload</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让浏览器控制台日志等待页面重新加载</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-a-browser-console-log-wait-until-after-a-page-reload-bccc538c9938?source=collection_archive---------14-----------------------#2020-06-01">https://javascript.plainenglish.io/how-to-make-a-browser-console-log-wait-until-after-a-page-reload-bccc538c9938?source=collection_archive---------14-----------------------#2020-06-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ad12" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">快速JavaScript操作指南</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d4849382116bf2542e3a685246b5f7fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NXoZ-18NgxXN0eeS.jpg"/></div></div></figure><p id="33a2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有没有想过创建一个浏览器控制台日志，在页面重新加载后保持不变？当然，如果你在你的开发者控制台<a class="ae lk" href="https://stackoverflow.com/questions/5327955/how-to-make-google-chrome-javascript-console-persistent" rel="noopener ugc nofollow" target="_blank">启用了“保存日志”选项</a>，这不是问题，但是请听我说。</p><p id="dbd1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">假设您有一个带有开发服务器的JavaScript框架，当您在服务器运行时更新文件时，它通常会热重新加载。在少数情况下，热重新加载是不可能的，页面必须完全重新加载，你想警告你的用户，并解释为什么会发生这种情况。用<code class="fe ll lm ln lo b">console.warn()</code>在控制台上记录一个警告是很好的，但是当它出现在控制台上的时候，你不知道吗，<em class="lp">页面会重新加载</em>，浏览器会清除它。即使你的用户足够敏锐地注意到你的警告在屏幕上闪了几分之一秒，也肯定没有足够长的时间来真正地阅读。</p><p id="e301" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你<em class="lp">可以</em>说，如果你的任何用户不知道“保存日志”按钮在哪里，那是他们的问题，但是你比他们善良。你宁愿帮助他们掉进成功的陷阱。</p><p id="2b9f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">碰巧的是，这正是我前几天逛我最喜欢的开源项目<a class="ae lk" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>时遇到的问题。</p><p id="ab11" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我的天真中，我第一次尝试只是将<code class="fe ll lm ln lo b">console.warn()</code>移动到 <code class="fe ll lm ln lo b">window.location.reload()</code>后面的<em class="lp">线上，然后交叉手指，但这没有用。我试着在谷歌上搜索类似“页面重新加载后的控制台日志”的东西，但这只给了我如何打开“保存日志”的指示，我已经知道如何做了。</em></p><p id="bcec" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下是奏效的方法。在之前的<code class="fe ll lm ln lo b">console.warn()</code>语句中，我将警告的文本内容保存到窗口的<code class="fe ll lm ln lo b"><a class="ae lk" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage" rel="noopener ugc nofollow" target="_blank">sessionStorage</a></code>中一个名为<code class="fe ll lm ln lo b">"consoleWarnAfterReload"</code>的键中:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="514e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，在加载新页面所涉及的文件的顶部附近，我添加了几行来检查同一个<code class="fe ll lm ln lo b">sessionStorage</code>键。如果该项存在，它会将警告内容记录到控制台，然后从<code class="fe ll lm ln lo b">sessionStorage</code>中删除该项:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="c836" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那成功了！</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><p id="30fa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">知道另一种让控制台日志等到页面重新加载之后的方法吗？请回复——我很想听听这件事！</p><h2 id="6f74" class="lz ma in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated">简单英语的JavaScript</h2><p id="6f34" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">喜欢这篇文章吗？如果有，通过<a class="ae lk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kq io">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Intro to Module Bundlers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模块捆扎机简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/intro-to-module-bundlers-fd3df36925e5?source=collection_archive---------5-----------------------#2020-11-21">https://javascript.plainenglish.io/intro-to-module-bundlers-fd3df36925e5?source=collection_archive---------5-----------------------#2020-11-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1d77" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">最强大的web开发工具之一的详细介绍</h2></div><p id="dab8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现代web应用程序极其复杂。有了像<a class="ae ky" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae ky" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>这样的Javascript工具，像<a class="ae ky" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> Sass </a>或<a class="ae ky" href="http://lesscss.org/" rel="noopener ugc nofollow" target="_blank"> Less </a>这样的CSS工具，以及像<a class="ae ky" href="https://pugjs.org/api/getting-started.html" rel="noopener ugc nofollow" target="_blank"> pug </a>这样的HTML工具，任何web项目都在实现各种库和技术。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/b02c350e2debc4f564c561b5859007cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d7PjxYNiKRWa4pQL"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clément H</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7311" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所有这些工具都运行在Javascript上。在<a class="ae ky" href="http://www.ecma-international.org/ecma-262/6.0/" rel="noopener ugc nofollow" target="_blank"> ECMAScript 2015+ </a>中，您可以将您的代码分成多个文件，并在需要使用它们的功能时将这些文件<code class="fe lp lq lr ls b">import</code>到您的应用程序中。例如，当构建一个React应用程序时，你总是在每个JS文件的顶部写<code class="fe lp lq lr ls b">import React from 'react'</code>。</p><p id="c126" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，浏览器中没有内置这种功能，所以现代代码捆绑器以几种形式提供这种功能:根据需要异步加载javascript，或者将所有javascript合并到一个文件中，通过一个<code class="fe lp lq lr ls b">&lt;script&gt;</code>标签加载。</p><p id="4d64" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果没有模块捆绑器，您将不得不手动组合文件或将Javascript加载到带有无数<code class="fe lp lq lr ls b">&lt;script&gt;</code>标签的HTML中，这是可行的，但有几个主要缺点:</p><ul class=""><li id="5caa" class="lt lu in ke b kf kg ki kj kl lv kp lw kt lx kx ly lz ma mb bi translated">您必须跟踪需要哪些代码以及正确的加载顺序</li><li id="db6c" class="lt lu in ke b kf mc ki md kl me kp mf kt mg kx ly lz ma mb bi translated">多个<code class="fe lp lq lr ls b">&lt;script&gt;</code>标签意味着对服务器的更多调用，从而降低性能</li><li id="3f62" class="lt lu in ke b kf mc ki md kl me kp mf kt mg kx ly lz ma mb bi translated">大量的手工工作</li></ul><p id="231f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你考虑使用NPM模块，这需要数百个<code class="fe lp lq lr ls b">&lt;script&gt;</code>标签和手工工作来实现你正在使用的所有第三方依赖。</p><p id="aea4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是<strong class="ke io">模块捆绑器</strong>的用武之地，它自动完成组合、缩小(使代码更小/更有效)、代码分割(减少初始加载时间)和加载Javascript的过程。它直接与npm或bower等包管理器一起工作，将第三方代码与您的代码有效地结合起来。</p><p id="2f51" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在最基本的层面上，模块包将多个JS文件(比如您的源代码和第三方源代码)组合成一个称为“Javascript包”的大文件。如果你使用的是NPM的包，它会处理依赖项的导入和依赖项的依赖，创建一个依赖图来跟踪如何将所有代码放在一起。让我们通过使用当今最流行的模块捆绑器<code class="fe lp lq lr ls b">webpack</code>来看看这在实际项目中是如何工作的</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/30ff769fddb1a848b431846d78d85af3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*AtdPijrVkMioJ7RP.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">How the bundler combines JS modules into static assets</figcaption></figure><h1 id="a867" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">创建基本Webpack项目</h1><p id="d58b" class="pw-post-body-paragraph kc kd in ke b kf na jo kh ki nb jr kk kl nc kn ko kp nd kr ks kt ne kv kw kx ig bi translated">打开你的工作区，在<code class="fe lp lq lr ls b">src</code>文件夹中创建一个名为<code class="fe lp lq lr ls b">index.js</code>的文件。目前这个文件没有依赖项，所以没有理由使用模块捆绑器。在index.js文件中写入<code class="fe lp lq lr ls b">console.log('hello world')</code>。由于不依赖外部模块，这在Node或浏览器中也能很好地工作。</p><p id="d996" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，创建一个NPM模块并引入一些依赖项。在你的终端上运行<code class="fe lp lq lr ls b">npm init -y</code>来初始化一个NPM项目。</p><p id="b92e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们安装最流行的npm库，<code class="fe lp lq lr ls b">lodash</code>。运行<code class="fe lp lq lr ls b">npm i -s lodash</code>。这将为您安装<code class="fe lp lq lr ls b">lodash</code>。</p><p id="4de7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe lp lq lr ls b">public</code>文件夹中创建一个<code class="fe lp lq lr ls b">index.html</code>文件。这是你的应用程序的前端。将以下代码添加到该html文件中:</p><pre class="la lb lc ld gt nf ls ng nh aw ni bi"><span id="f7d9" class="nj mj in ls b gy nk nl l nm nn">&lt;!doctype html&gt;<br/><br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="utf-8"&gt;<br/><br/>  &lt;title&gt;Document&lt;/title&gt;</span><span id="54a2" class="nj mj in ls b gy no nl l nm nn">  &lt;script <em class="np">src</em>="../src/index.js"&gt;&lt;/script&gt;</span><span id="3a42" class="nj mj in ls b gy no nl l nm nn">&lt;/head&gt;<br/><br/>&lt;body&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="d098" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前，我们的<code class="fe lp lq lr ls b">index.js</code>文件没有使用<code class="fe lp lq lr ls b">lodash</code>，所以如果您在浏览器中查看<code class="fe lp lq lr ls b">index.html</code>文件并打开控制台，您将在控制台中看到“hello world”。这很好，但是如果我们想使用<code class="fe lp lq lr ls b">lodash</code>呢？</p><p id="62df" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们用以下内容更新我们的<code class="fe lp lq lr ls b">index.js</code>文件:</p><pre class="la lb lc ld gt nf ls ng nh aw ni bi"><span id="20e4" class="nj mj in ls b gy nk nl l nm nn">import {camelCase} <em class="np">from</em> 'lodash';</span><span id="5a5b" class="nj mj in ls b gy no nl l nm nn">console.log(camelCase('Hello World'))</span></pre><p id="89f6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们从<code class="fe lp lq lr ls b">lodash</code>导入<code class="fe lp lq lr ls b">camelCase</code>函数，并在我们的控制台日志中使用它。</p><p id="889f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你打开控制台，你会看到一个错误:<code class="fe lp lq lr ls b">Uncaught SyntaxError: Cannot use import statement outside a module</code>。</p><p id="9ff3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们得到这个错误的原因是因为浏览器不知道在哪里可以找到<code class="fe lp lq lr ls b">lodash</code>。这就是Webpack帮助我们的地方。运行<code class="fe lp lq lr ls b">npm i --save-dev webpack webpack-cli</code>安装Webpack。</p><p id="5e83" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在<code class="fe lp lq lr ls b">package.json</code>中设置一个脚本来实际运行<code class="fe lp lq lr ls b">webpack</code>。将以下内容插入您的<code class="fe lp lq lr ls b">package.json</code>:</p><pre class="la lb lc ld gt nf ls ng nh aw ni bi"><span id="0521" class="nj mj in ls b gy nk nl l nm nn">{<br/>   ...<br/>   "scripts": {<br/>      "build": "webpack"<br/>   },<br/>   ...<br/>}</span></pre><p id="4d3c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果运行<code class="fe lp lq lr ls b">npm run build</code>，它会执行<code class="fe lp lq lr ls b">webpack</code>命令，并自动将<code class="fe lp lq lr ls b">src/index.js</code>文件编译成<code class="fe lp lq lr ls b">dist/main.js</code>文件。现在，如果我们改变我们的<code class="fe lp lq lr ls b">index.html</code>文件，在<code class="fe lp lq lr ls b">&lt;script&gt;</code>标签中引用这个<code class="fe lp lq lr ls b">main.js</code>文件:</p><pre class="la lb lc ld gt nf ls ng nh aw ni bi"><span id="3a7c" class="nj mj in ls b gy nk nl l nm nn">&lt;!doctype <em class="np">html</em>&gt;<br/>&lt;html <em class="np">lang</em>="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta <em class="np">charset</em>="utf-8"&gt;<br/>  &lt;title&gt;Document&lt;/title&gt;<br/>  &lt;script <em class="np">src</em>="../dist/main.js"&gt;&lt;/script&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;</span><span id="0dbe" class="nj mj in ls b gy no nl l nm nn">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="2301" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的浏览器中打开<code class="fe lp lq lr ls b">index.html</code>，我们应该看到<code class="fe lp lq lr ls b">helloWorld</code>打印在我们的控制台上。恭喜你。你已经完成了你的第一份申请！</p><p id="806b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，这是使用默认的Webpack配置。如果您想对这个项目进行更多的配置，并使用模块加载器(加载非JS资产)、开发服务器或其他特性，请在这里参考Webpack config <a class="ae ky" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank">的文档。</a></p><h1 id="4ff7" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">结论</h1><p id="e30f" class="pw-post-body-paragraph kc kd in ke b kf na jo kh ki nb jr kk kl nc kn ko kp nd kr ks kt ne kv kw kx ig bi translated">正如我们所见，模块捆绑器是构建现代网站的不可思议的工具。我们研究了如何构建一个基本的Webpack项目，并将源代码和外部库捆绑到一个高效的文件中。这是对Webpack的一个非常基本的介绍，你可以通过阅读<a class="ae ky" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack文档</a>来探索大量强大的功能。</p><h1 id="7031" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">保持联络</h1><p id="9102" class="pw-post-body-paragraph kc kd in ke b kf na jo kh ki nb jr kk kl nc kn ko kp nd kr ks kt ne kv kw kx ig bi translated">有很多内容，我很感谢你读我的。我是一名年轻的企业家，我写的是软件开发以及我经营和发展公司的经历。你可以在这里注册我的简讯<a class="ae ky" href="https://newsletter.cometcode.io/" rel="noopener ugc nofollow" target="_blank"/></p><p id="a702" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请随时联系我，在Linkedin或Twitter上与我联系。</p></div></div>    
</body>
</html>
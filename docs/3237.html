<html>
<head>
<title>Best of Modern JavaScript —Template Literals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华—模板文字</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-template-literals-5e6e34124a66?source=collection_archive---------1-----------------------#2020-09-12">https://javascript.plainenglish.io/best-of-modern-javascript-template-literals-5e6e34124a66?source=collection_archive---------1-----------------------#2020-09-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/22efafdee2b6723d77cf8248a9e2daa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mj5wfCW0HE8L1jDZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Brett Jordan</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b1cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究JavaScript模板文字。</p><h1 id="952a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板文字</h1><p id="444f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">模板文字是一个字符串文字，我们可以将JavaScript表达式直接插入到字符串中。</p><p id="7657" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8354" class="mn lc iq mj b gy mo mp l mq mr">const firstName = 'james';<br/>console.log(`Hello ${firstName}`);</span></pre><p id="893d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="28ff" class="mn lc iq mj b gy mo mp l mq mr">'Hello james'</span></pre><p id="9ca2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它由反斜线而不是单引号和双引号分隔。</p><h1 id="44c1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在模板文本中转义</h1><p id="5466" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">反斜杠用于在模板文本中转义。</p><p id="e2b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7200" class="mn lc iq mj b gy mo mp l mq mr">`\``</span></pre><p id="fdc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并获得:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2aa0" class="mn lc iq mj b gy mo mp l mq mr">'`'</span></pre><p id="511b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们不能写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fb66" class="mn lc iq mj b gy mo mp l mq mr">`\${`</span></pre><p id="f56f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们会得到一个语法错误。</p><p id="8049" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除此之外，它们就像普通的字符串一样工作。</p><p id="351d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模板文本中的行终止符总是LF。</p><p id="aa38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">LF是换行符，是Unix和macOS使用的<code class="fe ms mt mu mj b">\n</code>或U+000A。</p><p id="3afc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CR，也就是老Mac OS用的<code class="fe ms mt mu mj b">\r</code>或者U+900D。</p><p id="8b61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CRLF，也就是Windows使用的<code class="fe ms mt mu mj b">\r\n</code>。</p><p id="d3d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板文字中，它们都被规范化为LF。</p><h1 id="6297" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">标记的模板文字</h1><p id="bbc1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">带标记的模板文本是在模板文本前面放一个标记。</p><p id="259f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8801" class="mn lc iq mj b gy mo mp l mq mr">tagFunction`Hello ${firstName} ${lastName}`</span></pre><p id="c92b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<code class="fe ms mt mu mj b">tagFunction</code>是我们在字符串上调用的函数。</p><p id="da71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这和写作是一样的:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f738" class="mn lc iq mj b gy mo mp l mq mr">tagFunction(['Hello ',<!-- --> <!-- -->' '],<!-- --> <!-- -->firstName,<!-- --> <!-- -->lastName)</span></pre><p id="eb1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标签接受模板字符串和占位符的替换。</p><p id="44fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">替换是在运行时完成的。</p><p id="f992" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是模板字符串在编译时是静态已知的。</p><p id="cf2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标签函数还会得到未经解释的原始版本。</p><p id="1fdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还得到反斜杠特殊的最终版本。</p><h1 id="ce1b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">原始字符串</h1><p id="d351" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ES6有用于原始字符串的<code class="fe ms mt mu mj b">String.raw</code>模板标签。</p><p id="6678" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回字符串，所有反斜杠保持不变。</p><p id="9106" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b6d0" class="mn lc iq mj b gy mo mp l mq mr">const str = String.raw`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus fringilla mauris vel erat facilisis lacinia. \n</span><span id="fcf9" class="mn lc iq mj b gy mv mp l mq mr">Vivamus tincidunt, massa sit amet fermentum rhoncus, nibh mi convallis elit, eget bibendum eros ipsum elementum purus. Donec tristique ligula mi, non dapibus quam finibus et. Orci varius natoque penatibus et magnis dis parturient montes`</span></pre><p id="773a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">\n</code>完好无损。</p><p id="7dc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当我们需要保持字符串中的反斜杠时，这是很有用的。</p><p id="0356" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">sh</code>模板标签来运行shell命令。</p><p id="b5a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2683" class="mn lc iq mj b gy mo mp l mq mr">const<!-- --> <!-- -->proc<!-- --> <!-- -->=<!-- --> <!-- -->sh`ps ax | grep ${pid}`;</span></pre><p id="c626" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像sh模板标签包这样的包为我们提供了<code class="fe ms mt mu mj b">sh</code>模板标签来运行带有标签的命令。</p><h1 id="2160" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">脸书图表</h1><p id="d19e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><a class="ae kc" href="https://facebook.github.io/relay/" rel="noopener ugc nofollow" target="_blank">脸书中继</a>让我们对GraphQL API进行查询。</p><p id="503c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="88ca" class="mn lc iq mj b gy mo mp l mq mr">import React from "react"<br/>import { createFragmentContainer, graphql, QueryRenderer } from "react-relay"<br/>import environment from "./lib/createRelayEnvironment"<br/>import ArtistHeader from "./ArtistHeader"</span><span id="4d07" class="mn lc iq mj b gy mv mp l mq mr">export default function ArtistRenderer({artistID}) {<br/>  return (<br/>    &lt;QueryRenderer<br/>      environment={environment}<br/>      query={graphql`<br/>        query QueryRenderersArtistQuery($artistID: String!) {<br/>          # The root field for the query<br/>          artist(id: $artistID) {<br/>            # A reference to your fragment container<br/>            ...ArtistHeader_artist<br/>          }<br/>        }<br/>      `}<br/>      variables={{artistID}}<br/>      render={({error, props}) =&gt; {<br/>        if (error) {<br/>          return &lt;div&gt;{error.message}&lt;/div&gt;;<br/>        } else if (props) {<br/>          return &lt;Artist artist={props.artist} /&gt;;<br/>        }<br/>        return &lt;div&gt;Loading&lt;/div&gt;;<br/>      }}<br/>    /&gt;<br/>  );<br/>}</span></pre><p id="f41e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用来自<a class="ae kc" href="https://relay.dev/" rel="noopener ugc nofollow" target="_blank">https://relay.dev/</a>的例子。</p><p id="7f8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需将我们自己的模板字符串传入<code class="fe ms mt mu mj b">graphql</code>标签来发出请求。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/170eaa4a9cea4384242d31ae94eae846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QHmUfmPVBzGEJ8Ix"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hartnashs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ashley Anderson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a3c1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="78a1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">模板字符串很有用。</p><p id="4470" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们让我们插值表达式，用标签调用。</p><h2 id="0e6a" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="ba5a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
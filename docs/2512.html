<html>
<head>
<title>Who Else Wants to Write Clean JavaScript Code?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">还有谁想写干净的JavaScript代码？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/who-else-wants-to-write-clean-javascript-code-ff4f7896e6bd?source=collection_archive---------0-----------------------#2020-07-01">https://javascript.plainenglish.io/who-else-wants-to-write-clean-javascript-code-ff4f7896e6bd?source=collection_archive---------0-----------------------#2020-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9996" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让你的同事爱上你的代码的7个技巧。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b9143a81e1bf93066341cf4738518733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jYQ0ES0Amld37ESV"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@cebbbinghaus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christopher Robin Ebbinghaus</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c4ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的学院:“这个代码的作者是谁？”</p><p id="866e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">期待:“是我！”你骄傲地回答，因为那段代码美得像公主。</p><p id="fcaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现实:“不，不是我！”你撒谎是因为代码丑得像头野兽。</p><p id="0c9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果你想让期望变成现实，继续读下去。</p><h1 id="a4b6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.使用有意义的变量名</h1><p id="48c8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用有意义的名字，一看就知道是什么。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="480a" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">// Don't</strong><br/>let xyz = validate(‘amyjandrews’);</span><span id="6d7e" class="mu lt iq mq b gy mz mw l mx my"><strong class="mq ir">// Do</strong><br/>let isUsernameValid = validate(‘amyjandrews’);</span></pre><p id="fec4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将集合类型命名为复数是有意义的。因此，不要忘记<strong class="ky ir"> s </strong>:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="633a" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">// Don't</strong><br/>let number = [3, 5, 2, 1, 6];</span><span id="c21e" class="mu lt iq mq b gy mz mw l mx my"><strong class="mq ir">// Do</strong><br/>let numbers = [3, 5, 2, 1, 6];</span></pre><p id="5597" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">函数做事情。所以，函数的名字应该是一个动词。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="84bd" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">// Don't</strong><br/>function usernameValidation(username) {}</span><span id="4a7f" class="mu lt iq mq b gy mz mw l mx my"><strong class="mq ir">// Do</strong><br/>function validateUsername(username) {}</span></pre><p id="c03e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以<strong class="ky ir">开头的</strong>为布尔型:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="be83" class="mu lt iq mq b gy mv mw l mx my">let isValidName = validateName(‘amyjandrews’);</span></pre><p id="d81a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要直接使用常量，因为随着时间的推移，你会想，“这到底是什么？”最好在使用常量之前给它们命名:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5ff9" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">// Don't<br/></strong>let area = 5 * 5 * 3.14;</span><span id="ff50" class="mu lt iq mq b gy mz mw l mx my"><strong class="mq ir">// Do</strong><br/>const PI = 3.14;<br/>let radius = 5;<br/>let area = PI * radius * radius;</span></pre><p id="037e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于回调函数，不要偷懒，只把参数命名为一个字符，就像<strong class="ky ir"> h，j，d </strong>(可能连你，那些名字的父亲，都不知道它们是什么意思)。长话短说，如果参数是人，传<strong class="ky ir">人</strong>；如果是书，传<strong class="ky ir">书</strong>:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="276d" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">// Don't</strong><br/>let books = [‘Learn JavaScript’, ‘Coding for Beginners’, ‘CSS the Good Parts’];</span><span id="24b3" class="mu lt iq mq b gy mz mw l mx my">books.forEach(function(b) {<br/>  // …<br/>});</span><span id="a4e0" class="mu lt iq mq b gy mz mw l mx my"><strong class="mq ir">// Do</strong><br/>let books = [‘Learn JavaScript’, ‘Coding for Beginners’, ‘CSS the Good Parts’];</span><span id="41cf" class="mu lt iq mq b gy mz mw l mx my">books.filter(function(book) {<br/>  // …<br/>});</span></pre><h1 id="d8d2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.抛出信息错误</h1><p id="f86b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><em class="na">“出现错误。”</em></p><p id="7c73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者干脆:<em class="na">“错误。”</em></p><p id="e801" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么错误？</p><p id="ae33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每次在一些应用或者网站上看到那样的错误，作为一个用户，我都很讨厌。我做错了什么？我犯了那个错误？什么错误？你不告诉我，我怎么知道我接下来要做什么？</p><p id="d5c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的用户大概和我有一样的感受。有时候他们会卸载你的app，再也回不来了。</p><p id="db86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">写一个清晰的错误信息一点也不难。</p><p id="1cd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果没有互联网连接，则:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d3ed" class="mu lt iq mq b gy mv mw l mx my">showMessage(‘No internet connection! Please check your connection and try again!’);</span></pre><p id="04fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果用户忘记输入什么，那么:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f19e" class="mu lt iq mq b gy mv mw l mx my">showMessage(‘Please enter your username’);</span></pre><p id="570c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更重要的是，明确的错误有助于快速调试，节省大量开发时间。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5cd1" class="mu lt iq mq b gy mv mw l mx my">if (error) {<br/>  throw new Error(‘validation.js:checkUser: special characters are now allowed’);<br/>}</span></pre><p id="2d34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以上是你可以参考的错误信息格式。</p><h1 id="e732" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.尽快返回</h1><p id="7a69" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">看看下面的代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="455f" class="mu lt iq mq b gy mv mw l mx my">function login(username, password) {<br/>  if (isValid(username)) {<br/>    // Log in<br/>  } else {<br/>    showMessage(‘Username is not valid’);<br/>  }<br/>}</span></pre><p id="653f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">else部分是不必要的。我们应该通过提前返回消息来删除它:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b583" class="mu lt iq mq b gy mv mw l mx my">function login(username, password) {<br/>  if (!isValid(username)) {<br/>    showMessage(‘Username is not valid’);<br/>    return;<br/>  }</span><span id="967e" class="mu lt iq mq b gy mz mw l mx my">  // Log in<br/>}</span></pre><p id="3a08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使得你的代码更加清晰。边缘案例应放在前面，然后是需要处理更多逻辑的较长部分。</p><h1 id="dd7d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.不要给一个功能太多的权力</h1><p id="c3e8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">每个功能应该只承担一个责任。不要把一个做很多事情的强大功能。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="a12c" class="mu lt iq mq b gy mv mw l mx my">function validateAndLogin() {<br/>  // Do a lot of things here<br/>}</span></pre><p id="e153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">和</strong>不应该是函数名的一部分。<strong class="ky ir">、</strong>给一个职能增加更多的责任，从长远来看弊大于利。</p><p id="a1f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是最好的:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="ba3e" class="mu lt iq mq b gy mv mw l mx my">function validate() {<br/>  // Only validate<br/>}</span><span id="d194" class="mu lt iq mq b gy mz mw l mx my">function login() {<br/>  // Only login<br/>}</span></pre><h1 id="a52c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.避免副作用</h1><p id="6c8c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">任何功能之外的事情都不关它的事。所以这个函数不应该接触它们中的任何一个。</p><p id="237b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1439" class="mu lt iq mq b gy mv mw l mx my">var number = 3;</span><span id="698b" class="mu lt iq mq b gy mz mw l mx my">function changeNumber(add) {<br/>  number = 2 + add;<br/>  return number;<br/>}</span><span id="f32a" class="mu lt iq mq b gy mz mw l mx my">changeNumber();</span></pre><p id="d6c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您调用changeNumber函数时，变量<strong class="ky ir">的编号</strong>将被更改为6。这是一个真正的问题，因为有时你对全局变量的变化毫无头绪。所以，你应该在你的项目中避免这种副作用。</p><p id="d638" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">怎么会？通过使用<a class="ae kv" href="https://medium.com/better-programming/what-is-a-pure-function-3b4af9352f6f" rel="noopener">纯函数</a>。</p><p id="33b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的例子可以改为:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0236" class="mu lt iq mq b gy mv mw l mx my">function addThree(summand) {<br/>  const constant = 3;<br/>  const sum = summand + constant;</span><span id="0685" class="mu lt iq mq b gy mz mw l mx my">  return sum;<br/>}</span></pre><h1 id="8bb7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.创建模块</h1><p id="a683" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你创建了一些函数。他们似乎做着类似的动作。比如<strong class="ky ir">验证用户名</strong>和<strong class="ky ir">验证密码</strong>。你感觉到它们可以被归入一个模块。姑且称之为<strong class="ky ir">验证</strong>模块。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="bfe1" class="mu lt iq mq b gy mv mw l mx my">const validateUsername = function (username) {<br/>  // Validate username<br/>};</span><span id="adfd" class="mu lt iq mq b gy mz mw l mx my">const validatePassword = function (password) {<br/>  // Validate password<br/>};</span><span id="a236" class="mu lt iq mq b gy mz mw l mx my">Module.exports = {<br/>  validateUsername,<br/>  validatePassword<br/>};</span><span id="73cd" class="mu lt iq mq b gy mz mw l mx my">const { <br/>  validateUsername,<br/>  validatePassword<br/>} = require(‘./validation’);</span><span id="1c14" class="mu lt iq mq b gy mz mw l mx my">let isUsernameValid = validateUsername(‘amyjandrews’);</span></pre><h1 id="9b53" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.使用代码格式插件</h1><p id="01f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我的大多数项目都使用VSCode。如果你使用的是VSCode，为了代码美观，一定要安装更漂亮的<a class="ae kv" href="https://medium.com/javascript-in-plain-english/9-great-javascript-extensions-for-visual-studio-code-to-speed-up-your-development-8b3275248718" rel="noopener"/>。</p><p id="cade" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个插件将为你节省一些格式化代码的时间。多亏了它，你可以利用这段时间更加关注代码的质量。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="591d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">综上所述，你应该考虑你将把项目转让给的人，“如何让他们感到高兴继续这个项目？”因为当有人把项目交给你时，这也是你所期望的。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt ni"><a href="https://medium.com/javascript-in-plain-english/how-to-write-effective-javascript-code-that-every-programmer-loves-to-maintain-a490b42b9b9f" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">如何编写每个程序员都喜欢维护的有效JavaScript代码</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">要不要写更易维护的代码？运用坚实的原则</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div></div></div>    
</body>
</html>
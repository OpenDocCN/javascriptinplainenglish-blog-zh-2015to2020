<html>
<head>
<title>Using JavaScript to Create Trello-Like Card Re-Arrange and Drag and Drop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript创建类似Trello的卡片重排和拖放</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-javascript-to-create-trello-like-card-re-arrange-and-drag-and-drop-557e60125bb4?source=collection_archive---------1-----------------------#2020-01-04">https://javascript.plainenglish.io/using-javascript-to-create-trello-like-card-re-arrange-and-drag-and-drop-557e60125bb4?source=collection_archive---------1-----------------------#2020-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a1a7" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">拖放提示</h2><div class=""/><div class=""><h2 id="b52e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在一个类似特雷罗的板子上</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/642f40a8666465e25a3aa644c415b5d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgMP5DihSlb2K8As7T_QXg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@maguay?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Matthew Guay</a> on <a class="ae le" href="https://unsplash.com/s/photos/trello-app?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9fb2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi mb translated">他这篇文章的灵感来自于<a class="mk ml ep" href="https://medium.com/u/e24703fb7921?source=post_page-----557e60125bb4--------------------------------" rel="noopener" target="_blank"> Joshua Saunders </a>写的一篇很棒的文章，题为“<a class="ae le" href="https://medium.com/better-programming/creating-trellos-ui-with-css-grid-ed1fbfcd9448?source=bookmarks---------47------------------" rel="noopener">用CSS网格创建Trello的UI</a>我<strong class="lh ja">强烈推荐</strong>您阅读他关于全功能UI的精彩文章。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><blockquote class="mt mu mv"><p id="1da1" class="lf lg mw lh b li lj ka lk ll lm kd ln mx lp lq lr my lt lu lv mz lx ly lz ma ij bi translated">作为Trello的狂热用户，我发现该应用程序<a class="ae le" href="https://trello.com/" rel="noopener ugc nofollow" target="_blank"> </a>的一大优点是它让我能够轻松地在列表之间<em class="iq">拖放，并在列表</em>中 <strong class="lh ja"> <em class="iq">重新排列</em> </strong> <em class="iq">项。</em></p></blockquote><p id="baee" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这篇文章中，我想模拟这种列表之间的拖放，以及列表项、卡片的重新排列或交换。</p><p id="b850" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于您的时间很宝贵，我们将以简单但有启发性的方式来做这件事。虽然简单，但我会给你留下足够的想法来扩展和改进我们在这里做的事情。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><ul class=""><li id="e6e6" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated">如果你不熟悉网页上的拖放，你可以在这里查看我的帖子<a class="ae le" href="https://link.medium.com/gICrP0kLLZ" rel="noopener"/>。然而，我将在本文中回顾它的核心。</li><li id="5a92" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">重新安排将是这篇文章的新内容。基本上，重新排列就像以编程方式交换两个变量的值。</li></ul></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h2 id="81c1" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">我们将做什么</h2><p id="2677" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">想要在提到的两项功能方面像Trello一样，我们将创建一个“板”和三个“列表”；Trello使用的术语和带文字的卡片。因此，我们保持我们的用户界面简化。</p><blockquote class="ol"><p id="1be8" class="om on iq bd oo op oq or os ot ou ma dk translated">我们将能够在所有三个列表之间拖放卡片，以及重新排列(交换)给定列表中的卡片</p></blockquote><p id="611b" class="pw-post-body-paragraph lf lg iq lh b li ov ka lk ll ow kd ln lo ox lq lr ls oy lu lv lw oz ly lz ma ij bi translated">这里有几张截图，或者你可以在我的网站上试试。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pa"><img src="../Images/c38860e4ba78840a9ffb4c6f122e0ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CSie9UPxk03zgY2pRkUQdw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Initial Board</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pb"><img src="../Images/d7d95abc7cdbf1e69bc978ed5eeb22f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJ6a7JF4sUGJQYUrLue07A.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Drag and Drop between lists</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pc"><img src="../Images/31550481a4c469049c894adfdbf57821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mQ0U6OGI6TPZuMcFgbzZA.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Re-arrange items in the “In progress” list and move an item to the “done” list</figcaption></figure><h2 id="1f94" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">我们开始吧</h2><p id="d589" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">创建三个文件并保存在同一个文件夹中。</p><ul class=""><li id="cb4d" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated">一个名为<strong class="lh ja">index.html的网页。</strong></li><li id="5a9a" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">一个名为<strong class="lh ja"> styles.css </strong>的CSS文件。</li><li id="9216" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">一个名为<strong class="lh ja"> dragdropswap.js. </strong>的JavaScript文件</li></ul><p id="d48c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们将创建HTML和CSS，测试运行它以确保核心UI正常工作，然后在添加JavaScript代码之前讨论它。</p><p id="b27e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">HTML—index.html</strong></p><pre class="kp kq kr ks gt pd pe pf pg aw ph bi"><span id="98ea" class="no np iq pe b gy pi pj l pk pl">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;title&gt;Trello-Like&lt;/title&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    <br/>    &lt;link rel="stylesheet" type="text/css" href="styles.css"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;div class="board-layout"&gt;<br/>   <br/>        &lt;div class="left"&gt;<br/>          &lt;div class="board-text"&gt;Today Board&lt;/div&gt;<br/>         <br/>        &lt;/div&gt;<br/>       <br/>      &lt;div id='boardlists' class="board-lists"&gt;<br/>        &lt;div id='list1' class="board-list" ondrop="dropIt(event)" ondragover="allowDrop(event)"&gt;<br/>          &lt;div class="list-title"&gt;<br/>            To Do<br/>          &lt;/div&gt;<br/>          <br/>            &lt;div  id='card1' class="card" draggable="true" ondragstart="dragStart(event)"&gt;<br/>            Work on article<br/>            &lt;/div&gt;<br/>            &lt;div  id='card2' class="card" draggable="true" ondragstart="dragStart(event)"&gt;<br/>            Back up database<br/>            &lt;/div&gt;<br/>            &lt;div id='card3' class="card" draggable="true" ondragstart="dragStart(event)"&gt;<br/>            Build Lambda function<br/>            &lt;/div&gt;<br/>            &lt;div id='card4' class="card" draggable="true" ondragstart="dragStart(event)"&gt;<br/>            Work on course content<br/>            &lt;/div&gt;<br/>            &lt;div id='card5' class="card" draggable="true" ondragstart="dragStart(event)"&gt;<br/>            Debug SQL code<br/>            &lt;/div&gt;<br/>         <br/>        &lt;/div&gt;<br/>        &lt;div  id='list2' class="board-list" ondrop="dropIt(event)" ondragover="allowDrop(event)"&gt;<br/>          &lt;div  class="list-title"&gt;<br/>          In Progress<br/>          &lt;/div&gt;<br/>          <br/>          <br/>        &lt;/div&gt;<br/>        &lt;div  id='list3' class="board-list"  ondrop="dropIt(event)" ondragover="allowDrop(event)"&gt;<br/>          &lt;div  class="list-title"&gt;<br/>            Done<br/>            &lt;/div&gt;<br/>             <br/>            &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="5e52" class="no np iq pe b gy pm pj l pk pl">&lt;script src='dragdropswap.js'&gt;&lt;/script&gt;</span><span id="68d3" class="no np iq pe b gy pm pj l pk pl">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4e38" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">CSS—styles . CSS</strong></p><pre class="kp kq kr ks gt pd pe pf pg aw ph bi"><span id="2941" class="no np iq pe b gy pi pj l pk pl">/* This is based on the work of Joshua Saunders */<br/>.board-layout {<br/>    background-color: rgb(100, 92, 165);<br/>    font-family: Arial, Helvetica, sans-serif;<br/>    font-size: 15px;<br/>    display: grid;<br/>    grid-template-rows: max-content auto;<br/>    grid-gap: 10px;<br/>    padding: 10px;<br/>    height:800px;<br/>  }</span><span id="6ac3" class="no np iq pe b gy pm pj l pk pl">.list-layout {<br/>    display: grid;<br/>    grid-gap: 10px;<br/>   <br/>  }</span><span id="6bb7" class="no np iq pe b gy pm pj l pk pl">.board-text {<br/>    font-weight: bold;<br/>    font-size: 28px;<br/>    padding: 5px;<br/>  }</span><span id="9b4d" class="no np iq pe b gy pm pj l pk pl">.board-lists {<br/>    display: grid;<br/>    grid-auto-columns: 275px;<br/>    grid-auto-flow: column;<br/>    grid-gap: 10px;<br/>    height: 400px;<br/> <br/>  }<br/>  <br/>  .board-list {<br/>    background-color: rgb(235, 236, 240);<br/>    border-radius: 3px;<br/>    display: grid;<br/>    grid-auto-rows: max-content;<br/>    grid-gap: 10px;</span><span id="5f76" class="no np iq pe b gy pm pj l pk pl">/* Chrome use a fixed height */</span><span id="da3c" class="no np iq pe b gy pm pj l pk pl">height: max-content;<br/>    padding: 10px;<br/>  }<br/>  <br/>  .list-title {<br/>    font-size: 18px;<br/>    font-weight: bold;<br/>  }</span><span id="6d7a" class="no np iq pe b gy pm pj l pk pl">.card {<br/>    background-color: white;<br/>    border-radius: 3px;<br/>    box-shadow: 0 1px 0 rgba(9,30,66,.25);<br/>    padding: 10px;<br/>    cursor:pointer;<br/>  }</span></pre><h2 id="cc6b" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">试运转</h2><p id="46c9" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">打开index.html。</p><p id="9c10" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它应该如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pa"><img src="../Images/c38860e4ba78840a9ffb4c6f122e0ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CSie9UPxk03zgY2pRkUQdw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Interface without functionality</figcaption></figure><h1 id="3681" class="pn np iq bd nq po pp pq nt pr ps pt nw kf pu kg nz ki pv kj oc kl pw km of px bi translated">讨论</h1><p id="c161" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">CSS只是设计了黑板、列表和卡片的样式。</p><h2 id="7224" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">HTML</h2><p id="f5b4" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">主<div>只是设置了“板”</div></p><p id="7b00" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来是三个“清单”。</p><p id="0c52" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">列表</strong></p><p id="6a8a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您检查每个列表:列表1、列表2和列表3，您将看到它们都具有以下属性，</p><p id="4fd8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> ondrop="dropIt(事件)" ondragover="allowDrop(事件)"</strong></p><ul class=""><li id="0bc6" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated"><strong class="lh ja"> ondrop </strong>属性将包含我们用于在列表之间拖放<em class="mw">的大部分代码，但也包含用于交换列表中项目的<em class="mw">。</em></em></li><li id="e7d9" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated"><strong class="lh ja"> ondragover </strong>属性将只包含一行代码来覆盖默认行为。默认行为是不允许掉落。覆盖这一点将允许我们拖放。</li></ul><p id="dc6a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">卡片</strong></p><p id="f6af" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您会注意到，只有第一个列表，列表1，有带属性的卡片。<br/> <strong class="lh ja">可拖动="true" ondragstart="dragStart(事件)"</strong></p><ul class=""><li id="fff2" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated"><strong class="lh ja">可拖动</strong>属性允许我们的项目是否可拖动。</li><li id="8fd1" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated"><strong class="lh ja"> ondragstart </strong>属性允许我们指定被拖动的目标对象。</li></ul><blockquote class="mt mu mv"><p id="5417" class="lf lg mw lh b li lj ka lk ll lm kd ln mx lp lq lr my lt lu lv mz lx ly lz ma ij bi translated">第一个列表中的卡需要这些属性，而其他列表不需要这些属性的原因是，当卡在列表之间拖动时，属性会随之移动，并成为目标列表的一部分。</p></blockquote><h2 id="5248" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">现在是JavaScript</h2><p id="fd17" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">将以下JavaScript添加到<strong class="lh ja">dragdopswap . js</strong>。那我们就讨论一下。</p><pre class="kp kq kr ks gt pd pe pf pg aw ph bi"><span id="2c0b" class="no np iq pe b gy pi pj l pk pl">function allowDrop(ev) {<br/>    ev.preventDefault();  // default is not to allow drop<br/>  }<br/>  function dragStart(ev) {<br/>    // The 'text/plain' is referring the Data Type (DOMString) <br/>    // of the Object being dragged.<br/>    // ev.target.id is the id of the Object being dragged<br/>    ev.dataTransfer.setData("text/plain", ev.target.id);<br/>  }<br/>  function dropIt(ev) {<br/>    ev.preventDefault();  // default is not to allow drop<br/>    let sourceId = ev.dataTransfer.getData("text/plain");<br/>    let sourceIdEl=document.getElementById(sourceId);<br/>    let sourceIdParentEl=sourceIdEl.parentElement;<br/>    // ev.target.id here is the id of target Object of the drop<br/>    let targetEl=document.getElementById(ev.target.id)<br/>    let targetParentEl=targetEl.parentElement;<br/>  <br/>    // Compare List names to see if we are going between lists<br/>    // or within the same list<br/>    if (targetParentEl.id!==sourceIdParentEl.id){</span><span id="1725" class="no np iq pe b gy pm pj l pk pl">// If the source and destination have the same <br/>        // className (card), then we risk dropping a Card in to a Card<br/>        // That may be a cool feature, but not for us!<br/>        if (targetEl.className === sourceIdEl.className ){<br/>          // Append to parent Object (list), not to a <br/>          // Card in the list<br/>          // This is in case you drag and drop a Card on top <br/>          // of a Card in a different list<br/>           targetParentEl.appendChild(sourceIdEl);<br/>         <br/>        }else{<br/>            // Append to the list<br/>             targetEl.appendChild(sourceIdEl);<br/>           <br/>        }<br/>       <br/>    }else{<br/>        // Same list. Swap the text of the two cards<br/>        // Just like swapping the values in two variables<br/>      <br/>        // Temporary holder of the destination Object<br/>        let holder=targetEl;<br/>        // The text of the destination Object. <br/>        // We are really just moving the text, not the Card<br/>        let holderText=holder.textContent;<br/>        // Replace the destination Objects text with the sources text<br/>        targetEl.textContent=sourceIdEl.textContent;<br/>        // Replace the sources text with the original destinations<br/>        sourceIdEl.textContent=holderText;<br/>        holderText='';</span><span id="77cb" class="no np iq pe b gy pm pj l pk pl">}<br/>    <br/>  }</span></pre><h2 id="ad87" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">试运转</h2><p id="ba7d" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">打开index.html。</p><p id="110a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">尝试在列表之间和列表内拖放。重新安排。</p><h2 id="4bb2" class="no np iq bd nq nr ns dn nt nu nv dp nw lo nx ny nz ls oa ob oc lw od oe of iw bi translated">JavaScript在做什么？</h2><p id="612f" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated"><strong class="lh ja">基础</strong></p><p id="766e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当拖动开始时，<strong class="lh ja"> dragStart </strong>功能使用<strong class="lh ja"> dataTransfer </strong> Object的<strong class="lh ja"> setData </strong>方法捕获拖动的目标，它是DOMString(数据类型为文本/普通)。)</p><p id="d13e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当我们下降时，完成所有工作的<strong class="lh ja"> dropIt </strong>功能必须做几件事。</p><p id="bd45" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们必须使用<strong class="lh ja"> dataTransfer </strong>的<strong class="lh ja"> getData </strong>方法来获取被拖动的源对象。我们还可以获得投放的目标对象。</p><p id="88dd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">明细</strong></p><p id="b51d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">拖放</strong>中最重要的部分是首先确定物体是在列表之间还是在列表中的<em class="mw">之间被拖放(重新排列)。)</em></p><p id="f91d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">列表间拖放</strong></p><p id="f8b6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是通过比较源对象和目标对象的<strong class="lh ja"> parentElement.id </strong>来完成的。</p><p id="93fc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">如果parentElement.id不同</strong>，我们还有一个额外的测试要做。如果我们不小心，将一张卡片放在一张卡片(不同的列表)上，它会将文本附加到现有的卡片上。<em class="mw">这可能是很酷的行为，但不是我们想要的。我们想添加到目的地列表中。</em></p><p id="ead6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了确保我们不会把一张卡放到另一张卡上，我们检查了每个对象的类名。</p><ul class=""><li id="e6fb" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated">如果它们都是card，那么我们把列表添加到目的地的parentElement。</li><li id="3697" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">如果它们不都是card，那么源类名是Card，目的类名是List，所以我们只需将List追加到目的对象。</li></ul><p id="be33" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">在列表内拖放(重新排列)</strong></p><p id="5437" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">如果parentElement.id是相同的</strong>，我们实际上只是交换了卡中的文本，而不是卡本身。这个过程就像交换两个变量的值的标准过程。我们需要一个临时的holder变量。</p><h1 id="d35a" class="pn np iq bd nq po pp pq nt pr ps pt nw kf pu kg nz ki pv kj oc kl pw km of px bi translated">结论</h1><p id="6fd8" class="pw-post-body-paragraph lf lg iq lh b li og ka lk ll oh kd ln lo oi lq lr ls oj lu lv lw ok ly lz ma ij bi translated">在这篇文章中，我们访问或重温了拖放，但也增加了重新排列的能力。我们在一个类似特雷罗的环境中这样做，只是因为我觉得特雷罗很酷，而且我真的很喜欢<a class="mk ml ep" href="https://medium.com/u/e24703fb7921?source=post_page-----557e60125bb4--------------------------------" rel="noopener" target="_blank">约书亚·桑德斯</a>的作品。</p><p id="bee3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们绝对没有考虑到特雷罗的所有可能性和所有特征。以下是您可能想要做的一些事情，以扩展我们已经完成的工作。</p><ul class=""><li id="2900" class="na nb iq lh b li lj ll lm lo nc ls nd lw ne ma nf ng nh ni bi translated">重新排列列表本身。像特雷罗一样交换名单。</li><li id="e6d8" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">从一个列表拖动到另一个列表，并在卡片之间插入<em class="mw">，而不仅仅是追加到列表的末尾。</em></li><li id="e7a4" class="na nb iq lh b li nj ll nk lo nl ls nm lw nn ma nf ng nh ni bi translated">像Trello一样为每张卡创建完整的对象，而不仅仅是文本，以存储其他数据。</li></ul><p id="f5f1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">还有更多的事情可以做。我将亲自处理这件事。</p><p id="a690" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">感谢您抽出时间阅读并快乐编码！</strong></p><p id="ca97" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在Medium上阅读所有你想要的文章，并通过成为Medium会员来帮助我继续写作，每月只需5美元。</p><div class="py pz gp gr qa qb"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="qc ab fo"><div class="qd ab qe cl cj qf"><h2 class="bd ja gy z fp qg fr fs qh fu fw iz bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="qi l"><h3 class="bd b gy z fp qg fr fs qh fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qj l"><p class="bd b dl z fp qg fr fs qh fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qk l"><div class="ql l qm qn qo qk qp ky qb"/></div></div></a></div></div></div>    
</body>
</html>
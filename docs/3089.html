<html>
<head>
<title>How Microfrontends Improved Our Team’s Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微前端如何提高我们团队的生产力</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-microfrontends-improved-our-teams-productivity-79538ba6618b?source=collection_archive---------7-----------------------#2020-08-27">https://javascript.plainenglish.io/how-microfrontends-improved-our-teams-productivity-79538ba6618b?source=collection_archive---------7-----------------------#2020-08-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="10ee" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">一个超过10个团队的应用程序可能很难开发，但是微前端的使用提高了产品质量，极大地提高了我们的生产力。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e571f38a383140715984ff74ed8d92fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YbMPIZjnTiX1aLdr"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@judebeck?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jude Beck</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0639" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">概观</h1><p id="c156" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在这篇文章中，我告诉你为什么我们使用微前端策略，如何实现它，以及它对我的团队产生的影响。</p><p id="f137" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我还在本文末尾提供了一个功能示例，您可以根据自己的喜好使用它。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="66c2" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">语境</h1><p id="a293" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">“微前端”是一个最近讨论很多的话题，幸运的是我们可以在互联网上找到关于这个话题的好材料，并且已经有一些工具可以帮助我们应用这个策略。</p><p id="b3d2" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在这篇文章中，我报告了我和我的团队在我们的一个产品的创建和发展中使用这种策略的经验，包括一些概念、结果和我们从中获得的东西。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="e32c" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们接到的任务是为现有的web应用程序创建一个新功能，但这不是全部，这个功能应该在某个时候与其他现有系统相关联或独立工作。</p><p id="4d03" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">鉴于这项任务的复杂性，我们认为这是创建微前端的最佳案例。但是有些东西帮助了这个选择，主要是因为我们需要在其上附加产品的web应用程序，最初有一些问题让我们有点担心。它…</p><ul class=""><li id="6d63" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">…由十几个不同的团队维护，因此我们需要使用分支来编写新功能</li><li id="b280" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">…使用培训发布方案进行部署，新代码通常每15天投入生产，也就是说，新用户需要很长时间才能获得更改</li><li id="9e6a" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">…没有良好的测试覆盖和任何功能测试套件，所以我们需要做出的某些决定至少是非常紧张的，因为我们害怕损害其他团队的功能。</li></ul></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="2e86" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">可用工具</h1><p id="0ed3" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为了解决我们的问题，我们做了一些研究来决定哪一个是最好的决定。一个积极的方面是，微前端的概念不是什么新东西，它可以以多种方式应用，每种方式都有其利弊，我们可以通过实例或现代工具来使用iframes。</p><p id="eeb1" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在我们进行这项研究时，我们提出了一些替代方案和工具，最终选择了Single-SPA:</p><ul class=""><li id="898d" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated"><strong class="ln io">iframe</strong>—优点:<em class="nm">实现更快，只需包含iframe就可以了。应用程序之间的通信可以通过PostMessage </em>进行。缺点:复制库，对用户体验有负面影响，几乎不允许定制(因为我们只有一个区域)，与PostMessage的通信可能不安全。</li><li id="813b" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated"><a class="ae ks" href="https://www.mosaic9.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln io">马赛克9</strong></a><strong class="ln io"/>——对我们的语境来说太复杂了。</li><li id="0059" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated"><a class="ae ks" href="https://single-spa.js.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ln io"/></a><strong class="ln io"/>——它完美地结合了我们的需求和期望。</li></ul></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="2c42" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">为什么是单人水疗？</h1><p id="cb46" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们进行了概念验证(POC)并选择了Single-SPA，因为该库将为我们带来一些好处:</p><ul class=""><li id="a4f6" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">实现起来并不复杂(一旦我们理解了它背后的概念)</li><li id="0bf1" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">只需对现有系统进行少量改动</li><li id="5cff" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">主要是:不复制库的可能性(如果你需要的话)，所以用户不需要下载更大的javascript构建！</li></ul></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="e8a6" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">单一Spa概念</h1><p id="f5cd" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为了理解下面的例子，有必要理解一些简单的概念，有些是Single Spa合并的，有些是它创建的。</p><p id="2415" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我会尽量客观，这样你就不会在看书的时候睡着了😁…</p><h2 id="1d74" class="nn ku in bd kv no np dn kz nq nr dp ld lu ns nt lf ly nu nv lh mc nw nx lj ny bi translated">嵌入式概念</h2><p id="4531" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><strong class="ln io">导入地图</strong> —查看以下示例:</p><p id="ce80" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><code class="fe nz oa ob oc b">import { html } from 'module'</code></p><p id="5e81" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在上面的摘录中，“<em class="nm">HTML”</em>将从“<em class="nm">模块”</em>中导入，这些模块将依次放在我们项目的“<em class="nm">node _ modules”</em>文件夹中。使用导入映射，我们可以定义"<em class="nm">模块"</em>是项目的一个外部依赖项，为它定义一个位置和一个别名。像这样:</p><pre class="kd ke kf kg gt od oc oe of aw og bi"><span id="d6ee" class="nn ku in oc b gy oh oi l oj ok">&lt;<strong class="oc io">script type="importmap"</strong>&gt;<br/>{<br/>  "imports": {<br/>    "@module": "https://module.com/module.js"<br/>  }<br/>}<br/>&lt;/<strong class="oc io">script</strong>&gt;</span></pre><p id="8803" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">这样，当我们导入“@<em class="nm">modulo”</em>库时，我们将导入<a class="ae ks" href="https://modulo.com/modulo.js," rel="noopener ugc nofollow" target="_blank"><em class="nm">https://module.com/module.js</em></a>URL上的脚本，应用程序不会从“<em class="nm">node _ modules”</em>文件夹中获取它。</p><p id="7946" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">但是，无论如何……导入地图功能还不能在浏览器中使用……</p><p id="2466" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">为了避开这个事实，<em class="nm"> Single-Spa </em>使用了<em class="nm"> SystemJS </em>库，这是一个类似polyfill的库，这意味着它允许我们——除了其他功能之外——使用导入映射策略，但是做了一些修改:</p><ul class=""><li id="6d6d" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">导出包时，webpack(或汇总)必须在输出中包含<em class="nm">类型:系统</em>。参见下面打印的第二行:</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ol"><img src="../Images/b07d01e6aaf7fc4f17756452e5fda9f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_gSHldAfwG-gfBIc.png"/></div></div></figure><p id="7c90" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们稍后将回到这个配置。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="1b4d" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">自己的概念</h1><p id="1be8" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><strong class="ln io">生命周期<br/> </strong>如果你处理的是目前最流行的框架和库，你应该已经习惯了<em class="nm">“组件生命周期”</em>这个术语。我们知道组件何时在屏幕上被安装或卸载，我们可以利用这些信息做些什么——或者不做。</p><p id="5d0d" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">单SPA应用程序也有这个概念。在这种情况下，我们还知道MFE(微前端)何时从屏幕上加载、安装和卸载。在这种情况下，生命周期指的不是组件，而是整个应用程序。</p><p id="122a" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">一个单SPA应用程序只需要导出至少3个异步函数，这涉及到生命周期:<em class="nm"> bootstrap、mount和unmount。</em></p><p id="a030" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">申请类型</strong></p><p id="b5bf" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">归根结底，以下类型与微前端的加载方式有关。</p><ul class=""><li id="ffdc" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated"><strong class="ln io">注册应用:</strong>基于路由加载微前端时。类似于:<em class="nm">“如果我们在‘用户’路线上，加载微前端X，如果我们在‘设置’路线上，加载微前端Y——或者两者都加载”。</em></li><li id="7729" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated"><strong class="ln io">packages<em class="nm">:</em></strong>当一个组件加载微前端时，这样你的it可以挂载到任何地方。在这种情况下，我们可以有一个微前端来导出小组件，或者整个应用程序，我们可以将它们安装在屏幕上的任何地方。</li><li id="1fee" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated"><strong class="ln io">实用模块:</strong>在这种情况下，我们不在屏幕上挂载任何东西，我们甚至不关心它。在这些情况下，我们需要与几个微前端共享一个公共API，或者为所有应用程序共享一个公共设计系统。</li></ul><p id="7bc0" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">根应用vs子应用</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi om"><img src="../Images/109baa7e2a2833b7b6b7fcd08c28f4f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/0*xQbbAZOkRWWInZRs.png"/></div></figure><p id="a8f7" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">将<strong class="ln io"> <em class="nm">根应用</em> </strong> <em class="nm"> </em>理解为“将在运行时导入所有其他微前端(<strong class="ln io"> <em class="nm">子应用</em></strong><em class="nm">)</em><strong class="ln io"><em class="nm"/></strong>)的应用”。</p><p id="4fa0" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">有人问我是否有可能让一个子应用程序自己导入微前端，形成一个大的应用程序家族。我相信这是可能的，但所有这些复杂性有意义吗？</p><p id="5ffa" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">然而，我们将把本文的重点放在一个简单的<em class="nm">根←子</em>层次<em class="nm">上。</em></p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="4af7" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">想要更多概念？</h1><p id="f646" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">这些是目前的主要概念。但是如果你想更深入的话，我推荐这个页面:<a class="ae ks" href="https://single-spa.js.org/docs/microfrontends-concept#types-of-microfrontends" rel="noopener ugc nofollow" target="_blank">推荐设置</a>，里面有很多关于单人Spa的其他细节。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="7fcd" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">例子</h1><p id="cc4f" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">最精彩的部分，我知道！</p><p id="517d" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">这里的任务是创建一个根应用程序，它有自己的内容，并导入一个微前端作为注册的应用程序和包，类似于我们的现实。</p><p id="0f14" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">接下来，我将包含一些最重要部分的代码片段。完整的代码在文章末尾链接的存储库中。</p><p id="1b54" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">下面的代码片段被分成<em class="nm">根应用</em>代码和<em class="nm">子应用</em>代码<em class="nm">。</em></p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="5bef" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">根应用程序</h1><p id="dc63" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><strong class="ln io"><em class="nm">index.html</em></strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/9a66c98631001185f0a37d7595dfc345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u3P291w4cfmdcquC.png"/></div></div></figure><ul class=""><li id="d1c1" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第2行到第12行:导入共享库的映射，这里是为了避免重复。看，我们已经在第9行和第13行声明了ant-design，所以我们将为每个应用程序提供一个统一的设计系统。</li><li id="606f" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第14到21行:这里我们用微前端声明了ImportMap。根应用程序也有它的内容，所以我们也需要在第17行导入它。</li><li id="7ad0" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第23到25行:还记得我说过导入地图在浏览器中还不可用，我们需要SystemJs作为polyfill like吗？所以我们需要导入这些脚本。我们还需要第1行，并将第2行的脚本类型改为<em class="nm">‘system js-import map’。</em></li><li id="5ec5" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第30行:看看这个列表中的第二项，因为我们需要立即导入root-config来安装应用程序并立即显示其内容。</li></ul><p id="ab47" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">T5】web pack . config . jsT7】</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/b89f859cee937dc13b2814fff4a1fd86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A0i-MxDIAEQFvSWX.png"/></div></div></figure><ul class=""><li id="49d8" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第2行— Single-Spa有<em class="nm">webpack-config-Single-Spa</em>lib，它抽象了一些web pack配置。</li><li id="c0d0" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第12行——由于根应用程序有一些特性，我们需要修改<em class="nm">入口点。</em></li><li id="c211" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第13行——这里我们指出了在导入映射中报告的另外3个具有相同别名<em class="nm">的外部库。</em></li></ul><p id="7825" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">如何加载应用程序</strong></p><p id="ac64" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io"> <em class="nm">注册申请:</em> </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi op"><img src="../Images/ea20d4ec0d04ff2e37e7de0a95d41b15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*If8uNp4c7ivrinJO.png"/></div></div></figure><p id="f601" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在上面的代码片段中，我们加载微前端作为一个<em class="nm">注册的应用程序。</em></p><ul class=""><li id="7efd" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第5行—我们为我们的应用程序创建一个名称。它不必与T22导入地图别名相同。</li><li id="62a1" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第6行—返回要导入的微前端的函数。</li><li id="d0db" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第7行—我们告知应用程序将安装在哪些路由上，可能不止一个路由。</li><li id="0794" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第10行—注册所有应用程序后，我们启动singleSpa。稍后可以注册新的应用程序，但是调用start函数是必不可少的，这样所有的js包都将被加载，安装在正确的路径上。</li></ul><p id="a23a" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io"> <em class="nm">包裹— Modo 1 </em> </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oq"><img src="../Images/92f7952832274abf2db8d240f30bce90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*awLicbxOShG0fpno.png"/></div></div></figure><p id="e116" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">有两种方法可以导入一个包，第一种情况更简单，但是我们使用第二个库(第3行)。</p><ul class=""><li id="e0f3" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第9行——我们说我们的微前端将安装在一个div中</li><li id="aeb9" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第10行——我们使用与导入映射相同的<em class="nm">别名导入微前端</em></li></ul><p id="bad5" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io"> <em class="nm">包裹— Modo 2 </em> </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi or"><img src="../Images/588b4dd48698464b835e9d0e2aa3e06e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vH5NkJ_MZON8MUWt.png"/></div></div></figure><p id="a395" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">它更复杂，但我们不需要额外的库。</p><ul class=""><li id="0d63" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第5、19和13行——我们创建了一个对将要安装微前端的HTML元素的引用。</li><li id="2ab5" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第2行和第15行——最后，我们安装微前端。</li></ul></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="1322" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">子应用程序</h1><p id="08bd" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><strong class="ln io">入口点</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi os"><img src="../Images/f1cededbe26ec33ed60c3f7d4e693161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NhJkpcLVECvGS4Wz.png"/></div></div></figure><ul class=""><li id="640d" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">第4行和第7行——singleSpaReact简化了微前端和我们需要的所有生命周期函数的创建。</li><li id="3f80" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第10行—当天结束时将显示的所有代码。</li><li id="2d3c" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第11至13行—如果应用程序中出现错误，将显示该组件。这是一个JSX组件。</li><li id="c695" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第17行—需要导出的生命周期变量。</li><li id="3a91" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">第1行—标识MFE所必需的，它必须与导入映射的别名相同。打印如下:</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ot"><img src="../Images/7c555efc0f875ae4578f0ca0307dcddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RK5xjP2UNvP8_1SZ.png"/></div></div></figure></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="b459" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">所有这些都在起作用</h1><p id="1d6c" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">到目前为止，我们已经看到了如何实现微前端的概念和代码示例。</p><p id="6210" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我创建了一个示例应用程序，展示了该功能如何实时工作。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/38d66a371210c15731371c818b8c10aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*YB-8nfnAZZNC_q_d.gif"/></div></figure><p id="d3d7" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">你可以在GitHub上找到所有代码:</p><div class="ov ow gp gr ox oy"><a href="https://github.com/brunnohofmann/microfrontends_example" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd io gy z fp pd fr fs pe fu fw im bi translated">brunnohofmann/micro frontends _示例</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">使用singleSPA的微前端示例</h3></div></div><div class="pg l"><div class="ph l pi pj pk pg pl km oy"/></div></div></a></div></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="4cc6" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">结果</h1><p id="ef51" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">工作和使用微前端是一次非常有趣的经历，解决了我们团队面临的许多问题。</p><p id="8da4" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在一个有很多团队的大公司里，就像我们的例子，实现微前端很有意义。</p><p id="11d8" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">借助微前端战略，我们已经实现了一些非常有趣的优势:</p><ul class=""><li id="e0a3" class="my mz in ln b lo mh lr mi lu na ly nb mc nc mg nd ne nf ng bi translated">现在，我们不必等待产品发布来部署新功能，我们独立于主系统并拥有自己的管道，只要我们需要，部署就会立即进行。</li><li id="22d1" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">我们有质量战略！今天，我们有单元测试，集成测试，我们正在研究实施突变测试的最佳方式。所有这些都让我们更有信心去进化产品。</li><li id="3692" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">我们不需要害怕影响其他团队，因为如果微前端由于任何原因中断，系统可以恢复继续运行。</li><li id="13b6" class="my mz in ln b lo nh lr ni lu nj ly nk mc nl mg nd ne nf ng bi translated">该产品足够灵活，可以独立工作，也可以在另一个系统中工作。</li></ul><p id="7cbb" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">最终，我们设法满足了产品的期望，解决了困扰我们的问题。今天，我们有了我们需要的独立性，看到事情如何走到一起是非常好和有益的。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="f717" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">天哪，太多内容了。但是如果你到了这里，非常感谢你！告诉我，你用过微前端吗？如果有，体验如何？</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="22aa" class="kt ku in bd kv kw mt ky kz la mu lc ld jt mv ju lf jw mw jx lh jz mx ka lj lk bi translated">关于该主题的参考资料</h1><div class="ov ow gp gr ox oy"><a href="https://martinfowler.com/articles/micro-frontends.html#SharedComponentLibraries" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd io gy z fp pd fr fs pe fu fw im bi translated">微前端</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">Cam Jackson Cam Jackson是ThoughtWorks的一名全栈web开发人员和顾问，他对如何…</h3></div><div class="pm l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">martinfowler.com</p></div></div><div class="pg l"><div class="pn l pi pj pk pg pl km oy"/></div></div></a></div><div class="ov ow gp gr ox oy"><a href="https://micro-frontends.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd io gy z fp pd fr fs pe fu fw im bi translated">微前端</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">与多个团队一起构建现代web应用程序的技术、策略和方法，这些团队可以发布功能…</h3></div><div class="pm l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">micro-frontends.org</p></div></div><div class="pg l"><div class="po l pi pj pk pg pl km oy"/></div></div></a></div><div class="ov ow gp gr ox oy"><a href="https://gustafnk.github.io/microservice-websites/" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd io gy z fp pd fr fs pe fu fw im bi translated">微服务网站</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">Gustaf Nilsson Kotte (@gustaf_nk)请在GitHub资源库上提供反馈并报告问题注意:更多…</h3></div><div class="pm l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">gustafnk.github.io</p></div></div><div class="pg l"><div class="pp l pi pj pk pg pl km oy"/></div></div></a></div></div></div>    
</body>
</html>
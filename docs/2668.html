<html>
<head>
<title>JavaScript Tips — Calculating Time Difference, The Remainder Operator, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript技巧——计算时差、余数运算符等等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tips-calculating-time-difference-the-remainder-operator-and-more-884a6392f7fa?source=collection_archive---------8-----------------------#2020-07-13">https://javascript.plainenglish.io/javascript-tips-calculating-time-difference-the-remainder-operator-and-more-884a6392f7fa?source=collection_archive---------8-----------------------#2020-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/64d1e69aefa17ef0b95a873d3613e9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fJOvgkRDhqhCY3Ax"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@davealmine?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dawid Zawiła</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ca9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="e46f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取两个日期时间之间的时间差，并将其格式化为HH:mm:ss格式</h1><p id="60c4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要获得两个日期时间之间的时间差，我们可以使用moment.js中的<code class="fe me mf mg mh b">diff</code>方法</p><p id="e999" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就不用自己做计算了，</p><p id="6582" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9f61" class="mq lc iq mh b gy mr ms l mt mu">const earlierDateTime = "04/09/2020 14:00:00";<br/>const laterDateTime = "04/09/2020 16:20:30";</span><span id="3655" class="mq lc iq mh b gy mv ms l mt mu">const difference = moment(laterDateTime, "DD/MM/YYYY HH:mm:ss").diff(moment(earlierDateTime, "DD/MM/YYYY HH:mm:ss"))</span><span id="b936" class="mq lc iq mh b gy mv ms l mt mu">const diff = moment.utc(difference).format("HH:mm:ss");</span></pre><p id="da8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">diff</code>得到<code class="fe me mf mg mh b">laterDateTime</code>和<code class="fe me mf mg mh b">earlierDateTime</code>的差值，并将差值转换为UTC。</p><p id="9b7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将以<code class="fe me mf mg mh b">HH:mm:ss</code>格式输出差异。</p><p id="4b27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe me mf mg mh b">‘02:20:30'</code>作为<code class="fe me mf mg mh b">diff</code>的值。</p><p id="7c8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果两个日期时间之间的差异比今天长，那么我们必须进行一些额外的计算。</p><p id="2cf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="731d" class="mq lc iq mh b gy mr ms l mt mu">const earlierDateTime = "04/09/2020 14:00:00";<br/>const laterDateTime = "14/09/2020 16:20:30";<br/>const ms = moment(laterDateTime, "DD/MM/YYYY HH:mm:ss").diff(moment(earlierDateTime, "DD/MM/YYYY HH:mm:ss"));</span><span id="3aec" class="mq lc iq mh b gy mv ms l mt mu">const d = moment.duration(ms);</span><span id="0c7a" class="mq lc iq mh b gy mv ms l mt mu">const diff = `${Math.floor(d.asHours())}${moment.utc(ms).format(":mm:ss")}`;<br/>console.log(diff);</span></pre><p id="7082" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">diff</code>方法计算两个日期之间的分和秒。</p><p id="62ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">duration</code>方法得到持续时间。</p><p id="4a88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在duration <code class="fe me mf mg mh b">d</code>对象上使用<code class="fe me mf mg mh b">asHours</code>方法来获得经过的小时数。</p><p id="bd39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">utc</code>方法来格式化分和秒。</p><h1 id="f6e9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">string.charAt(x) vs string[x]</h1><p id="3d06" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从字符串中获取字符的<code class="fe me mf mg mh b">charAt</code>和括号符号是相同的。</p><p id="c09c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几乎所有现代浏览器都支持它们。</p><p id="4ad6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1faa" class="mq lc iq mh b gy mr ms l mt mu">"foo bar"[2]</span></pre><p id="983e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与以下内容相同:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c051" class="mq lc iq mh b gy mr ms l mt mu">"foo bar".charAt(2)</span></pre><h1 id="2ee9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查JavaScript对象是否是DOM对象</h1><p id="2048" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要检查一个对象是否是DOM对象，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b7d3" class="mq lc iq mh b gy mr ms l mt mu">typeof Node === "object" ? obj instanceof Node : <br/>  obj &amp;&amp; typeof obj === "object" &amp;&amp; typeof obj.nodeType === "number" &amp;&amp; typeof obj.nodeName === "string"</span></pre><p id="810d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">Node</code>对象是否存在。</p><p id="05d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那么我们用<code class="fe me mf mg mh b">instanceof</code>操作符检查<code class="fe me mf mg mh b">obj</code>对象。</p><p id="6a57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们必须检查一些属性是否存在。</p><p id="9526" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">nodeType</code>属性，<code class="fe me mf mg mh b">nodeName</code>是一个字符串。</p><p id="c464" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了检查一个元素，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0be2" class="mq lc iq mh b gy mr ms l mt mu">typeof HTMLElement === "object" ? obj instanceof HTMLElement : <br/>  typeof obj === "object" &amp;&amp; obj !== null &amp;&amp; obj.nodeType === 1 &amp;&amp; typeof obj.nodeName === "string"</span></pre><p id="9d7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查浏览器中是否存在<code class="fe me mf mg mh b">HTMLElement</code>对象。</p><p id="2c8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有，我们就使用<code class="fe me mf mg mh b">instanceof</code>操作符。</p><p id="ae13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们检查<code class="fe me mf mg mh b">obj</code>是否是一个对象，并检查<code class="fe me mf mg mh b">nodeType</code>和<code class="fe me mf mg mh b">nodeName</code>的属性。</p><p id="9553" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1表示该节点是一个HTML元素。</p><h1 id="7cf6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取字符串的长度</h1><p id="e865" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用字符串的<code class="fe me mf mg mh b">length</code>属性来获取它的长度。</p><p id="4453" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5b55" class="mq lc iq mh b gy mr ms l mt mu">const str = 'foo';<br/>const length = str.length;</span></pre><h1 id="4fa6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取数字的小数部分</h1><p id="70c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了得到一个数字的小数部分，我们可以使用<code class="fe me mf mg mh b">%</code>操作符。</p><p id="76d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到这个数除以1的余数。</p><p id="0abe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fe73" class="mq lc iq mh b gy mr ms l mt mu">2.555 % 1</span></pre><p id="9caa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7e35" class="mq lc iq mh b gy mr ms l mt mu">0.5550000000000002</span></pre><p id="81c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">已退回。</p><p id="565a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以将它转换成一个字符串，并对其调用<code class="fe me mf mg mh b">split</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b403" class="mq lc iq mh b gy mr ms l mt mu">(2.555).toString().split(".");</span></pre><p id="0b13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">小数部分将在返回数组的索引1中。</p><h1 id="9aee" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">加载页面时运行函数</h1><p id="27e4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当页面被加载时，我们可以通过将函数设置为<code class="fe me mf mg mh b">window.onload</code>属性的值来运行函数。</p><p id="3ed1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e6ba" class="mq lc iq mh b gy mr ms l mt mu">window.onload = () =&gt; {<br/>  console.log('page loaded');<br/>}</span></pre><p id="6bb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将该函数设置为<code class="fe me mf mg mh b">onload</code>的值，这样它将在页面加载时运行。</p><h1 id="3a1d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">确定一个数是否是奇数</h1><p id="e111" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用余数运算符来确定一个数是否是奇数。</p><p id="d582" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="95a2" class="mq lc iq mh b gy mr ms l mt mu">x % 2 !== 0</span></pre><p id="604d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">x</code>不能被2整除，那么我们知道它是奇数。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/45f227a548dd76aab33a6c669a75f6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fALSK4fA1uZduOQ6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@charlieh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charlie Hammond</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d61f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6473" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用moment.js将时间跨度格式化为HH:mm:ss格式。</p><p id="d927" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">%</code>运算符来确定一个数字是否是奇数。</p><p id="a793" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数时候，我们可以使用内置的构造函数来检查一个对象是否是DOM节点或元素。</p><p id="e738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">得到一个数的小数部分可以通过得到除以1的余数来完成，或者将它转换成一个字符串并拆分它。</p><h2 id="68de" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="e835" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>React Tips — Formik Blur, Router Navigation, Context Value Change</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—形成模糊、路由器导航、上下文值更改</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-formik-blur-router-navigation-context-value-46514716e8f2?source=collection_archive---------5-----------------------#2020-09-26">https://javascript.plainenglish.io/react-tips-formik-blur-router-navigation-context-value-46514716e8f2?source=collection_archive---------5-----------------------#2020-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d94e1b2161642400a1ebcf30e4a89c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JNffH8VpYDi-UxG8"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@myfunkypixel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dave Oliver</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4104" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="f42d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSX的三元运算符包括HTML</h1><p id="cd2b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码来添加三元运算符以包含HTML</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b263" class="mn lc iq mj b gy mo mp l mq mr">render () {<br/>  return (<br/>    &lt;div&gt;<br/>      {(this.state.message === 'success')<br/>          ? &lt;div&gt;successful&lt;/div&gt; <br/>          : &lt;div&gt;not successful&lt;/div&gt; <br/>      }<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><h1 id="a086" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用useContext的React挂钩时更改上下文值</h1><p id="c736" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将状态改变函数传递给上下文，让我们在任何地方调用它们。</p><p id="17b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以更改接收上下文的任何组件中的值。</p><p id="a0cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e85e" class="mn lc iq mj b gy mo mp l mq mr">const { createContext, useContext, useState } = React;</span><span id="62d4" class="mn lc iq mj b gy ms mp l mq mr">const ThemeContext = createContext({});</span><span id="c22b" class="mn lc iq mj b gy ms mp l mq mr">function Content() {<br/>  const { style, color, toggleStyle, changeColor } = useContext(<br/>    ThemeContext<br/>  );</span><span id="3f31" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;<br/>        {color} {style}<br/>      &lt;/p&gt;<br/>      &lt;button onClick={toggleStyle}&gt;Change style&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; changeColor('green')}&gt;Change color&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="7d6b" class="mn lc iq mj b gy ms mp l mq mr">function App() {<br/>  const [style, setStyle] = useState("light");<br/>  const [color, setColor] = useState(true);</span><span id="bb20" class="mn lc iq mj b gy ms mp l mq mr">  function toggleStyle() {<br/>    setStyle(style =&gt; (style === "light" ? "dark" : "light"));<br/>  }</span><span id="f54d" class="mn lc iq mj b gy ms mp l mq mr">  function changeColor(color) {<br/>    setColor(color);<br/>  }</span><span id="53e1" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;ThemeContext.Provider<br/>      value={{ style, visible, toggleStyle, changeColor }}<br/>    &gt;<br/>      &lt;Content /&gt;<br/>    &lt;/ThemeContext.Provider&gt;<br/>  );<br/>}</span></pre><p id="1022" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe mt mu mv mj b">ThemeContext</code>，在<code class="fe mt mu mv mj b">App</code>组件中使用它来获取提供者，并将其包装在<code class="fe mt mu mv mj b">Content</code>组件周围。</p><p id="fbb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过将状态变量传递给<code class="fe mt mu mv mj b">value</code> prop中的对象，将我们的状态变化函数传递给上下文。</p><p id="d3b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe mt mu mv mj b">Content</code>组件中，我们可以调用<code class="fe mt mu mv mj b">toggleStyle</code>和<code class="fe mt mu mv mj b">toggleStyle</code>和<code class="fe mt mu mv mj b">changeColor</code>函数来改变<code class="fe mt mu mv mj b">App</code>中的状态。</p><p id="1f16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">useContext</code>钩子在<code class="fe mt mu mv mj b">Content</code>中得到这些函数。</p><h1 id="6b4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用酶模拟变化事件</h1><p id="cde5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过为handle change方法创建一个spy来用Enzyme模拟一个change事件。</p><p id="efad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5ba7" class="mn lc iq mj b gy mo mp l mq mr">it("responds to name change", done =&gt; {<br/>  const handleChangeSpy = sinon.spy(Form.prototype, "handleChange");<br/>  const event = { target: { name: "name", value: "spam" }};<br/>  const wrap = mount(<br/>    &lt;Form /&gt;<br/>  );<br/>  wrap.ref('name').simulate('change', event);<br/>  expect(handleChangeSpy.calledOnce).to.equal(true);<br/>})</span></pre><p id="5e62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为我们的变更事件监听器创建一个间谍。</p><p id="4d8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们设置我们的事件对象。</p><p id="2f76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们安装我们想要测试的<code class="fe mt mu mv mj b">Form</code>组件。</p><p id="ed72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">simulate</code>方法触发其上的变更事件。</p><p id="6be9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们查了一下那个间谍是不是叫过一次。</p><h1 id="9929" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何将自定义onChange和onBlur与React Formik一起使用</h1><p id="6e0c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码来创建自己的模糊处理程序:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89f1" class="mn lc iq mj b gy mo mp l mq mr">&lt;Field<br/>    component={MyInput}<br/>    name="email"<br/>    type="email"<br/>    onBlur={e =&gt; {<br/>        handleBlur(e)<br/>        let someValue = e.currentTarget.value<br/>        //...<br/>    }}<br/>/&gt;</span></pre><p id="8eae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用内置的<code class="fe mt mu mv mj b">handleBlur</code>函数。</p><p id="c543" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们做其他的事情。</p><h1 id="41f6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何使用电子感应路由器</h1><p id="c787" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在带有<code class="fe mt mu mv mj b">HashRouter</code>的电子应用中使用React Router，</p><p id="50ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="44d0" class="mn lc iq mj b gy mo mp l mq mr">&lt;HashRouter<br/>  basename={basename}<br/>  getUserConfirmation={() =&gt; {}}<br/>  hashType='slash'<br/>&gt;<br/>  &lt;App /&gt;<br/>&lt;/HashRouter&gt;</span></pre><p id="4c94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">basename</code>是一个字符串，包含所有位置的基本URL。</p><p id="6a31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">getUserConfirmation</code>是让我们用来确认导航的功能。</p><p id="b8a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">hashType</code>是一个字符串，包含用于<code class="fe mt mu mv mj b">window.location.hash</code>的编码。</p><p id="346e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可能的值是<code class="fe mt mu mv mj b">'slash'</code>，也就是<code class="fe mt mu mv mj b">#/</code>。</p><p id="05ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">'noslash'</code>是<code class="fe mt mu mv mj b">#</code>。</p><p id="15a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe mt mu mv mj b">'hashbang'</code>美国<code class="fe mt mu mv mj b">#!/</code>。</p><h1 id="5285" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无法使用React路由器读取未定义的属性“push”</h1><p id="c64a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe mt mu mv mj b">withRouter</code>高阶组件使<code class="fe mt mu mv mj b">history</code>对象可用。</p><p id="4a77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dcc0" class="mn lc iq mj b gy mo mp l mq mr">class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.handleClick = this.handleClick.bind(this);<br/>  }</span><span id="e1b9" class="mn lc iq mj b gy ms mp l mq mr">  handleClick(value) {<br/>    this.props.history.push('/dashboard');<br/>  }</span><span id="17a8" class="mn lc iq mj b gy ms mp l mq mr">  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;Route<br/>          exact<br/>          path="/"<br/>          render={() =&gt; (<br/>            &lt;div&gt;<br/>              &lt;h1&gt;Welcome&lt;/h1&gt;<br/>            &lt;/div&gt;<br/>          )}<br/>       /&gt;<br/>       &lt;Route<br/>         path="/dashboard"<br/>         render={() =&gt; (<br/>           &lt;div&gt;<br/>             &lt;h1&gt;Dashboard&lt;/h1&gt;<br/>           &lt;/div&gt;<br/>         )}<br/>      /&gt;<br/>      &lt;button onClick={this.handleClick} &gt;go to dashboard&lt;/button&gt;<br/>    );<br/>  }<br/>}</span><span id="14ad" class="mn lc iq mj b gy ms mp l mq mr">export default withRouter(App);</span></pre><p id="5a3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有几条路线和一个<code class="fe mt mu mv mj b">handleClick</code>方法让我们去仪表板路线。</p><p id="5b95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe mt mu mv mj b">this.props.history.push</code>方法，因为我们用<code class="fe mt mu mv mj b">App</code>调用了<code class="fe mt mu mv mj b">withRouter</code>高阶分量。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3d0e1076e0255c89e264fe4df85532e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L8ditEBOhiI_ADFI"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jrcatalano?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jack Catalano</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3cdc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="80bb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">withRouter</code>编程导航到路线。</p><p id="2b4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将任何东西传递给上下文，这样我们就可以在任何地方使用它们。</p><p id="6fd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Formik的模糊处理程序可以替换成我们自己的函数。</p><h2 id="57b3" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="249d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
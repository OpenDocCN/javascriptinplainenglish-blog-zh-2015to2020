<html>
<head>
<title>Create Scalable Elegant Modals In JavaScript or React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript或React创建可伸缩的优雅模态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-scalable-elegant-modals-in-javascript-or-react-b902a7d26b6b?source=collection_archive---------5-----------------------#2020-04-24">https://javascript.plainenglish.io/create-scalable-elegant-modals-in-javascript-or-react-b902a7d26b6b?source=collection_archive---------5-----------------------#2020-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bf3de1c8ae6be648c952d907b85c5291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*udpVAR7Ws9Ip9cOijVmVsQ.png"/></div></div></figure><p id="6ed0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在任何项目中，模态都是提升用户体验的一种非常好的简单方法。因此，我想介绍如何在JavaScript和React中创建这个小而有用的特性。</p><p id="865c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我最喜欢的实现模态的方法之一是当用户点击时产生一个更大的图像视图。考虑到这一点，我决定用这篇文章来解释如何将一系列图像加载到页面上，然后将这个模态特性应用到每个图像上。</p><p id="8304" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我上面提到的，我将在本文中涉及JavaScript和React，但是两者的CSS是完全一样的。</p><p id="e9e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，这是我们将要建造的:</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/ad9d445c61a6dc3b4ca846a1876adcfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*qVMsIm0P5FWdiqYuSln3dA.gif"/></div></figure><p id="6ebd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们所拥有的只是一个带有标题的页面，然后是三张带有描述的图片。每个图像都可以被点击产生一个模态，这个模态有一个图像的放大版本和一个“X”按钮来关闭它。事不宜迟，让我们开始吧！</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="26d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你对设置不感兴趣，想直接跳到模态，可以随意向下滚动到最后的CSS部分。否则，请继续阅读！</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="01ea" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">JavaScript版本</h1><h2 id="2bb9" class="me lh in bd li mf mg dn lm mh mi dp lq kg mj mk lu kk ml mm ly ko mn mo mc mp bi translated"><strong class="ak">获取设置</strong></h2><p id="e708" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">要创建这个页面，我们需要编写我们的基本HTML，使用JavaScript定义一个包含我们将要呈现的信息的对象数组，然后编写一个函数，首先创建我们将要映射的HTML结构，然后将我们的数组映射到那个结构上。</p><p id="e0de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们要采用面向JavaScript的方法，所以开始的HTML将会很小——无论如何，它更具可伸缩性！</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Note that my use of the div with class “App” is just me recreating the setup given by create-react-app</figcaption></figure><p id="98e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">从这里，我们可以打开我们的JavaScript文件，定义我们的<code class="fe nb nc nd ne b">main</code>元素，并创建<code class="fe nb nc nd ne b">ul</code>元素和一个images数组。这个数组将保存包含所有信息的对象，我们将在HTML中映射这些信息。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">The src needs to contain the location of the images in your project files — I have mine in an Assets folder</figcaption></figure><p id="1978" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第10行调用的<code class="fe nb nc nd ne b">renderImages</code>函数将接受我们刚刚定义的<code class="fe nb nc nd ne b">ul</code>和<code class="fe nb nc nd ne b">images</code>变量，然后调用images数组上的map函数。在这个映射中，创建了我们的HTML结构，根据需要分配了类，并将该信息附加到<code class="fe nb nc nd ne b">ul</code>元素中。</p><p id="26e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，我们的基本页面就创建好了，我们可以进入模态页面了。</p><h2 id="5f03" class="me lh in bd li mf mg dn lm mh mi dp lq kg mj mk lu kk ml mm ly ko mn mo mc mp bi translated">模态</h2><p id="308c" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">这个模型实际上是一个HTML块，当用户与图像交互时，它被添加到页面中，并被设计为位于页面其余部分的顶部。为此，我们需要:</p><ol class=""><li id="191b" class="nf ng in jx b jy jz kc kd kg nh kk ni ko nj ks nk nl nm nn bi translated">向<code class="fe nb nc nd ne b">ul</code>元素添加一个“click”事件监听器，用于识别哪个图像被点击</li><li id="ed77" class="nf ng in jx b jy no kc np kg nq kk nr ko ns ks nk nl nm nn bi translated">将该信息传递给模态HTML结构</li><li id="084f" class="nf ng in jx b jy no kc np kg nq kk nr ko ns ks nk nl nm nn bi translated">调用一个负责关闭模态的附加函数</li></ol><p id="2791" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">根据我们到目前为止创建的页面结构，JavaScript代码看起来可能是这样的:</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="3352" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第一行到第六行处理前两个任务。第7行将新标识的图像传递给renderModal函数，第8行调用名副其实的函数来处理关闭模态。</p><p id="5a33" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">renderModal函数和renderImages函数一样，接受被单击的图像对象，创建我们的HTML结构，根据需要分配类和id，然后将该结构附加到主元素。</p><p id="1146" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">值得一提的是第22行，它创建了一个按钮，我们将用它来关闭我们的模态。按钮的innerText使用一个符号来设置，或者使用<a class="ae nt" href="https://www.w3schools.com/html/html_symbols.asp" rel="noopener ugc nofollow" target="_blank"> HTML符号实体</a>。有很多，而且会很有用！这个看起来像一个“x ”,但更好。</p><p id="c7f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用handleClose按钮，关闭JavaScript中的模式只是简单地从main元素中移除它的HTML块。</p><p id="5454" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是HTML和JavaScript。剩下要做的就是造型了，但是首先，我要介绍一下这个设置的React版本。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="8d9d" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">反应版</h1><h2 id="0d73" class="me lh in bd li mf mg dn lm mh mi dp lq kg mj mk lu kk ml mm ly ko mn mo mc mp bi translated">获取设置</h2><p id="12be" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">该设置与我们刚刚在普通JavaScript中所做的非常相似，但是我们将利用React的状态和组件驱动方法。我们这次要做的是保持图像数组的状态，创建页面的基本结构，利用一个单独的组件来呈现图像，然后将图像数组映射到该组件上。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">I chose to convert my App.js component to a class component so that I could use state, though hooks would work fine too.</figcaption></figure><p id="c35c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我将初始状态值设置为null，然后将它们加载到ComponentDidMount中。setImages函数使用在组件顶部导入的名称代替JavaScript方法中的“src”属性，将image对象的数组加载到state中。</p><p id="726e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nb nc nd ne b">renderImages</code>函数从state中获取images数组，并将其映射到image组件，该组件为每个图像和描述创建HTML结构，并传递适当的数据。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h2 id="4682" class="me lh in bd li mf mg dn lm mh mi dp lq kg mj mk lu kk ml mm ly ko mn mo mc mp bi translated">模态</h2><p id="be66" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">为了在React中呈现模态，我们将对每个图像应用<code class="fe nb nc nd ne b">handleClick</code>函数，并将单击的图像传递给<code class="fe nb nc nd ne b">selectedImage</code>状态属性。这样做时，将在第61行调用<code class="fe nb nc nd ne b">getSelectedImage</code>函数，将该图像呈现为模态图像。更新后的App.js组件如下所示:</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Note that getSelectedImage is called on line 61</figcaption></figure><p id="b92f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在继续之前，我应该指出，在React中输入“关闭”按钮的HTML符号需要与在JavaScript中不同。我们不得不写<code class="fe nb nc nd ne b">&amp;#x2613</code>，而不是写<code class="fe nb nc nd ne b">'\u2613'</code>。</p><p id="8efd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成所有这些后，我们就可以编写CSS了！</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="a5f1" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</h1><p id="f0b4" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">您可以随意设置页面的大部分样式，而不会影响模型本身。也就是说，下面是我用于页面主体的CSS，以及代码的结果:</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">*Please note that I created this project in React first, and everything above the outer-container class is just CSS that I copied from that version’s starter CSS.</figcaption></figure><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/5130704435fd3b4372c78e76e8aa2bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7r6w_wLxPyPbSd3lqG75ww.png"/></div></div></figure><p id="2179" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们将设计实际的模型</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="e48b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，这是模态真正成为我们想要的样子的地方。将<code class="fe nb nc nd ne b">position</code>设置为fixed可以让模态外部div及其所有子元素位于页面的其余部分之上。将<code class="fe nb nc nd ne b">height</code>和<code class="fe nb nc nd ne b">width</code>设置为100%，同时将<code class="fe nb nc nd ne b">top</code>设置为0，管理我们的div的确切大小和位置，以确保它覆盖整个页面。给背景颜色一点透明度可以让模态掩盖网站的其他部分，但不会让用户感觉好像他们被带到了一个新的页面。除此之外，其余元素的样式处理内部div和图像的居中和管理。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/69acc238b25daa7bea841b4e711e0c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4miG2sfNYb3ETnJnFUszA.png"/></div></div></figure><p id="3f19" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这样，您就有了一个易于实现的、可伸缩的、优雅的方法来处理警报，提供一个元素的更大视图，等等。</p><p id="eab0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">非常感谢您的阅读！请在下面的评论中分享你的反馈。</p><h2 id="eb9a" class="me lh in bd li mf mg dn lm mh mi dp lq kg mj mk lu kk ml mm ly ko mn mo mc mp bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="ee3f" class="pw-post-body-paragraph jv jw in jx b jy mq ka kb kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks ig bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae nt" href="https://medium.com/ai-in-plain-english" rel="noopener"> <strong class="jx io"> AI in Plain English </strong> </a>，<a class="ae nt" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="jx io">UX in Plain English</strong></a>，<a class="ae nt" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="jx io">Python in Plain English</strong></a><strong class="jx io"/>——谢谢，继续学习！</p><p id="47ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae nt" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">submissions @ plain English . io</strong></a><strong class="jx io"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Clean Code — Horizontal Formatting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript干净代码—水平格式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-clean-code-horizontal-formatting-7d5eab18ed87?source=collection_archive---------5-----------------------#2020-03-10">https://javascript.plainenglish.io/javascript-clean-code-horizontal-formatting-7d5eab18ed87?source=collection_archive---------5-----------------------#2020-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9fd7106e9070a2e91b7487936cc403ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pP-APcIsv9agm_8U"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@flschweiger?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Frederik Schweiger</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0ef9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以易读的方式格式化代码是保持代码整洁的重要部分。没有正确格式化的代码需要更多的脑力来解释和理解。</p><p id="3fa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何一致地格式化JavaScript代码，以便通过查看水平格式可以容易地阅读它们。</p><h1 id="a0b7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">水平格式</h1><p id="ee5b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">随着屏幕比过去更大，我们可以有比以前更长的水平线。</p><p id="419c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">80个字符是过去的标准，但是现在100到120个也可以。</p><p id="e20f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关键是大多数人不应该水平滚动来阅读我们的代码。</p><h1 id="48ea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">横向开放度和密度</h1><p id="07e6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在一行代码中的一些实体之间应该有一些空格。变量和操作符之间是放置空格的好地方。此外，文字和运算符之间的间距也很好。</p><p id="1a6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不需要在方法名和左括号之间有空格。它没有运算符和变量或文字之间的区别大。</p><p id="9c86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于箭头函数，我们应该在右括号、粗箭头和左括号之间留一个空格。</p><p id="17ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，具有清晰水平格式的类可能如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="48b0" class="mn lc iq mj b gy mo mp l mq mr">class Calculator {<br/>  constructor(a, b) {<br/>    this.a = a;<br/>    this.b = b;<br/>  }</span><span id="860b" class="mn lc iq mj b gy ms mp l mq mr">  add() {<br/>    return this.a + this.b;<br/>  }</span><span id="1b4c" class="mn lc iq mj b gy ms mp l mq mr">  subtract() {<br/>    return this.a - this.b;<br/>  }</span><span id="f0d9" class="mn lc iq mj b gy ms mp l mq mr">  multiply() {<br/>    return this.a * this.b;<br/>  }</span><span id="0f0c" class="mn lc iq mj b gy ms mp l mq mr">  divide() {<br/>    return this.a / this.b;<br/>  }<br/>}</span></pre><p id="5fc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">算术运算符之间有一个空格，方法名和每个方法的左括号之间没有空格。</p><p id="eba6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每行也少于120个字符。</p><p id="fb4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">箭头函数可能如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dfe9" class="mn lc iq mj b gy mo mp l mq mr">const add = (a, b) =&gt; a + b;</span></pre><p id="d9e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以看到，参数列表在逗号后面也有空格。</p><h1 id="9e46" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">水平线向</h1><p id="fc57" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不必对齐变量声明，使它们彼此水平对齐。</p><p id="f73e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不必执行以下操作:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ccb7" class="mn lc iq mj b gy mo mp l mq mr">let foo = 1;<br/>let x   = 2;</span></pre><p id="4fc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以把它保持为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3e37" class="mn lc iq mj b gy mo mp l mq mr">let foo = 1;<br/>let x = 2;</span></pre><p id="bf71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以让代码格式化程序自动改变这种间距。</p><h1 id="0c43" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">刻痕</h1><p id="6d3c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">代码文件就像一个大纲。我们从外部观察高层信息，随着深入，我们会看到嵌套的代码。</p><p id="0aae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使层次结构可见，我们缩进了块，这样层次结构就对我们可见了。</p><p id="3ec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过增加两个空格来缩进。然而，我们通常不必自动这样做，因为代码格式化程序会替我们做。我们只需要记得运行它。</p><p id="19cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">缩进适用于像条件和循环这样的块。</p><p id="682e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4ccf" class="mn lc iq mj b gy mo mp l mq mr">const loop = ()=&gt;{if(true){for(let x of [1,2,3]){console.log(x)}}};</span></pre><p id="ee06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比以下内容更难阅读:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4504" class="mn lc iq mj b gy mo mp l mq mr">const loop = () =&gt; {<br/>  if (true) {<br/>    for (let x of [1, 2, 3]) {<br/>      console.log(x)<br/>    }<br/>  }<br/>};</span></pre><p id="b280" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以很容易地分辨出第二个例子中的<code class="fe mt mu mv mj b">if</code>块和<code class="fe mt mu mv mj b">for</code>，而第一个例子几乎完全不可读。正如我们所见，间距和缩进是非常重要的。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/0c805b115a1082322a9e82ea8c73b6d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M1jCzXb1wLo7Mo-C"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mkjr_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">mkjr_</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d25a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">断裂压痕</h1><p id="901f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对于短函数，尤其是单行箭头函数，如果它们总共少于120个字符，我们可以把它们放在一行。</p><p id="2df3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，对于其他任何事情，我们应该坚持通常的水平格式规则。</p><h1 id="9649" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">团队规则</h1><p id="0a92" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在一个团队中工作，那么保持一套格式化代码的规则是很重要的。幸运的是，我们只需要在大多数时候运行团队选择的代码格式化程序。至少对于水平格式来说是这样。</p><p id="f90a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像变量和函数分组这样的垂直格式规则必须在代码审查中查看，因为它们不能自动修复。</p><p id="db29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于水平格式，我们可以使用ESLint、JSLine或更漂亮的工具来格式化我们的代码。</p><p id="b86c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是在需要格式化代码的时候自动运行它们。</p><p id="d654" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像Visual Studio Code和Sublime这样的现代文本编辑器也有插件来格式化代码。</p><p id="ce09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有各种各样的预设规则，比如这些短绒附带的默认规则，也有替代规则，比如Airbnb规则。</p><p id="44aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">团队可以就选择哪一个达成一致，然后将其添加到他们的代码中，然后水平格式将自动完成。</p><h1 id="149b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="428a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">水平格式化代码有一些规则。我们应该对块进行适当的缩进，以便开发人员可以遵循代码。</p><p id="a15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">变量或文字和操作符之间应该加空格，这样我们可以更容易地看到操作。</p><p id="e301" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每行应该不超过120个字符，这样我们就不必来回滚动来阅读一行代码。</p><p id="6f69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些事情都可以由ESLint、JSLint、appellister这样的程序自动完成。它们可以与默认规则一起使用，也可以与其他规则一起配置，如适用于ESLint的Airbnb林挺规则。</p><p id="496a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数现代代码编辑器和ide，如Visual Studio Code和WebStorm，也有内置的代码格式化程序或作为扩展提供的代码格式化程序。</p><p id="518e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们有助于保持一致的简洁风格，而无需开发人员为水平代码格式做额外的工作。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="ea05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【JavaScript用简单的英语写的一句话:我们总是乐于帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到submissions@javascriptinplainenglish.com<a class="ae kc" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">给我们，我们会把你添加为作者。</a></p></div></div>    
</body>
</html>
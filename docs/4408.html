<html>
<head>
<title>How to extract a subset of characters in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中提取字符子集</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-extract-a-subset-of-characters-in-javascript-9ea482e512bd?source=collection_archive---------15-----------------------#2020-12-08">https://javascript.plainenglish.io/how-to-extract-a-subset-of-characters-in-javascript-9ea482e512bd?source=collection_archive---------15-----------------------#2020-12-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c5fb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们看看我们的朋友slice()，它试图提取JavaScript中的一个字符子集。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/86cc82a7155cd1fe4b07ffaf342dd7a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMOarelIrO-xCEIRjLRFQg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/skitterphoto-324082/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1930518" rel="noopener ugc nofollow" target="_blank">Rudy and Peter Skitterians</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1930518" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="c0b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如迷你系列的第一部分所述，我们将看看从字符串中获取字符子集的另一种方法。现在，在<strong class="ky ir"> String.prototype </strong>上使用<strong class="ky ir"> slice() </strong>。</p><p id="60c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将介绍定义、用法，以及该方法与第一部分中描述的类似方法<strong class="ky ir"> substr() </strong>和<strong class="ky ir"> substring() </strong>有何不同。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f9f8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">让我们从定义开始</h1><p id="98dd" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">方法<strong class="ky ir"> slice() </strong>有这两个参数:<strong class="ky ir"> beginIndex </strong>，它定义了要包含在返回的子字符串中的第一个字符的索引，以及<strong class="ky ir"> endIndex </strong>，它是可选的，说明直到哪个索引提取字符。该选择是排他的，这意味着endIndex不是返回字符串的一部分。这并不改变原来的字符串，而是返回一个新的字符串，使它成为不可变的。</p><p id="ad2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看一些例子，以获得更好的概述:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Using slice()</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="ae89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些结果可能会让你大吃一惊。尤其是如果你已经习惯了<strong class="ky ir"> substr() </strong>或者<strong class="ky ir"> substring() </strong>的工作方式。别担心。负索引很容易让人迷惑。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8c05" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">一些特殊情况下的规则</h1><h2 id="3b56" class="my ma iq bd mb mz na dn mf nb nc dp mj lf nd ne ml lj nf ng mn ln nh ni mp nj bi translated">1.负开始指数</h2><p id="a2bb" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在负的<strong class="ky ir"> beginIndex </strong>的情况下，索引从字符串的末尾开始，在字符串的开头结束。如果我们想把目标人物放在最后，这会很有用。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="dd96" class="my ma iq nl b gy np nq l nr ns">let <strong class="nl ir">myString </strong>= 'LostInTheSubstring';</span><span id="684b" class="my ma iq nl b gy nt nq l nr ns">console.log(<strong class="nl ir">myString</strong>.slice(-6)); // <em class="nu">string</em></span></pre><p id="c721" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，在示例中，我们省略了<strong class="ky ir"> endIndex </strong>。这样做是可以的，因为endIndex是可选的。接下来我们将讨论它到底是如何工作的。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="aadb" class="my ma iq bd mb mz na dn mf nb nc dp mj lf nd ne ml lj nf ng mn ln nh ni mp nj bi translated">2.省略endIndex</h2><p id="1c68" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这个很简单。如果没有提供，缺省值是字符串长度，导致从<strong class="ky ir"> beginIndex </strong>返回一个字符串，直到结束。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="6a54" class="my ma iq nl b gy np nq l nr ns">let <strong class="nl ir">myString </strong>= 'LostInTheSubstring';</span><span id="f1b0" class="my ma iq nl b gy nt nq l nr ns">console.log(<strong class="nl ir">myString</strong>.slice(4));  // <em class="nu">InTheSubstring</em><br/>console.log(<strong class="nl ir">myString</strong>.slice(-4)); // <em class="nu">ring</em></span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="aa06" class="my ma iq bd mb mz na dn mf nb nc dp mj lf nd ne ml lj nf ng mn ln nh ni mp nj bi translated">3.负endIndex</h2><p id="8e36" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">类似于第一种情况，如果<strong class="ky ir"> endIndex </strong>为负，则从字符串的末尾开始计数。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="339a" class="my ma iq nl b gy np nq l nr ns">let <strong class="nl ir">myString </strong>= 'LostInTheSubstring';</span><span id="a6f2" class="my ma iq nl b gy nt nq l nr ns">console.log(<strong class="nl ir">myString</strong>.slice(4, -9));  // <em class="nu">InThe</em><br/>console.log(<strong class="nl ir">myString</strong>.slice(-9, -6)); // <em class="nu">Sub</em></span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="6b1c" class="my ma iq bd mb mz na dn mf nb nc dp mj lf nd ne ml lj nf ng mn ln nh ni mp nj bi translated">4.其他有趣的案例</h2><p id="09c9" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这里，我们将研究一些不寻常的组合，结果可能是大部分是空字符串。本节也适合使用<strong class="ky ir"> slice() </strong>方法。正如您将在后面看到的，使用带有相同参数的<strong class="ky ir"> substr() </strong>和<strong class="ky ir"> substring() </strong>会产生非常不同的结果。事不宜迟，我们上车吧。</p><p id="df51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">begin index高于endIndex。<br/> </strong>这里我们没有字符，因为索引不重叠。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="82ae" class="my ma iq nl b gy np nq l nr ns">let myString = 'LostInTheSubstring';</span><span id="afe3" class="my ma iq nl b gy nt nq l nr ns">console.log(myString.slice(4, 0)); // ''</span></pre><p id="494d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有趣的是，这个逻辑同样适用于负的<strong class="ky ir"> beginIndex </strong>，我们从字符串的末尾选择一个索引。为什么它是真的是因为在负的<strong class="ky ir"> beginIndex </strong>的情况下，公式是<code class="fe nv nw nx nl b">string.length + beginIndex</code>，这就是为什么上面相同的逻辑被应用。要记住一个简单的规则:没有重叠，就没有结果。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="427f" class="my ma iq nl b gy np nq l nr ns">let myString = 'LostInTheSubstring';</span><span id="d99c" class="my ma iq nl b gy nt nq l nr ns">console.log(myString.slice(-4, 4)); // ''</span><span id="a5c3" class="my ma iq nl b gy nt nq l nr ns">console.log(myString.length)        // 18<br/>console.log(myString.slice(-1) === myString.slice(17)) // true</span></pre><p id="5ae9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">begin index等于或大于字符串长度。<br/> </strong>当提取的起点等于或大于字符串长度时，不返回任何字符(即使使用负的<strong class="ky ir"> endIndex </strong>)。没有其他的数学在进行。一旦你超过了弦的长度，就是这样。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="cb84" class="my ma iq nl b gy np nq l nr ns">let myString = 'LostInTheSubstring';</span><span id="a591" class="my ma iq nl b gy nt nq l nr ns">console.log(myString.slice(100));      // ''<br/>console.log(myString.slice(100, 0));   // '' console.log(myString.slice(100, -99)); // ''</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="70dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经了解了<strong class="ky ir"> slice() </strong>是如何工作的，让我们将这个方法与前面提到的类似方法<strong class="ky ir"> substr() </strong>和<strong class="ky ir"> substring() </strong>进行比较，这两个方法都出现在<strong class="ky ir"> String.prototype </strong>上。</p><p id="9eea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了便于阅读，下表显示了不同之处:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/9e0823395a897359c6f337335a16fcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3WDgCkCNVnjUqg39edodVw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Comparison table (image by author)</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="9d34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是等等，MDN和W3Schools都说只有第二个参数是可选的。好吧，让我们看看EMCA-262的规格。</p><p id="7760" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们可以看到，如果我们不提供这两个参数中的任何一个，第一个参数将获得默认值0，第二个参数将获得字符串长度的默认值。</p><p id="4038" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在你的浏览器里试一下，不会崩溃。</p><p id="689f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用兼容性方面，它在caniuse.com的所有跟踪用户中获得了97.67%的优势。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="746d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="bf74" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><strong class="ky ir">string . prototype . slice()</strong>是我在本系列第一部分<a class="ae kv" href="https://medium.com/@maros.karasek/lost-in-the-substring-c7871d2dad4b" rel="noopener">中提到的其他字符串提取方法之间的有效选项。</a></p><p id="5788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在所有主流浏览器桌面和手机上使用都是安全的。</p><p id="8ada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管这些差异看起来很微妙，但是了解各种方法之间的差异可以扩展您的JavaScript知识，让您知道什么时候使用什么方法，并在看到它被使用时快速理解发生了什么。</p><p id="3946" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢你的时间。上帝保佑。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c64b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">了解更多信息</h1><div class="nz oa gp gr ob oc"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">String.prototype.slice()</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">slice()方法提取一个字符串的一部分，并将其作为一个新的字符串返回，而不修改原来的…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">developer.mozilla.org</p></div></div><div class="ol l"><div class="om l on oo op ol oq kp oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://www.w3schools.com/jsref/jsref_slice_string.asp" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">JavaScript String slice()方法</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">下面有更多“自己尝试”的例子。slice()方法提取字符串的一部分，并将提取的部分返回给…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.w3schools.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq kp oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://www.ecma-international.org/ecma-262/#sec-string.prototype.slice" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">ECMAScript 2020语言规范</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">编辑描述</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.ecma-international.org</p></div></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://caniuse.com/mdn-javascript_builtins_string_slice" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">我能用吗...HTML5、CSS3等的支持表</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">“我可以使用吗”提供了最新的浏览器支持表，以支持桌面和移动设备上的前端web技术…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">caniuse.com</p></div></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://medium.com/@maros.karasek/lost-in-the-substring-c7871d2dad4b" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">在子串中丢失</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">以正确的方式在JavaScript中找到子串</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">medium.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq kp oc"/></div></div></a></div></div></div>    
</body>
</html>
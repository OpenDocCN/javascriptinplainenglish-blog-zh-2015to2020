<html>
<head>
<title>Node Version Manager (NVM) on Steroids</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">服用类固醇的节点版本管理器(NVM)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nvm-on-steroids-auto-switch-nodejs-version-in-your-terminal-without-typing-the-nvm-use-command-3a49c4b5c6e0?source=collection_archive---------6-----------------------#2020-10-10">https://javascript.plainenglish.io/nvm-on-steroids-auto-switch-nodejs-version-in-your-terminal-without-typing-the-nvm-use-command-3a49c4b5c6e0?source=collection_archive---------6-----------------------#2020-10-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1004" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">自动切换Node.js版本，无需输入“nvm use”命令</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d61125abb642705af6d58e3d49b29da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*62tV4V3dgIEIgX0a"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@coopery?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mohamed Nohassi</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f316" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每次打开项目根目录中的终端时，都必须手动切换节点版本，这很快就会变得很烦人。<strong class="kv io">如果能根据项目的需求自动切换节点版本岂不是很棒？</strong>这个简单的技巧会让你的开发体验更好:</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="2926" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">macOS/Linux</h1><p id="09a2" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">对于本教程，我们假设您已经在linux/macOS系统上安装了<a class="ae ks" href="https://github.com/nvm-sh/nvm" rel="noopener ugc nofollow" target="_blank">节点版本管理器(nvm) </a>。</p><p id="38c4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以简单地编写一个shell脚本，在每次打开目录中的终端或更改目录时运行。该脚本在目录中查找一个<code class="fe mt mu mv mw b">.nvmrc</code>文件，并尝试使用该版本。如果它没有找到那个版本，脚本将返回到默认版本。</p><h2 id="0877" class="mx lx in bd ly my mz dn mc na nb dp mg lc nc nd mi lg ne nf mk lk ng nh mm ni bi translated">步骤1 —创建一个`. nvmrc '文件</h2><p id="ef73" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">在npm项目的根目录下，在<code class="fe mt mu mv mw b">package.json</code>文件旁边创建一个<code class="fe mt mu mv mw b">.nvmrc</code>文件。</p><p id="7fc4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者，如果你像我一样懒，可以用下面的命令轻松完成:</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="dc71" class="mx lx in mw b gy nn no l np nq">$ nvm current &gt; .nvmrc</span></pre><h2 id="a02a" class="mx lx in bd ly my mz dn mc na nb dp mg lc nc nd mi lg ne nf mk lk ng nh mm ni bi translated">步骤2 —将脚本添加到您的shell的配置文件中</h2><p id="ebd1" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">我们将添加一个shell脚本，它本质上修饰了更改目录命令并扫描目录中的<code class="fe mt mu mv mw b">.nvmrc</code>文件。如果它找到了<code class="fe mt mu mv mw b">.nvmrc</code>文件，它通过运行<code class="fe mt mu mv mw b">nvm use</code>使用指定的版本。如果没有，脚本将退回到默认的节点版本。如果你想了解更多关于shell脚本的知识，请查阅这本书。</p><p id="7ddb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">痛击</strong></p><p id="e82f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将这个脚本添加到您的<code class="fe mt mu mv mw b">.bash_profile</code>或<code class="fe mt mu mv mw b">.bashrc</code>文件中，然后通过运行以下命令来获取您的bash环境:</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="dc40" class="mx lx in mw b gy nn no l np nq">$ source ~/.bash_profile</span></pre><p id="2c28" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="ada6" class="mx lx in mw b gy nn no l np nq">$ source ~/.bashrc</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="e7ee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好了🎉 🎉 🎉 🎉</p><p id="4b64" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在打开您的终端并运行:</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="3894" class="mx lx in mw b gy nn no l np nq">$ node -v</span></pre><p id="0309" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> Zsh </strong></p><p id="9dde" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Zsh需要一个稍微不同的脚本。</p><p id="9396" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将此添加到您的。zshrc文件，并通过运行以下命令获取您的zsh环境:</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="a425" class="mx lx in mw b gy nn no l np nq">$ source ~/.zshrc</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="0189" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们使用<a class="ae ks" href="http://zsh.sourceforge.net/Doc/Release/Functions.html" rel="noopener ugc nofollow" target="_blank"> zsh钩子函数</a>来修饰<code class="fe mt mu mv mw b">cd</code>命令，自动检测<code class="fe mt mu mv mw b">.nvmrc</code>文件并使用指定的节点版本。如果脚本找不到一个<code class="fe mt mu mv mw b">.nvmrc</code>文件，脚本将返回到默认的节点版本。</p><p id="82f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好了🎉 🎉 🎉 🎉</p><p id="63c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在打开您的终端并运行:</p><pre class="kd ke kf kg gt nj mw nk nl aw nm bi"><span id="08c6" class="mx lx in mw b gy nn no l np nq">$ node -v</span></pre></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="40b1" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">Windows操作系统</h1><p id="04cd" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">通过使用用于Linux的 (WSL)的<a class="ae ks" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener ugc nofollow" target="_blank"> windows子系统并在WSL Linux发行版上安装nvm，您可以在Windows上使用相同的解决方案。如果你不/不能使用WSL，请关注我，了解一个潜在的</a><a class="ae ks" href="https://github.com/coreybutler/nvm-windows" rel="noopener ugc nofollow" target="_blank">nvm for windows</a>+PowerShell/cmd解决方案。如果你捷足先登，请在下面的评论中告诉我:)</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="8bdc" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">摘要</h1><p id="4827" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">作为软件工程师，我们的使命是提高效率。我们学习了如何利用<a class="ae ks" href="https://amzn.to/36QN5ug" rel="noopener ugc nofollow" target="_blank">外壳脚本</a>来自动检测和切换我们的nvm节点版本。这在处理依赖于不同节点版本的多节点项目时特别有用。现在，我们可以坐下来在节点项目之间切换，而不用担心每次在vscode :D中打开新的集成终端时手动切换我们的节点版本</p><p id="f19e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢你的阅读，我希望这能帮助你，就像它帮助了我一样。</p><p id="e07e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我很想在下面的评论中知道这是否有用！</p><p id="ded3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在<a class="ae ks" href="https://github.com/nivrith" rel="noopener ugc nofollow" target="_blank">https://github.com/nivrith</a>跟着我</p><p id="4bb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">快乐工程！</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Use JSON-LD for Advanced SEO in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular中使用JSON-LD进行高级SEO</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-json-ld-for-advanced-seo-in-angular-63528c98bb91?source=collection_archive---------0-----------------------#2020-06-03">https://javascript.plainenglish.io/how-to-use-json-ld-for-advanced-seo-in-angular-63528c98bb91?source=collection_archive---------0-----------------------#2020-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d909" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">角度搜索引擎优化</h2><div class=""/><div class=""><h2 id="6c01" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在Angular中动态插入JSON-LD标记的指南，以增加我们获得丰富结果、知识卡片和取悦机器人的机会。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c154d052ad6c470568042cb608de9d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-rCfgnMlvnp2D-426FHCg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">SEO for Google SERP</figcaption></figure><blockquote class="le"><p id="e936" class="lf lg iq bd lh li lj lk ll lm ln lo dk translated">在本文中，我们将创建一个将JSON-LD标记动态插入DOM的Angular服务。</p></blockquote><h1 id="d5d3" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf ma kg mb ki mc kj md kl me km mf mg bi translated">JSON-LD是做什么的？</h1><p id="e4c0" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">JSON-LD代表链接数据的<strong class="mj ja"> JSON，或者如果你不熟悉JSON的话，代表链接数据的JavaScript对象符号。</strong></p><blockquote class="nc nd ne"><p id="5cbc" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">JSON-LD可以与微数据和RDFa(结构化数据的其他例子)相媲美。</p></blockquote><p id="2e37" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">这是2011年由Google、Bing、Yahoo！而Yandex基于<a class="ae no" href="http://schema.org" rel="noopener ugc nofollow" target="_blank">schema.org</a>词汇。</p><blockquote class="le"><p id="5b33" class="lf lg iq bd lh li np nq nr ns nt lo dk translated">创建JSON-LD的目的是创建一个统一的结构化数据词汇表，该词汇表易于标记并且易于爬行器解析。</p></blockquote><p id="f4e9" class="pw-post-body-paragraph mh mi iq mj b mk nu ka mm mn nv kd mp mq nw ms mt mu nx mw mx my ny na nb lo ij bi translated">本质上，JSON-LD为页面上的元素提供了结构化数据。它描述了网页。JSON-LD标记是有效的JSON，它注释页面上的元素，描述数据，<strong class="mj ja">围绕实体</strong>提供可区分的事实。</p><p id="afbb" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">搜索引擎抓取并解析这些数据，以确定这些事实和实体，从而通过Google和Bing等搜索引擎实现更准确的索引和可发现性。</p><p id="c6f9" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">JSON-LD有助于创建一个更加结构化的互联网。Google使用JSON-LD标记中嵌入的有组织的数据来提高其已经膨胀的网络知识。</p><h2 id="44d4" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">我为什么要关心JSON-LD？</h2><p id="3c5d" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">在以下情况下，您会希望使用JSON-LD:</p><ul class=""><li id="4b21" class="ok ol iq mj b mk ng mn nh mq om mu on my oo lo op oq or os bi translated">你正在努力用最新的技术标准获得最佳的SEO标记。</li><li id="3de2" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated">你希望在SERP (Google)中得到丰富的结果。</li><li id="e1f5" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated">您希望在最少的时间内提供最具描述性的机器可读的数据。</li></ul><blockquote class="nc nd ne"><p id="3633" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">值得注意的是，它并没有取代<code class="fe oy oz pa pb b"><em class="iq">&lt;meta&gt;</em></code>标签和其他SEO标记。这是附加的。</p></blockquote><p id="1f7c" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">还有一个原因…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pc"><img src="../Images/381c54c71199ea89c8d67f466f5c678a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIewBPYpfw7XMv62CV1f0A.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Google Recommends JSON-LD for Structured Data</figcaption></figure><p id="b31d" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">这是谷歌认可的，如果你不在乎谷歌对搜索引擎优化的看法，那么恐怕你做错了。</p><h1 id="efde" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">JSON-LD基础知识</h1><h2 id="cd53" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">语境</h2><p id="0bd3" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated"><code class="fe oy oz pa pb b">"@context": “https://schema.org"</code> —告诉搜索引擎你将要引用schema.org的词汇。然后，您可以使用schema.org定义中的任何项目类型和属性。</p><h2 id="b222" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">类型</h2><p id="6ee3" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated"><code class="fe oy oz pa pb b">"@type": "NewsArticle"</code> —定义所描述的项目类型。可用的类型可以在这里找到【https://schema.org/docs/full.html T21】。</p><p id="7fc7" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">您可以使用嵌套类型，但是理解与产品和嵌套项目相关联的面包屑非常重要，这样您的嵌套类型才是有效的。</p><h2 id="6b10" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">属性和值</h2><p id="8700" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">最后，您需要将项目<code class="fe oy oz pa pb b">property</code>与关联的<code class="fe oy oz pa pb b">value</code>相关联。</p><p id="282d" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">比如说…</p><pre class="kp kq kr ks gt pg pb ph pi aw pj bi"><span id="68ca" class="nz lq iq pb b gy pk pl l pm pn">"name": "Party Coffee Cake"</span></pre><p id="b204" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">所以<strong class="mj ja">属性</strong>是<code class="fe oy oz pa pb b">name</code>，而<strong class="mj ja">值</strong>是<code class="fe oy oz pa pb b">Party Coffee Cake</code>。</p><p id="a030" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">这里有一个完整的例子，摘自:</p><div class="po pp gp gr pq pr"><a href="https://developers.google.com/search/docs/guides/intro-structured-data" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ja gy z fp pw fr fs px fu fw iz bi translated">了解结构化数据的工作原理|搜索开发人员</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">谷歌搜索努力理解一个页面的内容。你可以通过提供关于…的明确线索来帮助我们</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">developers.google.com</p></div></div><div class="qa l"><div class="qb l qc qd qe qa qf ky pr"/></div></div></a></div><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="qg qh l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Example JSON-LD Markup for a Recipe.</figcaption></figure><p id="014e" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">正如您所看到的，JSON-LD在一个类型为<code class="fe oy oz pa pb b">“application/ld+json”</code>的脚本标签中。</p><p id="aa1e" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">看起来很简单，对吗？<strong class="mj ja">那是因为它是。目前… </strong></p><blockquote class="nc nd ne"><p id="fe09" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">嵌套和大型模式肯定会变得更加复杂。但是结构保持不变。</p></blockquote><h1 id="540c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">JSON-LD服务</h1><p id="ac29" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated"><strong class="mj ja">那么让我们开始吧。</strong></p><p id="1033" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们将创建一个Angular服务，它动态地将结构化数据(用schema.org的JSON-LD标记)插入到类型为<code class="fe oy oz pa pb b">application/json+ld</code>的脚本标签中。</p><p id="35dd" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">一个角度服务(单例)是最可重用的。</p><blockquote class="nc nd ne"><p id="9f16" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">另一种方法是在组件级完成，比如在<code class="fe oy oz pa pb b"><em class="iq">AppComponent</em></code>中。然而，<strong class="mj ja">如果我们想从应用程序的多个方面影响JSON-LD，同时尽可能保持干燥，这并不能帮助我们。</strong></p></blockquote><p id="9115" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们先从两种基本的JSON-LD类型开始:<strong class="mj ja"/><a class="ae no" href="https://schema.org/Website" rel="noopener ugc nofollow" target="_blank"><strong class="mj ja">https://schema.org/Website</strong></a><strong class="mj ja"/>和<a class="ae no" href="https://schema.org/Organization." rel="noopener ugc nofollow" target="_blank"><strong class="mj ja">https://schema.org/Organization.</strong></a></p><p id="a61d" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">让我们创建<strong class="mj ja">两个静态模式构建函数</strong>。本质上，这将是两个生成有效JSON-LD的函数，通过参数传递动态数据。</p><p id="e71d" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们需要一个用于<code class="fe oy oz pa pb b">WebSite</code>模式，一个用于<code class="fe oy oz pa pb b">Organization</code>模式。</p><h1 id="eb2d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">1)网站模式</h1><p id="7001" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">您可能已经猜到了一个<code class="fe oy oz pa pb b">WebSite</code>模式提供了关于……<strong class="mj ja">网站</strong>的信息。<strong class="mj ja">用JSON-LD的术语来说，一个网站就是一组相关的页面。</strong></p><p id="3ac2" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">所以让我们为我们的<code class="fe oy oz pa pb b">JSONLDService</code>创建一个名为<code class="fe oy oz pa pb b">websiteSchema</code>的静态函数。</p><h2 id="3242" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">网站架构函数</h2><blockquote class="nc nd ne"><p id="45a5" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">这些值需要是动态的，因为网站模式可以描述一组相关页面，而不是整个网站，这意味着我们将为多个URL使用该模式。</p></blockquote><p id="0366" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">所以，假设你有一个包含主要功能的网站，但在你的领域内也有一个博客。你可能想用不同的网站模式来标记这些页面，以便将这些页面组织成不同的组。这就是动态值将有所帮助的地方。</p><p id="c2bb" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated"><strong class="mj ja">那么，在我们函数的内部… </strong></p><p id="b72a" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们将使用标准的JavaScript (TypeScript)对象，用从<a class="ae no" href="https://schema.org/Website." rel="noopener ugc nofollow" target="_blank">https://schema.org/Website.</a>获得的标记来表示我们的JSON-LD</p><p id="6877" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">除了动态值<code class="fe oy oz pa pb b">url</code>和<code class="fe oy oz pa pb b">name</code>的回退之外，我们还根据参数填充值。</p><p id="f4d3" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们还在<code class="fe oy oz pa pb b">sameAs</code>中列出了我们的社交媒体网址，以便将账户链接到我们的网站。这为知识图提供了额外的上下文，这将在下一节中解释。</p><p id="4433" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">一旦拥有了<code class="fe oy oz pa pb b">WebSite</code>模式的基本属性，就可以包含更多高级属性，比如为SERP站点搜索功能提供搜索查询的<code class="fe oy oz pa pb b">potentialAction</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="qg qh l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">JSON-LD — The Website Schema Builder Function</figcaption></figure><p id="4b94" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated"><strong class="mj ja">但是现在，让我们出于演示的目的继续讨论基础知识。</strong></p><h1 id="a8d4" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">2)组织架构</h1><p id="585f" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">组织标记通过支持您的公司信息，如<strong class="mj ja">业务和营销细节，增强了站点属性。</strong></p><p id="5422" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">这种标记使功能和视觉元素(如知识卡片)能够出现在搜索结果中。</p><blockquote class="le"><p id="2a9d" class="lf lg iq bd lh li np nq nr ns nt lo dk translated">知识卡由来自知识图的数据填充，知识图是一个包含来自web的整理信息的数据库。</p></blockquote><blockquote class="nc nd ne"><p id="d6ed" class="mh mi nf mj b mk nu ka mm mn nv kd mp ni nw ms mt nk nx mw mx nm ny na nb lo ij bi translated">这些信息很容易通过搜索引擎获得。如谷歌的知识卡(右边，在下面的截图中)</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi qi"><img src="../Images/f51833e761239e6a58e89bcf9120ca85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*95m0yVU5GBNIXYIJrTPnfg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Google Search Knowledge Graph Card</figcaption></figure><h2 id="ed49" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">我如何获得知识卡？</h2><p id="b51d" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">有几个因素会影响获取知识图表的能力。</p><ul class=""><li id="d51e" class="ok ol iq mj b mk ng mn nh mq om mu on my oo lo op oq or os bi translated"><strong class="mj ja">谷歌商业账户</strong>。您只需建立一个帐户，并填写完整的帐户信息。</li><li id="3c46" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated">维基百科(Wikipedia)——你也可以创建一个维基百科页面，因为有人建议谷歌广泛使用维基百科获取公司信息。</li><li id="3ded" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated">我们的方法— JSON-LD <strong class="mj ja">组织模式。</strong></li></ul><p id="6c37" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们将通过<strong class="mj ja">组织架构</strong>来提高获得知识卡的机会。</p><blockquote class="nc nd ne"><p id="9f1e" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">注意:建议仅使用一个页面上的<strong class="mj ja">组织架构。这个页面往往是<strong class="mj ja">首页</strong>或者<strong class="mj ja">关于</strong>的页面。</strong></p></blockquote><h2 id="0da9" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">orgSchema函数</h2><p id="59f9" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">先说基本属性。</p><ul class=""><li id="130f" class="ok ol iq mj b mk ng mn nh mq om mu on my oo lo op oq or os bi translated"><code class="fe oy oz pa pb b">url</code> — <strong class="mj ja">组织的规范URL </strong>。例如主页。</li><li id="f81d" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated"><code class="fe oy oz pa pb b">name</code> — <strong class="mj ja">机构名称</strong>。</li><li id="544f" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated"><code class="fe oy oz pa pb b">contactPoint</code>—<code class="fe oy oz pa pb b"><strong class="mj ja">ContactPoint</strong></code>类型的嵌套类型</li><li id="45bc" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated"><code class="fe oy oz pa pb b">telephone</code> —您业务的<strong class="mj ja">电话号码</strong>。</li><li id="0bd6" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated"><code class="fe oy oz pa pb b">contactType</code> —被标记的联系人类型。例如<strong class="mj ja">客服</strong></li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="qg qh l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">JSON-LD — The Organization Schema Builder Function</figcaption></figure><p id="73c4" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">正如您所看到的，这个组织模式没有什么动态的，除了我们将它动态地插入到我们为我们的模式指定的第<strong class="mj ja">一个</strong>页面上的DOM中。</p><p id="b18c" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">但是因为我们只在一个页面上使用这个模式，所以实际的标记数据将是静态的。</p><h1 id="461e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">动态插入JSON-LD标记</h1><p id="1672" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">既然我们已经创建了<code class="fe oy oz pa pb b">WebSite</code>和<code class="fe oy oz pa pb b">Organization</code>模式，<strong class="mj ja">我们需要一个方法来动态地将其插入DOM。</strong></p><p id="d2f0" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">为了提供这个功能，我们需要编写一个方法来创建一个<code class="fe oy oz pa pb b">&lt;script&gt;</code>元素，插入所需的模式标记，并将其附加到DOM的<code class="fe oy oz pa pb b">HEAD</code>部分。</p><h2 id="1ef0" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">removeStructuredData()</h2><p id="f680" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">我们创建一个函数，通过类名<code class="fe oy oz pa pb b">structured-data*</code>在DOM中搜索元素来删除所有结构化数据。我们把这个叫做<code class="fe oy oz pa pb b">removeStructuredData</code>。</p><p id="2f2a" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">调用<code class="fe oy oz pa pb b">removeStructuredData()</code>的最佳时机是当用户离开当前页面时，因为标记应该被清除以用于下一个上下文。</p><blockquote class="nc nd ne"><p id="b354" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">您还会注意到，我们通过构造函数参数中的<code class="fe oy oz pa pb b"><em class="iq">@Inject</em></code>注入了<strong class="mj ja">文档</strong>标记。这是因为我们通常不能访问服务中的DOM/document元素。</p></blockquote><h2 id="8f66" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">insertSchema()</h2><p id="9a15" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">我们还创建了一个函数，它将实际创建脚本元素，用我们的JSON-LD标记填充它，并将其附加到DOM。</p><p id="ab15" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">我们的<code class="fe oy oz pa pb b">insertSchema</code>函数检查DOM中是否不存在具有相同类名的元素，然后根据结果，要么创建一个新的<code class="fe oy oz pa pb b">script</code>元素与之交互，要么使用已经存在的元素。</p><blockquote class="nc nd ne"><p id="b311" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">但是，如果您在每次<code class="fe oy oz pa pb b"><em class="iq">insertSchema</em></code>调用之前使用<code class="fe oy oz pa pb b"><em class="iq">removeStructuredData</em></code>功能，则<code class="fe oy oz pa pb b"><em class="iq">else</em></code>条件将始终运行。</p></blockquote><p id="64a7" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">现在我们有了<code class="fe oy oz pa pb b">&lt;script&gt;</code>元素，我们需要给它分配我们用作标识符的类，并通过将我们的javascript模式传递给<code class="fe oy oz pa pb b">JSON.stringify</code>来插入我们的模式，以将我们的JavaScript <code class="fe oy oz pa pb b"><strong class="mj ja">object</strong></code>转换成<code class="fe oy oz pa pb b"><strong class="mj ja">string</strong></code>。</p><p id="c1f8" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated"><strong class="mj ja">剩下的就是把</strong> <code class="fe oy oz pa pb b"><strong class="mj ja">&lt;script&gt;</strong></code> <strong class="mj ja">追加到头部。</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="qg qh l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Removing, Creating and Appending JSON-LD Data to the DOM</figcaption></figure><blockquote class="nc nd ne"><p id="e5bf" class="mh mi nf mj b mk ng ka mm mn nh kd mp ni nj ms mt nk nl mw mx nm nn na nb lo ij bi translated">让我们的JSON-LD构建器工作需要调用带有正确参数的<code class="fe oy oz pa pb b"><em class="iq">insertSchema()</em></code>函数。</p></blockquote><pre class="kp kq kr ks gt pg pb ph pi aw pj bi"><span id="1c95" class="nz lq iq pb b gy pk pl l pm pn">insertSchema(JSONLDService.websiteSchema)<br/>insertSchema(JSONLDService.orgSchema, 'structured-data-org')</span></pre><h1 id="79d2" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">完整的JSON-LD服务代码</h1><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="qg qh l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">JSON-LD Angular Service — Full Code</figcaption></figure><p id="4084" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">扩展这个服务就像创建额外的模式一样简单，比如<code class="fe oy oz pa pb b">Article</code>、<code class="fe oy oz pa pb b">Review</code>、<code class="fe oy oz pa pb b">Logo</code>。</p><div class="po pp gp gr pq pr"><a href="https://developers.google.com/search/docs/guides/search-gallery" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ja gy z fp pw fr fs px fu fw iz bi translated">探索搜索库|搜索开发者| Google开发者</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">Google使用结构化数据来理解页面上的内容。您可以通过提供具体信息来帮助我们…</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">developers.google.com</p></div></div><div class="qa l"><div class="qj l qc qd qe qa qf ky pr"/></div></div></a></div><h1 id="bdc7" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">何时插入您的JSON-LD</h1><p id="1929" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">Angular路由器使用<a class="ae no" href="https://angular.io/api/router/RouterEvent" rel="noopener ugc nofollow" target="_blank"> <strong class="mj ja">路由器事件API </strong> </a> <strong class="mj ja">，提供了一种处理JSON-LD数据的直观方法。这是我销毁和插入SEO元数据和JSON-LD的首选方式。</strong></p><p id="43f1" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">例如<strong class="mj ja">破坏<code class="fe oy oz pa pb b">NavigationStart</code>上的</strong>和<code class="fe oy oz pa pb b">NavigationEnd</code>上的<strong class="mj ja">插</strong>。</p><p id="a36e" class="pw-post-body-paragraph mh mi iq mj b mk ng ka mm mn nh kd mp mq nj ms mt mu nl mw mx my nn na nb lo ij bi translated">您还可以通过以下方式处理SEO/JSON-LD:</p><ul class=""><li id="ea00" class="ok ol iq mj b mk ng mn nh mq om mu on my oo lo op oq or os bi translated"><strong class="mj ja">解析器</strong> —适用于数据相关的SEO/JSON-LD标记。</li><li id="0040" class="ok ol iq mj b mk ot mn ou mq ov mu ow my ox lo op oq or os bi translated"><strong class="mj ja">组件</strong>—ngunit生命周期挂钩</li></ul><h2 id="9cb9" class="nz lq iq bd lr oa ob dn lv oc od dp lz mq oe of mb mu og oh md my oi oj mf iw bi translated">现在我们有了一个用Angular实现JSON-LD的简单方法🚀</h2><blockquote class="le"><p id="45cd" class="lf lg iq bd lh li np nq nr ns nt lo dk translated">感谢阅读！有任何问题，请在评论中告诉我。</p></blockquote><h1 id="e06f" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf ma kg mb ki mc kj md kl me km mf mg bi translated">用简单的英语写的便条</h1><p id="4609" class="pw-post-body-paragraph mh mi iq mj b mk ml ka mm mn mo kd mp mq mr ms mt mu mv mw mx my mz na nb lo ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae no" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="mj ja">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae no" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="mj ja">订阅我们的YouTube频道</strong> </a> <strong class="mj ja">来表达你的爱吧！</strong></p><h1 id="7f06" class="lp lq iq bd lr ls lt lu lv lw lx ly lz kf pd kg mb ki pe kj md kl pf km mf mg bi translated">访问帮助并测试JSON-LD结构化数据</h1><div class="po pp gp gr pq pr"><a href="https://developers.google.com/search/docs/guides/intro-structured-data" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ja gy z fp pw fr fs px fu fw iz bi translated">了解结构化数据的工作原理|搜索开发人员</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">谷歌搜索努力理解一个页面的内容。你可以通过提供关于…的明确线索来帮助我们</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">developers.google.com</p></div></div><div class="qa l"><div class="qk l qc qd qe qa qf ky pr"/></div></div></a></div><div class="po pp gp gr pq pr"><a href="https://search.google.com/structured-data/testing-tool/u/0/" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ja gy z fp pw fr fs px fu fw iz bi translated">结构化数据测试工具——谷歌</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">JSON-LD</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">search.google.com</p></div></div></div></a></div><div class="po pp gp gr pq pr"><a href="https://angular.io/api/router/RouterEvent" rel="noopener  ugc nofollow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd ja gy z fp pw fr fs px fu fw iz bi translated">有角的</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">Angular是一个构建移动和桌面web应用程序的平台。加入数百万开发者的社区…</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">angular.io</p></div></div></div></a></div></div></div>    
</body>
</html>
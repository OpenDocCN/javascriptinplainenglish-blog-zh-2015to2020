<html>
<head>
<title>forEach l∞p in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的forEach l∞p</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/foreach-loop-in-javascript-6b19e78d655b?source=collection_archive---------0-----------------------#2019-06-14">https://javascript.plainenglish.io/foreach-loop-in-javascript-6b19e78d655b?source=collection_archive---------0-----------------------#2019-06-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="138c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">JavaScript提供了n种方法来循环数组。与传统for循环不同的主要方式之一是<strong class="jm io"> forEach </strong>循环。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c941a0a45eaae268e641b634ebcbc7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tmYn1nv5z3jQb63B"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@lysanderyuen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lysander Yuen</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="4a90" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">每个人的l∞ps</h1><p id="0b45" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">与其他语言相比，使用JavaScript的一个最大优势是它提供了足够的选择来做基本的事情。例如，考虑循环。程序中最简单和最基本的部分之一。循环有很多种方式，每个JS程序员都有他/她喜欢的循环方式。<strong class="jm io"> forEach </strong>就是其中之一。</p><p id="fdb3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> forEach </strong>方法为每个数组元素执行一次提供的函数，即<strong class="jm io">回调</strong>。这听起来对<strong class="jm io">贴图</strong>或<strong class="jm io">滤镜</strong>太熟悉了。让我们了解更多关于<strong class="jm io"> forEach </strong>的知识，看看是什么让它从JavaScript的其他循环中脱颖而出。</p><h2 id="769f" class="mc la in bd lb md me dn lf mf mg dp lj jv mh mi ln jz mj mk lr kd ml mm lv mn bi translated">句法</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/39ba06dade273156c4313e4fd00f4ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*Qd-GTn3Ht8DTIAbDrx0OVQ.png"/></div></figure><p id="de39" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码片段是一个<strong class="jm io"> forEach </strong>循环的语法。<strong class="jm io"> forEach </strong>循环只能在迭代器上迭代。这里我们使用一个数组。数组被迭代，所有的元素被一个接一个地分配给<em class="mp"> e </em>，我们可以对它执行任何操作。</p><h2 id="456f" class="mc la in bd lb md me dn lf mf mg dp lj jv mh mi ln jz mj mk lr kd ml mm lv mn bi translated">因素</h2><p id="4272" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">参数在回调函数中传递，它们是-</p><ul class=""><li id="1481" class="mq mr in jm b jn jo jr js jv ms jz mt kd mu kh mv mw mx my bi translated">currentValue —回调中传递的当前值。在snip中，currentValue是e。必须提供此参数。</li><li id="eddc" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">index —数组中当前元素的索引。这是一个可选参数。</li><li id="a6d3" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">this —对调用对象的引用，换句话说，它将被用作回调的this值。否则，这将被设置为未定义。最终，提供的this值由该赋值的常规规则决定。这可能有点令人困惑，你可以参考这篇关于<em class="mp">的文章</em>来了解更多信息。</li></ul><h2 id="b088" class="mc la in bd lb md me dn lf mf mg dp lj jv mh mi ln jz mj mk lr kd ml mm lv mn bi translated">返回</h2><p id="b93a" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">未定义。一直都是。</p><p id="6d53" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Filter，Map返回数组，<strong class="jm io"> forEach </strong>返回undefined。这是这些循环之间的主要区别。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="ce39" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">既然基本的工作已经完成，让我们来看看使用<strong class="jm io"> forEach时要记住的规则。</strong></p><ul class=""><li id="097c" class="mq mr in jm b jn jo jr js jv ms jz mt kd mu kh mv mw mx my bi translated"><strong class="jm io"> forEach </strong>对每个数组元素执行一次回调函数。</li><li id="ce08" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">它总是返回undefined。</li><li id="c907" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">它不会改变数组，但是回调函数可以这样做。</li><li id="450e" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io"> forEach </strong>不像map、reduce或filter那样可以链接。</li><li id="bd08" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">由<strong class="jm io"> forEach </strong>循环处理的元素范围是在第一次调用回调函数之前设置的。</li><li id="4a5a" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">循环不会访问在<strong class="jm io"> forEach </strong>开始后追加到数组中的元素。</li><li id="c2bd" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">在被循环访问之前被删除的元素不会被访问。</li><li id="fbd7" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">如果已经访问过的元素在迭代过程中从数组中删除，后面的元素将被跳过。</li><li id="aaac" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io"> forEach </strong>循环一旦开始就不能停止。有几分地..</li><li id="6ba4" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io"> forEach </strong>不会对没有值的数组元素执行回调。</li></ul><p id="0212" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当使用<strong class="jm io"> forEach </strong>循环时，这些是必须记住的规则。有些很简单，有些可能需要解释。</p><p id="6781" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面将显示不同的示例，这些示例将突出显示规则，并明确何时何地使用forEach 以及何时不使用。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h2 id="1080" class="mc la in bd lb md me dn lf mf mg dp lj jv mh mi ln jz mj mk lr kd ml mm lv mn bi translated">例子</h2><p id="41b4" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated"><strong class="jm io"> for循环</strong>和<strong class="jm io"> forEach </strong>循环语法的区别</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/7a90ee1983089bb471a2a19388ddd58a.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*_TxOphje-1HFaPOhn5BCkQ.png"/></div></div></figure><p id="cfc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该截图向我们展示了与for循环相比，使用<strong class="jm io"> forEach </strong>循环是多么容易。</p><p id="ce8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用for循环，我们必须为循环创建完整的模板获取数组的长度，初始化，递增并赋值给<em class="mp"> i. </em> <strong class="jm io"> ForEach </strong>不需要所有这些，我们只需定义一个回调，使用arrow函数语法会容易得多。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/16e8ee89645d2a3f014d933be4dfb162.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*HSeTkUzW0NNjDXzIEmcrrQ.png"/></div></figure><p id="05c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个截图中，我们可以看到，当数组中有一个null、空的或未定义的元素时，<strong class="jm io"> forEach </strong>循环就不会访问它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6c961d2553f0967c415d6af7a254549b.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*SRhjOpRBz-jIO7Km6Xq06A.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><em class="no">Example taken from MDN</em></figcaption></figure><p id="7264" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里我们可以看到this关键字的用法。我们创建了一个名为counter的函数，并在其原型中添加了一个add函数。使用<strong class="jm io"> forEach </strong>循环，我们计算数组中元素的数量以及元素的总和。这用于指向计数器的属性sum和count。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/35d17c8cc3e6baab5bbb13df079fb8d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*yMDcKPnci3b_vIuOl3UhXQ.png"/></div></figure><p id="b656" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个代码片段中，我们在一个数组上使用了<strong class="jm io"> forEach </strong>，如果一个元素满足某个条件，我们使用shift()从数组中删除该元素。我们可以看到这里发生了一件奇怪的事情，元素2从数组中移除，但它也被打印出来，但下一个元素3没有被打印出来。</p><p id="91bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是因为元素2在打印后被移除。当使用shift()移除元素3时，元素3占据了它的位置。移除时的当前指数为1。移除后<strong class="jm io"> forEach </strong>移至索引2，本应是3的位置，但在2的位置被移至位置1，因此未被打印。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/8b69aafb9367c0fe50d997d400b48a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*52mte-JN9QlPjjIGwRG1ig.png"/></div></figure><p id="974e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">规则中规定，一旦开始运行，就不能停止<strong class="jm io"> forEach </strong>循环。它不能用传统的方法停止，比如使用break，或者从回调函数返回false。它只有在抛出异常时才会停止。在这个截图中，我们创建了一个名为exception的对象，如果条件满足要求，就会抛出一个异常，最终停止执行<strong class="jm io"> forEach </strong>循环。整个循环都包含在try catch块中。</p><p id="32ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望你喜欢这篇文章，并且理解<strong class="jm io"> forEach </strong>循环是如何工作的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/8fa3b0fe054a13c3766d159ba831adc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/1*puO9QPsENQ5ww1QKNuf6tw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Google</figcaption></figure></div></div>    
</body>
</html>
# ååº”å¼æœ¬åœ°å¯¼èˆªç®€ä»‹

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/introduction-to-react-native-navigation-e453ec30c42f?source=collection_archive---------2----------------------->

![](img/09b0d8c69cbc28b6a0e23df23ea9ba2f.png)

åœ¨ react-native ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„äº‹æƒ…ä¹‹ä¸€æ˜¯é€‰æ‹©æ­£ç¡®çš„å¯¼èˆªï¼Œè¿™æ˜¯å› ä¸ºè„¸ä¹¦ä½¿ç”¨äº†åŸç”Ÿå¯¼èˆªç³»ç»Ÿ(ä¸€ä¸ªæœ‰ä¸€äº› RN è§†å›¾çš„åŸç”Ÿåº”ç”¨)ã€‚å› æ­¤ï¼Œè¿™å°†æŠŠæˆ‘ä»¬å¸¦åˆ°ä¸¤ä¸ªæœ€å—æ¬¢è¿çš„å¯¼èˆªè§£å†³æ–¹æ¡ˆ*Wix çš„ react-native-navigation* å’Œ Airbnb çš„ *react-navigation* ã€‚å½“ç„¶ï¼Œæ­£å¦‚æ ‡é¢˜ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨*ååº”-æœ¬åœ°-å¯¼èˆªã€‚*è¦äº†è§£ä¸¤ç§è§£å†³æ–¹æ¡ˆçš„åŒºåˆ«ï¼Œè¯·æŸ¥çœ‹[é€‰æ‹©æ­£ç¡®çš„æœ¬åœ°å¯¼èˆª](https://medium.com/hackernoon/how-to-choose-the-right-react-native-navigation-library-48679d63c9e9)ã€‚

## é¦–å…ˆä»€ä¹ˆæ˜¯å¯¼èˆªï¼Ÿ

> åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè°ˆè°ˆå¯¼èˆªå’Œæˆ‘ä»¬è¯•å›¾è§£å†³çš„é—®é¢˜ã€‚åŸºæœ¬ä¸Šå¯¼èˆªæ˜¯åº”ç”¨ç¨‹åºçš„å…³é”®éƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£å¤„ç†äº¤äº’ï¼Œå…è®¸ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºçš„ä¸åŒå†…å®¹åŒºåŸŸä¹‹é—´ç§»åŠ¨ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© react-native-navigation(RNN)ï¼Ÿ

æ­£å¦‚ react-native [æ–‡æ¡£](https://facebook.github.io/react-native/docs/navigation#react-navigation)ä¸­æåˆ°çš„ï¼ŒRNN åœ¨ Android å’Œ IOS ä¸­éƒ½æä¾›äº†åŸç”Ÿå¯¼èˆªã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦å¯»æ‰¾çš„ï¼›æˆ‘ä»¬çš„ç”¨æˆ·åº”è¯¥å¯¹å¯¼èˆªæ„Ÿåˆ°ç†Ÿæ‚‰ã€‚å¦å¤–, *native* è¿™ä¸ªè¯æ„å‘³ç€è¿™ä¸ªåº“å°†ä¼šæ›´æœ‰æ•ˆç‡ï¼Œå¹¶ä¸”åœ¨å±å¹•ä¹‹é—´æœ‰å¹³æ»‘çš„è¿‡æ¸¡ğŸ˜ƒã€‚

åœ¨é‚£ä¹‹åï¼Œä»–è¯´è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œé›†æˆ RNNï¼Œç© RNN çš„åŸºç¡€(å †æ ˆã€setRootã€æ¨é€ã€popã€æ¨¡æ€ç­‰)

## å¼€å§‹ä½¿ç”¨ã€‚

1-è½¬åˆ°å‘½ä»¤è¡Œï¼Œä½¿ç”¨ react-native CLI å¯åŠ¨ä¸€ä¸ªæ–°çš„ react native é¡¹ç›®ã€‚æˆ‘ä»¬ä½¿ç”¨ react-native init è€Œä¸æ˜¯ expo init çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å‘æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº›æœ¬æœºä»£ç ã€‚

```
> react-native init RNNIntro
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ npm æˆ– yarn å®‰è£… react-native-navigation åŒ…ã€‚

```
> yarn add react-native-navigation# or> npm install --save react-native-navigation
```

ç„¶åï¼Œæˆ‘ä»¬éœ€è¦é“¾æ¥æœ¬æœºä¾èµ–é¡¹ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸€äº›æœ¬æœºä»£ç ã€‚

å¯¹äº IOSï¼Œè¯·éµå¾ªè¿™äº›[è¯´æ˜](https://wix.github.io/react-native-navigation/#/docs/Installing?id=ios)

å¯¹äº Androidï¼Œè¯·éµå¾ªè¿™äº›[è¯´æ˜](https://wix.github.io/react-native-navigation/#/docs/Installing?id=android)

## åŸºç¡€çŸ¥è¯†

æˆåŠŸæ·»åŠ  react-native-navigation åï¼Œç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å®ç°å¯¼èˆªã€‚

**é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ·»åŠ æ–‡ä»¶å’Œæ–‡ä»¶å¤¹:**

```
> cd RNNIntro && mkdir src 
> cd src && mkdir Navigation screens
```

è¿™é‡ŒğŸ‘†æˆ‘ä»¬æ·»åŠ äº† src æ–‡ä»¶å¤¹ï¼Œå®ƒå°†åŒ…å«å¯¼èˆªå’Œå±å¹•æ–‡ä»¶å¤¹

```
> cd Navigation && touch index.js screens.js
> cd ./screens && mkdir Home && cd Home && touch index.js styles.js
> cd .. && mkdir PushedScreen && cd PushedScreen && touch index.js styles.js
> cd .. && mkdir ModalScreen && cd ModalScreen && touch index.js styles.js
```

â˜ï¸:åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† index.js å’Œ screens.js æ·»åŠ åˆ°å¯¼èˆªæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶æ·»åŠ äº†åŒ…å« index.js å’Œ styles.js æ–‡ä»¶çš„ä¸»æ–‡ä»¶å¤¹

ç°åœ¨ï¼Œæ–‡ä»¶å¤¹ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„

![](img/c7a97660980644a4d61d6f47383df9ec.png)

åœ¨ Navigation/screens.js ä¸­ï¼Œæˆ‘ä»¬å°†æ³¨å†Œæ‰€æœ‰çš„å±å¹•ï¼Œæ¯•ç«Ÿï¼Œæ¯ä¸ªå±å¹•ç»„ä»¶éƒ½å¿…é¡»æ³¨å†Œä¸€ä¸ªå”¯ä¸€çš„åç§°

**2ã€‚æ³¨å†Œå±å¹•**

è¿™é‡ŒğŸ‘†æˆ‘ä»¬æ³¨å†Œäº† Homeã€pushedScreen å’Œ ModalScreen ç»„ä»¶ï¼Œå¹¶ç»™æ¯ä¸ªç»„ä»¶å–äº†ä¸€ä¸ªæƒŸä¸€çš„åç§°ã€‚

ç„¶ååœ¨ Navigation/index.js ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨ registerScreens å‡½æ•°å¹¶åˆå§‹åŒ–å±å¹•(åº”è¯¥åœ¨åˆ›å»ºå¯¼èˆªçš„æ ¹ä¹‹å‰è°ƒç”¨å®ƒ)ã€‚ç„¶åï¼Œæˆ‘ä»¬è¿˜é€šè¿‡ setRoot å‘½ä»¤å¯åŠ¨äº†åº”ç”¨ç¨‹åºã€‚

**3ã€‚åˆå§‹åŒ–åº”ç”¨ç¨‹åº**

ç°åœ¨è®©æˆ‘ä»¬æ›´æ–° index.js å¹¶è°ƒç”¨ start å‡½æ•°æ¥åˆå§‹åŒ–åº”ç”¨ç¨‹åºã€‚

**æ·»åŠ ä¸»å±å¹•**

ç°åœ¨è®©æˆ‘ä»¬ç»™æˆ‘ä»¬çš„ä¸»å±å¹•æ·»åŠ ä¸€äº›åŸºæœ¬çš„æ ·å¼

Home/index.js

Home/styles.js

ç°åœ¨ï¼Œåº”ç”¨ç¨‹åºåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·

![](img/123e04a0dc1264d36cb0d4c25b3fb44f.png)

## æ¨å‡ºæ‚¨çš„ç¬¬ä¸€ä¸ªå±å¹•

ä¸ºäº†æ¨é€ä¸€ä¸ªå±å¹•ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨[å¯¼èˆªã€‚æ¨é€](https://wix.github.io/react-native-navigation/#/docs/screen-api?id=pushcomponentid-layout)è¿™ä¸ªæ–¹æ³•æœŸæœ›ä»å±å¹•`props.componentId`æ¥æ”¶å½“å‰æ˜¾ç¤ºçš„ç»„ä»¶ idã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æŒ‰é’®å±å¹•æŒ‰é’®å¯¼èˆªåˆ°ä¸‹ä¸€ä¸ªå±å¹•

ä¸‹é¢æ˜¯ Home/index.js çš„æ ·å­

è®©æˆ‘ä»¬å‘ pushScreen ç»„ä»¶æ·»åŠ ä¸€äº›åŸºæœ¬æ ·å¼

æ¨é€çš„ Screen/index.js

pushed screen/style . js

> åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè¯·å…ˆå»æµ‹è¯•ä¸€ä¸‹ä¸Šé¢çš„ä»£ç 

æ¬¢è¿å›æ¥ğŸ˜œã€‚æ­£å¦‚æ‰€æ–™ï¼Œç‚¹å‡»æŒ‰é’®å±å¹•æŒ‰é’®åæ²¡æœ‰ä»»ä½•ååº”ï¼ŒåŸå› æ˜¯æˆ‘ä»¬åº”è¯¥ä½¿ç”¨`stack` [å¸ƒå±€ç±»å‹](https://wix.github.io/react-native-navigation/#/docs/layout-types?id=stack)è¿›è¡Œå¯¼èˆªã€‚

æ›´æ–° Navigation/index.js setRoot å‘½ä»¤

```
Navigation.setRoot({
 root: {
    stack: {
         children: [{
              component: {
                 name: 'HomeScreen',
              },
         }],
    },
 },
});
```

ç°åœ¨å†è¯•ä¸€æ¬¡ï¼Œç§ï¼Œä½ æ¨å‡ºäº†ä½ çš„ç¬¬ä¸€ä¸ªå±å¹•ã€‚

![](img/4e8e3f0796890a495ca15e498b964c13.png)

æˆ‘çŸ¥é“æˆ‘çŸ¥é“ã€‚è¿™çœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬ä¿æŒè¿™ç§çŠ¶æ€ğŸ˜›

è¯·è®°ä½ï¼Œå½“å¯¼èˆªæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†é“å…·ä¼ é€’åˆ°æˆ‘ä»¬æ­£åœ¨æ¨åŠ¨çš„å±å¹•ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨[é€‰é¡¹](https://wix.github.io/react-native-navigation/#/docs/options-migration?id=common-options)æ¥è®¾è®¡å¯¼èˆªå™¨çš„å¤–è§‚ã€‚æˆ‘ä»¬å°†åœ¨æ‰“å¼€ä¸€ä¸ªæ¨¡å‹æ—¶æ¢ç´¢å®ƒä»¬

**å¼¹å‡ºå±å¹•**

åœ¨æŒ‰ä¸‹å½“å‰å±å¹•åï¼Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿå›åˆ°ä¸Šä¸€ä¸ªå±å¹•ï¼Œè¿™å¯ä»¥é€šè¿‡ç‚¹å‡»é»˜è®¤æä¾›çš„é¡¶éƒ¨æ çš„è¿”å›ç®­å¤´æŒ‰é’®æ¥å®Œæˆ(å¦‚æœæˆ‘ä»¬æƒ³çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€‰é¡¹éšè—é¡¶éƒ¨æ )ï¼Œæˆ–è€…å¦‚æœä½ åœ¨ IOS ä¸­ï¼Œé€šè¿‡ä»å·¦å‘å³æ»‘åŠ¨æ‰‹æŒ‡æ¥å®Œæˆã€‚æˆ–è€…ä½¿ç”¨ Navigation.pop æ–¹æ³•

ç°åœ¨è®©æˆ‘ä»¬ç”¨ goBack æŒ‰é’®è¿æ¥ navigation.pop

## æ‰“å¼€æ‚¨çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ã€‚

åœ¨æˆ‘ä»¬æ‰“å¼€æ¨¡æ€ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè°ˆè°ˆ RNN çš„ openModal å’Œ pushScreen ä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥åŠä½•æ—¶ä½¿ç”¨æ¨¡æ€

åŸºæœ¬ä¸Šï¼Œæ¨¡æ€åªæ˜¯æ¨åŠ¨å±å¹•çš„å¦ä¸€ç§æ–¹å¼ï¼Œä½†å®ƒæœ‰ä¸€äº›ç‹¬ç‰¹çš„åŠŸèƒ½å’Œè¡Œä¸ºï¼Œä¾‹å¦‚:

*   é»˜è®¤æƒ…å†µä¸‹ï¼ŒModal æœ‰ä¸€ä¸ªå‘ä¸Šæ»‘åŠ¨çš„åŠ¨ç”»(Android)
*   Modal æ²¡æœ‰é»˜è®¤çš„åé€€æŒ‰é’®ã€‚

**ä½•æ—¶ä½¿ç”¨æƒ…æ€åŠ¨è¯ã€‚**

å½“éœ€è¦ç”¨æˆ·ç«‹å³æ³¨æ„æ—¶ï¼Œä½¿ç”¨æ¨¡æ€ï¼Œå› ä¸ºå®ƒä¼šé˜»æ­¢ç”¨æˆ·ä¸å®ƒä¸‹é¢çš„è§†å›¾äº¤äº’ã€‚æ¨¡å¼çš„å…¸å‹ç”¨ä¾‹æ˜¯è­¦æŠ¥ã€åŠ¨ä½œè¡¨ä»¥åŠç®€çŸ­çš„ä»»åŠ¡å’Œæµç¨‹ã€‚

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºæ‰“å¼€çš„æ¨¡æ€ã€‚

**é¦–å…ˆ**ï¼Œè®©æˆ‘ä»¬å°†å¯¼èˆª openModal æ–¹æ³•ä¸ä¸»å±å¹•ä¸­çš„æŒ‰é’®è¿æ¥èµ·æ¥ã€‚

è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹ openModal æ–¹æ³•:

*   passProps:å…è®¸æˆ‘å°†é“å…·ä¼ é€’åˆ°æ¨é€çš„å±å¹•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé“å…·åç§°ä¸º*æ–‡æœ¬*ï¼Œå…¶å€¼ä¸º*è¿™æ˜¯æ¨¡æ€å±å¹•*
*   é€‰é¡¹:åœ¨é€‰é¡¹å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†é¡¶æ æ ‡é¢˜å¹¶æ·»åŠ äº†å·¦æŒ‰é’®

ç°åœ¨è®©æˆ‘ä»¬è½¬åˆ° ModalScreenï¼Œç»™å®ƒä¸€äº›åŸºæœ¬çš„æ ·å¼

æ­£å¦‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ğŸ‘†æˆ‘ä»¬æ·»åŠ äº†*navigation button pressed*äº‹ä»¶ï¼Œæ¯å½“ç”¨æˆ·æŒ‰ä¸‹ TopBar æŒ‰é’®æ—¶éƒ½ä¼šè°ƒç”¨è¯¥äº‹ä»¶ï¼Œç„¶åå½“ç”¨æˆ·å•å‡»å·¦æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬ä¼šæ¶ˆé™¤è¯¥æ¨¡å¼(æˆ‘ä»¬å°†è¯¥æŒ‰é’®çš„ id è®¾ä¸ºâ€œleft buttonâ€)ã€‚åœ¨ render å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ£€ç´¢å¹¶æ˜¾ç¤ºäº†æ–‡æœ¬å±æ€§ã€‚

![](img/812a68c0406405445beb6885c37eca5b.png)

# å¥–é‡‘

å› ä¸ºä½ æ˜¯æˆ‘æœ€å–œæ¬¢çš„è¯»è€…ï¼Œæˆ‘æƒ³å’Œä½ åˆ†äº«ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ¥ç»„ç»‡ä½ çš„å¯¼èˆªã€‚è®©æˆ‘ä»¬åœ¨`**Navigation/index.js**`ä¸­å£°æ˜æˆ‘ä»¬æ‰€æœ‰çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªç»„ä»¶ä¸Šå£°æ˜å¯¼èˆªå‡½æ•°ã€‚1-ä»`**Home/index.js**`ä¸­ç§»é™¤`**openModal**`å’Œ`**PushScreen**`åŠŸèƒ½ã€‚

2-æ‰“å¼€`**Navigation/index.js**`ï¼Œæ·»åŠ å¯¼èˆªåŠŸèƒ½

3-ä¸ºäº†æ–¹ä¾¿å¯¼å…¥è¯¥æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†æŠŠ`**package.json**`æ–‡ä»¶æ·»åŠ åˆ°å¯¼èˆªæ–‡ä»¶å¤¹ä¸­ã€‚

```
**{
	"name": "Navigation"
}**
```

4-ç°åœ¨è½¬åˆ°`**Home/index.js**`ï¼Œå¯¼å…¥åŠŸèƒ½å¹¶æ›¿æ¢

```
**import {Navigation} from 'react-native-navigation'**
```

éšç€

```
**import {pushScreen, openModal} from  'Navigation';**
```

# æ„Ÿè°¢é˜…è¯»ğŸ“šï¼

æˆ‘å¸Œæœ›ä½ å’Œæˆ‘ä¸€æ ·å–œæ¬¢è¿™ä¸ªå…³äº RNN çš„å¿«é€Ÿä»‹ç»ï¼Œç¥ä½ çš„ react-native-navigation ä¹‹æ—…å¥½è¿ã€‚è¯·æŸ¥çœ‹[å›è´­](https://github.com/Yassir4/react-native-navigation-intro)åˆ«å¿˜äº†å…³æ³¨æˆ‘çš„ [***æ¨ç‰¹***](https://twitter.com/hartaniyassir) å’Œ[***Github***](https://github.com/Yassir4/)

> ***æœ¬æ–‡åŸè½½äº*** [***Obytes åšå®¢***](https://www.obytes.com/blog/2019/intro-to-react-native-navigation/) ***ã€‚***
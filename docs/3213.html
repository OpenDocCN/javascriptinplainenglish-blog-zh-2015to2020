<html>
<head>
<title>React and React Redux — Connecting to Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React和React Redux —连接到Redux</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-and-react-redux-connecting-to-redux-49b01a5dd1e0?source=collection_archive---------8-----------------------#2020-09-09">https://javascript.plainenglish.io/react-and-react-redux-connecting-to-redux-49b01a5dd1e0?source=collection_archive---------8-----------------------#2020-09-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2188" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Redux 是一个轻量级的状态管理工具，帮助React应用中的组件相互通信。这背后的简单概念是，组件的每个状态都保存在一个全局存储中。以便每个组件都可以从该存储中访问任何状态。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/95f4db91032198318a1606d2682d158d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uov-TfA20xfGqeIZyLWfnA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Cover Image</figcaption></figure><p id="224d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇博客中，我们来看一个React-Redux的简单例子。逻辑是用React-Redux增加和减少一个按钮上的数字。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="138f" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated"><strong class="ak">目录</strong></h2><ul class=""><li id="a78d" class="mc md iq jp b jq me ju mf jy mg kc mh kg mi kk mj mk ml mm bi translated"><a class="ae kl" href="#ee30" rel="noopener ugc nofollow">创建React应用和初始设置</a></li><li id="f879" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated"><a class="ae kl" href="#3efb" rel="noopener ugc nofollow">设计我们的视图</a></li><li id="e652" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated"><a class="ae kl" href="#0b3f" rel="noopener ugc nofollow">连接React到Redux </a></li><li id="9627" class="mc md iq jp b jq mn ju mo jy mp kc mq kg mr kk mj mk ml mm bi translated"><a class="ae kl" href="#80f3" rel="noopener ugc nofollow">调度动作</a></li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="3101" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated"><strong class="ak"> 1。创建React应用程序和初始设置</strong></h2><p id="ee30" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ms ka kb kc mt ke kf kg mu ki kj kk ij bi translated">首先，让我们创建一个新的React应用程序。此外，检查创建的项目是否一切正常。</p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="0b95" class="lj lk iq mw b gy na nb l nc nd">npx create-react-app reactapp<br/>cd reactapp</span></pre><p id="fbe9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们安装Redux。</p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="4553" class="lj lk iq mw b gy na nb l nc nd">npm install redux<br/>npm install react-redux<br/>npm start</span></pre><p id="4a30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在打开<a class="ae kl" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>检查服务器是否启动良好。现在让我们创建我们的视图。</p><h2 id="3efb" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">2.<strong class="ak">设计我们的视图</strong></h2><p id="9655" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ms ka kb kc mt ke kf kg mu ki kj kk ij bi translated">这里，我创建了一个简单的名为<code class="fe ne nf ng mw b">Counter.js</code>的React类组件，它有两个按钮和一个文本，其中一个按钮用于递增，另一个用于递减。递增和递减的值将显示在段落标记中。</p><p id="8b2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/Counter.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="37f7" class="lj lk iq mw b gy na nb l nc nd">import React, { Component } from 'react'</span><span id="ae9c" class="lj lk iq mw b gy nh nb l nc nd">export default class Counter extends Component {<br/>render() {<br/>  return ( <br/>      &lt;div&gt;<br/>          &lt;h1&gt;Counter&lt;/h1&gt;<br/>          <br/><strong class="mw ir">          &lt;button style={{ height: '40px', width: '150px' }}&gt;Increment + &lt;/button&gt;<br/>          <br/>          &lt;p&gt;4&lt;/p&gt;<br/>          <br/>          &lt;button style={{ height: '40px', width: '150px' }}&gt;Decrement - &lt;/button&gt;</strong><br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="26c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建计数器视图后，我将计数器组件包含在我的<code class="fe ne nf ng mw b">App.js</code>文件中。</p><p id="8aca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/App.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="3acb" class="lj lk iq mw b gy na nb l nc nd">import React from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';<br/>import Counter from './Counter'</span><span id="7c84" class="lj lk iq mw b gy nh nb l nc nd">function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/><strong class="mw ir">      &lt;Counter /&gt;<br/></strong>    &lt;/div&gt;<br/>  );<br/>}</span><span id="b084" class="lj lk iq mw b gy nh nb l nc nd">export default App;</span></pre><p id="b961" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在打开浏览器，导航到<a class="ae kl" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>。你一定会看到这样的东西。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ni"><img src="../Images/73fb7b2363c89cd03300216103f4293c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lEMrr-Veh6ay0NucohuJWQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Counter View</figcaption></figure><h2 id="0b3f" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">3.<strong class="ak">连接React到Redux </strong></h2><p id="e453" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ms ka kb kc mt ke kf kg mu ki kj kk ij bi translated">我们知道一个Redux应用有一个全球商店。为了将我们的组件连接到那个全球商店，我们使用了一个叫做<code class="fe ne nf ng mw b">connect.</code>的东西来帮助我们从商店中获取所有的数据。此外，它还帮助我们分派行动。</p><p id="db24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/Counter.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="551a" class="lj lk iq mw b gy na nb l nc nd">import React, { Component } from 'react'<br/><strong class="mw ir">import { connect } from 'react-redux'</strong></span><span id="7741" class="lj lk iq mw b gy nh nb l nc nd">export class Counter extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;h1&gt;Counter&lt;/h1&gt;</span><span id="9056" class="lj lk iq mw b gy nh nb l nc nd">        &lt;button style={{ height: '40px', width: '150px' }}&gt;Increment +&lt;/button&gt;</span><span id="be43" class="lj lk iq mw b gy nh nb l nc nd">        &lt;p&gt;<strong class="mw ir">{this.props.val}</strong>&lt;/p&gt;</span><span id="e2fb" class="lj lk iq mw b gy nh nb l nc nd">        &lt;button style={{ height: '40px', width: '150px' }}&gt;Decrement -&lt;/button&gt;</span><span id="96f9" class="lj lk iq mw b gy nh nb l nc nd">      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span><span id="017a" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">const mapStateToProps = state =&gt; ({ <br/>    val: state.val<br/>})</strong></span><span id="ea0b" class="lj lk iq mw b gy nh nb l nc nd">export default <strong class="mw ir">connect(mapStateToProps)</strong>(Counter)</span></pre><p id="5a7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">MapStateToProps用于从存储中选择一部分数据。我们只能通过MapStateToProps获得商店中的所有数据。它也被称为MapState。</p><p id="2df5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经将组件连接到redux存储。但到目前为止，我们还没有创建任何商店。所以现在让我们开始吧。为了创建一个商店，我们使用<code class="fe ne nf ng mw b">createStore</code>。这需要一个参数，这是我们的减速器。这个缩减器有两个参数，初始状态和动作。顾名思义，初始状态表示任何状态的初始值。这里我们正在执行递增和递减操作。所以我们的初始状态是0。一旦完成，通过<code class="fe ne nf ng mw b">Provider</code>提供状态作为pros来包装<code class="fe ne nf ng mw b">Counter</code>组件。</p><p id="5a18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/App.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="9804" class="lj lk iq mw b gy na nb l nc nd">import React from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';<br/>import Counter from './Counter'<br/><strong class="mw ir">import { createStore } from 'redux'<br/>import { Provider } from 'react-redux'</strong></span><span id="780a" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">const initialState = {<br/>  val: 0<br/>}</strong></span><span id="26fd" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">function reducer(state = initialState, action){<br/>  return state;<br/>}</strong></span><span id="70c5" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">const store = createStore(reducer);</strong></span><span id="8df3" class="lj lk iq mw b gy nh nb l nc nd">function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/><strong class="mw ir">      &lt;Provider store={store}&gt;<br/>        &lt;Counter /&gt;<br/>      &lt;/Provider&gt;</strong><br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="519f" class="lj lk iq mw b gy nh nb l nc nd">export default App;</span></pre><p id="2ba6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你必须看到我们的初始值被打印在这些按钮之间。但是，递增和递减函数仍然不起作用，因为我们还没有为这些按钮分派任何操作。所以现在让我们开始吧。</p><h2 id="80f3" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">4.<strong class="ak">调度动作</strong></h2><p id="3444" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy ms ka kb kc mt ke kf kg mu ki kj kk ij bi translated">在我们的减速器内部，创建一个开关盒，如果动作是<code class="fe ne nf ng mw b">INC</code>则执行递增操作，如果动作是<code class="fe ne nf ng mw b">DEC</code>则执行递减操作。</p><p id="da45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/App.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="16b1" class="lj lk iq mw b gy na nb l nc nd">function reducer(state = initialState, action){<br/> <strong class="mw ir"> switch (action.type) {<br/>    case "INC":<br/>      return {<br/>        val: state.val + 1<br/>      }<br/>    case "DEC":<br/>      return {<br/>        val: state.val - 1<br/>      }<br/>    default:<br/>      return state;<br/>   }</strong><br/>}</span></pre><p id="45e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，创建两个递增和递减的函数。分别在增量和减量按钮的onClick中调用这些函数。</p><p id="89e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在increment函数中，调度类型为<code class="fe ne nf ng mw b">INC</code>的动作，并对动作类型为<code class="fe ne nf ng mw b">DEC.</code>的decrement函数进行同样的操作</p><p id="1592" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mw b">src/Counter.js</code></p><pre class="kn ko kp kq gt mv mw mx my aw mz bi"><span id="7c3d" class="lj lk iq mw b gy na nb l nc nd">export class Counter extends Component {</span><span id="ba58" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">increment = () =&gt;{<br/>  this.props.dispatch({type: 'INC'})<br/>}</strong></span><span id="e248" class="lj lk iq mw b gy nh nb l nc nd"><strong class="mw ir">decrement = () =&gt;{<br/>  this.props.dispatch({type: 'DEC'})<br/>}</strong></span><span id="d48c" class="lj lk iq mw b gy nh nb l nc nd">render() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Counter&lt;/h1&gt;</span><span id="118c" class="lj lk iq mw b gy nh nb l nc nd">      &lt;button style={{ height: '40px', width: '150px' }} <strong class="mw ir">onClick={this.increment}</strong>&gt;Increment +&lt;/button&gt;</span><span id="ce45" class="lj lk iq mw b gy nh nb l nc nd">      &lt;p&gt;{this.props.val}&lt;/p&gt;</span><span id="6814" class="lj lk iq mw b gy nh nb l nc nd">      &lt;button style={{ height: '40px', width: '150px' }} <strong class="mw ir">onClick={this.decrement}</strong>&gt;Decrement -&lt;/button&gt;</span><span id="627f" class="lj lk iq mw b gy nh nb l nc nd">    &lt;/div&gt;<br/>  )<br/> }<br/>}</span></pre><p id="1f06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在递增和递减应该可以工作了。最初，这可能会令人困惑。自己用不同的例子反复练习。只有这样，你才会明白数据是如何流动的。</p><p id="6818" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的下一篇博客中，我将解释如何用React-Redux执行CRUD。保持联系。</p><p id="595b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如有任何疑问，请随时联系我。邮箱:sjlouji10@gmail.com领英:<a class="ae kl" href="https://www.linkedin.com/in/sjlouji/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/sjlouji/</a></p><p id="bfaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整的代码可以在我的Github上找到:<a class="ae kl" href="https://github.com/sjlouji/Connecting-React-with-Redux" rel="noopener ugc nofollow" target="_blank">https://github.com/sjlouji/Connecting-React-with-Redux</a></p><p id="d570" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Adding Dark Mode to Your React Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将黑暗模式添加到React项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-dark-mode-to-your-react-project-21b98fd852b0?source=collection_archive---------4-----------------------#2020-09-24">https://javascript.plainenglish.io/adding-dark-mode-to-your-react-project-21b98fd852b0?source=collection_archive---------4-----------------------#2020-09-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fd0c51aefbc82934eae468bea888d826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kn5exK_jSm6B9ezXmzv2hQ.png"/></div></div></figure><p id="2f15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">黑暗模式让用户在使用你的网站时能够控制自己的体验，给他们更好的用户体验。出于这个原因，你可能会有兴趣在你的网站上添加一个黑暗模式的功能。我将带你通过一种可能的方式来添加一个黑暗模式特性到你的React站点。</p><p id="afa5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我从运行<strong class="jx io">npx create-react-app my-app</strong>创建的一个新项目开始，但是您可以按照本教程学习任何现有的React项目。</p><p id="47c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了在整个项目中得到一个可切换的黑暗模式，我们需要创建一个“全局风格”。幸运的是，styled-component有一个很好的助手函数createGlobalStyle，可以轻松处理全局样式。样式化的组件通常自动限定在本地CSS类的范围内，但是使用createGlobalStyle消除了这种限制。要将样式化组件添加到您的项目中，运行<strong class="jx io">NPM install styled-component</strong></p><p id="059d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们已经安装了样式组件并准备好使用，让我们创建我们的全局样式文件。创建一个新的src&gt;styles文件夹，并在其中创建一个新的文件globalStyles.js。在该文件中，我们希望使用styled-component的createGlobalStyle函数，并为亮暗主题定义恒定的颜色。在这里定义一个过渡将在亮暗模式之间切换时创建一个渐变的线性背景颜色。</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="d9f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们想创建一个自定义钩子，使我们能够使用黑暗模式。在styles文件夹中，创建另一个名为useDarkMode.js的新文件。在这里，您将管理主题值(我使用dark作为我的默认值)以及它如何变化。</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="6f28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们想要创建一个切换组件，用户可以点击它在亮和暗之间切换。让我们创建一个新的src&gt;components文件夹，在这里我们可以创建一个新的文件Toggle.js。</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="496b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后一步是将所有东西放在App.js中。如果您使用create-react-app开始您的项目，请确保删除一些默认样式，以便我们的新全局样式不会被覆盖。在App.css文件夹中，从className App-header中删除背景色和颜色字段。</p><p id="a3cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在App.js中，我们必须导入新创建的文件，以及来自样式化组件的ThemeProvider。我们想在这里调用我们的自定义useDarkMode钩子来设置初始状态。我们还需要用Provider包装我们的JSX代码，并添加我们的全局样式。我直接在React徽标下添加了切换按钮，但是可以随意将它放在页面内的任何地方。我完成的App.js文件如下所示:</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="108b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你还没有，用yarn start开始你的项目，测试你的新黑暗模式特性。你完了！</p><p id="c156" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">希望这个教程对你有帮助:)你可以在这里找到<a class="ae kz" href="https://github.com/cierrabeck/dark-mode-starter" rel="noopener ugc nofollow" target="_blank">完整回购</a>！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Auto-versioning with NPM and Git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NPM和Git的自动版本控制</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/auto-versioning-with-npm-and-git-786c6795b926?source=collection_archive---------7-----------------------#2020-09-17">https://javascript.plainenglish.io/auto-versioning-with-npm-and-git-786c6795b926?source=collection_archive---------7-----------------------#2020-09-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a311c07b5f870ca3ff7dceb3846a08b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B4pDhE5BdUOzuzQi"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yancy Min</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2e81" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我花了9个月的时间学习Vue.js、Vuetify和electronic。这间接意味着我对NPM和Git的理解比以前有了很大的提高。</p><p id="7955" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我厌倦了不得不记住更新我的版本号，所以我决定寻找自动版本控制的方法。我没有找到任何一个能按我想要的方式工作的，所以我想出了一个我自己的。</p><p id="2896" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单到了<em class="ky">为什么我没有发现这一点？</em>所以，我决定写这篇小文章，这样其他人可能会发现它，而不必担心为什么网上没有提到它。这是最好的方法吗？我不知道，但对我来说效果很好。</p><p id="8d18" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">方法</strong></p><p id="e0f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的<em class="ky"> package.json </em>文件中，我添加了三个简单的脚本。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="849b" class="li lj in le b gy lk ll l lm ln">{<br/>  ... scripts: { ...<br/>    "push": "npm version patch &amp;&amp; git push",<br/>    "push-minor": "npm version minor &amp;&amp; git push",<br/>    "push-major": "npm version major &amp;&amp; git push"<br/>  }<br/>}</span></pre><p id="3e1b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">结果</strong></p><p id="6e62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您熟悉这些命令，这是不言自明的。否则，<em class="ky">NPM version[patch | minor | major]</em>会在<em class="ky"> package.json </em>文件中适当增加版本号。该命令自动将版本更新提交给本地git repo，然后git push推送到远程repo。</p><p id="efbe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">显然，如果您没有使用遥控器，您可以从这些脚本中删除<em class="ky"> git push </em>。如果我这样做了，我可能也会将命令更改为更相关的内容。</p><p id="d512" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">用途</strong></p><p id="1cf4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，如果你已经熟悉了<em class="ky"> npm </em>或<em class="ky"> yarn </em>(我个人的选择)，你就已经明白如何使用这些脚本了。否则，您可以从命令行键入<em class="ky"> npm run [push，push-minor，push-major] </em>或<em class="ky"> yarn [push，push-minor，push-major]。</em></p><p id="2993" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我决定提交一个commit，并且认为它不需要新版本，我只需输入标准的<em class="ky"> git push </em>命令。</p><p id="be04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">影响</strong></p><p id="3e74" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对我来说，这简化了版本控制。我不用考虑那么多。我只需将我之前的<em class="ky"> git push </em>命令改为<em class="ky"> yarn push </em>，版本补丁在推送前递增。因为补丁级别的修订对我来说是最难记住的，所以我把它设为默认。</p><p id="58c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">总结</strong></p><p id="09ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个简单的方法帮助我在多个项目中保持版本有序。还有其他的自动版本控制方法，例如，git的<em class="ky">预推送</em>或<em class="ky">预提交</em>挂钩，但是这种方法具有最低的设置成本，并且肯定满足我的需求。希望别人觉得有用。</p><p id="7f3c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">类似的方法也可以用于其他版本工具，比如SVN。</p><p id="16d4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">说白了. io </em> </strong> </a> <strong class="kc io"> <em class="ky">。</em> </strong> <em class="ky">报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">免费每周简讯点击这里</em> </strong> </a> <strong class="kc io"> <em class="ky">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Accepting User Input with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用角度接受用户输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/accepting-user-input-with-angular-10ed65297ca8?source=collection_archive---------5-----------------------#2020-03-03">https://javascript.plainenglish.io/accepting-user-input-with-angular-10ed65297ca8?source=collection_archive---------5-----------------------#2020-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7f7a16981ee6ac42e26832b7c4f34344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Szlz-gCSkinRjqQz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@aa_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Alexander</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5d59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="4851" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Angular接受用户输入。</p><h1 id="b213" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用户输入</h1><p id="e8f0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用角度事件绑定来响应任何DOM事件。</p><p id="aa13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">许多DOM事件是由用户输入触发的。绑定让我们提供了一种从用户那里获取输入的方式。</p><p id="e958" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以听到如下的按钮点击声:</p><p id="5e2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7d8a" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="5a74" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  onClickMe() {<br/>    alert("clicked");<br/>  }<br/>}</span></pre><p id="d706" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d119" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)="onClickMe()"&gt;Click me!&lt;/button&gt;</span></pre><p id="d2be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们使用了<code class="fe me mf mg mh b">onClickMe</code>方法来显示警告。</p><p id="7750" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">app.component.html</code>中，我们添加了一个绑定到点击的按钮，当它被点击时调用<code class="fe me mf mg mh b">onClickMe</code>。</p><h1 id="abaa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从$event对象获取用户输入</h1><p id="beff" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">DOM事件携带了对组件有用的信息负载。我们可以通过引用<code class="fe me mf mg mh b">$event</code>对象来访问这些信息。</p><p id="bde4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="c397" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c3a3" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="21a5" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  keysPressed: string[] = [];<br/>  onKeyUp(event) {<br/>    this.keysPressed.push(event.key);<br/>  }<br/>}</span></pre><p id="70df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7f52" class="mq lc iq mh b gy mr ms l mt mu">&lt;input (keyup)="onKeyUp($event)" /&gt;<br/>&lt;p&gt;{{keysPressed.join(',')}}&lt;/p&gt;</span></pre><p id="607f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有调用输入的<code class="fe me mf mg mh b">keyup</code>事件的<code class="fe me mf mg mh b">AppComponent</code>的<code class="fe me mf mg mh b">onKeyUp</code>方法。</p><p id="8977" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">onKeyUp</code>中，我们将按下的键推入<code class="fe me mf mg mh b">this.keyPressed</code>数组。</p><p id="2603" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在模板中，我们调用<code class="fe me mf mg mh b">join</code>来组合按在一起的按键的字符串。</p><h1 id="d68d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">键入$event</h1><p id="3277" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对于键盘事件，我们可以使用<code class="fe me mf mg mh b">KeyboardEvent</code>类型来键入<code class="fe me mf mg mh b">$event</code>。</p><p id="9cf9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">HTMLInputElement</code>类型输入元素。</p><p id="4446" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以编写以下代码:</p><p id="8403" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a8bb" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="532d" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  values: string[] = [];<br/>  onKeyUp(event: KeyboardEvent) {<br/>    this.values.push((event.target as HTMLInputElement).value);<br/>  }<br/>}</span></pre><p id="9960" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="04a5" class="mq lc iq mh b gy mr ms l mt mu">&lt;input (keyup)="onKeyUp($event)" /&gt;<br/>&lt;p&gt;{{values.join(',')}}&lt;/p&gt;</span></pre><p id="9a29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的<code class="fe me mf mg mh b">AppComponent</code>中，我们将<code class="fe me mf mg mh b">event</code>设置为<code class="fe me mf mg mh b">KeyboardEvent</code>类型，并将<code class="fe me mf mg mh b">event.target</code>转换为<code class="fe me mf mg mh b">HTMLInputElement</code>类型。</p><p id="a98a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以自动完成，所以我们不太可能犯错误。</p><p id="cb59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，将整个<code class="fe me mf mg mh b">$event</code>对象传递给组件暴露了太多关于事件的细节，因此在模板和组件之间产生了紧密耦合。</p><h1 id="ec81" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从模板引用变量获取用户输入</h1><p id="d689" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用模板引用变量来获取输入值。</p><p id="4aa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样做:</p><p id="99dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2c1c" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="1c5b" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {}</span></pre><p id="59e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f36a" class="mq lc iq mh b gy mr ms l mt mu">&lt;input #box (keyup)="null" /&gt;<br/>&lt;p&gt;{{box.value}}&lt;/p&gt;</span></pre><p id="3460" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将<code class="fe me mf mg mh b">keyup</code>处理程序设置为<code class="fe me mf mg mh b">null</code>，并将<code class="fe me mf mg mh b">#box</code>引用变量添加到输入框中。</p><p id="9b4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过引用<code class="fe me mf mg mh b">box.value</code>来呈现<code class="fe me mf mg mh b">#box</code>输入的值。</p><p id="2da2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在输入框中输入内容时，我们会看到p元素中显示的值。</p><p id="a5d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这比使用<code class="fe me mf mg mh b">$event</code>对象获取值要好，因为我们不需要访问<code class="fe me mf mg mh b">$event</code>对象来获取值。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/774c80a6204a88575cbbf8fadb0d5458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BA_KmjUSZ-OKbhrs"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rodlong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rod Long</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="82f6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">关键事件过滤</h1><p id="a96d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过用<code class="fe me mf mg mh b">key</code>属性指定键来监听元素中的特定按键。</p><p id="3700" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们想监听Enter键的按键，我们可以编写以下代码:</p><p id="499f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9cb7" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="f9f1" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  onEnter(value) {<br/>    alert(value);<br/>  }<br/>}</span></pre><p id="3715" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6530" class="mq lc iq mh b gy mr ms l mt mu">&lt;input #box (keyup.enter)="onEnter(box.value)" /&gt;</span></pre><p id="5b5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，<code class="fe me mf mg mh b">AppComponent</code>中的<code class="fe me mf mg mh b">onEnter</code>方法将<code class="fe me mf mg mh b">value</code>输入到输入框中。</p><p id="c988" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">app.component.html</code>中，我们将<code class="fe me mf mg mh b">#box</code>模板变量添加到输入中，得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="453a" class="mq lc iq mh b gy mr ms l mt mu">(keyup.enter)="onEnter(box.value)"</span></pre><p id="864d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">监听回车键的按键并传递输入到输入中的值，通过调用带有传入值的<code class="fe me mf mg mh b">onEnter</code>来显示警报。</p><h1 id="db6e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模糊论</h1><p id="1c61" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过向元素传递事件监听器来监听元素的<code class="fe me mf mg mh b">blur</code>事件。</p><p id="3288" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="907c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1528" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";</span><span id="d7e8" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"]<br/>})<br/>export class AppComponent {<br/>  value: string;<br/>  update(value) {<br/>    this.value = value;<br/>  }<br/>}</span></pre><p id="29d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="09ec" class="mq lc iq mh b gy mr ms l mt mu">&lt;input #box (blur)="update(box.value)" /&gt;<br/>&lt;p&gt;{{value}}&lt;/p&gt;</span></pre><p id="e9b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将<code class="fe me mf mg mh b">#box</code>模板变量添加到输入框中，并通过将<code class="fe me mf mg mh b">(blur)</code>设置为<code class="fe me mf mg mh b">AppComponent</code>中的<code class="fe me mf mg mh b">update</code>方法添加了一个<code class="fe me mf mg mh b">blur</code>事件监听器。</p><p id="bf9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">update</code>方法获取一个输入值并将其设置为<code class="fe me mf mg mh b">this.value</code>，这样我们就可以在模板中显示它。</p><p id="81b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们在输入中键入一些内容，然后将光标从输入处移开时，我们将看到p元素中显示的值。</p><h1 id="d522" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3496" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过监听各种事件监听器来处理用户输入。</p><p id="1065" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获取事件发出的事件对象，我们可以引用<code class="fe me mf mg mh b">$event</code>对象。</p><p id="c9ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了更容易地获取输入值，我们可以向模板中的元素添加一个模板引用变量，然后从中获取我们想要的属性。</p></div></div>    
</body>
</html>
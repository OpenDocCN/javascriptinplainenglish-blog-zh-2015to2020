<html>
<head>
<title>How To Integrate Vue into a Rails app — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Vue集成到Rails应用程序中—第1部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-integrate-vue-into-a-rails-app-part-1-32ce8f68f54c?source=collection_archive---------3-----------------------#2019-09-17">https://javascript.plainenglish.io/how-to-integrate-vue-into-a-rails-app-part-1-32ce8f68f54c?source=collection_archive---------3-----------------------#2019-09-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7fe09ce4be3d0b011545999fd77503cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PaeW8lDugRyjpi3VY72VSQ.png"/></div></div></figure><p id="a6bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为介绍，我会解释我在这个博客上做了什么，所以你会对此有一个想法。此博客旨在为希望将后端集成到Vue.js的中级人员提供基本的Vue.js。重要的一点是，我们不只是在处理ROR，无论后端是什么，如果我们有基于后端的认证可用，我们都遵循前端的通用路径。</p><h1 id="4969" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我们在这里做什么！！</h1><p id="6237" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在这一部分中，我们只讨论身份验证机制、警报和部署。<strong class="jx io"> <em class="lw"> Todo和crud将在第2部分讨论。</em> </strong></p><ol class=""><li id="65e6" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在ROR后端之上创建一个Vue.js应用程序</li><li id="c9ca" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">来自Vue.js的认证</li><li id="6dcb" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">Vuex用于状态管理。</li><li id="6ae1" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">Vue.js中的CRUD应用</li><li id="131f" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">Vue.js中不错的提醒</li><li id="6895" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将应用程序部署到netlify</li></ol><p id="786d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi ml translated"><span class="l mm mn mo bm mp mq mr ms mt di"> N </span> <strong class="jx io"> <em class="lw">注:</em> </strong>我将添加我的github链接，在我更改代码的地方，它将被指向<strong class="jx io"> GitHub-link </strong></p><h1 id="08e9" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我们如何做到这一点？</h1><ol class=""><li id="5368" class="lx ly in jx b jy lr kc ls kg mu kk mv ko mw ks mc md me mf bi translated">创建Vue.js应用程序并安装依赖项</li><li id="ac8f" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">创建身份验证组件</li><li id="0b8c" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">设计登录页面和导航栏</li><li id="fd9e" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">添加Axios，为什么？</li><li id="d003" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">实现登录功能</li><li id="2176" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">为登录实现Vuex</li><li id="7f84" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">重构代码</li><li id="327a" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">小管家</li><li id="7884" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">实现签出功能。</li></ol><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h1 id="7c4e" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1.创建Vue.js应用程序并安装依赖项</h1><ol class=""><li id="01ee" class="lx ly in jx b jy lr kc ls kg mu kk mv ko mw ks mc md me mf bi translated">创建Vue.js应用程序</li><li id="a8a1" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">选择应用程序的功能</li><li id="8147" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">删除搭建的代码</li><li id="3c5d" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">创建应用程序结构</li><li id="7819" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">为设计添加价值</li></ol><p id="1fea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 1。创建Vue.js应用程序</strong></p><p id="2410" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我已经使用yarn安装了vue-cli，所以我将依赖yarn</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="61a9" class="ni ku in ne b gy nj nk l nl nm">vue create todo_vue_app</span></pre><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/f767db8cd6ef7c3783bd0a075d7e4db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*CKA8u4EXVUMxd7ISdmJQOw.png"/></div></figure><p id="cd7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2。选择应用程序的功能</strong></p><p id="bce0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，是时候选择我们的应用程序所需的功能了，将在我选择的地方添加屏幕。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2c6b59295ee12dd9b2217de470a44768.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*5sLwJ5CwtnzJUICW4MwuYQ.png"/></div></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/3454249697d1465e15612102e3edef29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_FQPW2l8Aaajd6SHtVCQow.png"/></div></div></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f7d2dc864ab6206419598fb824b88088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*iAivRjc4pgCAxFT4DW5URw.png"/></div></figure><p id="542e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太棒了，我们的基本应用已经准备好了，我们可以开始使用服务器了</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="c699" class="ni ku in ne b gy nj nk l nl nm">cd todo_vue_app &amp;&amp; yarn serve</span></pre><p id="57ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="lw">G</em></strong><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/4f6d23e7f7218ace8085726b5021067ec0a0361a" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">itHub-link</em></strong></a></p><p id="f968" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 3。移除脚手架代码</strong></p><p id="3438" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当一个应用程序被创建时，Vue.js会提供一些基本的功能，比如一些组件和其他文件，我们会移除<code class="fe ns nt nu ne b">HelloWorld.vue</code>和一些样式，如果你真的想知道，请查看下一个GitHub-link</p><p id="5643" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/3f82a0227989218733a9694fe87cb52a1168d641" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="1b7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 4。创建应用程序结构</strong></p><p id="4a87" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将为我们的应用程序创建一些结构，因为它有一些API调用和一些布局的东西。如果你喜欢，请随意选择你自己的结构。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2f05b3453f5b8946c5a87eb59bb09c15.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*DlitWmo0tbiGgoth9DyM3w.png"/></div></figure><p id="cd58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">组件:</strong>将驻留我们的组件。</p><p id="c041" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">服务:</strong>将包含我们的API调用和任何其他库，如警报代码文件等。</p><p id="18be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">视图:</strong>将有我们的模板文件，就像<code class="fe ns nt nu ne b">Home.vue</code>是我们的基本模板，<code class="fe ns nt nu ne b">Login.vue</code>将包含我们的登录模板文件。</p><p id="99ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 5。为设计添加验证</strong></p><p id="2e10" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">Vuetify</code>是设计库，用于模板和一些内置组件，如工具栏和日历等。</p><p id="2d5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以将它添加到项目中，使用</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="1db9" class="ni ku in ne b gy nj nk l nl nm">vue add vuetify</span></pre><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/8c0cbe565a533d51ffd17770d8be41c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWyI0opUHPCxyfrAO0hoeA.png"/></div></div></figure><p id="515f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/6a68152795c33a9f3b763128d81fb53c732f6d55" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="7523" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2.创建身份验证组件</h1><p id="6b94" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在，我们需要创建一个页面，用户需要输入电子邮件和密码。这就是我们的登录页面出现的地方。还需要使用Vue.js提供的路由器。</p><ol class=""><li id="79c0" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">为登录模板创建Login.vue</li><li id="c0fb" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">用Login.vue链接路由器</li><li id="2614" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">使用URL进行测试。</li><li id="161a" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated"><strong class="jx io">为登录模板</strong>创建Login.vue</li></ol><p id="c6dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建一个名为Login.vue的文件，该文件包含登录页面，该页面将驻留在我们的<code class="fe ns nt nu ne b">src/views/Login.vue</code>中</p><p id="00b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为一个基本，我们的文件只包含这么多，以后会添加。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/dd66772c5db38fbd8a5151e9ca9f3d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*JVdB1hDPz1XCU2Re9-1m7w.png"/></div></figure><p id="1c71" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2。用Login.vue </strong>链接路由器</p><p id="7b73" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">vue-router</code>是一个额外的库，处理路由功能，SPA应用中的参数处理。</p><p id="3e51" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所有路线都登记在我们的<code class="fe ns nt nu ne b">src/router.js</code>里。默认情况下，<code class="fe ns nt nu ne b"> Home.vue</code>是添加在那里的，我们需要做的是导入我们的<code class="fe ns nt nu ne b">Login.vue</code>并注册我们的登录页面。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c4dff06b46adfd5d3b8ad25bcc614495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*UD1EZdZaIXY_HmTCM_O4SA.png"/></div></figure><p id="4d91" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 3。使用URL进行测试</strong></p><p id="0e09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在是测试时间，当我们进入<code class="fe ns nt nu ne b"><a class="ae nr" href="http://localhost:8080/#/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/#/</a></code>时，我们将指向主页。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6b3b26f97c41a55bfded9bd161f69c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*TOPiNGZ6sAuQBCmKrCalag.png"/></div></figure><p id="a9bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同样当我们输入<code class="fe ns nt nu ne b"><a class="ae nr" href="http://localhost:8080/#/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/#/</a>login,</code></p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/241eba68079577fac5705baae64f6a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*bxP-_8SFXJ20WR1_a-37Og.png"/></div></figure><p id="1dbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我知道，我已经在图像中添加了一个额外的<code class="fe ns nt nu ne b">navbar</code>，将在下面介绍。</p><p id="c8da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/73beb2c0124347d461a1b99906d1f8a35a022da9" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="46b4" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3.设计登录页面和导航栏</h1><p id="9934" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">这里，我们设计了用于登录和注销的<code class="fe ns nt nu ne b">navbar</code>,添加了todo功能。以下是我们的预期行为。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ob"><img src="../Images/ddc45301ee49d2070dbd4cb2a0807b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_J7P6dCNJBSqEqvIibU84w.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk">user is not signed in</figcaption></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi og"><img src="../Images/4dc1c449f30154920c15605d1f82121d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xsjZXswgyftvgavdYtBdIA.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk">when user is signed in</figcaption></figure><ol class=""><li id="3d0c" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">设计导航条</li><li id="6f1b" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">设计登录页面</li><li id="f9e4" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated"><strong class="jx io">设计导航条</strong></li></ol><p id="c8ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Navbar将驻留在我们的<code class="fe ns nt nu ne b">src/components/NavBar.vue</code></p><p id="9721" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该文件的完整代码如下。增加了两种重定向到主页和登录页面的方法。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="oh nc l"/></div></figure><p id="b2db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/99762816b1f3f4e6bf07f2667d73ba97d23502a4" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="7149" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2。设计登录页面</strong></p><p id="2765" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">目前，我们的登录页面没有文本字段，需要添加这些。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="oh nc l"/></div></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/f827e00dfd53afc51162e4d736fa06d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*Wlx3DNWNWt9F_MzW3bal4g.png"/></div></figure><p id="f858" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太棒了，现在我们也有了一个很好的登录界面。我们可以继续使用应用程序中的登录功能。</p><h1 id="ea99" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">4.添加Axios，为什么？</h1><p id="26a1" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">为了实现登录，我们需要使用一个库来处理我们的http请求并回复响应。Vue.js已经有一个内置插件，但在这里，我们使用的是第三方插件axios，这是目前的趋势之一。主要优点是对<strong class="jx io">处理成功/失败案例也有承诺支持</strong>。</p><p id="f97f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装由</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="e102" class="ni ku in ne b gy nj nk l nl nm">yarn add axios</span></pre><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oj"><img src="../Images/dd05cc190f9d0320c214e5ad7d1cab34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JvyVJXSX-x22i2uQWQFUFQ.png"/></div></div></figure><p id="7133" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/8431fa470f5b3a5f852a7edd7e590fc4b0ac498f" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="2893" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">5.实现登录功能</h1><p id="1c9b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在，是登录的时候了。最初，我们需要将我们的<code class="fe ns nt nu ne b">axios</code>链接到Vue.js，这样所有的http请求将只通过我们的<code class="fe ns nt nu ne b">axios</code>。</p><p id="bbc5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">需要解释的一件重要事情是，我们的Vue.js应用程序如何与ROR一起工作。俗话说，一张图胜过一千个字。</p><p id="48a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">用户添加邮箱和密码时</strong></p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ok"><img src="../Images/fb7783673bb91e0be7244d1dbcc9cc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhiI44UufpJf7CHCRGLKNg.png"/></div></div></figure><p id="0603" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在基于令牌的身份验证中，令牌是我们的替代密码。Vuex最初为空，所以请求通过浏览器传递给Rails应用程序，由Rails应用程序处理。</p><p id="131b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">当邮箱/密码成功时。</strong></p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ol"><img src="../Images/c786c5051f0016936f386ec371e37679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-UFD7EAFk1GSmpHgF50aA.png"/></div></div></figure><p id="296c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它将返回令牌，并使用localStorage和Vue.js应用程序Vuex将其保存到浏览器中。当页面刷新时，Vuex中的内容将被删除，这也是我们保存令牌浏览器的原因。</p><p id="6980" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">每一个后续请求，</strong></p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi om"><img src="../Images/75d07e966ffd9f44d8bf5465526e6767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PsXg8S5l6_dJYAAre1A5JA.png"/></div></div></figure><p id="bc67" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以上是我们的工作行动，现在我们能做的是功能性，</p><p id="2bfb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">将axios注册到Vue.js中</strong></p><p id="2ea1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先需要将axios导入到我们的<code class="fe ns nt nu ne b">src/main.js</code></p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="2a1a" class="ni ku in ne b gy nj nk l nl nm">import axios from 'axios</span></pre><p id="dfee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，需要获取本地存储中可用的令牌，然后我们需要使用它并在axios头中设置。</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="ce30" class="ni ku in ne b gy nj nk l nl nm">const token = localStorage.getItem('token')</span></pre><p id="e8c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是我们整个文件的内容</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi on"><img src="../Images/70a85292da18a7f96c8acb3902bdea2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAdoGI94nXvn30sHXUZPQQ.png"/></div></div></figure><p id="e7a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">接受用户的电子邮件和密码</strong></p><p id="0b28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经为电子邮件和密码文本字段创建了用户界面，现在我们需要将它们链接到我们的应用程序，这可以使用<strong class="jx io"> v-model来解决。</strong>类似于getters和setters。它们在我们的脚本部分中声明，并使用我们的v-model属性进行链接。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/c55509f83b1ae054fb7b589ea6718b38.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*G3LiT0o7pA-D-rEgrYCf4A.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">declare email and password as data property</figcaption></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi op"><img src="../Images/d521054317d6b813aa035d64f1d51be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*bLUoVIJdk27Pyn3XvdBvvg.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">link the data property to the fields</figcaption></figure><p id="9e09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">添加复位按钮清除数据</strong></p><p id="20a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将是很好的，如果我们有一个按钮来重置电子邮件和密码，这可以通过调用按钮来处理，并用<code class="fe ns nt nu ne b"> this.property</code>关键字清除电子邮件密码的数据。</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="8bfe" class="ni ku in ne b gy nj nk l nl nm">&lt;v-btn<br/>  color="error"<br/>  <a class="ae nr" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="resetForm"<br/>  class="reset"&gt;<br/>  Reset Form<br/>&lt;/v-btn&gt;</span><span id="9c44" class="ni ku in ne b gy oq nk l nl nm">//reset button<br/>resetForm () {<br/>  this.email = ''<br/>  this.password = ''<br/>},</span></pre><p id="e9d5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/9aa176c010f01d33e62f9fbbdd8497257045f820" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="a463" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">6.为登录实现Vuex</h1><p id="714b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">到目前为止，我们已经创建了用户登录页面、电子邮件/密码数据，然后我们需要使用Vuex实现登录过程，并调用API和响应是否成功/失败。为此，需要设置Vuex结构。如果你不知道Vuex，我推荐你通过这个<a class="ae nr" href="https://medium.com/js-dojo/vuex-and-vue-bread-and-butter-4519a21e95ce" rel="noopener">链接</a>。</p><p id="e5f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下图将解释我们将如何使用Vuex。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi or"><img src="../Images/1fdfb634881d5be3390e5fb1e65f279e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eueTyYkEl6cj7TG9mhV7zg.png"/></div></div></figure><p id="634f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要做到这一点，需要在Vuex中创建动作、getters、突变和状态。下面是我们的Vuex文件的基本结构。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi os"><img src="../Images/5d10d15a863436182ad8f0588c40d319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*hVYoZr_ZGmP99slT4527ZQ.png"/></div></figure><p id="0c62" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> Vuex状态</strong></p><p id="e5a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b"> user</code>将保存从我们的Rails API获取的用户对象，<code class="fe ns nt nu ne b">token</code>将保存我们的auth_token，<code class="fe ns nt nu ne b">status</code>将指示用户登录成功/失败。在API响应之后，我们将通过动作用突变更新所有这些状态。</p><p id="59ec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> Vuex突变</strong></p><p id="c3b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">突变是更新我们状态的关键因素。<strong class="jx io">我们可以省略我们的动作直接调用我们的</strong>突变，但是我们当我们有一个异步任务并且可以通过使用动作来完成的时候<strong class="jx io">突变只是同步过程</strong>。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/7fda1a25c1fa16535b59e764d9a6c3e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*WuY2hNs2UgZSRo3FiHpGng.png"/></div></figure><p id="16df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">loadingMutation: </code>将设置状态为加载中</p><p id="02df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">loginSucessMutation</code>:将登录设置为成功，并更新用户资料</p><p id="5a29" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">loginFailureMutation</code>:将登录设置为失败，并清除用户详细信息。</p><p id="7514" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> Vuex动作</strong></p><p id="d677" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将从Vue组件调用动作，Vue组件将依次调用API并获取响应，调用突变并更新Vuex状态。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/c8fb54ad3b6752792d5151bf510eaeb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*5YKkc3cDiCd9os1DGKL70g.png"/></div></figure><p id="5010" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/8f6c26861515e57799f06d9ebc73887db4765ed9" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="6908" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，是真正行动的时候了；)</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ov"><img src="../Images/35f968b6688bdb447ba6cfdbe200db48.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/1*F0-nazAg0MISiDXifIBj9A.gif"/></div></div></figure><p id="080d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">调用执行逻辑</strong>的动作</p><p id="25af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们定义的动作将接受用户详细信息，并使用<code class="fe ns nt nu ne b">axios</code>调用API并获取响应。如果响应成功，它将调用<code class="fe ns nt nu ne b">loginSucessMutation</code>，如果响应失败，它将调用<code class="fe ns nt nu ne b">loginFailureMutation</code>并分别更新状态。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/de570692b6c87d6253cca1d2692835b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*OXsZaAmK-iNLg_pQOTbXhQ.png"/></div></figure><p id="3ee9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">突变过程</strong></p><p id="db54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当动作调用突变时，有了响应，突变将接受参数并更新状态。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/b7f0d90507891b73dcc12c3e644c254f.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*9Cd65RSlveFiVEnDIwEuRQ.png"/></div></figure><p id="eebb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经实现了很多，现在我们可以从UI调用动作(Vue组件。).为此，我们在Vue.js模板中使用了<code class="fe ns nt nu ne b">mapActions</code>。如果你想了解更多关于<code class="fe ns nt nu ne b">mapActions</code>的信息，请点击<a class="ae nr" href="https://vuex.vuejs.org/guide/actions.html" rel="noopener ugc nofollow" target="_blank">链接</a></p><ol class=""><li id="d76a" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">需要将<code class="fe ns nt nu ne b">mapActions</code>导入我们的Vue.js模板。</li><li id="a495" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将电子邮件和密码传递给<code class="fe ns nt nu ne b">mapActions</code></li><li id="d68e" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">测试我们的代码</li></ol><p id="3896" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在脚本标签中导入<code class="fe ns nt nu ne b">mapActions</code></p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="3b6f" class="ni ku in ne b gy nj nk l nl nm">import { mapActions } from 'vuex</span></pre><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ox"><img src="../Images/f4f6224024ee13faed6b23d88c616420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gg8o1Pqw--Q406spapPvag.png"/></div></div></figure><p id="965a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就这样，现在我们可以测试我们的代码了，</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oy"><img src="../Images/3dec4befb69c6568f7c59830254e3ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UrAT7ddkKeNCAHN3T_6jfA.png"/></div></div></figure><p id="fceb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太棒了，现在我们需要对Vuex进行一些重构，并在登录后进行一些重定向。</p><p id="6d04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/a439fe7a0534b07c04aefbb03dd37f7efaf173df" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="eadd" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">7.重构代码</h1><h2 id="245e" class="ni ku in bd kv oz pa dn kz pb pc dp ld kg pd pe lh kk pf pg ll ko ph pi lp pj bi translated">重构我们的API端点</h2><p id="d1c8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们的代码可以正常工作，但是如果我们想要改变API url，需要更新代码，所以如果我们将API端点移动到<code class="fe ns nt nu ne b">.env</code>文件中会很好。为了做到这一点，</p><ol class=""><li id="d776" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在根路径中创建一个<code class="fe ns nt nu ne b">.env</code>文件并添加端点。</li><li id="487c" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">通知Vue.js我们将使用来自<code class="fe ns nt nu ne b">.env</code>文件的API端点</li></ol><blockquote class="pk pl pm"><p id="c99b" class="jv jw lw jx b jy jz ka kb kc kd ke kf pn kh ki kj po kl km kn pp kp kq kr ks ig bi translated"><strong class="jx io">重要提示:</strong>添加端点时，在端点前加上<strong class="jx io">VUE _应用_你的端点名</strong>。相信我，我已经因为认为我的API失败而浪费了一天的时间。</p></blockquote><p id="4425" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要通知Vue.js，需要在我们的store.js或者调用axios的地方添加下面的代码。</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="ff95" class="ni ku in ne b gy nj nk l nl nm">axios.defaults.baseURL = process.env.VUE_APP_RAILS_API_URL</span></pre><p id="dce3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们只需要为axios调用设置搜索字符串/请求，如下所示，</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/5c7276bff95dbc14085c5f57fc366fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*3DOZ0naOnSekTb6HmjBCLA.png"/></div></figure><p id="3a58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/9ace770454e911a6398070984d1e5847decc3048" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">Github-link</em></strong></a></p><h2 id="c59a" class="ni ku in bd kv oz pa dn kz pb pc dp ld kg pd pe lh kk pf pg ll ko ph pi lp pj bi translated">重构我们对服务文件夹的API调用</h2><p id="5d66" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们已经在<code class="fe ns nt nu ne b">src/services/ApiHelper.js</code>中创建了一个文件</p><p id="14ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个文件将包含我们的代码，就像API一样，所以我们可以把我们的API调用逻辑从Vuex文件中移出，放到它自己的文件中。为了做到这一点，</p><ol class=""><li id="7915" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在<code class="fe ns nt nu ne b">src/services/ApiHelper.js</code>中创建一个文件</li><li id="c9d4" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">导入<code class="fe ns nt nu ne b">axios</code>(因为API是从文件中调用的)</li><li id="cac7" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">设置默认API URL</li><li id="4a36" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">创建一个将被Vuex动作调用的函数并返回响应。</li></ol><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/d64509e9a13efca282996169c5322441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*h7UOeb7PmViSN42Y5nL0EQ.png"/></div></figure><p id="e72d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想知道，为什么我使用异步/等待。更好的做法是使用async/await使我们的函数异步，它将等待响应(返回承诺)。如果您想了解更多信息，请使用此<a class="ae nr" href="https://javascript.info/async-await" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="5e9d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/5d325292d52ab092588f5674f0cb9223dca4a6e6" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="94f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">重构我们的Vuex商店</strong></p><p id="0082" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在一个Vuex流程之后，我们的Vuex商店有点大，想象一下一个大项目，那么我们的Vuex商店会相当大。为了解决这个问题，我们将使用Vuex中的模块概念。为了做到这一点，</p><ol class=""><li id="04cd" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在我们的<code class="fe ns nt nu ne b">src/</code>中创建一个名为<code class="fe ns nt nu ne b">store</code>的文件夹(或者你可以使用你自己的文件夹)</li><li id="8f0b" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将我们的<code class="fe ns nt nu ne b">src/store.js</code>文件移动到<code class="fe ns nt nu ne b">src/store/</code>路径</li><li id="7ce4" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将我们的<code class="fe ns nt nu ne b">src/store.js </code>文件重命名为<code class="fe ns nt nu ne b">src/store/index.js</code>(这将是我们的根存储文件夹)</li><li id="5e24" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">在<code class="fe ns nt nu ne b"> src/store</code>中创建另一个文件夹<code class="fe ns nt nu ne b">modules</code>，并在里面创建另一个文件<code class="fe ns nt nu ne b">src/store/modules/user.js</code></li><li id="e3b7" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将我们的用户相关代码从<code class="fe ns nt nu ne b">src/store/index.js </code>移到<code class="fe ns nt nu ne b">src/store/modules/user.js</code></li><li id="a506" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将user.js链接到我们的存储根文件夹，导入该文件，并将用户声明为我们存储中的一个模块。</li></ol><p id="2b7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们最终的根存储(<code class="fe ns nt nu ne b">src/store/index.js</code>)将会是这样的，</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/21b2ef729f618bdf7b19d4cb71245222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*hTjd7AA2KFOKifUjcNQ5RQ.png"/></div></figure><p id="2597" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我知道，这有点混乱，但它使我们的Vuex文件简单易懂，我在下面添加了提交。如果你想知道这些变化，请访问下面的链接。</p><p id="b2fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/6a8c464fd191a82c67a3030863c0085fd8f0e543" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="6b03" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">8.小管家</h1><p id="ed13" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">这里我们讨论了一些基本的错误/问题，</p><ol class=""><li id="d50a" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">如果用户未登录，则呈现登录页面</li><li id="78a2" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">成功登录后重定向到主页</li><li id="7b01" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将警报显示为成功/失败。</li><li id="16ec" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">如果用户提供了无效的凭证，请停留在登录页面</li></ol><h2 id="3893" class="ni ku in bd kv oz pa dn kz pb pc dp ld kg pd pe lh kk pf pg ll ko ph pi lp pj bi translated">如果用户未登录，则呈现登录页面</h2><p id="83c1" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">如果用户没有签名，我们可以使用Vuex getters找到。为此，需要在<code class="fe ns nt nu ne b">store/modules/user.js</code>中创建getters</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pt"><img src="../Images/aa84f1e0739ee64a6ec511d1cfc391f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yVXL0_j7ih6NQmqSstz-g.png"/></div></div></figure><blockquote class="pk pl pm"><p id="ef89" class="jv jw lw jx b jy jz ka kb kc kd ke kf pn kh ki kj po kl km kn pp kp kq kr ks ig bi translated">吸气剂是一些将提供我们的当前状态的Vuex将可用于组件。</p></blockquote><p id="bc9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为此，需要使用Vuex的<code class="fe ns nt nu ne b">mapGetters</code>。它将使用<code class="fe ns nt nu ne b">mapGetters</code>提供状态。我们能检查的最好的地方是我们的<code class="fe ns nt nu ne b">App.vue</code></p><p id="3fef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">需要导入<code class="fe ns nt nu ne b">mapGetters</code>并在计算的属性中使用它。现在我们可以直接调用<code class="fe ns nt nu ne b">this.isLoggedIn</code>，并根据响应进行重定向。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pu"><img src="../Images/195f081a79affce671dda4dd765a9185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuiOITmUDK34PKW0Y3Ozhw.png"/></div></div></figure><p id="fe2c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">成功登录后重定向至主页</strong></p><p id="8ea3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以使用上面使用的相同逻辑，在<code class="fe ns nt nu ne b">Login.vue</code>文件的操作中创建一个回调</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pv"><img src="../Images/a4ac335af226ad2eedfbeab5709263db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QrFUzYNWrkk7dPz1PIUDhw.png"/></div></div></figure><p id="cb40" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">将预警显示为成功/失败。</strong></p><p id="c1e1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">警报是人们热切期待的部分。为此，我们可以使用<code class="fe ns nt nu ne b">sweetalerts2 </code> <a class="ae nr" href="https://sweetalert2.github.io/" rel="noopener ugc nofollow" target="_blank">链接</a></p><p id="cf33" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装由，</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="3622" class="ni ku in ne b gy nj nk l nl nm">yarn add sweetalert2</span></pre><p id="12f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了实现<code class="fe ns nt nu ne b">sweetalert2</code>，</p><ol class=""><li id="9d27" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">创建一个名为<code class="fe ns nt nu ne b">src/services/SweetAlert</code>的文件(将我们的代码放在self模块中)。</li><li id="dec8" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">将<code class="fe ns nt nu ne b">sweetalert2</code>导入到该文件中。</li><li id="7989" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">创建警报功能。</li><li id="6f25" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">在我们的Vue.js模板中导入警报。</li></ol><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pw"><img src="../Images/420a6116a6facb71b58f3e9ee823da52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivb6iI7bi-JsYdt43dwPqw.png"/></div></div></figure><p id="c0ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ns nt nu ne b">successfulLogin</code>和<code class="fe ns nt nu ne b">failureLogin</code>功能用于响应。你可以选择自己的名字。如果您想要定制，请访问sweetalert2链接。</p><p id="cbce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以使用<code class="fe ns nt nu ne b">import</code>命令将这些方法导入我们的文件。之后我们可以直接调用<code class="fe ns nt nu ne b">Login.vue</code>文件中的<code class="fe ns nt nu ne b">SweetAlert.successfulLogin()</code></p><p id="528e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是一个例子，我们将在登录成功时调用<code class="fe ns nt nu ne b">SweetAlert.successfulLogin()</code>，在登录失败时调用<code class="fe ns nt nu ne b">SweetAlert.failureLogin()</code>。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi px"><img src="../Images/3e10d0c1b4b4ae67dcf657daa277cbbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JojNNfRHUDOn85AMtyeGZQ.png"/></div></div></figure><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="py nc l"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">Login Response Alert</figcaption></figure><p id="b491" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/b0d00909c1fc5f0a830dc930caacebd6327c25ab" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><h1 id="7948" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">9.实现签出功能。</h1><p id="c03c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">目前，我们正在使用<code class="fe ns nt nu ne b">navbar</code>功能登录。因此，如果用户仅登录，则需要显示登录和注销链接。我们可以使用<code class="fe ns nt nu ne b">isLoggedIn</code> getters轻松实现这个特性。</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pz"><img src="../Images/200a9ee4635531ecf737d5105b720558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSdFjnDc67CWobdIbj9lPA.png"/></div></div></figure><p id="6e92" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/cbdc80de4fca03fd0cb0e69a9e0d57eba24042d3" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="07ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们可以继续使用注销功能，为此，</p><ol class=""><li id="8089" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在<code class="fe ns nt nu ne b">Navbar</code>中创建一个退出按钮，该按钮将调用Vuex退出动作</li><li id="96ee" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">Vuex signoutAction将调用Vuex突变</li><li id="4b50" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">Vuex突变会将状态清除到原始值</li></ol><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pz"><img src="../Images/cd8810a4901c55a46f95fc107fe61f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUewCOo6rBERy49nQGRQZg.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk">only required code alone(Vue.js Template)</figcaption></figure><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pz"><img src="../Images/62dd5b195d930862aeb4c47fa31b7c27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyO14CW14W9fhVoJfBQLAA.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk">Vuex code with Action and mutation</figcaption></figure><p id="1f9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nr" href="https://github.com/anoobbava/todo_vue_app/commit/e9bffa0d856ba48ee4bc6f773bfcc0e601658b55" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lw">GitHub-link</em></strong></a></p><p id="f038" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就这样，谢谢大家看完这个，喜欢的请做评论或者鼓掌。将在第2部分中发布todo API数据获取和更新。<a class="ae nr" href="https://medium.com/javascript-in-plain-english/how-to-integrate-vue-into-a-rails-app-part-2-1e79e25ffc30" rel="noopener">第二部分链接</a></p><p id="2f2f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">谢了。</p><p id="9a6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意:我在下面发布了代码细节，</p><pre class="mx my mz na gt nd ne nf ng aw nh bi"><span id="619d" class="ni ku in ne b gy nj nk l nl nm">ROR Heroku deployed endpoint: <a class="ae nr" href="https://todorailsapiapp.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://todorailsapiapp.herokuapp.com/</a></span><span id="b63f" class="ni ku in ne b gy oq nk l nl nm">Vue.js App app deployed link in netlify: <a class="ae nr" href="https://todo-vue-app.netlify.com/#/login" rel="noopener ugc nofollow" target="_blank">https://todo-vue-app.netlify.com/#/login</a></span><span id="79a1" class="ni ku in ne b gy oq nk l nl nm">email/password in heroku endpoint: anoob@gmail.com/anoob@gmail.com</span><span id="87fc" class="ni ku in ne b gy oq nk l nl nm">GitHub-link for Vue.js App:<a class="ae nr" href="https://github.com/anoobbava/todo_vue_app" rel="noopener ugc nofollow" target="_blank">https://github.com/anoobbava/todo_vue_app</a></span><span id="4e1a" class="ni ku in ne b gy oq nk l nl nm">GitHub-link for the ROR App: <a class="ae nr" href="https://github.com/anoobbava/todo_api" rel="noopener ugc nofollow" target="_blank">https://github.com/anoobbava/todo_api</a></span></pre><blockquote class="qa"><p id="8038" class="qb qc in bd qd qe qf qg qh qi qj ks dk translated">如果这个故事对你有所帮助，请随时<a class="ae nr" href="https://www.buymeacoffee.com/anoobbava" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a></p></blockquote><p id="531b" class="pw-post-body-paragraph jv jw in jx b jy qk ka kb kc ql ke kf kg qm ki kj kk qn km kn ko qo kq kr ks ig bi translated">人员详情:<a class="ae nr" href="https://github.com/anoobbava" rel="noopener ugc nofollow" target="_blank"> GitHub-link </a>。<a class="ae nr" href="https://www.linkedin.com/in/anoob-k-bava-676b3337/" rel="noopener ugc nofollow" target="_blank"> Linkedin链接</a></p><h2 id="4b00" class="ni ku in bd kv oz pa dn kz pb pc dp ld kg pd pe lh kk pf pg ll ko ph pi lp pj bi translated"><a class="ae nr" href="https://medium.com/javascript-in-plain-english/how-to-integrate-vue-into-a-rails-app-part-2-1e79e25ffc30" rel="noopener">第二部分链接</a></h2></div></div>    
</body>
</html>
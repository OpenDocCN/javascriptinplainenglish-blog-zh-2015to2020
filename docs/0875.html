<html>
<head>
<title>Using .map(), .filter() and .reduce() properly 👩🏽‍💻</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用。map()，。过滤器()和。适当减少()👩🏽‍💻</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-map-filter-and-reduce-properly-50e07f80c8b2?source=collection_archive---------8-----------------------#2019-12-26">https://javascript.plainenglish.io/using-map-filter-and-reduce-properly-50e07f80c8b2?source=collection_archive---------8-----------------------#2019-12-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/081887765e931289e4b4cf977b8cf6b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tJt2kqjFx84cTd-Q"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Safar Safarov</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="eba2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Map、reduce和filter都是JavaScript中的数组方法。每一个都将遍历一个数组，并执行转换或计算。每个函数都将根据函数的结果返回一个新数组。在本文中，您将了解为什么以及如何使用它们。</p><p id="eae9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">请注意，这篇文章很可能适用于您可能使用的任何其他编程语言，因为这些概念存在于许多其他语言中</em></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="142b" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">。地图()</h1><p id="c4e5" class="pw-post-body-paragraph ka kb in kc b kd me kf kg kh mf kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated"><code class="fe mj mk ml mm b">.map()</code>函数只是帮助你用iterable中的每个值执行一组语句，并返回修改后的值。例如，如果您有一个people对象数组，并且您希望将它们的租金乘以2。使用foreach的典型方法是:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="b23b" class="mv lh in mm b gy mw mx l my mz">let people = [<br/> { id: 101, name: ‘Michelle’, rent:1200 },<br/> { id: 124, destination: ‘Bob’, rent:2400 },<br/> { id: 151, destination: ‘Paul’, rent:500 },<br/> { id: 171, destination: ‘Peter’, rent:3899 }<br/>]</span><span id="6648" class="mv lh in mm b gy na mx l my mz">let newArray =[];</span><span id="2f45" class="mv lh in mm b gy na mx l my mz">people.forEach(person =&gt; {<br/> newArray.push(person.rent * 2);<br/>});</span><span id="a6d7" class="mv lh in mm b gy na mx l my mz">console.log(newArray)<br/><strong class="mm io"><em class="ky">//</em>[2400, 4800, 1000, 7798]</strong></span></pre><p id="3236" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有多种方法可以实现这一点。您可能想通过创建一个空数组，然后使用<code class="fe mj mk ml mm b">.forEach()</code>、<code class="fe mj mk ml mm b">.for(...of)</code>或一个简单的<code class="fe mj mk ml mm b">.for()</code>来实现您的目标。</p><p id="e560" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，使用<code class="fe mj mk ml mm b">.map()</code>功能，你可以简单地执行如下所示的相同任务。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="7f50" class="mv lh in mm b gy mw mx l my mz">const rentArray = people.map(person=&gt;person.rent *2);</span><span id="5349" class="mv lh in mm b gy na mx l my mz">console.log(rentArray)<br/><strong class="mm io">//[2400, 4800, 1000, 7798]</strong></span></pre><p id="644a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> Person </strong>是用于访问数组中每个元素的变量。箭头<code class="fe mj mk ml mm b">=&gt;</code>后的语句是我们回调的主体。由于主体只有一条语句，我们可以省略花括号和关键字<code class="fe mj mk ml mm b">return</code>。所以基本上上面的代码和下面的一样。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="40a6" class="mv lh in mm b gy mw mx l my mz">let rentArray = people.map(person =&gt; {<br/> return person.rent * 2;<br/>});</span></pre><p id="412d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么<code class="fe mj mk ml mm b">.map()</code>是如何工作的呢？基本上，它有两个参数，一个回调和一个可选的上下文(在回调中被认为是<code class="fe mj mk ml mm b">this</code>),我在前面的例子中没有用到。回调针对数组中的每个值<strong class="kc io">运行，并且<strong class="kc io">返回结果数组中的每个新值</strong>。</strong></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="5662" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">。过滤器()</h1><p id="7127" class="pw-post-body-paragraph ka kb in kc b kd me kf kg kh mf kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated"><code class="fe mj mk ml mm b">.filter()</code>功能如其名。如果你有一个数组，但是你只想要其中的一些元素？这就是<code class="fe mj mk ml mm b">.filter()</code>的用武之地。例如，如果您有一批带有装运ID和装运目的地的装运，并且您想要一批只发往美国的装运，典型的做法是；</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="27dc" class="mv lh in mm b gy mw mx l my mz">let shipments=[<br/> { id: 101, destination: ‘USA’ },<br/> { id: 124, destination: ‘UK’ },<br/> { id: 151, destination: ‘UAE’ },<br/> { id: 171, destination: ‘USA’ },<br/> { id: 201, destination: ‘UK’ },<br/>]</span><span id="2743" class="mv lh in mm b gy na mx l my mz"><br/>let newShipments = [];</span><span id="89ed" class="mv lh in mm b gy na mx l my mz">shipments.forEach(shipment =&gt; {<br/> if (shipment.destination == "USA") {<br/>  newShipments.push(shipment);<br/> }<br/>});</span><span id="412c" class="mv lh in mm b gy na mx l my mz">console.log(newShipments)<br/><strong class="mm io">//[{id:101,destination:"USA"},{ id:171, destination:"USA"}]</strong></span></pre><p id="98ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，使用<code class="fe mj mk ml mm b">.filter()</code>功能，您可以简单地执行如下所示的相同任务。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="2d48" class="mv lh in mm b gy mw mx l my mz">const newShipment = <br/> shipments.filter(shipment=&gt; shipment.destination =='USA');</span><span id="4040" class="mv lh in mm b gy na mx l my mz">console.log(newShipment)<br/><strong class="mm io">//[{id:101,destination:"USA"},{ id:171, destination:"USA"}]</strong></span></pre><p id="663d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，如果回调函数<strong class="kc io">返回true </strong>，当前元素<strong class="kc io">将在结果数组</strong>中。如果它返回false，那就不是。<code class="fe mj mk ml mm b">filter()</code>构建一个新数组，从不改变/变异旧数组，它只是迭代旧数组。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="4a67" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">减少()</h1><p id="c05c" class="pw-post-body-paragraph ka kb in kc b kd me kf kg kh mf kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated"><code class="fe mj mk ml mm b">.reduce()</code>方法对数组的每个成员执行<strong class="kc io"> reducer </strong>函数(您提供的),产生一个输出值。就像<code class="fe mj mk ml mm b">.map()</code>，<code class="fe mj mk ml mm b">.reduce()</code>也为数组的每个元素运行回调。这里不同的是，reduce将回调的结果(累加器)从一个数组元素传递给另一个数组元素。</p><p id="91e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">累加器几乎可以是任何东西(整数、字符串、对象等)。)并且在调用<code class="fe mj mk ml mm b">.reduce()</code>时必须实例化或传递。</p><p id="c6fe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，假设你有一个整数数组，你想得到它们的和。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="90d5" class="mv lh in mm b gy mw mx l my mz">const numbers = [ 2, 4, 6, 8, 10 ];</span><span id="0ba9" class="mv lh in mm b gy na mx l my mz">numbers.forEach(number =&gt; sum += number);</span><span id="a317" class="mv lh in mm b gy na mx l my mz">console.log(sum)<br/><strong class="mm io">//30</strong></span></pre><p id="7cb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用<code class="fe mj mk ml mm b"><strong class="kc io">.reduce();</strong></code>来执行这个操作</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="c882" class="mv lh in mm b gy mw mx l my mz">const sum = numbers.reduce((acc, number) =&gt; acc + number, 0);</span><span id="3e6b" class="mv lh in mm b gy na mx l my mz">console.log(sum)<br/><strong class="mm io">//30</strong></span></pre><p id="847e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，我已经将初始值设置为0。如果有必要，我也可以使用现有的变量。在对数组的每个元素运行回调之后，reduce将返回累加器的最终值(在我们的例子中是:<code class="fe mj mk ml mm b">30</code>)。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="58aa" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">我们结合一下。map()，。filter()，。减少()</h1><p id="4c21" class="pw-post-body-paragraph ka kb in kc b kd me kf kg kh mf kj kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">我们举个简单的例子。我们有如下一组学生。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="129e" class="mv lh in mm b gy mw mx l my mz">const students = [<br/> {<br/>  id: 5, <br/>  name: “Perone Skywalker”,<br/>  average: 78.9,<br/>  major: ‘Physics’,<br/> },<br/> { <br/>  id: 82,<br/>  name: “Micheal Wren”,<br/>  average: 73,<br/>  major: ‘Biology’,<br/> },<br/> {<br/>  id: 22, <br/>  name: “Zeb De Leone”,<br/>  average: 59,<br/>  major: ‘Physics’,<br/> },<br/> {<br/>  id: 15,<br/>  name: “Chidi Bridger”,<br/>  average: 73,<br/>  major: ‘Physics’,<br/> },<br/> {<br/>  id: 11,<br/>  name: “Caleb Canop”, <br/>  average: 33,<br/>  major: ‘Chemistry’, <br/> },<br/> {<br/>  id: 47,<br/>  name: “Neo Plims”, <br/>  average: 79,<br/>  major: ‘Biology’,<br/> }<br/>];</span></pre><p id="c86b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在的目标是得到学物理的学生的总平均成绩。</p><p id="0cc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先我们需要过滤掉学物理的学生。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="e235" class="mv lh in mm b gy mw mx l my mz">const physicsStudents = students.filter( student=&gt;student.major ==’Physics’);</span><span id="face" class="mv lh in mm b gy na mx l my mz">console.log(physicsStudents)<br/><strong class="mm io">// [{...}, {...}, {...}] (Perone, Zeb and Chidi)</strong></span></pre><p id="ba18" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我们有一个由3名学生组成的学习物理的团队。现在我们要得到这些学生的平均值。我们可以利用。map()来实现。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="930f" class="mv lh in mm b gy mw mx l my mz">const average = physicsStudents.map(student =&gt; student.average);</span><span id="dd04" class="mv lh in mm b gy na mx l my mz">console.log(average);<br/><strong class="mm io">//[ 78.9, 59, 73]</strong></span></pre><p id="3c25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们可以了。减少()并得到总数。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="3cd3" class="mv lh in mm b gy mw mx l my mz">const totalAverage = average.reduce((acc, score) =&gt;{<br/> return acc + score;<br/>}, 0);</span><span id="3f0c" class="mv lh in mm b gy na mx l my mz">console.log(totalAverage);<br/><strong class="mm io">//210.9</strong></span></pre><p id="4917" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们可以做一次了。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="2eef" class="mv lh in mm b gy mw mx l my mz">const totalAverage = students<br/> .filter(student =&gt; student.major ==”Physics”)<br/> .map(student =&gt;student.average)<br/> .reduce((acc, score) =&gt; acc + score, 0);</span><span id="70aa" class="mv lh in mm b gy na mx l my mz">console.log(totalAverage)<br/><strong class="mm io">//210.9</strong></span></pre><p id="ea90" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成了！👊🏼</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="1114" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">试着用<code class="fe mj mk ml mm b">.map()</code>、<code class="fe mj mk ml mm b">.reduce()</code>、<code class="fe mj mk ml mm b">.filter()</code>来代替你的<code class="fe mj mk ml mm b">for</code>循环。如您所见，使用这些函数可以减少大量代码行。</p><p id="3e20" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望我让这些函数非常容易理解..🤟🏽</p><p id="dedb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">继续编码！❤️👩🏽‍💻</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/8fa3b0fe054a13c3766d159ba831adc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/1*puO9QPsENQ5ww1QKNuf6tw.gif"/></div></div></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Unit Testing In Angular : Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度单元测试:基础</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/unit-testing-in-angular-basics-part-1-329304813dc3?source=collection_archive---------3-----------------------#2019-09-11">https://javascript.plainenglish.io/unit-testing-in-angular-basics-part-1-329304813dc3?source=collection_archive---------3-----------------------#2019-09-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c736329356cbedf7b1dbca7b6b251b22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4ZyyOziTzxxJLr2Bi6wLg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Credit for this image goes to “<a class="ae jz" href="https://softwarebrothers.co/blog/introduction-to-unit-tests-in-angular/" rel="noopener ugc nofollow" target="_blank">softwarebrothers.co</a>”</figcaption></figure><p id="7bd3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">实际上你可能会问为什么我需要学习单元测试，而我可以花更多的时间开发一个好的特性..！为什么单元测试很重要，我应该什么时候写单元测试..每当你听到单元测试的时候，你的脑海中就会闪过很多问题..</p><p id="79cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi ky translated"><span class="l kz la lb bm lc ld le lf lg di">在</span>这篇文章中我们将会发现为什么，当&amp;单元测试在Angular！</p><p id="fdf0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你准备好开始单元测试之旅了吗？我们开始吧..</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h2 id="4751" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">首先，我为什么要学习单元测试..为什么它很重要？</h2><ul class=""><li id="bf2b" class="mh mi in kc b kd mj kh mk kl ml kp mm kt mn kx mo mp mq mr bi translated">从编写特性代码开始是一个常见的错误，但是单元测试让你首先想到代码结构的设计。</li><li id="289c" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx mo mp mq mr bi translated">将您的代码放在坚实的基础上，确保您的代码很少或没有错误。</li><li id="a3de" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx mo mp mq mr bi translated">使重构代码或添加新功能变得更加容易，因为测试用例确保您不会用新的部分破坏应用程序的任何其他部分。</li><li id="d69b" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx mo mp mq mr bi translated">单元测试为你的代码添加了一个很好的文档。</li></ul></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h2 id="c86a" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">是只有单元测试还是有更多的类型？</h2><p id="8804" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated">当然，还有更多测试类型:</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/f5e33e07d3f33ef93a73efa88fbba7d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UMm9z633wpmoGOMmysbcVA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Testing Types</figcaption></figure><ul class=""><li id="b30a" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx mo mp mq mr bi translated"><strong class="kc io">单元测试</strong></li></ul><p id="f897" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">测试应用程序的小部分并完全依赖于它自己，在angular中它是在没有任何外部资源和模板的情况下孤立地测试组件。</p><ul class=""><li id="7f52" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx mo mp mq mr bi translated"><strong class="kc io">集成测试</strong></li></ul><p id="af10" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">测试两个单元之间的交互，在angular中是用模板和外部资源进行测试。</p><ul class=""><li id="5a2c" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx mo mp mq mr bi translated"><strong class="kc io">端到端测试</strong></li></ul><p id="064a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它是用于自动化测试的，测试确保应用程序从头到尾都按照预期执行。当测试运行时，浏览器的交互就像用户使用你的应用程序一样。角度端到端测试由一个叫做<strong class="kc io">量角器</strong>的框架驱动。</p><p id="9dcb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是在我们的旅程中，我们将谈论单元测试的角度。T13】</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><blockquote class="nj nk nl"><p id="8de7" class="ka kb ni kc b kd ke kf kg kh ki kj kk nm km kn ko nn kq kr ks no ku kv kw kx ig bi translated">"测试是我们告诉项目下一代程序员的故事."<br/> ―罗伊·奥舍洛夫，<a class="ae jz" href="https://www.goodreads.com/work/quotes/6678711" rel="noopener ugc nofollow" target="_blank">单元测试的艺术</a></p></blockquote></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="ba02" class="np lp in bd lq nq nr ns lt nt nu nv lw nw nx ny lz nz oa ob mc oc od oe mf of bi translated">工具</h1><p id="55d2" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated"><strong class="kc io">那么我如何在Angular中开始单元测试呢？</strong></p><p id="4b19" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您首先需要知道angular为您提供了哪些单元测试工具..</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div class="gh gi og"><img src="../Images/c0468d0da43836c84b8616daf8dc9554.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*AxcybVXrY6Yq9kseG0dMiQ.png"/></div></figure><ol class=""><li id="a39b" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx oh mp mq mr bi translated"><strong class="kc io">茉莉:</strong></li></ol><p id="5186" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Jasmine是一个javascript测试框架，试图以人类可读的格式描述测试，以便非技术人员可以理解正在测试的内容。</p><p id="24f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.<strong class="kc io">因果报应:</strong></p><p id="d13b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Karma是一个测试运行器，它是一个让我们从命令行在浏览器中运行jasmine测试的工具。测试的结果也显示在命令行上。Karma还可以观察你的开发文件的变化，并自动重新运行测试。</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><p id="c46c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些是您需要了解的工具，以便在Angular项目中开始测试。</p><p id="de48" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ni">注意:</em> </strong> <em class="ni">如果你有angular的基础知识来理解如何创建angular项目&amp;内部结构，那么这篇文章在下一节会更有帮助和有用，但是不要担心，我会给你一些提示来启动你的应用。</em></p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h2 id="38ae" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">启动的先决条件:</h2><p id="d2e2" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated">您需要在您的机器上安装节点&amp; angular-CLI，并从命令行创建一个新项目:</p><ol class=""><li id="8550" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx oh mp mq mr bi translated"><em class="ni"> npm安装-g @angular/cli </em></li><li id="5b63" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx oh mp mq mr bi translated"><em class="ni"> ng新角度单位测试</em></li></ol></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="e25b" class="np lp in bd lq nq nr ns lt nt nu nv lw nw nx ny lz nz oa ob mc oc od oe mf of bi translated"><strong class="ak">入门</strong></h1><p id="9ae9" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated">打开您的angular项目，让我们更深入地研究结构，以发现我们可以在哪里编写我们的测试用例。</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/fceee97fbbca18f5252e940793047e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*SnadSKSVgwmyg_0iZ8tFZw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Angular project Structure</figcaption></figure><p id="5ef6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如此图所示，在<code class="fe oj ok ol om b">src/app</code>中，您可以默认找到您的应用程序组件和任何其他生成的组件，有一种文件您以前从未尝试打开或发现过..这是我们要写作的地方..<em class="ni">是的，那些高亮显示的文件就是我们的目的地</em> <code class="fe oj ok ol om b">componentName.component.spec.ts</code>。</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="6ef9" class="np lp in bd lq nq nr ns lt nt nu nv lw nw nx ny lz nz oa ob mc oc od oe mf of bi translated">测试文件-。规格。ts —结构:</h1><p id="cd96" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated">以下是规格文件中要遵循的结构:</p><pre class="nb nc nd ne gt on om oo op aw oq bi"><span id="b836" class="lo lp in om b gy or os l ot ou"><strong class="om io">describe</strong> ( ‘TestName’ , ( ) =&gt; {<br/> <br/>  <strong class="om io">It</strong> ( ‘sub_testName’ , ( ) =&gt; { }</span><span id="48ec" class="lo lp in om b gy ov os l ot ou">}) ;</span></pre><p id="24a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如上面的代码所示，您有:</p><ul class=""><li id="df4f" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx mo mp mq mr bi translated"><strong class="kc io"> <em class="ni">形容( )方法</em> </strong></li></ul><p id="4c77" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一种用来定义套件的方法&amp;套件意味着一组相关的测试。</p><ul class=""><li id="fec4" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx mo mp mq mr bi translated"><strong class="kc io"> <em class="ni">它( )的方法</em> </strong></li></ul><p id="1b35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用于定义一个单独的测试用例，它有两个参数，string描述这个测试用例应该返回什么，另一个将是测试运行程序调用的函数。</p><p id="86d5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ni">在每个It()方法</em>的内部，你将编写你的测试用例实现，它分为3个步骤:安排、动作、断言，这是一个在<a class="ae jz" href="http://wiki.c2.com/?UnitTest" rel="noopener ugc nofollow" target="_blank">单元测试</a>方法中安排和格式化代码的模式:每个方法应该将这些功能部分分组，用空行分隔:</p><ol class=""><li id="8d07" class="mh mi in kc b kd ke kh ki kl nf kp ng kt nh kx oh mp mq mr bi translated"><strong class="kc io">安排</strong>所有必要的前提条件和输入。</li><li id="0712" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx oh mp mq mr bi translated"><strong class="kc io">对被测对象或方法进行</strong>动作。</li><li id="d052" class="mh mi in kc b kd ms kh mt kl mu kp mv kt mw kx oh mp mq mr bi translated">断言预期的结果已经出现。</li></ol><pre class="nb nc nd ne gt on om oo op aw oq bi"><span id="0399" class="lo lp in om b gy or os l ot ou">// In you component.spec.ts</span><span id="087a" class="lo lp in om b gy ov os l ot ou"><strong class="om io">describe</strong> ( ‘TestName’ , ( ) =&gt; {<br/> <br/>  <strong class="om io">It</strong> ( ‘sub_testName’ , ( ) =&gt; { </span><span id="cecc" class="lo lp in om b gy ov os l ot ou">  let instance = new ComponentName ; //<strong class="om io">initialize - Arrange</strong></span><span id="5871" class="lo lp in om b gy ov os l ot ou">  let result = instance.functionName(“Marina”);//<strong class="om io">make a change - Act</strong></span><span id="fbe7" class="lo lp in om b gy ov os l ot ou">  expect(result).toContain(“Marina”) ; //<strong class="om io">expect the result - Assert</strong></span><span id="8ebe" class="lo lp in om b gy ov os l ot ou">}</span><span id="33f4" class="lo lp in om b gy ov os l ot ou">}) ;</span></pre><p id="7996" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">而<code class="fe oj ok ol om b">funtionName</code>是你component.ts中实现的函数</p><pre class="nb nc nd ne gt on om oo op aw oq bi"><span id="0ea7" class="lo lp in om b gy or os l ot ou">// In you component.ts</span><span id="ee65" class="lo lp in om b gy ov os l ot ou">function functionName (name) {<br/>  alert("My Name is " + name );<br/>} </span></pre><p id="419b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如上面的代码片段所示，在<code class="fe oj ok ol om b">component.spec.ts</code>中，你有一个描述性的代码行，它安排了你要作为第一步使用的组件实例，然后在该组件中对一个函数进行修改，最后期待结果。</p><h1 id="9754" class="np lp in bd lq nq ow ns lt nt ox nv lw nw oy ny lz nz oz ob mc oc pa oe mf of bi translated">最后运行您的测试</h1><p id="ab3e" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl mx kn ko kp my kr ks kt mz kv kw kx ig bi translated">当你完成你的测试用例时，运行角度测试命令:<strong class="kc io"> ng test </strong></p><p id="dc48" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> karma </strong>窗口将打开运行测试用例&amp;，显示用<code class="fe oj ok ol om b">describe </code>方法编写的描述和用<code class="fe oj ok ol om b">It </code>方法编写的测试用例子描述，如果失败或通过，则显示结果。</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pb"><img src="../Images/2220ddbe2067a29c91c583fe684f2bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lSKqhSi6-fHGeBgog5mFRw.gif"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Karma running test cases</figcaption></figure></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="b0e0" class="np lp in bd lq nq nr ns lt nt nu nv lw nw nx ny lz nz oa ob mc oc od oe mf of bi translated">技巧</h1><blockquote class="nj nk nl"><p id="af31" class="ka kb ni kc b kd ke kf kg kh ki kj kk nm km kn ko nn kq kr ks no ku kv kw kx ig bi translated">好的测试应该讲故事</p></blockquote><p id="819d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">没有必要每次都遵循相同的结构(安排、动作、断言),但是最好让你的测试代码可读性更好，结构更好..这是编写好的单元测试的技巧之一</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><p id="e6cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当然，这并不是结束，还有很多东西需要发现，这只是开始..请等待测试组件、服务等的下一篇文章:)</p><blockquote class="nj nk nl"><p id="4e76" class="ka kb ni kc b kd ke kf kg kh ki kj kk nm km kn ko nn kq kr ks no ku kv kw kx ig bi translated"><em class="in">不要只是阅读，试一试！</em></p></blockquote><p id="ccc7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">快乐学习..</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><p id="637d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有一些有用的参考资料</p><div class="pc pd gp gr pe pf"><a href="https://angular.io/guide/testing" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd io gy z fp pk fr fs pl fu fw im bi translated">有角的</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">Angular是一个构建移动和桌面web应用程序的平台。加入数百万开发者的社区…</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">angular.io</p></div></div></div></a></div><div class="pc pd gp gr pe pf"><a href="https://alligator.io/angular/introduction-unit-testing/" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd io gy z fp pk fr fs pl fu fw im bi translated">角度单元测试简介</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">Angular 2+应用的单元测试很容易上手。如果您的项目是使用角坐标设置的…</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">鳄鱼. io</p></div></div><div class="po l"><div class="pp l pq pr ps po pt jt pf"/></div></div></a></div></div></div>    
</body>
</html>
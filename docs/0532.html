<html>
<head>
<title>Emitting Component Custom Events — VueJS Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发射组件自定义事件— VueJS教程</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/emitting-custom-events-vuejs-tutorial-2689390df096?source=collection_archive---------2-----------------------#2019-11-04">https://javascript.plainenglish.io/emitting-custom-events-vuejs-tutorial-2689390df096?source=collection_archive---------2-----------------------#2019-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e592cb72d822711558acc0b5830ccd53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z5ObQZ63ZSDj7iAI"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@fatosi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fatos Bytyqi</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f561" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何Vue应用程序的一个重要部分是充分利用Vue的反应能力在应用程序中传递数据。然而，当涉及到处理多个组件、继承和开发中经常出现的一系列其他问题时，有时这可能会有点混乱。</p><p id="8a11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这篇快速的文章涵盖了所有的基础，让你顺利地成为Vue.js中自定义事件的大师。</p><h1 id="8d2f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么发出事件</h1><p id="59f0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">您可能会问自己，“我什么时候需要这样做？”。我不怪你。当你不知道教程和你的项目有什么关系时，你很难去浏览它。</p><p id="0a4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当使用Vue的最佳实践并试图创建模块化组件时，发出事件非常有用。如果您希望父组件能够从其子组件接收数据，一个很好的方法是使用VueJS自定义事件。</p><p id="07a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，假设您有一个popup组件，它的可见性由父组件控制。如果我们想通过点击退出按钮来关闭弹出窗口，我们可以从子进程向父进程发出一个事件，告诉它隐藏弹出窗口。</p><p id="0f9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在更复杂的用例中，这项基本技能非常重要，但是一旦你掌握了基础知识，就很容易看到它如何应用到你的项目中。</p><h1 id="8398" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">我们该怎么做呢？</h1><p id="dd43" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">回到前面的弹出组件的例子，假设我们有以下两个组件。</p><p id="f8c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能是一个验证表单、登录弹出窗口，真的是任何东西</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a3a3" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>   &lt;div class='popup'&gt;<br/>      This is the popup<br/>      &lt;div&gt;Close&lt;/div&gt;<br/>   &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>&lt;/script&gt;<br/></span></pre><p id="1330" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Page.vue</code> —这只是本例的父容器</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e610" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>   &lt;div&gt;<br/>      &lt;popup v-show='popupOpen'&gt;&lt;/popup&gt;<br/>      Hello World<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="4214" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import Popup from '.Popup.vue'</span><span id="29ae" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>   components: {<br/>      Popup<br/>   },<br/>   data () {<br/>      popupOpen: false<br/>   }<br/>}</span><span id="abfa" class="mq lc iq mh b gy mv ms l mt mu">&lt;/script&gt;<br/></span></pre><p id="e1e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，当<code class="fe me mf mg mh b">popupOpen</code>变量为真时，弹出窗口仅在<code class="fe me mf mg mh b">Page.vue</code>上可见——然而，如果我们想通过点击按钮来关闭弹出窗口，将该信息传回<code class="fe me mf mg mh b">Page.vue</code>可能会有点棘手，这是发出自定义事件的地方。</p><p id="e577" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要做的就是添加几行。</p><p id="cc47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">Popup.vue</code> —我们要添加一个方法，在按钮被点击时调用它。该方法将发出事件。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8164" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>   &lt;div class='popup'&gt;<br/>      This is the popup<br/>      &lt;div @click='handleClick'&gt;Close&lt;/div&gt;<br/>   &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>   methods: {<br/>      handleClick: function () {<br/>         // can put fancier logic here, but we'll be simple<br/>         this.$emit('close')<br/>      }<br/>   }<br/>}<br/>&lt;/script&gt;</span></pre><p id="2bb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在<code class="fe me mf mg mh b">Page.vue</code>中，我们将不得不监听这个事件并相应地处理它。这可以通过使用<code class="fe me mf mg mh b">v-on </code>修改器修改一行来完成。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0dff" class="mq lc iq mh b gy mr ms l mt mu">&lt;popup v-show='popupOpen' v-on:close='popupOpen = false'&gt;&lt;/popup&gt;</span></pre><h1 id="a47d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">变得有点花哨了</h1><p id="f78e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当然，这个例子非常简单，甚至似乎不言自明。但是使用VueJS自定义事件可以实现更高级的功能。</p><p id="0d1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">发出VueJS事件的一个常见用途是创建属性之间的双向绑定。幸运的是，VueJS知道这一点，并为此创造了一种速记方法。</p><p id="929f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">直接从Vue docs。我们有下面这个例子。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="96e2" class="mq lc iq mh b gy mr ms l mt mu">this.$emit('update:title', newTitle)</span></pre><p id="0daa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在父母那里，我们倾听。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8f97" class="mq lc iq mh b gy mr ms l mt mu">&lt;text-document   <br/>   v-bind:title="doc.title"   <br/>   v-on:update:title="doc.title = $event" &gt;<br/>&lt;/text-document&gt;</span></pre><p id="ecbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，聪明的Vue团队添加了一个简写，将这个命令简化为一行。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="aadb" class="mq lc iq mh b gy mr ms l mt mu">&lt;text-document v-bind.sync="doc"&gt;&lt;/text-document&gt;</span></pre><p id="54cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个将数据传递回父组件的很好的例子，通过用第二个参数调用<code class="fe me mf mg mh b">this.$emit()</code>，它被传递回父组件，在变量名<code class="fe me mf mg mh b">$event</code>下。这很有用，因为您可以传回对象或您想要的任何其他数据。</p><h1 id="7bf7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">进一步阅读</h1><p id="ef06" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">和往常一样，我非常喜欢使用<a class="ae kc" href="https://vuejs.org/v2/guide/components-custom-events.html" rel="noopener ugc nofollow" target="_blank"> VueJS文档</a>——这是任何编程框架中最好的书面文档。这绝对是我查找更多细节以及代码语法和选项的来源。</p><h1 id="a5c1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">就是这样。</h1><p id="660d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">和五个快速的要点——就是这样！这应该足以让你开始使用Vue的一个很少使用的特性。我希望这能对你有所帮助，如果你有任何问题、意见、顾虑，或者只是想打声招呼，请给我回复或者发邮件到matt@learnvue.co</p><p id="05cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编程快乐！</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="a92d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有兴趣了解更多关于VueJS的知识，<a class="ae kc" href="https://expert-painter-2502.ck.page/f4a74ed5e2" rel="noopener ugc nofollow" target="_blank">点击这里获得一份免费的Vue备忘单</a>，它是每个Vue开发者都需要知道的基本知识。</p></div></div>    
</body>
</html>
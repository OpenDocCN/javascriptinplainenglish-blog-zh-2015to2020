<html>
<head>
<title>JavaScript Best Practices — Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-modules-b493a8f89516?source=collection_archive---------3-----------------------#2020-05-24">https://javascript.plainenglish.io/javascript-best-practices-modules-b493a8f89516?source=collection_archive---------3-----------------------#2020-05-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0baf89f1fbea2d3f1927143fa8aa7269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4uTyB1ZEbTNRf_vj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@photoholgic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Holger Link</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6185" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="4291" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究从JavaScript模块导入和导出的一些最佳实践。</p><h1 id="18f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">仅从一个位置的路径导入</h1><p id="6363" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们从一个模块中导入多个成员，那么所有成员都应该在一个<code class="fe me mf mg mh b">import</code>语句中导入。</p><p id="ffb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不用编写以下代码来导入成员:</p><p id="dec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f623" class="mq lc iq mh b gy mr ms l mt mu">export const foo = 1;<br/>export const bar = 2;</span></pre><p id="afd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2dc0" class="mq lc iq mh b gy mr ms l mt mu">import { foo } from "./module";<br/>import { bar } from "./module";<br/>console.log(foo, bar);</span></pre><p id="22e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用2行代码从同一个模块导入2个不同的成员。这样不好，因为我们在一个地方有很多重复的代码。</p><p id="47fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该把它们都放在同一个模块中，以节省空间并删除重复的代码。</p><p id="d3cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以改为编写以下内容:</p><p id="49fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9ed8" class="mq lc iq mh b gy mr ms l mt mu">export const foo = 1;<br/>export const bar = 2;</span></pre><p id="d26b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c5f" class="mq lc iq mh b gy mr ms l mt mu">import { foo, bar } from "./module";<br/>console.log(foo, bar);</span></pre><p id="6931" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在一行中导入了<code class="fe me mf mg mh b">index.js</code>中<code class="fe me mf mg mh b">module.js</code>的成员。正如我们所看到的，自从我们将两行合并成一行后，我们节省了大量的打字和重复工作。</p><h1 id="5c20" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要导出可变绑定</h1><p id="22c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该导出可变实体，因为我们不想在导出它们的模块中意外地改变它们。例如，如果我们有以下代码:</p><p id="f7a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6eec" class="mq lc iq mh b gy mr ms l mt mu">export let foo = 1;<br/>foo = 3;<br/>export const bar = 2;</span></pre><p id="21b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c2ed" class="mq lc iq mh b gy mr ms l mt mu">import { foo, bar } from "./module";<br/>console.log(foo, bar);</span></pre><p id="faa9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们从<code class="fe me mf mg mh b">module.js</code>中导出了<code class="fe me mf mg mh b">foo</code>成员，然后在稍后更改了<code class="fe me mf mg mh b">foo</code>的值。</p><p id="a585" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们在<code class="fe me mf mg mh b">index.js</code>中导入<code class="fe me mf mg mh b">foo</code>时，我们看到为<code class="fe me mf mg mh b">foo</code>记录了值3。</p><p id="0332" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，每当我们通过重新分配来更改值时，新值将被导出。</p><p id="4ed2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们不应该导出已经用<code class="fe me mf mg mh b">let</code>定义的成员，因为如果我们从一个库而不是我们通常编辑的代码中导入，这些变化可能会被隐藏。</p><p id="7adb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">foo</code>是用<code class="fe me mf mg mh b">const</code>定义的，那么在我们导出它之后，我们将不能把它重新赋值给一个新值。</p><h1 id="f70d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在具有单个导出的模块中，首选默认导出，而不是命名导出</h1><p id="266a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在一个模块中只有一个成员要导出，那么我们应该把它作为默认导出来导出。</p><p id="4239" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做的好处是，在导入时，我们可以不使用<code class="fe me mf mg mh b">as</code>关键字来命名它。</p><p id="45f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写以下内容:</p><p id="c45d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="677d" class="mq lc iq mh b gy mr ms l mt mu">export const bar = 2;</span></pre><p id="979b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0aae" class="mq lc iq mh b gy mr ms l mt mu">import { bar as foo } from "./module";<br/>console.log(foo);</span></pre><p id="55b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以改为编写以下内容:</p><p id="bb3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="31a4" class="mq lc iq mh b gy mr ms l mt mu">const bar = 2;<br/>export default bar;</span></pre><p id="3dfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7926" class="mq lc iq mh b gy mr ms l mt mu">import foo from "./module";<br/>console.log(foo);</span></pre><p id="54b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第二个例子中，我们将<code class="fe me mf mg mh b">bar</code>导出为默认导出。然后在<code class="fe me mf mg mh b">index.js</code>中，我们可以用名字<code class="fe me mf mg mh b">foo</code>或者任何名字代替名字<code class="fe me mf mg mh b">bar</code>导入，而不用使用<code class="fe me mf mg mh b">as</code>关键字。</p><p id="128f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有很多导入，这可以方便地避免与导入的名称冲突。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/79feb0f8c7eb02de13dbc99510cca323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x38ZIlxdFViu0S2u"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@cqy12854?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daisy Chen</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a5ae" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将所有I <code class="fe me mf mg mh b">mport</code>置于非进口陈述之上</h1><p id="181e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">进口应该在非进口声明之上，因为这让每个人都清楚出口在哪里。</p><p id="858f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不用编写下面的代码:</p><p id="a899" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">bar.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f539" class="mq lc iq mh b gy mr ms l mt mu">export const bar = 1;</span></pre><p id="321d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">module.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1d20" class="mq lc iq mh b gy mr ms l mt mu">export const foo = 2;</span></pre><p id="8c1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5409" class="mq lc iq mh b gy mr ms l mt mu">import { foo } from "./module";<br/>console.log(foo);</span><span id="7765" class="mq lc iq mh b gy mw ms l mt mu">import { bar } from "./bar";<br/>console.log(bar);</span></pre><p id="9308" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们从<code class="fe me mf mg mh b">index.js</code>的两个不同模块中导入了项目，这两个导入语句相距甚远。</p><p id="b1a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个<code class="fe me mf mg mh b">console.log</code>调用将<code class="fe me mf mg mh b">foo</code>导入与<code class="fe me mf mg mh b">bar</code>导入分开。</p><p id="03b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分散的Import语句很难找到。</p><p id="ee0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3af8" class="mq lc iq mh b gy mr ms l mt mu">import { foo } from "./module";<br/>import { bar } from "./bar";</span><span id="ebe6" class="mq lc iq mh b gy mw ms l mt mu">console.log(foo, bar);</span></pre><p id="5929" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将所有的<code class="fe me mf mg mh b">import</code>语句组合在我们代码文件的顶部。</p><h1 id="ea43" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ea00" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该将导入语句组合在一起，这样他们就可以很容易地从代码的顶部找到导入。</p><p id="f776" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们只有一个成员要导出，那么我们可以默认导出它。</p><p id="75c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该导出可变绑定，因为它们在导出后可以更改。</p><h1 id="933c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">简明英语团队的笔记</strong></h1><p id="4795" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
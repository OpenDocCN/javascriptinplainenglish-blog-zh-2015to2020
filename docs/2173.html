<html>
<head>
<title>Type checking with optional chaining in JavaScript — ES2020</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中使用可选链接的类型检查— ES2020</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/type-checking-with-optional-chaining-in-javascript-es2020-bf3bf59d8f15?source=collection_archive---------11-----------------------#2020-05-26">https://javascript.plainenglish.io/type-checking-with-optional-chaining-in-javascript-es2020-bf3bf59d8f15?source=collection_archive---------11-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1b0e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在尝试访问数据之前，更容易检查数据中是否存在属性。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dda4634ac2ab38c9f47313bfcaf96b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GA1vEUtESJ7ED74f"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@dsmacinnes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Danielle MacInnes</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1f54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现代JavaScript框架严重依赖结构化数据来处理通过API传递的信息，或者向用户显示数据繁重的华丽界面。这些信息主要以JSON格式存储。只是属性或对象的键值对。</p><p id="d50b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您打电话获取用户资料，然后在前端开始映射所有不同的属性时，困难是真实的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/7bf672a8738206d1dd0fc7e5550014a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZuJI57SBZZMT1yH9szTVA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Example of what JSON data might look like and what happens when you try access an attribute that doesn’t exist in the data. Note: it won’t fail if it’s typed in like above — but if we are trying to render the profilePicture attribute somewhere.</figcaption></figure><p id="a264" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">却发现您的应用程序崩溃了，因为您在代码中映射的属性不存在。</p><p id="0e46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们在访问数据之前做检查——我们做这些检查的原因是因为JavaScript允许不一定有结构的匿名对象。如果对象树中的父对象不存在，我们会得到类型错误。当面临这些问题时，有许多方法可以在访问属性之前检查对象中的属性是否存在:</p><h2 id="1856" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">试着接住</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mm"><img src="../Images/176cb0fb0f414a23e66936994d30959a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJa_fD7gL85_HG-gbwHRJw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Try catches prevent our code from crashing and should be used consistently across out code for good practice — however in a situation where we are setting our data to null this approach can become tedious when looking to maintain code.</figcaption></figure><h2 id="38d5" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">三元运算符</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/ca93591e6f05b3d3810d6464a1a822f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqPI6lWnnjSVAg6wNg001Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Ternary operators are easy to understand but to ensure one attribute exists in this example we are checking 3 different times to ensure it all comes together. Another tedious approach, but one that works better then try catch</figcaption></figure><h1 id="c159" class="mo lu iq bd lv mp mq mr ly ms mt mu mb jw mv jx me jz mw ka mh kc mx kd mk my bi translated">可选链接——魔力</h1><p id="108e" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">可选链接最终在<a class="ae kv" href="https://tc39.github.io/process-document/" rel="noopener ugc nofollow" target="_blank">阶段4 </a>，这意味着它是ES2020规范的一部分。操作者检查<code class="fe ne nf ng nh b">?.</code>左侧<strong class="ky ir">的是<code class="fe ne nf ng nh b">null</code>还是<code class="fe ne nf ng nh b">undefined</code>。如果是，那么表达式短路并返回<code class="fe ne nf ng nh b">undefined</code>。否则表达式继续求值，好像什么都没错。</strong></p><blockquote class="ni nj nk"><p id="c192" class="kw kx nl ky b kz la jr lb lc ld ju le nm lg lh li nn lk ll lm no lo lp lq lr ij bi translated">操作符<code class="fe ne nf ng nh b"><strong class="ky ir">?.</strong></code>允许我们读取位于连接对象链深处的属性值，而不必明确验证链中的每个引用都是有效的。<code class="fe ne nf ng nh b">?.</code>操作符的功能类似于<code class="fe ne nf ng nh b">.</code>链接操作符，不同之处在于，如果引用是<code class="fe ne nf ng nh b">null</code>或<code class="fe ne nf ng nh b">undefined</code>，表达式将使用返回值<code class="fe ne nf ng nh b">undefined</code>进行短路，而不是导致错误。当与函数调用一起使用时，如果给定的函数不存在，它将返回<code class="fe ne nf ng nh b">undefined</code>。— <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">参考</a></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/96320122a48595b36758bdb895e88a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8iT16Bwtou6IdIBkEVOtnQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Here we have a small chain referencing profile picture — it simply returns undefined and makes handling rendering much easier in our application.</figcaption></figure><p id="a825" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个简单的工具，但当我们处理有大量JSON数据的应用程序时，我们需要<em class="nl">遍历和映射这些数据——可选的链接使事情变得更容易——它使代码更容易阅读，并防止应用程序在前端呈现任何内容时崩溃。</em></p><p id="52cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于现在想使用可选链接的人来说，要么必须等待ES2020通过普通JavaScript访问它，要么它可以与<a class="ae kv" href="https://github.com/babel/babel/pull/5813" rel="noopener ugc nofollow" target="_blank"> babel </a>一起使用。</p><h2 id="eb33" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated"><strong class="ak">用简单英语写的便条</strong></h2><p id="f91c" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> plainenglish.io </strong> </a>上找到所有这些——关注我们的出版物并<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a> <strong class="ky ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
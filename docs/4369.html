<html>
<head>
<title>Scaling Data: From Max/MSP to JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">缩放数据:从Max/MSP到JavaScript</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/scaling-data-in-max-msp-or-javascript-65440d919e06?source=collection_archive---------11-----------------------#2020-12-06">https://javascript.plainenglish.io/scaling-data-in-max-msp-or-javascript-65440d919e06?source=collection_archive---------11-----------------------#2020-12-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="c006" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">介绍</h1><p id="42c1" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">最近，我在摆弄一个<a class="ae lg" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>应用程序来控制我家周围的<a class="ae lg" href="https://developers.meethue.com/" rel="noopener ugc nofollow" target="_blank">飞利浦Hue </a>智能LED灯。我想玩一些低风险的东西，我想最终在一个本地触摸屏连接的<a class="ae lg" href="https://www.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi </a>上运行，甚至可以挂在墙上！</p><p id="1af2" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">如果您不知道，飞利浦Hue智能照明生态系统向您的本地网络公开了一个REST-ish <a class="ae lg" href="https://developers.meethue.com/develop/hue-api/" rel="noopener ugc nofollow" target="_blank"> API </a>，您可以通过GET请求查询一般设置、状态、时间表和配置，然后使用PUT请求进行更改。他们的网站上也有很棒的开发者资源，包括一些有用的软件开发工具包。</p><p id="c65f" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">作为额外的奖励，它们甚至包括Philips Hue Bridge上的板载调试器(本质上充当API服务器)，使您能够在浏览器中尝试请求。对于入职:谁还能要求更多？</p><p id="5bd7" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">你可以在这里参观:<code class="fe lm ln lo lp b">https://&lt;bridge ip address&gt;/debug/clip.html</code></p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/97316c5fa7741693681c32c65b003eea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*IT6ehL5tcAcseIjrDB0Olw.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Philip Hue Bridge’s built-in API debugger</figcaption></figure><p id="cda0" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">要找到IP地址，我建议使用<a class="ae lg" href="https://www.fing.com/" rel="noopener ugc nofollow" target="_blank"> Fing </a>或<a class="ae lg" href="https://nmap.org/" rel="noopener ugc nofollow" target="_blank"> Nmap </a>。这是他们更多的炸弹文件:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mc"><img src="../Images/fac5515030b5f29bdf6cfe173acbbc6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrUv4pGKZ6i3ageINxXNUQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">PUT request example to change the state of a bulb</figcaption></figure><h1 id="c119" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">为什么要使用缩放？</h1><h2 id="1966" class="mh jl in bd jm mi mj dn jq mk ml dp ju kt mm mn jy kx mo mp kc lb mq mr kg ms bi translated">TL；DR = &gt;</h2><p id="5cf2" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我的编码之旅始于一个面向艺术家和创意人员的视觉编码生态系统，名为<a class="ae lg" href="http://www.cycling74.com" rel="noopener ugc nofollow" target="_blank"> Max/MSP </a>。它基本上可以让你接受任何输入，对它做一些很酷的事情，并以任何格式输出给任何设备、软件或硬件。</p><p id="6279" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">我发现自己做的一个常见任务是将MIDI控制器值(0–127)缩放到DMX值(0–255)。MIDI代表“乐器数字接口”我用MIDI把USB MIDI控制器插到我的MacBook上，控制灯光和各种东西。DMX是…</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mt"><img src="../Images/725d74b2bad5764298e6fd4c3f493b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXR6YAfuZ5YV-uzRC9PxgQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">DMX, American rapper</figcaption></figure><p id="96ee" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">…DMX也代表“数字多路复用”，是一种串行通信协议，用于控制戏剧制作中的照明设备和调光器。</p><p id="2e81" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">以下是Max中缩放对象的文档:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mu"><img src="../Images/4a6b23444b8f18c9a65c3ba977e3e2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZYUp5BuvJnQpY3WDL-l-w.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">scale object documentation</figcaption></figure><h1 id="863a" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">回过神来</h1><p id="b046" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我发现了一个很棒的UI组件库，用于为色调选择色调，哈。我使用了<a class="ae lg" href="https://casesandberg.github.io/react-color/" rel="noopener ugc nofollow" target="_blank"> React Color </a>的<code class="fe lm ln lo lp b">&lt;HuePicker /&gt;</code>组件，但是很快就遇到了范围不匹配的问题。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/927a9595be323f3920e724f46f561c16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*g0fkcC9gvDqd-F46DbSXQQ.jpeg"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">HuePicker component</figcaption></figure><p id="1f51" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated"><code class="fe lm ln lo lp b">HuePicker</code>期望一个从<code class="fe lm ln lo lp b">0</code>到<code class="fe lm ln lo lp b">360</code>的范围，因为色调通常在一个圆上直观地表示。在这个实现中，红色既是<code class="fe lm ln lo lp b">0</code>又是<code class="fe lm ln lo lp b">360</code>，以完成环绕圆圈。有趣的是，飞利浦的色调值在<code class="fe lm ln lo lp b">0</code>到<code class="fe lm ln lo lp b">65535</code>的范围内。</p><p id="14f5" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">因此，我需要一种基于<code class="fe lm ln lo lp b">inputMin</code>、<code class="fe lm ln lo lp b">inputMax</code>和<code class="fe lm ln lo lp b">outputMin</code>、<code class="fe lm ln lo lp b">outputMax</code>将输入缩放为输出的方法。下面是我使用的实现:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mw"><img src="../Images/a19835a4d1365123120a07218d36a996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dza0dqnRVJmylnqt112UzA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">scaling function</figcaption></figure><p id="539c" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">这适用于从<code class="fe lm ln lo lp b">[0, 360]</code>到<code class="fe lm ln lo lp b">[0, 65535]</code>的缩放，但我在这里使用的是受控组件，还需要以另一种方式向下缩放:<code class="fe lm ln lo lp b">[0, 65535]</code>到<code class="fe lm ln lo lp b">[0, 360]</code>。我对它进行了重构，以接受一个配置参数，使这个函数更加动态。这是我想到的:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mx"><img src="../Images/feb427f6aae561d4a430bf9098235c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*srK5jQwtXoe57iWiINBjCA.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">refactored scaling function</figcaption></figure><p id="94c8" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">这是我做的<code class="fe lm ln lo lp b">ColorPicker</code>组件。我在第8行和第13行调用<code class="fe lm ln lo lp b">scale()</code></p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi my"><img src="../Images/25b450069279b054a3f0fa2a3d54eec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qHDbqyYT7EYd2YhXW3Xfg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">scaling function in use</figcaption></figure><h1 id="6540" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">后续步骤</h1><p id="d804" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">接下来，我将从颜色选择器UI的线性表示转移到三维表示来处理其他属性:亮度和饱和度。</p></div></div>    
</body>
</html>
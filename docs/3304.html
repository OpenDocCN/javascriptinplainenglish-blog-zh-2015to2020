<html>
<head>
<title>How to use Next.js to create a Static Site in the JAMstack era</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JAMstack时代如何使用Next.js创建静态站点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-next-js-to-create-a-static-site-in-the-jamstack-era-64b0505d85ab?source=collection_archive---------5-----------------------#2020-09-17">https://javascript.plainenglish.io/how-to-use-next-js-to-create-a-static-site-in-the-jamstack-era-64b0505d85ab?source=collection_archive---------5-----------------------#2020-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/98e645c345cb7facc9aa4594b1d7bd24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6-2o0we7Vmi_Pi-8"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@alexacea?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexandru Acea</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3c84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JAMstack (JavaScript-API-Markup)运动让我们重新思考如何建立网站。</p><p id="259d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最新的趋势是在构建时预渲染页面，而不是在客户端或服务器上渲染页面(通过服务器端渲染)，以获得极快的体验，这也是理所当然的。</p><h1 id="8be2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">什么可以是静态生成的网站？</h1><p id="9852" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一般来说，预渲染网站/页面(即使用静态站点生成)是一个好主意，因为它没有很多对每个用户都不同的动态内容。</p><p id="1261" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">动态内容是指必须从外部API(如第三方服务或数据库)获取的数据。</p><p id="ed33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">博客或作品集就是一个很好的例子。</p><p id="8ccd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，一个完全不需要外部数据获取的页面是完美的静态页面。</p><p id="8b5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当你添加一篇博客文章或添加一个新项目到你的投资组合中，你触发了一个项目的重建，所有的数据都是新的。但是仍然是静态的，并且通过内容传递网络提供超快的服务。</p><h1 id="076e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么是Next.js？</h1><p id="6b02" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">由于React是当前前端游戏中的王者，所以我们为什么要采用利用它的技术就很清楚了。</p><p id="7e75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用React进行SSG(静态站点生成)时，基本上有两种选择:Next.js或Gatsby.js</p><p id="37e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">两者都是这个领域令人敬畏的技术和先驱，然而，我个人会坚持使用Next.js，因为它似乎是受欢迎程度增长巨大的技术。它还与他们的父平台Vercel集成得非常好，因此部署只需点击一下鼠标。</p><h1 id="8f42" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">示例应用程序</h1><p id="f90f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让我们看看静态站点生成是如何工作的。</p><p id="98d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看的一个示例Next.js项目是一个博客，它充当我们的概念证明:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/9802fa1936ceb47ab308fe5ae5e96802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWczZ9gBtnYkyjVRrV-FKg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">We’ll build this!</figcaption></figure><p id="af79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该项目托管在<a class="ae kc" href="https://github.com/adamkss/Next.js-Static-Site-Generation-POC" rel="noopener ugc nofollow" target="_blank"> GitHub here </a>上。</p><p id="d801" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到这是一个只有一页的非常简单的应用程序。重要的部分在<code class="fe mk ml mm mn b">index.js</code>页。我们来看看<code class="fe mk ml mm mn b">getStaticProps</code>函数:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/6b4add781892799167488378190f20fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fz3wBx6APN5UQKnmUQK3DQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">getStaticProps function</figcaption></figure><p id="a3b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您使用<code class="fe mk ml mm mn b">npm run build</code>命令构建项目并将返回的道具注入React组件时，Next将运行这个函数。整洁！</p><p id="4578" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您运行该命令并查看输出，您将看到以下内容:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/8e142e134c2ccbb907669eec30a2fa20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgKAlgSOv64MWPdDoCOKnA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Search for our main root. Statically generated!</figcaption></figure><p id="2ba8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">白点意味着我们的根路径(<code class="fe mk ml mm mn b">/</code>)基本上是来自<code class="fe mk ml mm mn b">pages</code>文件夹的<code class="fe mk ml mm mn b">index.js</code>是静态生成的。太好了！🎉</p><p id="f8c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们通过运行<code class="fe mk ml mm mn b">npm run start</code>来开始服务这个构建，一个服务器将会启动，这对于本地测试来说是非常好的。然后，让我们在浏览器中导航到我们的本地实例，看看主<code class="fe mk ml mm mn b">GET</code>请求返回什么:</p><figure class="mg mh mi mj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/48eb5bc137c16db48c16d0715aead6c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OY6JsNejqs6xJndniaHcag.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The initial GET request returns the pre-rendered page</figcaption></figure><p id="c9f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是静态站点生成的实际应用！对服务器的初始请求返回我们的索引页面，该页面已经预先呈现了博客数据。客户端不需要任何工作。</p><h1 id="32b7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在数据变更的基础上重建</h1><p id="7c7d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">比方说，每当您添加一篇新的博客文章时，您都需要重新构建您的Next.js项目。</p><p id="be7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像Contentful和Netlify CMS这样的现代内容管理系统与Next.js + Vercel生态系统集成得非常好，并且整个过程可以是自动的。</p><h1 id="dc30" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用静态站点生成的优势</h1><p id="51e2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">以下是使用SSG的几个优点:</p><ol class=""><li id="d74d" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated">速度。您的静态项目可以托管在任何CDN上，这意味着它可以以超快的速度提供给客户。</li><li id="98ff" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">无需为服务器端渲染支付昂贵的服务器费用。</li><li id="f200" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">弹性和正常运行时间。将你的应用托管在CDN上意味着很少的停机时间。此外，假设你只在构建时获取数据，这意味着你从<em class="me">获取数据的服务器</em>可以关闭，而你的静态站点仍然存在，非常感谢。</li></ol><h1 id="f52b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最后</h1><p id="6c34" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">感谢您查看这篇文章。继续尝试静态站点生成吧！🔥</p><h2 id="249a" class="nf lc iq bd ld ng nh dn lh ni nj dp ll ko nk nl lp ks nm nn lt kw no np lx nq bi translated">简单英语的JavaScript</h2><p id="3e43" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
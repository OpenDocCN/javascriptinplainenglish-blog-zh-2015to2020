<html>
<head>
<title>Weird Parts of JavaScript — Math Operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript奇怪的部分——数学运算</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/weird-parts-of-javascript-math-operations-9dcdbb4f690?source=collection_archive---------8-----------------------#2020-05-06">https://javascript.plainenglish.io/weird-parts-of-javascript-math-operations-9dcdbb4f690?source=collection_archive---------8-----------------------#2020-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/148e798bcce1e7c653278a8f97c61d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F5sb4M3XWQXeCzbe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@crissyjarvis?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Crissy Jarvis</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f7ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种编程语言，由于它的过去，它有很多奇怪的行为。它未经询问就对我们正在做的事情做了许多假设。</p><p id="5aac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看JavaScript数学运算中奇怪的部分，这样我们就不会陷入导致错误的陷阱。</p><h1 id="70b3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">undefined</code>和<code class="fe lz ma mb mc b">Number Function</code></h1><p id="7027" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">JavaScript <code class="fe lz ma mb mc b">Number</code>函数用于将任何东西转换成数字。</p><p id="24e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不向<code class="fe lz ma mb mc b">Number</code>函数传递任何东西，它将返回数字0。然而，如果我们传入<code class="fe lz ma mb mc b">undefined</code>，那么它将返回<code class="fe lz ma mb mc b">NaN</code>。</p><p id="3b6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe lz ma mb mc b">Number</code>的时候要小心这种边缘情况。</p><p id="aadf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有参数传入函数，那么它假设参数<code class="fe lz ma mb mc b">value</code>是<code class="fe lz ma mb mc b">+0</code>。否则，参数将被调用<code class="fe lz ma mb mc b">ToNumber(value)</code>。</p><p id="8fc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果参数是<code class="fe lz ma mb mc b">undefined</code>，那么就会调用<code class="fe lz ma mb mc b">ToNumber(undefined)</code>，返回<code class="fe lz ma mb mc b">NaN</code>。</p><h1 id="24d4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">parseInt</code></h1><p id="7a8b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">parseInt</code>用于通过将其参数解析为整数来将某物转换为数字。</p><p id="34cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它接受任何值并试图返回一个数字。第一个参数是我们要转换成数字的内容，第二个参数是基数，它是数字的基数。例如，2是二进制，10是十进制，16是十六进制。</p><p id="b86e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基数可以是2到36。否则，它将返回<code class="fe lz ma mb mc b">NaN</code>。这是因为我们数中的数字集合是由数字0到9和字母a到z组成的。</p><p id="e294" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有基数2，那么数字是0到1。如果我们以11为基数，那么我们有0到9和字母“a”作为可能的数字。</p><p id="fc43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们以12为基数，那么我们有0到9和字母“a”和“b”作为可能的数字。</p><p id="93cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">parseInt</code>会根据基数将任何有效数字的字符转换成数字。</p><p id="942c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写类似于<code class="fe lz ma mb mc b">parseInt('abc', 13)</code>的东西，我们得到1845，因为所有的数字都被转换成它们的13进制等价物。</p><p id="3738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还会得到类似于<code class="fe lz ma mb mc b">parseInt(null, 24);</code>返回23的结果，因为基数为24，<code class="fe lz ma mb mc b">n</code>是第14个字母，是字符集中的最后一个数字。由于“u”在基数为23的数字系统中不是有效的数字，它将在<code class="fe lz ma mb mc b">n</code>处停止。</p><p id="950f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe lz ma mb mc b">null</code>是23，因为它被转换为<code class="fe lz ma mb mc b">'null'</code>，然后试图将‘n’转换为一个数字并停止，所以我们得到23。</p><p id="f6d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们必须小心地将分数转换成数字。例如，<code class="fe lz ma mb mc b">parseInt</code>将通过删除小数点后的所有内容来截断数字。</p><p id="c92f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有下面的表达式:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="99c9" class="mq lc iq mc b gy mr ms l mt mu">parseInt(1 / 22222222);</span></pre><p id="e7d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到4，因为<code class="fe lz ma mb mc b">1 / 22222222</code>返回<code class="fe lz ma mb mc b">4.5000000450000004e-8</code>，然后它被转换为4，因为小数点后的所有内容都被截断。</p><h1 id="a4ad" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用<code class="fe lz ma mb mc b">true</code>和<code class="fe lz ma mb mc b">false</code>进行数学运算</h1><p id="612e" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果对<code class="fe lz ma mb mc b">true</code>和<code class="fe lz ma mb mc b">false</code>应用各种运算符或函数，它们将被转换为数字。</p><p id="f8e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们调用<code class="fe lz ma mb mc b">Number(true);</code>，它返回1，因为它是真的，所以它被转换为1，因为它是真的。</p><p id="fb0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，如果我们使用一元加号将<code class="fe lz ma mb mc b">true</code>转换为数字，我们也将1，因为除了<code class="fe lz ma mb mc b">true</code>、<code class="fe lz ma mb mc b">false</code>和<code class="fe lz ma mb mc b">null</code>之外，它只转换数字和浮点数的字符串表示。</p><p id="0f2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，它将返回<code class="fe lz ma mb mc b">NaN</code>。这意味着<code class="fe lz ma mb mc b">true</code>由于其真实性也被转换为1。</p><p id="86ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，<code class="fe lz ma mb mc b">false</code>将与两者一起转换为0。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/3986898a898114caf809b2aea32fe03d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FyqUWtNl5IammZ2o"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@benji3pr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Benjamin Lizardo</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ed8c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">0.1 + 0.2</code></h1><p id="8f30" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">在JavaScript中，所有的数字都是浮点数，所以当我们编写像<code class="fe lz ma mb mc b">0.1 + 0.2</code>这样的表达式时，它会返回一些像<code class="fe lz ma mb mc b">0.30000000000000004</code>这样我们意想不到的数字。</p><p id="1368" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0.1和0.2接近其真实值。近似值0.2大于其有理等效值，但最接近的近似值0.3小于有理数。</p><p id="d43e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们最后得到的是0.1和0.2之和，比有理数0.3略大，因为0.2的近似值在近似时略大。</p><h1 id="2781" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0a22" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">当用<code class="fe lz ma mb mc b">parseInt</code>和<code class="fe lz ma mb mc b">Number</code>转换数字时，我们必须小心。他们都有意想不到的边缘情况。</p><p id="599f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尝试根据基数转换任何可能包含有效数字的字符串，所以我们应该确保我们的字符串实际上是数字。</p><p id="ed3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于<code class="fe lz ma mb mc b">Number</code>函数，如果我们传入<code class="fe lz ma mb mc b">undefined</code>，我们得到<code class="fe lz ma mb mc b">NaN</code>，因为它会调用内部<code class="fe lz ma mb mc b">ToNumber</code>函数，试图将其转换成一个数字。</p><p id="3eba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">true</code>和<code class="fe lz ma mb mc b">false</code>将分别用<code class="fe lz ma mb mc b">Number</code>和一元<code class="fe lz ma mb mc b">+</code>运算符转换为1和0。</p><h2 id="1de6" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated"><strong class="ak">简单英语注释</strong></h2><p id="c16c" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一句话来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"> <strong class="kf ir"> JavaScript简单明了</strong> </a>、<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener">、<strong class="kf ir"> AI简单明了</strong>、</a>、<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener">、UX简单明了、T21简单明了</a><a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener">、<strong class="kf ir"> Python简单明了</strong>、</a>、<strong class="kf ir">、</strong>——谢谢你们，继续学习吧！</p><p id="0932" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们一直对帮助推广好的内容感兴趣。如果您有任何想提交给我们的出版物的文章，请发邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>并附上您的Medium用户名和您感兴趣的文章，我们会回复您的！</p></div></div>    
</body>
</html>
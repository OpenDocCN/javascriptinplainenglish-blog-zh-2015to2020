<html>
<head>
<title>The Game of Life Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript的生活游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-game-of-life-using-javascript-fc1aaec8274f?source=collection_archive---------0-----------------------#2020-02-11">https://javascript.plainenglish.io/the-game-of-life-using-javascript-fc1aaec8274f?source=collection_archive---------0-----------------------#2020-02-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3dc54a6f9b7137f1fe2ac4f1b8f0265d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iS62elqqhctieQppeUylQA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@kasturiroy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kasturi Roy</a> on <a class="ae jd" href="https://unsplash.com/s/photos/villages?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="50b7" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">探索细胞自动机和核心JavaScript</h2></div><p id="152f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" rel="noopener ugc nofollow" target="_blank">生命的游戏</a>最初是为了研究<a class="ae jd" href="https://en.wikipedia.org/wiki/Cellular_automaton" rel="noopener ugc nofollow" target="_blank">细胞自动机</a>而设计<a class="ae jd" href="https://en.wikipedia.org/wiki/John_Horton_Conway" rel="noopener ugc nofollow" target="_blank">约翰康威</a>。</p><blockquote class="lr"><p id="f88c" class="ls lt jg bd lu lv lw lx ly lz ma lq dk translated">我喜欢用我所学的每一种语言编写这个程序，并且在教授编程时总是把它作为教学工具；因为它使用了变量、数组、循环、条件、函数等。</p><p id="104b" class="ls lt jg bd lu lv lw lx ly lz ma lq dk translated">我们的目标是创建一个使用大量核心JavaScript的有趣应用程序。</p></blockquote><h1 id="89bf" class="mb mc jg bd md me mf mg mh mi mj mk ml km mm kn mn kp mo kq mp ks mq kt mr ms bi translated">游戏的前提</h1><p id="5796" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">一个人通过创建“居民”的初始配置并观察他们如何通过“世代”的自我复制进化来与游戏互动。从一些“活”和“死”的应用规则。</p><blockquote class="my mz na"><p id="c0cc" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">上面的初始配置是粗体的，因为这是用户唯一可以做的“播放”。然后他们坐下来，看着进化展开。</p></blockquote><h1 id="0965" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">最终产品</h1><blockquote class="my mz na"><p id="5351" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated"><strong class="kx jh"> <em class="jg">如果您想预览我们将要构建的内容，可以在</em> </strong> <a class="ae jd" href="http://www.nusoftva.com/gol/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh"> <em class="jg">这里查看并播放最终的应用程序。</em> </strong></a></p></blockquote><p id="1ed9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我知道您的时间很宝贵，这篇文章可能会很长。虽然我鼓励您继续编写代码，但是如果有必要的话，可以复制和粘贴代码，并对其进行研究。</p><p id="0531" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完整的JavaScript代码也在文章末尾。</p><h1 id="14f3" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">规则</h1><p id="48ab" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">生活游戏的规则很简单。我们首先在一个“世界”中填充尽可能多的“活”细胞，这是我们选择的初始配置。然后根据下面的规则，我们看到随着一代代的过去，我们的人口在增长、变化和消亡。</p><ul class=""><li id="973e" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">任何少于两个活邻居的活细胞都会死亡，似乎是由人口不足引起的。</li><li id="7fca" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">任何有两个或三个活邻居的活细胞都可以存活到下一代。</li><li id="1aed" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">任何有三个以上活邻居的活细胞都会死亡，好像是因为过度拥挤。</li><li id="5f30" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">任何一个死细胞，只要有三个活的邻居，就会变成活细胞，就像通过繁殖一样。</li></ul><p id="0492" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用二维数组来跟踪当前代和下一代，下一代是在应用规则后创建的。</p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="7994" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用一个表格来构建一个网格，用于显示当前这一代。这是玩家的视觉效果。</p><figure class="oe of og oh gt is gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ef4d55cee4b63a24bab18c533a3cceaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*McSN-vyH1W5C_t6fUKnwyg.jpeg"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Visual Table. User has set some cells alive</figcaption></figure></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><h1 id="8e27" class="mb mc jg bd md me oi mg mh mi oj mk ml km ok kn mn kp ol kq mp ks om kt mr ms bi translated">我们开始吧！</h1><p id="6cc6" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">我将使用Visual Studio代码，但任何可以创建HTML、CSS和JavaScript的编辑器都可以。</p><h2 id="847a" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">设置</h2><ol class=""><li id="cd55" class="ni nj jg kx b ky mt lb mu le oz li pa lm pb lq pc no np nq bi translated">创建一个名为<strong class="kx jh">index.html的HTML页面。</strong></li></ol><p id="4594" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.创建一个名为<strong class="kx jh"> gol.js </strong>的JavaScript文件，其中包含我们需要的所有JavaScript代码。</p><p id="8640" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.创建一个名为<strong class="kx jh"> gol.css </strong>的样式表文件，它将包含我们需要的所有样式。</p><h2 id="59af" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">超文本标记语言</h2><p id="09df" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">创建一个名为index.html<strong class="kx jh">的文件</strong></p><ul class=""><li id="13a8" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">将<strong class="kx jh">脚本引用</strong>添加到我们的gol.js中。</li><li id="4d0a" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">在头部添加<strong class="kx jh">样式表引用</strong>。</li></ul><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="3392" class="on mc jg pe b gy pi pj l pk pl">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=<br/>    , initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    &lt;title&gt;Game of Life&lt;/title&gt;<br/>    &lt;!-- Our Style Sheet --&gt;<br/>  <strong class="pe jh">  &lt;link rel="stylesheet" href='gol.css'&gt;</strong></span><span id="64c8" class="on mc jg pe b gy pm pj l pk pl">&lt;/head&gt;<br/>&lt;body&gt;</span><span id="5fa2" class="on mc jg pe b gy pm pj l pk pl">&lt;!-- Our JavaScript --&gt;<br/>   <strong class="pe jh"> &lt;script src='gol.js'&gt;&lt;/script&gt;</strong><br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="6c7a" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">台阶</h1><h2 id="0e58" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">第一步——建造世界</h2><p id="db0f" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">首先，我们想建立我们的“世界”，世界网格，在那里我们的人口将兴旺(或不。)这将使用一个用JavaScript构建的HTML表来完成。这也是玩家的视觉感受。</p><p id="5e44" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们将添加一个<div>元素来包含<strong class="kx jh">index.html</strong>中的世界网格，然后构建HTML表并将其附加到div中。</div></p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="ed0e" class="on mc jg pe b gy pi pj l pk pl">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=<br/>    , initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    &lt;title&gt;Game of Life&lt;/title&gt;<br/>    &lt;!-- Our Style Sheet --&gt;<br/>    &lt;link rel="stylesheet" href='gol.css'&gt;</span><span id="f57a" class="on mc jg pe b gy pm pj l pk pl">&lt;/head&gt;<br/>&lt;body&gt;<br/>   <strong class="pe jh"> &lt;div id='world'&gt;</strong></span><span id="967c" class="on mc jg pe b gy pm pj l pk pl"><strong class="pe jh">    &lt;/div&gt;</strong></span><span id="69a9" class="on mc jg pe b gy pm pj l pk pl">&lt;!-- Our JavaScript --&gt;<br/>    &lt;script src='gol.js'&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="33c8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将为我们的世界网格编写JavaScript。</p><blockquote class="my mz na"><p id="9baa" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">世界将是一个HTML表格。每个单元可以包含一个居民。一个细胞是有人居住(活着)还是无人居住(死去)是初始配置的一部分，也是由规则决定的进化过程的一部分。</p></blockquote><p id="4397" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nb">注:在生命的原始游戏中，世界应该是无限的。抱歉。不是我们的。</em></p><p id="d8c9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要一些变量来存储表中需要多少行和多少列。</p><p id="512d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们将创建一个函数，<strong class="kx jh"> createWorld() </strong>，它将逐行、逐列、逐单元格地构建表格。</p><p id="2488" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们将把它附加到我们的div中。我们将从window.onload调用这个函数。</p><p id="e8e0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">将以下内容添加到gol.js中</strong></p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="e0d6" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="1193" class="on mc jg pe b gy pm pj l pk pl">function createWorld() {<br/>    let world = document.querySelector('#world');<br/>    <br/>    let tbl = document.createElement('table');<br/>    tbl.setAttribute('id','worldgrid');</span><span id="2774" class="on mc jg pe b gy pm pj l pk pl">for (let i = 0; i &lt; rows; i++) {<br/>        let tr = document.createElement('tr');<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            let cell = document.createElement('td');<br/>                 <br/>            tr.appendChild(cell);<br/>        }<br/>        tbl.appendChild(tr);<br/>    }<br/>    world.appendChild(tbl);<br/>}</span><span id="f343" class="on mc jg pe b gy pm pj l pk pl">window.onload=()=&gt;{<br/>    createWorld();<br/>}</span></pre><p id="203e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们给我们的桌子添加一些样式之前，你不会看到太多，所以</p><p id="eb00" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">将以下内容添加到gol.css中</strong></p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="2d9e" class="on mc jg pe b gy pi pj l pk pl">#world {<br/>    padding-bottom: 10px;<br/>}</span><span id="eab9" class="on mc jg pe b gy pm pj l pk pl">table {<br/>    background-color: whitesmoke;<br/>}</span><span id="ed4e" class="on mc jg pe b gy pm pj l pk pl">td {<br/>    border: 1px solid darkgray;<br/>    width: 10px;<br/>    height: 10px;<br/>}</span></pre><h2 id="201e" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">试运转</h2><p id="39e8" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">打开index.html，你会看到你的美丽新世界正等着被开发！</p><figure class="oe of og oh gt is gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/835b819380460064200da665dca76da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*64xc-Jn87Yk1p7Ar2ee_0A.jpeg"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Our brave new world!</figcaption></figure><h2 id="bba4" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">第二步——细胞</h2><ul class=""><li id="37de" class="ni nj jg kx b ky mt lb mu le oz li pa lm pb lq nn no np nq bi translated">最初，所有细胞都会死亡。</li><li id="156e" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">当玩家在初始配置期间点击一个单元时，在开始生成过程之前，我们希望单元在存活(蓝色)或死亡(透明)之间切换。)</li><li id="40bf" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">之后，我们希望能够处理代，即应用规则。</li></ul><p id="9d7c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">所以我们需要给表格单元格附加一些属性。</strong></p><ul class=""><li id="45e7" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">每个单元格都需要添加一个id和一个属性，这样我们就可以跟踪它们。我们将在i_j形式中使用I和j，因此左上角将是0_0，依此类推。</li><li id="bd27" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">每个单元格需要添加一个<em class="nb">死</em>的<strong class="kx jh">类</strong>。在初始配置或进化过程中，此类可以更改为<em class="nb">活动</em>。</li></ul><p id="4a67" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将以下属性添加到单元格中(粗体)，</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="38bd" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="ba87" class="on mc jg pe b gy pm pj l pk pl">function createWorld() {<br/>    let world = document.querySelector('#world');<br/>    <br/>    let tbl = document.createElement('table');<br/>    tbl.setAttribute('id','worldgrid');</span><span id="1bc9" class="on mc jg pe b gy pm pj l pk pl">for (let i = 0; i &lt; rows; i++) {<br/>        let tr = document.createElement('tr');<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            let cell = document.createElement('td');<br/>           <strong class="pe jh"> cell.setAttribute('id', i + '_' + j);<br/>            cell.setAttribute('class', 'dead');</strong><br/>                     <br/>            tr.appendChild(cell);<br/>        }<br/>        tbl.appendChild(tr);<br/>    }<br/>    world.appendChild(tbl);<br/>}</span><span id="4b75" class="on mc jg pe b gy pm pj l pk pl">window.onload=()=&gt;{<br/>    createWorld();<br/>}</span></pre><h2 id="7ed9" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">让细胞活起来</h2><p id="f54d" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">为了在活单元和死单元之间切换，我们将为每个单元附加一个点击事件监听器。这是为玩家设置的初始配置。</p><p id="6b50" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以后，我们将需要跟踪当前一代以及应用规则后创建的下一代。为此，我们需要两个二维数组。<em class="nb">一个给现在，一个给下一代。</em></p><blockquote class="my mz na"><p id="f9b7" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated"><strong class="kx jh">注意</strong> : <a class="ae jd" href="https://medium.com/javascript-in-plain-english/javascript-multi-dimensional-arrays-7186e8edd03" rel="noopener"> JavaScript不直接支持二维数组</a>。我们必须把它们构造成一个数组。更多关于二维阵列的信息可以在<a class="ae jd" href="https://medium.com/javascript-in-plain-english/javascript-multi-dimensional-arrays-7186e8edd03" rel="noopener">这里</a>找到。</p></blockquote><p id="a547" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下监听器和<strong class="kx jh"> cellClick() </strong>功能。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="f210" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="2d4a" class="on mc jg pe b gy pm pj l pk pl">function createWorld() {<br/>    let world = document.querySelector('#world');<br/>    <br/>    let tbl = document.createElement('table');<br/>    tbl.setAttribute('id','worldgrid');</span><span id="df6b" class="on mc jg pe b gy pm pj l pk pl">for (let i = 0; i &lt; rows; i++) {<br/>        let tr = document.createElement('tr');<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            let cell = document.createElement('td');<br/>            cell.setAttribute('id', i + '_' + j);<br/>            cell.setAttribute('class', 'dead');<br/>          <strong class="pe jh">  cell.addEventListener('click',cellClick);</strong>            <br/>            tr.appendChild(cell);<br/>        }<br/>        tbl.appendChild(tr);<br/>    }<br/>    world.appendChild(tbl);<br/>}</span><span id="98d2" class="on mc jg pe b gy pm pj l pk pl"><strong class="pe jh">function cellClick() {<br/>    let loc = this.id.split("_");<br/>    let row = Number(loc[0]);//Get i<br/>    let col = Number(loc[1]);//Get j</strong></span><span id="c834" class="on mc jg pe b gy pm pj l pk pl"><strong class="pe jh">// Toggle cell alive or dead<br/>    if (this.className==='alive'){<br/>        this.setAttribute('class', 'dead');<br/>       <br/>    }else{<br/>        this.setAttribute('class', 'alive');<br/>       <br/>    }</strong></span><span id="ff54" class="on mc jg pe b gy pm pj l pk pl"><strong class="pe jh">}</strong></span><span id="8ced" class="on mc jg pe b gy pm pj l pk pl">window.onload=()=&gt;{<br/>    createWorld();<br/>}</span></pre><p id="bdb0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">将以下内容添加到gol.css </strong></p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="e5d1" class="on mc jg pe b gy pi pj l pk pl">td.dead {<br/>    background-color: transparent;<br/>}</span><span id="021a" class="on mc jg pe b gy pm pj l pk pl">td.alive {<br/>    background-color:blue;<br/>}</span></pre><h2 id="6b58" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">试运转</h2><p id="7a3a" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">打开<strong class="kx jh">index.html</strong>，你应该可以通过点击单元格在活的(蓝色)和死的(透明)之间“切换”。这就是玩家如何创建居民的初始配置。</p><figure class="oe of og oh gt is gh gi paragraph-image"><div class="gh gi po"><img src="../Images/788abbfff70663439754f51ee9b9b414.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*9e8Qx0jlvAuVBfqtqbp7RQ.jpeg"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Click to toggle alive or dead</figcaption></figure><blockquote class="my mz na"><p id="0f44" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">由于代码量越来越长，请随意将我们创建的函数放在。js文件。</p></blockquote><h2 id="f6c6" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">设置当前和下一代阵列</h2><p id="d7cf" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">当我们进行初始点击时，我们正在设置当前(开始)生成。</p><p id="d092" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们开始处理后代之后，我们将需要应用这些规则来创建下一代。<em class="nb">随着世界的发展，下一代将成为当代，以此类推。</em></p><p id="8e32" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要设置<strong class="kx jh">二维</strong>数组来存储当前一代和下一代(应用“生”和“死”的规则后计算)。)</p><p id="cbb6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数组声明将根据行数建立一维数组。然后，我们将在每个数组位置创建一个数组，以创建所需的二维数组。</p><blockquote class="my mz na"><p id="27ee" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">数组需要匹配每个表格单元格的状态，无论是活的还是死的。我们将使用数组值1表示存活，0表示死亡。</p></blockquote><p id="625e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们最初将每个数组位置设置为0(死)，以匹配表。</p><p id="347f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下数组声明和函数<strong class="kx jh"> createGenArrays()，</strong>创建数组<strong class="kx jh"> </strong>和<strong class="kx jh"> initGenArrays()，</strong>将数组值设置为0(死)。</p><p id="5108" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我把我的代码放在<strong class="kx jh"> </strong>行和列声明的后面和<strong class="kx jh"> createWorld() </strong>函数的上面。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="362a" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="e6f2" class="on mc jg pe b gy pm pj l pk pl">// Need 2D arrays. These are 1D<br/>let currGen =[rows];<br/>let nextGen =[rows];</span><span id="4037" class="on mc jg pe b gy pm pj l pk pl">// Creates two-dimensional arrays<br/>function createGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        currGen[i] = new Array(cols);<br/>        nextGen[i] = new Array(cols);<br/>    }<br/>}</span><span id="de4a" class="on mc jg pe b gy pm pj l pk pl">function initGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            currGen[i][j] = 0;<br/>            nextGen[i][j] = 0;<br/>        }<br/>    }<br/>}</span></pre><p id="b2d1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将把<strong class="kx jh"> createGenArrays() </strong>和<strong class="kx jh"> initGenArrays() </strong>函数调用添加到我们的<strong class="kx jh"> onload </strong>和<em class="nb">中，添加两行</em>来引出<strong class="kx jh"> cellClick() </strong>函数。</p><p id="6d05" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您的代码应该如下所示。</p><ul class=""><li id="e0da" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">请注意当前对cellClick()的添加。</li><li id="deff" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">请注意onlaod的新增功能。</li></ul><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="a622" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="9e2e" class="on mc jg pe b gy pm pj l pk pl">// Need 2D arrays. These are 1D<br/>let currGen =[rows];<br/>let nextGen =[rows];</span><span id="9a26" class="on mc jg pe b gy pm pj l pk pl">// Creates two-dimensional arrays<br/>function createGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        currGen[i] = new Array(cols);<br/>        nextGen[i] = new Array(cols);<br/>    }<br/>}<br/>function initGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            currGen[i][j] = 0;<br/>            nextGen[i][j] = 0;<br/>        }<br/>    }<br/>}</span><span id="def2" class="on mc jg pe b gy pm pj l pk pl">function createWorld() {<br/>    let world = document.querySelector('#world');<br/>    <br/>    let tbl = document.createElement('table');<br/>    tbl.setAttribute('id','worldgrid');</span><span id="cb0f" class="on mc jg pe b gy pm pj l pk pl">for (let i = 0; i &lt; rows; i++) {<br/>        let tr = document.createElement('tr');<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            let cell = document.createElement('td');<br/>            cell.setAttribute('id', i + '_' + j);<br/>            cell.setAttribute('class', 'dead');<br/>            cell.addEventListener('click',cellClick);            <br/>            tr.appendChild(cell);<br/>        }<br/>        tbl.appendChild(tr);<br/>    }<br/>    world.appendChild(tbl);<br/>}</span><span id="4564" class="on mc jg pe b gy pm pj l pk pl">function cellClick() {<br/>    let loc = this.id.split("_");<br/>    let row = Number(loc[0]);<br/>    let col = Number(loc[1]);<br/>// Toggle cell alive or dead<br/>    if (this.className==='alive'){<br/>        this.setAttribute('class', 'dead');<br/>       <strong class="pe jh"> currGen[row][col] = 0;</strong><br/>    }else{<br/>        this.setAttribute('class', 'alive');<br/>       <strong class="pe jh"> currGen[row][col] = 1;</strong><br/>    }<br/>}</span><span id="3dee" class="on mc jg pe b gy pm pj l pk pl">window.onload=()=&gt;{<br/>    createWorld();// The visual table<br/>    <strong class="pe jh">createGenArrays()</strong>;// current and next generations<br/>   <strong class="pe jh"> initGenArrays();</strong>//Set all array locations to 0=dead</span><span id="88cf" class="on mc jg pe b gy pm pj l pk pl">}</span></pre><h1 id="c78b" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">进化-计算邻居并应用规则</h1><p id="8096" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">我们现在正处于这样一个阶段，我们需要编写代码，通过应用规则和创建下一代来执行进化。</p><p id="c972" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要，</p><ul class=""><li id="f5fa" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">计算每个表格单元中处于活动状态的相邻单元/邻居。</li><li id="06c7" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">应用基于邻居计数的规则来创建下一代。</li><li id="5234" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">让新一代成为现在的一代。</li><li id="2665" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">创建显示当前(新)代的方式(更新世界表。)</li><li id="1c32" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">创建一个<strong class="kx jh">临时</strong>按钮来启动流程并执行层代更改。此按钮仅用于测试。</li></ul><p id="5ae4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nb">最终我们想要启动自动生成过程的按钮。</em></p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><blockquote class="my mz na"><p id="04a7" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">最初，为了测试，我们将只手动地从当前代到下一代。但是我们将使用一个循环来处理尽可能多的代。</p></blockquote></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><h2 id="f037" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">数邻居</h2><p id="6436" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">一个细胞是活的还是死的规则完全取决于给定细胞的邻居数量。</p><p id="3288" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们添加一个函数，<strong class="kx jh">getneighborhoodcount()</strong>，来计算给定单元的邻居数量。</p><p id="8e0b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，在另一个函数中，我们将遍历当前代中的单元格，使用<strong class="kx jh">getneighborhoodcount()<em class="nb">对邻居进行计数并应用规则，创建下一代</em> </strong>，将其存储在存储在nextGen数组中。</p><p id="4875" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们必须查看八个相邻的小区/邻居，</p><ul class=""><li id="966c" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">超过</li><li id="d7d5" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">左上角</li><li id="af2e" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">右上方</li><li id="3af4" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">左边的</li><li id="3248" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">对吧</li><li id="7360" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">左下角</li><li id="9609" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">右下角</li><li id="bbfb" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">底部</li></ul><blockquote class="my mz na"><p id="8311" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">当我们计算邻居时，我们必须确保我们没有在世界网格之外“越界”。为此，我们将始终确保在查看相邻单元格时，当前行和/或列不小于0。</p></blockquote><p id="60ac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以在任何地方添加以下函数。我把我的放在JavaScript的底部。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="e662" class="on mc jg pe b gy pi pj l pk pl">function getNeighborCount(row, col) {<br/>    let count = 0;<br/>    let nrow=Number(row);<br/>    let ncol=Number(col);<br/>    <br/>        // Make sure we are not at the first row<br/>        if (nrow - 1 &gt;= 0) {<br/>        // Check top neighbor<br/>        if (currGen[nrow - 1][ncol] == 1) <br/>            count++;<br/>    }<br/>        // Make sure we are not in the first cell<br/>        // Upper left corner<br/>        if (nrow - 1 &gt;= 0 &amp;&amp; ncol - 1 &gt;= 0) {<br/>        //Check upper left neighbor<br/>        if (currGen[nrow - 1][ncol - 1] == 1) <br/>            count++;<br/>    }</span><span id="b8b0" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the first row last column<br/>        // Upper right corner<br/>        if (nrow - 1 &gt;= 0 &amp;&amp; ncol + 1 &lt; cols) {<br/>        //Check upper right neighbor<br/>            if (currGen[nrow - 1][ncol + 1] == 1) <br/>                count++;<br/>        }</span><span id="78b8" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the first column<br/>    if (ncol - 1 &gt;= 0) {<br/>        //Check left neighbor<br/>        if (currGen[nrow][ncol - 1] == 1) <br/>            count++;<br/>    }<br/>    // Make sure we are not on the last column<br/>    if (ncol + 1 &lt; cols) {<br/>        //Check right neighbor<br/>        if (currGen[nrow][ncol + 1] == 1) <br/>            count++;<br/>    }</span><span id="e5bd" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the bottom left corner<br/>    if (nrow + 1 &lt; rows &amp;&amp; ncol - 1 &gt;= 0) {<br/>        //Check bottom left neighbor<br/>        if (currGen[nrow + 1][ncol - 1] == 1) <br/>            count++;<br/>    }</span><span id="30ae" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the bottom right<br/>    if (nrow + 1 &lt; rows &amp;&amp; ncol + 1 &lt; cols) {<br/>        //Check bottom right neighbor<br/>        if (currGen[nrow + 1][ncol + 1] == 1) <br/>            count++;<br/>    }<br/>    <br/>    <br/>        // Make sure we are not on the last row<br/>    if (nrow + 1 &lt; rows) {<br/>        //Check bottom neighbor<br/>        if (currGen[nrow + 1][ncol] == 1) <br/>            count++;<br/>    }<br/>    <br/>    <br/>    return count;<br/>}</span></pre><h2 id="2032" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">创造下一代</h2><p id="250f" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">现在我们将创建一个函数，<strong class="kx jh"> createNextGen() </strong>，该函数将遍历每个单元格，使用<strong class="kx jh">getneighborhoodcount()</strong>获取邻居计数，并使用该计数和规则来确定当前单元格是保持活动、变得活动、保持死亡还是死亡。</p><p id="3e7e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建以下函数，将其放在JavaScript中的任意位置。我把我的放在了<strong class="kx jh">getneighborhoodcount()之上。</strong></p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="bd97" class="on mc jg pe b gy pi pj l pk pl">function createNextGen() {<br/>    for (row in currGen) {<br/>        for (col in currGen[row]) {<br/>           <br/>            let neighbors = getNeighborCount(row, col);<br/>         <br/>            // Check the rules<br/>            // If Alive<br/>            if (currGen[row][col] == 1) {<br/>              <br/>                if (neighbors &lt; 2) {<br/>                    nextGen[row][col] = 0;<br/>                } else if (neighbors == 2 || neighbors == 3) {<br/>                    nextGen[row][col] = 1;<br/>                } else if (neighbors &gt; 3) {<br/>                    nextGen[row][col] = 0;<br/>                }<br/>            } else if (currGen[row][col] == 0) {<br/>                // If Dead or Empty<br/>            <br/>                if (neighbors == 3) {<br/>                    // Propogate the species<br/>                    nextGen[row][col] = 1;//Birth?<br/>                }<br/>            }<br/>        }<br/>    }<br/>    <br/>}</span></pre><p id="1ffd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">咻。坚持住！</p><h1 id="b6cc" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">更新世界</h1><p id="d0a4" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">既然我们已经计算了存储在nextGen数组中的下一代，我们需要用nextGen中的值更新currGen数组，并相应地更新我们的world表。</p><p id="58a3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还将创建一个临时按钮来运行测试。</p><p id="0361" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将添加一个函数，<strong class="kx jh"> updateCurrGen()，</strong>，该函数将获取nextGen数组值，并将它们放入CurrGen数组中。</p><p id="d2ce" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还将添加一个函数，<strong class="kx jh"> updateWorld() </strong>，它将更新我们世界的视觉显示。</p><p id="c8ee" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下函数。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="05b6" class="on mc jg pe b gy pi pj l pk pl">function updateCurrGen() {<br/>       <br/>        for (row in currGen) {<br/>            for (col in currGen[row]) {<br/>                // Update the current generation with<br/>                // the results of createNextGen function<br/>                currGen[row][col] = nextGen[row][col];<br/>                // Set nextGen back to empty<br/>                nextGen[row][col] = 0;<br/>            }<br/>        }<br/>     <br/>    }</span><span id="845c" class="on mc jg pe b gy pm pj l pk pl">function updateWorld() {<br/>        let cell='';<br/>        for (row in currGen) {<br/>            for (col in currGen[row]) {<br/>                cell = document.getElementById(row + '_' + col);<br/>                if (currGen[row][col] == 0) {<br/>                    cell.setAttribute('class', 'dead');<br/>                } else {<br/>                    cell.setAttribute('class', 'alive');<br/>                }<br/>            }<br/>        }<br/>    }</span></pre><h1 id="09ed" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">人工测试</h1><p id="803d" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">现在我们将创建一个简单的函数，<strong class="kx jh"> evolve() </strong>，它将从我们的临时按钮(待添加)中被调用。)</p><p id="e33e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下函数。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="7d12" class="on mc jg pe b gy pi pj l pk pl">function evolve(){<br/>      <br/>        createNextGen();//Apply the rules<br/>        updateCurrGen();//Set Current values from new generation<br/>        updateWorld();//Update the world view</span><span id="aeb0" class="on mc jg pe b gy pm pj l pk pl">}</span></pre><p id="6e20" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用临时按钮更新index.html的主体，如下所示。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="e0b7" class="on mc jg pe b gy pi pj l pk pl">&lt;body&gt;<br/>    &lt;div id='world'&gt;</span><span id="e96e" class="on mc jg pe b gy pm pj l pk pl">&lt;/div&gt;<br/><strong class="pe jh">&lt;div&gt;<br/>    &lt;input type='button' value='Evolve' onclick='evolve()'.&gt;<br/>&lt;/div&gt;</strong><br/>    &lt;!-- Our JavaScript --&gt;<br/>    &lt;script src='gol.js'&gt;&lt;/script&gt;<br/>&lt;/body&gt;</span></pre><p id="e424" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">试运行</strong></p><p id="bc2d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打开index.html的<strong class="kx jh">，点击一些细胞开始你的文明。然后根据需要经常点击进化按钮来观察它的进化。</strong></p><p id="d440" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是我的第一代、第一代、第二代和第十代。</p><figure class="oe of og oh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pp"><img src="../Images/bf354692ff05d899e2665c5fa7bc9839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJGs054zL-8_hyuqm9iLNw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Left to right: initial, first, second and tenth.</figcaption></figure><h1 id="b80c" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">添加一些播放器控件</h1><p id="ec4c" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">现在我们已经验证了它的工作，我们可以添加一些玩家控制。我们将增加用户的能力，</p><ul class=""><li id="2efb" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">开始繁殖过程——一代又一代，让它继续运行，不断进化。</li><li id="a0c9" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">停止复制过程。停止进化。</li><li id="7577" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">重置世界。</li></ul><blockquote class="my mz na"><p id="10a1" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">开始和停止将是同一个按钮。播放点击开始后，会变为停止。</p></blockquote><p id="2815" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">注意</strong>:即使所有的居民都死光了，玩家点击停止也很重要。无论如何，该过程都会运行。</p><p id="b6b2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">删除临时按钮，并将以下按钮添加到index.html的正文中。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="cef9" class="on mc jg pe b gy pi pj l pk pl">&lt;body&gt;<br/>    &lt;div id='world'&gt;</span><span id="9738" class="on mc jg pe b gy pm pj l pk pl">&lt;/div&gt;<br/>&lt;div&gt;<br/>       <br/> <strong class="pe jh">&lt;Input type='button' id='btnstartstop' value='Start Reproducing'/&gt;<br/> &lt;Input type='button' id='btnreset' value='Reset World'/&gt;<br/>   </strong>        <br/>      <br/>&lt;/div&gt;<br/>    &lt;!-- Our JavaScript --&gt;<br/>    &lt;script src='gol.js'&gt;&lt;/script&gt;<br/>&lt;/body&gt;</span></pre><figure class="oe of og oh gt is gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/10a4002998a2d48dfb8959259f1851b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*7KaYFfsj7rYz1boCn04d0A.jpeg"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Player Controls</figcaption></figure><h2 id="f484" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">开始按钮</h2><p id="352d" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">为了启动/停止工作，我们将需要一些变量。</p><ul class=""><li id="4b96" class="ni nj jg kx b ky kz lb lc le nk li nl lm nm lq nn no np nq bi translated">我们需要知道开始/停止按钮是否被点击过(知道它是处于开始还是停止状态。)</li><li id="14de" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">我们需要能够重复进化过程。</li><li id="7d77" class="ni nj jg kx b ky nr lb ns le nt li nu lm nv lq nn no np nq bi translated">我们需要控制进化的速度。</li></ul><p id="e8d8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在JavaScript的顶部添加以下内容。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="c37b" class="on mc jg pe b gy pi pj l pk pl">let started=false;// Set to true when use clicks start<br/>let timer;//To control evolutions<br/>let evolutionSpeed=1000;// One second between generations</span></pre><p id="7f15" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们需要一个函数来启动和停止进化过程。</p><blockquote class="my mz na"><p id="25b1" class="kv kw nb kx b ky kz kh la lb lc kk ld nc lf lg lh nd lj lk ll ne ln lo lp lq ij bi translated">如果我们处于开始状态，我们需要一个循环来运行，调用evolve()函数并使用计时器来控制进化的速度。</p></blockquote><p id="7819" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将创建一个函数，<strong class="kx jh"> startStopGol() </strong>并将一些代码添加到我们的<strong class="kx jh"> evolve() </strong>函数中。</p><p id="935f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下函数。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="0991" class="on mc jg pe b gy pi pj l pk pl">function startStopGol(){<br/>        let startstop=document.querySelector('#btnstartstop');<br/>       <br/>        if (!started) {<br/>           started = true;<br/>           startstop.value='Stop Reproducing';<br/>           evolve();<br/>         <br/>         } else {<br/>            started = false;<br/>            startstop.value='Start Reproducing';<br/>            clearTimeout(timer); <br/>        }<br/>    }</span></pre><p id="e0d7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意这调用了<strong class="kx jh"> evolve() </strong>函数。一旦进入evolve()函数，我们需要继续进化，直到用户点击Stop。</p><p id="4571" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">修改evolve()如下:</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="2624" class="on mc jg pe b gy pi pj l pk pl">function evolve(){<br/>      <br/>        createNextGen();//Apply the rules<br/>        updateCurrGen();//Set Current values from new generation<br/>        updateWorld();//Update the world view</span><span id="3862" class="on mc jg pe b gy pm pj l pk pl">        <strong class="pe jh">if (started) {<br/>            timer = setTimeout(evolve, evolutionSpeed);<br/>        }</strong></span><span id="7b9e" class="on mc jg pe b gy pm pj l pk pl">}</span></pre><h2 id="799a" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">重置按钮</h2><p id="6230" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">要重置，我们只需重新加载页面。那会让一切重新开始。</p><p id="cdca" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">添加以下函数。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="5b60" class="on mc jg pe b gy pi pj l pk pl">function resetWorld() {<br/>        location.reload();<br/>    }</span></pre><p id="30dc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后一步是将<strong class="kx jh"> startStopGol() </strong>和<strong class="kx jh"> resetWorld() </strong>函数附加到按钮上。</p><p id="2679" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，我们将采用传统方法，使用onclick 。我们还将添加一些说明。</p><p id="3e7b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">修改index.html的身体如下。</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="f860" class="on mc jg pe b gy pi pj l pk pl">&lt;h2&gt;Click on table cells to toggle the cells as alive or dead.&lt;/h2&gt;<br/>&lt;h3&gt;Click the Start Reproducing button to Start and Stop&lt;/h3&gt;<br/>&lt;Input type='button' id='btnstartstop' value='Start Reproducing' <strong class="pe jh">onclick='startStopGol()</strong>;'/&gt;<br/>&lt;Input type='button' id='btnreset' value='Reset World' <strong class="pe jh">onclick='resetWorld();</strong>'/&gt;</span></pre><h2 id="02f4" class="on mc jg bd md oo op dn mh oq or dp ml le os ot mn li ou ov mp lm ow ox mr oy bi translated">搞定了。</h2><p id="73d1" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">你现在应该有一个完整的人生游戏了！</p><p id="30c4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">gol . js的所有代码都在文末。</strong></p><h1 id="00cf" class="mb mc jg bd md me mf mg mh mi mj mk ml km nf kn mn kp ng kq mp ks nh kt mr ms bi translated">结论</h1><p id="928e" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">生命的游戏是关于细胞自动机(T21)的，所以我鼓励你研究这个概念，玩游戏规则。看看人生游戏的一些变奏。</p><p id="bc68" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是这也是一个有趣的游戏，并且允许我们使用一些很棒的JavaScript。我也鼓励您尝试应用程序并改进代码。</p><p id="1f00" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">感谢您的阅读和快乐编码！</strong></p><p id="df9f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Medium上阅读所有你想要的文章，并通过成为Medium会员来帮助我继续写作，每月只需5美元。</p><div class="ip iq gp gr ir pr"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd jh gy z fp pw fr fs px fu fw jf bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qa l"><div class="qb l qc qd qe qa qf ix pr"/></div></div></a></div><p id="c0f3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可能会感兴趣。</p><div class="ip iq gp gr ir pr"><a href="https://medium.com/javascript-in-plain-english/javascript-multi-dimensional-arrays-7186e8edd03" rel="noopener follow" target="_blank"><div class="ps ab fo"><div class="pt ab pu cl cj pv"><h2 class="bd jh gy z fp pw fr fs px fu fw jf bi translated">JavaScript多维数组</h2><div class="py l"><h3 class="bd b gy z fp pw fr fs px fu fw dk translated">真相大白了</h3></div><div class="pz l"><p class="bd b dl z fp pw fr fs px fu fw dk translated">medium.com</p></div></div><div class="qa l"><div class="qg l qc qd qe qa qf ix pr"/></div></div></a></div><p id="e6c9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">戈尔. js</p><pre class="oe of og oh gt pd pe pf pg aw ph bi"><span id="ca6a" class="on mc jg pe b gy pi pj l pk pl">const rows = 40;<br/>const cols = 40;</span><span id="ee5d" class="on mc jg pe b gy pm pj l pk pl">let started=false;// Set to true when use clicks start<br/>let timer;//To control evolutions<br/>let evolutionSpeed=1000;// One second between generations</span><span id="9c9c" class="on mc jg pe b gy pm pj l pk pl">// Need 2D arrays. These are 1D<br/>let currGen =[rows];<br/>let nextGen =[rows];</span><span id="63b0" class="on mc jg pe b gy pm pj l pk pl">// Creates two-dimensional arrays<br/>function createGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        currGen[i] = new Array(cols);<br/>        nextGen[i] = new Array(cols);<br/>      <br/>    }<br/>}<br/>function initGenArrays() {<br/>    for (let i = 0; i &lt; rows; i++) {<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            currGen[i][j] = 0;<br/>            nextGen[i][j] = 0;<br/>        }<br/>    }<br/>}</span><span id="57e7" class="on mc jg pe b gy pm pj l pk pl">function createWorld() {<br/>    let world = document.querySelector('#world');<br/>    <br/>    let tbl = document.createElement('table');<br/>    tbl.setAttribute('id','worldgrid');</span><span id="edb1" class="on mc jg pe b gy pm pj l pk pl">for (let i = 0; i &lt; rows; i++) {<br/>        let tr = document.createElement('tr');<br/>        for (let j = 0; j &lt; cols; j++) {<br/>            let cell = document.createElement('td');<br/>            cell.setAttribute('id', i + '_' + j);<br/>            cell.setAttribute('class', 'dead');<br/>            cell.addEventListener('click',cellClick);            <br/>            tr.appendChild(cell);<br/>        }<br/>        tbl.appendChild(tr);<br/>    }<br/>    world.appendChild(tbl);<br/>}</span><span id="c022" class="on mc jg pe b gy pm pj l pk pl">function cellClick() {<br/>    let loc = this.id.split("_");<br/>    let row = Number(loc[0]);<br/>    let col = Number(loc[1]);<br/>// Toggle cell alive or dead<br/>    if (this.className==='alive'){<br/>        this.setAttribute('class', 'dead');<br/>        currGen[row][col] = 0;<br/>    }else{<br/>        this.setAttribute('class', 'alive');<br/>        currGen[row][col] = 1;<br/>    }<br/>}</span><span id="f222" class="on mc jg pe b gy pm pj l pk pl">function createNextGen() {<br/>    for (row in currGen) {<br/>        for (col in currGen[row]) {<br/>           <br/>            let neighbors = getNeighborCount(row, col);<br/>         <br/>            // Check the rules<br/>            // If Alive<br/>            if (currGen[row][col] == 1) {<br/>              <br/>                if (neighbors &lt; 2) {<br/>                    nextGen[row][col] = 0;<br/>                } else if (neighbors == 2 || neighbors == 3) {<br/>                    nextGen[row][col] = 1;<br/>                } else if (neighbors &gt; 3) {<br/>                    nextGen[row][col] = 0;<br/>                }<br/>            } else if (currGen[row][col] == 0) {<br/>                // If Dead or Empty<br/>            <br/>                if (neighbors == 3) {<br/>                    // Propogate the species<br/>                    nextGen[row][col] = 1;// Birth?<br/>                }<br/>            }<br/>        }<br/>    }<br/>    <br/>}</span><span id="3c8a" class="on mc jg pe b gy pm pj l pk pl">function getNeighborCount(row, col) {<br/>    let count = 0;<br/>    let nrow=Number(row);<br/>    let ncol=Number(col);<br/>    <br/>        // Make sure we are not at the first row<br/>        if (nrow - 1 &gt;= 0) {<br/>        // Check top neighbor<br/>        if (currGen[nrow - 1][ncol] == 1) <br/>            count++;<br/>    }<br/>        // Make sure we are not in the first cell<br/>        // Upper left corner<br/>        if (nrow - 1 &gt;= 0 &amp;&amp; ncol - 1 &gt;= 0) {<br/>        //Check upper left neighbor<br/>        if (currGen[nrow - 1][ncol - 1] == 1) <br/>            count++;<br/>    }</span><span id="80d0" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the first row last column<br/>        // Upper right corner<br/>        if (nrow - 1 &gt;= 0 &amp;&amp; ncol + 1 &lt; cols) {<br/>        //Check upper right neighbor<br/>            if (currGen[nrow - 1][ncol + 1] == 1) <br/>                count++;<br/>        }</span><span id="370f" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the first column<br/>    if (ncol - 1 &gt;= 0) {<br/>        //Check left neighbor<br/>        if (currGen[nrow][ncol - 1] == 1) <br/>            count++;<br/>    }<br/>    // Make sure we are not on the last column<br/>    if (ncol + 1 &lt; cols) {<br/>        //Check right neighbor<br/>        if (currGen[nrow][ncol + 1] == 1) <br/>            count++;<br/>    }</span><span id="4509" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the bottom left corner<br/>    if (nrow + 1 &lt; rows &amp;&amp; ncol - 1 &gt;= 0) {<br/>        //Check bottom left neighbor<br/>        if (currGen[nrow + 1][ncol - 1] == 1) <br/>            count++;<br/>    }</span><span id="ed85" class="on mc jg pe b gy pm pj l pk pl">// Make sure we are not on the bottom right<br/>    if (nrow + 1 &lt; rows &amp;&amp; ncol + 1 &lt; cols) {<br/>        //Check bottom right neighbor<br/>        if (currGen[nrow + 1][ncol + 1] == 1) <br/>            count++;<br/>    }<br/>    <br/>    <br/>        // Make sure we are not on the last row<br/>    if (nrow + 1 &lt; rows) {<br/>        //Check bottom neighbor<br/>        if (currGen[nrow + 1][ncol] == 1) <br/>            count++;<br/>    }<br/>    <br/>    <br/>    return count;<br/>}<br/>    <br/>    function updateCurrGen() {<br/>       <br/>        for (row in currGen) {<br/>            for (col in currGen[row]) {<br/>                // Update the current generation with<br/>                // the results of createNextGen function<br/>                currGen[row][col] = nextGen[row][col];<br/>                // Set nextGen back to empty<br/>                nextGen[row][col] = 0;<br/>            }<br/>        }<br/>     <br/>    }</span><span id="c76d" class="on mc jg pe b gy pm pj l pk pl">function updateWorld() {<br/>        let cell='';<br/>        for (row in currGen) {<br/>            for (col in currGen[row]) {<br/>                cell = document.getElementById(row + '_' + col);<br/>                if (currGen[row][col] == 0) {<br/>                    cell.setAttribute('class', 'dead');<br/>                } else {<br/>                    cell.setAttribute('class', 'alive');<br/>                }<br/>            }<br/>        }<br/>    }</span><span id="dc90" class="on mc jg pe b gy pm pj l pk pl">function evolve(){<br/>      <br/>        createNextGen();<br/>        updateCurrGen();<br/>        updateWorld();</span><span id="5027" class="on mc jg pe b gy pm pj l pk pl">if (started) {<br/>            timer = setTimeout(evolve, evolutionSpeed);<br/>        }</span><span id="14e6" class="on mc jg pe b gy pm pj l pk pl">}</span><span id="a996" class="on mc jg pe b gy pm pj l pk pl">function startStopGol(){<br/>        let startstop=document.querySelector('#btnstartstop');<br/>       <br/>        if (!started) {<br/>           started = true;<br/>           startstop.value='Stop Reproducing';<br/>           evolve();<br/>         <br/>         } else {<br/>            started = false;<br/>            startstop.value='Start Reproducing';<br/>            clearTimeout(timer); <br/>        }<br/>    }<br/> <br/>  <br/>    function resetWorld() {<br/>        location.reload();<br/>  <br/>    }</span><span id="a7df" class="on mc jg pe b gy pm pj l pk pl">window.onload=()=&gt;{<br/>    createWorld();// The visual table<br/>    createGenArrays();// current and next generations<br/>    initGenArrays();//Set all array locations to 0=dead</span><span id="36c9" class="on mc jg pe b gy pm pj l pk pl">}</span></pre></div></div>    
</body>
</html>
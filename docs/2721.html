<html>
<head>
<title>What happens behind the scenes with Deno?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno的幕后发生了什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-happens-behind-the-scenes-with-deno-3cf111d8004c?source=collection_archive---------3-----------------------#2020-07-18">https://javascript.plainenglish.io/what-happens-behind-the-scenes-with-deno-3cf111d8004c?source=collection_archive---------3-----------------------#2020-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e05a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Deno = Rust + Tokio + V8</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/af795a7a73245022e0f14afe07b1b9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1xM-3S0N6NEGYF5HYa2RRg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The building blocks of Deno</figcaption></figure><p id="e462" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在JSConf 2018年的演示中，Ryan Dahl解释了他在开发Node时的遗憾，比如没有坚持承诺、安全问题、构建系统(GYP)、package.json和node_modules。在同一场演讲中，他宣布了自己的新作《Deno》。它不是Node的一个分支，它完全是一个新编写的实现。</p><p id="e49e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Deno 1.0正式版于2020年5月13日发布。它超级年轻，事情是要变的，但Deno的内部不会变。我们将探索Deno的内部。它建立在V8⁴、Rust⁵和Tokio⁶.之上</p><blockquote class="lr"><p id="3ff1" class="ls lt iq bd lu lv lw lx ly lz ma lq dk translated">我们可以把它想象成Deno的前端是JavaScript或者TypeScript，后端是Rust。</p></blockquote><figure class="mc md me mf mg kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mb"><img src="../Images/ad2b2d323d3bee9c6ca42266457cd79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xu4hLk6xUmL8Bm178XlIWQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The architecture of Deno</figcaption></figure><h1 id="0054" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">Deno前面有<strong class="ak"> JavaScript和Typescript</strong></h1><p id="6783" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">它采用V8引擎，这是谷歌的开源高性能JavaScript和WebAssembly引擎，用C++编写。它还有一个内置的TypeScript编译器，你不需要设置或配置任何东西。所以Deno可以通过编译成JavaScript文件来运行TypeScript文件。</p><blockquote class="lr"><p id="8b34" class="ls lt iq bd lu lv lw lx ly lz ma lq dk translated">它是一个安全的TypeScript运行时，构建于V8之上，V8是用于JavaScript的Google运行时引擎。</p></blockquote><p id="633e" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">因此，在前端，我们编写JavaScript和类型脚本文件。如果我们是用TypeScript编写的，那么它首先会被编译成JavaScript，但是如果我们的代码是JavaScript，那么它会完全忽略编译过程，直接进入V8。</p><h1 id="e824" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated"><strong class="ak"> Deno在后端已经生锈</strong></h1><p id="4e2d" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">Rust是一种让每个人都能够在不使用垃圾收集的情况下构建可靠而高效的软件的语言。Node是用C和C++编写的，但Deno是用Rust编写的，它使用Rusty V8，这样V8引擎就可以与Rusty后端通信。</p><blockquote class="lr"><p id="d1c9" class="ls lt iq bd lu lv lw lx ly lz ma lq dk translated">如果有JavaScript之外的东西，就把它发给Rust</p></blockquote><p id="d3c0" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">当V8引擎在JavaScript之外有任何需要做的事情时，它会通过Rusty V8发送给Rust，就像访问文件或设置超时一样。</p><h1 id="bbf4" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">Tokio允许Deno使用威胁池和工人为我们工作</h1><p id="9383" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">Tokio是一个开源库，为构建快速、可靠和轻量级的网络应用程序提供了一个异步、事件驱动的平台。它利用Rust的所有权和并发模型来确保线程安全。因此，Deno将Tokio库用于事件循环、异步io等等。</p><blockquote class="lr"><p id="becd" class="ls lt iq bd lu lv lw lx ly lz ma lq dk translated">请记住，Tokio库只是一个rust项目，rust library。</p></blockquote><p id="0f7c" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">对于熟悉node.js结构的人来说:</p><ul class=""><li id="4a85" class="nj nk iq kx b ky kz lb lc le nl li nm lm nn lq no np nq nr bi translated">在作为Node.js一部分的Node.js绑定的等效项中信任V8。</li><li id="51fc" class="nj nk iq kx b ky ns lb nt le nu li nv lm nw lq no np nq nr bi translated">Tokio库相当于node.js语言中的异步IO LIBUv。</li></ul><p id="9358" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，Deno <a class="ae nx" href="https://github.com/denoland/deno/releases/tag/v1.2.0" rel="noopener ugc nofollow" target="_blank"> v1.2.0 </a>已经在4天前发布了。</p><h1 id="678a" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">参考</h1><p id="2047" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">[1]<a class="ae nx" href="https://www.youtube.com/watch?v=M3BM9TB-8yA" rel="noopener ugc nofollow" target="_blank">node . js我后悔的10件事— Ryan Dahl — JSConf EU 2018 </a></p><p id="9ab1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[2]<a class="ae nx" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org</a></p><p id="bc34" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[3] <a class="ae nx" href="https://deno.land" rel="noopener ugc nofollow" target="_blank"> https://deno.land </a></p><p id="3158" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[4] <a class="ae nx" href="https://v8.dev" rel="noopener ugc nofollow" target="_blank"> https://v8.dev </a></p><p id="9ea8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[5]<a class="ae nx" href="https://www.rust-lang.org" rel="noopener ugc nofollow" target="_blank">https://www.rust-lang.org</a></p><p id="24f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">[6] <a class="ae nx" href="https://tokio.rs" rel="noopener ugc nofollow" target="_blank"> https://tokio.rs </a></p></div></div>    
</body>
</html>
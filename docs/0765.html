<html>
<head>
<title>Time-series forecasting with JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JS进行时间序列预测</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/time-series-forecasting-with-js-9cc327570071?source=collection_archive---------1-----------------------#2019-12-07">https://javascript.plainenglish.io/time-series-forecasting-with-js-9cc327570071?source=collection_archive---------1-----------------------#2019-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6c5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将讲述为什么在某些时候前端数据分析是一个好的和可行的解决方案的一般方法，并将在下一篇文章中提供一些实践材料。</p><h1 id="10c7" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">有什么意义？</h1><p id="5401" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在我作为前端开发人员的全职工作中，我通常使用仪表板和不同种类的数据。在某种程度上，我们意识到我们需要增加对指标的预测。团队中没有数据科学的人来做这件事。</p><p id="0100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而我们的栈是React + Java。</p><h2 id="8490" class="lo km iq bd kn lp lq dn kr lr ls dp kv jy lt lu kz kc lv lw ld kg lx ly lh lz bi translated">问题1。</h2><p id="ab83" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">要预测的数据量非常大，而记录量却很少。(当数千个数据切片的可用历史数据量很低时)</p><h2 id="f805" class="lo km iq bd kn lp lq dn kr lr ls dp kv jy lt lu kz kc lv lw ld kg lx ly lh lz bi translated">问题二。</h2><p id="a01d" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">后端人员的工作量非常大，所以他们实际上无法完成这项任务+公司对该项目的Java实例配额紧张。</p><p id="ba6f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们决定在前端做这件事。</p><h1 id="fc22" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">可能的方法</h1><p id="d1a6" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">一般来说，有几种算法可以完成这项工作。(考虑到我们需要季节性预测)</p><p id="bf68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我决定测试它看起来是什么样子，并尝试Excel。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ma"><img src="../Images/fec1460a1034ec946629d171e8a5f91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jx1ZwMZPxik6RMEZPz6VvA.png"/></div></div></figure><p id="e4ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">预测。ETS()函数做得很好，这意味着是时候编写代码了！</p><h1 id="1a5c" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">动手时间到了</h1><p id="9aa8" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">有几个算法可以很好地处理这个问题，包括一些机器学习的东西</p><blockquote class="mm"><p id="74c6" class="mn mo iq bd mp mq mr ms mt mu mv kk dk translated">我用Tensorflow.js RNN模型从<a class="ae mw" href="https://towardsdatascience.com/time-series-forecasting-with-tensorflow-js-1efd48ff2201" rel="noopener" target="_blank">到本文</a>进行了实验，但是在给定的数据集上训练需要很多时间，数据集本身应该足够大，预测也不是很快，所以我们不能在项目中使用它。我们有1000多家公司向他们提供预测数据，但在过去的2-3年里有40-50条记录，所以它不能用于这个目的。</p></blockquote><p id="02da" class="pw-post-body-paragraph jn jo iq jp b jq mx js jt ju my jw jx jy mz ka kb kc na ke kf kg nb ki kj kk ij bi translated">所以，ARIMA算法和指数平滑就留下了，我做了一些研究，没有找到一些实现ARIMA的库，但是找到了npm中Holt-Winters算法的<strong class="jp ir"><em class="nc"/></strong>预测库。</p><p id="524e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，它工作得非常好和容易</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="ee64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Forecast函数返回一个元素数组，其中最后的<strong class="jp ir"> <em class="nc"> p </em> </strong>元素是预测值。干净又容易。</p><h2 id="2126" class="lo km iq bd kn lp lq dn kr lr ls dp kv jy lt lu kz kc lv lw ld kg lx ly lh lz bi translated">但是…不是一切</h2><blockquote class="nf ng nh"><p id="9992" class="jn jo nc jp b jq jr js jt ju jv jw jx ni jz ka kb nj kd ke kf nk kh ki kj kk ij bi translated">否则，我不会写这篇文章:)</p></blockquote><p id="af05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我遇到了一些问题，这些问题减缓了我在项目中完成这些东西的速度。</p><ol class=""><li id="c7ea" class="nl nm iq jp b jq jr ju jv jy nn kc no kg np kk nq nr ns nt bi translated">你应该记住，你不能预测一个以上的季节。如果你的季节是几个月，每个季节(一年)有12次观测，你不能预测超过12个周期的未来。</li><li id="0681" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">如果您的数据集有不同的结构(我们的情况)，您应该动态调整alpha/beta/gamma参数，测量误差并使用尽可能低的误差率进行预测。这意味着你每次都需要做很多预测。如果您有大型数据集，它会影响您的性能。在我们的例子中，数千次计算并没有显著影响性能。(误差计算的要点将作为奖金❤️提供)</li><li id="42d0" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">如果你的数据少于至少两个完整的季节，你就无法进行正确的计算。如果你的季节包含12个记录(例如每月一个)，那么至少应该有24个记录。</li><li id="cdfc" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">如果您传递的观察值没有除以季节的周期数，则计算可能不正确。我的意思是，如果你每季有12次观察，你应该给出最后24、36、48等项。</li><li id="83d0" class="nl nm iq jp b jq nu ju nv jy nw kc nx kg ny kk nq nr ns nt bi translated">还有一件事。我不确定为什么，但是如果我们想得到不同数量的数据来预测，在相同的时期会有不同的数字。例如，如果我想得到未来一年的预测，我将得到下个月的一个结果，但是如果我只预测未来一个月的结果，我将得到不同的数字。由于我们需要预测未来3个月，如果我只预测3个月，如果我预测一年，并且只得到前3个元素，那么我最终会得到两种情况下的计算错误。之后，我以最小的错误率得到结果并显示出来。</li></ol><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nz"><img src="../Images/adcec08b4e33c7aa114f9aded46a5178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ztpHAKV8B9SzhWSio__eJw.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk">One metric prediction (dotted). Current year — blue line, Prev year — purple.</figcaption></figure><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nz"><img src="../Images/3a7f58083aa552c6a9d58174b88d48a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZyYMO1jlGFh8-2ERGaMBg.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk">Three independent metrics predictions (dotted lines). Current year — blue line.</figcaption></figure></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><p id="32eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">奖金</strong></p><p id="a90c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">误差计算的依据</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6245" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读，请通过</p><p id="5a10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">电子邮件—mitia2022@gmail.com</p><p id="a4b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">电报—@轩尼诗81</p><p id="c3b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Medium上关注我，拍拍这篇文章，祝你有美好的一天！</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/e55b0e0c689a2d3d568552f74ed6c2fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*cXqTedPcLGYHldA5We3jJg.gif"/></div></figure></div></div>    
</body>
</html>
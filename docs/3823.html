<html>
<head>
<title>Create a Browser with React.js and Electron</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React.js和Electron创建浏览器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-browser-with-react-js-and-electron-d75f30b6bcec?source=collection_archive---------1-----------------------#2020-10-27">https://javascript.plainenglish.io/create-a-browser-with-react-js-and-electron-d75f30b6bcec?source=collection_archive---------1-----------------------#2020-10-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="4dc5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有没有想象过浏览器是如何工作的，你如何能自己创建一个浏览器，并让它做几乎所有你想做的事情？好吧，我将分享我用Javascript和电子学知识从头开始编写浏览器的故事，以及我在这个过程中遇到的所有困难。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/54b431a71911e1b0cc5815664cc01413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6uzwhsmcpban0Q4pSEUCQ.jpeg"/></div></div></figure><h1 id="21fc" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Java Script语言</h1><p id="8390" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">JavaScript通常缩写为JS，是一种符合ECMAScript规范的编程语言。JavaScript是高级的，通常是即时编译的，并且是多范例的。它有花括号语法、动态类型、基于原型的面向对象和一流的功能。</p><h1 id="1dc1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">电子</h1><p id="425c" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated"><strong class="jm io">电子</strong>是由GitHub开发和维护的开源软件框架。它允许使用web技术开发桌面GUI应用程序:它结合了Chromium渲染引擎和Node.js运行时。</p><h1 id="6a34" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">故事</h1><p id="483b" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">最近，我的公司给了我一个设计浏览器的项目。它的一些功能是浏览器应该是跨平台的，它将有一个内置的代理，所以所有的导航和要打开的路线都应该通过代理服务器，它将有自动认证以及一些网站；此外，它将具有基本的浏览器功能，包括前进、后退、刷新、停止等。</p><p id="ffc1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，让我们快速了解一下什么是浏览器，以及浏览器中的工作原理。网络<strong class="jm io">浏览器</strong>，或<strong class="jm io">简称</strong><strong class="jm io">浏览器</strong>，是用来访问和浏览网站的应用。</p><p id="8ab3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">需求现在已经很清楚了，我有一周的研究时间，并且可以自由选择我的堆栈。最近微软发布了新版本的Microsoft Edge，它是基于Chrome的，就像Chrome一样。所以我开始研究chromium，并意识到这是一片汪洋，要开始使用Chromium，我需要的时间比给我的时间多得多，所以我不得不转向一些我可以快速上手的东西。</p><p id="a035" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">几年前，我为一家公司设计了这个基于电子的仪表板桌面应用程序，它也是基于Chromium的，那么为什么是电子呢？我很快开始深入研究electronic，我发现electronic应用程序基本上是运行HTML的浏览器窗口，不仅仅是因为我发现electronic还支持WEBVIEW标签，可以在其中运行网站，并具有广泛的API。</p><p id="739e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">经过几个小时的研究和试验，我能够创建一个简单的电子应用程序，将webview呈现为HTML，并让这个webview在里面运行www.google.com<a class="ae lx" href="http://www.google.com" rel="noopener ugc nofollow" target="_blank">的</a>。我还发现，electron将webview视为一个独立的窗口，这样你就可以访问所有浏览器窗口的API。因此，基本上你可以加载，重新加载，向后和向前移动，以及一个简单的浏览器窗口可以执行的所有操作。</p><p id="8107" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，几乎一切都很清楚了，因为我已经能够用普通的HTML创建一个浏览器UI了。在过去的2年里，我一直全职使用react，使用React和react native，所以使用HTML似乎效率不高。所以我快速克隆了这个repo<a class="ae lx" href="https://github.com/pbarbiero/basic-electron-react-boilerplate" rel="noopener ugc nofollow" target="_blank">https://github . com/pbar biero/basic-electronic-react-boilerplate</a>开始使用。</p><p id="ecf3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在使用electron和react时发现的第一件事是，electron有一个不受react支持的webview组件，因此要注入一个受electron而非react支持的webview，您必须通过javascript手动将webview注入到一个容器中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/5df754c3b1f1890910e0e3e81f35dfa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cdk-sfeaN3LHHwZVuUqgBA.png"/></div></div></figure><p id="ea98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是如何将元素注入到dom中，在我的例子中是webview标签。</p><p id="b76e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，我为webview注入创建了一个基本的API，并创建了所有常用的操作，如向后移动、向前移动、加载URL、刷新页面和停止页面加载。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lz"><img src="../Images/45cdf37a18be0e30c29f9c951c21ff14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtZTkA9Dc1VF5FlRiEk92g.png"/></div></div></figure><p id="5c49" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这样，我们就有了一个包含id为<code class="fe ma mb mc md b">webviewContainer</code>的元素的电子窗口，我们在其中注入了webview，我们能够在浏览器中执行基本的操作。</p><p id="d167" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在棘手的部分来了，我们不需要在一个窗口上有一个网站，但是我们需要多个标签，每个标签运行一个网站的实例，并且完全独立。这就是我使用React的原因；这使得前端管理变得更加容易。</p><p id="9f2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用<a class="ae lx" href="https://ant.design/components/tabs/" rel="noopener ugc nofollow" target="_blank">https://ant.design/components/tabs/</a>蚂蚁设计标签进行前端设计。我将所有基本的浏览器功能移到了另一个组件上，并在根页面上创建了选项卡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/c0cdc3d126daf5be9134c22cfa7a801a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MbpgxiPo1gerEJ5SgvonzQ.png"/></div></div></figure><p id="a2d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每个选项卡都由自己的内容区域组成，在该区域中，我们有子组件。但是根据我们创建的webview API，我们只针对<code class="fe ma mb mc md b">webviewContainer</code>，所以API的动作会影响第一个<code class="fe ma mb mc md b">webviewContainer</code> webview，因为我们有和标签一样多的<code class="fe ma mb mc md b">webviewContainer</code>，为了解决这个问题，我们给浏览器窗口一个自定义的父id，就像这样</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/f9593dec4ab514f24dceb95b2e3d83e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9vcI0Bm-XUQ48wfehQvIQ.png"/></div></div></figure><p id="8326" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">并修改我们的API，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/9680d6b03868e22b29876f31bc128808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0JSS63f6JQLPzZacE2c6A.png"/></div></div></figure><p id="b9ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将做的是，它将只针对基于webview的特定选项卡，您需要做的只是将我们从选项卡发送的parentid的引用发送到浏览器组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/6194d98771a196db90ac7663effea765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w27Zb5OtWnGTDQMc0I3Zdw.png"/></div></div></figure><p id="d7c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">✌To总结这一点，我们现在有一个应用浏览器，可以浏览网站和多个网站在同一时间。</p><p id="a8c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些资源将帮助您扩展浏览器的功能。<br/> - <a class="ae lx" href="https://medium.com/@SuperSami/setting-up-custom-proxy-for-electron-webview-109d78ce5e17" rel="noopener">为电子网络视图设置自定义代理</a>🐱‍🚀<br/> - <a class="ae lx" href="https://supersami.medium.com/react-and-electron-multi-window-setup-f1750a1500e7" rel="noopener"> React和电子多窗口设置</a> <br/> -操纵Webview渲染的dom(即将到来)<br/> -为两个平台构建电子app并打包。(马上就来)</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Build a Simple Chrome Extension in Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用普通JavaScript构建一个简单的Chrome扩展</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/https-medium-com-javascript-in-plain-english-how-to-build-a-simple-chrome-extension-in-vanilla-javascript-e52b2994aeeb?source=collection_archive---------0-----------------------#2018-08-21">https://javascript.plainenglish.io/https-medium-com-javascript-in-plain-english-how-to-build-a-simple-chrome-extension-in-vanilla-javascript-e52b2994aeeb?source=collection_archive---------0-----------------------#2018-08-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0d13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天，我将向你展示如何用普通的JavaScript来制作Chrome扩展——也就是说，没有任何其他框架(如React、Angular或Vue)的普通JavaScript。</p><p id="4f6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">构建一个Chrome扩展并不困难——在我编程的第一年，我发布了两个扩展，我只用HTML、CSS和普通JavaScript就完成了这两个扩展。在本文中，我将在几分钟内带您了解如何实现同样的目标。</p><p id="bfd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将向您展示如何从头开始制作一个简单的Chrome扩展仪表板。然而，如果你对扩展有自己的想法，并且只是想知道在你现有的项目文件中添加什么来让它在Chrome中工作，你可以跳到定制你自己的<code class="fe ki kj kk kl b">manifest.json</code>文件和图标这一节。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/929c1414584ee90820be2193e351c316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BOYvlX903vKaY8TI2JJFQA.png"/></div></div></figure><h1 id="ecc1" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">关于Chrome扩展</h1><p id="6a08" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">Chrome扩展本质上只是一组定制你在谷歌Chrome浏览器中的体验的文件。有一些不同种类的Chrome扩展；有些在满足特定条件时激活，比如当你在商店结账页面时；有些只有当你点击一个图标时才会弹出；有些在每次打开新标签时出现。我今年发布的两个扩展都是“新标签”扩展；第一个是<a class="ae mb" href="http://bit.ly/complimentdash" rel="noopener ugc nofollow" target="_blank"> Compliment Dash </a>，一个保存待办事项列表并赞美用户的仪表盘，第二个是牧师的工具，名为<a class="ae mb" href="http://liturgical.li/" rel="noopener ugc nofollow" target="_blank"> Liturgical.li </a>。如果你知道如何编写一个基本的网站，那么你可以编写这种扩展，没有太大的困难。</p><h1 id="5037" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">先决条件</h1><p id="3a31" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">我们将保持事情简单，所以在本教程中，我们将只使用HTML、CSS和一些基本的JavaScript，以及定制一个我将在下面包括的<code class="fe ki kj kk kl b">manifest.json</code>文件。Chrome扩展的复杂程度各不相同，所以构建一个Chrome扩展可以是简单的，也可以是复杂的。在您学习了这里的基础知识之后，您将能够使用您自己的技能来创建更复杂的东西。</p><h1 id="0f25" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设置您的文件</h1><p id="9690" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">在本教程中，我们将创建一个简单的仪表板，通过名称来问候用户。让我们称我们的扩展为简单问候仪表板。</p><p id="52bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，您需要创建三个文件:<code class="fe ki kj kk kl b">index.html</code>、<code class="fe ki kj kk kl b">main.css</code>和<code class="fe ki kj kk kl b">main.js</code>。把这些放到他们自己的文件夹里。接下来，用基本的HTML文档设置填充HTML文件，并将其连接到CSS和JS文件:</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="31bd" class="mg kz in kl b gy mh mi l mj mk">&lt;!-- =================================</span><span id="677f" class="mg kz in kl b gy ml mi l mj mk">Simple Greeting Dashboard</span><span id="c680" class="mg kz in kl b gy ml mi l mj mk">================================= //--&gt;</span><span id="17f2" class="mg kz in kl b gy ml mi l mj mk">&lt;!DOCTYPE html&gt;</span><span id="68ac" class="mg kz in kl b gy ml mi l mj mk">&lt;html&gt;</span><span id="e846" class="mg kz in kl b gy ml mi l mj mk">&lt;head&gt;</span><span id="003b" class="mg kz in kl b gy ml mi l mj mk">  &lt;meta charset="utf-8" /&gt;</span><span id="bf24" class="mg kz in kl b gy ml mi l mj mk">  &lt;title&gt;Simple Greeting Dashboard&lt;/title&gt;</span><span id="a4cd" class="mg kz in kl b gy ml mi l mj mk">  &lt;link rel="stylesheet" type="text/css" media="screen" href="main.css" /&gt;</span><span id="d06d" class="mg kz in kl b gy ml mi l mj mk">&lt;/head&gt;</span><span id="3617" class="mg kz in kl b gy ml mi l mj mk">&lt;body&gt;</span><span id="2182" class="mg kz in kl b gy ml mi l mj mk">   &lt;!-- My code will go here --&gt;</span><span id="329d" class="mg kz in kl b gy ml mi l mj mk">   &lt;script src="main.js"&gt;&lt;/script&gt;</span><span id="a28e" class="mg kz in kl b gy ml mi l mj mk">&lt;/body&gt;</span><span id="f303" class="mg kz in kl b gy ml mi l mj mk">&lt;/html&gt;</span></pre><h1 id="2459" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">定制您的manifest.json文件</h1><p id="b2bf" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">这些文件不足以让你的项目成为Chrome的扩展。为此，我们需要一个<code class="fe ki kj kk kl b">manifest.json</code>文件，我们将用一些关于我们的扩展的基本信息来定制它。您可以在<a class="ae mb" href="https://developer.chrome.com/extensions/getstarted" rel="noopener ugc nofollow" target="_blank"> Google的开发者门户网站上下载该文件，</a>或者只需将以下几行复制/粘贴到一个新文件中，并将其作为<code class="fe ki kj kk kl b">manifest.json</code>保存在您的文件夹中:</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="964a" class="mg kz in kl b gy mh mi l mj mk">{<br/>  "name": "Getting Started Example",<br/>  "version": "1.0",<br/>  "description": "Build an Extension!",<br/>  "manifest_version": 2<br/>}</span></pre><p id="180d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们用一些关于我们的扩展的信息来更新示例文件。我们只想更改代码的前三个值:<code class="fe ki kj kk kl b">name</code>、<code class="fe ki kj kk kl b">version</code>和<code class="fe ki kj kk kl b">description</code>。让我们填写我们的名字和一行描述，因为这是我们的第一个版本，让我们保持这个值为1.0。<code class="fe ki kj kk kl b">manifest_version</code>号应该保持不变。</p><p id="e8ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将添加几行代码来告诉Chrome如何处理这个扩展。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="b52e" class="mg kz in kl b gy mh mi l mj mk">{<br/>  "name": "Simple Greeting Dashboard",<br/>  <br/>  "version": "1.0",<br/>  <br/>  "description": "This Chrome extension greets the user each time they open a new tab",<br/>  <br/>  "manifest_version": 2</span><span id="f707" class="mg kz in kl b gy ml mi l mj mk">  "incognito": "split",<br/>  <br/>  "chrome_url_overrides": {<br/>    "newtab": "index.html"<br/>  },<br/>  <br/>  "permissions": [<br/>     "activeTab"<br/>   ],</span><span id="3594" class="mg kz in kl b gy ml mi l mj mk">"icons": {<br/>    "128": "icon.png"<br/>    }<br/>}</span></pre><p id="6fee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">值<code class="fe ki kj kk kl b">"incognito": "split"</code>告诉Chrome在匿名模式下如何处理这个扩展。<code class="fe ki kj kk kl b">"split"</code>当浏览器匿名时，将允许扩展在自己的进程中运行；有关其他选项，请参见<a class="ae mb" href="https://developer.chrome.com/extensions/manifest/incognito" rel="noopener ugc nofollow" target="_blank"> Chrome开发者文档</a>。</p><p id="3c52" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你可能看到的，<code class="fe ki kj kk kl b">"chrome_url_overrides"</code>告诉Chrome每当打开一个新标签页就打开<code class="fe ki kj kk kl b">index.html</code>。<code class="fe ki kj kk kl b">"permissions"</code>的值会给用户一个弹出窗口，让他们知道当他们试图安装时，这个扩展会覆盖他们的新标签。</p><p id="9f93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们告诉Chrome显示什么作为我们的favicon:一个名为<code class="fe ki kj kk kl b">icon.png</code>的文件，大小为128 x 128像素。</p><h1 id="a878" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">创建图标</h1><p id="f978" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">由于我们还没有图标文件，接下来，我们将为简单的问候破折号创建一个图标。随便用我下面做的那个。如果你想自己制作，你可以使用Photoshop或者像Canva这样的免费服务。只需确保尺寸为128 x 128像素，并将其作为<code class="fe ki kj kk kl b">icon.png</code>保存在与HTML、CSS、JS和JSON文件相同的文件夹中。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/c768079b775e0136a60ed6a2dce29c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*-dBIaX8IyG0PfHK-2vZ2dA.png"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">My 128x128 icon for Simple Greeting Dash</figcaption></figure><h1 id="4661" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">上传您的文件(如果您正在编写自己的页面)</h1><p id="d61d" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">以上信息是你真正需要知道的，来创建你自己的新的标签Chrome扩展。在您定制您的<code class="fe ki kj kk kl b">manifest.json</code>文件之后，您可以用HTML、CSS和JavaScript设计您想要的任何类型的新标签页，并上传它，如下所示。但是如果你想知道我是如何制作这个简单的仪表板的，请跳到“创建设置菜单”</p><p id="6c6f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦你完成了新标签页的设计，你的Chrome扩展也就完成了，可以上传到Chrome了。要自己上传，在你的浏览器中打开<strong class="jm io">chrome://extensions/</strong><strong class="jm io"/>，在右上角打开开发者模式。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mr"><img src="../Images/da9b0230151107f3d92ab58fc11a639e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2j2WS2RAPYE_NiOWqyWCw.png"/></div></div></figure><p id="5311" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">刷新页面，然后点击“加载解包”</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ms"><img src="../Images/8734e120d4233a38a189b61e8dd7ed40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gb0c8qmG_MtinG9tOmjxuA.png"/></div></div></figure><p id="72bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，选择存储HTML、CSS、JS和<code class="fe ki kj kk kl b">manifest.json</code>文件以及<code class="fe ki kj kk kl b">icon.png</code>的文件夹，然后上传。每次你打开一个新的标签时，这个扩展都应该工作！</p><p id="3e81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦你完成了你的扩展，并亲自测试了它，你就可以得到一个开发者帐户，并把它放到Chrome扩展商店。<a class="ae mb" href="https://developer.chrome.com/webstore/publish" rel="noopener ugc nofollow" target="_blank">这个关于发布扩展的指南</a>应该会有所帮助。</p><p id="98c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你现在还没有创建自己的扩展，只是想看看Chrome扩展有什么功能，请继续阅读，看看如何制作一个非常简单的问候仪表板。</p><h1 id="8a4f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">创建设置菜单</h1><p id="d299" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">对于我的扩展，我想做的第一件事是创建一个输入，用户可以在其中添加他们的名字。由于我不想让这个输入一直可见，所以我将把它放在一个名为<code class="fe ki kj kk kl b">settings</code>的div中，只有当单击Settings按钮时，它才可见。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="fac4" class="mg kz in kl b gy mh mi l mj mk">&lt;button id="settings-button"&gt;Settings&lt;/button&gt;</span><span id="8f63" class="mg kz in kl b gy ml mi l mj mk">&lt;div class="settings" id="settings"&gt;</span><span id="d4d2" class="mg kz in kl b gy ml mi l mj mk">   &lt;form class="name-form" id="name-form" action="#"&gt;</span><span id="e96c" class="mg kz in kl b gy ml mi l mj mk">      &lt;input class="name-input" type="text"<br/>        id="name-input" placeholder="Type your name here..."&gt;</span><span id="a881" class="mg kz in kl b gy ml mi l mj mk">      &lt;button type="submit" class="name-button"&gt;Add&lt;/button&gt;</span><span id="938a" class="mg kz in kl b gy ml mi l mj mk">   &lt;/form&gt;</span><span id="16b0" class="mg kz in kl b gy ml mi l mj mk">&lt;/div&gt;</span></pre><p id="a99f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们的设置如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/304c7763a92d61a81581d355f1fa5811.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*YXSHj-nYAotrbMCAulpJ0Q.png"/></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">So beautiful!</figcaption></figure><p id="0bee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">…所以我要给他们一些CSS中的基本样式。我将给出按钮并输入一些填充和轮廓，然后在设置和表单之间留出一点空间。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="a915" class="mg kz in kl b gy mh mi l mj mk">.settings {</span><span id="97d6" class="mg kz in kl b gy ml mi l mj mk">   display: flex;</span><span id="9c0b" class="mg kz in kl b gy ml mi l mj mk">   flex-direction: row;</span><span id="2dd5" class="mg kz in kl b gy ml mi l mj mk">   align-content: center;</span><span id="6908" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="0f8f" class="mg kz in kl b gy ml mi l mj mk">input {</span><span id="77c5" class="mg kz in kl b gy ml mi l mj mk">   padding: 5px;</span><span id="a8e4" class="mg kz in kl b gy ml mi l mj mk">   font-size: 12px;</span><span id="ac61" class="mg kz in kl b gy ml mi l mj mk">   width: 150px;</span><span id="1630" class="mg kz in kl b gy ml mi l mj mk">   height: 20px;</span><span id="31b8" class="mg kz in kl b gy ml mi l mj mk">}<br/></span><span id="e1be" class="mg kz in kl b gy ml mi l mj mk">button {</span><span id="45f5" class="mg kz in kl b gy ml mi l mj mk">   height: 30px;</span><span id="3fac" class="mg kz in kl b gy ml mi l mj mk">   width: 70px;</span><span id="36e1" class="mg kz in kl b gy ml mi l mj mk">   background: none; /* This removes the default background */</span><span id="7da2" class="mg kz in kl b gy ml mi l mj mk">   color: #313131;</span><span id="60bd" class="mg kz in kl b gy ml mi l mj mk">   border: 1px solid #313131;</span><span id="fa26" class="mg kz in kl b gy ml mi l mj mk">   border-radius: 50px; /* This gives our button rounded edges */</span><span id="f7e1" class="mg kz in kl b gy ml mi l mj mk">   font-size: 12px;</span><span id="e353" class="mg kz in kl b gy ml mi l mj mk">   cursor: pointer;</span><span id="3bed" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="59ac" class="mg kz in kl b gy ml mi l mj mk">form {</span><span id="8114" class="mg kz in kl b gy ml mi l mj mk">   padding-top: 20px;</span><span id="657c" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="778d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们的设置看起来好一点了:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/17ed6e47d06627df5039384f4317798a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*xk-CcvLMpxklx1MIvsD7xQ.png"/></div></figure><p id="5a26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是让我们在用户没有点击设置时隐藏它们。我将通过向<code class="fe ki kj kk kl b">.settings</code>添加以下内容来实现这一点，这将导致姓名输入从屏幕的一侧消失:</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="6e1a" class="mg kz in kl b gy mh mi l mj mk">transform: translateX(-100%);</span><span id="eaa3" class="mg kz in kl b gy ml mi l mj mk">transition: transform 1s;</span></pre><p id="d80d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们创建一个名为<code class="fe ki kj kk kl b">settings-open</code>的类，当用户点击设置按钮时，我们将在JavaScript中打开和关闭这个类。当<code class="fe ki kj kk kl b">settings-open</code>被添加到<code class="fe ki kj kk kl b">settings</code>时，它不会被应用任何变换；在正常位置只能看到它。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="20ec" class="mg kz in kl b gy mh mi l mj mk">.settings-open.settings {</span><span id="dc7d" class="mg kz in kl b gy ml mi l mj mk">   transform: none;</span><span id="c089" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="951c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们在JavaScript中实现类切换。我将创建一个名为<code class="fe ki kj kk kl b">openSettings()</code>的函数来打开或关闭类<code class="fe ki kj kk kl b">settings-open</code>。为此，我将首先通过元素的ID<code class="fe ki kj kk kl b">"settings"</code>获取元素，然后使用<code class="fe ki kj kk kl b">classList.toggle</code>添加<code class="fe ki kj kk kl b">settings-open</code>的类。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="eff6" class="mg kz in kl b gy mh mi l mj mk">function openSettings() {</span><span id="6c95" class="mg kz in kl b gy ml mi l mj mk">   document.getElementById("settings").classList.toggle("settings-open");</span><span id="9c3d" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="2bec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我将添加一个事件侦听器，每当单击Settings按钮时，它都会触发该函数。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="01f2" class="mg kz in kl b gy mh mi l mj mk">document.getElementById("settings-button").addEventListener('click', openSettings)</span></pre><p id="77db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将使您的设置在您单击“设置”按钮时出现或消失。</p><h1 id="124e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">创建个性化问候</h1><p id="3851" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">接下来，让我们创建问候消息。我们将在HTML中创建一个空的<code class="fe ki kj kk kl b">h2</code>，然后在JavaScript中使用innerHTML填充它。我要给<code class="fe ki kj kk kl b">h2</code>一个ID，这样我以后可以访问它，并把它放在一个名为<code class="fe ki kj kk kl b">greeting-container</code>的<code class="fe ki kj kk kl b">div</code>中，使它居中。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="e3b9" class="mg kz in kl b gy mh mi l mj mk">&lt;div class="greeting-container"&gt;</span><span id="35d1" class="mg kz in kl b gy ml mi l mj mk">   &lt;h2 class="greeting" id="greeting"&gt;&lt;/h2&gt;</span><span id="08e1" class="mg kz in kl b gy ml mi l mj mk">&lt;/div&gt;</span></pre><p id="0e8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在JavaScript中，我将使用用户名创建一个基本的问候。首先，我将创建一个变量来保存名称，现在我将它保留为空，以后再添加。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="de38" class="mg kz in kl b gy mh mi l mj mk">var userName;</span></pre><p id="6a3a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">即使<code class="fe ki kj kk kl b">userName</code>不为空，如果我只是将<code class="fe ki kj kk kl b">userName</code>放入我的HTML中的一个问候语，如果我在另一个会话中打开它，Chrome也不会使用相同的名称。为了确保Chrome记得我是谁，我将不得不使用本地存储。所以我做一个函数叫<code class="fe ki kj kk kl b">saveName()</code>。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="e213" class="mg kz in kl b gy mh mi l mj mk">function saveName() {</span><span id="62d0" class="mg kz in kl b gy ml mi l mj mk">    localStorage.setItem('receivedName', userName);</span><span id="4dac" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="07fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">函数<code class="fe ki kj kk kl b">localStorage.setItem()</code>有两个参数:第一个是我稍后用来访问信息的关键字，第二个是它需要记住的信息；在这种情况下，<code class="fe ki kj kk kl b">userName</code>。我将通过<code class="fe ki kj kk kl b">localStorage.getItem</code>获取保存的信息，我将使用它来更新<code class="fe ki kj kk kl b">userName</code>变量。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="adb0" class="mg kz in kl b gy mh mi l mj mk">var userName = localStorage.getItem('receivedName');</span></pre><p id="3443" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们将它链接到表单中的事件监听器之前，我想告诉Chrome如何称呼我，如果我还没有告诉它我的名字的话。我将使用if语句来实现这一点。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="ded8" class="mg kz in kl b gy mh mi l mj mk">if (userName == null) {</span><span id="f25c" class="mg kz in kl b gy ml mi l mj mk">   userName = "friend";</span><span id="b432" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="75f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们最后把用户名变量连接到表单上。我想在函数内部这样做，这样我就可以在名字更新的时候调用那个函数。让我们调用函数<code class="fe ki kj kk kl b">changeName()</code>。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="de7c" class="mg kz in kl b gy mh mi l mj mk">function changeName() {</span><span id="b223" class="mg kz in kl b gy ml mi l mj mk">   userName = document.getElementById("name-input").value;</span><span id="7d4d" class="mg kz in kl b gy ml mi l mj mk">   saveName();</span><span id="8291" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="8fe8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我想在每次有人使用表单提交名字时调用这个函数。我将用一个事件监听器来做这件事，在这个监听器中，我将调用函数<code class="fe ki kj kk kl b">changeName()</code>并防止页面在提交表单时默认刷新。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="ea83" class="mg kz in kl b gy mh mi l mj mk">document.getElementById("name-form").addEventListener('submit', function(e) {</span><span id="9a95" class="mg kz in kl b gy ml mi l mj mk">   e.preventDefault()</span><span id="96a7" class="mg kz in kl b gy ml mi l mj mk">   changeName();</span><span id="dc31" class="mg kz in kl b gy ml mi l mj mk">});</span></pre><p id="92a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，让我们创建我们的问候。我也将把它放在一个函数中，这样当页面被刷新时，以及每当<code class="fe ki kj kk kl b">changeName()</code>发生时，我都可以调用它。函数如下:</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="3f20" class="mg kz in kl b gy mh mi l mj mk">function getGreeting() {</span><span id="4069" class="mg kz in kl b gy ml mi l mj mk">   document.getElementById("greeting").innerHTML  = `Hello, ${userName}. Enjoy your day!`;</span><span id="d82a" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="6193" class="mg kz in kl b gy ml mi l mj mk"><br/>getGreeting()</span></pre><p id="2350" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我将在我的<code class="fe ki kj kk kl b">changeName()</code>函数中调用<code class="fe ki kj kk kl b">getGreeting()</code>，并结束今天的工作！</p><h1 id="04c8" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后，设计你的页面</h1><p id="b622" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">现在是时候添加最后的润色了。我将使用flexbox将我的页眉居中，使其变大，并在CSS中为主体添加渐变背景。为了让按钮和<code class="fe ki kj kk kl b">h2</code>在渐变的背景下弹出，我将它们设置为白色。</p><pre class="kn ko kp kq gt mc kl md me aw mf bi"><span id="0fa0" class="mg kz in kl b gy mh mi l mj mk">.greeting-container {</span><span id="37d1" class="mg kz in kl b gy ml mi l mj mk">   display: flex;</span><span id="9c4a" class="mg kz in kl b gy ml mi l mj mk">   justify-content: center;</span><span id="1ea7" class="mg kz in kl b gy ml mi l mj mk">   align-content: center;</span><span id="385a" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="0c01" class="mg kz in kl b gy ml mi l mj mk">.greeting {</span><span id="9b3a" class="mg kz in kl b gy ml mi l mj mk">   font-family: sans-serif;</span><span id="9b8d" class="mg kz in kl b gy ml mi l mj mk">   font-size: 60px;</span><span id="6a8e" class="mg kz in kl b gy ml mi l mj mk">   color: #fff;</span><span id="4eaa" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="89ed" class="mg kz in kl b gy ml mi l mj mk">body {</span><span id="7a14" class="mg kz in kl b gy ml mi l mj mk">   background-color: #c670ca;</span><span id="9ae1" class="mg kz in kl b gy ml mi l mj mk">   background-image: linear-gradient(45deg, #c670ca 0%, #25a5c8 52%, #20e275 90%);</span><span id="fef8" class="mg kz in kl b gy ml mi l mj mk">}</span><span id="acb6" class="mg kz in kl b gy ml mi l mj mk">html {</span><span id="686f" class="mg kz in kl b gy ml mi l mj mk">   height: 100%;</span><span id="b71f" class="mg kz in kl b gy ml mi l mj mk">}</span></pre><p id="f5c8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这样！您的页面将如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mv"><img src="../Images/faacbf9c2b8ec6764fe97e28c5bffe55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMqFDrey8Ylut2XLen8JRA.png"/></div></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk">Your very own Chrome extension!</figcaption></figure><p id="eb3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它可能不多，但它是你创建和设计自己的Chrome仪表盘的一个很好的基础。如果您有任何问题，请告诉我们，并随时通过Twitter联系我，电话:<a class="ae mb" href="https://twitter.com/SaraLaughed" rel="noopener ugc nofollow" target="_blank">@ Sara laugh</a>。</p></div></div>    
</body>
</html>
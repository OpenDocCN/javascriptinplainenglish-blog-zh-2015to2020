<html>
<head>
<title>One small change to your React components that lets you extend the style</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对React组件的一个小改动，可以让您扩展样式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/are-your-react-components-style-extendible-17148ba98c00?source=collection_archive---------6-----------------------#2020-05-08">https://javascript.plainenglish.io/are-your-react-components-style-extendible-17148ba98c00?source=collection_archive---------6-----------------------#2020-05-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1eab" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用React和styled-components创建样式可扩展组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/740527bbf532a92a786bf657b00201d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JXW8xrOUK-xE00e8"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Randy Fath <a class="ae kv" href="https://unsplash.com/photos/ymf4_9Y9S_A" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/ymf4_9Y9S_A</a></figcaption></figure><p id="b0bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我试图从我们公司的组件库中扩展一个组件，使其风格更适合特定的用例。</p><p id="6766" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">组件的底层功能相对复杂，而且写得很好，所以我真的不想重写它。</p><p id="488f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我使用了标准的样式化组件扩展:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="a608" class="lx ly iq lt b gy lz ma l mb mc">const myThing = styled(existingComponent)`<br/>  color: snazzyNewColor;</span><span id="d743" class="lx ly iq lt b gy md ma l mb mc">  ... or some slightly more useful styles<br/>`</span></pre><p id="a064" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但不幸的是，没有应用额外的造型！</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="fda7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我遇到了这样一种情况，我的样式化组件没有扩展现有组件。</p><p id="fa6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">稍微浏览了一下<a class="ae kv" href="https://styled-components.com/docs/basics#styling-any-components" rel="noopener ugc nofollow" target="_blank">样式组件文档</a>，我发现了这个:</p><blockquote class="ml mm mn"><p id="abce" class="kw kx mo ky b kz la jr lb lc ld ju le mp lg lh li mq lk ll lm mr lo lp lq lr ij bi translated">styled方法在您自己的或任何第三方组件上都可以完美地工作，只要它们将传递的className  <strong class="ky ir"> prop </strong>附加到DOM元素上。</p></blockquote></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="d86e" class="lx ly iq bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">传递类名属性</h2><p id="3aaf" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">如果我们想要扩展一个组件的样式，那么我们首先必须确保组件将<code class="fe no np nq lt b">className</code>属性传递给它最外面的元素。</p><p id="9541" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们举一个简单的彩色div的例子:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="cd39" class="lx ly iq lt b gy lz ma l mb mc">// A basic styled-component</span><span id="876d" class="lx ly iq lt b gy md ma l mb mc">const StyledOriginal = styled.div`<br/>  background: lightBlue;<br/>  width: 300px;<br/>  height: 150px;<br/>  text-align: center;<br/>  padding: 2rem;<br/>`<br/></span><span id="55e2" class="lx ly iq lt b gy md ma l mb mc">// An example React component which contains a styled-component</span><span id="fdfe" class="lx ly iq lt b gy md ma l mb mc">const OriginalComponent = () =&gt; {<br/>  return (<br/>    &lt;StyledOriginal&gt;<br/>      &lt;h3&gt;Wrong 😭&lt;/h3&gt;<br/>      &lt;p&gt;Without passing className down to the styled-component, my style can't be extended.&lt;/p&gt;<br/>    &lt;/StyledOriginal&gt;<br/>  )<br/>}<br/></span><span id="5fa9" class="lx ly iq lt b gy md ma l mb mc">// We attempt to extend the original component and expect the background to be green</span><span id="adda" class="lx ly iq lt b gy md ma l mb mc">const ReStyledComponent = styled(OriginalComponent)`<br/>  background: lightGreen;<br/>`</span></pre><p id="2d83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们渲染我们的<code class="fe no np nq lt b">&lt;ReStyledComponent /&gt;</code>，你希望背景是浅蓝色还是浅绿色？</p><p id="fa0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi">…</p><p id="51fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi">…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/a8dcc0bf89dc0da4b101527fce5b3978.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*OsOKGjsOMyE2v1NYP_mX6g.png"/></div></figure><p id="926c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是浅蓝色。我是不是泄露了一点？</p><p id="ecbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的风格不会被覆盖。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="96ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们再试一次，这一次我们将确保传递我们的<code class="fe no np nq lt b">className</code>道具:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="9465" class="lx ly iq lt b gy lz ma l mb mc">// The same styled-component<br/>const StyledOriginal = styled.div`<br/>  background: lightBlue;<br/>  width: 300px;<br/>  height: 150px;<br/>  text-align: center;<br/>  padding: 2rem;<br/>`</span><span id="db88" class="lx ly iq lt b gy md ma l mb mc">// The same React component, but this time with className<br/>const OriginalComponent = ({ className }) =&gt; {<br/>  return (<br/>    &lt;StyledOriginal className={className} &gt;<br/>      &lt;h3&gt;Correct 👌&lt;/h3&gt;<br/>      &lt;p&gt;We pass the className prop to the styled component. Look mom I'm green!&lt;/p&gt;<br/>    &lt;/StyledOriginal&gt;<br/>  )<br/>}</span><span id="8c6d" class="lx ly iq lt b gy md ma l mb mc">// We attempt to extend the original component and expect the background to be green<br/>const ReStyledComponent = styled(OriginalComponent)`<br/>  background: lightGreen;<br/>`</span></pre><p id="f597" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一次我们得到了想要的结果和风格的改变:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/6d0ffcb9472d3973c33a6536d1fba99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*MvZYcwDS8oWAt91vTcjYog.png"/></div></figure><p id="0cba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mo">注意:这不是特定于样式化组件的。如果最外面的元素是原始React组件中的一个简单的</em> <code class="fe no np nq lt b"><em class="mo">&lt;div&gt;</em></code> <em class="mo">，这个问题仍然会发生。</em></p><h2 id="1034" class="lx ly iq bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated">如果我的组件上的类名已经被使用了怎么办？</h2><p id="8156" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">可能会有这样的情况，当你传递一个<code class="fe no np nq lt b">className</code>道具时，你会想要将一个<code class="fe no np nq lt b">className</code>应用到你的组件。这开始变得复杂。</p><p id="7863" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢天谢地，我们可以使用<a class="ae kv" href="https://zhenyong.github.io/react/docs/jsx-spread.html" rel="noopener ugc nofollow" target="_blank">扩展操作符</a>来帮助我们:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="d46b" class="lx ly iq lt b gy lz ma l mb mc">const OriginalComponent = ({ title, bodyText, ...rest }) =&gt; {<br/>  return (<br/>    &lt;StyledOriginal<br/>      className="in-use"<br/>      {...rest}<br/>    &gt;<br/>      &lt;h3&gt;{ title } 👌&lt;/h3&gt;<br/>      &lt;p&gt;{ bodyText }&lt;/p&gt;<br/>    &lt;/StyledOriginal&gt;<br/>  )<br/>}</span></pre><p id="c899" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们将“剩余的”道具传递给最外层的元素。</p><p id="b550" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着默认情况下会通过<code class="fe no np nq lt b">className</code>道具。</p><h2 id="3c5c" class="lx ly iq bd ms mt mu dn mv mw mx dp my lf mz na nb lj nc nd ne ln nf ng nh ni bi translated"><strong class="ak"> TLDR: </strong></h2><ul class=""><li id="71d3" class="nt nu iq ky b kz nj lc nk lf nv lj nw ln nx lr ny nz oa ob bi translated">将一个<code class="fe no np nq lt b">className</code>或<code class="fe no np nq lt b">...rest</code>道具向下传递到组件的最外层元素，使其样式可扩展</li></ul><p id="59a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看<a class="ae kv" href="https://codepen.io/kitsonbroadhurst/pen/ZEbxwJj?editors=0010" rel="noopener ugc nofollow" target="_blank">这个Codepen的一个活生生的例子</a>。</p><p id="523c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">干杯</p><p id="d218" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">装备</p><div class="oc od gp gr oe of"><a href="https://medium.com/javascript-in-plain-english/youre-missing-a-trick-with-your-styled-components-in-react-e3dfcd586f75" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">您错过了React中样式化组件的一个技巧</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">为组件添加显示名称以帮助识别它们</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kp of"/></div></div></a></div><div class="oc od gp gr oe of"><a href="https://medium.com/@kitson.broadhurst/simple-form-validation-with-react-hooks-usestate-and-useeffect-57620d808cc8" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">带有React挂钩的简单表单验证— useState和useEffect</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">自从Hooks做出反应以来，我们都在学习编写函数组件的新的小技巧和细微差别。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot kp of"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Implement a Countdown Timer with RxJS in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以角度RxJS实现倒计时定时器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/implement-a-countdown-timer-with-rxjs-in-angular-3852f21a4ea0?source=collection_archive---------1-----------------------#2020-11-23">https://javascript.plainenglish.io/implement-a-countdown-timer-with-rxjs-in-angular-3852f21a4ea0?source=collection_archive---------1-----------------------#2020-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6861" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实现一个简单的角度倒计时</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e6d972200abf11c6cb8c36b3d1862d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IQj_MIVMDJkTDNjB"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ederpozo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eder Pozo Pérez</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b60e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们经常为一些特殊事件倒计时。</p><p id="4a01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本指南中，我将向你展示如何使用RxJS在Angular中实现一个简单有效的倒计时器。</p><p id="1dd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，2020年是一个过山车年。我们实施一个到2021年的倒计时器怎么样？我们将实现的倒计时定时器将更新到秒。</p><p id="76df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事不宜迟，让我们直接进入代码。</p><h1 id="ae56" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建角度应用程序</h1><p id="e5d9" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们将通过CLI使用以下命令创建一个简单的Angular应用程序。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5a45" class="mu lt iq mq b gy mv mw l mx my">$ ng new count-down-timer --defaults</span></pre><p id="c9cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦应用程序被创建，进入它的根目录。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7222" class="mu lt iq mq b gy mv mw l mx my">$ cd count-down-timer</span></pre><p id="bcff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后添加一个名为<strong class="ky ir"> <em class="mz">的新组件count down</em></strong>，它将包含使用以下CLI命令的倒计时定时器的逻辑。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="025b" class="mu lt iq mq b gy mv mw l mx my">ng g c count-down<br/></span></pre><p id="b9b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个阶段，你的项目结构应该和这个差不多。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/990ecb96741a0c714ec7fdc7384f2f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wxJucCJoohdMwrXzCm6PYQ.png"/></div></div></figure><h1 id="34a4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">实施倒计时逻辑</h1><p id="fb5c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">倒计时的逻辑并不复杂。我们需要找出D日(即我们活动的那一天)和当前时间之间的差异。</p><p id="2150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们得到的时间差是以毫秒为单位的，因此我们将把它转换成相应的单位，即天、小时、分钟和秒。</p><p id="5d26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了确保时间保持每秒更新，我们将使用订阅间隔，它将获得每秒的时间差。</p><p id="1c7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了避免应用程序中的内存泄漏，每当<strong class="ky ir"> <em class="mz">倒计时</em> </strong>组件被销毁时，我们将取消订阅。</p><p id="1f8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">组件代码应该如下所示。我更注重可读性而不是效率，所以如果你愿意，可以随意修改。</p><p id="ca37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我不会详细讨论时差计算，但是，我在结论部分提供了一篇关于时差计算的文章的链接。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="c30b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在相应的模板代码中，即<strong class="ky ir"><em class="mz">count-down.component.html</em></strong>，我们将使用如下插值以各自的单位显示开始日的时间。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="55b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">向组件的样式模板添加一些CSS样式，如下所示。样式将我们的输出居中，并调整字体大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="a90b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了保持简单，CSS非常简单。请随意调整。</p><h1 id="80c2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">显示计时器</h1><p id="3f41" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了显示D日的剩余时间，我们将把<strong class="ky ir"> <em class="mz">倒计数</em> </strong>子组件注入到<strong class="ky ir"><em class="mz">app.component.html</em></strong>父组件中，如下所示。</p><p id="0c43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">删除app.component.html中<strong class="ky ir"> <em class="mz">的所有代码，替换为下面的单行代码。</em></strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h1 id="1f23" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">倒计时开始了</h1><p id="2e60" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要在默认浏览器中提供应用程序，可以运行以下命令。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7fac" class="mu lt iq mq b gy mv mw l mx my">ng serve -o</span></pre><p id="a977" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是倒计时器的运行情况。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/ab901b7cd2f8988c0fedb4f8018d86ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*PbpRpxuXfjlU5Qfhy45v5w.gif"/></div></figure><h1 id="4f94" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="8ca6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这就是你要做的，一个简单的倒数计时器更新到秒的实现。</p><p id="9e6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得用JavaScript计算时差的全面指南，你可以看看Javascript Jeep的指南🚙💨 <a class="ae kv" href="https://medium.com/javascript-in-plain-english/find-difference-between-dates-in-javascript-80d9280d8598" rel="noopener">此处</a>。</p><h2 id="bf99" class="mu lt iq bd lu ng nh dn ly ni nj dp mc lf nk nl me lj nm nn mg ln no np mi nq bi translated">进一步阅读</h2><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-multi-page-job-application-form-using-angular-f0b1640f4195"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">使用Angular创建多页工作申请表</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">一步一步的教程，以建立一个多页的工作申请表使用Angular和SurveyJS，一个免费的，开源的…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="od l"><div class="oe l of og oh od oi kp nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://plainenglish.io/blog/create-an-employee-satisfaction-survey-using-angular-and-store-results-in-a-mongodb-collection" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">使用Angular创建员工满意度调查，并将结果存储在MongoDB集合中</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">一步一步的教程来建立一个员工满意度调查使用Angular和SurveyJS，一个免费的，开源的…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">简明英语. io</p></div></div><div class="od l"><div class="oj l of og oh od oi kp nu"/></div></div></a></div><p id="46fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mz">更多内容看</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mz">说白了就是</em> </strong> </a> <em class="mz">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mz">免费周报</em> </strong> </a> <em class="mz">。关注我们关于</em> <a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mz">推特</em> </strong> </a>，<a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mz">LinkedIn</em></strong></a><em class="mz">，</em><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mz">YouTube</em></strong></a><em class="mz">，以及</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mz">不和</em> </strong> </a> <strong class="ky ir"> <em class="mz">。</em>T53】</strong></p><p id="5399" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="mz">对缩放您的软件启动感兴趣</em> </strong> <em class="mz">？检查出</em> <a class="ae kv" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mz">电路</em> </strong> </a> <em class="mz">。</em></p></div></div>    
</body>
</html>
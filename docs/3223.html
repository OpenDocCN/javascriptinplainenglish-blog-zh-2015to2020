<html>
<head>
<title>How to build a website with only JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何只用JavaScript搭建一个网站</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-website-with-only-javascript-553406040dc9?source=collection_archive---------1-----------------------#2020-09-11">https://javascript.plainenglish.io/how-to-build-a-website-with-only-javascript-553406040dc9?source=collection_archive---------1-----------------------#2020-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7677312ed89921bfa0b7d9ba3add535d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mqeM-1p11IOwuhAMkBC64g.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — ©JavaScript-First: HTTP</figcaption></figure><p id="9667" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上通用的语言之一。它允许美国开发者建立网站、服务器、移动应用、硬件甚至人工智能。因此，它是世界上最流行的编程语言之一就不足为奇了。</p><p id="9c7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将讨论什么是HTTP，并通过构建HTTP服务器来学习JavaScript，而不是先学习HTML和CSS。上图是我们将要建造的一个例子。</p><p id="51eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="lb">请注意:</em> </strong> <em class="lb">绝命毒师部分在本文中有意略去，是为了驱动好奇心，鼓励你自己构建一些东西，而不是促成教程地狱。所有代码都可以在</em> <a class="ae kc" href="https://github.com/JavaScript-Open-Curriculum-Foundation/JavaScript-First/tree/master/02-ClientVServer" rel="noopener ugc nofollow" target="_blank"> <em class="lb"> JavaScript第一资源库</em> </a> <em class="lb">中找到，并且是您在远程开发环境中学习的开源书籍的一部分，使用</em><a class="ae kc" href="https://gitpod.io/" rel="noopener ugc nofollow" target="_blank"><em class="lb">git pod</em></a><em class="lb">。</em></p><h1 id="90eb" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">JavaScript &amp; Node简介</h1><p id="3576" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">如果您不熟悉JavaScript或Node.js生态系统，我写了一篇关于它的文章。请随意查看下面的链接。</p><div class="mf mg gp gr mh mi"><a href="https://medium.com/swlh/terminal-basics-and-installing-nvm-node-js-631cf9476ac4" rel="noopener follow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">终端基础知识和安装NVM和节点。射流研究…</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">2020年学习如何编码</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw jw mi"/></div></div></a></div><p id="35ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不了解JavaScript或者还是新手，请注意我们的例子使用了ES6特性和node中实验性标志后面的特性。节点时这些都不可用。JS首先推出了ES 5标准。</p><h1 id="15f8" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">HTTP:了解HTTP和HTML</h1><p id="b9b4" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在我们开始编码之前，让我们通过观看幻灯片的内容来快速了解一下什么是HTTP。这张幻灯片中的术语旨在帮助解释我们将使用的HTTP方法。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/c2ea574c92a6c9cd8a47dd1d20cbeab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*PhQFL_emf1BJf8Qc9n0avg.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — ©JavaScript-First: <a class="ae kc" href="https://github.com/HansUXdev/JavaScript-First/blob/master/02-ClientVServer/01-HTTP/readme.md" rel="noopener ugc nofollow" target="_blank">HTTP Slides are accessible for the blind here</a></figcaption></figure><blockquote class="nc"><p id="c832" class="nd ne iq bd nf ng nh ni nj nk nl la dk translated">更简单地说:</p></blockquote><blockquote class="nm nn no"><p id="e65f" class="kd ke lb kf b kg np ki kj kk nq km kn nr ns kq kr nt nu ku kv nv nw ky kz la ij bi translated">“当你，读者，正在阅读这篇文章时，浏览器(客户机)正在向服务器发出请求。然后，服务器以HTML的形式发送一个响应(200 HTTP ),显示其内容被设置为HTML的页面</p></blockquote><p id="04d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将构建一个简单的HTTP服务器，向客户机(浏览器)发送HTML。</p><h2 id="1b37" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">什么是HTML</h2><p id="b51c" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">不管你在twitter上读到什么，或者这些人在哪个公司工作，HTML都不是一种编程语言。它代表超文本标记语言，因为它是一种标记语言。其创建原因的简短版本是为了让学者们能够在地理空间中通过超文本/超链接共享文档。做这个项目或者做web开发需要知道的HTML，99%都可以用1分钟，或者一张GIF解释清楚。另外的1%归结于项目需求研究&amp;实践经验。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/70d2dcd9e9276d666adf784ccf83f325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/1*c89grhY1YEbDSbpt3iZG_w.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — ©JavaScript-First: Explain HTML</figcaption></figure><h1 id="f977" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">关于项目:</h1><p id="09dd" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们要看的第一个例子是如何用<code class="fe ok ol om on b">fs</code>模块读取一个html文件，并用<code class="fe ok ol om on b">http</code>模块将它发送给客户机。两者都内置于node的核心API中。然后，我们将多次重构以启用ESM模块，而不是使用require。</p><p id="d34c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">本文目标:<br/> </strong>到本文结束时，读者应该能够:</p><p id="03e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1.区分客户端和服务器。</p><p id="e2f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.描述什么是http以及如何使用node的HTTP方法。</p><p id="c4d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.解释什么是HTML以及如何在模板字符串中使用它。</p><p id="62c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.识别HTML基本语法以及如何检查。</p><p id="97a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">5.解释如何使用HTTP将HTML从服务器发送到浏览器</p><p id="0703" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">6.演示如何使用node的“fs”方法读取HTML和“http”方法创建服务器。</p><p id="11a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">7.在服务器端，使用bootstrap 5和普通javascript以类似于<em class="lb">react</em>的方式创建简单的函数，这些函数使用模板文字组成html布局和组件。</p><h1 id="ac4f" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">最终目录应该是这样的。</h1><p id="b502" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们要看的第一个例子是如何用<code class="fe ok ol om on b"><a class="ae kc" href="https://nodejs.org/api/fs.html" rel="noopener ugc nofollow" target="_blank">fs</a></code>模块读取一个html文件，并用<code class="fe ok ol om on b"><a class="ae kc" href="https://nodejs.org/api/http.html" rel="noopener ugc nofollow" target="_blank">http</a></code>模块将其发送给客户端。两者都内置于node的核心API中。</p><p id="c835" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个<code class="fe ok ol om on b">index.html</code>文件，并用任何有效的html填充它。然后创建一个名为<code class="fe ok ol om on b">index.js</code>的文件，将下面的代码放入其中，用<code class="fe ok ol om on b">npx nodemon index.js</code>运行它。</p><p id="b99d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单地说，我们正在导入或“要求”我前面提到的内置http方法。然后我们用它来创建一个基本服务器，并使用一个<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">回调函数</a>。然后，我们将检查请求对象的url，以确保它是否指向带有<code class="fe ok ol om on b">‘/’</code>的主页。如果这是真的，我们将读取html文件，写入http头，写入数据并结束响应。服务器运行在端口7000上。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/b4cf36aa6494b7f525ce95ea7a02e266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pGZEH2zpOu-NT-n-uEbkKw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — ©JavaScript-First:</figcaption></figure><p id="1814" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在你让它工作之后，我们将把它重新命名为<code class="fe ok ol om on b">index.mjs</code>。删除那个愚蠢的html文件，因为我们永远不会使用它。</p><h2 id="462d" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">最终的目录应该是什么样子。</h2><p id="d0ae" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">如你所见，没有HTML或CSS文件。这是因为所有的html都将在服务器端用普通的JavaScript和基本的节点API方法生成。任何css或客户端JavaScript要么在<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">模板字符串</a>中，要么由CDN提供服务。</p><pre class="my mz na nb gt op on oq or aw os bi"><span id="c2a0" class="nx ld iq on b gy ot ou l ov ow">.<br/>├── readme.md<br/>├── index.mjs<br/>├── package.json<br/>├── layout/<br/>│   ├── main.mjs<br/>│   ├── template.mjs<br/>├── pages/<br/>│   ├── home.mjs<br/>│   ├── about.mjs<br/>├── components/<br/>│   ├── nav.mjs<br/>├── util/<br/>│   ├── helpers.mjs</span></pre><h2 id="6592" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤1:使用带有package.json的NPM脚本运行ESM模块。</h2><p id="c1af" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们将添加一个启动脚本，使用nodemon运行<code class="fe ok ol om on b">index.mjs</code>文件，以观察变化并重新加载，添加实验模块。</p><pre class="my mz na nb gt op on oq or aw os bi"><span id="54a1" class="nx ld iq on b gy ot ou l ov ow">"scripts": {<br/>    "start": "npx nodemon --experimental-modules index.mjs"<br/>},</span></pre><p id="27e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将在<code class="fe ok ol om on b">index.mjs</code>中添加以下代码。代码可以在<a class="ae kc" href="https://raw.githubusercontent.com/HansUXdev/JavaScript-First/master/02-ClientVServer/01-HTTP/code/simpleHTTP.js" rel="noopener ugc nofollow" target="_blank">这里找到</a>。</p><p id="c1ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，来解释一下这是怎么回事。我们正在导入或“要求”内置的http。我们稍后将对此进行重构，以使用ESM导入。然后我们用它来创建一个基本的服务器，并使用一个回调函数来设置服务器对浏览器请求的响应。服务器运行在端口8080上。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/46335a1b99eb32ef61f575f4699e70ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqKOFiqpfEjSMysFluVOBQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — Simple vanilla JavaScript Server</figcaption></figure><blockquote class="nc"><p id="85cd" class="nd ne iq bd nf ng nh ni nj nk nl la dk translated">为什么不用模板引擎呢？</p></blockquote><p id="9a40" class="pw-post-body-paragraph kd ke iq kf b kg np ki kj kk nq km kn ko ns kq kr ks nu ku kv kw nw ky kz la ij bi translated">事情是这样的。<br/>我们其实并不<strong class="kf ir">需要</strong> <em class="lb">他们</em>。另外，在许多方面，这实际上更强大、更快，而且学习曲线更短，因为没有引入新的语法。</p><p id="24f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就安全性而言，无论您选择哪个方向，都有缺点，模板引擎增加了另一个依赖性，而这将迫使您维护一个小的字符串库来整理和验证html输出，这在本文中不涉及。</p><h2 id="81d0" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤1:使用带有package.json的NPM脚本运行ESM模块。</h2><p id="448a" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们将添加一个启动脚本，用nodemon运行<code class="fe ok ol om on b">index.mjs</code>文件，以观察变化并重新加载，添加实验模块。</p><pre class="my mz na nb gt op on oq or aw os bi"><span id="8786" class="nx ld iq on b gy ot ou l ov ow">"scripts": {<br/>    "start": "npx nodemon --experimental-modules index.mjs"<br/>},</span></pre><p id="442d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要运行该项目，我们只需运行<code class="fe ok ol om on b">npm start</code>并打开浏览器到<a class="ae kc" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> localhost:8000 </a>。</p><h2 id="70cd" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤2:带有函数和模板文字的服务器端布局</h2><blockquote class="nm nn no"><p id="39b4" class="kd ke lb kf b kg kh ki kj kk kl km kn nr kp kq kr nt kt ku kv nv kx ky kz la ij bi translated">如果我告诉你，你也不需要反应？<br/>如果我说我们可以通过用一个基于我们定义的参数返回html的函数包装模板字符串来重构上面的内容，会怎么样？</p></blockquote><p id="b996" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在gif中，我们通过创建一个名为<code class="fe ok ol om on b">HtmlTemplateString()</code>的函数来做到这一点。</p><p id="6553" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用这个函数来创建一个基本的布局生成器。我们所做的只是简单地传递页面上的页眉、正文和页脚的相关html，方法是调用这个函数，将值作为参数，并将结果存储在某个变量中。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/be3e16236ef8c59524510203b675e72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/1*sbCAL0zANB1BcOXjuPmfuw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — Simple vanilla JavaScript Server</figcaption></figure><p id="f8f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们甚至可以将函数传递到这些参数中，并在服务器上创建类似react的组件，而无需任何主要框架。</p><h2 id="5140" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤3:用实用程序重构</h2><p id="d26b" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">为了使这段代码更具可重用性，我们必须针对各种实用函数再次重构它。在这种情况下，我们将创建一个函数来编写http头，并发送带有少量样板文件的最终html。</p><p id="ee38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是编写下面的示例页:</p><pre class="my mz na nb gt op on oq or aw os bi"><span id="3d64" class="nx ld iq on b gy ot ou l ov ow">res.writeHead(200, {<br/>'Content-Type': 'text/html',<br/>'Content-Length': page1.length,<br/>'Expires': new Date().toUTCString()<br/>})<br/>res.end(page1);</span></pre><p id="860a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将把它包装在一个继承response对象的函数中，并使<code class="fe ok ol om on b">page1</code>成为一个参数，既可以直接使用，也可以用作验证html的回调。最后，我们将这个函数保存在<code class="fe ok ol om on b">util/helpers.mjs</code>中。如果你选择走这条路，这将有助于增加其他实用功能。</p><pre class="my mz na nb gt op on oq or aw os bi"><span id="3bd4" class="nx ld iq on b gy ot ou l ov ow">export const headers = (data,response) =&gt; {<br/>  <strong class="on ir">response</strong>.writeHead(200,{<br/>    'Content-Type': 'text/html',<br/>    'Content-Length': <strong class="on ir">data</strong>.length,<br/>    'Expires': new Date().toUTCString()<br/>  })<br/>  <strong class="on ir">response</strong>.end(<strong class="on ir">data</strong>)<br/>}</span></pre><p id="edd4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将返回index.mjs，将我们的服务器代码包装在一个async IIFE中，并为每个页面使用一个switch语句，并调用其中的header函数。<em class="lb">我们还没有定义“关于”页面…所以这显然会出错。但是这就是为什么你想在盲目复制代码之前完整地阅读这篇文章。</em></p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/387dcdc20c039e83b319505d7de2dbd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ksZlyi4du9biJb3qT6Mccg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — Simple vanilla JavaScript Server</figcaption></figure><h2 id="7c55" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤4:使用模板字符串创建可重用的布局</h2><p id="12ae" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">接下来，我们将使用<a class="ae kc" href="https://marketplace.visualstudio.com/items?itemName=HansUXdev.bootstrap5-snippets" rel="noopener ugc nofollow" target="_blank"> Bootstrap 5扩展</a>使用命令<code class="fe ok ol om on b">!b5-$</code>快速搭建出一个可重用的模板，然后按tab键构建出模板，包括一个用于框架的css和零JavaScript依赖关系的cdn和自定义样式，还有其他可用的模板，如masonry，但我们在这里保持简单。</p><p id="30f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们将编辑我们想要的html。</p><p id="1bd0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的例子中，我简单地添加了一个标题、导航、正文和页脚、参数，稍后我们将把其他功能组件作为参数传递给它们。我们将把这个代码存储在<code class="fe ok ol om on b">layout/main.mjs </code>中。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/2d3e85491d64cf68920aad3ae3b270dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PNdfr2-AJw1H3bFag-UxjA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — Simple vanilla JavaScript Server</figcaption></figure><h2 id="9c19" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤5:创建服务器端导航链接组件</h2><p id="5f94" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们要做的第一件事是创建可重用的组件，从一组对象(数据)生成页面。我们将把这段代码放在<code class="fe ok ol om on b">components/nav.mjs</code>中。这个函数生成的html将被传递到我们创建的下一个组件中。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/9464fc4b59ae151fd35208f3d963529d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t4cPiFQeMXNcqEp2.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://medium.com/u/1d679de5005f?source=post_page-----1730835a9e87----------------------" rel="noopener">Hans McMurdy</a> — Simple vanilla JavaScript Server</figcaption></figure><h2 id="3bfd" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤6:创建服务器端导航组件</h2><p id="06b6" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在同一个文件<code class="fe ok ol om on b">components/nav.mjs</code>中，在前一个组件下面的新行上，我们将创建一个新组件。这将是一个返回html的简单函数，而不是之前那个遍历数组的函数。在return语句中，我们将添加<code class="fe ok ol om on b">``</code>，在模板字符串中，我们将键入<code class="fe ok ol om on b">b5-navbar-default</code>并点击tab。这将为我们的主导航组件生成所需的html，我们只需适当地编辑它。</p><p id="e246" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一个可重用的Nav()接受两个参数，内容和徽标。<br/>内容是我们用来将前一个组件传入的参数。<br/> Logo只是用于不要脸的品牌推广。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/a7670d8eb726edbd7eda21f4913dd659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fCfhq4iQqccZbuJdchT6w.png"/></div></div></figure><h2 id="6a14" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤7:构建我们的导航栏</h2><p id="a3df" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">现在我们将这两者放在一起，然后在一个可重用的导航中使用，它接受两个参数，内容和徽标。在同一个文件<code class="fe ok ol om on b">components/nav.mjs</code>里。理想情况下，您希望从数据库中提取页面数据，但我们会保持简单，并将其构建在同一个文件中。</p><p id="4f74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们创建一个带有名称和url的对象数组，如果你愿意，你也可以添加图标和数据等信息，但我们不会在这里讨论。然后我们将创建一个<code class="fe ok ol om on b">links</code>变量来存储每个NavLink的html，并将主页作为数据的参数传递。最后，我们将把这个变量传递给我们的<code class="fe ok ol om on b">Nav()</code>组件，并将最终的html存储在一个名为NAV的变量中。我们将导出该变量，并在每个页面上重用它。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pc"><img src="../Images/e2808df8dae12b7ff2fd48a1dcdcfde1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqW0ykJ-tFUfG5eW-u-UgA.png"/></div></div></figure><h2 id="5662" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">步骤8:构建我们的页面</h2><p id="804e" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">接下来，我们将在<code class="fe ok ol om on b">pages/home.mjs</code>中构建我们的主页。我们将从导入我们的布局、<code class="fe ok ol om on b">HTML()</code>和可重用的<code class="fe ok ol om on b">NAV()</code>开始。然后用<code class="fe ok ol om on b">&lt;title&gt;#JavaScriptFrist Bootstrap Site&lt;/title&gt;</code>在第一个参数中添加我们的元数据。那么我们将只使用模板的主体参数。我们没有构建足够复杂的东西来为我们的布局函数<code class="fe ok ol om on b">HTML()</code>使用页脚参数。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/b134275618b5c154ab6b888484e5e907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dtXn3IZTEl2b1OcW2c_7SA.png"/></div></div></figure><h2 id="5bcf" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">第九步:把所有东西放在一起</h2><p id="1027" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">现在我们再回到<code class="fe ok ol om on b">./index.mjs</code>把这些都拼起来。<br/>你会注意到我注释掉了一些代码。<br/>这是一个在服务器端使用fetch在about页面上生成动态砖石布局的例子。我不会在这篇文章中涉及这些，因为我想给你留下一些自己思考和研究的东西，或者一个加入我的<a class="ae kc" href="https://www.twitch.tv/hansoncoding/about" rel="noopener ugc nofollow" target="_blank">抽动课程</a>的理由。</p><p id="52eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我将只导入主页并在<code class="fe ok ol om on b">headers()</code>中调用它。这样，当我们转到<code class="fe ok ol om on b">something.com/</code>时，它将呈现出我们的页面。</p><figure class="my mz na nb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/fd06993229df43ff851544897a00966e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6lUX2Fj5noqcMMda2_SYw.png"/></div></div></figure><blockquote class="nc"><p id="ca75" class="nd ne iq bd nf ng nh ni nj nk nl la dk translated"><em class="pd">感谢看完这个字吐槽。</em></p></blockquote><p id="3a64" class="pw-post-body-paragraph kd ke iq kf b kg np ki kj kk nq km kn ko ns kq kr ks nu ku kv kw nw ky kz la ij bi translated">我不在乎掌声，但如果你觉得这篇文章有趣，在下面引发一场对话，如果你不同意，那也很酷。但不管怎样，让我们保持文明和建设性的对话，让网络成为每个人更好的地方。</p><p id="aab0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您喜欢阅读这篇文章，可以考虑关注我，因为我将写一篇关于HTTPS和设置SSL的后续文章。</p><p id="7b11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不知道什么是SSL/TSL或HTTPS，看看我以前写的一篇文章，这样你就会明白为什么它很重要，为什么应该尽可能在每个网站上使用它。</p><div class="mf mg gp gr mh mi"><a href="https://medium.com/swlh/https-medium-com-swlh-lets-encrypt-securing-the-web-for-all-5b50842ecead" rel="noopener follow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">让我们加密:保护网络</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">抛开自由市场神话&amp;保护网络</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">medium.com</p></div></div><div class="mr l"><div class="pe l mt mu mv mr mw jw mi"/></div></div></a></div><h2 id="329f" class="nx ld iq bd le ny nz dn li oa ob dp lm ko oc od lq ks oe of lu kw og oh ly oi bi translated">简单英语的JavaScript</h2><p id="ccab" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">你知道我们有三份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">寻找一切的链接plainenglish.io </strong> </a>！</p></div></div>    
</body>
</html>
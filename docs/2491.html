<html>
<head>
<title>BootstrapVue — File Input</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BootstrapVue —文件输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/bootstrapvue-file-input-a5b3a721e6c?source=collection_archive---------1-----------------------#2020-06-29">https://javascript.plainenglish.io/bootstrapvue-file-input-a5b3a721e6c?source=collection_archive---------1-----------------------#2020-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ed2e102bcd88d2aaaa24fd5316ea0c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kQbbA0_oonIbY7rc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pafuxu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kouji Tsuru</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="be4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了制作好看的Vue应用，我们需要设计组件的样式。</p><p id="4049" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使我们的生活更容易，我们可以使用内置样式的组件。</p><p id="6d6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用BootstrapVue添加文件输入。</p><h1 id="7128" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">文件上传</h1><p id="1e78" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">b-form-file</code>组件添加一个文件上传小部件。</p><p id="2a90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ca89" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file<br/>      v-model="file"<br/>      :state="Boolean(file)"<br/>      placeholder="choose file..."<br/>      drop-placeholder="drop file..."<br/>    &gt;&lt;/b-form-file&gt;<br/>    &lt;p&gt;{{ file ? file.name : '' }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="c73c" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  data(){<br/>    return {<br/>      file: undefined<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="2ab0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">b-form-file</code>组件让我们添加一个文件输入。</p><p id="8b55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">v-model</code>获取选中的文件对象并将其绑定到<code class="fe me mf mg mh b">file</code>属性。</p><p id="06a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">state</code>用于设置验证状态。</p><p id="2900" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">placeholder</code>是为常规文件输入显示的占位符。</p><p id="3168" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">drop-placeholder</code>是拖放文件时显示的占位符。</p><p id="fdc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在它下面显示文件名。</p><p id="1888" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">multiple</code>道具让用户添加多个文件。</p><p id="ce4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，丢弃模式是启用的。</p><p id="0f7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">no-drop</code>道具来禁用掉文件。</p><h1 id="d842" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">限制文件类型</h1><p id="dd7d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以限制可以上传的文件类型。</p><p id="e72b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们只需设置<code class="fe me mf mg mh b">accept</code>道具。</p><p id="b3b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="58d2" class="mq lc iq mh b gy mr ms l mt mu">&lt;b-form-file accept="image/jpeg, image/png, image/gif"&gt;&lt;/b-form-file&gt;</span></pre><p id="4248" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="713d" class="mq lc iq mh b gy mr ms l mt mu">&lt;b-form-file accept=".jpg, .png, .gif"&gt;&lt;/b-form-file&gt;</span></pre><p id="af23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以设置文件的mime类型或文件扩展名。</p><h1 id="0abe" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">胶料</h1><p id="ff8c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">文件上传框的大小也可以改变。</p><p id="f55a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">size</code>道具让我们改变大小。<code class="fe me mf mg mh b">'sm'</code>代表小尺寸，<code class="fe me mf mg mh b">'lg'</code>代表大尺寸。</p><p id="e4d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们得到默认的大小。</p><p id="2115" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="af50" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file v-model="file" :state="Boolean(file)" size="sm"&gt;&lt;/b-form-file&gt;<br/>    &lt;p&gt;{{ file ? file.name : '' }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2a62" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      file: undefined<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><h1 id="7966" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">文件名格式化程序</h1><p id="ff3e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以按照自己喜欢的方式格式化所选文件的文件名。</p><p id="e741" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以创建一个函数。</p><p id="9bf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e54" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file multiple :file-name-formatter="formatNames"&gt;&lt;/b-form-file&gt;<br/>    &lt;p&gt;{{ file ? file.name : '' }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="cdba" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  methods: {<br/>    formatNames(files) {<br/>      if (files.length === 1) {<br/>        return files[0].name;<br/>      } else {<br/>        return `${files.length} files chosen`;<br/>      }<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="110b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">files</code>参数是一个带有所选文件的类似数组的对象。</p><p id="2550" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以检查<code class="fe me mf mg mh b">length</code>属性并返回我们想要显示的字符串。</p><h1 id="0931" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用作用域槽格式化文件名</h1><p id="92ca" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在选择文件时显示文本之外的内容，我们可以在槽中添加项目。</p><p id="945f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f00d" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file multiple&gt;<br/>      &lt;template slot="file-name" slot-scope="{ names }"&gt;<br/>        &lt;b-badge&gt;chosen file: {{ names[0] }}&lt;/b-badge&gt;<br/>        &lt;b-badge v-if="names.length &gt; 1" variant="dark" class="ml-1"&gt;{{ names.length }} files chosen&lt;/b-badge&gt;<br/>      &lt;/template&gt;<br/>    &lt;/b-form-file&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="8890" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  name: "App"<br/>};<br/>&lt;/script&gt;</span></pre><p id="f87c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用自己的内容填充<code class="fe me mf mg mh b">file-name</code>槽。</p><p id="8cb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">names</code>数组让我们访问文件名。</p><h1 id="c196" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自（动）调焦装置</h1><p id="ec3b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">autofocus</code>属性，使文件输入在加载或显示在<code class="fe me mf mg mh b">keep-alive</code>组件中时成为焦点。</p><h1 id="2d33" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">清除文件选择</h1><p id="a847" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过将文件对象设置为<code class="fe me mf mg mh b">null</code>或<code class="fe me mf mg mh b">undefined</code>来清除文件选择。</p><p id="89bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="225b" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file v-model="file"&gt;&lt;/b-form-file&gt;<br/>    &lt;b-button @click="file = undefined"&gt;Reset file input&lt;/b-button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="728d" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      file: undefined<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="fc9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需将<code class="fe me mf mg mh b">file</code>设置为<code class="fe me mf mg mh b">undefined</code>来清除输入。</p><p id="ecf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以通过为文件输入设置一个ref来清除它，然后对它调用<code class="fe me mf mg mh b">reset</code>。</p><p id="6e55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6046" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-form-file v-model="file" ref="file-input" class="mb-2"&gt;&lt;/b-form-file&gt;<br/>    &lt;b-button @click="clearFiles"&gt;Reset file input&lt;/b-button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3ade" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      file: undefined<br/>    };<br/>  },<br/>  methods: {<br/>    clearFiles() {<br/>      this.$refs["file-input"].reset();<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="fc64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这与通过清除模型来重置是一样的。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ae569a71630263c1b2b8f082616243ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ui959UBJ7VzRRvWH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@malyushev?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Victor Malyushev</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b38f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1c02" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">BootstrapVue带有一个文件输入组件。</p><p id="7ca8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它做所有我们能想到的事情，比如放下文件、选择文件和清除文件选择。</p><h2 id="62ed" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="db07" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道，解码</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Best of Modern JavaScript — Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华——地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-maps-7db0744b8943?source=collection_archive---------12-----------------------#2020-10-30">https://javascript.plainenglish.io/best-of-modern-javascript-maps-7db0744b8943?source=collection_archive---------12-----------------------#2020-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8921d46c903b23af1ae41647c23abc18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WfXGnGxWl1pimlcn"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rrruthie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ruthie</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="099c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何以各种方式使用地图。</p><h1 id="da84" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">映射到JSON</h1><p id="acc5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">地图可以转换成JSON对象。</p><p id="b09e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将spread运算符转换成数组。</p><p id="1931" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e88f" class="mn lc iq mj b gy mo mp l mq mr">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="9a93" class="mn lc iq mj b gy ms mp l mq mr">const arr = [...map];</span></pre><p id="2c2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为映射是可迭代的，所以我们可以将映射展开成一个键值对数组。</p><p id="8e76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们这样做了，我们就可以用<code class="fe mt mu mv mj b">JSON.stringify</code>将数组转换成JSON字符串:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6423" class="mn lc iq mj b gy mo mp l mq mr">console.log(JSON.stringify(arr));</span></pre><p id="c594" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7e60" class="mn lc iq mj b gy mo mp l mq mr">[["foo","one"],["bar","two"],["baz","three"]]</span></pre><p id="0af5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">JSON.parse</code>和<code class="fe mt mu mv mj b">Map</code>构造函数将键值对数组的字符串化数组转换成一个映射。</p><p id="059b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b56f" class="mn lc iq mj b gy mo mp l mq mr">const parsed = new Map(JSON.parse(str));</span></pre><p id="1ccf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们拿回原来的地图。</p><h1 id="1cf2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">映射到对象</h1><p id="dffd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过遍历map，然后将键作为属性，将值作为值，从而将map转换为对象。</p><p id="20da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e303" class="mn lc iq mj b gy mo mp l mq mr">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="0544" class="mn lc iq mj b gy ms mp l mq mr">const obj = Object.create(null);<br/>for (const [k, v] of map) {<br/>  obj[k] = v;<br/>}</span></pre><p id="8c15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过将<code class="fe mt mu mv mj b">null</code>传入<code class="fe mt mu mv mj b">Object.create</code>来创建一个没有原型的对象。</p><p id="ff8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过我们的<code class="fe mt mu mv mj b">map</code>循环获取键和值，然后用for-of循环将键设置为属性名，将值设置为值。</p><p id="86c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">JSON.stringify</code>把对象转换成JSON。</p><p id="b98f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4730" class="mn lc iq mj b gy mo mp l mq mr">console.log(JSON.stringify(obj));</span></pre><p id="af32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f2f5" class="mn lc iq mj b gy mo mp l mq mr">{"foo":"one","bar":"two","baz":"three"}</span></pre><p id="b518" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><p id="09e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以调用<code class="fe mt mu mv mj b">JSON.parse</code>将它解析回一个对象。</p><p id="6585" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ab6f" class="mn lc iq mj b gy mo mp l mq mr">const map = new Map()<br/>  .set('foo', 'one')<br/>  .set('bar', 'two')<br/>  .set('baz', 'three');</span><span id="49fd" class="mn lc iq mj b gy ms mp l mq mr">const obj = Object.create(null);<br/>for (const [k, v] of map) {<br/>  obj[k] = v;<br/>}</span><span id="8026" class="mn lc iq mj b gy ms mp l mq mr">const str = JSON.stringify(obj);<br/>console.log(JSON.parse(str));</span></pre><h1 id="bd4d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">地图API</h1><p id="f31d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map</code> API允许我们用键值对数组的可迭代对象创建一个映射。</p><p id="2f74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是可选的。</p><p id="3a2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不把它传入，我们就会创建一个空的地图。</p><p id="eb6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7346" class="mn lc iq mj b gy mo mp l mq mr">const map = new Map([<br/>  ['foo', 'one'],<br/>  ['bar', 'two'],<br/>  ['bar', 'three'],<br/>]);</span></pre><p id="0523" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来绘制地图。</p><p id="ec51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.get</code>方法接受一个字符串键，并返回带有给定键的值。</p><p id="ee2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果在映射中没有这样的键，那么返回<code class="fe mt mu mv mj b">undefined</code>。</p><p id="bfc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.set</code>接受一个键和值作为参数，然后返回添加了新条目的映射。</p><p id="8b2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.has</code>获取一个键并返回一个布尔值，表明该键是否存在。</p><p id="24fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.delete</code>获取一个键并移除给定键的项目。</p><p id="04be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果项目被移除，则返回<code class="fe mt mu mv mj b">true</code>。</p><p id="3093" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，什么也不发生，返回<code class="fe mt mu mv mj b">false</code>。</p><p id="fe1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.size</code>是一个getter方法，返回map中有多少条目。</p><p id="15f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Map.prototype.clear</code>清除地图中的所有条目，不返回任何内容。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/a4de94d7e521d5149a375cde1ce28e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GnNEQ6KVN5-_-Ejo"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@britishlibrary?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">British Library</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="dc0f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cfa7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">地图可以转换成数组和对象。</p><p id="2c0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，它有许多我们可以用来操作和获取地图数据的方法。</p><p id="d901" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
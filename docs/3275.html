<html>
<head>
<title>How to generate mock data with faker.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用faker.js生成模拟数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/faker-js-npm-module-for-generating-fake-data-5dae437ec3a?source=collection_archive---------3-----------------------#2020-09-15">https://javascript.plainenglish.io/faker-js-npm-module-for-generating-fake-data-5dae437ec3a?source=collection_archive---------3-----------------------#2020-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="adc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经常需要假数据。在开发和测试期间，以及演示和培训情况下。为此，我花费了太多宝贵的时间来构建哪怕是很小的数据集，通常是依靠家人和朋友的大理石般的名字、地址和出生日期。想出随机数据并不是那么简单。</p><p id="b5c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，使用faker.js模块，跨多个域和多个地区生成小型或大型数据集变得轻而易举。在这篇文章中，我将简要介绍faker . js——它能做什么，你如何开始使用它，以及你如何在你的浏览器上试用它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a237413ba13993ec2b15f9e9ef9b8e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUG5DuxaFjfo4nQaa6-epA.png"/></div></div></figure><p id="dfb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">faker.js模块支持从Node.js应用程序和在web应用程序中使用。faker.js功能的现场演示可在<a class="ae kx" href="https://cdn.rawgit.com/Marak/faker.js/master/examples/browser/index.html" rel="noopener ugc nofollow" target="_blank">本现场演示</a>中获得。为了更好地了解如何在Node.js应用程序中使用faker.js，请尝试一下<a class="ae kx" href="https://www.katacoda.com/lucasjellema/scenarios/introduction-faker-data-generation" rel="noopener ugc nofollow" target="_blank">这个Katacoda场景</a>，它在您的浏览器中提供了一个动态Node.js &amp; VS代码环境，以及一步一步或一点一点地尝试代码示例的说明。faker.js 的<a class="ae kx" href="https://fakerjsdocs.netlify.app/" rel="noopener ugc nofollow" target="_blank"> API文档也是可用的。</a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ky"><img src="../Images/c08fb00cd28d3106980407775d4dc86e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ld1yMgXYH9wMOdY6ANJeQ.png"/></div></div></figure><p id="cab4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">js是一个JavaScript库，它公开了根据请求生成随机数据的函数。这些函数通常被调用来检索用于生成JSON或CSV文件的值，也可以在现场演示中使用。该模块相当小，相当快，而且易于使用。</p><p id="3b12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用faker.js生成一些假数据的简单例子</p><pre class="km kn ko kp gt kz la lb lc aw ld bi"><span id="3901" class="le lf iq la b gy lg lh l li lj">const faker = require('faker');</span><span id="0ac8" class="le lf iq la b gy lk lh l li lj">let firstName = faker.name.firstName();</span><span id="e5ac" class="le lf iq la b gy lk lh l li lj">let lastName = faker.name.lastName();</span><span id="0f58" class="le lf iq la b gy lk lh l li lj">console.log(`Employee: ${firstName} ${lastName}`);</span></pre><h1 id="f436" class="ll lf iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">域和区域设置</h1><p id="589a" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">faker.js为许多不同的域或名称空间生成数据。每个域都提供一些或许多数据类型。例如，域名会生成以下值:</p><ul class=""><li id="04a2" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">名字</li><li id="2544" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">姓</li><li id="e55e" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">findName</li><li id="a118" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">职位名称</li><li id="1260" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">前缀</li><li id="ebc4" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">后缀</li><li id="4f14" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">标题</li><li id="6f25" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">作业描述符</li><li id="a400" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">工作区域</li><li id="7b4e" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">作业类型</li></ul><p id="1cfe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">faker.js目前支持的域名有:姓名、地址、公司、日期、时间、商业、金融、电话、数据库、互联网、Git、系统、黑客、随机、唯一、Lorem、图像、音乐。这些加在一起会产生70多种数据类型的虚假数据。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/1fa4bd43cfb0edfc32c8970c55729c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JaqO2V9LUiQetJnxbOkOSw.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Overview of the namespaces supported by faker.js</figcaption></figure><p id="a8c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">faker.js生成的数据可能是假的，但也是正确和合理的数据。我的意思是，数据具有预期的格式和适用的有意义的值。例如，国家名称是随机选择的——但它们并不是真的假的。城市名和街道名看起来足够真实，但是是由模仿真实姓名的元素随机组成的。Internet URLs、电子邮件地址和IP地址具有正确的格式，即使它们的实际值是随机生成的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/d7b72c2abc5c5647a2cac55a80a3aa0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-0gmBFlAxm-sZB3xRcIfQ.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">faker.js generates data in localized form and content</figcaption></figure><p id="45c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一些数据仅在特定语言或位置上下文中有意义。不同语言的国家名称、星期和颜色不同，邮政编码、电话号码和街道地址的格式也不同。js支持特定于地区的数据生成。您可以在生成数据之前设置所需的语言环境上下文，这样可以将faker.js引导到正确的语言环境以及相应的值和格式。Faker.js支持近40种语言环境——尽管并非所有数据元素都在这些语言环境中完全本地化了。</p><h1 id="74ba" class="ll lf iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">faker.js入门</h1><p id="b62a" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">Faker.js是NPM的一个模块，每周下载量超过140万。它于大约8年前<a class="ae kx" href="https://github.com/Marak/Faker.js" rel="noopener ugc nofollow" target="_blank">在GitHub </a>上成立，有超过200名贡献者。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/b041a3d9300fe6d25e0076b8f80d8393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVTrX_x7o63niIInHCCyXw.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">faker.js on NPM</figcaption></figure><p id="0338" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">入门当然非常简单。在任何节点应用程序的上下文中，键入</p><pre class="km kn ko kp gt kz la lb lc aw ld bi"><span id="1765" class="le lf iq la b gy lg lh l li lj">npm i faker --save</span></pre><p id="2b05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要安装faker.js模块并将其依赖项保存到package.json。要使用faker.js，您需要做的就是请求该模块并开始调用其数据生成函数。</p><p id="6b42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">值得一提的一个特殊函数是<code class="fe ni nj nk la b">faker.fake()</code>函数，它接受一个字符串，该字符串被评估为“小胡子”表达式，这些表达式被扩展为相应的生成的假数据值。这样的小胡子表达式由花括号<code class="fe ni nj nk la b">{{ and }}</code>组成，并引用faker.js名称空间和数据元素，例如<code class="fe ni nj nk la b">{{name.firstName}}</code>。</p><p id="17a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个简单的代码片段，它需要<em class="nl"> faker.js </em>模块，并从各种名称空间生成假数据:</p><pre class="km kn ko kp gt kz la lb lc aw ld bi"><span id="eda6" class="le lf iq la b gy lg lh l li lj">const faker = require('faker');</span><span id="6ed0" class="le lf iq la b gy lk lh l li lj">let phone = faker.phone.phoneNumber();</span><span id="14e4" class="le lf iq la b gy lk lh l li lj">console.log(`Phone: ${phone}`);</span><span id="d118" class="le lf iq la b gy lk lh l li lj">console.log(`Vehicle: ${faker.vehicle.model()} ${faker.vehicle.type()}`)</span><span id="e483" class="le lf iq la b gy lk lh l li lj">console.log(`Credit Card: ${faker.finance.creditCardNumber()}`)</span><span id="9f6c" class="le lf iq la b gy lk lh l li lj">faker.locale = "ru";</span><span id="b488" class="le lf iq la b gy lk lh l li lj">let firstName = faker.name.firstName();</span><span id="ec4b" class="le lf iq la b gy lk lh l li lj">let lastName = faker.name.lastName();</span><span id="cf48" class="le lf iq la b gy lk lh l li lj">console.log(`Pаботник: ${firstName} ${lastName}`);</span><span id="4d69" class="le lf iq la b gy lk lh l li lj">let month = faker.date.month();</span><span id="eb9a" class="le lf iq la b gy lk lh l li lj">let recentDate = faker.date.recent();</span><span id="20c5" class="le lf iq la b gy lk lh l li lj">console.log(`Month ${month} and Date ${recentDate} `)</span><span id="45db" class="le lf iq la b gy lk lh l li lj">faker.locale = "nl";</span><span id="3b51" class="le lf iq la b gy lk lh l li lj">// use faker moustache expressions as placeholders for generated data</span><span id="dd9b" class="le lf iq la b gy lk lh l li lj">const fakePerson = { "name"      :"{{name.firstName}} {{name.lastName}}"</span><span id="2062" class="le lf iq la b gy lk lh l li lj">, "address"   : { "street" :"{{address.streetName}} {{random.number}}"</span><span id="6bde" class="le lf iq la b gy lk lh l li lj">, "city"   :"{{address.city}}"</span><span id="9070" class="le lf iq la b gy lk lh l li lj">, "country":"{{address.country}}"</span><span id="67f7" class="le lf iq la b gy lk lh l li lj">}</span><span id="8510" class="le lf iq la b gy lk lh l li lj">, "birthdate" : "{{date.past}}"</span><span id="bf2a" class="le lf iq la b gy lk lh l li lj">}</span><span id="82a4" class="le lf iq la b gy lk lh l li lj">// feed stringified representation of JSON object to faker.fake to replace moustache expressions with generated data</span><span id="ed69" class="le lf iq la b gy lk lh l li lj">const person = JSON.parse( faker.fake( JSON.stringify(fakePerson)))</span><span id="84ab" class="le lf iq la b gy lk lh l li lj">console.log(JSON.stringify(person))</span></pre><p id="fc3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个片段的结果是:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/f993a34126fcdf3709387aa62810de67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r5O06zIk1WCmuvYGb8KhjQ.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Outcome of fake data generation snippet</figcaption></figure><p id="7308" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每次再次运行这个代码片段，结果都会不同，因为它是随机生成的。有一个选项来设置随机种子，可以在运行中重复使用，这将导致每次运行的相同数据集。对于演示或测试来说，这可能很方便。</p><p id="f09c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">faker.js社区中有一些关于是否应该用助手函数来扩展该模块的讨论，这些助手函数会生成更大的虚假数据集，甚至是复杂的、巨大的充满生成数据的JSON文档。虽然这很方便，但一些人认为，将现代ES机制与faker.js结合使用，就足以简单地生成更大的数据集。下面是一个生成一个数组的小示例，该数组包含1到50个随机数，每个随机数包含一个伪城市名和1到3个伪街道名:</p><pre class="km kn ko kp gt kz la lb lc aw ld bi"><span id="cb59" class="le lf iq la b gy lg lh l li lj">// create an array with a random number (between 1 and 50) of elements</span><span id="0393" class="le lf iq la b gy lk lh l li lj">const arr = new Array(faker.random.number({min: 1, max: 50})).fill()</span><span id="c1b4" class="le lf iq la b gy lk lh l li lj">// define at each position in the Array an element that has two fake generated properties - one a a city and the other a list of up to three street names</span><span id="0c79" class="le lf iq la b gy lk lh l li lj">const generatedList = arr.map(() =&gt; <br/>( { city: faker.address.city(),<br/>    streets: new Array(faker.random.number({min: 1, max: 3}))<br/>           .fill().map(() =&gt; faker.address.streetName(), 3, true)<br/>  }<br/>))</span></pre></div></div>    
</body>
</html>
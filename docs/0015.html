<html>
<head>
<title>It’s time for you to learn Webpack.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你该学习Webpack了。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/its-time-for-you-to-learn-webpack-45d2b08ae754?source=collection_archive---------0-----------------------#2018-08-05">https://javascript.plainenglish.io/its-time-for-you-to-learn-webpack-45d2b08ae754?source=collection_archive---------0-----------------------#2018-08-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8dff0901a1b24aa1a3ec26a29715b83e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LifSlFHGUENILm8K"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@minkmingle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mink Mingle</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cae3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我用的是<strong class="kc io"> Webpack </strong>。</p><p id="4f43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我已经在<strong class="kc io"> create-react-app (CRA) </strong>到<strong class="kc io"> react-scripts </strong>中使用过它，并且在我接触它们之前已经在其他项目中设置了自定义配置。但是我真的不知道它是如何工作的。我看了配置，我理解它背后的一些想法，但我从未编写过<strong class="kc io"> Webpack </strong>配置，或试图设置自己的配置。这就是本文将要讨论的内容。从没有配置，到将捆绑<strong class="kc io"> HTML </strong>、<strong class="kc io"> CSS </strong>和<strong class="kc io"> Javascript </strong>的基本功能设置。</p><p id="155a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的目标是尽可能地揭开这个过程的神秘面纱，以便Webpack对新开发人员来说更容易理解和友好。</p><p id="835b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你正在使用<strong class="kc io"> React </strong>或另一个需要构建过程的库或框架，并且你想打破对<strong class="kc io"> CRA </strong>的依赖，或者只是对正在进行的魔法感到更舒服，我们将直接开始创建一个项目。因为我是在这个项目的同时写这篇文章的，所以我会一步一步地解释我是如何解决每个问题和研究秘密的。</p><p id="a85d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">随意跟随或使用我建立的github repo 。如果你选择跟随，我特别使用了某些文件的图像，所以它们不能只是复制粘贴。把这些东西打出来将有助于你舒适地犯错误，发现错误，并改正错误。</p><p id="0fab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，把项目安排好-</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="06ce" class="lh li in ld b gy lj lk l ll lm">mkdir webpack-in-plain-english<br/>cd webpack-in-plain-english<br/>npm init -y<br/>mkdir src<br/>touch src/index.js<br/>mkdir src/components<br/>touch src/components/App.js<br/>npm i react react-dom</span></pre><p id="f2b4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们需要一些开发依赖来使这一切工作。对我来说，这就是事情变得混乱的地方，因为这些东西的许多功能开始混淆在一起。我们需要<strong class="kc io"> Webpack </strong>，以及它的朋友<strong class="kc io"> CLI </strong>和<strong class="kc io">开发服务器</strong>。为了在浏览器中实现这一点，我们需要将<strong class="kc io"> es6 </strong>和后面的部分代码转换成<strong class="kc io"> es5 </strong>标准。<strong class="kc io">网袋</strong>不<strong class="kc io">传送</strong>，那是<strong class="kc io"> babel </strong>和<strong class="kc io">装载机</strong>和<strong class="kc io">预设</strong>包裹的工作。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="52fa" class="lh li in ld b gy lj lk l ll lm">npm i -D webpack webpack-cli webpack-dev-server <!-- -->html-webpack-plugin</span><span id="d26d" class="lh li in ld b gy ln lk l ll lm">npm i -D babel-core babel-loader@7 babel-preset-env babel-preset-react</span></pre><p id="3b4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Webpack 本身作为一个包我们不会直接接触，它只是通过我们已经安装的<strong class="kc io"> webpack-cli </strong>包来完成工作，这样我们就可以连接和配置<strong class="kc io"> Webpack </strong>。Webpack  <strong class="kc io"> dev server </strong>包是一个漂亮的工具，它将运行我们的构建过程，并将其提供给浏览器。至于<strong class="kc io">巴别塔</strong>项目，他们真的值得他们自己写，我可能会写这方面的延续，以获得更多关于这些如何工作和不同配置的可能性。</p><p id="7c03" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们刚刚安装的所有东西都需要一些配置。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lo"><img src="../Images/1a42cb845245da68e8b6056209b40ba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q8jehU52f2EuqX6HyZ7CVA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">webpack.config.js</figcaption></figure><p id="af70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">入口是<strong class="kc io"> Webpack </strong>开始抓取文件的地方。本质上，它加载<strong class="kc io"> index.js </strong>，查看它由什么组成，如果它看到<strong class="kc io"> index.js </strong>正在导入其他文件，它将根据它拥有的配置处理这些文件。</p><p id="9757" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">输出让我们定义捆绑的js文件的位置。在这种情况下，我们将使用<strong class="kc io"> node.js </strong> ' <strong class="kc io"> path </strong>模块来定义我们的路径。对象中的第二个键就是文件名。</p><p id="7b1f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">模块是我们定义如何处理Webpack遇到的每个文件的地方。<strong class="kc io">‘rules’</strong>数组包含定义文件类型以及如何处理它们的对象。对于每个规则，您可以指定扩展名的外观、要排除的任何文件夹或文件，以及准备这些文件时要使用的内容。在这个例子中，我们告诉<strong class="kc io"> Webpack </strong>它需要寻找<strong class="kc io">。js </strong>文件扩展名，排除任何在<strong class="kc io"> node_modules </strong>文件夹中的，并使用babel-preset作为其加载程序。</p><p id="bf70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前，配置已经完成。我们需要给我们的<strong class="kc io"> package.json </strong>添加一些脚本，所以我们实际上已经利用了这个配置和<strong class="kc io"> Webpack </strong>的能力。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lp"><img src="../Images/2ca280bd2d61e8dd06a54c193e63cd39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMqK_XGAaZHyJSVDpBVzMA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">package.json</figcaption></figure><p id="3833" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的启动脚本将运行<strong class="kc io"> Webpack </strong> dev服务器，它服务于我们项目的构建，但不将其写入磁盘，而是在内存中执行。我们还指定了我们处于开发模式，我们希望在运行该命令时打开一个浏览器，并且我们希望<strong class="kc io"> Webpack </strong>查看我们的文件，并在有更改时<strong class="kc io">‘热’重新加载</strong>它们。</p><blockquote class="lq lr ls"><p id="76ca" class="ka kb lt kc b kd ke kf kg kh ki kj kk lu km kn ko lv kq kr ks lw ku kv kw kx ig bi translated">注意:对于那些没有意识到的人，<strong class="kc io">热重载</strong>指的是每当发生变化时，代码自动重新编译并在浏览器中重载页面的能力。</p></blockquote><p id="d369" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">build命令会将项目写入磁盘，因为我们使用了production标志，所以它会针对最终用户的使用进行优化。</p><p id="3d04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">既然我们将js加载器定义为'<strong class="kc io"> babel-loader </strong>，我们需要给它一个自己的配置。使用预置让告诉babel如何处理<strong class="kc io"> Javascript </strong>变得如此简单:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/1a4b739efc8619735c520feac221d96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMFLBNFnGT3Vqap-jUW-4w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">.babelrc</figcaption></figure><p id="0a7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于这是关于webpack，而不是实际上关于构建一个应用程序，因此<strong class="kc io"> index.js </strong>和<strong class="kc io"> App.js </strong>文件应该分别如下所示:</p><p id="7a90" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> index.js </strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="7518" class="lh li in ld b gy lj lk l ll lm">import React from 'react'</span><span id="de0a" class="lh li in ld b gy ln lk l ll lm">import ReactDOM from 'react-dom'</span><span id="d9e1" class="lh li in ld b gy ln lk l ll lm">import { App } from './components/App'</span><span id="17b1" class="lh li in ld b gy ln lk l ll lm">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'))</span></pre><p id="eba5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> App.js </strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="5453" class="lh li in ld b gy lj lk l ll lm">import React, { Component } from 'react'</span><span id="a41f" class="lh li in ld b gy ln lk l ll lm">export class App extends Component {</span><span id="aabc" class="lh li in ld b gy ln lk l ll lm"> render() {</span><span id="f5db" class="lh li in ld b gy ln lk l ll lm">  return &lt;p&gt;Hi, I've been packed, and transpiled&lt;/p&gt;</span><span id="70ed" class="lh li in ld b gy ln lk l ll lm"> }</span><span id="07b7" class="lh li in ld b gy ln lk l ll lm">}</span></pre><p id="9a58" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">玛丽娜·切尔尼亚夫斯卡让我注意到我遗漏了index.html的文件。给你，谢谢玛丽娜。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="740a" class="lh li in ld b gy lj lk l ll lm">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt; <br/> &lt;head&gt;  <br/>  &lt;meta charset="UTF-8"&gt;  <br/>  &lt;meta name="viewport" content="width=device-width, initial-  scale=1.0"&gt;  <br/>  &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;     &lt;title&gt;Webpack React&lt;/title&gt;<br/>&lt;/head&gt; <br/>&lt;body&gt;  <br/>  &lt;div id="root"&gt;&lt;/div&gt;<br/>&lt;/body&gt; <br/>&lt;/html&gt;</span></pre><p id="0ae2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单到足以看到我们的脚本和配置是否工作。此时，如果您运行<code class="fe ly lz ma ld b"><strong class="kc io">npm start</strong></code>，您应该很快打开一个浏览器弹出窗口，向您显示<strong class="kc io"> Webpack </strong>与此配置放在一起的结果。让我们看看<strong class="kc io"> Webpack </strong>是如何处理<strong class="kc io"> index.js </strong>(我们定义的条目)的。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mb"><img src="../Images/ee25ef98bf70e9bf23f00be7e6251250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bne1if8GW9qh8vRYYXg0wQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">index.js webpack entry</figcaption></figure><p id="eb05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一行是导入<strong class="kc io"> React </strong>，它在<strong class="kc io"> node_modules </strong>中，属于我们的排除范围，并且<strong class="kc io"> Webpack </strong>知道不要对该导入做任何事情，第二行也是如此。导入<strong class="kc io">应用</strong>后，<strong class="kc io"> Webpack </strong>将继续抓取该文件。将它的内容添加到包中，并逐步通过应用程序，直到所有代码都包含在包中。</p><p id="50a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在拥有的是一个工作的基本<strong class="kc io"> Webpack </strong>配置。但是等等，这不包括款式。继续在components文件夹中创建一个<strong class="kc io"> styles.css </strong>，并将您对'<strong class="kc io"> p </strong>'标记的修改导入到<strong class="kc io"> App.js </strong>中，如下所示:</p><p id="c9c8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma ld b">import './styles.css'</code></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/749da634e919a607bb7f68d5c88d6350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MMUe1OKL-7QAN2ffPM0ZQ.png"/></div></div></figure><p id="c3e2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好吧，现在它坏了。太好了。所有这些设置和我只能显示无风格的垃圾！</p><p id="75a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就把我们带到了使用<strong class="kc io"> Webpack </strong>的最重要的部分。研究装载机并寻找解决问题的方法。这个问题很容易解决，因为很多人都处理过这个问题。一个简单的谷歌搜索会引导你找到一个名为“<strong class="kc io"> css-loader </strong>”或“<strong class="kc io"> style-loader </strong>”的<strong class="kc io"> npm </strong>包。您将看到您必须通过<strong class="kc io"> npm </strong>来安装它们，然后用另一个测试来修改您的<strong class="kc io"> Webpack </strong> config，以包含css文件并告诉它如何处理它们。这些加载器让我们设置了另一个规则，这次是针对css的。这不会输出包含您的样式的css文件，而是将它们添加到您的Javascript中，如下所示:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lp"><img src="../Images/917ab76c563e93676c4b09c4f64f1973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YSztiLwiW-xblAd2Bpm4EQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Inline styles in webpack output</figcaption></figure><p id="45fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过一个快速的<code class="fe ly lz ma ld b">npm i style-loader css-loader</code>，然后向<strong class="kc io"> Webpack </strong>配置添加一个规则，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c87a" class="lh li in ld b gy lj lk l ll lm">{</span><span id="29d5" class="lh li in ld b gy ln lk l ll lm">test: /\.css$/,</span><span id="5c00" class="lh li in ld b gy ln lk l ll lm">use: ['style-loader', 'css-loader']</span><span id="2aa0" class="lh li in ld b gy ln lk l ll lm">}</span></pre><p id="16b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您可以将样式导入到您的<strong class="kc io"> React </strong>组件中，并使某些东西不仅实用，而且美观。😁</p><p id="34cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以现在我们有了一些工作和如何配置<strong class="kc io"> Webpack </strong>的基础，一些关于<strong class="kc io"> Babel </strong>的想法(它是自己需要驯服的野兽)，以及如何添加加载器以增加功能。</p><p id="c188" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一段美好关系的开始。构建过程可能令人生畏，但如果你有一个坚实的基础，并知道如何扩展，你可以相处得很好。</p><p id="e7e8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你有额外的资源或者看到这个指南有问题，请在评论中给我留言。我也在推特上<a class="ae jz" href="https://twitter.com/GrantGlidewell" rel="noopener ugc nofollow" target="_blank"> @GrantGlidewell </a>。</p></div></div>    
</body>
</html>
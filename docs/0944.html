<html>
<head>
<title>Build Vue.js UI with Element UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用元素UI构建Vue.js UI</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-vue-js-ui-with-element-ui-5948a274d670?source=collection_archive---------2-----------------------#2020-01-05">https://javascript.plainenglish.io/build-vue-js-ui-with-element-ui-5948a274d670?source=collection_archive---------2-----------------------#2020-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a0cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Vue.js的UI框架有很多，比较流行的一个是Element UI。它提供了其他框架所提供的组件。此外，它很容易添加到任何Vue.js应用程序中。表单验证也是内置的，这非常有用，因为Vue.js没有内置任何表单验证功能。它的表单验证功能会检查模型，所以表单的结构是什么并不重要。</p><p id="33da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将构建一个电影数据库应用程序，让用户输入标题、上映日期、摘要，并为每个电影条目添加一张照片。为了启动项目，我们通过运行<code class="fe kl km kn ko b">npx @vue/cli create movie-app</code>来运行Vue CLI。在向导中，我们选择包括Vuex、Vue路由器、Babel和CSS预处理器。然后我们通过运行<code class="fe kl km kn ko b">vue add element</code>来添加元素UI。</p><p id="27d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成后，我们需要添加Axios来发出HTTP请求，并添加Vue-Filter-Date-Format来显示日期。我们通过运行<code class="fe kl km kn ko b">npm i axios vue-filter-date-format</code>来安装它们。</p><p id="9fc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们处理代码。在<code class="fe kl km kn ko b">components</code>文件夹中，创建一个名为<code class="fe kl km kn ko b">MovieForm.vue</code>的文件，并添加:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="e3fe" class="kx ky iq ko b gy kz la l lb lc">&lt;template&gt;<br/>  &lt;el-form :model="form" :rules="rules" ref="ruleForm"&gt;<br/>    &lt;el-form-item label="Title" prop="title"&gt;<br/>      &lt;el-input v-model="form.title"&gt;&lt;/el-input&gt;<br/>    &lt;/el-form-item&gt;</span><span id="e2ee" class="kx ky iq ko b gy ld la l lb lc">&lt;el-form-item label="Release Date" prop="date"&gt;<br/>      &lt;el-date-picker v-model="form.date" type="date" placeholder="Release Date"&gt;&lt;/el-date-picker&gt;<br/>    &lt;/el-form-item&gt;</span><span id="17a8" class="kx ky iq ko b gy ld la l lb lc">&lt;el-form-item label="Summary" prop="summary"&gt;<br/>      &lt;el-input v-model="form.summary" type="textarea"&gt;&lt;/el-input&gt;<br/>    &lt;/el-form-item&gt;</span><span id="7cd7" class="kx ky iq ko b gy ld la l lb lc">&lt;el-form-item&gt;<br/>      &lt;input type="file" style="display: none" ref="file" <a class="ae le" href="http://twitter.com/change" rel="noopener ugc nofollow" target="_blank">@change</a>="onChangeFileUpload($event)" /&gt;<br/>      &lt;el-button type="primary" <a class="ae le" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="$refs.file.click()"&gt;Upload Photo&lt;/el-button&gt;<br/>    &lt;/el-form-item&gt;</span><span id="1b54" class="kx ky iq ko b gy ld la l lb lc">&lt;el-form-item prop="photo"&gt;<br/>      &lt;img ref="photo" :src="form.photo" class="photo" /&gt;<br/>    &lt;/el-form-item&gt;</span><span id="0e4d" class="kx ky iq ko b gy ld la l lb lc">&lt;el-form-item&gt;<br/>      &lt;el-button type="primary" <a class="ae le" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="submitForm('ruleForm')"&gt;Save&lt;/el-button&gt;<br/>    &lt;/el-form-item&gt;<br/>  &lt;/el-form&gt;<br/>&lt;/template&gt;</span><span id="5b1c" class="kx ky iq ko b gy ld la l lb lc">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="236e" class="kx ky iq ko b gy ld la l lb lc">export default {<br/>  name: "MovieForm",<br/>  mixins: [requestsMixin],<br/>  props: {<br/>    movie: Object,<br/>    edit: Boolean<br/>  },<br/>  data() {<br/>    return {<br/>      form: {},<br/>      rules: {<br/>        title: [<br/>          {<br/>            required: true,<br/>            message: "Please input title",<br/>            trigger: "blur"<br/>          }<br/>        ],<br/>        date: [<br/>          {<br/>            required: true,<br/>            message: "Please input date",<br/>            trigger: "blur"<br/>          }<br/>        ],<br/>        summary: [<br/>          {<br/>            required: true,<br/>            message: "Please input summary",<br/>            trigger: "blur"<br/>          }<br/>        ],<br/>        photo: [<br/>          {<br/>            required: true,<br/>            message: "Please upload photo",<br/>            trigger: "blur"<br/>          }<br/>        ]<br/>      }<br/>    };<br/>  },<br/>  methods: {<br/>    submitForm(formName) {<br/>      this.$refs[formName].validate(async valid =&gt; {<br/>        if (valid) {<br/>          if (this.edit) {<br/>            await this.editMovie(this.form);<br/>          } else {<br/>            await this.addMovie(this.form);<br/>          }<br/>          const { data } = await this.getMovies();<br/>          this.$store.commit("setMovies", data);<br/>          this.$emit("saved");<br/>        }<br/>        return false;<br/>      });<br/>    },<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    },<br/>    onChangeFileUpload($event) {<br/>      const file = $event.target.files[0];<br/>      const reader = new FileReader();<br/>      reader.onload = () =&gt; {<br/>        this.$refs.photo.src = reader.result;<br/>        this.form.photo = reader.result;<br/>      };<br/>      reader.readAsDataURL(file);<br/>    }<br/>  },<br/>  watch: {<br/>    movie: {<br/>      handler(val) {<br/>        this.form = JSON.parse(JSON.stringify(val || {}));<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="0829" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是添加和编辑电影条目的表单。该模板具有元素UI表单，其中包含名称、发布日期和摘要的文本输入；还有一个照片文件输入。<code class="fe kl km kn ko b">el-form-item</code>和<code class="fe kl km kn ko b">el-input</code>已经设计好了样式，所以我们不需要自己添加任何样式。<code class="fe kl km kn ko b">el-input-form</code>组件的<code class="fe kl km kn ko b">label</code>道具中每个字段的标签。数据绑定是通过将<code class="fe kl km kn ko b">form</code>对象传递到<code class="fe kl km kn ko b">el-form</code>组件的<code class="fe kl km kn ko b">model</code>属性中来完成的。</p><p id="8513" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">script</code>部分，我们有传递到<code class="fe kl km kn ko b">el-form</code>组件的<code class="fe kl km kn ko b">rules</code>对象。该对象对<code class="fe kl km kn ko b">form</code>对象进行表单验证。因为我们将照片读入一个Base64字符串，所以它也对此进行验证。<code class="fe kl km kn ko b">onChangeFileUpload</code>函数获取对文件输入的引用，并将内容读入Base64字符串。</p><p id="8e94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当点击Save按钮时，<code class="fe kl km kn ko b">submitForm</code>按钮被调用，因为我们在按钮的<code class="fe kl km kn ko b">click</code>处理程序中传递了它。<code class="fe kl km kn ko b">el-form</code>有一个名为<code class="fe kl km kn ko b">ruleForm</code>的<code class="fe kl km kn ko b">ref</code>，所以我们将它作为参数传入，这样我们就可以对表单进行验证。然后在函数中调用Element UI提供的<code class="fe kl km kn ko b">validate</code>函数做表单验证，然后根据<code class="fe kl km kn ko b">edit</code>属性的值编辑或添加一个条目。然后从<code class="fe kl km kn ko b">getMovies</code>获得新值，并放入Vuex存储器。然后发出<code class="fe kl km kn ko b">saved</code>事件来关闭模态。</p><p id="0e3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了使编辑功能起作用，我们添加了一个<code class="fe kl km kn ko b">watch</code>块来监视<code class="fe kl km kn ko b">movie</code>属性，当有需要编辑的内容时，我们将把它传递给这个组件。</p><p id="bf61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们创建一个<code class="fe kl km kn ko b">mixins</code>文件夹，并将<code class="fe kl km kn ko b">requestsMixin.js</code>添加到<code class="fe kl km kn ko b">mixins</code>文件夹中。在文件中，我们添加了:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="ce0b" class="kx ky iq ko b gy kz la l lb lc">const APIURL = "<a class="ae le" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="408e" class="kx ky iq ko b gy ld la l lb lc">export const requestsMixin = {<br/>  methods: {<br/>    getMovies() {<br/>      return axios.get(`${APIURL}/movies`);<br/>    },</span><span id="d75a" class="kx ky iq ko b gy ld la l lb lc">    addMovie(data) {<br/>      return axios.post(`${APIURL}/movies`, data);<br/>    },</span><span id="4662" class="kx ky iq ko b gy ld la l lb lc">    editMovie(data) {<br/>      return axios.put(`${APIURL}/movies/${data.id}`, data);<br/>    },</span><span id="26ae" class="kx ky iq ko b gy ld la l lb lc">    deleteMovie(id) {<br/>      return axios.delete(`${APIURL}/movies/${id}`);<br/>    }<br/>  }<br/>};</span></pre><p id="faae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是我们在组件中用来发出HTTP请求以获取和保存数据的函数。</p><p id="32f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">Home.vue</code>中，将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="6a2e" class="kx ky iq ko b gy kz la l lb lc">&lt;template&gt;<br/>  &lt;div class="page" id='top'&gt;<br/>    &lt;h1 class="text-center"&gt;Recipes&lt;/h1&gt;<br/>    &lt;b-button-toolbar class="button-toolbar"&gt;<br/>      &lt;b-button <a class="ae le" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()" variant="primary"&gt;Add Recipe&lt;/b-button&gt;<br/>    &lt;/b-button-toolbar&gt;</span><span id="d936" class="kx ky iq ko b gy ld la l lb lc">    &lt;b-card<br/>      v-for="r in recipes"<br/>      :key="r.id"<br/>      :title="r.name"<br/>      :img-src="r.photo"<br/>      img-alt="Image"<br/>      img-top<br/>      tag="article"<br/>      class="recipe-card"<br/>      img-bottom<br/>    &gt;<br/>      &lt;b-card-text&gt;<br/>        &lt;h1&gt;Ingredients&lt;/h1&gt;<br/>        &lt;div class="wrap"&gt;{{r.ingredients}}&lt;/div&gt;<br/>      &lt;/b-card-text&gt;</span><span id="7cbe" class="kx ky iq ko b gy ld la l lb lc">      &lt;b-card-text&gt;<br/>        &lt;h1&gt;Recipe&lt;/h1&gt;<br/>        &lt;div class="wrap"&gt;{{r.recipe}}&lt;/div&gt;<br/>      &lt;/b-card-text&gt;</span><span id="4519" class="kx ky iq ko b gy ld la l lb lc">      &lt;b-button<br/>        href="#"<br/>        v-scroll-to="{<br/>          el: '#top',<br/>          container: 'body',<br/>          duration: 500,<br/>          easing: 'linear',<br/>          offset: -200,<br/>          force: true,<br/>          cancelable: true,<br/>          x: false,<br/>          y: true<br/>        }"<br/>        variant="primary"<br/>      &gt;Scroll to Top&lt;/b-button&gt;</span><span id="526c" class="kx ky iq ko b gy ld la l lb lc">      &lt;b-button <a class="ae le" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openEditModal(r)" variant="primary"&gt;Edit&lt;/b-button&gt;</span><span id="b026" class="kx ky iq ko b gy ld la l lb lc">      &lt;b-button <a class="ae le" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOneRecipe(r.id)" variant="danger"&gt;Delete&lt;/b-button&gt;<br/>    &lt;/b-card&gt;</span><span id="44de" class="kx ky iq ko b gy ld la l lb lc">    &lt;b-modal id="add-modal" title="Add Recipe" hide-footer&gt;<br/>      &lt;RecipeForm <a class="ae le" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae le" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false" /&gt;<br/>    &lt;/b-modal&gt;</span><span id="ab21" class="kx ky iq ko b gy ld la l lb lc">     &lt;b-modal id="edit-modal" title="Edit Recipe" hide-footer&gt;<br/>      &lt;RecipeForm<br/>        <a class="ae le" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()"<br/>        <a class="ae le" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()"<br/>        :edit="true"<br/>        :recipe="selectedRecipe"<br/>      /&gt;<br/>    &lt;/b-modal&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9f5f" class="kx ky iq ko b gy ld la l lb lc">&lt;script&gt;<br/>// @ is an alias to /src<br/>import RecipeForm from "@/components/RecipeForm.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="11a0" class="kx ky iq ko b gy ld la l lb lc">export default {<br/>  name: "home",<br/>  components: {<br/>    RecipeForm<br/>  },<br/>  mixins: [requestsMixin],<br/>  computed: {<br/>    recipes() {<br/>      return this.$store.state.recipes;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllRecipes();<br/>  },<br/>  data() {<br/>    return {<br/>      selectedRecipe: {}<br/>    };<br/>  },<br/>  methods: {<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },<br/>    openEditModal(recipe) {<br/>      this.$bvModal.show("edit-modal");<br/>      this.selectedRecipe = recipe;<br/>    },<br/>    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("edit-modal");<br/>      this.selectedRecipe = {};<br/>    },<br/>    async deleteOneRecipe(id) {<br/>      await this.deleteRecipe(id);<br/>      this.getAllRecipes();<br/>    },<br/>    async getAllRecipes() {<br/>      const { data } = await this.getRecipes();<br/>      this.$store.commit("setRecipes", data);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="e03a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个文件中，我们有一个元素UI卡列表来显示配方条目列表，并让用户打开和关闭添加和编辑模式。我们在每张卡上都有按钮，让用户编辑或删除每个条目。每张卡片的底部都有一张电影图片，是在输入食谱时上传的。</p><p id="fcda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">scripts</code>部分，我们用<code class="fe kl km kn ko b">beforeMount</code>钩子在页面加载期间用我们在mixin中编写的<code class="fe kl km kn ko b">getMovies </code>函数获取所有密码条目。当编辑按钮被点击时，<code class="fe kl km kn ko b">selectedMovie</code>变量被设置，我们将它传递给<code class="fe kl km kn ko b">MovieForm</code>进行编辑。</p><p id="d4f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要删除一个食谱，我们在mixin中调用<code class="fe kl km kn ko b">deleteOneMovie</code>向后端发出请求。</p><p id="55b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">App.vue</code>中，我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="0cda" class="kx ky iq ko b gy kz la l lb lc">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;el-menu mode="horizontal"&gt;<br/>      &lt;el-menu-item index="1"&gt;Movie App&lt;/el-menu-item&gt;<br/>      &lt;el-menu-item index="2"&gt;Home&lt;/el-menu-item&gt;<br/>    &lt;/el-menu&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="4757" class="kx ky iq ko b gy ld la l lb lc">&lt;script&gt;<br/>export default {<br/>  name: "app"<br/>};<br/>&lt;/script&gt;</span><span id="6e49" class="kx ky iq ko b gy ld la l lb lc">&lt;style&gt;<br/>#app {<br/>  font-family: "Avenir", Helvetica, Arial, sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>  color: #2c3e50;<br/>}</span><span id="9f8a" class="kx ky iq ko b gy ld la l lb lc">.page {<br/>  padding: 20px;<br/>  margin: 0 auto;<br/>  max-width: 700px;<br/>}</span><span id="c9bb" class="kx ky iq ko b gy ld la l lb lc">body {<br/>  margin: 0px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="d6b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面顶部添加一个元素UI导航条，并添加一个<code class="fe kl km kn ko b">router-view</code>来显示我们定义的路线。我们必须自己设置字体，因为元素UI没有将它设置为任何特定的字体。我们还必须将主体的边距设置为0，以便移除它。我们创建了一个<code class="fe kl km kn ko b">page</code>类，将最大宽度设置为700像素，这样图像就不会太大。</p><p id="f075" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在运行<code class="fe kl km kn ko b">vue add element</code>时产生的<code class="fe kl km kn ko b">element-variable.scss</code>中。我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="2a0c" class="kx ky iq ko b gy kz la l lb lc">/*<br/>Write your variables here. All available variables can be<br/>found in element-ui/packages/theme-chalk/src/common/var.scss.<br/>For example, to overwrite the theme color:<br/>*/<br/>$--color-primary: teal;</span><span id="e08c" class="kx ky iq ko b gy ld la l lb lc">/* icon font path, required */<br/>$--font-path: "~element-ui/lib/theme-chalk/fonts";</span><span id="e5b4" class="kx ky iq ko b gy ld la l lb lc"><a class="ae le" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> "~element-ui/packages/theme-chalk/src/index";<br/>button,<br/>input,<br/>select,<br/>textarea {<br/>  font-family: inherit;<br/>  font-size: inherit;<br/>  line-height: inherit;<br/>  color: inherit;<br/>}</span><span id="2afd" class="kx ky iq ko b gy ld la l lb lc">.el-picker-panel__body-wrapper {<br/>  font-family: "Avenir", Helvetica, Arial, sans-serif;<br/>}</span></pre><p id="8531" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使我们表单中的字体一致。</p><p id="d527" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">main.js</code>中，我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="9ee7" class="kx ky iq ko b gy kz la l lb lc">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import './plugins/element.js'<br/>import VueFilterDateFormat from 'vue-filter-date-format';</span><span id="d638" class="kx ky iq ko b gy ld la l lb lc">Vue.use(VueFilterDateFormat);<br/>Vue.config.productionTip = false;</span><span id="3d66" class="kx ky iq ko b gy ld la l lb lc">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="93fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加了Vue-Filter-Date-Format库，以及元素UI库。</p><p id="8caf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">router.js</code>中，我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="4320" class="kx ky iq ko b gy kz la l lb lc">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="ba44" class="kx ky iq ko b gy ld la l lb lc">Vue.use(Router);</span><span id="fd48" class="kx ky iq ko b gy ld la l lb lc">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="dcfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将主页包含在我们的路线中，以便用户可以看到该页面。</p><p id="c371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">store.js</code>中，我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="3d9d" class="kx ky iq ko b gy kz la l lb lc">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="7399" class="kx ky iq ko b gy ld la l lb lc">Vue.use(Vuex);</span><span id="5f66" class="kx ky iq ko b gy ld la l lb lc">export default new Vuex.Store({<br/>  state: {<br/>    movies: []<br/>  },<br/>  mutations: {<br/>    setMovies(state, payload) {<br/>      state.movies = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="4d08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将我们的<code class="fe kl km kn ko b">movies</code>状态添加到存储中，这样我们就可以在<code class="fe kl km kn ko b">MovieForm</code>和<code class="fe kl km kn ko b">HomePage</code>组件的<code class="fe kl km kn ko b">computed</code>块中观察到它。我们有<code class="fe kl km kn ko b">setMovies </code>函数来更新<code class="fe kl km kn ko b">passwords</code>状态，我们通过调用<code class="fe kl km kn ko b">this.$store.commit(“setMovies”, response.data);</code>在组件中使用它，就像我们在<code class="fe kl km kn ko b">MovieForm</code>中做的那样。</p><p id="f0cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe kl km kn ko b">index.html</code>中，我们将现有代码替换为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="5096" class="kx ky iq ko b gy kz la l lb lc">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Movie App&lt;/title&gt;<br/>    &lt;link<br/>      rel="stylesheet"<br/>      href="<a class="ae le" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/element-ui/lib/theme-chalk/index.css</a>"<br/>    /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-element-ui-tutorial-app doesn't work properly<br/>        without JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5de0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">改一下标题。</p><p id="e3cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们可以通过运行<code class="fe kl km kn ko b">npm run serve</code>来启动我们的应用程序。</p><p id="05fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了启动后端，我们首先通过运行<code class="fe kl km kn ko b">npm i json-server</code>来安装<code class="fe kl km kn ko b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="9c31" class="kx ky iq ko b gy kz la l lb lc">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">db.json</code>中，将文本改为:</p><pre class="kp kq kr ks gt kt ko ku kv aw kw bi"><span id="d789" class="kx ky iq ko b gy kz la l lb lc">{<br/>  "<!-- -->movies<!-- -->": [<br/>  ]<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们有了定义在可用的<code class="fe kl km kn ko b">requests.js</code>中的<code class="fe kl km kn ko b">movies </code>端点。</p><p id="5e9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们得到了:</p><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/127853156baf18e55028c86b78c088d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAFVCJwUMIuoahGKFI970A.png"/></div></div></figure><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/62b0e1d2cfe3964e76d7e5ccbc31a58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNKyK79ba6BvNyIatK5-hg.png"/></div></div></figure><figure class="kp kq kr ks gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/d2f3325934e8188b688fd15484618aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SzgLoDHaMGNBlppaeivl1A.png"/></div></div></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Angular Animations Transitions and Triggers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度动画过渡和触发器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-animations-transitions-and-triggers-83110b873f02?source=collection_archive---------2-----------------------#2020-04-30">https://javascript.plainenglish.io/angular-animations-transitions-and-triggers-83110b873f02?source=collection_archive---------2-----------------------#2020-04-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8810cb47e488b43835b9b2829a39510d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g-sBd1wqzovN4lrt"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rayhennessy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ray Hennessy</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="761e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们看看如何在运行<code class="fe lb lc ld le b">*ngIf</code>时应用转换和触发器。</p><h1 id="3b88" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">预定义状态和通配符匹配</h1><p id="fb58" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用星号来匹配任何动画状态。这对于定义不管HTML元素的开始或结束状态如何都适用的转换非常有用。</p><p id="47bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用星号:</p><p id="d1b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="cf75" class="mq lg iq le b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  state,<br/>  style,<br/>  transition,<br/>  animate,<br/>  trigger<br/>} from "@angular/animations";</span><span id="225d" class="mq lg iq le b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      state(<br/>        "open",<br/>        style({<br/>          height: "250px",<br/>          opacity: 1,<br/>          backgroundColor: "pink"<br/>        })<br/>      ),<br/>      state(<br/>        "closed",<br/>        style({<br/>          height: "100px",<br/>          opacity: 0.5,<br/>          backgroundColor: "green"<br/>        })<br/>      ),<br/>      transition("* =&gt; closed", [animate("1s")]),<br/>      transition("* =&gt; open", [animate("0.5s")])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {<br/>  isOpen = true;</span><span id="cb7e" class="mq lg iq le b gy mv ms l mt mu">toggle() {<br/>    this.isOpen = !this.isOpen;<br/>  }<br/>}</span></pre><p id="ec48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b16a" class="mq lg iq le b gy mr ms l mt mu">&lt;button (click)="toggle()"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@openClose]="isOpen ? 'open' : 'closed'"&gt;<br/>  {{ isOpen ? 'Open' : 'Closed' }}<br/>&lt;/div&gt;</span></pre><p id="dafa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="122a" class="mq lg iq le b gy mr ms l mt mu">transition("* =&gt; closed", [animate("1s")]),<br/>transition("* =&gt; open", [animate("0.5s")])</span></pre><p id="5271" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码表明，当我们从任何状态转换到<code class="fe lb lc ld le b">closed</code>状态时，我们制作了一秒钟的动画。</p><p id="53e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们从任何东西过渡到<code class="fe lb lc ld le b">open</code>状态时，我们会制作半秒钟的动画。</p><h1 id="ca2c" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">对多个转换状态使用通配符状态</h1><p id="1f59" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">在我们的转换中可以有两个以上的状态。使用星号在多个状态之间转换，如下所示:</p><p id="f26f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="174d" class="mq lg iq le b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  state,<br/>  style,<br/>  transition,<br/>  animate,<br/>  trigger<br/>} from "@angular/animations";</span><span id="52cc" class="mq lg iq le b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      state(<br/>        "open",<br/>        style({<br/>          height: "250px",<br/>          opacity: 1,<br/>          backgroundColor: "pink"<br/>        })<br/>      ),<br/>      state(<br/>        "inProgress",<br/>        style({<br/>          height: "130px",<br/>          opacity: 0.75,<br/>          backgroundColor: "orange"<br/>        })<br/>      ),<br/>      state(<br/>        "closed",<br/>        style({<br/>          height: "100px",<br/>          opacity: 0.5,<br/>          backgroundColor: "green"<br/>        })<br/>      ),<br/>      transition("* =&gt; closed", [animate("1s")]),<br/>      transition("* =&gt; open", [animate("0.5s")]),<br/>      transition("* =&gt; inProgress", [animate("2.5s")]),<br/>      transition("inProgress =&gt; closed", [animate("1.5s")]),<br/>      transition("* =&gt; open", [animate("0.5s")])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {<br/>  states = ["open", "closed", "inProgress"];<br/>  index = 0;<br/>  state = "open";</span><span id="095e" class="mq lg iq le b gy mv ms l mt mu">  changeState() {<br/>    this.index = (this.index + 1) % this.states.length;<br/>    this.state = this.states[this.index];<br/>  }<br/>}</span></pre><p id="4c9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="1d88" class="mq lg iq le b gy mr ms l mt mu">&lt;button (click)="changeState()"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@openClose]="state"&gt;<br/>  {{ state }}<br/>&lt;/div&gt;</span></pre><p id="123e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有多个转换状态，并使用通配符来指定动画长度。</p><p id="a5bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe lb lc ld le b">changeState</code>方法循环遍历各个状态。</p><p id="17c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">void</code>状态为进入或离开页面的元素配置转换。</p><p id="543a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以与通配符结合使用。它的工作原理如下:</p><ul class=""><li id="a1db" class="mw mx iq kf b kg kh kk kl ko my ks mz kw na la nb nc nd ne bi translated"><code class="fe lb lc ld le b">* =&gt; void</code> —当元素离开视图时应用，不管它在离开之前是什么状态</li><li id="8cb4" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe lb lc ld le b">void =&gt; *</code> —当元素进入视图时应用，不管它进入时呈现什么状态</li><li id="8129" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe lb lc ld le b">*</code>状态匹配包括<code class="fe lb lc ld le b">void</code>在内的任何状态。</li></ul><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/a8263c197b0430629333b196917f4848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1mD_sxfiq7_wsD04"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hawin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hawin Rojas</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="52ac" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">制作进入和离开视图的动画</h1><p id="df13" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以通过样式化<code class="fe lb lc ld le b">in</code>状态来制作进入和离开视图的动画。</p><p id="0748" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将<code class="fe lb lc ld le b">void</code>和通配符之间的转换制作成动画，反之亦然，以便分别在添加、移除和添加元素时运行动画。</p><p id="85ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样做:</p><p id="cdd4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="808b" class="mq lg iq le b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  state,<br/>  style,<br/>  transition,<br/>  animate,<br/>  trigger<br/>} from "@angular/animations";</span><span id="01be" class="mq lg iq le b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("flyInOut", [<br/>      state("in", style({ transform: "translateX(0)" })),<br/>      transition("void =&gt; *", [<br/>        style({ transform: "translateX(-100%)" }),<br/>        animate(100)<br/>      ]),<br/>      transition("* =&gt; void", [<br/>        animate(100, style({ transform: "translateX(100%)" }))<br/>      ])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {}</span></pre><p id="16eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="3b44" class="mq lg iq le b gy mr ms l mt mu">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div @flyInOut *ngIf="show"&gt;<br/>  foo<br/>&lt;/div&gt;</span></pre><p id="ff51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有一个<code class="fe lb lc ld le b">flyInOut</code>触发器，它有一个从<code class="fe lb lc ld le b">void</code>到<code class="fe lb lc ld le b">*</code>的转换，在插入带有<code class="fe lb lc ld le b">*ngIf</code>的div时应用。</p><p id="b9d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">in</code>状态显示了div的样式。</p><p id="d1be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在移除div时应用另一个转换。</p><p id="5a9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们有一个div和一个开关按钮，div的<code class="fe lb lc ld le b">*ngIf</code>里面有单词“foo”。</p><p id="b338" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们单击切换按钮时，我们会看到单词“foo”先向右移动，然后消失，因为我们有:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="acd1" class="mq lg iq le b gy mr ms l mt mu">transition("* =&gt; void", [<br/>  animate(100, style({ transform: "translateX(100%)" }))<br/>])</span></pre><p id="d1b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为div正在用<code class="fe lb lc ld le b">*ngIf</code>移除。</p><h1 id="d920" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">:输入和:保留别名</h1><p id="e636" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">:enter</code>是<code class="fe lb lc ld le b">void =&gt; *</code>的简称，<code class="fe lb lc ld le b">:leave</code>是<code class="fe lb lc ld le b">* =&gt; void</code>的简称。</p><p id="727d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="a4dd" class="mq lg iq le b gy mr ms l mt mu">transition ( ':enter', [ ... ] );  // alias for void =&gt; *<br/>transition ( ':leave', [ ... ] );  // alias for * =&gt; void</span></pre><h1 id="6b75" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="8d50" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以通过添加<code class="fe lb lc ld le b">* =&gt; void</code>和<code class="fe lb lc ld le b">void =&gt; *</code>过渡来制作<code class="fe lb lc ld le b">*ngIf</code>过渡的动画。</p><p id="bb24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">*</code>代表任何状态，<code class="fe lb lc ld le b">void</code>是一个元素离开屏幕时的状态。</p><p id="7185" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">:enter</code>和<code class="fe lb lc ld le b">:leave</code>分别是<code class="fe lb lc ld le b">void =&gt; *</code>和<code class="fe lb lc ld le b">* =&gt; void</code>的简称。</p><h2 id="9497" class="mq lg iq bd lh nl nm dn ll nn no dp lp ko np nq lt ks nr ns lx kw nt nu mb nv bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="7775" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="90dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
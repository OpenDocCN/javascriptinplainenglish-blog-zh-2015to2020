<html>
<head>
<title>Best of Modern JavaScript — Destructuring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华——解构</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-destructuring-805a93ae803a?source=collection_archive---------9-----------------------#2020-09-11">https://javascript.plainenglish.io/best-of-modern-javascript-destructuring-805a93ae803a?source=collection_archive---------9-----------------------#2020-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c1447cbdbe112b0c8ce4cd517318751a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RxdGOurFXialxuPi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@johannsiemens?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Johann Siemens</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="08d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究JavaScript析构。</p><h1 id="dbf9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数组析构</h1><p id="d359" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以根据数组的位置将数组分解成变量。</p><p id="079f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d8ec" class="mn lc iq mj b gy mo mp l mq mr">const arr = ['a', 'b'];<br/>const [x, y] = arr;</span></pre><p id="b487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe ms mt mu mj b">x</code>就是<code class="fe ms mt mu mj b">'a'</code>，<code class="fe ms mt mu mj b">y</code>就是<code class="fe ms mt mu mj b">'b'</code>。</p><p id="4f76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还会处理返回值。</p><p id="d8ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="58f5" class="mn lc iq mj b gy mo mp l mq mr">const [all, areaCode, officeCode, number] =<br/>/^(\d\d\d)-(\d\d\d)-(\d\d\d\d)$/<br/>.exec('555-555-1212');</span></pre><p id="54b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将匹配的模式分解成它们自己的变量。</p><p id="5fe4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">exec</code>返回一个数组，其中包含整个字符串和由模式匹配的部分，这样我们就可以给变量赋值。</p><h1 id="575e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">析构可以用在哪里？</h1><p id="c016" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">析构可以用在很多地方。</p><p id="2d3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，它们可以在数组中使用:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f577" class="mn lc iq mj b gy mo mp l mq mr">const [x] = ['a'];<br/>let [x] = ['a'];<br/>var [x] = ['a'];</span></pre><p id="ab79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将数组条目赋给<code class="fe ms mt mu mj b">x</code>变量。</p><p id="9013" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以析构参数。</p><p id="94ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d941" class="mn lc iq mj b gy mo mp l mq mr">function<!-- --> <!-- -->f([x])<!-- --> <!-- -->{<!-- --> <br/>  //...<br/>}<br/>f(['a']);</span></pre><p id="8e50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe ms mt mu mj b">x</code>就是<code class="fe ms mt mu mj b">'a'</code>。</p><p id="5262" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以用for-of循环进行析构:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bdad" class="mn lc iq mj b gy mo mp l mq mr">const arr = ['a', 'b'];<br/>for (const [index, element] of arr.entries()) {<br/>  console.log(index, element);<br/>}</span></pre><p id="67d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">arr.entries</code>来获得一个数组，该数组包含一组索引和作为条目的元素。</p><h1 id="37a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">解构的模式</h1><p id="6637" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想破坏一个对象或区域，我们需要源和目标。</p><p id="a8d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">右边是源，左边是目标。</p><p id="070d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2023" class="mn lc iq mj b gy mo mp l mq mr">const obj = {<br/>  a: [{<br/>    foo: 'bar',<br/>    bar: 'abc'<br/>  }, {}],<br/>  b: true<br/>};<br/>const {<br/>  a: [{<br/>    foo: f<br/>  }]<br/>} = obj;</span></pre><p id="2806" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个带有<code class="fe ms mt mu mj b">foo</code>属性的对象重构了带有<code class="fe ms mt mu mj b">a</code>数组的嵌套对象。</p><p id="7059" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">bar</code>在右侧不存在，所以我们将其设为默认值<code class="fe ms mt mu mj b">'abc'</code>。</p><p id="5a5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">b</code>设置为<code class="fe ms mt mu mj b">true</code>，因为右侧不存在。</p><p id="737a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不需要把所有东西都赋给它自己的变量。</p><p id="e159" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以只挑我们需要的。</p><p id="d26e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6ccf" class="mn lc iq mj b gy mo mp l mq mr">const { x } = { x: 1, y: 3 };</span></pre><p id="6974" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们刚刚销毁了<code class="fe ms mt mu mj b">x</code>。</p><p id="5b65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe ms mt mu mj b">x</code>是1。</p><p id="621f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以对数组做同样的事情:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8260" class="mn lc iq mj b gy mo mp l mq mr">const [x, y] = ['a', 'b', 'c'];</span></pre><p id="5d06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe ms mt mu mj b">x</code>就是<code class="fe ms mt mu mj b">'a'</code>而<code class="fe ms mt mu mj b">y</code>就是<code class="fe ms mt mu mj b">'b'</code>。</p><h1 id="ccb0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对象析构将值强制传递给对象</h1><p id="e8a3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以对原始值使用析构。</p><p id="ea99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5bd1" class="mn lc iq mj b gy mo mp l mq mr">const {<br/>  length: len<br/>} = 'foo';</span></pre><p id="9bdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe ms mt mu mj b">len</code>是3，因为它获得了字符串的<code class="fe ms mt mu mj b">length</code>属性。</p><p id="f74d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以通过书写来解构数字:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aa07" class="mn lc iq mj b gy mo mp l mq mr">const {<br/>  toString: s<br/>} = 123;</span></pre><p id="062b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe ms mt mu mj b">Number.prototype</code>的<code class="fe ms mt mu mj b">toString</code>方法作为<code class="fe ms mt mu mj b">s</code>的值。</p><h1 id="dfdf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无法对值进行对象析构</h1><p id="de0b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在某些情况下，值可能不会被析构。</p><p id="6e38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果值不能用<code class="fe ms mt mu mj b">ToObject</code>转换成对象，那么它就不能被析构。</p><p id="ddfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="587d" class="mn lc iq mj b gy mo mp l mq mr">const { prop: x } = undefined; <br/>const { prop: y } = null;</span></pre><p id="21b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在两种情况下都得到TypeError，因为左边的那些属性不存在。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/685b0eedc02b96d84451813529348dd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KLb2zHKPRtsrxZPr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@toddquackenbush?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Todd Quackenbush</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8b21" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6ecb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">析构可以用在很多地方。</p><h2 id="5c2c" class="mn lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="1caa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
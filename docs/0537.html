<html>
<head>
<title>Learn How to Easily Make Bookmarklets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何轻松制作书签</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-bookmarklets-cf0ad59462bd?source=collection_archive---------7-----------------------#2019-11-04">https://javascript.plainenglish.io/introduction-to-bookmarklets-cf0ad59462bd?source=collection_archive---------7-----------------------#2019-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e0c9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Chrome扩展的一个较小的替代品</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/334482aa250facd7b778b1ccbac5f13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hNL4ykkPAQbAx5_I"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben White</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.webtips.dev/learn-how-to-easily-make-bookmarklets"><div class="gh gi kw"><img src="../Images/c19cb3069af1beba3c93258d9fcfe139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*-PVzecNs3s4ZbJsdsgIsGA.png"/></div></a></figure><p id="517b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最近我写了关于如何<a class="ae kv" href="https://www.webtips.dev/how-to-make-your-very-first-chrome-extension" rel="noopener ugc nofollow" target="_blank">创建自己的Chrome扩展</a>来提高工作流的吞吐量，我想知道是否有更轻量级的替代品。</p><p id="a1ae" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果我们只想复制/突出显示文本，做不超过10行代码的事情呢？你能想到每天一遍又一遍地写同样的东西吗？我肯定可以。</p><p id="aefa" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">重复性的事情总是可以自动化的。如果有机会实现自动化，我们应该投资。时间是我们拥有的最宝贵的资源。它是有限的，不像其他资产，它不能赚取。</p><p id="85f8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">所以下次如果你发现自己每天都在做同样的事情，想想这些步骤是否可以被书签或者其他自动化工具所取代。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="4a1e" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">什么是书签？</h1><blockquote class="ms"><p id="9a93" class="mt mu iq bd mv mw mx my mz na nb ls dk translated">bookmarlet是一个包含JavaScript代码的书签，可以增强您的浏览体验</p></blockquote><p id="5a73" class="pw-post-body-paragraph kx ky iq kz b la nc jr lc ld nd ju lf lg ne li lj lk nf lm ln lo ng lq lr ls ij bi translated">bookmarklets的好处是可以将任何JavaScript代码转换成一个。您一直放入控制台的代码段可以被它们替换。</p><p id="4aa2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么如何创建一个呢？假设我们想突出显示网站上的链接。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="1b76" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">如何把JavaScript代码变成Bookmarklet？</h1><p id="d76d" class="pw-post-body-paragraph kx ky iq kz b la nh jr lc ld ni ju lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">首先，像往常一样在控制台中编写JavaScript代码。按照上面的例子，可以使用下面的方法来完成:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="078e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我故意写了多行。一个bookmarklet需要被压缩成一行才能工作。要简化JavaScript，有各种在线工具，所以你不必额外下载任何东西。我在用Javascript-minifier.com的<a class="ae kv" href="https://javascript-minifier.com" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="fc12" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">书签总是通过链接指向一个网站。为了使bookmarklet有效并使用JavaScript而不是链接，我们需要在它前面加上前缀<code class="fe no np nq nr b">javascript:</code>。有两种方法可以将一个脚本转换成一个有效的bookmarklet。使用立即调用的函数或<code class="fe no np nq nr b">void</code>操作符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="2dd3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后将它添加为书签，打开一个新标签，点击地址栏内的星形图标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/72a137cbca9b2ac1d5876f169746dcca.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*pZ88oOWEtEidakB0YvLsCQ.png"/></div></figure><p id="e8fa" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">命名您的书签，并将其放入书签栏。完成后，右键单击新创建的书签并单击edit，然后用我们创建的脚本替换URL。就是这样！您刚刚创建了您的第一个书签。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c14066a1c486231422e405d547b13ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*amTiv9oJXyKENwlL2bVi9A.png"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="4fef" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">实际例子</h1><p id="ffc6" class="pw-post-body-paragraph kx ky iq kz b la nh jr lc ld ni ju lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">我最近开始使用Quora，我注意到统计菜单下的数字并不等同于我个人主页上的浏览量总和。</p><p id="2a92" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这是合理的，这将需要大量的资源来保持每个用户的统计数据实时更新，因此它们会在给定的时间间隔内更新。但是如果我想在我的个人资料页面上看到它们呢？每个问题的浏览次数相加。我们在DOM中有它们，所以我们可以很容易地查询它们。问题是，只有当答案不成立时，它们才会出现。要全部取消，我们可以在每个“<em class="nu"> more </em>”链接上触发一个点击事件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="cfe3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一旦我们有了DOM中的视图，就只需要收集它们的值并为其创建一个新元素:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="f1e5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这将创建一个新元素，就在个人资料页面的关注者数量旁边。</p><p id="66e8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是现在，我们有了另一个问题。如果我们尝试在“<em class="nu"> more </em>”链接被点击后立即运行这段代码，我们将得到0的视图，因为在代码运行时请求还没有发出。幸运的是，我们在Quora上有jQuery，这意味着我们可以使用<code class="fe no np nq nr b">ajaxStop</code>。<code class="fe no np nq nr b">ajaxStop</code>在没有未决请求时运行——这就是我们想要的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="a2b2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在我们触发链接点击后，我们等待<code class="fe no np nq nr b">ajaxStop</code>被调用。所有答案成功加载后，它将运行。然后我们统计浏览量并显示出来。</p><p id="de7e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后但同样重要的是，我们可以解除对<code class="fe no np nq nr b">ajaxStop</code>的订阅，以避免在使用bookmarklet后出现其他请求时多次添加相同的元素。</p><p id="7e80" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">整个剧本不到15行。在缩小并添加了<code class="fe no np nq nr b">javascript:</code>前缀后，我们可以开始使用我们全新的书签了。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="b89a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">摘要</h1><p id="02b1" class="pw-post-body-paragraph kx ky iq kz b la nh jr lc ld ni ju lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">可能性是无限的，复杂性可以达到无限。写一个只做一件事的bookmarklet怎么样？—将外部脚本注入站点。然后，外部资源可以引入整个应用程序，通过添加关于站点和新用户功能的各种统计数据，使用户体验加倍。</p><p id="fcc0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">您可以每天使用bookmarklets来提高工作效率的其他一些例子包括:</p><ul class=""><li id="c66f" class="nv nw iq kz b la lb ld le lg nx lk ny lo nz ls oa ob oc od bi translated">根据票据自动生成分行名称</li><li id="3028" class="nv nw iq kz b la oe ld of lg og lk oh lo oi ls oa ob oc od bi translated">自动生成拉式请求描述</li><li id="d4e4" class="nv nw iq kz b la oe ld of lg og lk oh lo oi ls oa ob oc od bi translated">显示仅在DOM中可用的项目的信息</li><li id="3001" class="nv nw iq kz b la oe ld of lg og lk oh lo oi ls oa ob oc od bi translated">删除超过x天的电子邮件</li><li id="d8a2" class="nv nw iq kz b la oe ld of lg og lk oh lo oi ls oa ob oc od bi translated">凡是你能想到的</li></ul><p id="79cc" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">感谢您花时间阅读本文，编码快乐！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://medium.com/@ferencalmasi/membership"><div class="gh gi oj"><img src="../Images/e66c4cd6d9849ac0bd245f3fc39b65c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZ9xuLqLkbqUG65sgVB3gg.png"/></div></a></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://www.webtips.dev/how-to-make-your-very-first-chrome-extension"><div class="gh gi kw"><img src="../Images/ce3f8018c5bb15af4cadf1a82b885bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*dPCxZES7-dGDFXVktO8jNw.png"/></div></a></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Dynamic Sitemap Generation in Next.js 🗺</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js中的动态站点地图生成🗺</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/dynamic-sitemap-generation-in-next-js-7107ccdc6830?source=collection_archive---------1-----------------------#2020-09-10">https://javascript.plainenglish.io/dynamic-sitemap-generation-in-next-js-7107ccdc6830?source=collection_archive---------1-----------------------#2020-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3db0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用next.js创建你自己的动态站点地图！</h2></div><p id="6c10" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让你的网页被索引，让所有的网站都被谷歌发现，你也许应该提供一个指南针来帮助你——也被称为站点地图。网站地图是你的网页上所有你想让谷歌索引的路线的列表。让我们为你的Next.js应用做一个动态的站点地图，不需要任何插件或者库！</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/96adf3ad9acba7605ea7edf675952773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FUDMAGqlzz7B_4co"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Photo by <a class="ae lr" href="https://unsplash.com/@aronvisuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Aron Visuals</a> on <a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="57ce" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">🗺什么是网站地图？</h1><p id="2b49" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">站点地图是一组被写成XML文件(<code class="fe mp mq mr ms b">sitemap.xml</code>)的URL。下图是我用Next.js编写的一个名为<a class="ae lr" href="http://www.inktemplate.com" rel="noopener ugc nofollow" target="_blank"> InkTemplate </a>的页面中的一个站点地图的截图:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mt"><img src="../Images/b7bb3e387b1373ed4c4d4ca4a52a6102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mgAzGI8A9Am3CF-gE_DO8w.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Example of<strong class="bd mu"> Sitemap.xml </strong>from <a class="ae lr" href="http://www.inktemplate.com" rel="noopener ugc nofollow" target="_blank">InkTemplate</a></figcaption></figure><p id="335a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最基本的站点地图只有一组链接(<code class="fe mp mq mr ms b">&lt;url&gt;</code>)，但是除了位置(<code class="fe mp mq mr ms b">&lt;loc&gt;</code>)，你还可以添加更多的信息，比如优先级(<code class="fe mp mq mr ms b">&lt;pri&gt;</code>)、更改频率(<code class="fe mp mq mr ms b">&lt;changefreq&gt;</code>)和最后修改日期(<code class="fe mp mq mr ms b">&lt;lastmod&gt;</code>)。如果你想了解更多关于sitemap XML标准的内容，你可以在<a class="ae lr" href="https://www.sitemaps.org/protocol.html" rel="noopener ugc nofollow" target="_blank">文档</a>中找到更多。你可以指向robots.txt中的站点地图，这样爬虫和搜索引擎就可以找到它——通常，你可以在根位置(<code class="fe mp mq mr ms b">yoursite.com/sitemap.xml</code>)找到<code class="fe mp mq mr ms b">sitemap.xml</code>和<code class="fe mp mq mr ms b">robots.txt</code>。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mv"><img src="../Images/169c5817dabf4d281e62bec81dc7209d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oRpFUTNjjqzW2VsSFXfx-w.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Example of robots.txt from <a class="ae lr" href="http://www.inktemplate.com" rel="noopener ugc nofollow" target="_blank">InkTemplate</a></figcaption></figure><h1 id="cd3d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">🗺用next.js创建你自己的站点地图</h1><p id="600d" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">本质上，Next.js有一个文件路由系统。如果你想把你的站点地图放在根目录(<code class="fe mp mq mr ms b">yoursite.com/sitemap.xml</code>)，你可以简单地在<code class="fe mp mq mr ms b">routes</code>文件夹中创建一个名为<code class="fe mp mq mr ms b">sitemap.xml.jsx</code>的文件。让我们制作一个简单的站点地图，列出您的页面的所有路线:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi my"><img src="../Images/e0b53d72dfef653d2b7edfd810ef9f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pqOCsANuKEAH0dq5k8drew.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Sitemap with routes — Image by Author</figcaption></figure><p id="cfbe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您有多个环境，<code class="fe mp mq mr ms b">getInitialProps</code>将为您提供头文件，因此您可以获取<code class="fe mp mq mr ms b">host</code>或其他您可能需要的相关信息。</p><h2 id="7492" class="mz lt iq bd lu na nb dn ly nc nd dp mc ko ne nf me ks ng nh mg kw ni nj mi nk bi translated">💃动态路线</h2><p id="43c6" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">大多数页面都可能有一个动态的路径，就像不同的产品一样。假设您有一个名为<code class="fe mp mq mr ms b">product/[id].jsx</code>的路线，为每个产品提供了它的地区路线。对于id为<strong class="kh ir"> 123 </strong>的产品，URL将是<code class="fe mp mq mr ms b">yoursite.com/product/<strong class="kh ir">123</strong></code>。您可能希望每个产品在sitemap中获得自己的URL，因此您需要通过硬编码一个列表或从<code class="fe mp mq mr ms b">getInitialProps</code>中的API获取一个列表来提供所有产品的列表。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nl"><img src="../Images/38e9be477db940e9f22c63c4fcb67001.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8tjHHNnWQ_gfDXiSpEVVg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Sitemap with dynamic routes — Image by Author</figcaption></figure><h2 id="bef6" class="mz lt iq bd lu na nb dn ly nc nd dp mc ko ne nf me ks ng nh mg kw ni nj mi nk bi translated">💬(i18n)语言路线</h2><p id="ca1a" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">为了扩大你的读者群，用多种语言提供你的内容是明智的。为了让谷歌能够索引不同语言的所有页面，你应该在slug中有类似于<code class="fe mp mq mr ms b">yoursite.com/&lt;LANGUAGE&gt;/product/123</code>的语言代码。对于所有产品和所有语言，将有一个独特的网址。如果你有英文(默认)和挪威语(否)的页面，你会有两个链接指向产品123，如下:<code class="fe mp mq mr ms b">yoursite.com/product/123</code>和<code class="fe mp mq mr ms b">yoursite.com/<strong class="kh ir">no</strong>/product/123</code>。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nm"><img src="../Images/09505007d074919c393182bbd75be15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tNPY_iua-MWLISbCtxlSzA.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Sitemap with language codes — Image by Author</figcaption></figure><h1 id="02e0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">⏩快速进带</h1><p id="0593" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">好了，现在怎么办？你有一个网站地图，列出了你的网页的所有不同的路线。为了加快这个过程，你可以在谷歌搜索控制台告诉谷歌<em class="nn">“嗨，我有一张地图供你探索”</em>。在<a class="ae lr" href="https://search.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌搜索控制台</a>你可以上传你的网站地图，谷歌会马上查看地图，开始索引你的页面。我还建议使用谷歌搜索控制台来跟踪关键词——它会让你知道人们在点击你的页面之前搜索了什么，并且可以让你跟踪你的搜索评级。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="0d17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编码快乐！🎉</p><h2 id="8910" class="mz lt iq bd lu na nb dn ly nc nd dp mc ko ne nf me ks ng nh mg kw ni nj mi nk bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="5e88" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae lr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kh ir">！</strong></p></div></div>    
</body>
</html>
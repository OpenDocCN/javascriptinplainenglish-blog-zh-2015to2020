<html>
<head>
<title>Building HTML Tables with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript构建HTML表格</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-html-tables-with-javascript-15c79a0055ff?source=collection_archive---------2-----------------------#2020-08-12">https://javascript.plainenglish.io/building-html-tables-with-javascript-15c79a0055ff?source=collection_archive---------2-----------------------#2020-08-12</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div class="gi gj jo"><img src="../Images/6520eb2f08a923a8f633e6f2963b7b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*3rdWPOc2zFotCq-KhDlXFg.jpeg"/></div><figcaption class="jv jw gk gi gj jx jy bd b be z dk">Image: <a class="ae jz" href="https://pixabay.com/photos/tools-workshop-equipment-690038/" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="39dd" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">在本文中，我将演示用JavaScript创建和填充HTML表格的三种方法，并分析每种方法的优缺点。</p><p id="3153" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">下面截图中的表格列出了所有118种元素(原子类型)，包括它们的名称、原子序数(原子核中的质子数)和化学符号(化学式中使用的缩写，如H2O或氯化钠)。</p><figure class="kz la lb lc gu js gi gj paragraph-image"><div class="gi gj ky"><img src="../Images/632927a490325596fd4e4fed413c5df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*xo7c44K_o0VsAkNkP2LI_g.png"/></div></figure><p id="c7dc" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">表格本身及其标题、列标题和行是使用JavaScript从数据结构动态创建的，在本例中是一个对象数组。</p><p id="c346" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">与其他HTML元素相比，表格相对复杂，创建起来很麻烦，所以值得花些精力，以一种既高效运行又易于编码的方式来创建。</p><p id="4bbc" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">正如我上面提到的，我使用三种不同的方法来创建一个表。这些是:</p><ul class=""><li id="ff25" class="ld le ir kc b kd ke kh ki kl lf kp lg kt lh kx li lj lk ll bi translated">将表格构建为单个HTML字符串，然后通过单个操作将其添加到文档中</li><li id="540e" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">使用标准的DOM操作方法，即createElement、createTextNode和appendChild</li><li id="2b46" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">使用特定于表格的方法，即createCaption、insertRow和insertCell</li></ul><p id="5910" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">我将在下面的代码描述中详细讨论每一个。</p><h2 id="9cd8" class="lr ls ir bd lt lu lv dn lw lx ly dp lz kl ma mb mc kp md me mf kt mg mh mi mj bi translated">该项目</h2><p id="9c56" class="pw-post-body-paragraph ka kb ir kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ik bi translated">该项目由以下文件加上一个CSS文件和一个图形组成。它们一起构成了一个完整的网络应用程序，你可以从<a class="ae jz" href="https://github.com/CodeDrome/creating-html-tables-with-javascript" rel="noopener ugc nofollow" target="_blank"> Github库</a>中克隆或下载它，在你的浏览器中运行，</p><ul class=""><li id="29f6" class="ld le ir kc b kd ke kh ki kl lf kp lg kt lh kx li lj lk ll bi translated">creatingtables.htm</li><li id="49e9" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">创建表格. js</li><li id="1d3b" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">elements.js</li></ul><h2 id="8f4c" class="lr ls ir bd lt lu lv dn lw lx ly dp lz kl ma mb mc kp md me mf kt mg mh mi mj bi translated">数据源</h2><p id="a17c" class="pw-post-body-paragraph ka kb ir kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ik bi translated">在开始创建表之前，我需要简要描述一下数据源。在现实世界中，您可能会填充一个表，例如，从REST API获得的JSON解析的数据结构。对于这个演示，我已经将数据硬编码到Github库的一部分的<strong class="kc is"> elements.js </strong>中的一个类的静态方法中。该类还有获取列标题和对象属性名称的方法。</p><p id="a2be" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这是元素数据的开始，这样您就可以看到它的样子。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="mp mq l"/></div></figure><p id="1a62" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">现在让我们开始查看<strong class="kc is"> creatingtables.js </strong>中的代码。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="mp mq l"/></div></figure><p id="2e7b" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这里我们调用三个函数中的一个来创建和填充我们的表。当然，您可以注释/取消注释函数调用来运行您想要的函数。</p><p id="13b7" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">下面是这些函数中的第一个。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="mp mq l"/></div></figure><p id="0ebb" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这三个功能的总体结构是相同的:</p><ul class=""><li id="15a3" class="ld le ir kc b kd ke kh ki kl lf kp lg kt lh kx li lj lk ll bi translated">获取数据</li><li id="90cb" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">创建表格</li><li id="0ae5" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">添加标题</li><li id="3c41" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">添加列标题</li><li id="a56f" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">插入数据</li><li id="2f71" class="ld le ir kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">将表格插入到creatinghtmltables.htm的空div中</li></ul><p id="8a56" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">在第一个示例中，我们创建了一个名为<code class="fe mr ms mt mu b">tablehtml</code>的变量，将表格保存为一个字符串，并用开始的表格标签和标题对其进行初始化。</p><p id="dd37" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">接下来，我们添加一行并迭代标题，在关闭row标记之前为每个标题添加一个单元格。</p><p id="1d09" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">之后，我们迭代元素数组，为每个元素添加一行，然后迭代每个元素对象的属性，并在此过程中添加单元格。</p><p id="2781" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">最后，我们只需要关闭表格并将其设置为空div的<code class="fe mr ms mt mu b">innerHTML</code>。</p><p id="8e89" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated"><strong class="kc is">这种方法的优点</strong>是当设置<code class="fe mr ms mt mu b">innerHTML</code>时，我们只在最后点击DOM一次。当然，所有的元素仍然需要添加到DOM中，但是这是由JavaScript引擎在较低的层次上完成的，而不是我们的JS函数调用。在下面的第二个函数中，我们调用了数百次DOM方法，即使是对于这个大小适中的数据集。</p><p id="ffb9" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">缺点是我们将HTML硬编码成JavaScript。很难完全避免这种情况，但是JavaScript中的大量HTML很难编写和维护，并且违反了您所认同的任何关注点分离教条。</p><p id="a105" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">让我们继续讨论标准的DOM方法。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="mp mq l"/></div></figure><p id="0bc5" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这里的整体结构基本相同，但是这个函数对表格、标题、行和单元格使用了<code class="fe mr ms mt mu b">createElement</code>和<code class="fe mr ms mt mu b">createTextNode</code>，然后用<code class="fe mr ms mt mu b">appendChild</code>将它们添加到各自的父元素中。</p><p id="d4d3" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated"><strong class="kc is">优势</strong>是我们使用“官方”的前门方法来操作更健壮的DOM。例如，如果我们调用<code class="fe mr ms mt mu b">document.createElement(“tr”)</code>，那么我们知道我们将得到一个<code class="fe mr ms mt mu b">&lt;tr&gt;</code>,而不用担心拼写错误或必须记住在末尾添加<code class="fe mr ms mt mu b">&lt;/tr&gt;</code>。</p><p id="a229" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated"><strong class="kc is">缺点</strong>首先，正如我上面提到的，对各种DOM方法的大量调用，在这个相当小的表中有近500个，其次，这段代码比下面列出的下一个函数要长得多。</p><p id="5d84" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">最后让我们看看表格元素提供的一些方法。</p><figure class="kz la lb lc gu js"><div class="bz fq l di"><div class="mp mq l"/></div></figure><p id="b523" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">这里的整体结构是一样的，但是你可以看到代码更加简洁。</p><p id="5266" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">我们仍然需要<code class="fe mr ms mt mu b">document.createElement(“table”)</code>来创建一个表格，但之后我们可以使用表格或其子元素的方法和属性来创建标题、行和单元格。</p><p id="a52e" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">注意<code class="fe mr ms mt mu b">insertRow</code>和<code class="fe mr ms mt mu b">insertCell</code>使用一个索引参数，但是您可以使用-1在末尾插入行或单元格，就像我在这里所做的那样。</p><p id="6afe" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">一个轻微的问题是你不能直接创建一个<code class="fe mr ms mt mu b">&lt;th&gt;</code>，因为<code class="fe mr ms mt mu b">insertCell</code>总是给你一个<code class="fe mr ms mt mu b">&lt;td&gt;</code>。我通过覆盖新单元的<code class="fe mr ms mt mu b">outerHTML</code>解决了这个问题。</p><p id="6150" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">插入单元格时，有两种方法设置文本，设置<code class="fe mr ms mt mu b">innerHTML</code>或创建/追加文本节点。我无法决定我更喜欢哪一个:第一个更紧凑，第二个更符合这个函数方法的精神。你挑吧。</p><p id="a219" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">同样的优点/缺点也适用:与大量的DOM操作调用相比，代码更容易编写和维护。</p><h2 id="4857" class="lr ls ir bd lt lu lv dn lw lx ly dp lz kl ma mb mc kp md me mf kt mg mh mi mj bi translated">尝试一下</h2><p id="4cc8" class="pw-post-body-paragraph ka kb ir kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ik bi translated">如果你想看到结果，在浏览器中打开<strong class="kc is">creatinghtmltables.htm</strong>，通过取消注释<code class="fe mr ms mt mu b">window.onload</code>中的函数调用，一次运行一个函数。当然，三者的最终结果是一样的。</p><h2 id="3797" class="lr ls ir bd lt lu lv dn lw lx ly dp lz kl ma mb mc kp md me mf kt mg mh mi mj bi translated">结论</h2><p id="b05d" class="pw-post-body-paragraph ka kb ir kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ik bi translated">那么，用哪个呢？没有明确的答案，但我看不出第二个选项<code class="fe mr ms mt mu b">createElement</code>、<code class="fe mr ms mt mu b">createTextNode</code>和<code class="fe mr ms mt mu b">appendChild</code>有什么优势，因为我们有更专业的方法。</p><p id="e450" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">如果你有一个简单但很大的数据集，那么构建一个字符串是很有效的，如果你不介意编码所有的开始和结束标签以及它们的内容，如果数据结构或需求改变，冒着必须解开代码的风险。如果你有少量的数据，喜欢光滑优雅的代码，那么选择第三个选项，<code class="fe mr ms mt mu b">createCaption</code>，<code class="fe mr ms mt mu b">insertRow</code>和<code class="fe mr ms mt mu b">insertCell</code>。</p><p id="16cd" class="pw-post-body-paragraph ka kb ir kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ik bi translated">另外请注意，<code class="fe mr ms mt mu b">createCaption</code>、<code class="fe mr ms mt mu b">insertRow</code>和<code class="fe mr ms mt mu b">insertCell</code>只是一些特定于表格的方法，我将在以后的文章中研究其他方法。</p></div></div>    
</body>
</html>
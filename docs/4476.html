<html>
<head>
<title>Vuex 4 — Getters and Mutations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuex 4 —吸气剂和突变</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vuex-4-getters-and-mutations-9723083f1ff7?source=collection_archive---------11-----------------------#2020-12-14">https://javascript.plainenglish.io/vuex-4-getters-and-mutations-9723083f1ff7?source=collection_archive---------11-----------------------#2020-12-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/54b81b236b257be607b4677562a73379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3dt2n50K-3pugtCB"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@alekonpictures?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alekon pictures</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e331" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4处于测试阶段，可能会有变化。</p><p id="25ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex是一个流行的Vue状态管理库。</p><p id="a15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4是专为Vue 3设计的版本。</p><p id="5bb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将Vuex 4与Vue 3配合使用。</p><h1 id="805d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">方法风格的Getters</h1><p id="4de1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建接受一个或多个参数的getters。</p><p id="1e2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1c37" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div&gt;<br/>        &lt;p&gt;{{getTodoById(1).text}}&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          todos: [<br/>            { id: 1, text: "eat", done: true },<br/>            { id: 2, text: "sleep", done: false }<br/>          ]<br/>        },<br/>        getters: {<br/>          getTodoById: (state) =&gt; (id) =&gt; {<br/>            return state.todos.find((todo) =&gt; todo.id === id);<br/>          }<br/>        }<br/>      });</span><span id="24d5" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        computed: {<br/>          ...Vuex.mapGetters(["getTodoById"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3370" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个状态为<code class="fe mt mu mv mj b">todos</code>的商店。</p><p id="032f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有<code class="fe mt mu mv mj b">getTodosById</code> getter方法，它返回一个函数，该函数接受<code class="fe mt mu mv mj b">id</code>参数并返回与给定的<code class="fe mt mu mv mj b">id</code>值匹配的<code class="fe mt mu mv mj b">state.todos</code>条目。</p><p id="f6b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在root Vue实例中，我们调用了<code class="fe mt mu mv mj b">Vuex.mapGetters</code>来将getters映射到方法。</p><p id="9708" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以像在模板中那样在组件中调用它。</p><h1 id="858b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">突变</h1><p id="e7b7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用突变来改变我们的存储状态。</p><p id="bb3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6b5a" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="decrement"&gt;decrement&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          decrement(state) {<br/>            state.count--;<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          decrement() {<br/>            this.$store.commit("decrement");<br/>          }<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="95ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe mt mu mv mj b">decrement</code>突变，它将<code class="fe mt mu mv mj b">state.count</code>的值减少1。</p><p id="c214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以调用<code class="fe mt mu mv mj b">this.$store.commit</code>方法来调用我们的突变来更新<code class="fe mt mu mv mj b">count</code>状态。</p><p id="6d77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有一个计算的<code class="fe mt mu mv mj b">count</code>属性来获取<code class="fe mt mu mv mj b">count</code>状态的值。</p><h1 id="a43f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提交有效负载</h1><p id="6bc7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创造一种突变来获取有效载荷。</p><p id="4502" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">变异方法接受值为的第二个参数。</p><p id="3e3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="38d0" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="decrement"&gt;decrement&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          decrement(state, n) {<br/>            state.count -= n;<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          decrement() {<br/>            this.$store.commit("decrement", 5);<br/>          }<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f7db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们给<code class="fe mt mu mv mj b">decrement</code>变异方法增加了一个<code class="fe mt mu mv mj b">n</code>参数，用<code class="fe mt mu mv mj b">n</code>减去<code class="fe mt mu mv mj b">state.count</code>。</p><p id="6931" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用第二个参数调用<code class="fe mt mu mv mj b">commit</code>来传递我们想要减去<code class="fe mt mu mv mj b">state.count</code>的值。</p><p id="ec86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们单击减量按钮时，我们可以看到显示的<code class="fe mt mu mv mj b">count</code>值。</p><h1 id="caf0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6f83" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vuex 4创建突变来修改状态数据。</p><p id="4295" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">getter可以定义为一个方法风格的getter，让我们传入参数。</p><p id="ad45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
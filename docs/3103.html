<html>
<head>
<title>JavaScript Boxing Wrappers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript拳击包装器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-boxing-wrappers-5b5ff9e5f6ab?source=collection_archive---------1-----------------------#2020-08-29">https://javascript.plainenglish.io/javascript-boxing-wrappers-5b5ff9e5f6ab?source=collection_archive---------1-----------------------#2020-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="99c9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">简短、有用的JavaScript课程—让它变得简单</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8253d2768ab9dfd53733926545cb2214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ru-6NyBgp5NzTcAhQc26lA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">By undraw.com</figcaption></figure><p id="7168" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在JavaScript和其他语言中，基元值没有方法或属性，所以如果您想使用它们，您需要使用包装器。</p><p id="1347" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">原语是编程语言中最简单的元素。JavaScript有六种基本类型:字符串、数字、布尔、空、未定义和符号，其他都是对象。</p><h1 id="1b85" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">索引</h1><ul class=""><li id="1e8f" class="mj mk iq kx b ky ml lb mm le mn li mo lm mp lq mq mr ms mt bi translated">自动装箱</li><li id="0655" class="mj mk iq kx b ky mu lb mv le mw li mx lm my lq mq mr ms mt bi translated">手动拳击和陷阱</li><li id="fb55" class="mj mk iq kx b ky mu lb mv le mw li mx lm my lq mq mr ms mt bi translated">取消装箱</li><li id="bce1" class="mj mk iq kx b ky mu lb mv le mw li mx lm my lq mq mr ms mt bi translated">结论</li></ul><h1 id="d018" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">自动装箱</h1><p id="79e4" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">装箱是将一个原始值包装在一个对象中。当你像对待一个对象一样对待一个基本类型时，例如，调用toLowerCase函数，JavaScript会将基本类型包装到相应的对象中。这个新的对象然后被链接到相关的内置<.prototype>上，所以你可以在基本类型上使用原型方法。</.prototype></p><p id="3b1d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您在这里看到的，当您试图对一个基元值使用一个方法时，JavaScript会自动进行装箱，因此，您可以使用String对象的不同方法:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="5420" class="nh ls iq nd b gy ni nj l nk nl">//String primitive name<br/>const name = "KESK";</span><span id="1bad" class="nh ls iq nd b gy nm nj l nk nl">name.toLowerCase();//kesk<br/>name.substring(1);//ESK</span></pre><p id="50e1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">自动装箱是一个重要的特性，因为它使标准库方法易于访问。</p><h1 id="8cb1" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">手动拳击和陷阱</h1><p id="3fb3" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">一般来说，直接使用装箱的对象包装器通常不是一个好主意，因为有些问题与他有关，如果您不想得到意外的结果，就必须小心。</p><p id="653f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">考虑以下示例:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="2a81" class="nh ls iq nd b gy ni nj l nk nl">const a = new Boolean(true)<br/>if(a) console.log("it's true")// it's true</span><span id="281a" class="nh ls iq nd b gy nm nj l nk nl">const b = new Boolean(false)<br/>if(!b) console.log("never runs");// <em class="nn">objects are “truthy.“</em></span><span id="9319" class="nh ls iq nd b gy nm nj l nk nl">const c = Object(false)<br/>if(!c) console.log("never runs"); // <em class="nn">objects are “truthy.“</em></span></pre><p id="14e5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里的问题是，您正在为一个错误的值<strong class="kx ir">创建一个对象包装器，但是对象是“真实的”。</strong>所以，如果你想手工输入原始值，请小心。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="a4d2" class="nh ls iq nd b gy ni nj l nk nl">const b = Boolean(false)<br/>if(!b.valueOf()) console.log("its false"); // its false</span></pre><p id="4e95" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一般来说，最好让隐式装箱，因为浏览器是为此而优化的，所以如果您尝试手动装箱，您的代码可能会变慢。而且，当直接使用对象包装器时很容易出错。喜欢使用基本值，例如，字符串“abc”与等效的包装对象。</p><h1 id="432c" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">取消装箱</h1><p id="243f" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">从对象包装器获取基础基元值的最简单方法是使用valueOf()方法:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="ab3a" class="nh ls iq nd b gy ni nj l nk nl">const a = Object(false);<br/>a == false; //true<br/>a === false //false</span><span id="7cb3" class="nh ls iq nd b gy nm nj l nk nl">a.valueOf() == false //true<br/>a.valueOf() === false //true</span></pre><p id="dded" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">取消装箱也可以隐式完成(强制):</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="8af0" class="nh ls iq nd b gy ni nj l nk nl">a == false; //true</span></pre><h1 id="279b" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">结论</h1><p id="24d1" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">装箱和拆箱是T4的常规做法，但是根据语言和实现的不同，包装器的使用会比仅仅使用原始值更慢，占用更多的内存。另一方面，它允许您使用更高级别的数据结构或方法，并在代码中实现更高的灵活性。</p><p id="e718" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您使用手动拳击，请小心包装陷阱；此外，一般来说，最好让隐式装箱，因为浏览器引擎是为此而优化的。</p><p id="20b6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">谢谢你看我！</p><h2 id="a328" class="nh ls iq bd lt no np dn lx nq nr dp mb le ns nt md li nu nv mf lm nw nx mh ny bi translated"><strong class="ak">简单英语JavaScript</strong></h2><p id="7458" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">你知道我们有三个出版物和一个YouTube频道吗？在<a class="ae nz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">找到所有链接！</strong></a></p></div></div>    
</body>
</html>
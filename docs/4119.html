<html>
<head>
<title>Crank up auto import for dynamic Nuxt.js components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启动动态Nuxt.js组件的自动导入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/crank-up-auto-import-for-dynamic-nuxt-js-components-54e7f198fc16?source=collection_archive---------1-----------------------#2020-11-18">https://javascript.plainenglish.io/crank-up-auto-import-for-dynamic-nuxt-js-components-54e7f198fc16?source=collection_archive---------1-----------------------#2020-11-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="74db" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">自动导入所有的东西🚀</h2></div><p id="892a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">回到过去，我们常常将所有这些组件导入到每个单独的<code class="fe ky kz la lb b">.vue</code>文件中——一次又一次地导入和注册它们变成了一项乏味的任务。</p><p id="b4fa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后令人敬畏的<a class="lc ld ep" href="https://medium.com/u/20f059d252cc?source=post_page-----54e7f198fc16--------------------------------" rel="noopener" target="_blank"> Nuxt.js </a>团队发布了<code class="fe ky kz la lb b">@nuxt/components</code>来自动导入项目和第三方库特定的组件🚀不再需要进口了。不再注册组件。</p><p id="2fb7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就这样！干净的项目，干净的组件，干净的网络包块。</p><p id="4ab7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">至少我是这么认为的。</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><h1 id="7a1a" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">无头CMS呢？</h1><p id="6087" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">在我们的数字代理公司，我们有一大堆使用无头CMS的项目— <a class="ae mj" href="https://www.storyblok.com/" rel="noopener ugc nofollow" target="_blank">童话镇</a>就是其中之一。故事板让开发人员和客户可以自由地以所有可能的方式<strong class="ke io">嵌套组件——动态地<em class="le"/></strong>。</p><p id="8067" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我们想<strong class="ke io">动态加载组件<em class="le"/></strong>。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mk"><img src="../Images/e00c73a924c6e2a10ae387005a68b2c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y8NBHhq6sseXoX-luMQIJg.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">we wanted to load the world, <strong class="bd na">dynamically</strong></figcaption></figure><h1 id="f392" class="lm ln in bd lo lp nb lr ls lt nc lv lw jt nd ju ly jw ne jx ma jz nf ka mc md bi translated">没有。</h1><p id="b521" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">在本文撰写之时，这是不可能的——至少在《T2》已经面世的情况下是不可能的(《T21》第43期)。</p><p id="5cd7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我决定挖掘一些代码——让我们看看这个Nuxt.js模块是如何工作的。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/2ad4e0479788c129ddc6883bc9b24283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*SMkmliOoT91G2Y-LRqz-Yw.jpeg"/></div></figure><p id="7e7b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看起来该模块基于传递给<code class="fe ky kz la lb b">components:dirs</code>钩子的内容获取组件。</p><p id="3210" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它准备了一个包含组件名称(PascalCase和kebb-case)及其相对文件路径的组件数组。</p><p id="bd84" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二步，将扫描所有<code class="fe ky kz la lb b">.vue</code>文件，以加载给定模板中使用的组件(并导入这些组件)。<strong class="ke io">这就是为什么动态组件的自动导入根本不起作用的原因</strong>。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nh"><img src="../Images/7c2177b2e9708fba01fa8232c3bf4b98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGF26UUdaLA0ZsFeqWhDIA.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">Nuxt.js <strong class="bd na">does not auto import</strong> dynamic components</figcaption></figure><p id="f9ba" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">回到根-手动导入所有这些组件<em class="le"/>？<strong class="ke io">所有的14328种可能性？</strong></p><h2 id="3df4" class="ni ln in bd lo nj nk dn ls nl nm dp lw kl nn no ly kp np nq ma kt nr ns mc nt bi translated">不可能。</h2><p id="376e" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">好吧，那么——让我们试着想办法解决这个问题。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7cc56a24020e430006c952b625a8d1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*L91IT1Zt4_nPOpQ9Kigszg.jpeg"/></div></figure><h1 id="8e37" class="lm ln in bd lo lp nb lr ls lt nc lv lw jt nd ju ly jw ne jx ma jz nf ka mc md bi translated">潜在的魔力</h1><p id="b54f" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">好吧，如果我们传递一个导入的vue组件的组件名<strong class="ke io">或者传递组件本身</strong>，就可以渲染一个动态组件。<em class="le">记住</em> : <code class="fe ky kz la lb b">@nuxt/components</code>知道自动导入机构的每个相对路径。所以，如果我们能让<strong class="ke io">动态webpack导入与那些路径</strong>一起在一个组件中可用，我们就能加载它的子组件。</p><h2 id="eccb" class="ni ln in bd lo nj nk dn ls nl nm dp lw kl nn no ly kp np nq ma kt nr ns mc nt bi translated">救援插件</h2><p id="40a5" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">当我们构建一个模块时，我们能够挂钩到<code class="fe ky kz la lb b">components:extend</code>钩子并获取所有的组件名称。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nv"><img src="../Images/0dd1e9e37e5572dfa66941a89caa880a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aHHh0K-yCZBiH1fmtLNLcg.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">module.js</figcaption></figure><p id="d666" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们<strong class="ke io">为插件中的所有组件构建动态导入语句</strong>，插件将加载器注入每个vue组件。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nw"><img src="../Images/6c90a45614bdd42c742ebafebb2a2d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOgEnF3WR8VB2xMSFDocEw.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">dynamic webpack import for for one component</figcaption></figure><p id="2934" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可以翻译成这样:</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nx"><img src="../Images/fb7c055ab4f91944c8a017fd7db0b193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7OIVJc5Sg8GGDC_CwlIhuw.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">plugin.js</figcaption></figure><p id="2143" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这很简单，阿米利特？</p><h2 id="9c7f" class="ni ln in bd lo nj nk dn ls nl nm dp lw kl nn no ly kp np nq ma kt nr ns mc nt bi translated">水合所有的东西</h2><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/cb15c6b8c8e5bf5a22544207066a2f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*N4t-uHb-Ghk2VQ5mzG3arQ.jpeg"/></div></figure><p id="4829" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在有可能<strong class="ke io">执行注入的异步导入</strong>来加载特定的组件——我们将使用<code class="fe ky kz la lb b">vue-lazy-hydration</code>来这样做(非常感谢<a class="lc ld ep" href="https://medium.com/u/5dda6d1399ef?source=post_page-----54e7f198fc16--------------------------------" rel="noopener" target="_blank"> Markus Oberlehner </a>)。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi nz"><img src="../Images/360b2f21aa9cba1e2e5f32a137a93021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlDFXB-k68bjARI61ql7jA.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk">our new <strong class="bd na">NuxtDynamic</strong> component</figcaption></figure><p id="4ae4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在执行惰性导入之后，可以将加载的组件传递给:is prop。<code class="fe ky kz la lb b">NuxtDynamic</code>现在可以用来自动导入每一个动态组件。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mk"><img src="../Images/ed8556041fa6707b4b83ffa1a649412c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZSYaPAUA0TiKtO_k3PjRA.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk"><strong class="bd na">auto import</strong> dynamic components</figcaption></figure><p id="9f52" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就这样，我们做到了！<strong class="ke io"> Nuxt.js自动导入动态组件</strong>🚀</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><p id="f5ab" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">可以在<a class="ae mj" href="https://github.com/blokwise/dynamic" rel="noopener ugc nofollow" target="_blank"> github </a>上找到一个简洁精炼的版本，并作为<a class="ae mj" href="https://www.npmjs.com/package/@blokwise/dynamic" rel="noopener ugc nofollow" target="_blank"> npm包</a>安装。</p><p id="b31e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">@blokwise/dynamic</code>的<strong class="ke io">正式文件</strong>可以在<a class="ae mj" href="https://dynamic.blokwise.io" rel="noopener ugc nofollow" target="_blank"> dynamic.blokwise.io </a>找到。</p><div class="oa ob gp gr oc od"><a href="https://dynamic.blokwise.io" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd io gy z fp oi fr fs oj fu fw im bi translated">介绍</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">让nuxt.js自动轻松地为您的动态组件添加水分。</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">dynamic.blokwise.io</p></div></div><div class="om l"><div class="on l oo op oq om or mu od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://github.com/blokwise/dynamic" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd io gy z fp oi fr fs oj fu fw im bi translated">博客/动态</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">阅读官方文档将@blokwise/dynamic dependency添加到您的项目:yarn Add @ blok wise/dynamic NPM install…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">github.com</p></div></div><div class="om l"><div class="os l oo op oq om or mu od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://www.npmjs.com/package/@blokwise/dynamic" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd io gy z fp oi fr fs oj fu fw im bi translated">@blokwise/dynamic</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">阅读官方文档将@blokwise/dynamic依赖项添加到您的项目中:然后，将@blokwise/dynamic添加到模块中…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.npmjs.com</p></div></div><div class="om l"><div class="ot l oo op oq om or mu od"/></div></div></a></div></div></div>    
</body>
</html>
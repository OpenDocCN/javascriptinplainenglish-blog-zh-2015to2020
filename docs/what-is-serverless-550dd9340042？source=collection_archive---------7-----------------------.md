# 什么是无服务器？

> 原文：<https://javascript.plainenglish.io/what-is-serverless-550dd9340042?source=collection_archive---------7----------------------->

## 无服务器架构的常识性解释

![](img/fa48b7f0d586f4495928f8bfa5f34e00.png)

无论何时构建应用程序，它都必须对用户可用。以脸书为例，它是由马克·扎克伯格在他的哈佛宿舍里创造的——如果他不把它提供给其他人使用，我们就不会知道脸书。

在传统方法中，应用程序开发人员向托管公司支付一定数量的钱来租用服务器。然后，他将自己的应用程序部署到这个服务器上，每年或每月，无论是否有人使用他的应用程序，他都必须向托管公司支付续费。

![](img/2d7a2dc70365d1a574987c85e5b2a5f4.png)

Mark giving a lecture at Harvard

作为哈佛大学的客座讲师，马克·扎克伯格在他的讲座中就脸书开始成长时遇到的一些问题发表了一些见解。当时，脸书只被美国的学校使用。

用他的话说:

*“但在我们走访了大约 30 或 50 所学校后，……(我们意识到)有些东西的设置方式并不是尽可能的最佳。*

*举个例子，当你在同一个服务器上运行 MySQL 和 Apache 时，如果那个服务器出了什么问题，那么不仅那个学校的数据库或者那个服务器上的学校停止了某种程度上的响应，这种响应对你来说没有任何用处，而且你甚至不能加载任何网页。所以你没有找到页面。这有点糟糕。”*

马克和他的朋友们必须找到一种方法来扩展脸书，以处理当时收到的巨大请求。他们不得不这样做，否则脸书将面临死亡的危险:如果人们在任何时候访问网站时出现宕机(由于流量过大)，他们将会失去兴趣。通过维护和监控服务器本身，他们花费了本可以用来在脸书上构建更多功能的时间，以确保它为巨大的流量做好准备。

对任何应用程序开发人员来说，扩展应用程序都是一个主要问题。在租用服务器的情况下，这意味着租用更多的服务器，在新服务器上部署应用程序，并确保所有服务器之间的数据一致性。

# 欢迎使用无服务器

与它的名字相反，无服务器并不意味着没有服务器(为了让你的应用程序在线可用，你仍然需要服务器)。这意味着您不必担心服务器管理、维护、监控、容量规划和扩展。您将这些流程交给“无服务器提供商”，他们会为您处理。

换句话说，无服务器计算让你不用考虑服务器就能构建应用程序。

# 您只需为您使用的东西付费

我知道你已经看到了这样做的好处，除了让开发者专注于他们最擅长的事情:构建应用程序，还有一个好消息。无服务器架构是一种按使用付费的服务，这意味着如果你的应用程序在一个无服务器平台上并且没有被使用，也许你还没有获得任何用户，你不需要支付任何费用。使用率低的日子支付的费用较低，使用率高的日子支付的费用较高，使用率为 0 的日子什么也不用付！

# 无服务器是如何工作的？

您可能想知道，即使在没有使用的情况下，无服务器提供商是否不会因为托管应用程序而赔钱。在传统方法中，即使没有人使用服务器，应用程序仍然需要一直在服务器上“活动”,这就是为什么托管公司不管不顾地收费。

当你的应用程序零使用率时，无服务器提供商不会向你收取任何费用，因为他们不会让你的应用程序一直保持“活跃”。怎么会？

# 无服务器是事件驱动的:你适合被束缚吗？

![](img/c08e1f8f0c79392b8da6cf79d0d28eb2.png)

我喜欢故事和类比，我相信《汤姆和杰瑞》系列漫画中的一集《适合被绑》可以帮助我们理解无服务器应用程序是如何工作的。

在这一集里，杰瑞从斯派克的爪子上取下一枚大头钉。为了表示感谢，斯派克给了杰瑞一个铃铛，让他在有麻烦的时候响一下。每次汤姆找杰里的麻烦，杰里就会按铃，斯派克就会从睡梦中醒来，把杰里从汤姆手中救出来。其余时间斯派克都在休息，只有当杰瑞按门铃时，他才会起来帮忙。

在无服务器术语中，我们可以说铃响是一个“事件”,而铃响意味着发出一个事件。Spike 是一个事件监听器。他只有在事件发生时才是“主动的”(例如，救 Jerry)。

# 你的应用？只是一个无服务器功能

无服务器提供者将你的整个应用程序视为包含在某种“容器”中的功能。这个容器包含你的应用程序运行所需的一切，当这个容器被激活时，你的应用程序运行，否则不运行。简单。

这意味着要自动扩展应用程序，只需根据需要多次复制容器。

这些容器是事件驱动的:它们只有在某些事件被触发时才是活动的，其余时间(像 Tom 的老朋友 Spike)都是不活动的。

发生的情况可以用伪代码表示为:

```
if(event.isTriggered) { 
   activateContainer() 
} else 
{ 
   deactivateContainer() 
}
```

可以触发无服务器功能执行的一些触发器包括 HTTP 请求、数据库更新、文件上传到文件存储器以及其他无服务器功能。函数容器既是事件发射器又是事件监听器，所以它也可以是触发器。

![](img/0b0bb5700448553df20ac4d65556f7d3.png)

*正如这些花瓶拥有植物生长所需的一切，无服务器容器拥有你的应用程序运行所需的一切。*

# 无服务器基础设施提供商

无服务器需要庞大而昂贵的基础设施来提供其优势，这就是为什么大多数供应商都是“大家伙”。最受欢迎的基础设施是亚马逊的 AWS Lambda 功能，谷歌的云功能，微软的 Azure 功能。AWS 目前占据市场主导地位。

# 有时，你不应该去无服务器

无服务器有很多优点，也有一些我们应该讨论的缺点。

讨论最多的无服务器缺点之一是“供应商锁定”。使用无服务器，您无法控制您的服务器。这意味着您无法控制服务器硬件、运行时和运行时更新、并发性和资源限制。所有这些都由您的供应商决定，当您与一家供应商合作时，可能很难转向另一家供应商。你可能被锁在里面了。

另一个缺点是延迟。以《猫和老鼠》为例，当杰瑞遇到汤姆的麻烦时，他按铃，但斯派克过了很长时间才站起来帮助他，会发生什么事情？汤姆没那么好。有时，当被触发时，您无服务器应用程序可能需要一段时间才能启动。你将不得不处理冷启动。

但是你应该知道这些缺点中的大部分都有解决方法，你可以在考虑无服务器之前研究一下。

# 结论

我们已经了解了什么是无服务器架构，它是如何工作的，以及为什么使用或不使用它。

可以查看以下文章继续了解它:

*   [何时以及为何不使用无服务器](https://www.serverless.com/blog/when-why-not-use-serverless)
*   [无服务器计算— AWS](https://aws.amazon.com/serverless/)

***注*** *:我用了脸书的例子来说明一个观点。脸书维护自己的服务器，不使用任何无服务器提供商。最初发布于*[*https://sola the code . hash node . dev*](https://solathecoder.hashnode.dev/what-is-serverless-ckedtecdx02jhsgs1a4lvfb6v)*。*

## **用简单英语写的 JavaScript**

你知道我们有三份出版物和一个 YouTube 频道吗？在[**plain English . io**](https://plainenglish.io/)找到所有内容的链接！
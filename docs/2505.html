<html>
<head>
<title>4 Ways to Compare Objects in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中比较对象的4种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/4-ways-to-compare-objects-in-javascript-97fe9b2a949c?source=collection_archive---------1-----------------------#2020-06-30">https://javascript.plainenglish.io/4-ways-to-compare-objects-in-javascript-97fe9b2a949c?source=collection_archive---------1-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4705" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">天真。简单的。高效的。而这份辛苦却对自己有益</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/acf0786405a6655ef81141269bb40621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_zaeVcPGperD1Sk0HCzEw.png"/></div></div></figure><p id="ba2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可能认为在JavaScript中比较两个对象很容易。对原始类型来说很容易，对对象来说就不容易了。</p><p id="a38c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请继续阅读，看看它有多难，以及如何利用它来提高您的编码技能。</p><h1 id="b0c3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">1.参考身份</h1><p id="64f2" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">假设你只想比较对象引用而不管其内容，那么你可以使用严格的等式(' === ')或者宽松的(' == ')。</p><p id="f5c9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="c763" class="mp lo iq ml b gy mq mr l ms mt">let book1 = {<br/>  title: ‘JavaScript’<br/>};</span><span id="7585" class="mp lo iq ml b gy mu mr l ms mt">let book2 = {<br/>  title: ‘JavaScript’<br/>};</span><span id="e12f" class="mp lo iq ml b gy mu mr l ms mt">let book3 = {<br/>  title: ‘Kotlin’<br/>};</span><span id="3ff2" class="mp lo iq ml b gy mu mr l ms mt">let book4 = book1;<br/>let book5 = book1;</span><span id="309d" class="mp lo iq ml b gy mu mr l ms mt">console.log(book1 === book2); // false<br/>console.log(book3 === book2); // false<br/>console.log(book4 === book5); // true</span></pre><p id="8462" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你所看到的，结果<strong class="kt ir"> book1 === book2 </strong>是假的，尽管它们的内容是相同的，因为它们有不同的引用。</p><p id="05f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">同样适用于<strong class="kt ir">第三册===第二册</strong>。</p><p id="becf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而且由于<strong class="kt ir"> book4 </strong>和<strong class="kt ir"> book5 </strong>都指向同一个对象实例<strong class="kt ir"> book1 </strong>，所以<strong class="kt ir"> book 4 === book5 </strong>为真。</p><p id="798c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们很少比较真实项目中的对象引用。大多数时候，我们希望比较对象内部的实际值。</p><h1 id="f5f6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">2.使用JSON.stringify</h1><p id="317f" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">首先，我们将JavaScript对象转换成JSON字符串，然后比较这些字符串。</p><p id="47f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="9085" class="mp lo iq ml b gy mq mr l ms mt">let person1 = {<br/>  name: ‘Amy’,<br/>  age: 28<br/>};</span><span id="582c" class="mp lo iq ml b gy mu mr l ms mt">let person2 = {<br/>  name: ‘Amy’,<br/>  age: 28<br/>};</span><span id="7b3d" class="mp lo iq ml b gy mu mr l ms mt">let person3 = {<br/>  name: ‘David’,<br/>  age: 28<br/>};</span><span id="256e" class="mp lo iq ml b gy mu mr l ms mt">console.log(JSON.stringify(person1) === JSON.stringify(person2)); // true<br/>console.log(JSON.stringify(person3) === JSON.stringify(person1)); // false<br/>console.log(JSON.stringify(person3) === JSON.stringify(person2)); // false</span></pre><p id="0a75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上例中，<strong class="kt ir"> person1 </strong>和<strong class="kt ir"> person2 </strong>具有相同的属性和值，因此<strong class="kt ir">JSON . stringify(person 1)= = = JSON . stringify(person 2)</strong>为真。</p><p id="b9b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于<strong class="kt ir">人员3 </strong>，属性<strong class="kt ir">名称</strong>与<strong class="kt ir">人员1 </strong>和<strong class="kt ir">人员2 </strong>的值不同。结果，<strong class="kt ir">JSON . stringify(person 3)= = = JSON . stringify(person 1)</strong>为假，<strong class="kt ir">JSON . stringify(person 3)= = = JSON . stringify(person 2)</strong>为假。</p><p id="2ce4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，使用<strong class="kt ir"> JSON.stringify() </strong>来比较对象有一个限制。如果每个对象的属性顺序不同，它就不起作用。</p><p id="8f88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="ff3a" class="mp lo iq ml b gy mq mr l ms mt">let person1 = {<br/>  age: 28,<br/>  name: ‘Amy’<br/>};</span><span id="80e8" class="mp lo iq ml b gy mu mr l ms mt">let person2 = {<br/>  name: ‘Amy’,<br/>  age: 28<br/>};</span><span id="9317" class="mp lo iq ml b gy mu mr l ms mt">console.log(JSON.stringify(person1) === JSON.stringify(person2)); // false</span></pre><p id="d257" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">人员1 </strong>和<strong class="kt ir">人员2 </strong>具有相同的属性值。唯一不同的是在<strong class="kt ir">人员1 </strong>中，属性<strong class="kt ir">年龄</strong>出现在<strong class="kt ir">姓名</strong>之前，同时在<strong class="kt ir">人员2 </strong>中，<strong class="kt ir">姓名</strong>出现在<strong class="kt ir">年龄</strong>之前。在这种情况下，比较的结果是假的。</p><h1 id="2e9e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">3.使用Lodash</h1><p id="fbc1" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">要使比较变得轻而易举，只需利用Lodash。</p><p id="cb7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就拿上面那个<strong class="kt ir"> JSON.stringify </strong>没用的例子来说，交给Lodash:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="dac8" class="mp lo iq ml b gy mq mr l ms mt">let person1 = {<br/>  age: 28,<br/>  name: ‘Amy’<br/>};</span><span id="3161" class="mp lo iq ml b gy mu mr l ms mt">let person2 = {<br/>  name: ‘Amy’,<br/>  age: 28<br/>};</span><span id="abe8" class="mp lo iq ml b gy mu mr l ms mt">console.log(_.isEqual(person1, person2)); // true</span></pre><p id="e58d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在下面的文章中了解更多关于Lodash的信息:</p><div class="mv mw gp gr mx my"><a href="https://medium.com/javascript-in-plain-english/11-super-handy-lodash-methods-to-simplify-things-in-javascript-8c45cd346616" rel="noopener follow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">简化JavaScript的11个超级方便的Lodash方法</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">有时他们会拯救你的一天</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">medium.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm kp my"/></div></div></a></div><h1 id="aa27" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">4.奖励:DIY</h1><p id="3032" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">你不想使用任何外部库吗？</p><p id="3086" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你相信你自己能做到吗？</p><p id="911d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者您只是想磨练您的JavaScript编码技能？</p><p id="c244" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么这部分是给你的。事实上，做困难的事情很有趣，不是吗？</p><p id="e180" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您将编写一个函数来比较两个对象。</p><p id="aacd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，您认为比较两个对象的明显方法是迭代属性列表，然后比较它们的值。好吧，我们开始吧:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="23c2" class="mp lo iq ml b gy mq mr l ms mt">function isEqual(obj1, obj2) {<br/>  let props1 = Object.getOwnPropertyNames(obj1);<br/>  let props2 = Object.getOwnPropertyNames(obj2);<br/>  <br/>  if (props1.length != props2.length) {<br/>    return false;<br/>  }</span><span id="0518" class="mp lo iq ml b gy mu mr l ms mt">  for (let i = 0; i &lt; props1.length; i++) {<br/>    let prop = props1[i];<br/>    <br/>    if (obj1[prop] !== obj2[prop]) {<br/>      return false;<br/>    }<br/>  }<br/> <br/>  return true;<br/>}</span><span id="5931" class="mp lo iq ml b gy mu mr l ms mt">let person1 = {<br/>  age: 28,<br/>  name: ‘Amy’<br/>};</span><span id="e241" class="mp lo iq ml b gy mu mr l ms mt">let person2 = {<br/>  name: ‘Amy’,<br/>  age: 28<br/>};</span><span id="5a07" class="mp lo iq ml b gy mu mr l ms mt">console.log(isEqual(person1, person2)); // true</span></pre><p id="7d4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一次尝试还不错吧。</p><p id="b0c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，您的函数只适用于平面对象，不适用于嵌套对象。</p><p id="667c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="4c08" class="mp lo iq ml b gy mq mr l ms mt">let person1 = {<br/>  age: 28,<br/>  name: ‘Amy’,<br/>  department: {<br/>    id: 1,<br/>    name: ‘DevOps’<br/>  }<br/>};</span><span id="16cf" class="mp lo iq ml b gy mu mr l ms mt">let person2 = {<br/>  name: ‘Amy’,<br/>  age: 28,<br/>  department: {<br/>    id: 1,<br/>    name: ‘DevOps’<br/>  }<br/>};</span><span id="9717" class="mp lo iq ml b gy mu mr l ms mt">console.log(isEqual(person1, person2)); // false</span></pre><p id="1b25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们把你的功能提升到一个更深的层次:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="962d" class="mp lo iq ml b gy mq mr l ms mt">function isEqual(obj1, obj2) {<br/>  let props1 = Object.getOwnPropertyNames(obj1);<br/>  let props2 = Object.getOwnPropertyNames(obj2);</span><span id="7b21" class="mp lo iq ml b gy mu mr l ms mt">  if (props1.length != props2.length) {<br/>    return false;<br/>  }</span><span id="c4c8" class="mp lo iq ml b gy mu mr l ms mt">  for (let i = 0; i &lt; props1.length; i++) {<br/>    let prop = props1[i];<br/>    let bothAreObjects = typeof(obj1[prop]) === ‘object’ &amp;&amp; typeof(obj2[prop]) === ‘object’;</span><span id="b096" class="mp lo iq ml b gy mu mr l ms mt">    if ((!bothAreObjects &amp;&amp; (obj1[prop] !== obj2[prop]))<br/>    || (bothAreObjects &amp;&amp; !isEqual(obj1[prop], obj2[prop]))) {<br/>      return false;<br/>    }<br/>  }</span><span id="2414" class="mp lo iq ml b gy mu mr l ms mt">  return true;<br/>}</span><span id="63ed" class="mp lo iq ml b gy mu mr l ms mt">console.log(isEqual(person1, person2)); // true</span></pre><p id="dd47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它又开始工作了。</p><p id="82b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与第一个版本相比，你能看出不同之处吗？</p><p id="4824" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果属性是对象，就利用递归继续下去，直到属性是基本类型。</p><p id="6897" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你看，你做到了。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="2871" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望你喜欢这篇文章，并找到DIY的乐趣。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt my"><a href="https://medium.com/javascript-in-plain-english/how-to-check-if-an-object-has-a-specific-property-in-javascript-6086177014d1" rel="noopener follow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">如何在JavaScript中检查一个对象是否有特定的属性？</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">使用错误的方法会给你误导的结果。</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">medium.com</p></div></div><div class="nh l"><div class="nu l nj nk nl nh nm kp my"/></div></div></a></div></div></div>    
</body>
</html>
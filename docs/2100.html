<html>
<head>
<title>Will Deno kill Node.JS in coming days?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将德诺杀死节点。未来几天的JS？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/will-deno-kill-node-js-in-the-coming-days-df6f6ebf494?source=collection_archive---------6-----------------------#2020-05-19">https://javascript.plainenglish.io/will-deno-kill-node-js-in-the-coming-days-df6f6ebf494?source=collection_archive---------6-----------------------#2020-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2022" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Deno为开发者带来的关键东西</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/06a0c4a01022ae3382f5566c22b7c54e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5UotNnf2UxDsslkd_70_Qw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@photohunter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Jimmy Chang</a> on <a class="ae kv" href="https://unsplash.com/s/photos/dagger?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="de7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Node.js，十多年来开发人员非常熟悉的东西。在未来的日子里，会不会有一个叫Deno的东西取代这个超级流行的运行时？</p><p id="0ae2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注:Node.js和Deno都是同一个父亲瑞安·达尔的孩子。</strong></p><p id="fa13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他在这里与Nodejs <a class="ae kv" href="https://www.youtube.com/watch?v=M3BM9TB-8yA&amp;vl=en" rel="noopener ugc nofollow" target="_blank">谈论他的错误</a>并且在这里更深入地研究了deno <a class="ae kv" href="https://www.youtube.com/watch?v=z6JRlx5NC9E" rel="noopener ugc nofollow" target="_blank"/></p><p id="14ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于开发者来说，Deno是一个非常新的东西。作为介绍</p><blockquote class="ls"><p id="64d8" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">Deno是一个简单、现代和安全的JavaScript和TypeScript运行时，它使用V8并内置于Rust中。</p></blockquote><figure class="md me mf mg mh kk gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/4afa21d0271f2d79ba3be77ef8790abb.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*W7F4S-pGRREAvy7U6TRE9Q.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Deno logo looks like this.</figcaption></figure><p id="386d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从头开始构建</p><ul class=""><li id="377e" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><strong class="ky ir"> V8 as node.js </strong></li><li id="8274" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ir"> Rust </strong>而不是C++中的node</li><li id="7ace" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ir"> Tokio(事件循环)</strong>代替libuv</li><li id="5763" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ir">打字稿</strong>代替vanila JS</li></ul><p id="7f75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在这里注意到了这个新运行时的<strong class="ky ir">安装</strong>和一些最有趣的<strong class="ky ir">方面</strong>。</p><h1 id="2c1c" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">装置</h1><p id="439f" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated"><strong class="ky ir">使用自制软件(macOS): </strong></p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="403a" class="ny mx iq nu b gy nz oa l ob oc">brew install deno</span></pre></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="8410" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">使用Cargo (Windows、macOS、Linux): </strong></p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="9aa2" class="ny mx iq nu b gy nz oa l ob oc">cargo install deno</span></pre></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="75bf" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">玻恩打字稿</h1><p id="ab0e" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">Deno默认支持typescript。不需要复杂的设置或配置。</p><blockquote class="ls"><p id="253f" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">安息吧tsconfig.json</p></blockquote><p id="cd98" class="pw-post-body-paragraph kw kx iq ky b kz op jr lb lc oq ju le lf or lh li lj os ll lm ln ot lp lq lr ij bi translated">内置对类型脚本的支持，即你可以直接运行类型脚本文件而无需编译成javascript。</p><p id="e562" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Deno使得使用TypeScript变得容易，不需要任何配置文件。尽管如此，用普通的JavaScript编写程序并毫无困难地用Deno执行它们是可能的。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="e3e3" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">默认安全</h1><blockquote class="ou ov ow"><p id="7e57" class="kw kx ox ky b kz la jr lb lc ld ju le oy lg lh li oz lk ll lm pa lo lp lq lr ij bi translated">默认安全。除非明确启用，否则没有文件、网络或环境访问权限。</p></blockquote><p id="2c64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">德诺是天生安全的。您必须明确指定安全性，如网络、环境或任何类似的东西。</p><p id="58f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与节点不同，deno在主机的沙盒中运行，即</p><ul class=""><li id="0705" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">没有文件系统访问权限</li><li id="e752" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">没有网络接入</li><li id="c5fc" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">无法访问其他脚本</li><li id="2c12" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">没有环境变量访问</li></ul><p id="7daa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，从运行时到网络、文件系统等都无法访问。当您的代码试图访问这些资源时，系统会提示您允许该操作。</p><p id="a261" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们试一个例子</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pb pc l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">FirstDeno.ts</figcaption></figure><p id="2370" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在运行文件的方式:</p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="f40b" class="ny mx iq nu b gy nz oa l ob oc">deno run FirstDeno.ts</span></pre><p id="1a0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，安全屏障开始发挥作用</p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="ee83" class="ny mx iq nu b gy nz oa l ob oc"><strong class="nu ir">error</strong>: Uncaught PermissionDenied: network access to "0.0.0.0:8000", run again with the --allow-net flag<br/>at <strong class="nu ir"><em class="ox">unwrapResponse</em></strong> ($deno$/ops/dispatch_json.ts:43:11)<br/>at <strong class="nu ir"><em class="ox">Object.sendSync</em></strong> ($deno$/ops/dispatch_json.ts:72:10)<br/>at <strong class="nu ir"><em class="ox">Object.listen</em></strong> ($deno$/ops/net.ts:51:10)<br/>at <strong class="nu ir"><em class="ox">listen</em></strong> ($deno$/net.ts:152:22)<br/>at <strong class="nu ir"><em class="ox">serve</em></strong> (https://deno.land/std@0.50.0/http/server.ts:261:20)<br/>at file:///Users/tunvirrahman/Downloads/FirstDeno.ts:2:11</span></pre><p id="da74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为Deno在默认情况下是安全的，您必须显式地允许网络</p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="81c5" class="ny mx iq nu b gy nz oa l ob oc">deno run — allow-net FirstDeno.ts</span></pre><p id="7ea8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是可提供的安全选项</p><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="b949" class="ny mx iq nu b gy nz oa l ob oc">--allow-all # Allow all permissions</span><span id="b8b3" class="ny mx iq nu b gy pd oa l ob oc">--allow-env # Allow environment access</span><span id="5e7b" class="ny mx iq nu b gy pd oa l ob oc">--allow-hrtime # Allow high resolution time measurement</span><span id="90d7" class="ny mx iq nu b gy pd oa l ob oc">--allow-net=&lt;allow-net&gt; # Allow network access</span><span id="fb29" class="ny mx iq nu b gy pd oa l ob oc">--allow-plugin # Allow loading plugins</span><span id="0c19" class="ny mx iq nu b gy pd oa l ob oc">--allow-read=&lt;allow-read&gt; # Allow file system read access</span><span id="a87a" class="ny mx iq nu b gy pd oa l ob oc">--allow-run # Allow running subprocesses</span><span id="8b31" class="ny mx iq nu b gy pd oa l ob oc">--allow-write=&lt;allow-write&gt; # Allow file system write access</span></pre></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="cbb0" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">RIP包管理器</h1><p id="07ba" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">Deno不需要任何包管理器或者<strong class="ky ir"> package.json </strong>。相反，它使用了如下现代ES语法</p><blockquote class="ou ov ow"><p id="cdf7" class="kw kx ox ky b kz la jr lb lc ld ju le oy lg lh li oz lk ll lm pa lo lp lq lr ij bi translated">没有<strong class="ky ir">更没有</strong> <code class="fe pe pf pg nu b"><strong class="ky ir">package.json</strong></code> <strong class="ky ir">和</strong> <code class="fe pe pf pg nu b"><strong class="ky ir">node_modules</strong></code></p></blockquote><pre class="kg kh ki kj gt nt nu nv nw aw nx bi"><span id="2b69" class="ny mx iq nu b gy nz oa l ob oc">import { serve } from “https://deno.land/std@0.50.0/http/server.ts";</span></pre><p id="eca0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们启动应用程序时，Deno下载所有导入的模块并缓存它们。一旦它们被缓存，Deno将不会再次下载它们，直到我们用<code class="fe pe pf pg nu b">--reload</code>标志明确要求它。</p><p id="4621" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Deno不支持npm包。这令人担忧，对吗？</p><p id="c2c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，它有一个类似于Go的模块管理系统，通过URL导入模块</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="1db6" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">承诺以承诺为基础</h1><p id="d6cb" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">它支持顶级等待。一切异步都是基于Deno的承诺。</p><blockquote class="ls"><p id="bd58" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">拜拜回电地狱</p></blockquote><pre class="md me mf mg mh nt nu nv nw aw nx bi"><span id="ab69" class="ny mx iq nu b gy nz oa l ob oc">const res = await fetch("https://someUrl")</span></pre><p id="958f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这并不要求包含方法是异步的。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="97fb" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">Deno标准模块</h1><p id="2ad8" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">这些模块没有外部依赖性，它们由Deno核心团队审查。目的是有一套标准的高质量代码，所有Deno项目都可以大胆地使用。</p><p id="55be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要浏览模块的文档:</p><ul class=""><li id="e0d2" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">去<a class="ae kv" href="https://deno.land/std/" rel="noopener ugc nofollow" target="_blank">https://deno.land/std/</a>。</li><li id="1fdc" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">导航到任何感兴趣的模块。</li><li id="fac4" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">点击“查看文档”。</li></ul></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="b583" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">浏览器兼容性</h1><p id="5439" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">Deno的目标是兼容浏览器。从技术上讲，当使用ES模块时，我们不必使用任何像webpack这样的构建工具来使我们的应用程序准备好在浏览器中使用。</p><p id="5951" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，像Babel这样的工具会将代码转换到JavaScript的ES5版本，因此，代码甚至可以在不支持该语言所有最新特性的旧浏览器中运行。但这也是以在最终文件中包含大量不必要的代码和输出文件膨胀为代价的。</p><p id="a208" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由我们来决定我们的主要目标是什么，并做出相应的选择。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h1 id="a81e" class="mw mx iq bd my mz ok nb nc nd ol nf ng jw om jx ni jz on ka nk kc oo kd nm nn bi translated">结论</h1><blockquote class="ls"><p id="b6e3" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">Node.js的伙计们。不要惊慌。Node哪儿也不去！</p></blockquote><p id="c2b2" class="pw-post-body-paragraph kw kx iq ky b kz op jr lb lc oq ju le lf or lh li lj os ll lm ln ot lp lq lr ij bi translated">如果您正在从头开始编写软件，Deno可能值得研究。目前它是为爱好者准备的。</p><h1 id="cca9" class="mw mx iq bd my mz na nb nc nd ne nf ng jw nh jx ni jz nj ka nk kc nl kd nm nn bi translated">感谢阅读。干杯🥂</h1></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><h2 id="d118" class="ny mx iq bd my ph pi dn nc pj pk dp ng lf pl pm ni lj pn po nk ln pp pq nm pr bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="b0d5" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a> <strong class="ky ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Mistakes I made while using React for the first few years</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æˆ‘åœ¨æœ€åˆå‡ å¹´ä½¿ç”¨Reactæ—¶çŠ¯çš„é”™è¯¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/mistakes-i-made-while-using-react-for-the-first-few-years-1b834ea4e5ad?source=collection_archive---------2-----------------------#2020-03-12">https://javascript.plainenglish.io/mistakes-i-made-while-using-react-for-the-first-few-years-1b834ea4e5ad?source=collection_archive---------2-----------------------#2020-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3697" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">è¿™æ˜¯æˆ‘ä¸ªäººçš„é”™è¯¯æŠ¥å‘Š</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/fe08af790df4346981bd83ced75dbadc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a4PrsfmaMcNSbZF4"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@charlesdeluvio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charles Deluvio</a> on <a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8c8b" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><code class="fe mb mc md me b">1. "history of undefinedâ€</code>é”™è¯¯</h1><ul class=""><li id="b1d4" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">å½“æˆ‘åœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨<code class="fe mb mc md me b">react-router-dom</code>ä½œä¸ºReactè·¯ç”±å™¨æ—¶ï¼Œæˆ‘ç»å¸¸é‡åˆ°<code class="fe mb mc md me b">history of undefined</code>é”™è¯¯ğŸ‘Š</li><li id="4111" class="mf mg iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">æ­¤<strong class="jp ir">é”™è¯¯çš„è§£å†³æ–¹æ¡ˆğŸ‘Š</strong>æ˜¯ä½¿ç”¨<code class="fe mb mc md me b">withRouter</code>ä½œä¸ºç»„ä»¶çš„åŒ…è£…å™¨(HOCæ–¹æ³•)</li></ul><h2 id="79f0" class="mv le iq bd lf mw mx dn lj my mz dp ln jy na nb lr kc nc nd lv kg ne nf lz ng bi translated"><strong class="ak">è§£å†³æ–¹æ¡ˆ</strong></h2><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="7eb2" class="mv le iq me b gy nl nm l nn no">import { withRouter } from 'react-router-dom';<br/>import { connect } from 'react-redux';</span><span id="cdf9" class="mv le iq me b gy np nm l nn no">class App extends Component {<br/>  ...<br/>  render() {<br/>  }</span><span id="4e5e" class="mv le iq me b gy np nm l nn no">  export default connect(<br/>    (state) =&gt; ({ ... }),<br/>    (dispatch) =&gt; ({ ... })</span><span id="37b9" class="mv le iq me b gy np nm l nn no">  )withRouter(App));<br/>}</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="4202" class="ld le iq bd lf lg nx li lj lk ny lm ln lo nz lq lr ls oa lu lv lw ob ly lz ma bi translated"><code class="fe mb mc md me b">2. "Expected an assignment or function call and instead saw an expressionâ€</code>é”™è¯¯</h1><ul class=""><li id="f51f" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">æ­¤<strong class="jp ir">é”™è¯¯</strong>é”™è¯¯<strong class="jp ir">ğŸ‘Šå½“æ‚¨ç”¨èŠ±æ‹¬å·({})å°†arrowå‡½æ•°çš„ä¸»ä½“æ‹¬èµ·æ¥ï¼Œä½†ä¸è¿”å›ä»»ä½•å€¼æ—¶ï¼Œä¼šå‘ç”Ÿ</strong></li></ul><p id="d1eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ä¾‹å¦‚</strong></p><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="e6db" class="mv le iq me b gy nl nm l nn no">const def = (props) =&gt; { &lt;div&gt;&lt;/div&gt; };</span></pre><ul class=""><li id="7e8f" class="mf mg iq jp b jq jr ju jv jy oc kc od kg oe kk mm mn mo mp bi translated">è¿™ä¸ä¼šè¿”å›ä»»ä½•å€¼</li></ul><h2 id="df25" class="mv le iq bd lf mw mx dn lj my mz dp ln jy na nb lr kc nc nd lv kg ne nf lz ng bi translated">è§£å†³åŠæ³•</h2><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="0770" class="mv le iq me b gy nl nm l nn no"><strong class="me ir">// solution</strong></span><span id="002a" class="mv le iq me b gy np nm l nn no">// Instead of const def = (props) =&gt; { &lt;div&gt;&lt;/div&gt; };</span><span id="cbc4" class="mv le iq me b gy np nm l nn no"><strong class="me ir">// Change to</strong></span><span id="d599" class="mv le iq me b gy np nm l nn no">const def = (props) =&gt; { return (&lt;div&gt;&lt;/div&gt;); };</span><span id="e6b0" class="mv le iq me b gy np nm l nn no"><strong class="me ir">// OR</strong></span><span id="8ac5" class="mv le iq me b gy np nm l nn no">const def = (props) =&gt; &lt;div&gt;&lt;/div&gt;;</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="ed2d" class="ld le iq bd lf lg nx li lj lk ny lm ln lo nz lq lr ls oa lu lv lw ob ly lz ma bi translated"><code class="fe mb mc md me b">3. "Error: Invariant failed: You should not use &lt;Switch&gt; outside a &lt;Router&gt;â€</code>é”™è¯¯</h1><ul class=""><li id="3c5a" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">æˆ‘æ‰“èµŒä½ æ›¾ç»é¢å¯¹è¿‡è¿™ä¸ª<strong class="jp ir">é”™è¯¯ğŸ‘Š</strong>åœ¨ä½¿ç”¨Reactæ—¶è‡³å°‘è¦ä½¿ç”¨ä¸€æ¬¡(å°¤å…¶æ˜¯ï¼Œ<code class="fe mb mc md me b">react-router-dom</code>)</li><li id="80f9" class="mf mg iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated"><code class="fe mb mc md me b">Switch</code>ç±»ä¼¼äºJavaScriptä¸­çš„<code class="fe mb mc md me b">switch</code>è¯­å¥ï¼Œç”¨äºæ ¹æ®ä¸åŒçš„æ¡ä»¶æ‰§è¡Œä¸åŒçš„åŠ¨ä½œ</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="0415" class="mv le iq me b gy nl nm l nn no">switch (5) {<br/>  case 0 :<br/>    // do something<br/>  case 1 :<br/>    // do something<br/>  ...</span><span id="b9f7" class="mv le iq me b gy np nm l nn no">}</span></pre><h2 id="74b0" class="mv le iq bd lf mw mx dn lj my mz dp ln jy na nb lr kc nc nd lv kg ne nf lz ng bi translated"><strong class="ak">è§£å†³æ–¹æ¡ˆ</strong></h2><ul class=""><li id="d827" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated"><code class="fe mb mc md me b">react-router-dom</code>ä¸­çš„<code class="fe mb mc md me b">Switch</code>éœ€è¦åœ¨æ¯ä¸ª<code class="fe mb mc md me b">Route</code>çš„é¡¶éƒ¨</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="d562" class="mv le iq me b gy nl nm l nn no">import { Switch, Route } from 'react-router-dom';</span><span id="a76e" class="mv le iq me b gy np nm l nn no">&lt;Switch&gt;<br/>  &lt;Route path = '/path1' component={ component1 } /&gt;<br/>  &lt;Route path = '/path2' component={ component2 } /&gt;<br/>  &lt;Route path = '/path3' component={ component3 } /&gt;<br/>  ...</span><span id="d8a5" class="mv le iq me b gy np nm l nn no">&lt;/Switch&gt;</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="0746" class="ld le iq bd lf lg nx li lj lk ny lm ln lo nz lq lr ls oa lu lv lw ob ly lz ma bi translated"><code class="fe mb mc md me b">4. "Parsing error: Lexical declaration cannot appear in a single-statement context"</code></h1><ul class=""><li id="6615" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">æ­¤<strong class="jp ir">é”™è¯¯</strong>é”™è¯¯<strong class="jp ir">ğŸ‘Š</strong>å‘ç”Ÿåœ¨ä½ ä½¿ç”¨<code class="fe mb mc md me b">let</code>çš„æ—¶å€™(åœ¨Chromeä¸­)</li><li id="0cd1" class="mf mg iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">ä¸¾ä¸ªä¾‹å­ï¼Œ</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="f6dd" class="mv le iq me b gy nl nm l nn no">function TestError() {<br/>    if (true) {<br/>        let k2 = new Object("ss");<br/>    }<br/>}</span><span id="b3bb" class="mv le iq me b gy np nm l nn no"><strong class="me ir">// is being minified as</strong></span><span id="c46f" class="mv le iq me b gy np nm l nn no">function TestError()<br/>{<br/>  if (1)<br/>    let k2 = new Object("ss")<br/>}</span></pre><ul class=""><li id="e99a" class="mf mg iq jp b jq jr ju jv jy oc kc od kg oe kk mm mn mo mp bi translated">è€ŒChromeä¸Šé¢çš„ä»£ç ä¼šå¾—åˆ°<strong class="jp ir">é”™è¯¯</strong> <strong class="jp ir">ğŸ‘Š</strong></li></ul><h2 id="bc70" class="mv le iq bd lf mw mx dn lj my mz dp ln jy na nb lr kc nc nd lv kg ne nf lz ng bi translated">è§£å†³åŠæ³•</h2><ul class=""><li id="03f9" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">ä¸è¦ä½¿ç”¨æ›´ä¸ç”¨è¯´</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="43d8" class="mv le iq me b gy nl nm l nn no">function TestError()<br/>{<br/>  if (1) {<br/>    let k2 = new Object("ss")</span><span id="7c1e" class="mv le iq me b gy np nm l nn no">   }</span><span id="8e51" class="mv le iq me b gy np nm l nn no">}</span><span id="6494" class="mv le iq me b gy np nm l nn no"><strong class="me ir">// OR</strong></span><span id="20f8" class="mv le iq me b gy np nm l nn no">function TestError()<br/>{<br/>  if (1)<br/>    Object("ss")<br/>}</span></pre></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="c0e2" class="ld le iq bd lf lg nx li lj lk ny lm ln lo nz lq lr ls oa lu lv lw ob ly lz ma bi translated"><code class="fe mb mc md me b">5. Higher-order component (HOC) ERROR</code></h1><ul class=""><li id="60c6" class="mf mg iq jp b jq mh ju mi jy mj kc mk kg ml kk mm mn mo mp bi translated">å½“ä½ è¯•å›¾å°†ä¸€ç»„<strong class="jp ir">é“å…·</strong>ä»çˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶æ—¶ï¼Œä½ ç»å¸¸ä½¿ç”¨<code class="fe mb mc md me b">map</code>æ¥è¿­ä»£åœ°å‘é€ä¸€ç»„é“å…·(å› ä¸ºReactä¸å…è®¸<strong class="jp ir">é“å…·</strong>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­)</li><li id="21d1" class="mf mg iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">è®¸å¤šReactå¼€å‘äººå‘˜åœ¨å°†ä¸€ç»„é“å…·ä¼ é€’ç»™å­ç»„ä»¶æ—¶ä¼šçŠ¯ä¸€ä¸ªå¸¸è§é”™è¯¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å‘ç°äº†ä¸¤ä¸ªä»£ç ä¹‹é—´çš„å·®å¼‚ï¼Œå°±æ²¡æœ‰é—®é¢˜äº†ğŸ‘Œ</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="3ab3" class="mv le iq me b gy nl nm l nn no">render() {<br/>  {</span><span id="d09e" class="mv le iq me b gy np nm l nn no">    organizationData.map(schoolData =&gt; {</span><span id="07f9" class="mv le iq me b gy np nm l nn no">      &lt;MSCList</span><span id="5139" class="mv le iq me b gy np nm l nn no">        schoolID = {schoolData.schoolID}</span><span id="42da" class="mv le iq me b gy np nm l nn no">        schoolName = {schoolData.schoolName}</span><span id="c0a6" class="mv le iq me b gy np nm l nn no">        alignment = {schoolData.alignment}</span><span id="11d9" class="mv le iq me b gy np nm l nn no">        classList = {schoolData.class}</span><span id="bcb3" class="mv le iq me b gy np nm l nn no">        /&gt;</span><span id="1c50" class="mv le iq me b gy np nm l nn no">      })</span><span id="3e63" class="mv le iq me b gy np nm l nn no">   }</span><span id="3ecc" class="mv le iq me b gy np nm l nn no">}</span><span id="c7bd" class="mv le iq me b gy np nm l nn no"><strong class="me ir">vs.</strong></span><span id="6c3f" class="mv le iq me b gy np nm l nn no">render() {</span><span id="e833" class="mv le iq me b gy np nm l nn no">  {</span><span id="4f11" class="mv le iq me b gy np nm l nn no">    organizationData.map(schoolData =&gt; (</span><span id="719a" class="mv le iq me b gy np nm l nn no">      &lt;MSCList</span><span id="7bb3" class="mv le iq me b gy np nm l nn no">        schoolID = {schoolData.schoolID}</span><span id="7e1d" class="mv le iq me b gy np nm l nn no">        schoolName = {schoolData.schoolName}</span><span id="886b" class="mv le iq me b gy np nm l nn no">        alignment = {schoolData.alignment}</span><span id="abd9" class="mv le iq me b gy np nm l nn no">        classList = {schoolData.class}</span><span id="9784" class="mv le iq me b gy np nm l nn no">        /&gt;</span><span id="d1b9" class="mv le iq me b gy np nm l nn no">      ))</span><span id="df4d" class="mv le iq me b gy np nm l nn no">    }</span><span id="782b" class="mv le iq me b gy np nm l nn no">}</span></pre><ul class=""><li id="d970" class="mf mg iq jp b jq jr ju jv jy oc kc od kg oe kk mm mn mo mp bi translated">ä½ æ³¨æ„åˆ°äº†å—ğŸ‘€åŒºåˆ«ï¼Ÿ</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="a632" class="mv le iq me b gy nl nm l nn no">.map(schoolData =&gt; { </span></pre><ul class=""><li id="7926" class="mf mg iq jp b jq jr ju jv jy oc kc od kg oe kk mm mn mo mp bi translated">å¤§æ‹¬å·è¢«æ›¿æ¢ä¸º</li></ul><pre class="kn ko kp kq gt nh me ni nj aw nk bi"><span id="69b5" class="mv le iq me b gy nl nm l nn no">.map(schoolData =&gt; (</span></pre><ul class=""><li id="15c1" class="mf mg iq jp b jq jr ju jv jy oc kc od kg oe kk mm mn mo mp bi translated">åœ†æ‹¬å·</li><li id="fa2a" class="mf mg iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">ä½¿ç”¨èŠ±æ‹¬å·({)ä¼šå¯¼è‡´<strong class="jp ir">é”™è¯¯</strong> <strong class="jp ir">ğŸ‘Š</strong></li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi of"><img src="../Images/de7fbdf61a9d3826b7ce5f8f8b606e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J1jP4JPHxczq7EPO"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@howier?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Howard Riminton</a> on <a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>
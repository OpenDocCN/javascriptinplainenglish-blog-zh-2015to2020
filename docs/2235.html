<html>
<head>
<title>Medium Like Progressive Image Loading In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像React中的渐进图像加载一样的介质</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/medium-like-progressive-image-loading-in-react-eefa49f5c550?source=collection_archive---------3-----------------------#2020-06-02">https://javascript.plainenglish.io/medium-like-progressive-image-loading-in-react-eefa49f5c550?source=collection_archive---------3-----------------------#2020-06-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/146520bbf0a89619187606db5bffcd85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*1R9fVrOlFy8m_jQFy8_-CA.gif"/></div></figure><p id="b66d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">有没有注意到Medium平滑加载图像的方式提供了很好的用户体验。然而，只要对环境有一些基本的了解，这个看似令人愉快的动画在任何React项目中实现起来都非常容易和简单。这是我们最终的<a class="ae kp" href="https://www.npmjs.com/package/react-progress-loading" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="kq">组件</em> </strong> </a>的样子，这是它的<a class="ae kp" href="https://codesandbox.io/s/react-progress-loading-rcxhl?file=/src/Image.js" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="kq">演示</em> </strong> </a>。因此，不再拖延，让我们从理解如何实现这一点开始，然后实现代码来实现这一点。</p><h1 id="45c4" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">理解这个想法</h1><p id="8b5b" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">这里的想法很简单，可以通过以下步骤来解释:</p><ol class=""><li id="d834" class="lu lv in jt b ju jv jy jz kc lw kg lx kk ly ko lz ma mb mc bi translated">为了实现这个动画，我们需要同一个图像的两个实例(一个具有全分辨率，另一个通过改变像素降低到原始分辨率的10%)。</li><li id="ca6a" class="lu lv in jt b ju md jy me kc mf kg mg kk mh ko lz ma mb mc bi translated">然后，在容器div中，我们将渲染这两个图像，并将原始图像的不透明度设置为0，并使第二个图像最初填充整个容器，即，具有与原始图像相同的尺寸，但我们将在某种程度上模糊该图像，以实现最初的渐进加载。</li><li id="b9cc" class="lu lv in jt b ju md jy me kc mf kg mg kk mh ko lz ma mb mc bi translated">由于该图像的大小相当小，它将在很短的时间内加载，在连接良好的情况下几乎可以立即加载。</li><li id="b1c3" class="lu lv in jt b ju md jy me kc mf kg mg kk mh ko lz ma mb mc bi translated">现在，当这个原始图像完全加载时，即在其onLoad()函数调用中，我们将做两件事:</li></ol><ul class=""><li id="a114" class="lu lv in jt b ju jv jy jz kc lw kg lx kk ly ko mi ma mb mc bi translated">将较小图像的不透明度逐渐降低到0。</li><li id="f5e6" class="lu lv in jt b ju md jy me kc mf kg mg kk mh ko mi ma mb mc bi translated">逐渐增加原始图像的不透明度到1。</li></ul><p id="ecc6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这就是我们需要做的！</p><h1 id="9dd7" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">实现渐进式图像加载</h1><p id="84cf" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">如果你已经跟进到这里，我想你已经有了一个基本的React应用程序设置。说到这里，让我们从在src文件夹中创建一个components文件夹开始。我将使用scss进行样式设计，但是您也可以使用普通css实现相同的功能，因此在components文件夹中创建一个Image文件夹，这是我们将要放置Image组件的位置，因此在其中创建两个文件，即:<strong class="jt io"> Image.js </strong>和<strong class="jt io"> Image.module.scss </strong>，现在打开<strong class="jt io"> Image.js </strong>并粘贴以下代码片段。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="59ad" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在我们已经完成了JavaScript部分的工作，加上一些样式，我们就可以开始了。所以现在打开<strong class="jt io"> Image.module.scss </strong>并将下面的代码片段粘贴到那里。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="d7a2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在有了这些东西，我们的组件就可以使用了。</p><p id="990b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要在<strong class="jt io"> App.js </strong>中使用它，只需像这样渲染组件:</p><pre class="mj mk ml mm gt mp mq mr ms aw mt bi"><span id="8970" class="mu ks in mq b gy mv mw l mx my">return(<br/>    &lt;Image <br/>        originalImageSrc={originalImageSrc} <br/>        smallImageSrc={smallImageSrc}  <br/>    /&gt;<br/>)</span></pre><p id="dddb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">其中originalImageSrc是原始图像的源(路径), smallImageSrc是小(调整大小后的)图像的源。</p><h2 id="b402" class="mu ks in bd kt mz na dn kx nb nc dp lb kc nd ne lf kg nf ng lj kk nh ni ln nj bi translated">享受实验吧！</h2><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/ff42bd1ba119a8d49d8f6c26a5b02778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWpJ3l2wxp82Xo8nE7b2AA.jpeg"/></div></div></figure></div></div>    
</body>
</html>
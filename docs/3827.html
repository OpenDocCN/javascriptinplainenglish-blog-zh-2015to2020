<html>
<head>
<title>How to Build a simple Web Server using Node.js and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js和Express构建一个简单的Web服务器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-simple-web-server-using-node-js-and-express-b945b22fe9bb?source=collection_archive---------5-----------------------#2020-10-27">https://javascript.plainenglish.io/how-to-build-a-simple-web-server-using-node-js-and-express-b945b22fe9bb?source=collection_archive---------5-----------------------#2020-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4e70" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用<strong class="ak">最流行的后端技术</strong>从头开始建立一个<strong class="ak"> </strong>本地<strong class="ak">网络服务器</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1c60913736fee23b635666925d8c0c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DuUdBQK8OypectV69zP7ng.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@bfigas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Bruno Figueiredo</a> on <a class="ae kv" href="https://unsplash.com/s/photos/fast-train?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0ae4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">在我们开始之前</h1><p id="ff44" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本文中，我们将使用<strong class="lq ir"> Node.js、Express、</strong>和<strong class="lq ir">命令行构建一个简单的web服务器。</strong>对于不熟悉这些技术的读者，在开始之前请快速阅读本简介:</p><ul class=""><li id="4e0d" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated"><strong class="lq ir"> Node.js </strong>是一个在网络浏览器之外执行JavaScript的JavaScript运行时环境。它已经成为最常用的后端技术之一。安装时从<a class="ae kv" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> Nodes.js网站下载<strong class="lq ir"> LTS版</strong>。</strong> </a></li><li id="a3f7" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated"><a class="ae kv" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> Express </strong> </a>是一个极小的Node.js框架。使用Node.js构建web应用程序时，编写DRY代码很有帮助。我将在后面的文章中展示如何安装这个框架。</li><li id="afaa" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated"><strong class="lq ir"> </strong> <a class="ae kv" href="https://www.learnenough.com/command-line-tutorial/basics" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">命令行</strong> </a>是我们告诉计算机执行所需任务的地方。我们可以打开操作系统附带的命令行(Windows中的<strong class="lq ir">命令提示符</strong>、macOS中的<strong class="lq ir">终端</strong>)或者下载终端应用程序。我将使用<strong class="lq ir"/><a class="ae kv" href="https://hyper.is/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir">Hyper</strong></a><strong class="lq ir">、</strong>一款基于HTML/CSS/JS的完全可定制的终端。</li></ul></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="4a70" class="kw kx iq bd ky kz nh lb lc ld ni lf lg jw nj jx li jz nk ka lk kc nl kd lm ln bi translated">让我们设置这个服务器！</h1><p id="3ff3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">一旦我们在机器上安装了Node.js，我们就可以构建简单的服务器了。</p><p id="7956" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">首先，我们将使用<strong class="lq ir">命令行</strong>在桌面上创建一个<strong class="lq ir">新文件夹</strong>和一个<strong class="lq ir">新JavaScript文件</strong>:</p><ul class=""><li id="d903" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">首先，打开终端。要知道我们在哪个目录中，我们可以键入<code class="fe np nq nr ns b">pwd</code> ( <em class="nt">打印工作目录</em>)。如果我们还没有在桌面上，我们可以用<code class="fe np nq nr ns b">cd Desktop/</code>改变目录。</li><li id="c69b" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">创建新的文件夹类型<code class="fe np nq nr ns b">mkdir</code>和文件夹的名称。我会称我的<strong class="lq ir"> <em class="nt">为“服务器”。</em> </strong></li><li id="60b0" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">现在，让我们再次更改目录，在新文件夹中，我们可以创建一个名为<code class="fe np nq nr ns b">index.js</code>的新JavaScript文件。在这种情况下，我们将使用<strong class="lq ir"> <em class="nt"> </em> </strong> <code class="fe np nq nr ns b">touch</code>命令。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/ca4a37001fb08cc57ed25765789e2add.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGAEiPjxUX7C9zM_uwl91Q.png"/></div></div></figure><p id="e8fc" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">现在，我们必须设置<a class="ae kv" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir"> NPM </strong> </a>，这是一个外部模块的包管理器。NPM代表<strong class="lq ir">节点包管理器</strong>，它是目前世界上最大的软件注册中心。</p><ul class=""><li id="35e6" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">我们初始化NPM打字<code class="fe np nq nr ns b">npm init</code>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/7b1d292330334f10cd82b15e737072c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_69toIOyYIMC1s8tW7KTcw.png"/></div></div></figure><ul class=""><li id="9181" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">现在我们建立我们的NPM。我们可以决定包的名称、项目的版本、描述和入口点(这是指我们的主Javascript文件，在我们的例子中是<code class="fe np nq nr ns b">index.js</code>)。我们可以忽略其他设置并点击回车，直到我们创建了<strong class="lq ir"> package.json. </strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/f7b99940af462ee1fe74fea32484a649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tN1D5U0OFw5viV7M3Snwuw.png"/></div></div></figure><p id="7d56" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">让我们在文本编辑器中打开我们的项目。在命令行中这样做的快捷方式是简单地键入文本编辑器的名称(例如Atom ),后跟一个点。</p><ul class=""><li id="9273" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">我将在<strong class="lq ir"> <em class="nt"> Visual Studio中打开项目代码</em> </strong>键入<strong class="lq ir"> <em class="nt"> </em> </strong> <code class="fe np nq nr ns b">code .</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/66aa4b0eb03121f14ff0b239ecc2c1dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TP-EwMk93vCwmJmibgUarw.png"/></div></div></figure><p id="0aab" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们现在准备安装express。</p><ul class=""><li id="8b16" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">类型<code class="fe np nq nr ns b">npm install express</code>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/375815c1e63366d03c811b8cd741dc2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pws2oqlXMAJQ22lsu1xXjg.png"/></div></div></figure><p id="e97e" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">下一步是转到我们的JavaScript文件，并需要“express”包。然后我们可以创建一个名为<code class="fe np nq nr ns b">app</code>的新常量，它被设置为等于<code class="fe np nq nr ns b">express</code>。现在我们可以使用它的一个方法，叫做<code class="fe np nq nr ns b">listen</code>。这告诉<code class="fe np nq nr ns b">app</code>监听发送到我们服务器的任何HTTP请求的特定端口。端口就像是我们将服务器调谐到的频道。对于这个例子，我选择了端口3000。接下来，让我们给这个方法添加一个回调函数来控制一条消息:“<em class="nt">在</em><a class="ae kv" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"><em class="nt">http://localhost:3000</em></a>运行的服务器的示例”。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="2ac7" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">现在我们可以保存文件并在命令行中键入<code class="fe np nq nr ns b">node index.js</code>。这将打印出我们的消息并启动服务器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/ba32bdd28e1b172a9b5c3a95c17abde0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7M-RDNABtP1mAeK1FLZ1OQ.png"/></div></div></figure><p id="c69c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们刚刚创建了我们的<strong class="lq ir"> Web服务器！</strong></p><p id="3cda" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">现在的问题是如果我们去<a class="ae kv" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，会显示错误:<code class="fe np nq nr ns b">cannot GET /</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/6a1d0c1226d327fc6579cb529b129342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*NDj8V3gffvJi3tmnRzBIbg.png"/></div></div></figure><p id="7890" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们必须编写一些额外的代码，以便当浏览器向服务器发出请求时，服务器能够做出响应。首先，让我们用<strong class="lq ir"> <em class="nt"> ctrl + C </em> </strong>停止服务器，并再次打开我们的<code class="fe np nq nr ns b">index.js</code>。</p><p id="038d" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">我们现在必须向这个JS文件添加几行代码。就在<code class="fe np nq nr ns b">app.listen</code>上面，我们还要加上<code class="fe np nq nr ns b">app.get</code>。该方法允许我们指定当浏览器发出<strong class="lq ir"> <em class="nt"> get请求</em> </strong>并与我们的服务器取得联系时应该发生什么。</p><pre class="kg kh ki kj gt od ns oe of aw og bi"><span id="9a55" class="oh kx iq ns b gy oi oj l ok ol">app.get ('/', (req, res) =&gt; {<br/>  res.send('Hello! Everything is working fine!')<br/>})</span></pre><p id="1e37" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">第一个参数是get请求的位置。转到<a class="ae kv" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，<strong class="lq ir"> <em class="nt"> get请求</em> </strong>正在发送到我们网站的路由，用<strong class="lq ir"><em class="nt">“/”表示。</em> </strong></p><p id="3800" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">现在，当<em class="nt"> </em> <strong class="lq ir"> <em class="nt"> get请求</em> </strong> <em class="nt"> </em>发生时，我们可以触发一个回调函数，该函数将有两个参数:<em class="nt">请求</em>和<em class="nt">响应</em>。所以目前我们的服务器没有任何反应。我们可以使用<code class="fe np nq nr ns b">send</code>方法发送一个响应，它将是文本:<em class="nt">“你好！一切正常！”。</em></p><p id="079f" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">让我们保存文件，并在命令行中使用<code class="fe np nq nr ns b">node index.js</code>再次运行服务器。</p><p id="a251" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">现在，如果我们去<a class="ae kv" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，<strong class="lq ir">我们终于得到了我们的消息！</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/44458a9bada73851dc988f327ebafd8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*ypOSlvhfA81pATbpn4y4KQ.png"/></div></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="97e8" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx nm lz ma mb nn md me mf no mh mi mj ij bi translated">如果你需要的话，这里是<code class="fe np nq nr ns b">index.js</code>文件的完整代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div></div>    
</body>
</html>
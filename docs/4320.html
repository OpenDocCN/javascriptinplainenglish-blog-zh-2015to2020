<html>
<head>
<title>Creating an HTML5 Integer Input</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建HTML5整数输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-an-html5-integer-input-aea73dec7058?source=collection_archive---------15-----------------------#2020-12-02">https://javascript.plainenglish.io/creating-an-html5-integer-input-aea73dec7058?source=collection_archive---------15-----------------------#2020-12-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6fbb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">当HTML5数字输入不够时</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/403571de9f8d340da3bac8fa5d479f15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T_-oMp1e0P174MZf"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@orrbarone?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Orr</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6ecc" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">我的旅程</h1><p id="4390" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在处理数字输入时，我经常需要一个整数输入。例如，您只能向购物车中添加整数数量的商品。想象一下，试图购买一部iPhone的一小部分！不幸的是，输入<em class="mh">数字</em>类型不支持开箱即用——但它可以。让我们深入了解一下。</p><h1 id="ab08" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">整数输入</h1><p id="51b5" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">输入数字类型将我们带到那里，但不幸的是它也支持小数(例如1.234)和科学记数法(例如1e10)。幸运的是，有一种非常简单的方法可以使用<code class="fe mi mj mk ml b">onKeyPress</code>来忽略这些不受欢迎的字符。该事件处理程序在<code class="fe mi mj mk ml b">onChange</code>函数之前被触发。这意味着您可以使用<code class="fe mi mj mk ml b">onKeyPress</code>来检查按下了什么键，如果输入的是不想要的字符，就忽略它。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="d642" class="mq ku in ml b gy mr ms l mt mu">&lt;input<br/>  onChange={e =&gt; onChange(e.target.value)}<br/>  onKeyPress={e =&gt; {<br/>    if (!/[-\d]/.test(e.key)) {<br/>      e.preventDefault();<br/>    }<br/>  }}<br/>  type="number"<br/>  value={value}<br/>/&gt;</span></pre><p id="bc36" class="pw-post-body-paragraph ll lm in ln b lo mv jo lq lr mw jr lt lu mx lw lx ly my ma mb mc mz me mf mg ig bi translated">如果按下的键(通过<code class="fe mi mj mk ml b">e.key</code>检查)不是数字或破折号(支持负整数)，默认行为将被阻止，并且<code class="fe mi mj mk ml b">onChange</code>功能不会被触发。实际上，这将防止字符被输入到输入中。差不多就是这样！</p><h1 id="287a" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">可供选择的事物</h1><p id="123b" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><code class="fe mi mj mk ml b">onKeyPress</code>方法不是创建整数输入的唯一方式。</p><p id="70a4" class="pw-post-body-paragraph ll lm in ln b lo mv jo lq lr mw jr lt lu mx lw lx ly my ma mb mc mz me mf mg ig bi translated"><strong class="ln io">模式</strong>允许您指定一个regex字符串，当表单被提交时，它将与输入匹配。如果输入与正则表达式不匹配，表单将不会被提交。对于整数输入，这应该设置为<code class="fe mi mj mk ml b">[-\d]</code>，就像<code class="fe mi mj mk ml b">onKeyPress</code>方法只允许破折号和数字。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="ad81" class="mq ku in ml b gy mr ms l mt mu">&lt;input<br/>  onChange={e =&gt; onChange(e.target.value)}<br/>  pattern="[-\d]"<br/>  type="number"<br/>  value={value}<br/>/&gt;</span></pre><p id="6479" class="pw-post-body-paragraph ll lm in ln b lo mv jo lq lr mw jr lt lu mx lw lx ly my ma mb mc mz me mf mg ig bi translated"><strong class="ln io">步骤</strong>允许您指定有效数字之间的间隔。如果输入不能被指定的步骤整除，则不会提交表单。对于整数输入，应该设置为1。</p><pre class="kd ke kf kg gt mm ml mn mo aw mp bi"><span id="77d1" class="mq ku in ml b gy mr ms l mt mu">&lt;input<br/>  onChange={e =&gt; onChange(e.target.value)}<br/>  step="1"<br/>  type="number"<br/>  value={value}<br/>/&gt;</span></pre><p id="9790" class="pw-post-body-paragraph ll lm in ln b lo mv jo lq lr mw jr lt lu mx lw lx ly my ma mb mc mz me mf mg ig bi translated">这两种方法虽然有效，但都要求用户首先提交表单。只有这样，用户才会被告知错误。我个人不喜欢这些方法，因为我更喜欢向用户提供即时反馈——要么首先不允许用户输入无效值，要么立即显示错误。稍后在提交过程中这样做将会使用户困惑。</p></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><h1 id="2eac" class="kt ku in bd kv kw nh ky kz la ni lc ld jt nj ju lf jw nk jx lh jz nl ka lj lk bi translated">最后的想法</h1><p id="c82a" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">鉴于有这么多常见的用例，我真的希望有一个针对integer的本地HTML5。但是即使没有本地实现，自己实现也很容易。</p></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><h1 id="4d58" class="kt ku in bd kv kw nh ky kz la ni lc ld jt nj ju lf jw nk jx lh jz nl ka lj lk bi translated">资源</h1><ul class=""><li id="d094" class="nm nn in ln b lo lp lr ls lu no ly np mc nq mg nr ns nt nu bi translated"><a class="ae ks" href="https://github.com/mjchang/medium/tree/master/integer-input" rel="noopener ugc nofollow" target="_blank">本文Github回购</a></li><li id="2389" class="nm nn in ln b lo nv lr nw lu nx ly ny mc nz mg nr ns nt nu bi translated"><a class="ae ks" href="https://codesandbox.io/s/github/mjchang/medium/tree/master/integer-input" rel="noopener ugc nofollow" target="_blank">本文的code sandbox</a></li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>Tinder Style Movie Night Picker with VueJs, Vuetify, VuexFire, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">火绒风格的电影夜采摘与VueJs，Vuetify，VuexFire，和Firebase</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-and-firebase-d62d6c39feb9?source=collection_archive---------12-----------------------#2020-11-13">https://javascript.plainenglish.io/tinder-style-movie-night-picker-with-vuejs-and-firebase-d62d6c39feb9?source=collection_archive---------12-----------------------#2020-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fa20" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第5部分——火柴和应用抛光</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/29194706d3d7566ffb0bf19200b94e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G-91gW4bAIUQ68DMus9zBw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/12019-12019/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1936633" rel="noopener ugc nofollow" target="_blank">David Mark</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1936633" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="af3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第四部分中，我们让电影流入我们的应用程序，并允许用户上下滑动。我们还检查了他们的搭档是否有匹配的电影。我们需要做的最后一件事是在另一个页面上显示这些匹配，并稍微润色一下应用程序。</p><h1 id="c940" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">火柴和真空火焰</h1><p id="4440" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了显示比赛，我们将使用VuexFire。这将为我们的matches页面提供实时功能，而无需编写额外的代码。为此，转到src/store/modules/user.js。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0db6" class="mu lt iq mq b gy mv mw l mx my"><em class="mz">import</em> { firestoreAction } <em class="mz">from</em> "vuexfire";<br/><em class="mz">import</em> { db } <em class="mz">from</em> "../../main";</span></pre><p id="cc4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后添加一个名为matches的新状态属性，并将其设置为一个空数组:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7c5d" class="mu lt iq mq b gy mv mw l mx my">const<em class="mz"> state </em>=<em class="mz"> </em>{<br/> <em class="mz">id</em>:<em class="mz"> null</em>,<br/> <em class="mz">name</em>:<em class="mz"> null</em>,<br/> <em class="mz">email</em>:<em class="mz"> null</em>,<br/> <em class="mz">partnerId</em>:<em class="mz"> null</em>,<br/> <em class="mz">movieApiPage</em>:<em class="mz"> </em>1,<br/><strong class="mq ir"> <em class="mz">matches</em>:<em class="mz"> </em>[],</strong><br/>};</span></pre><p id="0cfc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，创建一个名为bindMatchesRef的新操作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d02a" class="mu lt iq mq b gy mv mw l mx my"><em class="mz">bindMatchesRef</em>:<em class="mz"> firestoreAction</em>((<em class="mz">context</em>)<em class="mz"> </em>=&gt;<em class="mz"> </em>{<br/> <em class="mz">return context.bindFirestoreRef</em>(<br/>  "matches",<br/> db<br/> <em class="mz">.collection</em>("users")<br/> <em class="mz">.doc</em>(<em class="mz">context.state.id</em>)<br/> <em class="mz">.collection</em>("matches")<br/> );<br/>}),</span></pre><p id="c141" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，转到src/store/index.js。在那里，我们需要在顶部添加一个新的导入:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="951f" class="mu lt iq mq b gy mv mw l mx my"><em class="mz">import</em> { vuexfireMutations } <em class="mz">from</em> "vuexfire";</span></pre><p id="6eda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们将把它添加到带有对象析构的基本存储变异中:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d4dc" class="mu lt iq mq b gy mv mw l mx my">mutations: {<br/> ...vuexfireMutations,<br/>}</span></pre><p id="b950" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要做的最后一件事是调用我们在Vuex用户模块中添加的新动作。为此，请访问src/views/Home.vue，从我们创建的vue生命周期中调用操作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0141" class="mu lt iq mq b gy mv mw l mx my"><em class="mz">created</em>() {<br/> <strong class="mq ir">this<em class="mz">.$store.dispatch</em>("user/bindMatchesRef");</strong><br/> this<em class="mz">.fetchMovies</em>(this<em class="mz">.</em>userMovieApiPage);<br/>}</span></pre><p id="c059" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经设置好了，我们的比赛将在我们即将创建的比赛页面上实时更新。</p><h1 id="4676" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">匹配页面</h1><p id="58db" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在要显示匹配项，请转到src/views并创建一个名为Matches.vue的新文件。在这里，我们将显示用户的匹配项和每部电影的详细信息。我们唯一需要的是访问Firestore中的matches集合。</p><p id="7623" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为VuexFire会负责将数据与我们的商店同步，所以我们需要做的就是创建一个计算属性来引用它:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5c47" class="mu lt iq mq b gy mv mw l mx my">computed: {<br/>  <em class="mz">matches</em>() {<br/>   <em class="mz">return</em> this<em class="mz">.$store.state.user.</em>matches;<br/>  },<br/>},</span></pre><p id="fe52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还将创建一个方法prop to和一个名为getMovieImage的方法来获取比赛的海报图像:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b196" class="mu lt iq mq b gy mv mw l mx my">methods: {<br/> <em class="mz">getMovieImage</em>(posterPath) {<br/>  <em class="mz">return</em> posterPath ?<br/>  `https://image.tmdb.org/t/p/w500/${posterPath}` : <br/>  "";<br/> },<br/>}</span></pre><p id="4815" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了显示匹配，我们将遍历它们并为每一个创建一张卡片。卡片内有标题、描述和图片。您的最终Matches.vue文件应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="62f2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">航行</h1><p id="cf59" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们的应用程序现在有相当多的页面，但用户没有办法在不知道路径的情况下导航到这些页面。为了解决这个问题，我们将创建一个包含所有页面的导航抽屉。为此，我们将把<em class="mz">虚拟应用工具栏</em>移到它自己的组件中，并添加一个<em class="mz">虚拟导航抽屉。</em></p><p id="ee17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在src中创建一个名为components的新文件夹。然后，在这个文件夹中创建一个名为AppBar.vue的文件，接下来，在src/App.vue中导入并注册这个组件，复制v-app-bar，并用导入的组件替换它。</p><p id="7d50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到AppBar.vue，我们将为应用程序中的每个页面添加一个带有<em class="mz"> v列表项</em>的<em class="mz"> v导航抽屉</em>。我们需要添加一个选项API数据属性和一个抽屉属性来控制抽屉的显示和隐藏。最后，我们将添加一个<em class="mz"> v-app-bar-nav-icon </em>来切换我们的抽屉属性。只有当用户登录时才会显示。</p><p id="b693" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成所有这些之后，您的AppBar.vue文件应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">AppBar.vue</figcaption></figure><h1 id="4e4e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">注销用户</h1><h2 id="d97f" class="mu lt iq bd lu nc nd dn ly ne nf dp mc lf ng nh me lj ni nj mg ln nk nl mi nm bi translated">注销按钮</h2><p id="6e9b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们要实现的最后一件事是为用户提供注销功能。为此，我们还将编辑AppBar.vue组件。就在我们的电影《拾夜者》片名之后，添加一个<em class="mz"> v-spacer </em>和<em class="mz"> v-btn </em>。我们将给出logout的按钮文本，绑定到稍后将创建的方法的click事件，并且仅在用户登录时显示按钮。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7740" class="mu lt iq mq b gy mv mw l mx my">&lt;v-app-bar <em class="mz">app</em> <em class="mz">color</em>="primary" <em class="mz">dark</em>&gt;<br/> &lt;v-app-bar-nav-icon @<em class="mz">click</em>.<em class="mz">stop</em>="drawer = !drawer" <em class="mz">v-if</em>="userId"&gt;<br/> &lt;/v-app-bar-nav-icon&gt;<br/>  &lt;div <em class="mz">class</em>="d-flex align-center"&gt;<br/>   &lt;h2&gt;Movie Night Picker&lt;/h2&gt;<br/>  &lt;/div&gt;<br/> &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/> <br/> <strong class="mq ir">&lt;v-btn <em class="mz">text</em> <em class="mz">v-if</em>="userId" @<em class="mz">click</em>="logoutUser"&gt;Logout&lt;/v-btn&gt;</strong><br/>&lt;/v-app-bar&gt;</span></pre><h2 id="e522" class="mu lt iq bd lu nc nd dn ly ne nf dp mc lf ng nh me lj ni nj mg ln nk nl mi nm bi translated">Vuex</h2><p id="9246" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在我们的Vuex商店中，我们需要在注销时清除用户的状态。为此，我们需要在用户模块中有一个新的变化和动作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="a44a" class="mu lt iq mq b gy mv mw l mx my">//action<br/><em class="mz">clearUserData</em>(<em class="mz">context</em>)<em class="mz"> </em>{<br/> <em class="mz">context.commit</em>("CLEAR_USER_DATA");<br/>}</span><span id="bf8d" class="mu lt iq mq b gy nn mw l mx my">//mutation<br/><em class="mz">CLEAR_USER_DATA</em>:<em class="mz"> </em>(<em class="mz">state</em>)<em class="mz"> </em>=&gt;<em class="mz"> </em>{<br/> <em class="mz">state.id </em>=<em class="mz"> null</em>;<br/> <em class="mz">state.name </em>=<em class="mz"> null</em>;<br/> <em class="mz">state.email </em>=<em class="mz"> null</em>;<br/> <em class="mz">state.partnerId </em>=<em class="mz"> null</em>;<br/> <em class="mz">state.movieApiPage </em>=<em class="mz"> </em>1;<br/>}</span></pre><h2 id="2016" class="mu lt iq bd lu nc nd dn ly ne nf dp mc lf ng nh me lj ni nj mg ln nk nl mi nm bi translated">注销方法</h2><p id="2304" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，回到AppBar.vue文件内部，我们需要创建注销用户的方法。在脚本标记的顶部，导入firebase:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="4447" class="mu lt iq mq b gy mv mw l mx my"><em class="mz">import</em> firebase <em class="mz">from</em> 'firebase';</span></pre><p id="a7ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，编写注销用户的函数，清除用户的状态，并重定向回我们的登录页面。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="ba04" class="mu lt iq mq b gy mv mw l mx my">methods: {<br/> <em class="mz">async</em> <em class="mz">logoutUser</em>() {<br/>  <em class="mz">await</em> <em class="mz">firebase.auth</em>()<em class="mz">.signOut</em>();<br/>  this<em class="mz">.$store.dispatch</em>("user/clearUserData");<br/>  this<em class="mz">.$router.replace</em>("/");<br/> },<br/>}</span></pre><h1 id="0278" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">视频教程</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Video Tutorial</figcaption></figure><h1 id="5f5d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="cc52" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这就是火绒风格的电影《夜盗》的结尾。你可以对应用程序做很多改进，如果你做了，一定要分享它们。如果您有任何意见、问题或顾虑，请务必留下回复。下次见，编码快乐！</p></div></div>    
</body>
</html>
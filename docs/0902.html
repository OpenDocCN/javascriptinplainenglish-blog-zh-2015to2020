<html>
<head>
<title>How to Use Input Masks to Validate Input in an Angular App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用输入掩码来验证Angular应用程序中的输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-input-masks-to-validate-input-in-an-angular-app-3fcf70734639?source=collection_archive---------0-----------------------#2020-01-01">https://javascript.plainenglish.io/how-to-use-input-masks-to-validate-input-in-an-angular-app-3fcf70734639?source=collection_archive---------0-----------------------#2020-01-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6729" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设置输入验证总是很麻烦。输入掩码是一种以简单的方式强制用户输入格式的方法。当输入掩码应用于输入元素时，只能输入设定格式的输入。</p><p id="3a54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果电话的输入掩码为，则区号可能有3个数字，后面是破折号，然后是前缀的3个数字，再后面是另一个破折号，然后是剩余的4个数字。</p><p id="c41b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有许多JavaScript库可以向输入字段添加输入任务。如果我们正在编写一个Angular应用程序，我们可以使用位于<a class="ae kp" href="https://www.npmjs.com/package/ngx-mask" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/ngx-mask</a>的<code class="fe kl km kn ko b">ngx-mask library</code>。该库允许我们强制输入格式，也有一个管道将模板变量转换成指定的格式。</p><p id="a039" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将构建一个小费计算器，获取不同国家的小费率，并让用户输入他们在给小费之前已经花费的金额，以及与多少人分享小费后的金额。我们将从https://restcountries.eu/rest/v2/all获得国家及其货币的列表。要开始构建应用程序，我们首先通过运行<code class="fe kl km kn ko b">npm i -g @angular/cli</code>安装Angular CLI(如果尚未安装的话)。接下来，我们通过运行<code class="fe kl km kn ko b">ng new tip-calculator</code>创建我们的项目。在向导中，我们选择包含路由，并使用SCSS作为我们的CSS预处理器。</p><p id="be59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们安装一些软件包。我们需要上面提到的<code class="fe kl km kn ko b"> ngx-mask </code>包以及MobX来将国家存储在共享存储中。要安装它们，我们运行:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="1058" class="ky kz iq ko b gy la lb l lc ld">npm i ngx-mask mobx mobx-angular</span></pre><p id="4a87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们创建我们的组件和服务。为此，我们运行:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="1d57" class="ky kz iq ko b gy la lb l lc ld">ng g component homePage<br/>ng g service tips<br/>ng g class countriesStore</span></pre><p id="f103" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们准备写一些代码。在<code class="fe kl km kn ko b">home-page.component.html</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="58d1" class="ky kz iq ko b gy la lb l lc ld">&lt;h1 class="text-center"&gt;Tip Calculator&lt;/h1&gt;<br/>&lt;form (ngSubmit)="calculate(tipForm)" #tipForm="ngForm"&gt;<br/>  &lt;div class="form-group"&gt;<br/>    &lt;label&gt;Amount&lt;/label&gt;<br/>    &lt;input<br/>      type="text"<br/>      class="form-control"<br/>      placeholder="Amount"<br/>      #amount="ngModel"<br/>      name="amount"<br/>      [(ngModel)]="form.amount"<br/>      required<br/>      mask="9999990*.99"<br/>    /&gt;<br/>    &lt;div *ngIf="amount?.invalid &amp;&amp; (amount.dirty || amount.touched)"&gt;<br/>      &lt;div *ngIf="amount.errors.required"&gt;<br/>        Amount is required.<br/>      &lt;/div&gt;<br/>      &lt;div *ngIf="amount.invalid"&gt;<br/>        Amount is invalid.<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;</span><span id="34da" class="ky kz iq ko b gy le lb l lc ld">  &lt;div class="form-group"&gt;<br/>    &lt;label&gt;Number of People&lt;/label&gt;<br/>    &lt;input<br/>      type="text"<br/>      class="form-control"<br/>      placeholder="Number of People"<br/>      #amount="ngModel"<br/>      name="amount"<br/>      [(ngModel)]="form.numPeople"<br/>      required<br/>      mask="9999990"<br/>    /&gt;<br/>    &lt;div *ngIf="numPeople?.invalid &amp;&amp; (numPeople.dirty || numPeople.touched)"&gt;<br/>      &lt;div *ngIf="numPeople.errors.required"&gt;<br/>        Number of people is required.<br/>      &lt;/div&gt;<br/>      &lt;div *ngIf="numPeople.invalid"&gt;<br/>        Number of people is invalid.<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;</span><span id="49a3" class="ky kz iq ko b gy le lb l lc ld">  &lt;div class="form-group"&gt;<br/>    &lt;label&gt;Country&lt;/label&gt;<br/>    &lt;select<br/>      class="form-control"<br/>      #country="ngModel"<br/>      name="country"<br/>      [(ngModel)]="form.country"<br/>      required<br/>    &gt;<br/>      &lt;option *ngFor="let c of store.countries" [value]="c.name"&gt;<br/>        {{ c.name }}<br/>      &lt;/option&gt;<br/>    &lt;/select&gt;<br/>    &lt;div *ngIf="country?.invalid &amp;&amp; (country.dirty || country.touched)"&gt;<br/>      &lt;div *ngIf="country.errors.required"&gt;<br/>        Country is required.<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;</span><span id="fa2a" class="ky kz iq ko b gy le lb l lc ld">  &lt;button class="btn btn-primary"&gt;Calculate&lt;/button&gt;<br/>&lt;/form&gt;</span><span id="22b1" class="ky kz iq ko b gy le lb l lc ld">&lt;br /&gt;</span><span id="d9cc" class="ky kz iq ko b gy le lb l lc ld">&lt;div class="card"&gt;<br/>  &lt;div class="card-body"&gt;<br/>    &lt;h5 class="card-title"&gt;Result&lt;/h5&gt;<br/>    &lt;p class="card-text"&gt;<br/>      Amount after tip: {{ amountAfterTip | mask: "9999999.99" }} {{ currency }}<br/>    &lt;/p&gt;<br/>    &lt;p class="card-text"&gt;<br/>      Amount after tip split between {{ this.form.numPeople }} people:<br/>      {{ splitAmountAfterTip | mask: "9999999.99" }} {{ currency }}<br/>    &lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="09c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们添加了小费计算器表单，让用户输入他们的总小费金额、一起吃饭的人数以及用户所在的国家。我们使用Angular的模板驱动的表单验证来检查是否填写了所有内容。此外，我们使用由<code class="fe kl km kn ko b">ngx-mask</code>提供的<code class="fe kl km kn ko b">mask</code>指令来确保用户在金额字段中输入货币金额，并且我们使用相同的指令来强制人数为非负数。Country字段有从我们的MobX商店获取的选项。</p><p id="c42b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面底部，我们显示计算后的结果。我们使用<code class="fe kl km kn ko b">ngx-mask</code>提供的<code class="fe kl km kn ko b">mask</code>过滤器来显示货币金额，并显示正确的小数位数。</p><p id="28e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">home-page.component.ts</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="60d9" class="ky kz iq ko b gy la lb l lc ld">import { Component, OnInit } from '<a class="ae kp" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { TipsService } from '../tips.service';<br/>import { countriesStore } from '../countries-store';<br/>import { NgForm } from '<a class="ae kp" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';</span><span id="9bb0" class="ky kz iq ko b gy le lb l lc ld"><a class="ae kp" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-home-page',<br/>  templateUrl: './home-page.component.html',<br/>  styleUrls: ['./home-page.component.scss']<br/>})<br/>export class HomePageComponent implements OnInit {<br/>  store = countriesStore;<br/>  countries: any[] = [];<br/>  form: any = &lt;any&gt;{};<br/>  amountAfterTip: number = 0;<br/>  splitAmountAfterTip: number = 0;<br/>  currency: string = '';</span><span id="e66c" class="ky kz iq ko b gy le lb l lc ld">  constructor(private tipsService: TipsService) { }</span><span id="3665" class="ky kz iq ko b gy le lb l lc ld">  ngOnInit() {<br/>    if (this.store.countries.length == 0) {<br/>      this.tipsService.getCountries()<br/>        .subscribe(res =&gt; {<br/>          this.store.setCountries(res);<br/>        })<br/>    }<br/>  }</span><span id="b8f1" class="ky kz iq ko b gy le lb l lc ld">  calculate(tipForm: NgForm) {<br/>    if (tipForm.invalid) {<br/>      return;<br/>    }<br/>    const country = this.store.countries.find(c =&gt; c.name == this.form.country)<br/>    this.currency = country ? country.currencies[0].code : '';<br/>    this.amountAfterTip = +this.form.amount * (1 + this.tipsService.getTipRates(this.form.country));<br/>    this.splitAmountAfterTip = +this.amountAfterTip / +this.form.numPeople;<br/>  }<br/>}</span></pre><p id="b1c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">ngOnInit</code>钩子中，我们获取国家，如果还没有填充，就将它们放入我们的MobX存储中。我们还有在模板中调用的<code class="fe kl km kn ko b">calculate</code>函数。我们检查我们在模板中定义的<code class="fe kl km kn ko b">tipForm</code>是否有效，如果有效，那么我们计算小费并得到国家的货币名称。</p><p id="e8bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app-routing.module.ts</code>中，我们输入:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="8169" class="ky kz iq ko b gy la lb l lc ld">import { NgModule } from '<a class="ae kp" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Routes, RouterModule } from '<a class="ae kp" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { HomePageComponent } from './home-page/home-page.component';</span><span id="ac5d" class="ky kz iq ko b gy le lb l lc ld">const routes: Routes = [<br/>  { path: '', component: HomePageComponent },<br/>]</span><span id="758c" class="ky kz iq ko b gy le lb l lc ld"><a class="ae kp" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="f298" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，当用户点击链接或输入URL时，他们可以看到我们刚刚添加的页面。</p><p id="704f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe kl km kn ko b">app.component.html</code>中，我们放入:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="a65a" class="ky kz iq ko b gy la lb l lc ld">&lt;nav class="navbar navbar-expand-lg navbar-light bg-light"&gt;<br/>  &lt;a class="navbar-brand" routerLink="/"&gt;Tip Calculator&lt;/a&gt;<br/>  &lt;button<br/>    class="navbar-toggler"<br/>    type="button"<br/>    data-toggle="collapse"<br/>    data-target="#navbarSupportedContent"<br/>    aria-controls="navbarSupportedContent"<br/>    aria-expanded="false"<br/>    aria-label="Toggle navigation"<br/>  &gt;<br/>    &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;<br/>  &lt;/button&gt;</span><span id="0b0d" class="ky kz iq ko b gy le lb l lc ld">&lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>    &lt;ul class="navbar-nav mr-auto"&gt;<br/>      &lt;li class="nav-item active"&gt;<br/>        &lt;a class="nav-link" routerLink="/"&gt;Home &lt;/a&gt;<br/>      &lt;/li&gt;<br/>    &lt;/ul&gt;<br/>  &lt;/div&gt;<br/>&lt;/nav&gt;</span><span id="e54e" class="ky kz iq ko b gy le lb l lc ld">&lt;div class="page"&gt;<br/>  &lt;router-outlet&gt;&lt;/router-outlet&gt;<br/>&lt;/div&gt;</span></pre><p id="6f0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向我们的页面添加链接，并暴露<code class="fe kl km kn ko b">router-outlet</code>以便用户可以看到我们的页面。</p><p id="cfc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe kl km kn ko b">app.component.scss</code>中，我们添加:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="bfb3" class="ky kz iq ko b gy la lb l lc ld">.page {<br/>  padding: 20px;<br/>}</span><span id="a706" class="ky kz iq ko b gy le lb l lc ld">nav {<br/>  background-color: lightsalmon !important;<br/>}</span></pre><p id="7e4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加填充到我们的页面，并改变我们的引导导航栏的颜色。</p><p id="4590" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe kl km kn ko b">app.module.ts</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="367b" class="ky kz iq ko b gy la lb l lc ld">import { BrowserModule } from '<a class="ae kp" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae kp" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { NgxMaskModule } from 'ngx-mask'<br/>import { MobxAngularModule } from 'mobx-angular';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { FormsModule } from '<a class="ae kp" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { HttpClientModule } from '<a class="ae kp" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { TipsService } from './tips.service';</span><span id="cde2" class="ky kz iq ko b gy le lb l lc ld"><a class="ae kp" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    HomePageComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    NgxMaskModule.forRoot(),<br/>    MobxAngularModule,<br/>    FormsModule,<br/>    HttpClientModule,<br/>  ],<br/>  providers: [TipsService],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="56a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们添加我们在应用中使用的组件、服务和库。</p><p id="c861" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe kl km kn ko b">countriesStore.ts</code>中，我们添加:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="04b2" class="ky kz iq ko b gy la lb l lc ld">import { observable, action } from 'mobx-angular';</span><span id="4910" class="ky kz iq ko b gy le lb l lc ld">class CountriesStore {<br/>    <a class="ae kp" href="http://twitter.com/observable" rel="noopener ugc nofollow" target="_blank">@observable</a> countries = [];<br/>    <a class="ae kp" href="http://twitter.com/action" rel="noopener ugc nofollow" target="_blank">@action</a> setCountries(countries) {<br/>        this.countries = countries;<br/>    }<br/>}</span><span id="1519" class="ky kz iq ko b gy le lb l lc ld">export const countriesStore = new CountriesStore();</span></pre><p id="0311" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建MobX store来让我们的组件共享数据。每当我们在组件中调用<code class="fe kl km kn ko b">this.store.setCountries</code>时，我们在这个存储中设置货币数据，因为我们在它之前添加了<code class="fe kl km kn ko b">@action</code>装饰器。当我们在组件代码中调用<code class="fe kl km kn ko b">this.store.countries </code>时，我们总是从这个存储中获取最新的值，因为有了<code class="fe kl km kn ko b">@observable</code>装饰器。</p><p id="f988" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe kl km kn ko b">tips.service.ts</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="4a3a" class="ky kz iq ko b gy la lb l lc ld">import { Injectable } from '<a class="ae kp" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae kp" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';</span><span id="fc78" class="ky kz iq ko b gy le lb l lc ld"><a class="ae kp" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class TipsService {</span><span id="8bee" class="ky kz iq ko b gy le lb l lc ld">  constructor(private http: HttpClient) { }</span><span id="1346" class="ky kz iq ko b gy le lb l lc ld">  getCountries() {<br/>    return this.http.get('<a class="ae kp" href="https://restcountries.eu/rest/v2/all'" rel="noopener ugc nofollow" target="_blank">https://restcountries.eu/rest/v2/all'</a>);<br/>  }</span><span id="d4f9" class="ky kz iq ko b gy le lb l lc ld">  getTipRates(country) {<br/>    const ROUND_UP_COUNTRIES = `France,Italy,Hungary,Greece,Latvia`.split(',').map(c =&gt; c.trim());<br/>    const FIVE_PERCENT_TIP_COUNTRIES = `<br/>      Ecuador,<br/>      Argentina,<br/>      Austria,<br/>      Albania,<br/>      Turkey,<br/>      India,<br/>      Slovenia,<br/>      Romania,<br/>      Lithuania,<br/>      Russia<br/>    `.split(',')<br/>      .map(c =&gt; c.trim());<br/>    const TEN_PERCENT_TIP_COUNTRIES = `<br/>      Colombia,<br/>      Slovakia,<br/>      Estonia,<br/>      Cuba,<br/>      Uruguay,<br/>      Bulgaria<br/>    `.split(',')<br/>      .map(c =&gt; c.trim());<br/>    const FIFTEEN_PERCENT_TIP_COUNTRIES = `<br/>      Serbia,<br/>      Canada,<br/>      Mexico,<br/>      Chile,<br/>      Poland,<br/>      Ukraine,<br/>      Egypt,<br/>      Armenia<br/>    `.split(',')<br/>      .map(c =&gt; c.trim());</span><span id="df55" class="ky kz iq ko b gy le lb l lc ld">    const TWENTY_PERCENT_TIP_COUNTRIES = ['United States']</span><span id="4944" class="ky kz iq ko b gy le lb l lc ld">    if (TWENTY_PERCENT_TIP_COUNTRIES.includes(country)) {<br/>      return 0.2;<br/>    }</span><span id="9e63" class="ky kz iq ko b gy le lb l lc ld">    if (FIFTEEN_PERCENT_TIP_COUNTRIES.includes(country)) {<br/>      return 0.15;<br/>    }</span><span id="5609" class="ky kz iq ko b gy le lb l lc ld">    if (TEN_PERCENT_TIP_COUNTRIES.includes(country)) {<br/>      return 0.1;<br/>    }</span><span id="0f38" class="ky kz iq ko b gy le lb l lc ld">    if (FIVE_PERCENT_TIP_COUNTRIES.includes(country) || ROUND_UP_COUNTRIES.includes(country)) {<br/>      return 0.05;<br/>    }</span><span id="430f" class="ky kz iq ko b gy le lb l lc ld">    return 0</span><span id="f0bc" class="ky kz iq ko b gy le lb l lc ld">  }<br/>}</span></pre><p id="b734" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加<code class="fe kl km kn ko b">getCountries</code>函数从REST Countries API获取国家列表，添加<code class="fe kl km kn ko b">getTipRates</code>函数获取各个国家的小费率。</p><p id="0d62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe kl km kn ko b">index.html</code>中，我们将代码替换为:</p><pre class="kq kr ks kt gt ku ko kv kw aw kx bi"><span id="bc15" class="ky kz iq ko b gy la lb l lc ld">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;title&gt;World Tip Calculator&lt;/title&gt;<br/>    &lt;base href="/" /&gt;</span><span id="fb6d" class="ky kz iq ko b gy le lb l lc ld">&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>    &lt;link rel="icon" type="image/x-icon" href="favicon.ico" /&gt;<br/>    &lt;link<br/>      href="<a class="ae kp" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css</a>"<br/>      rel="stylesheet"<br/>    /&gt;<br/>    &lt;script<br/>      src="<a class="ae kp" href="https://code.jquery.com/jquery-3.3.1.slim.min.js" rel="noopener ugc nofollow" target="_blank">https://code.jquery.com/jquery-3.3.1.slim.min.js</a>"<br/>      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>    &lt;script<br/>      src="<a class="ae kp" href="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js</a>"<br/>      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>    &lt;script<br/>      src="<a class="ae kp" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" rel="noopener ugc nofollow" target="_blank">https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js</a>"<br/>      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;app-root&gt;&lt;/app-root&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="37dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将引导CSS和JavaScript依赖项添加到我们的应用程序中，并更改标题。</p><p id="e472" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成所有工作后，我们就可以运行<code class="fe kl km kn ko b">ng serve</code>来运行app了。那么我们应该得到:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/b4f4cd0a10d5ce2fe1e07b6bcb74aa5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0ldq63saWSy6oWY4fiiqA.png"/></div></div></figure><p id="1e0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在“金额”和“人数”字段中，除了数字之外，您不能输入任何其他内容。</p></div></div>    
</body>
</html>
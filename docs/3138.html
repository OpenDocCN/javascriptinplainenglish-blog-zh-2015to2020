<html>
<head>
<title>Mark a Coordinate on Mapbox Map in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中的地图框地图上标记坐标</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/mark-a-coordinate-on-mapbox-map-in-react-native-5d21c71ed46e?source=collection_archive---------2-----------------------#2020-09-02">https://javascript.plainenglish.io/mark-a-coordinate-on-mapbox-map-in-react-native-5d21c71ed46e?source=collection_archive---------2-----------------------#2020-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/19171afe513e3f81a6950f4189fa088a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y9B1PzGKGWR5U42F"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">KOBU Agency</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e070" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您正在构建一个围绕地图和位置的应用程序，您可能需要在屏幕上标记特定的位置/坐标。虽然这对于iOS来说很容易，但对于Android来说事情可能会变得有点混乱。</p><p id="2d7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我编写了一个例子，说明如何用自定义标记来标记位置，这样它就可以完美地适用于iOS和Android平台。</p><h1 id="24db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">主屏幕</strong></h1><p id="9ec8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">首先，创建一个主屏幕，在这里你将放置你的<code class="fe me mf mg mh b">MapContainer</code>或任何其他按钮。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://github.com/nhammad" rel="noopener ugc nofollow" target="_blank">https://github.com/nhammad</a></figcaption></figure><h1 id="5912" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">地图容器</h1><p id="6dc9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">接下来，创建另一个组件，这将是您的地图容器。这将包含几个子组件。</p><h2 id="9263" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">MapboxGL。地图视图</h2><p id="12a8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">地图被创建并保存在MapView中。注意<code class="fe me mf mg mh b">Id</code>字段需要是一个字符串。</p><h2 id="6c4f" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">MapboxGL。照相机</h2><p id="c555" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有了相机，你基本上可以放大坐标，并在屏幕上显示地图的放大版本。<code class="fe me mf mg mh b">zoomLevel</code>和<code class="fe me mf mg mh b">animationDuration</code>可以根据需要进行调整。</p><h2 id="4709" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">MapboxGL。MarkerView</h2><p id="43b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">MarkerView</code>是我们放置自定义标记的地方。这在Android上可能会引起问题。为了避免这种情况，请记住以下几点:</p><ul class=""><li id="6584" class="na nb iq kf b kg kh kk kl ko nc ks nd kw ne la nf ng nh ni bi translated">确保您的<code class="fe me mf mg mh b">AnnotationContent</code>被包裹在视图下。</li><li id="7039" class="na nb iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">确保你的<code class="fe me mf mg mh b">MarkerView</code>本身被包裹在一个视图下。</li><li id="1b0b" class="na nb iq kf b kg nj kk nk ko nl ks nm kw nn la nf ng nh ni bi translated">Android的风格通常会有所不同。试着编写并测试一个在两个平台上都合适的代码。</li></ul><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://github.com/nhammad" rel="noopener ugc nofollow" target="_blank">https://github.com/nhammad</a></figcaption></figure><h2 id="704b" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">注释内容</h2><p id="ba49" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这是将显示为标记的内容。即使它是一个单独的组件(例如只是一个图标或者只是文本)，也要确保它被包装在一个<code class="fe me mf mg mh b">&lt;View&gt;</code>中。<code class="fe me mf mg mh b">&lt;Icon&gt;</code>我已经从<code class="fe me mf mg mh b">FontAwesome</code>中使用过了，效果很好，但是你也可以通过添加一个<code class="fe me mf mg mh b">&lt;Image&gt; </code>组件来使用自定义图像(例如:一个svg图像)。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://github.com/nhammad" rel="noopener ugc nofollow" target="_blank">https://github.com/nhammad</a></figcaption></figure><h2 id="ae0a" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">AddressTextBox</h2><p id="1c45" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这是可选的。如果您想在地图上放置一个额外的项目，您可以这样做。注意，根据MapboxGL团队的说法，不可能在<code class="fe me mf mg mh b">&lt;MapView&gt;</code>中渲染额外的<code class="fe me mf mg mh b">&lt;View&gt;</code>。在我的情况下，它在iOS中工作，但在Android中不工作。</p><p id="6b85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，您必须将它放在<code class="fe me mf mg mh b">&lt;MapView&gt;</code>之外，并给它的父容器一个<code class="fe me mf mg mh b">position: ‘absolute’</code>。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://github.com/nhammad" rel="noopener ugc nofollow" target="_blank">https://github.com/nhammad</a></figcaption></figure><p id="dcba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果看起来有点像这样。顶部的文本框来自<code class="fe me mf mg mh b">AddressTextBox</code>，而标记图标和较小的文本框来自<code class="fe me mf mg mh b">AnnotationContent</code></p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/94fe119e33b6eeb653b6c0f2db87c6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*DKhbXuHuyq9ULaYgfzkrVA.png"/></div></figure><h1 id="80ef" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">marker view vs point annotation vs shape source</h1><p id="1a80" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">MpaboxGL团队的Miklós Fazekas表示，在iOS上，PointAnnotation与MarkerView或多或少是一样的。然而，在Android上，它是用ShapeSource + SybolLayer模拟的。在Android中，子React本地视图被捕获到静态图像中，然后显示出来。因此，举例来说，你不能在Android上放置一个按钮作为PointAnnotation的子节点。</p><p id="a7f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">PointAnnotations的一个优点是它们也支持标注。一个<code class="fe me mf mg mh b">&lt;MapboxGL.Callout&gt;</code>组件将允许你点击一个注释，并看到一个文本框弹出。</p><h1 id="d9a3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何找到一个位置的坐标</h1><p id="d54d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果出于某种原因，你不能在这里使用Mapbox，你也可以使用谷歌地图。只需在谷歌地图上打开一个位置，右键单击并选择“这里有什么”。你会看到那个位置的准确坐标。您可以复制坐标并在代码中使用它们。</p><p id="513a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，坐标需要以数组的形式出现。例如:</p><p id="aad8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">centerCoordinate={[8.5574, 50.7891]}</code></p><p id="4726" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这有所帮助！</p><h2 id="2fb4" class="mo lc iq bd ld mp mq dn lh mr ms dp ll ko mt mu lp ks mv mw lt kw mx my lx mz bi translated">简单英语的JavaScript</h2><p id="5226" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有三份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T3【plain English . ioT5】找到一切的链接！</a></p></div></div>    
</body>
</html>
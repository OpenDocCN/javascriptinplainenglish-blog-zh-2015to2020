<html>
<head>
<title>A new approach to Front-end Authorization for Single Page Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种新的单页面应用程序前端授权方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/front-end-authorization-model-for-single-page-applications-eb3dc1fd228b?source=collection_archive---------5-----------------------#2020-07-05">https://javascript.plainenglish.io/front-end-authorization-model-for-single-page-applications-eb3dc1fd228b?source=collection_archive---------5-----------------------#2020-07-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c573" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><strong class="ak"> <em class="kc">自下而上</em> </strong>组件基础权限</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/ae3ac715cb3e83a1b22598150f5c7858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tOSBxcNwK0TzNzYB"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@jsalvino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John Salvino</a> on <a class="ae kt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="386a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">在我作为软件工程师职业生涯的早期，当我试图构建一个基于Angular的单页面应用程序时，我开始寻找各种方法来为单页面应用程序的前端执行授权。我发现大部分工程师都在做基于后端API的前端授权。</p><p id="d35a" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">例如，如果一个角色或用户可以访问<strong class="kw io"><em class="lq">can _ edit _ users</em></strong>Api，那么只有在应用程序前端的网格上才能启用更新操作。这种方法的一个很大的缺点是，不能对不ping后端Api的前端操作进行授权。在本文中，我将讨论添加前端授权的另一种方式，我称之为<strong class="kw io"> <em class="lq">自底向上</em> </strong>基于组件的权限模型。</p></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="fb27" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">假设我们在单页面应用程序中使用了不同的前端组件。每个组件都有一组单独的操作，角色或用户可以执行这些操作。因为每个组件都有自己的一组操作，所以我们应该为该组件分配单独的权限集。例如，假设我们有一个网格组件。在这个网格中，用户可以列出、编辑、删除、分页和搜索一些数据。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/cda0bcc931776cfd753981e494048d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*5jOorlhBSg8WaXZVxARkiQ.png"/></div></figure><p id="6e30" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在，基于上面列出的操作，我们可以创建一个权限集，这将有助于这些操作的授权。</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="ab5c" class="me mf in ma b gy mg mh l mi mj"><strong class="ma io">Permissions Set:<br/></strong>can_list<br/>can_edit<br/>can_delete<br/>can_search<br/>can_paginate</span></pre><p id="d875" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在，因为它们是<strong class="kw io"> <em class="lq"> Grid </em> </strong>组件的一部分，Grid应该被添加到这些权限的每一个之前，这样它们就不会与其他组件的权限集重叠。</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="0887" class="me mf in ma b gy mg mh l mi mj"><strong class="ma io">Complete Grid Permissions Set:<br/></strong>Grid.can_list<br/>Grid.can_edit<br/>Grid.can_delete<br/>Grid.can_search<br/>Grid.can_paginate</span></pre><p id="f084" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">类似地，假设我们有另一个组件映射，我们将在我们的单页面应用程序中使用它。该组件将有自己的一组操作，因此也有自己的一组权限。正如我们在下图中看到的，用户可以放大，缩小，在地图上列出标记。因此，这个组件权限模型将</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="d86a" class="me mf in ma b gy mg mh l mi mj"><strong class="ma io">Complete Map permission Set:<br/></strong>Map.can_list_markers<br/>Map.can_zoom_in<br/>Map.can_zoom_out</span></pre><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/38627377493062b2ff63acf9d25dc494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*kA79_bkUfgDSlm6uH95VmA.png"/></div></figure><p id="329e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在假设我们正在开发的单页面应用程序有不同的页面。其中一些页面将使用上述两个组件，其他页面可以使用其中任何一个，而其他一些页面将使用其他组件，这些组件将有自己的权限集。</p><p id="8c65" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">让我们假设在我们的单页应用程序的许多页面中，有两个是团队管理和个人资料页面。团队管理页面呈现网格和地图组件，向用户显示所有雇员的列表以及他们在地图上的家庭地址，并带有标记。类似地，Profile页面呈现地图组件，向每个用户显示他们当前的邮政地址。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi ml"><img src="../Images/445a898b6969815d7577b038da546058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VU8g-AIRR4xFO09Rq8iHJQ.png"/></div></div></figure><p id="509d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">正如您在上面的图表中所看到的，每个组件在Team Management和Profile页面中都有自己的权限集。因为这两个页面都是父组件，所以它们将在权限集中添加它们的名称，以便这些权限不会与其他页面权限集重叠。例如，“团队管理”页面中“地图”组件的权限已变为</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="573c" class="me mf in ma b gy mg mh l mi mj"><em class="lq">TeamManagement.Map.can_zoom_in<br/>TeamManagement.Map.can_zoom_out<br/>TeamManagement.Map.can_list_markers </em></span></pre><p id="957e" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">但对于配置文件页面，权限集已成为</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="784a" class="me mf in ma b gy mg mh l mi mj"><em class="lq">Profile..Map.can_zoom_in<br/>Profile.Map.can_zoom_out<br/>Profile.Map.can_list_markers</em></span></pre><p id="c8a1" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">这是两组非常不同的权限。同样，每个页面都有自己的一组权限，这些权限可以被超级管理员分配给不同的角色/用户。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi mm"><img src="../Images/a26b7c634c60efef3f934866eeb2c400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYNvRGi9hwL_wcApzbrhAA.jpeg"/></div></div></figure><p id="d12f" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">通过这种方法，超级管理员现在可以控制分配权限给任何页面或组件中的每个动作，这可以给他巨大的力量。</p><p id="ee27" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">其次，这种方法具有很强的可扩展性。添加更多的页面或组件将自动增加权限集。同样，从单页应用程序中删除页面会减少权限集。</p><p id="01bc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">但是这种方法有一个很大的缺点。想象一个有这么多页面的应用程序，每个页面包含几十个子组件和动作。这可能会使权限集非常大，并使超级管理员无法将这些权限分配给每个角色。</p><p id="9c5d" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">然而，我们可以在应用程序的每一级引入另一种类型的权限(can_do_all_actions ),即组件级、页面级和应用程序级。在某个级别引入这种类型的权限将允许用户绕过该级别上的所有其他权限。</p><p id="14dc" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">例如，在地图组件的情况下，我们的权限集现在将变为。</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="103f" class="me mf in ma b gy mg mh l mi mj">Map.can_zoom_in<br/>Map.can_zoom_out<br/>Map.can_show_markers<br/>Map.can_do_all_actions</span></pre><p id="d1de" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">同样，配置文件页面的权限集将变为</p><pre class="ke kf kg kh gt lz ma mb mc aw md bi"><span id="5e5f" class="me mf in ma b gy mg mh l mi mj">Profile.Map.can_zoom_in<br/>Profile.Map.can_zoom_out<br/>Profile.Map.can_show_markers<br/>Profile.Map.can_do_all_actions<br/>Profile.can_do_all_actions</span></pre><p id="95ac" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">现在，当我们的超级管理员将分配一个用户<em class="lq">档案。Map.can_do_all_actions </em>权限，用户可以在“配置文件”页面上的地图上执行所有操作。同样，拥有<em class="lq">Profile . can _ do _ all _ actions</em>权限将允许用户在Profile页面上执行任何类型的操作，无论该操作是在地图上还是在任何其他组件上。</p><p id="7ef8" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">当一个用户登录时，我们的单页应用程序将调用api，并恢复超级管理员分配给该特定角色或用户的所有权限。我们的应用程序现在应该解析这个权限集，并在相应的页面和组件上使用它。</p></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="dd22" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated">如果您喜欢本教程，请不要忘记向我们提供反馈。谢谢你的阅读！</p><p id="f371" class="pw-post-body-paragraph ku kv in kw b kx ky jo kz la lb jr lc ld le lf lg lh li lj lk ll lm ln lo lp ig bi translated"><a class="ae kt" href="https://devsaxe.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lq">德弗萨克斯</em> </a> <em class="lq">是一家总部位于巴基斯坦拉合尔的咨询公司。我们为网络和移动应用、自动化测试、物联网解决方案和企业软件开发提供咨询服务。</em></p></div></div>    
</body>
</html>
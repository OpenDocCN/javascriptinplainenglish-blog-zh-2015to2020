<html>
<head>
<title>Functional JavaScript — Partial Application and Composition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式JavaScript —部分应用和组合</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/functional-javascript-partial-application-and-composition-d4accd96d8b6?source=collection_archive---------8-----------------------#2020-11-19">https://javascript.plainenglish.io/functional-javascript-partial-application-and-composition-d4accd96d8b6?source=collection_archive---------8-----------------------#2020-11-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0ba1a18d58cf9ec09a6433777154a4a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_oxVDHV4BqySaKL4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@adigold1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adi Goldstein</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c54f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript部分是一种函数式语言。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要学习JavaScript，我们必须学习JavaScript的功能部分。</p><p id="6eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用JavaScript来部分应用和组合函数。</p><h1 id="509f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">部分应用</h1><p id="35c7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">部分应用是指我们只应用函数中预期的一些参数。</p><p id="c37c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有一个带有3个参数的函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7255" class="mn lc iq mj b gy mo mp l mq mr">const add = (x, y, z) =&gt; x + y + z;</span></pre><p id="149e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以创建一个函数，该函数的<code class="fe ms mt mu mj b">add</code>函数通过编写以下内容来部分应用参数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8c2b" class="mn lc iq mj b gy mo mp l mq mr">const add1 = (y, z) =&gt; add(1, y, z);</span></pre><p id="a303" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4742" class="mn lc iq mj b gy mo mp l mq mr">const sum = add1(2, 3);</span></pre><p id="2b65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到6。</p><p id="28a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">概括起来，我们可以这样写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c97b" class="mn lc iq mj b gy mo mp l mq mr">const partial = function(fn, ...partialArgs) {<br/>  let args = partialArgs;<br/>  return function(...fullArguments) {<br/>    return fn(...[...partialArgs, ...fullArguments]);<br/>  };<br/>};</span></pre><p id="988e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过将<code class="fe ms mt mu mj b">partialArgs</code>和<code class="fe ms mt mu mj b">fullArguments</code>作为参数传入<code class="fe ms mt mu mj b">fn</code>函数来返回一个函数，从而创建自己的<code class="fe ms mt mu mj b">partial</code>函数。</p><p id="bb14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="002a" class="mn lc iq mj b gy mo mp l mq mr">const sum = partial(add, 1)(2, 3);</span></pre><p id="fd4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe ms mt mu mj b">sum</code>又是6。</p><h1 id="664b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Currying与部分应用</h1><p id="a56d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">每当我们需要将接受多个参数的函数转换为接受一个参数的多个函数时，Currying就很有用。</p><p id="1a71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要将一个接受多个参数的函数转换成一个只接受一个参数的回调函数<code class="fe ms mt mu mj b">map</code>的情况就是一个例子。</p><p id="48d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们需要将一个或多个参数应用于一个函数并返回一个应用了参数的函数时，函数的部分应用非常有用。</p><h1 id="ab9c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">作文</h1><p id="46a0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">组合是我们链接多个函数调用来返回我们想要的结果。</p><p id="4053" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有很多做一件事的函数，我们把它们组合成一个，这样就能得到我们想要的结果。</p><p id="a19b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写以下代码来组合数组<code class="fe ms mt mu mj b">map</code>和<code class="fe ms mt mu mj b">filter</code>方法:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7723" class="mn lc iq mj b gy mo mp l mq mr">const arr = [1, 2, 3]<br/>  .filter(a =&gt; a % 2 === 1)<br/>  .map(a =&gt; a ** 2);</span></pre><p id="11f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe ms mt mu mj b">arr</code>就是<code class="fe ms mt mu mj b">[1, 9]</code>。</p><p id="65f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">filter</code>来返回一个只有奇数的数组。</p><p id="73e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">map</code>对每个奇数求平方。</p><h1 id="615f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">撰写功能</h1><p id="abd9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将组合函数概括为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6368" class="mn lc iq mj b gy mo mp l mq mr">const compose = (fn1, fn2) =&gt;<br/>  (c) =&gt; fn1(fn2(c))</span></pre><p id="0b92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的函数将两个函数作为参数，然后我们返回一个函数，一个接一个地调用。</p><p id="bf7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先调用<code class="fe ms mt mu mj b">fn2</code>，然后对<code class="fe ms mt mu mj b">fn2</code>返回的结果调用<code class="fe ms mt mu mj b">fn1</code>。</p><p id="6fff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7ec0" class="mn lc iq mj b gy mo mp l mq mr">let number = compose(Math.round, parseFloat)('10.1')</span></pre><p id="8f19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">Math.round</code>和<code class="fe ms mt mu mj b">parseFloat</code>调用<code class="fe ms mt mu mj b">compose</code>。</p><p id="f6ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先用<code class="fe ms mt mu mj b">'10.1'</code>调用<code class="fe ms mt mu mj b">parseFloat</code>，然后对返回的结果调用<code class="fe ms mt mu mj b">Math.round</code>。</p><p id="4a02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe ms mt mu mj b">number</code>就是10。</p><h1 id="a4af" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组合许多功能</h1><p id="f9a2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用数组<code class="fe ms mt mu mj b">reduce</code>方法创建一个通用版本的<code class="fe ms mt mu mj b">compose</code>函数。</p><p id="96b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4bcd" class="mn lc iq mj b gy mo mp l mq mr">const compose = (...fns) =&gt;<br/>  (value) =&gt;<br/>  fns.reverse().reduce((acc, fn) =&gt; fn(acc), value)</span></pre><p id="53fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个函数，它将函数数组<code class="fe ms mt mu mj b">fns</code>作为参数。</p><p id="d4db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们返回一个函数，它取一个值作为初始值，并对它调用<code class="fe ms mt mu mj b">reduce</code>，用返回的结果调用数组中的每个函数。</p><p id="2796" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">acc</code>是目前调用函数返回的结果，<code class="fe ms mt mu mj b">fn</code>是函数。</p><p id="0a89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过书写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6617" class="mn lc iq mj b gy mo mp l mq mr">let splitIntoSpaces = (str) =&gt; str.split(" ");<br/>let count = (array) =&gt; array.length;<br/>const countWords = compose(count, splitIntoSpaces)('foo bar baz');</span></pre><p id="3d71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">splitIntoSpaces</code>函数按空格分割字符串。</p><p id="ed55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且我们用<code class="fe ms mt mu mj b">count</code>函数得到分裂字符串数组的长度。</p><p id="ceb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe ms mt mu mj b">compose</code>把它们组合在一起。</p><p id="df89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们用一个字符串调用返回的函数，我们就会得到用空格分隔的数字单词。</p><p id="ed71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe ms mt mu mj b">countWords</code>是3。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/929618820aa52d0c6b933f211e8759aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k9zOR2tdMVsoNvE7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@finnsn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Finn Gerkens</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="94db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bdba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用JavaScript部分应用和组合函数。</p><p id="511b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">部分应用允许我们调用应用了一些参数的函数。</p><p id="eb7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组合让我们可以在一个链中调用多个函数。</p><p id="06c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Brushing up on React: Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">复习React:测试</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/brushing-up-on-react-testing-bd34dec4953c?source=collection_archive---------10-----------------------#2020-01-02">https://javascript.plainenglish.io/brushing-up-on-react-testing-bd34dec4953c?source=collection_archive---------10-----------------------#2020-01-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5938" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">最常见的React测试模式的快速示例。</h2></div><p id="c387" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">正在进行的系列的一部分</em> <a class="ae kz" href="https://medium.com/@mdazmainamin/brushing-up-on-react-basics-18ad67528b85" rel="noopener"> <em class="ky">复习React </em> </a> <em class="ky"> … </em></p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi la"><img src="../Images/07c3e63c2c52904b03f3a8b57bb235c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h5_udN2XTS66FCYl"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7cc4" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">介绍</h1><p id="c949" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">我假设您已经有了一个安装了所有工具的测试环境:karma + webpack和enzyme。</p><p id="a696" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果没有，这些是很好的资源:</p><ul class=""><li id="84b7" class="mn mo in ke b kf kg ki kj kl mp kp mq kt mr kx ms mt mu mv bi translated"><a class="ae kz" href="https://www.robinwieruch.de/react-testing-jest-enzyme" rel="noopener ugc nofollow" target="_blank">如何测试与Jest &amp;酶的反应</a></li><li id="3fef" class="mn mo in ke b kf mw ki mx kl my kp mz kt na kx ms mt mu mv bi translated"><a class="ae kz" href="https://airbnb.io/enzyme/docs/guides/karma.html" rel="noopener ugc nofollow" target="_blank">使用带有因果报应的酶</a></li></ul><h1 id="ef6b" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">基本测试(测试状态和道具)</h1><p id="23dd" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">我们想要测试react组件指南<a class="ae kz" href="https://medium.com/@mdazmainamin/brushing-up-on-react-basics-18ad67528b85" rel="noopener">中定义的按钮组件。</a></p><pre class="lb lc ld le gt nb nc nd ne aw nf bi"><span id="1ed6" class="ng lr in nc b gy nh ni l nj nk">import React from 'react';<br/>import { shallow } from 'enzyme';<br/>import Button from './Button';<br/><br/><br/>function render(props) {<br/>	return shallow();<br/>}<br/><br/>describe("Button component tests", () =&gt; {<br/>    it("renders the prop correctly", () =&gt; {<br/>        props = {<br/>            buttonName: 'mockButton'<br/>        };<br/><br/>        const renderedComp = render(props);<br/><br/>        expect(renderedComp.props().buttonName).toEqual(props.buttonName);<br/>    });<br/><br/>    it("has correct initial state", () =&gt; {<br/>        const renderedComp = render({});<br/>        expect(renderedComp.state().numOfClicks).toEqual(0);<br/>    });<br/>});</span></pre><h1 id="49f9" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">测试用户交互</h1><pre class="lb lc ld le gt nb nc nd ne aw nf bi"><span id="9afe" class="ng lr in nc b gy nh ni l nj nk">it("increase numOfClick by 1 when button is clicked", () =&gt; {<br/>    const renderedComp = render({});<br/>    expect(renderedComp.state().numOfClicks).toEqual(0);<br/><br/>    const button = renderedComp.find('button');<br/>    button.simulate('click');<br/>    <br/>    expect(renderedComp.state().numOfClicks).toEqual(1);    <br/>});</span></pre><p id="51b4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">总是尽可能模拟用户交互，比如模拟点击。</p><h1 id="3150" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">测试类方法是否被调用</h1><pre class="lb lc ld le gt nb nc nd ne aw nf bi"><span id="64d5" class="ng lr in nc b gy nh ni l nj nk">it("increase numOfClick by 1 when button is clicked", () =&gt; {<br/>    const functionToBeCalled = spyOn(Button.prototype, 'handleClick')<br/><br/>    const renderedComp = render({});<br/>    const button = renderedComp.find('button');<br/>    button.simulate('click');<br/>    <br/>    expect(functionToBeCalled).toHaveBeenCalled();    <br/>});</span></pre><h1 id="12a8" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">要记住的事情</h1><ul class=""><li id="00d3" class="mn mo in ke b kf mi ki mj kl nl kp nm kt nn kx ms mt mu mv bi translated">您可以嵌套<code class="fe no np nq nc b">describe</code>块。你的描述块应该像一个测试套件。</li><li id="8b61" class="mn mo in ke b kf mw ki mx kl my kp mz kt na kx ms mt mu mv bi translated">每个<code class="fe no np nq nc b">it</code>模块应该测试一项功能。</li><li id="85da" class="mn mo in ke b kf mw ki mx kl my kp mz kt na kx ms mt mu mv bi translated">使用<code class="fe no np nq nc b">beforeAll()</code>和<code class="fe no np nq nc b">beforeEach()</code>。</li><li id="3cc3" class="mn mo in ke b kf mw ki mx kl my kp mz kt na kx ms mt mu mv bi translated"><code class="fe no np nq nc b">shallow</code>渲染可以完成90%的任务。但是，有时候你需要使用<code class="fe no np nq nc b">mount</code>在测试中完全安装你的react组件。要了解更多关于他们的差异，请访问这里。</li></ul></div></div>    
</body>
</html>
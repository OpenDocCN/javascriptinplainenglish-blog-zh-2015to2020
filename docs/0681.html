<html>
<head>
<title>How to securely deploy your Node.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何安全地部署Node.js应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deploy-node-js-app-securely-f508b1f27d25?source=collection_archive---------7-----------------------#2019-11-25">https://javascript.plainenglish.io/deploy-node-js-app-securely-f508b1f27d25?source=collection_archive---------7-----------------------#2019-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq"><div class="bz fp l di"><div class="jr js l"/></div></figure><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi jt"><img src="../Images/6d0394ffa51b848febb0a72682a2f3f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1bQK9LkIsY_Th1GwRZRiA.png"/></div></div></figure><p id="a40c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">您应该使用AWS或droplet →这些是标准配置→部署是我们应该能够做好的另一件事。(因为这实际上是我们赚钱的方式)。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/723513ec1ca1f8a19a37c678eb309e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*ZUfgPH-v8icShJvgQ_jsJw.png"/></div></figure><p id="4f04" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">操作系统→以及定价点→这些都是部署的好选择。</p><p id="6dc9" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">为了创建SSH →我们使用Putty →这也是解决这些系统的标准方法。(保存公钥和私钥→标准)</p><p id="a9a8" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">服务器设置很容易→甚至监控也很容易。(这个好)。(备份和快照也是可能的)。</p><p id="3f36" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在为Ubuntu设置用户时，我们也将使用Nginx作为服务器。(复制SSH可能不是最安全的想法)。</p><p id="b828" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">用NPM和包安装节点JS。(他用的是样本GitHub)。</p><p id="a61a" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这里完成了大量的SSH配置→并且不确定是否需要所有这些→以及用于文件传输的WinSCP。(非常有趣的开发管道设置)。</p><p id="bf2a" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">也运行在80端口→恐怖的想法。(但是pm2是个很好的用途)。</p><p id="2026" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">他使用ENOM作为域名。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi ld"><img src="../Images/9e15db52b15cfa73a9849535f81aa290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Widx5imuWpO9P1i5VVK1Zg.png"/></div></div></figure><p id="def8" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">建立记录很容易→其他网站也允许这样做。</p><p id="de34" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">使用80端口是个糟糕的主意。</p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><figure class="ju jv jw jx gt jq"><div class="bz fp l di"><div class="ll js l"/></div></figure><p id="5f58" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">他打算用OpenSSL和其他东西建立一个更像服务器的服务器。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lm"><img src="../Images/6d888e428d87d819ad0d51db973c3626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbyOgibtdqGF9l4CstQ0kw.png"/></div></div></figure><p id="a7f5" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">另一个家伙使用数字海洋公关→这是一个很好的服务整体。</p><p id="fad2" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">安全性→我们将创建一个用户→并删除公共根目标→这是一个好方法→非常安全的方法。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/d983b5e1e51be421f3a57a42ef065162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*TE8PZnwn44UFfhhfREsxWg.png"/></div></figure><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/e92fbdbb2e6c83b02a4e4bf437a70fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*HLG7TpUaIdBPGRVE6_3lyg.png"/></div></figure><p id="b050" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以现在我们有了我们的超级用户→这是一个非常聪明的举动。</p><p id="922e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">哇，一种非常安全的做事方式→正确设置SSH只允许允许的用户进入。(禁用密码登录→仅允许SSH登录→智能移动)。</p><p id="7a0c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们不希望人们进行暴力攻击。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/b8caa45b82a62cd221c1d6149b8f56af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*ld7OMCYSJTGH6rT6Vkc1JQ.png"/></div></figure><p id="6ca7" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">root登录没了→ ufw →这是调整防火墙→使用这种防火墙可以阻止一些基本的攻击。</p><p id="cc49" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">超级重要→安全。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/d567b87c4d6ac4ff98f444fe9007f6bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*w8gvK0wmnF8K3nrM5QrPTA.png"/></div></figure><p id="3e86" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">并且我们正在正确地安装Node JS →这是通过使用CURL选项→更合适的安装Node JS的方式。</p><p id="3a84" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">他用git进行→实际开发app。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/8f1afcc2205cb10703a269a1757accbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*S4XMLBh4RwI8OUbxisssWg.png"/></div></figure><p id="0f5b" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们已经运行了应用程序→我们将为流程管理器使用PM2→现在我们需要为服务器和OpenSSL安装Nginx。</p><p id="ccbb" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">PM2 →在后台运行一切。(甚至可以配置为在系统启动时启动)。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi ls"><img src="../Images/3241abe20120902c63215dffc385cb29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7iVn6Yo529GGIpyje_zDhw.png"/></div></div></figure><p id="922c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">很有意思→他在用GIT进行加密→这可能是为了避免使用域名。</p><p id="26b9" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">证书→做起来其实很烦→但是这个操作可以很轻松的完成→为了安全连接。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lt"><img src="../Images/f128b2d4e8d19b318499b5cdc1c6d9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFUBS1i__mYIHtvrfdM8cQ.png"/></div></div></figure><p id="9722" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">但是他有域名。</p><p id="48a7" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这是我们在2016年的行事方式→但了解这一点也是一个好主意。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lu"><img src="../Images/f445b5fa3a07627307aeb9ebc998160f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBTM5dKYBRbTeZDhG5-LLg.png"/></div></div></figure><p id="d970" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">确保SSL证书每年更新→以便我们是最新的。(代理→ Nginx)</p><p id="c525" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">将流量重定向到节点js应用程序→我们将确保连接安全。(我们正在提高我们网站的安全性)</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lv"><img src="../Images/db40a9e9f7228700ec1c2a761e8d8335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0doRYuQsAeABcdkBv_7wPQ.png"/></div></div></figure><p id="ec75" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">相当复杂的过程→但我们正在让事情变得更安全。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lw"><img src="../Images/11240a6a0358cd2ac955a365084d7baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HCEIr3puz9143-wYdHhc0w.png"/></div></div></figure><p id="04d3" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">一般过程很容易使用→现在有一个python程序为我们做这些。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lx"><img src="../Images/8ad363ad1394f65a1086416a4b848f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8NSJ4hiHIlb4ypPUQGYew.png"/></div></div></figure><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi ly"><img src="../Images/d7764183699726201dbc198a427db771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nHVMGRHjRILlLnYQtKTObw.png"/></div></div></figure><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi lz"><img src="../Images/155077eed3e34fea4b4f0a2ae9e6df81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vg62gcdQZ1Yyj8d04wKttg.png"/></div></div></figure></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><div class="ju jv jw jx gt ma"><a href="https://blog.cloudboost.io/deploying-a-node-js-express-application-on-digital-ocean-part-2-573f0b8b8ea4" rel="noopener  ugc nofollow" target="_blank"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd ir gy z fp mf fr fs mg fu fw ip bi translated">在数字海洋上部署Node.js/Express应用程序(第二部分)</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">介绍</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">blog.cloudboost.io</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo kc ma"/></div></div></a></div><p id="2599" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这是另一个关于部署的帖子→一般做法是一样的。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi mp"><img src="../Images/dc78e4c5c11047dd69f7bb03922f612c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vUFlW1jswCsWWGWGlILCdA.png"/></div></div></figure><p id="74d0" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">强烈建议在生产服务器期间使用PM2，因为它会自动管理进程，并在退出或出错时重新启动。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi mq"><img src="../Images/85aff0572244b3f51e7d7f02b1f65859.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXVoGnABWNEfzJB-wv9Z5Q.png"/></div></div></figure><p id="580c" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">负载平衡和更多→以及SSL。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi mr"><img src="../Images/79bc90502ed1f2283895220f2a9d30af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iKCSWi1cK6bLpFWhGw6psw.png"/></div></div></figure><p id="0f7e" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">这家伙基本上是从别的网站复制粘贴的→不过certbot很棒！</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi ms"><img src="../Images/fed26cc917d49fb224ec86e4ff959cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xlveoa37yO0UMFY3kvXqyw.png"/></div></div></figure><p id="13aa" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">该计划还附带自动续订功能</p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><div class="ju jv jw jx gt ma"><a href="https://medium.com/platformer-blog/node-js-concurrency-with-async-await-and-promises-b4c4ae8f4510" rel="noopener follow" target="_blank"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd ir gy z fp mf fr fs mg fu fw ip bi translated">节点。JS并发与Async/Await和Promises！</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">你必须熬过“回调地狱”才能获得“并行的幸福”吗？—嗯，不再是了😉</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">medium.com</p></div></div><div class="mj l"><div class="mt l ml mm mn mj mo kc ma"/></div></div></a></div><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/77be817442c1ca9d919d864ff29e0b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/0*hyYIf-auETbffn10.jpeg"/></div></figure><p id="a621" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">哪个更好？两者都有自己的用例，但是节点js使用并发。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi mv"><img src="../Images/bd0c7a68bdf00d693f643e0d3d802fb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJOMX7Zs11RHe0fknK2Aug.png"/></div></div></figure><p id="f882" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们将读取文件→同时不阻塞主线程→这很好→因为我们希望用户体验一些东西。</p><p id="9b85" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">回调地狱真的是一个东西→因为如果我们不能管理这些处理器→我们就不知道会发生什么。</p><p id="35f8" class="pw-post-body-paragraph ke kf iq kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">链接承诺→是一种更好的管理代码的方式→这要好得多。</p><figure class="ju jv jw jx gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="gh gi mw"><img src="../Images/0dd9958cf5a3322147b9e556503ce5d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuhSxzxQigXExJvuqkPSCA.png"/></div></div></figure></div></div>    
</body>
</html>
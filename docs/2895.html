<html>
<head>
<title>JavaScript Best Practices — Sugar and Placement</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践— Sugar和Placement</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-sugar-and-placement-278f32242275?source=collection_archive---------5-----------------------#2020-08-02">https://javascript.plainenglish.io/javascript-best-practices-sugar-and-placement-278f32242275?source=collection_archive---------5-----------------------#2020-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3ac5890271e4603431f1b4a5d1a63077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2-GzIYZlf9OfNsf9"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@toddquackenbush?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Todd Quackenbush</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="62eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="4729" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">句法糖</h1><p id="87d1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript最近的许多变化都是对现有语法的修饰。</p><p id="d73c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了它们，我们的生活会更轻松。</p><p id="50df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在现有代码中使用几个插入式替换。</p><h1 id="91b1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">let and const</code></h1><p id="6d35" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">let</code>和<code class="fe me mf mg mh b">const</code>来声明块范围的变量。</p><p id="e6e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们只有在定义后才可用。</p><p id="77e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1461" class="mq lc iq mh b gy mr ms l mt mu">let x = 1;<br/>const y = 2;</span></pre><p id="7439" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">宣布它们。</p><p id="fd48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们只有在声明之后才使用它们。</p><p id="9200" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">const</code>变量不能被重新赋值给一个新值，但是如果它是一个对象，我们可以改变它里面的东西。</p><h1 id="88fb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">限制函数的范围</h1><p id="0f04" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用箭头函数来限制函数的范围。</p><p id="c822" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f5c7" class="mq lc iq mh b gy mr ms l mt mu">function foo(){}</span></pre><p id="1124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它甚至在定义之前就可以在任何地方被调用。</p><p id="08f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1660" class="mq lc iq mh b gy mr ms l mt mu">const foo = () =&gt; {}</span></pre><p id="e0a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不需要函数绑定到自己的<code class="fe me mf mg mh b">this</code>，那么我们肯定应该使用箭头函数。</p><p id="d7e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们也不能在被定义之前被调用。</p><h1 id="17cf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">班级</h1><p id="b59e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">传统的构造函数已经被类所取代。</p><p id="cdc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以与其写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="50cd" class="mq lc iq mh b gy mr ms l mt mu">function Animal(name){<br/>  this.name = name;<br/>}</span><span id="087f" class="mq lc iq mh b gy mv ms l mt mu">Animal.prototype.speak = function (){<br/>  console.log(this.name);<br/>}</span></pre><p id="dbb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e39d" class="mq lc iq mh b gy mr ms l mt mu">class Animal {<br/>  constructor(name) {<br/>    this.name = name;<br/>  }<br/>  speak() {<br/>    console.log(this.name);<br/>  }<br/>};</span></pre><p id="eaf4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一切都在一个地方，它类似于实际的类，即使它只是语法上的糖。</p><h1 id="febf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">命名变量</h1><p id="e13b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该用我们能理解的方式命名变量。</p><p id="6c4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5547" class="mq lc iq mh b gy mr ms l mt mu">let d ;<br/>let elapsed;</span></pre><p id="b5ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b58f" class="mq lc iq mh b gy mr ms l mt mu">let daysSinceUpdate</span></pre><p id="17e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们还应该易于发音，这样我们在处理它们时就不会有困难。</p><p id="9db0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e768" class="mq lc iq mh b gy mr ms l mt mu">let firstName, lastName</span></pre><h1 id="da42" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">书写功能</h1><p id="2ac6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该创建只做一件事的函数。</p><p id="0e56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们应该写这样的函数:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e5b5" class="mq lc iq mh b gy mr ms l mt mu">const add = (a, b) =&gt; a + b;</span></pre><p id="edab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只会增加。</p><h1 id="64f0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用长的描述性名称</h1><p id="c4ae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们上面的名字是描述性的。</p><p id="c6cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们交流他们的意图。</p><p id="6286" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9ed5" class="mq lc iq mh b gy mr ms l mt mu">function inv(user) {<br/>  //...<br/>}</span></pre><p id="c609" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ca3" class="mq lc iq mh b gy mr ms l mt mu">function inviteUser(user) {<br/>  //...<br/>}</span></pre><h1 id="c5ea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">避免长参数列表</h1><p id="d159" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该在代码中避免长的参数列表。</p><p id="c6d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们需要很多参数，我们应该把它们放在一个对象中。</p><p id="d6c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的争论越少，我们就越容易处理。</p><p id="8a2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3580" class="mq lc iq mh b gy mr ms l mt mu">function getRegisteredUsers(fields, include, fromDate, toDate) { <br/>  //...<br/>}</span></pre><p id="8733" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0b45" class="mq lc iq mh b gy mr ms l mt mu">function getRegisteredUsers({ fields, include, fromDate, toDate }) { <br/>  //...<br/>}</span></pre><p id="edf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个对象参数，而不是多个参数。</p><p id="f95c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们仍然有它们的名字，但是我们可以以任何顺序检索它们。</p><h1 id="d0ac" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">减少副作用</h1><p id="e0f5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在代码中有不必要的副作用。</p><p id="42a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a3e" class="mq lc iq mh b gy mr ms l mt mu">function addItemToCart (item, quantity = 1) {<br/>  cart.set(item.id, quantity)<br/>  return cart<br/>}</span></pre><p id="be64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0b20" class="mq lc iq mh b gy mr ms l mt mu">function addItemToCart(cart, item, quantity = 1) {<br/>  const cartCopy = { ...cart };<br/>  cartCopy.set(item.id, quantity)<br/>  return cartCopy;<br/>}</span></pre><p id="6e3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们没有访问函数之外的<code class="fe me mf mg mh b">cart</code>，而是复制了一个副本，然后按照我们想要的方式操作它并返回副本。</p><h1 id="e0ce" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">根据递减规则组织文件中的函数</h1><p id="8110" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">高层次的功能应该在上面，低层次的功能应该在下面。</p><p id="2232" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，它们的阅读顺序是合乎逻辑的。</p><p id="7277" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cfc4" class="mq lc iq mh b gy mr ms l mt mu">function getFullName(user) {<br/>  return `${user.firstName} ${user.lastName}`<br/>}</span><span id="fbf3" class="mq lc iq mh b gy mv ms l mt mu">function renderEmail(user) {<br/>  // ...<br/>  const fullName = getFullName(user)<br/>  return `Dear ${fullName}, ...`<br/>}</span></pre><p id="ae6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ecfc" class="mq lc iq mh b gy mr ms l mt mu">function renderEmail(user) {<br/>  // ...<br/>  const fullName = getFullName(user)<br/>  return `Dear ${fullName}, ...`<br/>}</span><span id="6a9a" class="mq lc iq mh b gy mv ms l mt mu">function getFullName(user) {<br/>  return `${user.firstName} ${user.lastName}`<br/>}</span></pre><p id="90c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getFullName</code>是<code class="fe me mf mg mh b">renderEmail</code>的助手，所以应该在它下面。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/c5d243a40abeb62e636dfdd2e99b1b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5LDGramcpoG_hSGg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jeremybishop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jeremy Bishop</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6f16" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="63d4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用一些句法糖来使我们的生活更容易。</p><p id="18db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该更仔细地放置我们的代码，以便以后更容易地使用它。</p><h2 id="fa35" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="fce6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Testing Async Redux Actions with Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Jestæµ‹è¯•å¼‚æ­¥Reduxæ“ä½œ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/testing-async-redux-actions-with-jest-3bde5dd88607?source=collection_archive---------2-----------------------#2019-08-02">https://javascript.plainenglish.io/testing-async-redux-actions-with-jest-3bde5dd88607?source=collection_archive---------2-----------------------#2019-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b2dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¤§å®¶å¥½ï¼ï¼ï¼æˆ‘æƒ³å†™è¿™ä¸ªæ•…äº‹ï¼Œæ˜¯å› ä¸ºèƒŒåè¿˜æœ‰ä¸€ä¸ªå¾ˆæç¬‘çš„æ•…äº‹ã€‚æ‰€ä»¥ï¼Œè¿™è¦è¿½æº¯åˆ°2å¹´å‰ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡è¢«å¼•å…¥Reactï¼Œç„¶åä¸ºactionså’Œreducersç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘å·®ä¸€ç‚¹ï¼ï¼â€¦æˆ‘æƒ³è¯´ï¼Œåœ¨æˆ‘ç”¨Axiosæµ‹è¯•ä¸€äº›å¼‚æ­¥è°ƒç”¨ä¹‹å‰ï¼Œæˆ‘å‡ ä¹å¯ä»¥åº”ä»˜è‡ªå¦‚ã€‚æˆ‘æœç´¢äº†æ•´ä¸ªäº’è”ç½‘ï¼Œè¯•å›¾æ‰¾åˆ°æœ€å¥½çš„æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†å®ƒçœŸçš„èŠ±äº†æˆ‘å¾ˆå¤šæ—¶é—´æ¥ç†è§£å¦‚ä½•é€šè¿‡å®ƒã€‚</p><p id="c790" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥ä»Šå¤©æˆ‘æƒ³åˆ†äº«æˆ‘æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/c5bd0729e83365889c1cff3ba2d56d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oe9IpvDL-I958aiHJ6Lidg.jpeg"/></div></div></figure><p id="0a32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥:</p><blockquote class="kx ky kz"><p id="6367" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">reduxä¸­çš„å¼‚æ­¥åŠ¨ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p id="62ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é€šè¿‡Reduxä½¿ç”¨å¼‚æ­¥åŠ¨ä½œçš„æ ‡å‡†æ–¹å¼æ˜¯ä½¿ç”¨<a class="ae le" href="https://github.com/gaearon/redux-thunk" rel="noopener ugc nofollow" target="_blank"> Redux Thunkä¸­é—´ä»¶</a>ã€‚å®ƒåœ¨ä¸€ä¸ªåä¸º<code class="fe lf lg lh li b">redux-thunk</code>çš„ç‹¬ç«‹åŒ…ä¸­ã€‚æˆ‘ä»¬å°†åœ¨ç¨åè§£é‡Šä¸­é—´ä»¶ä¸€èˆ¬æ˜¯å¦‚ä½•å·¥ä½œçš„<a class="ae le" href="https://redux.js.org/advanced/middleware" rel="noopener ugc nofollow" target="_blank">ï¼›ç°åœ¨ï¼Œæ‚¨åªéœ€è¦çŸ¥é“ä¸€ä»¶é‡è¦çš„äº‹æƒ…:é€šè¿‡ä½¿ç”¨è¿™ä¸ªç‰¹å®šçš„ä¸­é—´ä»¶ï¼ŒåŠ¨ä½œåˆ›å»ºè€…å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŠ¨ä½œå¯¹è±¡ã€‚è¿™æ ·ï¼ŒåŠ¨ä½œåˆ›å»ºè€…å°±å˜æˆäº†ä¸€ä¸ª</a><a class="ae le" href="https://en.wikipedia.org/wiki/Thunk" rel="noopener ugc nofollow" target="_blank"> thunk </a>ã€‚</p><p id="aa11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­:</strong></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lj lk l"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Async Action with redux</figcaption></figure><p id="b621" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ä¸Šé¢çš„è¦ç‚¹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä»è™šæ‹Ÿapiè¿”å›ä¸€äº›æ•°æ®çš„æ–¹æ³•ã€‚åœ¨è¿”å›ä¸€ä¸ªå“åº”åï¼Œå‘é€ä¸€ä¸ªç±»å‹å’Œä¸€ä¸ªæœ‰æ•ˆè½½è·ï¼Œæˆ‘ä»¬å°†æµ‹è¯•å®ƒã€‚</p><p id="0c2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬è®¾ç½®æµ‹è¯•æ–‡ä»¶:</p><p id="21b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ­¥éª¤1 </strong>æŠŠä½ çš„åŠ¨ä½œå’Œç±»å‹æ‹¿åˆ°æµ‹è¯•æ–‡ä»¶ä¸­è¿›è¡Œæµ‹è¯•:</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="93d0" class="lt lu iq li b gy lv lw l lx ly">// action types<br/>import { GET_ALL_ITEMS } from '../compare.types'; </span><span id="4f1a" class="lt lu iq li b gy lz lw l lx ly">//action to mock<br/>import { loadItemData } from '../compare.action';</span></pre><p id="a05d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ­¥éª¤:2 </strong>å¯¼å…¥configureStoreå’Œthunkæ¥æµ‹è¯•æˆ‘ä»¬çš„å¼‚æ­¥æ–¹æ³•:</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="e31a" class="lt lu iq li b gy lv lw l lx ly">// import configureStore to create a mock store where we will dispatch our actions<br/>import configureStore from 'redux-mock-store';</span><span id="6d2a" class="lt lu iq li b gy lz lw l lx ly">//import thunk middle to make our action asynchronous<br/>import thunk from 'redux-thunk';</span></pre><p id="cd96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ­¥éª¤3 </strong>å¯¼å…¥MockAdapterå’Œthunkæ¥æµ‹è¯•æˆ‘ä»¬çš„å¼‚æ­¥æ–¹æ³•:</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="fcc6" class="lt lu iq li b gy lv lw l lx ly">// important:  this i have used to mock the axios call<br/>import MockAdapter from 'axios-mock-adapter';</span><span id="a027" class="lt lu iq li b gy lz lw l lx ly">// import axios dependency<br/>import axios from 'axios';</span></pre><p id="326a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ­¥éª¤:4 </strong>åˆå§‹åŒ–å­˜å‚¨ã€ä¸­é—´ä»¶ã€æ¨¡æ‹Ÿå­˜å‚¨å’Œthunk</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="e9e1" class="lt lu iq li b gy lv lw l lx ly">// initialise middlewares<br/>const middlewares = [thunk]; </span><span id="84ab" class="lt lu iq li b gy lz lw l lx ly">// initialise MockStore which is only the configureStore method which take middlewares as its parameters<br/>const mockStore = configureStore(middlewares); </span><span id="2078" class="lt lu iq li b gy lz lw l lx ly">//creating a mock instance from the MockAdapter of axios<br/>const mock = new MockAdapter(axios); const store = mockStore({});</span></pre><p id="a6ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ­¥éª¤4: å¯åŠ¨æµ‹è¯•å¥—ä»¶</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="5184" class="lt lu iq li b gy lv lw l lx ly">describe('Testing loadItemData()', () =&gt; { });</span></pre><p id="b932" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æ­¥éª¤5: </strong>æ¸…é™¤å•†åº—ä¸­æ­£åœ¨è¿è¡Œçš„ä»»ä½•æ“ä½œ</p><pre class="km kn ko kp gt lp li lq lr aw ls bi"><span id="ff92" class="lt lu iq li b gy lv lw l lx ly">describe('Testing loadItemData()', () =&gt; { <br/>   beforeEach(() =&gt; { // Runs before each test in the suite             store.clearActions();    });<br/>});</span></pre><p id="5138" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ç¬¬å…­æ­¥:</strong>æ¨¡ä»¿ä½ çš„get callï¼Œè°ƒåº¦ä½ çš„è¡ŒåŠ¨</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="1457" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ï¼ï¼ï¼å¸Œæœ›ä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•ç”¨Jestå’ŒAxiosæµ‹è¯•å¼‚æ­¥apiè°ƒç”¨ã€‚</p><p id="a573" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»rajrock38@gmail.comï¼Œé€šè¿‡LinkedInè”ç³»æˆ‘ï¼Œæˆ–è€…é€šè¿‡Mediumå’ŒTwitterå…³æ³¨æˆ‘ã€‚</p><p id="a1d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¾ˆæœ‰å¸®åŠ©ï¼Œç»™å®ƒä¸€äº›æŒå£°ä¼šå¾ˆæœ‰æ„ä¹‰ğŸ‘å¹¶åˆ†äº«å‡ºæ¥å¸®åˆ«äººæ‰¾ï¼å¹¶æ¬¢è¿åœ¨ä¸‹æ–¹å‘è¡¨è¯„è®ºã€‚</p></div></div>    
</body>
</html>
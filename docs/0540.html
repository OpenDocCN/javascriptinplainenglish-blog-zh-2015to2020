<html>
<head>
<title>Dynamic Pagination Rendering with pure JavaScript 🚀</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">纯JavaScript的动态分页渲染🚀</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/dynamic-pagination-rendering-with-pure-javascript-b5fcbccd300d?source=collection_archive---------0-----------------------#2019-11-05">https://javascript.plainenglish.io/dynamic-pagination-rendering-with-pure-javascript-b5fcbccd300d?source=collection_archive---------0-----------------------#2019-11-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6784" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我分享了我创建可排序动态数据表的经验。现在，我想分享另一个关于动态分页渲染的实验故事。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33c0a07656803dff221715337188057a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W-gxLXDDKNo-2Zec"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Credit: Unsplash <a class="ae ky" href="https://unsplash.com/@markusspiske" rel="noopener ugc nofollow" target="_blank">@markusspiske</a></figcaption></figure><p id="25a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我必须在项目中构建一个分页模块。我检查了许多分页库，但是与产品团队的需求相比，这些分页库过于复杂。我决定自己构建它，使它更简单，更容易实现。事实上，这个小部件在每个月有超过5000万用户的生产环境中实现了许多不同的项目，它的工作非常棒🚀</p><p id="5dd0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我列出我们从产品团队得到的需求:</p><ul class=""><li id="fcc6" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">我们有动态数量的元素</li><li id="1213" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">我们希望在每个小部件中动态显示它们。例如，当一个小部件在每页列出10个元素时，另一个小部件可以列出15个元素。</li><li id="7576" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">如果是在第一页或最后一页，应该禁用箭头导航按钮，如果用户点击活动页面，也不应该触发任何东西。</li><li id="04fc" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">如果我们有超过4页后，关于规格计算如下所述，我们需要显示最新的一页，并显示一个三点按钮。以下是预览:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/f01202a6e0ddfef647f6746dbca51157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WFRZxTgb7zCogOJk.png"/></div></div></figure><p id="be78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在分页的最后，它应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/73924c358cfc2bd1f47541bdbb2aab44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q-uIVhq7_nph8d5S.png"/></div></div></figure><p id="d022" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们看看工作演示:</p><p id="1f5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">给这么多信息就够了。让我们把手弄脏:</p><p id="b905" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我的小组件应该有一个影响其呈现的状态。</p><pre class="kj kk kl km gt lo lp lq lr aw ls bi"><span id="55a7" class="lt lu in lp b gy lv lw l lx ly">const <em class="lz">pagingOptions</em> = {<br/>  totalCount: 40,// <strong class="lp io">Total content count</strong><br/>  itemPerPage : 5, // <strong class="lp io">How many items will be showed per page</strong><br/>  initialPage: 1, <strong class="lp io">// Initial Page (We can set this parameter by detecting current page from query string)</strong><br/>  get totalPage () { <strong class="lp io">// Calculating total page count</strong><br/>     return Math.ceil(this.totalCount / this.itemPerPage) <strong class="lp io">// I'm using Math.ceil for ceiling </strong><br/>  },<br/>  location: ".paging", <strong class="lp io">// It's the selector to render pagination component</strong><br/>  url : "/api/contents/?id=5a5e47ec7152d929bc6d4280&amp;p=" <strong class="lp io">// The url address which will be requested after each page changed.</strong><br/>}</span></pre><p id="7e7a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个. net框架web应用程序，这就是为什么我可以在razor内部初始化我的函数。</p><pre class="kj kk kl km gt lo lp lq lr aw ls bi"><span id="d50d" class="lt lu in lp b gy lv lw l lx ly">paging.init(<em class="lz">pagingOptions</em>);</span></pre><p id="d26d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我喜欢在编码时坚持单一责任原则，所以我想在深入细节之前列出我的功能:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ma"><img src="../Images/724d0d7c00c2feb599188a2a339e70a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KaL2ezC812N4-BF9.png"/></div></div></figure><p id="d1aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">也可以合并<em class="lz">手柄下一次点击</em>和<em class="lz">手柄前一次点击</em>功能，但正如我之前提到的，这只是一个概念验证。代码库内部可能有很多需要改进的地方。请不吝推荐更好的方法。</p><p id="99b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们深入细节。我使用init函数传递当前状态。这是每次页面改变时触发的函数，所以我在这个函数中请求内容部分</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ma"><img src="../Images/e2255fa86fb2b2f6e99f5903d2c4f000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1jhXfLTt1csU__xk.png"/></div></div></figure><p id="f3dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我告诉你createPaging方法<strong class="jm io"> createButton之前，我想提一个重要的方法。</strong>该方法采用一些参数，并根据这些参数帮助我构建每个按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/b26b7c37fabfe65ef174e8b0875d633f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TvmdErU5-Z0WKFe5.png"/></div></div></figure><p id="372b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，一个大的“脏”方法创建了分页。我说它脏，只是因为它有那么多条件。我检查了很多分页库，据我所知，几乎所有的分页库都有这种情况。我不想在这里显示全部代码，以免让你感到困惑，所以我为你的调试清楚地命名了变量。</p><p id="9be1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您花时间阅读到这一行。请随意分享您对代码库的想法。总有更好的改进方法。</p><p id="c585" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">木拉提</p></div></div>    
</body>
</html>
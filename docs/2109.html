<html>
<head>
<title>Introduction to React Router Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React路由器挂钩简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-react-router-hooks-ffdd09c91fa2?source=collection_archive---------4-----------------------#2020-05-20">https://javascript.plainenglish.io/introduction-to-react-router-hooks-ffdd09c91fa2?source=collection_archive---------4-----------------------#2020-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8cf7a3b2ac7e55c0e8da033f831a0b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J0RBlQVOGOEhpktV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@outsighted?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Scott Walsh</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="407e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Router是React最受欢迎的路由解决方案之一，用于构建单页React应用程序。</p><p id="38a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将通过React路由器钩子API来清理我们的代码。</p><h1 id="81ac" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">useParams</code></h1><p id="9e11" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">useParams</code>钩子用于从URL参数中获取路由器参数。</p><p id="4aae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们定义了采用URL参数的路由，我们可以使用这个钩子。例如，我们可以编写下面的代码来使用<code class="fe lz ma mb mc b">useParams</code>钩子:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="099a" class="mq lc iq mc b gy mr ms l mt mu">import React from "react";<br/>import { BrowserRouter as Router, Switch, Route, Link } from "react-router-dom";<br/>import { useParams } from "react-router";</span><span id="36a5" class="mq lc iq mc b gy mv ms l mt mu">const Foo = () =&gt; {<br/>  const { id } = useParams();<br/>  return &lt;p&gt;{id}&lt;/p&gt;;<br/>};</span><span id="f9f1" class="mq lc iq mc b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;Router&gt;<br/>      &lt;div&gt;<br/>        &lt;nav&gt;<br/>          &lt;ul&gt;<br/>            &lt;li&gt;<br/>              &lt;Link to="/foo/1"&gt;Foo/1&lt;/Link&gt;<br/>            &lt;/li&gt;<br/>          &lt;/ul&gt;<br/>        &lt;/nav&gt;<br/>        &lt;Switch&gt;<br/>          &lt;Route path="/foo/:id"&gt;<br/>            &lt;Foo /&gt;<br/>          &lt;/Route&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/div&gt;<br/>    &lt;/Router&gt;<br/>  );<br/>}</span></pre><p id="9062" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用<code class="fe lz ma mb mc b">path</code>属性设置为<code class="fe lz ma mb mc b">/foo/:id</code>的<code class="fe lz ma mb mc b">Route</code>组件定义了路线。</p><p id="69e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在它里面，我们有了<code class="fe lz ma mb mc b">Foo</code>组件。在<code class="fe lz ma mb mc b">Foo</code>组件中，我们有<code class="fe lz ma mb mc b">useParams</code>钩子，我们从钩子中获取URL参数，其中参数值以URL参数的名称作为对象返回。</p><p id="7e73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，应该是<code class="fe lz ma mb mc b">:id</code>。我们用析构语法通过键得到<code class="fe lz ma mb mc b">id</code>的值。</p><p id="bfdd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe lz ma mb mc b">Foo</code>组件中呈现<code class="fe lz ma mb mc b">id</code>。然后我们有了带有<code class="fe lz ma mb mc b">/foo/1</code>的<code class="fe lz ma mb mc b">Link</code>组件作为<code class="fe lz ma mb mc b">to</code>属性的值。</p><p id="5471" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们看到屏幕上显示1，这是URL参数<code class="fe lz ma mb mc b">id</code>的值。</p><h1 id="de05" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">useLocation</code></h1><p id="3ec2" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lz ma mb mc b">useLocation</code>属性来获取组件中的全局<code class="fe lz ma mb mc b">location</code>对象。</p><p id="dde1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用这个钩子:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="f850" class="mq lc iq mc b gy mr ms l mt mu">import React from "react";<br/>import { BrowserRouter as Router, Switch, Route, Link } from "react-router-dom";<br/>import { useLocation } from "react-router";</span><span id="2cc3" class="mq lc iq mc b gy mv ms l mt mu">const Foo = () =&gt; {<br/>  const loc = useLocation();<br/>  return &lt;p&gt;{JSON.stringify(loc)}&lt;/p&gt;;<br/>};</span><span id="465c" class="mq lc iq mc b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;Router&gt;<br/>      &lt;div&gt;<br/>        &lt;nav&gt;<br/>          &lt;ul&gt;<br/>            &lt;li&gt;<br/>              &lt;Link to="/foo/1"&gt;Foo/1&lt;/Link&gt;<br/>            &lt;/li&gt;<br/>          &lt;/ul&gt;<br/>        &lt;/nav&gt;<br/>        &lt;Switch&gt;<br/>          &lt;Route path="/foo/:id"&gt;<br/>            &lt;Foo /&gt;<br/>          &lt;/Route&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/div&gt;<br/>    &lt;/Router&gt;<br/>  );<br/>}</span></pre><p id="8a6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们使用了<code class="fe lz ma mb mc b">Foo</code>中的<code class="fe lz ma mb mc b">useLocation</code>钩子来获取<code class="fe lz ma mb mc b">location</code>对象并将其分配给<code class="fe lz ma mb mc b">loc</code>。</p><p id="5d45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们展示字符串化的版本来查看<code class="fe lz ma mb mc b">location</code>对象内部的值。</p><p id="7411" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个钩子从React路由器的5.1版本开始可用。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3ca6895ad4cb0a4a4a268085598d8a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3Ar88onjXOg4ckxi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@britishlibrary?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">British Library</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6ba9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">useHistory</code></h1><p id="6850" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">useHistory</code>钩子返回<code class="fe lz ma mb mc b">history</code>对象。它让我们像调用<code class="fe lz ma mb mc b">goBack</code>和<code class="fe lz ma mb mc b">push</code>方法一样调用<code class="fe lz ma mb mc b">history</code>方法中的方法。</p><p id="ade9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以如下使用<code class="fe lz ma mb mc b">useHistory</code>:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="d977" class="mq lc iq mc b gy mr ms l mt mu">import React from "react";<br/>import { BrowserRouter as Router, Switch, Route, Link } from "react-router-dom";<br/>import { useHistory } from "react-router";</span><span id="b53c" class="mq lc iq mc b gy mv ms l mt mu">const Foo = () =&gt; {<br/>  const hist = useHistory();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link to="/foo"&gt;foo&lt;/Link&gt;<br/>      &lt;Link to="/bar"&gt;bar&lt;/Link&gt;<br/>      &lt;button onClick={() =&gt; hist.goBack()}&gt;back&lt;/button&gt;<br/>      &lt;p&gt;foo&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="6625" class="mq lc iq mc b gy mv ms l mt mu">const Bar = () =&gt; {<br/>  const hist = useHistory();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link to="/foo"&gt;foo&lt;/Link&gt;<br/>      &lt;Link to="/bar"&gt;bar&lt;/Link&gt;<br/>      &lt;button onClick={() =&gt; hist.goBack()}&gt;back&lt;/button&gt;<br/>      &lt;p&gt;bar&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="3709" class="mq lc iq mc b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;Router&gt;<br/>      &lt;div&gt;<br/>        &lt;Switch&gt;<br/>          &lt;Route path="/foo"&gt;<br/>            &lt;Foo /&gt;<br/>          &lt;/Route&gt;<br/>          &lt;Route path="/bar"&gt;<br/>            &lt;Bar /&gt;<br/>          &lt;/Route&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/div&gt;<br/>    &lt;/Router&gt;<br/>  );<br/>}</span></pre><p id="556e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有两个路由组件，<code class="fe lz ma mb mc b">Foo</code>和<code class="fe lz ma mb mc b">Bar</code>。在每个组件中，我们有以下回调:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="1d4d" class="mq lc iq mc b gy mr ms l mt mu">() =&gt; hist.goBack()</span></pre><p id="eb52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它用于返回到以前的路线。每次我们点击每页中的按钮，它都会返回到上一页，因为我们有了返回<code class="fe lz ma mb mc b">history</code>对象的<code class="fe lz ma mb mc b">useHistory</code>钩子，然后将它赋给<code class="fe lz ma mb mc b">hist</code>常量。</p><p id="9e0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们可以调用<code class="fe lz ma mb mc b">history</code>对象中的方法。</p><h1 id="3eaf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="92be" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lz ma mb mc b">useParams</code>钩子对于获取作为对象的给定路由的URL参数很有用。这样，我们可以使用get并轻松地使用它们来做任何我们想做的事情，比如通过ID获取数据。</p><p id="2bc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">useLocation</code>钩子返回全局<code class="fe lz ma mb mc b">location</code>对象，这样我们就可以使用类似<code class="fe lz ma mb mc b">href</code>、<code class="fe lz ma mb mc b">hostname</code>、<code class="fe lz ma mb mc b">pathname</code>等属性。</p><p id="adc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样地，<code class="fe lz ma mb mc b">useHistory</code>钩子让我们获得组件中的<code class="fe lz ma mb mc b">history</code>对象，这样我们就可以调用<code class="fe lz ma mb mc b">go</code>、<code class="fe lz ma mb mc b">goBack</code>等方法。在a组件中。</p><h1 id="c6cc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">简明英语笔记</h1><p id="7788" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">你知道我们推出了一个YouTube频道吗？我们制作的每个视频都旨在教给你一些新的东西。点击此处 查看我们，并确保订阅该频道😎</p></div></div>    
</body>
</html>
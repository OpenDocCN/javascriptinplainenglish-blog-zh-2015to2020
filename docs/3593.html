<html>
<head>
<title>Using Chart.js to Display Poll Data in a Cool Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Chart.js以一种很酷的方式显示民意测验数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-chart-js-to-display-poll-data-in-a-cool-way-56eda587c53b?source=collection_archive---------5-----------------------#2020-10-11">https://javascript.plainenglish.io/using-chart-js-to-display-poll-data-in-a-cool-way-56eda587c53b?source=collection_archive---------5-----------------------#2020-10-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ebe7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">投票时间到了。准备好去看一百万张显示各种团体投票结果的图表吧——有多少左撇子大提琴手投票给绿党，有多少财政自由主义吸血鬼想要阻止全球变暖，有多少水獭公开认为躺着吃东西是最好的。</p><p id="0280" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用Chart.js构建了一个条形图，显示三个计数器之间的投票结果。在这篇博客中，我将向你展示我是如何做到的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0b596504a543ac5ac24eae24734a8d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*zqiD41cLpX8X2bYD6Zmeew.gif"/></div></figure><blockquote class="kq kr ks"><p id="06c5" class="jk jl kt jm b jn jo jp jq jr js jt ju ku jw jx jy kv ka kb kc kw ke kf kg kh ig bi translated"><a class="ae kx" href="https://github.com/cooljasonmelton/poll-machine" rel="noopener ugc nofollow" target="_blank"> <em class="in">跳转到GitHub </em> </a></p></blockquote><h1 id="a2fc" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">辅导的</h1><h2 id="37bb" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">目录</h2><ul class=""><li id="a2f4" class="mi mj in jm b jn mk jr ml jv mm jz mn kd mo kh mp mq mr ms bi translated">初级垃圾</li><li id="38ef" class="mi mj in jm b jn mt jr mu jv mv jz mw kd mx kh mp mq mr ms bi translated">HTML和CSS</li><li id="b2c1" class="mi mj in jm b jn mt jr mu jv mv jz mw kd mx kh mp mq mr ms bi translated">投票按钮和结果文本的JavaScript</li><li id="91df" class="mi mj in jm b jn mt jr mu jv mv jz mw kd mx kh mp mq mr ms bi translated">应用Chart.js</li><li id="cd20" class="mi mj in jm b jn mt jr mu jv mv jz mw kd mx kh mp mq mr ms bi translated">结论</li></ul><h2 id="5ff3" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">初级垃圾</h2><p id="2256" class="pw-post-body-paragraph jk jl in jm b jn mk jp jq jr ml jt ju jv my jx jy jz mz kb kc kd na kf kg kh ig bi translated">首先，我为我的HTML、CSS和JavaScript设置了一个文件。然后，我用npm安装了Chart.js:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="9fd9" class="lw kz in nc b gy ng nh l ni nj">npm install chart.js --save</span></pre><p id="56d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我最终得到了这样一个文件结构(减去<code class="fe nk nl nm nc b">poll-machine-demo.gif</code>):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/77d7e0e11226c85613b572cc1af52a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*GRdpgmCxIZvtliJ_YLEKpQ.png"/></div></figure><h2 id="3cc7" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">HTML和CSS</h2><p id="e8be" class="pw-post-body-paragraph jk jl in jm b jn mk jp jq jr ml jt ju jv my jx jy jz mz kb kc kd na kf kg kh ig bi translated">我在<code class="fe nk nl nm nc b">index.html</code>中为这个项目设置了骨骼。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7a65bfbca09187a4e1f03bb6877c9574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*z9ZOA5ZRXi-yFscosHBMSQ.png"/></div></figure><p id="bbd8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，我连接了我的样式表、JavaScript文件和Chart.js节点模块。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4ba8f67c2c9737b92cace41d7aaa69ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*_HPsTqp4B7QptQD28ktUrw.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8f37e86750f0fe2d89ff87b8b1a553b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*iDkxO_xAXxBWJscofS44SA.png"/></div></figure></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="0af3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我添加了CSS来使按钮和文本正确显示。我添加了一些颜色，空白，填充，并把所有的东西放在一个网格里。我不打算详细说明，但是你可以在这里找到CSS<a class="ae kx" href="https://github.com/cooljasonmelton/poll-machine/blob/main/styles.css" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="9eb5" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">投票按钮和结果文本的JavaScript</h2><p id="24c2" class="pw-post-body-paragraph jk jl in jm b jn mk jp jq jr ml jt ju jv my jx jy jz mz kb kc kd na kf kg kh ig bi translated">计数器按钮的HTML和CSS看起来不错，我开始研究它们的功能。</p><p id="86d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我根据类名抓取了所有的按钮和文本节点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d19aae0bfd576cd4e6e93f9ae300c7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*Zr4CddTdsDQbqA3NRulFPA.png"/></div></figure><blockquote class="kq kr ks"><p id="2445" class="jk jl kt jm b jn jo jp jq jr js jt ju ku jw jx jy kv ka kb kc kw ke kf kg kh ig bi translated"><em class="in">使用</em> <code class="fe nk nl nm nc b"><em class="in">.getElementsByClassName()</em></code> <em class="in">返回一个</em> <code class="fe nk nl nm nc b"><em class="in">HTMLCollection</em></code> <em class="in">类型。这些类似于一个数组，但是为了使用类似</em> <code class="fe nk nl nm nc b"><em class="in">map()</em></code> <em class="in">的数组方法，我必须使用spread运算符(</em> <code class="fe nk nl nm nc b"><em class="in">...</em></code> <em class="in">)将</em> <code class="fe nk nl nm nc b"><em class="in">HTMLCollection</em></code> <em class="in">复制到一个新的数组中。</em></p></blockquote><p id="1bbd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我为每个按钮设置了初始投票数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi nx"><img src="../Images/4c5bf5cf949469218e6217f7e5f7ef91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFxfAjNQzGlEI6RGL2_aJQ.png"/></div></div></figure><p id="390c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用数组中的按钮，我可以映射它们，并给它们每个一个事件监听器。无论何时，点击一个按钮，它将运行<code class="fe nk nl nm nc b">updateVote()</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/eb0ddd79551bab9408905907cf521a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NS_rTLTxBPi0LT-hKHhJbg.png"/></div></div></figure><p id="2f69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">做所有的工作。它的参数是按钮id的第一个字符(<code class="fe nk nl nm nc b">charAt(0)</code>)。这将是<code class="fe nk nl nm nc b">'a'</code>、<code class="fe nk nl nm nc b">'b'</code>或<code class="fe nk nl nm nc b">'c'</code>。它将正确的结果变量加1。</p><p id="668a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我映射我的结果文本。这些是我存储在<code class="fe nk nl nm nc b">txtArr</code>中的段落元素数组。我映射这个数组来显示每个元素的正确结果。</p><p id="a108" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我更新了图表。我将在下一节讨论这个问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/a49c43ec522827259813686735a8d7bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-Pu_RlDA8pYxXGUA4XNEg.png"/></div></div></figure><h2 id="9665" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">应用Chart.js</h2><p id="6495" class="pw-post-body-paragraph jk jl in jm b jn mk jp jq jr ml jt ju jv my jx jy jz mz kb kc kd na kf kg kh ig bi translated">Chart.js必须应用于一个<code class="fe nk nl nm nc b">canvas</code>元素。我从HTML中抓取画布元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/69108a0e43a61e10f606ae889bbd0544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7GiL5wgGhBU31xA35KWedw.png"/></div></div></figure><p id="c0ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我通过调用<code class="fe nk nl nm nc b">new Chart</code>来制作图表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/0344352b04fc16efdad89590374581fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JfS_Ljglun7VvwToBatWDg.png"/></div></div></figure><p id="532d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe nk nl nm nc b">new Chart</code>使用画布元素<code class="fe nk nl nm nc b">chartCvs</code>作为第一个参数。对于第二个参数，它采用一个包含所有图表规范的对象:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/a75499d2b5d6bfae2661d2db87b373cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2xTQBTJV6vHubZnu5ry45A.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oc"><img src="../Images/1a8e09626107ee64a00db6fc695b500f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YeBhbIx1u430erkQCOJMKQ.png"/></div></div></figure><p id="5e94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对象的三个主键是<code class="fe nk nl nm nc b">type</code>、<code class="fe nk nl nm nc b">data</code>和<code class="fe nk nl nm nc b">options</code>。</p><p id="760b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe nk nl nm nc b">type</code>控制图形的类型。Chart.js给出了很多很好的选项。为此，我使用了一个简单的条形图，提供了值<code class="fe nk nl nm nc b">'bar’</code>。</p><p id="052e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据您制作的图形类型，添加的<code class="fe nk nl nm nc b">data</code>会有所不同。对于每个条形，我给出了条形的颜色和样式的信息，以及与每个字母A、B或c相关的数据和标签。</p><p id="c8eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，对于选项，我创建了一个标题，关闭了工具提示(一个我不喜欢的悬停框)，并为y轴上的刻度添加了标签和记号。</p><h2 id="4ea9" class="lw kz in bd la lx ly dn le lz ma dp li jv mb mc lm jz md me lq kd mf mg lu mh bi translated">结论</h2><p id="bbfb" class="pw-post-body-paragraph jk jl in jm b jn mk jp jq jr ml jt ju jv my jx jy jz mz kb kc kd na kf kg kh ig bi translated">Chart.js的图形显示得非常好，细节清晰，过渡平滑。让一切正常运转对我来说需要一点学习过程。出于这个原因，我对这个项目进行了大量的硬编码。如果让我重做，我会对这些内容进行大量抽象，并探索Chart.js提供的更多内容。您可以对图表应用更多的自定义。</p><p id="6731" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您有任何反馈，请给我发消息。我喜欢任何改进我的博客，当然，还有“民意测验机器”的建议或想法。请评论或随时给我发电子邮件<code class="fe nk nl nm nc b">jason.melton2@gmail.com</code>。</p><p id="3044" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最好的，杰森</p></div></div>    
</body>
</html>
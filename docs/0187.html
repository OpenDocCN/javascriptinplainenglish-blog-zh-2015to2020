<html>
<head>
<title>Are you mistakenly creating unwanted global variables?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您是否错误地创建了不需要的全局变量？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/are-you-mistakenly-creating-unwanted-global-variables-c6b54d3c5ae8?source=collection_archive---------3-----------------------#2019-07-23">https://javascript.plainenglish.io/are-you-mistakenly-creating-unwanted-global-variables-c6b54d3c5ae8?source=collection_archive---------3-----------------------#2019-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/25a291a681c7c7f9e8ef6ead252075e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LsJ2F2-yVgi7yQoCN-nXZw.jpeg"/></div></div></figure><h2 id="f1e7" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">Javascript是一种动态编程语言，它为我们提供了很大的灵活性，比如为同一个变量分配不同的数据类型，动态声明变量等等。</h2><p id="3885" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">但与此同时，它也带来了许多警告，人们很容易忽略这些警告，并且永远不会意识到它的后果。</p><h2 id="5f6f" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">今天我们要谈论的就是这样一个案例，如果不注意的话，它会造成严重的问题。</h2><p id="173c" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">我们知道javascript允许我们动态声明变量，甚至重新声明它。但是你有没有想过，如果你在声明一个变量之前没有放上一个var/let/const关键字会怎么样？</p><h2 id="2f17" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">让我们从一段代码开始</h2><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="8f83" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">在上面的代码片段中，我们有一个名为<code class="fe ma mb mc md b">iAmUsefulFn()</code>的随机函数，它接受一个参数。</p><p id="c36d" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">现在仔细看看函数的内部。我们声明了一个名为<code class="fe ma mb mc md b">name</code>的变量，没有任何关键字，添加了一个带有<code class="fe ma mb mc md b">.</code>的参数，并将其存储在name中。</p><p id="05c2" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">乍一看，这段代码看起来绝对正常。但实际上，它会在应用程序中引起严重安全和性能问题。原因:</p><blockquote class="me mf mg"><p id="24d3" class="ku kv mh kw b kx lv kz la lb lw ld le mi lx lg lh mj ly lj lk mk lz lm ln lo ij bi translated">在Javascript中，没有任何关键字声明的变量(let/const/var)将自动成为一个全局变量，并附加到全局对象上。(浏览器的窗口对象)</p></blockquote><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="a246" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">所以如果我在窗口对象中查找name变量，我能找到它吗？</p><p id="a6b9" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">是的，我会的，它会在里面存储<code class="fe ma mb mc md b">Shubham.</code>的值。</p><pre class="lp lq lr ls gt ml md mm mn aw mo bi"><span id="70c6" class="jy jz iq md b gy mp mq l mr ms">console.log(window.name) //Shubham.</span></pre><p id="2c30" class="pw-post-body-paragraph ku kv iq kw b kx lv kz la lb lw ld le kh lx lg lh kl ly lj lk kp lz lm ln lo ij bi translated">因此，这段代码最大的风险是“乍一看没问题”,但它可能会在您的应用程序中导致意外的错误，并且以后很难调试。除非你有意让它全球化。</p><h2 id="ad12" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">希望从现在开始，我们在Javascript中声明变量时会小心谨慎，并且永远不要忘记加上一个<code class="fe ma mb mc md b">let/const/var</code>关键字。</h2><h2 id="d93a" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">完整的代码可以在下面的Codepen上试用:</h2><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="mt lu l"/></div></figure></div></div>    
</body>
</html>
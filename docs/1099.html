<html>
<head>
<title>JavaScript Events Handlers — Mouse Move and Mouse Out</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript事件处理程序—鼠标移动和鼠标移出</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-events-handlers-mouse-move-and-mouse-out-b1e275b46622?source=collection_archive---------4-----------------------#2020-01-29">https://javascript.plainenglish.io/javascript-events-handlers-mouse-move-and-mouse-out-b1e275b46622?source=collection_archive---------4-----------------------#2020-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8226975bcbfbb343269a60717066d1fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UgMrQ1MDjl1v_mdf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@wolfgang_hasselmann?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Wolfgang Hasselmann</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2134" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在JavaScript中，事件是应用程序中发生的动作。它们是由各种事情触发的，比如输入、提交表单、调整大小等元素变化，或者应用程序运行时发生的错误等。我们可以分配一个事件处理器来处理这些事件。发生在DOM元素上的事件可以通过为相应事件的DOM对象的属性分配一个事件处理程序来处理。在本文中，我们将看看<code class="fe lb lc ld le b">mousemove</code>和<code class="fe lb lc ld le b">mouseout</code>事件。</p><h1 id="691f" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b"><strong class="ak">onmousemove</strong></code></h1><p id="724f" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">DOM元素的<code class="fe lb lc ld le b">onmousemove</code>属性允许我们分配一个函数来处理<code class="fe lb lc ld le b">mousemove</code>元素。当用户移动鼠标时，触发<code class="fe lb lc ld le b">mousemove</code>事件。</p><p id="3b18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以用它来制作工具提示，当我们将鼠标指针悬停在一个元素上时，工具提示就会出现。首先，我们添加一些HTML代码来添加一些<code class="fe lb lc ld le b">p</code>元素，当我们悬停在它上面时会显示一个工具提示，就像我们在下面的代码中做的那样:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="3118" class="mq lg iq le b gy mr ms l mt mu">&lt;p&gt;&lt;a href="#" data-tooltip="Tooltip 1" id='tooltip-1'&gt;Tooltip 1&lt;/a&gt;&lt;/p&gt;<br/>&lt;p&gt;&lt;a href="#" data-tooltip="Tooltip 2" id='tooltip-2'&gt;Tooltip 2&lt;/a&gt;&lt;/p&gt;</span></pre><p id="58ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在CSS代码中，我们为工具提示放置样式:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="e87f" class="mq lg iq le b gy mr ms l mt mu">.tooltip {<br/>  position: absolute;<br/>  z-index: 9999;<br/>  padding: 6px;<br/>  background: #ffd;<br/>  border: 1px #886 solid;<br/>  border-radius: 5px;<br/>}</span></pre><p id="d923" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">tooltip</code>类使工具提示<code class="fe lb lc ld le b">div</code>与现有元素重叠。在JavaScript代码中设置位置后，它应该出现在鼠标指针附近。我们还设置了工具提示的背景颜色和边框。</p><p id="4c0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们添加JavaScript代码，一旦我们给它分配了我们自己的<code class="fe lb lc ld le b">onmousemove</code>事件处理函数，就显示工具提示。我们通过添加以下代码来实现这一点:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="99c7" class="mq lg iq le b gy mr ms l mt mu">document.onmousemove = (event) =&gt; {<br/>  document.querySelectorAll('.tooltip').forEach(e =&gt; e.parentNode.removeChild(e));</span><span id="fe7b" class="mq lg iq le b gy mv ms l mt mu">  const id = event.srcElement.id;<br/>  const node = document.createElement('div');<br/>  node.className = 'tooltip';<br/>  node.textContent = event.target.dataset.tooltip;<br/>  node.setAttribute('hidden', '');<br/>  node.style.left = event.clientX + 20 + 'px';<br/>  node.style.top = event.clientY + 10 + 'px';<br/>  document.body.appendChild(node);</span><span id="1287" class="mq lg iq le b gy mv ms l mt mu">  if (id == 'tooltip-1' || id == 'tooltip-2') {<br/>    node.removeAttribute('hidden');<br/>  }<br/>}</span></pre><p id="2a30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的<code class="fe lb lc ld le b">mousemove</code>事件的事件处理函数中，我们将它分配给了<code class="fe lb lc ld le b">document</code>的<code class="fe lb lc ld le b">onmousemove</code>属性，我们用类<code class="fe lb lc ld le b">tooltip</code>获取了所有现有的元素，这样我们就可以将它们从屏幕上移除。</p><p id="3c68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过用<code class="fe lb lc ld le b">createElement</code>方法创建一个<code class="fe lb lc ld le b">div</code>元素来创建工具提示。然后我们通过设置<code class="fe lb lc ld le b">node</code>的<code class="fe lb lc ld le b">className</code>属性将其设置为<code class="fe lb lc ld le b">tooltip</code>类。接下来，我们获取<code class="fe lb lc ld le b">data-tooltip</code>属性的值，然后将其设置为<code class="fe lb lc ld le b">node</code>的<code class="fe lb lc ld le b">textContent</code>属性。然后我们设置刚刚创建的<code class="fe lb lc ld le b">div.tooltip</code>元素的<code class="fe lb lc ld le b">hidden</code>属性。然后我们将<code class="fe lb lc ld le b">left</code>和<code class="fe lb lc ld le b">top</code>位置设置为<code class="fe lb lc ld le b">clientX + 20</code>像素和<code class="fe lb lc ld le b">clientY + 10</code>像素。<code class="fe lb lc ld le b">clientX</code>和<code class="fe lb lc ld le b">clientY</code>是鼠标指针当前位置的X和Y坐标，因此我们可以用它们来定位鼠标指针附近的工具提示。</p><p id="7f0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，如果鼠标悬停的<code class="fe lb lc ld le b">id</code>是ID <code class="fe lb lc ld le b">tooltip-1</code>或<code class="fe lb lc ld le b">tooltip-2</code>，那么我们从刚刚创建的<code class="fe lb lc ld le b">div.tooltip</code>元素中删除<code class="fe lb lc ld le b">hidden</code>属性，并显示工具提示。</p><p id="8a4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们做到了这一点，当我们将鼠标悬停在任一链接上时，我们应该会看到工具提示。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/5ee77333944974f101126dde553a0ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ojGYfu3f0ytD75da"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@zimbahcat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">My Name</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ab77" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b"><strong class="ak">onmouseout</strong></code></h1><p id="192f" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">onmouseout</code>属性是DOM元素的一个属性，在这里我们可以将一个事件处理程序分配给一个事件处理函数来处理<code class="fe lb lc ld le b">mouseout</code>事件。当鼠标离开一个元素时，触发<code class="fe lb lc ld le b">mouseout</code>事件，比如当鼠标离开一个图像时，然后为该图像元素触发<code class="fe lb lc ld le b">mouseout</code>事件。</p><p id="1527" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论鼠标移动到另一个元素，不管它在层次结构中的位置，都会触发<code class="fe lb lc ld le b">mouseout</code>事件，而<code class="fe lb lc ld le b">mouseout</code>事件向下传播到原始元素的后代。因此，<code class="fe lb lc ld le b">mouseout </code>事件可能会被触发多次，这会导致严重的性能问题。如果当鼠标在一个有很多后代的大元素上时，我们需要监听整个元素树中的事件，那么最好使用<code class="fe lb lc ld le b">mouseout</code>事件。</p><p id="1d8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以用它来跟踪鼠标是否在一个元素上。首先，我们添加一个HTML div元素，就像我们在下面的代码中做的那样:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="eb8d" class="mq lg iq le b gy mr ms l mt mu">&lt;div id='log'&gt;</span><span id="ff11" class="mq lg iq le b gy mv ms l mt mu">&lt;/div&gt;</span></pre><p id="a2e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加一些CSS在div上添加一个边框并调整它的大小:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="83fe" class="mq lg iq le b gy mr ms l mt mu">#log {<br/>  width: 300px;<br/>  height: 150px;<br/>  border: 1px solid black;<br/>}</span></pre><p id="044c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们可以添加以下JavaScript代码，根据鼠标是否在<code class="fe lb lc ld le b">log</code> div上来设置不同的文本:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="63ad" class="mq lg iq le b gy mr ms l mt mu">const log = document.getElementById('log');<br/>log.onmouseover = () =&gt; {<br/>  log.textContent = 'Mouse over'<br/>}</span><span id="5b40" class="mq lg iq le b gy mv ms l mt mu">log.onmouseout = () =&gt; {<br/>  log.textContent = 'Mouse left'<br/>}</span></pre><p id="00ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们这样做了，当我们的鼠标在盒子上时，我们应该在盒子里看到“鼠标在上面”的消息，当我们的鼠标指针离开盒子时，我们应该看到“鼠标离开”的消息。</p><p id="795e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe lb lc ld le b">mouseout</code>事件的另一个例子是根据鼠标是否在图像元素上来显示不同的图像。我们只需像在下面的代码中那样更改HTML:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7c76" class="mq lg iq le b gy mr ms l mt mu">&lt;img src='<a class="ae kc" href="https://images.unsplash.com/photo-1503066211613-c17ebc9daef0?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1500&amp;q=80'" rel="noopener ugc nofollow" target="_blank">https://images.unsplash.com/photo-1503066211613-c17ebc9daef0?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1500&amp;q=80'</a>&gt;</span></pre><p id="4168" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将CSS更改为以下内容:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="5829" class="mq lg iq le b gy mr ms l mt mu">img {<br/>  width: 300px;<br/>}</span></pre><p id="2aa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在JavaScript代码中，我们更改了<code class="fe lb lc ld le b">onmouseover</code>和<code class="fe lb lc ld le b">onmouseout</code>事件处理函数中<code class="fe lb lc ld le b">img</code>元素的<code class="fe lb lc ld le b">src</code>，就像我们在下面的代码中所做的那样:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="260e" class="mq lg iq le b gy mr ms l mt mu">const img = document.querySelector('img');<br/>img.onmouseover = () =&gt; {<br/>  img.src = '<a class="ae kc" href="https://images.unsplash.com/photo-1503066211613-c17ebc9daef0?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1500&amp;q=80'" rel="noopener ugc nofollow" target="_blank">https://images.unsplash.com/photo-1503066211613-c17ebc9daef0?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1500&amp;q=80'</a><br/>}</span><span id="d483" class="mq lg iq le b gy mv ms l mt mu">img.onmouseout = () =&gt; {<br/>  img.src = '<a class="ae kc" href="https://images.unsplash.com/photo-1546182990-dffeafbe841d?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=740&amp;q=80'" rel="noopener ugc nofollow" target="_blank">https://images.unsplash.com/photo-1546182990-dffeafbe841d?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=740&amp;q=80'</a><br/>}</span></pre><p id="0cac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，当我们将鼠标悬停或离开<code class="fe lb lc ld le b">img</code>元素时，我们会得到不同的图像。</p><p id="7ea1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM元素的<code class="fe lb lc ld le b">onmousemove</code>属性允许我们分配一个函数来处理<code class="fe lb lc ld le b">mousemove</code>元素。当用户移动鼠标时，触发<code class="fe lb lc ld le b">mousemove</code>事件。</p><p id="1b7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">onmouseout</code>属性是一个DOM元素的属性，在这里我们可以将一个事件处理程序分配给一个事件处理函数来处理<code class="fe lb lc ld le b">mouseout</code>事件。当鼠标离开一个元素时，触发<code class="fe lb lc ld le b">mouseout</code>事件，比如当鼠标离开一个图像时，然后为该图像元素触发<code class="fe lb lc ld le b">mouseout</code>事件。</p><p id="9da0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论鼠标移动到层次结构中的哪个位置，都会触发<code class="fe lb lc ld le b">mouseout</code>事件，而<code class="fe lb lc ld le b">mouseout</code>事件会向下传播到原始元素的后代。因此，<code class="fe lb lc ld le b">mouseout </code>事件可能会被触发多次，这会导致严重的性能问题。如果当鼠标在一个有很多后代的大元素上时，我们需要监听整个元素树中的事件，那么最好使用<code class="fe lb lc ld le b">mouseout</code>事件。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Customs Events In JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的自定义事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/customs-events-in-javascript-9189c1c24a8d?source=collection_archive---------8-----------------------#2020-04-17">https://javascript.plainenglish.io/customs-events-in-javascript-9189c1c24a8d?source=collection_archive---------8-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="75e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在JavaScript中触发您自己的自定义事件</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/47d655c6d0c821c37340d5a07dd16b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7DDsCxv7GU9fCAJPdstgw.png"/></div></div></figure><p id="2df0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们有一个带有单个<code class="fe kx ky kz la b">h2</code> header标签的网页，标签的ID为<code class="fe kx ky kz la b">number</code>，标签内有一个数字0。</p><p id="5332" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以在浏览器中查看一下。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lb"><img src="../Images/1f067d244226c7c037420d071ec33251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ERnAgnGBGNrOXRYYiaCFCA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">In the web browser</figcaption></figure><p id="a191" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们只能看到数字0，仅此而已。所以我们要做的实际上是使用一个自定义事件来改变<code class="fe kx ky kz la b">h2</code>标题标签中文本的数量和颜色。</p><h1 id="e32d" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">开始</h1><p id="71c6" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">首先，我们将进入脚本标记，并为header标记创建一个新的常量。</p><pre class="km kn ko kp gt mj la mk ml aw mm bi"><span id="ab99" class="mn lh iq la b gy mo mp l mq mr">const headerTag = document.getElementById('number');</span></pre><h1 id="85c1" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">添加事件侦听器</h1><p id="1769" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">然后，我们将添加事件侦听器— numberChanged。</p><pre class="km kn ko kp gt mj la mk ml aw mm bi"><span id="ad7e" class="mn lh iq la b gy mo mp l mq mr">headerTag.addEventListener('numberChanged', function(e) {<br/>   headerTag.textContent = e.detail.number;<br/>   headerTag.style.color = e.detail.textColor;<br/>});</span></pre><p id="9592" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kx ky kz la b">numberChanged</code>是我们自己定义的自定义活动，我们将很快创建它。对于事件处理程序，我们创建一个函数，将<strong class="jp ir"> e </strong>作为传入的事件对象。</p><h1 id="7d12" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">创建事件</h1><p id="f1f0" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">接下来，创建一个函数来创建事件并调度它。</p><pre class="km kn ko kp gt mj la mk ml aw mm bi"><span id="01d0" class="mn lh iq la b gy mo mp l mq mr">function changeNumber(n, c) {<br/>   const event = new CustomEvent('numberChanged', {<br/>      detail: {<br/>         number: n,<br/>         textColor: c<br/>      }<br/>   });<br/>   headerTag.dispatchEvent(event);<br/>}</span></pre><p id="59ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要将<strong class="jp ir"> n </strong>作为要改变的数字，将<strong class="jp ir"> c </strong>作为颜色。然后，我们创建一个名为<strong class="jp ir">事件</strong>的新常数，它等于新的<code class="fe kx ky kz la b">CustomEvent</code>。这是一个真实的JavaScript类或对象，事件名为<strong class="jp ir"> numberChanged </strong>。这将与上面的事件名称相匹配。</p><p id="f920" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们要传递名为<code class="fe kx ky kz la b">detail</code>的事件对象。Detail是自定义事件类附带的特定属性，它会将属性或额外数据传递给我们的事件处理程序。</p><p id="2e9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是<strong class="jp ir">事件</strong>常量的全部内容，我们将调度该事件。</p><h1 id="dd7d" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">在Web控制台中测试</h1><p id="a82b" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">现在我们将调用web控制台中的函数。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ms"><img src="../Images/064d34539513a23da3053cefda79fecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ax5XLpWF7erkf30SzHQgHg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk">End Result</figcaption></figure><p id="01b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所见，我们已经将文本中的数字改为20，并将文本的颜色改为蓝色。</p><h1 id="3057" class="lg lh iq bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">代码</h1><p id="e678" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">这是上面演示的全部代码。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f672e9761dc7dd3079a4551cfb61ca62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yj7mNmsTlaI7pbXLbx5TBw.png"/></div></div></figure><h2 id="383f" class="mn lh iq bd li mt mu dn lm mv mw dp lq jy mx my lu kc mz na ly kg nb nc mc nd bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="e89f" class="pw-post-body-paragraph jn jo iq jp b jq me js jt ju mf jw jx jy mg ka kb kc mh ke kf kg mi ki kj kk ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae ne" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="jp ir">AI in Plain English</strong></a><a class="ae ne" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="jp ir">UX in Plain English</strong></a><a class="ae ne" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="jp ir">Python in Plain English</strong></a><strong class="jp ir"/>——谢谢，继续学习！</p><p id="6568" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae ne" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">submissions @ plain English . io</strong></a><strong class="jp ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
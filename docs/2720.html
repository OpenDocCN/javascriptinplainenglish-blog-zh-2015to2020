<html>
<head>
<title>Adding Assets to Our Angular Apps in Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Azure中向我们的Angular应用程序添加资产</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-assets-to-our-angular-apps-in-azure-2d009ff7989?source=collection_archive---------2-----------------------#2020-07-18">https://javascript.plainenglish.io/adding-assets-to-our-angular-apps-in-azure-2d009ff7989?source=collection_archive---------2-----------------------#2020-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fbe4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Angular中构建生产就绪代码时，如何将资产包含在我们的dist目录中(针对云)</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/20a58b1e4cac98ddbf961eab3ee51489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eg18PnmwNa9Jniq5"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ruben_dossantos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rúben dos Santos</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="80ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你泡一杯咖啡需要多长时间？事实上，我现在喝得很少，但当我喝的时候，我会全力以赴地喝倒出来的、现磨的、时髦的Chemex玻璃咖啡。</p><p id="d9fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这真的很好，更好的是，在我煮咖啡的时间里，我可以建立一个完整的web应用程序部署管道，这要归功于极其方便的Azure应用程序服务。</p><p id="ce0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，我最初发现不太方便的是在我们的web应用程序分发中包含其他非角度特定资产的过程。具体来说就是一个<code class="fe ls lt lu lv b">web.config</code>和JSON文件。</p><p id="5719" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何Angular应用程序，当被部署为生产版本时，都需要在<code class="fe ls lt lu lv b">dist/</code>目录中包含我们在应用程序中使用的所有东西——这个目录是用<code class="fe ls lt lu lv b">ng build --prod</code>命令构建的。</p><p id="207d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，允许访问JSON文件还需要一个步骤。我们将在本文中讨论这两个问题。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="1529" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">将文件添加到发行版</h1><p id="af03" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">对于这个例子，我们将向我们的<code class="fe ls lt lu lv b">dist/</code>添加一个<code class="fe ls lt lu lv b">web.config</code>文件。首先，我们需要创建它。</p><p id="7bbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将<code class="fe ls lt lu lv b">web.config</code>文件添加到<code class="fe ls lt lu lv b">src/</code>目录中。在该文件中添加您需要的内容，例如:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9793" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们需要告诉Angular在用<code class="fe ls lt lu lv b">ng build --prod</code>构建我们的生产应用程序时，将这个文件包含在<code class="fe ls lt lu lv b">dist/</code>中。</p><p id="7e3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，导航至<code class="fe ls lt lu lv b">angular.json</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/32fadd11d5111c335bd36c59b4bcff03.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*mJ_2ubMr9jIcOqvjgmE1HA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><strong class="bd nd">angular.json</strong> is found in the top-level directory of any Angular project.</figcaption></figure><p id="6fb2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在JSON中，在<code class="fe ls lt lu lv b">"projects"</code>中应该有一个名为<code class="fe ls lt lu lv b">"assets"</code>的列表——这里我们需要添加到<code class="fe ls lt lu lv b">web.config</code>的路径，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/19ed13c53684b6d623c28de960dc28e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*E1ypfIMEpdyPGJuN2ieFNg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding <strong class="bd nd">web.config</strong> to our <strong class="bd nd">dist/</strong> assets in <strong class="bd nd">angular.json</strong>.</figcaption></figure><p id="0f23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！每当我们现在用<code class="fe ls lt lu lv b">ng build --prod</code>构建生产就绪的应用程序时，我们的<code class="fe ls lt lu lv b">web.config</code>文件将包含在<code class="fe ls lt lu lv b">dist/</code>目录中。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="68ed" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">添加JSON资产</h1><p id="afbe" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">如果我们使用与<code class="fe ls lt lu lv b">web.config</code>相同的方法来添加一个JSON文件——当运行我们的应用程序时，我们会很快找到<code class="fe ls lt lu lv b">404 File Not Found</code>。</p><p id="fbff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在将JSON文件添加到我们的<code class="fe ls lt lu lv b">dist/</code>中时，需要一个额外的步骤。回到我们的<code class="fe ls lt lu lv b">web.config</code>文件——就在<code class="fe ls lt lu lv b">&lt;rewrite&gt;</code>标签之前——我们需要添加:</p><pre class="kg kh ki kj gt nf lv ng nh aw ni bi"><span id="70e7" class="nj me iq lv b gy nk nl l nm nn">&lt;staticContent&gt;<br/>  &lt;mimeMap fileExtension=".json" mimeType="application/json" /&gt;  &lt;/staticContent&gt;</span></pre><p id="73c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这留给我们一个完整的<code class="fe ls lt lu lv b">web.config</code>脚本，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6b4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们简单地将我们的JSON文件添加到<code class="fe ls lt lu lv b">angular.json</code>中的<code class="fe ls lt lu lv b">"assets"</code>——就像我们对<code class="fe ls lt lu lv b">web.config</code>所做的那样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/543e23dc98b84cc35e67d52bf537901b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*E7aSGPBN_nzTzkcd0CGASQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Adding two JSON files, <strong class="bd nd">model.json</strong> and <strong class="bd nd">char2idx.json</strong> to our <strong class="bd nd">dist/</strong>.</figcaption></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="3594" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！我们已经将一个<code class="fe ls lt lu lv b">web.config</code>文件添加到我们的生产构建应用程序中，然后用<code class="fe ls lt lu lv b">&lt;mimeMap&gt;</code>映射JSON文件，并将它们包含在我们的应用程序中。</p><p id="a7b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有用，如果你有任何建议或问题，请通过<a class="ae kv" href="https://twitter.com/jamescalam" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或在下面的评论中告诉我。</p><p id="2398" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="36f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有兴趣了解如何使用Azure App Service将Angular应用程序部署到web，请随意查看这篇文章:</p><div class="np nq gp gr nr ns"><a href="https://towardsdatascience.com/how-to-deploy-web-apps-with-azure-52ca340b41b9" rel="noopener follow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">如何使用Azure部署Web应用</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">利用Angular和Azure应用服务快速轻松地部署应用</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Making use of built-in higher order array functions in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用JavaScript中内置的高阶数组函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/making-use-of-built-in-higher-order-array-functions-in-javascript-812f2ad37e12?source=collection_archive---------7-----------------------#2020-05-09">https://javascript.plainenglish.io/making-use-of-built-in-higher-order-array-functions-in-javascript-812f2ad37e12?source=collection_archive---------7-----------------------#2020-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1132" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一些例子，帮助你掌握减少，映射，过滤，一些，寻找，每。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e44a78f125f2b026fc2ee541dd145e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AAVfTZFD0xnS20_q"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@bharat_patil_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Bharat Patil</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0092" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">Array</code>是编程中最常见的数据结构。遍历是我们对数组最常见的操作之一。你知道有多少种方法可以循环一个数组吗？</p><h2 id="5f3c" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">for-索引</h2><p id="cbae" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">首先，数组是一种索引数据结构。我们可以遍历一个数组的索引。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7cd5" class="lw lx iq lv b gy my mz l na nb">var arr = ['a', 'b', 'c'];</span><span id="29d3" class="lw lx iq lv b gy nc mz l na nb">for (let i = 0; i &lt; arr.length; i++) {<br/>    console.log(arr[i]);<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/cd4345286d04ce2206e02c5d201f18bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0A7IWdB6WHLTMk2jN-Ov4g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">from Chrome console</figcaption></figure><h2 id="82c5" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">因为在</h2><p id="5b31" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">同时，在JavaScript中，我们可以通过for-in语法遍历对象的可枚举属性。所有的数组都是对象，所以我们也可以把这个应用到数组上。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="d512" class="lw lx iq lv b gy my mz l na nb">var arr = ['a', 'b', 'c'];</span><span id="f88d" class="lw lx iq lv b gy nc mz l na nb">for(let key in arr) {<br/>    console.log(arr[key]);<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/e72ec3200f746ed64c712455454e953a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VkQR9yMMKqc8fLIY7Qfh1A.png"/></div></div></figure><h2 id="1327" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">对于...来说</h2><p id="6508" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">ES2015在JavaScript中增加了<em class="nf">迭代器</em>。使用迭代器最简单的方法是新的<code class="fe ls lt lu lv b">for-of</code>语句。看起来是这样的:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="0c0c" class="lw lx iq lv b gy my mz l na nb">var arr = ['a', 'b', 'c'];</span><span id="7af7" class="lw lx iq lv b gy nc mz l na nb">for ( let element of arr) {<br/>    console.log(element);<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/19e686477920b88a2bef8bc4fee2abb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCWyyEEKT-uIZO-0XVk_9Q.png"/></div></div></figure></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="25aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的几个for循环是遍历数组的经典方法。毫无疑问，在代码中使用上述方法是没有错误的。但是我们的JavaScript是函数式编程语言，它为我们提供了很多高阶函数来循环数组。如果我们能够恰当地使用它们，我们可以使代码更加简洁和优雅，并启发我们从不同的角度进行思考。</p><p id="2492" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些高阶函数是:</p><ul class=""><li id="4ca2" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">Array.protorype.map</li><li id="ea36" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">Array.protorype.filter</li><li id="3133" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">Array.protorype.reduce</li><li id="ca3d" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">Array.protorype.some</li><li id="263f" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">Array.protorype.every</li></ul><h1 id="6b59" class="oc lx iq bd ly od oe of mb og oh oi me jw oj jx mh jz ok ka mk kc ol kd mn om bi translated">地图</h1><p id="125e" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated"><code class="fe ls lt lu lv b">map()</code>方法<strong class="ky ir">创建一个新的数组</strong>,用调用数组中每个元素的函数的结果填充。</p><p id="a3e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是<code class="fe ls lt lu lv b">reduce</code>的一个基本用法:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="54b8" class="lw lx iq lv b gy my mz l na nb">var arr = [1, 2, 3];</span><span id="6f91" class="lw lx iq lv b gy nc mz l na nb">function double(ele){<br/>  return ele * 2<br/>}</span><span id="669d" class="lw lx iq lv b gy nc mz l na nb">arr.map(double)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/52d638b52c845adc8d1420dd17ec705c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*bHIQeq5cfwMmHhJyohdgGQ.png"/></div></figure><p id="94a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">map</code>方法接受一个函数作为参数。然后为数组中的每个元素调用这个函数，函数调用的结果被返回以形成一个新的数组</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/d388f408ccbd991a16d3bd2ceb42a9fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-PNSIUWFnqL0F1G1z_rNrw.png"/></div></div></figure><p id="b258" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们用几个例子来看看<code class="fe ls lt lu lv b">reduce</code>方法是如何代替for-loop的。</p><h2 id="50ea" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">1.复制数组</h2><p id="f732" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">假设现在我们要复制一个数组(不考虑深度克隆)，你会怎么做？对于for-loop，我们可以这样写:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="edf6" class="lw lx iq lv b gy my mz l na nb">function copy(arr){<br/>  let newArray = [];<br/>  for(let ele of arr){<br/>    newArray.push(ele)<br/>  }<br/>  return newArray;<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/5165e58a72792b9e9df590cb4dbcd7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQ0EBGtFTK6kBv3BVOxStg.png"/></div></div></figure><p id="c56f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果你习惯用<code class="fe ls lt lu lv b">.map()</code>，只需要一行代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/91635893a332d7e2e7910327c5c6533b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U8yFVEEdosog-5dC3N7oDw.png"/></div></div></figure><h2 id="0594" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">2.遍历所有元素并执行相同的修改</h2><p id="97e2" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">假设我们有一个字符数组，我们希望数组中的所有元素都是大写字符串，那么我们该怎么做呢？</p><p id="ed70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">带for循环:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="56de" class="lw lx iq lv b gy my mz l na nb">var names = ["Jon", "Sonw", "bitfish", "Tom"];<br/>var upperCaseNames = [];<br/>for(let i = 0; i &lt; names.length ; i= i +1) {<br/>  upperCaseNames[i] = names[i].toUpperCase();<br/>}<br/>console.log(upperCaseNames)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/5168f05af9d058f8b06de392ed54ef90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*us0YnF5Sn9MO57nS6nol1Q.png"/></div></div></figure><p id="f1d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是有了<code class="fe ls lt lu lv b">map</code>，任务就很简单了。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="03cd" class="lw lx iq lv b gy my mz l na nb">var names = ["Jon", "Sonw", "bitfish", "Tom"];</span><span id="f344" class="lw lx iq lv b gy nc mz l na nb">var upperCaseNames = names.map(ele =&gt; ele.toUpperCase())</span><span id="f459" class="lw lx iq lv b gy nc mz l na nb">console.log(upperCaseNames)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/e457b08612906e3eb7a503a8282f9d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9gzPKwL27KyCXts98L8jw.png"/></div></div></figure><h1 id="5abe" class="oc lx iq bd ly od oe of mb og oh oi me jw oj jx mh jz ok ka mk kc ol kd mn om bi translated">过滤器</h1><p id="be82" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">在一个数组中过滤掉一些不合格的元素也是很常见的，那么我们该怎么写代码呢？</p><p id="8792" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们有一个整数数组，我们想删除所有的奇数，只保留偶数。</p><p id="2f67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">带for循环:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7692" class="lw lx iq lv b gy my mz l na nb">function filterOdd(arr){<br/>  function isEven(n) {<br/>    return n % 2 === 0;<br/>  }<br/>  var evens = [];</span><span id="39f6" class="lw lx iq lv b gy nc mz l na nb">  for(let number of numbers) {<br/>    if(isEven(number)) {<br/>       evens.push(number);<br/>    }<br/>  }<br/>  return evens;<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/3f907bad57d3a249a9b4f64462c5ab62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQnX1fhtVJLypMBhV5KjNg.png"/></div></div></figure><p id="8aad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">filter</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/5cea4a8270ad2aff63af30ae57abed42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JVmo9XqDBBW2Tq-DGRgOA.png"/></div></div></figure><p id="c467" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">filter()</code>方法<strong class="ky ir">创建一个新数组</strong>，其中所有通过测试的元素都由提供的函数实现。</p><h1 id="2f05" class="oc lx iq bd ly od oe of mb og oh oi me jw oj jx mh jz ok ka mk kc ol kd mn om bi translated">减少</h1><p id="0d92" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated"><code class="fe ls lt lu lv b">Array.prototype.reduce()</code>是数组中最强大的方法之一，也是JavaScript函数式编程中很有吸引力的特性。但是很遗憾，我发现很多朋友都不习惯用。我来详细介绍一下这个方法，希望能帮到你。</p><p id="bc33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是<code class="fe ls lt lu lv b">reduce</code>的一个基本用法:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="07ac" class="lw lx iq lv b gy my mz l na nb">var arr = [1, 2, 3];</span><span id="e6c5" class="lw lx iq lv b gy nc mz l na nb">function reducer(parmar1, parmar2){<br/>}</span><span id="1f39" class="lw lx iq lv b gy nc mz l na nb">arr.reduce(reducer)</span></pre><p id="3af6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">reduce</code>是一个关于数组原型对象的方法，可以帮助我们操作数组。它会将另一个函数作为它的参数，这个函数可以称为一个<code class="fe ls lt lu lv b">reducer</code>。</p><p id="b9d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">reducer</code>需要两个参数。第一个参数param1是上次减速器运行的结果。如果这是第一次运行<code class="fe ls lt lu lv b">reducer</code>，param1的默认值是数组第一个元素的值。</p><p id="658e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">reduce</code>方法遍历数组中的每个元素，就像在for循环中一样。并且循环中的电流值被取为param2。</p><p id="4409" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">遍历完数组后，<code class="fe ls lt lu lv b">reduce</code>将返回最后一次reducer计算的结果。</p><p id="1cc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看一个详细的例子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/17774e1a20c749b8ce82437e1c6e92fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JhBVIgnn_ierAWRN.png"/></div></div></figure><p id="f173" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们来探究一下上面的代码是如何执行的。</p><p id="2335" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段代码中，<code class="fe ls lt lu lv b">reducer</code>就是<code class="fe ls lt lu lv b">add</code>。</p><p id="aba6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一，因为我们第一次执行<code class="fe ls lt lu lv b">add</code>，数组中的第一个元素<code class="fe ls lt lu lv b">'a'</code>会被当作<code class="fe ls lt lu lv b">add</code>的第一个参数，然后循环会从数组的第二个元素<code class="fe ls lt lu lv b">'b'</code>开始。这次，<code class="fe ls lt lu lv b">'b'</code>是<code class="fe ls lt lu lv b">add</code>的第二个参数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/1a84b084aa39fef6d9f5892409ef90cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4BJmwe6H3AWfjq2a.png"/></div></div></figure><p id="2b88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一次计算后，我们得到结果<code class="fe ls lt lu lv b">'ab'</code>。该结果将被缓存并在下一次<code class="fe ls lt lu lv b">add</code>计算中用作param1。同时，数组中的第三个参数<code class="fe ls lt lu lv b">'c'</code>将作为<code class="fe ls lt lu lv b">add</code>的param2。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/7bee09223a45241b161677736817db44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*t8KBTXw_oU3gQZaZ.png"/></div></div></figure><p id="7ce5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，<code class="fe ls lt lu lv b">reduce</code>将继续遍历数组中的元素，运行<code class="fe ls lt lu lv b">'abc'</code>和<code class="fe ls lt lu lv b">'d'</code>作为<code class="fe ls lt lu lv b">add</code>的参数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/3479260c168a99abc947f1cbc2ad56d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Bdb7EVTik-xF7j6I.png"/></div></div></figure><p id="11a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，遍历完数组中的最后一个元素后，将返回计算结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/0062552e5f5113124de724b38a488164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dqJZYSfGgi1ZsBpJ.png"/></div></div></figure><p id="e35c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了结果:<code class="fe ls lt lu lv b">'abcde'</code>。</p><p id="5a41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，我们可以看到<code class="fe ls lt lu lv b">reduce</code>也是一种循环数组的方式！它依次取数组中每个元素的值，并执行<code class="fe ls lt lu lv b">reducer</code>函数。</p><p id="0e9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们可以看到上面的循环并没有那种和谐的美感。因为我们取数组中的第一个元素，也就是<code class="fe ls lt lu lv b">'a'</code>，作为初始param1，然后从数组中的第二个元素开始循环得到param2。</p><p id="b93b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，我们可以将<code class="fe ls lt lu lv b">reduce</code>中的第二个参数指定为<code class="fe ls lt lu lv b">reducer</code>函数的param1的初始值，所以param2将从数组中的第一个元素开始循环得到。</p><p id="359c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/51e89b65c0a8d3187986f5d3579f9b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6UazcUazqYtlwx8i.png"/></div></div></figure><p id="00b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这次我们在第一次调用<code class="fe ls lt lu lv b">reducer</code>的时候把<code class="fe ls lt lu lv b">'s'</code>作为param1，然后从第一个元素开始依次遍历数组。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/8c9a969e0669c06d204a812b52cf7b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-m878t_5zZXLK_bW.png"/></div></div></figure><p id="66e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以我们可以用这个语法来重写我们的第一段代码。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="bcab" class="lw lx iq lv b gy my mz l na nb">var arr = ['a', 'b', 'c', 'd', 'e'];function add(x, y) {<br/>    return x + y;<br/>}arr.reduce(add, '')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/c096574bd59893321d8ae14e8f40ea16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oQztDxR1_eq1DBMU.png"/></div></div></figure><p id="8e38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，以上就是<code class="fe ls lt lu lv b">reduce</code>法的基本介绍。让我们回到开头的例子。</p><p id="1ee1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们用几个例子来看看<code class="fe ls lt lu lv b">reduce</code>方法是如何代替for-loop的。</p><h2 id="3781" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">1.累积和累积乘法</h2><p id="24df" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">如果我们想得到数字数组中所有元素的和，你会怎么做？</p><p id="275a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一般来说，你可以这样写:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pf"><img src="../Images/064c594d384e9534ebf5b69560de4aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKvHeWjgc_sJqwXBBawSDg.png"/></div></div></figure><p id="267a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以使用<code class="fe ls lt lu lv b">for-in</code>或者<code class="fe ls lt lu lv b">for-of</code>来代替，但是只要你使用for循环，代码就会显得多余。在这种情况下，<code class="fe ls lt lu lv b">Array.prototype.reduce</code>可以帮助我们更好地编写代码。</p><p id="a247" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后让我们看看上面的累加函数是做什么的:</p><ul class=""><li id="d532" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">将初始<code class="fe ls lt lu lv b">sum</code>设置为零</li><li id="c9f6" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">取出数组中的第一个元素并求和</li><li id="5718" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">在<code class="fe ls lt lu lv b">sum</code>中缓存上一步的结果</li><li id="c8ee" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">依次取出数组中的其他元素，执行上述操作</li><li id="7d23" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">返回最终结果</li></ul><p id="59ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以看到，当我们用通俗易懂的英语描述上述步骤时，很明显符合<code class="fe ls lt lu lv b">reduce</code>的用法。所以我们可以用<code class="fe ls lt lu lv b">reduce</code>重写上面的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="d5b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您习惯使用箭头函数，上面的代码看起来会更简洁:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="799d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有代码都在一行中！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/2a993bcbf5489989c37fb5403ad4d78d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yKRTn8Sl6aAG1UbK.png"/></div></div></figure><p id="d178" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，累积乘法和累加是完全一样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/3447b272a62563fa213a190fddefdca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bOOVia5fWKpggESX.png"/></div></div></figure><p id="c3bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很多时候我们在总结的时候需要加一个砝码，这样更能体现出<code class="fe ls lt lu lv b">reduce</code>的优雅。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="a72e" class="lw lx iq lv b gy my mz l na nb">const scores = [<br/>  { score: 90, subject: "HTML", weight: 0.2 },<br/>  { score: 95, subject: "CSS", weight: 0.3 },<br/>  { score: 85, subject: "JavaScript", weight: 0.5 }<br/>];</span><span id="d34f" class="lw lx iq lv b gy nc mz l na nb">const result = scores.reduce((x, y) =&gt; x + y.score * y.weight, 0); </span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/a044fc40ee68373b6333313947775c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*85bIOEJ8RlpGo1XN.png"/></div></div></figure><h2 id="23d3" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">2.获取数组的最大值和最小值</h2><p id="c5dc" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">如果你想得到一个数组的最大值和最小值，你可以这样写:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="178c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和以前一样。如果我们使用<code class="fe ls lt lu lv b">reduce</code>，我们可以在一行代码中完成。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="9df4" class="lw lx iq lv b gy my mz l na nb">let arr = [3.24, 2.78, 999];</span><span id="0e8a" class="lw lx iq lv b gy nc mz l na nb">arr.reduce((x, y) =&gt; Math.max(x, y));</span><span id="46eb" class="lw lx iq lv b gy nc mz l na nb">arr.reduce((x, y) =&gt; Math.min(x, y));</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/aa025c793960d99483a450de81648225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c39qJQr7Vv2oLdTd.png"/></div></div></figure><h2 id="4266" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">3.计算数组中元素的频率</h2><p id="7c66" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我们经常需要计算数组中每个元素出现的次数。根据for循环的语法，我们可以这样写</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pk"><img src="../Images/23145f729a7859a888c03e65d975c74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eh-dvREg9Zc5uvUEmrGUhQ.png"/></div></div></figure><p id="c204" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">reduce</code>方法也可以帮助我们以不同的方式实现这一点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="19f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，我们使用map对象而不是object来存储统计后的频率，因为数组中的元素可能是object类型，而object的key只能是string或symbol类型。</p><p id="e9f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有两个例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/ec13dafab1459147b215363b16d7bf86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CMVGBFYnHdrw1mFe.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/4d56fee9874bd0eadae8d4898e7dde77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EavyI_gEv0EeKNNB.png"/></div></div></figure><p id="c2be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，如果要统计字符串中每个字符的出现频率，可以先将字符串转换为字符数组，然后按照上面的方法进行。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd pe l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/61dcf222042ae7561f8145f2f97f2a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-al5dbKjj4w9J4CT.png"/></div></div></figure><p id="09ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为字符类型可以用作对象的键，所以我们在这里不使用Map。</p><h1 id="50a8" class="oc lx iq bd ly od oe of mb og oh oi me jw oj jx mh jz ok ka mk kc ol kd mn om bi translated">一些</h1><p id="0060" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我们可能经常检查一个数组是否包含一个满足条件的值。例如，检查数字数组中的任何元素是否是7的倍数。</p><p id="1c52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">带for循环:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="f84d" class="lw lx iq lv b gy my mz l na nb">var numbers = [233, 324, 5666, 324, 456];</span><span id="6c20" class="lw lx iq lv b gy nc mz l na nb">function hasMutipleOfSeven(numbers){<br/>  for (let number of numbers) {<br/>    if(number % 7 === 0) {<br/>      return true<br/>    }<br/>  }<br/>  return false<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/737849c4eb0b826950068063b41d8519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9s9JxnVLqbQ09k30g4rD4A.png"/></div></div></figure><p id="fd0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">some()</code>方法测试数组中是否至少有一个元素通过了由提供的函数实现的测试。它返回一个布尔值。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="0f94" class="lw lx iq lv b gy my mz l na nb">var numbers = [233, 324, 5666, 324, 456];</span><span id="bbcb" class="lw lx iq lv b gy nc mz l na nb">numbers.some(ele =&gt; ele % 7 === 0)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/23c5e58f9c307c74f992fd7053a6de89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UvsI0bkNpDTVpgsPA1G2ig.png"/></div></div></figure><h1 id="06ef" class="oc lx iq bd ly od oe of mb og oh oi me jw oj jx mh jz ok ka mk kc ol kd mn om bi translated">每个</h1><p id="2628" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">有时我们需要检查数组中的每个元素是否满足某个条件。</p><p id="3f2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们希望检查字符数组中所有元素的第一个字母都是大写的。</p><p id="c84a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">带for循环:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="332f" class="lw lx iq lv b gy my mz l na nb">var strArray = ["Tom", "bitfish", "Jerry"]</span><span id="6616" class="lw lx iq lv b gy nc mz l na nb">function checkFistLetter(arr){<br/>  for(let str of arr){<br/>    let firstLetter = str.charAt(0);<br/>    if(firstLetter &lt; "a" || firstLetter &gt; "z"){<br/>      return false<br/>    }<br/>  }<br/>  return true<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/f36047c18d42f87b7f44b2eb17639c63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hq_USPreYJv8zwP3HNtHDg.png"/></div></div></figure><p id="64d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">every()</code>方法测试数组中的所有元素是否都通过了由提供的函数实现的测试。它返回一个布尔值。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="e61f" class="lw lx iq lv b gy my mz l na nb">var strArray = ["Tom", "bitfish", "Jerry"]</span><span id="af81" class="lw lx iq lv b gy nc mz l na nb">strArray.every(str =&gt; {<br/>  let firstLetter = str.charAt(0);<br/>  if(firstLetter &lt; "a" || firstLetter &gt; "z"){<br/>    return false<br/>  }<br/>})</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/e787c2831e859d00596c542cec3c42db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5rQYDBfoFRMAcyMgu2uOw.png"/></div></div></figure></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="bfc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这些高阶函数来遍历数组使得我们的代码更具语义性和可读性。同时，不要忘记JavaScript是一种函数式编程语言，这些高阶函数的使用可以让我们习惯用函数式编程的思维去思考。</p><p id="054a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，感谢你读到这里，希望这篇文章对你有所帮助。</p><h2 id="4544" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="7f46" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">你知道我们有四种出版物吗？给他们一个关注来表达爱意吧:<a class="ae kv" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="ky ir">JavaScript in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ky ir">AI in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ky ir">UX in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ky ir">Python in Plain English</strong></a><strong class="ky ir"/>—谢谢，继续学习！</p><p id="94bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kv" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">submissions @ plain English . io</strong></a><strong class="ky ir"/>，并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
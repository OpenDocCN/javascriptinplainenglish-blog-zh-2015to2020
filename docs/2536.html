<html>
<head>
<title>Useful JavaScript Tips — Object Freezing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的JavaScript技巧——对象冻结</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/useful-javascript-tips-object-freezing-a6e55c1f3a96?source=collection_archive---------4-----------------------#2020-07-03">https://javascript.plainenglish.io/useful-javascript-tips-object-freezing-a6e55c1f3a96?source=collection_archive---------4-----------------------#2020-07-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d28361d179c9d5b38ae2fd23ad2aa87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EeJk-z7DyObfcNtW"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@adrienolichon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adrien Olichon</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bb46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些应该遵循的技巧，以便更快更好地编写JavaScript代码。</p><h1 id="304b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查对象的原型</h1><p id="421b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用一个对象的<code class="fe me mf mg mh b">isPrototypeOf</code>方法来检查另一个对象是否是一个对象的原型。</p><p id="18e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7659" class="mq lc iq mh b gy mr ms l mt mu">const animal = {<br/>  name: 'james'<br/>}</span><span id="bf03" class="mq lc iq mh b gy mv ms l mt mu">const dog = Object.create(animal);</span></pre><p id="f44a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来调用<code class="fe me mf mg mh b">isPrototypeOf</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8960" class="mq lc iq mh b gy mr ms l mt mu">animal<!-- -->.isPrototypeOf(dog)</span></pre><p id="0df7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个表达式将返回<code class="fe me mf mg mh b">true</code>，因为我们通过<code class="fe me mf mg mh b">animal</code>进入了<code class="fe me mf mg mh b">Object.create</code>。</p><p id="9806" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ac2" class="mq lc iq mh b gy mr ms l mt mu">const cat = {};</span></pre><p id="0317" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="10f3" class="mq lc iq mh b gy mr ms l mt mu">animal.isPrototypeOf(cat)</span></pre><p id="6864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回<code class="fe me mf mg mh b">false</code>。</p><h1 id="ed3a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查对象是否有给定的属性</h1><p id="7697" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">hasOwnProperty</code>方法来检查一个对象是否有给定的属性。</p><p id="f91a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它检查一个属性是否是对象的非继承属性。</p><p id="3c21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6590" class="mq lc iq mh b gy mr ms l mt mu">const person = { name: 'james' };<br/>const hasName = person.hasOwnProperty('name');</span></pre><p id="ea20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以检查<code class="fe me mf mg mh b">name</code>属性是否在带有<code class="fe me mf mg mh b">hasOwnProperty</code>的<code class="fe me mf mg mh b">person</code>对象中。</p><p id="8e0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">散列<code class="fe me mf mg mh b">hasName</code>将是<code class="fe me mf mg mh b">true</code>，因为<code class="fe me mf mg mh b">name</code>是<code class="fe me mf mg mh b">person</code>的属性。</p><h1 id="79c9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从对象中获取所有属性值</h1><p id="ab23" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">Object.values()</code>方法获得一个对象的所有属性值。</p><p id="53f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a0fa" class="mq lc iq mh b gy mr ms l mt mu">const person = { name: 'james', age: 7 };<br/>const values = Object.values(person);</span></pre><p id="b5e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">values</code>就是<code class="fe me mf mg mh b">[“james”, 7]</code>。</p><h1 id="8353" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置对象的原型</h1><p id="a998" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">可以在创建对象后设置对象的原型。</p><p id="bbf4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">setPrototypeOf</code>方法来完成。</p><p id="5908" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fd0c" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};</span><span id="4aef" class="mq lc iq mh b gy mv ms l mt mu">const animal = {<br/>  name: 'james',<br/>  age: 7<br/>};</span><span id="aee8" class="mq lc iq mh b gy mv ms l mt mu">Object.setPrototypeOf(dog, animal);</span></pre><p id="6c29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setPrototypeOf</code>是<code class="fe me mf mg mh b">Object</code>的静态方法。</p><p id="6beb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">dog</code>是我们要设置原型的对象。</p><p id="423f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">animal</code>是我们想要设定<code class="fe me mf mg mh b">dog</code>的原型。</p><p id="77b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="84f7" class="mq lc iq mh b gy mr ms l mt mu">console.log(dog.name);</span></pre><p id="ff2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">'james'</code>作为<code class="fe me mf mg mh b">dog.name</code>的值，因为<code class="fe me mf mg mh b">dog</code>从<code class="fe me mf mg mh b">animal</code>继承属性。</p><h1 id="7a35" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">密封物体</h1><p id="dacc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">密封一个对象意味着我们阻止一个对象接受新的属性。</p><p id="be47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们防止属性被删除。</p><p id="d168" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">Object.seal</code>方法来防止属性改变。</p><p id="e914" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="78c8" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};</span><span id="3b24" class="mq lc iq mh b gy mv ms l mt mu">Object.seal(dog);</span></pre><p id="6324" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">dog</code>是密封的，因此我们不能在其中添加或删除属性。</p><p id="e3aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有比<code class="fe me mf mg mh b">seal</code>做得更少的<code class="fe me mf mg mh b">Object.freeze</code>方法。</p><p id="83c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了<code class="fe me mf mg mh b">seal</code>所做的，它没有使属性不可写。</p><p id="15ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="554b" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};</span><span id="dd76" class="mq lc iq mh b gy mv ms l mt mu">Object.freeze(dog);</span></pre><p id="4b0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有一个<code class="fe me mf mg mh b">preventExtensions</code>方法不允许添加属性。</p><p id="9ea6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们把它叫做<code class="fe me mf mg mh b">seal</code>和<code class="fe me mf mg mh b">freeze</code>。</p><h1 id="ed48" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Object.keys方法获取非继承的字符串键</h1><p id="6042" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">Object.keys</code>方法从一个对象获得非继承的字符串键。</p><p id="37d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3e74" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};<br/>const keys = Object.keys(dog);</span></pre><p id="81ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">keys</code>的值就是<code class="fe me mf mg mh b">[“breed”]</code>。</p><p id="d438" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个数组，所以我们可以像处理其他数组一样处理它们。</p><h1 id="d0cd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查物体是否密封</h1><p id="536c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.isSealed</code>方法让我们检查一个对象是否被密封。</p><p id="dc69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="90b4" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};<br/>const isSealed = Object.<!-- -->isSealed<!-- -->(dog);</span></pre><p id="cc03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">isSealed</code>是<code class="fe me mf mg mh b">false</code>，因为我们没有在<code class="fe me mf mg mh b">dog</code>上调用<code class="fe me mf mg mh b">Object.seal</code>。</p><p id="6c1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦对象被密封，它就不能被解封。</p><h1 id="2ee5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查物体是否冻结</h1><p id="0383" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">Object.isFrozen</code>方法来检查对象是否冻结。</p><p id="2864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e57b" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};<br/>const isFrozen = Object.isFrozen(dog);</span></pre><p id="c723" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以检查一个物体是否冻结。</p><p id="cfae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">isFrozen</code>应该是<code class="fe me mf mg mh b">false</code>，因为<code class="fe me mf mg mh b">dog</code>没有冻结。</p><h1 id="9c38" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查我们是否可以向对象添加属性</h1><p id="9d30" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.isExtensible</code>方法让我们检查是否可以给一个对象添加一个属性。</p><p id="a4a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除非一个对象被传递到<code class="fe me mf mg mh b">Object.freeze</code>、<code class="fe me mf mg mh b">Object.seal</code>或<code class="fe me mf mg mh b">Object.preventExtensions</code>方法中，否则我们可以给它添加属性。</p><p id="b5d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过写下来调用<code class="fe me mf mg mh b">isExtensible</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5f58" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>};<br/>const isExtensible = Object.isExtensible(dog);</span></pre><p id="fda9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">isExtensible</code>就是<code class="fe me mf mg mh b">true</code>了，因为我们没有密封或者冷冻<code class="fe me mf mg mh b">dog</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/796fbf559021631f4b9de2315fcbeab4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UOPtn_G_8pPzAiUD"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@eugenivy_reserv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Євгенія Височина</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1ceb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="961d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以对我们可能错过的物体做很多事情。</p><p id="2e11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以阻止对象更改或添加/删除属性。</p><p id="126d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以检查对象是否可以更改。</p><h2 id="d30b" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">坦白地说</h2><p id="0c5c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
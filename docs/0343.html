<html>
<head>
<title>How to Add to an Array in React State using Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用钩子在反应状态下添加到数组中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-to-an-array-in-react-state-3d08ddb2e1dc?source=collection_archive---------0-----------------------#2019-09-22">https://javascript.plainenglish.io/how-to-add-to-an-array-in-react-state-3d08ddb2e1dc?source=collection_archive---------0-----------------------#2019-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9254" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><code class="fe kf kg kh ki b">.push()</code>函数将不起作用，但是当状态是一个JavaScript数组时,<code class="fe kf kg kh ki b">.concat()</code>函数可以更新React中的状态——扩展操作符<code class="fe kf kg kh ki b">…</code>也可以。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/7bd8e4eb7808541970c60184c62c9516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fK0ci9qoeezgAPm2"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@glenncarstenspeters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Glenn Carstens-Peters</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="la"><p id="6989" class="lb lc iq bd ld le lf lg lh li lj lk dk translated">“最常见的问题之一是如何在React状态下将项目添加到数组中。因为不允许直接改变状态，所以不能简单地将一个项推送到数组中。— <a class="ll lm ep" href="https://medium.com/u/a8b7f59b1b73?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank"> Robin Wieruch </a>在一篇<a class="ae kz" href="https://www.robinwieruch.de/react-state-array-add-update-remove" rel="noopener ugc nofollow" target="_blank"> 2018博客文章</a></p></blockquote><p id="6a4d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di"> W </span>当<a class="ae kz" href="https://reactjs.org/docs/faq-state.html" rel="noopener ugc nofollow" target="_blank"> React state </a>是一个数组时，如何向数组中添加条目并不明显，比如当试图使用<a class="ae kz" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React钩子</a>更新状态时。</p><p id="6941" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">当state是一个项目列表时，可能会出现这个问题。在本文中，我探索了一个用户最近输入的搜索查询的例子。</p><p id="5ce3" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">一个更复杂的例子是将JavaScript对象列表作为数组存储在React状态中，比如学生记录。</p><p id="8d2f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">问题是如何在React状态下将一个项目添加到数组中？</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mw"><img src="../Images/05839a0406d08568a9bc4143e659c7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*90svKx6L1aWyZSVO"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@emmamatthews?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Emma Matthews</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="44bb" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">将反应状态创建为数组</h1><p id="a023" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di">一个使用<a class="ae kz" href="https://reactjs.org/docs/hooks-overview.html" rel="noopener ugc nofollow" target="_blank"> React钩子</a>来保存条目列表的</span>典型代码示例将使用类似<code class="fe kf kg kh ki b">useState([])</code>的调用来初始化React状态。</p><blockquote class="la"><p id="e472" class="lb lc iq bd ld le nu nv nw nx ny lk dk translated">“<code class="fe kf kg kh ki b">useState</code>是一个钩子[……]我们在一个函数组件内部调用它来给它添加一些本地状态。React将在重新渲染之间保持这种状态。— <a class="ae kz" href="https://reactjs.org/docs/hooks-overview.html" rel="noopener ugc nofollow" target="_blank">反应文件</a></p></blockquote><p id="048f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh lk ij bi translated">用 <code class="fe kf kg kh ki b"><a class="ae kz" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">useState</a></code> <a class="ae kz" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">钩</a>称之为<a class="ae kz" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">。在这个例子中，命令<code class="fe kf kg kh ki b">useState([])</code>初始化状态以包含空数组<code class="fe kf kg kh ki b">[]</code>。</a></p><p id="ec33" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">数组<a class="ae kz" href="https://daveceddia.com/usestate-hook-examples/" rel="noopener ugc nofollow" target="_blank">是传递给</a> <code class="fe kf kg kh ki b"><a class="ae kz" href="https://daveceddia.com/usestate-hook-examples/" rel="noopener ugc nofollow" target="_blank">useState()</a></code>的有效参数，如下所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="ac3a" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">在下一节中，我将尝试各种方法来添加到当前处于React状态的数组中——通过<code class="fe kf kg kh ki b">searches</code>可以访问，通过<code class="fe kf kg kh ki b">setSearches</code>可以改变。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ob"><img src="../Images/e4a49d37b14d8d1bad63e7156a412c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7wMqSaugt_-QDzRi"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@giamboscaro?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Giammarco Boscaro</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b78d" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">如何推入处于反应状态的数组</h1><p id="826a" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di">我的第一个想法是使用<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push" rel="noopener ugc nofollow" target="_blank">.push()</a></code>将一个项目添加到React状态，这是一个典型的JavaScript方法，用于添加到数组的末尾。</span></p><p id="8fc3" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated"><code class="fe kf kg kh ki b">.push()</code>方法是在<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" rel="noopener ugc nofollow" target="_blank"> Array.prototype </a>上定义的，所以在数组上使用<a class="ae kz" href="https://medium.com/dailyjs/dot-notation-vs-bracket-notation-eedea5fa8572" rel="noopener">点引用操作符</a>调用它，如下所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="1835" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">我想在React状态下添加到数组中，所以尝试在列表末尾添加一个新项目，从而更新状态，这似乎是有意义的。</p><p id="fdab" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">不幸的是，代码<code class="fe kf kg kh ki b">searches.push()</code>在React中不起作用:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oc"><img src="../Images/bf8c395f3fa74fca3c71f31dab67d5f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xsz4r3XfvNY2NLTa_GbsFw.png"/></div></div></figure><p id="bd9c" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">难就难在当我真的试图以这种方式保存React State搜索词时，什么也没发生——没有错误，什么也没有。这是怎么回事？</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi od"><img src="../Images/f970e70aba4551b84f5ac04873924701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KnS0DmvBkVFVdKCl"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2a49" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">我忘记使用React钩子设置器了</h1><p id="60bf" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">它不工作的原因是我试图直接修改React状态——虽然<code class="fe kf kg kh ki b">.push()</code>确实修改了在变量<code class="fe kf kg kh ki b">searches</code>中找到的数组，但是修改没有“挂钩”到React来更新重新渲染。</p><p id="fedc" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">React钩子需要一个特定的setter函数，这是最初从<code class="fe kf kg kh ki b">useState</code>调用返回的第二部分，我称之为<code class="fe kf kg kh ki b">setSearches</code>。</p><blockquote class="la"><p id="1095" class="lb lc iq bd ld le nu nv nw nx ny lk dk translated">"<code class="fe kf kg kh ki b">useState</code>返回一对:当前的<em class="oe">状态值和一个让你更新它的函数。"— <a class="ae kz" href="https://reactjs.org/docs/hooks-overview.html" rel="noopener ugc nofollow" target="_blank">反应文件</a></em></p></blockquote><p id="086f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh lk ij bi translated">换句话说，在React中，<a class="ae kz" href="https://www.freecodecamp.org/news/handling-state-in-react-four-immutable-approaches-to-consider-d1f5c00249d5/" rel="noopener ugc nofollow" target="_blank">状态应该被认为是不可变的</a>，因此不应该被直接改变(或变异)。</p><p id="20c8" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">这就是为什么React状态本身(<code class="fe kf kg kh ki b">searches</code>变量和<code class="fe kf kg kh ki b">setSearches</code>钩子)被定义为使用<code class="fe kf kg kh ki b">const</code>的常量——作为提醒。</p><p id="4658" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">这是有意的，这意味着用React钩子更新状态涉及到由<code class="fe kf kg kh ki b">useState()</code>返回的相关setter函数。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi of"><img src="../Images/96e9e3d58f69e2bd24011ef561fd21a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Nx1PxG2hpBIKWtl"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@epicantus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daria Nepriakhina</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3d04" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated"><code class="fe kf kg kh ki b">setSearches(searches.push(query))</code>不起作用</h1><p id="0efa" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">从React钩子中敲击setter函数中的<code class="fe kf kg kh ki b">.push()</code>也不起作用，尽管看起来似乎应该这样。</p><p id="0561" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">事实上，<code class="fe kf kg kh ki b">setSearches(searches.push(query))</code>与<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" rel="noopener ugc nofollow" target="_blank">TypeError</a></code>一起崩溃:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi og"><img src="../Images/b668bead01ef268850c7eb984a64f03b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuCvWCNJpDMG5NVyGa1nWw.png"/></div></div></figure><p id="b9c1" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">在这种情况下，<strong class="lp ir">app坏了</strong>我大概是<strong class="lp ir">慌了！</strong></p><p id="34ac" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">幸运的是，工作方案与上面非常相似，只是用<code class="fe kf kg kh ki b">.concat()</code>代替了<code class="fe kf kg kh ki b">.push()</code>函数调用。</p><p id="76e6" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">但是为什么<code class="fe kf kg kh ki b">searches.push()</code>会失败，为什么<code class="fe kf kg kh ki b">.concat()</code>会工作？</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oh"><img src="../Images/0de2f20f2a6401e34558c05652f1b4dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OTAC6orcaRJZQ5Fo"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@synkevych?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Roman Synkevych</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1328" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">为什么<code class="fe kf kg kh ki b">.push()</code>用React钩子会失败？</h1><p id="2115" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">前面的代码示例不起作用，因为<code class="fe kf kg kh ki b">.push()</code>返回的是修改后数组的长度，而不是数组本身。</p><p id="7146" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">React Hooks setter函数<code class="fe kf kg kh ki b">setSearches()</code>，也被称为reducer 的<a class="ae kz" href="https://redux.js.org/basics/reducers" rel="noopener ugc nofollow" target="_blank">，将当前状态更新为传入的值。</a></p><p id="d663" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">在上面的例子中，状态已经从一个数组更新为一个数字——这就是为什么<code class="fe kf kg kh ki b">TypeError</code>是那个<code class="fe kf kg kh ki b">searches.map is not a function</code>。</p><p id="b45e" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">反应状态<code class="fe kf kg kh ki b">searches</code>从其状态<code class="fe kf kg kh ki b">[]</code>被替换为跟随<code class="fe kf kg kh ki b">.push</code> — <code class="fe kf kg kh ki b">.length</code>的数组长度变为1，因此搜索现在是<code class="fe kf kg kh ki b">1</code>。</p><p id="486f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">虽然<code class="fe kf kg kh ki b">[]<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">.map()</a></code>工作正常，但是代码<code class="fe kf kg kh ki b">1<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">.map()</a></code>在JavaScript中是无意义的。</p><p id="e3f4" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">我需要将更新后的状态直接传递给React Hooks状态设置器(reducer函数)，<code class="fe kf kg kh ki b">setSearches</code>，而不是直接改变旧的状态。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oi"><img src="../Images/15428281915e6d4a0c4eed4b14d84ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jGnqaar5Ze3I2Fcv"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@goumbik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lukas Blazek</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="bbed" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">解决方法是。concat()</h1><p id="cc5d" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di">到</span>救援就是<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" rel="noopener ugc nofollow" target="_blank">Array.prototype.concat()</a></code> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" rel="noopener ugc nofollow" target="_blank">方法</a>，简称<em class="oj">串联</em>，工作原理和<code class="fe kf kg kh ki b">.push()</code>差不多，只是有点曲折。</p><p id="ec8e" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated"><code class="fe kf kg kh ki b">.concat()</code>更新状态的原因是<code class="fe kf kg kh ki b">.concat()</code>创建一个新数组，保持旧数组不变，然后返回改变后的数组。</p><p id="c41f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">另一方面，<code class="fe kf kg kh ki b">.push()</code>就地对旧数组进行变异，但返回变异后数组的长度，而不是变异后数组本身。</p><p id="a916" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">因此，使用<code class="fe kf kg kh ki b">.push()</code>意味着状态被新数组的长度覆盖——这是一个简单的错误，因为不知道<code class="fe kf kg kh ki b">.push()</code>返回了什么。</p><p id="0f2d" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">下面的代码将起作用，因为<code class="fe kf kg kh ki b">.concat()</code>返回一个新的、更新的数组:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ok"><img src="../Images/e258ea817dea50a014298acabcbab610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BDJUT91LqKEiUhGYYnlVA.png"/></div></div></figure><p id="d05f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">考虑到React中状态的不变性，我使用了<code class="fe kf kg kh ki b">.concat()</code>来实现在React状态下将一个项目添加到数组末尾的结果。</p><p id="a050" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">如果我想把这个项目放在列表的前面，我只需要像这样颠倒操作的顺序:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="80b3" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">但是，我遗漏了一个重要的步骤——<strong class="lp ir">使用“包装函数”可以防止快速更新的React组件中的错误</strong>。</p><p id="56b9" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">我将在下一节解释如何使用ES6特性<code class="fe kf kg kh ki b">…</code>(扩展操作符)以及<strong class="lp ir"> <em class="oj">包装函数</em> </strong>的潜在好处。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ol"><img src="../Images/1458056e6ef59176d55a25e4d8621e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YSrvWnone68joMHf"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@asthetik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mike Kenneally</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e6e1" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">最佳解决方案:展开操作符<code class="fe kf kg kh ki b">…</code> &amp;一个包装器</h1><p id="6f67" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">在复制和组合数组时，<span class="l mj mk ml bm mm mn mo mp mq di">T</span>he<a class="ae kz" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener">JavaScript spread运算符</a> ( <code class="fe kf kg kh ki b">…</code>)会有所帮助，因此它也可以用于在React状态下向数组添加一个项。</p><ul class=""><li id="9cdc" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated"><code class="fe kf kg kh ki b">[...searches, query]</code>将一个项目追加到数组的末尾</li><li id="e081" class="om on iq lp b lq ov lt ow lw ox ma oy me oz lk or os ot ou bi translated"><code class="fe kf kg kh ki b">[query, ...searches]</code>在数组前面添加一个项目</li></ul><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="33b1" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">注意，在代码示例中，我还使用了一个<strong class="lp ir"> <em class="oj">包装函数</em></strong>——我没有传递状态，而是传递了一个接受当前状态的回调函数。</p><ul class=""><li id="2d78" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated"><code class="fe kf kg kh ki b">setSearches(searches =&gt; searches.concat(query))</code>同<code class="fe kf kg kh ki b">.concat()</code></li><li id="e57b" class="om on iq lp b lq ov lt ow lw ox ma oy me oz lk or os ot ou bi translated"><code class="fe kf kg kh ki b">setSearches(searches =&gt; [...searches, query]) </code>同<code class="fe kf kg kh ki b">…</code>展开</li></ul><p id="fb05" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">在传递给<code class="fe kf kg kh ki b">setSearches</code>钩子的<strong class="lp ir"> <em class="oj">包装函数</em> </strong>中，我通过使用<code class="fe kf kg kh ki b">.concat()</code>或<code class="fe kf kg kh ki b">[...searches, query]</code>使用<a class="ae kz" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener">扩展运算符</a> <code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab" rel="noopener">…</a></code>返回更新后的状态<code class="fe kf kg kh ki b">searches</code>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pa"><img src="../Images/48701a63786e81d90d923e186276449f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4-6fmDm2N73LHWDd"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@benchaccounting?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Bench Accounting</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="24a9" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">为什么要使用<strong class="ak"> <em class="oe">包装函数</em> </strong>？</h1><p id="6ec2" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di"> U </span>唱一个<strong class="lp ir"> <em class="oj">包装函数</em> </strong>在React Hooks setter函数里面是一个比仅仅使用<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" rel="noopener ugc nofollow" target="_blank">.concat()</a> </code>或者<code class="fe kf kg kh ki b">…</code>实现更好的解决方案。</p><p id="7a06" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated"><a class="ll lm ep" href="https://medium.com/u/549bf5d1e531?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank"> Jasper Dunn </a>写了<a class="ae kz" href="https://medium.com/@jasperdunn93/in-most-situations-its-best-to-use-the-state-param-inside-the-setter-function-itself-2e054c6c3734" rel="noopener">来回应</a>这篇关于在使用React状态时总是使用<strong class="lp ir"> <em class="oj">包装函数</em> </strong>的优点的文章:</p><blockquote class="la"><p id="4fdf" class="lb lc iq bd ld le nu nv nw nx ny lk dk translated">从初始挂钩访问的“searches”的值可能与预期的不同，这可能会[导致]不必要的副作用。— <a class="ll lm ep" href="https://medium.com/u/549bf5d1e531?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank">贾斯珀·邓恩</a></p></blockquote><p id="8bc0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh lk ij bi translated">强烈建议使用<strong class="lp ir"> <em class="oj">包装函数</em> </strong>，以便在重新渲染实际发生时访问当前状态，而不是在其他时间。</p><p id="061b" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated"><strong class="lp ir"> <em class="oj">包装函数</em> </strong>也被称为<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">回调函数</a>，因为它指的是将一个函数传递给另一个函数。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pb"><img src="../Images/de0a4a5b0e163a8560bc0a107e871f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*to6LFCJj3bKr79Go"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@lykims?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kim S. Ly</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="11a6" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">概述:如何在状态中添加数组</h1><p id="392f" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di">通过</span>掌握<strong class="lp ir"> <em class="oj">包装函数</em> </strong>，我终于用三个简单的步骤解决了如何在React状态下添加数组的问题:</p><ol class=""><li id="7c4c" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk pc os ot ou bi translated">使用<code class="fe kf kg kh ki b">useState([])</code>钩子将状态设置为<code class="fe kf kg kh ki b">[]</code>并获取状态设置函数</li><li id="e871" class="om on iq lp b lq ov lt ow lw ox ma oy me oz lk pc os ot ou bi translated">将<strong class="lp ir"> <em class="oj">包装函数</em> </strong>传递给状态设置器函数(作为回调函数)</li><li id="c3f7" class="om on iq lp b lq ov lt ow lw ox ma oy me oz lk pc os ot ou bi translated">使用<code class="fe kf kg kh ki b">.concat</code>更新数组或者在<strong class="lp ir"> <em class="oj">包装函数</em> </strong>内传播<code class="fe kf kg kh ki b">…</code></li></ol><p id="f316" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">但是我仍然想知道为什么React状态首先是不可变的？</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pd"><img src="../Images/2cf059ca838ba1756195037847ba3a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QlguP9E1SxlUu2-q"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@andrewtneel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Neel</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="139b" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">为什么<code class="fe kf kg kh ki b">.concat()</code>或…是React中的正确工具</h1><p id="086e" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">tate在React中应该是不可变的。例如，这就是为什么React钩子通常被定义为<code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-use-let-var-and-const-in-javascript-cdf42b48d70" rel="noopener">const</a></code>——作为不要触摸的提醒。</p><p id="a999" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">为什么会这样呢？<a class="ae kz" href="https://blog.logrocket.com/author/ehrrera/" rel="noopener ugc nofollow" target="_blank">埃斯特万·埃勒</a>在<a class="ae kz" href="https://blog.logrocket.com/immutability-in-react-ebe55253a1cc/" rel="noopener ugc nofollow" target="_blank">博客</a>上解释道:</p><blockquote class="pe pf pg"><p id="aaa7" class="ln lo oj lp b lq mr jr ls lt ms ju lv ph mt ly lz pi mu mc md pj mv mg mh lk ij bi translated">对于两个大小相同的数组，知道它们是否相等的唯一方法是比较每个元素。大型阵列的高成本操作。</p><p id="84e4" class="ln lo oj lp b lq mr jr ls lt ms ju lv ph mt ly lz pi mu mc md pj mv mg mh lk ij bi translated">最简单的解决方案是使用不可变对象。</p><p id="cfa8" class="ln lo oj lp b lq mr jr ls lt ms ju lv ph mt ly lz pi mu mc md pj mv mg mh lk ij bi translated">如果对象需要更新，必须创建一个具有新值的新对象，因为原来的对象是不可变的，不能更改。"</p></blockquote><p id="93c3" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">因为状态是不可变的，React确切地知道状态何时改变——何时创建新值并将其分配给React状态。</p><p id="a24a" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">使用<code class="fe kf kg kh ki b">.concat()</code>或扩展操作符<code class="fe kf kg kh ki b">…</code>将状态复制到一个新数组中，我们传递该数组作为更新后的状态。</p><p id="cc94" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">React不必更新状态并重新呈现屏幕，直到它被React Hooks setter函数告知状态实际上发生了变化。</p><p id="9f7f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">这对React应用程序的性能有好处。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pk"><img src="../Images/351961cf5db7ea55055f8527704d7b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GvcEq3Bn_s1O3XnR"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@rossf?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ross Findon</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d4ec" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">不变性的好处</h1><p id="bef3" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">很明显，在应用程序的某个时刻，我们正在更新状态——这只是通过提供一个新的状态，覆盖旧的状态。</p><p id="0517" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">这意味着我们不能就地改变状态，我们通过用新的状态替换它来更新它——对于一个数组，使用<code class="fe kf kg kh ki b">.concat()</code>或spread <code class="fe kf kg kh ki b">…</code>。</p><p id="dd3c" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">使用不可变状态有助于防止我们的代码出现错误，此外，当引用发生变化时，还会通知虚拟DOM进行更新。</p><p id="ecc0" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">不变性确保我们只在实际需要时改变状态——而不是意外地，在这种情况下，我们可能会丢失用户数据或在生产中发生其他可怕的事情。😱</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pd"><img src="../Images/3a28cbf6fea70c7628e171cbe3769586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hkEDJ6pgymu3MtQr"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@chrislawton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Lawton</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="15d4" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">你自己试试</h1><p id="6c69" class="pw-post-body-paragraph ln lo iq lp b lq np jr ls lt nq ju lv lw nr ly lz ma ns mc md me nt mg mh lk ij bi mi translated">我在文章的最后提供了一个现场演示及其完整的代码，演示了一个简单的React应用程序，它可以保存状态中的搜索词。</p><p id="8801" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">每个短语都用<code class="fe kf kg kh ki b">…</code>扩展操作符和一个包装函数添加到React状态，如上所示。</p><p id="130f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated">这是它实际运行时的屏幕截图:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pl"><img src="../Images/b07eb5e6acbc0ab8ab21ea4f5faabf34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3WeZ8FU90iw5o-yYIKNJA.png"/></div></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi pm"><img src="../Images/11bbb8f2f9451b3e43b37393b851fb89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1qImz8-Zd8VXGi95"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@kylejglenn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kyle Glenn</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="880d" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">CodeSandbox.io现场演示</h1><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="pn oa l"/></div></figure><h1 id="7987" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">现场演示的源代码</h1><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h1 id="cd65" class="mx my iq bd mz na nb nc nd ne nf ng nh jw ni jx nj jz nk ka nl kc nm kd nn no bi translated">进一步阅读</h1><ul class=""><li id="1b48" class="om on iq lp b lq np lt nq lw po ma pp me pq lk or os ot ou bi translated"><a class="ll lm ep" href="https://medium.com/u/a8b7f59b1b73?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank"> Robin Wieruch </a>在他的博客上详细解释了数组和反应状态<a class="ae kz" href="https://www.robinwieruch.de/react-state-array-add-update-remove" rel="noopener ugc nofollow" target="_blank">:</a></li></ul><div class="pr ps gp gr pt pu"><a href="https://www.robinwieruch.de/react-state-array-add-update-remove" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd ir gy z fp pz fr fs qa fu fw ip bi translated">如何管理阵列的反应状态— RWieruch</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">了解如何使用JavaScript数组方法(如concat、map和filter)在React状态下操作数组。鉴于…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">www.robinwieruch.de</p></div></div><div class="qd l"><div class="qe l qf qg qh qd qi kt pu"/></div></div></a></div><ul class=""><li id="6f1a" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated"><a class="ll lm ep" href="https://medium.com/u/4c949e4f0837?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank"> Jason Arnold </a>在他的媒体博客上解释了如何使用spread操作符来实现相同的效果——在React状态下向数组添加一个项目。</li></ul><div class="pr ps gp gr pt pu"><a href="https://medium.com/@thejasonfile/using-the-spread-operator-in-react-setstate-c8a14fc51be1" rel="noopener follow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd ir gy z fp pz fr fs qa fu fw ip bi translated">在React setState中使用扩展运算符</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">我目前正在使用React.js构建一个应用程序，遇到了一个让我困惑的问题。当应用程序中的一个按钮…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">medium.com</p></div></div><div class="qd l"><div class="qj l qf qg qh qd qi kt pu"/></div></div></a></div><ul class=""><li id="2e3b" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated"><a class="ll lm ep" href="https://medium.com/u/fe1c14f6cde?source=post_page-----3d08ddb2e1dc--------------------------------" rel="noopener" target="_blank">弗拉维奥·科普斯</a>在他的博客上清晰地解释了不变性<a class="ae kz" href="https://flaviocopes.com/react-immutability/" rel="noopener ugc nofollow" target="_blank">:</a></li></ul><div class="pr ps gp gr pt pu"><a href="https://flaviocopes.com/react-immutability/" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd ir gy z fp pz fr fs qa fu fw ip bi translated">反应概念:不变性</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">学习有什么反应？下载我的免费React手册🔥在React中编程时，您可能会遇到的一个概念是…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">flaviocopes.com</p></div></div><div class="qd l"><div class="qk l qf qg qh qd qi kt pu"/></div></div></a></div><ul class=""><li id="3d99" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated">史蒂文·德·萨拉斯在他的博客中写道<a class="ae kz" href="https://desalasworks.com/article/immutability-in-javascript-a-contrarian-view/" rel="noopener ugc nofollow" target="_blank">不变性被高估了:</a></li></ul><div class="pr ps gp gr pt pu"><a href="https://desalasworks.com/article/immutability-in-javascript-a-contrarian-view/" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd ir gy z fp pz fr fs qa fu fw ip bi translated">JavaScript中的不变性:一个相反的观点</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">所以如果每个人都说不变性是好的，那就意味着变异对象是不好的，对吗？我写这篇文章最初是作为…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">desalasworks.com</p></div></div><div class="qd l"><div class="ql l qf qg qh qd qi kt pu"/></div></div></a></div><ul class=""><li id="d4de" class="om on iq lp b lq mr lt ms lw oo ma op me oq lk or os ot ou bi translated">戴夫·塞德迪亚在他的博客上教我们<code class="fe kf kg kh ki b">setState</code>钩子<a class="ae kz" href="https://daveceddia.com/usestate-hook-examples/" rel="noopener ugc nofollow" target="_blank">的四种用法:</a></li></ul><div class="pr ps gp gr pt pu"><a href="https://daveceddia.com/usestate-hook-examples/" rel="noopener  ugc nofollow" target="_blank"><div class="pv ab fo"><div class="pw ab px cl cj py"><h2 class="bd ir gy z fp pz fr fs qa fu fw ip bi translated">4个使用状态钩子的例子</h2><div class="qb l"><h3 class="bd b gy z fp pz fr fs qa fu fw dk translated">有很多React钩子，但是useState是其中的主力。在本文中，我们将讨论使用状态…</h3></div><div class="qc l"><p class="bd b dl z fp pz fr fs qa fu fw dk translated">daveceddia.com</p></div></div><div class="qd l"><div class="qm l qf qg qh qd qi kt pu"/></div></div></a></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi qn"><img src="../Images/49027fce738b23fe27f49d1c0d93a4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-sLIf_brz9GWBTHp"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@robinoode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robin Benzrihem</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl qo qp hu qq" role="separator"><span class="qr bw bk qs qt qu"/><span class="qr bw bk qs qt qu"/><span class="qr bw bk qs qt"/></div><div class="ij ik il im in"><p id="243f" class="pw-post-body-paragraph ln lo iq lp b lq mr jr ls lt ms ju lv lw mt ly lz ma mu mc md me mv mg mh lk ij bi translated"><a class="ae kz" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">德里克·奥斯汀博士</a>是《职业规划:如何在6个月内成为一名成功的6位数程序员 》一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Building First React Native App with Giphy API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Giphy API构建首个React本地应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-first-react-native-app-with-giphy-api-6f8659cd5eeb?source=collection_archive---------16-----------------------#2020-04-14">https://javascript.plainenglish.io/building-first-react-native-app-with-giphy-api-6f8659cd5eeb?source=collection_archive---------16-----------------------#2020-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7244" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们将Giphy API集成到任何React本机应用程序的经验</h2></div><h2 id="2b08" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">Giphy是最大的图书馆，提供了广泛用于聊天的最流行的媒体形式之一——gif或图形交换格式和贴纸。</h2><p id="83a2" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">WhatsApp、Instagram、Slack、Skype和Twitter(仅举几例)等最受欢迎的社交媒体应用程序使用Giphy的技术为其聊天用户提供GIF内容和贴纸，以改善聊天体验。在Instamobile，我们已经将Giphy集成到我们所有的聊天应用程序中，因此我们将描述我们将Giphy API集成到任何React原生应用程序中的体验。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lu"><img src="../Images/cf8b468d14d8de0f7131b54781766647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dgb1RBDL7XybgUWiY2FnWA.png"/></div></div></figure><p id="acc3" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">在本文中，我们将通过四个简单快捷的步骤深入了解如何在React Native中集成Giphy API。</p><h2 id="e19f" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">1.获取API密钥</h2><p id="2e27" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">前往开发者<a class="ae ml" href="https://developers.giphy.com/" rel="noopener ugc nofollow" target="_blank">页面</a>，在<strong class="ld ir"> chrome浏览器</strong>上创建一个账户。您的仪表板应该是这样的。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/b4c9496c2a917ca3478b3c7c9572c879.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*XGzX2Wdq36QdmRa5.png"/></div></figure><p id="6bf1" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">点击'<strong class="ld ir"> <em class="mn">创建一个应用'按钮</em> </strong>创建一个新的API。将提示您在API或SDK之间选择一个选项。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/09b974895941fbe3cf142e4ed045d1fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/0*pF2ZmFdb8JDuqv8g.png"/></div></figure><p id="b9ac" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">对于本文，我们将重点放在API上，因此单击API选项。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/31e9a79800cb1becb7fe104adef066c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*yByxj9laLuoAHDg1.png"/></div></figure><p id="ff94" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">填写您的应用名称和应用描述，然后创建应用。您的仪表板应该已经设置好了，上面有您的API键。</p><h2 id="0cf6" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">2.从Giphy API获取数据</h2><p id="a4ac" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">此外，我们将创建状态来保存gif数据和我们要搜索的术语。</p><pre class="lv lw lx ly gt mp mq mr ms aw mt bi"><span id="82d2" class="kf kg iq mq b gy mu mv l mw mx">const [gifs, setGifs] = useState([]);<br/>const [term, updateTerm] = useState('');</span></pre><p id="e2b4" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">在您的<strong class="ld ir"> App.js </strong>中，在您的App组件中创建一个函数<code class="fe my mz na mq b">fetchGifs()</code>。</p><pre class="lv lw lx ly gt mp mq mr ms aw mt bi"><span id="aca8" class="kf kg iq mq b gy mu mv l mw mx">async function fetchGifs() {<br/>  try {<br/>    const API_KEY = &lt;API_KEY&gt;;<br/>    const BASE_URL = 'http://api.giphy.com/v1/gifs/search';<br/>    const resJson = await fetch(`${BASE_URL}?api_key=${API_KEY}&amp;q=${term}`);<br/>    const res = await resJson.json();<br/>    setGifs(res.data);<br/>  } catch (error) {<br/>    console.warn(error);<br/>  }<br/><br/>}</span></pre><p id="b245" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">在你的React原生应用中随意使用这种方法，可以节省20分钟的编码、测试和调试时间。</p><h2 id="6aec" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">3.在React本机UI中显示gif</h2><p id="3be4" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">让我们创建一个图像列表组件来保存图像格式的gif。为了实现这一点，我们编写了以下代码:</p><pre class="lv lw lx ly gt mp mq mr ms aw mt bi"><span id="e7a7" class="kf kg iq mq b gy mu mv l mw mx">import React, {useState} from 'react';<br/>import {View, TextInput, StyleSheet, FlatList, Image} from 'react-native';<br/><br/>// do not forget to add fresco animation to build.gradle<br/><br/>export default function App() {<br/>  const [gifs, setGifs] = useState([]);<br/>  const [term, updateTerm] = useState('');<br/><br/>  async function fetchGifs() {<br/>    try {<br/>      const API_KEY = &lt;API_KEY&gt;;<br/>      const BASE_URL = 'http://api.giphy.com/v1/gifs/search';<br/>      const resJson = await fetch(`${BASE_URL}?api_key=${API_KEY}&amp;q=${term}`);<br/>      const res = await resJson.json();<br/>      setGifs(res.data);<br/>    } catch (error) {<br/>      console.warn(error);<br/>    }<br/>  } /// add facebook fresco<br/><br/>  function onEdit(newTerm) {<br/>    updateTerm(newTerm);<br/>    fetchGifs();<br/>  }<br/><br/>  return (<br/>    &lt;View style={styles.view}&gt;<br/>      &lt;TextInput<br/>        placeholder="Search Giphy"<br/>        placeholderTextColor='#fff'<br/>        style={styles.textInput}<br/>        onChangeText={(text) =&gt; onEdit(text)}<br/>      /&gt;<br/>      &lt;FlatList<br/>        data={gifs}<br/>        renderItem={({item}) =&gt; (<br/>          &lt;Image<br/>            resizeMode='contain'<br/>            style={styles.image}<br/>            source={{uri: item.images.original.url}}<br/>          /&gt;<br/>        )}<br/>      /&gt;<br/>    &lt;/View&gt;<br/>  );<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  view: {<br/>    flex: 1,<br/>    alignItems: 'center',<br/>    padding: 10,<br/>    backgroundColor: 'darkblue'<br/>  },<br/>  textInput: {<br/>    width: '100%',<br/>    height: 50,<br/>    color: 'white'<br/>  },<br/>  image: {<br/>    width: 300,<br/>    height: 150,<br/>    borderWidth: 3,<br/>    marginBottom: 5<br/>  },<br/>});</span></pre><p id="8fc7" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated"><strong class="ld ir">重要提示</strong>:为了让gif出现在你的Android设备上，你必须将以下内容添加到你的<strong class="ld ir"><em class="mn">Android/app/build . gradle</em></strong>中的依赖项列表中。</p><pre class="lv lw lx ly gt mp mq mr ms aw mt bi"><span id="1c7c" class="kf kg iq mq b gy mu mv l mw mx">implementation 'com.facebook.fresco:fresco:2.0.0'<br/>implementation 'com.facebook.fresco:animated-gif:2.0.0'</span></pre><p id="7858" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">现在只需运行应用程序，您将在React Native应用程序的主屏幕上看到类似这样的内容:</p><h2 id="0fab" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">4.显示高级Giphy单元，如贴纸、趋势gif和最佳匹配</h2><p id="a71f" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">上面的视频展示了Giphy API如何对gif进行本地集成。您可以通过替换<strong class="ld ir"> <em class="mn"> BASE_URL </em> </strong>来轻松搜索Giphy贴纸</p><pre class="lv lw lx ly gt mp mq mr ms aw mt bi"><span id="7116" class="kf kg iq mq b gy mu mv l mw mx"><a class="ae ml" href="http://api.giphy.com/v1/stickers/search" rel="noopener ugc nofollow" target="_blank">http://api.giphy.com/v1/stickers/search</a></span></pre><p id="b5d2" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">这是Giphy API贴纸在React原生应用中的外观:</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/e22fc1026a0526f44caa01e30dbc8224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*fG9kZztTkvp7Kt7S0lffhg.gif"/></div></figure><p id="78d9" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">Giphy API为开发人员提供了两个更简单但更强大的端点<a class="ae ml" href="https://developers.giphy.com/docs/api/endpoint#trending" rel="noopener ugc nofollow" target="_blank">趋势</a></p><blockquote class="nc nd ne"><p id="89ec" class="lb lc mn ld b le mg jr lg lh mh ju lj nf mi ll lm ng mj lo lp nh mk lr ls lt ij bi translated"><em class="iq"> GIPHY Trending每天都会返回一份最相关、最吸引人的内容列表。我们的趋势内容提要会不断更新，因此您总是可以获得最新、最棒的内容。</em></p></blockquote><p id="085a" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">还有<a class="ae ml" href="https://developers.giphy.com/docs/api/endpoint#translate" rel="noopener ugc nofollow" target="_blank">翻译</a></p><blockquote class="nc nd ne"><p id="8bfc" class="lb lc mn ld b le mg jr lg lh mh ju lj nf mi ll lm ng mj lo lp nh mk lr ls lt ij bi translated"><em class="iq"> GIPHY Translate使用GIPHY的特殊sauce算法将单词和短语转换为完美的GIF或贴纸。这个特性在GIPHY的Slack集成中得到了最好的展示。</em></p></blockquote><h2 id="cfb8" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h2><p id="e6c2" class="pw-post-body-paragraph lb lc iq ld b le lf jr lg lh li ju lj ko lk ll lm ks ln lo lp kw lq lr ls lt ij bi translated">正如我们所了解的，通过React Native中的Giphy API集成，向任何React Native应用程序添加gif支持非常简单。从React Native调用Giphy提供的通用REST端点非常简单。</p><p id="6909" class="pw-post-body-paragraph lb lc iq ld b le mg jr lg lh mh ju lj ko mi ll lm ks mj lo lp kw mk lr ls lt ij bi translated">如果你想看到它的运行，可以看看我们的<a class="ae ml" href="https://www.instamobile.io/mobile-templates/social-networks/" rel="noopener ugc nofollow" target="_blank">社交应用</a>的一个演示，所有这些应用都集成了React本地Giphy API</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>
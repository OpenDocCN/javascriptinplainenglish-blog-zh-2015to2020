<html>
<head>
<title>JavaScript Tips — ESLint Rules, Canvas, Cleaning Local Storage, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript技巧——ESLint规则、画布、清理本地存储等等</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tips-eslint-rules-canvas-cleaning-local-storage-f59329cd9529?source=collection_archive---------11-----------------------#2020-07-07">https://javascript.plainenglish.io/javascript-tips-eslint-rules-canvas-cleaning-local-storage-f59329cd9529?source=collection_archive---------11-----------------------#2020-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8fcf4474610ee46bb1cbac0c62f38e62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0PmdDr7Tl1S1NOZ3"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@honest?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">The Honest Company</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="36bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="9829" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将JavaScript数组转换成逗号分隔的列表</h1><p id="7eb6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用数组实例的<code class="fe me mf mg mh b">join</code>方法用逗号将字符串连接在一起。</p><p id="4aa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="778b" class="mq lc iq mh b gy mr ms l mt mu">const arr = ["foo", "bar", "baz"];<br/>console.log(arr.join(", "));</span></pre><h1 id="0b5a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript对象中的构造函数</h1><p id="5221" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript对象可以从构造函数中创建。</p><p id="4d1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">去创造它。我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7d4f" class="mq lc iq mh b gy mr ms l mt mu">function Box(color) {<br/>  this.color = color;<br/>}</span><span id="25ea" class="mq lc iq mh b gy mv ms l mt mu">Box.prototype.getColor = function(){<br/>  return this.color;<br/>};</span></pre><p id="4a79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">color</code>实例变量创建了<code class="fe me mf mg mh b">Box</code>构造函数。</p><p id="69d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们将<code class="fe me mf mg mh b">getColor</code>方法与<code class="fe me mf mg mh b">prototype</code>属性连接起来，以返回<code class="fe me mf mg mh b">color</code>。</p><p id="d5e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">new</code>操作符来创建一个<code class="fe me mf mg mh b">Box</code>实例:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6244" class="mq lc iq mh b gy mr ms l mt mu">const box = new Box("brown");<br/>console.log(box.getColor());</span></pre><p id="ceb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">等价地，我们可以使用类语法:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="37a5" class="mq lc iq mh b gy mr ms l mt mu">class Box {<br/>  constructor(color) {<br/>    this.color = color;<br/>  }<br/>  <br/>  getColor(){<br/>    return this.color;<br/>  }<br/>}</span></pre><p id="6363" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们把所有东西都放在<code class="fe me mf mg mh b">Box</code>类中，而不是使用原型。</p><p id="30ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，它们是一样的。</p><h1 id="3e94" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">禁用特定文件的ESLint规则</h1><p id="937f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以禁用带有注释的特定文件的ESLint规则。</p><p id="f5e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1785" class="mq lc iq mh b gy mr ms l mt mu">/* eslint no-use-before-define: 0 */</span></pre><p id="ea9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关闭一个<code class="fe me mf mg mh b">no-use-before-define</code>规则。</p><p id="e2fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e67a" class="mq lc iq mh b gy mr ms l mt mu">/* eslint-disable no-use-before-define */</span></pre><p id="415e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">做同样的事情。</p><p id="666d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="658f" class="mq lc iq mh b gy mr ms l mt mu">/* eslint no-use-before-define: 2 */</span></pre><p id="0a44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开它。</p><p id="f2e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以通过将文件路径放在<code class="fe me mf mg mh b">.eslintignore</code>中来告诉ESLint忽略特定的文件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ead1" class="mq lc iq mh b gy mr ms l mt mu">build/*.js<br/>node_modules/**/*.js</span></pre><h1 id="6908" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">添加JavaScript / jQuery DOM更改监听器</h1><p id="3459" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了监听DOM的变化，我们可以监听<code class="fe me mf mg mh b">DOMSubtreeModified</code>事件。</p><p id="4b1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="be52" class="mq lc iq mh b gy mr ms l mt mu">$("#div").bind("DOMSubtreeModified", () =&gt; {<br/>  console.log("tree changed");<br/>});</span></pre><p id="c50e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用jQuery的<code class="fe me mf mg mh b">bind</code>方法来监听事件。</p><h1 id="8446" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提前退出函数</h1><p id="d6ce" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要提前结束一个函数，我们可以使用<code class="fe me mf mg mh b">return</code>关键字。</p><p id="92d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以放在任何地方以提前结束一个函数。</p><p id="d337" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c278" class="mq lc iq mh b gy mr ms l mt mu">const myfunction = () =&gt; {<br/>  if (shouldStop) {<br/>    return;<br/>  }<br/>}</span></pre><h1 id="a9e2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">当标签或窗口关闭时，从本地存储中移除项目</h1><p id="4c24" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当标签或窗口关闭时，要从本地存储中删除项目，我们可以监听<code class="fe me mf mg mh b">beforeunload</code>事件。</p><p id="6e73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在监听器函数中，我们可以调用<code class="fe me mf mg mh b">removeItem</code>来移除该项。</p><p id="45a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4116" class="mq lc iq mh b gy mr ms l mt mu">window.onbeforeunload = () =&gt; {<br/>  localStorage.removeItem(key);<br/>  return '';<br/>};</span></pre><p id="0e20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">侦听器应该返回一个字符串。</p><h1 id="9be8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在React组件中选定的<select>选项上选择“选定”</select></h1><p id="bde1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以设置<code class="fe me mf mg mh b">select</code>元素的<code class="fe me mf mg mh b">value</code>属性来设置选中的选项。</p><p id="c9d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a93c" class="mq lc iq mh b gy mr ms l mt mu">&lt;select value={chosenItem}&gt;<br/>  &lt;option value="A"&gt;apple&lt;/option&gt;<br/>  &lt;option value="B"&gt;banana&lt;/option&gt;<br/>  &lt;option value="O"&gt;orange&lt;/option&gt;<br/>&lt;/select&gt;</span></pre><p id="bd16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用类组件中的<code class="fe me mf mg mh b">setState</code>设置<code class="fe me mf mg mh b">chosenItem</code>状态。</p><p id="84b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以使用<code class="fe me mf mg mh b">useState</code>方法返回的状态改变函数来设置它。</p><h1 id="4b8a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">调整HTML5画布大小以适合窗口</h1><p id="83fc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要调整HTML5画布的大小以适应窗口，我们可以用JavaScript更改画布的宽度和高度。</p><p id="a919" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6110" class="mq lc iq mh b gy mr ms l mt mu">const resizeCanvas = () =&gt; {<br/>  const canvas = <!-- -->document.getElementById('canvas'),<br/>  <!-- -->const ctx = canvas.getContext('2d');<br/>  ctx.canvas.width  = window.innerWidth;<br/>  ctx.canvas.height = window.innerHeight;<br/>}</span><span id="6528" class="mq lc iq mh b gy mv ms l mt mu">window.addEventListener('resize', resizeCanvas, false);</span></pre><p id="f7a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">innerWidth</code>将宽度设置为窗口宽度，而<code class="fe me mf mg mh b">innerHeight</code>将高度设置为窗口高度。</p><p id="ed07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们观察<code class="fe me mf mg mh b">resize</code>事件来设定维度。</p><h1 id="e364" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">向JavaScript日期对象添加小时</h1><p id="c532" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">getTime</code>方法向JavaScript date对象添加小时来获取时间戳。</p><p id="de25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将毫秒加到时间戳上，以增加我们想要的小时数。</p><p id="7c48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="538d" class="mq lc iq mh b gy mr ms l mt mu">date.setTime(date.getTime() + (hours * 60 * 60 * 1000));</span></pre><p id="f87d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">setTime</code>来设置新日期的时间戳。</p><h1 id="3251" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查数组是否为空或不存在</h1><p id="aa9a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要检查数组是否为空或不存在，我们可以使用<code class="fe me mf mg mh b">Array.isArray</code>方法并检查<code class="fe me mf mg mh b">length</code>属性。</p><p id="7583" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ad68" class="mq lc iq mh b gy mr ms l mt mu">if (!Array.isArray(array) || !array.length) {<br/>  // ...<br/>}</span></pre><p id="1d2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">array</code>是否是一个带有<code class="fe me mf mg mh b">Array.isArray</code>的数组。</p><p id="e291" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">!array.length</code>检查长度是否为0。</p><p id="9b7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果两者都是<code class="fe me mf mg mh b">true</code>，那么我们知道它不是一个数组</p><p id="0e01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果只有<code class="fe me mf mg mh b">!array.length</code>是<code class="fe me mf mg mh b">true</code>，那么我们知道<code class="fe me mf mg mh b">array</code>是一个空数组。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/fe39f9264b95f4231fdcdf0a52fa06b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B3nNet56Zo5PWDcy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jplenio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Johannes Plenio</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="146d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="149d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用注释或<code class="fe me mf mg mh b">.eslintignore</code>禁用ESLint规则。</p><p id="5654" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当DOM结构改变时，发出<code class="fe me mf mg mh b">DOMSubtreeModified</code>。</p><p id="c576" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript对象可以从构造函数或类中创建。</p><h2 id="48f8" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="a01a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
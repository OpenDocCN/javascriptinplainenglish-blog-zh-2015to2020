<html>
<head>
<title>A Complete Guide to the Composition Process of a React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React本地应用程序合成过程的完整指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-complete-guide-of-the-composition-process-of-a-react-native-app-dd9f89542c46?source=collection_archive---------5-----------------------#2020-07-09">https://javascript.plainenglish.io/a-complete-guide-of-the-composition-process-of-a-react-native-app-dd9f89542c46?source=collection_archive---------5-----------------------#2020-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="39a1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在开始编写代码之前，让我们在这个过程上花更多时间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e3f229f4297302a4d234d702baca3ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2elWkYxQugyWmJ7DRgsXkg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@alvarordesign?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Alvaro Reyes</a> on <a class="ae kv" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="db03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">互联网上有大量的教程建议你在分析和设计阶段花足够的时间。React开发过程也不例外。分析和设计周期的一部分包括通过组合过程构建应用程序的思考过程。</p><p id="5507" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是尽管如此，有时我们仍然继续在这个思考过程上花费较少的时间，并且匆忙地开始编码。我们可以做到这一点，但我敢打赌，后来你会意识到，你花的时间比你想象的要多，而且可能还会用糟糕的架构设计来构建应用程序，因此它们可能不够可伸缩。</p><p id="8c1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们认为这个过程是不必要的，或者因为我们的应用程序很简单。然而，我意识到的事实是，我在编码时浪费了大量的时间，因为我没有在上面花足够的时间。</p><p id="3be0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事不宜迟，让我们跳到每次开始开发React应用程序时都应该遵循的思维过程。</p><p id="8b70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">注</em> </strong> <em class="ls">:为了学习过程，姑且只针对全局画面打破构图过程。React应用程序的每个模块、屏幕或视图都应该执行相同的过程。</em></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="e227" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">1.模仿你的组件</h1><p id="310d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">无论项目是大是小，是简单还是复杂。在做任何事情之前，在开始编码之前，你要做的第一件事就是模拟你的注册护士应该是什么样子。然而，如果你和一个设计师合作，他会给你提供Figma网址，Adobe Photoshop文件，图片，或者任何可以分享模型的方式。</p><p id="9f18" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将深入到合成过程中来构建类似这样的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/be4ab6870689b4f5f7817f3c9a6c680e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XuLbcMq77LwmhU5Gcg8gg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">RN-Global Screen</figcaption></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="4e1b" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">2.使用单一责任原则将你的用户界面分成小块</h1><p id="3d78" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">坚持一个原则，即一个组件最好只做一件事。如果它最终增长，它应该被分解成更小的子组件。</p><p id="04fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">放心吧！现在让我们分解成可重用和单一关注的组件，这就是React存在的原因。</p><h2 id="be89" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">共享组件</h2><p id="8c1c" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这是常见组件的列表。基本上，它们是不同模块和应用程序屏幕中可重复使用的组件。</p><ul class=""><li id="5627" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated">这个组件的想法是在两个视图之间绘制一条垂直线。</li><li id="0f4b" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir">分隔器</strong>:两个组件之间的分隔器</li><li id="58ab" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir"> PieChartComponent </strong>:呈现全局或特定数据的饼图。</li><li id="128a" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">SectionContainer:它只是一个组织我们内容的盒子。它将在我们的应用程序中使用。</li><li id="cda6" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">SwitchSelector:呈现全球或您所在国家数据的组件</li></ul><h2 id="5b2d" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">全球屏幕</h2><p id="61ca" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">让我们列出全球(全球)屏幕上的组件。</p><ul class=""><li id="91e4" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated"><strong class="ky ir">全局</strong> (index.js):是我们的父母。它包含全局屏幕上的所有元素</li><li id="1664" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">这只是一个用来组织我们内容的盒子。它将在我们的应用中使用</li><li id="4e40" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir"> LastUpdate </strong>:以以前的格式呈现标题和跨度的样式化组件</li><li id="27c9" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir"> PieChartComponent </strong>:渲染全球数据或按国家的饼状图。</li><li id="6936" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir">垂直</strong>:在两个视图/div之间显示一条垂直线</li><li id="3de6" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir">covidnumbercasebox</strong>:显示已恢复、已确认或已死亡的病例数</li><li id="ce44" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir"> SwitchSelector </strong>:一个切换选择器，一个呈现全球或国家数据的过滤器</li></ul><h2 id="9383" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">将组件排列成层次结构</h2><p id="2b26" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">一旦我们将UI分解成组件，就该根据模型将它们排列成层次结构了。</p><p id="69b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">这个层次结构将帮助我们识别应该拥有状态的公共所有者组件或更高的组件。</em></p><pre class="kg kh ki kj gt ny nz oa ob aw oc bi"><span id="0978" class="my mb iq nz b gy od oe l of og"><strong class="nz ir">-Global (parent)</strong></span><span id="5279" class="my mb iq nz b gy oh oe l of og"><em class="ls">---|LastUpdate</em></span><span id="905e" class="my mb iq nz b gy oh oe l of og">---|SwitchSelector</span><span id="81dc" class="my mb iq nz b gy oh oe l of og"><em class="ls">---|PieChartComponent</em></span><span id="3c8d" class="my mb iq nz b gy oh oe l of og"><strong class="nz ir">---|SectionContainer</strong></span><span id="c406" class="my mb iq nz b gy oh oe l of og"><em class="ls">-----|CovidNumberCasesBox</em></span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="dd77" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">3.使用DRY原则来定义你的UI状态</h1><p id="abdf" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated"><a class="ae kv" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">干</a>原则代表<em class="ls">不要重复自己。</em>在React世界里，它的使命是不惜一切代价避免状态冗余。</p><p id="2c4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们使用它，考虑我们在上面确定的组件列表中的每个组件上拥有的所有数据。</p><h2 id="d6ac" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">3.1高效状态管理需要考虑的规则</h2><ul class=""><li id="9394" class="nk nl iq ky b kz ms lc mt lf oi lj oj ln ok lr np nq nr ns bi translated"><em class="ls">使用</em><a class="ae kv" href="https://en.wikipedia.org/wiki/Single-responsibility_principle" rel="noopener ugc nofollow" target="_blank"><em class="ls">【SRP】</em></a><em class="ls">—使一个状态变量负责一个关注点。</em></li><li id="cdaa" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">如果你知道一个状态变量违反了单一责任原则，那么你应该从某个地方提取复杂的状态逻辑。比如说一个定制的钩子。</li></ul><p id="b9d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">考虑到反应状态的规则，在全局屏幕上我们有了下一个数据:</em></p><ul class=""><li id="6592" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated">开关选择器(过滤器)的值</li><li id="24c3" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">上次更新数据的日期时间</li><li id="0b21" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">COVID数情形的全局数据</li></ul><p id="e213" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，我们现在已经知道了要在全局屏幕上使用的所有数据，让我们逐一查看，看看哪些是状态数据，哪些不是。</p><p id="c63a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据React文档，一个好的做法是，我们对每条数据提出以下问题，以确定它是否是State。</p><ol class=""><li id="870a" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr ol nq nr ns bi translated">是通过道具从父母那里传过来的吗？如果是这样的话，很可能没有说明。</li><li id="dca5" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr ol nq nr ns bi translated">是否随时间保持不变？如果是这样，它可能不是state。</li><li id="2eb2" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr ol nq nr ns bi translated">你能根据组件中的任何其他状态或属性来计算它吗？如果是这样，那就不是国家了。</li></ol><h2 id="4f9f" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">3.2弄清楚状态</h2><p id="15a9" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">是时候弄清楚我们的组件需要整个应用程序的可变状态的最小集合了。</p><ul class=""><li id="c851" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated">切换选择器(<strong class="ky ir"> SwitchSelector </strong>)的值会随时间变化，并且无法通过任何方式进行计算。当你点击同一个<strong class="ky ir">开关选择器</strong>项目时，该状态将有助于不产生新的请求网络。我们得到了州。</li><li id="79a9" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated">当用户点击刷新按钮时，数据最后更新的<strong class="ky ir">日期时间</strong>将会改变(这是将来的功能)。这就是状态。</li><li id="26f5" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><strong class="ky ir"> COVID </strong> number cases对象将作为一个prop在组件层次上传递，所以在这种情况下，它不是State。然而，在全局屏幕(index.js)上，我们将数据设置为状态，它将根据状态而改变(<strong class="ky ir"> SwitchSelector </strong>)。</li></ul><p id="226a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您一直跟随我到这里，我们已经确定了应用程序状态的最小集合。下一步是识别哪个组件发生了变异或者应该拥有这个状态。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="b06a" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">4.找出国家最适合居住的地方</h1><p id="5e2a" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这可能有点棘手。然而，为了更容易实现，让我们深入了解几个关键点，这将有助于我们进行这一斗争。</p><h2 id="b00f" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">4.1识别基于该状态呈现某些内容的每个组件</h2><p id="671c" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在全球屏幕上，我们有这些下一个组件。</p><p id="85c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">last update、PieChartComponent、CovidNumberCaseBox需要根据状态渲染数据。例如，LastUpdate将基于过滤器值呈现数据的最后更新和PieChart组件，以及CovidNumberCasebox组件。</em></p><h2 id="93f9" class="my mb iq bd mc mz na dn mg nb nc dp mk lf nd ne mm lj nf ng mo ln nh ni mq nj bi translated">4.2找到一个共同的所有者组件。</h2><p id="f7e4" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这旨在找出层次结构中需要状态的所有组件中的单个组件。</p><p id="41a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您向上滚动到我们创建组件层次结构的部分，您将意识到所有前面组件之上的单个组件是全局的(index.js ),因此状态应该位于其中。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="5f9b" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">最后的想法</h1><p id="6f7f" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">构建React应用程序的思维过程应该与我们在本教程中所学的类似。</p><p id="11c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的建议是，在开始编写代码之前，你应该花足够的时间来完成这个过程。这看起来很长，让人不知所措，然而，最后，当你有疑问时，这将帮助你澄清那些。</p><p id="3f46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，这将允许您使用React的强大功能构建更具扩展性和效率的web应用程序以及跨平台应用程序。</p><p id="6dba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">感谢阅读！我希望这篇文章是有帮助和有趣的。下次阅读时见。</em></p></div></div>    
</body>
</html>
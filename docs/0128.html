<html>
<head>
<title>Testing your Vue app with Jest and Travis CI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jest和Travis CI测试您的Vue应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-test-coverage-to-vue-js-app-with-jest-travis-ci-and-coveralls-d10d118125c2?source=collection_archive---------0-----------------------#2019-04-17">https://javascript.plainenglish.io/add-test-coverage-to-vue-js-app-with-jest-travis-ci-and-coveralls-d10d118125c2?source=collection_archive---------0-----------------------#2019-04-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/f0494b9b4e77adf6a585b480d436d092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1TbG5OJjqGawd7qSiDXUQ.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Photo by <a class="ae ja" href="https://unsplash.com/photos/WC6MJ0kRzGw?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">David Travis</a> on <a class="ae ja" href="https://unsplash.com/search/photos/test?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="ae3b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将了解如何向Vue应用程序添加一些规范，并使用Jest test runner运行这些规范，使用工作服添加一些测试覆盖范围，并在GitHub中将它们显示为徽章。</p><h2 id="7984" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">为了实现这些，我们可能需要理解测试覆盖的概念。</h2><p id="248c" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">这里要注意的第一点是，它不是对Vue测试的详细解释，而是主要集中在Vue.js应用程序的配置方面。</p><h1 id="a251" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">博客的结构</h1><ol class=""><li id="d22f" class="mn mo jd kc b kd lr kh ls kl mp kp mq kt mr kx ms mt mu mv bi translated">我们将在这个博客中构建什么。</li><li id="6b92" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">什么是单元测试？</li><li id="6bfe" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">vue-test-utils简介。</li><li id="cc16" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">什么是玩笑？</li><li id="a244" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">设置应用程序</li><li id="0be5" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">添加测试规格。</li><li id="818d" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">为Jest添加覆盖代码。</li><li id="b216" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">添加Travis配置。</li><li id="b9ed" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">将工作服添加到应用程序中。</li><li id="465a" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">完成100%的测试覆盖率。</li><li id="8759" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">将覆盖范围显示为徽章。</li><li id="6f4a" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">重要参考点。</li></ol><h1 id="0996" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">1.我们将在这个博客中构建什么</h1><p id="0639" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在这里，我们将构建一个小的应用程序来显示被点击的按钮的数量。我知道，这是一个非常简单的应用程序，因为我们不打算在这里覆盖Jest，因为有大量的博客可以集成Vue和Jest。所以我不想重复。</p><h1 id="10a3" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">2.什么是单元测试？</h1><p id="15ed" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">从Vue官方文件来看，</p><blockquote class="nb nc nd"><p id="6003" class="ka kb ne kc b kd ke kf kg kh ki kj kk nf km kn ko ng kq kr ks nh ku kv kw kx ig bi translated">单元测试是软件开发的基础部分。单元测试孤立地执行最小的代码单元，以增加添加新功能和追踪bug的便利性。Vue的<a class="ae ja" href="https://vuejs.org/v2/guide/single-file-components.html" rel="noopener ugc nofollow" target="_blank">单文件组件</a>使得独立编写组件的单元测试变得非常简单。</p></blockquote><p id="56cc" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从一个简单的角度来看，我们可以说当UI中的按钮被点击时计数器增加时，单元测试正在进行。</p><h1 id="68d0" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">3.vue-test-utils简介。</h1><p id="737a" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">它是Vue.js的官方单元测试实用程序库，处理单元测试使用的按钮点击和许多事件。通过使用vue-test-utils，我们可以模拟输入甚至道具。</p><p id="7cd9" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在创建应用程序时，有一个使用vue-cli来适应vue-test-utils的选项，将在下面的部分中向您展示。</p><h1 id="0f1e" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">4.什么是玩笑？</h1><p id="dbd8" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">通过使用vue-test-utils，我们可以创建测试，但是运行这些测试需要一个运行程序。这就是笑话出现的地方。Jest实际上是由脸书实现的test runner，在测试界很受欢迎。它有最少的配置和所有。</p><p id="4cb1" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">笑话包含<strong class="kc je"> <em class="ne">快照测试</em> </strong>。快照测试会将UI转换为字符串并检查内容。这是一个令人敬畏的笑话。</p><h1 id="0b4c" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">5.设置应用程序</h1><p id="b766" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我已经安装了vue-cli，因此我们正在创建应用程序。</p><h2 id="8930" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">1.创建应用程序并选择特性</h2><p id="b7c5" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">使用下面的命令，</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="8633" class="ky kz jd nn b gy nr ns l nt nu">vue create application-name</span><span id="10d4" class="ky kz jd nn b gy nv ns l nt nu">example:<br/>$ vue create vue-code-coverage</span></pre><p id="8235" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将手动选择应用程序的功能。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/bbc37e14c176300f0a62173b86074abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*gceVPLOYIQYU7luwT6UcjA.png"/></div></figure><p id="ce19" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于单元测试部分，将选择Jest作为测试运行程序</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nx"><img src="../Images/b8a642e521a944529c45da9aa5f789e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhdTzvQnsPSgK8jvJhKzZw.png"/></div></div></figure><p id="a90a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以将Jest的配置文件存储在package.json或专用文件中。在这里，我们选择专用文件选项。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ny"><img src="../Images/4f29544e4d59aa31185388089907cea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njch4BrFqENmPVzZxBEm_A.png"/></div></div></figure><p id="41c3" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们提交这个项目中的第一个提交</p><h2 id="5fb9" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">2.为按钮单击创建一个新组件</h2><p id="cde8" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们在那里已经有了一个名为HelloWorld.vue的组件，我们只是删除它并在那里添加我们的组件。</p><p id="dad7" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae ja" href="https://github.com/anoobbava/vue-code-coverage/commit/09703e87865f5dbefe6d12b4e15600c7758b1273" rel="noopener ugc nofollow" target="_blank">代码提交的链接</a></p><h2 id="c4c1" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">3.添加按钮点击和显示计数的功能。</h2><p id="136d" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">现在，我们需要创建一个按钮，并添加一个方法来增加点击次数。我们需要一个名为count的数据，它将在单击按钮时递增。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nz"><img src="../Images/9d12e8abe1ec9a085d7d605b8a23e019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnuByWeehpVK9NORsbQ4_Q.png"/></div></div></figure><p id="edb1" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如此简单的权利。最初，计数变为零，这是由data属性初始化的。然后分配一个方法来调用，以便在单击按钮时增加计数</p><p id="9767" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">输出将是这样的，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/93f003d5211ab2dbbf207ddf867675c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*Z0ji0iqo-CqJBR4eSRy6zw.png"/></div></figure><p id="8426" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae ja" href="https://github.com/anoobbava/vue-code-coverage/commit/ea4d692fe88dcdfd1fa5eb8ed0fc599d13780137" rel="noopener ugc nofollow" target="_blank">代码变更链接</a>。</p><h2 id="15f9" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">4.检查测试文件。</h2><p id="665d" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">当使用vue-cli创建一个应用程序并选择测试工具时，它会自动创建一个名为<strong class="kc je"> <em class="ne"> example.spec.js的样本测试文件。</em> </strong></p><p id="b4be" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以根据自己的要求删除或编辑该文件。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/ba8509f7594e812df2e21ad22f62f059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*gBHKSzjY37RqCJrJuzkdrQ.png"/></div></figure><h1 id="5fc5" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">6.添加测试规格。</h1><p id="f055" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们将在<strong class="kc je"> <em class="ne"> /tests/unit/ </em> </strong>中创建一个名为buttonCount.spec.js的文件</p><h2 id="5e54" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">1.导入test-utils文件</h2><p id="d36b" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">首先，需要导入vue-test-utils。这可以通过，</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="9646" class="ky kz jd nn b gy nr ns l nt nu">import { shallowMount } from '@vue/test-utils'</span></pre><p id="f761" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以在这里使用山或浅山。当使用shallowMount时，它将只考虑当前组件，而不考虑子组件。浅层安装对于单元测试来说太好了，因为它们是用来测试单个组件的。</p><h2 id="27c7" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">2.导入相应的组件文件。</h2><p id="1736" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">这里，我们需要导入我们自己的将要被测试的组件。就像我们的例子一样，</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="ea1a" class="ky kz jd nn b gy nr ns l nt nu">import ButtonCount from '@/components/ButtonCount.vue'</span></pre><h2 id="a4e0" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">3.使用浅层安装创建一个包装器</h2><p id="0250" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们的测试套件将会有一个<strong class="kc je"> <em class="ne">描述</em> </strong>一个跟随着<strong class="kc je"> <em class="ne"> it功能。</em>T19】</strong></p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/6fdbf72710c455904601a57037c2bbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*v9WC-lgZlHB1hdFYTTE15g.png"/></div></figure><p id="71cc" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上是我们测试套件的基本框架，现在我们正在添加更多来完成功能。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="2112" class="ky kz jd nn b gy nr ns l nt nu">describe('ButtonCount.vue', () =&gt; {</span><span id="da1c" class="ky kz jd nn b gy nv ns l nt nu">  const wrapper = shallowMount(ButtonCount)</span><span id="4d60" class="ky kz jd nn b gy nv ns l nt nu">  // checks ButtonCount is a component.</span><span id="9832" class="ky kz jd nn b gy nv ns l nt nu">  it('Register is a component', () =&gt; {</span><span id="110c" class="ky kz jd nn b gy nv ns l nt nu">    expect(wrapper.isVueInstance()).toBeTruthy()</span><span id="4e5c" class="ky kz jd nn b gy nv ns l nt nu">  })</span><span id="a0ed" class="ky kz jd nn b gy nv ns l nt nu">})</span></pre><p id="9883" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查ButtonCount是否生成是一个非常基本的测试。现在，我们将在终端中执行这个测试，以确定它是成功还是失败。</p><p id="1fb0" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的package.json中，已经为测试配置了脚本，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi od"><img src="../Images/fdc3ee733904cdb3235222a993a38292.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*WEJP1Bgyhu7OvJ6poKp9Ig.png"/></div></figure><p id="addf" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用，</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="dab3" class="ky kz jd nn b gy nr ns l nt nu">npm run test:unit</span></pre><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oe"><img src="../Images/a8a61fcc8938f4d7012ce17d0ebad2f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fwxYIHIuNhntV9Mz9G2jkg.png"/></div></div></figure><p id="5cdf" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">万岁，我们的测试通过了，现在我们可以完成所有的测试了。</p><p id="07a9" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc je"> <em class="ne">这里有个注意，</em> </strong>请将<strong class="kc je"> <em class="ne"> — watch </em> </strong>添加到package.json中的测试单元，成为一个交互式的测试运行工具，只执行失败的测试，降低开销问题。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi of"><img src="../Images/14f78489cb23adc56ebedfa9c7b4c389.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*3RnUtXWgB_MTS1jbM8wuFA.png"/></div></figure><h2 id="37df" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">4.完成所有测试</h2><p id="5c5a" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">完整的测试变成这样，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d5db97e7d20732dac8e5a0b12addbca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*St38W8pXPrfGUOEJYEqdVg.png"/></div></figure><p id="6c8f" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并且执行输出变成使用监视模式，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0e5b753ce38104eaa924f2b1d7d074ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*-DZuxapol5O2rnNfBetdwA.png"/></div></figure><p id="8ec3" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae ja" href="https://github.com/anoobbava/vue-code-coverage/commit/0fdfb555316225c18aafa625cd6171b7aeb940db" rel="noopener ugc nofollow" target="_blank">提交代码更改的链接</a></p><h1 id="314a" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">7.为Jest添加覆盖代码。</h1><p id="7149" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们需要向jest.config.js添加一些代码，以便向UI显示代码覆盖率。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="3ae2" class="ky kz jd nn b gy nr ns l nt nu">collectCoverage: true,</span><span id="533e" class="ky kz jd nn b gy nv ns l nt nu">collectCoverageFrom: ['**/*.{vue}', '!**/node_modules/**', '!&lt;rootDir&gt;/dist/**',</span><span id="448e" class="ky kz jd nn b gy nv ns l nt nu">'!&lt;rootDir&gt;/src/plugins/**', '!&lt;rootDir&gt;/tests/unit/**'</span><span id="47c6" class="ky kz jd nn b gy nv ns l nt nu">],</span><span id="cdfa" class="ky kz jd nn b gy nv ns l nt nu">coverageReporters: ['lcov', 'text-summary']</span></pre><p id="46d1" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这意味着，需要发送代码覆盖率，并且只需要选择那些文件。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oi"><img src="../Images/5d7c5572b0a4a60bb8daedefc258475f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6txpLtq_UA98dqZPfyMRw.png"/></div></div></figure><p id="e166" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，再次运行测试套件，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oj"><img src="../Images/8b8fb48ce0d70d6b18f50fe81d399ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uvVb-CSlsY9lzRje8KXJYA.png"/></div></div></figure><p id="4212" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">万岁，我们已经覆盖了Vue文件，现在我们可以移动到我们的配置部分。</p><h1 id="6be5" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">8.添加Travis配置。</h1><p id="82ff" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">Travis CI是持续集成，它将有助于处理运行测试并检查构建是否通过。</p><p id="b3d6" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">特拉维斯使用一个名为<strong class="kc je"> <em class="ne">的yml文件。特拉维斯. yml. </em> </strong>需要添加一些配置来处理这个文件。</p><p id="6ccf" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个文件必须在我们项目的根路径上，而不是在某个内部路径上，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/51b90787c794daae36d4c2a19c00e7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*u9oJfW3cCuiP84Qn75anTQ.png"/></div></figure><p id="585f" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在yml中，间距非常重要，请记住这一点。</p><p id="cb78" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转到<a class="ae ja" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis ci站点</a> →登录GitHub →选择项目</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ol"><img src="../Images/347969e0308d7d4e9312186df46a9bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QtBYqwB7K75UOP9E79HuuA.png"/></div></div></figure><p id="99ce" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前，我们仍然没有推出. travis.yml，这就是为什么构建现在是未知的，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi om"><img src="../Images/003b59b41270f8f7ee80ce45e99dfe73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-97ef5PDzGzEwvT2W9BZXw.png"/></div></div></figure><p id="6090" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，等着行刑吧，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi on"><img src="../Images/7bac5275bd3b999fbfca055f05d87767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hwBeVsUNPnVXxX791KNnhg.png"/></div></div></figure><p id="cb76" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">太棒了，现在我们可以将特拉维斯徽章添加到我们的应用程序中了。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oo"><img src="../Images/d1bfa460b6e7f1e7f089a18badedef44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IIABpQBwGxTGidH4rJutyA.png"/></div></div></figure><p id="4d1a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Github repo添加了Travis徽章，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi op"><img src="../Images/7f0557d01a44433367523856ec1983c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBpQUCdtDzMZ8G3VKoX-yA.png"/></div></div></figure><h1 id="5718" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">9.将工作服添加到应用程序中。</h1><p id="b954" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">根据文件，</p><blockquote class="nb nc nd"><p id="c9f0" class="ka kb ne kc b kd ke kf kg kh ki kj kk nf km kn ko ng kq kr ks nh ku kv kw kx ig bi translated">Coveralls是一种web服务，可以帮助您跟踪代码覆盖率，并确保所有新代码都被完全覆盖。</p></blockquote><h2 id="3ba5" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">1.准备好工作服</h2><p id="964a" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">转到<a class="ae ja" href="https://coveralls.io/" rel="noopener ugc nofollow" target="_blank">套装</a> →登录GitHub →添加仓库→点击同步仓库→选择仓库</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oq"><img src="../Images/8cfe3ba65be1b069d82075dea0f4ad69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uCfHdaLthMoEM3ZgW_kAyA.png"/></div></div></figure><h2 id="bc2b" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">2.添加工作服npm包。</h2><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi or"><img src="../Images/350cd4523f80e96ee384120dd927f979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2BEdHdKDJFsg8IWMRXRUA.png"/></div></div></figure><p id="732a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">穿上工作服，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi os"><img src="../Images/4edab6f93b07bd4f644175c58945899c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*IWrQFOZSw7H0w-v3x2Cu-w.png"/></div></figure><h2 id="1c29" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">3.更新travis.yml</h2><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/4587523479cf769a62e8b705c904d8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*-FBHDZ17ibaunOVMCCxFFg.png"/></div></figure><p id="0399" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将把保险范围发送到我们的工作服上。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ou"><img src="../Images/9c6e487351867630bea9fade87247145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hjdq1b9Fu9Gli6X7JCAm1g.png"/></div></div></figure><p id="6b12" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">太棒了，现在我们有67%的覆盖率。原因是我们有两个文件</p><ol class=""><li id="0517" class="mn mo jd kc b kd ke kh ki kl ov kp ow kt ox kx ms mt mu mv bi translated">App.vue</li><li id="24d8" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">按钮计数. vue</li></ol><p id="7b9a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前，仅测试ButtonCount.vue的覆盖率。在App.vue的情况下也需要添加。</p><h2 id="2c9c" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">10.完成100%的测试覆盖率。</h2><p id="561f" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">为此，还需要为App.vue编写规范。在测试/单元/中创建一个名为<strong class="kc je"> <em class="ne"> App.spec.js </em> </strong>的文件</p><p id="8a22" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">添加规格，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oy"><img src="../Images/d6eb2903fca2dd8054f18d88601e4b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWTSOGNNd96iR-MKFMN00g.png"/></div></div></figure><p id="5dfb" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该<h3>数据来自我们的ButtonClick组件。</h3></p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oz"><img src="../Images/bd1717f972c06c5aaef79abe87f3f88b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5sr52mS6megfVys-4VONg.png"/></div></div></figure><p id="2b0a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">太棒了，我们现在可以100%覆盖了。现在我们可以推出代码了。</p><h1 id="18c4" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">11.将覆盖范围显示为徽章。</h1><p id="8459" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">按下密码后，工作服就变成了，</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi op"><img src="../Images/61ac62cebeb6f2238ba888c1142c01b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-nbFrpTnyLxnQ7ZUd0Qo2Q.png"/></div></div></figure><p id="7e08" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">复制徽章，更新到GitHub Repo。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/55bf3b19d8222a72493bd7df49a6ec1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*vnTC4aV2FudO_J5g_SC05A.png"/></div></figure><p id="2f0d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">厉害了，现在在GitHub repo更新了。</p><figure class="ni nj nk nl gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi pb"><img src="../Images/f2938ae7fe5b9f59d585d94e5fe3754d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBIzJlPy3g9vlvtZAWnpKg.png"/></div></div></figure><h1 id="50f7" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">12.重要参考点。</h1><p id="d702" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们在这里取得了很多成就，我只是想更新一些写这篇博客时用到的信息。</p><blockquote class="pc"><p id="d96e" class="pd pe jd bd pf pg ph pi pj pk pl kx dk translated">如果这个故事对你有所帮助，请随时<a class="ae ja" href="https://www.buymeacoffee.com/anoobbava" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a></p></blockquote><ol class=""><li id="84f4" class="mn mo jd kc b kd pm kh pn kl po kp pp kt pq kx ms mt mu mv bi translated">Vue测试手册:<a class="ae ja" href="https://lmiller1990.github.io/vue-testing-handbook/" rel="noopener ugc nofollow" target="_blank">链接</a>。非常感谢创建和实现这个网站和开源它。</li><li id="b96b" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">笑话<a class="ae ja" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="d853" class="mn mo jd kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">Github <a class="ae ja" href="https://github.com/anoobbava/vue-code-coverage" rel="noopener ugc nofollow" target="_blank">链接</a></li></ol><h1 id="477f" class="lw kz jd bd la lx ly lz ld ma mb mc lg md me mf lj mg mh mi lm mj mk ml lp mm bi translated">感谢阅读！</h1><p id="3115" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">如果您有任何问题，请随时留下您的意见。</p></div></div>    
</body>
</html>
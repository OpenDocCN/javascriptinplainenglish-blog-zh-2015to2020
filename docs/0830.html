<html>
<head>
<title>Introduction to TypeScript Enums</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">类型脚本枚举介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-typescript-enums-2bf306d0dbb5?source=collection_archive---------2-----------------------#2019-12-18">https://javascript.plainenglish.io/introduction-to-typescript-enums-2bf306d0dbb5?source=collection_archive---------2-----------------------#2019-12-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="278c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们看看如何在TypeScript中定义和使用枚举</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e2ffeb760db4993710b0470b58faffb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RoNIJyRa5VnyOqtU"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@zmachacek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Zdeněk Macháček</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="595b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想在JavaScript中定义常量，我们可以使用<code class="fe ls lt lu lv b">const</code>关键字。使用TypeScript，我们有另一种方法来定义一组常量，称为枚举。枚举让我们定义一个命名常量的列表。对于定义一个可以取几个可能值的实体来说，这很方便。TypeScript同时提供数字和基于字符串的枚举。</p><h1 id="6d54" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">数字枚举</h1><p id="68db" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">TypeScript具有JavaScript中不可用的枚举类型。枚举类型是一种数据类型，它有一组命名值，称为该类型的元素、成员、枚举数或枚举数。它们是标识符，就像语言中的常量一样。在TypeScript中，数值枚举有一个与之关联的相应索引。默认情况下，成员从索引0开始，但可以更改为从我们喜欢的任何索引开始，后续成员的索引将从该起始编号开始递增。例如，我们可以编写以下代码，在TypeScript中定义一个简单的枚举:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="8de4" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange, Apple, Grape };</span></pre><p id="6a76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以像访问任何其他属性一样通过访问成员来使用枚举。例如，在<code class="fe ls lt lu lv b">Fruit</code>枚举中，我们可以接受如下代码中的成员:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="ecaf" class="mx lx iq lv b gy my mz l na nb">console.log(Fruit.Orange);<br/>console.log(Fruit.Apple);<br/>console.log(Fruit.Grape);</span></pre><p id="43d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么上面代码中的<code class="fe ls lt lu lv b">console.log</code>应该会得到0，因为我们没有为枚举指定起始索引。我们可以用类似下面的代码指定枚举的起始索引:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="1967" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange = 1, Apple, Grape };<br/>console.log(Fruit.Orange);<br/>console.log(Fruit.Apple);<br/>console.log(Fruit.Grape);</span></pre><p id="0186" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们从每个<code class="fe ls lt lu lv b">console.log</code>语句中按顺序记录以下内容:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="a127" class="mx lx iq lv b gy my mz l na nb">1<br/>2<br/>3</span></pre><p id="e045" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以为每个成员指定相同的索引，但这不是很有用:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="f363" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange = 1, Apple = 1, Grape };<br/>console.log(Fruit.Orange);<br/>console.log(Fruit.Apple);<br/>console.log(Fruit.Grape);</span></pre><p id="f1f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们得到:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="ee44" class="mx lx iq lv b gy my mz l na nb">1<br/>1<br/>2</span></pre><p id="67f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">来自<code class="fe ls lt lu lv b">console.log</code>。正如我们所看到的，我们指定了索引，但是我们想改变它。我们甚至可以有负指数:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="c28f" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange = -1, Apple, Grape };<br/>console.log(Fruit.Orange);<br/>console.log(Fruit.Apple);<br/>console.log(Fruit.Grape);</span></pre><p id="47af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们得到:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="15d3" class="mx lx iq lv b gy my mz l na nb">-1<br/>0<br/>1</span></pre><p id="d9f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<code class="fe ls lt lu lv b">console.log</code>开始。要通过索引获取枚举成员，我们可以像通过索引访问数组条目一样使用括号符号。例如，我们可以编写以下代码:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="5acf" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange, Apple, Grape };<br/>console.log(Fruit[0]);<br/>console.log(Fruit[1]);<br/>console.log(Fruit[2]);</span></pre><p id="591a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们得到:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="ca1e" class="mx lx iq lv b gy my mz l na nb">Orange<br/>Apple<br/>Grape</span></pre><p id="1ca3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数值枚举可以将计算值分配给其成员。例如，我们可以编写一个函数来获取每个枚举成员的值，如下面的代码所示:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="4f84" class="mx lx iq lv b gy my mz l na nb">const getValue = () =&gt; 2;</span><span id="e0df" class="mx lx iq lv b gy nc mz l na nb">enum Fruit {<br/>  Orange = getValue(),<br/>  Apple = getValue(),<br/>  Grape = getValue()<br/>};</span></pre><p id="047c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，我们为每个成员分配了一个返回值。如果我们不像下面的代码那样对它们都这样做:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="5d82" class="mx lx iq lv b gy my mz l na nb">const getValue = () =&gt; 2;</span><span id="5629" class="mx lx iq lv b gy nc mz l na nb">enum Fruit {<br/>  Orange = getValue(),<br/>  Apple = getValue(),<br/>  Grape<br/>};</span></pre><p id="7272" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么TypeScript编译器不会编译代码，并会给出一个错误“枚举成员必须有初始值设定项。(1061)".我们可以在一个枚举中混合常量和计算值，因此我们可以编写如下代码:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="2361" class="mx lx iq lv b gy my mz l na nb">const getValue = () =&gt; 2;</span><span id="660d" class="mx lx iq lv b gy nc mz l na nb">enum Fruit {<br/>  Orange = getValue(),<br/>  Apple = 3,<br/>  Grape = getValue()<br/>};</span></pre><h1 id="f3ab" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">字符串枚举</h1><p id="e581" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">TypeScript枚举成员也可以有字符串值。我们可以将每个成员的值设置为字符串，方法是将字符串分配给它们，如下面的代码所示:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="8d14" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 'Orange',<br/>  Apple = 'Apple',<br/>  Grape = 'Grape'<br/>};</span></pre><p id="4232" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，与数值枚举不同，我们不能给它们赋值。例如，如果我们有以下内容:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="8214" class="mx lx iq lv b gy my mz l na nb">const getValue = () =&gt; 'Orange';</span><span id="82a5" class="mx lx iq lv b gy nc mz l na nb">enum Fruit {<br/>  Orange = getValue(),<br/>  Apple = 'Apple',<br/>  Grape = 'Grape'<br/>};</span></pre><p id="50a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们会得到TypeScript编译器错误消息“在具有字符串值成员的枚举中不允许计算值。(2553)"因为字符串值枚举不允许计算值。字符串枚举不像数值枚举那样具有自动递增的行为，因为它们没有数值，但是枚举成员的值要清楚得多，因为每个值都是有意义的值，任何阅读它的人都清楚。</p><p id="3a5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在单个枚举中，我们可以让一些成员具有数值，而让其他成员具有字符串值，如下面的代码所示:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="127e" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 2,<br/>  Apple = 'Apple',<br/>  Grape = 'Grape'<br/>};</span></pre><p id="070e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这比对所有枚举成员使用单一类型的值更令人困惑，因此不建议对一个枚举的不同成员使用混合值类型。</p><h1 id="b8ee" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">计算成员和常量成员</h1><p id="765e" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">每个枚举成员都有一个与之关联的值，该值可以是常量，也可以是计算值。如果枚举中的第一个成员没有被显式赋值，则该枚举成员是常量，这意味着默认情况下它被赋值为0。如果没有为它分配显式值，并且前面的枚举成员是一个数值常量，也可以将其视为常量，这意味着它将具有前面成员的值加1。例如，如果我们有:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="fcd7" class="mx lx iq lv b gy my mz l na nb">enum Fruit { Orange = 1, Apple, Grape };</span></pre><p id="01ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么<code class="fe ls lt lu lv b">Apple</code>和<code class="fe ls lt lu lv b">Grape</code>都是常量成员，因为它们会被自动分别赋值为2和3。如果每个成员都被赋予了字符串值，那么它们也被视为常量。此外，如果枚举引用先前定义的枚举成员，该成员可以来自相同或不同的枚举。分配给常量枚举的任何操作的返回值，如用括号将枚举表达式括起来，对枚举表达式(如<code class="fe ls lt lu lv b">+</code>、<code class="fe ls lt lu lv b">-</code>、<code class="fe ls lt lu lv b">~</code>)进行一元算术或位运算，或者对枚举表达式(如<code class="fe ls lt lu lv b">-</code>、<code class="fe ls lt lu lv b">*</code>、<code class="fe ls lt lu lv b">/</code>、<code class="fe ls lt lu lv b">%</code>、<code class="fe ls lt lu lv b">&lt;&lt;</code>、<code class="fe ls lt lu lv b">&gt;&gt;</code>、<code class="fe ls lt lu lv b">&gt;&gt;&gt;</code>、<code class="fe ls lt lu lv b">&amp;</code>、<code class="fe ls lt lu lv b">|</code>、<code class="fe ls lt lu lv b">^</code>)进行二元算术或位运算，都被视为常量枚举表达式。</p><p id="052f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，下面的枚举是一个具有常量枚举表达式的枚举:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="7d32" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 1 + 2,<br/>  Apple =  1 + 3,<br/>  Grape = 1 + 4<br/>};</span></pre><p id="a91e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">表达式是常量，因为它们是从任何变量或函数的返回值计算出来的。每个成员都有根据数值计算的值，而不是分配给变量或从函数返回的数字。</p><p id="28e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下也是具有常数成员的枚举的示例:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="de76" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 1 + 2,<br/>  Apple =  1 + 3,<br/>  Grape = Orange + Apple<br/>};</span></pre><p id="03a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">包括最后一个成员在内的所有成员都是常数，因为<code class="fe ls lt lu lv b">Grape</code>的值是根据常数<code class="fe ls lt lu lv b">Orange</code>和<code class="fe ls lt lu lv b">Apple</code>计算出来的。两个操作数都是常量值的按位运算也被视为常量，如下面的代码所示:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="6cfb" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 1 | 2,<br/>  Apple =  1 + 3,<br/>  Grape = 'abc'.length<br/>};</span></pre><p id="d453" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面没有描述的任何内容都被认为是计算值。例如，如果我们有:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="02f3" class="mx lx iq lv b gy my mz l na nb">enum Fruit {<br/>  Orange = 1 + 2,<br/>  Apple =  1 + 3,<br/>  Grape = 'abc'.length<br/>};</span></pre><p id="c087" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么<code class="fe ls lt lu lv b">Grape</code>就是一个计算成员，因为我们分配给<code class="fe ls lt lu lv b">Grape</code>的表达式不是从任何常量成员中计算出来的，它涉及到从一个对象中获取一个属性，而这个属性不是从一个常量值中计算出来的。</p><p id="1aeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想在JavaScript中定义常量，我们可以使用<code class="fe ls lt lu lv b">const</code>关键字。使用TypeScript，我们有另一种方法来定义一组常量，称为枚举。枚举让我们定义一个命名常量的列表。对于定义一个可以取几个可能值的实体来说，这很方便。TypeScript同时提供数字和基于字符串的枚举。TypeScript允许枚举成员具有数值和字符串值。它们也可以根据其他枚举成员的值或我们希望分配的任何其他表达式来计算。常数枚举是从作为操作数的实际数值或分配给成员的实际值计算出来的。所有其他值都是计算成员值。</p></div></div>    
</body>
</html>
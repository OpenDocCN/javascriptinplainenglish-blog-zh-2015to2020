<html>
<head>
<title>Generating PDF from Images on the Client-side With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React在客户端从图像生成PDF</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/generating-pdf-from-images-on-the-client-side-with-react-a971b61de28c?source=collection_archive---------1-----------------------#2020-11-01">https://javascript.plainenglish.io/generating-pdf-from-images-on-the-client-side-with-react-a971b61de28c?source=collection_archive---------1-----------------------#2020-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="af96" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">无需服务器，在前端将图像转换为PDF</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d7a680949fb7e0aeeba7f5cafc84dc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4wszgvAMG61g2_n0"/></div></div></figure></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><p id="1248" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">出于各种原因，您可能需要为web应用程序的用户提供一个PDF文档，例如财务报表、帐户信息或任何必须在单个文件中共享的重要信息。</p><p id="c43f" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在这篇文章中，我描述了为什么您应该考虑在客户端生成PDF，以及如何将这一功能添加到您的web，或者更具体地说，React应用程序。</p><p id="e003" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">因为我喜欢从一开始就对正在发生的事情有一个很好的概述，所以在继续之前，您可以看到应用程序及其源代码的现场演示:</p><blockquote class="lu lv lw"><p id="b829" class="ky kz lx la b lb lc jr ld le lf ju lg ly li lj lk lz lm ln lo ma lq lr ls lt ij bi translated"><strong class="la ir">现场试玩:</strong>【https://pixochi.github.io/pdf-from-images-react-app/】<br/><strong class="la ir">源代码:</strong><a class="ae mb" href="https://github.com/pixochi/pdf-from-images-react-app" rel="noopener ugc nofollow" target="_blank">https://github.com/pixochi/pdf-from-images-react-app</a></p></blockquote></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="bec4" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">1.为什么在客户端/前端</h1><ul class=""><li id="bd30" class="mu mv iq la b lb mw le mx lh my ll mz lp na lt nb nc nd ne bi translated">如果你的应用还没有使用服务器，你就不需要设置和维护任何服务器。</li><li id="d186" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">您的服务器将使用更少的资源，因为所有的工作都由浏览器完成。</li><li id="19ae" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">尽管这取决于您的工具，但是您可以利用所有现有的前端样式框架。</li></ul></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="4835" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">2.使用什么JS库</h1><p id="def2" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">有3个流行的JavaScript库可以用来在前端生成PDF文档。</p><ol class=""><li id="f5cc" class="mu mv iq la b lb lc le lf lh nn ll no lp np lt nq nc nd ne bi translated"><a class="ae mb" href="https://github.com/MrRio/jsPDF" rel="noopener ugc nofollow" target="_blank"> jsPDF </a></li><li id="fd80" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nq nc nd ne bi translated"><a class="ae mb" href="https://github.com/foliojs/pdfkit" rel="noopener ugc nofollow" target="_blank"> PDFKit </a></li><li id="9778" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nq nc nd ne bi translated"><a class="ae mb" href="https://github.com/bpampuch/pdfmake" rel="noopener ugc nofollow" target="_blank"> pdfmake </a></li></ol><h2 id="3f65" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">为什么选择jsPDF</h2><p id="e356" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">我为这个项目选择了<a class="ae mb" href="https://github.com/MrRio/jsPDF" rel="noopener ugc nofollow" target="_blank"> jsPDF </a>，原因如下:</p><ul class=""><li id="4c4a" class="mu mv iq la b lb lc le lf lh nn ll no lp np lt nb nc nd ne bi translated"><a class="ae mb" href="https://github.com/MrRio/jsPDF" rel="noopener ugc nofollow" target="_blank">GitHub星星的最高数量(20.3K) </a></li><li id="325b" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae mb" href="https://github.com/MrRio/jsPDF/releases?after=1.1.135" rel="noopener ugc nofollow" target="_blank">到期(2014年发布)</a></li><li id="c748" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae mb" href="https://bundlephobia.com/result?p=jspdf@2.1.1" rel="noopener ugc nofollow" target="_blank">最小尺寸(比PDFKit小87%，比pdfmake小460)</a></li><li id="db2c" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae mb" href="https://github.com/MrRio/jsPDF/tree/master/types" rel="noopener ugc nofollow" target="_blank">原生类型脚本支持</a></li><li id="4af7" class="mu mv iq la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae mb" href="http://raw.githack.com/MrRio/jsPDF/master/docs/" rel="noopener ugc nofollow" target="_blank">优秀文档</a></li></ul></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="1f5d" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">3.让我们构建React应用程序</h1><h2 id="5bde" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">初始设置</h2><p id="77c5" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">为了简单起见，我们将使用<a class="ae mb" href="https://create-react-app.dev/docs/adding-typescript/" rel="noopener ugc nofollow" target="_blank"> Create React App </a>来设置应用程序。在终端中运行一个命令来初始化项目:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="8b4e" class="nr md iq oe b gy oi oj l ok ol">npx create-react-app pdf-from-images-react-app --template typescript</span></pre><p id="d914" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">安装完成后，添加<code class="fe om on oo oe b">jspdf</code>包:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="3176" class="nr md iq oe b gy oi oj l ok ol">npm install jspdf</span></pre><p id="8a1e" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">然后使用以下命令启动React应用程序:</p><pre class="kg kh ki kj gt od oe of og aw oh bi"><span id="de2e" class="nr md iq oe b gy oi oj l ok ol">npm start</span></pre><h2 id="4fb4" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated"><strong class="ak"> UI骨架</strong></h2><p id="15e5" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">在实现功能之前，我们将准备好应用程序UI。</p><p id="4288" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">您可以用下面的代码替换<code class="fe om on oo oe b">App.tsx</code>的全部内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="ea00" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在上面的代码中，你可以注意到几个<code class="fe om on oo oe b">className</code><em class="lx">s</em>——这些是对应用程序的最小样式调整。所有的<code class="fe om on oo oe b">className</code><em class="lx"/>都来自<code class="fe om on oo oe b">App.css</code>，其中包含以下CSS规则:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="c69d" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">随着<code class="fe om on oo oe b">App.tsx</code>和<code class="fe om on oo oe b">App.css</code>中的内容被替换，您的应用在浏览器中应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/2e4ac3cad6e28fa5534ff5efca076f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GkV2KYdj90RIiufVAFfaKQ.png"/></div></div><figcaption class="os ot gj gh gi ou ov bd b be z dk">UI for the app generating PDFs from images</figcaption></figure><h2 id="4df6" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">从您的设备上传图像</h2><p id="3c2c" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">在生成PDF之前，您需要从设备中读取图像。<code class="fe om on oo oe b">App.tsx</code>已经包含了一个用于选择文件的文件<code class="fe om on oo oe b">input</code>元素，现在我们需要将选中的图片带入应用状态。</p><p id="d78a" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">注意处理上传图像并更新状态的<code class="fe om on oo oe b">handleImageUpload</code>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="182f" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">有了最新的更改，您应该能够单击绿色的“上传图像”按钮，选择图像，然后图像应该会显示在UI中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/6c47e1390da63b1f9c6fe6627806cb13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_yVI3E_WV3xXOZCRUHsdwg.png"/></div></div><figcaption class="os ot gj gh gi ou ov bd b be z dk">React app for generating PDFs from images</figcaption></figure><h2 id="7102" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">从上传的图像生成PDF</h2><p id="f7e4" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">最后一步是最终创建一个包含所有图像的PDF文档。在您用以下更改更新您的<code class="fe om on oo oe b">App.tsx</code>之后，您的React应用程序就完成了。</p><p id="9eae" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">新的<code class="fe om on oo oe b">handleGeneratePdfFromImages</code>功能负责PDF生成和应用程序清理。现在，当您点击“生成PDF”按钮时，您的PDF就可以下载了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h1 id="6fae" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">结论</h1><p id="b66f" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">随意克隆/派生<a class="ae mb" href="https://github.com/pixochi/pdf-from-images-react-app" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>并使用上述代码的重构版本。</p><p id="cfa3" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果有些事情没有按预期工作或需要更多的细节，只需在下面留下评论。</p><div class="ow ox gp gr oy oz"><a href="https://github.com/pixochi/pdf-from-images-react-app" rel="noopener  ugc nofollow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">pix ochi/pdf-from-images-react-app</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">github.com</p></div></div><div class="pi l"><div class="pj l pk pl pm pi pn kp oz"/></div></div></a></div><p id="e10e" class="pw-post-body-paragraph ky kz iq la b lb lc jr ld le lf ju lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><strong class="la ir">如果你喜欢这篇文章，请关注我，了解更多关于React、JavaScript、TypeScript等开发的技巧:】</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi po"><img src="../Images/08a3e640fe3709ae1c66a21f9bf7ab79.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/0*lMHQyvEGQBOSmc4y.gif"/></div></figure><h2 id="a15c" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">成为会员</h2><p id="a982" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated"><em class="lx">如果你喜欢阅读这样的故事，并想支持我成为一名作家，</em> <a class="ae mb" href="https://jakub-kozak.medium.com/membership" rel="noopener"> <em class="lx">考虑报名成为一名中等会员</em> </a> <em class="lx">。每月5美元，你可以无限制地阅读媒体上的故事。如果你</em> <a class="ae mb" href="https://jakub-kozak.medium.com/membership" rel="noopener"> <em class="lx">用我的链接</em> </a> <em class="lx">注册，我会赚一小笔佣金</em>🙌</p><div class="ow ox gp gr oy oz"><a href="https://jakub-kozak.medium.com/membership" rel="noopener follow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">通过我的推荐链接加入Medium雅各布·科萨克</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">阅读雅各布·科萨克(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">jakub-kozak.medium.com</p></div></div><div class="pi l"><div class="pp l pk pl pm pi pn kp oz"/></div></div></a></div></div><div class="ab cl kr ks hu kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="ij ik il im in"><h2 id="969f" class="nr md iq bd me ns nt dn mi nu nv dp mm lh nw nx mo ll ny nz mq lp oa ob ms oc bi translated">工作机会——来加入我吧</h2><p id="355f" class="pw-post-body-paragraph ky kz iq la b lb mw jr ld le mx ju lg lh nk lj lk ll nl ln lo lp nm lr ls lt ij bi translated">我在T21的团队正在寻找更多的开发者！你有使用React和Ruby on Rails的经验吗？那就不要犹豫，马上申请吧:<a class="ae mb" href="https://www.tjekvik.com/careers" rel="noopener ugc nofollow" target="_blank">https://www.tjekvik.com/careers</a>。你可以在欧洲的任何地方工作！🌍</p><div class="ow ox gp gr oy oz"><a href="https://medium.com/swlh/how-to-build-a-chrome-extension-with-react-typescript-and-webpack-92e806ce2e16" rel="noopener follow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">如何使用React、TypeScript和Webpack构建Chrome扩展</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">从创建样板文件到发布Chrome网络商店的完整扩展</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">medium.com</p></div></div><div class="pi l"><div class="pq l pk pl pm pi pn kp oz"/></div></div></a></div><div class="ow ox gp gr oy oz"><a href="https://medium.com/swlh/best-moment-js-alternatives-5dfa6861a1eb" rel="noopener follow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">最佳时刻。JS替代方案</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">比较大小、性能、类型脚本支持等</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">medium.com</p></div></div><div class="pi l"><div class="pr l pk pl pm pi pn kp oz"/></div></div></a></div><div class="ow ox gp gr oy oz"><a href="https://medium.com/swlh/build-a-real-time-chat-app-with-react-hooks-and-socket-io-4859c9afecb0" rel="noopener follow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">用React Hooks和Socket.io构建一个实时聊天应用</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">有源代码和现场演示</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">medium.com</p></div></div><div class="pi l"><div class="ps l pk pl pm pi pn kp oz"/></div></div></a></div></div></div>    
</body>
</html>
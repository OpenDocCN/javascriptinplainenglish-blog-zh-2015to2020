<html>
<head>
<title>How to Integrate Dialogflow CX and ES Chatbot with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Dialogflow CX和ES聊天机器人与Angular整合</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-integrate-dialogflow-cx-and-es-chatbot-with-angular-js-9fd26d82121e?source=collection_archive---------12-----------------------#2020-11-30">https://javascript.plainenglish.io/how-to-integrate-dialogflow-cx-and-es-chatbot-with-angular-js-9fd26d82121e?source=collection_archive---------12-----------------------#2020-11-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7d79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有许多关于使用Dialogflow开发聊天机器人的帖子。但是创造聊天机器人还不够。将Dialogflow CX和ES连接到web界面更加有趣和具有挑战性。随着Angular成为一个受欢迎的新兴平台，这里是我们将Dialogflow聊天机器人与Angular集成的指南。</p><p id="fa72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://dashboard.kommunicate.io/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">创建免费聊天机器人</strong> </a></p><p id="da5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们寻求简化聊天机器人与不同平台的集成时，我们之前已经编写了将聊天机器人与网站和应用程序集成的指南。</p><h2 id="14f2" class="kj kk in bd kl km kn dn ko kp kq dp kr jv ks kt ku jz kv kw kx kd ky kz la lb bi translated">先决条件</h2><p id="a66b" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">首先，你需要一个<a class="ae ki" href="https://dialogflow.com/" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>聊天机器人或者Dialogflow和Angular的工作知识。要将聊天机器人与Angular集成，您需要一个通信帐户。所有上述工具都可以免费试用。</p><p id="ac35" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您没有Kommunicate帐户，请在这里免费注册<a class="ae ki" href="https://www.kommunicate.io/product/dialogflow-integration" rel="noopener ugc nofollow" target="_blank">—我们将在后续步骤中需要它。</a></p><h1 id="39e4" class="lh kk in bd kl li lj lk ko ll lm ln kr lo lp lq ku lr ls lt kx lu lv lw la lx bi translated">集成Dialogflow聊天机器人和Angular的步骤</h1><p id="1d06" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">我将解释我是如何在通信的帮助下连接Dialogflow和Angular的。</p><p id="ad3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ly">注意:为了保持简单明了，本教程用非常基本和简单的代码开发来解释。此外，这个项目可以在我的。要获得如何将机器人集成到网站的详细教程，您可以查看这里的</em><a class="ae ki" href="https://www.kommunicate.io/blog/integrate-bot-using-dialogflow-in-kommunicate/" rel="noopener ugc nofollow" target="_blank"><em class="ly"/></a><em class="ly">。</em></p><h1 id="88dc" class="lh kk in bd kl li lj lk ko ll lm ln kr lo lp lq ku lr ls lt kx lu lv lw la lx bi translated">步骤1:创建您的Dialogflow聊天机器人</h1><p id="6dc0" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">首先，您可以在Dialogflow中轻松创建一个聊天机器人，或者编辑他们提供的示例聊天机器人模板。为了更进一步，你可以创建你自己的意图和实体。</p><h1 id="c41e" class="lh kk in bd kl li lj lk ko ll lm ln kr lo lp lq ku lr ls lt kx lu lv lw la lx bi translated">步骤2:将Dialogflow聊天机器人与Kommunicate集成</h1><p id="cc8f" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">登录到您的<a class="ae ki" href="https://www.kommunicate.io" rel="noopener ugc nofollow" target="_blank">通信</a>仪表板，并导航到<a class="ae ki" href="https://dashboard.kommunicate.io/bot" rel="noopener ugc nofollow" target="_blank">机器人部分</a>。如果您没有帐户，您可以在这里创建一个<a class="ae ki" href="https://dashboard.kommunicate.io/signup" rel="noopener ugc nofollow" target="_blank">。找到“对话流”部分，然后单击“设置”。</a></p><p id="5f07" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，导航到您的Dialogflow控制台并下载服务帐户密钥文件。以下是查找文件的步骤:</p><ol class=""><li id="edb8" class="lz ma in jm b jn jo jr js jv mb jz mc kd md kh me mf mg mh bi translated">打开<strong class="jm io"> Dialogflow agent </strong>设置(左侧面板上的齿轮图标)</li><li id="2881" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">点击谷歌项目栏中提到的谷歌云链接</li><li id="1416" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">在谷歌云页面中，点击<strong class="jm io"> API的&amp;服务</strong>，导航至<strong class="jm io">凭证部分</strong></li><li id="05e0" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">在“<strong class="jm io">凭证部分</strong>下，找到服务帐户并点击<strong class="jm io"> Dialogflow集成的编辑</strong></li><li id="392d" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">在屏幕底部点击<strong class="jm io">添加密钥</strong>按钮并创建密钥选项，<strong class="jm io"> JSON密钥</strong>将被下载</li></ol><p id="c491" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要将<strong class="jm io"> Dialogflow CX </strong>集成到komunicate中，请遵循相同的说明下载JSON密钥，并在komunicate仪表板中提及<strong class="jm io">代理Id </strong></p><p id="7751" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">获取代理Id </strong>:转到<strong class="jm io">对话流CX控制台</strong> &gt; &gt; <strong class="jm io">在您已创建的代理中选择项目</strong>&gt;&gt;‘将代理名称复制到剪贴板将采用下面提到的格式，其中代理Id为<code class="fe mn mo mp mq b">54b0c663-2c01-4a09-a482-277ff39c0b05</code></p><pre class="mr ms mt mu gt mv mq mw mx aw my bi"><span id="6f41" class="kj kk in mq b gy mz na l nb nc">projects/billing-d041f/locations/global/agents/54b0c663-2c01-4a09-a482-277ff39c0b05</span></pre><figure class="mr ms mt mu gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nd"><img src="../Images/a98b4a6900e88fecf8ebbb2a5fa75893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LkwvnEicbZqnBX6MHkJG3w.png"/></div></div></figure><p id="d100" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置您的机器人的名称和个人资料图片，并选择是否允许<a class="ae ki" href="https://www.kommunicate.io/blog/chatbot-human-handoff/" rel="noopener ugc nofollow" target="_blank">机器人向人类移交</a>您新创建的机器人。点击<strong class="jm io">完成机器人集成设置</strong>，瞧，你的机器人现在集成了。</p><p id="0899" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://dashboard.kommunicate.io/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">免费试用30天</strong> </a></p><p id="7f38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以使用以下路径检查/编辑您的集成机器人:</p><p id="0815" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">仪表板→机器人集成→管理机器人:你可以在这里检查你所有的集成机器人。</p><p id="d0cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">仪表盘→ Bot集成。完成后，您的Dialogflow部分将有一个绿色图标，显示您成功集成的机器人数量。</p><h1 id="55fc" class="lh kk in bd kl li lj lk ko ll lm ln kr lo lp lq ku lr ls lt kx lu lv lw la lx bi translated">步骤3:全局安装Angular CLI。</h1><p id="aaf1" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">要使用npm安装CLI，请打开终端/命令提示符并输入以下命令:</p><pre class="mr ms mt mu gt mv mq mw mx aw my bi"><span id="9efa" class="kj kk in mq b gy mz na l nb nc">npm install -g @angular/cli</span></pre><p id="8b77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，创建一个新的工作空间和初始应用程序项目。运行CLI命令ng new，并提供名称my-app，如下所示:</p><pre class="mr ms mt mu gt mv mq mw mx aw my bi"><span id="6230" class="kj kk in mq b gy mz na l nb nc">ng new my-app</span></pre><p id="5d4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">初始的app项目包含一个简单的欢迎应用程序，可以运行了。Angular包括一个服务器，以便您可以轻松地在本地构建和服务您的应用程序。</p><p id="176d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，导航到工作区文件夹(my-app)。</p><p id="6faf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用带-open选项的CLI命令ng serve启动服务器。</p><h1 id="deef" class="lh kk in bd kl li lj lk ko ll lm ln kr lo lp lq ku lr ls lt kx lu lv lw la lx bi translated">步骤4:在Angular组件中安装聊天机器人</h1><p id="dc65" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">在角形组件上安装聊天机器人。CLI将创建第一个角度分量。它是根组件，名为app-root。</p><p id="de38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行任何代码编辑器并打开工作区文件夹(my-app)。</p><p id="646e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ly">注:组件是角度应用的基本构件。它们在屏幕上显示数据，监听用户输入，并根据输入采取行动。</em></p><pre class="mr ms mt mu gt mv mq mw mx aw my bi"><span id="208d" class="kj kk in mq b gy mz na l nb nc">@Component({<br/> selector: 'app-root',<br/> templateUrl: './app.component.html',<br/> styleUrls: ['./app.component.css']<br/>})<br/>export class AppComponent {<br/> title = 'My First Angular App!';<br/>}</span></pre><p id="1150" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要安装聊天机器人，请打开Kommunicate并导航至仪表板→设置。点击配置部分下的<a class="ae ki" href="https://dashboard.kommunicate.io/settings/install" rel="noopener ugc nofollow" target="_blank">安装</a>。复制要添加到网站或应用程序中的JavaScript代码。</p><p id="9038" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将javascript代码粘贴到app.component.ts文件中。组件的代码应该如下所示</p><pre class="mr ms mt mu gt mv mq mw mx aw my bi"><span id="c59e" class="kj kk in mq b gy mz na l nb nc"><a class="ae ki" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>    selector: 'app-root',<br/>    templateUrl: './app.component.html',<br/>    styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent {<br/>    title = 'my first app';<br/>    ngOnInit() {<br/>        (function(d, m) {<br/>            var kommunicateSettings = {<br/>                "appId": "&lt;YOUR_APP_ID&gt;",<br/>                "popupWidget": true,<br/>                "automaticChatOpenOnNavigation": true<br/>            };<br/>            var s = document.createElement("script");<br/>            s.type = "text/javascript";<br/>            s.async = true;<br/>            s.src = "<a class="ae ki" href="https://widget.kommunicate.io/v2/kommunicate.app" rel="noopener ugc nofollow" target="_blank">https://widget.kommunicate.io/v2/kommunicate.app</a>";<br/>            var h = document.getElementsByTagName("head")[0];<br/>            h.appendChild(s);<br/>            window.kommunicate = m;<br/>            m._globals = kommunicateSettings;<br/>        })(document, window.kommunicate || {});<br/>    }<br/>}</span></pre><p id="b877" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ng serve命令启动服务器，监视您的文件，并在您对这些文件进行更改时重建应用程序。</p><p id="a676" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">-open(或者只是-o)选项自动打开您的浏览器到<a class="ae ki" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4200/ </a>。</p><p id="0dd0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你运行浏览器，你应该看到一个聊天窗口弹出，这意味着你的聊天机器人准备好了。这就是如何使用Kommunicate通过几个简单的步骤将Dialogflow聊天机器人与Angular集成在一起。</p><p id="64d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://dashboard.kommunicate.io/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">免费试用</strong> </a></p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="1b9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ly">原载于2019年5月29日</em><a class="ae ki" href="https://www.kommunicate.io/blog/integrate-dialogflow-angular-js/" rel="noopener ugc nofollow" target="_blank"><em class="ly">https://www . komunicate . io</em></a><em class="ly">。</em></p></div></div>    
</body>
</html>
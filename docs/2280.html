<html>
<head>
<title>Good Parts of JavaScript — Callbacks, Closure, and Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript的优秀部分——回调、闭包和模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/good-parts-of-javascript-callbacks-closure-and-modules-932e2e791201?source=collection_archive---------3-----------------------#2020-06-07">https://javascript.plainenglish.io/good-parts-of-javascript-callbacks-closure-and-modules-932e2e791201?source=collection_archive---------3-----------------------#2020-06-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/90aca2d67ff07958ffb6b22aa61bba0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YcR5C5LNXP_pVzLl"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@samscrim?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Samuel Scrimshaw</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f7e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上最流行的编程语言之一。它可以做很多事情，并且有一些领先于许多其他语言的功能。</p><p id="d034" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将探讨在JavaScript应用程序中定义和使用回调、闭包和模块的方法。</p><h1 id="b422" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复试</h1><p id="74cb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">函数使得处理不连续事件变得更加容易。</p><p id="e2d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以使用它们在固定时间后运行一些代码。</p><p id="8236" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调是传递给另一个函数并被同步或异步调用的函数。</p><p id="4735" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同步回调调用的一个例子是我们传递给数组方法的回调。</p><p id="1dc2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="240f" class="mn lc iq mj b gy mo mp l mq mr">const arr = [1, 2, 3].map(a =&gt; a ** 3);</span></pre><p id="14a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数<code class="fe ms mt mu mj b">a =&gt; a ** 3</code>在<code class="fe ms mt mu mj b">map</code>一被调用就被同步调用。</p><p id="b83d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调也可以是异步的。异步回调在函数被调用一段时间后才会运行。</p><p id="d3e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">异步回调的一个例子是我们传递给<code class="fe ms mt mu mj b">setTimeout</code>函数的回调。</p><p id="cfa7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8134" class="mn lc iq mj b gy mo mp l mq mr">setTimeout(() =&gt; {<br/>  console.log('foo');<br/>}, 100)</span></pre><p id="e731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码在100ms后调用回调。</p><p id="3e68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于JavaScript程序在单个线程中运行，异步回调被用在很多地方，所以我们尽可能异步地运行代码，以避免阻塞程序线程。</p><h1 id="37b7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件</h1><p id="6682" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript拥有官方模块之前，我们通常将私有代码放在闭包里，以避免暴露给公众。</p><p id="02d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4fd2" class="mn lc iq mj b gy mo mp l mq mr">const module = (() =&gt; {<br/>  let value = 0;<br/>  return {<br/>    getValue() {<br/>      return value;<br/>    }<br/>  }<br/>})()</span></pre><p id="3cea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们创建了一个返回对象的生命。</p><p id="f2cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该对象具有返回私有的<code class="fe ms mt mu mj b">value</code>值的<code class="fe ms mt mu mj b">getValue</code>方法。</p><p id="bde2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能访问<code class="fe ms mt mu mj b">value</code>，但是可以调用<code class="fe ms mt mu mj b">getValue()</code>。</p><p id="b725" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，现在我们有了模块，我们可以用它们来代替。</p><p id="96ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以定义如下:</p><p id="aac5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">module.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="52ea" class="mn lc iq mj b gy mo mp l mq mr">export const foo = 1;<br/>const bar = 2;<br/>export const getBar = () =&gt; bar;</span></pre><p id="9d02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">index.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0c86" class="mn lc iq mj b gy mo mp l mq mr">import { getBar } from "./module";<br/>console.log(getBar());</span></pre><p id="3058" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe ms mt mu mj b">module.js</code>中导出<code class="fe ms mt mu mj b">foo</code>和<code class="fe ms mt mu mj b">getBar</code>，这样我们就可以在<code class="fe ms mt mu mj b">index.js</code>中使用它们。</p><p id="ca40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">getBar</code>可以在<code class="fe ms mt mu mj b">index.js</code>中调用。</p><p id="1085" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们保持了隐私，但是我们认为如果我们想的话，我们可以揭露他们。</p><p id="e669" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以将一个模块中的所有东西作为默认导出。</p><p id="8a37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="f0c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">module.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e2f0" class="mn lc iq mj b gy mo mp l mq mr">const bar = 2;</span><span id="8675" class="mn lc iq mj b gy mv mp l mq mr">export default {<br/>  getBar: () =&gt; bar<br/>};</span></pre><p id="d9c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于默认导出，我们导出一个东西，并通过编写来导入它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cf99" class="mn lc iq mj b gy mo mp l mq mr">import module from "./module";<br/>console.log(module.getBar());</span></pre><p id="cc00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们导入默认导出，我们不需要花括号。</p><h1 id="e253" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">串联</h1><p id="8f9b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在方法中链接返回<code class="fe ms mt mu mj b">this</code>的方法。</p><p id="3351" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a9ea" class="mn lc iq mj b gy mo mp l mq mr">const box = {<br/>  setHeight(height) {<br/>    this.height = height;<br/>    return this;<br/>  },<br/>  setWidth(width) {<br/>    this.width = width;<br/>    return this;<br/>  },<br/>  setLength(length) {<br/>    this.length = length;<br/>    return this;<br/>  },<br/>}</span></pre><p id="6329" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么当我们调用如下方法时:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f547" class="mn lc iq mj b gy mo mp l mq mr">box.setHeight(100).setWidth(200).setLength(150);</span></pre><p id="e384" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dc46" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "height": 100,<br/>  "width": 200,<br/>  "length": 150<br/>}</span></pre><p id="0987" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们看到的，如果我们返回<code class="fe ms mt mu mj b">this</code>，那么我们可以按照我们希望的方式设置更新<code class="fe ms mt mu mj b">this</code>并返回它。</p><p id="2f43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在一个对象中链接这些方法。</p><p id="ac23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们可以制作富有表现力的界面。</p><p id="0dd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在每个方法中做一点点，把所有的小动作串联起来。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/50ef95d69d589790f65ab35f683a4196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tpB3cofAHXoY3Cqe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">chuttersnap</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6f47" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">咖喱菜肴</h1><p id="666c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">库里函数允许我们通过组合一个函数和一个自变量来产生一个新的函数。</p><p id="d479" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建一个<code class="fe ms mt mu mj b">curry</code>函数来返回一个应用了一些参数的函数，让我们通过编写以下代码来应用其余的参数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6cc5" class="mn lc iq mj b gy mo mp l mq mr">const curry = (fn, ...args) =&gt; {<br/>  return (...moreArgs) =&gt; {<br/>    return fn.apply(null, [...args, ...moreArgs]);<br/>  };<br/>}</span></pre><p id="2d7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有一个<code class="fe ms mt mu mj b">curry</code>函数，它带有一个函数<code class="fe ms mt mu mj b">fn</code>和一些参数<code class="fe ms mt mu mj b">args</code>。</p><p id="dbde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，我们返回一个函数，该函数返回应用了两个函数的所有参数的<code class="fe ms mt mu mj b">fn</code>。</p><p id="c715" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们首先应用<code class="fe ms mt mu mj b">args</code>中的参数，然后将<code class="fe ms mt mu mj b">moreArgs</code>中的参数应用到<code class="fe ms mt mu mj b">fn</code>。</p><p id="d27b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在如果我们这样称呼它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3d28" class="mn lc iq mj b gy mo mp l mq mr">const add = (a, b, c) =&gt; a + b + c;</span><span id="cc84" class="mn lc iq mj b gy mv mp l mq mr">const curried = curry(add, 1);<br/>const result = curried(2, 3);</span></pre><p id="b2e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先在<code class="fe ms mt mu mj b">curried</code>中得到一个将1应用于<code class="fe ms mt mu mj b">add</code>的函数。</p><p id="7226" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过将2和3应用于<code class="fe ms mt mu mj b">curried</code>得到最终的总和。</p><p id="6dcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe ms mt mu mj b">result</code>为6。</p><h1 id="00e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ea6e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript中经常使用回调。可以同步或异步调用。</p><p id="7dff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用返回一个对象的正式模块或函数来定义模块。</p><p id="e1c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Currying函数让我们返回一个部分应用了参数的函数，以后可以应用更多的参数。</p><h2 id="277c" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="c40a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to build a simple Slack bot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建一个简单的Slack bot</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-simple-slack-bot-28e85f368e7b?source=collection_archive---------10-----------------------#2020-11-16">https://javascript.plainenglish.io/how-to-build-a-simple-slack-bot-28e85f368e7b?source=collection_archive---------10-----------------------#2020-11-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/ef22fa193f334d0a94254432400d8654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y4uzMrG8FXY3v3532Igmfw.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Photo by <a class="ae ja" href="https://unsplash.com/@lianhao?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Lianhao Qu</a> on <a class="ae ja" href="https://unsplash.com/s/photos/surveillance?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="6c1b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Slack是一个非常简单的交流工具。每个人都触手可及。你只需敲几下键盘就能吸引任何人的注意力。每当你无聊到不想自己搜索答案的时候，用一个问题分散他们的注意力；-)</p><p id="e1de" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在您关闭您所属的大多数频道的通知之前，并不需要您被迫加入许多工作区。然而，有些人有很高的信噪比，你不会介意被告知他们的信息。</p><p id="f170" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">幸运的是，这个难题可以通过一个简单的机器人轻松解决。所以让我们来学习如何创建这样一个Slack bot。</p><p id="ca5d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">如果你不在乎一步一步的指导，你也可以直接</em> <a class="ae ja" href="https://github.com/mostlytyped/slack-stalker-bot" rel="noopener ugc nofollow" target="_blank"> <em class="ky">查看最终代码</em> </a> <em class="ky">。</em></p><h1 id="0932" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">构建Slack bot</h1><p id="fc44" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们将在Node.js中构建我们的bot，所以您需要安装<code class="fe mc md me mf b">node</code>和<code class="fe mc md me mf b">npm</code>。如果你想把你的应用程序部署到Heroku，你还需要一个Heroku账户，并安装他们的CLI。要在本地运行您的应用程序，您还需要<a class="ae ja" href="https://rethinkdb.com/" rel="noopener ugc nofollow" target="_blank">安装并运行一个RethinkDB实例</a>。</p><p id="1199" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要创建应用程序，请在终端中运行以下命令。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="2a61" class="mo la jd mf b gy mp mq l mr ms">$ mkdir stalker-bot &amp;&amp; cd stalker-bot<br/>$ npm init -y<br/>$ npm install <a class="ae ja" href="http://twitter.com/slack/events-api" rel="noopener ugc nofollow" target="_blank">@slack/events-api</a> <a class="ae ja" href="http://twitter.com/slack/web-api" rel="noopener ugc nofollow" target="_blank">@slack/web-api</a> rethinkdb</span></pre><p id="b89c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将初始化Node.js应用程序并安装所有必需的依赖项。</p><h1 id="9a2f" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">监听空闲事件</h1><p id="88f1" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们将创建一个Node.js服务器来监听Slack事件。创建一个<code class="fe mc md me mf b">index.js</code>文件，并添加以下服务器代码。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="434e" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们首先配置slack库，即事件监听器服务器和web客户端。然后我们收听<code class="fe mc md me mf b">message</code>事件。直接信息被解释为命令，通道中的信息被监听，以防我们需要通知跟踪者。</p><h1 id="0ec3" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Bot命令</h1><p id="bb0f" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们可以直接和机器人聊天来发布命令。跟踪者机器人知道三个命令:</p><ul class=""><li id="a5cf" class="mv mw jd kc b kd ke kh ki kl mx kp my kt mz kx na nb nc nd bi translated"><code class="fe mc md me mf b">subscribe</code>对某个渠道的用户</li><li id="9168" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated"><code class="fe mc md me mf b">unsubscribe</code>来自某个渠道的用户</li><li id="d02a" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated"><code class="fe mc md me mf b">list</code>所有当前订阅</li></ul><p id="ff1d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了保存所有订阅，我们将使用我最近最喜欢的文档数据库，<a class="ae ja" href="https://rethinkdb.com/" rel="noopener ugc nofollow" target="_blank"> RethinkDB </a>。它类似于MongoDB，但另外还内置了反应能力，并且仍然是开源的。我们需要两个表，一个保存所有用户，一个保存他们的订阅。我们稍后将处理管理数据库连接和运行迁移。</p><p id="a640" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建一个<code class="fe mc md me mf b">handler.js</code>文件，从下面的代码开始。我们首先配置Slack web客户机，以便能够响应事件，并在处理实际命令之前添加一些数据库样板文件。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="97d5" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当处理命令时，我们基本上在消息中搜索三个命令中的一个。我们还使用正则表达式来从(取消)订阅命令中提取用户和频道。</p><h2 id="37e3" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">为用户订阅</h2><p id="f782" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">为了订阅频道中的用户，我们首先需要从订阅命令中解析所述用户和频道。解析后的用户和通道保存在订阅对象中，该对象可以有侦听器。监听器，即命令发布者，保存在用户表中。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="2af8" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建订阅时，机器人还需要加入相应的通道，以便能够侦听来自所需用户的消息。</p><h2 id="268b" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">取消用户的订阅</h2><p id="d855" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">要取消订阅通道中的用户，我们还需要首先解析命令，然后恢复订阅命令中完成的操作。我们从订阅中移除侦听器，即命令发布者，或者如果没有侦听器，则删除订阅。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b694" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当一个频道不再有订阅时，我们也让机器人离开它。这将减少机器人必须做出反应的信息。</p><h2 id="ea80" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">列表订阅</h2><p id="1f24" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">列出订阅是一个方便的命令，可以查看我们当前跟踪的用户。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="63dc" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经实现了所有的命令，让我们做实际的跟踪。</p><h1 id="8fc5" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">做真正的跟踪</h1><p id="0339" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">当我们在一个频道中订阅一个用户时，这个机器人就加入了这个频道。它处理每条消息，如果对消息作者感兴趣，就做出相应的反应。如果所述作者有一个收听者，则机器人向收听者发送直接消息。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><blockquote class="nu nv nw"><p id="3d15" class="ka kb ky kc b kd ke kf kg kh ki kj kk nx km kn ko ny kq kr ks nz ku kv kw kx ig bi translated">注意:为了让我们的机器人服务于它的目的，我们显然不能禁用直接消息的通知。</p></blockquote><h1 id="90c8" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">数据库管理</h1><p id="eca6" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">到目前为止，我们只是方便地获得了一个数据库连接，并假设所需的表已经存在。现在，是时候管理实际的RethinkDB连接并处理所需的迁移了。</p><h1 id="a5ba" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">重新思考数据库连接</h1><p id="af7c" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们懒惰地管理我们的RethinkDB连接，也就是说，我们只在实际需要时才创建(重新)连接。连接参数是从环境变量中解析出来的，或者使用默认值。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="e616" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Heroku上，RethinkDB Cloud插件将设置环境变量。对于本地运行的RethinkDB实例，缺省值应该有效。</p><h1 id="c6a3" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">移民</h1><p id="aae6" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">没有<code class="fe mc md me mf b">users</code>和<code class="fe mc md me mf b">subscriptions</code>表格，应用程序无法运行。因此，我们需要一个添加这些表的数据库迁移。</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="ff7b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这种迁移会检查所需的表是否存在，如果缺少，就会创建它们。它还创建了必要的二级索引，一个用于按频道查找订阅，另一个用于按听众查找订阅。</p><h1 id="ba95" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建Heroku应用程序</h1><blockquote class="nu nv nw"><p id="6e06" class="ka kb ky kc b kd ke kf kg kh ki kj kk nx km kn ko ny kq kr ks nz ku kv kw kx ig bi translated">此步骤是可选的。您也可以在本地运行该应用程序，并使用<a class="ae ja" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank">或</a>接收时差事件。</p></blockquote><p id="f5b7" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了将应用程序部署到Heroku，我们需要创建一个Heroku应用程序:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="ccd2" class="mo la jd mf b gy mp mq l mr ms">$ git init<br/>$ heroku create<br/>Creating app... done, ⬢ fast-inlet-79371<br/><a class="ae ja" href="https://fast-inlet-79371.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://fast-inlet-79371.herokuapp.com/</a> | <a class="ae ja" href="https://git.heroku.com/fast-inlet-79371.git" rel="noopener ugc nofollow" target="_blank">https://git.heroku.com/fast-inlet-79371.git</a></span></pre><p id="b02b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建一个Heroku应用程序会给你一个随机名字的URL。请注意这个URL，因为它是稍后Slack回调URL所需要的。</p><p id="35da" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们还需要一个RethinkDB实例来存储和订阅用户之间发送的聊天消息。您可以通过<a class="ae ja" href="https://www.rethinkdb.cloud/" rel="noopener ugc nofollow" target="_blank"> RethinkDB Cloud插件</a>进行如下操作:</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="5253" class="mo la jd mf b gy mp mq l mr ms">$ heroku addons:create rethinkdb</span></pre><blockquote class="nu nv nw"><p id="2f90" class="ka kb ky kc b kd ke kf kg kh ki kj kk nx km kn ko ny kq kr ks nz ku kv kw kx ig bi translated">RethinkDB Cloud加载项当前处于alpha模式。<a class="ae ja" href="https://www.rethinkdb.cloud/" rel="noopener ugc nofollow" target="_blank">为您的Heroku账户发邮件邀请</a>。</p></blockquote><h1 id="b787" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">将应用程序部署到Heroku</h1><p id="f24b" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">为了将我们的松弛机器人部署到Heroku，我们需要创建一个<code class="fe mc md me mf b">Procfile</code>。这个文件基本上告诉Heroku运行什么进程。</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="313d" class="mo la jd mf b gy mp mq l mr ms">// Procfile</span><span id="5fb5" class="mo la jd mf b gy oa mq l mr ms">release: node migrate.js<br/>web: node index.js</span></pre><p id="df00" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Heroku认为<code class="fe mc md me mf b">release</code>和<code class="fe mc md me mf b">web</code>进程分别是发布时运行的命令和主web应用程序。</p><p id="5009" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用将应用程序部署到Heroku</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="1192" class="mo la jd mf b gy mp mq l mr ms">$ echo node_modules &gt; .gitignore<br/>$ git add .<br/>$ git commit -m 'A stalker bot'<br/>$ git push heroku master</span></pre><p id="6f3f" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该应用程序还不会工作，因为它缺少两个环境变量，即<code class="fe mc md me mf b">SLACK_SIGNING_SECRET</code>和<code class="fe mc md me mf b">SLACK_TOKEN</code>。我们将在创建实际的Slack应用程序时得到它们。</p><h1 id="4430" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建时差应用程序</h1><p id="c062" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">要创建一个Slack应用程序，请前往<a class="ae ja" href="https://api.slack.com/apps" rel="noopener ugc nofollow" target="_blank">api.slack.com/apps</a>(如果您尚未登录，请登录，然后返回此网址)。单击“创建应用程序”并填写名称和工作区以关联应用程序。</p><h2 id="bade" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">许可</h2><p id="2de8" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">首先，我们需要声明应用程序所需的所有权限。这可以在“验证和权限”选项卡中完成。向下滚动到“作用域”卡，并添加以下“机器人令牌作用域”:</p><ul class=""><li id="51da" class="mv mw jd kc b kd ke kh ki kl mx kp my kt mz kx na nb nc nd bi translated">频道:历史</li><li id="22f2" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">频道:加入</li><li id="dcc9" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">聊天:写作</li><li id="2eed" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">im:历史</li></ul><p id="f88a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mc md me mf b">channels:history</code>和<code class="fe mc md me mf b">im:history</code>权限允许机器人读取其所属频道的信息以及直接发送信息。<code class="fe mc md me mf b">channels:join</code>许可允许机器人加入新的频道。最后，<code class="fe mc md me mf b">chat:write</code>权限允许机器人写直接的信息(例如，给你)。</p><h2 id="1a3c" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">设置环境变量</h2><p id="6c5e" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们的机器人需要两把备用钥匙。用于验证我们从Slack获得的消息事件的签名秘密，以及用于验证我们作为机器人的行为的令牌。签名秘密可以在“基本信息”选项卡的“应用程序凭据”卡中找到。OAuth令牌显示在“OAuth和权限”选项卡中。使用将两个密钥都添加到您的Heroku应用程序中</p><pre class="mg mh mi mj gt mk mf ml mm aw mn bi"><span id="cce7" class="mo la jd mf b gy mp mq l mr ms">$ heroku config:set SLACK_SIGNING_SECRET=...<br/>$ heroku config:set SLACK_TOKEN=xoxb-...</span></pre><p id="66ec" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将自动重启Heroku应用程序，并允许我们接下来添加的事件订阅来验证您正确运行的端点。</p><h2 id="e4ee" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">事件订阅</h2><p id="93de" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们的应用程序只有在我们能够对松弛的工作场所发生的事件做出反应时才有效。转到“事件订阅”选项卡并启用事件。对于请求URL，放入您从Heroku获得的app URL，并添加<code class="fe mc md me mf b">events</code>路线，例如<code class="fe mc md me mf b">https://fast-inlet-79371.herokuapp.com/events</code>。然后订阅以下bot事件:</p><ul class=""><li id="4343" class="mv mw jd kc b kd ke kh ki kl mx kp my kt mz kx na nb nc nd bi translated">消息.渠道</li><li id="c922" class="mv mw jd kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">message.im</li></ul><p id="695c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您将看到这两个事件需要我们在上一步中添加的<code class="fe mc md me mf b">channels:history</code>和<code class="fe mc md me mf b">im:history</code>权限。保存更改以使其生效。</p><h2 id="d82f" class="mo la jd bd lb nj nk dn lf nl nm dp lj kl nn no ln kp np nq lr kt nr ns lv nt bi translated">安装应用程序</h2><p id="0e65" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">现在我们已经准备好在我们的工作区中安装应用程序了。转到“基本信息”选项卡，然后单击“将应用程序安装到工作区”。这将把你置于应用程序用户的角色，并要求你授予它应用程序所需的权限。</p><h1 id="e080" class="kz la jd bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">测试一下</h1><p id="555f" class="pw-post-body-paragraph ka kb jd kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">转到您的工作区，将跟踪机器人添加到您的应用程序中。测试一下，在一个充满噪音的繁忙频道订阅你最喜欢的人。每次被跟踪的人写信给你，你都会收到一条直接消息通知你。</p></div><div class="ab cl ob oc hr od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ig ih ii ij ik"><p id="9525" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">原载于2020年11月16日</em><a class="ae ja" href="https://www.rethinkdb.cloud/2020/11/16/slack-bot.html" rel="noopener ugc nofollow" target="_blank"><em class="ky">https://www . rethinkdb . cloud</em></a><em class="ky">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Everything you need to know about the children prop in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你需要知道的关于儿童道具的一切</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/everything-you-need-to-know-about-children-prop-in-react-9c0e0913f5a2?source=collection_archive---------2-----------------------#2020-04-17">https://javascript.plainenglish.io/everything-you-need-to-know-about-children-prop-in-react-9c0e0913f5a2?source=collection_archive---------2-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="279a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过构建实际应用程序来学习</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1159b9d70632a4396c83f268e278da1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IFcCwdRxxeQ_r653"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@filijs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Filiberto Santillán</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4a01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将看到<code class="fe ls lt lu lv b">children</code>道具的重要性。<br/>那么让我们开始吧。</p><p id="e9e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们渲染任何JSX时，React会将那个JSX转换成<code class="fe ls lt lu lv b">React.createElement </code>调用。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="3846" class="ma mb iq lv b gy mc md l me mf">const jsx = &lt;h1&gt;This is JSX&lt;/h1&gt;</span></pre><p id="95c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码将被转换为</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="54ba" class="ma mb iq lv b gy mc md l me mf">var jsx = React.createElement("h1", null, "This is JSX");</span></pre><p id="bf8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以通过粘贴我们在本文<a class="ae kv" href="https://levelup.gitconnected.com/create-a-clone-of-babel-repl-site-to-convert-es6-react-code-to-es5-93cdc9ad98ea?source=friends_link&amp;sk=517cfac3dfc4b451610eb298f36a428c" rel="noopener ugc nofollow" target="_blank">中创建的JSX代码</a><a class="ae kv" href="https://babel-repl-clone.now.sh/" rel="noopener ugc nofollow" target="_blank">来验证这一点。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/eff9ebc3e2a9ef738fed03189ba6fb4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqKI3wwfqL-GEMMRDlvH2w.png"/></div></div></figure><p id="a6b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">React.createElement</code>调用被进一步转换成一个对象表示，如</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="6966" class="ma mb iq lv b gy mc md l me mf">{ <br/> type: 'h1', <br/> props: { <br/>  children: 'This is JSX' <br/> }<br/>}</span></pre><p id="332d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您将JSX登录到控制台，就可以看到这一点</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="f05f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们添加更多的元素，<code class="fe ls lt lu lv b">children</code>将成为一个数组</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="2576" class="ma mb iq lv b gy mc md l me mf">&lt;div&gt;<br/> &lt;h1&gt;This is a heading&lt;/h1&gt;<br/> &lt;h2&gt;This is another heading&lt;/h2&gt;<br/>&lt;/div&gt;</span></pre><p id="663a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将被转换为</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div></figure><p id="ae2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解更多这方面的内容，请查看这篇文章。</p><p id="c5eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们在开始和结束组件标签之间声明任何JSX时，React提供了一种方法，使用一个叫做<code class="fe ls lt lu lv b">children</code>的特殊道具来访问它</p><p id="03b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设，我们有这样使用的<code class="fe ls lt lu lv b">Book</code>组件</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="834b" class="ma mb iq lv b gy mc md l me mf">&lt;Book&gt;<br/> &lt;h1&gt;This is book content&lt;/h1&gt;<br/>&lt;/Book&gt;</span></pre><p id="dd49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以像访问<code class="fe ls lt lu lv b">props.children</code>一样访问<code class="fe ls lt lu lv b">Book</code>组件中的h1标签</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="e3d1" class="ma mb iq lv b gy mc md l me mf">const Book = props =&gt; {<br/> return &lt;div&gt;{props.children}&lt;/div&gt;;<br/>};</span></pre><p id="2f76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/black-tdd-r5li5" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/black-tdd-r5li5</a></p><p id="643a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们在开始和结束的<code class="fe ls lt lu lv b">Book</code>标签中有多个元素，比如</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="797c" class="ma mb iq lv b gy mc md l me mf">&lt;Book&gt;<br/> &lt;h2&gt;Name: Harry Potter and the Half-Blood Prince&lt;/h2&gt;<br/> &lt;p&gt;- J.K.Rowling&lt;/p&gt;<br/>&lt;/Book&gt;</span></pre><p id="5fc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且我们想要循环通过孩子的，我们可以这样做</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="e224" class="ma mb iq lv b gy mc md l me mf">const Book = props =&gt; {<br/> return &lt;div&gt;{props.children.map(child =&gt; child)}&lt;/div&gt;;<br/>};</span></pre><p id="4a87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/vigorous-antonelli-dfkle" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/vigorous-antonelli-dfkle</a></p><p id="d216" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果有多个子元素，这将很好地工作，但是如果只有一个子元素，那么map方法将会失败，因为如开始所见，如果只有一个元素，那么<code class="fe ls lt lu lv b">props.children</code>将是一个字符串而不是一个数组。</p><p id="1f0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/festive-glitter-9e0u5" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/festive-glitter-9e0u5</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/be7e303dce2001c471f8f07b7027bcab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eAkr0CuOOhCd-A1Oe__IA.png"/></div></div></figure><p id="9a1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此React使用<code class="fe ls lt lu lv b">React.Children</code>提供了一个API来处理这个场景</p><ol class=""><li id="1428" class="ml mm iq ky b kz la lc ld lf mn lj mo ln mp lr mq mr ms mt bi translated"><strong class="ky ir">做出反应。Children.map: </strong></li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div></figure><p id="5bd7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/mystifying-morning-ssjz2" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/mystifying-morning-ssjz2</a></p><p id="293c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以现在，<code class="fe ls lt lu lv b">React.Children.map</code>将工作，即使在<code class="fe ls lt lu lv b">props.children</code>中只有一个元素，它也不会抛出错误。</p><p id="5a2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.<strong class="ky ir">做出反应。Children.forEach: </strong></p><p id="8a06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它允许我们遍历children的，但是它不返回任何东西。</p><p id="f070" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.<strong class="ky ir">做出反应。Children.count: </strong></p><p id="2def" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它让我们能够计算孩子的数量。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="d611" class="ma mb iq lv b gy mc md l me mf">const Book = props =&gt; {<br/> return &lt;div&gt;{React.Children.count(props.children)}&lt;/div&gt;;<br/>};</span></pre><p id="3581" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/billowing-dream-sifjc" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/billowing-dream-sifjc</a></p><p id="d90e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.<strong class="ky ir">做出反应。儿童专用:</strong></p><p id="49a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它验证children只有一个孩子，并返回它。如果有多个子节点，那么它将抛出一个错误。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="91a1" class="ma mb iq lv b gy mc md l me mf">const Book = props =&gt; {<br/> return &lt;div&gt;{React.Children.only(props.children)}&lt;/div&gt;;<br/>};</span></pre><p id="2f61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/angry-driscoll-7yg0x" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/angry-driscoll-7yg0x</a></p><p id="3dc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.<strong class="ky ir">做出反应。Children.toArray: </strong></p><p id="7f67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它返回带有附加键的子级的数组表示形式。如果您想要移除一些子组件或更改子组件的顺序以将其传递给其他组件，此方法非常有用。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="cbd9" class="ma mb iq lv b gy mc md l me mf">const Book = props =&gt; {<br/> return &lt;div&gt;{React.Children.toArray(props.children).slice(0, 2)}&lt;/div&gt;;<br/>};</span></pre><p id="5e39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/heuristic-glade-wb84j" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/heuristic-glade-wb84j</a></p><p id="5b9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们来看一个实际应用，了解如何在实际应用中使用儿童道具。</p><p id="e98e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将有两个路线，一个主页和一个列表页面。</p><p id="4a0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在两个页面上，我们将以卡片格式显示电影列表，但在主页上，我们将只显示选定数量的电影，在列表页面上，我们将显示所有电影，每个电影都有一个编辑和删除电影的按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/b7e2b02c8cc47a91e784f333e85fb33e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qw6-fI85QtmcBDcZ1JGrkg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home Page</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/f4f0803496d8d05fd9d6affe7612cc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vteuaXxRMI-hnsh9anjKjQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">List Page</figcaption></figure><p id="6a17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示:<a class="ae kv" href="https://codesandbox.io/s/children-prop-demo-enp51" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/children-prop-demo-enp51</a></p><p id="b2b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，两个页面上的UI完全相同，因此我们将使用children prop来避免同步两个页面上的更改，而不是将相同的代码复制到两个单独的文件中，一个用于主页，另一个用于列表页面。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Home Page</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Movie Item Page</figcaption></figure><p id="5bc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">MovieItem.js</code>将是我们展示每张电影卡的主要部分。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">List Page</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mj mi l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">List Item Page</figcaption></figure><p id="99a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，我们不是直接从<code class="fe ls lt lu lv b">ListPage</code>组件调用<code class="fe ls lt lu lv b">MovieItem</code>组件，而是调用<code class="fe ls lt lu lv b">ListItem</code>组件。</p><p id="9f64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">ListItem</code>组件中，我们刚刚添加了<code class="fe ls lt lu lv b">edit</code>和<code class="fe ls lt lu lv b">delete</code>按钮，这些按钮在<code class="fe ls lt lu lv b">MovieItem</code>组件和<code class="fe ls lt lu lv b">MovieItem</code>组件中作为子按钮传递，我们正在从道具中析构子道具并显示它。</p><p id="bb29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过这种方式，我们为列表页面和主页使用相同的<code class="fe ls lt lu lv b">MovieItem</code>组件，而无需在每个组件中复制代码。</p><p id="29cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>没有添加实际的<code class="fe ls lt lu lv b">edit</code>和<code class="fe ls lt lu lv b">delete</code>功能，因为它只是用来展示如何使用<code class="fe ls lt lu lv b">props.children</code></p><p id="1be7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里找到完整的源代码<a class="ae kv" href="https://github.com/myogeshchavan97/children-props-demo" rel="noopener ugc nofollow" target="_blank">，在这里</a>找到现场演示<a class="ae kv" href="https://children-props-demo.now.sh/" rel="noopener ugc nofollow" target="_blank"/></p><p id="09f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天到此为止。我希望你学到了新东西。</p><p id="87da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">别忘了订阅我的每周简讯，里面有惊人的技巧、诀窍和文章，直接在这里的收件箱</strong> <a class="ae kv" href="https://yogeshchavan.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅。</strong> </a></p></div></div>    
</body>
</html>
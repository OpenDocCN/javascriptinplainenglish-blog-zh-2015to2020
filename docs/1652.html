<html>
<head>
<title>Text-to-Speech Software with Google Cloud and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌云和Node.js的文本到语音转换软件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-complete-guide-to-build-text-to-speech-software-with-google-cloud-and-node-js-a28f6b81f8f5?source=collection_archive---------0-----------------------#2020-04-11">https://javascript.plainenglish.io/a-complete-guide-to-build-text-to-speech-software-with-google-cloud-and-node-js-a28f6b81f8f5?source=collection_archive---------0-----------------------#2020-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="af28" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一步一步的教程。不需要编程技能！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c70332e004df4a0e552ea78d0c08ba29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYeZMABh_BNgm4uRTJEzlA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">illustration by <a class="ae kv" href="https://www.linkedin.com/in/ChaeyunKim" rel="noopener ugc nofollow" target="_blank">Chaeyun Kim</a></figcaption></figure><p id="f061" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你以前从未编程，或者你是编程初学者，或者你只是厌倦了想在家里建立一些程序的隔离时间，让我们享受这篇文章，因为它涵盖了使用Node.js的Google Cloud文本到语音转换服务需要知道的所有基本步骤。</p><p id="0192" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击此处查看上述段落的语音输出演示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="c136" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">首先，我可以用文本到语音转换做什么？</h2><p id="39f9" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">现代的文本到语音软件允许你创建一个声音转录你的阅读与自然/人类专业的声音一样，在电视上，你可以使用它</p><ul class=""><li id="7e88" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">您的视频/演示产品</li><li id="6bc1" class="mz na iq ky b kz ni lc nj lf nk lj nl ln nm lr ne nf ng nh bi translated">为你大声朗读书籍</li><li id="ffa3" class="mz na iq ky b kz ni lc nj lf nk lj nl ln nm lr ne nf ng nh bi translated">你的家庭作业</li><li id="713e" class="mz na iq ky b kz ni lc nj lf nk lj nl ln nm lr ne nf ng nh bi translated">还有更多…</li></ul><h2 id="ae92" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">为什么我不应该使用在线文本到语音转换服务？</h2><p id="5650" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">网上有几个文本到语音转换服务，如T2、NoteVibes、T4、T7、Naturalreaders、T8、T9等。在他们的网站上宣称是免费的在线服务。<strong class="ky ir">然而</strong>，它们中的许多都带有广告或一些隐性成本。当您需要导出和下载mp3格式的音频结果，以将其包含在您的个人项目视频中，从而进行公开制作或推广时。<strong class="ky ir">但是</strong>你不会被允许免费这么做，因为它是被许可的！例如，在<strong class="ky ir"> NoteVibes </strong>中，从2020年起，你必须每月支付70美元才能使用mp3语音播放节目。是的，如果你只是想用它来做你的短视频YouTube项目或者记录你喜欢的书，它可能太贵了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/d4eb54f8d0b91854ae80d6c83cd297e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXEFO3mdyvJ24liHmxW5sg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Notevibers Pricing as of Apr 2020</figcaption></figure><h2 id="4ec8" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">我为什么要使用谷歌云？</h2><p id="3df5" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">谷歌云免费层包括访问<a class="ae kv" href="https://cloud.google.com/text-to-speech" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">谷歌云文本到语音</strong> </a>服务，允许你通过WaveNet技术每月免费使用<strong class="ky ir">100万字符</strong>的服务。WaveNet技术是谷歌提出的一种机器学习模型，可以生成模仿人类声音的语音，听起来更自然，与人类表现的差距缩小了70%。如果允许100万个字符，那么它将相当于使用12号字体的Word文档的大约330个单倍行距页面，或者大约23个小时。哇，太棒了！！</p><ul class=""><li id="e87f" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">*如果你更喜欢亚马逊服务，与<strong class="ky ir">谷歌云文本到语音</strong>相当的产品是<strong class="ky ir">亚马逊Polly </strong>，它也包括每月100万个字符，用于在免费服务中用神经语音转录你的文本。我将很快在另一篇文章中写一篇关于<em class="no">如何使用Amazon Polly </em>的教程。</li></ul><h2 id="26ac" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">为什么是NodeJS？</h2><p id="f43e" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">嗯，根据<a class="ae kv" href="https://insights.stackoverflow.com/survey/2019#technology" rel="noopener ugc nofollow" target="_blank"> StackOverflow开发者调查2019 </a>，我们发现世界上最流行的编程语言中的JavaScript！有了JavaScript知识，您可以在前端和后端使用多个框架。所以，使用Node.js对我们来说是一个完美的选择！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/016c236ed1566e94d7ea53d9cc7c9d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PixZNJUWjzRez6dHvY_Htg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: <a class="ae kv" href="https://insights.stackoverflow.com/survey/2019" rel="noopener ugc nofollow" target="_blank">StackOverflow Developer Survey, 2019</a></figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="68ef" class="nq mc iq bd md nr ns nt mg nu nv nw mj jw nx jx mm jz ny ka mp kc nz kd ms oa bi translated">所以，让我们开始吧！</h1><h2 id="05d8" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated"><strong class="ak"> 1。准备好您的Google Cloud帐户并启用文本到语音转换服务</strong></h2><ul class=""><li id="4278" class="mz na iq ky b kz mu lc mv lf ob lj oc ln od lr ne nf ng nh bi translated">打开你的浏览器，在这里注册谷歌云平台<a class="ae kv" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="23c7" class="mz na iq ky b kz ni lc nj lf nk lj nl ln nm lr ne nf ng nh bi translated">在此创建或选择您的项目<a class="ae kv" href="https://console.cloud.google.com/projectselector2/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="058b" class="mz na iq ky b kz ni lc nj lf nk lj nl ln nm lr ne nf ng nh bi translated">为您的项目启用计费，打开控制台<strong class="ky ir">导航菜单</strong>，然后选择<strong class="ky ir">计费</strong>即可。你可能会担心，你必须给谷歌你的信用信息，但是，我们不会被收费，直到我们使用产品超过免费层的限制。所以，不用担心！</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/ba3eba685b341ebd30fd8d687f45ef8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLa8f8ziR1k8os84dK9QkA.png"/></div></div></figure><ul class=""><li id="422f" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">启用云文本到语音转换API，您可以在APIs &amp;服务菜单中找到该服务，或者您可以点击此<a class="ae kv" href="https://console.cloud.google.com/apis/library/texttospeech.googleapis.com" rel="noopener ugc nofollow" target="_blank">链接</a>。完成后，你可以看到带有<em class="no"> API启用</em>标志的绿色标记。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/75dfea9fcdffc20f69c095e925868e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YiBH4qarJkOKxtdE6UxB5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Enabling Google Cloud Text-to-Speech API</figcaption></figure><ul class=""><li id="9995" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">创建一个服务帐户密钥，您可以在<em class="no">API&amp;服务</em> &gt; <em class="no">凭证</em> &gt; <em class="no">创建凭证</em> &gt; <em class="no">服务帐户</em>下找到，如下图所示。或者可以用这个<a class="ae kv" href="https://console.cloud.google.com/apis/credentials/serviceaccountkey" rel="noopener ugc nofollow" target="_blank">链接</a>。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/4f9d75f790a2399ec60dcac41baf8577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rkIBGRCrfFEdmO0VFGGfg.png"/></div></div></figure><ul class=""><li id="d446" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">请按1继续。选择一个<em class="no">新服务账号</em>、<strong class="ky ir">、</strong> 2。为您的服务帐户命名，请按3。点击<em class="no">创建</em>确认。(不需要选择<em class="no">角色</em>，请将键类型保留为<em class="no"> JSON) </em>，4。确认<em class="no">创建没有角色</em>，如下图所示。之后，<em class="no">私钥</em>文件将被保存到您的计算机中。请确保它的安全，因为它将被用作与您的谷歌云项目关联的密钥。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/0ad1ec0bc69484386a551593786f5262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mH7flP4thlNhikywBX2Wdw.png"/></div></div></figure><h2 id="fdae" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">2.在您的PC中准备Node.js</h2><p id="88fd" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">这一步非常简单。从<a class="ae kv" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这里</a>下载安装Node.js即可。完成后，请确认Node.js安装成功。在Window系统中，只有1。在搜索面板中键入“cmd ”, 2。打开命令提示符，请按3。键入“node -v ”,然后您会得到一个作为“v.xx.xx.xx”的回答。就是这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/efbd12bb13be9f8d538c1fcc28a03039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkUhmPyjKb-hySph47eTvQ.png"/></div></div></figure><h2 id="9f8f" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">3.编写Node.js程序</h2><p id="65df" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">一切准备就绪后，让我们编写软件来消费Google Cloud文本到语音转换API。首先，让我们准备代码编辑器，你可以使用任何你喜欢的文本编辑器，比如<a class="ae kv" href="https://atom.io/" rel="noopener ugc nofollow" target="_blank"> Atom </a>，<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a>，或者，<a class="ae kv" href="https://notepad-plus-plus.org/" rel="noopener ugc nofollow" target="_blank"> Notepad++ </a>。我最喜欢的是VSCode。准备好之后，创建一个项目文件夹，并将步骤1中的<em class="no">私钥</em>文件放在该文件夹中。然后，在项目目录下打开命令提示符/控制台/终端。您可以使用<code class="fe oj ok ol om b">ls</code>命令确保您在正确的目录中，并且使用<code class="fe oj ok ol om b">cd</code>命令更改目录。如果您使用VSCode软件，您可以使用<code class="fe oj ok ol om b">Ctrl + ‘</code>热键在程序内激活它。然后，使用以下命令启动Node.js程序，然后从Google Cloud安装必要的依赖包。</p><pre class="kg kh ki kj gt on om oo op aw oq bi"><span id="5d53" class="mb mc iq om b gy or os l ot ou">$npm init </span><span id="93ce" class="mb mc iq om b gy ov os l ot ou">$npm install @google-cloud/text-to-speech</span></pre><p id="8335" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在这个文件中创建一个名为<code class="fe oj ok ol om b">text2speech.js</code>的新文件，请复制以下代码并粘贴到您的文件中。请注意，您应该用您在Google Cloud上的项目ID和您的私钥名称分别为您的<code class="fe oj ok ol om b">projectID</code>和<code class="fe oj ok ol om b">keyFilename</code>变量赋值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow lt l"/></div></figure><p id="ee1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，创建一个名为<code class="fe oj ok ol om b">setting.json</code>的设置文件。在第<code class="fe oj ok ol om b">8</code>行，您可以将您的文本输入更改为您想要转录的任何文本。在<code class="fe oj ok ol om b">11–12</code>行，你可以设置你喜欢的输入语言和输入声音！好玩的时候，可以随意选择<a class="ae kv" href="https://cloud.google.com/text-to-speech/docs/voices" rel="noopener ugc nofollow" target="_blank"> <em class="no">这里</em> </a>。您也可以在该设置文件的第<code class="fe oj ok ol om b">14</code>行更改输出文件名。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow lt l"/></div></figure><p id="f45c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样！现在一切都准备好了。您可以在终端/命令提示符下使用以下命令来测试运行该程序:</p><pre class="kg kh ki kj gt on om oo op aw oq bi"><span id="d6eb" class="mb mc iq om b gy or os l ot ou">$ node text2speech.js<br/>&gt;&gt; Audio content written to file: output.mp3</span></pre><p id="3a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的输出将以您在设置文件中指定的名称保存在项目文件夹中。</p><p id="d0f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你！现在你的程序完成了！您可以在设置文件中更改输入文本、声音类型、语言和输出文件名，然后运行<code class="fe oj ok ol om b">$ node text2speech.js</code>命令生成新的语音。你可以随时在谷歌云<a class="ae kv" href="https://console.cloud.google.com/apis/api/texttospeech.googleapis.com" rel="noopener ugc nofollow" target="_blank">控制台</a>中查看你已经使用了多少。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="5070" class="nq mc iq bd md nr ns nt mg nu nv nw mj jw nx jx mm jz ny ka mp kc nz kd ms oa bi translated">结论</h1><p id="9624" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">本文向您展示了如何使用Node.js和Google Cloud Service构建文本到语音转换程序的第一步。对于非程序员来说，设置起来可能有点复杂，但从长远来看，你会受益于一个最好的文本到语音转换工具，它有非常高的免费配额，而且完全没有隐藏成本。</p><h2 id="b469" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">感谢您的阅读📚！</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://medium.com/@JoeTS"><div class="gh gi ox"><img src="../Images/97b2f6d6046501cfa0a886685c5c5af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H5z5p537tJt9zQQs.png"/></div></a><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://medium.com/@JoeTS" rel="noopener">https://medium.com/@JoeTS</a></figcaption></figure><h2 id="5109" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">保重，保持健康。✌</h2></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="e8e2" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated"><strong class="ak">用简单的英语写的JavaScript的注释:</strong></h2><p id="a78e" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，请用你的Medium用户名在<a class="ae kv" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">submissions@javascriptinplainenglish.com</a>给我们发电子邮件，我们会将你添加为作者。</p></div></div>    
</body>
</html>
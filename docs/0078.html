<html>
<head>
<title>How to convert your code base to React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何转换您的代码库以做出反应</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/converting-your-code-base-to-react-1930945dc017?source=collection_archive---------0-----------------------#2019-02-08">https://javascript.plainenglish.io/converting-your-code-base-to-react-1930945dc017?source=collection_archive---------0-----------------------#2019-02-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9c0b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一些有用的入门技巧</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/58166b084523e06dd51229cf4f6b072b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ngk6EZEXCbStiQ_d"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@jeremybishop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jeremy Bishop</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="21bb" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">仅仅为了转换旧代码而转换旧代码并不是最明智的想法。</h2><p id="5c1a" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">当我们的团队着手将React引入我们的一些页面时，我们希望看到性能优势、更快的开发和更快乐的开发人员。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="1d74" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">我们的前端项目很大，我们会遇到任何软件公司都会遇到的问题。我们有遗留的Javascript框架、丰富的jQuery插件和难以重构的代码。当把React添加到我们不断增长的库的列表中时，我们希望确保有一些东西正在被淘汰。</p><p id="e0c6" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">我们有一个Angular 1应用程序，已经几年没有更新了，我们认为首先替换这些页面将是一个好的开始。我建议采用这种方法，替换整个页面或功能，这样你就有了一个基准，而不是做一些全新的东西。</p><p id="1ec1" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">通过这种方式，您可以在React和之前的代码之间进行比较。</p><h1 id="73f4" class="mx kx iq bd ky my mz na lb nb nc nd le jw ne jx li jz nf ka lm kc ng kd lq nh bi translated">正在配置</h1><h2 id="33a0" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">创建React应用</h2><p id="045f" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">如果你刚刚开始学习React，很可能你已经安装了脸书提供的create-react-app。这是一个很好的开始运行的平台，但是我们选择从头开始安装所有的东西。我建议进行手动安装，因为您将获得有价值的知识，并确切地知道发生了什么。您也不太可能创建一个空项目，而更有可能将React集成到一个现有项目中。</p><h2 id="5c29" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">网络包</h2><p id="75e9" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们的团队最近引入了Webpack作为我们前端构建过程的一部分，并享受到了捆绑、版本控制和缩小的好处。Webpack不仅对React项目很重要，对任何由几十个文件组成的大型项目也很重要。这一步完成后，我们继续引进巴别塔。</p><h2 id="9443" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">巴比伦式的城市</h2><p id="7b43" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Babel是一个Javascript编译器。它基本上允许你用最新的Javascript编码标准编写代码，并让它在旧的浏览器中工作。这是关键的一步，因为React利用了最新的编码标准，而且你将遇到的大多数教程都会假设你使用的是Babel。就像Webpack一样，Babel对于任何项目来说都是一个很好的补充，因为它免去了为特定浏览器编写代码的工作。您可以指定想要支持的浏览器。</p><h2 id="6bdb" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">反应</h2><p id="6fb1" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">最后，好东西。现在已经安装了Webpack和Babel，这是一个简单的npm安装react和react-dom，您可以开始编写您的第一个组件了。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="85a1" class="mx kx iq bd ky my ni na lb nb nj nd le jw nk jx li jz nl ka lm kc nm kd lq nh bi translated">让一切都成为组件</h1><h2 id="797c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">成分</h2><p id="900b" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在编写任何代码之前，最好确定您想要创建的组件。因为我们将特性转换为React，所以我们可以截屏一个页面，并轻松地画出我们认为应该分解的内容。如果我们觉得某样东西可以在将来重用，那么它就是自己组件的候选。按钮、图像路径生成器、头像、输入、用户卡，这些都将成为它们自己的表示组件。这样做的明显好处是它们可以重复使用很多次。如果它们包含任何逻辑或状态管理，它们可以被测试一次，我们就可以放心地重用它们。</p><p id="47c9" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">有时候，决定某样东西是否值得成为组件并不是非黑即白的。我们有一个专为客户设计的页面，它的风格与我们应用程序的其他部分完全不同。这个页面及其特性很可能不会被重用，但是我们认为为了可读性，页面的逻辑和范围应该被分解。我们最终分解了正在迭代的tile，并将其归类为<em class="nn">可能不可重用的组件</em>。</p><h2 id="0ab6" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">文件结构</h2><p id="b507" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">关于文件结构的最佳建议来自React官方文档，并且非常简单。<em class="nn">不要想太多。</em>我们决定按照功能来构建我们的组件，在超过20个组件之后，我们仍然对这种方法感到满意。我们过去没有做过的事情是将规范包含在与组件相同的文件夹中。我们发现这非常有帮助，因为我们不必去一个不同的测试文件夹来查看哪些组件有测试覆盖。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="3f8e" class="kw kx iq np b gy nt nu l nv nw">src/<br/>   api/<br/>      loginApi.js<br/>   components/<br/>      avatar/<br/>         index.js<br/>         container.js<br/>         container.spec<br/>      common/<br/>   utilities/</span></pre><h2 id="89b6" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">API的</h2><p id="df68" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">API对每个应用程序都至关重要，因此我们需要立即制定策略。我们首先将我们的API文件添加到它们最能代表的特性组件中。在编写了一些组件之后，我们发现这不是最好的方法，因为如果你有两个或更多的特性使用同一个API，你应该把它放在哪里呢？</p><p id="97a5" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">我们决定创建一个文件夹，并在其中添加所有的API文件，这样它们就可以被任何组件引用，而不会有一个误导性的文件路径。React支持许多AJAX库，基于Axios提供的所有特性，我们决定选择它。用Jest编写测试时也很容易被嘲笑。【https://github.com/axios/axios T4】</p><h2 id="cb88" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">测试</h2><p id="87dd" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们所有的特性通常被单元、集成和UI自动化测试所覆盖。我们决定重写我们的React组件，然后专注于测试。我发现这很有成效，因为团队更专注于学习React，而不是测试。</p><p id="9a73" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">如果您的项目没有现有的测试来防止回归，我不推荐这样做。关于我们测试策略的更多信息，以及了解Jest和React测试库，请查看我写的这篇详细文章。</p><h1 id="9ac2" class="mx kx iq bd ky my mz na lb nb nc nd le jw ne jx li jz nf ka lm kc ng kd lq nh bi translated">事后思考</h1><p id="0717" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">React现在在前端世界无处不在，如果你的团队希望吸引人才，跟上Javascript的发展，或者只是想学习新东西，你应该尝试React。</p><p id="e984" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">我认为这个库如此受欢迎的原因之一是因为它使可重用组件比过去更容易编写。你永远不会想到在你的Javascript文件中编写CSS甚至HTML。</p><p id="a93d" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">开发人员可以放心地将我们非常结构化的模板、Javascript和CSS放在单独的文件中。React挑战了这种想法，起初需要一些说服力，但大多数人认为这是朝着正确方向迈出的一步，减少了上下文切换。</p><p id="671e" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">构建新功能很有趣，但挑战自己写出更好的代码以供将来重用也很有趣。我们的团队已经有了一个CSS组件库，它使得创建新页面变得非常简单。</p><p id="3df2" class="pw-post-body-paragraph ls lt iq lu b lv ms jr lx ly mt ju ma lf mu mc md lj mv mf mg ln mw mi mj mk ij bi translated">构建我们的React组件库似乎是一个很棒的下一步，它将帮助我们在未来更快地交付代码。</p></div></div>    
</body>
</html>
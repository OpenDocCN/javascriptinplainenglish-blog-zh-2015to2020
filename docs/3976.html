<html>
<head>
<title>How to Fetch Data from an API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中从API获取数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-fetch-data-from-an-api-in-javascript-dccde83619b2?source=collection_archive---------1-----------------------#2020-11-07">https://javascript.plainenglish.io/how-to-fetch-data-from-an-api-in-javascript-dccde83619b2?source=collection_archive---------1-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bf02" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过实例了解fetch API</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0640e455992309f8a36591a1dbd9f8af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*34IUe9Ygd5wjz4ZV"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@goshua13?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Aragon</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d80e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是Fetch API？</h1><p id="7fa7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">fetch API是一个内置的JavaScript ES6 promise，用于使XMLHttpRequests更简单、更容易地异步获取或发送数据。它提供了一个从服务器获取资源的接口，具有更加强大和灵活的特性集。除了IE之外，所有现代浏览器都支持fetch API。获取数据的简单性和更简洁的方式使得这个API在JavaScript社区中更加强大和流行。</p><p id="cb3d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这篇短文中，我们将了解如何在JavaScript中使用Fetch API从资源中获取数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/162fcfeb023ef90389ed3371f2e76d9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMMQtOcuVykpZqRAgobmnw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image Created with ❤️️ By Mehdi Aoussiad.</figcaption></figure><h1 id="7973" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">使用Fetch从API获取数据</h1><p id="0610" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">方法<code class="fe mq mr ms mt b"><strong class="lq ir">fetch()</strong></code>带有一个强制参数，即您想要获取的资源的路径。它返回一个JavaScript承诺，该承诺解析对该请求的响应，无论成功与否。</p><p id="a17a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为了更加实用，我们将使用Fetch API从Github users API获取数据，并显示在页面上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/3f72dea5bca5d410efe18430f722eebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*GF4qVQNDoO3eNDwOGNhKsQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The Github Users Data.</figcaption></figure><p id="9cd2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如您在上面看到的，如果我们转到Github用户API的链接:</p><pre class="kg kh ki kj gt mv mt mw mx aw my bi"><span id="39ce" class="mz kx iq mt b gy na nb l nc nd"><strong class="mt ir">https://api.github.com/users</strong></span></pre><p id="1e42" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你会发现这是一个包含前30名Github用户所有信息的对象数组(名字-图片-关注者……)。因此，让我们使用fetch来获取一些数据，并在页面上显示它们:</p><p id="2c91" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">首先，我们将创建一个HTML文件:</p><pre class="kg kh ki kj gt mv mt mw mx aw my bi"><span id="a074" class="mz kx iq mt b gy na nb l nc nd">&lt;!DOCTYPE html&gt;</span><span id="e040" class="mz kx iq mt b gy ne nb l nc nd">&lt;html lang="en"&gt;</span><span id="6c83" class="mz kx iq mt b gy ne nb l nc nd">&lt;head&gt;</span><span id="a2db" class="mz kx iq mt b gy ne nb l nc nd">&lt;meta charset="UTF-8"&gt;</span><span id="af34" class="mz kx iq mt b gy ne nb l nc nd">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span><span id="c3ff" class="mz kx iq mt b gy ne nb l nc nd">&lt;title&gt;Fetch&lt;/title&gt;</span><span id="784b" class="mz kx iq mt b gy ne nb l nc nd">&lt;link rel="stylesheet" href="style.css"&gt;</span><span id="1970" class="mz kx iq mt b gy ne nb l nc nd">&lt;script src="app.js" defer="true"&gt;&lt;/script&gt;</span><span id="41a7" class="mz kx iq mt b gy ne nb l nc nd">&lt;/head&gt;</span><span id="6be4" class="mz kx iq mt b gy ne nb l nc nd">&lt;body&gt;</span><span id="d4aa" class="mz kx iq mt b gy ne nb l nc nd">  &lt;h1&gt;Here we will put the name of the Github User.&lt;/h1&gt;</span><span id="08dd" class="mz kx iq mt b gy ne nb l nc nd">&lt;/body&gt;</span><span id="4d17" class="mz kx iq mt b gy ne nb l nc nd">&lt;/html&gt;</span></pre><p id="9fff" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在我们的JavaScript中，我们将首先把数据打印到控制台。只是看看我们有什么。</p><pre class="kg kh ki kj gt mv mt mw mx aw my bi"><span id="a872" class="mz kx iq mt b gy na nb l nc nd">fetch('https://api.github.com/users')</span><span id="1432" class="mz kx iq mt b gy ne nb l nc nd">.then(res =&gt; res.json())</span><span id="59a8" class="mz kx iq mt b gy ne nb l nc nd">.then(data =&gt; console.log(data));</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/27f1c9dd4297ed381b70e924e4a153e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*GtBLq1bUaK0-ZiqqYSJ3FQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Github users API.</figcaption></figure><p id="ecde" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如您所见，它在控制台中打印了所有前30个用户的数据。现在，让我们看看如何获取这些数据并在页面上显示它们。考虑下面的例子:</p><pre class="kg kh ki kj gt mv mt mw mx aw my bi"><span id="d3ae" class="mz kx iq mt b gy na nb l nc nd">const body = document.querySelector('body');</span><span id="dae2" class="mz kx iq mt b gy ne nb l nc nd">const h1 = document.querySelector('body h1');</span><span id="1698" class="mz kx iq mt b gy ne nb l nc nd">fetch('https://api.github.com/users')</span><span id="0468" class="mz kx iq mt b gy ne nb l nc nd">.then(res =&gt; res.json())</span><span id="c493" class="mz kx iq mt b gy ne nb l nc nd">.then(data =&gt; {</span><span id="ed4c" class="mz kx iq mt b gy ne nb l nc nd">h1.innerHTML = data[0].login;</span><span id="5ac3" class="mz kx iq mt b gy ne nb l nc nd">// Create an Image.</span><span id="a63c" class="mz kx iq mt b gy ne nb l nc nd">const img = document.createElement('img');</span><span id="955c" class="mz kx iq mt b gy ne nb l nc nd">body.appendChild(img);</span><span id="60d2" class="mz kx iq mt b gy ne nb l nc nd">// Set the image source to an image url from the API data.</span><span id="a871" class="mz kx iq mt b gy ne nb l nc nd">img.src = data[0].avatar_url;</span><span id="d1f6" class="mz kx iq mt b gy ne nb l nc nd">});</span></pre><p id="718a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">上面的例子显示了页面上第一个Github用户的名字和图像。看看下面的例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Simple Example.</figcaption></figure><p id="9867" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如您所见，这只是使用fetch从API获取数据的一种简单方式。</p><h1 id="f481" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="60be" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">fetch API比<code class="fe mq mr ms mt b"><strong class="lq ir">XMLHttpRequest</strong></code>有了巨大的改进，有一个简单、优雅、易用的接口。请确保我们没有涵盖它的所有内容，您需要从其他资源了解更多信息。</p><p id="3d38" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢您阅读本文，希望您觉得有用。</p><h2 id="3f60" class="mz kx iq bd ky ni nj dn lc nk nl dp lg lx nm nn li mb no np lk mf nq nr lm ns bi translated">进一步阅读</h2><div class="nt nu gp gr nv nw"><a href="https://medium.com/javascript-in-plain-english/5-fun-apis-for-your-next-javascript-projects-1834626864c" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">为您的下一个JavaScript项目准备的5个有趣的API</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">您可以在JavaScript项目中使用的5个有用的API</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>How To Decouple Data from UI in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中将数据与UI解耦</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-decouple-data-from-ui-in-react-d6b1516f4f0b?source=collection_archive---------1-----------------------#2020-12-15">https://javascript.plainenglish.io/how-to-decouple-data-from-ui-in-react-d6b1516f4f0b?source=collection_archive---------1-----------------------#2020-12-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c9fc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第2部分:对钩子、渲染道具和特设模式的进一步探索</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/4eee848f76b06b83000e63390cd1e60a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*goD09hSrSRRjYBjiCrimJQ.jpeg"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">c. 1512, Oil on canvas, Source: <a class="ae ko" href="https://programming-memes.com/do-you-like-spaghetti/" rel="noopener ugc nofollow" target="_blank">programming-memes.com</a></figcaption></figure></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><p id="a8b1" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">在第1部分的<a class="ae ko" href="https://medium.com/javascript-in-plain-english/decouple-data-from-ui-with-react-hooks-6f7fe968c3e3" rel="noopener">中，我介绍了一种将数据获取/管理层从React组件中分离出来的方法，React组件基于数据呈现一些UI，这将使我们从任何特定的数据库或框架中解放出来。让我们称这种<strong class="ky io">方法为</strong>。</a></p></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><h2 id="939c" class="ls lt in bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法a .定制挂钩</h2><p id="95e8" class="pw-post-body-paragraph kw kx in ky b kz ml jo lb lc mm jr le lf mn lh li lj mo ll lm ln mp lp lq lr ig bi translated">让我们创建一个定制的钩子— <code class="fe mq mr ms mt b">useSomeData</code> —它返回属性<code class="fe mq mr ms mt b">someData</code>、<code class="fe mq mr ms mt b">loading</code>和<code class="fe mq mr ms mt b">error</code>，而不考虑数据获取/管理逻辑。以下是<code class="fe mq mr ms mt b">useSomeData</code>的3种不同实现。</p><p id="9d92" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><em class="mu">带有获取API和组件状态:</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="56fb" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><em class="mu">带Redux: </em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="1ad7" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><em class="mu">同阿波罗GraphQL: </em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="c2ef" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">上面的3个实现是<strong class="ky io">可互换的</strong>而不需要修改这个UI组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="497b" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">但是，正如<a class="mx my ep" href="https://medium.com/u/3efad7746b00?source=post_page-----d6b1516f4f0b--------------------------------" rel="noopener" target="_blank"> Julius Koronci </a>正确指出的，虽然数据获取/管理逻辑被解耦，但是<code class="fe mq mr ms mt b">SomeComponent</code> UI仍然耦合到<code class="fe mq mr ms mt b">useSomeData</code>钩子。</p><p id="d6af" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">换句话说，即使我们可以重用没有<code class="fe mq mr ms mt b">SomeComponent</code>的<code class="fe mq mr ms mt b">useSomeData</code>，<strong class="ky io">也不能重用没有</strong> <code class="fe mq mr ms mt b"><strong class="ky io">useSomeData</strong></code> <strong class="ky io">的</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeComponent</strong></code> <strong class="ky io">。</strong></p><p id="9e56" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">也许这就是渲染道具和高阶组件在加强关注点分离方面做得更好的地方(再次感谢Julius强调了这一点)。</p></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><h2 id="eeba" class="ls lt in bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法b .渲染道具</h2><p id="a5a6" class="pw-post-body-paragraph kw kx in ky b kz ml jo lb lc mm jr le lf mn lh li lj mo ll lm ln mp lp lq lr ig bi translated">不要使用返回<code class="fe mq mr ms mt b">someData</code>、<code class="fe mq mr ms mt b">loading</code>和<code class="fe mq mr ms mt b">error</code>的定制钩子，让我们创建一个渲染道具组件——<code class="fe mq mr ms mt b">SomeData</code>——它包装一个函数(即<code class="fe mq mr ms mt b">children</code>需要是一个函数)，实现数据逻辑，并将<code class="fe mq mr ms mt b">someData</code>、<code class="fe mq mr ms mt b">loading</code>和<code class="fe mq mr ms mt b">error</code>传入函数。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="0115" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">您可以用Redux、Apollo GraphQL或您选择的任何数据提取/管理层来替换上面代码片段中的第4行。</p><p id="c1da" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io">我们现在可以重用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeComponent</strong></code> <strong class="ky io"> (UI组件)而不用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeData</strong></code> <strong class="ky io">(渲染道具组件)。我们也可以重用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeData</strong></code> <strong class="ky io">而不用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeComponent</strong></code> <strong class="ky io">。</strong></p></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><h2 id="dd10" class="ls lt in bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法c .高阶组件(HOC)</h2><p id="fbfa" class="pw-post-body-paragraph kw kx in ky b kz ml jo lb lc mm jr le lf mn lh li lj mo ll lm ln mp lp lq lr ig bi translated">让我们创建一个特设组件——<code class="fe mq mr ms mt b">withSomeData</code>——它接受React组件作为参数，实现数据逻辑，并将<code class="fe mq mr ms mt b">someData</code>、<code class="fe mq mr ms mt b">loading</code>和<code class="fe mq mr ms mt b">error</code>作为道具传递到包装的React组件中。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="0fc2" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">您可以用Redux、Apollo GraphQL或您选择的任何数据提取/管理层来替换上面代码片段中的第5行。</p><p id="b1f1" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io">我们现在可以重用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeComponent</strong></code> <strong class="ky io"> (UI组件)而不用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">withSomeData</strong></code> <strong class="ky io"> (HOC)。没有</strong> <code class="fe mq mr ms mt b"><strong class="ky io">SomeComponent</strong></code> <strong class="ky io">我们也可以重用</strong> <code class="fe mq mr ms mt b"><strong class="ky io">withSomeData</strong></code> <strong class="ky io">。</strong></p><p id="d759" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">今天我学会了。</p><p id="eaf2" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">你更喜欢哪种方法，为什么？</p></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><h1 id="b2f3" class="mz lt in bd lu na nb nc lx nd ne nf ma jt ng ju md jw nh jx mg jz ni ka mj nj bi translated">资源</h1><ul class=""><li id="3a86" class="nk nl in ky b kz ml lc mm lf nm lj nn ln no lr np nq nr ns bi translated"><a class="ae ko" href="https://blog.bitsrc.io/understanding-react-render-props-and-hoc-b37a9576e196" rel="noopener ugc nofollow" target="_blank">了解反应渲染道具和道具</a>由<a class="mx my ep" href="https://medium.com/u/9c555799c00e?source=post_page-----d6b1516f4f0b--------------------------------" rel="noopener" target="_blank">阿迪蒂亚·阿加瓦尔</a></li><li id="33d8" class="nk nl in ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><a class="ae ko" href="https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props" rel="noopener ugc nofollow" target="_blank"> React Hooks:渲染道具会怎么样？</a>作者<a class="mx my ep" href="https://medium.com/u/db72389e89d8?source=post_page-----d6b1516f4f0b--------------------------------" rel="noopener" target="_blank">肯特·c·多兹</a></li><li id="6b64" class="nk nl in ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><a class="ae ko" href="https://www.richardkotze.com/coding/hoc-vs-render-props-react" rel="noopener ugc nofollow" target="_blank">高阶组件vs渲染道具</a>作者<a class="mx my ep" href="https://medium.com/u/e503a3e5ff3e?source=post_page-----d6b1516f4f0b--------------------------------" rel="noopener" target="_blank">理查德·科茨</a></li></ul></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><h1 id="2bb9" class="mz lt in bd lu na nb nc lx nd ne nf ma jt ng ju md jw nh jx mg jz ni ka mj nj bi translated">阅读更多</h1><div class="ny nz gp gr oa ob"><a href="https://medium.com/javascript-in-plain-english/intro-to-react-server-side-rendering-3c2af3782d08" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">React服务器端渲染简介</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">如何在没有任何工具或框架的情况下构建一个React SSR app？</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ki ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://medium.com/javascript-in-plain-english/decouple-data-from-ui-with-react-hooks-6f7fe968c3e3" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">用React钩子将数据从UI解耦</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">以及我如何用JavaScript函数“编程到一个接口”</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op ki ob"/></div></div></a></div></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><p id="9c48" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">📫<em class="mu">咱们连上</em> <a class="ae ko" href="https://www.linkedin.com/in/suhanwijaya/" rel="noopener ugc nofollow" target="_blank"> <em class="mu"> LinkedIn </em> </a> <em class="mu">或者</em><a class="ae ko" href="https://twitter.com/suhanw" rel="noopener ugc nofollow" target="_blank"><em class="mu">Twitter</em></a><em class="mu">！</em></p></div></div>    
</body>
</html>
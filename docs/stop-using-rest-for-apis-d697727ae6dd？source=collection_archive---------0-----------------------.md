# 停止对 API 使用 REST

> 原文：<https://javascript.plainenglish.io/stop-using-rest-for-apis-d697727ae6dd?source=collection_archive---------0----------------------->

## GraphQL 更好

![](img/2122ea22770348e52be200ead6ff48ef.png)

Photo by [bruce mars](https://unsplash.com/@brucemars?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

许多开发人员使用 REST 通过 HTTP 发送数据，而 GraphQL 通常是作为一种替代 REST APIs 的技术出现的。在这篇文章中，我将解释这两者的优点、局限性和区别，这将帮助您决定下一个项目的选择。

# 什么是休息？

**REST(表述性状态转移)**是一个 API 设计架构，用于通过使用一组预定义的无状态操作(包括`GET`、`POST`、`PUT`和`DELETE`)来实现 web 服务。

REST 的核心思想是通过向资源的 URL 发送请求并获得响应(通常是 JSON，但也取决于 API)来检索资源。

## 休息的好处

*   REST 是**可扩展的**，因为它将客户机和服务器分开，所以你可以轻松地扩展你的应用程序。
*   **灵活性**是使用 REST 的另一个优势，因为它可以被设计成处理不同类型的调用并返回不同的数据格式。

## 休息的限制

*   **超取** —这是 API 端点提供的信息比客户端要求的多得多的时候。
*   **提取不足** —这是 API 端点没有提供所有必需信息的时候。因此，客户端必须发出多个请求才能获得应用程序需要的一切。

# GraphQL 是什么？

**GraphQL** 是一个 API 设计架构，它采用了一种不同的方法，将所有东西都视为一个图形，暗示它们是相互关联的。这也意味着您可以定制您的请求，您可以从端点请求任何东西，您将得到您所请求的任何东西，仅此而已。我们传递查询并得到响应。除此之外，它还允许您将不同的实体合并到一个查询中。

## GraphQL 的优势

*   **检索精确的数据**，没有额外的东西。在 GraphQL 中，您可以得到您所请求的，这是一个很大的优势。
*   **更快的开发**在客户端。通常，当数据需求发生变化时，您只需要修改查询，不需要太多的变化，因此允许快速的产品迭代。只要客户端和服务器团队都知道数据的结构，他们就可以独立工作。

## GraphQL 的局限性

*   对于简单的应用程序来说，设置类型、查询等可能有点复杂，因为使用 REST 可以轻松完成。
*   它使用一个**单一端点**，而不是遵循 HTTP 规范进行缓存。网络级缓存非常重要，因为它可以减少服务器的流量。

# 比较两者的简单示例

比方说，我们正在显示一个用户的提要，其中包含该用户的帖子及其关注者的列表。在我们的例子中，我们必须显示帖子的作者、帖子以及该用户的关注者。

如果我们使用 REST，我们将至少发出 2 或 3 个请求，如下所示:

*   `/user/<id>`获取用户(作者)详细信息，可能是姓名。
*   `/user/<id>/posts`获取该用户发布的帖子列表。
*   `/user/<id>/followers`获取用户的关注者列表。

但在所有这些情况下，我们都在过度获取数据。例如，在第一个请求中，我们只需要名字，但是当我们使用这种方法时，我们得到了关于用户的所有细节。

这就是 GraphQL 显示其威力的时候了。我们需要指定查询，然后我们可以得到想要的输出。为了使用 GraphQL 达到同样的效果，我们可以使用类似如下的查询:

```
query {
  User(id: '123') {
    name
    posts {
      title
    }
    followers {
      name
    }
  }
}
```

通过使用这样的查询，我们将能够获得具有以下属性的 JSON 响应。简洁明了，不是吗？

# GraphQL 与 REST

总而言之，以下是一些突出的差异:

## 1.数据提取

REST 会导致提取过量或提取不足，而 GraphQL 不会出现这种情况。在 GraphQL 中，*你要求的就是你得到的。*

## 2.对象定义(JSON 响应)

在 REST 中，您在后端定义对象，而在 GraphQL 中，您在前端定义这个对象。

## 3.自动缓存

REST 自动实施缓存，而 GraphQL 没有自动缓存系统，而是使用诸如 Apollo Client、Relay 等客户端。将使缓存成为可能。

## 4.错误处理

与 GraphQL 相比，REST 中的错误处理要简单得多，graph QL 通常会给出一个 *200 OK* 状态代码，即使有错误也是如此。但是，在使用诸如 Apollo 客户端、Relay 等客户端时。很有可能轻松处理错误。

# 结论

GraphQL 当然比 REST 有很多优势，但是它可能并不总是最好的实现。就像我前面说的，选择取决于您的应用程序，是选择 REST 还是 GraphQL。

我希望这能帮助你在未来的项目中做决定。如果你喜欢分享你关于 GraphQL 或 REST 的经验，请把它们放在评论区。感谢您的阅读！
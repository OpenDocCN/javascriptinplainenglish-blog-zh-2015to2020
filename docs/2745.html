<html>
<head>
<title>Working with IndexedDB in TypeScript — React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在TypeScript中使用indexed db—React</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/working-with-indexeddb-in-typescript-react-ad504a1bdae3?source=collection_archive---------0-----------------------#2020-07-20">https://javascript.plainenglish.io/working-with-indexeddb-in-typescript-react-ad504a1bdae3?source=collection_archive---------0-----------------------#2020-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2a77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将了解在使用React应用程序时，如何在TypeScript中使用IndexedDB。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/e68a1b8f0db536bb52986761be0b181c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1la6iLFtsTEUVG1TVv6pw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://www.pexels.com/@stasknop?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Stas Knop</a> from <a class="ae lb" href="https://www.pexels.com/photo/black-cassette-tape-on-top-of-red-and-yellow-surface-1626481/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="babc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看看什么是IndexedDB。IndexedDB是一个低级API，用于客户端存储大量结构化数据，包括文件/blob。这个API使用索引来实现对这些数据的高性能搜索。虽然<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" rel="noopener ugc nofollow" target="_blank"> Web存储</a>对于存储少量数据很有用，但是对于存储大量结构化数据就没那么有用了。</p><p id="3ab3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">IndexedDB是一个事务数据库系统，类似于基于SQL的RDBMS。然而，与使用固定列表的基于SQL的RDBMSes不同，IndexedDB是基于JavaScript的面向对象数据库。IndexedDB允许您存储和检索用<strong class="jp ir">键</strong>索引的对象；任何由<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" rel="noopener ugc nofollow" target="_blank">结构化克隆算法</a>支持的对象都可以被存储。您需要指定数据库模式，打开到数据库的连接，然后在一系列<strong class="jp ir">事务</strong>中检索和更新数据。</p><p id="aaa4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们没有任何后端设置并且想要存储一些数据时，IndexedDB可以是一个非常好的数据库。它将加速我们的应用程序开发过程。</p><p id="9d62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在对什么是IndexedDb有了一个很好的概念。现在，让我们实现如何在TypeScript中使用IndexedDB。为了在TypeScript中实现IndexedDB，我们将使用一个非常好且高效的模块—<a class="ae lb" href="https://github.com/jakearchibald/idb" rel="noopener ugc nofollow" target="_blank">https://github.com/jakearchibald/idb</a></p><p id="1d22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的节点模块让我们的生活变得简单顺畅。要开始使用IndexedDB，我们需要在IndexedDB中创建一个数据库，并开始在该IndexedDB中创建表。之后，我们需要在IndexedDB中实现基本的CRUD操作。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="c42b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们根据正在发生的事情将上面的代码分解成更小的块</p><ol class=""><li id="ce0d" class="le lf iq jp b jq jr ju jv jy lg kc lh kg li kk lj lk ll lm bi translated">我们正在创建一个名为IndexedDb的类，其构造函数需要数据库名称。</li><li id="9118" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">接下来，我们将创建一个在IndexedDB数据库中创建表的方法。<br/> <strong class="jp ir"> openDB </strong>函数需要一个数据库名称和版本号。<strong class="jp ir"> db.createObjectStore </strong>创建一个表，我们使用IndexedDB的一些内置功能，它会自动添加一个带有键名id的键，并在每次插入操作时自动递增。</li><li id="baa9" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated"><strong class="jp ir"> getValue </strong>将返回一个键-值对的值，并需要字段的表名和id(当我们插入任何值时会自动生成，因为我们在创建表时已经设置了key path:“id”)。</li><li id="5ce5" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated"><strong class="jp ir"> getAllValue </strong>返回一个表中的所有值，并且只需要表名。</li><li id="4f93" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated"><strong class="jp ir"> putValue </strong>会将字段中的值相加，并且需要表名和值。</li><li id="38fb" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated"><strong class="jp ir"> putBulkValue </strong>是另一个我们可以批量插入值的函数，它需要插入表名和一组值。</li><li id="2850" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated"><strong class="jp ir"> deleteValue </strong>是最后一个从表中删除值的函数，它需要表名和id。</li></ol><p id="87d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看如何在React应用程序中使用上面的类。创建一个文件test.js，并在该文件中需要IndexedDb类。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="9600" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样，您已经成功地在react应用程序中实现了IndexedDB。您可以随时在浏览器中查看您的IndexedDB。</p><ol class=""><li id="68dc" class="le lf iq jp b jq jr ju jv jy lg kc lh kg li kk lj lk ll lm bi translated">打开Chrome。</li><li id="1951" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">打开检查标签。</li><li id="3110" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">转到控制台和网络旁边的应用程序。</li><li id="4ca5" class="le lf iq jp b jq ln ju lo jy lp kc lq kg lr kk lj lk ll lm bi translated">在那里你会发现存储和索引数据库。</li></ol><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/405179a51f035997954ca2342162ddd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*2zT_AyDbI-p10UXWe7nndw.png"/></div></figure><p id="c2de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有任何疑问，欢迎在评论区提问。</p><h2 id="9831" class="lt lu iq bd lv lw lx dn ly lz ma dp mb jy mc md me kc mf mg mh kg mi mj mk ml bi translated">简单英语的JavaScript</h2><p id="af1d" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae lb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="jp ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How To Optimize React App For Production And Deploy It To Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何针对生产优化React App并将其部署到Heroku</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-optimize-react-app-for-production-and-deploy-it-to-heroku-498fbf222de?source=collection_archive---------2-----------------------#2019-12-14">https://javascript.plainenglish.io/how-to-optimize-react-app-for-production-and-deploy-it-to-heroku-498fbf222de?source=collection_archive---------2-----------------------#2019-12-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="07ec" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何让您的React应用程序更快</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/358a9d03dc2f16a6c345cb430fbc5704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sAbMqfbLACTYge9y"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@sapegin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Artem Sapegin</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cb1d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本文中，我们将了解如何优化我们在上一篇文章<a class="ae ks" href="https://medium.com/javascript-in-plain-english/build-an-amazing-application-using-react-and-nodejs-together-fad13ab7b49c" rel="noopener">中创建的react应用程序</a></p><p id="c29f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，从<a class="ae ks" href="https://github.com/myogeshchavan97/react_node" rel="noopener ugc nofollow" target="_blank">https://github.com/myogeshchavan97/react_node</a>克隆存储库</p><p id="a80d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通过依次执行以下命令来运行应用程序</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="ca0a" class="lu lv in lq b gy lw lx l ly lz">npm install<br/>npm run build<br/>npm run start-server</span></pre><p id="7e16" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">打开Chrome开发者工具，检查<code class="fe ma mb mc lq b">bundle.js</code>文件大小。你可以看到，差不多有1.3 MB</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi md"><img src="../Images/c8b38c74868c1c723b43005a8dff60d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ufp77gwWv5ARZpepbqFhQg.png"/></div></div></figure><p id="9df1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另外，如果你查看源代码标签，你可以在<code class="fe ma mb mc lq b">webpack://</code>下看到我们写的所有代码</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi md"><img src="../Images/160e9670d29f311a98ac0934f9f434a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zE4OY1Y5ZkvxLwKOfUA2NQ.png"/></div></div></figure><p id="85c1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这显然不好。因为一旦你的应用程序投入生产，你绝不会希望任何人看到你的代码。因此，为了解决这些问题，我们对应用程序使用了优化技术。</p><p id="2ac1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Webpack使用<code class="fe ma mb mc lq b">-p</code>标志提供了一种简单的优化方法。<br/>如果你在package.json中看到我们当前的脚本部分，它看起来像这样</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi me"><img src="../Images/a3294a21388bcd00779e455e1cd0ded2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71RF90JCgRK1yWXyDmKTNw.png"/></div></div></figure><p id="1b2d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将在这里添加另一个带有-p标志的脚本</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="fdb2" class="lu lv in lq b gy lw lx l ly lz">"build-prod": "webpack -p"</span></pre><p id="0e84" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，脚本部分如下所示</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mf"><img src="../Images/e2df2d5f9a05f48fa14f685617edb6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joHnc1OMrFcu4TmPXVBiMw.png"/></div></div></figure><p id="8418" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从终端运行以下命令</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b2ef" class="lu lv in lq b gy lw lx l ly lz">npm run build-prod</span></pre><p id="0b12" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">并检查输出</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mg"><img src="../Images/2703e586f71748b1a72bebf501b04fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RO1wt-JP7x9TH1B248Zp7g.png"/></div></div></figure><p id="503c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以看到文件大小从1.3MB减少到了169KB。</p><p id="2bfb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您现在使用<code class="fe ma mb mc lq b">npm run start-server</code>运行应用程序并检查network选项卡，您将看到同样大小的169KB</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi md"><img src="../Images/5b97b026b93e93bfdc3b0f04d4af02be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFw064ZfUyVzf5p9sQaCQw.png"/></div></div></figure><p id="0dc3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你检查源代码标签，你就再也看不到我们在<code class="fe ma mb mc lq b">webpack://</code>下的代码了</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/3ccf2d76659c8e48e44c4e58a50ad6d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QlbVCzCcxJCSbyiY957Alg.png"/></div></div></figure><p id="3891" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">应用程序中仍有一个问题。</p><p id="3f9e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你打开<code class="fe ma mb mc lq b">src/app.js</code>，你可以看到我们在顶部包含了CSS文件的导入，这是React中的惯例</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f17e" class="lu lv in lq b gy lw lx l ly lz">import './css/styles.css';</span></pre><p id="5e5d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，在javascript加载之前，CSS不会被加载，这是一个问题。所以现在我们将从<code class="fe ma mb mc lq b">bundle.js</code>中提取CSS并创建一个单独的<code class="fe ma mb mc lq b">.css</code>文件</p><p id="16c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么就从它开始吧。</p><p id="68d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通过执行以下命令安装npm软件包<code class="fe ma mb mc lq b">mini-css-extract-plugin</code></p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b8a8" class="lu lv in lq b gy lw lx l ly lz">npm install mini-css-extract-plugin</span></pre><p id="9569" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">安装完成后，打开<code class="fe ma mb mc lq b">package.json</code>文件并进行更改</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1050" class="lu lv in lq b gy lw lx l ly lz">"build-prod": "webpack -p"</span></pre><p id="350d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b3ce" class="lu lv in lq b gy lw lx l ly lz">"build-prod": "webpack -p --env production"</span></pre><p id="88dd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我们添加了值为<code class="fe ma mb mc lq b">production</code>的环境变量。</p><p id="47b7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，在<code class="fe ma mb mc lq b">webpack.config.js</code>文件中我们将改变</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b482" class="lu lv in lq b gy lw lx l ly lz">module.exports = { };</span></pre><p id="ca60" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7682" class="lu lv in lq b gy lw lx l ly lz">module.exports = (env) =&gt; {};</span></pre><p id="d2ab" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们返回一个函数而不是一个对象，因此函数的第一个参数将接收我们在<code class="fe ma mb mc lq b">package.json</code>中设置的环境变量值</p><p id="a093" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你的<code class="fe ma mb mc lq b">webpack.config.js</code>现在会是这个样子:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/374f844059fceb28a94f7ea94c63175a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sZ0CQmf9OWM-hxtESQ4oew.png"/></div></div></figure><p id="e2f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们将使用<code class="fe ma mb mc lq b">webpack.config.js</code>文件中的<code class="fe ma mb mc lq b">mini-css-extract-plugin</code>来提取CSS。<br/>在顶部为插件添加导入</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="87c1" class="lu lv in lq b gy lw lx l ly lz">const MiniCssExtractPlugin = require('mini-css-extract-plugin');</span></pre><p id="f4ae" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将CSS的<code class="fe ma mb mc lq b">use</code>数组从</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="a301" class="lu lv in lq b gy lw lx l ly lz">use: ['style-loader', 'css-loader']</span></pre><p id="0aa0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="5d9a" class="lu lv in lq b gy lw lx l ly lz">use: [{<br/> loader: MiniCssExtractPlugin.loader,<br/> options: {<br/>  publicPath: path.join(__dirname, 'public')<br/> },<br/>}, 'css-loader'<br/>]</span></pre><p id="577e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们告诉在哪里创建新的CSS文件</p><p id="d06f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">改变模式从</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7cee" class="lu lv in lq b gy lw lx l ly lz">mode: 'development'</span></pre><p id="6b90" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="3196" class="lu lv in lq b gy lw lx l ly lz">mode: env ? 'production' : 'development'</span></pre><p id="21a3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">并在末尾添加新的插件属性</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f0be" class="lu lv in lq b gy lw lx l ly lz">plugins: [<br/> new MiniCssExtractPlugin({<br/> filename: 'main.css',<br/> chunkFilename: 'main.css',<br/>})]</span></pre><p id="9f32" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我们告诉创建一个名为main.css的单独的CSS文件</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/b00c544d583fc564819297024325d64a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*91I4C7bhqHoN_FVoNNqzpw.png"/></div></div></figure><p id="7aed" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，在<code class="fe ma mb mc lq b">public/index.html</code>文件中添加<code class="fe ma mb mc lq b">main.css</code>文件链接</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="676f" class="lu lv in lq b gy lw lx l ly lz">&lt;link rel="stylesheet" href="main.css"&gt;&lt;/link&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mk"><img src="../Images/628f03140630dc244a4cf2bb7cafe26c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdafPQNv44k1GKaG6gNEKg.png"/></div></div></figure><p id="9ce0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，运行以下命令</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="73fd" class="lu lv in lq b gy lw lx l ly lz">npm run build-prod</span></pre><p id="4a6c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这将在<code class="fe ma mb mc lq b">public</code>文件夹中创建一个新的<code class="fe ma mb mc lq b">main.css</code>文件。您将能够看到如下所示的单独的<code class="fe ma mb mc lq b">main.css</code>和<code class="fe ma mb mc lq b">bundle.js</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ml"><img src="../Images/854c513131be0a91d9f7ad08fa5a0dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uz44Cwy86TXhpy7PTGK0rQ.png"/></div></div></figure><p id="42da" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你现在可以看到，<code class="fe ma mb mc lq b">bundle.js</code>文件大小减少了一点，这很好。<br/>现在，如果您使用</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="ba80" class="lu lv in lq b gy lw lx l ly lz">npm run start-server</span></pre><p id="f1c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你会看到一个单独的<code class="fe ma mb mc lq b">main.css</code>文件被加载到浏览器中，而不是唯一的<code class="fe ma mb mc lq b">bundle.js</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/b42a3891fe1055676eef34571c3e6f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gd-Gzvc_5a9yZdyhHrxbyQ.png"/></div></div></figure><p id="5ebc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">应用程序仍然运行良好，而且加载速度会更快。</p><p id="c72f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">部署到Heroku: </strong></p><p id="2a9c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.使用以下命令安装Heroku软件包</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b6d1" class="lu lv in lq b gy lw lx l ly lz">npm install -g heroku</span></pre><p id="9f05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.从终端执行以下命令</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="6e1a" class="lu lv in lq b gy lw lx l ly lz">heroku login</span></pre><p id="1efa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这将重定向到Heroku站点，您必须点击登录按钮登录到<code class="fe ma mb mc lq b">heroku-cli</code></p><p id="6b42" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.单击登录按钮后，您就可以切换到命令行，使用Heroku帐户启动部署过程</p><p id="c431" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.要在Heroku上部署，我们需要做一些代码更改</p><ul class=""><li id="eec0" class="mn mo in kv b kw kx kz la lc mp lg mq lk mr lo ms mt mu mv bi translated">打开<code class="fe ma mb mc lq b">server/index.js</code>文件，添加下面的语句<br/> <code class="fe ma mb mc lq b">const port = process.env.PORT || 3000;</code> <br/>，在<code class="fe ma mb mc lq b">app.listen</code>方法中，传递变量<code class="fe ma mb mc lq b">port</code>而不是3000。这是因为Heroku创建了一个名为PORT的环境变量，并为您的应用程序分配了您可以使用的随机端口</li><li id="619a" class="mn mo in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">在<code class="fe ma mb mc lq b">package.json</code>中添加<code class="fe ma mb mc lq b">start</code>脚本，当我们在Heroku上部署应用程序时，该脚本将自动执行。</li><li id="50da" class="mn mo in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">所以打开<code class="fe ma mb mc lq b">package.json</code>并改变</li></ul><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="c1b9" class="lu lv in lq b gy lw lx l ly lz">"start": "webpack-dev-server --watch"</span></pre><p id="0f82" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="fb85" class="lu lv in lq b gy lw lx l ly lz">"start-server": "webpack-dev-server --watch"</span></pre><p id="7d04" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">和改变</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="c629" class="lu lv in lq b gy lw lx l ly lz">"start-server": "nodemon server/index.js"</span></pre><p id="91c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">到</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="785d" class="lu lv in lq b gy lw lx l ly lz">"start": "npm run build-prod &amp;&amp; node server/index.js"</span></pre><p id="7384" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，我们首先运行npm run build-prod脚本，然后运行node server/index.js</p><p id="04d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们不需要<code class="fe ma mb mc lq b">nodemon</code>,因为一旦部署，我们不会对产品做任何更改，所以不需要重启服务器</p><p id="2123" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以当应用程序被部署到Heroku时，只有<code class="fe ma mb mc lq b">start</code>脚本会被执行。</p><p id="448b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">5.使用以下命令在Heroku上创建一个新的应用程序</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="ff77" class="lu lv in lq b gy lw lx l ly lz">heroku create &lt;any_application_name&gt;</span><span id="1f2b" class="lu lv in lq b gy nb lx l ly lz">Ex. heroku create my-first-app</span></pre><p id="91d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">6.一旦完成，应用程序就在Heroku上创建了，我们现在准备部署代码</p><p id="715a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">7.通过执行以下命令，将当前项目作为git存储库</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1937" class="lu lv in lq b gy lw lx l ly lz">git init . // it's ( git init dot )</span></pre><p id="c4d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">8.现在，使用以下命令将所有更改添加到临时区域</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1fe9" class="lu lv in lq b gy lw lx l ly lz">git add --all .</span></pre><p id="ba7c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">9.使用提交更改</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="8dd6" class="lu lv in lq b gy lw lx l ly lz">git commit -m "changes"</span></pre><p id="aac4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">10.把密码推给Heroku</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7925" class="lu lv in lq b gy lw lx l ly lz">git push heroku master</span></pre><p id="bc91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">11.恭喜你已经在Heroku上部署了应用程序。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/feff28f4aa29bac535453d36d592f14a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCwHD3lR6Q18Mok8OZ5h5g.png"/></div></div></figure><p id="2bab" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现场演示:<a class="ae ks" href="https://my-node-react-app.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://my-node-react-app.herokuapp.com/</a><br/>完整源代码:<a class="ae ks" href="https://github.com/myogeshchavan97/react_node_optimized" rel="noopener ugc nofollow" target="_blank">https://github.com/myogeshchavan97/react_node_optimized</a></p><p id="c18d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天到此为止。希望你今天学到了新东西。</p><p id="27cd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">别忘了直接在你的收件箱</strong> <a class="ae ks" href="https://yogeshchavan.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">这里</strong> </a> <strong class="kv io">订阅我的每周简讯，里面有惊人的技巧、窍门和文章。</strong></p></div></div>    
</body>
</html>
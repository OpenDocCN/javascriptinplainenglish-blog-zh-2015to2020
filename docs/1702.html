<html>
<head>
<title>Writing Vue.js Apps with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript编写Vue.js应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/writing-vue-js-apps-with-typescript-ccb1df79aa68?source=collection_archive---------5-----------------------#2020-04-15">https://javascript.plainenglish.io/writing-vue-js-apps-with-typescript-ccb1df79aa68?source=collection_archive---------5-----------------------#2020-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1ba6036818073cdb7520c616c001b310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r91k-Y3XHeuWkMuN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sawyerbengtson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sawyer Bengtson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3ead" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="1112" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用TypeScript编写Vue.js应用程序。</p><h1 id="18f5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">支持类型脚本</h1><p id="982b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vue.js内置了对TypeScript的支持。它为我们提供了一个大部分是静态类型的系统，减少了代码中出现运行时错误的机会。</p><p id="b4a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue附带了用于TypeScript的正式类型声明。它包含在Vue、Vue路由器和Vuex中。</p><p id="6a94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript可以解析NPM包中的类型声明，所以我们不必担心自己解析它们。</p><h1 id="f973" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Vue CLI</h1><p id="a4b1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Vue CLI创建一个Vue TypeScript项目。为此，我们必须通过运行以下命令来运行Vue CLI:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7ffe" class="mn lc iq mj b gy mo mp l mq mr">npx vue create .</span></pre><p id="97d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的项目目录中。</p><p id="7229" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们选择“手动选择功能”，然后键入脚本。其余的可以保留默认选项。</p><p id="472f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行<code class="fe ms mt mu mj b">npm run serve</code>来运行项目热重装。</p><p id="12e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果需要，我们还可以在<code class="fe ms mt mu mj b">tsconfig.json</code>中设置以下推荐选项:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="656b" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "compilerOptions": {<br/>    "target": "es5",<br/>    "strict": true,<br/>    "module": "es2015",<br/>    "moduleResolution": "node"<br/>  }<br/>}</span></pre><p id="f6a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">target</code>是建造目标。将其设置为<code class="fe ms mt mu mj b">es5</code>可以最大化对浏览器的支持。</p><p id="c462" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">strict</code>启用或禁用严格类型检查。将其设置为<code class="fe ms mt mu mj b">true</code>将启用它。</p><p id="58fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">“module”: “es2015”</code>利用Webpack 2+或Rollup的树摇动功能来减小包的大小并加快加载速度。</p><h1 id="f662" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">定义和使用组件</h1><p id="99a2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用类语法来定义组件。例如，使用我们用Vue CLI创建的TypeScript项目，我们可以这样做:</p><p id="fdc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">src/components/Message.vue</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b5f6" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div class="hello"&gt;<br/>    &lt;h1&gt;{{ msg }}&lt;/h1&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7712" class="mn lc iq mj b gy mv mp l mq mr">&lt;script lang="ts"&gt;<br/>import { Component, Prop, Vue } from 'vue-property-decorator';</span><span id="686a" class="mn lc iq mj b gy mv mp l mq mr"><a class="ae kc" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a><br/>export default class Message extends Vue {<br/>  <a class="ae kc" href="http://twitter.com/Prop" rel="noopener ugc nofollow" target="_blank">@Prop</a>() private msg!: string;<br/>}<br/>&lt;/script&gt;</span></pre><p id="8bac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用<code class="fe ms mt mu mj b">@Prop</code>装饰器来定义<code class="fe ms mt mu mj b">message</code>道具。<code class="fe ms mt mu mj b">msg</code>后的感叹号使<code class="fe ms mt mu mj b">msg</code>成为必填项。在冒号的右边，我们有道具的类型，它是一个字符串。</p><p id="3eac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">src/App.vue</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3178" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;input v-model="message"&gt;<br/>    &lt;Message :msg="message"/&gt;<br/>    &lt;button <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showMessage"&gt;Show Message&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="8153" class="mn lc iq mj b gy mv mp l mq mr">&lt;script lang="ts"&gt;<br/>import { Component, Vue } from 'vue-property-decorator';<br/>import Message from './components/Message.vue';</span><span id="01e9" class="mn lc iq mj b gy mv mp l mq mr"><a class="ae kc" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  components: {<br/>    Message,<br/>  },<br/>})<br/>export default class App extends Vue {<br/>  message: string = '';</span><span id="dd91" class="mn lc iq mj b gy mv mp l mq mr">  showMessage(): void{<br/>    alert(this.message)<br/>  }<br/>}<br/>&lt;/script&gt;</span><span id="e78b" class="mn lc iq mj b gy mv mp l mq mr">&lt;style&gt;<br/>#app {<br/>  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif<br/>}<br/>&lt;/style&gt;</span></pre><p id="6a22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们定义了<code class="fe ms mt mu mj b">message</code>字段，它被绑定到带有<code class="fe ms mt mu mj b">v-model</code>的模板。</p><p id="de23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有一个<code class="fe ms mt mu mj b">showMessage</code>方法，当点击显示消息按钮时运行。</p><p id="6c9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以看到一个输入框，我们可以在里面输入东西。我们输入的内容将显示在<code class="fe ms mt mu mj b">Message</code>组件的输入框下方，当我们单击显示消息时，我们会看到我们输入的内容显示在警告框中。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/c9218b204cc4886e7f23c7d8295a88db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QBq4vMzVCcF_0uCj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@spoony?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hieu Vu Minh</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2824" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Vue.extend创建组件</h1><p id="916b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们也可以使用<code class="fe ms mt mu mj b">Vue.extend</code>来创建组件。</p><p id="f3c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以用以下内容替换<code class="fe ms mt mu mj b">src/components/Message.ts</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="793a" class="mn lc iq mj b gy mo mp l mq mr">import Vue, { VNode } from 'vue'</span><span id="5db7" class="mn lc iq mj b gy mv mp l mq mr">const Component = Vue.extend({<br/>  props: ['msg'],<br/>  computed: {<br/>    greeting(): string {<br/>      return `Hi. ${this.msg}`;<br/>    }<br/>  },<br/>  render(createElement): VNode {<br/>    return createElement('div', [<br/>      createElement('p', this.msg),<br/>      createElement('p', this.greeting),<br/>    ])<br/>  }<br/>})</span><span id="56aa" class="mn lc iq mj b gy mv mp l mq mr">export default Component;</span></pre><p id="a0cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们使用<code class="fe ms mt mu mj b">msg</code>属性和<code class="fe ms mt mu mj b">greeting</code>计算属性呈现了一个<code class="fe ms mt mu mj b">div</code>。</p><p id="9655" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我们为<code class="fe ms mt mu mj b">render</code>准备了<code class="fe ms mt mu mj b">VNode</code>返回类型。这将确保我们返回正确类型的数据。TypeScript在很多情况下无法推断类型。</p><p id="e633" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们使用了<code class="fe ms mt mu mj b">Vue.extend</code>，我们将得到类型推断和自动完成。</p><p id="6634" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须以书面形式导出:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4433" class="mn lc iq mj b gy mo mp l mq mr">export default Component;</span></pre><p id="9aa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以便其他组件可以使用它。</p><p id="798d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以像往常一样在<code class="fe ms mt mu mj b">src/App.vue</code>中导入它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ac93" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;input v-model="message"&gt;<br/>    &lt;Message :msg="message"/&gt;<br/>    &lt;button <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showMessage"&gt;Show Message&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7ebc" class="mn lc iq mj b gy mv mp l mq mr">&lt;script lang="ts"&gt;<br/>import { Component, Vue } from 'vue-property-decorator';<br/>import Message from './components/Message';</span><span id="49b4" class="mn lc iq mj b gy mv mp l mq mr"><a class="ae kc" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  components: {<br/>    Message,<br/>  },<br/>})<br/>export default class App extends Vue {<br/>  message: string = '';</span><span id="d33f" class="mn lc iq mj b gy mv mp l mq mr">  showMessage(): void{<br/>    alert(this.message)<br/>  }<br/>}<br/>&lt;/script&gt;</span><span id="4f38" class="mn lc iq mj b gy mv mp l mq mr">&lt;style&gt;<br/>#app {<br/>  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif<br/>}<br/>&lt;/style&gt;</span></pre><p id="1d80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们输入我们可以输入的东西，它会显示有和没有<code class="fe ms mt mu mj b">Hi</code>添加在它前面。</p><p id="86f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们保持显示消息按钮以前的行为方式。</p><h1 id="02fb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">扩充用于插件的类型</h1><p id="dcef" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码向现有类型添加我们自己的属性:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0015" class="mn lc iq mj b gy mo mp l mq mr">import Vue from 'vue'</span><span id="7100" class="mn lc iq mj b gy mv mp l mq mr">declare module 'vue/types/vue' {<br/>  interface Vue {<br/>    $myProperty: string<br/>  }<br/>}</span></pre><p id="ba94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码导入Vue，然后添加<code class="fe ms mt mu mj b">$myProperty</code>字符串属性作为有效属性。</p><p id="bf6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这应该使TypeScript编译器知道代码，它应该能够成功编译。</p><h1 id="c96b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4da4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用Vue CLI用TypeScript创建一个新项目。为此，我们选择手动选择功能，然后键入脚本。我们可以保留其余的默认选项，或者我们可以选择我们想要的，如果我们知道我们想要的。</p><p id="b8bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了获得类型推断和自动完成，我们可以用<code class="fe ms mt mu mj b">Vue.extend</code>方法定义组件，或者将其定义为一个类。</p><p id="7b6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过使用<code class="fe ms mt mu mj b">declare module</code>语法并在其中添加我们想要的东西来扩充现有的Vue类型。</p><p id="6be1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TypeScript在很多情况下无法推断函数的返回类型。因此，我们应该注释返回类型，以便进行自动完成和类型检查。</p><h2 id="333a" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="5645" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到<a class="ae kc" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions@javascriptinplainenglish.com</strong></a>给我们，我们会把你添加为作者。</p><p id="eabb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p></div></div>    
</body>
</html>
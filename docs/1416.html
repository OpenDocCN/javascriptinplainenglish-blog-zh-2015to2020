<html>
<head>
<title>Listening to Mouse Click Event Using an Observable in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度可观测值监听鼠标点击事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/listening-to-mouse-click-event-using-an-observable-in-angular-2446eafcc890?source=collection_archive---------5-----------------------#2020-03-13">https://javascript.plainenglish.io/listening-to-mouse-click-event-using-an-observable-in-angular-2446eafcc890?source=collection_archive---------5-----------------------#2020-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cc16" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">RxJS中可观察对象的简要介绍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/143f3d492dbf08f3b318349c0b9d180a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HxvyKGi-V8Gd08eWCB4z9A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by <a class="ae kv" href="https://pixabay.com/users/mohamed_hassan-5229782/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3539810" rel="noopener ugc nofollow" target="_blank">mohamed Hassan</a> from <a class="ae kv" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3539810" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="3faa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可观察值是一个简单的函数，它随时间向观察者返回一系列值。一个可观察对象有两种方法:订阅和取消订阅。可观测量是RxJS中的一个关键概念。</p><p id="b546" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要让一个可观察对象开始行动或发出数据，必须通过订阅它来触发。由于这个原因，可观测量被认为是懒惰的。</p><p id="6b71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用鼠标点击事件来说明可观察数据流的概念。在这种情况下，鼠标点击应该被视为一段时间内收集的数据值序列。</p><h1 id="f205" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建角度应用程序</h1><p id="3eb6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用Angular CLI创建一个简单的Angular starter应用程序。</p><p id="a530" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在项目文件夹中，运行以下命令:</p><p id="4a95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mp mq mr ms b">$ ng new click-event-app</code></p><h1 id="233f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">安装RxJS</h1><p id="faae" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在本指南中，我们将使用npm来安装RxJS，但是您可以使用任何其他您选择的包管理器，比如yarn。</p><p id="4202" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用以下命令转到应用程序根文件夹</p><p id="c967" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mp mq mr ms b">$ cd click-event-app</code></p><p id="ae8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后通过下面的命令安装RxJS。</p><p id="5002" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mp mq mr ms b">$ npm install rxjs</code></p><h1 id="f5fa" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创造一个可观察的</h1><p id="2021" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">进入<strong class="ky ir"> app.component.ts </strong>文件并进行以下更改</p><ol class=""><li id="d408" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">来自事件的第一个导入<strong class="ky ir">和来自rxjs的可观察</strong>的<strong class="ky ir"/></li><li id="3b68" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">从角形核心导入<strong class="ky ir"> OnInit </strong></li><li id="3858" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">创建一个名为clickObservable、类型为Observable的属性；</li><li id="fb62" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">使AppComponent类在OnInit上实现</li></ol><p id="e799" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>目前我们还没有实现ngOnInit方法，但是我们很快就会实现。</p><h1 id="dcf8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">订阅可观察的</h1><p id="d9b4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了订阅可观察对象，我们将创建一个私有方法，在应用程序启动时，将在ngOnInit生命周期钩子中调用该方法。</p><p id="bc67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将订阅可观察对象，每当发生点击事件时，我们将把以下消息记录到浏览器控制台'<strong class="ky ir"><em class="nh">DOM已被点击！</em></strong>’。</p><p id="92bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您的<strong class="ky ir"> app.component.ts </strong>文件现在应该是这样的。</p><pre class="kg kh ki kj gt ni ms nj nk aw nl bi"><span id="fd80" class="nm lt iq ms b gy nn no l np nq">import { Component, <strong class="ms ir">OnInit</strong> } from '@angular/core';<br/><strong class="ms ir">import { fromEvent, Observable } from 'rxjs';</strong></span><span id="b998" class="nm lt iq ms b gy nr no l np nq">@Component({<br/>   selector: 'app-root',<br/>   templateUrl:  './app.component.html',<br/>   styleUrls: ['./app.component.css']<br/>})</span><span id="db0f" class="nm lt iq ms b gy nr no l np nq">export class AppComponent <strong class="ms ir">implements OnInit</strong> {<br/>  title = 'click-event-app';<br/>  <strong class="ms ir">clickObservable: Observable&lt;Event&gt; = fromEvent(document,'click');</strong></span><span id="aede" class="nm lt iq ms b gy nr no l np nq">  <strong class="ms ir">ngOnInit(): void {<br/>    this.subscribeToObservable();<br/>  }</strong></span><span id="ac55" class="nm lt iq ms b gy nr no l np nq">  <strong class="ms ir">private subscribeToObservable() {<br/>      this.clickObservable.subscribe(() =&gt; { <br/>      console.log(`The dom has been clicked!`);<br/>    })<br/>  }</strong></span><span id="6f0b" class="nm lt iq ms b gy nr no l np nq">}</span></pre><h1 id="1e48" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">行动中的可观察对象</h1><p id="c077" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要查看实际情况，请使用以下命令启动应用程序:</p><p id="d350" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mp mq mr ms b">$ ng serve -o</code></p><p id="0aa1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mp mq mr ms b">-o</code>标志表示，在默认的网络浏览器中自动打开应用程序。通常应用程序会被发送到以下网址<a class="ae kv" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank"><em class="nh">http://localhost:4200</em></a></p><h2 id="aee6" class="nm lt iq bd lu ns nt dn ly nu nv dp mc lf nw nx me lj ny nz mg ln oa ob mi oc bi translated">打开浏览器控制台</h2><p id="375f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">要打开浏览器控制台，按下<strong class="ky ir"> f12 </strong>按钮并确保控制台选项卡被选中。</p><p id="6607" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在单击应用程序网页中的任意位置，在本例中，我单击了四次。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/758f24a2cb6ba96d1be7ef62cdaefdf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uTC_F8oJ3S5Qu7VmGj_Lg.png"/></div></div></figure><p id="0b7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">应用程序监听任何鼠标点击，并相应地将它们记录到控制台。</p><h1 id="6dd8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="a37e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">可观测量在处理数据值流或未来事件时非常重要。使可观测量受欢迎的一些特征包括</p><ul class=""><li id="2261" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr oe mz na nb bi translated">更好的错误处理</li><li id="ccb9" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr oe mz na nb bi translated">懒惰，在没有订阅的情况下不会有数据值的发射。</li></ul></div></div>    
</body>
</html>
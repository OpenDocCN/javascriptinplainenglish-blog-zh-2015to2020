<html>
<head>
<title>Learn JavaScript DOM Basics by Building a Simple Clicker Game</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过构建一个简单的点击游戏来学习JavaScript DOM基础知识</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-fundamentals-w-cookie-clicker-part-1-a82eed004150?source=collection_archive---------2-----------------------#2020-10-02">https://javascript.plainenglish.io/javascript-fundamentals-w-cookie-clicker-part-1-a82eed004150?source=collection_archive---------2-----------------------#2020-10-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e548" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">变量类型、JavaScript函数、DOM等等！</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div><figcaption class="km kn gj gh gi ko kp bd b be z dk">DSC Session #2</figcaption></figure><h2 id="c5ea" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">先决条件:</h2><ul class=""><li id="f61d" class="lm ln iq lo b lp lq lr ls kz lt ld lu lh lv lw lx ly lz ma bi translated">你知道编程中有哪些函数和变量，也知道一些基本的HTML。</li><li id="6e58" class="lm ln iq lo b lp mb lr mc kz md ld me lh mf lw lx ly lz ma bi translated">在本教程中，我将使用一个名为VS Code的IDE。如果你还没有设置好，你可以在这里下载<a class="ae mg" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"/></li><li id="8269" class="lm ln iq lo b lp mb lr mc kz md ld me lh mf lw lx ly lz ma bi translated">我还将使用名为Live Server的VS代码扩展，当我更新任何HTML、CSS或JavaScript时，它会自动重新加载我的chrome页面。这是可选的，但是您可以通过在扩展选项卡上搜索Live Server并安装扩展来获得它。</li></ul><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/847fb37c9116d85b821ab7364b7a8f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFqHcClJMvXOn2GH0lIs_A.png"/></div></div></figure><ul class=""><li id="5dc0" class="lm ln iq lo b lp mo lr mp kz mq ld mr lh ms lw lx ly lz ma bi translated">我将要编写的样板代码仍然可以在<a class="ae mg" href="http://repl.it" rel="noopener ugc nofollow" target="_blank"> repl.it </a>中找到。您可以在这里找到存储库<a class="ae mg" href="https://repl.it/@dzhen19/session1template" rel="noopener ugc nofollow" target="_blank">。你可以下载这个回购协议，首先分叉，点击<strong class="lo ir">文件</strong>旁边的省略号，然后<strong class="lo ir">下载为zip </strong>。</a></li></ul><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/f60194ae5b3336231e77f4ea12aff9ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*g9tMXTiP_zb5G9YMyPaoVg.png"/></div></figure><ul class=""><li id="0062" class="lm ln iq lo b lp mo lr mp kz mq ld mr lh ms lw lx ly lz ma bi translated">你可以把这个文件夹拖到VS代码里面开始编码！</li></ul><h1 id="80fa" class="mu kr iq bd ks mv mw mx kv my mz na ky jw nb jx lc jz nc ka lg kc nd kd lk ne bi translated">HTML中的JavaScript？？</h1><p id="d734" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">JavaScript是浏览器的语言，所以我们可以通过使用一个<code class="fe ns nt nu nv b">&lt;script /&gt;</code>标签将JS直接嵌入到我们的标记中。我们通常希望HTML在JavaScript之前加载，这就是为什么<code class="fe ns nt nu nv b">&lt;script /&gt;</code>标签通常位于<code class="fe ns nt nu nv b">&lt;body&gt;</code>标签的末尾附近。</p><p id="cd7f" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在VS代码中打开<code class="fe ns nt nu nv b">index.html</code>,随意地添加一个<code class="fe ns nt nu nv b">h1</code>标签，给你的网站添加一些内容。现在，为了使用我前面提到的Live服务器扩展，我们需要做的就是单击窗口右下角的“Go Live ”:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/becde311b194f70e713dab726f9a809c.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*CxIPIAXsqsq3ixiRTXVfaw.png"/></div></figure><p id="009a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">窗口应该会自动弹出。尝试编辑您的<code class="fe ns nt nu nv b">h1</code>，页面应该会自动重新加载。</p><p id="c11f" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">让我们将JavaScript的第一部分放到我们的<code class="fe ns nt nu nv b">index.html</code>文件中。在<code class="fe ns nt nu nv b">&lt;body&gt;</code>内，放下:<code class="fe ns nt nu nv b">&lt;script&gt;alert("bruh")&lt;/script&gt;</code></p><p id="3d25" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">这是我目前掌握的情况。</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="b88b" class="kq kr iq nv b gy oe of l og oh">&lt;body&gt;<br/>      &lt;h1&gt;<br/>          Clicker Game<br/>      &lt;/h1&gt;<br/>    &lt;script&gt;<br/>        alert("bruh")<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;</span></pre><p id="179a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">实时服务器现在将重新加载，您应该会注意到弹出一个警告，其中包含我们传递到<code class="fe ns nt nu nv b">alert()</code>中的字符串</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/ca04a5853fd21692c957b25a12d4a5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*AAKqMJ2I5gSoukz3Cu16zg.png"/></div></figure><p id="4b94" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">很酷吧？JavaScript是在考虑浏览器的情况下构建的，因此JS中的许多特殊函数引用了浏览器的特定功能(比如弹出警告)。我们很快会看到更多。</p><h2 id="cae8" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">使用Chrome开发工具和浏览器控制台</h2><p id="3b27" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">JavaScript是一种解释语言，对我们来说很棒，因为我们可以使用浏览器的控制台来测试JavaScript代码片段。您可以使用Windows上的<code class="fe ns nt nu nv b">ctrl-shift-c</code>和Mac上的<code class="fe ns nt nu nv b">option-cmd-J</code>来使用开发工具。现在点击“控制台”选项卡。</p><p id="7f13" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">您现在可以直接在控制台中开始编写JavaScript了:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/325cb04be3151cb755aafe04baef9ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*2qrdqXxIsEFMafiDZiDt5g.png"/></div></figure><p id="f070" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">如果您来自Python，这一切都应该很熟悉。这与在终端中与Python控制台接口没有什么不同。你可以把<code class="fe ns nt nu nv b">console.log()</code>想象成蟒蛇<code class="fe ns nt nu nv b">print()</code>的陈述。我们可以在代码中随时调用<code class="fe ns nt nu nv b">console.log</code>来打印出有用的调试信息。</p><h1 id="3437" class="mu kr iq bd ks mv mw mx kv my mz na ky jw nb jx lc jz nc ka lg kc nd kd lk ne bi translated">3种将JavaScript放到HTML中的方法</h1><h2 id="a599" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated"><strong class="ak"> 1。直接在HTML元素中嵌入JavaScript。</strong></h2><p id="db83" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">尝试将下面的代码粘贴到您的<code class="fe ns nt nu nv b">index.html</code>中，并通过检查您的控制台来验证JavaScript是否运行。</p><p id="9c07" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">下面的标记创建了一个按钮元素，单击时会调用一些JavaScript。事实证明，某些事件允许我们直接调用JavaScript。<code class="fe ns nt nu nv b">onClick</code>、<code class="fe ns nt nu nv b">onMouseOver</code>、<code class="fe ns nt nu nv b">onMouseExit</code>都是不言自明的例子。</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="e485" class="kq kr iq nv b gy oe of l og oh">&lt;button onclick="console.log('clicked!')"&gt;  <br/>        press me!<br/>      &lt;/button&gt;</span></pre><p id="5a74" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">有问题的是，我们的JavaScript也不会像<code class="fe ns nt nu nv b">console.log</code>一样是一行。此外，我们可能希望在事件处理程序之外使用JavaScript特性。因此，我们需要一个更可持续的解决方案，将JavaScript放入HTML中。</p><h2 id="06d5" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">2.<script>标签&lt;/root&gt;</script></h2><p id="5b70" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">除了在HTML元素中直接嵌入JavaScript之外，我们还可以通过将JavaScript包含在<code class="fe ns nt nu nv b">&lt;script&gt;</code>标签中来编写HTML。下面是使用我们的<code class="fe ns nt nu nv b">&lt;script&gt;</code>标签实现的按钮记录器元素:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="16fa" class="kq kr iq nv b gy oe of l og oh">&lt;button onclick="log_something()"&gt;  <br/>        press me!<br/>      &lt;/button&gt;</span><span id="4c0c" class="kq kr iq nv b gy ok of l og oh">    &lt;script&gt; <br/>      function log_something(){<br/>        console.log("clicked!")<br/>      }<br/>    &lt;/script&gt;</span></pre><p id="b99a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">我们没有直接在元素中编写JavaScript，而是在<code class="fe ns nt nu nv b">script</code>标签中编写了一个JavaScript函数。<code class="fe ns nt nu nv b">script</code>标签中的任何内容在整个<code class="fe ns nt nu nv b">index.html</code>中都是全局的。因此，当事件<code class="fe ns nt nu nv b">onclick</code>发生时，通过调用函数<code class="fe ns nt nu nv b">log_something()</code>，我们可以<code class="fe ns nt nu nv b">console.log</code>“点击”。</p><p id="38b8" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">我刚才是不是介绍了JavaScript函数？？</strong>你打赌我赢了。它们并不复杂。在JavaScript中，我们用<code class="fe ns nt nu nv b">function</code>关键字声明一个功能块(就像Python中的<code class="fe ns nt nu nv b">def</code>)。)我们在后面加上括号，在括号中我们可以声明我们的参数。最后，我们将函数块放在花括号内。分号是可选的。</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="ccfe" class="kq kr iq nv b gy oe of l og oh">function log_2(){<br/>   console.log(1+1)</span><span id="a5f1" class="kq kr iq nv b gy ok of l og oh">}</span></pre><p id="9f60" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">暂时不要担心理解一切。您仍然可以在不理解所有JavaScript的情况下编写JavaScript。</p><h2 id="4246" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">3.script.js使用其他文件</h2><p id="6c23" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">你可以看到嵌入式JavaScript是如何很快变得一团糟的。这就是为什么我们将在<code class="fe ns nt nu nv b">script.js</code>中编写JavaScript并将其导入到我们的HTML中。我们可以通过向我们的<code class="fe ns nt nu nv b">&lt;script&gt;</code>标签添加一个<code class="fe ns nt nu nv b">src</code>参数，并将其设置为脚本文件的字符串地址来实现。像这样:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="180c" class="kq kr iq nv b gy oe of l og oh">&lt;script src=”script.js”&gt; &lt;/script&gt;</span></pre><p id="03e4" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">为了在<code class="fe ns nt nu nv b">script.js</code>中重新创建日志按钮的逻辑，我们必须做一些事情。</p><ol class=""><li id="d8b6" class="lm ln iq lo b lp mo lr mp kz mq ld mr lh ms lw ol ly lz ma bi translated">给按钮一个<code class="fe ns nt nu nv b">id</code></li><li id="a7dc" class="lm ln iq lo b lp mb lr mc kz md ld me lh mf lw ol ly lz ma bi translated">通过按钮元件的<code class="fe ns nt nu nv b">id</code>定位按钮元件</li><li id="2220" class="lm ln iq lo b lp mb lr mc kz md ld me lh mf lw ol ly lz ma bi translated">添加一个监听点击的事件监听器</li><li id="4fa9" class="lm ln iq lo b lp mb lr mc kz md ld me lh mf lw ol ly lz ma bi translated">将事件监听器的动作设置为<code class="fe ns nt nu nv b">console.log</code>，或者调用<code class="fe ns nt nu nv b">console.log</code>的函数</li></ol><p id="3f8a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">第一步很简单。我们所要做的就是给按钮一个id属性:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="8532" class="kq kr iq nv b gy oe of l og oh">&lt;button id="btn" &gt;press me! &lt;/button&gt;</span></pre><p id="6223" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">你可能还记得我们上次使用CSS选择器来定位某个<code class="fe ns nt nu nv b">class</code>的元素。因此，通过将多个元素设置为同一个<code class="fe ns nt nu nv b">class</code>，我们可以重用我们的样式。你可以把<code class="fe ns nt nu nv b">id</code>想象成<code class="fe ns nt nu nv b">class</code>，但是是针对JavaScript而不是CSS的。<code class="fe ns nt nu nv b">id</code>仅仅是我们唯一识别元素的一种方式。</p><p id="4f58" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">现在，<strong class="lo ir">第二步</strong>是在<code class="fe ns nt nu nv b">script.js</code>中定位我们的标记按钮，我们必须调用一个名为<code class="fe ns nt nu nv b">document.getElementById()</code>的函数。这个函数完全按照您的预期来做(在给定一个id字符串的情况下获取元素)。)我将在下一节解释我所说的“获取元素”的确切含义。现在，让我们用<code class="fe ns nt nu nv b">id</code>“BTN”来实现我们的按钮。</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="bdfd" class="kq kr iq nv b gy oe of l og oh">document.getElementById("btn")</span></pre><p id="56ea" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">第三步</strong>是将我们的事件监听器添加到现在定位的按钮中。现在很难解释这是如何工作的，所以请耐心等待，输入以下内容。</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="6658" class="kq kr iq nv b gy oe of l og oh">document.getElementById("btn").addEventListener("click");</span></pre><p id="162e" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">如果您现在检查您的控制台，您会发现一条错误消息，通知我们<code class="fe ns nt nu nv b">addEventListener</code>实际上有两个参数。第一个论点是要听的事件。第二个参数是事件被确认时要采取的操作。</p><p id="d0a9" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">因此，<strong class="lo ir">第四步</strong>就是加入那个动作。我们可以通过两种方式做到这一点:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="e5a6" class="kq kr iq nv b gy oe of l og oh">document.getElementById("btn").addEventListener("click", console.log("clicked"))</span><span id="5431" class="kq kr iq nv b gy ok of l og oh">const some_action = () =&gt; {<br/>    console.log("clicked")<br/>}<br/>document.getElementById("btn").addEventListener("click", some_action)</span></pre><p id="7624" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">关于JavaScript中的箭头函数的一个简短说明</strong></p><p id="c715" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">哇哇哇，这是怎么回事？我以为函数是用<code class="fe ns nt nu nv b">function xxx (){}</code>声明的。<code class="fe ns nt nu nv b">const xxx () =&gt; {}</code>是怎么回事？</p><p id="fdad" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在JavaScript中，函数可以赋给变量。在这种情况下，常数<code class="fe ns nt nu nv b">some_action</code>指的是一个函数。<code class="fe ns nt nu nv b">const</code>是一种JavaScript变量。</p><p id="7ab0" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">()=&gt;{}</code>只是<code class="fe ns nt nu nv b">function () {}</code>的简称。实际上，两者是完全相同的。</p><p id="3ef0" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">您还会注意到，我们将函数名直接传递给了<code class="fe ns nt nu nv b">addEventListener</code>的第二个参数。这是因为当我们的事件被检测到时，这个函数会被自动调用。你不必知道这是如何或为什么工作的，但只要记住<strong class="lo ir">将函数名传递给事件监听器</strong>。不是字符串(<code class="fe ns nt nu nv b">“some_action”</code>)，不是调用(<code class="fe ns nt nu nv b">some_action()</code>)，只是函数名本身。</p><h1 id="16de" class="mu kr iq bd ks mv mw mx kv my mz na ky jw nb jx lc jz nc ka lg kc nd kd lk ne bi translated">文档对象模型</h1><p id="93ca" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">但是JavaScript如何知道操纵标记呢？我们如何在HTML中实现逻辑并呈现动态内容？答案是DOM，文档对象模型。</p><p id="ae9e" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">script</code>标签将我们的JavaScript链接到标记，但它也让我们的JavaScript访问一个<code class="fe ns nt nu nv b">window</code>对象。可以把<code class="fe ns nt nu nv b">window</code>想象成JavaScript中的一个对象。如果您是面向对象编程的新手，我建议您在继续之前先熟悉对象和类。</p><p id="e62b" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">我们之前调用的方法<code class="fe ns nt nu nv b">alert</code>实际上是<code class="fe ns nt nu nv b">window.alert()</code>的简写。同样，我们之前使用的<code class="fe ns nt nu nv b">console.log</code>方法实际上是调用了<code class="fe ns nt nu nv b">console</code>的<code class="fe ns nt nu nv b">log</code>方法，它是<code class="fe ns nt nu nv b">window</code>中的一个子对象。如果这让你感到困惑，现在不要担心。</p><p id="d3a3" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">只要知道我们基本上可以通过引用<code class="fe ns nt nu nv b">window</code>来访问浏览器拥有的任何属性或方法。如果我们想在页面上保存一些信息，我们可以操作<code class="fe ns nt nu nv b">window.localstorage</code>；如果我们想获得当前的URL，我们可以访问<code class="fe ns nt nu nv b">window.location</code>。</p><p id="c5b6" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">但在实际操作中，</strong> <strong class="lo ir">我们几乎不会写</strong> <code class="fe ns nt nu nv b"><strong class="lo ir">window</strong></code> <strong class="lo ir">。编写<code class="fe ns nt nu nv b">localstorage</code>或<code class="fe ns nt nu nv b">location</code>就足以访问它们的方法和属性，因为解释器假设我们在隐式引用<code class="fe ns nt nu nv b">window</code>。你可以通过在chrome控制台中记录这些属性来验证这一点。</strong></p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi om"><img src="../Images/62a94986e4dbcfae1ccf626e0ab01c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgVyqkT_AU6kbBWZdAvXLA.png"/></div></div></figure><p id="d345" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">同样通过这个DOM魔术，我们的JavaScript可以访问我们的标记元素。之前，当我们打电话给:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="c7c4" class="kq kr iq nv b gy oe of l og oh">document.getElementById("btn").addEventListener("click", some_action)</span></pre><p id="4837" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">我们实际做的是参考<code class="fe ns nt nu nv b">window.document</code>。<code class="fe ns nt nu nv b">getElementById</code>有效地将我们的HTML元素作为DOM对象返回。所以不是我们在<code class="fe ns nt nu nv b">index.html</code>中写的标记包含了监听事件的能力。它实际上是DOM，因此也是浏览器的能力。请记住，DOM是由浏览器基于我们的标记、CSS和JavaScript生成的。</p><p id="a388" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在控制台中记录<code class="fe ns nt nu nv b">document</code>将有助于说明我的意思。你会注意到<code class="fe ns nt nu nv b">document</code>看起来几乎和我们的标记一模一样。几乎相同，但不完全相同，因为再次，<strong class="lo ir">浏览器生成DOM。</strong></p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi on"><img src="../Images/f77e21797fe1d0bd7d74f8ac13f54906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mYtArt0vjyLLhgLfUCBWKw.png"/></div></div></figure></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><h1 id="4477" class="mu kr iq bd ks mv ov mx kv my ow na ky jw ox jx lc jz oy ka lg kc oz kd lk ne bi translated">构建迭代器</h1><p id="7fc7" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">我们的游戏很简单。我们所需要的是一个标题，一些厚脸皮的文字表明你点击了按钮多少次，以及按钮本身。以下是我想到的标记:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="7494" class="kq kr iq nv b gy oe of l og oh">// index.html</span><span id="96ab" class="kq kr iq nv b gy ok of l og oh">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width"&gt;<br/>    &lt;title&gt;&lt;/title&gt;<br/>    &lt;link href="style.css" rel="stylesheet" type="text/css" /&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div class ="centered"&gt;<br/>    &lt;h1&gt;Clicker Game&lt;/h1&gt;<br/>    &lt;p&gt;You fool, you have clicked this button &lt;span id="counter"&gt;&lt;/span&gt; times&lt;/p&gt;<br/>    &lt;button class="bigRed" id="btn"&gt;click me!&lt;/button&gt;<br/>  &lt;/div&gt;</span><span id="b738" class="kq kr iq nv b gy ok of l og oh">&lt;script src="./script.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="34d2" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">这里有一些CSS来配合它:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="572d" class="kq kr iq nv b gy oe of l og oh">// style.css<br/>.bigRed{<br/>    background-color: red;<br/>    color: white;<br/>}</span><span id="c080" class="kq kr iq nv b gy ok of l og oh">.centered{<br/>    text-align: center;<br/>    margin: 10%;<br/>}</span></pre><p id="8d75" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">到目前为止，我的页面是这样的:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi pa"><img src="../Images/414c9a428678e35c4398fe79fddfee3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ngXKic93lHh40pJPdZOdJA.png"/></div></div><figcaption class="km kn gj gh gi ko kp bd b be z dk">This is probably how cookie clicker started out</figcaption></figure><p id="8011" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">空的</strong> <code class="fe ns nt nu nv b"><strong class="lo ir">span </strong></code> <strong class="lo ir">标签是怎么回事？</strong>一个<code class="fe ns nt nu nv b">span </code>标签是一个不换行的<code class="fe ns nt nu nv b">div</code>。在这种情况下，我希望我的累加器以一个漂亮的句子形式显示信息，当我重复单击按钮时，它会改变。</p><p id="d08a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">现在，要设置我们的累加器，我们必须首先声明一个存储累加值的变量。在JavaScript中，我们使用关键字<code class="fe ns nt nu nv b">var</code>、<code class="fe ns nt nu nv b">let</code>和<code class="fe ns nt nu nv b">const</code>来声明变量</p><p id="2b0a" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">三者的区别在于:<code class="fe ns nt nu nv b">const</code>变量不能重定义，<code class="fe ns nt nu nv b">let</code>变量不能重声明，<code class="fe ns nt nu nv b">var</code>变量两者都允许。</p><p id="e403" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><strong class="lo ir">声明和定义</strong>之间的区别在下面的代码块中演示:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="3fd2" class="kq kr iq nv b gy oe of l og oh">// declaring an element by stating its type<br/>var i<br/>//defining an element by giving it a value<br/>i = 5<br/>//define &amp; declare in the same line<br/>const j = 10</span><span id="9b92" class="kq kr iq nv b gy ok of l og oh">// redeclaring an element by restating its type. Currently, i is of type let, which allows us to redefine but not redeclare</span><span id="29c1" class="kq kr iq nv b gy ok of l og oh">let i = 2<br/>i = 10</span><span id="40cb" class="kq kr iq nv b gy ok of l og oh">// these will throw errors: </span><span id="e3c4" class="kq kr iq nv b gy ok of l og oh">//throws an error because let i cannot be redeclared<br/>const i</span><span id="c4a9" class="kq kr iq nv b gy ok of l og oh">//throws an error because const j cannot be redefined. <br/>j = 12</span></pre><p id="4d27" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在我们的<code class="fe ns nt nu nv b">script.js</code>中，写入…</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="945b" class="kq kr iq nv b gy oe of l og oh">//script.js<br/>let x = 0<br/>document.getElementById("counter").innerHTML = x<br/>document.getElementById('btn').addEventListener("click", iterate)</span><span id="605a" class="kq kr iq nv b gy ok of l og oh">function iterate(){<br/>    x += 1<br/>    console.log(x)<br/>    document.getElementById("counter").innerHTML = x<br/>}</span></pre><p id="4a91" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">上面的JavaScript应该给我们一个有效的点击器，它迭代每次点击并在标记中显示其计数:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/f9b4230152d351f50296ae0a351bc801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*iZdGoQHBRIhWXPwiGmgQFA.png"/></div></figure><p id="e4e2" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">它是如何工作的？</p><p id="fbae" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">document.getElementById(“counter”).innerHTML = x</code>将带有<code class="fe ns nt nu nv b">counter</code>的HTML的<code class="fe ns nt nu nv b">id</code>的元素绑定到值<code class="fe ns nt nu nv b">x</code>，我们的JavaScript能够操纵这个值</p><p id="735d" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">document.getElementById(‘btn’).addEventListener(“click”, iterate)</code>将按钮的点击事件绑定到一个名为<code class="fe ns nt nu nv b">iterate</code>的函数，我们在下面定义了这个函数。</p><p id="b534" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在<code class="fe ns nt nu nv b">iterate</code>中，我们简单地增加<code class="fe ns nt nu nv b">x</code>并刷新元素<code class="fe ns nt nu nv b">counter</code>的<code class="fe ns nt nu nv b">innerHTML</code>。</p><h2 id="ab0d" class="kq kr iq bd ks kt ku dn kv kw kx dp ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">奖金</h2><p id="7083" class="pw-post-body-paragraph nf ng iq lo b lp lq jr nh lr ls ju ni kz nj nk nl ld nm nn no lh np nq nr lw ij bi translated">如果我们想在页面刷新后保存我们的计数器呢？在这种情况下，我们必须使用浏览器提供给我们的另一个<code class="fe ns nt nu nv b">window</code>对象<code class="fe ns nt nu nv b">localStorage</code>。<code class="fe ns nt nu nv b">localStorage</code>以键:值格式存储信息，其中键和值都是字符串。</p><p id="efec" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">下面是一个点击游戏的代码，它在页面刷新后保持其计数:</p><pre class="kf kg kh ki gt oa nv ob oc aw od bi"><span id="0ceb" class="kq kr iq nv b gy oe of l og oh">let x<br/>// if the key value pair exists, we set x equal to the stored value<br/>// else, set x to 0</span><span id="3374" class="kq kr iq nv b gy ok of l og oh">if (localStorage.getItem("count")){<br/>    x = parseInt(localStorage.getItem("count"))<br/>} else{<br/>    x = 0<br/>}</span><span id="4b06" class="kq kr iq nv b gy ok of l og oh">document.getElementById('btn').addEventListener("click", iterate)<br/>document.getElementById("counter").innerHTML = x</span><span id="263b" class="kq kr iq nv b gy ok of l og oh">function iterate(){<br/>    x += 1<br/>    localStorage.setItem("count", x)<br/>    console.log(x)<br/>    document.getElementById("counter").innerHTML = x<br/>}</span></pre><p id="02ab" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">在上面的代码块中，我们实际上只有几个方法没有遇到。</p><p id="7a1f" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">localStorage.setItem("count", x)</code>这个方法有两个参数。第一个是代表我们的密钥的字符串。第二个是我们想要存储的值。当我们调用<code class="fe ns nt nu nv b">localStorage.setItem</code>时，我们将<code class="fe ns nt nu nv b">x</code>作为一个字符串存储在一个键值对中，并将<code class="fe ns nt nu nv b">"count"</code>作为我们的键。</p><p id="102c" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">localStorage.getItem("count")</code>这个方法接受键值并返回给我们一个字符串。</p><p id="0ba3" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated"><code class="fe ns nt nu nv b">parseInt(some_string)</code>这个方法把一个字符串变成一个整数。</p><p id="92ec" class="pw-post-body-paragraph nf ng iq lo b lp mo jr nh lr mp ju ni kz nw nk nl ld nx nn no lh ny nq nr lw ij bi translated">现在您已经了解了一些DOM基础知识，是时候开始构建一些交互式web应用程序了！干杯。</p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Best Practices — Types and This</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—类型和这个</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-types-and-this-c38f90fa3ed3?source=collection_archive---------12-----------------------#2020-07-29">https://javascript.plainenglish.io/javascript-best-practices-types-and-this-c38f90fa3ed3?source=collection_archive---------12-----------------------#2020-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7193a540991306838f6136ea15d4eb83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SYyyKqDD8E6ffR4L"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@t_lipke?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thomas Lipke</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9e57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="099e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">当心自动类型转换</h1><p id="af5f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该意识到自动数据类型转换。</p><p id="87b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以给我们想要的变量赋值。</p><p id="2113" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d487" class="mn lc iq mj b gy mo mp l mq mr">let text = "james";<br/>text = 5;</span></pre><p id="9210" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在JavaScript中很容易改变变量的类型。</p><p id="046e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，我们可以使用类似TypeScript和Flow的语言扩展来限制变量的数据类型。</p><h1 id="5584" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要声明不必要的变量</h1><p id="c056" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们没有使用一个变量，那么我们应该删除它。</p><p id="44fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">声明的变量越多，占用的空间就越大。</p><p id="7c7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e54f" class="mn lc iq mj b gy mo mp l mq mr">const topBar = sidebar.querySelector('#topbar');<br/>const paragraph = bar.querySelector('p');<br/>paragraph.textContent = 'bar';</span></pre><p id="f90e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们没有使用<code class="fe ms mt mu mj b">topBar</code>变量，所以我们不应该删除它。</p><p id="21e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以只写；</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="404a" class="mn lc iq mj b gy mo mp l mq mr">bar.querySelector('p').textContent = 'bar';</span></pre><h1 id="2d5f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用参数默认值</h1><p id="783b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了确保参数总是有值，我们应该设置参数的值。</p><p id="2612" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e1f0" class="mn lc iq mj b gy mo mp l mq mr">function logNumber(num = 100) {<br/>  console.log(num);<br/>}</span></pre><p id="b54f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这比老方法要短得多，老方法是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3fb5" class="mn lc iq mj b gy mo mp l mq mr">function logNumber(num) {<br/>  if (num === undefined) {<br/>    num = 25;<br/>  }<br/>  console.log(num);<br/>}</span></pre><p id="a934" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用默认参数，我们不必直接给参数赋值。</p><h1 id="1595" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">默认结束开关</h1><p id="07d2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有<code class="fe ms mt mu mj b">switch</code>语句，我们应该用一个<code class="fe ms mt mu mj b">default</code>子句结束它们，这样如果没有值匹配，我们就可以做一些事情。</p><p id="f07c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4375" class="mn lc iq mj b gy mo mp l mq mr">switch(type) {<br/>  case 1:<br/>    // something<br/>  case 2:<br/>    // something else<br/>  default:<br/>    // do something<br/>}</span></pre><p id="e700" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ms mt mu mj b">default</code>子句中，我们可以处理错误或执行一些默认操作。</p><h1 id="3f7e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">eval()是错误的</h1><p id="13b5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">eval</code>绝对不好。</p><p id="b825" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从字符串运行代码有很大的安全风险。</p><p id="54c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而且代码无法优化，很难调试。</p><h1 id="eb4a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不使用新对象()</h1><p id="bc5d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">Object</code>构造者并没有给我们带来多少好处。</p><p id="e609" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只是时间更长了。</p><p id="ad04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe ms mt mu mj b">{}</code>代替<code class="fe ms mt mu mj b">new Object()</code>。</p><p id="4442" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样的建议也适用于原始值构造函数。</p><p id="772d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不使用<code class="fe ms mt mu mj b">new String()</code>，我们写<code class="fe ms mt mu mj b">''</code>。</p><p id="bae8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不使用<code class="fe ms mt mu mj b">new Number()</code>，而是使用numver文字。</p><p id="ab24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">true</code>或<code class="fe ms mt mu mj b">false</code>代替<code class="fe ms mt mu mj b">new Boolean()</code>。</p><p id="91db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不使用<code class="fe ms mt mu mj b">Array</code>构造函数，而是使用<code class="fe ms mt mu mj b">[]</code>。</p><p id="2d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，用给定数量的空槽创建artays仍然很方便。</p><p id="5039" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于regex，我们使用regex文字，如<code class="fe ms mt mu mj b">/abc/</code>而不是<code class="fe ms mt mu mj b">new RegExp()</code>。</p><p id="78b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe ms mt mu mj b">function(){}</code>或<code class="fe ms mt mu mj b">() =&gt; {}</code>来创建函数，而不是使用<code class="fe ms mt mu mj b">new Function()</code>来创建函数。</p><p id="7ee4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有构造函数，代码会更短。</p><p id="75ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在原始构造函数的情况下，如果我们用<code class="fe ms mt mu mj b">typeof</code>检查，类型将是数据的实际类型而不是<code class="fe ms mt mu mj b">'object'</code>。</p><p id="8e4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也稍微快一点。</p><h1 id="29a1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">注释我们的代码</h1><p id="2c34" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以对我们的代码进行注释，以便解释代码中没有描述的东西。</p><h1 id="6d22" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">当有意义时，使用快捷符号</h1><p id="8551" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在许多情况下，我们可以使用快捷键。</p><p id="bdb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ac8b" class="mn lc iq mj b gy mo mp l mq mr">let level;<br/>if (score &gt; 200){<br/>  level = 2;<br/>} else {<br/>  level = 1;<br/>}</span></pre><p id="9dc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ee5c" class="mn lc iq mj b gy mo mp l mq mr">let level = (score &gt; 200) ? 2 : 1;</span></pre><p id="d050" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用三元运算符来检查条件并相应地赋值。</p><p id="2de1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ff74" class="mn lc iq mj b gy mo mp l mq mr">let price;<br/>if (discount){<br/>  price = discount;<br/>} else {<br/>  price = 120;<br/>}</span></pre><p id="c952" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e91e" class="mn lc iq mj b gy mo mp l mq mr">let price = discount || 120;</span></pre><p id="e5e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe ms mt mu mj b">discount</code>是真实的，那么它将被返回并分配。否则，返回120并赋值。</p><h1 id="5c2a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">每个任务有一个功能，使我们的代码模块化</h1><p id="ab93" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们的代码应该被分成更小的部分，这样我们可以更容易地使用它们。</p><p id="a029" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数应该做一件事，这样我们就不会和它们混淆。</p><p id="73b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也使得测试和调试更加容易。</p><p id="2929" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出于同样的目的，我们的代码应该模块化。</p><p id="824a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以把它们分成模块。</p><h1 id="32b1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">了解一下这个</h1><p id="175d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">this</code>是一个需要理解的重要键盘。根据它们所处的位置，它可以呈现不同的值。</p><p id="b20c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个方法的对象里面，<code class="fe ms mt mu mj b">this</code>就是这个对象。</p><p id="2b2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它在一个类中，那么它就是类实例。</p><p id="b56d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它在原型函数中，那么它就是构造函数实例。</p><p id="f86b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不应该知道这些。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/bbd945e6e51972708cc4e7393e16491b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BhQvmUgjGyo3BJnr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ndvn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andre Iv</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="dd5a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="690e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该使用像参数默认值和默认<code class="fe ms mt mu mj b">switch</code>情况这样的特性。</p><p id="897b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">避免无用的构造函数。</p><p id="5351" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还应该学习<code class="fe ms mt mu mj b">this</code>，类型转换等等。</p><h2 id="c335" class="mn lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="c297" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
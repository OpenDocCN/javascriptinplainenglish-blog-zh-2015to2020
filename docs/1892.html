<html>
<head>
<title>The optional chaining operator in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中可选的链接操作符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-optional-chaining-operator-in-javascript-e151ecafcbd8?source=collection_archive---------6-----------------------#2020-05-02">https://javascript.plainenglish.io/the-optional-chaining-operator-in-javascript-e151ecafcbd8?source=collection_archive---------6-----------------------#2020-05-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/79de34dccdff68e196a84610bedb143a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lE_LOHegleIGkFiiCkswgQ.png"/></div></div></figure><h1 id="e549" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">定义</h1><p id="4c9d" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">可选的链接操作符<code class="fe lr ls lt lu b">?.</code>允许读取位于连接对象链深处的属性值。</p><p id="d718" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated"><em class="ma">可选链接作为ES2020标准的一部分引入。</em></p><h1 id="7012" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">为什么会这样？</h1><p id="89c4" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">它改变了我们从深层对象获取属性的方式。可选的链接使你的代码看起来更整洁。</p><p id="160a" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">考虑这段代码，其中数据对象有一个查询和对查询的回答。</p><p id="a583" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">要访问<code class="fe lr ls lt lu b">value</code>，您必须编写一个很长的条件语句，很难阅读和格式化😢</p><p id="01c2" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">但是通过可选的链接，您可以轻松访问<code class="fe lr ls lt lu b">value</code>😃你也不必担心空的&amp;未定义的检查。</p><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="cbe8" class="mj jw in lu b gy mk ml l mm mn">response?.data?.answer?.value</span><span id="eadd" class="mj jw in lu b gy mo ml l mm mn"><em class="ma">// Output</em></span><span id="2718" class="mj jw in lu b gy mo ml l mm mn">JavaScript is 💛</span></pre><p id="70cd" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">哇，这段代码看起来如此干净🧼和干脆！如果<code class="fe lr ls lt lu b">value</code>不存在，我们可以给它分配一个默认值。</p><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="1f75" class="mj jw in lu b gy mk ml l mm mn">response?.data?.answer?.key || 'JavaScript is BAE 💛'</span><span id="6a8d" class="mj jw in lu b gy mo ml l mm mn"><em class="ma">// Output</em></span><span id="c609" class="mj jw in lu b gy mo ml l mm mn">JavaScript is BAE 💛</span></pre><h1 id="bfe4" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">设置Babel插件</h1><p id="373a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">Babel <a class="ae mp" href="https://babeljs.io/blog/2020/01/11/7.8.0" rel="noopener ugc nofollow" target="_blank"> 7.8.0 </a>默认支持新的<code class="fe lr ls lt lu b">ECMAScript 2020</code>特性。不需要为可选链接启用单独的插件(<code class="fe lr ls lt lu b">?.</code>)。</p><p id="2b63" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">如果你使用的是最新的Babel版本，高于或等于7.8.0，那么这是一个简单的设置</p><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="46f9" class="mj jw in lu b gy mk ml l mm mn">npm install --save-dev @babel/cli @babel/core @babel/preset-env</span></pre><p id="857d" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">现在将以下配置添加到<code class="fe lr ls lt lu b">.babelrc</code></p><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="0c40" class="mj jw in lu b gy mk ml l mm mn">{ <br/>  "presets": [ "@babel/preset-env" ] <br/>}</span></pre><p id="dc30" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">必要的巴别塔模块和预设配置完成。现在是时候做巴别塔魔法✨了</p><p id="9a61" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">运行此命令将代码转换到任何地方支持的版本。如果您已经全局安装了<code class="fe lr ls lt lu b">babel</code>模块，此命令将会起作用。</p><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="6eb6" class="mj jw in lu b gy mk ml l mm mn">babel app.js --out-file script-transpiled.js</span></pre><p id="5aec" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">所有可选链接代码应放在<code class="fe lr ls lt lu b">app.js</code>中，然后执行上述命令。这产生了可以在主流浏览器和<code class="fe lr ls lt lu b">node.js</code>中工作的transpiled代码。</p><h1 id="0009" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">1.函数调用的可选链接</h1><p id="1681" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">当您试图调用一个可能不存在的方法时，可以使用可选链接。在函数调用中使用可选链接会导致表达式自动返回undefined，而不是引发异常。</p><h1 id="d368" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">2.使用表达式的可选链接</h1><p id="339a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果左操作数为空或未定义，则不计算可选链接运算符后的表达式。</p><p id="149c" class="pw-post-body-paragraph kt ku in kv b kw lv ky kz la lw lc ld le lx lg lh li ly lk ll lm lz lo lp lq ig bi translated">在执行第3行时，用户被定义为null，<code class="fe lr ls lt lu b">isTeenage</code>没有抛出任何错误，因为如果左操作数为null或未定义，表达式将不会被求值。</p><h1 id="8a90" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">3.结合nullish合并运算符[这是ES2020的另一项功能]</h1><pre class="mb mc md me gt mf lu mg mh aw mi bi"><span id="28cc" class="mj jw in lu b gy mk ml l mm mn">let user = null;<br/>let age = 12;<br/>let isTeenage = user?.[value++] ?? 'not a teenager!';</span><span id="2bbf" class="mj jw in lu b gy mo ml l mm mn">console.log('isTeenage :: ', isTeenage);</span><span id="2f81" class="mj jw in lu b gy mo ml l mm mn">// Output</span><span id="7cb5" class="mj jw in lu b gy mo ml l mm mn">isTeenage :: not a teenager!</span></pre><h1 id="5acf" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">关于可选链接的事情</h1><ul class=""><li id="1263" class="mq mr in kv b kw kx la lb le ms li mt lm mu lq mv mw mx my bi translated">干净易读的代码</li><li id="6815" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">不用担心对象中的<code class="fe lr ls lt lu b">null</code>或<code class="fe lr ls lt lu b">undefined</code></li><li id="d1a2" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">误差更小</li></ul><h1 id="3218" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">浏览器支持</h1><ul class=""><li id="7cba" class="mq mr in kv b kw kx la lb le ms li mt lm mu lq mv mw mx my bi translated">铬合金— 80</li><li id="deef" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">边缘— 80</li><li id="860c" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">火狐浏览器— 74</li><li id="c6ea" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">Internet Explorer —否</li><li id="df66" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">歌剧— 67</li><li id="4244" class="mq mr in kv b kw mz la na le nb li nc lm nd lq mv mw mx my bi translated">Node.js — 14.0.0</li></ul><h1 id="5300" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">参考</h1><ul class=""><li id="3287" class="mq mr in kv b kw kx la lb le ms li mt lm mu lq mv mw mx my bi translated"><a class="ae mp" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank"> MDN Web </a></li></ul><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/d508e30dfe0dd2d6a9c89ceaf26face3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0OynzsrnzQaEA02QPNL8Og.jpeg"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk">Please follow <a class="ae mp" href="https://www.instagram.com/javascriptessentials/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/javascriptessentials</a> on Instagram to learn JavaScript 💛 through a snapshot of code snippets</figcaption></figure></div></div>    
</body>
</html>
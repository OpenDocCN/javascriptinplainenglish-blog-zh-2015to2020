<html>
<head>
<title>Exploring The Intersection Observer API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索JavaScript中的交叉点观察器API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/exploring-the-intersection-observer-api-in-javascript-d1e80d6b97c4?source=collection_archive---------7-----------------------#2020-11-02">https://javascript.plainenglish.io/exploring-the-intersection-observer-api-in-javascript-d1e80d6b97c4?source=collection_archive---------7-----------------------#2020-11-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="97ac" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过实例了解交叉口观察者</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e85c5b0043a9edb4d2f7bcdb618f4b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b4tHrcfK2CkvpdwJJEP6-A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image Created with❤️️ By Mehdi Aoussiad.</figcaption></figure><h1 id="4b50" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">介绍</h1><p id="0439" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">对于开发人员来说，检测一个元素在网页上的可见性，或者两个元素之间的相对可见性是一项困难的任务。交叉点观察器API用一种简单的方法来解决这个问题。这个现代的浏览器API允许我们跟踪元素的可见性并创建强大的交互。</p><p id="fb95" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">在本文中，我们将探索和学习JavaScript中的交叉点观察器API。</p><h1 id="f7a8" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是路口观察者？</h1><p id="d4ed" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">交叉点观察器是一个浏览器API，它让我们可以观察事物何时与视口相交。它提供了一种异步观察目标元素与祖先元素或顶级文档视窗的交集变化的方法。需要这个API的原因有很多，例如:</p><ul class=""><li id="a62c" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi mt mu mv mw bi translated">页面滚动时图像或其他内容的延迟加载。</li><li id="506a" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">实现“无限滚动”网站，加载越来越多的内容。</li><li id="32c9" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">通过只实例化对用户可见的对象来提高性能。</li><li id="4063" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">实现视差效果等等。</li></ul><h1 id="5328" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">创建交叉点观察点</h1><p id="b79d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们可以通过调用它的构造函数并传递给它一个带有选项的回调函数来创建一个交叉点观察器。传递给<code class="fe nc nd ne nf b"><strong class="lp ir">intersectionObserver()</strong></code>构造函数的对象<code class="fe nc nd ne nf b"><strong class="lp ir">options</strong></code>允许您控制观察者回调被调用的环境。该对象包含一些属性，例如:</p><ol class=""><li id="81eb" class="mo mp iq lp b lq mj lt mk lw mq ma mr me ms mi ng mu mv mw bi translated"><strong class="lp ir">根:</strong>用作检查目标可见性的视口的元素。</li><li id="3530" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi ng mu mv mw bi translated"><strong class="lp ir">根部边缘:</strong>根部周围的边缘。可以具有类似于CSS margin属性的值。</li><li id="7479" class="mo mp iq lp b lq mx lt my lw mz ma na me nb mi ng mu mv mw bi translated"><strong class="lp ir">阈值:</strong>阈值1.0意味着当目标的100%在由<code class="fe nc nd ne nf b"><strong class="lp ir">root</strong></code>选项指定的元素内可见时。0.5表示50%(以此类推)。</li></ol><p id="bdde" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">让我们看看下面的例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The Intersection Observer.</figcaption></figure><p id="3eac" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">每当目标达到为构造函数指定的阈值时，就会调用回调。回调接收条目对象和观察者的列表:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The Constructor’s Callback.</figcaption></figure><h1 id="927b" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">实际例子</h1><p id="28f0" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在本例中，我们将使用交叉点观察器来检查网页上容器div的可见性。如果该元素在页面上可见，我们将在容器中显示一个文本(h1)。当元素不可见时，我们将在页面(h2)上显示另一个文本，告诉我们容器div不可见(不相交)。所有这些都使用JavaScript中的交集观察器。如果你想理解的话，你可以阅读我们的代码示例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nh ni l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Practical Example.</figcaption></figure><p id="af43" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">您也可以在下面的Codepen中查看该代码的输出。运行它并开始滚动。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj ni l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Codepen Example.</figcaption></figure><p id="0d90" class="pw-post-body-paragraph ln lo iq lp b lq mj jr ls lt mk ju lv lw ml ly lz ma mm mc md me mn mg mh mi ij bi translated">如您所见，这只是使用交叉点观察器API的一个简单示例。你可以用这个强大的API做很多其他的事情，你只需要一点点的练习。</p><h1 id="dd91" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">结论</h1><p id="5983" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">JavaScript中的交叉点观察器API是检查网页上元素可见性的强大工具。这有助于完成更多其他任务，如图像的延迟加载，这有助于提高网页的性能。</p><h2 id="0909" class="nk kw iq bd kx nl nm dn lb nn no dp lf lw np nq lh ma nr ns lj me nt nu ll nv bi translated">进一步阅读</h2><div class="nw nx gp gr ny nz"><a href="https://medium.com/javascript-in-plain-english/parcel-the-zero-configuration-webpack-alternative-1bcd6704ab9f" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">包裹——零配置网络包替代方案</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">为您的项目开始使用超级简单的JavaScript Bundler</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div></div></div>    
</body>
</html>
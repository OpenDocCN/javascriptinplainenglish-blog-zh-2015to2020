<html>
<head>
<title>Comma Operator in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的逗号运算符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/comma-operator-in-javascript-cfe170f5b4d3?source=collection_archive---------1-----------------------#2020-02-26">https://javascript.plainenglish.io/comma-operator-in-javascript-cfe170f5b4d3?source=collection_archive---------1-----------------------#2020-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5ca06bca980247913de7035edbca5f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FGmvldJ4G6WDHegk.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="dbad" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">JavaScript鲜为人知的特性之一</h2></div><p id="e9ad" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">逗号操作符适合一组表达式操作符，它可能是有用的，但是它有可能被用于混淆而不是澄清。部分原因是因为它是一个逗号，逗号在JavaScript中还有其他含义。为了100%清楚起见，当逗号作用于两个表达式时，它只是一个逗号运算符:</p><p id="11c6" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><strong class="ks jc"> <em class="lm">左手表达式，右手表达式</em> </strong></p><p id="9bd9" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">其中<em class="lm">表达式</em>是涉及其他运算符、变量和函数的东西。</p><h1 id="f7c6" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">它有什么作用？</h1><p id="e53c" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">它用于顺序执行两个表达式。它首先从左到右计算每个操作数，然后最后一个操作数的值将作为结果返回。</p><p id="326a" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这里需要注意的重要一点是，它不同于数组、对象和函数参数中的逗号。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="999c" class="mt lo jb mp b gy mu mv l mw mx">let num = 10;</span><span id="00da" class="mt lo jb mp b gy my mv l mw mx">num = (num--, num);</span><span id="62a9" class="mt lo jb mp b gy my mv l mw mx">console.log(num);<br/>// expected output: 9</span><span id="bf77" class="mt lo jb mp b gy my mv l mw mx">num = (20, 30);</span><span id="eaab" class="mt lo jb mp b gy my mv l mw mx">console.log(num);<br/>// expected output: 30</span></pre><p id="4660" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在上面的例子中，我们必须使用括号，因为逗号操作符在所有JavaScript操作符中优先级最低。如果没有括号，表达式将被解析为:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="9adc" class="mt lo jb mp b gy mu mv l mw mx">x = (20), 30;</span></pre><p id="bd44" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">上面的语句最终在x中存储了20，并丢弃了右边表达式的结果。这里自然想到的问题是，为什么要用括号赋值呢？直接分配就行了。</p><p id="f23e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">答案是，一些操作符以及大多数功能都有副作用。举个例子，</p><p id="994e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><code class="fe mz na nb mp b">varr = (console.log(1),console.log(2),console.log(3),4);</code></p><p id="8850" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">你会看到1，2，3印在控制台上，4存储在<code class="fe mz na nb mp b">varr</code>中。在上面的例子中，我们也可以使用分号来代替逗号运算符，如下所示-</p><p id="a555" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><code class="fe mz na nb mp b">console.log(1); console.log(2); console.log(3); varr = 4;</code></p><p id="b101" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">但是，这里的重点是，<strong class="ks jc"> <em class="lm">分号分隔语句</em> </strong> where as <strong class="ks jc"> <em class="lm">逗号分隔表达式</em> </strong>，而且在某些情况下语句也是表达式。</p><h1 id="5080" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">几个例子</h1><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="a5a4" class="mt lo jb mp b gy mu mv l mw mx">var var1, var2, var3;</span><span id="c7a9" class="mt lo jb mp b gy my mv l mw mx">var1 = var2 = 10, var3 = 20; // Returns  in console<br/>console.log(var1); // 10 (left-most)</span><span id="9884" class="mt lo jb mp b gy my mv l mw mx">var1 = (var2 = 30, var3 = 40); // Returns 6 in console<br/>console.log(var1); // 40 (right-most)</span></pre><p id="34b0" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">属性键的计算:这个例子比较复杂。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="de3d" class="mt lo jb mp b gy mu mv l mw mx">const map = {<br/>  [1 &lt;&lt; 0]: "Batman",<br/>  [1 &lt;&lt; 1]: "Superman",<br/>  [1 &lt;&lt; 2]: "Flash"<br/>};</span><span id="282f" class="mt lo jb mp b gy my mv l mw mx">console.log(map);<br/>// <!-- -->{ '1': 'Batman', '2': 'Superman', '4': 'Flash' }</span></pre><h1 id="a358" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">用例</h1><p id="ebd4" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated">下面列出了一些常用的逗号运算符</p><ul class=""><li id="9f0b" class="nc nd jb ks b kt ku kw kx kz ne ld nf lh ng ll nh ni nj nk bi translated">一次声明多个变量:<code class="fe mz na nb mp b">var x = 0, y = 0, z = 0;</code></li><li id="2eab" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">数组文字中的列表元素:<code class="fe mz na nb mp b">[2, 4, 8, 10, 20, 32]</code></li><li id="6c6a" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">对象文字的单独属性:<code class="fe mz na nb mp b">{ min: 0, max: 100 }</code></li><li id="f7a7" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">定义多个函数参数:<code class="fe mz na nb mp b">function multiply(a, b) { return a * b; }</code></li><li id="3aec" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">调用带有多个参数的函数:<code class="fe mz na nb mp b">multiply(2, 6)</code></li><li id="76da" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">析构数组:<code class="fe mz na nb mp b">const [lower, upper] = [0, 1];</code></li><li id="ee28" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">析构对象:<code class="fe mz na nb mp b">const { min, max } = { min: 0, max: 100 };</code></li><li id="4212" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">导入多个模块成员:<code class="fe mz na nb mp b">import { open, close } from "fs";</code></li><li id="f78a" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">导出多个模块成员:<code class="fe mz na nb mp b">export { mkdir, rmdir };</code></li></ul><p id="8901" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><em class="lm">上面所有的例子都是语法正确的，并且包含一个逗号，但是</em> <strong class="ks jc"> <em class="lm"> none </em> </strong> <em class="lm">使用了实际的</em> <strong class="ks jc"> <em class="lm">逗号</em> </strong> <em class="lm">运算符。我能想到的一些实际用例是- </em></p><ul class=""><li id="acfe" class="nc nd jb ks b kt ku kw kx kz ne ld nf lh ng ll nh ni nj nk bi translated">允许我们在需要一个表达式的地方放多个表达式。由逗号分隔的多个表达式的结果值将是最后一个逗号分隔的表达式的值。</li><li id="21b1" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">在用JavaScript编写函数代码时，它也非常有用。</li><li id="9244" class="nc nd jb ks b kt nl kw nm kz nn ld no lh np ll nh ni nj nk bi translated">另一个最常见的用法是在一个<code class="fe mz na nb mp b">for</code>循环中提供多个参数。</li></ul><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="da38" class="mt lo jb mp b gy mu mv l mw mx">// j is initialized to some other value<br/>// as the for loop executes both i and j are incremented<br/>// because the comma operator allows two statements to be put in place of one<br/>for (var i = 0; i &lt; items.length; i++, j++) {<br/>    // loop code here that operates on items[i] <br/>    // and sometimes uses j to access a different array<br/>}</span></pre><p id="22d3" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在上面的例子中，<code class="fe mz na nb mp b">i++, j++</code>可以放在允许一个表达式的地方。在这种特殊情况下，多个表达式用于副作用，因此复合表达式采用最后一个表达式的值没有关系，但在其他情况下，这可能会有实际影响。</p><h1 id="60d4" class="ln lo jb bd lp lq lr ls lt lu lv lw lx kh ly ki lz kk ma kl mb kn mc ko md me bi translated">浏览器兼容性</h1><figure class="mk ml mm mn gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/2eaec24de1119d79bd4cfa3fd3466827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZhozgZPmK3bKOdiRcy3byg.png"/></div></div></figure></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h2 id="e920" class="mt lo jb bd lp ny nz dn lt oa ob dp lx kz oc od lz ld oe of mb lh og oh md oi bi translated">参考</h2><p id="0404" class="pw-post-body-paragraph kq kr jb ks b kt mf kc kv kw mg kf ky kz mh lb lc ld mi lf lg lh mj lj lk ll ij bi translated"><a class="ae oj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator" rel="noopener ugc nofollow" target="_blank"> Mozilla网络文档</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>The Bad Parts of JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript不好的地方</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-bad-parts-of-javascript-fdfa37b8cad3?source=collection_archive---------4-----------------------#2020-06-06">https://javascript.plainenglish.io/the-bad-parts-of-javascript-fdfa37b8cad3?source=collection_archive---------4-----------------------#2020-06-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/65e3fdbf1c6fb386377fded46ada773f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2RkYcc5etfnt1Csp"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tadekl?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tadeusz Lakota</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2bea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上最流行的编程语言之一。它可以做很多事情，并且有一些领先于许多其他语言的功能。</p><p id="ef50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看JavaScript中应该避免的不好的部分。</p><h1 id="0c19" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">全局变量</h1><p id="4ac6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">全局变量是我们绝对应该避免的。</p><p id="f0f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用内置的全局变量，如现有的属性<code class="fe me mf mg mh b">window</code>、<code class="fe me mf mg mh b">Array</code>、<code class="fe me mf mg mh b">String</code>等。</p><p id="6d38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们不应该修改它们或给它们添加任何东西。</p><p id="8f3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们不应该定义自己的全局变量。</p><p id="da6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们将自己的成员添加到现有的全局构造函数中，人们会看到意想不到的事情。</p><p id="3476" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们添加新的全局变量，那么可能会导致意外的赋值和命名冲突。</p><p id="1141" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不希望这种情况发生。</p><p id="187b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当程序变得更大时，这些将成为更大的问题。</p><p id="f3f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用几种方法声明全局变量。我们可以在顶层使用<code class="fe me mf mg mh b">var</code>关键字:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c81" class="mq lc iq mh b gy mr ms l mt mu">var foo = 'bar';</span></pre><p id="8e65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以在<code class="fe me mf mg mh b">window</code>对象中创建新的属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="78b3" class="mq lc iq mh b gy mr ms l mt mu">window.foo = 'bar';</span></pre><p id="6bbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不使用严格模式，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="05af" class="mq lc iq mh b gy mr ms l mt mu">foo = 'bar';</span></pre><p id="6d30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这应该使学习JavaScript更容易，但忘记声明变量是我们应该避免的，而不是让人们无意中声明变量。</p><h1 id="c699" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">范围</h1><p id="3f91" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在引入<code class="fe me mf mg mh b">let</code>和<code class="fe me mf mg mh b">const</code>之前，JavaScript没有块范围的变量。</p><p id="e840" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，既然有了，就要一直用。</p><p id="9c00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">块范围的变量数据是一种已经丢失了很长时间的东西。</p><p id="ea87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是现在我们有了它，我们应该在任何地方使用它们。</p><p id="1ce5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1148" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  let a = 1;<br/>  const b = 2;<br/>  //...<br/>}</span></pre><p id="dcb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7998" class="mq lc iq mh b gy mr ms l mt mu">if (foo) {<br/>  let a = 1;<br/>  const b = 2;<br/>  //...<br/>}</span></pre><p id="25a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b658" class="mq lc iq mh b gy mr ms l mt mu">switch (foo) {<br/>  case 1: {<br/>    let a = 1;<br/>    const b = 2;<br/>    //...<br/>    break;<br/>  }<br/>  //...<br/>}</span></pre><p id="a429" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2990" class="mq lc iq mh b gy mr ms l mt mu">while (foo) {<br/>  let a = 1;<br/>  const b = 2;<br/>  //...<br/>}</span></pre><p id="8147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe me mf mg mh b">a</code>和<code class="fe me mf mg mh b">b</code>将总是仅在块内可用。</p><p id="30ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有理由不使用它们。</p><h1 id="7fcc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">分号插入</h1><p id="f74f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript将尝试在它认为有意义的地方添加分号。</p><p id="21f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们不应该依赖于此。</p><p id="99ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这会导致严重的错误。</p><p id="f59c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e8e" class="mq lc iq mh b gy mr ms l mt mu">return <br/>{  status: true };</span></pre><p id="f765" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个函数中，那么这个函数将返回<code class="fe me mf mg mh b">undefined</code>。</p><p id="bcd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript将此视为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e792" class="mq lc iq mh b gy mr ms l mt mu">return;<br/>{  status: true };</span></pre><p id="34a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们应该小心不要让JavaScript为我们添加分号。</p><p id="6ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f9c2" class="mq lc iq mh b gy mr ms l mt mu">return {  <br/>  status: true <br/>};</span></pre><h1 id="8974" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">保留字</h1><p id="c776" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript中有许多不用的保留字。像<code class="fe me mf mg mh b">enum</code>、<code class="fe me mf mg mh b">transient</code>、<code class="fe me mf mg mh b">throws</code>这样的单词都是保留字，但是它们在语言中没有任何特性。</p><p id="d41f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保留字不能用作变量或参数名。当保留字用于对象文字中的键时，它们必须被加上引号。</p><p id="a2ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们不能与点符号一起使用。</p><p id="2729" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们必须写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f2c8" class="mq lc iq mh b gy mr ms l mt mu">obj['enum'] = 'foo';</span></pre><p id="c6b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="959c" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  'enum': 'foo'<br/>};</span></pre><h1 id="d459" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">统一码</h1><p id="6370" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript字符是16位。这意味着它被限制为65536个字符。</p><p id="f066" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">剩下的几百万个字符表示为一对字符。</p><p id="ea63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着，如果我们需要将它们输出到其他地方，我们可能必须将它们转换成正确的形式。</p><h1 id="fa2c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类型of</h1><p id="3fcc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">typeof</code>大多只对原始值有用。</p><p id="7808" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="884f" class="mq lc iq mh b gy mr ms l mt mu">typeof 1</span></pre><p id="f2ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">'number'</code>。</p><p id="c18a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">typeof</code>的问题在于测试<code class="fe me mf mg mh b">null</code>和对象的类型。</p><p id="dc27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，<code class="fe me mf mg mh b">typeof null</code>返回<code class="fe me mf mg mh b">'object'</code>，这是不正确的。</p><p id="549c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们不能用<code class="fe me mf mg mh b">typeof</code>来检查<code class="fe me mf mg mh b">null</code>。</p><p id="9bb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该使用<code class="fe me mf mg mh b">===</code>操作符来检查<code class="fe me mf mg mh b">null</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b306" class="mq lc iq mh b gy mr ms l mt mu">foo === null</span></pre><p id="fe9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe me mf mg mh b">typeof</code>的另一个问题是当我们测试对象时。</p><p id="a923" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能用它来区分不同种类的物体或<code class="fe me mf mg mh b">null</code>。</p><p id="e529" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9cd1" class="mq lc iq mh b gy mr ms l mt mu">typeof []</span></pre><p id="88a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bb4e" class="mq lc iq mh b gy mr ms l mt mu">typeof {}</span></pre><p id="e573" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">双双返回<code class="fe me mf mg mh b">'object'</code>。</p><p id="9794" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有<code class="fe me mf mg mh b">typeof /a/</code>，我们可能会得到<code class="fe me mf mg mh b">'object'</code>或<code class="fe me mf mg mh b">'function'</code>，这取决于浏览器。</p><p id="e515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe me mf mg mh b">typeof</code>对于检查<code class="fe me mf mg mh b">null</code>或任何其他种类的对象都不是很有用。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/549f5ff00874f9d8f2878b4d864c5dd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G4oLihnXPrqVN2J1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ashleyjurius?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ashley Jurius</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e6a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="76c9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该避免使用最新版本但不应该使用的JavaScript。</p><p id="e43f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这包括声明全局变量和扩充现有的全局变量。</p><p id="e080" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该坚持使用被限制在块中的块范围的变量。</p><p id="76eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这消除了变量存在之前就被创建的许多混乱。</p><p id="a1a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">typeof</code>操作符对于检查对象类型也不是很有用。</p><h2 id="a8cf" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated"><strong class="ak">说白了</strong></h2><p id="0338" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">来表达一些爱吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Interview Questions — Tricky Questions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript面试问题——棘手的问题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-interview-questions-tricky-questions-cff030f69a49?source=collection_archive---------0-----------------------#2020-05-05">https://javascript.plainenglish.io/javascript-interview-questions-tricky-questions-cff030f69a49?source=collection_archive---------0-----------------------#2020-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e2cfb639889aa6654d52c315c699f091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-jkBxa5Mdo-NSZBa"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@helloimnik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hello I'm Nik 🇬🇧</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="05dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了得到一份前端开发人员的工作，我们需要搞定编码面试。</p><p id="5066" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看各种各样可能会让任何人困惑的问题。</p><h1 id="5f5d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">意外的全局变量创建</h1><p id="d999" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在下面的代码片段中，控制台日志中记录的值是什么？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1c97" class="mn lc iq mj b gy mo mp l mq mr">function foo() {<br/>  let a = b = 0;<br/>  a++;<br/>  return a;<br/>}</span><span id="4c43" class="mn lc iq mj b gy ms mp l mq mr">foo();</span><span id="a1bc" class="mn lc iq mj b gy ms mp l mq mr">console.log(typeof a);<br/>console.log(typeof b);</span></pre><p id="2d3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">typeof a</code>应该返回<code class="fe mt mu mv mj b">'undefined'</code>所以第一个<code class="fe mt mu mv mj b">console.log</code>是<code class="fe mt mu mv mj b">'undefined'</code>。</p><p id="fc28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，自<code class="fe mt mu mv mj b">b</code>以来的第二个<code class="fe mt mu mv mj b">console.log</code>日志<code class="fe mt mu mv mj b">'number'</code>是一个全局变量。</p><p id="9989" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要让<code class="fe mt mu mv mj b">let</code>关键字欺骗了我们，<code class="fe mt mu mv mj b">b</code>仍然是一个全局变量，因为它前面没有关键字。</p><p id="95a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">b = 0</code>同<code class="fe mt mu mv mj b">window.b = 0</code>。</p><p id="b44c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了避免这种棘手的情况，通过在out代码的顶部添加<code class="fe mt mu mv mj b">'use strict'</code>来使用严格模式。然后我们会得到错误'<code class="fe mt mu mv mj b">b</code>未定义'。</p><p id="4892" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模块总是使用严格模式，所以这不是问题。</p><h1 id="aba6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数组长度属性</h1><p id="37ee" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">控制台日志的最后一行在下面的代码中显示了什么？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="283d" class="mn lc iq mj b gy mo mp l mq mr">const fruits = ['apple', 'orange'];<br/>fruits.length = 0;</span><span id="9d33" class="mn lc iq mj b gy ms mp l mq mr">fruits[0];<br/>console.log(fruits[0])</span></pre><p id="47ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们将<code class="fe mt mu mv mj b">fruits</code>的<code class="fe mt mu mv mj b">length</code>属性设置为0，清空数组，所以<code class="fe mt mu mv mj b">console.log</code>应该显示<code class="fe mt mu mv mj b">undefined</code>。</p><p id="74ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<code class="fe mt mu mv mj b">fruits</code>成为空数组集，将其<code class="fe mt mu mv mj b">length</code>设置为0。</p><p id="f811" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们显示<code class="fe mt mu mv mj b">undefined</code>。</p><h1 id="89b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">棘手的数字数组</h1><p id="4dd8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">控制台在日志下面的代码片段中记录了什么？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="015e" class="mn lc iq mj b gy mo mp l mq mr">const length = 4;<br/>const numbers = [];<br/>for (var i = 0; i &lt; length; i++); {<br/>  numbers.push(i + 1);<br/>}</span><span id="a21f" class="mn lc iq mj b gy ms mp l mq mr">console.log(numbers);</span></pre><p id="add5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">numbers</code>数组应该是<code class="fe mt mu mv mj b">[5]</code>，因为<code class="fe mt mu mv mj b">i</code>在没有运行任何东西的情况下递增，因为我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e811" class="mn lc iq mj b gy mo mp l mq mr">for (var i = 0; i &lt; length; i++);</span></pre><p id="420e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0918" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  numbers.push(i + 1);<br/>}</span></pre><p id="49f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们有一个<code class="fe mt mu mv mj b">for</code>循环，它除了增加<code class="fe mt mu mv mj b">i</code>之外什么也不做，还有一个块将<code class="fe mt mu mv mj b">i + 1</code>推到<code class="fe mt mu mv mj b">numbers</code>。</p><p id="f09e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">var</code>关键字使<code class="fe mt mu mv mj b">i</code>在<code class="fe mt mu mv mj b">for</code>循环之外可用。因此，我们可以推<code class="fe mt mu mv mj b">i + 1</code>，它是5，因为<code class="fe mt mu mv mj b">i</code>是4。</p><p id="772a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，<code class="fe mt mu mv mj b">numbers</code>就是<code class="fe mt mu mv mj b">[5]</code>。</p><p id="86ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们用<code class="fe mt mu mv mj b">let</code>替换<code class="fe mt mu mv mj b">var</code>，那么我们就不会有这个问题，因为当我们推的时候会得到一个错误，因为<code class="fe mt mu mv mj b">i</code>在<code class="fe mt mu mv mj b">for</code>循环之外是不可用的。</p><h1 id="bb5b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自动分号插入</h1><p id="4a2d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">控制台日志的最后一行显示什么？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7996" class="mn lc iq mj b gy mo mp l mq mr">function foo(item) {<br/>  return<br/>    [item];<br/>}</span><span id="514b" class="mn lc iq mj b gy ms mp l mq mr">console.log(foo(5));</span></pre><p id="f6c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该显示<code class="fe mt mu mv mj b">undefined</code>，因为我们运行<code class="fe mt mu mv mj b">return</code>没有返回任何内容，因为在JavaScript的最后一行自动插入了一个分号。</p><p id="270a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">[item]</code>是故不曾然。</p><p id="bfe0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了确保我们不会犯这样的错误，我们应该将我们返回的任何内容放在与<code class="fe mt mu mv mj b">return</code>关键字相同的行上。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3babe2ba72d4e81ec0abadf06f4b86af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l0d5Jh7KgOsyv4AH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@dylanjohn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dylan Collette</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a872" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">巧妙的收尾</h1><p id="cc8d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">控制台中显示的以下代码是什么？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="702c" class="mn lc iq mj b gy mo mp l mq mr">let i;<br/>for (i = 0; i &lt; 5; i++) {<br/>  const log = () =&gt; {<br/>    console.log(i);<br/>  }<br/>  setTimeout(log, 100);<br/>}</span></pre><p id="5d71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码应该记录<code class="fe mt mu mv mj b">5</code>五次，因为<code class="fe mt mu mv mj b">setTimeout</code>在<code class="fe mt mu mv mj b">for</code>循环完成后运行<code class="fe mt mu mv mj b">log</code>函数。</p><p id="3f3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">setTimeout</code>是异步的，所以它在事件循环中排队，并在所有同步代码完成运行时运行。</p><p id="358c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，首先<code class="fe mt mu mv mj b">for</code>循环运行并创建一个新的<code class="fe mt mu mv mj b">log</code>函数，该函数捕获变量<code class="fe mt mu mv mj b">i</code>。</p><p id="ccfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe mt mu mv mj b">setTimeout</code>安排它在<code class="fe mt mu mv mj b">for</code>循环完成后运行。</p><p id="7c5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当<code class="fe mt mu mv mj b">i</code>为5时，循环结束后运行<code class="fe mt mu mv mj b">log</code>功能。</p><p id="8dac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">100毫秒后，5个预定的<code class="fe mt mu mv mj b">log</code>回调被<code class="fe mt mu mv mj b">setTimeout</code>调用。</p><p id="a1d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">log</code>读取<code class="fe mt mu mv mj b">i</code>的当前值，即5，并以该值运行<code class="fe mt mu mv mj b">log</code>。</p><p id="644c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过将<code class="fe mt mu mv mj b">i</code>传入<code class="fe mt mu mv mj b">log</code>来解决这个问题，这样当前正在循环的<code class="fe mt mu mv mj b">i</code>的值就保存在<code class="fe mt mu mv mj b">log</code>中，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4bd2" class="mn lc iq mj b gy mo mp l mq mr">let i;<br/>for (i = 0; i &lt; 5; i++) {<br/>  const log = (i) =&gt; {<br/>    console.log(i);<br/>  }<br/>  setTimeout(log, 100, i);<br/>}</span></pre><p id="d597" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数传递到<code class="fe mt mu mv mj b">setTimeout</code>之后的所有参数都被传递到回调函数中，并可通过参数进行访问。</p><h1 id="2fab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="545d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该注意在脚本中意外创建全局变量。任何没有关键字的变量都是全局变量。</p><p id="41e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以在JavaScript中创建没有块的循环，所以要注意不要在右括号和左花括号之间插入分号。</p><p id="8fdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们想要返回一个值时，我们应该把它放在关键字<code class="fe mt mu mv mj b">return</code>之后。</p><p id="cc2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，如果我们希望在循环中调用<code class="fe mt mu mv mj b">setTimeout</code>时在<code class="fe mt mu mv mj b">setTimeout</code>回调中有一个值，那么我们应该将它传递到回调中，这样当前的循环值就被保留了。</p><h2 id="fe8d" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简明英语笔记</h2><p id="f12a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一个关注来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kf ir">JavaScript in Plain English</strong></a><a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a><a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a><a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="1eac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
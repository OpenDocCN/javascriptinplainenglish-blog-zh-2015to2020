<html>
<head>
<title>How A Single JavaScript Library Can Break The Internet In Two Lines Of Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个JavaScript库如何用两行代码就能攻破互联网</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-a-single-javascript-library-can-break-the-internet-in-two-lines-of-code-1f47936a499c?source=collection_archive---------4-----------------------#2020-06-01">https://javascript.plainenglish.io/how-a-single-javascript-library-can-break-the-internet-in-two-lines-of-code-1f47936a499c?source=collection_archive---------4-----------------------#2020-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5aa2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以及从这个和以前的案例中学到了什么</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/57fcd14fab31d7230bf03fe7607f0b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f-L67kmURDspVPg1"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@rojekilian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sarah Kilian</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2eb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几乎每个开发JavaScript的人都知道2016年的“未发布灾难”，一名开发人员<a class="ae kv" href="https://www.theregister.co.uk/2016/03/23/npm_left_pad_chaos/" rel="noopener ugc nofollow" target="_blank">从NPM撤回了他所有的库，并破坏了互联网</a>。如果你从来没有听说过它，读一读吧，我们所依赖的东西是多么的脆弱，这真令人着迷。</p><p id="482b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这个故事是关于一个更近的案例，四月的“泄密灾难”。这篇文章的作者实际上在媒体上发表了一篇关于这个案件<a class="ae kv" href="https://medium.com/javascript-in-plain-english/is-promise-post-mortem-cab807f18dcc" rel="noopener">的很好的事后分析，我强烈建议你阅读那篇文章。</a></p><p id="cad9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也有新闻文章(<a class="ae kv" href="https://www.zdnet.com/article/another-one-line-npm-package-breaks-the-javascript-ecosystem/" rel="noopener ugc nofollow" target="_blank">这一篇</a>举例)描述实际问题，但总结一下:</p><p id="8707" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">isPromise是一个JavaScript库，在数百万个项目中直接或间接使用，当一个错误的更新破坏了它时，许多其他程序会直接响应。这包括像Angular，Firebase和许多其他的大公司。</p><h1 id="edb5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">固定您的版本号并手动检查升级</h1><p id="b3b6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">虽然这对于像2016年那样的完全不公开没有任何作用，但它可以完全防止这种情况。这正是版本锁定的目的，你告诉NPM你想要哪个确切的版本，只有当有真正的理由升级时才升级。</p><p id="2481" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，只有在经过全面测试后，您才会将更新推送到您自己的服务器上。</p><p id="737b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就产生了相反的问题，每当有一个安全更新修复了不一定出现在每个人的雷达上的关键漏洞时——但我觉得这可以通过警告和例如Github的仓库漏洞扫描来规避。</p><p id="68cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有版本控制，你就把对你代码的完全控制权交给了互联网上的陌生人，通过版本控制，你可以用你的自由换回来，并付出额外的责任。由于在许多包和程序的构建阶段经常出现多少警告，很容易漏掉一些，这是将警告视为错误的一个很好的理由——但那完全是另一个话题了。我觉得从长远来看，版本锁定带来的麻烦最少。</p><h1 id="77e0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">依赖是危险的捷径</h1><p id="a7ad" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">长期以来，科技世界已经变得太大，以至于无法自己构建一切，一切都以这样或那样的方式依赖于其他事物。也就是说，“我真的需要导入这个吗？”这个问题是有价值的—有问题的包归结起来只有两行代码。</p><p id="aab0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也就是说，这两行代码非常复杂，包括错误检查和bool类型转换，可以很容易地扩展到更多行代码中——有时您会爱上现代语法。</p><p id="ac7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以这总是一个权衡——如果你开发非常重要的应用程序，就值得更彻底地考虑这个问题。在业余爱好水平的项目中，你可能会花几个小时处理一个坏的构建——但是如果这是其他人工作所依赖的东西，你很快就会浪费大量的时间和金钱，甚至可能产生威胁生命的问题。</p><p id="0f9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有人还记得华盛顿州911服务中断是由一个路由呼叫的小服务器引起的吗？</p><h1 id="9daf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">这是一个巨大的攻击媒介</h1><p id="213f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">虽然这可能是显而易见的，但也应该特别注意:如果有人设法将任何一种未被检测到的后门程序溜进包管理器更新中，我们可以肯定成千上万的项目将自愿导入该代码。</p><p id="8def" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次强调:随着互联网和技术世界的发展，没有真正的方法来检查所有的东西，尤其是那些你的依赖关系所依赖的东西。</p><p id="768e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望大公司项目中使用的直接依赖关系在升级之前得到验证，但我也在IT部门工作过，知道事情经常被忽略，直到出了问题——这可能为时已晚。</p><h1 id="cc70" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">代码的重要部分可能在任何时候变得不可维护</h1><p id="55f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">根据我最近读到的一篇文章，CoreJS的维护者刚刚<a class="ae kv" href="https://www.theregister.co.uk/2020/03/26/corejs_maintainer_jailed_code_release/" rel="noopener ugc nofollow" target="_blank">因车辆过失杀人而入狱</a>——使得他的图书馆无人维护。</p><p id="6e14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有汉斯·赖泽，他<a class="ae kv" href="https://en.wikipedia.org/wiki/Hans_Reiser" rel="noopener ugc nofollow" target="_blank">在构建了一个包含在Linux内核中的文件系统后，因公然谋杀</a>而入狱。</p><p id="5a87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然这些都是制造新闻的案例，但总是值得考虑您导入的代码背后的人:他们是人，可以对他们的代码做或不做他们想做的事情。</p><p id="ce4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能会造成一个大问题，也许不是一开始，但一旦你需要升级或加固组件，而没有人在另一端更新或修复任何东西，这肯定会造成问题。这就是为什么福克斯被创造出来，然后由一个人来维护，这只是把问题转移给下一个人。</p><h1 id="77ef" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">归根结底，包管理器仍然是天赐之物</h1><p id="4bd2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果没有包管理器、库和标准化代码，任何从事编程或IT工作的人都不会有今天的成就。</p><p id="98b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它有自己的问题、怪癖和明显的危险，但从好的方面来看，它每周——实际上是每天——为我们节省了几个小时的时间，并将整个世界提前了几光年。</p><p id="9330" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有这些在netlify上的静态网站的一键安装，数以千计的初学者项目和你曾经建立的几乎任何东西——它们都依赖于进口的第三方代码。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="3083" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章能让你思考我们的科技世界到底有多脆弱，即使每个人都尽了最大努力，事情还是会变得不可收拾。</p><h2 id="3c4e" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated"><strong class="ak">用简单英语写的便条</strong></h2><p id="4e5a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你知道我们推出了一个YouTube频道吗？我们制作的每个视频都旨在教给你一些新的东西。点击<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">点击</strong> </a>查看我们，并确保订阅该频道😎</p></div></div>    
</body>
</html>
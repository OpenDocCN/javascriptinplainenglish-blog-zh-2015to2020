<html>
<head>
<title>React Localization and Internationalization with react-i18n</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React-i18n进行react本地化和国际化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-localization-and-internationalization-with-react-i18n-3045aee346e7?source=collection_archive---------4-----------------------#2020-08-13">https://javascript.plainenglish.io/react-localization-and-internationalization-with-react-i18n-3045aee346e7?source=collection_archive---------4-----------------------#2020-08-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/cc706d82f177fdaa81e2c0260cf7fb74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fGI1qWMkTJgUpQAy"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jesuskiteque?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jesus Kiteque</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1961" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果一个网站要被不同国籍的人访问，那么肯定需要将网站提升到一个新的水平，并提供更多的语言版本。</p><p id="89b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是为什么在这篇文章中，我非常乐意讨论一个叫做国际化的话题。</p><p id="0681" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们考虑一个英语网站，我们被要求提供葡萄牙语。我们需要准备好必要的翻译。现在需要让他们有能力用他们的母语来写文章。</p><p id="df71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在进入内容之前，让我们对以下主题有一个清晰的概念。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="a2cd" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">国际化</strong></h1><p id="5bf3" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">在这个过程中，应用程序被设计成无需工程更改就能适应多种语言和地区。</p><h2 id="fdb7" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">什么是react-i18next？</strong></h2><p id="a221" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">最初让我们了解一下react-i18next是什么。正是基于<strong class="kc io"> <em class="mu"> i18next </em> </strong>的强大框架，被很多开发者用于国际化的目的。这个可以用在<strong class="kc io"> React和React-Native中。</strong>由于这个框架是最佳的，它最适合服务器端呈现，它包括多个组件，以便在更改语言时呈现内容。它提供了从web到移动平台和基于web的应用程序平台的产品本地化的完整解决方案。</p><h2 id="3dfb" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">react-i18的优点下一个</strong></h2><p id="8c27" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">它包括多个插件，检测用户友好的各种语言并加载多种语言的翻译。</p><p id="ce67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它有一个显著的优点，就是可以选择缓存翻译，并且提供了使用其他包的灵活性。</p><p id="104b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为它对最新的react特性的适应速度很快，大多数React开发人员似乎都喜欢并使用react-i18next，而不是其他库。</p><p id="5be4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它是一个高效的应用程序接口。</p><p id="4a29" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们用react-i18next和React hooks开发一个React国际化应用程序</p><h2 id="3257" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">文件的要点</strong></h2><ul class=""><li id="ada2" class="mv mw in kc b kd md kh me kl mx kp my kt mz kx na nb nc nd bi translated">用<strong class="kc io"><em class="mu">create-React-app</em></strong>创建一个新的React应用</li><li id="18c5" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">选择首选语言</li><li id="e57d" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">英语</li><li id="8fa5" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">僧伽罗语</li><li id="cd76" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">泰米尔人</li><li id="9d29" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">react-i18n和其他依赖项的安装</li><li id="ca40" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">创建提供商</li><li id="7536" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">用<strong class="kc io"> <em class="mu">格式化消息</em> </strong> <em class="mu"> </em>包装器让生活更简单</li><li id="2509" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">演示</li><li id="4346" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">单元测试</li></ul><h2 id="5920" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">创建一个新的React应用程序</strong></h2><p id="f682" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">让我们使用节点包管理器(npm)创建一个React应用程序。使用以下命令</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="4716" class="mi lg in no b gy ns nt l nu nv">npx create-react-app react-translation-app</span></pre><p id="e0b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">React应用程序可以使用任何名称。</p><p id="b34a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">成功创建应用程序后，进入项目文件夹，即react-translation-app:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="649b" class="mi lg in no b gy ns nt l nu nv">cd react-translation-app</span></pre><p id="18fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在visual studio代码<strong class="kc io">中打开项目(您可以使用任何其他编辑器)</strong></p><h2 id="5264" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">安装</strong></h2><p id="6b8e" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">让我们安装应用程序所需的所有依赖项。使用以下命令并执行。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="5cee" class="mi lg in no b gy ns nt l nu nv">npm install i18next react-i18next i18next-xhr-backend</span><span id="d40e" class="mi lg in no b gy nw nt l nu nv">npm install i18next-browser-languagedetector</span></pre><p id="274f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在src文件夹中创建一个名为<strong class="kc io"> i18next.js </strong>的JavaScript文件。</p><p id="f38c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<strong class="kc io"> i18next.js </strong>文件，并:</p><ul class=""><li id="8a54" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">导入所有需要的模块，如下所述</li></ul><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="f7f1" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">现在我们已经准备好初始化语言和其他功能</li><li id="d89d" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">创建一组在整个应用程序中实现的语言</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="a2ac" class="mi lg in no b gy ns nt l nu nv">const Languages = [“en”, “sin”, “ta”];</span></pre><p id="2e22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们使用了英语、僧伽罗语和泰米尔语。</p><ul class=""><li id="b357" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">创建一个导出默认函数为<strong class="kc io"> <em class="mu"> i18n </em> </strong></li><li id="3621" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">添加以下代码</li></ul><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="7966" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">使用(后端):</strong> —识别用户输入语言</p><p id="53ec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">使用(LanguageDetector):- </strong>将i18n实例传递给react-i18next的模块</p><p id="3de5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">use(initreact 18 next):</strong>—i18 next的实例化。</p><p id="43fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">fallbackng:" en ":-</strong>默认语言为英语</p><p id="b1f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<strong class="kc io"> index.js </strong>文件并</p><ul class=""><li id="b249" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">导入<strong class="kc io"> i18next.js </strong>文件</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="48c5" class="mi lg in no b gy ns nt l nu nv">import “./i18next”;</span></pre><p id="e3ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里是入口点</p><ul class=""><li id="04c9" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">让我们插入React提供的悬挂特性。所以，导入悬念如下</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="a640" class="mi lg in no b gy ns nt l nu nv">import React, { Suspense } from “react”;</span></pre><h2 id="2415" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">为什么要卖关子？</strong></h2><p id="8d09" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">通常，这是组件从缓存加载数据时暂停呈现的一种通用方式。</p><p id="3689" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当考虑到较差的连接时，它提供了对在何处显示占位符的完全控制。</p><ul class=""><li id="7d35" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">让我们用react悬念来包装<App/>标签</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="d086" class="mi lg in no b gy ns nt l nu nv">&lt;Suspense fallback={&lt;div&gt;Loading ……&lt;/div&gt;}&gt;</span><span id="6ffa" class="mi lg in no b gy nw nt l nu nv">&lt;App /&gt;</span><span id="856c" class="mi lg in no b gy nw nt l nu nv">&lt;/Suspense&gt;</span></pre><p id="450d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<strong class="kc io"> App.js </strong>文件，并:</p><ul class=""><li id="d371" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">删除返回语句中的现有代码</li><li id="d8e8" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">从<strong class="kc io"> react-i18n </strong>模块导入<code class="fe oc od oe no b">useTranslation</code>函数</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="75d5" class="mi lg in no b gy ns nt l nu nv">import { useTranslation } from “react-i18next”;</span></pre><p id="e8a3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">添加将在return语句中呈现的以下代码片段</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="6716" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">初始化App函数中的useTranslation函数</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="d79d" class="mi lg in no b gy ns nt l nu nv">const { t, i18n } = useTranslation();</span></pre><p id="dc65" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，它接收<strong class="kc io"> t </strong>作为函数和一个<strong class="kc io"> i18n </strong>的实例</p><ul class=""><li id="1557" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">让我们定义一个函数handleClick</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="3802" class="mi lg in no b gy ns nt l nu nv">function handleClick(lang) {</span><span id="11d4" class="mi lg in no b gy nw nt l nu nv">     i18n.changeLanguage(lang);</span><span id="2fc0" class="mi lg in no b gy nw nt l nu nv">}</span></pre><p id="19cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们定义目标语言。</p><p id="db5a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开public文件夹，并在返回的locales中创建一个目录。</p><p id="e8ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开locales目录，分别创建en、sin和ta三个目录。</p><p id="f40f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">确保目录中提到的名称应该与下面给出的<strong class="kc io"> i18next.js </strong>文件中的名称相似:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="8eda" class="mi lg in no b gy ns nt l nu nv">const Languages = [“en”, “sin”, “ta”];</span></pre><p id="25c8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们为每个目录(即en、sin和ta目录)创建一个JSON文件。</p><p id="ca8b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将json文件命名为<strong class="kc io"> translation.json </strong>。</p><p id="4d47" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<em class="mu"> en </em>目录下的json文件，添加我们的自定义代码如下:</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="e727" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用任何可以呈现的信息</p><p id="145b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">类似地，打开<em class="mu"> sin </em>目录下的json文件，添加以下代码片段:</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="ab89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，将以下内容插入到<em class="mu"> ta </em>目录下的json文件中:</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="0601" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们运行React应用程序。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="cd97" class="mi lg in no b gy ns nt l nu nv">npm start serve</span></pre><p id="ee6a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们完了。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="a1cc" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">一种使用React和React-i18的语言中多个名称空间的方法下一步</strong></h2><p id="2d90" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">让我们考虑一下下面提到的语言是否有多个翻译名称空间</p><figure class="nj nk nl nm gt jo gh gi paragraph-image"><div class="gh gi of"><img src="../Images/326cdbbc70c4b1476dd30f3d29b13613.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/0*J-2u3jn1BBbJ3f5S"/></div></figure><p id="bcc3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在新创建的json文件中包含一些文本:</p><p id="6291" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> en/reactworld.json </strong></p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="756c" class="mi lg in no b gy ns nt l nu nv"><strong class="no io">{</strong></span><span id="6265" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">      “title”: “This is a basic example in english”</strong></span><span id="debb" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">}</strong></span></pre><p id="0951" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> sin/reactworld.json </strong></p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="ddc4" class="mi lg in no b gy ns nt l nu nv"><strong class="no io">{</strong></span><span id="c9eb" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">      “title”: “This is a basic example in sinhala”</strong></span><span id="e2af" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">}</strong></span></pre><p id="0ef9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> ta/reactworld.json </strong></p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="f677" class="mi lg in no b gy ns nt l nu nv"><strong class="no io">{</strong></span><span id="6e06" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">       “title”: “This is a basic example in tamil”</strong></span><span id="116a" class="mi lg in no b gy nw nt l nu nv"><strong class="no io">}</strong></span></pre><p id="a9cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在上述文件中连接你的例子</p><h2 id="72dc" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">通过实现react-i18n和缓存来定位图像</strong></h2><p id="3c0d" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">让我们创建一个react应用程序，根据目标语言对图像进行本地化。当点击不同的语言时，我们甚至改变图像，而不仅仅是释放文本。</p><p id="a1ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入内容。</p><p id="cdb2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mu">与上面的例子类似，让我们跳过安装和其他导入依赖项。一些文件和组件保持原样。</em></p><p id="29df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="kc io"> i18n.js </strong>文件中定义以下内容</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="4de2" class="mi lg in no b gy ns nt l nu nv">const fallbackLng = [‘en’];</span></pre><p id="f40e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果没有可用的语言。我们将只使用英语</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="4a99" class="mi lg in no b gy ns nt l nu nv">const availableLanguages = [‘en’, sin, ‘ta’];</span></pre><p id="a722" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我们需要指定用于翻译的可用语言。</p><p id="b295" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">添加以下代码:</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="f8b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查白名单:真</p><p id="6e28" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">仅检测白名单中的可用语言。</p><p id="0288" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们成功定义了<strong class="kc io"> i18n.js </strong>文件中的所有函数。</p><p id="fbc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在src文件夹中创建一个目录资产，然后确保将这三个图像添加到资产目录中的images文件夹中。</p><p id="6b7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">React团队建议将图像添加到src目录，而不是公共文件夹。</p><h2 id="25a5" class="mi lg in bd lh mj mk dn ll ml mm dp lp kl mn mo lt kp mp mq lx kt mr ms mb mt bi translated"><strong class="ak">为什么鼓励这样做？</strong></h2><ul class=""><li id="7b3d" class="mv mw in kc b kd md kh me kl mx kp my kt mz kx na nb nc nd bi translated">丢失文件可能会导致编译错误，而不是用户的404错误</li><li id="07dc" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">结果文件名包含内容哈希，所以不用担心浏览器会缓存它们的旧版本</li></ul><p id="de6c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<strong class="kc io"> App.js </strong>文件:</p><ul class=""><li id="ebca" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">删除返回语句中的现有代码</li><li id="2a90" class="mv mw in kc b kd ne kh nf kl ng kp nh kt ni kx na nb nc nd bi translated">从react-i18n模块导入useTranslation函数</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="a538" class="mi lg in no b gy ns nt l nu nv">import { useTranslation } from “react-i18next”;</span></pre><ul class=""><li id="56fb" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">导入React应用程序所需的以下模块</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="6280" class="mi lg in no b gy ns nt l nu nv">import i18next from “./i18n/i18next”;</span><span id="3e00" class="mi lg in no b gy nw nt l nu nv">import imgEng from “./assets/images/1.jpg”;</span><span id="96fb" class="mi lg in no b gy nw nt l nu nv">import imgSin from “./assets/images/2.jpg”;</span><span id="aab4" class="mi lg in no b gy nw nt l nu nv">import imgTa from “./assets/images/3.jpg”;</span></pre><ul class=""><li id="87a3" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">初始化App函数中的useTranslation函数</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="38e1" class="mi lg in no b gy ns nt l nu nv">const { t } = useTranslation();</span></pre><p id="44bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，它接收<strong class="kc io"> t </strong>作为函数和一个<strong class="kc io"> i18n </strong>的实例</p><ul class=""><li id="6d3f" class="mv mw in kc b kd ke kh ki kl nx kp ny kt nz kx na nb nc nd bi translated">让我们定义一个函数handleClick</li></ul><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="deb8" class="mi lg in no b gy ns nt l nu nv">function handleClick(lang) {</span><span id="4524" class="mi lg in no b gy nw nt l nu nv">        i18next.changeLanguage(lang);</span><span id="2d4b" class="mi lg in no b gy nw nt l nu nv">}</span></pre><p id="f6af" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">添加将在return语句中呈现的以下代码片段</p><figure class="nj nk nl nm gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="df21" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们定义目标语言。</p><p id="cfea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开public文件夹，并在返回的locales中创建一个目录。</p><p id="99cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开locales目录，分别创建en、sin和ta三个目录</p><p id="7e86" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">确保目录中提到的名称应该与下面给出的<strong class="kc io"> i18next.js </strong>文件中的名称相似。</p><p id="956a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mu"> const Languages = ["en "，" sin "，" ta "]；</em></p><p id="3aab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们在每个目录中创建一个JSON文件，即en、sin和ta目录。</p><p id="61bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将json文件命名为<strong class="kc io"> translation.json </strong>。</p><p id="37e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">打开<em class="mu"> en </em>目录下的json文件，添加我们的自定义代码如下</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="7d28" class="mi lg in no b gy ns nt l nu nv">{</span><span id="0584" class="mi lg in no b gy nw nt l nu nv">"Wish": {</span><span id="9b40" class="mi lg in no b gy nw nt l nu nv">    "text": "Thank you"</span><span id="424a" class="mi lg in no b gy nw nt l nu nv">  },</span><span id="c6f7" class="mi lg in no b gy nw nt l nu nv">"Message": {</span><span id="0d86" class="mi lg in no b gy nw nt l nu nv">    "text": "for Reading this article"</span><span id="7b13" class="mi lg in no b gy nw nt l nu nv">  }</span><span id="5ca1" class="mi lg in no b gy nw nt l nu nv">}</span></pre><p id="1b71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用任何可以呈现的信息。</p><p id="ec97" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，打开<em class="mu"> sin </em>目录下的json文件，添加以下代码片段:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="d1fb" class="mi lg in no b gy ns nt l nu nv">{</span><span id="1d2e" class="mi lg in no b gy nw nt l nu nv">"Wish": {</span><span id="3724" class="mi lg in no b gy nw nt l nu nv">      "text": "මෙම ලිපිය කියවීමට"</span><span id="ecc7" class="mi lg in no b gy nw nt l nu nv">  },</span><span id="1e87" class="mi lg in no b gy nw nt l nu nv">"Message": {</span><span id="c808" class="mi lg in no b gy nw nt l nu nv">     "text": "ස්තූතියි"</span><span id="5548" class="mi lg in no b gy nw nt l nu nv">  }</span><span id="278b" class="mi lg in no b gy nw nt l nu nv">}</span></pre><p id="2d01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，将以下内容插入到<em class="mu"> ta </em>目录下的json文件中:</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="c50a" class="mi lg in no b gy ns nt l nu nv">{</span><span id="39bc" class="mi lg in no b gy nw nt l nu nv">"Wish": {</span><span id="23ad" class="mi lg in no b gy nw nt l nu nv">    "text": "இந்த கட்டுரையைப் படித்ததற்கு"</span><span id="5f8d" class="mi lg in no b gy nw nt l nu nv">  },</span><span id="26c9" class="mi lg in no b gy nw nt l nu nv">"Message": {</span><span id="05a3" class="mi lg in no b gy nw nt l nu nv">    "text": "நன்றி"</span><span id="36fd" class="mi lg in no b gy nw nt l nu nv">  }</span><span id="7dd3" class="mi lg in no b gy nw nt l nu nv">}</span></pre><p id="3c4d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们运行React应用程序。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="20bd" class="mi lg in no b gy ns nt l nu nv">npm start serve</span></pre><p id="3a3c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们完了。</p></div></div>    
</body>
</html>
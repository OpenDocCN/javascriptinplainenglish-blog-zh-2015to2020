# Mint:一种专门为前端设计的全新编程语言

> 原文：<https://javascript.plainenglish.io/mint-a-fresh-language-designed-specifically-for-the-frontend-f2ad5cce9394?source=collection_archive---------0----------------------->

## 前端 Web 开发急需精简

![](img/4e775b760c282f7885db8a8fe74679f8.png)

Courtesy of Author

几周前，当我漫不经心地浏览我的 Twitter feed 时，我遇到了一个名为 [mint](https://www.mint-lang.com/) 的项目，它标榜自己是“专门为创建单页面应用程序而设计的语言”，这听起来很有趣，JavaScript 疲劳症开始发作，所以我做了更多的研究，觉得它很有前途。

Mint 试图将现代开发中的主要实践:函数式编程、不变性、静态类型、css-in-js 浓缩到一个紧密的开发人员体验中。

![](img/42cf64ece3c2f7c13a10f7e02e1c0b4d.png)

Mint’s website: [Mint (mint-lang.com)](https://www.mint-lang.com/)

我最终尝试了一下，建造了 fontofweb.com 的[](http://www.fontofweb.com)****，并愉快地使用了它。您需要多个库和您叔叔的狗来做的事情，可以通过最初的 mint 安装来实现。我相信拥有一种自以为是的语言，而不是必须决定用于路由和状态管理的库，是提供统一和直接的开发人员体验的一种很好的方式。****

****本文探讨了 mint 的一些主要特性，以及您为什么会感兴趣。****

****Mint 是一种编译成 JavaScript 的强类型语言，它试图通过对以下特性和更多特性的一流支持来简化 web 开发:****

1.  ****内置格式化程序****
2.  ****不可变数据结构****
3.  ****按指定路线发送****
4.  ****带有媒体查询的完整 CSS 样式****
5.  ****全局状态管理****
6.  ****JavaScript 互操作性****
7.  ****测试****
8.  ****非常快的编译时间。****

****Mint 在幕后使用 Preact[使它比 react 更快更轻。](https://www.mint-lang.com/blog/mint-0.8.0)****

****你可以在 MacOSX 和 Linux 上安装 Mint，如果你使用 windows，你需要使用 WSL。****

****安装后，您可以使用以下命令来初始化新项目:****

```
**mint init project-name**
```

****然后启动本地开发服务器:****

```
**cd project-name && mint start**
```

****![](img/22a13553c6f2c9750b9560d8500c1a25.png)****

****打开网页会发现:****

****![](img/fe9bbf167488599c9daf044a66dbc74c.png)****

****那么这是如何工作的呢？Mint 的文件夹结构是这样的:****

****![](img/4268d1fd804026965ccfd93c7b611790.png)****

****入口点文件是/source/Main.mint，其中包含以下代码:****

****![](img/a7ae6698c28c2b5bcc51da1f28579600.png)****

****让我们来解析一下:****

*   ****在 mint 中，组件是使用“component”关键字定义的。****
*   ****组件样式是使用“style”关键字定义的。与 React 不同，CSS 属性无需任何修改即可工作。****
*   ****像 React 类组件一样，mint 组件必须有一个 render 函数。我们稍后将讨论函数的细节。****
*   ****应用 CSS 样式是以这种格式完成的— **tagname::stylename。******

****我们如何指定多个样式？请继续阅读。现在，让我们来看看 mint 显著的语言特性。****

****Mint 作为一种静态类型语言在编译时进行类型检查。Mint 试图根据变量的创建和赋值来推断类型。它还保证没有运行时异常(如果您在没有 JavaScript interop 的情况下用纯 mint 编码)。****

****它编译成 JavaScript 并在后台使用 Preact 进行渲染。****

# ****数组、元组和记录****

****Mint 中的数组只能有一种类型，在数组文本中定义多种类型会引发编译错误。****

****![](img/a9ca6e0461abd6ba9ace7fd76f20fb92.png)****

****记录数据结构允许您声明类似于 typescript 中接口的对象形状。记录还带有一个构造函数，允许您创建记录的实例:****

****![](img/558f8803b10f9abdd206eba7e4a7345d.png)****

****Mint 中的 Tuple 数据结构有一个固定的结构，但是允许您定义多种数据类型。元组中的值没有可识别的名称，但是可以根据它们的位置进行识别和重构:****

****![](img/00fbe73f612b19de043757ae606c35ea.png)****

# ****不变****

****mint 中的所有类型都是不可变的，如果不创建一个新的变量，就不能修改已经定义的变量。因此，下面的代码不起作用:****

****![](img/0661fd39aeb6af5212c64e76648cbf3f.png)****

****通过创建一个新变量来实现上述目的:****

****![](img/0f269a4e5c0f0ffd264bd60416e51a38.png)****

# ****平等****

****Mint 中的大多数数据类型使用逻辑相等，这意味着只要类型的实例具有相同的值，它们就被认为是相等的:****

****![](img/20077d2686ff619e4f3758039ba113a0.png)****

****让我们试试更复杂的东西:****

****![](img/1fa522cc470bb14413c756dbc8c749a6.png)****

****这与使用引用相等的 JavaScript 相反。****

*******mint 里没有“===”运算符。*******

# ****枚举****

****Mint 中的枚举允许您用多个变量指定一个类型:****

****![](img/358d239d119b3a6845b2d46f069e83ba.png)****

****这些枚举可以使用 case 表达式进行匹配:****

****![](img/816f091d762a7e1b287464f03a86a5bb.png)****

****枚举也可以有与之关联的值类型:****

****![](img/8c52806afba730d9c038c790da137f0e.png)****

****应用这些知识，我们可以设计更复杂的函数，比如:****

****![](img/54405473f0a47c0640b9743dd270a60f.png)****

# ****功能****

****Mint 函数用恰当命名的关键字“fun”来定义。函数的一般格式如下:****

```
****fun functionName (...arguments): returnType { ...body }****
```

# ****创建函数的规则****

1.  ****mint 中没有 **return** 关键字，函数体中第一个也是唯一一个表达式被返回****
2.  ****函数名必须以小写字母开头，并且只能包含字母数字字符****
3.  ****函数参数必须指定类型，但不能指定返回类型。****
4.  ****没有参数的函数不需要括号。****
5.  ****函数必须有一个主体****
6.  ****匿名函数不需要有趣的关键字或名字****

****所以这些是有效的函数:****

****![](img/e3f814701508a99399f1fd779892f7b5.png)****

****这些不是:****

****![](img/21744d08e900463c31cb01113a1d09c9.png)****

****如果您对最后一个增量函数感到困惑，不知道如何在 mint 函数中使用多个语句，我可以理解您。****

****为了使 increment 函数工作，您可以使用一个 **where** 块来定义函数体中使用的变量:****

****![](img/0b58330069ec47141a97de2dd98013e8.png)****

## ****自动部分应用****

****部分应用和函数调用是函数编程中的两个重要概念，它们允许函数被延迟求值。它把一个有多个参数的函数变成需要较少参数的函数。****

****当您忽略一些参数时，Mint 中的所有函数都会自动部分应用:****

****![](img/2259516acbc6d11d1f5b2814e0dc0fad.png)****

****Mint 的管道运算符 **| >** 将左操作数表达式传递给右操作数函数的第一个参数。****

****![](img/2b6b505e3320f6b37dbee51f6a2f5c13.png)****

****没有管道也一样:****

****![](img/7b511bf85a1dd808c4f81b9e5ca0a313.png)****

# ****异步函数****

****异步函数只是具有承诺返回类型的函数。您通常不需要指定它，因为 Mint 会根据函数的内容自动推断它。****

## ****平行表达****

****并行表达式类似于 JavaScript 中的 Promise.all()函数。它允许其块中的异步操作并行运行。****

****![](img/c103ee9d5993d35c1f133f31fe1fbaad.png)****

## ****序列表达式****

****序列表达式按顺序运行其块中的操作，这在每个操作都依赖于前一个操作的结果的情况下很有用:****

****![](img/dba8a76bd648f0a58bd928ddc24fb792.png)****

# ****成分****

****在 Mint 中有两种定义组件的方法，第一种是通过使用**组件**关键字:****

****![](img/0476aa3ef14ce8680081e6e83c12a5e6.png)****

****第二种方法是简单地用内置的 **Html** 返回类型定义一个函数:****

****![](img/b2405889cc270a58b9af05996ba10695.png)****

# ****样式组件****

****用 **Style 块创建样式，**这些只能在用 **component** 关键字声明的组件中使用****

****将样式应用于以下格式的 Html 元素:****

```
**<element::style1::style2::styleN ></element>**
```

****像这样:****

****![](img/0c0df7445e9e767b9eb21f7dfdb6740b.png)********![](img/11433cd37e052f88721c8221522847fd.png)****

****样式声明的位置很重要，后面声明的样式会覆盖前面的样式，标记上样式赋值的位置无关紧要。****

****因此，以下代码仍然会导致文本为蓝色:****

****![](img/a1ee5f16b064c5251025c2ea88b65761.png)****

# ****样式参数****

****样式声明也可以像普通函数一样有参数:****

****![](img/8c408bd30d0600ad7b623a4f0432a74a.png)********![](img/9dc7fff17e1936c4302fba734c3f79f6.png)****

# ****条件样式****

****样式块支持 if 和 case 表达式:****

****![](img/ddfe1b8979befaaf9ff0b10d653a38b3.png)****

****上面的代码会给我们:****

****![](img/d9f1cfc4e09b772fc1198abaa8185355.png)****

# ****嵌套样式****

****样式可以相互嵌套，类似于 sass 嵌套[规则](https://sass-lang.com/documentation/style-rules)的工作方式:****

****![](img/e6b67499cc4b9663571296d9c0528b76.png)********![](img/dfde89ac676d8439624eabead16ace40.png)****

# ****内嵌样式和类别****

****内联样式也可用于直接设置元素的样式:****

****![](img/63e1475dd145ee49011a60a02bc72167.png)****

****Mint Html 元素也接受类:****

****![](img/0bcb88960b46fd0167e8227429e71989.png)****

****您可以在样式标签中指定 CSS，并通过更新 assets/head.html 导入外部 CSS 库:****

****![](img/46ac7d148ab00bdf723086d0b73be50e.png)****

# ****组件状态和属性****

****为了演示 mint 的状态和道具，下面是一个由你真正完成的计数器的实现:[https://sandbox.mint-lang.com/sandboxes/RCF62IZuxtxWfQ](https://sandbox.mint-lang.com/sandboxes/RCF62IZuxtxWfQ)****

****让我们来看一下按钮组件的主要部分:****

****![](img/ca0d5839b9e849af08d10b031fd72a2f.png)****

****组件属性是用 property 关键字定义的。注意，按钮组件只定义了三个属性:onClick、danger 和 title。只有 onClick 属性是必需的，因为它没有默认值。****

# ****呈现列表和条件呈现****

****Mint 元素可以呈现数组(Html ),所以这段代码可以工作:****

****![](img/3376f3d12b8663ac5e7f3d8f93db04fd.png)****

****您也可以使用一个**来代替 of** 表达式:****

****![](img/3be1a44ec31650068588141371263125.png)****

****假设您只想显示偶数:****

****![](img/767982ffcec9334f69447cb2cb8ac369.png)****

*****Notice that the Array.select takes two arguments; a function for testing each item, and another that accepts the array.*****

****另一种过滤偶数的方法是使用带有表达式的 **for 的 **when** 块:******

**![](img/6fee64cdd3a90cd66de4c1a26d95806d.png)**

**mint 中的条件呈现非常简单，类似于 react:**

**![](img/b54466815cf92af0bcfa77a0a7fa3a00.png)**

**需要注意的一件事:Html 必须在 render 函数中返回。如果您不想像这样使用 Html.empty()函数呈现任何内容:**

**![](img/24e9b804148464d204e000783ad0257f.png)**

**最后，我们将讨论模块。如果你已经注意到在整个教程中我们从来没有谈到进口，这是因为薄荷没有这个概念；所有 Mint 组件都是全局的，可以在项目范围内使用，其结果是任何顶级构造(如函数)都可以重新定位到任何深度的任何文件或文件夹，而不会出现问题。但这也意味着可能会发生名称冲突，为了避免这种情况，可以使用模块。**

**![](img/270e42ec4a3f88079e2f239288f88248.png)**

# **结论**

**Mint 非常有前途，它缺少一些可能使它成为严重大规模使用的交易破坏者的功能，如服务器端渲染、原生 windows 支持和 npm 库支持，但它非常适合个人项目。**

**查看 Mint 的[网站](https://www.mint-lang.com)**

**在 [github](https://github.com/scroobius-pip/stackoverflow-mint-tutorial-code/tree/master) 上查看本文中使用的代码**

**如果你看到了巨大的希望，并想为[回购](https://github.com/mint-lang/mint)做出贡献**

# **感谢阅读**
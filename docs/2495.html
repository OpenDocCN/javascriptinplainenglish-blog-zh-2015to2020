<html>
<head>
<title>Testing In React, Part 1: Types &amp; Tools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的测试，第1部分:类型和工具</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/testing-in-react-part-1-types-tools-244107abf0c6?source=collection_archive---------5-----------------------#2020-06-29">https://javascript.plainenglish.io/testing-in-react-part-1-types-tools-244107abf0c6?source=collection_archive---------5-----------------------#2020-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ff15f9cba8d14339c80486632a604bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSNTVzx8fuLW3_AstKStzw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@linalitvina?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Angelina Litvin</a> on <a class="ae jd" href="/s/photos/test-taking?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><blockquote class="kk kl km"><p id="f4e8" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">本文是React中测试系列的一部分:</p><p id="0e47" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><strong class="kq jh">React中的测试，第1部分:类型&amp;工具</strong></p><p id="90ab" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae jd" href="https://medium.com/javascript-in-plain-english/testing-in-react-part-2-react-testing-library-f32432b93c6c" rel="noopener">React中的测试，第2部分:React测试库</a></p><p id="1683" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae jd" href="https://medium.com/javascript-in-plain-english/testing-in-react-part-3-jest-jest-dom-7a8a03ae60b" rel="noopener">React中的测试，第3部分:Jest &amp; Jest-Dom </a></p><p id="9369" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae jd" href="https://medium.com/javascript-in-plain-english/testing-in-react-part-4-enzyme-9b030ad616ae" rel="noopener">React中的测试，第4部分:酶</a></p><p id="5c1e" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae jd" href="https://medium.com/@bryn.bennett/testing-in-react-part-5-end-to-end-testing-with-cypress-bd2bf8d3385f" rel="noopener">React中的测试，第5部分:使用Cypress的端到端测试</a></p><p id="6ef4" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae jd" href="https://medium.com/javascript-in-plain-english/testing-in-react-part-6-real-world-testing-with-react-testing-library-jest-enzyme-and-cypress-9c73436d95d8" rel="noopener">React中的测试，第6部分:React测试库、Jest、Enzyme和Cypress的真实测试</a></p></blockquote></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="5d30" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">在没有正式测试的情况下编写前端代码非常容易。与后端编程不同，在整个开发过程中，通过与用户界面的交互，您自然会不断地“测试”您的前端应用程序。如果您添加一个onClick处理程序，您会直观地在浏览器中单击该组件。当您创建一条新路线时，很可能您之后做的第一件事就是导航到这条路线。</p><p id="9939" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">这是一种测试形式，既必要又有帮助。然而，它服务于一个非常具体的目的。这种边做边测试的策略提供了一种确认，即代码库的确切版本中的确切步骤集将产生预期的结果。从这个意义上说，它是快速、高效和有效的，尽管有其局限性，但显然是必要的。</p><p id="4450" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">为您的接口编写正式测试有助于填补遗留的漏洞，其中一些是:</p><ul class=""><li id="faf8" class="lp lq jg kq b kr ks kv kw lm lr ln ls lo lt ll lu lv lw lx bi translated">确保代码<em class="kp">继续</em>以产生期望的结果，并且不会随着进一步的开发而中断。</li><li id="6e96" class="lp lq jg kq b kr ly kv lz lm ma ln mb lo mc ll lu lv lw lx bi translated">测试各种用例，而不仅仅是您执行的那个用例。</li><li id="236c" class="lp lq jg kq b kr ly kv lz lm ma ln mb lo mc ll lu lv lw lx bi translated">提醒你为什么代码以某种方式编写(处理挑剔的第三方包渲染，或者确保函数以正确的顺序完成，等等)。)</li></ul><p id="0f1d" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">我们都有过这样的经历——你最终为你添加的独特功能找到了解决方案，却发现以那种方式处理会破坏其他东西。这就是正式测试的用武之地。它可以确保你的应用程序继续按预期运行，并且可以帮你省去一大堆麻烦。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><h1 id="f418" class="md me jg bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">React中的测试类型</h1><p id="a758" class="pw-post-body-paragraph kn ko jg kq b kr nb kt ku kv nc kx ky lm nd lb lc ln ne lf lg lo nf lj lk ll ij bi translated">正如<a class="ae jd" href="https://reactjs.org/docs/testing.html" rel="noopener ugc nofollow" target="_blank"> React文档</a>所述，React组件的测试本质上有两种类型——渲染组件树和对应用的端到端测试。前者是特异反应，后者不是。然而，这两者在稳定的应用程序的生产中都很重要，所以我们将在这里讨论这两者。</p><p id="86eb" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">渲染组件树测试给定组件的输出。编写测试是为了模拟事件或渲染，预期的输出是“断言的”。然后将实际输出(在测试环境中)与断言的输出进行比较，测试通过或失败。</p><p id="c720" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">相比之下，端到端测试是在浏览器环境中进行的，从头到尾测试web应用程序的整个工作流程。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><h1 id="9e75" class="md me jg bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">React中的测试工具</h1><p id="5d9c" class="pw-post-body-paragraph kn ko jg kq b kr nb kt ku kv nc kx ky lm nd lb lc ln ne lf lg lo nf lj lk ll ij bi translated">就像现在编程中的所有事情一样，你可以选择测试。然而，React文档中推荐的两个工具是<a class="ae jd" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>和<a class="ae jd" href="https://testing-library.com/docs/react-testing-library/intro" rel="noopener ugc nofollow" target="_blank"> React测试库</a>。</p><p id="92a6" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">其他流行的测试工具包括<a class="ae jd" href="https://enzymejs.github.io/enzyme/" rel="noopener ugc nofollow" target="_blank">酶</a>、<a class="ae jd" href="https://developers.google.com/web/tools/puppeteer" rel="noopener ugc nofollow" target="_blank">木偶师</a>和<a class="ae jd" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank">柏树</a>。Cypress是专门面向端到端测试的，但是其他的可以单独使用或者结合使用来实现组件和端到端测试。</p><p id="f4fd" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">在这个系列中，我们将介绍React测试库、Jest和Cypress。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><h2 id="58ef" class="ng me jg bd mf nh ni dn mj nj nk dp mn lm nl nm mr ln nn no mv lo np nq mz nr bi translated">反应测试库</h2><p id="cb4f" class="pw-post-body-paragraph kn ko jg kq b kr nb kt ku kv nc kx ky lm nd lb lc ln ne lf lg lo nf lj lk ll ij bi translated">这个方便的库适合测试功能，它测试DOM节点而不是渲染React组件来完成这项工作。<a class="ae jd" href="https://testing-library.com/docs/react-testing-library/intro" rel="noopener ugc nofollow" target="_blank"> React测试库文档</a>声明其“主要指导原则是”:</p><blockquote class="kk kl km"><p id="f0b4" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">你的测试越像你的软件被使用的方式，它们就越能给你信心。</p></blockquote><p id="b4ce" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">React测试库是以前流行的酶库的替代品(这就是为什么我们不会在本系列中涉及它)。这里的主要思想是不仅模仿功能性，而且模仿用户体验——不是通过元素ID而是通过用户可以识别的任何东西来识别DOM节点，无论是输入的标签还是链接的显示文本。通过将测试的重点放在真正的UX而不是实现上，您的测试变得更加可靠，并且对未来的代码库更新更有弹性。</p><p id="d2d0" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">我想在这里花点时间说明这是一个<em class="kp">库</em>，而不是一个<em class="kp">框架</em>。如果你不熟悉这两者之间的区别，我建议你看看我之前的博客文章，其中有一个章节专门解释这一点。这意味着，你可以将React测试库和一个框架结合使用，比如Jest。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><h2 id="94bc" class="ng me jg bd mf nh ni dn mj nj nk dp mn lm nl nm mr ln nn no mv lo np nq mz nr bi translated">玩笑</h2><p id="9cdc" class="pw-post-body-paragraph kn ko jg kq b kr nb kt ku kv nc kx ky lm nd lb lc ln ne lf lg lo nf lj lk ll ij bi translated">由脸书开发的<a class="ae jd" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>是一个JavaScript测试框架，可以与最流行的JavaScript框架一起工作，包括React。用它自己的话说:</p><blockquote class="kk kl km"><p id="d21f" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">Jest是一个令人愉快的JavaScript测试框架，专注于简单性。</p></blockquote><p id="72cf" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">Jest通过使用类似于<code class="fe ns nt nu nv b">expect(var).toBe(val)</code>的语言使得测试React组件变得直观和可读。即使没有编程经验的人也知道我们期望<em class="kp"> var </em>等于<em class="kp"> val </em>。通过向package.json文件添加一个简单的脚本，您可以使用<code class="fe ns nt nu nv b">yarn test</code>或<code class="fe ns nt nu nv b">npm run test</code>运行这些测试。</p><p id="5975" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">这种语言可以集成到try/catch、async/await、promises和回调中来测试异步代码。它也可以用在模拟函数中。</p><p id="786a" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">此外，Jest使用快照测试来测试组件是否按预期呈现。通过在您的测试环境中伪创建一个组件，并将其转化为JSON树，您可以将该树与应用程序的快照进行比较，以确保它能够正确呈现。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><h2 id="c06a" class="ng me jg bd mf nh ni dn mj nj nk dp mn lm nl nm mr ln nn no mv lo np nq mz nr bi translated">柏树</h2><p id="1fc8" class="pw-post-body-paragraph kn ko jg kq b kr nb kt ku kv nc kx ky lm nd lb lc ln ne lf lg lo nf lj lk ll ij bi translated">Cypress是一个端到端的测试框架。Cypress测试的不是单个组件的渲染，而是web应用程序的整个流程。与测试渲染组件相比，这种测试更全面，但在工程工作方面成本也更高。</p><p id="ee33" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">Cypress提供了一个完整的仪表板以及调试工具，但值得注意的是，它是一个免费的定价工具。在这里，我不会过多地谈论它，因为这是一个更大的生态系统，当我们可以深入研究时，它会更有意义。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="22f8" class="pw-post-body-paragraph kn ko jg kq b kr ks kt ku kv kw kx ky lm la lb lc ln le lf lg lo li lj lk ll ij bi translated">这有望让您了解React测试的前景。接下来，我们将深入研究React测试库，包括概念和实际实现。</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><blockquote class="kk kl km"><p id="f359" class="kn ko kp kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><strong class="kq jh">接下来:</strong><a class="ae jd" href="https://medium.com/javascript-in-plain-english/testing-in-react-part-2-react-testing-library-f32432b93c6c" rel="noopener">React中的测试，第2部分:React测试库</a></p></blockquote></div></div>    
</body>
</html>
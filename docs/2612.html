<html>
<head>
<title>Using the Node.js File System Module to Edit and Create Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js文件系统模块编辑和创建文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-the-node-js-file-system-module-to-edit-and-create-files-a3d144270a9f?source=collection_archive---------3-----------------------#2020-07-09">https://javascript.plainenglish.io/using-the-node-js-file-system-module-to-edit-and-create-files-a3d144270a9f?source=collection_archive---------3-----------------------#2020-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ab6c21b5172ee4a904650ec76d091e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbLMG5yulElMXkXV_kf_bA.jpeg"/></div></div></figure><h2 id="dc49" class="jy jz iq bd ka kb kc dn kd ke kf dp kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">JavaScript的文件系统模块提供了一种使用JavaScript访问计算机文件系统的方法</h2><p id="c3e5" class="pw-post-body-paragraph ku kv iq kw b kx ky kz la lb lc ld le kh lf lg lh kl li lj lk kp ll lm ln lo ij bi translated">它可以用来读取，创建，更新，删除和重命名文件。这对于编辑包含您想要操作的数据的文件来说非常强大。</p><p id="b302" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">我第一次熟悉这个模块是因为我需要将一个包含JSON格式的完整汉英词典的文件压缩成更适合我的应用程序的数据量。我需要一种方法来编写JS文件，该文件将一个大文件作为输入，过滤数据，创建一个包含JSON格式数据的新数组，然后将数据写入一个新文件，我可以将该文件复制到我的应用程序中。我将使用这本名为CEDICT的汉英词典(可以在<a class="ae lu" href="https://www.mdbg.net/chinese/dictionary?page=cedict" rel="noopener ugc nofollow" target="_blank">https://www.mdbg.net/chinese/dictionary?page=cedict</a>下载)。</p><p id="97b0" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">首先，您需要用JavaScript文件(index.js)和您的输入文件初始化一个目录。接下来，需要模块，并将输入和输出文件设置为JS文件中的变量。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="5aa6" class="jy jz iq ma b gy me mf l mg mh">const fs = require('fs')</span><span id="2722" class="jy jz iq ma b gy mi mf l mg mh">let outputFile = "HSK1.json"</span><span id="ee62" class="jy jz iq ma b gy mi mf l mg mh">const data = require('./cedict_1.json')</span></pre><p id="5880" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">这里我需要fs模块，我将我的输出文件命名为HSK1.json，并将我的输入文件设置为一个文件路径，以便可以访问它。现在我已经需要输入文件了，我可以像处理任何其他JavaScript数据一样处理它。我首先要编辑数据，使其只包含长度为1的字符的对象。我用过滤方法来做这个。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="35de" class="jy jz iq ma b gy me mf l mg mh">let output = data.filter(w =&gt; w.simplified.length == 1)</span></pre><p id="1e53" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">然后，我将搜索结果与我选择的一组字符进行比较。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="84e1" class="jy jz iq ma b gy me mf l mg mh">const characters = ['我', '你', '他', '她', '这', '哪', '谁', '几', '多', '少', '一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '零', '个', '岁', '本', '快', '不', '没', '很', '太', '都', '和', '在', '吗', '家', '北', '上', '下', '里', '年', '月', '日', '点', '水', '菜', '茶', '钱', '猫', '狗', '人', '书', '谢', '请', '是', '有', '看', '听', '叫', '来', '去', '吃', '喝', '开', '住', '爱', '想', '好', '大', '小', '冷', '热']</span><span id="71aa" class="jy jz iq ma b gy mi mf l mg mh">let result = []</span><span id="9b9d" class="jy jz iq ma b gy mi mf l mg mh">JSON.stringify(output.forEach(word =&gt; {</span><span id="f293" class="jy jz iq ma b gy mi mf l mg mh">for(let i = 0; i &lt; characters.length; i++){</span><span id="f599" class="jy jz iq ma b gy mi mf l mg mh">if (characters[i] === word.simplified){</span><span id="5da7" class="jy jz iq ma b gy mi mf l mg mh">result.push(word)}}}))</span></pre><p id="c469" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">然后我把结果字符串化。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="876d" class="jy jz iq ma b gy me mf l mg mh">let finalOutput = JSON.stringify(result)</span></pre><p id="70f8" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">然后，我使用fs.writeFile创建一个包含我编辑的数据的文件。fw.writeFile有三个参数。第一个是字符串，应该是文件名或描述符。第二是数据本身。第三个是回调函数。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="23d7" class="jy jz iq ma b gy me mf l mg mh">fs.writeFile(outputFile, output, function(err) {</span><span id="48f4" class="jy jz iq ma b gy mi mf l mg mh">if (err) {</span><span id="dd79" class="jy jz iq ma b gy mi mf l mg mh">return console.error(err);</span><span id="4456" class="jy jz iq ma b gy mi mf l mg mh">}})</span></pre><p id="3686" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">这样，我们可以通过运行以下命令在终端中执行该文件:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="6a5a" class="jy jz iq ma b gy me mf l mg mh">$ node index.js</span></pre><p id="ce4a" class="pw-post-body-paragraph ku kv iq kw b kx lp kz la lb lq ld le kh lr lg lh kl ls lj lk kp lt lm ln lo ij bi translated">我们将编写一个包含编辑数据的新文件。</p></div></div>    
</body>
</html>
<html>
<head>
<title>React Patterns — Clean Up Our Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应模式—清理我们的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-patterns-clean-up-our-code-af70a5e0ed95?source=collection_archive---------6-----------------------#2020-06-16">https://javascript.plainenglish.io/react-patterns-clean-up-our-code-af70a5e0ed95?source=collection_archive---------6-----------------------#2020-06-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3633cb722902fb72bbaf81d40f116577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J8TUkDlBGTcH3DBv"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@evelynnnnn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Evelyn</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0231" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何清理我们的React代码。</p><h1 id="68dd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSX</h1><p id="ba0f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JSX是一种我们用来编写React应用程序的编程语言。</p><p id="e5b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该用它来写任何东西，除了最琐碎的应用程序。</p><p id="c831" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们的生活变得更容易。</p><p id="d742" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它为我们提供了类似XML的语法，让我们告诉React用熟悉的语法呈现什么。</p><p id="d3a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2872" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="8b41" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return &lt;p&gt;hello world&lt;/p&gt;;<br/>}</span></pre><p id="f079" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编写一个“hello world”组件。</p><p id="213e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将HTML与逻辑混合在一起乍一看似乎很奇怪，但是我们需要它来处理复杂性。</p><p id="b65d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些标签使得表示DOM树比用普通的JavaScript更容易。</p><h1 id="c71f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">巴比伦式的城市</h1><p id="5404" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">必须安装Babel来支持ES2015。</p><p id="73e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Create React App自带Babel，所以我们不用自己安装任何东西。</p><p id="3bb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是使用<code class="fe mt mu mv mj b">npm start</code>来运行我们的项目，它会为我们处理所有的传输。</p><h1 id="1685" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">小道具</h1><p id="36e3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JSX元素和组件可以有道具，类似于HTML中的属性。</p><p id="6939" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不同之处在于，这些值不必是静态的。</p><p id="5a95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="deca" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="0345" class="mn lc iq mj b gy ms mp l mq mr">const Hello = ({ greeting }) =&gt; {<br/>  return &lt;p&gt;{greeting}&lt;/p&gt;;<br/>};</span><span id="1664" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return &lt;Hello greeting="hello world" /&gt;;<br/>}</span></pre><p id="8ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe mt mu mv mj b">Hello</code>组件，它需要一个<code class="fe mt mu mv mj b">greeting</code>道具。</p><p id="392b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以从<code class="fe mt mu mv mj b">Hello</code>的参数中得到它的值。</p><p id="1f73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在屏幕上看到<code class="fe mt mu mv mj b">hello world</code>。</p><h1 id="dadd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">儿童</h1><p id="d06e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建子组件来嵌套子组件。</p><p id="a840" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6dc3" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="85a8" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;hello&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2561" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在div元素中放了一个p元素。</p><h1 id="1e01" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">与HTML的区别</h1><p id="b147" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">尽管JSX和HTML很相似，但是和HTML还是有区别的。</p><p id="0f42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JSX的属性是骆驼案而不是烤肉串案。</p><p id="c27e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有，HTML中的<code class="fe mt mu mv mj b">class</code>属性在JSX是<code class="fe mt mu mv mj b">className</code>，在JSX<code class="fe mt mu mv mj b">for</code>HTML属性是<code class="fe mt mu mv mj b">htmlFor</code>。</p><p id="89f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">class</code>和<code class="fe mt mu mv mj b">for</code>是JavaScript中的保留字，所以我们不能使用它们。</p><h1 id="6ce8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">风格</h1><p id="076f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">HTML中的<code class="fe mt mu mv mj b">style</code>属性接受带有样式字符串的文本。</p><p id="e607" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">样式属性接受一个对象。</p><h1 id="39d4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">根</h1><p id="3690" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">组件中的JSX代码必须有一个根元素。</p><p id="9006" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不返回:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3b00" class="mn lc iq mj b gy mo mp l mq mr">&lt;div /&gt;<br/>&lt;div /&gt;</span></pre><p id="d47f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须写下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f703" class="mn lc iq mj b gy mo mp l mq mr">&lt;div&gt;<br/> &lt;div /&gt;<br/> &lt;div /&gt;<br/>&lt;/div&gt;</span></pre><p id="ca16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2041" class="mn lc iq mj b gy mo mp l mq mr">&lt;&gt;<br/> &lt;div /&gt;<br/> &lt;div /&gt;<br/>&lt;/&gt;</span></pre><p id="5012" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">&lt;&gt;</code>和<code class="fe mt mu mv mj b">&lt;/&gt;</code>是片段的开始和结束标签，可以用作包装器元素，但不呈现任何内容。</p><h1 id="ded6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">间隔</h1><p id="e56b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JSX的空格有点棘手。</p><p id="373c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想要空间，我们必须写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="09db" class="mn lc iq mj b gy mo mp l mq mr">{' '}</span></pre><p id="2083" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以分离内容。</p><h1 id="bd09" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">布尔属性</h1><p id="ff41" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JSX可以有布尔值。</p><p id="27ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们没有指定值，那么它默认为<code class="fe mt mu mv mj b">true</code>。</p><p id="00f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="119b" class="mn lc iq mj b gy mo mp l mq mr">&lt;button disabled /&gt;</span></pre><p id="b09c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">则该按钮将被禁用。</p><p id="c9a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这和HTML是一致的。</p><h1 id="b6f8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">传播属性</h1><p id="6c70" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">spread操作符对于节省我们输入代码的时间很重要。</p><p id="685f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a6ba" class="mn lc iq mj b gy mo mp l mq mr">const attrs = { id: 'baz' }<br/>return &lt;div {...attrs} /&gt;</span></pre><p id="1c4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把<code class="fe mt mu mv mj b">attrs</code>的属性作为道具传播。</p><p id="ecd0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们将<code class="fe mt mu mv mj b">id</code>的值作为道具传递，并将<code class="fe mt mu mv mj b">div </code>的ID设置为<code class="fe mt mu mv mj b">baz</code>。</p><h1 id="7988" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板</h1><p id="9e23" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">道具可以取动态值。这就是为什么我们可以用它来做模板。</p><p id="d65f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写以下内容有条件地禁用按钮:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bd1f" class="mn lc iq mj b gy mo mp l mq mr">&lt;button disabled={errors.length} /&gt;</span></pre><p id="2234" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们唯一禁用的一个按钮是<code class="fe mt mu mv mj b">errors</code>有一个非零长度。</p><h1 id="8510" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模式</h1><p id="010f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React组件中有一些常见的模式。我们应该遵循它们以正确的方式创建组件。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/d06426c206c44aececb4dfd6237a8748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CJxo40WQaZvDywa1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pawel_czerwinski?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Paweł Czerwiński</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="783c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多线</h1><p id="fa88" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JSX优先于<code class="fe mt mu mv mj b">createElement</code>。这是因为我们可以用它更容易地创建复杂的组件。</p><p id="b3bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有嵌套元素，我们写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0cae" class="mn lc iq mj b gy mo mp l mq mr">&lt;div&gt;<br/> &lt;Header /&gt;<br/>   &lt;div&gt;<br/>     &lt;Content content={...} /&gt;<br/>   &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="461b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="07dd" class="mn lc iq mj b gy mo mp l mq mr">&lt;div&gt;&lt;Header /&gt;&lt;div&gt;&lt;Content content={...} /&gt;&lt;/div&gt;&lt;/div&gt;</span></pre><p id="e252" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保持行短可以让我们不必水平滚动来阅读整行。</p><p id="1a56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们有多行表达式时，我们应该把括号括起来。</p><p id="5c11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，JavaScript可能会在意想不到的地方插入分号。</p><h1 id="ae4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1824" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们保持多行JSX代码简短，并用圆括号括起来。</p><p id="5985" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了最琐碎的应用程序，应该使用JSX，这样我们就可以使用它提供的许多快捷方式。</p><h2 id="c2b6" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">简单英语的JavaScript</strong></h2><p id="42df" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
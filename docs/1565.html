<html>
<head>
<title>Get set up with a Gatsby, TypeScript, and Sass configuration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Gatsby、TypeScript和Sass配置进行设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/gatsby-typescript-and-sass-conf-a7ba527cfba9?source=collection_archive---------7-----------------------#2020-04-01">https://javascript.plainenglish.io/gatsby-typescript-and-sass-conf-a7ba527cfba9?source=collection_archive---------7-----------------------#2020-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dd78133e2caf33fc173263427b92ddec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ohtd4_SJjGIuIpgAG_eF7A.png"/></div></div></figure><p id="3f17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你也是React with TypeScript的粉丝，并且想开始与Gatsby一起工作，那么这篇文章就是为你准备的。我将介绍如何为盖茨比设置基本环境，包括打字稿、萨斯、林挺和漂亮。</p><p id="ddbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我一直在使用React，主要是和create-react-app一起使用，因为它是一个很好的工具，可以和<code class="fe kw kx ky kz b">npx create-react-app &lt;name&gt; --template typescript</code>一起使用。最近我看到盖茨比越来越重要，所以我很想试试。</p><h1 id="fa29" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">盖茨比打字稿</h1><p id="6050" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">create react应用程序模板在Gatsby中被称为启动器。我已经检查了两个与JavaScript版本比较的TypeScript启动器，它们没有提供与原始版本一样多的价值:</p><ul class=""><li id="9cab" class="md me iq ka b kb kc kf kg kj mf kn mg kr mh kv mi mj mk ml bi translated"><a class="ae mm" href="https://www.gatsbyjs.org/starters/haysclark/gatsby-starter-typescript/" rel="noopener ugc nofollow" target="_blank">盖茨比首发打字稿</a>:</li><li id="e340" class="md me iq ka b kb mn kf mo kj mp kn mq kr mr kv mi mj mk ml bi translated"><a class="ae mm" href="https://www.gatsbyjs.org/starters/resir014/gatsby-starter-typescript-plus/" rel="noopener ugc nofollow" target="_blank">盖茨比入门打字稿加</a></li></ul><p id="8bf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这些项目没有一点进展之前，我会对基本的盖茨比做一些小的修改。这也有好处，核心版本通常得到更好的维护。我们将通过以下三个步骤在不到5分钟的时间内完成设置:</p><ol class=""><li id="fa19" class="md me iq ka b kb kc kf kg kj mf kn mg kr mh kv ms mj mk ml bi translated">安装盖茨比</li><li id="5595" class="md me iq ka b kb mn kf mo kj mp kn mq kr mr kv ms mj mk ml bi translated">安装TypeScript并更新配置</li><li id="f44d" class="md me iq ka b kb mn kf mo kj mp kn mq kr mr kv ms mj mk ml bi translated">更新文件</li></ol><h2 id="21b9" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">1.安装盖茨比</h2><p id="0a6a" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">Gatsby可以全局安装在您的计算机上，然后使用cli命令，或者您可以直接使用npx。我更喜欢避免安装更多的东西，所以我会选择第二个。从终端:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="23de" class="mt lb iq kz b gy nn no l np nq">npx gatsby new &lt;project-name&gt;</span></pre><p id="c88f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将需要几分钟的时间来安装所有必要的东西。打开项目时，您可以在<code class="fe kw kx ky kz b">src</code>文件夹中看到:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="7e30" class="mt lb iq kz b gy nn no l np nq">| src<br/>| -- components<br/>| -- images<br/>| -- pages</span></pre><p id="7cdb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">组件和页面有一些JavaScript文件。为了验证一切正常，你可以运行<code class="fe kw kx ky kz b">npm start</code>，你会在localhost:8080中看到这个应用程序。</p><p id="9823" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你愿意，因为Gatsby没有git，我建议你在这里初始化它。</p><h2 id="6e18" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">2.安装TypeScript并更新配置</h2><p id="6948" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">要在Gatsby中使用TypeScript，你需要安装<code class="fe kw kx ky kz b">gatsby-plugin-typescript</code></p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="3563" class="mt lb iq kz b gy nn no l np nq">npm i -E gatsby-plugin-typescript</span></pre><p id="ec15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装完成后，你需要更新包括插件在内的gatsby配置(<code class="fe kw kx ky kz b">gatsby-config.js</code>)。该文件应该如下所示。</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="a7e8" class="mt lb iq kz b gy nn no l np nq">// gatsby-config.js<br/>module.exports = {<br/>  siteMetadata: {<br/>    title: `Gatsby Default Starter`,<br/>    description: `Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.`,<br/>    author: `<a class="ae mm" href="http://twitter.com/gatsbyjs" rel="noopener ugc nofollow" target="_blank">@gatsbyjs</a>`,<br/>  },<br/>  plugins: [<br/>    `gatsby-plugin-react-helmet`,<br/>    {<br/>      resolve: `gatsby-source-filesystem`,<br/>      options: {<br/>        name: `images`,<br/>        path: `${__dirname}/src/images`,<br/>      },<br/>    },<br/>    <strong class="kz ir">`gatsby-plugin-typescript`,</strong><br/>    `gatsby-transformer-sharp`,<br/>    `gatsby-plugin-sharp`,<br/>    {<br/>      resolve: `gatsby-plugin-manifest`,<br/>      options: {<br/>        name: `gatsby-starter-default`,<br/>        short_name: `starter`,<br/>        start_url: `/`,<br/>        background_color: `#663399`,<br/>        theme_color: `#663399`,<br/>        display: `minimal-ui`,<br/>        icon: `src/images/gatsby-icon.png`, // This path is relative to the root of the site.<br/>      },<br/>    },<br/>    // this (optional) plugin enables Progressive Web App + Offline functionality<br/>    // To learn more, visit: <a class="ae mm" href="https://gatsby.dev/offline" rel="noopener ugc nofollow" target="_blank">https://gatsby.dev/offline</a><br/>    // `gatsby-plugin-offline`,<br/>  ],<br/>}</span></pre><p id="887e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在项目的根目录下创建文件<code class="fe kw kx ky kz b">tsconfig.json</code>以包含TypeScript配置:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="0a97" class="mt lb iq kz b gy nn no l np nq">// tsconfig.json<br/>{<br/>  "compilerOptions": {<br/>    "experimentalDecorators": true,<br/>    "emitDecoratorMetadata": true,<br/>    "target": "es5",<br/>    "lib": ["dom", "dom.iterable", "esnext"],<br/>    "allowJs": true,<br/>    "skipLibCheck": true,<br/>    "esModuleInterop": true,<br/>    "allowSyntheticDefaultImports": true,<br/>    "strict": true,<br/>    "forceConsistentCasingInFileNames": true,<br/>    "module": "esnext",<br/>    "moduleResolution": "node",<br/>    "resolveJsonModule": true,<br/>    "isolatedModules": true,<br/>    "noEmit": true,<br/>    "jsx": "preserve",<br/>    "baseUrl": "src",<br/>    "paths": {<br/>      "src/*" : ["*"],<br/>    }<br/>  },<br/>  "include": ["src"]<br/>}</span></pre><p id="41d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和以前一样，要验证一切正常，只需运行<code class="fe kw kx ky kz b">npm start</code>，它应该和以前一样正常工作。这些文件仍然是javascript格式的，所以我们暂时还没有做太多破坏的工作。</p><h2 id="f883" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">3.更新文件</h2><p id="5df7" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">在这个阶段，您可以将<code class="fe kw kx ky kz b">.js/.jsx</code>文件更新为<code class="fe kw kx ky kz b">.ts/.tsx</code>，或者，如果您已经初始化了git，使用git更新文件名。别担心，代码如下:</p><p id="8f9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用git:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="fd35" class="mt lb iq kz b gy nn no l np nq">git mv src/components/header.js src/components/header.tsx<br/>git mv src/components/image.js src/components/image.tsx<br/>git mv src/components/layout.js src/components/layout.tsx<br/>git mv src/components/seo.js src/components/seo.tsx<br/>git mv src/pages/404.js src/pages/404.tsx<br/>git mv src/pages/index.js src/pages/index.tsx<br/>git mv src/pages/page-2.js src/pages/page-2.tsx</span></pre><p id="fb4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">直接更新名称:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="8092" class="mt lb iq kz b gy nn no l np nq">mv src/components/header.js src/components/header.tsx<br/>mv src/components/image.js src/components/image.tsx<br/>mv src/components/layout.js src/components/layout.tsx<br/>mv src/components/seo.js src/components/seo.tsx<br/>mv src/pages/404.js src/pages/404.tsx<br/>mv src/pages/index.js src/pages/index.tsx<br/>mv src/pages/page-2.js src/pages/page-2.tsx</span></pre><p id="1229" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，对于使用prettier的格式化，您还需要更新package.json中的scripts部分:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="b2c6" class="mt lb iq kz b gy nn no l np nq">"scripts": {<br/>    "build": "gatsby build",<br/>    "develop": "gatsby develop",<br/>    <strong class="kz ir">"format": "prettier --write \"**/*.{tsx,ts,js,jsx,json,md}\"",</strong><br/>    "start": "npm run develop",<br/>    "serve": "gatsby serve",<br/>    "clean": "gatsby clean",<br/>    "test": "echo \"Write tests! -&gt; <a class="ae mm" href="https://gatsby.dev/unit-testing\" rel="noopener ugc nofollow" target="_blank">https://gatsby.dev/unit-testing\</a>" &amp;&amp; exit 1"<br/>  },</span></pre><p id="795a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在你可以做<code class="fe kw kx ky kz b">npm start</code>来验证一切都如预期的那样工作。</p><h1 id="8c2a" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">萨斯的盖茨比</h1><h2 id="050a" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">1.安装依赖项</h2><p id="e54e" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">我们需要安装<code class="fe kw kx ky kz b">node-sass</code>和插件<code class="fe kw kx ky kz b">gatsby-plugin-sass</code>，这样它才能工作。</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="9d32" class="mt lb iq kz b gy nn no l np nq">npm i -E gatsby-plugin-sass node-sass</span></pre><h2 id="a48d" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">2.更新gatsby配置</h2><p id="0bc4" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">在gatsby配置中包含插件<code class="fe kw kx ky kz b">gatsby-plugin-sass</code>。</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="1b8d" class="mt lb iq kz b gy nn no l np nq">// gatsby-config.js</span><span id="c4ac" class="mt lb iq kz b gy nr no l np nq">module.exports = {<br/>  siteMetadata: {<br/>    title: `Gatsby Default Starter`,<br/>    description: `Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.`,<br/>    author: `<a class="ae mm" href="http://twitter.com/gatsbyjs" rel="noopener ugc nofollow" target="_blank">@gatsbyjs</a>`,<br/>  },<br/>  plugins: [<br/>    <strong class="kz ir">`gatsby-plugin-sass`,</strong><br/>    `gatsby-plugin-react-helmet`,<br/>    {<br/>      resolve: `gatsby-source-filesystem`,<br/>      options: {<br/>        name: `images`,<br/>        path: `${__dirname}/src/images`,<br/>      },<br/>    },<br/>    `gatsby-plugin-typescript`,<br/>    `gatsby-transformer-sharp`,<br/>    `gatsby-plugin-sharp`,<br/>    {<br/>      resolve: `gatsby-plugin-manifest`,<br/>      options: {<br/>        name: `gatsby-starter-default`,<br/>        short_name: `starter`,<br/>        start_url: `/`,<br/>        background_color: `#663399`,<br/>        theme_color: `#663399`,<br/>        display: `minimal-ui`,<br/>        icon: `src/images/gatsby-icon.png`, // This path is relative to the root of the site.<br/>      },<br/>    },<br/>    // this (optional) plugin enables Progressive Web App + Offline functionality<br/>    // To learn more, visit: <a class="ae mm" href="https://gatsby.dev/offline" rel="noopener ugc nofollow" target="_blank">https://gatsby.dev/offline</a><br/>    // `gatsby-plugin-offline`,<br/>  ],<br/>}</span></pre><h2 id="3e90" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated">3.更新文件</h2><p id="8fe5" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">配置更新后，我们可以将<code class="fe kw kx ky kz b">.css</code>文件更改为<code class="fe kw kx ky kz b">.scss</code>。在gatsby的初始安装中，只有一个布局文件:</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="da10" class="mt lb iq kz b gy nn no l np nq">git mv src/components/layout.css src/components/layout.scss</span></pre><p id="2bb0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">记住还要更新这个文件的导入。它只在<code class="fe kw kx ky kz b">src/components/layout.tsx</code>中显示</p><pre class="nf ng nh ni gt nj kz nk nl aw nm bi"><span id="6d02" class="mt lb iq kz b gy nn no l np nq">/**<br/> * Layout component that queries for data<br/> * with Gatsby's useStaticQuery component<br/> *<br/> * See: <a class="ae mm" href="https://www.gatsbyjs.org/docs/use-static-query/" rel="noopener ugc nofollow" target="_blank">https://www.gatsbyjs.org/docs/use-static-query/</a><br/> */</span><span id="c19d" class="mt lb iq kz b gy nr no l np nq">import React from "react"<br/>import PropTypes from "prop-types"<br/>import { useStaticQuery, graphql } from "gatsby"</span><span id="ff75" class="mt lb iq kz b gy nr no l np nq">import Header from "./header"</span><span id="0f17" class="mt lb iq kz b gy nr no l np nq">import "./layout.scss"</span></pre><p id="49bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">鲍勃是你的叔叔！你可以验证所有的事情都在做<code class="fe kw kx ky kz b">npm start</code>。</p><h1 id="366c" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">丰富</h1><p id="aa4f" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">像往常一样，总有改进的余地。如果你有任何想法或建议，请在下面留下评论。</p><h2 id="bb22" class="mt lb iq bd lc mu mv dn lg mw mx dp lk kj my mz lo kn na nb ls kr nc nd lw ne bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="7240" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae mm" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="ka ir">JavaScript in Plain English</strong></a>，<a class="ae mm" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ka ir">AI in Plain English</strong></a>，<a class="ae mm" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ka ir">UX in Plain English</strong></a>，<a class="ae mm" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ka ir">Python in Plain English</strong></a><strong class="ka ir"/>—谢谢，继续学习！</p><p id="c08c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还推出了一个YouTube，希望你能通过<a class="ae mm" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">订阅我们的简明英语频道</strong> </a>来支持我们</p><p id="902d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一如既往,“简明英语”希望帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae mm" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">submissions @ plain English . io</strong></a><strong class="ka ir"/>并附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
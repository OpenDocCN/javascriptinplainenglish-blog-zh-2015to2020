<html>
<head>
<title>Create a Full Stack Banking Application using React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React创建全栈银行应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-full-stack-banking-application-using-react-part-2-6fb21200613a?source=collection_archive---------0-----------------------#2020-06-12">https://javascript.plainenglish.io/create-a-full-stack-banking-application-using-react-part-2-6fb21200613a?source=collection_archive---------0-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="166f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第2部分:使用PostgreSQL、Express、React和Node.js堆栈创建应用程序</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/abf5b502d4ae1791bacc813b470e1f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3ruR20Splb8wtQ4Z"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@christinhumephoto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christin Hume</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e7a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是构建全栈银行应用程序系列的第二部分。如果你错过了第一部分，请点击这里查看</p><p id="a577" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将继续构建银行应用程序，通过添加选项来创建新的银行帐户，允许用户从帐户中存款和取款，并允许用户生成和下载pdf格式的交易报告。</p><h2 id="dd01" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">我们开始吧</h2><p id="006b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">server/scripts.sql</code>，添加<code class="fe mq mr ms mt b">account</code>和<code class="fe mq mr ms mt b">transactions</code>表格脚本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e0be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">components</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">Summary.js</code>，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="b099" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">components</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">AccountForm.js</code>，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e932" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">components</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">Account.js</code>，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="8f5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们显示了<code class="fe mq mr ms mt b">deposit</code>、<code class="fe mq mr ms mt b">withdraw</code>和<code class="fe mq mr ms mt b">summary</code>页面的按钮。</p><p id="4c58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">AppRouter.js</code>文件中为<code class="fe mq mr ms mt b">/account</code>添加一条路径:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="fede" class="ls lt iq mt b gy na nb l nc nd">&lt;Route path="/account" component={Account} /&gt;</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="b2c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在<code class="fe mq mr ms mt b">Header.js</code>内为<code class="fe mq mr ms mt b">Account</code>组件添加链接:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="4e8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您的帐户页面将如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/8e39fd8ad35bacde95bdeefb5d630503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*384fwxhIFIPUFq5nvoy2yg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">initial account page</figcaption></figure><p id="f2f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们在<code class="fe mq mr ms mt b">AccountForm.js</code>文件中添加取款和存款金额以及更新账户详细信息的表单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><div class="kg kh ki kj gt ab cb"><figure class="nf kk ng nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/651dd07c74774e4ac98d892428c80738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*IgVzqcARAzAPZcL2YHANnA.png"/></div></figure><figure class="nf kk nl nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/b9114d69389c37c4df5deb6e89723b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*K8-IH43VRLNsiRkf5GPPdQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk nm di nn no">Withdraw and deposit amount forms</figcaption></figure></div><p id="4285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们有了取款或存款金额的表单，但我们没有添加银行帐户的选项，因此我们先添加一个表单来添加一个新的银行帐户。</p><p id="8463" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">components</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">AddAccountForm.js</code>，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f412" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将检查帐号是否存在，然后显示取款或存款的表单，否则我们将显示添加帐户的表单。</p><p id="9c11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe mq mr ms mt b">AccountForm.js</code>的内容替换为以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="d2a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">src/actions</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">account.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6c7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">src/utils</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">mask.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="1b5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该代码将仅显示账号的最后4位数字，其他数字将显示*。</p><p id="3635" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">server/routes</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">account.js</code>，添加以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="5f6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，我们在这里导出了，<code class="fe mq mr ms mt b">Router</code>和<code class="fe mq mr ms mt b">getAccountByAccountId</code>函数，所以我们可以在另一个路由文件中使用它，而不需要重新编写相同的代码。这是因为我们需要在获取交易时调用<code class="fe mq mr ms mt b">getAccountByAccountId</code>一次，在下载pdf报告时调用另一次。</p><p id="8428" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe mq mr ms mt b">account</code>路线添加到<code class="fe mq mr ms mt b">server/index.js</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="da87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">src/reducers</code>文件夹中创建一个新文件<code class="fe mq mr ms mt b">account.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="cde6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">store/store.js</code>并在里面加入<code class="fe mq mr ms mt b">account</code>减速器；</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="a4aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，通过运行<code class="fe mq mr ms mt b">yarn start</code>重新启动您的应用程序，当您转到帐户页面并单击取款或存款按钮时，您将能够看到添加帐户表单:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/6c3e53acb063f3f19723d3cac2d4eaa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKEs0dujjfTZeCFFgbUc2w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Add bank account form</figcaption></figure><p id="59f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当用户点击<code class="fe mq mr ms mt b">Submit</code>按钮添加账户时，我们需要调用<code class="fe mq mr ms mt b">initiateGetAccntDetails</code>函数，这样用户就可以看到取款或存款金额的表单。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/3f711daec97aa56c8ff235eafa6f82fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmn-AK8PB2r0HqEMosUcfg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">added account details</figcaption></figure><p id="068c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们在上面的<code class="fe mq mr ms mt b">actions/account.js</code>文件的try块中为<code class="fe mq mr ms mt b">initiateAddAccntDetails</code>函数添加了一个<code class="fe mq mr ms mt b">return</code>语句:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="86de" class="ls lt iq mt b gy na nb l nc nd">return await post(`${BASE_API_URL}/account`, {</span></pre><p id="60ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于<code class="fe mq mr ms mt b">initiateAddAccntDetails</code>被声明为<code class="fe mq mr ms mt b">async</code>函数，<code class="fe mq mr ms mt b">return</code>关键字将<code class="fe mq mr ms mt b">return a promise</code>从函数中取出，在<code class="fe mq mr ms mt b">AccountForm.js</code>中，在<code class="fe mq mr ms mt b">handleAddAccount</code>函数内部，我们增加了一个<code class="fe mq mr ms mt b">.then</code>处理程序来调用<code class="fe mq mr ms mt b">initiateGetAccntDetails</code>函数:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="c5eb" class="ls lt iq mt b gy na nb l nc nd">handleAddAccount = (account) =&gt; {<br/>  const { account_no, bank_name, ifsc } = account;<br/>  this.props<br/>    .dispatch(initiateAddAccntDetails(account_no, bank_name, ifsc))<br/>    .then(() =&gt; this.props.dispatch(initiateGetAccntDetails()));<br/>};</span></pre><p id="a311" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，尝试添加一个新帐户，并验证它是否按预期工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f8b3c2bb4a464cafa36f4c8babf5f333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/1*AAV9sYUOV5w2Ty8KT0lnQQ.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Add and edit account demo</figcaption></figure><p id="8f83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还可以通过点击<code class="fe mq mr ms mt b">“Edit Account Details”</code>链接并输入新的<code class="fe mq mr ms mt b">ifsc</code>代码来更新账户<code class="fe mq mr ms mt b">ifsc</code>代码。</p><p id="6388" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在<code class="fe mq mr ms mt b">server/routes</code>文件夹中创建一个新文件<code class="fe mq mr ms mt b">transactions.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="ef83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，每当我们为<code class="fe mq mr ms mt b">depositing</code>或<code class="fe mq mr ms mt b">withdrawing</code>任何金额时，我们就在<code class="fe mq mr ms mt b">transactions</code>表中添加细节，并从<code class="fe mq mr ms mt b">account</code>表中更新<code class="fe mq mr ms mt b">total_balance</code>列。所以我们在这里做两件事。</p><p id="c2e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果其中一个失败了，那么另一个也不会发生。如果<code class="fe mq mr ms mt b">transactions</code>表被更新，但是<code class="fe mq mr ms mt b">total_balance</code>列的值由于某种错误没有被更新，那么我们需要恢复添加到<code class="fe mq mr ms mt b">transactions</code>表中的新数据，反之亦然。因此，我们将这两件事作为一个事务来执行，因此我们在这里使用的是<code class="fe mq mr ms mt b">client.query</code>，而不是<code class="fe mq mr ms mt b">pool.query,</code>，需要一起执行的语句将被添加到<code class="fe mq mr ms mt b">await client.query('begin')</code>和<code class="fe mq mr ms mt b">await client.query('commit')</code>之间。如果这些调用之间的任何查询失败，我们从catch块内部调用<code class="fe mq mr ms mt b">await client.query('rollback')</code>,因此另一个事务将被恢复，这意味着要么两个都成功，要么都不成功。</p><p id="8e58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将确保表中的数据保持一致。</p><p id="7ffd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">server/db/connect.js</code>,在里面添加<code class="fe mq mr ms mt b">getClient</code>功能，从文件中导出</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="66b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe mq mr ms mt b">transactions</code>路线添加到<code class="fe mq mr ms mt b">server/index.js</code>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="a492" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在<code class="fe mq mr ms mt b">src/actions</code>文件夹中创建一个新文件<code class="fe mq mr ms mt b">transactions.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e3bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">src/reducers</code>文件夹中新建一个文件<code class="fe mq mr ms mt b">transactions.js</code>，内容如下</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="7f70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">utils/constants.js</code>内添加以下常量</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="42a3" class="ls lt iq mt b gy na nb l nc nd">export const SET_TRANSACTIONS = 'SET_TRANSACTIONS';<br/>export const ADD_TRANSACTION = 'ADD_TRANSACTION';<br/>export const SET_ACCOUNT = 'SET_ACCOUNT';<br/>export const UPDATE_ACCOUNT = 'UPDATE_ACCOUNT';</span></pre><p id="91fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">store/store.js</code>内增加<code class="fe mq mr ms mt b">transactions</code>减速器</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="0d94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以将<code class="fe mq mr ms mt b">withdraw</code>或<code class="fe mq mr ms mt b">deposit</code>金额存入银行账户。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ad79b0ea466d8814fb8a098109be46aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*BL0Ms1oE3UeZkBpWvTCRhQ.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Withdraw and deposit amount demo</figcaption></figure><p id="b7a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">厉害！</p><p id="3a61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是有一个问题，当我们使用一个用户的电子邮件地址登录应用程序时，Redux存储将包含这个特定的用户信息。现在，当我们使用另一个电子邮件地址执行<code class="fe mq mr ms mt b">logout</code>和<code class="fe mq mr ms mt b">login</code>操作时，我们将看到显示相同的先前用户帐户详细信息，因为一旦用户从应用程序注销，我们不会从Redux存储中清除帐户信息。</p><p id="a02c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更好地理解它，请看下面的gif:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1bb1bcde5e186f257b588c80b59566d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/1*klRZaw1V_DLKcFs6zKzatQ.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Wrong account information</figcaption></figure><p id="eb06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，要解决这个问题，我们需要在用户退出应用程序后清除帐户信息。</p><p id="52f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，打开<code class="fe mq mr ms mt b">src/utils/constants.js</code>并添加另一个常数:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="6c20" class="ls lt iq mt b gy na nb l nc nd">export const RESET_ACCOUNT = 'RESET_ACCOUNT';</span></pre><p id="1c9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">actions/account.js</code>内，增加<code class="fe mq mr ms mt b">resetAccount</code>功能:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="0fa4" class="ls lt iq mt b gy na nb l nc nd">export const resetAccount = () =&gt; ({<br/>  type: RESET_ACCOUNT<br/>});</span></pre><p id="eb3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">reducers/account.js</code>内增加另一个开关盒</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="9422" class="ls lt iq mt b gy na nb l nc nd">case RESET_ACCOUNT:<br/> return {};</span></pre><p id="5634" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，打开<code class="fe mq mr ms mt b">actions/auth.js</code>，在<code class="fe mq mr ms mt b">initiateLogout</code>函数内，调用<code class="fe mq mr ms mt b">return dispatch(signOut());</code>之前，调用<code class="fe mq mr ms mt b">resetAccount</code>动作创建函数。</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="5a23" class="ls lt iq mt b gy na nb l nc nd">export const initiateLogout = () =&gt; {<br/>return async (dispatch) =&gt; {<br/>  try {<br/>    await post(`${BASE_API_URL}/logout`, true, true);<br/>    localStorage.removeItem('user_token');<br/>    dispatch(resetAccount());<br/>    return dispatch(signOut());<br/>  } catch (error) {<br/>    error.response &amp;&amp; dispatch(getErrors(error.response.data));<br/>  }<br/>};<br/>};</span></pre><p id="a1ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，这将清除Redux存储数据，我们将获得正确登录的用户帐户详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/a21e96980189580a12f1dab567adcfac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/1*Py2LorZHrvHNRNfEY2r4Iw.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Correct account information</figcaption></figure><p id="57ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您所看到的，Redux中的帐户信息被清除，因为第二个用户没有任何帐户信息，所以显示add account表单</p><p id="03b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们已经完成了取款和存款帐户功能，让我们继续学习生成和下载交易报告的功能。</p></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="b03e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<code class="fe mq mr ms mt b">fullstack_banking_app</code>文件夹安装所需的依赖项:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="08cd" class="ls lt iq mt b gy na nb l nc nd">yarn add react-datepicker@3.0.0 react-bootstrap-table@4.3.1 downloadjs@1.4.7</span></pre><p id="4aeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，从<code class="fe mq mr ms mt b">server</code>文件夹安装所需的依赖项:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="bdfe" class="ls lt iq mt b gy na nb l nc nd">yarn add ejs@3.1.3 puppeteer@3.3.0 moment@2.26.0</span></pre><p id="e3bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">components/Summary.js</code>文件，将内容替换为以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="354a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">src/index.js</code>，在<code class="fe mq mr ms mt b"> main.scss</code>导入语句前添加<code class="fe mq mr ms mt b">react-bootstrap-table</code>和<code class="fe mq mr ms mt b">react-datepicker</code> CSS导入:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="63d7" class="ls lt iq mt b gy na nb l nc nd">import <a class="ae kv" href="https://github.com/Hacker0x01/react-datepicker" rel="noopener ugc nofollow" target="_blank">'react-datepicker/dist/react-datepicker.css'</a>;<br/>import <a class="ae kv" href="https://github.com/AllenFang/react-bootstrap-table" rel="noopener ugc nofollow" target="_blank">'react-bootstrap-table/dist/react-bootstrap-table-all.min.css'</a>;</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="9ab9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">actions/transactions.js</code>，在里面添加<code class="fe mq mr ms mt b">setTransactions</code>、<code class="fe mq mr ms mt b">initiateGetTransactions</code>和<code class="fe mq mr ms mt b">downloadReport</code>功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="121c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">components</code>文件夹下新建一个文件<code class="fe mq mr ms mt b">Report.js</code>，内容如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="3e48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">server/routes/transactions.js</code>，添加以下路线:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="aa2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">server/utils/common.js</code>增加以下功能:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6abc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从文件中导出这些函数并导入到<code class="fe mq mr ms mt b">routes/transactions.js</code>文件中:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="b9d1" class="ls lt iq mt b gy na nb l nc nd">const { getTransactions, generatePDF } = require('../utils/common');</span></pre><p id="070a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mq mr ms mt b">server</code>文件夹中新建一个<code class="fe mq mr ms mt b">views</code>文件夹，并在其中添加<code class="fe mq mr ms mt b">transactions.ejs</code>文件，内容如下。(<code class="fe mq mr ms mt b">ejs</code>是我们在Node.js中用来动态生成内容的模板引擎)</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f191" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解更多关于如何使用和配置<code class="fe mq mr ms mt b">ejs</code>的信息，请点击查看我之前的文章<a class="ae kv" href="https://levelup.gitconnected.com/render-dynamic-content-in-nodejs-using-templates-a58cae681148" rel="noopener ugc nofollow" target="_blank"/></p><p id="9b5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe mq mr ms mt b">server/index.js</code>，在<code class="fe mq mr ms mt b">app.use(express.json());</code>之后添加下面一行代码</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="047f" class="ls lt iq mt b gy na nb l nc nd">app.set('view engine', 'ejs');</span></pre><p id="7368" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，通过运行<code class="fe mq mr ms mt b">yarn start</code>命令启动服务器和React应用程序，一旦您单击摘要页面，您将看到以下屏幕</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/a08f73a2fedddaf185df14f5837c749a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cC9_-sVJTofN-lioSH8bIA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Summary page screen</figcaption></figure><p id="5a3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以选择需要交易报告的日期范围，并点击<code class="fe mq mr ms mt b">Generate Report</code>按钮。</p><p id="2cf7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果在此期间没有任何事务，您将看到“未找到事务”消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/48839470b7c6d051f9f008412dcb8133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rcby7T__D3RMWAlaaAFzQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">No transactions found message</figcaption></figure><p id="4bfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果在这些时间段内有交易，那么您将看到表格格式的交易，并且能够下载pdf格式的报告。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/b0151d21743c404b16fae2f196fc5a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsibeO4rRwEb_EbuSFSnQA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Transactions details</figcaption></figure><p id="33db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们来理解代码。</p><p id="e982" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们单击摘要页面上的<code class="fe mq mr ms mt b">“Generate Report”</code>按钮时，我们通过传递所选的<code class="fe mq mr ms mt b">start date</code>和<code class="fe mq mr ms mt b">end date</code>来调用<code class="fe mq mr ms mt b">/transactions/account_id</code>路由，并获取交易列表，将其添加到redux存储中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/36374b23fa2b2af494e431ab781eef15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QQw4-o8lBTUYocQuX5ISNA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Transactions in the redux store</figcaption></figure><p id="f9ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们将这些事务传递给<code class="fe mq mr ms mt b">Report.js</code>组件，并以表格形式显示出来。</p><p id="bb69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当我们单击<code class="fe mq mr ms mt b">“Download Report”</code>按钮时，我们从<code class="fe mq mr ms mt b">routes/transactions.js</code>文件调用<code class="fe mq mr ms mt b">/download/account_id</code>路由，我们从<code class="fe mq mr ms mt b">server/views</code>文件夹中获取事务列表并将事务列表传递给<code class="fe mq mr ms mt b">transactions.ejs</code>文件，并使用<code class="fe mq mr ms mt b">ejs.compile</code>方法从存储在<code class="fe mq mr ms mt b">output</code>变量中的事务数组中生成具有动态值的数据，然后我们将<code class="fe mq mr ms mt b">output</code> html写入<code class="fe mq mr ms mt b">transaction.html</code>文件，然后我们调用<code class="fe mq mr ms mt b">generatePDF</code>函数，通过传递生成的<code class="fe mq mr ms mt b">transactions.html</code>使用<code class="fe mq mr ms mt b">puppeteer</code>库生成pdf文件</p><p id="7061" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成的<code class="fe mq mr ms mt b">transactions.html</code>和<code class="fe mq mr ms mt b">transactions.pdf</code>将存储在<code class="fe mq mr ms mt b">views</code>文件夹中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/ba1f523cae960b0e5198198addd0024c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yl3IgH98rJRxrZII4Wqkrg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">backend code to download pdf</figcaption></figure><p id="8f50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解如何使用<code class="fe mq mr ms mt b">puppeteer</code>生成它的细节，查看我以前的文章<a class="ae kv" href="https://medium.com/javascript-in-plain-english/generate-best-quality-pdf-of-any-webpage-html-page-in-nodejs-7b1223e1a3ac" rel="noopener">这里</a></p><p id="ea38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后一旦生成pdf，为了从服务器下载pdf，我们通过将pdf的内容发送到由<code class="fe mq mr ms mt b">downloadjs</code>库提供的<code class="fe mq mr ms mt b">download</code>函数来使用<code class="fe mq mr ms mt b">downloadjs</code>库。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/7e5c449a360fa886326cf571f193b9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gq2FBN9wKLOk-zSp7PCAIw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">API call for downloading pdf</figcaption></figure><p id="d97a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里提到，<code class="fe mq mr ms mt b">axios</code>呼叫的<code class="fe mq mr ms mt b">{ responseType: 'blob' }</code>非常重要，因为这是一个pdf文件，否则你将得到一个空白的pdf文件。</p><p id="e8cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong><code class="fe mq mr ms mt b">downloadjs</code>库非常强大，我们只需将文件的内容作为第一个参数传递给<code class="fe mq mr ms mt b">download</code>函数，将文件名作为第二个参数，将文件类型作为第三个参数，就可以下载任何类型的文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/7284564c734881f8fadcd88b87bc9dad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*omfC_rqCYoypCj2JYMGvrg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Download transactions report functionality</figcaption></figure><blockquote class="oi oj ok"><p id="27d4" class="kw kx ol ky b kz la jr lb lc ld ju le om lg lh li on lk ll lm oo lo lp lq lr ij bi translated">现在，我们完成了应用程序。让我们重温一下CORS问题。</p></blockquote><p id="9e66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你还记得，在第一部分中，我们已经在<code class="fe mq mr ms mt b">server/index.js</code>文件中添加了以下代码</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="3ba2" class="ls lt iq mt b gy na nb l nc nd">app.use(cors());</span></pre><p id="6e8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这允许我们从运行在端口<code class="fe mq mr ms mt b">3000</code>上的React应用程序对运行在端口<code class="fe mq mr ms mt b">5000</code>上的服务器进行API调用。</p><p id="3a7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是在没有任何选项的情况下添加CORS将允许任何人访问您的API，从安全性的角度来看这并不好。因此，让我们看看如何在服务器端消除对CORS的需求。</p><p id="c5d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<code class="fe mq mr ms mt b">fullstack_banking_app</code>文件夹中打开<code class="fe mq mr ms mt b">package.json</code>，在<code class="fe mq mr ms mt b">package.json</code>文件的末尾添加<code class="fe mq mr ms mt b">proxy</code>属性</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">React proxy package.json</figcaption></figure><p id="d38b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">删除下面一行，因为现在不需要它了:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="663d" class="ls lt iq mt b gy na nb l nc nd">app.use(cors());</span></pre><p id="c2ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，打开<code class="fe mq mr ms mt b">src/utils/constants.js</code>并改变:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="af3c" class="ls lt iq mt b gy na nb l nc nd">export const BASE_API_URL = 'http://localhost:5000';</span></pre><p id="b132" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">收件人:</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="ac8d" class="ls lt iq mt b gy na nb l nc nd">export const BASE_API_URL = '';</span></pre><p id="10d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，通过运行<code class="fe mq mr ms mt b">yarn start</code>命令重新启动服务器和React应用程序，如果您转到<a class="ae kv" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>，您将看到React应用程序和express APIs也将在端口<code class="fe mq mr ms mt b">3000</code>上可用，因此现在没有必要使用CORS。这是因为添加<code class="fe mq mr ms mt b">proxy</code>允许<code class="fe mq mr ms mt b">create-react-app</code>充当<code class="fe mq mr ms mt b">proxy</code>，现在我们所有的服务器API也将在端口<code class="fe mq mr ms mt b">3000</code>上运行，尽管我们在端口<code class="fe mq mr ms mt b">5000</code>上运行express应用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/ee520261d780a32e73fc83b35863f949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NNG15yEbAdtBKEj6rrHODA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Generating transaction report</figcaption></figure><p id="da55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以找到Github的源代码，直到现在:</p><ul class=""><li id="8e61" class="op oq iq ky b kz la lc ld lf or lj os ln ot lr ou ov ow ox bi translated">使用类组件<a class="ae kv" href="https://github.com/myogeshchavan97/fullstack_banking_app/tree/section-2-using-class-components" rel="noopener ugc nofollow" target="_blank">这里</a></li><li id="f53e" class="op oq iq ky b kz oy lc oz lf pa lj pb ln pc lr ou ov ow ox bi translated">使用钩子<a class="ae kv" href="https://github.com/myogeshchavan97/fullstack_banking_app/tree/section-2-using-hooks" rel="noopener ugc nofollow" target="_blank">这里</a></li></ul><p id="09e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">为保护本app免受</strong><code class="fe mq mr ms mt b"><strong class="ky ir">XSS</strong></code><strong class="ky ir"/><code class="fe mq mr ms mt b"><strong class="ky ir">CSRF</strong></code><strong class="ky ir">攻击，请点击此处</strong>  <strong class="ky ir">查看下一部分</strong> <a class="ae kv" href="https://medium.com/javascript-in-plain-english/create-a-full-stack-banking-application-using-react-23d0ef2f5bd2?source=friends_link&amp;sk=1f27f7bc70d67a9c55f8e65f62576288" rel="noopener">。</a></p><p id="5f89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天到此为止。我希望你学到了新东西。</p><p id="3efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">别忘了直接在你的收件箱</strong> <a class="ae kv" href="https://yogeshchavan.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我的每周时事通讯，里面有惊人的技巧、诀窍和文章。</strong> </a></p></div></div>    
</body>
</html>
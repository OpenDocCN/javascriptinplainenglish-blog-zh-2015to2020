<html>
<head>
<title>Easy Authentication System with React and Firebase for beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向初学者的React和Firebase简易认证系统</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/easy-authentication-system-with-react-and-firebase-for-beginners-780cadc9d5e4?source=collection_archive---------3-----------------------#2020-05-25">https://javascript.plainenglish.io/easy-authentication-system-with-react-and-firebase-for-beginners-780cadc9d5e4?source=collection_archive---------3-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f686879f1f9961c35415f987a9d131d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ID-kMRcDJRisqKmDAy1XGQ.png"/></div></div></figure><h1 id="06bd" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">那么，什么是认证系统呢？</h1><p id="840b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">它用于识别用户，允许应用程序存储个人用户数据，并在用户的所有设备上提供个性化体验。想想任何需要您创建帐户的应用程序，如电子商务应用程序、生产力应用程序等。</p><p id="c88c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如今，大多数应用程序都有一个认证系统，以便为用户提供个性化的独特体验。但是我们如何设计和实现一个好的认证系统呢？在本教程中，我们将使用Firebase身份验证和React(用于前端)构建一个简单的身份验证系统。</p><h1 id="2287" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步骤1:建立Firebase项目</h1><p id="ff3b" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果你没有Firebase账户，请点击<a class="ae lz" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">这里</a>创建一个账户。</p><p id="053f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后，创建一个新项目并填写详细信息:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/26309197a3b8799c11212b38d6874bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8UcIpilBGpocgfAV"/></div></div></figure><p id="2dad" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">使用谷歌分析完全取决于你:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/ea634da0162afda4be2a0fc1871c2f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FcRBLJ1ntBphxz1s"/></div></div></figure><p id="0206" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">接受条款并创建项目:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/ee7b142051d2e8870b95da57ec8e1eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F6m21LdOQiap2Umt"/></div></div></figure><p id="442e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">创建项目后，您将被带到项目仪表板。中间有4个圆形图标(iOS、Android、Web和Unity)。对于本教程，选择<strong class="ky ir">网络图标</strong>。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/52b341c2878c521a5818602411aa4d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ut75G75hRtiM_Cz1"/></div></div></figure><p id="c619" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后你必须注册应用程序。详细填写。我们现在可以跳过Firebase托管选项。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/ebec5bff0121538bf3bc7e3532ca05a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Szm4yPe703n93oVG"/></div></div></figure><p id="62d5" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">点击<strong class="ky ir">‘注册应用’</strong>后，会看到下面的画面。这些配置很重要，所以现在复制<code class="fe mj mk ml mm b">var firebaseConfig = {...}</code>并保存在某个地方。我们稍后将回到这个问题。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/33bbeddbae0be885e36e9ccc258133d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pggFrN1oSvn3WVXs"/></div></div></figure><h1 id="976f" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置Firebase身份验证</h1><p id="f538" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">现在我们已经创建了我们的应用程序，让我们前往仪表板的左侧栏。在<strong class="ky ir">开发</strong>选项卡下，点击<strong class="ky ir">认证</strong>选项。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/8020cad4cb3e152fca88684ef502e32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pPCCdiczic4yNzdC"/></div></div></figure><p id="0554" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在点击<strong class="ky ir">设置登录方式</strong>按钮开始。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/8bed567f5364b03733fa4f05727e2faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7koASnuZzTZ9dKDa"/></div></div></figure><p id="fcb2" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后让我们点击<strong class="ky ir">电子邮件/密码</strong>选项来启用它。搞定了。一旦我们将Firebase连接到我们的应用程序，我们的用户将能够使用他们的电子邮件和密码登录应用程序。本教程将不介绍如何设置其他登录方法，因为它需要更多的步骤。如果你想让我告诉你如何使用其他方法，请告诉我！</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/fcbf463b2c770ab95f9fa4786705f53d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Q643YtAQ3uMX4VF"/></div></div></figure><h1 id="eff2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步骤3:创建React应用程序</h1><p id="8e0f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们已经为我们的React应用程序设置了必要的Firebase。因此，让我们现在创建应用程序！</p><p id="9c29" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在命令行中:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="9c96" class="mv jz iq mm b gy mw mx l my mz">npx create-react-app myProject</span></pre><p id="fe35" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后运行:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="2ded" class="mv jz iq mm b gy mw mx l my mz">npm install firebase</span></pre><p id="68bc" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在，检索您保存的<code class="fe mj mk ml mm b">var firebaseConfig = {...}</code>，并将其复制到<strong class="ky ir"> index.js </strong>中，如下所示:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="5492" class="mv jz iq mm b gy mw mx l my mz">const firebaseConfig = {<br/>  apiKey: APP_API_KEY,<br/>  authDomain: AUTH_DOMAIN,<br/>  databaseURL: DATABASE_URL,<br/>  projectId: PROJECT_ID,<br/>  storageBucket: STORAGE_BUCKET,<br/>  messagingSenderId: MESSAGING_SENDER_ID,<br/>};</span><span id="25f2" class="mv jz iq mm b gy na mx l my mz">firebase.initializeApp(firebaseConfig);</span></pre><p id="7664" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在顶部添加<code class="fe mj mk ml mm b">import * as firebase from 'firebase'</code>,这就是它应该看起来的样子:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="2482" class="mv jz iq mm b gy mw mx l my mz">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import * as firebase from 'firebase';</span><span id="2cb7" class="mv jz iq mm b gy na mx l my mz">const firebaseConfig = {<br/>  apiKey: APP_API_KEY,<br/>  authDomain: AUTH_DOMAIN,<br/>  databaseURL: DATABASE_URL,<br/>  projectId: PROJECT_ID,<br/>  storageBucket: STORAGE_BUCKET,<br/>  messagingSenderId: MESSAGING_SENDER_ID,<br/>};</span><span id="8691" class="mv jz iq mm b gy na mx l my mz">firebase.initializeApp(firebaseConfig);<br/>const auth = firebase.auth();</span><span id="aee1" class="mv jz iq mm b gy na mx l my mz">ReactDOM.render(<br/>    &lt;App /&gt;<br/>     document.getElementById('root')<br/>);</span></pre><h1 id="a28f" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第四步登录页面</h1><p id="bc58" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是我项目的主页。为了登录，用户将单击右上角的按钮，该按钮将打开Firebase身份验证UI进行登录。然后，用户将被重定向到一个个性化帐户页面的主页。让我们用代码来写吧！</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/763a94f34fc9197be03f7b365cf073b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bswf0c-4UBTPI--O"/></div></div></figure><p id="68e1" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">首先，通过运行以下命令安装Firebase UI:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="4ac9" class="mv jz iq mm b gy mw mx l my mz">npm install --save react-firebaseui</span></pre><p id="cf38" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后，创建sign_in.js以显示身份验证登录页面并设置登录选项:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="fd28" class="mv jz iq mm b gy mw mx l my mz">this.uiConfig = {<br/>              signInFlow: "popup",<br/>                  signInOptions: [<br/>                  firebase.auth.EmailAuthProvider.PROVIDER_ID<br/>              ],<br/>            callbacks: {<br/>                  signInSuccessWithAuthResult: () =&gt; false<br/>              }<br/>          };</span></pre><p id="53e4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">根据用户登录后您想要做的事情，配置将完全由您决定。详细信息请阅读<a class="ae lz" href="https://firebase.google.com/docs/auth/web/firebaseui" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="5001" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后，拥有一个跟踪用户是否登录的状态。然后，我们可以使用firebase.auth()更新状态。onAuthStateChanged()函数:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="5fc7" class="mv jz iq mm b gy mw mx l my mz">componentDidMount() {<br/>        firebase.auth().onAuthStateChanged(user =&gt; {<br/>            this.setState({<br/>                isSignedIn: !!user, <br/>            }, () =&gt; {this.props.setSignedIn(this.state.isSignedIn)<br/>            }) <br/>        })<br/>    }</span></pre><p id="cd4d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">要在用户登录后将页面重定向回主页，请运行:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="efd8" class="mv jz iq mm b gy mw mx l my mz">npm install react-router-dom</span></pre><p id="f35d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在sign_in.js中设置它，它应该是这样的:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="d714" class="mv jz iq mm b gy mw mx l my mz">import React from 'react';<br/>import '../App.css';<br/>import { FirebaseAuth } from 'react-firebaseui';<br/>import firebase from 'firebase';<br/>import {Redirect} from 'react-router-dom';</span><span id="fd99" class="mv jz iq mm b gy na mx l my mz">class SignIn extends React.Component {<br/>    constructor(props) {<br/>        super(props);<br/>        this.uiConfig = {<br/>              signInFlow: "popup",<br/>                  signInOptions: [<br/>                  firebase.auth.EmailAuthProvider.PROVIDER_ID<br/>              ],<br/>            callbacks: {<br/>                  signInSuccessWithAuthResult: (result) =&gt; false<br/>              }<br/>          };<br/>        this.state = {<br/>            isSignedIn: false<br/>        }<br/>      }<br/>    componentDidMount() {<br/>        firebase.auth().onAuthStateChanged(user =&gt; {<br/>            this.setState({<br/>                isSignedIn: !!user,<br/>            }<br/>        })<br/>    }<br/>    render() {<br/>      return (<br/>          &lt;div&gt;<br/>        {this.state.isSignedIn ? &lt;Redirect to={{pathname: "/"}}/&gt; : <br/>        &lt;div className="section"&gt;<br/>                &lt;div className="container"&gt;<br/>                    &lt;div className="row"&gt;<br/>                        &lt;div className="col-md-12"&gt;<br/>                            &lt;div className="section-title"&gt;<br/>                                &lt;h2 className="title"&gt;Sign In&lt;/h2&gt;<br/>                            &lt;/div&gt;<br/>                            &lt;FirebaseAuth uiConfig={this.uiConfig} firebaseAuth={firebase.auth()}/&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;              <br/>        &lt;/div&gt;}<br/>        &lt;/div&gt;<br/>      );<br/>    }<br/>  }<br/>export default SignIn;</span></pre><p id="9c25" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">祝贺你！</strong>您的Firebase Authentication React应用应该可以使用了！如果一切正常，单击登录后，用户应该会看到:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/461fd9c7f6113f4a6ca04a21fcbfb2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AzxjpqKQ-_wJPmBR"/></div></div></figure><h1 id="5c4d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第五步:下一步</h1><p id="2e96" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这就是这篇长教程目前所能涵盖的内容的结尾。但是，这个身份验证系统的下一步是更新主页，如果用户登录更加个性化。(例如，用他们的姓名和个人资料图片替换右上角的普通图片)。我已经这样做了:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/2545d79d85ba8a0e55b5e39d1ac690a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7frI30R9bfLEym-8"/></div></div></figure><p id="a8eb" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">正如右上角所示，登录后，该应用程序知道我是谁，并显示我的姓名和个人资料图片。它还将“登录/加入”更改为“注销”。注销用户的一个简单方法是:</p><pre class="mb mc md me gt mr mm ms mt aw mu bi"><span id="c678" class="mv jz iq mm b gy mw mx l my mz">firebase.auth().signOut()</span></pre><p id="508b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">希望本教程对尝试处理Firebase认证和React的新程序员有所帮助。如果我能帮助解决任何关于本教程实施的问题，请随时问我问题。干杯！</p><h1 id="0e13" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">用简单英语写的便条</strong></h1><p id="5fde" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae lz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae lz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a> <strong class="ky ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Selective Angular Component Rendering with ngSwitch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ngSwitch进行选择性角度分量渲染</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/selective-angular-component-rendering-with-ngswitch-4ec3a2b5e05e?source=collection_archive---------2-----------------------#2020-02-06">https://javascript.plainenglish.io/selective-angular-component-rendering-with-ngswitch-4ec3a2b5e05e?source=collection_archive---------2-----------------------#2020-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2b80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有时在Angular中，您有一个项目集合，并且需要为同一集合中的不同项目显示不同的组件。幸运的是，Angular提供了一个名为<code class="fe kl km kn ko b">ngSwitch</code>的指令，让我们可以灵活地处理组件的呈现方式。在这篇短文中，我将向你展示我的游戏开发项目中的一个例子，以及我如何使用<code class="fe kl km kn ko b">ngSwitch</code>来解决它。</p><h1 id="705d" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">问题是</h1><p id="3b99" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">在我的例子中，我正在用Angular构建一个基于文本的冒险游戏。我有一个故事文本将去的中心区域，但不是所有的文本都是平等的。一些文本代表玩家输入的命令，一些代表故事叙述，一些代表一般的系统状态信息。</p><p id="e8df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这些不同类型的文本有不同的格式，如下图所示:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/f940500e06a60f1fb870ff05e017cf8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c_NEwD0bW90aKpg1"/></div></div></figure><p id="cf72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">问题是当你使用<code class="fe kl km kn ko b">ngFor</code>在Angular中循环一个集合时，<code class="fe kl km kn ko b">ngFor</code>指令所在的元素是将被重复的元素。这使得基于行中的值动态表示内容变得更加困难。</p><p id="61aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更具体地说，我有一个枚举来表示可用的不同类型的故事文本:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="3ce7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">StoryEntry</code>类表示交互故事中的单个线条，如下所示:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="bbbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个类以集合的形式存储在组件中，如下所示:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="0c85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，现在问题来了，我们如何在这个集合上做一个<code class="fe kl km kn ko b">ngFor</code>，用不同的组件呈现不同的<code class="fe kl km kn ko b">EntryType</code>值。</p><h1 id="2530" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">解决方案:ngSwitch</h1><p id="780a" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">我为这个问题找到的最简单、最易维护的解决方案是引入一个新组件，它接受<code class="fe kl km kn ko b">StoryEntry</code>对象，然后<em class="mf">的</em>模板使用它根据条目的<code class="fe kl km kn ko b">EntryType</code>有条件地呈现一个附加组件。</p><p id="86fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">ngSwitch</code>允许您评估HTML中的一些内联条件，并通过一个<code class="fe kl km kn ko b">ngSwitchCase</code>指令用一个匹配切换条件的指令呈现元素。如果没有匹配的条件，如果通过<code class="fe kl km kn ko b">ngSwitchDefault</code>指令定义了一个条件，将包含默认条目。</p><p id="4815" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这看起来像这样:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="e086" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里特别值得注意的是<code class="fe kl km kn ko b">ngSwitchCase</code>指令中的值。为了便于维护，我们需要能够在HTML中通过名称引用枚举成员。事实证明，为了在Angular中干净利落地做到这一点，您需要做一点小小的修改，在组件内部为您的枚举定义一个别名，如下所示:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="7738" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第16行增加的复杂性/攻击是不幸的，但这是我所知道的解决这个问题的最好方法。你可以完全不使用枚举，而使用字符串值和字符串比较，这就消除了这个问题。但是，如果您这样做，您将失去该解决方案提供的枚举成员安全性。</p><h1 id="7f8b" class="kp kq iq bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">最终结果</h1><p id="d80d" class="pw-post-body-paragraph jn jo iq jp b jq ln js jt ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ij bi translated">组件的这种用法，<code class="fe kl km kn ko b">ngSwitch</code>和使用enum别名为我们提供了一种相当简单的方法来有条件地显示某些类型条目的组件，这就是我们要做的。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mi"><img src="../Images/3c09393739874cce24218b8341ad1231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K6xxx0sujr__bmgY"/></div></div></figure><p id="6938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请继续关注，在接下来的一个月里，我将继续打造这款冒险游戏。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="bff8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">原载于2020年2月6日</em><a class="ae ls" href="https://killalldefects.com/2020/02/06/selective-angular-component-rendering-with-ngswitch/" rel="noopener ugc nofollow" target="_blank"><em class="mf">【https://killalldefects.com】</em></a><em class="mf">。</em></p></div></div>    
</body>
</html>
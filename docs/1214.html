<html>
<head>
<title>StencilJS: Displaying a list from an array in StencilJS asynchronously in 3 easy steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">StencilJS:通过三个简单的步骤异步显示StencilJS中数组的列表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stenciljs-displaying-a-list-from-an-array-in-stenciljs-asynchronously-in-3-easy-steps-d96edd00e13e?source=collection_archive---------4-----------------------#2020-02-13">https://javascript.plainenglish.io/stenciljs-displaying-a-list-from-an-array-in-stenciljs-asynchronously-in-3-easy-steps-d96edd00e13e?source=collection_archive---------4-----------------------#2020-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f97a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习如何用StencilJS一步一步地构建web组件。易于安装，但理解基本的JSX命令有点问题。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/387559a764843b7b883b51012d95abd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDSI0cZ3KVCzKtoIDAXwaA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@codestorm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Safar Safarov</a> on <a class="ae kv" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="801e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated">T4:但是探索非常有趣。我最近在web组件方面做了很多工作，特别关注StencilJS。</p><h2 id="f682" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">什么是web组件？</h2><p id="dafb" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">摘自<a class="ae kv" href="http://www.webcomponents.org" rel="noopener ugc nofollow" target="_blank">webcomponents.org</a>，</p><blockquote class="mz na nb"><p id="95dc" class="kw kx nc ky b kz la jr lb lc ld ju le nd lg lh li ne lk ll lm nf lo lp lq lr ij bi translated">Web组件是一组web平台API，允许您创建新的自定义的、可重用的、封装的HTML标记，以便在网页和web应用程序中使用。定制组件和小部件建立在Web组件标准的基础上，可以跨现代浏览器工作，并且可以与任何支持HTML的JavaScript库或框架一起使用。</p><p id="e02e" class="kw kx nc ky b kz la jr lb lc ld ju le nd lg lh li ne lk ll lm nf lo lp lq lr ij bi translated">Web组件基于现有的web标准。支持web组件的特性目前正被添加到HTML和DOM规范中，让web开发人员可以轻松地用封装样式和定制行为的新元素扩展HTML。</p></blockquote><p id="8daf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在任何网站中实现web组件都非常容易。例如，如果您已经构建了一个名为<code class="fe ng nh ni nj b">my-picture</code>的web组件，那么要将您的web组件放在任何地方，您所要做的就是包含标签:</p><p id="d383" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ng nh ni nj b">&lt;my-picture&gt;&lt;/my-picture&gt;</code></p><p id="5576" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任何你想用它的地方<code class="fe ng nh ni nj b">my-picture</code></p><p id="1c97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就这么简单。</p><h2 id="6485" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">为什么是StencilJS？</h2><p id="d87a" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">除了构建应用程序或Ionic PWA，StencilJS还可以用于轻松开发web组件，这是一个非常完整和高效的框架。</p><p id="8c39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">StencilJS是Ionic团队的另一个项目，对于我来说，如果你有兴趣了解更多关于web组件的知识，这是一个很好的开始。</p><p id="1ba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我发现StencilJS非常轻便，易于操作，更不用说，安装和设置它几乎不需要什么工作或麻烦。你所需要的只是节点和NPM，仅此而已。要启动StencilJS项目，您只需键入以下内容:</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="c3de" class="mb mc iq nj b gy no np l nq nr">npm init stencil</span></pre><p id="606c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。现在您有了一个完全成熟的StencilJS项目。</p><p id="b9ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，您需要了解一些代码，并且有一个轻微的学习曲线来理解需要做什么来完成您需要它做的事情。需要注意的是，为了理解StencilJS中发生的事情，你需要能够理解很多JSX，类似于React。</p><p id="856b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我遇到了一个简单直接的任务，如果要在Angular/Ionic上执行，但很难在StencilJS中解决。我在JSX和React上没有什么经验，Google上的很多解决方案似乎都集中在用React解决同样的问题，而不是用StencilJS。</p><p id="e0d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您目前正在构建一个StencilJS web组件，并且像我一样到处寻找解决方案，那么您已经找到了合适的文章。</p><p id="704d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编写时的StencilJS版本:</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="a1d2" class="mb mc iq nj b gy no np l nq nr">“@stencil/core”: “1.8.7”</span></pre><h2 id="4a3f" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated"><strong class="ak">第一步:</strong></h2><p id="ee99" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated"><code class="fe ng nh ni nj b">componentWillRender()</code>功能</p><p id="6cf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似于Angular中的<code class="fe ng nh ni nj b">ngOnInit()</code>，在用<code class="fe ng nh ni nj b">render()</code>渲染页面之前会先执行<code class="fe ng nh ni nj b">componentWillRender()</code></p><p id="a1f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么这一点很重要？事情是这样的，<code class="fe ng nh ni nj b">render()</code>不接受异步等待和承诺。事情不是这样的。因此，您需要创建一个函数来运行您的异步await，以便准备好一切，然后呈现它。</p><p id="7a41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么在执行<code class="fe ng nh ni nj b">render()</code>函数之前，你需要创建一个<code class="fe ng nh ni nj b">componentWillRender()</code>来将所有的加载内容分类，我假设这个函数已经内置到你的应用程序中了。</p><p id="a2ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，像这样准备:</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="b2dc" class="mb mc iq nj b gy no np l nq nr">theList;</span><span id="51d8" class="mb mc iq nj b gy ns np l nq nr">async componentWillRender(){</span><span id="2b0f" class="mb mc iq nj b gy ns np l nq nr">//do your asynchronous stuff here</span><span id="0c0e" class="mb mc iq nj b gy ns np l nq nr">   let getApi=await fetch('<a class="ae kv" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users</a>',{<br/>method:'GET'})</span><span id="0d72" class="mb mc iq nj b gy ns np l nq nr">   this.theList=await getApi.json()</span><span id="6c9c" class="mb mc iq nj b gy ns np l nq nr">}</span></pre><h2 id="58d3" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">第二步:</h2><p id="dca7" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">在渲染函数中添加<code class="fe ng nh ni nj b">.map</code>来循环web组件中的所有内容。在本例中，我将在div中显示List数组中的所有内容:</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="0679" class="mb mc iq nj b gy no np l nq nr">render(){ <br/>      <br/>      return &lt;div&gt;</span><span id="218f" class="mb mc iq nj b gy ns np l nq nr">        {this.theList.map((item:any={})=&gt;</span><span id="5e04" class="mb mc iq nj b gy ns np l nq nr">        &lt;div&gt;</span><span id="2c51" class="mb mc iq nj b gy ns np l nq nr">          {item.id} {item.name}</span><span id="ecb0" class="mb mc iq nj b gy ns np l nq nr">         &lt;/div&gt;</span><span id="68ce" class="mb mc iq nj b gy ns np l nq nr">         )}</span><span id="08d1" class="mb mc iq nj b gy ns np l nq nr">        &lt;/div&gt;</span><span id="e339" class="mb mc iq nj b gy ns np l nq nr">}</span></pre><p id="27df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">额外收获:如果你正在寻找开发离子风格，如离子按钮，离子项目，离子列表，离子工具栏等，你可以很容易地导入离子属性，并在JSX使用它们。关于如何做到这一点，请参见下面的参考资料。</p><h2 id="b161" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">第三步:</h2><p id="5a40" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">运行构建和启动，尝试一下。</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="8cc9" class="mb mc iq nj b gy no np l nq nr">npm run build<br/>npm start</span></pre><p id="8454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给你。三个简单的步骤。就是这样。我提到过使用模板很容易构建web组件吗？</p><p id="e38f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考资料:</p><div class="nt nu gp gr nv nw"><a href="https://ionicframework.com/docs/installation/cdn" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">离子包.离子文件</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Ionic提供了不同的软件包，可用于在测试中快速开始使用Ionic Framework或Ionicons</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">ionicframework.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="http://stenciljs.com" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">蜡纸</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">神奇的、可重用的web组件编译器。几秒钟内开始构建。通过有意设计的小工具、小API…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">stenciljs.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="http://jsonplaceholder.typicode.com" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">JSONPlaceholder</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">JSONPlaceholder是一个免费的在线REST API，只要你需要一些假数据，就可以使用它。对于教程来说很棒…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">jsonplaceholder.typicode.com</p></div></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://www.webcomponents.org" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">webcomponents.org</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Bryan Ollendyke是HAX the web，web组件创作系统的负责人，也是ELMS: Learning…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.webcomponents.org</p></div></div><div class="of l"><div class="om l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Object-Oriented JavaScript — Events</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向对象的JavaScript —事件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/object-oriented-javascript-events-4f390508e117?source=collection_archive---------6-----------------------#2020-11-21">https://javascript.plainenglish.io/object-oriented-javascript-events-4f390508e117?source=collection_archive---------6-----------------------#2020-11-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/895004120e34d88b17377a7ea0b77c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k__c9x0nijVOrq_W"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ignaciobrosa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ignacio Brosa</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="73cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript在一定程度上是一种面向对象的语言。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要学习JavaScript，我们必须学习JavaScript的面向对象部分。</p><p id="6eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究倾听事件。</p><h1 id="f3a1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">事件</h1><p id="4409" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以倾听用户触发的事件。</p><p id="e14b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以听到鼠标点击，按键，页面加载等。</p><p id="4cdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以附加事件侦听器函数来侦听所有这些事件。</p><h1 id="31f9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">内嵌HTML属性</h1><p id="7292" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">将事件侦听器添加到元素中的一种方法是将它们作为属性值添加。</p><p id="47e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3a51" class="mn lc iq mj b gy mo mp l mq mr">&lt;div onclick="alert('clicked')"&gt;click me&lt;/div&gt;</span></pre><p id="0f3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe ms mt mu mj b">onclick</code>属性，其值是JavaScript代码<code class="fe ms mt mu mj b">alert(‘clicked’)</code>。</p><p id="0af5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很容易添加，但是如果代码变得复杂，就很难使用。</p><h1 id="bf64" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">元素属性</h1><p id="fa02" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们也可以将它们添加为元素属性。</p><p id="f8ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，给定以下HTML:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="12bf" class="mn lc iq mj b gy mo mp l mq mr">&lt;div&gt;click me&lt;/div&gt;</span></pre><p id="080a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="62f2" class="mn lc iq mj b gy mo mp l mq mr">const div = document.querySelector('div');<br/>div.onclick = () =&gt; {<br/>  alert('clicked');<br/>};</span></pre><p id="9906" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有了<code class="fe ms mt mu mj b">document.querySelector</code>得到的div。</p><p id="a14f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe ms mt mu mj b">onclick</code>属性设置为一个函数，当我们点击div时该函数运行。</p><p id="4a86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这更好，因为它将JavaScript排除在我们的HTML之外。</p><p id="1a2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种方法的缺点是我们只能给事件附加一个函数。</p><h1 id="6fc1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">DOM事件侦听器</h1><p id="8859" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">监听浏览器事件的最好方法是添加事件侦听器。</p><p id="23ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们想吃多少就吃多少。</p><p id="57ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">听众不需要互相了解，可以独立工作。</p><p id="6c6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了将事件侦听器附加到我们的元素，我们可以调用<code class="fe ms mt mu mj b">addEventListener</code>方法。</p><p id="048c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="015b" class="mn lc iq mj b gy mo mp l mq mr">const div = document.querySelector('div');<br/>div.addEventListener('click', () =&gt; {<br/>  alert('clicked');<br/>});</span><span id="26f0" class="mn lc iq mj b gy mv mp l mq mr">div.addEventListener('click', console.log.bind(div))</span></pre><p id="c37d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了2个不同的事件侦听器。</p><p id="fd36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个是显示警报的功能。</p><p id="19ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种是在控制台中记录事件对象。</p><h1 id="f1b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">捕获和冒泡</h1><p id="57c0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">addEventListener</code>方法取第三个参数。</p><p id="9634" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它允许我们设置是否在捕获模式下监听。</p><p id="1213" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事件捕获是指事件从<code class="fe ms mt mu mj b">document</code>对象向下传播到最初触发事件的元素。</p><p id="03ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事件冒泡则相反。它是事件从触发事件的元素传播到<code class="fe ms mt mu mj b">document</code>对象的地方。</p><p id="2c5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们将第三个参数设置为<code class="fe ms mt mu mj b">true</code>，那么我们就可以听到从<code class="fe ms mt mu mj b">docuemnt</code>对象到原始元素的事件传播。</p><p id="2d8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事件从捕获阶段到原始元素，再到冒泡阶段。</p><p id="4bef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数浏览器都实现了这3个阶段，所以我们可以在任何地方设置可选的。</p><p id="7251" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过调用事件对象上的<code class="fe ms mt mu mj b">stopPropagation</code>来停止从源元素到文档的传播。</p><p id="e257" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用事件委托来检查哪个元素触发了一个事件。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/40593f992c05ec9fea6d237fca274c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E_WWDsVORElC9fAx"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pabloheimplatz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pablo Heimplatz</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8390" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="14b5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有很多种倾听元素事件的方式。</p><p id="aaee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以添加事件侦听器，或者将内嵌的JavaScript添加到HTML中。</p><p id="3e7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
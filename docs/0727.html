<html>
<head>
<title>How to write clean and easy to understand React code using class properties syntax</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用类属性语法编写清晰易懂的React代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-write-clean-and-easy-to-understand-react-code-using-class-properties-syntax-5b375b0618d3?source=collection_archive---------5-----------------------#2019-12-02">https://javascript.plainenglish.io/how-to-write-clean-and-easy-to-understand-react-code-using-class-properties-syntax-5b375b0618d3?source=collection_archive---------5-----------------------#2019-12-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bc6e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">不再需要在构造函数中绑定事件处理程序</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c9fa613514f721b920779c8a4c0540a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WhzRwYgKjIl2qf0D"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@filijs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Filiberto Santillán</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4472" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天，我们将看到一种简化React代码的方法，即不再需要绑定我们添加到组件中的每个新事件处理程序。</p><p id="7d8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">看看下面的代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="8a3f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现场演示:<a class="ae ks" href="https://codesandbox.io/s/boring-wu-qud80" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/boring-wu-qud80</a></p><p id="2206" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们有一个在开始时初始化为零的计数器。我们还添加了一个事件处理程序，当我们单击<code class="fe lr ls lt lu b">Add One</code>按钮时，它会将计数器值加1。</p><p id="11db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了在事件处理程序中使用关键字<strong class="kv io"> this </strong>,我们必须在构造函数中将其绑定为</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="bde5" class="lz ma in lu b gy mb mc l md me">this.handleAddOne = this.handleAddOne.bind(this);</span></pre><p id="b7ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，为了声明状态，我们必须创建一个构造函数，在其中添加一个超级调用，然后我们可以声明状态。这不仅麻烦，而且使代码变得不必要的复杂。<br/> <strong class="kv io"> <em class="mf">随着事件处理程序数量的增加，</em> </strong> <code class="fe lr ls lt lu b"><strong class="kv io"><em class="mf">.bind</em></strong></code> <strong class="kv io"> <em class="mf">调用的数量也随之增加。我们可以使用类属性语法来避免这样做。</em> </strong></p><p id="9cd5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">create-react-app已经内置了对它的支持，你现在就可以开始使用这个语法了</strong></p><p id="8cf8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以我们来详细探讨一下。</p><p id="e107" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">类属性语法允许我们在类内部直接绑定属性，如状态或实例变量，而不需要构造函数。</p><p id="33d3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mf">如您所知，箭头函数没有自己的上下文。它把</em> <strong class="kv io"> <em class="mf">这个</em> </strong> <em class="mf">的上下文从函数所在的地方放了出来。因此，我们可以将事件处理程序转换为arrow函数语法，该语法将使用类上下文，这将消除绑定</em> <strong class="kv io"> <em class="mf"> this的需要。</em> </strong></p><p id="7d2f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，使用新语法重写上面的反例:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="d83a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现场演示:<a class="ae ks" href="https://codesandbox.io/s/twilight-sea-lnk6z" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/twilight-sea-lnk6z</a></p><p id="680d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如你所看到的，我们已经将状态声明从构造函数直接移到了类内部，这将使状态成为类的属性。另外，我们已经将<code class="fe lr ls lt lu b">handleAddOne</code>事件处理程序从函数语法转换为箭头函数语法。</p><p id="ea52" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此该函数将保留<strong class="kv io">这个</strong>上下文<strong class="kv io">。所以最后，我们已经完全消除了添加构造函数的需要，这将使我们的代码更干净，更容易理解。</strong></p><p id="4c52" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这不仅仅局限于事件处理程序，你可以将组件内部定义的任何函数转换成箭头函数，以避免绑定<strong class="kv io">这个</strong>。</p><p id="434b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="mf">使用类属性语法是现在</em> </strong> <code class="fe lr ls lt lu b"><strong class="kv io"><em class="mf">React</em></strong></code> <strong class="kv io"> <em class="mf">世界中的新标准，每个人都在积极地使用它。</em>T13】</strong></p><p id="75a5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">安装:</strong></p><p id="9044" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.<strong class="kv io"/><code class="fe lr ls lt lu b">create-react-app</code><strong class="kv io">内置了对它的支持，所以你可以直接使用这个新语法，无需任何配置。</strong></p><p id="89f5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.如果您正在使用您自己的webpack设置，如本文中所述，并且您正在使用高于或等于7的babel版本，那么使用</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="fe45" class="lz ma in lu b gy mb mc l md me">npm install --save-dev @babel/plugin-proposal-class-properties</span></pre><p id="ba93" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">同样添加，<strong class="kv io">@ babel/plugin-proposal-class-properties</strong>到<code class="fe lr ls lt lu b">.babelrc</code>文件中的插件数组，如下所示</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="7a66" class="lz ma in lu b gy mb mc l md me">{<br/> "plugins": ["@babel/plugin-proposal-class-properties"]<br/>}</span></pre><p id="cae3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您已经准备好使用这个新语法了</p><p id="19ea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.如果您正在使用自己的webpack安装程序，并且使用的是低于7的babel版本，请使用</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="f62d" class="lz ma in lu b gy mb mc l md me">npm install --save-dev babel-plugin-transform-class-properties</span></pre><p id="2b8a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另外，将<strong class="kv io">transform-class-properties</strong>添加到<code class="fe lr ls lt lu b">.babelrc</code>文件中的插件数组，如下所示</p><pre class="kd ke kf kg gt lv lu lw lx aw ly bi"><span id="a11d" class="lz ma in lu b gy mb mc l md me">{<br/> "plugins": ["transform-class-properties"]<br/>}</span></pre><p id="27e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天到此为止。希望你今天学到了新东西。</p><p id="3c64" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">别忘了直接在你的收件箱</strong> <a class="ae ks" href="https://yogeshchavan.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">这里</strong> </a> <strong class="kv io">订阅我的每周简讯，里面有惊人的技巧、诀窍和文章。</strong></p></div></div>    
</body>
</html>
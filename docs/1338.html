<html>
<head>
<title>Automatic Image Resizing with Firebase Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase功能自动调整图像大小</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/automatic-image-resizing-with-firebase-functions-42a0e38b228a?source=collection_archive---------4-----------------------#2020-03-03">https://javascript.plainenglish.io/automatic-image-resizing-with-firebase-functions-42a0e38b228a?source=collection_archive---------4-----------------------#2020-03-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/83229b983787d0535f8962d3802d8603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbhmLvhhTiXi2pK30WuXTA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Camera Lens Landscape</figcaption></figure><p id="501f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本教程中，我们将在我之前的文章的基础上，用Vue、Dropzone和Firebase 实现一个<a class="ae la" href="https://medium.com/javascript-in-plain-english/drag-and-drop-image-upload-with-vue-js-dropzone-and-firebase-dd6fb7e2e54b" rel="noopener">拖放图像上传器。虽然这是一个好的开始，但还有一个步骤对于显示这些图像至关重要。我说的是调整它们的大小，使它们保持一致，并且不需要很长时间来加载。</a></p><p id="987d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本教程中，我们将使用Firebase函数。因为我的前一篇文章使用Firebase存储图像，所以使用它们的无服务器功能才有意义。此外，您可以轻松地将它们的功能连接到Firebase存储中。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Vidoe Tutorial</figcaption></figure><h1 id="8901" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">项目设置</h1><h2 id="f2df" class="mf li iq bd lj mg mh dn ln mi mj dp lr kn mk ml lv kr mm mn lz kv mo mp md mq bi translated">Firebase CLI</h2><p id="e87d" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">Firebase使得在我们的项目中安装样板函数变得非常简单。在我的上一篇文章中，我们注册了Firebase，并将配置添加到我们的项目中，但是对于功能，我们需要在我们的计算机上全局安装<a class="ae la" href="https://firebase.google.com/docs/cli" rel="noopener ugc nofollow" target="_blank"> Firebase CLI </a>。为此，打开您的终端并运行以下命令:</p><pre class="lb lc ld le gt mw mx my mz aw na bi"><span id="73d4" class="mf li iq mx b gy nb nc l nd ne">npm install -g firebase-tools</span></pre><p id="69da" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们已经安装了它，我们需要将其同步到我们的帐户。在命令提示符下运行以下命令并登录:</p><pre class="lb lc ld le gt mw mx my mz aw na bi"><span id="293e" class="mf li iq mx b gy nb nc l nd ne">firebase login</span></pre><p id="d746" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">登录后，在VS代码中打开项目(或项目根目录中的终端)，然后打开一个新终端(终端-&gt;新终端)。然后运行以下命令:</p><pre class="lb lc ld le gt mw mx my mz aw na bi"><span id="c1ef" class="mf li iq mx b gy nb nc l nd ne">firebase init</span></pre><p id="c2df" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我选择如下:<br/> 1。你准备好继续了吗？:Y <br/> 2。使用一个现有的项目:我选择我在上一篇文章中建立的项目。<br/> 3。语言:JavaScript <br/> 4。用ESLint？:是<br/> 5。与NPM一起安装？:是的</p><p id="e534" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，Firebase CLI将在您的项目中建立一个单独的函数文件夹。如果你打开它，你会看到它是一个独立的项目。在VS代码中，打开一个新的终端，将cd放入functions文件夹的根目录。然后运行以下命令:</p><pre class="lb lc ld le gt mw mx my mz aw na bi"><span id="64a4" class="mf li iq mx b gy nb nc l nd ne">npm install @google-cloud/storage sharp fs-extra uuid</span></pre><h1 id="3efa" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">图像缩放器</h1><p id="7b6f" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">接下来，在functions文件夹中，打开index.js。这是我们将用来编写图像resizer函数的文件。我们将利用每次存储对象完成上传时触发的<em class="nf"> onFinalize </em>函数。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="ng lg l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image Resizer Code</figcaption></figure><h2 id="b0d8" class="mf li iq bd lj mg mh dn ln mi mj dp lr kn mk ml lv kr mm mn lz kv mo mp md mq bi translated">部署功能</h2><p id="5d84" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">现在我们已经编写了函数，是时候将它部署到Firebase了。在VS代码中打开终端，并运行以下命令:</p><pre class="lb lc ld le gt mw mx my mz aw na bi"><span id="02c2" class="mf li iq mx b gy nb nc l nd ne">firebase deploy --only functions</span></pre><p id="ae3d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要验证已部署的功能，您可以登录Firebase控制台，然后转到“功能”选项卡(开发-&gt;功能)。您应该会看到类似这样的内容:</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/a05ae05dc36a9ff4f071e588bc5547ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YbcXpZeFkVCVxPDm3_cO5A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Firebase Functions</figcaption></figure><h2 id="3aa0" class="mf li iq bd lj mg mh dn ln mi mj dp lr kn mk ml lv kr mm mn lz kv mo mp md mq bi translated">解决纷争</h2><p id="7d08" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">如果您在此过程中遇到任何问题，您可以通过单击主功能页面的日志选项卡来查看您的日志。通过使用控制台语句，您可以将任何内容打印到日志中。</p><h1 id="cfd6" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><p id="3694" class="pw-post-body-paragraph kc kd iq ke b kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv mv kx ky kz ij bi translated">现在，您有了一个每次上传文件时都会自动触发的图像大小调整器。如果您对本文有任何问题或疑虑，请在下面留下您的评论。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="ni lg l"/></div></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Why you should care about the Virtual DOM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么您应该关注虚拟DOM</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-care-about-the-virtual-dom-4452cae95f10?source=collection_archive---------20-----------------------#2020-11-11">https://javascript.plainenglish.io/why-you-should-care-about-the-virtual-dom-4452cae95f10?source=collection_archive---------20-----------------------#2020-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/8380266731996889cef151a9fd581a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2rac_zWeNDnXSc1I"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://unsplash.com/@florianolv" rel="noopener ugc nofollow" target="_blank">@florianolv</a> unsplash.com</figcaption></figure><div class=""/><div class=""><h2 id="33bd" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">了解React如何使用虚拟DOM</h2></div><p id="fbd0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虚拟DOM是React库中的一个概念，是其工作原理的核心。在本文中，您将逐渐理解它是什么，它可能看起来像什么以及React为什么使用它的基本抽象。</p><h1 id="506c" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">什么是虚拟DOM？</h1><p id="de60" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">把虚拟DOM想象成一个概念，在React代码库中没有叫做虚拟DOM的东西。它作为一个有用的工具来完成React的任务，创建处理状态的用户界面组件(我们将在下面简要定义状态)</p><p id="ea94" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虚拟DOM是DOM的内存表示。它有相同的属性，但是没有像DOM一样把它放到屏幕上的开销。当DOM第一次被构思的时候，频繁地改变页面上的内容并不是一个真正的概念。然而，随着网站变得越来越复杂，拥有这种频繁改变的能力是一个主要的优势。</p><p id="4cf8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你会看到很多关于虚拟DOM的文章，但本质上它只是一个普通的旧JavaScript对象。这个对象可以很容易地操作，这也是React使用它作为构造的原因。</p><p id="f756" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虚拟DOM的另一个经常变化的方面是状态的概念。本质上，状态是一种在组件中存储数据的方式，该组件可以更改，并可用于在页面上显示您希望动态显示的内容。你可以想象在一个复杂的网站中，可能有很多东西你想改变，并保持跟踪记录。通过普通的DOM操作来做这件事变成了一项笨拙的任务。React在这方面做得最好，所以当我谈到处理状态的用户界面时，这就是我的意思。</p><p id="36bf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React还允许我们进行声明，也就是说，我们不关心React如何做我们想要做的事情。我们只是希望能够告诉它我们希望组件处于什么状态，并让React最终相应地操作DOM。此外，每次状态改变时，虚拟DOM都会更新。这是我们跟踪所有状态的方法。</p><h1 id="24ff" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">虚拟DOM的基本抽象</h1><p id="eb73" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们把一些代码放进去。这是虚拟DOM的一个非常精简的版本。</p><p id="27d4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设我们有一个列表组件，它对应于一个无序列表。它可能看起来像这样</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="d9c8" class="mx ls jg mt b gy my mz l na nb">const list = {<br/>    tagName: "ul",<br/>    attributes: { "class": "list" },<br/>    children: [<br/>        {<br/>            tagName: "li",<br/>            attributes: { "class": "list__item" },<br/>            textContent: "List item"<br/>        }<br/>    ]<br/>};</span></pre><p id="0955" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以你现在一定在想这个虚拟DOM是怎么创建的？任何时候我们写任何JSX，它都会被转换成一个<code class="fe nc nd ne mt b">React.Element</code>函数。这将返回一个对象，而这个对象就是虚拟DOM的一部分。每当你对此感到困惑时，回想一下。</p><h1 id="c963" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">React如何使用虚拟DOM</h1><p id="2e57" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">当需要进行更改时，可以通过创建一个新的虚拟DOM来更新虚拟DOM，并应用预期的更改。</p><p id="0ff8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每次使用<code class="fe nc nd ne mt b">ReactDOM.render()</code>函数渲染JSX元素时，都会创建一个全新的虚拟DOM。乍一看，这似乎是低效的，但这样做的成本是微不足道的，我们实际上是在创建一组对象。</p><p id="6373" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个React在非常基础的层面上做什么的例子，这里我们复制了上面的虚拟DOM的例子</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="0245" class="mx ls jg mt b gy my mz l na nb">const copy = {<br/>    tagName: "ul",<br/>    attributes: { "class": "list" },<br/>    children: [<br/>        {<br/>            tagName: "li",<br/>            attributes: { "class": "list__item" },<br/>            textContent: "List item one"<br/>        },<br/>        {<br/>            tagName: "li",<br/>            attributes: { "class": "list__item" },<br/>            textContent: "List item two"<br/>        }<br/>    ]<br/>};</span></pre><p id="021a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后将这个新的DOM副本与之前的虚拟DOM的快照进行比较。React然后产生一组指令，告诉我们在这两个版本的虚拟DOM之间需要改变什么。这个过程叫做diffing。React决定如何有效地进行这些更改，并且只更改这些更改的DOM。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="2925" class="mx ls jg mt b gy my mz l na nb">const diffs = [<br/>    {<br/>        newNode: { /* new version of list item one */ },<br/>        oldNode: { /* original version of list item one */ },<br/>        index: /* index of element in parent's list of child nodes */<br/>    },<br/>    {<br/>        newNode: { /* list item two */ },<br/>        index: { /* */ }<br/>    }<br/>]</span></pre><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/72085402064f25aa0dbd9ed827912b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4GyCwIZkeVIoMCNw.PNG"/></div></div></figure><p id="2b89" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它本质上同步了虚拟DOM和DOM。这也意味着React只改变DOM一次。这个比较和改变虚拟DOM到最终DOM操作的整个过程被称为协调。</p><p id="7bd8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这样做的好处是，我们作为编码人员不必关心这是如何发生的，React将这个负担从我们身上带走，并允许我们关注其他问题。</p><p id="175d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以现在您应该已经很好地掌握了虚拟DOM的基础知识，以及React如何从高层结构中工作。下次见！</p><h2 id="0a03" class="mx ls jg bd lt ng nh dn lx ni nj dp mb le nk nl md li nm nn mf lm no np mh nq bi translated">其他文章</h2><div class="ip iq gp gr ir nr"><a href="https://medium.com/javascript-in-plain-english/why-you-should-care-about-how-the-browsers-work-in-react-749bcbecc32f" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd jh gy z fp nw fr fs nx fu fw jf bi translated">为什么您应该关心浏览器在React中的工作方式</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">了解DOM与JavaScript的关系</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ix nr"/></div></div></a></div><div class="ip iq gp gr ir nr"><a href="https://medium.com/javascript-in-plain-english/why-do-we-have-to-wrap-react-components-b168232dbd3a" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd jh gy z fp nw fr fs nx fu fw jf bi translated">为什么我们必须包装React组件？</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">理解React应用程序中的div包装！</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of ix nr"/></div></div></a></div><div class="ip iq gp gr ir nr"><a href="https://medium.com/javascript-in-plain-english/why-you-should-be-using-react-fragments-a5d8314a59ff" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd jh gy z fp nw fr fs nx fu fw jf bi translated">为什么应该使用React片段</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">如何使用React提升React应用程序？碎片</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of ix nr"/></div></div></a></div><h2 id="5379" class="mx ls jg bd lt ng nh dn lx ni nj dp mb le nk nl md li nm nn mf lm no np mh nq bi translated">关于作者</h2><p id="f70b" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我是一名执业医师和教育家，也是一名网站开发者。请点击<a class="ae jd" href="https://dev.to/aaronsm46722627/www.coding-medic.com" rel="noopener ugc nofollow" target="_blank">这里</a>了解我在博客和其他帖子上关于项目的更多细节。如果你想和我联系，请在这里联系:<a class="ae jd" href="mailto:aaron.smith.07@aberdeen.ac.uk" rel="noopener ugc nofollow" target="_blank">aaron . Smith . 07 @ aberdeen . AC . uk</a>或在推特上@aaronsmithdev。</p></div></div>    
</body>
</html>
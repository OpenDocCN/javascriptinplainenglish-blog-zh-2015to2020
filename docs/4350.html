<html>
<head>
<title>Remove A Property From An Object In JavaScript With This Little Trick</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这个小技巧在JavaScript中删除对象的属性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/remove-a-property-from-an-object-in-javascript-with-this-little-trick-2c9405d29e35?source=collection_archive---------3-----------------------#2020-12-05">https://javascript.plainenglish.io/remove-a-property-from-an-object-in-javascript-with-this-little-trick-2c9405d29e35?source=collection_archive---------3-----------------------#2020-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8c0c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在reducers中使用JavaScript spread语法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1efd006023a684eb0b07e4382c3176bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzcA27PffG9a7LxfawtsyA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@devano23?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Devon Janse van Rensburg</a> on <a class="ae kv" href="https://unsplash.com/s/photos/remove-property?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b775" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用reducer中的函数时，我遇到了一个简洁的模式(一个<code class="fe ls lt lu lv b">useReducer()</code>钩子，不是redux)。</p><h2 id="ceff" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated"><strong class="ak">目标</strong></h2><p id="c4ce" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">我需要从state中存储的列表(只是一个普通的对象)中删除一个特定的属性。</p><p id="7b9c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有物业id，所以应该不会太难。</p><p id="5ae8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们在一个reducer中工作时，我们需要警惕状态突变和函数的副作用。即，我们想要返回新的和更新的状态，而不改变原始状态。</p><p id="2c95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是我最初尝试使用reducer函数的一个例子:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="dd6d" class="lw lx iq lv b gy my mz l na nb">function deleteProperty(state, payload) {<br/>  const { id } = payload <br/> <br/>  // make a copy of the state variable to avoid mutation<br/>  const newState = Object.assign({}, state)</span><span id="4244" class="lw lx iq lv b gy nc mz l na nb">  const { list } = newState</span><span id="42f9" class="lw lx iq lv b gy nc mz l na nb"><em class="nd">  // delete the property for the id<br/>  delete list[id]</em></span><span id="881d" class="lw lx iq lv b gy nc mz l na nb">  return newState<br/>}</span></pre><p id="f8da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nd">注意:这是一个来自更复杂的减速器函数的人为例子，只是试图说明其中的一部分！</em></p><p id="ab55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它不太复杂，只有几行代码，但是我们可以做得更好！</p><h2 id="d853" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated"><strong class="ak">使用扩展语法克隆对象</strong></h2><p id="0a98" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">使用JavaScript，我们可以使用spread语法创建一个对象的新的浅层克隆，而不是使用<code class="fe ls lt lu lv b">Object.assign</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="e807" class="lw lx iq lv b gy my mz l na nb">let obj1 = { foo: 'bar', x: 42 };<br/><br/>let clonedObj = { ...obj1 }</span></pre><p id="745c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按照这种模式，我们还可以使用恰当命名的rest参数来扩展对象的“Rest”。</p><p id="f69f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" rel="noopener ugc nofollow" target="_blank">MDN文档</a>:</p><blockquote class="ne nf ng"><p id="411b" class="kw kx nd ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated">rest参数语法允许我们将不定数量的参数表示为一个数组。</p></blockquote><h2 id="1d69" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">解决方案</h2><p id="b51a" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">因此，在这种情况下，我们知道要删除的属性的id，并且只想克隆对象的“其余部分”,我们可以执行以下操作:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="1ce8" class="lw lx iq lv b gy my mz l na nb">function deleteProperty(state, payload) {<br/>  const { id } = payload</span><span id="8a28" class="lw lx iq lv b gy nc mz l na nb">  // clone the list, excluding the property with the selected id<br/>  const { [id]: remove, ...newList } = state.list</span><span id="3133" class="lw lx iq lv b gy nc mz l na nb">  // return a clone of the state variable to avoid mutation<br/>  return { ...state, list: newList }</span><span id="def1" class="lw lx iq lv b gy nc mz l na nb">}</span></pre><p id="50b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们只关注这条线:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="69d5" class="lw lx iq lv b gy my mz l na nb">const { [id]: remove, ...newList } = state.list</span></pre><p id="2b4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将关键字<code class="fe ls lt lu lv b">id</code>的属性值赋给一个名为remove的变量(变量名无关紧要)，并将对象的“其余部分”分配给一个名为<code class="fe ls lt lu lv b">newList</code>的变量。</p><p id="fc95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着我们的<code class="fe ls lt lu lv b">newList</code>变量将是原始变量<code class="fe ls lt lu lv b">list</code>的克隆，减去属性<code class="fe ls lt lu lv b">id</code>。</p><h2 id="ee53" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">其他类似文章</h2><div class="nk nl gp gr nm nn"><a href="https://medium.com/javascript-in-plain-english/which-equals-operator-should-i-use-in-javascript-comparisons-vs-c3bc44960518" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">我应该在JavaScript比较中使用哪个等号运算符？(== vs ===)</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在JavaScript == vs ===中比较东西，应该用哪个？</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><div class="nk nl gp gr nm nn"><a href="https://medium.com/javascript-in-plain-english/how-to-remove-an-element-from-an-array-in-javascript-54612785295e" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">如何在JavaScript中从数组中移除元素</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">在JavaScript中从数组中快速移除元素的两种方法</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob kp nn"/></div></div></a></div></div></div>    
</body>
</html>
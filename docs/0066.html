<html>
<head>
<title>How to add drag &amp; drop in Vue.js apps the easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何简单地在Vue.js应用程序中添加拖放功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-drag-drop-in-vue-js-apps-the-easy-way-9417c819e20f?source=collection_archive---------5-----------------------#2019-01-17">https://javascript.plainenglish.io/how-to-add-drag-drop-in-vue-js-apps-the-easy-way-9417c819e20f?source=collection_archive---------5-----------------------#2019-01-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9b71ac8be47a28f89d6afbcc714b06be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2F_ZBgGBkU9xSspwMRTIgQ.jpeg"/></div></div></figure><div class=""/><p id="40ec" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">拖放功能在手机和网络上的各种应用中都可以找到。虽然我们认为拖放在任何应用程序中都是一个好的UI模式，但是自己实现它可能比预期的更具挑战性。除了官方的<a class="ae kw" href="https://www.html5rocks.com/en/tutorials/dnd/basics/" rel="noopener ugc nofollow" target="_blank"> HTML5-API </a>，还有几个JavaScript库提供了在你的web应用中实现拖放的定制解决方案。</p><p id="30fb" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">拖放通常用于排序和重新排序列表。然而，除了简单的列表之外，拖放还可以用于各种上下文中:例如，您可以拖放文件来上传它，或者您可以自由地移动元素。对于这些和更高级的用例，有更强大的解决方案，如<a class="ae kw" href="https://github.com/Shopify/draggable" rel="noopener ugc nofollow" target="_blank">可拖动</a>可用。</p><p id="0676" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尽管Draggable可以在不考虑您可能使用的任何JS框架的情况下实现，但它可以很容易地集成到流行的<a class="ae kw" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>框架中。我将使用TypeScript作为代码示例，但这也可以用普通的JavaScript来完成。</p><figure class="ky kz la lb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi kx"><img src="../Images/c14c884229c2da9f104c6849649e3126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbC-H4dmUDM7xnRjwoA4cQ.png"/></div></div></figure><h2 id="dc80" class="lc ld jb bd le lf lg dn lh li lj dp lk kj ll lm ln kn lo lp lq kr lr ls lt lu bi translated">初始设置</h2><p id="0515" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">首先，你需要创建一个Vue.js项目(比如用<a class="ae kw" href="https://cli.vuejs.org/guide/creating-a-project.html" rel="noopener ugc nofollow" target="_blank"> Vue CLI </a>)并通过NPM安装可拖动库。</p><pre class="ky kz la lb gt ma mb mc md aw me bi"><span id="ba39" class="lc ld jb mb b gy mf mg l mh mi">npm install @shopify/draggable</span></pre><p id="33ca" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，因为Vue.js可以在没有NPM的情况下使用，所以你也可以通过CDN获得这个可拖动的库。</p><pre class="ky kz la lb gt ma mb mc md aw me bi"><span id="c6a9" class="lc ld jb mb b gy mf mg l mh mi">&lt;!-- Entire bundle; alternative when not using NPM --&gt;<br/>&lt;script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.8/lib/draggable.bundle.js"&gt;&lt;/script&gt;</span></pre><h2 id="f3c2" class="lc ld jb bd le lf lg dn lh li lj dp lk kj ll lm ln kn lo lp lq kr lr ls lt lu bi translated">指令</h2><p id="c000" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://vuejs.org/v2/guide/syntax.html#Directives" rel="noopener ugc nofollow" target="_blank">指令</a>是带有<code class="fe mj mk ml mb b">v-</code>前缀的特殊属性。指令的工作是当它的表达式的值改变时，对DOM反应性地应用副作用。在本例中，我们创建了一个可排序的指令，允许我们对列表中的元素进行重新排序。</p><pre class="ky kz la lb gt ma mb mc md aw me bi"><span id="49ec" class="lc ld jb mb b gy mf mg l mh mi"><em class="mm">import </em>{<em class="mm">DirectiveOptions</em>} <em class="mm">from </em>'vue';<br/><em class="mm">import </em>{Vue} <em class="mm">from </em>"vue-property-decorator";<br/>import { Sortable } from ‘@shopify/draggable’;</span><span id="0624" class="lc ld jb mb b gy mn mg l mh mi"><em class="mm">const </em>sortableDirective: <em class="mm">DirectiveOptions </em>= {<br/>   inserted(el: <em class="mm">HTMLElement</em>, node, vNode) {<br/>      <em class="mm">new </em>Sortable(el, node.value);<br/>   }<br/>};<br/><br/>Vue.directive('sortable', sortableDirective);<br/><br/><em class="mm">export default </em>sortableDirective;</span></pre><p id="98af" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们可以在HTML模板中使用v-sortable指令:</p><pre class="ky kz la lb gt ma mb mc md aw me bi"><span id="893f" class="lc ld jb mb b gy mf mg l mh mi">&lt;template&gt;<br/>  &lt;ul <em class="mm">v-sortable=</em>"defaultOptions"&gt;<br/>     &lt;li&gt;&lt;a <em class="mm">href=</em>"https://vuejs.org" <em class="mm">target=</em>"_blank" <em class="mm">rel=</em>"noopener"&gt;Core Docs&lt;/a&gt;&lt;/li&gt;<br/>     &lt;li&gt;&lt;a <em class="mm">href=</em>"https://forum.vuejs.org" <em class="mm">target=</em>"_blank" <em class="mm">rel=</em>"noopener"&gt;Forum&lt;/a&gt;&lt;/li&gt;<br/>     &lt;li&gt;&lt;a <em class="mm">href=</em>"https://chat.vuejs.org" <em class="mm">target=</em>"_blank" <em class="mm">rel=</em>"noopener"&gt;Community Chat&lt;/a&gt;&lt;/li&gt;<br/>     &lt;li&gt;&lt;a <em class="mm">href=</em>"https://twitter.com/vuejs" <em class="mm">target=</em>"_blank" <em class="mm">rel=</em>"noopener"&gt;Twitter&lt;/a&gt;&lt;/li&gt;<br/>     &lt;li&gt;&lt;a <em class="mm">href=</em>"https://news.vuejs.org" <em class="mm">target=</em>"_blank" <em class="mm">rel=</em>"noopener"&gt;News&lt;/a&gt;&lt;/li&gt;<br/>  &lt;/ul&gt;<br/>&lt;/template&gt;<br/>&lt;script <em class="mm">lang=</em>"ts"&gt;<br/>   <em class="mm">import </em>{Component, Vue} <em class="mm">from </em>"vue-property-decorator";<br/>   <em class="mm">import </em>sortableDirective <em class="mm">from </em>"@/directives/sortable.directive";<br/><br/>   @Component({<br/>      directives: {sortableDirective} // include the directive<br/>   })<br/>   <em class="mm">export default class </em>SortableList <em class="mm">extends </em>Vue {<br/>      defaultOptions = {<br/>         draggable: 'li',<br/>         mirror: {<br/>            constrainDimensions: <em class="mm">true</em>,<br/>         }<br/>      };<br/>&lt;/script&gt;</span></pre><h2 id="b068" class="lc ld jb bd le lf lg dn lh li lj dp lk kj ll lm ln kn lo lp lq kr lr ls lt lu bi translated">服务</h2><p id="7f40" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有时，您希望拖放是动态可用的(例如，对于通过jQuery等第三方库插入的动态内容)。或者您希望对创建的实例有更多的控制，以便对拖放行为有更多的控制。这是一个基本类，它提供了为任何HTML元素启用拖放功能的函数。</p><pre class="ky kz la lb gt ma mb mc md aw me bi"><span id="d445" class="lc ld jb mb b gy mf mg l mh mi"><em class="mm">import </em>{Draggable, Droppable, Sortable, Swappable} <em class="mm">from </em>'@shopify/draggable';<br/><br/><em class="mm">export class </em>DragDropService {<br/><br/>   <em class="mm">private readonly </em>defaultSortableOptions = {<br/>      mirror: {<br/>         constrainDimensions: <em class="mm">true</em>,<br/>      }<br/>   };<br/><br/>   createDraggable(containerElement: <em class="mm">HTMLElement</em>, options: <em class="mm">object </em>= <em class="mm">this</em>.defaultSortableOptions) {<br/>      <em class="mm">return new </em>Draggable(containerElement, options);<br/>   }<br/><br/>   createDroppable(containerElement: <em class="mm">HTMLElement</em>, options?: <em class="mm">any</em>) {<br/>      <em class="mm">return new </em>Droppable(containerElement, options);<br/>   }<br/><br/>   createSortable(containerElement: <em class="mm">HTMLElement</em>, options: <em class="mm">object </em>= <em class="mm">this</em>.defaultSortableOptions) {<br/>      <em class="mm">return new </em>Sortable(containerElement, options);<br/>   }<br/><br/>   createSwappable(containerElement: <em class="mm">HTMLElement</em>, options: <em class="mm">object </em>= <em class="mm">this</em>.defaultSortableOptions) {<br/>      <em class="mm">return new </em>Swappable(containerElement, options);<br/>   }<br/><br/>}</span></pre><h2 id="a356" class="lc ld jb bd le lf lg dn lh li lj dp lk kj ll lm ln kn lo lp lq kr lr ls lt lu bi translated">结论</h2><p id="0d08" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">感谢阅读这篇文章！正如你所看到的，让拖放在Vue.js中工作是相当容易和快速的，这要感谢像Draggable这样的库很容易与Vue.js集成。如果它对你有帮助，请在评论中告诉我。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Strongly typing your Angular Route data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">强烈输入您的角度路线数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/strongly-typing-your-angular-route-data-ddef7719491f?source=collection_archive---------1-----------------------#2020-05-23">https://javascript.plainenglish.io/strongly-typing-your-angular-route-data-ddef7719491f?source=collection_archive---------1-----------------------#2020-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b91a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着Angular项目的增长，向路径中添加数据是很常见的。有些数据对所有路由都是强制性的，有些则不是。但是在任何情况下，强类型化你的路线都是有用的，就像你的代码库的其他部分一样。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/b7c1b3f831cdedd1e731d1cec160044f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d9o68lbtgwztDQ-w519nSg.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Image courtesy of <a class="ae lb" href="https://unsplash.com/@bdchu614" rel="noopener ugc nofollow" target="_blank">Brendan Church</a></figcaption></figure><p id="d205" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将快速浏览角度路由器的基本数据类型，然后我们将探索如何强类型化我们的角度路由。</p><h1 id="00b1" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">角度路由器API数据类型</h1><p id="3ae9" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Angular路由器API为我们提供了多种数据类型。这里是一个真正的快速回顾。</p><p id="cc4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最重要的当然是<a class="ae lb" href="https://angular.io/api/router/Route" rel="noopener ugc nofollow" target="_blank">路线</a>。路由对象定义了单条路由的配置，其中<em class="mf">可能</em>包括(除其他之外):</p><ul class=""><li id="29fc" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">一条小路</li><li id="d2a9" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">一个组件</li><li id="7515" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">目标路由器出口</li><li id="07ce" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">防护装置(可激活、可停用等)</li><li id="956d" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">解决方案(如果可以的话，忘掉那些！)</li><li id="f058" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">儿童路线</li><li id="f780" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">数据</li><li id="9fb1" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi">…</li></ul><p id="0647" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你熟悉Angular路由器，那么你可能对所有这些都了如指掌。</p><p id="dc28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">data属性是您可以用来嵌入附加数据的属性，它将作为<a class="ae lb" href="https://angular.io/api/router/ActivatedRoute" rel="noopener ugc nofollow" target="_blank"> ActivatedRoute </a>的一部分由路由器提供。ActivatedRoute可以很容易地注入到您的组件或服务中(例如，通过<code class="fe mu mv mw mx b">firstChild?.routeConfig?.data</code>)；我已经在我最近写的滚动服务中利用了这个特性。</p><p id="fba8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，在您的应用程序中几乎总是会有不止一条路线。所有这些路由都需要添加到一个<a class="ae lb" href="https://angular.io/api/router/Routes" rel="noopener ugc nofollow" target="_blank"> Routes </a>对象中，这个对象只不过是一个Route对象的数组(类型简单地定义为<code class="fe mu mv mw mx b">type Routes = Route[]</code>)。</p><p id="3164" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦定义了Routes对象，您只需将它提供给<a class="ae lb" href="https://angular.io/api/router/RouterModule" rel="noopener ugc nofollow" target="_blank">router module</a>；要么通过<code class="fe mu mv mw mx b">RouterModule.forRoot</code>要么通过<code class="fe mu mv mw mx b">RouterModule.forChild</code>，这取决于你是在根模块中还是在一个惰性加载/子模块中。</p><p id="87ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦定义了路由器配置，就可以开始了。当Angular路由器需要激活不同的路由时，它会尝试将目的地URL的段与它所接收到的不同路由对象进行匹配。但这不是本文的主题，我们就讲到这里。</p><p id="19b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我们已经回顾了基本类型，让我们来介绍一下我们自己的类型吧！</p><h1 id="9253" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">强烈输入您的路线定义</h1><p id="fb42" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了强类型化我们的角度路由定义，我们可以扩展上一节中讨论的基本类型。</p><p id="ae6a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">值得探究的是“数据”属性的类型。默认为<a class="ae lb" href="https://angular.io/api/router/Data" rel="noopener ugc nofollow" target="_blank">，定义如下</a>:</p><pre class="km kn ko kp gt my mx mz na aw nb bi"><span id="dcb8" class="nc ld iq mx b gy nd ne l nf ng">type <a class="ae lb" href="https://angular.io/api/router/Data" rel="noopener ugc nofollow" target="_blank">Data</a> = {     [name: string]: any; };</span></pre><p id="f3a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您所看到的，这是一个简单的记录(即字典),带有字符串键和作为值的<em class="mf">或其他</em>。为了改进这一点，我们可以简单地扩展这个基本类型。这里有一个例子:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="b39f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上所述，我用额外的属性扩展了Angular提供的默认类型；一个是强制性的。</p><p id="8282" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过使用这个接口而不是默认接口，我们已经可以从TS编译器获得更多的帮助。在我的项目中，我甚至没有扩展默认的<code class="fe mu mv mw mx b">Data</code>类型。超级严格…或者不严格，就看你自己了。</p><p id="1df9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们如何使用这个自定义界面？我们还必须扩展<code class="fe mu mv mw mx b">Route</code>类型的角度:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="5718" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们快到了。这一次，我们用自己的属性替换了<code class="fe mu mv mw mx b">Route</code>接口的默认<code class="fe mu mv mw mx b">data</code>属性。接下来的确是<code class="fe mu mv mw mx b">Routes</code>型:</p><pre class="km kn ko kp gt my mx mz na aw nb bi"><span id="82ad" class="nc ld iq mx b gy nd ne l nf ng">export type CustomRoutes = CustomRoute[];</span></pre><p id="0f21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了它，我们可以用它来定义根和子/惰性加载模块中的路由数组:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="8799" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，这一切并不复杂，好处也相当明显:</p><ul class=""><li id="f85d" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">明确的期望</li><li id="daf6" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">标准化</li><li id="00ea" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">防呆的</li></ul><h1 id="ef6a" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="7f8d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在本文中，我快速回顾了角度路由器的主要数据类型，并向您展示了如何强类型化路由定义。</p><p id="6131" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你花时间做这件事，那么无论何时你忘记了什么或者需要重构路由器配置，编译器都会帮你解决。</p><p id="bb46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">喜欢打字稿！；-)</p><p id="ed9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止！</p><p id="be7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">如果你想了解大量关于软件/Web开发、TypeScript、Angular、React、Vue、Kotlin、Java、Docker/Kubernetes和其他很酷的主题，那么不要犹豫，去</em> <a class="ae lb" href="https://www.amazon.com/Learn-TypeScript-Building-Applications-understanding-ebook/dp/B081FB89BL" rel="noopener ugc nofollow" target="_blank"> <em class="mf">拿一本我的书</em> </a> <em class="mf">并订阅</em> <a class="ae lb" href="https://mailchi.mp/fb661753d54a/developassion-newsletter" rel="noopener ugc nofollow" target="_blank"> <em class="mf">我的简讯</em> </a> <em class="mf">！</em></p><h2 id="0329" class="nc ld iq bd le nj nk dn li nl nm dp lm jy nn no lq kc np nq lu kg nr ns ly nt bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="6219" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae lb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae lb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">订阅我们的YouTube频道</strong> </a> <strong class="jp ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
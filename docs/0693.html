<html>
<head>
<title>A Common JavaScript Interview Question Asked By Google &amp; Amazon</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌和亚马逊问的一个常见的JavaScript面试问题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-common-javascript-interview-question-asked-by-google-amazon-f18a260dabde?source=collection_archive---------0-----------------------#2019-11-27">https://javascript.plainenglish.io/a-common-javascript-interview-question-asked-by-google-amazon-f18a260dabde?source=collection_archive---------0-----------------------#2019-11-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="36d0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我见过谷歌、亚马逊甚至更小的科技公司提出这个问题，以淘汰JS开发者。</h2></div><h1 id="691b" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">这是一个普遍而典型的终结问题:</h1><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/320cf7847d0a64a7a9735d027318eaf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*086djO7cYARzygr-EZb7Jw.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">This code deals with closure, setTimeout and scoping</figcaption></figure><p id="56b2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">面试官问这种问题是为了测试你对重要JavaScript概念的了解。通过正确回答这个问题，可以展示你对块作用域、闭包、anon函数、立即调用函数表达式(IIFE)的理解。</p><p id="dba8" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">那么，3秒钟过后，上面的代码会输出什么呢？</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/724c7a08d03ea3df61796a155369d6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*JLER6cvNrVgjAyrlA6-C2g.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Confused? Keep reading below</figcaption></figure><p id="8e28" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们看到这个输出的原因是因为setTimeout函数创建了一个函数()(它是闭包)。记住:JavaScript闭包是指内部函数可以访问其外部封闭函数的变量和属性。它创建的函数可以访问包含索引为<em class="mk"> i </em>的for循环的外部作用域。现在，在3秒钟过去(3000)后，可以执行该功能，并开始控制台记录<em class="mk"> i </em>的值。这里的<em class="mk"> i </em>值是多少？循环结束时，<em class="mk"> i </em>为4，因为它经过0，1，2，3，4。所以，当它到达4时，循环停止。你也可以看到这一点，因为arr[4]不存在(未定义)。</p><p id="8320" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">由于原始代码有const，我们来看一个简单的ES6解决方案/修复:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ml"><img src="../Images/c4cdd0210b07b3d9071d7c6c175e49c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b5kDfgQyZJr1YjNBetRM1w.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Replace var with let</figcaption></figure><p id="8bb3" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">使用ES6，您可以快速创建代码的解决方案。通过将<em class="mk"> var </em>改为<em class="mk"> let，</em>it<em class="mk">T15】允许<em class="mk"> i </em>至<em class="mk">T19】的值被“保持”直到setTimeout结束。</em></em></p><p id="5008" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">然后我们得到了我们想要的:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/95073f3599a5820a9d3e2ba3b1559db2.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*noUqbVl4txVdnfg0vsbitQ.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">The correct output for each index in the array</figcaption></figure><p id="912c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">对于那些不熟悉ES6的人，这里有一个更老的JS方法来解决它:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi mn"><img src="../Images/3817e254535f65f58d078690a360403a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oiQyFEvIS_PnfNr6pzP55w.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Produces the same output as the ES6 code above</figcaption></figure><p id="2baa" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果这个例子令人困惑，我建议阅读JS闭包和作用域。一个好的起点是我在<a class="ae mo" href="https://medium.com/javascript-in-plain-english/lets-talk-about-scope-baby-3241c6dff1e4" rel="noopener"> Javascript范围</a>上的最后一篇中型文章😉！</p></div></div>    
</body>
</html>
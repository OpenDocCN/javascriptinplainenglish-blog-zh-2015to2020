<html>
<head>
<title>Tracking COVID-19 with a Mobile App using Ionic React.js, and Chart.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用移动应用跟踪新冠肺炎</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/tracking-covid-19-with-a-mobile-app-using-ionic-react-js-and-chart-js-e8e27b2acf2e?source=collection_archive---------12-----------------------#2020-04-27">https://javascript.plainenglish.io/tracking-covid-19-with-a-mobile-app-using-ionic-react-js-and-chart-js-e8e27b2acf2e?source=collection_archive---------12-----------------------#2020-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f8dbd680fdd9363f1c9d2c5507b97fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IMGFOhpSf__r65TU0H0dvg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">COVID-19</figcaption></figure><p id="d041" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我的上一篇文章<a class="ae la" href="https://levelup.gitconnected.com/building-covid-19-dashboard-with-charts-js-and-vue-js-5b054443fa4" rel="noopener ugc nofollow" target="_blank"/>中，我写了一篇关于如何使用Vue.js和Chart.js创建一个仪表板的教程。这个教程很受欢迎，但是我觉得移动应用会更方便。在本教程中，我们将介绍如何使用<a class="ae la" href="https://ionicframework.com/" rel="noopener ugc nofollow" target="_blank">离子</a>、<a class="ae la" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">reactor . js</a>和<a class="ae la" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>创建新冠肺炎跟踪应用程序。</p><h1 id="fa29" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">离子命令行界面</h1><p id="e4f3" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">要生成离子应用程序，我们需要安装离子CLI。打开您的终端并运行以下命令:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="be15" class="mn lc iq mj b gy mo mp l mq mr">npm install -g @ionic/cli</span></pre><h1 id="be69" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">项目设置</h1><p id="f7b2" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我们要做的第一件事是创建一个基本的离子键应用程序，并指定React.js的语言。打开您的终端，cd到所需的目录中，然后运行以下命令:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4d53" class="mn lc iq mj b gy mo mp l mq mr">ionic start covid-app tabs --type=react</span></pre><p id="b939" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">项目生成完成后，在您的首选代码编辑器中打开它。我将使用VS代码。然后，在项目的根目录下打开一个终端(在VS代码中，终端= &gt;新终端)，并运行以下命令:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4317" class="mn lc iq mj b gy mo mp l mq mr">npm i axios moment chart.js react-chartjs-2</span></pre><h1 id="54b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">App.tsx</h1><p id="5487" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">CLI生成我们的应用程序后，在您的首选代码编辑器中打开该项目(我将使用VS代码)。然后，打开src/App.tsx。在文件的顶部，您会看到这个导入:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cb68" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">import</em> { ellipse, square, triangle } <em class="ms">from</em> 'ionicons/icons';</span></pre><p id="a5a3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们将用以下内容替换该行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3e85" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">import</em> { locateOutline, mapOutline } <em class="ms">from</em> "ionicons/icons";</span></pre><p id="9075" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">接下来，我们将从应用程序中删除第三个选项卡。找到并删除这些线条:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5212" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">import</em> Tab3 <em class="ms">from</em> "./pages/Tab3";</span><span id="5db0" class="mn lc iq mj b gy mt mp l mq mr">&lt;Route <em class="ms">path</em>="/tab3" <em class="ms">component</em>={Tab3} /&gt;</span><span id="4ef7" class="mn lc iq mj b gy mt mp l mq mr">&lt;IonTabButton <em class="ms">tab</em>="tab3" <em class="ms">href</em>="/tab3"&gt;<br/>  &lt;IonIcon <em class="ms">icon</em>={square} /&gt;<br/>  &lt;IonLabel&gt;Tab 3&lt;/IonLabel&gt;<br/>&lt;/IonTabButton&gt;</span></pre><p id="5350" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于剩下的标签，我们将更改标签和图标。找到锂离子电池组件并更换为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c4bf" class="mn lc iq mj b gy mo mp l mq mr">&lt;IonTabBar <em class="ms">slot</em>="bottom"&gt;<br/>  &lt;IonTabButton <em class="ms">tab</em>="tab1" <em class="ms">href</em>="/tab1"&gt;<br/>    &lt;IonIcon <em class="ms">icon</em>={mapOutline} /&gt;<br/>    &lt;IonLabel&gt;United States&lt;/IonLabel&gt;<br/>  &lt;/IonTabButton&gt;<br/>  &lt;IonTabButton <em class="ms">tab</em>="tab2" <em class="ms">href</em>="/tab2"&gt;<br/>    &lt;IonIcon <em class="ms">icon</em>={locateOutline} /&gt;<br/>    &lt;IonLabel&gt;My State&lt;/IonLabel&gt;<br/>  &lt;/IonTabButton&gt;<br/>&lt;/IonTabBar&gt;</span></pre><h1 id="0fda" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">删除选项卡3文件</h1><p id="dc78" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">由于我们已经从App.tsx中删除了第三个标签，我们可以从项目中删除这些文件。在src/page中找到Tab3.css和Tab3.tsx，并将其从项目中删除。</p><h1 id="9180" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">表1</h1><p id="9284" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">接下来，打开page/tab 1，并在导入结束时添加以下内容:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="12aa" class="mn lc iq mj b gy mo mp l mq mr">import axios from "axios";<br/>import moment from "moment";</span></pre><p id="354e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在@离子键/反应键导入中，添加更高级的组件withIonLifeCycle。您的导入应如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9c4c" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">import</em> { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, withIonLifeCycle } <em class="ms">from</em> '@ionic/react';</span></pre><p id="12a8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了使用离子生命周期钩子，我们需要用它包装我们的导出默认值:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1302" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">export</em> <em class="ms">default</em> <em class="ms">withIonLifeCycle</em>(Tab1);</span></pre><p id="5374" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了在reactor中使用带有基于类的组件的<a class="ae la" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> Typescript </a>，我们将在文件的顶部创建一个接口来保存我们的数据类型:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Interfaces</figcaption></figure><p id="f1c8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">接下来，我们将把我们的组件从基于函数的更改为基于类的。这样，我们可以使用一个离子生命周期挂钩来获得用户的位置。为此，更换:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="589e" class="mn lc iq mj b gy mo mp l mq mr">const<em class="ms"> Tab1</em>:<em class="ms"> React.FC </em>=<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{</span></pre><p id="f95b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">带:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="82b3" class="mn lc iq mj b gy mo mp l mq mr">class Tab1 <em class="ms">extends</em> React<em class="ms">.</em>Component&lt;{}, MyState&gt; {</span></pre><p id="20d3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，用渲染方法包装你的JSX，并修复你的拖尾括号。</p><p id="f453" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，在反应组件的顶部，我们将设置我们的状态来保存我们将用于图表的数据:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="35ba" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">接下来，我们将在渲染方法上方添加一个离子生命周期钩子，以获取我们的数据并将其推入我们的数组中:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="d0bd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在JSX，我们将从IonTitle标签中删除“Tab 1”并替换为“United States”。然后，移除浏览容器。您的功能组件返回语句将类似于:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="db36" class="mn lc iq mj b gy mo mp l mq mr">&lt;IonPage&gt;<br/>  &lt;IonHeader&gt;<br/>    &lt;IonToolbar&gt;<br/>      &lt;IonTitle&gt;<em class="ms">United States</em>&lt;/IonTitle&gt;<br/>    &lt;/IonToolbar&gt;<br/>  &lt;/IonHeader&gt;<br/>  &lt;IonContent&gt;<br/>    &lt;IonHeader <em class="ms">collapse</em>="condense"&gt;<br/>      &lt;IonToolbar&gt;<br/>        &lt;IonTitle <em class="ms">size</em>="large"&gt;United States&lt;/IonTitle&gt;<br/>      &lt;/IonToolbar&gt;<br/>    &lt;/IonHeader&gt;<br/>  &lt;/IonContent&gt;<br/>&lt;/IonPage&gt;</span></pre><p id="69ae" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因为我们已经从选项卡中删除了ExploreContainer，所以我们可以从组件目录(src/components/explore container . CSS &amp; src/components/explore container . tsx)中删除它的文件。</p><h1 id="25e9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">图表组件</h1><p id="555c" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">现在是制作图表组件的时候了。在组件目录中，我们将创建一个名为Chart.tsx的新文件。在文件的顶部，我们将导入我们需要的依赖项:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6fdc" class="mn lc iq mj b gy mo mp l mq mr"><em class="ms">import</em> React <em class="ms">from</em> 'react';<br/><em class="ms">import</em> { IonCard, IonCardContent } <em class="ms">from</em> '@ionic/react';<br/><em class="ms">import</em> { Line } <em class="ms">from</em> 'react-chartjs-2';</span></pre><p id="cfe2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">接下来，我们将声明我们的状态和道具的形状，我们将把它们传递给组件:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="5afa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们可以创建组件了:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6c26" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">接下来，在render方法之上，我们将使用一个名为<em class="ms"> componentDidMount的生命周期钩子。</em>在这个方法中，我们将操作传入的数据，以便在图表中正确显示。我们还会将数组调整到最后15个数据点，这样图表在移动设备上看起来会更好。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="13f4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后，我们将把我们在文件顶部导入的折线图添加到我们的渲染方法中，并传递所需的道具。完成后的文件应该如下所示:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="463f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将组件导入表1</h1><p id="2175" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">现在，我们需要做的就是将我们的图表组件添加到Tab1.tsx中。您需要检查每个图表在其数组中都有数据，并且我们没有主动调用来获取数据(isLoading)。最终的Tab1.tsx文件应该如下所示:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="b489" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">“完成”选项卡</h1><p id="62e6" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">现在，您应该看到类似这样的内容:</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/0ed9c5b7a2bbc7621b0c725410d7dd3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/1*hIMvRhntvJvpXVEyBGetxg.gif"/></div></figure><h1 id="9c34" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e2a6" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我本来打算在第2部分中为用户的状态添加一个标签，但是我想看看你能想到什么。请在下面的评论中分享。如果你不想搞清楚，我会帮你搞定的😈。看看这个<a class="ae la" href="https://bitbucket.org/TheDiligentDev/covid-app/src/master/" rel="noopener ugc nofollow" target="_blank">比特桶回购</a>。</p><p id="1a0b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您有任何问题、意见或顾虑，请在下面的评论区留下。下次见，编码快乐！</p><p id="fee2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">回购:【https://bitbucket.org/TheDiligentDev/covid-app/src/master/ T4】</p><h2 id="1d46" class="mn lc iq bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="0d07" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae la" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ke ir">AI in Plain English</strong></a><a class="ae la" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ke ir">UX in Plain English</strong></a><a class="ae la" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ke ir">Python in Plain English</strong></a><strong class="ke ir"/>——谢谢，继续学习！</p><p id="946a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae la" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ke ir">submissions @ plain English . io</strong></a><strong class="ke ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Designing a React Component: A Step-by-Step Beginner Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设计React组件:循序渐进的初学者指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/designing-a-react-component-a-step-by-step-beginner-guide-d6d732e367aa?source=collection_archive---------15-----------------------#2020-05-02">https://javascript.plainenglish.io/designing-a-react-component-a-step-by-step-beginner-guide-d6d732e367aa?source=collection_archive---------15-----------------------#2020-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a9806c399fdf698a00806e1997ec7fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBgcK5sLhAdi6x85PKl02w.jpeg"/></div></div></figure><p id="89a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我知道马上开始写代码很诱人。有时我对我要构建的组件有一个粗略的想法，我只是随波逐流。如果那是你的风格，那没什么不好。对我来说，当我这样做的时候，最终发生的事情是，我发现自己不得不或者想要多次重构我的代码</p><p id="90f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你刚刚开始学习React，恭喜你！你会在网上找到很多资源，教你语法，基本概念，以及一般来说，如何让事情发生在屏幕上。我注意到的是，对设计似乎没有足够的重视，而设计是现实世界中极其重要的一步。在您开始编写一行代码之前，您需要首先概述您的设计。</p><p id="ee1f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你的组件的游戏计划是什么？你会有什么状态和道具？会如何消耗？这些都是很重要的问题，你不仅应该在编写代码之前在头脑中有一个明确的答案，更好的是，从与你一起工作的工程师那里获得反馈，这样你就可以在花太多时间做错误的事情之前修复有问题的设计。</p><p id="d856" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将以一个可排序的表格组件为例，向您介绍设计新组件的步骤。请注意，我从React官方文档中的章节<a class="ae kw" href="https://reactjs.org/docs/thinking-in-react.html" rel="noopener ugc nofollow" target="_blank">思考React </a>中获得了灵感。</p><h1 id="1f17" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">步骤1:命名你的组件，并阐明你的用户可以用它做什么</h1><p id="bcfb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我想有一个名为<strong class="ka ir"> <em class="ma">数据表</em> </strong>的表格组件，允许用户做以下事情:</p><ul class=""><li id="2b81" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">查看表格数据</li><li id="d42a" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">对于任何列，在降序和升序之间切换排序顺序</li></ul></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="5160" class="kx ky iq bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">步骤2:定义React组件层次结构</h1><p id="d847" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">表格HTML看起来像这样:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="eda7" class="nk ky iq ng b gy nl nm l nn no">&lt;table&gt;<br/>    &lt;thead&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Items&lt;/th&gt;<br/>            &lt;th&gt;Expenditure&lt;/th&gt;<br/>        &lt;/tr&gt;<br/>    &lt;/thead&gt;<br/>    &lt;tbody&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Donuts&lt;/th&gt;<br/>            &lt;td&gt;3,000&lt;/td&gt;<br/>        &lt;/tr&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Stationery&lt;/th&gt;<br/>            &lt;td&gt;18,000&lt;/td&gt;<br/>        &lt;/tr&gt;<br/>    &lt;/tbody&gt;<br/>    &lt;tfoot&gt;<br/>        &lt;tr&gt;<br/>            &lt;th&gt;Totals&lt;/th&gt;<br/>            &lt;td&gt;21,000&lt;/td&gt;<br/>        &lt;/tr&gt;<br/>    &lt;/tfoot&gt;<br/>&lt;/table&gt;</span></pre><p id="0352" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的例子中，这将转化为如下所示的React组件:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="7531" class="nk ky iq ng b gy nl nm l nn no">&lt;DataTable&gt;<br/>     &lt;TableHeader /&gt;<br/>     &lt;TableContent /&gt;<br/>     &lt;TableFooter /&gt;<br/>&lt;/DataTable&gt;</span></pre></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="e9ef" class="kx ky iq bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">步骤3:列出组件需要的所有数据</h1><p id="0ece" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">为了显示表格数据，我的组件需要:</p><ul class=""><li id="ab9d" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">表格标题列表</li><li id="1be8" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">由包含我要显示的内容的单元格组成的行列表</li><li id="f343" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">页脚值列表</li></ul><p id="a917" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要启用排序，我的组件需要:</p><ul class=""><li id="ba43" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">哪些列是可排序的</li><li id="ac8e" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">可排序的列是什么数据类型(例如，因为日期排序机制不同于字符串排序)</li><li id="e0be" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">当我的表第一次加载时，哪一列是默认排序</li><li id="5c5e" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">正在对哪一列进行排序，排序顺序是什么(降序还是升序)</li></ul></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="94ac" class="kx ky iq bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">第四步:找出哪些数据应该陈述，哪些应该支持</h1><p id="9a54" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我使用React官方文档中的以下三个问题来确定数据应该作为状态还是道具传入:</p><ol class=""><li id="5679" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv np mh mi mj bi translated">是通过道具从父母那里传过来的吗？</li><li id="ec83" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv np mh mi mj bi translated">是否随时间保持不变？</li><li id="d74d" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv np mh mi mj bi translated">你能根据组件中的任何其他状态或属性来计算它吗？</li></ol><p id="f249" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你对以上任何一个问题的回答是肯定的，那么这段数据应该作为道具而不是状态传入。</p><p id="ae7e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我的可排序表格组件，我制作了一个网格，如下所示:</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/7e4acc4a2eae60dfa69852889d4fd22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnLdEYvpWOgULiHvnTCJ7w.png"/></div></div></figure><p id="ab07" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我正在寻找的答案。网格中只有最后一行应该是状态，而不是道具。我还想指出，一般来说，组件中的状态越少越好。无状态组件实际上是首选，因为它们简单，代码更容易理解。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="b887" class="kx ky iq bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">第五步:确定国家应该生活在哪里。</h1><p id="8020" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这一步完全照搬了React官方文档中的【T2思考】一章。如果你刚刚开始使用React，我强烈推荐你阅读整个章节。它会帮助你理解设计哲学。这是它所说的关于确定国家应该生活在哪里:</p><blockquote class="nr ns nt"><p id="26ca" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">识别基于该状态呈现某些内容的每个组件。</p><p id="86da" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">找到一个公共所有者组件(层次结构中所有需要状态的组件之上的一个组件)。</p><p id="d333" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">公共所有者或层次结构中更高的另一个组件应该拥有该状态。</p><p id="8507" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">如果您找不到拥有状态有意义的组件，那么创建一个新的组件专门用于保存状态，并将其添加到公共所有者组件之上的层次结构中的某个位置。</p></blockquote><p id="506c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从第4步中了解到，这两个数据应该是状态:</p><ul class=""><li id="fada" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><strong class="ka ir"> <em class="ma">活动排序列</em> : </strong>当前正在对哪一列进行排序</li><li id="81d5" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><strong class="ka ir"> <em class="ma">正在排序</em> : </strong>排序顺序</li></ul><p id="4135" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来完成这些步骤:</p><ol class=""><li id="cce0" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv np mh mi mj bi translated">识别基于该状态呈现某些内容的每个组件。</li></ol><ul class=""><li id="9753" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><tablecontent>根据排序列和顺序呈现内容</tablecontent></li><li id="8c07" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><tableheader>在标题上呈现某种视觉效果(可能是一个图标),以指示哪个正在被排序以及排序的顺序</tableheader></li></ul><p id="227a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.找到一个公共所有者组件(层次结构中所有需要状态的组件之上的一个组件)。</p><ul class=""><li id="549a" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">这是美国人将要生活的地方！</li></ul></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="c50d" class="kx ky iq bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">第六步:组装好所有东西！</h1><p id="d3a8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">最后一步！你差不多完成了。既然你已经回答了大问题，你需要做的就是把它记录在某个地方:</p><p id="2b15" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">父组件:</p><ul class=""><li id="92cb" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><datatable/></li></ul><p id="1273" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">子组件:</p><ul class=""><li id="0f97" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><tableheader/></li><li id="3215" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><tablecontent/></li><li id="ad8e" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><tablefooter/></li></ul><p id="72c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">道具:</p><ul class=""><li id="99b6" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">头球</li><li id="c398" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">数据</li><li id="e98d" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">脚注</li><li id="cacf" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">DefaultSortColumn</li><li id="2118" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">isSortableColumn</li><li id="d171" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated">列类型</li></ul><p id="7ab7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">状态:(都存在于父组件中)</p><ul class=""><li id="6181" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated"><strong class="ka ir"><em class="ma">active sort列</em> </strong></li><li id="0c34" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><strong class="ka ir"> <em class="ma">是</em> </strong>的派生</li></ul></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="7d17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你！现在，您已经有了组件的基本游戏计划。组件越复杂，设计过程需要的时间就越长。有时候看起来工作量很大，而你甚至还没有开始写代码。但是相信我，这个过程会让你在以后的道路上省去很多努力。快乐编码💻</p></div></div>    
</body>
</html>
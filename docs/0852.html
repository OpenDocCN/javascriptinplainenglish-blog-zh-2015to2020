<html>
<head>
<title>Introduction to Web Components and Stencil JS (with code examples)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Web组件和模板JS介绍(带代码示例)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/web-components-introduction-and-in-practice-596d46463e19?source=collection_archive---------2-----------------------#2019-12-22">https://javascript.plainenglish.io/web-components-introduction-and-in-practice-596d46463e19?source=collection_archive---------2-----------------------#2019-12-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/0ebb68b8f769187903f2b6b8d1c95538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*g-snC4RK1TlRufsh.png"/></div></figure><h1 id="10da" class="jr js in bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">现代网络开发</h1><p id="e5dc" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现代web应用程序开发主要由这些流行技术主导:<em class="ln"> React、Angular或Vue。</em></p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lo"><img src="../Images/24a479e01734b630c1abdddeec779763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0zZ8trF-KjK-zVNI.png"/></div></div></figure><p id="bf85" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">与当时普通方法或技术相比，它们给web应用程序开发带来了很多优势；虚拟DOM、反应式数据绑定、JSX等特性。成了必备品。</p><p id="42ae" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">它们的一个共同点是它们都是基于组件的，也就是说，它们允许我们将UI作为组件来创建。这种基于组件的应用程序开发为我们提供了:</p><ul class=""><li id="66e1" class="mc md in kr b ks lx kw ly la me le mf li mg lm mh mi mj mk bi translated">封装，即关注点的分离，支持抽象</li><li id="d334" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">HTML-地狱管理</li><li id="03dd" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">可组合和可重用的模块化架构</li></ul><p id="c95f" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">除了所有这些优势之外，我们仍然发现有些情况难以用前面提到的技术解决，例如:</p><h2 id="59a9" class="mq js in bd jt mr ms dn jx mt mu dp kb la mv mw kf le mx my kj li mz na kn nb bi translated">如果</h2><ul class=""><li id="3387" class="mc md in kr b ks kt kw kx la nc le nd li ne lm mh mi mj mk bi translated">需要创建各种框架消费的组件？</li><li id="56bf" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">将代码从一个框架迁移到另一个框架？</li><li id="7379" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">需要组件级样式封装吗？</li></ul><p id="deca" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">为了有效应对以上场景，引入<strong class="kr io">的<em class="ln"> Web组件。</em>T5】</strong></p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><h1 id="4beb" class="jr js in bd jt ju nm jw jx jy nn ka kb kc no ke kf kg np ki kj kk nq km kn ko bi translated">Web组件:简介</h1><blockquote class="nr"><p id="6623" class="ns nt in bd nu nv nw nx ny nz oa lm dk translated">W3C标准，用于创建与框架无关的本地组件，具有真正风格的封装</p></blockquote><p id="9a84" class="pw-post-body-paragraph kp kq in kr b ks ob ku kv kw oc ky kz la od lc ld le oe lg lh li of lk ll lm ig bi translated">Web组件(WC)由以下3个主要API组成:</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi og"><img src="../Images/ad9a40145cc0f22f85c3746dece48c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAPgaAIiY6W6aXI2tuylTg@2x.png"/></div></div></figure><h2 id="4641" class="mq js in bd jt mr ms dn jx mt mu dp kb la mv mw kf le mx my kj li mz na kn nb bi translated">自定义元素</h2><p id="871c" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">创建新的HTML标签或扩展现有的HTML/自定义标签</p><h2 id="c623" class="mq js in bd jt mr ms dn jx mt mu dp kb la mv mw kf le mx my kj li mz na kn nb bi translated">阴影dom</h2><p id="b4d5" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">启用组件级封装，即限定范围的HTML和样式</p><h2 id="534e" class="mq js in bd jt mr ms dn jx mt mu dp kb la mv mw kf le mx my kj li mz na kn nb bi translated">HTML模板</h2><p id="d27b" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">允许编写不呈现的HTML片段(用于组成自定义元素)</p><p id="9c51" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">正如他们所说，代码胜过千言万语，让我们使用web组件api创建一个简单的按钮。</p><figure class="lp lq lr ls gt jo"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">WC button demo: template and custom-element usage code snippet</figcaption></figure><figure class="lp lq lr ls gt jo"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">WC button demo: custom-element definition and shadow-dom code snippet</figcaption></figure><p id="5756" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">上面的代码由chrome渲染如下:</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi on"><img src="../Images/ac39404b43071e92d09d302080f6118e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVpNr0v5bbMmlUM-qmTs5Q.png"/></div></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">WC button demo: Chrome render</figcaption></figure><blockquote class="nr"><p id="0d9e" class="ns nt in bd nu nv oo op oq or os lm dk translated">Shadow-root，即shadow DOM子树的根节点，完全封装了下面的样式，不允许它流向全局空间，反之亦然。</p></blockquote><blockquote class="ot ou ov"><p id="090f" class="kp kq ln kr b ks ob ku kv kw oc ky kz ow od lc ld ox oe lg lh oy of lk ll lm ig bi translated"><strong class="kr io">浏览器支持</strong> <br/>最新版本的<em class="in"> Chrome、Safari、Firefox </em>支持以上所有API。边缘的支撑正在到来(当边缘移动到<em class="in">铬</em>)。对于互联网浏览器，将不得不使用多边形填充。</p></blockquote><p id="259b" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">现在有了稳定的web组件api ( <em class="ln"> v1 </em>)和广泛的浏览器支持<em class="ln"> Web组件</em>提供了一个创建UI组件的机会。</p><p id="2288" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">尽管如此，本地<em class="ln"> web组件</em>开发可能不会在我们的开发伙伴或团队经理中流行，因为存在以下挑战:</p><h2 id="80d4" class="mq js in bd jt mr ms dn jx mt mu dp kb la mv mw kf le mx my kj li mz na kn nb bi translated">如果</h2><ul class=""><li id="6823" class="mc md in kr b ks kt kw kx la nc le nd li ne lm mh mi mj mk bi translated">需要反应式数据绑定吗？</li><li id="a778" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">需要现代网络开发功能，如JSX，虚拟Dom，预渲染支持等。？</li><li id="c7cc" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">想要我们的组件类型安全吗？</li><li id="b9a4" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">想减少使用<em class="ln"> vanilla-js </em>的样板？</li></ul><p id="2ff7" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">为应对上述情况，引入<strong class="kr io">模板JS <em class="ln">。</em> </strong></p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><h1 id="7df3" class="jr js in bd jt ju nm jw jx jy nn ka kb kc no ke kf kg np ki kj kk nq km kn ko bi translated">模板JS:简介</h1><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi oz"><img src="../Images/d063c9ce52f42ca683968ce63f7bad65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dBgVVd-a8tl62Ysm.png"/></div></div></figure><blockquote class="nr"><p id="ca4c" class="ns nt in bd nu nv oo op oq or os lm dk translated"><em class="pa"> Stencil是一个生成Web组件的编译器，由Ionic Framework团队开发</em></p></blockquote><p id="c87b" class="pw-post-body-paragraph kp kq in kr b ks ob ku kv kw oc ky kz la od lc ld le oe lg lh li of lk ll lm ig bi translated">模板具有以下特性</p><ul class=""><li id="ab88" class="mc md in kr b ks lx kw ly la me le mf li mg lm mh mi mj mk bi translated">虚拟DOM</li><li id="8175" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">异步渲染(受React Fiber启发)</li><li id="c4d9" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">反应式数据绑定</li><li id="b177" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">以打字打的文件</li><li id="e080" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated">JSX</li></ul><p id="d930" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">然后生成内置了这些特性的基于标准的Web组件。(<em class="ln">直接引用stenciljs.com文件</em>)</p><p id="4e06" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">同样，由于代码比1000字更有价值，让我们创建与<em class="ln">模板组件</em>相同的按钮web组件(另外添加了一个点击计数，显示在按钮标题旁边，以演示反应数据绑定)。</p><figure class="lp lq lr ls gt jo"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">Stencil button component demo</figcaption></figure><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi pb"><img src="../Images/d6db32fb4403ca592a4d3a87a0d615e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeOOtA5gUVMz-pxz_-3WXA.png"/></div></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">Stencil button component demo: Chrome render</figcaption></figure><p id="11c2" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">该模具组件。<em class="ln"> tsx </em>文件被编译为本地web组件，如下所示:</p><figure class="lp lq lr ls gt jo"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="oj ok gj gh gi ol om bd b be z dk">Stencil button component demo: Stencil compiled WC</figcaption></figure><p id="c52b" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">由于这是一个本地web组件，它可以用于任何框架或库。</p><p id="8ede" class="pw-post-body-paragraph kp kq in kr b ks lx ku kv kw ly ky kz la lz lc ld le ma lg lh li mb lk ll lm ig bi translated">还有其他一些值得研究的库，它们也提供了编写web组件的不同方法。像下面这样:</p><ul class=""><li id="26a8" class="mc md in kr b ks lx kw ly la me le mf li mg lm mh mi mj mk bi translated"><a class="ae pc" href="https://lit-element.polymer-project.org/" rel="noopener ugc nofollow" target="_blank">元素</a></li><li id="82e8" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://skatejs.netlify.com/" rel="noopener ugc nofollow" target="_blank">滑板</a></li></ul></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><h1 id="eade" class="jr js in bd jt ju nm jw jx jy nn ka kb kc no ke kf kg np ki kj kk nq km kn ko bi translated">其他资源:</h1><ul class=""><li id="1bb3" class="mc md in kr b ks kt kw kx la nc le nd li ne lm mh mi mj mk bi translated"><a class="ae pc" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/Web_Components</a></li><li id="449b" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://stenciljs.com/docs/introduction" rel="noopener ugc nofollow" target="_blank">https://stenciljs.com/docs/introduction</a></li><li id="61e3" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://slides.com/vaibhav-kumar/web-components-webhack-2019-12-17/" rel="noopener ugc nofollow" target="_blank">https://slides . com/vaibhav-Kumar/we B- components-web hack-2019-12-17</a></li><li id="8a5b" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://github.com/mdn/web-components-examples" rel="noopener ugc nofollow" target="_blank">https://github.com/mdn/web-components-examples</a></li><li id="c270" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://www.webcomponents.org/" rel="noopener ugc nofollow" target="_blank">https://www.webcomponents.org/</a></li><li id="a67c" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://developers.google.com/web/fundamentals/web-components" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/web/fundamentals/we B- components</a></li><li id="eaa6" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://lit-element.polymer-project.org/" rel="noopener ugc nofollow" target="_blank">https://lit-element.polymer-project.org/</a></li><li id="316d" class="mc md in kr b ks ml kw mm la mn le mo li mp lm mh mi mj mk bi translated"><a class="ae pc" href="https://skatejs.netlify.com/" rel="noopener ugc nofollow" target="_blank">https://skatejs.netlify.com/</a></li></ul></div></div>    
</body>
</html>
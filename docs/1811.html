<html>
<head>
<title>More Complex Angular Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更复杂的角度动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/more-complex-angular-animations-47015a42a8d1?source=collection_archive---------3-----------------------#2020-04-25">https://javascript.plainenglish.io/more-complex-angular-animations-47015a42a8d1?source=collection_archive---------3-----------------------#2020-04-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7b12536356141d3fa06d5c3f733d3ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LK85MOf8TAS1Etsm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ggvasalia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">George Gvasalia</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bf9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Angular是Google制作的一个流行的前端框架。像其他流行的前端框架一样，它使用基于组件的架构来构建应用程序。</p><p id="484a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究数值变化的转换。</p><h1 id="4866" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">:过渡中的增量和减量</h1><p id="3365" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当数值增加或减少时，我们可以使用选择器值<code class="fe me mf mg mh b">:increment</code>和<code class="fe me mf mg mh b">:decrement</code>开始转换。</p><p id="5c52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><p id="329c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.module.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="74f2" class="mq lc iq mh b gy mr ms l mt mu">import { BrowserModule } from "@angular/platform-browser";<br/>import { NgModule } from "@angular/core";<br/>import { BrowserAnimationsModule } from "@angular/platform-browser/animations";<br/>import { AppComponent } from "./app.component";</span><span id="4e59" class="mq lc iq mh b gy mv ms l mt mu">@NgModule({<br/>  declarations: [AppComponent],<br/>  imports: [BrowserModule, BrowserAnimationsModule],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule {}</span></pre><p id="579b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5fe9" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  query,<br/>  style,<br/>  stagger,<br/>  animate<br/>} from "@angular/animations";</span><span id="3ced" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("filterAnimation", [<br/>      transition(":increment", [<br/>        query(<br/>          ":enter",<br/>          [<br/>            style({ opacity: 0, width: "0px" }),<br/>            stagger(50, [<br/>              animate("300ms ease-out", style({ opacity: 1, width: "*" }))<br/>            ])<br/>          ],<br/>          { optional: true }<br/>        )<br/>      ]),<br/>      transition(":decrement", [<br/>        query(":leave", [<br/>          stagger(50, [<br/>            animate("300ms ease-out", style({ opacity: 0, width: "0px" }))<br/>          ])<br/>        ])<br/>      ])<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {<br/>  arr = [];<br/>  add() {<br/>    this.arr.push(this.arr.length + 1);<br/>  }</span><span id="c06a" class="mq lc iq mh b gy mv ms l mt mu">  remove() {<br/>    this.arr.pop();<br/>  }<br/>}</span></pre><p id="e807" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="be04" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)="add()"&gt;Add&lt;/button&gt;<br/>&lt;button (click)="remove()"&gt;Remove&lt;/button&gt;<br/>&lt;div [@filterAnimation]="arr.length"&gt;<br/>  &lt;div *ngFor="let a of arr"&gt;{{a}}&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="d83c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们使用了<code class="fe me mf mg mh b">query</code>函数来查找内部元素。<code class="fe me mf mg mh b">stagger</code>功能用于将每个动画延迟给定的时间。</p><p id="e763" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">style</code>函数指定动画每个阶段的风格。</p><p id="a0bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们设置<code class="fe me mf mg mh b">filterAnimation</code>来观察<code class="fe me mf mg mh b">arr.length</code>中的变化。</p><p id="aac3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们单击Add时，我们将会看到添加了来自<code class="fe me mf mg mh b">:increment</code>过渡的缓动动画的数字。</p><p id="4440" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，当数字被删除时，我们从<code class="fe me mf mg mh b">:decrement</code>转换中单击Remove会得到动画。</p><h1 id="5c65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">转换中的布尔值</h1><p id="c3f8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过观察布尔值的变化来创建动画。</p><p id="f30d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><p id="b288" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0cf6" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  state<br/>} from "@angular/animations";</span><span id="48dc" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      state(<br/>        "true",<br/>        style({ height: "200px", opacity: 1, backgroundColor: "yellow" })<br/>      ),<br/>      state(<br/>        "false",<br/>        style({ height: "100px", opacity: 0.5, backgroundColor: "green" })<br/>      ),<br/>      transition("false &lt;=&gt; true", animate(500))<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {}</span></pre><p id="51bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b0c4" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@openClose]="show ? true: false"&gt;<br/>  {{show ? 'foo' : ''}}<br/>&lt;/div&gt;</span></pre><p id="076f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有带有样式的<code class="fe me mf mg mh b">true</code>和<code class="fe me mf mg mh b">false</code>状态。</p><p id="2d6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加了一个500毫秒的动画过渡。</p><p id="fb9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在我们的模板中，我们应用了我们的<code class="fe me mf mg mh b">openClose</code>触发器，它在我们单击切换按钮时被触发。</p><p id="39a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击按钮时，我们应该看到不同高度的绿色和黄色之间的div切换。文本也会打开和关闭。</p><h1 id="c78d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多个动画触发器</h1><p id="2c53" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以为一个组件定义多个动画触发器。我们可以将动画触发器附加到不同的元素上，元素之间的父子关系会影响动画运行的方式和时间。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ffd63971ba852f02a68687ba25280c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*do0Qyp0UngekWsxz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@steveroe_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steven Roe</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="ff72" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">禁用HTML元素上的动画</h2><p id="5168" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">@.disabled</code>触发器来禁用元素上的动画。</p><p id="2e91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以将上面的示例更改如下:</p><p id="776b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8cb2" class="mq lc iq mh b gy mr ms l mt mu">import { Component } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  state<br/>} from "@angular/animations";</span><span id="1b4b" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      state(<br/>        "true",<br/>        style({ height: "200px", opacity: 1, backgroundColor: "yellow" })<br/>      ),<br/>      state(<br/>        "false",<br/>        style({ height: "100px", opacity: 0.5, backgroundColor: "green" })<br/>      ),<br/>      transition("false &lt;=&gt; true", animate(500))<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {<br/>  isDisabled = true;<br/>}</span></pre><p id="dffd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8e80" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@.disabled]="isDisabled"&gt;<br/>  &lt;div [@openClose]="show ? true: false"&gt;<br/>    {{show ? 'foo' : ''}}<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="7153" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在<code class="fe me mf mg mh b">AppComponent</code>中将<code class="fe me mf mg mh b">isDisabled</code>设置为<code class="fe me mf mg mh b">true</code>。</p><p id="2399" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在模板中，当<code class="fe me mf mg mh b">isDisabled</code>被设置为<code class="fe me mf mg mh b">true</code>时，我们用<code class="fe me mf mg mh b">[@.disabled]=”isDisabled”</code>来禁用外部div中的动画。</p><p id="2e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们单击切换按钮时，我们不会看到动画。</p><h2 id="355c" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">禁用所有动画</h2><p id="bb17" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">@HostBinding</code>装饰器禁用组件中的所有动画。</p><p id="5318" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以:</p><p id="75e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.ts</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d002" class="mq lc iq mh b gy mr ms l mt mu">import { Component, HostBinding } from "@angular/core";<br/>import {<br/>  trigger,<br/>  transition,<br/>  style,<br/>  animate,<br/>  state<br/>} from "@angular/animations";</span><span id="f04e" class="mq lc iq mh b gy mv ms l mt mu">@Component({<br/>  selector: "app-root",<br/>  templateUrl: "./app.component.html",<br/>  styleUrls: ["./app.component.css"],<br/>  animations: [<br/>    trigger("openClose", [<br/>      state(<br/>        "true",<br/>        style({ height: "200px", opacity: 1, backgroundColor: "yellow" })<br/>      ),<br/>      state(<br/>        "false",<br/>        style({ height: "100px", opacity: 0.5, backgroundColor: "green" })<br/>      ),<br/>      transition("false &lt;=&gt; true", animate(500))<br/>    ])<br/>  ]<br/>})<br/>export class AppComponent {<br/>  @HostBinding("@.disabled")<br/>  isDisabled = true;<br/>}</span></pre><p id="510c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">app.component.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3af2" class="mq lc iq mh b gy mr ms l mt mu">&lt;button (click)="show = !show"&gt;Toggle&lt;/button&gt;<br/>&lt;div [@openClose]="show ? true: false"&gt;<br/>  {{show ? 'foo' : ''}}<br/>&lt;/div&gt;</span></pre><p id="37dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4157" class="mq lc iq mh b gy mr ms l mt mu">@HostBinding("@.disabled")<br/>isDisabled = true;</span></pre><p id="d3cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">AppComponent</code>中。</p><p id="91de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们不再需要模板中的<code class="fe me mf mg mh b">@.disabled</code>绑定来禁用动画。</p><h1 id="3c43" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1a85" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">:increment</code>和<code class="fe me mf mg mh b">:decrement</code>分别观察数值的增加和减少，并相应地显示动画。</p><p id="c737" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当某物分别为<code class="fe me mf mg mh b">true</code>或<code class="fe me mf mg mh b">false</code>时，我们可以让<code class="fe me mf mg mh b">true</code>和<code class="fe me mf mg mh b">false</code>状态产生动画效果。</p><p id="d94d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在模板或组件中禁用带有<code class="fe me mf mg mh b">@.disabled</code>绑定的动画。</p><h2 id="d2ae" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="8ff4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="6e98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
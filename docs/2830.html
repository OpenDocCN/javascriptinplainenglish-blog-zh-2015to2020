<html>
<head>
<title>HTML5 + JS Games — An Intro to the Canvas Element 👾</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML5 + JS游戏——画布元素简介👾</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/html5-js-games-an-intro-to-the-canvas-element-fe049c222595?source=collection_archive---------13-----------------------#2020-07-27">https://javascript.plainenglish.io/html5-js-games-an-intro-to-the-canvas-element-fe049c222595?source=collection_archive---------13-----------------------#2020-07-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6502" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">HTML游戏是练习HTML  <code class="fe kd ke kf kg b"><em class="kc">canvas</em></code> <em class="kc">标签技巧和JavaScript概念的有趣方式。</em></h2></div><p id="ccfa" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">几周前，我做了一个街机经典蛇的克隆，<a class="ae ld" href="http://fbohz.com/html5_games/retro_snake.html" rel="noopener ugc nofollow" target="_blank">复古蛇</a>。今天我们将讨论构建HTML5和JS游戏的一些基本概念。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/f058798ed216b16db5b9103368e1e39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YGfe33EDoanFtf87e04jAw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">My take on the popular Snake Game</figcaption></figure><h1 id="1181" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak"> HTML画布</strong></h1><p id="64b7" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">HTML游戏是练习HTML标签技能和JavaScript概念的有趣方式。</p><p id="c6d9" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><code class="fe kd ke kf kg b">&lt;canvas&gt;</code>是一个有高度/宽度的元素，你可以在里面画任何东西。</p><ul class=""><li id="17dc" class="mr ms in kj b kk kl kn ko kq mt ku mu ky mv lc mw mx my mz bi translated">画布就像一个有边框的盒子。在盒子里面，你可以制作另一个盒子、圆圈、线条和文本。你不能在画布之外做任何事情。</li><li id="8dea" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc mw mx my mz bi translated">画布是在主体内部定义的。</li></ul><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="0c4d" class="nj lv in kg b gy nk nl l nm nn">&lt;body&gt;<br/>    &lt;canvas height="500" width="500" <br/>    style="border: 2px solid #000;" <br/>    id="ctx"&gt;&lt;/canvas&gt;<br/>&lt;/body&gt;</span></pre><h1 id="40b5" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">将带有JS的文本添加到画布</h1><p id="3286" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated"><code class="fe kd ke kf kg b">getContext()</code>在JS和‘2d’中用于指定二维。</p><p id="c634" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">使用<code class="fe kd ke kf kg b">fillText()</code>,你可以在特定的x和y坐标中添加文本，得到如下结果:</p><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="a7c0" class="nj lv in kg b gy nk nl l nm nn"><strong class="kg io">var</strong> ctx <strong class="kg io">=</strong> document.getElementById("ctx")<br/>    .getContext('2d');<br/><br/>ctx.fillText("HOLA BRAVE NEW WORLD!", 150, 250);</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi no"><img src="../Images/80f0a15be72b22b4fe856d77c70641e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/0*NZXgZ4Q8dKBA6VAf.png"/></div></figure><p id="2ec3" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">你可以像<code class="fe kd ke kf kg b">ctx.font = "30px Calibri"</code>一样放大字体。</p><h1 id="5f07" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">在画布上画一条线</strong></h1><p id="6105" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated"><code class="fe kd ke kf kg b">strokeText()</code>:赋予字体浮雕效果。</p><p id="e65a" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><code class="fe kd ke kf kg b">moveTo()</code>:带两个参数。第一个光标将移动到特定位置。你用它和<code class="fe kd ke kf kg b">lineTo()</code>画线。然后你可以用<code class="fe kd ke kf kg b">stroke()</code>创建线条。</p><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="4155" class="nj lv in kg b gy nk nl l nm nn">ctx.moveTo(100,300)<br/>ctx.lineTo(200,300)<br/>ctx.stroke();</span></pre><p id="0ed1" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">前两种方法定义直线，第三种方法画直线。</p><p id="6508" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><code class="fe kd ke kf kg b">fillStyle()</code>。您可以使用<code class="fe kd ke kf kg b">fillRect()</code>将<code class="fe kd ke kf kg b">ctx.fillStyle = '#efa556'</code>等颜色添加到矩形中。</p><p id="2766" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><code class="fe kd ke kf kg b">fillRect()</code>带四个参数。前两个位置然后接下来的两个宽度和高度的矩形为<code class="fe kd ke kf kg b">ctx.fillRect(250, 300, 200, 300);</code>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi no"><img src="../Images/17e002f305d0b7f92a7e67a19e678981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/0*BAtlJZKMheoTgsPb.png"/></div></figure><h1 id="6baa" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">画布状态</strong></h1><p id="d7ef" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">我们标识为<code class="fe kd ke kf kg b">ctx</code>的canvas对象有许多我们已经描述过的属性。有时，如果我们<code class="fe kd ke kf kg b">fillStyle()</code> ctx，那么之后的一切也可能是红色的！</p><p id="6b0e" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">为了管理这个，我们有<em class="np">画布状态</em>。</p><ul class=""><li id="1722" class="mr ms in kj b kk kl kn ko kq mt ku mu ky mv lc mw mx my mz bi translated"><code class="fe kd ke kf kg b">save()</code>:我们想要保存的状态是什么，就像一个<em class="np">检查点</em></li><li id="854f" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc mw mx my mz bi translated">然后我们可以调用<code class="fe kd ke kf kg b">restore()</code>来恢复到之前的状态。</li></ul><p id="83e7" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">因此，当我们在画布上进行修改，然后保存检查点并在需要时恢复时。</p><h1 id="b23f" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">在画布中绘制JS对象</strong></h1><p id="677a" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">让我们试着画一个物体:</p><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="ed2b" class="nj lv in kg b gy nk nl l nm nn"><strong class="kg io">const</strong> square <strong class="kg io">=</strong> {<br/>    width: 300,<br/>    height: 200,<br/>    x: 100,<br/>    y: 200,<br/>    color: 'red'<br/>}</span></pre><p id="095c" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">通过访问正方形属性，我们可以轻松地绘制正方形:</p><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="3cbf" class="nj lv in kg b gy nk nl l nm nn">ctx.fillStyle <strong class="kg io">=</strong> square.color<br/>ctx.fillRect(<br/>    square.x, square.y, <br/>    square.width, square.height<br/>    )</span></pre><h1 id="6690" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">使用JavaScript函数</strong></h1><p id="bbb6" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">视频之类的游戏只是一个<em class="np">系列的帧</em>。主要的区别是你可以和游戏互动，而不是视频。</p><p id="71a9" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我们使用<code class="fe kd ke kf kg b">setInterval()</code>来完成这个任务。这将在每个指定的时间调用该函数。如果我们有<code class="fe kd ke kf kg b">setInterval(myFunction(),1000)</code>，那么它会像<em class="np"> 1fps </em>，因为每1秒就会有新的帧。这将是一个非常慢的游戏，所以我们可以减少当<code class="fe kd ke kf kg b">setInterval()</code>可以被调用有更多的帧。</p><h1 id="0468" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">用户输入&amp;事件处理</strong></h1><p id="cc78" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">您可以使用键盘和鼠标控制事件，如<code class="fe kd ke kf kg b">onmousedown</code>、<code class="fe kd ke kf kg b">onmouseup</code>、<code class="fe kd ke kf kg b">onkeydown</code>，</p><p id="03f3" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">例如:</p><pre class="lf lg lh li gt nf kg ng nh aw ni bi"><span id="2c91" class="nj lv in kg b gy nk nl l nm nn">document.getElementById("ctx").onmousedown <strong class="kg io">=</strong> <strong class="kg io">function</strong>() {<br/>    ctx.fillStyle <strong class="kg io">=</strong> 'blue';<br/>    ctx.fillRect(100,100,50,50);<br/><br/>}<br/><br/><br/>document.getElementById("ctx").onmouseup <strong class="kg io">=</strong> <strong class="kg io">function</strong>() {<br/>    ctx.fillStyle <strong class="kg io">=</strong> 'red';<br/>    ctx.fillRect(100,100,50,50);<br/><br/>}<br/><br/>document.onkeydown <strong class="kg io">=</strong> <strong class="kg io">function</strong>(e) {<br/>    <em class="np">//a = 65 code</em><br/>    <strong class="kg io">if</strong> (e.keyCode <strong class="kg io">==</strong> 65) {<br/>        ctx.fillText('A has been pressed', 100,100);<br/>    }<br/><br/>}</span></pre><h1 id="49f9" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated"><strong class="ak">向前移动</strong></h1><p id="10a1" class="pw-post-body-paragraph kh ki in kj b kk mm jo km kn mn jr kp kq mo ks kt ku mp kw kx ky mq la lb lc ig bi translated">构建HTML5 + JS游戏时，请确保:</p><ol class=""><li id="dcd1" class="mr ms in kj b kk kl kn ko kq mt ku mu ky mv lc nq mx my mz bi translated">声明<code class="fe kd ke kf kg b">canvas</code>元素。</li><li id="a8cb" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">构建游戏的对象。例如:蛇和食物(用于蛇的游戏)。</li><li id="1c23" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">在画布中绘制对象。</li><li id="125a" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">根据需要移动对象。</li><li id="7050" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">用功能满足游戏需求。确保你清楚游戏的要求。</li><li id="7a3d" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">添加常见的功能，如分数，游戏结束，初始屏幕等。</li><li id="7be8" class="mr ms in kj b kk na kn nb kq nc ku nd ky ne lc nq mx my mz bi translated">添加其他功能。例如难度。</li></ol></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="33fd" class="pw-post-body-paragraph kh ki in kj b kk kl jo km kn ko jr kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><em class="np">原载于2020年7月27日http://fbohz.com</em><em class="np"><a class="ae ld" href="http://fbohz.com/html_js_games_canvas" rel="noopener ugc nofollow" target="_blank"><em class="np">。</em></a></em></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Best Practices — Removing Duplicates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—删除重复项</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-removing-duplicates-562e293437c9?source=collection_archive---------6-----------------------#2020-07-08">https://javascript.plainenglish.io/javascript-best-practices-removing-duplicates-562e293437c9?source=collection_archive---------6-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/caf32267322fa403525e9b87732d98fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YKBx2gLG8TO4vHkN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rachelhisko?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Rachel Hisko</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="514a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="a8f8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对象文本中没有重复的键</h1><p id="ded5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在对象文本中有重复的键。</p><p id="2ee2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将产生意想不到的结果。</p><p id="fde7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e4f7" class="mn lc iq mj b gy mo mp l mq mr">const user = {<br/>  name: 'james',<br/>  name: 'joe'<br/>}</span></pre><p id="8ea6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该删除它们或给它们起不同的名字。</p><h1 id="9c63" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">switch语句中没有重复的case标签</h1><p id="a311" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的<code class="fe ms mt mu mj b">switch</code>语句中不应该有重复的<code class="fe ms mt mu mj b">case</code>标签。</p><p id="d249" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="29e5" class="mn lc iq mj b gy mo mp l mq mr">switch (id) {<br/>  case 1:<br/>    // ...<br/>  case 1:<br/>    //...<br/>}</span></pre><p id="2c88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只有第一个匹配<code class="fe ms mt mu mj b">id</code>值的才会运行。</p><p id="ad66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们应该将它们合并或删除。</p><h1 id="e0d3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">每个模块使用单一导入</h1><p id="1ee8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的代码中，每个模块应该只有一个<code class="fe ms mt mu mj b">import</code> statemen。</p><p id="b79e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d424" class="mn lc iq mj b gy mo mp l mq mr">import { f1 } from 'module'<br/>import { f2 } from 'module'</span></pre><p id="6211" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7d5c" class="mn lc iq mj b gy mo mp l mq mr">import { f1, f2 } from 'module'</span></pre><p id="5d76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们节省空间并删除重复的内容。</p><h1 id="01e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正则表达式中没有空字符类</h1><p id="ca3b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们的正则表达式中不应该有空的字符类。</p><p id="7697" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">拥有它们可能是个错误。</p><p id="d68c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a909" class="mn lc iq mj b gy mo mp l mq mr">const myRegex = /^abc[]/;</span></pre><h1 id="b484" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有空的析构模式</h1><p id="9fd8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有空的析构模式，这可能是一个错误。</p><p id="e4db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可能打算将一个空对象的默认值赋给一个变量。</p><p id="4de7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="892b" class="mn lc iq mj b gy mo mp l mq mr">const { a: {} } = foo</span></pre><p id="b42f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9836" class="mn lc iq mj b gy mo mp l mq mr">const { a = {} } = foo</span></pre><p id="4707" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe ms mt mu mj b">foo.a</code>是<code class="fe ms mt mu mj b">undefined</code>，它将分配一个空对象给<code class="fe ms mt mu mj b">a</code>。</p><p id="8731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以写作；</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6ce8" class="mn lc iq mj b gy mo mp l mq mr">const { a: { b } } = foo;</span></pre><p id="8cf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将嵌套在<code class="fe ms mt mu mj b">a</code>中的东西赋给另一个变量。</p><h1 id="2583" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用eval</h1><p id="b33e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">eval</code>让我们从字符串中运行代码。</p><p id="8f34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个安全风险，因为我们可以在字符串中运行任何代码。</p><p id="18b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，它还会阻止JavaScript解释器优化我们的代码。</p><p id="fd8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们千万不要使用<code class="fe ms mt mu mj b">eval</code>功能。</p><h1 id="4d27" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">catch子句中没有重新分配异常</h1><p id="42fc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们永远不应该在catch子句中重新分配异常。</p><p id="6d77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将丢弃原始异常数据。</p><p id="b1d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比如，我们不应该写；</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1da5" class="mn lc iq mj b gy mo mp l mq mr">try {<br/>  // ...<br/>} catch (e) {<br/>  e = 'value'<br/>}</span></pre><p id="6a1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5850" class="mn lc iq mj b gy mo mp l mq mr">try {<br/>  // ...<br/>} catch (e) {<br/>  const newVal = 'value'<br/>}</span></pre><p id="99c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将我们的值赋给一个新变量比将某些东西赋给异常对象要好得多。</p><h1 id="abfd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要扩展本机对象</h1><p id="4cc5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">本机对象不应该被扩展。</p><p id="78de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们应该只是内置的。</p><p id="d396" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在原生对象中拥有额外的属性会让人们感到困惑，如果它们不存在于其他地方，他们可能会感到惊讶。</p><p id="ec27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该有这样的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1224" class="mn lc iq mj b gy mo mp l mq mr">Object.prototype.age = 2</span></pre><h1 id="0788" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有不必要的函数绑定</h1><p id="a269" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们需要在函数内部改变<code class="fe ms mt mu mj b">this</code>的值，我们只需要在函数上调用<code class="fe ms mt mu mj b">bind</code>。</p><p id="b0ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果我们不需要这样做，就不应该调用它。</p><p id="8ccd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="eaf8" class="mn lc iq mj b gy mo mp l mq mr">const name = function () {<br/>  getName()<br/>}.bind(user)</span></pre><p id="0ca3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4e11" class="mn lc iq mj b gy mo mp l mq mr">const name = function () {<br/>  this.getName()<br/>}.bind(user)</span></pre><h1 id="a6ae" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有不必要的布尔转换</h1><p id="424f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们已经有了一个布尔值，那么我们就不应该强制转换它们。</p><p id="34d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ea8f" class="mn lc iq mj b gy mo mp l mq mr">const result = true;</span></pre><p id="b85e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那我们就不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8482" class="mn lc iq mj b gy mo mp l mq mr">if (!!result) {<br/>  // ...<br/>}</span></pre><p id="5276" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以按原样使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="66aa" class="mn lc iq mj b gy mo mp l mq mr">if (result) {<br/>  // ...<br/>}</span></pre><h1 id="7e1f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数表达式周围没有不必要的括号</h1><p id="197c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不需要用括号将函数括起来。</p><p id="6003" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该有这样的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="95a9" class="mn lc iq mj b gy mo mp l mq mr">const foo = (function () { })</span></pre><p id="fd70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不需要函数表达式周围的括号。</p><p id="0441" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9865" class="mn lc iq mj b gy mo mp l mq mr">const foo = function () { }</span></pre><h1 id="7aec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在交换机情况下使用中断来防止故障</h1><p id="8507" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该始终在每个<code class="fe ms mt mu mj b">case</code>块或语句的末尾添加<code class="fe ms mt mu mj b">break</code>，这样它下面的代码就不会被执行。</p><p id="5c02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="393e" class="mn lc iq mj b gy mo mp l mq mr">switch (filter) {<br/>  case 1:<br/>    foo()<br/>  case 2:<br/>    bar()<br/>}</span></pre><p id="fbaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a494" class="mn lc iq mj b gy mo mp l mq mr">switch (filter) {<br/>  case 1:<br/>    foo();<br/>    break;<br/>  case 2:<br/>    bar();<br/>    break;<br/>}</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/f803d3ced109ef0950720c84cd16acdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vgq7D3rixDiOk5yo"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tangzhengtao?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">zhengtao tang</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6cae" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1507" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有像丢失<code class="fe ms mt mu mj b">break</code>语句这样的错误代码，我们应该添加它们。</p><p id="21e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有多余的操作，比如将布尔转换成布尔，那么我们应该删除它们。</p><p id="7c1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">重复的成员和变量也应该消除。</p><h2 id="d61f" class="mn lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated"><strong class="ak">简单英语JavaScript</strong></h2><p id="169c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
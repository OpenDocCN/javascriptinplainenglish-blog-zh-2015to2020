<html>
<head>
<title>React Native push notifications guide for rookies and techies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向新手和技术人员的React本地推送通知指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-native-push-notifications-guide-for-rookies-and-techies-c890db40761f?source=collection_archive---------4-----------------------#2020-03-01">https://javascript.plainenglish.io/react-native-push-notifications-guide-for-rookies-and-techies-c890db40761f?source=collection_archive---------4-----------------------#2020-03-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="17d3" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">跨平台移动基础知识</h2><div class=""/><div class=""><h2 id="a5e3" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">关于React本地项目上移动通知行为的最初假设和现实的小指南。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/ce747d9c06d385856e54eb33d0635565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2e2dNmHEMOcIEcP06EfeHw.png"/></div></div></figure><p id="275e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我已经被问过，我也见过很多次人们问关于推送通知和它在react-native中应该如何工作的问题。由于大多数本地采用者通常都是有web背景的人，他们不太了解通知行为。</p><p id="4372" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">以下是我在Reddit上收到的一个常见问题。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="a364" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">❓什么是推送通知？</h1><p id="c7ab" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated"><strong class="lc ja">👨🏻‍🔬推送通知是通过网络发送到移动设备的具有标题、描述、对象有效载荷和一些参数的消息。</strong>这些信息将用于在用户设备上显示通知窗口小部件，可以是图像、链接和许多其他东西。</p><p id="d593" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它的主要目的是邀请用户做一些事情(吸引他)或者通知他一些有趣的事情。</p><h1 id="c741" class="me mf iq bd mg mh nb mj mk ml nc mn mo kf nd kg mq ki ne kj ms kl nf km mu mv bi translated">如何发送推送通知？</h1><p id="4f0d" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">最初，通知只是与设备安装相关联的推送令牌。稍后，这个推送令牌可以用于针对特定的设备，但在所有情况下，有人(你或你的提供商)必须到达<strong class="lc ja">苹果</strong> (APNS)或<strong class="lc ja">谷歌</strong> (FCM) <strong class="lc ja">服务器</strong>。</p><p id="b340" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当您可以将这个令牌与一些目标数据相关联时，事情就开始变得有趣了…在这里，一些公司将他们的业务建立在丰富通知系统上。</p><p id="8b27" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">利用那些公司工具会让你迭代得更快更好。</p><p id="4b3e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">有很多，但出于本文的目的，<strong class="lc ja">我们将重点关注那些与react-native配合良好的。</strong></p><p id="55b2" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">以下是我个人认为的五大推送通知平台。</p><ul class=""><li id="6f53" class="ng nh iq lc b ld le lg lh lj ni ln nj lr nk lv nl nm nn no bi translated"><a class="ae lw" href="https://firebase.google.com/docs/cloud-messaging/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> Firebase云消息</strong> </a>，与其他Firebase产品配合非常好，尤其是针对目标。</li><li id="71da" class="ng nh iq lc b ld np lg nq lj nr ln ns lr nt lv nl nm nn no bi translated"><a class="ae lw" href="https://onesignal.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> OneSignal </strong> </a>，有个很有意思的free-tier，真的在做很多事情。SDK也不错。</li><li id="403e" class="ng nh iq lc b ld np lg nq lj nr ln ns lr nt lv nl nm nn no bi translated"><a class="ae lw" href="https://pushbots.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">推动</strong> </a>，看起来像一个信号。</li><li id="a213" class="ng nh iq lc b ld np lg nq lj nr ln ns lr nt lv nl nm nn no bi translated"><a class="ae lw" href="https://batch.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">批</strong> </a>，确实爽，但是贵。</li><li id="c323" class="ng nh iq lc b ld np lg nq lj nr ln ns lr nt lv nl nm nn no bi translated"><a class="ae lw" href="https://docs.expo.io/versions/latest/guides/push-notifications/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">世博</strong> </a>(有点不同，因为是RN的完整框架)。</li></ul><p id="5e9c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这些工具提供了一个仪表板来发布通知活动，你真的应该考虑那些发送你的通知。</p><h1 id="0999" class="me mf iq bd mg mh nb mj mk ml nc mn mo kf nd kg mq ki ne kj ms kl nf km mu mv bi translated">我如何在前端处理通知？</h1><p id="e5f8" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">为此，最好使用库。</p><p id="f46f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">大多数通知提供者，为他们的服务提供库，明白他们被绑定到服务本身并且不在任何其他地方工作。</p><p id="9de3" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">其他一些库是通用的，最好的选择是<a class="ae lw" href="https://github.com/wix/react-native-notifications" rel="noopener ugc nofollow" target="_blank"> WIX本地通知</a>，这是最完整和最新的免费解决方案。还有一个很棒的工具叫做<a class="ae lw" href="https://notifee.app/" rel="noopener ugc nofollow" target="_blank">notifie</a>，这是一个宣布的很棒的库，用来处理react native上的通知。</p><h1 id="dea1" class="me mf iq bd mg mh nb mj mk ml nc mn mo kf nd kg mq ki ne kj ms kl nf km mu mv bi translated">有没有可能在推送通知到达的时候触发一个功能？</h1><p id="aea9" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">是的，但是事情并不像看起来那么简单。它需要一些本地代码，一些推送提供者为此提供了很好的钩子函数。</p><p id="29e6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">应用程序在前台</strong></p><p id="89ad" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">大多数提供者给钩子函数在后台触发代码，所以是的，非常容易。这个案子你不会有任何问题。</p><p id="ad44" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">应用在后台</strong></p><p id="8bcc" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你首先需要在IOS上启用后台通知，有时这可能有点棘手，因为javascript可能不会被调用。虽然这不可行，但是没有真正的保证，你应该总是认为你的代码仍然在工作，即使回调函数没有被调用。</p><p id="df49" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">应用程序被终止</strong></p><p id="a8d4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这里无法使用javascript触发代码。你必须完全依靠本地代码或深层链接来触发应用程序在特定屏幕上打开。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="bcdd" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">那么，处理通知操作的最安全方式是什么呢？</p><h1 id="3901" class="me mf iq bd mg mh nb mj mk ml nc mn mo kf nd kg mq ki ne kj ms kl nf km mu mv bi translated">使用深度链接</h1><p id="46e6" class="pw-post-body-paragraph la lb iq lc b ld mw ka lf lg mx kd li lj my ll lm ln mz lp lq lr na lt lu lv ij bi translated">深层链接是匹配自定义模式的链接。在你可能见过的网页上，<code class="fe nu nv nw nx b">http://thing.com</code>深层链接可能是<code class="fe nu nv nw nx b">myapp://somestring</code>。</p><p id="d2bc" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">一旦应用程序使用<a class="ae lw" href="https://facebook.github.io/react-native/docs/linking#getinitialurl" rel="noopener ugc nofollow" target="_blank">链接API </a>打开，我们就可以解析字符串，并对打开的应用程序执行一些操作。</p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="25ad" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">总是认为你的应用程序就像薛定谔猫一样，只要你没有点击通知，你的应用程序就会处于什么也没发生的状态。一旦应用程序使用深层链接的intent参数打开，或者收到SDK的通知，您应该采取副作用。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div></div>    
</body>
</html>
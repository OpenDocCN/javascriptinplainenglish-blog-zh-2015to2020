<html>
<head>
<title>React Patterns — Small Code and Linting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应模式—小代码和林挺</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-patterns-small-code-and-linting-6c5bd629b9af?source=collection_archive---------11-----------------------#2020-06-18">https://javascript.plainenglish.io/react-patterns-small-code-and-linting-6c5bd629b9af?source=collection_archive---------11-----------------------#2020-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bf4886ad00ad443504636b0c402e14ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X86g9YSWt5sskJkX"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@relentlessjpg?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">William Moreland</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2706" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何通过编写小组件和使用linters来清理React代码。</p><h1 id="16ed" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">小部件</h1><p id="0272" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该保持组件较小，这样我们就可以轻松地管理每个组件的逻辑。</p><p id="5b3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="970d" class="mn lc iq mj b gy mo mp l mq mr">const LoggedInMenu = () =&gt; {<br/> // JSX for user menu<br/>}</span><span id="860c" class="mn lc iq mj b gy ms mp l mq mr">const LoggedOutMenu = () =&gt; {<br/> // JSX for admin menu<br/>}<br/>...<br/>const App = () =&gt; {<br/>  ...<br/>  return (<br/>    &lt;div&gt;<br/>      {loggedIn &amp;&amp; LoggedInMenu()}<br/>      {!loggedIn &amp;&amp; LoggedOutMenu()}<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="4bc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将组件分成更小的组件。</p><p id="002d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个用于<code class="fe mt mu mv mj b">LoggedInMenu</code>和一个<code class="fe mt mu mv mj b">LoggedOutMenu</code>。</p><h1 id="5266" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">埃斯林特</h1><p id="2586" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用ESLint来检查语法问题。</p><p id="8888" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有很多规则来检查我们能想到的几乎任何东西。</p><p id="5601" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何不好的做法都会被标记出来，我们必须修正它们。</p><p id="5ed2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有专门针对React应用的规则。</p><p id="d8ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们可以运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1aba" class="mn lc iq mj b gy mo mp l mq mr">npm install --global eslint</span></pre><p id="8594" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1073" class="mn lc iq mj b gy mo mp l mq mr">eslint app.js</span></pre><p id="477a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查语法是否有问题。</p><h1 id="b74d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">配置</h1><p id="d0b2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在<code class="fe mt mu mv mj b">.eslintrc</code>文件中配置规则。</p><p id="87ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个规则有3个选项。</p><p id="7012" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0表示禁用，1表示警告，2表示错误。</p><p id="50d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c082" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "rules": {<br/>    "for-direction": [2]<br/>  }<br/>}</span></pre><p id="b4fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">for-direction</code>是规则的名称，2代表错误。</p><p id="00ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使启用规则更容易，我们可以启用一整套规则。</p><p id="4c6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="19ad" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "extends": "eslint:recommended"<br/>}</span></pre><p id="5169" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">启用所有规则。</p><p id="4774" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">extends</code>意味着我们使用了<code class="fe mt mu mv mj b">eslint:recommended</code>列表中的所有规则。</p><p id="ecd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们必须为ES6和JSX添加一些配置。</p><p id="59c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">.eslintrc</code>中，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dd40" class="mn lc iq mj b gy mo mp l mq mr">"parserOptions": {<br/>  "ecmaVersion": 6,<br/>  "ecmaFeatures": {<br/>    "jsx": true<br/>  }<br/>}</span></pre><p id="08ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有林挺的ES6和JSX的。</p><p id="d8cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过配置ESLint，我们可以实时获得对代码的反馈，这样我们就可以纠正任何不好的代码。</p><h1 id="cafb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">React ESLint插件</h1><p id="d3a8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要使用ESLint对应用程序进行lint React，我们可以通过运行以下命令为ESLint安装React插件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fec7" class="mn lc iq mj b gy mo mp l mq mr">npm install --global eslint-plugin-react</span></pre><p id="2425" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过添加以下内容将其添加到<code class="fe mt mu mv mj b">.eslinttc</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3be6" class="mn lc iq mj b gy mo mp l mq mr">"plugins": [<br/>  "react"<br/>]</span></pre><p id="9ce9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并通过编写以下内容来更新<code class="fe mt mu mv mj b">extends</code>关键字:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4dae" class="mn lc iq mj b gy mo mp l mq mr">"extends": [<br/> "eslint:recommended",<br/> "plugin:react/recommended"<br/>],</span></pre><p id="ddfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，ESLint将检测React代码的问题。</p><p id="7001" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要启用规则，我们可以编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d5a1" class="mn lc iq mj b gy mo mp l mq mr">"rules": {<br/>  "react/jsx-indent": [2, 2]<br/>}</span></pre><p id="7129" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个2表示规则被启用，第二个2表示我们想要缩进2个空格。</p><h1 id="d7d1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Airbnb配置</h1><p id="40db" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一个流行的ESLint插件是Airbnb配置插件。</p><p id="6418" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有自己的一套规则，类似于默认规则，但有一些额外的东西在里面。</p><p id="e0a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们首先运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0a89" class="mn lc iq mj b gy mo mp l mq mr">npm install --global eslint-config-airbnbeslint eslint-plugin-jsx-a11y eslint-plugin-import eslint-plugin-react</span></pre><p id="8f05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装所有的依赖项。</p><p id="6a92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe mt mu mv mj b">.eslintrc</code>中，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1e48" class="mn lc iq mj b gy mo mp l mq mr">{<br/>  "extends": "airbnb"<br/>}</span></pre><h1 id="5909" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数式编程</h1><p id="f794" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript具有函数式编程特性，让我们可以创建具有这些特性的程序。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/742783f10d85e4b52fbdb138dbb5ca19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9sNeq0qPR5DKg4-t"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@manfang?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Michael Anfang</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9e2e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">一等品</h1><p id="5daa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript包含的一个很大的函数式编程特性是，函数和其他任何东西一样都是对象。</p><p id="886f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以将它们设置为属性值，为它们分配变量，并将它们作为参数传入。</p><p id="f7e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cd02" class="mn lc iq mj b gy mo mp l mq mr">const add = (a, b) =&gt; a + b;</span></pre><p id="6f0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过编写来创建一个函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="26a3" class="mn lc iq mj b gy mo mp l mq mr">const log = func =&gt; (...args) =&gt; {<br/>  console.log(...args);<br/>  return func(...args);<br/>}</span></pre><p id="6487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以使用<code class="fe mt mu mv mj b">log</code>如下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c4ad" class="mn lc iq mj b gy mo mp l mq mr">const add = (a, b) =&gt; a + b;<br/>const logAdd = log(add);<br/>logAdd(1, 2);</span></pre><p id="9925" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe mt mu mv mj b">logAdd</code>来创建它。</p><p id="4cdd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">log</code>是高阶函数，因为它将函数作为参数。</p><p id="d1e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还返回一个可以用自己的参数调用的函数。</p><p id="addd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">add</code>函数传递给<code class="fe mt mu mv mj b">log</code>来返回一个函数。</p><p id="6415" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过向返回的函数传递参数来调用它。</p><h1 id="6550" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3766" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用ESLint来检查React项目中的错误语法。</p><p id="a526" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，函数式编程特性也经常在React中使用。</p></div></div>    
</body>
</html>
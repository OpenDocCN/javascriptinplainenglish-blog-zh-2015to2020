<html>
<head>
<title>Vue 3 — Dynamic Transitions and State Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —动态转换和状态动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-dynamic-transitions-and-state-animations-432c5073ec83?source=collection_archive---------16-----------------------#2020-11-11">https://javascript.plainenglish.io/vue-3-dynamic-transitions-and-state-animations-432c5073ec83?source=collection_archive---------16-----------------------#2020-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ce1119aed1a217810946220b98cb8a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ENiP9NXjtURCGUfY"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mitchorr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mitchell Orr</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b4b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何创建动态转换和状态变化动画。</p><h1 id="cbde" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态转换</h1><p id="0d6c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过向<code class="fe me mf mg mh b">name</code>属性传递一个动态字符串来创建动态转换。</p><p id="14ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="915a" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      Fade in<br/>      &lt;input type="range" v-model="fadeDuration" min="0" :max="5000" /&gt;</span><span id="52b6" class="mq lc iq mh b gy mv ms l mt mu">      &lt;button @click="show = !show"&gt;<br/>        toggle<br/>      &lt;/button&gt;<br/>      &lt;transition<br/>        :css="false"<br/>        @before-enter="beforeEnter"<br/>        @enter="enter"<br/>        @leave="leave"<br/>      &gt;<br/>        &lt;p v-if="show"&gt;hello&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            show: false,<br/>            fadeDuration: 1000<br/>          };<br/>        },<br/>        methods: {<br/>          beforeEnter(el) {<br/>            el.style.opacity = 0;<br/>          },<br/>          enter(el, done) {<br/>            Velocity(<br/>              el,<br/>              { opacity: 1 },<br/>              {<br/>                duration: this.fadeDuration,<br/>                complete: done<br/>              }<br/>            );<br/>          },<br/>          leave(el, done) {<br/>            Velocity(<br/>              el,<br/>              { opacity: 0 },<br/>              {<br/>                duration: this.fadeDuration,<br/>                complete: done<br/>              }<br/>            );<br/>          }<br/>        }<br/>      });</span><span id="2d8e" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="91e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了速度库来添加我们选择的过渡效果。</p><p id="f58d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以调整<code class="fe me mf mg mh b">fadeDuration</code>,这样我们就可以改变进入和离开效果的长度。</p><p id="2e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是调用<code class="fe me mf mg mh b">Velocity</code>来改变我们想要的不透明度。</p><h1 id="08a2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">状态转换</h1><p id="04f1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vue可以动画显示状态变化。</p><p id="98ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们包括数字和计算、显示的颜色、SVG节点和其他属性。</p><p id="6126" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要做到这一点，我们可以用手表来制作状态变化的动画。</p><p id="de48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写下一个简单的状态转换:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c6db" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input v-model.number="number" type="number" step="20" /&gt;<br/>      &lt;p&gt;{{ animatedNumber }}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            number: 0,<br/>            tweenedNumber: 0<br/>          };<br/>        },<br/>        computed: {<br/>          animatedNumber() {<br/>            return this.tweenedNumber.toFixed(0);<br/>          }<br/>        },<br/>        watch: {<br/>          number(newValue) {<br/>            gsap.to(this.$data, { duration: 1.5, tweenedNumber: newValue });<br/>          }<br/>        }<br/>      });</span><span id="6ab1" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9425" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们输入一个数字时，它就会被激活。</p><p id="2d26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该动画不在<code class="fe me mf mg mh b">number</code>观察器中。</p><p id="1b31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们称格林索克的<code class="fe me mf mg mh b">to</code>方法为最终值制作动画。</p><p id="906e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">this.$data</code>有最终数字的值。</p><p id="d2b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">tweenedNumber</code>是动画制作过程中显示的值。</p><p id="77b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">animatedNumber</code>取<code class="fe me mf mg mh b">tweenedNumber</code>值，返回并显示。</p><h1 id="3c6e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将转换组织成组件</h1><p id="02eb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将动画组织成它们自己的组件。</p><p id="af71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8f37" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input v-model.number="x" type="number" step="20" /&gt; +<br/>      &lt;input v-model.number="y" type="number" step="20" /&gt; = {{ result }}<br/>      &lt;p&gt;<br/>        &lt;animated-integer :value="x"&gt;&lt;/animated-integer&gt; +<br/>        &lt;animated-integer :value="y"&gt;&lt;/animated-integer&gt; =<br/>        &lt;animated-integer :value="result"&gt;&lt;/animated-integer&gt;<br/>      &lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="4a9e" class="mq lc iq mh b gy mv ms l mt mu">    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            x: 400,<br/>            y: 373<br/>          };<br/>        },<br/>        computed: {<br/>          result() {<br/>            return this.x + this.y;<br/>          }<br/>        }<br/>      });</span><span id="1920" class="mq lc iq mh b gy mv ms l mt mu">      app.component("animated-integer", {<br/>        template: "&lt;span&gt;{{ fullValue }}&lt;/span&gt;",<br/>        props: {<br/>          value: {<br/>            type: Number,<br/>            required: true<br/>          }<br/>        },<br/>        data() {<br/>          return {<br/>            tweeningValue: 0<br/>          };<br/>        },<br/>        computed: {<br/>          fullValue() {<br/>            return Math.floor(this.tweeningValue);<br/>          }<br/>        },<br/>        methods: {<br/>          tween(newValue, oldValue) {<br/>            gsap.to(this.$data, {<br/>              duration: 0.5,<br/>              tweeningValue: newValue,<br/>              ease: "sine"<br/>            });<br/>          }<br/>        },<br/>        watch: {<br/>          value(newValue, oldValue) {<br/>            this.tween(newValue, oldValue);<br/>          }<br/>        },<br/>        mounted() {<br/>          this.tween(this.value, 0);<br/>        }<br/>      });</span><span id="c50d" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3702" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe me mf mg mh b">animated-integer</code>组件来动画化我们的数字。</p><p id="82d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它仍然动画显示数字，但是我们有一个<code class="fe me mf mg mh b">tween</code>方法来创建动画，这样我们可以简化我们的<code class="fe me mf mg mh b">value</code>观察器方法。</p><p id="8b9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">fullValue</code>是一个计算属性，用于将<code class="fe me mf mg mh b">this.tweeningValue</code>向下舍入到最接近的整数。</p><p id="95a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">this.tweeningValue</code>是将在动画过程中显示的值。</p><p id="fae9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以当我们输入数字时，我们会看到所有的数字都是动态的。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/30535c96199e9275d0ddabeb14472fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b7sa0Ln4c5YjrqkO"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@accrualbowtie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ryan Wallace</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2fc6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="14d7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">观察器的一个很好的用途是将状态变化制成动画。</p><p id="1cba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过格林斯托克图书馆简化了这一过程。</p><p id="213f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以随时更改过渡的设置。</p><p id="f1b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
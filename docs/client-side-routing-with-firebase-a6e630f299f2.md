# åŸºäº Firebase çš„å®¢æˆ·ç«¯è·¯ç”±

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/client-side-routing-with-firebase-a6e630f299f2?source=collection_archive---------15----------------------->

## ä½¿ç”¨ React è·¯ç”±å™¨å’Œ Firebase èº«ä»½éªŒè¯åˆ›å»ºå—ä¿æŠ¤çš„è·¯ç”±

![](img/d38813a2e14e64775d965fbf88b59f4c.png)

# é—®é¢˜

å‡è®¾ä½ æ­£åœ¨å°è¯•ä½¿ç”¨ [React](https://reactjs.org/) å’Œ [Firebase](https://firebase.google.com/) æ„å»ºä¸€ä¸ª web åº”ç”¨ç¨‹åºã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨å·²ç»å®Œæˆäº†ä»¥ä¸‹æ­¥éª¤:

1.  åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„å•é¡µåº”ç”¨ç¨‹åº:`npx create-react-app .`
2.  å·²å®‰è£… Firebase npm è½¯ä»¶åŒ…:`npm install --save firebase`
3.  åœ¨ä½ çš„ React: `firebase.initializeApp(firebaseConfig);`çš„ index.js æ–‡ä»¶ä¸­æ·»åŠ äº† Firebase
4.  åˆ›å»ºäº†ä¸€ä¸ª[åŸºæœ¬æ³¨å†Œå’Œç™»å½•ç•Œé¢](https://www.positronx.io/build-react-login-sign-up-ui-template-with-bootstrap-4/)
5.  å¢åŠ äº† [Firebase éªŒè¯ç ](https://firebase.google.com/docs/auth/web/start)

ä¸‹ä¸€æ­¥æ˜¯å°†ç”¨æˆ·è·¯ç”±åˆ°å—ä¿æŠ¤çš„é¡µé¢ã€‚ç„¶è€Œï¼Œè¿™å¸¦æ¥äº†ä¸€äº›å¯æ€•çš„é—®é¢˜:

*   å¦‚ä½•åœ¨æˆ‘çš„å•é¡µåº”ç”¨ç¨‹åºä¸­æ·»åŠ å¤šä¸ªé¡µé¢ï¼Ÿ
*   å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºå—ä¿æŠ¤çš„è·¯ç”±ï¼Ÿ
*   æˆ‘å¦‚ä½•å°†å®ƒä¸ Firebase èº«ä»½éªŒè¯è”ç³»èµ·æ¥ï¼Ÿ

# è§£å†³åŠæ³•

æ‚¨é¦–å…ˆéœ€è¦å°† React è·¯ç”±å™¨æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚ [React Router](https://reactrouter.com/) æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥è®©ä½ åœ¨ web app ä¸­å¤„ç†è·¯ç”±ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨ä¸Šå¤„ç†ã€‚

ä¹‹å‰:

```
app.get('/home', function (req, res) { res.render('home'); })
```

ç°åœ¨:

```
<Route exact path=â€/homeâ€ component={Home} />
```

è¦å°† React Router æ·»åŠ åˆ°æ‚¨çš„ web åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å¯ä»¥å®‰è£… *react-router-domã€‚*æˆ‘ç”¨è¿‡ 5.2.0 ç‰ˆæœ¬ï¼Œæ‰€ä»¥è¿™æ®µä»£ç å°†æ¥æœ‰å¯èƒ½ä¼šè¢«å¼ƒç”¨ã€‚

```
npm install react-router-dom
```

æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„ **App.js.** ä¸­æ·»åŠ  *firebase* ã€ [*useState*](https://reactjs.org/docs/hooks-state.html) ã€ [*useEffect*](https://reactjs.org/docs/hooks-effect.html) å’Œ[*react-router-DOM*](https://reactrouter.com/web/guides/quick-start)ç„¶åï¼Œä¸­çš„**å‡½æ•° **App** ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„çŠ¶æ€å˜é‡ã€‚è¿™å°†ç”¨äºç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç™»å½•åº”ç”¨ç¨‹åºã€‚**

æ¥ä¸‹æ¥ï¼Œæ¯å½“ Firebase ç”¨æˆ·å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ *useEffect* é’©å­æ¥æ›´æ–°æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„çŠ¶æ€å˜é‡ã€‚

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬çš„ return è¯­å¥ã€‚ä½ å¯èƒ½ä¼šçœ‹åˆ°*è·¯å¾„*è¢«è®¾ç½®åˆ°å­ç›®å½•ï¼Œæ¯”å¦‚*"/ç™»å½•"*æˆ–è€…*"/ä»ªè¡¨æ¿ã€‚"*

å¦å¤–ï¼Œæ³¨æ„*åŠ è½½*ã€*ä¸»é¡µ*ã€*ç™»å½•*ã€*æ³¨å†Œ*ã€*ç®¡ç†*å’Œ*é”™è¯¯*éƒ½æ˜¯éœ€è¦åœ¨ **App.js** é¡¶éƒ¨å¯¼å…¥çš„ React ç»„ä»¶ã€‚æˆ‘ä¸ä¼šåŒ…å«è¿™äº›é¡µé¢çš„ä»»ä½•ä»£ç ï¼Œå› ä¸ºæ‚¨åº”è¯¥å·²ç»æœ‰äº†æ‚¨çš„æ³¨å†Œå’Œç™»å½•ä»£ç ã€‚

çœ‹èµ·æ¥æˆ‘ä»¬éƒ½å®Œæˆäº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€æ­¥ã€‚*è·¯å¾„*åœ¨ **App.js** é¡¶éƒ¨å¯¼å…¥ï¼Œä½†æ˜¯ *PublicRoute* å’Œ *PrivateRoute* ä¸å­˜åœ¨ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å¯èƒ½æœ‰ä¸€äº›åªæœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰èƒ½è®¿é—®çš„é¡µé¢ï¼Œæ¯”å¦‚*ä»ªè¡¨æ¿*é¡µé¢ã€‚ç„¶è€Œï¼Œä½ ä¹Ÿå¯èƒ½æœ‰è®¤è¯ç”¨æˆ·ä¸èƒ½è®¿é—®çš„é¡µé¢ï¼Œæ¯”å¦‚*æ³¨å†Œ*é¡µé¢ã€‚æ¯•ç«Ÿï¼Œä¸ºä»€ä¹ˆå·²ç»ç™»å½•çš„äººéœ€è¦åˆ›å»ºå¦ä¸€ä¸ªå¸æˆ·å‘¢ï¼Ÿ

å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° **App.js** çš„åº•éƒ¨ï¼Œ**åœ¨ **App** å‡½æ•°çš„**ä¹‹å¤–ã€‚

ç°åœ¨ï¼Œæ‚¨å·²ç»è§£å†³äº†å°†ç”¨æˆ·è·¯ç”±åˆ°å—ä¿æŠ¤é¡µé¢çš„é—®é¢˜ï¼

# èµ°å‘

![](img/7d13d0af7d479ec7efd4a86f313bebbd.png)

è¦æ‰©å±•æœ¬æ•™ç¨‹ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

*   æ·»åŠ æ›´å¤šå—ä¿æŠ¤çš„å’Œå…¬å…±çš„è·¯ç”±
*   åœ¨ useEffect æŒ‚é’©å†…æ·»åŠ é™„åŠ ä»£ç 
*   æ”¹å˜**ä¿æŠ¤è·¯çº¿**å’Œ**å…¬å…±è·¯çº¿**çš„é‡å®šå‘

å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œé—®é—®è‡ªå·±:

*   æˆ‘æ˜¯å¦ç¼ºå°‘ä»»ä½•æ³¨å†Œã€ç™»å½•æˆ–ç®¡ç†ç»„ä»¶ï¼Ÿ
*   æˆ‘æ˜¯å¦æ­£ç¡®åœ°åˆ›å»ºäº†ä¸€ä¸ª Firebase é¡¹ç›®ï¼Ÿ
*   æˆ‘æ˜¯å¦å®‰è£…äº†**å¹¶ä¸”**å¯¼å…¥äº†æ‰€æœ‰éœ€è¦çš„åŒ…ï¼Ÿ
*   æˆ‘ç”¨çš„æ˜¯æ—§çš„**è¿˜æ˜¯æ–°ç‰ˆæœ¬çš„**Reactï¼Ÿ

æœ€åï¼Œè¿™é‡Œæœ‰ä¸€äº›æˆ‘ç”¨æ¥å­¦ä¹ æ‰€æœ‰ä½¿ç”¨ Firebase çš„ React è·¯ç”±çš„èµ„æºã€‚è¯·æ£€æŸ¥ä»–ä»¬ï¼

*   [https://stack overflow . com/questions/58769189/react-router-protected-route-with-firebase-auth-check](https://stackoverflow.com/questions/58769189/react-router-protected-route-with-firebase-auth-check)
*   [https://medium . com/@ subalerts/creating-protected-routes-in-react-js-89e 95974 a822](https://medium.com/@subalerts/creating-protected-routes-in-react-js-89e95974a822)

æ„Ÿè°¢ä½ æŠŠè¿™ç¯‡æ–‡ç« çœ‹å®Œï¼æˆ‘çœŸçš„å¾ˆé«˜å…´æ‰¾åˆ°åƒæˆ‘ä¸€æ ·å¯¹è®¡ç®—æœºç§‘å­¦å……æ»¡çƒ­æƒ…çš„äººã€‚

ç¡®ä¿**å–œæ¬¢** / **åˆ†äº«**è¿™ç¯‡æ–‡ç« ğŸ˜ï¼Œå¹¶è¯„è®ºä½ çš„é˜…è¯»ä½“éªŒï¼
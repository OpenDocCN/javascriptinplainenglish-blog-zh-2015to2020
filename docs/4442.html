<html>
<head>
<title>JavaScript’s Equality Operator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript的等式运算符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascripts-equality-operator-7b75e8cfefa1?source=collection_archive---------12-----------------------#2020-12-11">https://javascript.plainenglish.io/javascripts-equality-operator-7b75e8cfefa1?source=collection_archive---------12-----------------------#2020-12-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="06fe" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">一个关于类型转换的故事</h2></div><p id="ed66" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">说到等式运算符，弄清楚JavaScript如何处理类型转换可能很困难。有了更好的理解——或者至少有了参考资料——可以对您的编码产生积极的影响，并为您更好地应对类型转换的奥秘和意外副作用做好准备。</p><p id="9a3a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这篇文章希望成为你和我的参考。先说一些定义吧！</p><h2 id="7344" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">严格平等</h2><p id="8694" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">严格相等(<code class="fe lw lx ly lz b">===</code>，在其他语言中经常是<code class="fe lw lx ly lz b">==</code>)对于大多数程序员来说都很熟悉。它检查两个值是否是相同类型的<em class="ma">和</em>。</p><h2 id="28c5" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">操作数</h2><p id="5af2" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们在操作中使用的对象/值。在<code class="fe lw lx ly lz b">5 == '5'</code>中，有两个操作数——<code class="fe lw lx ly lz b">5</code>和<code class="fe lw lx ly lz b">'5'</code>。</p><h2 id="d40b" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">类型转换</h2><p id="d801" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">类型转换是将数据从一种数据类型转换为另一种数据类型。这可以隐式发生(当编译器自动分配数据类型时)，也可以显式发生(当您的代码告诉JavaScript执行转换时)。当转换自动发生时，就像等式操作符一样，我们也将该过程称为<strong class="ke io">类型强制</strong>。让我们来看看实际情况。</p><h1 id="467b" class="mb kz in bd la mc md me ld mf mg mh lg jt mi ju lj jw mj jx lm jz mk ka lp ml bi translated">相等运算符</h1><p id="04d6" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">相等运算符(<code class="fe lw lx ly lz b">==</code>)在比较操作数时执行类型转换。这在比较看起来相似但类型不同的值时很有用。</p><p id="0229" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其中一种情况是对照看起来像数字的字符串来检查数字。</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="c670" class="ky kz in lz b gy mu mv l mw mx">5 == '5'; // true</span></pre><p id="ac43" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里发生的事情已经有些清楚了。字符串被转换成一个数字，然后严格的相等性被检查…对吗？也许吧！也许数字正在被转换成字符串？在这篇文章中，我将提供具体的例子和问题的描述，比如这些围绕类型转换的问题。</p><figure class="mm mn mo mp gt mz gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi my"><img src="../Images/7c4c27498a04daa741fdc05d4a770c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZnBXTbMJjQFka93mWbBYQ.png"/></div></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk">5 == ‘5’</figcaption></figure><p id="3afb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ECMAScript规范可能会令人费解。它读起来几乎像一篇数学研究论文。当我想知道等式操作符的内幕时，我去了源。下面，我将构建一个易于遵循的协议来帮助您确定抽象等式在几种情况下是如何工作的。</p><blockquote class="nl nm nn"><p id="6b78" class="kc kd ma ke b kf kg jo kh ki kj jr kk no km kn ko np kq kr ks nq ku kv kw kx ig bi translated">注意:</p><p id="9a0c" class="kc kd ma ke b kf kg jo kh ki kj jr kk no km kn ko np kq kr ks nq ku kv kw kx ig bi translated">一些步骤将有明确的返回(例如# 2):<br/>–<code class="fe lw lx ly lz b">return true</code></p><p id="2143" class="kc kd ma ke b kf kg jo kh ki kj jr kk no km kn ko np kq kr ks nq ku kv kw kx ig bi translated">其他人将输出一个新的抽象等式运算，而不是(例如# 3):<br/>–<code class="fe lw lx ly lz b">5 == 5;</code></p><p id="7feb" class="kc kd ma ke b kf kg jo kh ki kj jr kk no km kn ko np kq kr ks nq ku kv kw kx ig bi translated">得到的操作数被带回步骤#1，在那里算法被重复，直到达到显式返回。</p></blockquote><h1 id="cae8" class="mb kz in bd la mc md me ld mf mg mh lg jt mi ju lj jw mj jx lm jz mk ka lp ml bi translated">抽象等式比较算法</h1><p id="90e4" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">为<a class="ae nk" href="https://www.ecma-international.org/ecma-262/" rel="noopener ugc nofollow" target="_blank"> ECMA2020 </a>更新。</p><h2 id="164b" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">对于<code class="fe lw lx ly lz b"> x == y,</code>,请遵循以下步骤:</h2><p id="0531" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated"><strong class="ke io"> 1。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">和</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">同类型</strong><strong class="ke io">，返回</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x === y</strong></code></p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="ef20" class="ky kz in lz b gy mu mv l mw mx">5 === 5;                             =&gt; true<br/>'foo' === 'bar';                     =&gt; false<br/>false === false;                     =&gt; true<br/>null === undefined;                  =&gt; false<br/>{ foo: 'bar' } === { foo: 'bar' };   =&gt; false</span></pre><p id="1c0d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 2。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">是</strong> <code class="fe lw lx ly lz b"><strong class="ke io">null</strong></code> <strong class="ke io">而</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是</strong> <code class="fe lw lx ly lz b"><strong class="ke io">undefined</strong></code> <strong class="ke io">(反之亦然)，返回</strong> <code class="fe lw lx ly lz b"><strong class="ke io">true</strong></code></p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="da24" class="ky kz in lz b gy mu mv l mw mx">null == undefined; =&gt; true</span></pre><p id="6f7a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 3。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">是一个字符串，而</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是一个数字(反之亦然)，则将字符串转换为数字</strong></p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="f83c" class="ky kz in lz b gy mu mv l mw mx">'5' == 5;<br/>  =&gt; convert '5' to Number<br/>  =&gt; Number('5') =&gt; 5</span><span id="8852" class="ky kz in lz b gy nr mv l mw mx">5 == 5;</span></pre><p id="2507" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 4。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">是一个BigInt，而</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是一个字符串(反之亦然)，则将该字符串转换为一个BigInt </strong></p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="08db" class="ky kz in lz b gy mu mv l mw mx">BigInt(5) == '5';<br/>  =&gt; convert '5' to BigInt<br/>  =&gt; Bigint('5')</span><span id="0ec7" class="ky kz in lz b gy nr mv l mw mx">BigInt(5) == BigInt('5');</span></pre><p id="9567" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 5。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">或</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是布尔值，将其转换为数字</strong></p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="8feb" class="ky kz in lz b gy mu mv l mw mx">true == 3;<br/>  =&gt; convert true to Number<br/>  =&gt; Number(true) =&gt; 1</span><span id="be83" class="ky kz in lz b gy nr mv l mw mx">1 == 3;</span><span id="1ede" class="ky kz in lz b gy nr mv l mw mx">false == 'foo';<br/>  =&gt; convert false to Number<br/>  =&gt; Number(false) =&gt; 0</span><span id="5e49" class="ky kz in lz b gy nr mv l mw mx">0 == 'foo';</span></pre><p id="fd25" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 6。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">是字符串、数字、BigInt或符号，而</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是对象(反之亦然)，则尝试将对象转换成原语</strong></p><p id="c044" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有时，对象有内置的/预定义的方法来帮助转换成原语。这种方法超出了本文的范围，我们将忽略这些特殊情况——对于这一步，我们将使用一个简单的对象<br/> <code class="fe lw lx ly lz b">{ foo: 'bar' }</code>。</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="8a9a" class="ky kz in lz b gy mu mv l mw mx">’baz’ == { foo: 'bar' };<br/>5 == { foo: 'bar' };<br/>BigInt(5) == { foo: 'bar' };<br/>Symbol('baz') == { foo: 'bar' };</span></pre><p id="8918" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在每一种情况下，对象的<code class="fe lw lx ly lz b">toString</code>方法都用于转换。这个方法的默认行为只是返回字符串<code class="fe lw lx ly lz b">'[object Object]'</code>。</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="1b39" class="ky kz in lz b gy mu mv l mw mx">[String/Number/BigInt/Symbol] == { foo: 'bar' };<br/>  =&gt; convert object using .toString()<br/>  =&gt; { foo: 'bar' }.toString() =&gt; '[object Object]'</span><span id="f969" class="ky kz in lz b gy nr mv l mw mx">[String/Number/BigInt/Symbol] == '[object Object]';</span></pre><p id="6733" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> 7。如果</strong> <code class="fe lw lx ly lz b"><strong class="ke io">x</strong></code> <strong class="ke io">是一个BigInt，</strong> <code class="fe lw lx ly lz b"><strong class="ke io">y</strong></code> <strong class="ke io">是一个数字(反之亦然):</strong></p><ul class=""><li id="84dc" class="ns nt in ke b kf kg ki kj kl nu kp nv kt nw kx nx ny nz oa bi translated">如果<code class="fe lw lx ly lz b">x</code>或<code class="fe lw lx ly lz b">y</code>为<code class="fe lw lx ly lz b">NaN</code>、<code class="fe lw lx ly lz b">+∞</code>或<code class="fe lw lx ly lz b">-∞</code>，则返回<code class="fe lw lx ly lz b">false</code></li></ul><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="8e4c" class="ky kz in lz b gy mu mv l mw mx">BigInt(5) == NaN; =&gt; false<br/>BigInt(5) == Infinity; =&gt; false<br/>BigInt(5) == -Infinity; =&gt; false</span></pre><ul class=""><li id="05d3" class="ns nt in ke b kf kg ki kj kl nu kp nv kt nw kx nx ny nz oa bi translated">如果<code class="fe lw lx ly lz b">x</code>和<code class="fe lw lx ly lz b">y</code>都不是<code class="fe lw lx ly lz b">NaN</code>、<code class="fe lw lx ly lz b">+∞</code>或<code class="fe lw lx ly lz b">-∞</code>，则<code class="fe lw lx ly lz b">x</code>和<code class="fe lw lx ly lz b">y</code>的数值完全相等</li></ul><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="19d9" class="ky kz in lz b gy mu mv l mw mx">BigInt(5) == 5;<br/>  =&gt; Number(BigInt(5)) =&gt; 5</span><span id="ea8e" class="ky kz in lz b gy nr mv l mw mx">5 === 5; =&gt; true</span><span id="93e0" class="ky kz in lz b gy nr mv l mw mx">BigInt(5) == 3;<br/>  =&gt; Number(BigInt(5)) =&gt; 5</span><span id="38a5" class="ky kz in lz b gy nr mv l mw mx">5 === 3; =&gt; false</span></pre><p id="bdf5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">8。如果您到达此清单的底部，请返回 <code class="fe lw lx ly lz b"><strong class="ke io">false</strong></code></p></div><div class="ab cl ob oc hr od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ig ih ii ij ik"><p id="6e65" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">终于可以给我们原来的问题一个确定的答案了！</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="21bb" class="ky kz in lz b gy mu mv l mw mx">5 == '5';<br/>  =&gt; Step #3<br/>    =&gt; If x is a String and y is a Number (or vice-versa),<br/>    =&gt; convert the String to a Number</span><span id="a16a" class="ky kz in lz b gy nr mv l mw mx">Number('5') =&gt; 5</span><span id="63b7" class="ky kz in lz b gy nr mv l mw mx">// return to top of protocol</span><span id="45c7" class="ky kz in lz b gy nr mv l mw mx">5 == 5;<br/>  =&gt; Step #1<br/>    =&gt; If x and y are of the same type, return x === y</span><span id="3e32" class="ky kz in lz b gy nr mv l mw mx">5 === 5; =&gt; true</span></pre><p id="4970" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经确认，在这个例子中，我们的字符串<code class="fe lw lx ly lz b">'5'</code>被转换成一个数字，然后使用结果检查严格的相等性。</p><h1 id="6877" class="mb kz in bd la mc md me ld mf mg mh lg jt mi ju lj jw mj jx lm jz mk ka lp ml bi translated">结论</h1><p id="797c" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">太好了！希望本指南能为您的等式运算符需求提供有用的参考。</p><p id="c39f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript还有其他几个启动类型转换的操作符。下一次，我将通过另一个演练来探索这些。我很想听到你的反馈，所以请留下你的回复！这些对我以后的文章有帮助。</p></div><div class="ab cl ob oc hr od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ig ih ii ij ik"><h2 id="d15a" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">来源</h2><ul class=""><li id="809d" class="ns nt in ke b kf lr ki ls kl oi kp oj kt ok kx nx ny nz oa bi translated"><a class="ae nk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Equality" rel="noopener ugc nofollow" target="_blank">相等(==) — JavaScript | MDN </a></li><li id="0188" class="ns nt in ke b kf ol ki om kl on kp oo kt op kx nx ny nz oa bi translated"><a class="ae nk" href="https://www.ecma-international.org/ecma-262/" rel="noopener ugc nofollow" target="_blank"> ECMAScript 2020语言规范</a></li><li id="c662" class="ns nt in ke b kf ol ki om kl on kp oo kt op kx nx ny nz oa bi translated"><a class="ae nk" href="https://javascript.info/object-toprimitive#toprimitive" rel="noopener ugc nofollow" target="_blank">对象到图元的转换</a></li></ul></div></div>    
</body>
</html>
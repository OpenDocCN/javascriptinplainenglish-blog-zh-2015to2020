# ä½¿ç”¨ Angular Route-guard ä¿æŠ¤ Angular é¡µé¢-é€šè¿‡å…è®¸ã€æ‹’ç»æˆ–é‡å®šå‘åˆ°å…¶ä»–é¡µé¢è§†å›¾ã€‚

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/use-angular-route-guards-to-secure-angular-pages-by-allow-deny-or-redirect-to-other-page-view-f2537583e9a?source=collection_archive---------0----------------------->

## **ä½¿ç”¨ route-guard ä¿æŠ¤è§’é¡µéå¸¸ç®€å•ã€‚**

[](https://medium.com/codechintan/ionic-hide-header-on-scroll-b8828a7a7f86) [## Ionic4 éšè—æ»šåŠ¨æ ‡é¢˜ã€‚

### å¦‚ä½•åœ¨ Ionic æ¡†æ¶ä¸­éšè—å†…å®¹æ»šåŠ¨çš„æ ‡é¢˜ï¼Ÿ

medium.com](https://medium.com/codechintan/ionic-hide-header-on-scroll-b8828a7a7f86) ![](img/9a9ca0eede80891dbe6aed5a64873d01.png)

è·¯ç”±é˜²æŠ¤æ˜¯ Angular è·¯ç”±å™¨çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼Œå®ƒåŸºäºæŸç§é€»è¾‘ï¼ŒåŸºäºç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œå…è®¸æˆ–æ‹’ç»ç”¨æˆ·è®¿é—®è·¯ç”±é¡µé¢ã€‚

*   ROUTE-guard åœ¨æœ‰ç™»å½•/æ³¨é”€åœºæ™¯çš„ web åº”ç”¨ç¨‹åºä¸­éå¸¸é‡è¦ã€‚
*   å®ƒé€šå¸¸ç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•ä»¥åŠæ˜¯å¦æœ‰æƒè®¿é—®é¡µé¢ã€‚
*   æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç®¡ç†å“ªäº›é¡µé¢å…è®¸ç™»å½•ç”¨æˆ·ï¼Œå“ªäº›é¡µé¢å…è®¸æœªç™»å½•ç”¨æˆ·ã€‚

## å®æ–½è·¯çº¿å®ˆå«

æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°`@angular/router`åŒ…ä¸­å¯ç”¨çš„`[CanActivate](https://angular.io/api/router/CanActivate)`æ¥å£æ¥æ·»åŠ ä¸€ä¸ªè·¯ç”±å®ˆå«ï¼Œå¹¶æ‰©å±•ä¿å­˜å…è®¸æˆ–æ‹’ç»è®¿é—®è·¯ç”±çš„é€»è¾‘çš„`canActivate()`æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼Œä¸‹åˆ—è­¦å«å°†æ£€æŸ¥`userLoggedIn`çš„å€¼ï¼Œå¹¶ç›¸åº”åœ°å…è®¸è¿›å…¥ä¸€æ¡è·¯çº¿ **:**
( `Don't worry about the code - we'll understand everything in detail.`)

```
class AuthGuardService implements **CanActivate** {
  userLoggedIn = false;**canActivate**() {
    if (this.userLoggedIn) {
     return true;
    } else {
     return false;
    }
  }
}
```

æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨`canActivate`å±æ€§ä¿æŠ¤ä¸€æ¡è·¯çº¿:

```
const routes: Routes = [
  {
    path: 'user/:id', 
    component: UserDetailComponent,
    **canActivate**:[AuthGuardService] 
  }
];
```

ä¸Šé¢çš„ä»£ç æ˜¯å…³äºâ€œ[ä¸€ä¸ªè§’åº¦ç»„ä»¶](https://medium.com/@AnkitMaheshwariIn/routing-of-an-angular-component-angular-routing-2b7e53046542)çš„èµ°çº¿â€ã€‚
[ç‚¹å‡»æ­¤å¤„ğŸ‘†](https://medium.com/@AnkitMaheshwariIn/routing-of-an-angular-component-angular-routing-2b7e53046542)äº†è§£æ›´å¤šå…³äºè§’åº¦è·¯ç”±çš„ä¿¡æ¯ã€‚

æˆ‘ä»¬å¯ä»¥**å°†**â€™**Route Guardsâ€™åº”ç”¨åˆ°** **æˆ‘ä»¬ web åº”ç”¨ç¨‹åºçš„è®¤è¯åŒºåŸŸ**ï¼Œæˆ–è€…éœ€è¦ç‰¹æ®Šæƒé™æ‰èƒ½è®¿é—®çš„ç®¡ç†éƒ¨åˆ†ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªéå¸¸ç®€å•çš„è·¯ç”±é˜²æŠ¤å®ç°ã€‚

# åˆ›é€ å®ˆå«

æˆ‘ä»¬å°†é¦–å…ˆåˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œä½†æ˜¯è¦åˆ›å»ºä¸€ä¸ªå®ˆå«ï¼Œæˆ‘ä»¬å¿…é¡»å®ç°`canActivate`ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`AuthGuardService`,åœ¨æ‚¨çš„ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦ä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤:

```
ng g s service/AuthGuard
```

è¿™ä¸ªå‘½ä»¤å°†ç”Ÿæˆä¸¤ä¸ªç±»å‹è„šæœ¬æ–‡ä»¶â€”â€”è¯·çœ‹ä¸‹é¢ğŸ‘‡

![](img/4d5517ddf3e1b24b5936ebfa434aadf3.png)

# #1 åˆ›å»º AuthGuardService

æ¥ä¸‹æ¥ï¼Œæ‰“å¼€`src/app/service/auth-guard.service.ts`æ–‡ä»¶ï¼Œæ›´æ–°å¦‚ä¸‹ **:** (æˆ‘åœ¨è¿™æ®µä»£ç ä¸­å¯¼å…¥å¹¶ä½¿ç”¨äº†`AuthService`ğŸ‘‡ğŸ‘‡è¦äº†è§£æ›´å¤šå…³äº`AuthService`çš„ä¿¡æ¯ï¼Œè¯·ç‚¹å‡»è¿™é‡ŒğŸ‘†)

# #2 æ³¨å†Œ AuthGuardService

æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨è§’åº¦è·¯çº¿å®šä¹‰ä¸­æ³¨å†Œè¿™ä¸ª`AuthGuardService`ã€‚æ‰“å¼€`src/app/app-routing.module.ts`æ–‡ä»¶ï¼Œæ›´æ–°å¦‚ä¸‹ **:** ğŸ‘‡ğŸ‘‡
(ç›¸åº”åœ°éšæ„æ›´æ”¹â€œè·¯å¾„â€å’Œâ€œç»„ä»¶â€çš„å€¼)

> **æ³¨æ„:**å®‰å…¨æ€§åœ¨å®¢æˆ·ç«¯æ²¡æœ‰æ„ä¹‰ã€‚ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨è·¯çº¿è­¦å«(æˆ–ä»»ä½•å…¶ä»–æœºåˆ¶)éƒ½æ˜¯ UX çš„ç‰¹ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬é˜²æ­¢ç”¨æˆ·è¿›å…¥ä¸€ä¸ªä»–ä¸è¢«å…è®¸è¿›å…¥çš„åŒºåŸŸã€‚ä½†æ˜¯ï¼Œæœ€ç»ˆçš„å®‰å…¨æ£€æŸ¥åº”è¯¥æ€»æ˜¯åœ¨æœåŠ¡å™¨ç«¯å®Œæˆã€‚

# å°é”æ˜¯ä¸å¤Ÿçš„

ä»…ä»…è¿”å›`true`æˆ–è€…`false`å…¶å®æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰ç”¨æˆ·å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä»–ä»¬ä¸å…è®¸è¿›å…¥é¡µé¢ã€‚æˆ–è€…é€šè¿‡æ˜¾ç¤ºä¸€äº›é€šçŸ¥ï¼Œæˆ–è€…æœ€å¸¸è§çš„æ˜¯é€šè¿‡**é‡å®šå‘åˆ°ä¸€äº›å…¶ä»–é¡µé¢è§†å›¾**ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡**å°†è·¯ç”±å™¨æ³¨å…¥** `**AuthGuard**`å¹¶é‡å®šå‘åˆ°å…¶ä»–é¡µé¢è§†å›¾æ¥å®ç°ã€‚çœ‹è¿™ä¸ª:ğŸ‘‡ğŸ‘‡

# #3 ä¿®æ”¹ AuthGuardService

(äº†è§£æœ‰å…³â€œå¯è§‚å¯Ÿç±»å‹â€å’Œâ€œç®¡ç† Angular è®¢é˜…â€çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ç‚¹å‡»æ­¤å¤„ğŸ‘†)

*   ä¸€æ—¦æˆ‘ä»¬å°†è¿™ä¸ªä¿æŠ¤é™„åŠ åˆ°ä¸€ä¸ªè·¯ç”±ä¸Šï¼Œ`canActivate()`æ–¹æ³•å°†åœ¨è·¯ç”±è¢«æ¿€æ´»ä¹‹å‰è§¦å‘ï¼Œè¿™æ„å‘³ç€åœ¨å®ƒæ‰“å¼€å®é™…çš„`path`ä¹‹å‰æˆ–è€…åœ¨å®ƒåŠ è½½å®é™…çš„`component`ä¹‹å‰ã€‚

```
const routes: Routes = [
  {
    path: 'user/:id', 
    component: UserDetailComponent,
    **canActivate**:[AuthGuardService] 
  }
];
```

*   è¯¥é€»è¾‘å°†é¦–å…ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆï¼Œå®ƒå°†å¯¼èˆªåˆ°ç™»å½•è·¯å¾„ã€‚
*   æ³¨æ„ï¼Œå®ƒè¿˜è·å–å½“å‰ URL å¹¶å°† is è®¾ç½®ä¸ºä¸€ä¸ªæŸ¥è¯¢å‚æ•°ï¼Œå› æ­¤å®ƒç±»ä¼¼äº`/login?return=%2Fusers%2Fabc123`(URL è¢«ç¼–ç )ã€‚å½“æˆ‘ä»¬è¯•å›¾åƒè¿™æ ·è®¿é—®ç”¨æˆ·æ—¶å°±æ˜¯è¿™ç§æƒ…å†µ:`/users/abc123`å’Œ`canActivate`æ£€æµ‹åˆ°å®ƒæ˜¯æœªæˆæƒç”¨æˆ·ã€‚

# ç»“è®º

#1)åˆ›å»º AuthGuardService
#2)æ³¨å†Œ AuthGuardService
#3)ä¿®æ”¹ AuthGuardService

> æå®šäº†ã€‚ğŸ¤©ä½¿ç”¨ route-guard ä¿æŠ¤é¡µé¢å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚å†è§ğŸ‘‹ğŸ‘‹
> 
> è¯·åœ¨è¯„è®ºæ¡†ä¸­éšæ„è¯„è®ºâ€¦å¦‚æœæˆ‘é”™è¿‡äº†ä»€ä¹ˆï¼Œæˆ–è€…ä»€ä¹ˆæ˜¯ä¸æ­£ç¡®çš„ï¼Œæˆ–è€…ä»€ä¹ˆå¯¹ä½ ä¸èµ·ä½œç”¨:)
> 
> æ›´å¤šæ–‡ç« æ•¬è¯·å…³æ³¨:
> [https://medium.com/@AnkitMaheshwariIn](https://medium.com/@AnkitMaheshwariIn)

å¦‚æœä½ ä¸ä»‹æ„ç»™å®ƒä¸€äº›æŒå£°ğŸ‘ ğŸ‘æ—¢ç„¶æœ‰å¸®åŠ©ï¼Œæˆ‘ä¼šéå¸¸æ„Ÿè°¢:)å¸®åŠ©åˆ«äººæ‰¾åˆ°è¿™ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥å®ƒå¯ä»¥å¸®åŠ©ä»–ä»¬ï¼

æ°¸è¿œé¼“æŒâ€¦

![](img/2f4712882de180d90c9dcdb0cb91ae69.png)

*åŸè½½äº 2019 å¹´ 12 æœˆ 28 æ—¥*[*https://www.codewithchintan.com*](https://www.codewithchintan.com/angular-route-guards/)*ã€‚*

# äº†è§£æ›´å¤šä¿¡æ¯
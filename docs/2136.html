<html>
<head>
<title>Why you should stop installing npm packages globally</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么应该停止全局安装npm软件包</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-stop-installing-npm-packages-globally-1b56b97b70cd?source=collection_archive---------2-----------------------#2020-05-23">https://javascript.plainenglish.io/why-you-should-stop-installing-npm-packages-globally-1b56b97b70cd?source=collection_archive---------2-----------------------#2020-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ca86" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">全局安装npm软件包几乎没有任何用处</h2></div><p id="e481" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几年前当我开始使用npm时，我并不介意在全球范围内安装许多包。如今，我认为在全球范围内安装npm包几乎没有任何用处。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/d64a65be7859784617a682f7f2e6b85c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBPtZ2lKYa-C8nSy6Gyapg.jpeg"/></div></div></figure><p id="fb15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我告诉你为什么全球安装的软件包不那么好，你应该做什么。</p><h1 id="55c7" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">全球安装的npm软件包的问题</h1><p id="0bc9" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在<a class="ae mk" href="https://medium.com/@dSebastien/why-and-how-to-use-stable-node-and-npm-versions-across-your-project-team-a4886f51a96c" rel="noopener">之前的一篇文章</a>中，我解释了为什么冻结node和npm的版本对任何项目都非常有用。事实上，冻结项目依赖项的版本更加重要。</p><p id="6d51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，通常人们似乎只考虑到实际的项目依赖需要一个稳定的版本。公用事业经常被遗忘/忽视。尽管如此，不同的构建/开发工具对于稳定性和限制“它在我的机器上工作”综合症非常重要。</p><p id="c2df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果构建/运行项目所需的工具不是package.json文件的一部分，那么这意味着您必须维护单独的文档。首先，这对任何加入团队的人都会产生摩擦。仅此一点就足以成为列出构建/开发依赖项的理由。此外，很容易忘记更新文档，使其不同步，并可能导致未来的时间浪费。</p><p id="903d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一点是，全球安装的软件包就像已安装的应用程序。一段时间后，你会忘记他们为什么会在那里。如果你的一些项目需要它们，那么你就有可能无法再参与这些项目。相反，如果这些包列在项目的依赖项中，那么就没问题了:安装一下，就可以开始了。</p><h1 id="a3fd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">可供选择的事物</h1><p id="65b5" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">对于依赖npm的项目，最简单的替代方法是将所有工具添加到项目的package.json文件的devDependencies中。这样，无论何时安装项目，您都可以获得所需的所有工具。如果您这样做了，那么在npm脚本中使用这些工具就像它们被全局安装一样自然，因为node_modules/的内容。bin被添加到脚本可见的“路径”中。</p><p id="ce15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我可能会写一篇关于npm脚本的文章，因为我非常依赖它们。他们帮助我为整个团队引入“共享命令”。由于devDependencies和npm脚本，每个团队成员都可以访问相同的构建/工具/命令，这真的很有价值。对我来说，这就像一个更现代/用户友好的Makefile-)</p><p id="fdb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您考虑全局安装包时，您可以做的另一件事是使用npx。npx命令与npm一起提供，允许轻松执行npm二进制文件。</p><p id="3b8e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">npx的工作方式如下:它首先检查当前路径(包括本地node_modules/。bin文件夹)来查找您试图调用的命令。如果它在“node_modules/”中找到它。bin”，然后执行它(这意味着如果您的构建工具/cli是您的依赖项的一部分，那么npx会找到它)。</p><p id="0d24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果npx在当前路径中(无论是本地还是全局/在npm缓存中)没有找到该命令，那么它会在执行它之前尝试安装它。npx通常在寻找安装内容方面做得很好。如果失败了，您可以使用“- package”标志来帮助它。当然，您可以<a class="ae mk" href="https://itnext.io/bash-aliases-are-awesome-8a76aecc96ab?source=your_stories_page---------------------------" rel="noopener ugc nofollow" target="_blank">为这个</a>利用bash别名；-)</p><p id="a47a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，您可以通过清除npm缓存来轻松消除npx产生的浪费空间。</p><p id="0262" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TLDR；</p><ul class=""><li id="6173" class="ml mm iq kh b ki kj kl km ko mn ks mo kw mp la mq mr ms mt bi translated">devDependencies + npm脚本对稳定性有很多好处，限制了配置偏差，避免了不必要的文档，消除了麻烦，并帮助每个人共享相同的环境</li><li id="3987" class="ml mm iq kh b ki mu kl mv ko mw ks mx kw my la mq mr ms mt bi translated">npx可以用来避免全局安装包，您只需要清理npm缓存来消除混乱</li></ul><h1 id="15aa" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="ec27" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在这篇文章中，我分享了一些关于为什么我几乎从不在全球范围内安装npm包的想法。如果你用的是纱线，答案可能会有所不同，但总体思路应该是相似的。全局安装的包就像全局变量:污染！；-)</p><p id="5a6d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天到此为止！</p><h2 id="8b01" class="mz lo iq bd lp na nb dn lt nc nd dp lx ko ne nf lz ks ng nh mb kw ni nj md nk bi translated">喜欢这篇文章吗？点击下面“喜欢”按钮查看更多内容，并确保其他人也能看到！</h2><p id="522f" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">PS:如果你想学习大量关于软件/Web开发、TypeScript、Angular、React、Vue、Kotlin、Java、Docker/Kubernetes和其他很酷的主题的其他很酷的东西，那么请不要犹豫去<a class="ae mk" href="https://www.amazon.com/Learn-TypeScript-Building-Applications-understanding-ebook/dp/B081FB89BL" rel="noopener ugc nofollow" target="_blank">拿一本我的书</a>并订阅<a class="ae mk" href="https://mailchi.mp/fb661753d54a/developassion-newsletter" rel="noopener ugc nofollow" target="_blank">我的简讯</a>！</p><h2 id="d68b" class="mz lo iq bd lp na nb dn lt nc nd dp lx ko ne nf lz ks ng nh mb kw ni nj md nk bi translated"><strong class="ak">来自简明英语团队的通知</strong></h2><p id="ae76" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae mk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae mk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">订阅我们的YouTube频道</strong> </a> <strong class="kh ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
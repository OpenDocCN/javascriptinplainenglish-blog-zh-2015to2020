<html>
<head>
<title>Common cross-platform pitfalls to avoid in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native中要避免的常见跨平台陷阱</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/common-pitfalls-i-run-into-on-every-react-native-project-7ea2e7c1d88?source=collection_archive---------1-----------------------#2019-12-30">https://javascript.plainenglish.io/common-pitfalls-i-run-into-on-every-react-native-project-7ea2e7c1d88?source=collection_archive---------1-----------------------#2019-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/e5b57528a9ca1fc3912a25e1f19d6400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GhaWmhwa-8vFHX9R"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@art_maltsev?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Artem Maltsev</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="00dc" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">人们在为iOS和Android开发应用程序时经常犯的三个错误</h2></div><p id="f756" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我在React Native中构建移动应用时经常遇到的最大麻烦之一不一定是技术上的:而是人们为Android设计iOS应用，或者反之亦然。</p><p id="bfc4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许多公司选择React Native而不是native development，因为它的学习曲线很浅。但是经常被忽略的是，您仍然在为两个完全不同的环境进行开发。</p><p id="f1ac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们应该按照每个平台各自的设计准则精心打造用户体验。</p><p id="63f5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于那些不熟悉手机的人来说，你应该看看Android的<a class="ae jd" href="https://material.io/design/" rel="noopener ugc nofollow" target="_blank">材料设计</a>指南和iOS的<a class="ae jd" href="https://developer.apple.com/design/human-interface-guidelines/ios/overview/themes/" rel="noopener ugc nofollow" target="_blank">人机界面指南</a>。您不需要对它们了如指掌，但是看一看并熟悉其核心原则是值得的。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="fbf3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你是一名React本地(或任何类型)移动开发人员，你也经常没有影响力、权威或技能来积极地塑造设计过程，所以你可能想向你团队中的设计师提出一些问题，以确保他们关注最关键的平台差异:</p><ul class=""><li id="55df" class="ly lz jg kx b ky kz lb lc le ma li mb lm mc lq md me mf mg bi translated">我们是在创造平面设计还是基于纸张的设计？</li><li id="4ad3" class="ly lz jg kx b ky mh lb mi le mj li mk lm ml lq md me mf mg bi translated">我们是否坚持默认的导航行为，包括过渡和手势？</li><li id="4c02" class="ly lz jg kx b ky mh lb mi le mj li mk lm ml lq md me mf mg bi translated">我们是否考虑了视觉层次在每个平台上的不同表达方式？</li><li id="9a3a" class="ly lz jg kx b ky mh lb mi le mj li mk lm ml lq md me mf mg bi translated">iOS和Android上的图标和排版通常是什么样子的？</li><li id="d435" class="ly lz jg kx b ky mh lb mi le mj li mk lm ml lq md me mf mg bi translated">每个平台上的表单元素(单选按钮、开关)有何不同？</li></ul><p id="18b8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关于iOS和Android之间差异的详尽列表，我还可以推荐以下文章:</p><div class="ip iq gp gr ir mm"><a href="https://medium.com/@chunchuanlin/android-vs-ios-compare-20-ui-components-patterns-part-1-ad33c2418b45" rel="noopener follow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd jh gy z fp mr fr fs ms fu fw jf bi translated">Android与iOS:比较20种UI组件和模式(第1部分)</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">在设计跨平台应用时，你应该知道的Android和iOS的20个区别</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">medium.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ix mm"/></div></div></a></div><div class="ip iq gp gr ir mm"><a href="https://medium.com/@chunchuanlin/android-vs-ios-compare-20-ui-components-patterns-part-2-3edba2076b25" rel="noopener follow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd jh gy z fp mr fr fs ms fu fw jf bi translated">Android与iOS:比较20种UI组件和模式(第2部分)</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">在设计跨平台应用时，你应该知道的Android和iOS的20个区别</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">medium.com</p></div></div><div class="mv l"><div class="nb l mx my mz mv na ix mm"/></div></div></a></div></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="e595" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">记住这一点，让我向您介绍一下我在几乎每个React原生项目中遇到的跨平台开发的一些常见陷阱。</p><h1 id="ef8b" class="nc nd jg bd ne nf ng nh ni nj nk nl nm km nn kn no kp np kq nq ks nr kt ns nt bi translated">航行</h1><p id="e0a8" class="pw-post-body-paragraph kv kw jg kx b ky nu kh la lb nv kk ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">在Android上，标签栏位于屏幕顶部比在iOS上更常见。让我们以脸书应用程序为例。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/8469c3d92f1cbb1e1cf9d1dc8d1eeb0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3mqweW_QuKYRjc_ifT4mxg.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The Facebook app on iOS (left) and Android (right)</figcaption></figure><p id="53f5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是故意的，因为一些应用程序不希望你意外地点击Android上的原生底部栏。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/13f1392e4a68e2f013fd34b0cfed291f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_4VB5mmSrEnHErdwppECg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The native bottom bar on Android</figcaption></figure><p id="6e1c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一个与导航相关的重要细节是标题栏。在Android上，它的内容通常是左对齐的。让我们来看看Twitter应用程序:</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/31db4d993d81fa75902dff8c2d2f92ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49h3YswMlckNzCf42kPfug.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The navigation header bar on iOS (top) and Android (bottom)</figcaption></figure><p id="788e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">许多不熟悉Android的手机设计师认为这是一个bug，并会告诉你如何修复它。但是除非你有一个强有力的理由，否则坚持默认设置通常是安全的。</p><h1 id="6a62" class="nc nd jg bd ne nf ng nh ni nj nk nl nm km nn kn no kp np kq nq ks nr kt ns nt bi translated"><strong class="ak">安卓返回键</strong></h1><p id="9401" class="pw-post-body-paragraph kv kw jg kx b ky nu kh la lb nv kk ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">当添加自定义屏幕，如模态、底部表单或任何其他可以导航到的自定义屏幕时，大多数Android用户会希望他们可以使用默认的Android back按钮来放弃它。</p><p id="4e12" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">再来看看原生底吧。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/80216f56895a62ec6a90e46b7c78e823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZhnyUg_bQOHBE-8MEY1tA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The back button in the native Android bottom bar</figcaption></figure><p id="7a1d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我见过React原生应用程序，点击它会把你带回到覆盖图下面的先前路线<em class="og">，或者更糟的是——退出应用程序！</em></p><p id="6ce0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，每当你创建一条不依赖于你的导航栈的<em class="og">默认</em>行为(通常由<code class="fe oh oi oj ok b">react-navigation</code>提供)的路线时，你必须非常清楚你在做什么。</p><p id="364d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然看起来您只需将缺少的<a class="ae jd" href="https://facebook.github.io/react-native/docs/backhandler" rel="noopener ugc nofollow" target="_blank"> BackHandler </a>添加到新组件中，但这通常需要更多的工作:由于屏幕不会被添加到底层导航堆栈中，它也不会出现在<strong class="kx jh">导航历史</strong>中，因此当您在导航堆栈中来回移动并以这种方式包含自定义路线时，可能会发生许多意想不到的事情。</p><p id="2716" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">实际上，您可能希望熟悉<a class="ae jd" href="https://reactnavigation.org/docs/en/custom-android-back-button-handling.html" rel="noopener ugc nofollow" target="_blank">自定义Android后退按钮处理</a>以及如何<a class="ae jd" href="https://reactnavigation.org/docs/en/custom-navigator-overview.html" rel="noopener ugc nofollow" target="_blank">构建您自己的导航器</a>，以便更深入地理解这个主题。</p><h1 id="f7ad" class="nc nd jg bd ne nf ng nh ni nj nk nl nm km nn kn no kp np kq nq ks nr kt ns nt bi translated">安全区域</h1><p id="c300" class="pw-post-body-paragraph kv kw jg kx b ky nu kh la lb nv kk ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">同样令人困惑的是所谓的安全区域，但这次是在iOS上。</p><p id="f8aa" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">自从iPhone X推出以来，在屏幕上有几个区域你应该避免放置任何关键或互动的内容。原因是这些是为原生手势保留的，比如从底部向上滑动以在应用程序之间切换。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/bd8c35a094ceda7e4c82333731102102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3r1ITEfuJc3xtU_4zCJ8hw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Hardware constraints on iOS: safe areas on iPhone 11 (left) and iPad Pro (right)</figcaption></figure><p id="344f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过使用<code class="fe oh oi oj ok b">SafeAreaView</code>作为<em class="og">所有</em>屏幕的包装器，很容易避免这些问题(例如使用包装器)。但是这也导致了糟糕的用户体验，因为受保护的区域现在完全是空的。</p><p id="77cb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你仍然想利用闪亮的全屏体验，同时确保不干扰手机的原生手势(实际上，这可能会导致应用程序商店拒绝)，你必须考虑如何处理安全区域。</p><p id="1fc9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我强烈建议您在这个过程中尽快掌握它，因为稍后再处理它会导致许多痛苦的重构。</p><p id="8c8c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">安卓显示屏剪影</strong></p><p id="e93d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最重要的是，你可能会遇到安卓手机，它们有着相似的布局特点:安卓显示屏的镂空。</p><figure class="oa ob oc od gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/5cc0f9a0cadacf24f622d91694246352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZWJUq9yDdNZEV0Ltl84lkA.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">The Anroid display cut-out on phones like the Pixel 3 XL</figcaption></figure><p id="ce21" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了处理这个特殊的问题，您实际上需要更深入一层，深入到原生层。但是在我继续深入之前，让我给你看一下布鲁诺·莱默斯的一篇文章，这篇文章很好地解释了...</p><h1 id="3d6c" class="nc nd jg bd ne nf ng nh ni nj nk nl nm km nn kn no kp np kq nq ks nr kt ns nt bi translated">设计，设计，设计！</h1><p id="60ac" class="pw-post-body-paragraph kv kw jg kx b ky nu kh la lb nv kk ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">考虑到这些因素，作为一名React原生开发者，你已经可以在iOS或Android上打造更好的原生用户体验了。</p><p id="f4d7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但这并不妨碍我们从一开始就必须<em class="og">在iOS或Android中思考</em>，而不仅仅是将iOS设计扔给Android，或者反过来。</p><p id="80ac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React原生生态系统提供了大量的工具和库来为这两个平台设计出色的用户体验，但它不是一个自动将您的设计从一个平台的UI转换到另一个平台的银弹解决方案。</p><p id="dbdd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">非常感谢你的阅读！如果你对上面提到的跨平台怪癖有任何反馈，欢迎在下面发表评论，或者通过</strong> <a class="ae jd" href="https://twitter.com/marcelkalveram" rel="noopener ugc nofollow" target="_blank"> <strong class="kx jh"> Twitter </strong> </a> <strong class="kx jh">与我联系。</strong></p></div></div>    
</body>
</html>
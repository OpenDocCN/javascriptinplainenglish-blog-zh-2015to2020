<html>
<head>
<title>ES2019. Flatten arrays in Javascript with Array.flat()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES2019。用Array.flat()在Javascript中展平数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/es2019-flatten-arrays-in-javascript-with-array-flat-aaf28eea5c43?source=collection_archive---------4-----------------------#2019-09-24">https://javascript.plainenglish.io/es2019-flatten-arrays-in-javascript-with-array-flat-aaf28eea5c43?source=collection_archive---------4-----------------------#2019-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e160" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">由于新提案ES2019,“扁平化阵列”</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/848d77ec41608290ab0c316ce30e6545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GyjsIzXUg5ce71ShBPCuoQ.jpeg"/></div></div></figure><p id="4826" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天，我给大家带来了一篇文章——关于<strong class="kt ir"> Javascript </strong>的诀窍，它将帮助我开始谈论<strong class="kt ir"> ES2019 </strong>将带来的消息，在这篇文章中，我将重点关注我们如何通过Javascript“扁平化”数组。</p><p id="822b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以不用娱乐太多，让我们看看吧！</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="d747" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">但是扁平化是怎么回事呢？</h1><p id="085a" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">展平数组是一种非常有用的操作，可以执行以下操作:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/5fc4b63994d0c239529518e54b15aa50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Enl0i8T-PugXE2-LFth42g.png"/></div></div></figure><p id="1085" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">也就是说，通过传递一个数组的数组，它所做的是把它转换成一个一维的数组。</p><p id="38d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，这个操作不是在Javascript中实现的，所以有必要使用一些想象力(或者Stackoverflow😋)来获得任何可能的实现。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="9595" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">一些flatArray()实现</h1><p id="0f3b" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">通过简单的谷歌搜索，你会发现许多<code class="fe ms mt mu mv b">flatArray</code>实现。例如，我们有以下内容:</p><pre class="kg kh ki kj gt mw mv mx my aw mz bi"><span id="4166" class="na lv iq mv b gy nb nc l nd ne">const merged = [].concat.apply([], arrays);</span></pre><p id="0893" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，它不适用于多层阵列，例如:</p><pre class="kg kh ki kj gt mw mv mx my aw mz bi"><span id="ed59" class="na lv iq mv b gy nb nc l nd ne">const myArray = [[‘📦’, ‘📦’], [‘📦’, [‘📦’, [‘📦’]]]];</span></pre><p id="042b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者从Stackoverflow 中提取一个更复杂的东西<a class="ae nf" href="https://stackoverflow.com/a/27282907/258863" rel="noopener ugc nofollow" target="_blank">，如下所示:</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/5c06c01e28b319f1b0a45659286e80c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IwAftkyo5OWZqJicTebZ8g.png"/></div></div></figure></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="d87f" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">在ES2019中展平阵列</h1><p id="9c40" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">随着ES2019的到来，平整阵列已成为一项微不足道的任务，例如:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/f3038c1e3cbedbb9022e58aa8396c426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDToLwI823MrkXEsx7WiEw.png"/></div></div></figure><p id="11fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">多亏了<code class="fe ms mt mu mv b"><strong class="kt ir">Array.prototype.flat()</strong></code>,我们可以在不使用前一节提到的任何“助手”的情况下，自然地展平必要深度的数组。</p><p id="4eb1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，它与浏览器的兼容性开始变得相当广泛，正如你在网上看到的那样<a class="ae nf" href="https://caniuse.com/#search=Array.prototype.flat" rel="noopener ugc nofollow" target="_blank">caniuse.com</a>所以在我们的应用程序中添加相应的“polyfill”来使用这个功能就足够了。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="0668" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">它是如何工作的？</h1><p id="ea39" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">正如您在<a class="ae nf" href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Array/flat" rel="noopener ugc nofollow" target="_blank">定义</a>中看到的，<code class="fe ms mt mu mv b"><strong class="kt ir">Array.prototype.flat()</strong></code>可以接收一个名为<code class="fe ms mt mu mv b">depth</code>的可选参数，该参数指定数组应该展平多少层:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/5e318b786326b7880debf2cad78a722c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OgjYnEjsk9C_rIwMQluRwg.png"/></div></div></figure><p id="a205" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，这个参数的值是<code class="fe ms mt mu mv b">1</code> <strong class="kt ir">，非常有趣的是，如果我们不知道数组的深度级别，我们可以通过</strong> <code class="fe ms mt mu mv b">Infinity</code>来确保我们得到的结果是一个一维数组:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/8dfc9383d4d2f24f3ba008b8cdb52d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z449hK6CwFNMUhef8yJPuA.png"/></div></div></figure><p id="66c9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，<code class="fe ms mt mu mv b"><strong class="kt ir">array.flat()</strong></code>还负责在执行操作的过程中消除空数组:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/542ae9050acfc7c1413afa4a723907ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NkQfv_WxBQthhv8mSYEJgw.png"/></div></div></figure><p id="20c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，通过这种实现，该提案的开发者已经涵盖了所有情况。为他们鼓掌:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h1 id="0314" class="lu lv iq bd lw lx ni lz ma mb nj md me jw nk jx mg jz nl ka mi kc nm kd mk ml bi translated">你想收到更多这样的文章吗？</h1><p id="45eb" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">如果你喜欢这篇文章，我鼓励你订阅我每周日发送的时事通讯，里面有类似的出版物和更多的推荐内容:👇👇👇</p><div class="nn no gp gr np nq"><a href="https://eepurl.us20.list-manage.com/subscribe?u=c14cad2102bcf33bf216cc69e&amp;id=2790da9378" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">拿铁和代码</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">这是一份最新的时事通讯，代码是recibirás cada domingo。——洛斯多斯乌尔蒂莫斯艺术博物馆……</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">eepurl.us20.list-manage.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kp nq"/></div></div></a></div></div></div>    
</body>
</html>
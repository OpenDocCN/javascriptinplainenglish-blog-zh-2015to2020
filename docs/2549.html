<html>
<head>
<title>JavaScript Tips — Textbox Values, Timezones, and Loops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提示—文本框值、时区和循环</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tips-textbox-values-timezones-and-loops-e9ce1e35cb0f?source=collection_archive---------10-----------------------#2020-07-04">https://javascript.plainenglish.io/javascript-tips-textbox-values-timezones-and-loops-e9ce1e35cb0f?source=collection_archive---------10-----------------------#2020-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e129abc12fd9c03fab04e4510b655afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eFwU-7Ze8XBGsyw5"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@memoreno?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Moreno</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7b94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="b7a1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查文本框是否已更改</h1><p id="99ce" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过监听输入事件来检查文本框是否发生了变化。</p><p id="1e30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6f38" class="mn lc iq mj b gy mo mp l mq mr">$('#text-box').on('input', () =&gt; {<br/>  // ...<br/>});</span></pre><p id="5dad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">on</code>来监听<code class="fe ms mt mu mj b">input</code>事件。</p><p id="b25b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行回调中的代码来做我们想做的事情。</p><h1 id="fd86" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用JavaScript检测触摸屏设备</h1><p id="9e1b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Modernizr库来检测一个设备是否是触摸屏设备。</p><p id="fa61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它为我们提供了添加到<code class="fe ms mt mu mj b">html</code>元素中的<code class="fe ms mt mu mj b">touch</code>和<code class="fe ms mt mu mj b">no-touch</code>类。</p><p id="4761" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以根据设备是否是触摸屏来使用它做我们想做的任何事情。</p><h1 id="02fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在React中修改状态数组的正确方法</h1><p id="40d3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在React中修改状态数组有一个正确的方法。</p><p id="3d89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们正在使用类组件，我们通过传入一个接受先前值的回调来使用<code class="fe ms mt mu mj b">setState</code>。</p><p id="c794" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们基于此返回一个新值。</p><p id="a617" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d074" class="mn lc iq mj b gy mo mp l mq mr">this.setState(prevState =&gt; ({<br/>  arr: [...prevState.arr, 'foo']<br/>}))</span></pre><p id="384b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe ms mt mu mj b">'foo'</code>字符串作为<code class="fe ms mt mu mj b">arr</code>状态的最后一个元素。</p><p id="b144" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们使用钩子，我们做同样的事情，但是我们把回调传递给状态改变函数。</p><p id="0da4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8851" class="mn lc iq mj b gy mo mp l mq mr">setArr(<!-- -->arr =&gt; [...arr, 'foo']<!-- -->)</span></pre><p id="6d53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设<code class="fe ms mt mu mj b">setArr</code>是<code class="fe ms mt mu mj b">useState</code>返回的状态变化函数。</p><h1 id="0c81" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查一个数字是否是NaN</h1><p id="58fa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要检查一个数字是否是<code class="fe ms mt mu mj b">NaN</code>，我们需要使用<code class="fe ms mt mu mj b">isNaN</code>函数。</p><p id="0f2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="03c4" class="mn lc iq mj b gy mo mp l mq mr">isNaN('foo')</span></pre><p id="ab5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会通过将字符串转换为数字来进行检查，然后进行检查。</p><p id="e939" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以它将返回<code class="fe ms mt mu mj b">true</code>，因为它将被转换为<code class="fe ms mt mu mj b">NaN</code>。</p><h1 id="2429" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在对象数组中查找属性的最大值</h1><p id="ca4c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">Math.max</code>和array <code class="fe ms mt mu mj b">map</code>方法来查找对象数组中属性的最大值。</p><p id="17b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c53f" class="mn lc iq mj b gy mo mp l mq mr">Math.max(...array.map(o =&gt; o.y))</span></pre><p id="816d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过调用<code class="fe ms mt mu mj b">map</code>返回一个包含值的数字数组来获取条目的<code class="fe ms mt mu mj b">y</code>属性的最大值。</p><p id="5079" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用spread操作符将数组条目作为参数传播到<code class="fe ms mt mu mj b">Math.max</code>方法中。</p><h1 id="d656" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何切换布尔值</h1><p id="f8f5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">!</code>操作符来切换布尔值。</p><p id="4198" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2753" class="mn lc iq mj b gy mo mp l mq mr">bool = !bool;</span></pre><p id="ab49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe ms mt mu mj b">bool</code>改为与当前值相反的值。</p><h1 id="adca" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建具有设定时区的日期，而不使用字符串表示</h1><p id="12c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe ms mt mu mj b">setUTCHours</code>方法设置<code class="fe ms mt mu mj b">Date</code>实例的UTC小时来创建一个设置了时区的<code class="fe ms mt mu mj b">Date</code>对象，而不使用字符串。</p><p id="3102" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="859f" class="mn lc iq mj b gy mo mp l mq mr">new Date().setUTCHours(2)</span></pre><p id="3aa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到日期的时间戳，时间设置为给定的UTC小时。</p><p id="3633" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以设置分钟、秒和毫秒值。</p><p id="e4b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0283" class="mn lc iq mj b gy mo mp l mq mr">const date = <!-- -->new Date(Date.UTC(year, month, day, hour, minute, second))</span></pre><p id="0e1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Date.UTC</code>返回带有UTC日期的时间戳，该日期设置为给定的年、月、日、小时、分钟和秒。</p><p id="ee41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们将它传递给<code class="fe ms mt mu mj b">Date</code>构造函数时，我们得到的是具有相同值的日期。</p><h1 id="7d46" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">遍历键值对</h1><p id="f3ea" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了遍历键值对，我们可以将<code class="fe ms mt mu mj b">Object.entries</code>与for-of循环一起使用。</p><p id="d875" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d1d9" class="mn lc iq mj b gy mo mp l mq mr">for (const [key, value] of Object.entries(obj)) {<br/>  console.log(key, value);<br/>}</span></pre><p id="0bc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了做到这一点。</p><p id="78d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">obj</code>是一个对象。</p><h1 id="2c96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自动滚动到页面底部</h1><p id="da48" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要自动滚动到页面底部，我们可以使用<code class="fe ms mt mu mj b">window.scrollTo</code>方法。</p><p id="f895" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2e62" class="mn lc iq mj b gy mo mp l mq mr">window.scrollTo(0, document.body.scrollHeight);</span></pre><p id="ec4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们滚动到参数中给出的x和y坐标。</p><p id="4649" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">document.body.scrollHeight</code>是页面的底部。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/140cb9cf14d9701ae7249ebe6df51ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wv6ppJTN9nGl1upL"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jweckschmied?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jonas Weckschmied</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a39a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="99f4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让我们滚动到页面上的任何地方。</p><p id="cc39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在React中修改数组状态的正确方法是传入一个回调并返回一个从旧数组派生的新数组。</p><p id="ea77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过观察文本区域的输入事件来观察我们输入的值。</p><p id="db33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">Math.max</code>来寻找一个数字数组的最大值。</p><h2 id="545c" class="mn lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="fdf3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">plain English . io</strong></a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
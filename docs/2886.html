<html>
<head>
<title>React Tips — Value Changes, Server/Client-Side Rendering</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React提示—值更改、服务器/客户端呈现</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-value-changes-server-client-side-rendering-c26891be657e?source=collection_archive---------4-----------------------#2020-08-01">https://javascript.plainenglish.io/react-tips-value-changes-server-client-side-rendering-c26891be657e?source=collection_archive---------4-----------------------#2020-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/41ef25457a9689b2e5f08306f258797f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pIL1o1Ek9CGxATtC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@theflouffy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">FLOUFFY</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bf5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="0f0c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么不能在React中更改输入值</h1><p id="84d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不能用React改变输入值，因为我们必须手动设置输入的<code class="fe me mf mg mh b">value</code>属性。</p><p id="b8f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8395" class="mq lc iq mh b gy mr ms l mt mu">&lt;input<br/>  className="form-control"<br/>  type="text" <br/>  value={this.state.name}<br/>  onChange={e =&gt; this.onChange(e.target.value)}<br/>/&gt;</span></pre><p id="9139" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么在<code class="fe me mf mg mh b">onChange</code>方法中，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="573b" class="mq lc iq mh b gy mr ms l mt mu">onChange(value){<br/>  this.setState({<br/>     name: value<br/>  });<br/>}</span></pre><p id="cec6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在方法中设置了<code class="fe me mf mg mh b">name</code>状态。</p><h1 id="49fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何使用React JSX渲染带单引号的文本</h1><p id="070f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以渲染一个字符串来渲染单引号。</p><p id="3f53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d701" class="mq lc iq mh b gy mr ms l mt mu">return (<br/>   &lt;div&gt;<br/>     &lt;p&gt;{"I've eaten."}&lt;/p&gt;<br/>   &lt;/div&gt;<br/> )</span></pre><p id="3f22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用单引号的HTML实体版本。</p><p id="e8af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="eab3" class="mq lc iq mh b gy mr ms l mt mu">&lt;Text&gt;I&amp;quot;ve eaten.&lt;/Text&gt;</span></pre><h1 id="761f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查变量是反应节点还是数组</h1><p id="eef4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">React.isValidElement</code>来检查一个变量是节点还是数组。</p><p id="250d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它需要一个变量来检查。</p><p id="ad89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是则返回<code class="fe me mf mg mh b">true</code>，否则返回<code class="fe me mf mg mh b">false</code>。</p><h1 id="fb04" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检测组件是从客户端还是从服务器呈现</h1><p id="2bc5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用生命周期挂钩来检测服务器端呈现。</p><p id="07ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们运行，那么它会在客户端呈现。</p><p id="5e2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以创建自己的钩子来进行检查。</p><p id="0c69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="29b6" class="mq lc iq mh b gy mr ms l mt mu">import { useState, useEffect } from 'react'</span><span id="c82b" class="mq lc iq mh b gy mv ms l mt mu">function useIsClient () {<br/>  const [isClient, setIsClient] = useState(false)<br/>  useEffect(() =&gt; {<br/>    setIsClient(true)<br/>  }, [])<br/>  return setIsClient<br/>}</span></pre><p id="6537" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来制造<code class="fe me mf mg mh b">useIsClient</code>挂钩。</p><p id="5b88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果运行了<code class="fe me mf mg mh b">useEffect</code>回调，那么我们知道它是在客户端呈现的。</p><p id="81c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以检查它是一个客户端渲染的应用程序。</p><p id="88d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:“</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4606" class="mq lc iq mh b gy mr ms l mt mu">import { useState, useEffect } from 'react'</span><span id="6dd6" class="mq lc iq mh b gy mv ms l mt mu">function useIsClient () {<br/>  const [isClient, setIsClient] = useState(false)<br/>  useEffect(() =&gt; {<br/>    setIsClient(true)<br/>  }, [])<br/>  return setIsClient<br/>}</span><span id="043d" class="mq lc iq mh b gy mv ms l mt mu">function App() {<br/>  const isClient = useIsClient();<br/>  return isClient<br/>    ? 'client'<br/>    : 'serve'<br/>}</span></pre><p id="2364" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">useIsClient</code>钩子来检查客户端渲染。</p><p id="1fb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以根据它来渲染我们想要的东西。</p><h1 id="fe9a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更改复选框状态</h1><p id="6640" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过向复选框传递<code class="fe me mf mg mh b">checked</code>属性来改变复选框的状态。</p><p id="6b14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6d2b" class="mq lc iq mh b gy mr ms l mt mu">class CheckBox extends React.Component {<br/>  render() {<br/>    return (&lt;input type="checkbox" checked={this.props.checked} /&gt;);<br/>  }<br/>}</span><span id="3e79" class="mq lc iq mh b gy mv ms l mt mu">class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = { checked: true };<br/>  }</span><span id="e057" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;a href="#" onClick={ () =&gt; { this.setState({ checked: !this.state.checked }); }}&gt;Toggle&lt;/a&gt;<br/>        &lt;hr /&gt;<br/>        &lt;CheckBox checked={this.state.checked} /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="41cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击链接时，我们切换复选框。</p><p id="febd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">checked</code>状态传递给我们的<code class="fe me mf mg mh b">CheckBox</code>组件，它有复选框。</p><p id="cd06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">CheckBox</code>组件中，我们将<code class="fe me mf mg mh b">checked</code>属性传递给<code class="fe me mf mg mh b">checked</code>值。</p><h1 id="1323" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">React路由器使用普通锚链路</h1><p id="3904" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们使用React路由器，React路由器哈希链接包可以让我们在React应用程序中轻松创建哈希链接。</p><p id="441f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bd92" class="mq lc iq mh b gy mr ms l mt mu">yarn add react-router-hash-link</span></pre><p id="9a0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5143" class="mq lc iq mh b gy mr ms l mt mu">npm install --save react-router-hash-link</span></pre><p id="81d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7906" class="mq lc iq mh b gy mr ms l mt mu">import { HashLink as Link } from 'react-router-hash-link';</span><span id="3022" class="mq lc iq mh b gy mv ms l mt mu">//...<br/>const App = () =&gt; {<br/>  //...<br/>  return &lt;Link to="/some/path#some-hash"&gt;hash link&lt;/Link&gt;<br/>}</span></pre><p id="2d42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以添加一个导航链接，让我们设置活动样式。</p><p id="29b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5a1b" class="mq lc iq mh b gy mr ms l mt mu">import { NavHashLink as NavLink } from 'react-router-hash-link';</span><span id="ce8c" class="mq lc iq mh b gy mv ms l mt mu">//...<br/>const App = () =&gt; {<br/>  //...<br/>  return &lt;NavLink <br/>    to="/some/path#some-hash" <br/>    activeClassName="acrive"<br/>  &gt;<br/>     hash nav link<br/>  &lt;/NavLink&gt;<br/>}</span></pre><p id="02a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当链接处于活动状态时，需要一个<code class="fe me mf mg mh b">activeClassName</code> prop来让我们设置活动的类名。</p><p id="c6b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，当我们导航到具有给定ID的元素时，它支持更改滚动行为。</p><p id="6c58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该链接也可以自定义。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/13cc273d81522f5372da1860614f73a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R4_kIwPu9_l6MCkl"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@charliegreen998?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charlie Green</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6d59" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bad8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们的应用程序使用React路由器，我们可以使用一个包来创建哈希链接。</p><p id="30e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们为文本输入设置<code class="fe me mf mg mh b">value</code>属性，可以显示输入更改。</p><p id="414c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于复选框输入，我们可以向<code class="fe me mf mg mh b">checked</code>属性传递一个值。</p><p id="b9a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将单引号呈现为HTML实体或字符串。</p><h2 id="fc81" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">简单英语的JavaScript</h2><p id="9ec5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>An absolute Guide to JavaScript Http Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript Http请求绝对指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-absolute-guide-to-javascript-http-requests-44c685edfa51?source=collection_archive---------2-----------------------#2020-05-27">https://javascript.plainenglish.io/an-absolute-guide-to-javascript-http-requests-44c685edfa51?source=collection_archive---------2-----------------------#2020-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3da7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">XHR()与Fetch()与Axios()</h2></div><p id="57dc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">TL；博士:见下图</em></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/9ea098d4e462fc3e3aa555542566e042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*tQUlDPG6wBJ6TjwzMwd4CQ.png"/></div></figure><h1 id="3082" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated">XHR</h1><h2 id="735c" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">XHR的简短描述</h2><ul class=""><li id="d5fb" class="mo mp iq kh b ki mq kl mr ko ms ks mt kw mu la mv mw mx my bi translated"><code class="fe mz na nb nc b">XMLHttpRequest</code> (XHR)是一个内置的浏览器对象，用JavaScript发出HTTP请求</li><li id="277f" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">随着更现代的方法<code class="fe mz na nb nc b">fetch</code>的引入，变得不推荐使用</li><li id="d767" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">AJAX(异步JavaScript和XML)使用XMLHttpRequest。虽然Ajax支持跨浏览器，但XHR不支持</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="fb3c" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated"><strong class="ak">阿贾克斯和XHR的一点历史</strong></h2><p id="d4bc" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir">20世纪90年代初至中期，</strong></p><ul class=""><li id="7d96" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la mv mw mx my bi translated">大多数网站都是基于完整的HTML页面；即使部分更改也需要重新加载浏览器<strong class="kh ir">(服务器上的额外负载；额外带宽)</strong></li></ul><p id="9a15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">1998年，</strong></p><ul class=""><li id="622e" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la mv mw mx my bi translated">Microsoft Outlook Web Access小组开发了XMLRequest脚本对象背后的概念</li></ul><p id="1752" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">2000年~ 2002年，</strong></p><ul class=""><li id="8a4a" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la mv mw mx my bi translated">Outlook Web Access (2000)和Oddpost (2002)等大型应用程序使用了后台HTTP请求和异步Web技术</li></ul><p id="a133" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">2004年~2005年，</strong></p><ul class=""><li id="780f" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la mv mw mx my bi translated">Google在Gmail (2004)和Google Maps (2005)中广泛部署了符合标准的跨浏览器Ajax</li><li id="a1d5" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">Kayak.com测试版是第一个使用AJAX (2004)的大规模电子商务</li></ul><p id="2378" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">2006年，</strong></p><ul class=""><li id="2441" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la mv mw mx my bi translated">W3C(万维网联盟)发布了XMLHttpRequest对象的第一个规范草案，试图创建一个官方的Web标准</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="39d5" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">句法</h2><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="0106" class="mc ll iq nc b gy nz oa l ob oc"><strong class="nc ir">// Create `XMLHttpRequest</strong><br/>let xhr = new XMLHttpRequest();</span><span id="5eae" class="mc ll iq nc b gy od oa l ob oc"><strong class="nc ir">// Initialize XHR object<br/></strong>xhr.open(method, URL, [async, user, password])</span><span id="81ba" class="mc ll iq nc b gy od oa l ob oc"><strong class="nc ir">// Send</strong><br/>xhr.send([body]) <strong class="nc ir">// This method opens the connection and sends the request to the server</strong></span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="1dc6" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">例子</h2><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oe of l"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="22d0" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">用例</h2><p id="d79d" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated">因为<code class="fe mz na nb nc b">fetch</code>方法的引入反对<code class="fe mz na nb nc b">XMLHttpRequest</code>，所以<code class="fe mz na nb nc b">XMLHttpRequest</code>的用例非常有限</p><ol class=""><li id="2379" class="mo mp iq kh b ki kj kl km ko ns ks nt kw nu la og mw mx my bi translated">支持已经使用<code class="fe mz na nb nc b">XMLHttpRequest</code>编写的现有脚本</li><li id="f252" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la og mw mx my bi translated">支持旧的浏览器&amp;不希望多填充(例如，保持脚本微小)</li><li id="919b" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la og mw mx my bi translated">需要做一些<code class="fe mz na nb nc b">fetch</code>还不能做的事情(例如跟踪上传进度)</li></ol><p id="458b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">跟踪下载&amp;上传进度</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0e7f5c3b59018f2461dd50cef5c27e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*35f-HRjXfNiF-x2QhbXerQ.png"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="7950" class="lk ll iq bd lm ln oi lp lq lr oj lt lu jw ok jx lw jz ol ka ly kc om kd ma mb bi translated">取得</h1><h2 id="b742" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">获取的简短描述</h2><ul class=""><li id="c34f" class="mo mp iq kh b ki mq kl mr ko ms ks mt kw mu la mv mw mx my bi translated">Fetch是一个新的API，它提供了一个更加强大和灵活的特性集(与XHR相比更加现代)</li><li id="b56a" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">旧浏览器不支持它(可以填充多种内容),但现代浏览器非常支持它</li><li id="bfc2" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">Fetch API是基于承诺的，它支持更简单和更干净的API，避免了回调地狱</li></ul><p id="c0f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">基于承诺的请求</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi on"><img src="../Images/a2bcbc3d61877b6f134aa20ba032441f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*FQR2KJ_X7RMQ7GEhUZv5jQ.png"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="0d21" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">句法</h2><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="6b03" class="mc ll iq nc b gy nz oa l ob oc">let promise = fetch(url, [options])</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="721a" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">例子</h2><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oe of l"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="1035" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">用例</h2><ul class=""><li id="192b" class="mo mp iq kh b ki mq kl mr ko ms ks mt kw mu la mv mw mx my bi translated">可用于任何网络请求(如提交订单、加载用户信息等)，而无需重新加载页面</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="1f88" class="lk ll iq bd lm ln oi lp lq lr oj lt lu jw ok jx lw jz ol ka ly kc om kd ma mb bi translated">Axios</h1><h2 id="b3d3" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">Axios的简短描述</h2><ul class=""><li id="c8fd" class="mo mp iq kh b ki mq kl mr ko ms ks mt kw mu la mv mw mx my bi translated">基于Promised的HTTP库，用于在Nodejs和Browser上执行HTTP请求</li><li id="7215" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">支持所有现代浏览器，甚至包括对IE8 +的支持</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="3bba" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">句法</h2><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="6902" class="mc ll iq nc b gy nz oa l ob oc">axios.get(url[, config])<br/>axios.delete(url[, config])</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="4b70" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">例子</h2><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oe of l"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="4b5f" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">用例</h2><ul class=""><li id="5d62" class="mo mp iq kh b ki mq kl mr ko ms ks mt kw mu la mv mw mx my bi translated">可以使用来执行在浏览器和Node.js平台上都可以工作的HTTP请求</li><li id="a196" class="mo mp iq kh b ki nd kl ne ko nf ks ng kw nh la mv mw mx my bi translated">随着Node.js和SPA框架越来越流行，变得非常流行</li></ul></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h1 id="c5fc" class="lk ll iq bd lm ln oi lp lq lr oj lt lu jw ok jx lw jz ol ka ly kc om kd ma mb bi translated">结论(XHR与Fetch和Axios)</h1><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="03c8" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">1.默认超时0</h2><p id="241f" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated">每个方法的默认超时毫秒数是0，这意味着没有超时。但是您可以手动设置超时，这样如果请求花费的时间超过了<code class="fe mz na nb nc b">timeout</code>，请求就可以被中止</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="c9d6" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">2.上传进度</h2><p id="2d40" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated">在<strong class="kh ir"> Fetch()上不支持</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0e7f5c3b59018f2461dd50cef5c27e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*35f-HRjXfNiF-x2QhbXerQ.png"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="fffc" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">3.Axios返回数据的默认“<code class="fe mz na nb nc b">data` -</code>键</h2><p id="832c" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated">默认数据在<strong class="kh ir"> axios() </strong> &amp;中以<code class="fe mz na nb nc b">data</code>键返回，有时人们会觉得不方便</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="522d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">&gt; Axios默认数据键</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi oo"><img src="../Images/2b48a74eda76db9c669f06fb68cc62fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ljHwTjduIBQxjEjq.png"/></div></div></figure><p id="1626" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">&gt;获取</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi ot"><img src="../Images/c3dd3017b6dace8ec294b4813b003ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*l_Q9PJYTN18IyHsJ.png"/></div></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="d6fd" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">4.基于承诺的请求？</h2><p id="0372" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir">Fetch()</strong>&amp;<strong class="kh ir">Axios()</strong>是基于承诺的API，支持更简单、更干净的API，避免了回调地狱</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi on"><img src="../Images/a2bcbc3d61877b6f134aa20ba032441f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*FQR2KJ_X7RMQ7GEhUZv5jQ.png"/></div></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="85f6" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">5.中止/取消请求</h2><p id="9549" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir"> xhr </strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="8e62" class="mc ll iq nc b gy nz oa l ob oc">xhr.abort() // terminate the request</span></pre><p id="7c57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">获取</strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="551f" class="mc ll iq nc b gy nz oa l ob oc">const controller = new AbortController();<br/>const { signal } = controller;</span><span id="1159" class="mc ll iq nc b gy od oa l ob oc">fetch("http://localhost:8000", { signal }).then(response =&gt; {<br/>    console.log(`Request 1 is complete!`);<br/>}).catch(e =&gt; {<br/>    console.warn(`Fetch 1 error: ${e.message}`);<br/>});<br/><br/>// Abort request<br/>controller.abort();</span></pre><p id="90e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Axios </strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="fb21" class="mc ll iq nc b gy nz oa l ob oc">const source = axios.CancelToken.source();<br/><br/>axios.get('https://media.giphy.com/media/C6JQPEUsZUyVq/giphy.gif', {<br/>  cancelToken: source.token<br/>}).catch(thrown =&gt; {<br/>  if (axios.isCancel(thrown)) {<br/>    console.log(thrown.message);<br/>  } else {<br/>    // handle error<br/>  }<br/>});<br/><br/>// cancel the request (the message parameter is optional)<br/>source.cancel('Request canceled.');</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="b107" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">6.拦截请求</h2><p id="219c" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir"> xhr </strong></p><p id="21a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不支持</p><p id="f080" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">获取</strong></p><p id="f001" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不支持；使用库，如<code class="fe mz na nb nc b">fetch-intercept</code></p><p id="6ae8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Axios </strong></p><p id="6739" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">拦截器</p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="de1a" class="mc ll iq nc b gy nz oa l ob oc">axios.interceptors.request.use(function (config) {<br/><strong class="nc ir">    // Do something before request is sent</strong><br/>    return config;<br/>  }, function (error) {<br/><strong class="nc ir">    // Do something with request error</strong><br/>    return Promise.reject(error);<br/>  });</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="d513" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">7.获取响应标头，设置请求标头</h2><p id="2e11" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir"> xhr </strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="bf15" class="mc ll iq nc b gy nz oa l ob oc"><strong class="nc ir">// GET Response header</strong><br/>xhr.getResponseheader('Content-Type')</span><span id="c49c" class="mc ll iq nc b gy od oa l ob oc"><strong class="nc ir">// SET request header</strong><br/>xhr.setRequestHeader('Content-Type', 'application/json');</span></pre><p id="9693" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">获取</strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="a74d" class="mc ll iq nc b gy nz oa l ob oc"><strong class="nc ir">// GET Response header</strong><br/>let response = await fetch('https://api.github.com/...');<br/>let header = response.headers.get('Content-Type'));</span><span id="b729" class="mc ll iq nc b gy od oa l ob oc"><strong class="nc ir">// SET request header</strong><br/>let request = fetch(protectedUrl, {<br/>  headers: {<br/>    Authentication: 'secret'<br/>  }<br/>});</span></pre><p id="56fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Axios </strong></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="7e88" class="mc ll iq nc b gy nz oa l ob oc"><strong class="nc ir">// GET Response header</strong><br/>axios.get('/user/12345')<br/>  .then(function (response) {<br/>    let headers = response.headers;</span><span id="5d5f" class="mc ll iq nc b gy od oa l ob oc">}</span><span id="740c" class="mc ll iq nc b gy od oa l ob oc"><strong class="nc ir">// SET request header</strong><br/>axios.get('https://example.com/getSomething', {<br/> headers: {<br/>   Authorization: 'Bearer ' + token //the token is a variable which holds the token<br/> }<br/>})</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><h2 id="bfa0" class="mc ll iq bd lm md me dn lq mf mg dp lu ko mh mi lw ks mj mk ly kw ml mm ma mn bi translated">8.并发请求</h2><p id="e87f" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated"><strong class="kh ir"> xhr </strong></p><p id="668f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不支持</p><p id="6ab8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">获取</strong></p><p id="80f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以通过使用<code class="fe mz na nb nc b">Promise.all</code>来实现</p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="ffd3" class="mc ll iq nc b gy nz oa l ob oc">try {<br/>  let [items, contactlist, itemgroup] = await <strong class="nc ir">Promise.all</strong>([<br/>    fetch("http://localhost:3000/items/get"),<br/>    fetch("http://localhost:3000/contactlist/get"),<br/>    fetch("http://localhost:3000/itemgroup/get")<br/>  ]);</span></pre><p id="2dac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Axios </strong></p><p id="83ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">axios.all</code></p><pre class="ld le lf lg gt nv nc nw nx aw ny bi"><span id="b052" class="mc ll iq nc b gy nz oa l ob oc">function getUserAccount() {<br/>  return axios.get('/user/12345');<br/>}<br/><br/>function getUserPermissions() {<br/>  return axios.get('/user/12345/permissions');<br/>}<br/><br/><strong class="nc ir">axios.all</strong>([getUserAccount(), getUserPermissions()])<br/>  .then(axios.spread(function (acct, perms) {<br/>    // Both requests are now complete<br/>  }));</span></pre></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><blockquote class="ou"><p id="ac68" class="ov ow iq bd ox oy oz pa pb pc pd la dk translated">期待您的反馈</p></blockquote><figure class="pf pg ph pi pj lh gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pe"><img src="../Images/87ca0d03c5dc35d9043f4bbe0efe13f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p72JwRXSBPAmkfqO"/></div></div><figcaption class="pk pl gj gh gi pm pn bd b be z dk">Photo by <a class="ae po" href="https://unsplash.com/@charlesdeluvio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charles Deluvio</a> on <a class="ae po" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="01f0" class="lk ll iq bd lm ln lo lp lq lr ls lt lu jw lv jx lw jz lx ka ly kc lz kd ma mb bi translated"><strong class="ak">简明英语笔记</strong></h1><p id="c0e4" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko np kq kr ks nq ku kv kw nr ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae po" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir">plain English . io</strong></a>找到所有这些——关注我们的出版物并<a class="ae po" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">订阅我们的YouTube频道</strong> </a> <strong class="kh ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
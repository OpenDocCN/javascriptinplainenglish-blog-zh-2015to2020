<html>
<head>
<title>Angular Accessibility</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度可达性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-accessibility-81736ab4f1c4?source=collection_archive---------5-----------------------#2020-02-13">https://javascript.plainenglish.io/angular-accessibility-81736ab4f1c4?source=collection_archive---------5-----------------------#2020-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3ec6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">角度支持Web A11y标准</h2></div><p id="fc2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来谈谈构建可访问的角度应用程序。为什么？因为Angular应用程序很棒，但Angular让你做的令人惊讶的事情是一个净负面，除非你能建立一个每个人都可以使用的应用程序。</p><p id="9445" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可访问性(有时缩写为“a11y”)是指以这样一种方式设计软件，即所有用户都可以使用它，不管他们是否有任何残疾。</p><p id="04d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然我不是可访问性专家，但我可以帮助您从一般的可访问性开始，更具体地说，如何在Angular中遵循可访问性实践。</p><h1 id="9113" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">无障碍101</h1><p id="e4a5" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">在我们开始审计您的应用程序的可访问性问题之前，让我们看看一些常见的违规情况。</p><h2 id="0f5a" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">现代HTML标签</h2><p id="d116" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">现代浏览器支持一组丰富多样的有意义的HTML标签，然而Angular等现代web技术的力量让我们可以轻松地在代码中的任何地方使用<code class="fe mk ml mm mn b">div</code>元素。</p><p id="40cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很糟糕。</p><p id="4c01" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为什么？因为屏幕阅读器和其他辅助软件看到一个<code class="fe mk ml mm mn b">div</code>标签，它们不知道这是一个按钮、一个段落还是一个边框。</p><p id="5966" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要这样。</p><p id="a32f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是<code class="fe mk ml mm mn b">&lt;div class="btn"&gt;My Button&lt;/div&gt;</code></p><p id="36bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用途:<code class="fe mk ml mm mn b">&lt;button class="btn"&gt;My Button&lt;/button&gt;</code></p><p id="d411" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也适用于其他HTML元素。如果可以的话，使用<a class="ae mo" href="https://www.w3schools.com/html/html5_semantic_elements.asp" rel="noopener ugc nofollow" target="_blank">语义HTML元素</a>，比如<code class="fe mk ml mm mn b">nav</code>、<code class="fe mk ml mm mn b">header</code>、<code class="fe mk ml mm mn b">footer</code>、<code class="fe mk ml mm mn b">section</code>、<code class="fe mk ml mm mn b">article</code>和<code class="fe mk ml mm mn b">aside</code>。</p><h2 id="8c42" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">使用Aria属性</h2><p id="7c88" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">有时你不得不以有趣的方式使用HTML。在这些时候，你需要考虑<code class="fe mk ml mm mn b">role</code>标签以及<a class="ae mo" href="https://www.w3.org/TR/html-aria/" rel="noopener ugc nofollow" target="_blank">可访问的富互联网应用(ARIA)标签标准</a>。</p><p id="9f52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常，您需要注意:</p><p id="fd6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，如果您需要将一个<code class="fe mk ml mm mn b">aria</code>属性的值绑定到Angular中的某个东西，您可以使用如下语法:<code class="fe mk ml mm mn b">&lt;div [attr.aria-expanded]="isExpanded"&gt;</code></p><p id="ce64" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有另一个aria标签需要注意:接收实时更新、插入或删除的区域应该使用。我们将在稍后讨论宣布变更时回到这一点。</p><p id="429b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我不是一个可访问性专家，我在这里的重点更多的是在Angular中实现可访问性，我推荐你去看看<a class="ae mo" href="https://twitter.com/ianforr" rel="noopener ugc nofollow" target="_blank"> Ian Forrest的</a>精彩的<a class="ae mo" href="https://app.pluralsight.com/library/courses/codemash-session-09/description" rel="noopener ugc nofollow" target="_blank">关于web可访问性趋势的演讲</a>可以在Pluralsight上免费获得。</p><h1 id="984e" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">将可访问性集成到您的角度工作流中</h1><p id="a8a9" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">既然我们已经讨论了一般的可访问性，让我们探索一些更具体的场景。</p><h2 id="bf82" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">故事书可访问性</h2><p id="06aa" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我以前写过我是多么喜欢使用Storybook来快速检验有棱角的用户界面。Storybook是一个了不起的图书馆，有许多做得非常好的附加组件，包括<a class="ae mo" href="https://github.com/storybookjs/storybook/tree/master/addons/a11y" rel="noopener ugc nofollow" target="_blank">一个可访问性附加组件</a>，它可以简化可访问性审核。</p><p id="7053" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以通过在Angular应用程序中打开命令行，然后运行以下命令来安装此附加组件:</p><p id="689d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mk ml mm mn b">npm i @storybook/addon-a11y --save-dev</code></p><p id="d0b4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将安装必要的依赖项作为开发时的依赖项。</p><p id="ca38" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从那里，您需要在<code class="fe mk ml mm mn b">.storybook/main.js</code>文件中注册插件，如下所示:</p><pre class="mq mr ms mt gt mu mn mv mw aw mx bi"><span id="4c6f" class="ly lc iq mn b gy my mz l na nb">module.exports = { <br/>  stories: ['../src/**/*.stories.ts'], <br/>  addons: ['@storybook/addon-a11y'], // other addons hidden for clarity <br/>};</span></pre><p id="cfc6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，您需要将<code class="fe mk ml mm mn b">withA11y</code>添加到您想要进行可访问性测试的每个<code class="fe mk ml mm mn b">stories.ts</code>文件中，如下所示(特别注意第4行和第8行):</p><figure class="mq mr ms mt gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="000e" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">查看和修复故事书中的所有问题</h2><p id="9052" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">一旦在Storybook中设置了<code class="fe mk ml mm mn b">addon-a11y</code>,当您执行<code class="fe mk ml mm mn b">npm run storybook</code>时，您应该会看到一个<code class="fe mk ml mm mn b">Accessibility</code>选项卡，它会突出显示检测到的任何违反可访问性的情况，如下所示:</p><figure class="mq mr ms mt gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nf"><img src="../Images/9a11cabfebae48782645654a91f141e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-w-e14OHJ23prpnU"/></div></div></figure><p id="8019" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，插件告诉我，屏幕上有一个区域正在显示滚动条，但是这个区域不是键盘焦点。这意味着任何通过键盘导航的人(比如许多需要辅助功能的用户)都不能滚动。</p><p id="0bb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，我可以单击“更多信息…”来导航到失败的规则，并查看一些推荐的修复示例。在这种情况下，我需要将<code class="fe mk ml mm mn b">tabindex="0"</code>添加到可滚动区域，以便。这样做并重新运行测试可以解决问题。</p><p id="12d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，这不会像专门为可访问性测试设计的浏览器插件那样广泛或全面，但是如果您已经在使用<a class="ae mo" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>，这是一个简单的方法，也可以用来快速检查可访问性。</p><p id="af1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可访问性不仅仅指需要屏幕阅读器的人。许多人患有各种形式的色盲。a11y插件为我们提供了一个滤色器功能(如下图),可以模拟各种形式的色盲，因此您可以验证您的应用程序，并确保您没有隐藏基于颜色敏感度的信息。</p><figure class="mq mr ms mt gt nc gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/ea75072a3bbf5b48b0421923745a5fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/0*m9G9zpeV5RGcpyzO"/></div></figure><h2 id="e9e2" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">aria-直播和内容更新</h2><p id="6946" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated"><a class="ae mo" href="https://www.w3.org/WAI/PF/aria-1.1/states_and_properties#aria-live" rel="noopener ugc nofollow" target="_blank"> Aria-live </a>用于表示接收定期更新的网络应用区域。</p><p id="4de9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe mk ml mm mn b">aria-live</code>相当简单，您可以将它添加到任何div中，并指定<em class="mp">礼貌</em>。这是指通知对最终用户的紧急程度。</p><p id="99c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，你可以使用<code class="fe mk ml mm mn b">&lt;div aria-live="polite"&gt;</code>只在用户空闲时宣布事件，而<code class="fe mk ml mm mn b">assertive</code>会更主动。</p><p id="7cbc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，设置<code class="fe mk ml mm mn b">aria-live</code>还不够。你还需要用一个<code class="fe mk ml mm mn b">LiveAnnouncer</code>来宣布对屏幕阅读器软件的修改。</p><p id="2d9b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看一下这个示例组件:</p><figure class="mq mr ms mt gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="77b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第20行，我们通过Angular的依赖注入机制将<code class="fe mk ml mm mn b">LiveAnnouncer</code>注入到组件中。</p><p id="2ec8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，在从第35行开始的<code class="fe mk ml mm mn b">onEntryAdded</code>方法中，我们用文本事件调用<code class="fe mk ml mm mn b">liveAnnouncer</code>。这些事件将被屏幕阅读器获取并呈现给用户。</p><h2 id="7c24" class="ly lc iq bd ld lz ma dn lh mb mc dp ll ko md me ln ks mf mg lp kw mh mi lr mj bi translated">林挺可达性</h2><p id="f8de" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">如果您想轻松地对您的开发实践进行某种程度的审计，您可以在Angular附带的<code class="fe mk ml mm mn b">tslint.json</code>文件中添加一些可访问性规则。这将允许您在林挺过程中运行可访问性检查，并可以捕获一些常见错误。</p><p id="681b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，打开<code class="fe mk ml mm mn b">tslint.json</code>并将以下规则添加到您的规则集合中:</p><pre class="mq mr ms mt gt mu mn mv mw aw mx bi"><span id="17de" class="ly lc iq mn b gy my mz l na nb">    "template-accessibility-alt-text": true,<br/>    "template-accessibility-elements-content": true,<br/>    "template-accessibility-label-for": true,<br/>    "template-accessibility-tabindex-no-positive": true,<br/>    "template-accessibility-table-scope": true,<br/>    "template-accessibility-valid-aria": true,<br/>    "template-click-events-have-key-events": true,<br/>    "template-mouse-events-have-key-events": true,<br/>    "template-no-autofocus": true,<br/>    "template-no-distracting-elements": true,</span></pre><p id="5f6a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当您运行<code class="fe mk ml mm mn b">npm run lint</code>来lint您的代码时，一些基本的可访问性检查将会发生。请注意，这绝不是全面的，但即使是基本的检查也有助于发现问题。</p><h1 id="42a2" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">结束语</h1><p id="c339" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">希望这篇文章已经给了你一个关于一般可访问性的快速入门或复习，以及一些关于如何在Angular中审计和实现可访问性问题的想法。</p><p id="0c2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论如何，我都不是可访问性方面的专家，如果你真的想认真审核你的应用程序的可访问性，我强烈建议你也考虑像<a class="ae mo" href="https://wave.webaim.org/" rel="noopener ugc nofollow" target="_blank"> Wave </a>等专门构建的工具。</p><p id="3152" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于角度可及性的更多最新细节，请看框架的<a class="ae mo" href="https://angular.io/guide/accessibility" rel="noopener ugc nofollow" target="_blank">关于可及性的官方文档页面</a>。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="f565" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【https://killalldefects.com】原载于2020年2月13日<a class="ae mo" href="https://killalldefects.com/2020/02/12/angular-accessibility/" rel="noopener ugc nofollow" target="_blank"><em class="mp"/></a><em class="mp">。</em></p></div></div>    
</body>
</html>
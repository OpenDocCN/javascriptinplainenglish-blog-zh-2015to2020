<html>
<head>
<title>Best of Modern JavaScript — More Core Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript的精华—更多核心特性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/best-of-modern-javascript-more-core-features-e4ead47ed410?source=collection_archive---------6-----------------------#2020-09-04">https://javascript.plainenglish.io/best-of-modern-javascript-more-core-features-e4ead47ed410?source=collection_archive---------6-----------------------#2020-09-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5b6844f32b865999f62236e668d34f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vjO82wwyqCVX4RFF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@wimvanteinde?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Wim van 't Einde</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e78d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自2015年以来，JavaScript有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究JavaScript的核心特性。</p><h1 id="1ec4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">箭头函数的函数表达式</h1><p id="d1ec" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从ES6开始，箭头函数允许我们创建更短的函数，并且不绑定到它自己的<code class="fe me mf mg mh b">this</code>。</p><p id="54cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这使得创建新功能更加容易和简洁。</p><p id="90dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="36ed" class="mq lc iq mh b gy mr ms l mt mu">function Button() {<br/>  var _this = this;<br/>  var button = document.getElementById('myButton');<br/>  button.addEventListener('click', function() {<br/>    console.log('clicked');<br/>    _this.handleClick(); <br/>  });<br/>}</span><span id="32f8" class="mq lc iq mh b gy mv ms l mt mu">Button.prototype.handleClick = function () {<br/>  //···<br/>};</span></pre><p id="ef6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe me mf mg mh b">_this</code>变量，并在函数外部将其设置为<code class="fe me mf mg mh b">this</code>，这样我们就可以在<code class="fe me mf mg mh b">click</code>监听器中使用它。</p><p id="3bd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这并不理想，因为我们很容易混淆不同层次的<code class="fe me mf mg mh b">this</code>的不同值。</p><p id="9b07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用箭头函数，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6415" class="mq lc iq mh b gy mr ms l mt mu">function Button() {<br/>  const button = document.getElementById('button');<br/>  button.addEventListener('click', () =&gt; {<br/>    console.log('clicked');<br/>    this.handleClick();<br/>  });<br/>}</span></pre><p id="03ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需传入箭头函数，就可以使用来自<code class="fe me mf mg mh b">Button</code>函数的<code class="fe me mf mg mh b">this</code>值。</p><p id="fd40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在使用之前，我们不必将<code class="fe me mf mg mh b">Button</code>的<code class="fe me mf mg mh b">this</code>设置为变量。</p><p id="025e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">箭头函数对于返回表达式的回调非常有用。</p><p id="129f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cd9c" class="mq lc iq mh b gy mr ms l mt mu">var arr = [1, 2, 3];<br/>var cubes = arr.map(function (x) { return Math.pow(x, 3) });</span></pre><p id="561c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c4bc" class="mq lc iq mh b gy mr ms l mt mu">const arr = [1, 2, 3];<br/>const cubes = <!-- -->arr.map(x<!-- --> <!-- -->=&gt;<!-- --> <!-- -->x<!-- --> <!-- -->** 3);</span></pre><p id="07b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它短得多，也干净得多。</p><h1 id="edc2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多个返回值</h1><p id="9a60" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">借助现代JavaScript，我们可以轻松处理多个返回值。</p><p id="c94e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以返回一个对象或数组，并将条目析构为变量。</p><p id="7a04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在ES6之前，没有析构赋值，所以我们必须这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="999c" class="mq lc iq mh b gy mr ms l mt mu">var matchObj =<br/>  /^(\d\d\d)-(\d\d\d)-(\d\d\d\d)$/<br/>  .exec('222-112-2222');<br/>var areaCode = matchObj[1];<br/>var officeCode = matchObj[2];<br/>var stationCode = matchObj[3];</span></pre><p id="c463" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用ES6或更高版本，我们可以编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6c37" class="mq lc iq mh b gy mr ms l mt mu">const matchObj =<br/>  /^(\d\d\d)-(\d\d\d)-(\d\d\d\d)$/<br/>  .exec('222-112-2222');<br/>const [_, areaCode, officeCode, stationCode] = matchObj;</span></pre><p id="8e67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用析构将每个条目分配给一个变量。</p><p id="8f55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们节省了许多行代码。</p><h1 id="9f86" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">通过对象的多个返回值</h1><p id="a6fe" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们也可以返回一个对象并将属性析构为变量。</p><p id="363f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9d4b" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  foo: 'bar'<br/>};</span><span id="db60" class="mq lc iq mh b gy mv ms l mt mu">const {<br/>  writable,<br/>  configurable<br/>} =<br/>Object.getOwnPropertyDescriptor(obj, 'foo');</span></pre><p id="6be4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">getOwnPropetyDescriptor</code>方法中获得<code class="fe me mf mg mh b">writable</code>和<code class="fe me mf mg mh b">configurable</code>属性，并将其分配给变量。</p><h1 id="9e9e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从<code class="fe me mf mg mh b">for</code>和<code class="fe me mf mg mh b">forEach()</code>到<code class="fe me mf mg mh b">for-of</code></h1><p id="261b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">for-of循环可以遍历任何可迭代对象。</p><p id="edc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比<code class="fe me mf mg mh b">for</code>通用性差，但比<code class="fe me mf mg mh b">forEach</code>更快更通用。</p><p id="7694" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">forEach</code>仅适用于数组和节点列表。</p><p id="675a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用for循环，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d415" class="mq lc iq mh b gy mr ms l mt mu">var arr = ['a', 'b', 'c'];<br/>for (var i = 0; i &lt; arr.length; i++) {<br/>  var letter = arr[i];<br/>  console.log(letter);<br/>}</span></pre><p id="77ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe me mf mg mh b">forEach</code>，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d9e1" class="mq lc iq mh b gy mr ms l mt mu">var arr = ['a', 'b', 'c'];<br/>arr.forEach(function(letter) {<br/>  console.log(letter);<br/>});</span></pre><p id="e0a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用for-of，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="df63" class="mq lc iq mh b gy mr ms l mt mu">const arr = ['a', 'b', 'c'];<br/>for (const [index, letter] of arr.entries()) {<br/>  console.log(index, letter);<br/>}</span></pre><p id="52b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所见，我们可以在for-of循环中使用析构。</p><p id="3522" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这在其他循环或<code class="fe me mf mg mh b">forEach</code>中不可用。</p><p id="3e96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为<code class="fe me mf mg mh b">arr.entries()</code>返回一个数组，每个条目都是一个带有索引和条目的数组，所以我们可以通过析构来获得它们。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/64105c067412cc522967c38271b9800a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i5M2xwZPDlgj7bhE"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@lrb22?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Laurie Byrne</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e47f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0379" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">现代JavaScript有很好的特性，包括析构和for-of循环。</p><h2 id="cab4" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="3c53" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有三份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T3【plain English . ioT5】找到一切的链接！</a></p></div></div>    
</body>
</html>
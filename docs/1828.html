<html>
<head>
<title>Base64 Encoding in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的Base64编码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/base64-encoding-in-javascript-be4dda5f32f6?source=collection_archive---------2-----------------------#2020-04-27">https://javascript.plainenglish.io/base64-encoding-in-javascript-be4dda5f32f6?source=collection_archive---------2-----------------------#2020-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7184" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">包括在JavaScript中使用base64上传图像</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f081d7ed95695345512dcfb6d100317d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EmQ8uQ5yxpuKyo8z"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@kenziem?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mackenzie Marco</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bd1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Base64基本上是一种信息编码方式，通常用于通过基于文本的协议(如HTTP)发送二进制数据。您还可以使用它来确保您的文本或信息在传输过程中不会损坏。例如，您可以使用base64作为编码类型来提交HTML表单。这不是隐藏信息或数据的方式。这意味着你应该把它作为一种安全措施来使用，因为在任何编程语言中，你都可以很容易地<a class="ae kv" href="https://www.utilities-online.info/base64" rel="noopener ugc nofollow" target="_blank">把base64 </a>字符串转换回它的原始形式。</p><h1 id="16c8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">开始</h1><p id="7b02" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面是一个示例代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/c13322775f2c7973ef9500d9fadf35a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYQS4BgnMbiCnF0t1pONKw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sample Code</figcaption></figure><p id="66da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们首先在JavaScript中定义base64字符串。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="402e" class="mv lt iq mr b gy mw mx l my mz">&lt;script&gt;<br/>   const str = "Hello world!";<br/>   const base64 = btoa(str);<br/>   const decode = atob(base64);</span><span id="5501" class="mv lt iq mr b gy na mx l my mz">   console.log("Original: " + str);<br/>   console.log("Base64: " + base64);<br/>   console.log("Decoded: " + decode);<br/>&lt;/script&gt;</span></pre><p id="40db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nb nc nd mr b">btoa()</code>函数将内容编码为base64。</p><p id="b898" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nb nc nd mr b">atob()</code>函数将base64字符串解码为其原始形式。</p><p id="8e87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/c481a1cb4df519ce060cda8a33f1151b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWFfVKALIL6oQNC-v652Qg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result</figcaption></figure><p id="6a3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们有3个字符串——原始的、Base64的和相应解码的。这是在JavaScript中编码和解码base64的基础。</p><p id="18f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何通过将HTML画布图像上传到服务器来实际使用base64。</p><h1 id="5692" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用Base64上传图像</h1><p id="56cb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建一个名为<strong class="ky ir"> image </strong>的空白文件夹和一个名为<strong class="ky ir">upload.php</strong>的php文件。</p><p id="6f77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">Upload.php</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/8d364749568880a68f3ccdfc139dbb1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0CxhXv5tV0uVo1MDOAncbA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Upload.php</figcaption></figure><p id="ddd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将把图像发送到这个文件中，这个文件将对JSON主体进行解码。然后，将图像保存在<strong class="ky ir">图像</strong>目录中，图像名称取自当前的UNIX时间戳点png。</p><p id="894b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，创建一个新的画布元素和上传按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/11a8a27335f7fc182f4037ff530d2ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBZPI76GDf6_dWA6w3FQdw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Create a canvas and button</figcaption></figure><p id="4f16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们在这块画布上做一些基本的绘制来获得一些内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/549b15fb48963785d17a5ec8e48682f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*xvdzUFa_5ljXstL2bfT1dg.png"/></div></figure><p id="7674" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们得到了画布和按钮的引用。然后我们得到画布2d渲染上下文。这是我们可以在实际画布上绘画的一种方式。</p><p id="08ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们首先将画布的背景设置为浅灰色，然后设置画布的宽度和高度。为了让它更有趣，我们在上面放了一段文字。</p><p id="8ba6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/f613c687bff6dcf942885aa648787958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gs9dVD_JmFmlT72vJEXvpg.png"/></div></div></figure><h1 id="6971" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">定义上传流程功能</strong></h1><p id="3b67" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们创建一个名为<strong class="ky ir"> uploadCanvasImage </strong>的函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0ff5034016a76ebb4e3f0958c70bc310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*aaVYjQt3MsA3Z_29hlNWrw.png"/></div></figure><p id="e3bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击上传按钮时将触发该功能。首先，我们将通过使用<strong class="ky ir">toda aul</strong>方法获得实际画布的base64字符串。</p><p id="186d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">结果</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/60e6b8ad499fcb87584fbc943e130d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJ5_5aeBaHsGe8ib5pvcdQ.png"/></div></div></figure><p id="fc20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将得到如上的数据。逗号之后是画布的base64表示。所以我们需要在逗号上分割字符串，我们只能取索引1里面的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/b2f960a4e60b48a7c4472f28ca961736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*MBK8jHDJk4Pq8e6s_eSjYQ.png"/></div></div></figure><p id="cf9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们创建一个名为<strong class="ky ir"> body </strong>的常量，它将作为JSON发送出去。之后，我们向upload.php文件发出请求。</p><h1 id="e0c3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">决赛成绩</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/ec05d049db129d6a52881e5f3131516f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ifh1JoLVMtf01UDlN8pQg.png"/></div></div></figure><p id="9922" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以在network选项卡中看到，我们已经成功地将所有base64字符串发送到服务器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/ba2f7ce70a814f9ca2e258a946f5662d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y5NvLU3MBC0DbGFzZuew8g.png"/></div></div></figure><p id="0240" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<strong class="ky ir">图像</strong>文件夹中，我们有一个画布的标准PNG文件。</p><p id="e57b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nm">更多内容看</em> <a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nm">说白了。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nm">免费周报</em> </strong> </a> <em class="nm">。在我们的</em> <a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nm">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="nm">。</em></strong></a></p><div class="nn no gp gr np nq"><a href="https://www.utilities-online.info/base64" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">Base64在线编码/解码</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">base64转换器有助于用户快速轻松地编码或解码base64数据。转换器提供独特的…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">www.utilities-online.info</p></div></div></div></a></div></div></div>    
</body>
</html>
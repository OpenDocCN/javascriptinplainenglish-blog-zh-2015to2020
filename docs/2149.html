<html>
<head>
<title>Host Your Own React Site with Firebase and Github Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Firebase和Github操作托管您自己的React站点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/hosting-your-own-react-site-using-firebase-and-github-actions-8a518255cc64?source=collection_archive---------4-----------------------#2020-05-24">https://javascript.plainenglish.io/hosting-your-own-react-site-using-firebase-and-github-actions-8a518255cc64?source=collection_archive---------4-----------------------#2020-05-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a032" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作为学习UI/UX设计的一部分，我决定重新设计我的网站并在上面工作。一旦我完成了设计和开发，我想知道是否有一种比当前的方法更简单的方法来进行部署，这种方法是将代码合并到master中，然后手动键入Firebase CLI命令来进行部署。</p><p id="e652" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天，我将向您展示如何在Firebase上托管您的网站，并将其与Github Actions CI/CD集成，以便您可以无缝地将代码部署到您的站点。</p><h1 id="bc4d" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">我们开始吧</h1><p id="2ae2" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">假设您的代码托管在GitHub中，并且使用Firebase deploy部署您的站点，我将展示这些步骤。然而，其他供应商的步骤可能也是类似的。</p><h1 id="9b42" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">设置代码</h1><p id="7943" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">出于本文的目的，我在GitHub上创建了一个新的回购协议。我使用create react app设置了一些样板代码。由于实际的UI代码不在本文的讨论范围内，所以我只做了一个简单的页面。这里有一个页面截图。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/e95aa78b99526f9f5253573f6a321109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PX2NZxLLpUHLjtQuRsJgYQ.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Custom logo in the default App.js page</figcaption></figure><p id="5623" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我提交代码的当前状态，并将其合并到master。接下来，我们集成Firebase。</p><h1 id="d725" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">集成燃烧基</h1><p id="8ce4" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">Firebase是我真正喜欢使用的平台之一，因为它很容易集成。我以前曾使用Firebase连接多个移动应用程序和网站。</p><p id="74b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们只需要连接我们的网站。让我们继续到Firebase并创建一个新项目。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mc"><img src="../Images/a1dcaa19c768dad37d6da094cea582e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*okJPvbnauIpePb_0ml1Fig.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Firebase screen to create a new project.</figcaption></figure><p id="af2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在Firebase中创建了一个新项目，并输入了初始细节。我没有启用Firebase analytics，因为这个小项目不需要它。现在，我提交创建我的项目。</p><p id="ae2f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建项目后，主页会要求我向项目添加一个应用程序。我单击将web应用程序添加到我的项目中。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mc"><img src="../Images/9487c00df2f0a6a48def2a8587665346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JFcAEQ3u9axF1rLtXaqZQ.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Setting up hosting</figcaption></figure><p id="46ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我提供了一个应用程序昵称，并为站点设置了Firebase主机。接下来，Firebase要求我将一些代码粘贴到我的index.html中。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi md"><img src="../Images/70ee453486308973d90594934d94a861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUFlyiPovVxkqdRKWX--3Q.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Boilerplate code to paste into index.html</figcaption></figure><p id="d0cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将它添加到我的index.html，在body标签的底部。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi me"><img src="../Images/0315ea941bbae560accfa92a98f8b279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JBfxSf1qDtu98g1AQ72YYA.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">public/index.html</figcaption></figure><p id="2201" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我使用npm安装Firebase工具，这样我就可以通过CLI访问它。</p><pre class="ln lo lp lq gt mf mg mh mi aw mj bi"><span id="36ac" class="mk kj in mg b gy ml mm l mn mo">npm install -g firebase-tools</span></pre><p id="c59f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我使用Firebase CLI从我的项目文件夹登录到我的Firebase项目。我通过这些步骤，将主机添加到我的项目中。</p><pre class="ln lo lp lq gt mf mg mh mi aw mj bi"><span id="a6fa" class="mk kj in mg b gy ml mm l mn mo">firebase init</span></pre><p id="f17f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦我完成了，我的项目将有两个额外的文件，<strong class="jm io"> firebase.json </strong>和<strong class="jm io">。firebaserc </strong></p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi mp"><img src="../Images/04dc0865c515d805b6528a95d7eed068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iB6bDUCcDI9yPUw-VBw4MA.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">.firebaserc</figcaption></figure><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/3093db51d6bb85908ad6e029872e124a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*Lu1nVDONgdb-XQSb425Thw.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">firebase.json</figcaption></figure><p id="2b13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们已经设置好了，我们总是可以使用以下命令从CLI部署到Firebase:</p><pre class="ln lo lp lq gt mf mg mh mi aw mj bi"><span id="957b" class="mk kj in mg b gy ml mm l mn mo">firebase deploy --only-hosting</span></pre><h1 id="2b34" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">设置管道</h1><p id="a351" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">现在我们已经设置了代码和Firebase，让我们看看如何使用GitHub动作自动部署它。</p><h2 id="806f" class="mk kj in bd kk mr ms dn ko mt mu dp ks jv mv mw kw jz mx my la kd mz na le nb bi translated">火基令牌</h2><p id="38b3" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">在此之前，我们需要生成一个令牌，GitHub可以用它来访问我们的Firebase项目，并进行部署。为此，打开一个新的终端并键入:</p><pre class="ln lo lp lq gt mf mg mh mi aw mj bi"><span id="985a" class="mk kj in mg b gy ml mm l mn mo">firebase login:ci</span></pre><p id="b551" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将在你的浏览器中打开一个新标签，显示你的谷歌账户。选择正确的一个并接受请求，以生成令牌。</p><p id="8ff2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完成后，您可以返回终端窗口，找到令牌。复制这个文件，在你的Github库设置中，转到secrets，并把它添加到一个新的密匙名<strong class="jm io"> FIREBASE_TOKEN下。</strong></p><p id="3eef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在已经完成了，我们可以设置管道了。</p><h2 id="95d0" class="mk kj in bd kk mr ms dn ko mt mu dp ks jv mv mw kw jz mx my la kd mz na le nb bi translated">YAML文件</h2><p id="dde4" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">从管道开始，在我的根文件夹中，我创建了一个. github/workflows文件夹。<br/>这是我可以放所有YAML文件的地方。</p><p id="dc98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在工作流中，我添加了一个新的文件main.yml，如下所示。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nc"><img src="../Images/7a7ebe1f2b21359adc866fe88ad1757f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MKAlDJ3tPCiky0UFFYnVdQ.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">main.yml</figcaption></figure><p id="e585" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您可以看到我在这个文件中定义的步骤，当您按下master时，管道被触发。然后，它运行以下步骤:</p><ol class=""><li id="d71c" class="nd ne in jm b jn jo jr js jv nf jz ng kd nh kh ni nj nk nl bi translated">签出主分支。</li><li id="386d" class="nd ne in jm b jn nm jr nn jv no jz np kd nq kh ni nj nk nl bi translated">使用npm安装依赖项。</li><li id="d938" class="nd ne in jm b jn nm jr nn jv no jz np kd nq kh ni nj nk nl bi translated">使用npm build构建代码的生产版本。</li><li id="84bc" class="nd ne in jm b jn nm jr nn jv no jz np kd nq kh ni nj nk nl bi translated">最后，使用secrets中我们预定义的FIREBASE_TOKEN部署到Firebase。如果需要，您可以选择不同的名称。</li></ol><p id="0981" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在实际场景中，我们会添加更多的林挺和测试步骤，以保持代码质量，并检查问题。</p><h1 id="db98" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">部署</h1><p id="8cc6" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">现在我们已经设置好了，让我们来测试一下吧！</p><p id="c1f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我所有的YAML代码都在“功能/部署”分支中。一旦我完成了上面的工作，我就提交它并推送代码。现在，我打开Github并创建一个pull请求，并将其合并到master中。</p><p id="9d95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦成功合并，我们就可以打开回购中的actions选项卡，查看发生了什么。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nr"><img src="../Images/b7ed297864dcb7a5a9096b5202ef652d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iahUsT2Xl2pi0dpu5J1t6w.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">New action</figcaption></figure><p id="363c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我可以看到一个行动正在进行中。我点击它了解更多详情。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ns"><img src="../Images/dba3d7cc0a88d3a5c4485b8716272e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_f92VmffnTYBBAI6AvWYQ.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Steps</figcaption></figure><p id="4384" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">点击它了解更多细节，我可以看到步骤和目前的进展。在这里，我还将看到部署的状态，并发现潜在的故障。</p><p id="84f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦完成，我会在这里看到绿色，这总是一件好事。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nt"><img src="../Images/6b8cb13584d70537ebc927f5e7d6fc0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iIYsR4GK2x3CRBVq4ND5Tw.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Completed successfully!</figcaption></figure><p id="d8fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我转到我的Firebase控制台，在那里我看到下面的横幅:</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi nu"><img src="../Images/0bef7565e202241a0bd127f34c9c5d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0JoA6R-eML9PA69YI_Ulyg.png"/></div></div></figure><p id="c721" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这表明它已经成功部署，我可以在这里看到网站<a class="ae ll" href="https://fire-base-deploy-tutorial.web.app/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="a143" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，每当我们需要部署到网站时，我可以在本地开发更改，一旦准备就绪，我需要做的就是将它推送到master，Github会处理剩下的事情！</p><p id="8614" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nv">更多内容请看</em><a class="ae ll" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Internationalize Your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">国际化您的React应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/is-your-app-discriminating-against-its-users-f61dbd1214d9?source=collection_archive---------10-----------------------#2020-05-02">https://javascript.plainenglish.io/is-your-app-discriminating-against-its-users-f61dbd1214d9?source=collection_archive---------10-----------------------#2020-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="bcb4" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">App翻译教程:</h2><div class=""/><div class=""><h2 id="fa1d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">你知道英语不是世界上说得最多的语言吗？让我们使用react-intl创建一个支持多语言翻译的react应用程序。</h2></div><p id="cc67" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我创建了一个名为<a class="ae lk" href="http://www.onefortheocean.com" rel="noopener ugc nofollow" target="_blank"> #onefortheocean </a>的页面，试图让年轻人参与到收集垃圾的活动中来，以避免垃圾最终进入我们的海洋。世界各地的孩子说不同的语言，我想通过使用i18n (react-intl)使我的页面对每个人都可用。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/edff65d4124fd25439a11e0985060fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YNHghHs-mwwKPhXt74BNpg.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Just started translating the app I am working on</figcaption></figure><h1 id="bc8b" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">🌐I18N是什么意思？</h1><p id="ce30" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">每当看关于翻译的内容时，你可能会遇到一个奇怪的词“i18n”。这是“国际化”的简称。“I”+18个字母+“n”=<strong class="kq ja">国际化</strong>🤷‍♀</p><h1 id="5ab8" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">你应该翻译你的应用吗？</h1><p id="6a0c" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">当开始一个项目时，很容易将任何文本直接硬编码到代码中。在继续走这条路之前，你可能想问自己的是——“非英语国家的人会访问我的页面吗？”。如果是——“他们能按原样使用我的页面吗？”。</p><blockquote class="my mz na"><p id="5394" class="ko kp nb kq b kr ks ka kt ku kv kd kw nc ky kz la nd lc ld le ne lg lh li lj ij bi translated">网络遍及世界各地。国际化的web应用程序为世界各地的人们提供了出色的用户体验。— Format.js</p></blockquote><p id="542c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果你的用户、顾客和访问者依赖于你的页面被翻译成其他语言，你可以直接进入页面，开始用多种语言提供你的内容。就像我说的——英语不是世界上最常用的语言——它实际上是西班牙语！</p><h1 id="c0d4" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">💬翻译您的应用—基础知识</h1><p id="2757" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">在本教程中，我们将使用react-intl创建一个react应用程序，以用户的首选语言向他们提供我们的内容。在这里是英语和西班牙语。在开始编码之前，我们将看一下react-intl的基础知识——我们需要习惯使用键而不是硬编码文本的想法:</p><p id="94c2" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> #1我们使用按键代替硬编码文本</strong></p><pre class="lm ln lo lp gt nf ng nh ni aw nj bi"><span id="2594" class="nk mc iq ng b gy nl nm l nn no">import { FormattedMessage } from 'react-intl';</span><span id="d247" class="nk mc iq ng b gy np nm l nn no">&lt;̶h̶1̶&gt;̶M̶y̶ ̶we̶b̶p̶a̶g̶e̶&lt;̶/̶h̶1̶&gt;̶<br/>&lt;h1&gt;&lt;FormattedMessage id="app.header" /&gt;&lt;/h1&gt;</span></pre><p id="c2d8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> #2我们为每种语言创建一个对象，包含应用程序中的所有按键。</strong></p><pre class="lm ln lo lp gt nf ng nh ni aw nj bi"><span id="e975" class="nk mc iq ng b gy nl nm l nn no">const lang_en = {<br/>  'app.header': 'My Webpage',<br/>};</span></pre><h1 id="c4ac" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">让您的应用程序正常运行</h1><p id="e7ff" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">让我们创建一个react应用程序并开始吧！</p><pre class="lm ln lo lp gt nf ng nh ni aw nj bi"><span id="04b4" class="nk mc iq ng b gy nl nm l nn no">~ npm install -g create-react-app<br/>~ npx create-react-app my-translated-app<br/>~ cd my-translated-app<br/>~ npm install react-intl<br/>~ npm start</span></pre><p id="ea6b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">此时，您的浏览器中应该有一个正在运行的react应用程序。我们的应用程序现在看起来像这样:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nq"><img src="../Images/794964d3272e409a16670da5c41e893a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8yKs5jpib2AhDvQIur2ydg.png"/></div></div></figure><h1 id="4ea0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated"><strong class="ak">添加一些自定义样式</strong></h1><p id="18d9" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">通过添加下面提供的样式和代码，我们应该得到一个如下所示的应用程序:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nr"><img src="../Images/5d26c7b1d3ae1656640160cf567ac07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9hSs0pN9fgFR5N-wbeqjg.png"/></div></div></figure><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="1986" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">翻译入门</h1><p id="3cdf" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">好了——现在我们有了一个带有默认标题“我的默认网页”的基础页面。这并没有让我们有任何进展。让我们添加一些翻译对象——一个用于英语，一个用于西班牙语，以及一些获取首选翻译的代码:</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="70fc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在我们有了我们的翻译——现在是时候把魔法加入到我们的应用程序中了。我们将把应用程序包装在一个<code class="fe nu nv nw ng b"><strong class="kq ja">IntlProvider</strong></code>组件中，并使用一个<code class="fe nu nv nw ng b">useState</code>钩子来维护所选择的地区/语言。此时，我们将开始将语言默认为英语(“en”)。</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="9b0b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在——我们的应用程序不应该显示默认文本——它应该获取英语翻译并使用为<code class="fe nu nv nw ng b">app.header</code>键提供的文本🙌我们的页面现在应该看起来像这样:</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi nx"><img src="../Images/4db590dc8da298abc68ca30870483083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4i2DLqA-E6k9ndpdqoWCpA.png"/></div></div></figure><p id="7e0d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这么🎉翻译工作！我们还没有完成，但里程碑是值得庆祝的。在下一节中，我们将使用户能够更改语言。</p><h1 id="e3a1" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">改变语言</h1><p id="186b" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">要更改地区/语言，我们可以使用我们创建的钩子中的<code class="fe nu nv nw ng b">setLocale</code>方法。让我们为用户创建一些在语言之间切换的按钮:</p><pre class="lm ln lo lp gt nf ng nh ni aw nj bi"><span id="0be3" class="nk mc iq ng b gy nl nm l nn no">//App.css</span><span id="0796" class="nk mc iq ng b gy np nm l nn no">...</span><span id="a6be" class="nk mc iq ng b gy np nm l nn no">button {<br/>  outline: none;<br/>  border: 1px solid white;<br/>  padding: 10px 20px;<br/>  background: transparent;<br/>  color: white;<br/>  font-size: 14px;<br/>  margin: 0 10px;<br/>  cursor: pointer;<br/>}</span><span id="e82a" class="nk mc iq ng b gy np nm l nn no">//App.js</span><span id="f3e3" class="nk mc iq ng b gy np nm l nn no">...</span><span id="f9c9" class="nk mc iq ng b gy np nm l nn no">const App = () =&gt; {<br/>  const [locale, <strong class="ng ja">setLocale</strong>] = useState("en");<br/>  return (<br/>    &lt;IntlProvider locale={locale} messages={getMessages(locale)}<br/>      &lt;div className="app"&gt;<br/>        &lt;h1&gt;<br/>          &lt;FormattedMessage<br/>            id="app.header"<br/>            defaultMessage="My default webpage"<br/>          /&gt;<br/>        &lt;/h1&gt;<br/>        <strong class="ng ja">&lt;div&gt;<br/>          &lt;button onClick={() =&gt; setLocale("en")}&gt;English&lt;/button&gt;<br/>          &lt;button onClick={() =&gt; setLocale("es")}&gt;Spanish&lt;/button&gt;<br/>        &lt;/div&gt;</strong><br/>      &lt;/div&gt;<br/>    &lt;/IntlProvider&gt;<br/>  );<br/>};</span></pre><p id="b033" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当用户点击其中一个按钮时，应用程序会将翻译切换到选定的语言——干得好！现在，您的应用程序中已经实现了完整的翻译👏 🎉</p><p id="3fa1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">(你也可以考虑为按钮使用FormattedMessage，以避免在应用程序中使用硬编码文本，但这取决于你自己)</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ny nt l"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Change language</figcaption></figure><h1 id="149e" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如果我重新访问该页面会发生什么？</h1><p id="3217" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">此时，它会将自己重置为默认状态。对于任何西班牙用户来说，每次访问都必须按下按钮，这可能会很烦人？让我们将选定的语言存储在本地存储中！</p><p id="3107" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了解决这个问题，我们将创建一个名为<code class="fe nu nv nw ng b">useLocalStorage</code>的本地存储挂钩来代替<code class="fe nu nv nw ng b">useState</code>:</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="nz nt l"/></div></figure><p id="97ce" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这就对了。我们的应用程序现在将选择的语言存储在本地存储中。如果本地存储中没有设置任何内容，我们的应用程序将使用默认设置。</p><p id="6d96" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们现在完成了—伟大的工作！🎉#translateeverything</p><h1 id="8546" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">超越“不归点”</h1><p id="ee3c" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">你可能会告诉自己，在应用程序中实现翻译为时已晚。不——不是的！幸运的是，硬编码文本和格式化消息可以并存。如果你正处于工作感觉难以承受的阶段，我会给你一个开始的建议——让我们一步一步来！</p><p id="3d43" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">第一步:</strong>使用react-intl的IntlProvider包装你的应用。仅创建一种翻译，它是您应用程序中的当前语言。在这一点上，不是添加多种翻译，而是让你的应用程序准备好翻译。修复技术层面和翻译本身的工作太繁重了。<br/> <strong class="kq ja">第二步:</strong>每次你触摸一个文件，你移动每个部分到语言对象，给它一个键。您移动的文本将替换为带有您刚刚创建的关键字的FormattedMessage。第三步:当剩下更小的部分时，你可以清理一下，把最后的部分去掉。<br/> <strong class="kq ja">步骤#4: </strong>现在您已经删除了所有硬编码的文本——是时候制作语言对象的副本并实际翻译文本了。你还需要在你的应用程序中的某个地方进行切换。</p><h1 id="b74b" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">旁注:</h1><p id="9687" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">您只能使用有效的语言代码！网络浏览器使用特定的语言识别码。例如，“en”是英语的有效代码，“pp”不是任何语言的有效代码。看看这里的<a class="ae lk" href="https://www.metamodpro.com/browser-language-codes" rel="noopener ugc nofollow" target="_blank">有效语言识别码</a>。<br/><strong class="kq ja">【2】</strong>在我的应用<a class="ae lk" href="https://github.com/marteloge/onefortheocean" rel="noopener ugc nofollow" target="_blank"> #onefortheocean </a>中，我使用Typescript创建了一些更详细的翻译实现(确保你只能翻译成有效的语言等。)<br/> <strong class="kq ja"> #3 </strong>将语言对象分割成单独的文件可能是明智的，因为这些对象在更大的应用程序中会变得很大。国际化不仅仅包括将文本从英语翻译成西班牙语，还包括格式化数字、日期、时间和复数形式。看看<code class="fe nu nv nw ng b">format.js</code> <a class="ae lk" href="https://formatjs.io/docs/basic-internationalization-principles" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="756c" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">所有代码放在一起</h1><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="oa nt l"/></div></figure><p id="df61" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">🙏希望你喜欢这个小教程！<br/>👩‍💻如果你需要联系，我在Linkedin和Github上。<br/>🐳这里的工作是通过在我的页面<a class="ae lk" href="https://github.com/marteloge/onefortheocean" rel="noopener ugc nofollow" target="_blank"> #onefortheocean </a> <br/>上工作学到的🙌感谢<a class="ae lk" href="https://formatjs.io/docs/basic-internationalization-principles" rel="noopener ugc nofollow" target="_blank"> format.js </a>在我们的react应用中让i18n的工作变得更加容易！</p><h2 id="dd02" class="nk mc iq bd md ob oc dn mh od oe dp ml kx of og mn lb oh oi mp lf oj ok mr iw bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="1221" class="pw-post-body-paragraph ko kp iq kq b kr mt ka kt ku mu kd kw kx mv kz la lb mw ld le lf mx lh li lj ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae lk" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kq ja">AI in Plain English</strong></a><a class="ae lk" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kq ja">UX in Plain English</strong></a><a class="ae lk" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kq ja">Python in Plain English</strong></a><strong class="kq ja"/>——谢谢，继续学习！</p><p id="bf46" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae lk" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kq ja">submissions @ plain English . io</strong></a><strong class="kq ja"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
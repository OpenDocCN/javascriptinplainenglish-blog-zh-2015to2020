<html>
<head>
<title>Building CRUD APIs using Deno and oak</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Deno和oak构建CRUD APIs</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-crud-apis-using-deno-and-oak-9f71ec106b0e?source=collection_archive---------6-----------------------#2020-05-20">https://javascript.plainenglish.io/building-crud-apis-using-deno-and-oak-9f71ec106b0e?source=collection_archive---------6-----------------------#2020-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5c890d44ca9b3830fec9970dad4c8884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7H0kXkVQGqg-pto23TY_eQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Building CRUD api’s using Deno and oak</figcaption></figure><div class=""/><p id="5d61" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">与Node相比，Deno是一个相当新的环境。在学习Deno时，开发人员想做的第一件事就是构建CRUD api。Deno有几个项目帮助我们实现这一目标，即:<a class="ae la" href="https://github.com/NMathar/deno-express" rel="noopener ugc nofollow" target="_blank"> deno-express </a>、<a class="ae la" href="https://github.com/oakserver/oak" rel="noopener ugc nofollow" target="_blank"> oak </a>、<a class="ae la" href="https://github.com/keroxp/servest" rel="noopener ugc nofollow" target="_blank"> servest </a>、<a class="ae la" href="https://github.com/drashland/deno-drash" rel="noopener ugc nofollow" target="_blank"> deno-drash </a>和<a class="ae la" href="https://github.com/sholladay/pogo" rel="noopener ugc nofollow" target="_blank"> pogo </a>。在这篇文章中，我们将学习如何使用Deno和Oak构建一个待办事项列表。</p><h2 id="b930" class="lb lc jf bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated"><strong class="ak">我们在建造什么？</strong></h2><p id="fd97" class="pw-post-body-paragraph kc kd jf ke b kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ly kx ky kz ij bi translated">Oak是一个受Koa启发的项目，Koa是一个流行的Node.js HTTP中间件框架。我们将使用oak和Deno构建一个处理todos列表的小应用程序。我们将要构建的api将有以下端点。</p><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lz"><img src="../Images/fd6d505b00b782c756cf05435ecdebf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIltBeBAq5xdY7vpW-sFag.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">List of API end points</figcaption></figure><h2 id="5c16" class="lb lc jf bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated"><strong class="ak">我们如何构建它？</strong></h2><p id="2a2e" class="pw-post-body-paragraph kc kd jf ke b kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ly kx ky kz ij bi translated">我们需要在项目存储库中创建两个文件<strong class="ke jg"> app.ts </strong>和<strong class="ke jg"> routes.ts </strong>。一个用于app，另一个用于服务路线。</p><p id="cf25" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke jg"> app.ts </strong>文件的内容如下图所示。看看我们如何在<strong class="ke jg"> app.ts </strong>文件中从oak导入应用模块。我们在第8行创建了一个新的oak应用程序。我们让这个应用程序使用我们稍后将在<strong class="ke jg"> routes.ts </strong>文件中定义的路线。现在，这个应用程序将在第5行和第6行给出的指定主机和端口上运行。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">content of app.ts file</figcaption></figure><p id="d646" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们将在<strong class="ke jg"> routes.ts </strong>中为Todo创建一个接口，它将有两个字段<strong class="ke jg"> id </strong>和<strong class="ke jg">描述</strong>。我们将在这些字段中分别存储todo id和todo描述。我们也有一个<strong class="ke jg"> todos </strong>列表，第一次返回初始值。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">creation of todo interface and sample todos list with initial values.</figcaption></figure><p id="5e75" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们现在将定义函数来支持todo的列表操作，通过id获取特定的todo，创建新的todo，通过id更新/删除特定的todo描述。相同的代码可以在下面的gist文件中看到。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">functions for GET,PUT,POST,DELETE operations of todos.</figcaption></figure><p id="9284" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们已经创建并导出了路由来使用这些函数，如下所示。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Routes creation and mapping to specific functions</figcaption></figure><p id="d8fa" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">运行以下命令，让应用程序在<a class="ae la" href="http://localhost:4000," rel="noopener ugc nofollow" target="_blank"> http://localhost:4000，</a>上运行</p><blockquote class="mg mh mi"><p id="157c" class="kc kd mj ke b kf kg kh ki kj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky kz ij bi translated"><strong class="ke jg">deno run—allow-env—allow-net app . ts</strong></p></blockquote><p id="61b3" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">既然应用程序已经在localhost:4000上运行，那么就使用postman或类似的应用程序来测试api端点。以下是postman中的结果截图。</p><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mn"><img src="../Images/0dd895933843f8f35242868ecb2aae0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t3M9YRG9BL6SLkZ8c8rk9w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Health Check API respone</figcaption></figure><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/bae222af85fd7d6ccfd19f15b16d0c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BwcwEPsx0T6vAy6gszbrMg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">listing todos API response.</figcaption></figure><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/63416cf784ddcecf0758f5600f2d6adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0UiAn2iZGa7n0qIo2EVOxQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Get todo by Id API response.</figcaption></figure><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mo"><img src="../Images/808b37b6ed6f08fc7298dc3c8f21b19c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B9YVhBQl56uuUx7y7Y4UHw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">POST operation to create a new todo.</figcaption></figure><figure class="ma mb mc md gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mq"><img src="../Images/380ce03ca5942f83f8f2d58be4df18aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gQDicmapSbarTQsNgCcnA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">DELETE operation to delete todo by Id.</figcaption></figure><p id="f324" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你只是想克隆我在本文中使用的代码，看看它是如何工作的。你可以使用下面的链接从GitHub下载代码。</p><p id="c0e2" class="pw-post-body-paragraph kc kd jf ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">【https://github.com/Kailashw/deno-api-oak】源代码链接:<a class="ae la" href="https://github.com/Kailashw/deno-api-oak" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="cb2f" class="mr lc jf bd ld ms mt mu lg mv mw mx lj my mz na lm nb nc nd lp ne nf ng ls nh bi translated"><strong class="ak">来自简明英语团队的通知</strong></h1><p id="b140" class="pw-post-body-paragraph kc kd jf ke b kf lu kh ki kj lv kl km kn lw kp kq kr lx kt ku kv ly kx ky kz ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae la" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke jg">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae la" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ke jg">订阅我们的YouTube频道</strong> </a> <strong class="ke jg">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
# JavaScript 中的函数式编程

> 原文：<https://javascript.plainenglish.io/functional-programming-in-javascript-9c608eab368b?source=collection_archive---------2----------------------->

## *什么是函数式编程？它提供了什么？*

![](img/3237cbd09e15d5bea6379d57432683a0.png)

我们来谈谈函数的原始编写方式。函数根据我们的需求执行一组特定的动作，包括获取数据、更新状态、改变一组可变值和更新 DOM 等等。

然后我们的代码库变得越来越大，在某个特定点之后，我们必须处理 bug。啊！

大多数情况下，修复 bug 是一个乏味的过程，因为你必须经历潜在的问题，有时会有很多！我们修复它们，然后我们有更多的错误，恶性循环继续！在某些时候，我们可能只是看着我们的代码库，最后说这是可行的，虽然我真的不知道怎么做到的！太神奇了！:D

作为魔术师，你需要清楚地了解你玩的把戏。如果你打算重构你的代码或者写一个新的，你可能需要考虑你代码中的应用程序状态更新。

**应用状态**

应用程序状态是定义程序实例的所有值的整体。一些值将从这个状态中派生出来，例如动态按钮颜色或“p”标记中的动态内容。用户也可以使用**事件**与状态持续交互。

状态包含最重要的值，如果处理不当会导致错误。所以直接改变任何地方的状态值都不是一个好主意。

把逻辑执行和状态更新分开怎么样？换句话说，如果我们把我们的代码库分成纯粹的函数和状态变化(也就是副作用)会怎么样？

## **功能编程**

函数式编程是一种编程范式，在这种编程范式中，你广泛地使用函数，更重要的是，大多数函数都是纯函数。

但是在深入纯函数之前，有两件事需要说明，一是副作用，二是高阶函数。

## 副作用

在函数式编程环境中，副作用是非常有趣的。副作用是任何改变程序状态的东西，比如 DOM 更新、获取请求，甚至是登录到控制台。

换句话说，函数在其本地环境之外所做的任何永久改变都是副作用。

这些效果正是我们实际上需要我们的程序来实现的。但我们也需要确保它们得到妥善管理。

这里的目标是以这样一种方式构建您的代码，即副作用不会扩散到任何地方，而是被包含和限制在需要它的地方。您仍然需要编写大量的逻辑，这就是纯函数发挥作用的地方。

## 高阶函数

函数是 JavaScript 中的一等公民，这意味着:

*   可以使用匿名函数将它们赋给任何变量。
*   它们可以在另一个函数中作为参数传递。
*   它们也可以像其他数据类型一样从另一个函数返回。

这确实有助于**函数组合**和**声明式**编码风格，它们是函数式编程的显著特征。

## 纯函数

纯函数的整体思想是让你的代码更容易推理。你知道输入，你可以很容易地预测输出。

纯函数的灵感来自于函数的数学定义。在数学中，函数由以下等式表示:

```
f(x)=y 
```

这里 **x** 是输入， **y** 是输出，该函数仅代表输入和输出之间的关系。

*一个纯粹的函数就像一个数学函数，给定一个特定的输入值，它会给你始终相同的输出，没有副作用。*

看待纯函数的一个更基本的方式是通过**引用透明性。**

当函数调用可以用它的评估值替换并且它根本不改变程序的行为时，这个函数被称为**引用透明的**。

让我们来看一个登录函数和实现它的不同方法:

在*“登录功能”*的纯形式中有两处改变。一个是**不变性**。我们不希望输入或任何外部变量发生突变，这将是一个副作用。当我们写大量的逻辑时，副作用会使我们的函数更难推理。

另一个变化是将' *userinput'* '作为参数，因为我们的函数输出依赖于该变量。这使得函数输出更加可预测和可靠。

想象一个场景，其中' *globaldata'* 不正确，在这种情况下，您不必查看纯' *login 函数'*,寻找任何不想要的突变，如果您知道输入，您可以很容易地预测它的输出。毕竟我们都喜欢可靠性！

## 声明式风格和代码重用

函数式编程真正有帮助的另一件事是编码的声明方式。

**声明式**方式和**命令式**方式是两种编码方式。声明式编码的思想是将代码的重复部分一般化，这样我们的主代码看起来更小更整洁。以数组中的方法' *map'* 和' *reduce'* 为例，它主要用于循环数组值。坦率地说，我很少用**代替**和**，而**现在用数组循环。我已经被'*地图'*和'*还原'*惯坏了。唉！

但是它的迷人之处在于' *map'* 和' *reduce'* 都在幕后使用 **for/while** 循环来循环数组。当你在幕后做事情时，那是**声明式**的编码风格，因为你没有进入事情应该如何做的本质细节。更确切地说，你是在宣告你想要什么。

您只需定义一次*【map】*和*【reduce】*，然后您就可以随时使用它。看一看:

## Currying

我不知道是谁给这个概念起的名字，但它听起来确实很印度！Currying 有助于使函数在调用和分配参数时更加灵活。

Currying 的特殊之处在于，每次调用它只接受一个输入，然后返回一个输出，如果需要更多的参数，这个输出就是函数，否则就是输出。

一个使用 currying 的简单示例:

基本思想是每个函数调用只有一个输入和一个输出，这在我们编写或管道时很方便，我们将会看到。

## 操作组合

功能组合是将两个功能结合起来，得到一个产品功能。组合它们的方法是将一个函数的输出作为输入提供给下一个函数。等式看起来像:

```
var resultant = (x)=>f(g(x)); //here the output of function 'g' is
                                provided as input to function 'f'.
```

功能组合可用于组合多个功能来创建自定义结果。有两种方法可以做到:

**构成和管道**

假设你有 3 个函数 *f()* ， *g()* 和 *h()。*您希望通过 f、g 和 h 传递输入。它应该类似于:

```
var output=(input)=>h(g(f(input))); 
```

这看起来很复杂，有点像回调地狱。为了避免这种复杂性，我们可以使用**组合**和**管道**。

**Compose** 所做的是将函数( *f，g，h* )作为参数，然后返回一个从右向左运行输入的函数。

**管道**类似于 compose，除了它从左到右运行输入。我看不出左右的区别，但这就是区别。

这里需要注意的重要一点是，每个函数的返回都作为参数传递给下一个函数，这就是为什么我们在组合中需要**一元函数**，尽管第一个函数可以有多个参数。

现在，我们如何利用**的功能组合**和**的巧妙组合**来制作出一些很酷的东西呢？我制作了一个小例子来展示我们如何使用这些概念从 URL 中提取参数:

现在，所有这些都可以用一个函数来执行，但是这个函数可以为一个单独的任务定制。

当我们将大任务分解成小任务时，我们可以寻找的是小功能的可重用性，比如这里重用的 **split** 。同样，如果我们将其他函数更一般化，我们也可以在代码的其他部分重用它们。

## 状态管理

大多数逻辑可以使用纯函数编写，但是逻辑必须在某个点应用于状态，减少这些突变点极大地帮助我们找出代码中的小错误。

有趣的是，我们可以用这里的函数来更新状态。功能和功能无处不在！:D

这里的想法是使状态不可直接访问，并使用函数来访问或更新它。大概是这样的:

为了简单起见，我在这个例子中做了简单的复制，但是你已经得到了它的要点。我希望这能给你一个函数式编程的基本概念。

*享受函数带来的乐趣！*
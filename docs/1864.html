<html>
<head>
<title>Understanding JavaScript Automatic Semicolon Insertion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解JavaScript自动分号插入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-javascript-automatic-semicolon-insertion-6b13dc6c4822?source=collection_archive---------7-----------------------#2020-04-29">https://javascript.plainenglish.io/understanding-javascript-automatic-semicolon-insertion-6b13dc6c4822?source=collection_archive---------7-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="75e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如果您决定避免使用分号，请小心</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b424bcba20ddd192d8c6cd0e1e1026f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LeYBjLHr6kmYIoSx-aHdDA.png"/></div></div></figure><p id="bc39" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在javascript中，分号的使用是可选的，在我们省略分号的情况下，JavaScript使用自动分号插入(ASI)并假定一个“；”在你的JS代码的某些地方，即使你没有在那里写。</p><p id="e836" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">JavaScript这样做是因为如果我们省略了一个必需的“；”我们的程序会失败，但有时这个javascript行为会做一些不必要的事情。</p><p id="664f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">操作很简单:当JS解析器发现一行需要一个“；”它被省略了，它插入了一个。ASI只能在有换行符的情况下工作。分号不在一行的中间。</p><p id="275b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个例子，分号应该终止这些变量:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="1f47" class="ls lt iq lo b gy lu lv l lw lx">let counter = 100<br/>let ciunter2 = 0</span></pre><p id="bd98" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由我们插入:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="331e" class="ls lt iq lo b gy lu lv l lw lx">let counter = 100;<br/>let ciunter2 = 0;</span></pre><p id="df64" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这种情况下，语法要求我们用“；”写“counter”在“做”之后的结尾..虽然”，但我们大多数人都忘记了这一点，这是ASI非常有用的一个例子:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="43f0" class="ls lt iq lo b gy lu lv l lw lx">let counter= 100;</span><span id="cb95" class="ls lt iq lo b gy ly lv l lw lx">do {<br/>   //do some stuff<br/>  counter++;<br/>}<br/>while (counter)//-&gt; ";" expected here</span></pre><p id="f515" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，语句块不需要末尾的分号，所以ASI不做任何事情。</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="3cc0" class="ls lt iq lo b gy lu lv l lw lx">let counter = 100;</span><span id="1197" class="ls lt iq lo b gy ly lv l lw lx">while (counter){</span><span id="0486" class="ls lt iq lo b gy ly lv l lw lx">//do some stuff</span><span id="cb67" class="ls lt iq lo b gy ly lv l lw lx">}// ";" No required here.</span></pre><p id="aecc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，在有些情况下，这个特性会改变代码的预期行为，而抛出语法错误会更好。ASI引起的最典型的问题是return、break和continue关键字:</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="c738" class="ls lt iq lo b gy lu lv l lw lx">function foo(value){<br/> if(value) return<br/> console.log(value);<br/>}<br/>foo(100); //undefined.</span><span id="bebb" class="ls lt iq lo b gy ly lv l lw lx">function foo(value){<br/> if(value)<br/>  return  console.log(value);<br/>}<br/>foo(100) //100</span></pre><p id="b934" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ASI的常见问题是从函数中返回“undefined”或者创建全局变量，所以如果你使用这个特性，了解语法规则以及自动插入是如何运行的是很重要的。</p><h2 id="ad10" class="ls lt iq bd lz ma mb dn mc md me dp mf la mg mh mi le mj mk ml li mm mn mo mp bi translated">结论</h2><p id="0742" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">我不喜欢依赖ASI，但这是我个人的偏好。如果ASI失败，并且您缺少分号，代码将失败，但是另一方面，分号是可以避免的干扰。</p><p id="a09a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我的例子中，我更喜欢写分号，因为你可以理解其他任何人的代码，因为它遵循相同的规则和他写代码时的意图，如果将来ASI的操作发生变化，我的代码仍然可以工作。</p><p id="e8ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不要忘记，如果您不想使用这个特性，避免它的唯一方法是确保分号被输入到正确的位置。</p></div></div>    
</body>
</html>
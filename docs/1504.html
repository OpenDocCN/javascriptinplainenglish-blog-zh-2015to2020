<html>
<head>
<title>Make your own Terminal (CLI tool) with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript制作自己的终端(CLI工具)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-your-own-terminal-cli-tool-with-javascript-c708ea395c0b?source=collection_archive---------1-----------------------#2020-03-25">https://javascript.plainenglish.io/make-your-own-terminal-cli-tool-with-javascript-c708ea395c0b?source=collection_archive---------1-----------------------#2020-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7a8b4088fbfd818df6b8c6a33b114c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*XAWq5tjLuOb7p6geGaakwA.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Advanced version CLI</figcaption></figure><figure class="jy jz ka kb gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/1c5959a95c42852c99a2845ad0d72cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*cm4hhlfBO0p4y4EePAqgiA.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Simple CLI from the scratch</figcaption></figure><h2 id="6a42" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">您可以每天使用CLI程序(如终端、cmd、Powershell等)进行软件开发。</h2><h2 id="ca56" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">您使用的每一个工具本质上都是其他软件工程师的产品，我们也可以制作自己的CLI工具</h2><blockquote class="ky"><p id="5eee" class="kz la iq bd lb lc ld le lf lg lh li dk translated">我们自己做CLI工具吧~~</p></blockquote><figure class="lk ll lm ln lo jr gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/4daa05adde074bc7e5a91feb07bad77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*adPmkDUTs5nhs1ol"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Photo by <a class="ae lt" href="https://unsplash.com/@greysonjoralemon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Greyson Joralemon</a> on <a class="ae lt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="ky"><p id="0016" class="kz la iq bd lb lc lu lv lw lx ly li dk translated">让我们把手弄脏吧</p></blockquote><h1 id="c1a3" class="lz kd iq bd ke ma mb mc kh md me mf kk mg mh mi ko mj mk ml ks mm mn mo kw mp bi translated">&gt;首先，让我们制作一个打印“HelloWord”的简单CLI工具</h1><ul class=""><li id="a16e" class="mq mr iq ms b mt mu mv mw kl mx kp my kt mz li na nb nc nd bi translated">要创建CLI，您需要创建两个文件</li><li id="aa43" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">package.json</code>:指定设置和配置作为入口点</li><li id="528d" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">index.js</code>:根据CLI命令的可执行文件</li></ul><h2 id="c448" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Package.json</h2><p id="bf37" class="pw-post-body-paragraph nn no iq ms b mt mu np nq mv mw nr ns kl nt nu nv kp nw nx ny kt nz oa ob li ij bi translated"><em class="oc">配置文件</em></p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="f2ee" class="kc kd iq nm b gy oh oi l oj ok">// package.json</span><span id="fe7e" class="kc kd iq nm b gy ol oi l oj ok">{</span><span id="f0f2" class="kc kd iq nm b gy ol oi l oj ok">  "name": "node-cli",</span><span id="dec7" class="kc kd iq nm b gy ol oi l oj ok">  "version": "0.0.1",</span><span id="e353" class="kc kd iq nm b gy ol oi l oj ok">  "description": "nodejs cli program",</span><span id="ffaf" class="kc kd iq nm b gy ol oi l oj ok">  "main": "index.js",</span><span id="4630" class="kc kd iq nm b gy ol oi l oj ok">  "scripts": {</span><span id="9e74" class="kc kd iq nm b gy ol oi l oj ok">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span id="0a1e" class="kc kd iq nm b gy ol oi l oj ok">  },</span><span id="96c6" class="kc kd iq nm b gy ol oi l oj ok">  "author": "GPLEE",</span><span id="add5" class="kc kd iq nm b gy ol oi l oj ok">  "license": "ISC"</span><span id="2ad9" class="kc kd iq nm b gy ol oi l oj ok">  }</span></pre><ul class=""><li id="6a38" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">在package.json中，指定有关当前CLI程序的元数据</li><li id="137f" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">name</code>、<code class="fe nj nk nl nm b">version</code>、<code class="fe nj nk nl nm b">description</code>、<code class="fe nj nk nl nm b">author</code>等等</li></ul></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h2 id="3407" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">索引. js</h2><p id="fa45" class="pw-post-body-paragraph nn no iq ms b mt mu np nq mv mw nr ns kl nt nu nv kp nw nx ny kt nz oa ob li ij bi translated"><em class="oc">可执行文件</em></p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="5b93" class="kc kd iq nm b gy oh oi l oj ok">// index.js</span><span id="f164" class="kc kd iq nm b gy ol oi l oj ok">#! /usr/bin/env node</span><span id="298c" class="kc kd iq nm b gy ol oi l oj ok">console.log('Hello CLI');</span></pre><ul class=""><li id="bdc7" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">这个文件只是在控制台上打印出<strong class="ms ir"> Hello CLI </strong></li></ul><blockquote class="ky"><p id="4a41" class="kz la iq bd lb lc lu lv lw lx ly li dk translated">那么，评论的第一行是什么？？</p></blockquote><ul class=""><li id="3ed3" class="mq mr iq ms b mt oy mv oz kl pa kp pb kt pc li na nb nc nd bi translated">在基于Linux和Unix的操作系统中，T6不仅仅是一个注释</li><li id="4a0d" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">它使用<code class="fe nj nk nl nm b">/usr/bin/env</code>中注册的<strong class="ms ir">节点</strong>命令命令文件运行</li><li id="7dea" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">然而，在<strong class="ms ir">窗口</strong>中，它只是一个注释</li></ul></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h2 id="7eae" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">Package.json</h2><p id="f372" class="pw-post-body-paragraph nn no iq ms b mt mu np nq mv mw nr ns kl nt nu nv kp nw nx ny kt nz oa ob li ij bi translated"><em class="oc">我们添加</em><strong class="ms ir"><em class="oc">【bin】</em></strong><em class="oc">属性来实际运行</em><strong class="ms ir"><em class="oc">index . js</em></strong><em class="oc">文件</em></p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="69dd" class="kc kd iq nm b gy oh oi l oj ok">// package.json</span><span id="c2ff" class="kc kd iq nm b gy ol oi l oj ok">{</span><span id="b40c" class="kc kd iq nm b gy ol oi l oj ok">  "name": "node-cli",</span><span id="23e3" class="kc kd iq nm b gy ol oi l oj ok">  "version": "0.0.1",</span><span id="4d1b" class="kc kd iq nm b gy ol oi l oj ok">  ...</span><span id="d459" class="kc kd iq nm b gy ol oi l oj ok">  ...</span><span id="2ab1" class="kc kd iq nm b gy ol oi l oj ok">  "license": "ISC",</span><span id="5dd1" class="kc kd iq nm b gy ol oi l oj ok">// HERE</span><span id="7397" class="kc kd iq nm b gy ol oi l oj ok">  "bin": {</span><span id="f96e" class="kc kd iq nm b gy ol oi l oj ok">    "cli": "./index.js" // FILE NAME &amp; RELATIVE PATH</span><span id="9344" class="kc kd iq nm b gy ol oi l oj ok">  }</span><span id="a91e" class="kc kd iq nm b gy ol oi l oj ok">}</span></pre><ul class=""><li id="8717" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated"><code class="fe nj nk nl nm b">bin</code>属性有可执行文件</li><li id="d8be" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">这类似于键和值对</li><li id="8835" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">cli</code>命令指示运行<code class="fe nj nk nl nm b">index.js</code>文件</li></ul></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h2 id="9a8c" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">运行CLI</h2><p id="c7ed" class="pw-post-body-paragraph nn no iq ms b mt mu np nq mv mw nr ns kl nt nu nv kp nw nx ny kt nz oa ob li ij bi translated"><em class="oc">最后，让我们运行CLI在控制台</em>上打印<strong class="ms ir"><em class="oc">Hello CLI</em></strong><em class="oc"/></p><ul class=""><li id="efbc" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">通过运行<code class="fe nj nk nl nm b">npm i -g</code>安装package.json中的配置</li><li id="852d" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">我们添加了一个名为<strong class="ms ir"> node-cli </strong>的包，版本为<strong class="ms ir"> 0.0.1 </strong></li></ul><p id="e132" class="pw-post-body-paragraph nn no iq ms b mt om np nq mv on nr ns kl pd nu nv kp pe nx ny kt pf oa ob li ij bi translated"><em class="oc">(您在package.json中配置的那个)</em></p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="02df" class="kc kd iq nm b gy oh oi l oj ok">// package.json</span><span id="001f" class="kc kd iq nm b gy ol oi l oj ok">"name": "node-cli",</span><span id="a7c5" class="kc kd iq nm b gy ol oi l oj ok">"version": "0.0.1",</span></pre><p id="78da" class="pw-post-body-paragraph nn no iq ms b mt om np nq mv on nr ns kl pd nu nv kp pe nx ny kt pf oa ob li ij bi">—</p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="226e" class="kc kd iq nm b gy oh oi l oj ok">// Terminal console</span><span id="45ed" class="kc kd iq nm b gy ol oi l oj ok">$ npm i -g<br/>+ node-cli@0.0.1<br/>added 1 package from 1 contributor in 0.077s</span></pre><ul class=""><li id="23eb" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated"><strong class="ms ir">仅供参考，</strong>下次在控制台上运行<code class="fe nj nk nl nm b">npm i -g</code></li></ul><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="7a2d" class="kc kd iq nm b gy oh oi l oj ok">// Terminal console</span><span id="ba4f" class="kc kd iq nm b gy ol oi l oj ok">$ npm i - g</span><span id="99d4" class="kc kd iq nm b gy ol oi l oj ok">+ node-cli@0.0.1<br/>updated 1 package in 0.085s</span></pre><ul class=""><li id="fb94" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">您得到的是<code class="fe nj nk nl nm b">updated 1 package …</code>响应，而不是<code class="fe nj nk nl nm b">added 1 package ...</code>结果</li><li id="9fe9" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><strong class="ms ir">然后</strong>运行<code class="fe nj nk nl nm b">cli</code>命令</li></ul><p id="dbfc" class="pw-post-body-paragraph nn no iq ms b mt om np nq mv on nr ns kl pd nu nv kp pe nx ny kt pf oa ob li ij bi translated"><em class="oc">最后</em> <strong class="ms ir"> <em class="oc">你好CLI！！</em> </strong></p><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="adee" class="kc kd iq nm b gy oh oi l oj ok">// Terminal console</span><span id="dec2" class="kc kd iq nm b gy ol oi l oj ok">$ cli<br/>Hello CLI</span></pre><ul class=""><li id="d12c" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">在Mac、Linux环境下可能需要追加<code class="fe nj nk nl nm b">sudo</code>命令(即<code class="fe nj nk nl nm b">sudo cli</code></li><li id="13e5" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">没有<code class="fe nj nk nl nm b">node_modules</code>文件夹，因为您没有安装依赖项</li></ul></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h2 id="f2c8" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">CLI中的Process.argv</h2><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="edc2" class="kc kd iq nm b gy oh oi l oj ok">// index.js</span><span id="4301" class="kc kd iq nm b gy ol oi l oj ok">#! /usr/bin/env node</span><span id="5ae7" class="kc kd iq nm b gy ol oi l oj ok">console.log('Hello CLI', process.argv);</span></pre><ul class=""><li id="8515" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">您可以使用<code class="fe nj nk nl nm b">process.argv</code>在命令中找到选项</li><li id="9bff" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">选项以数组的形式呈现</li><li id="6bc5" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">每次<code class="fe nj nk nl nm b">index.js</code>代码更新时<strong class="ms ir">不</strong>需要再次运行<code class="fe nj nk nl nm b">npm i -g</code>，因为你已经将<code class="fe nj nk nl nm b">package.json</code>的<code class="fe nj nk nl nm b">bin</code>属性连接到<code class="fe nj nk nl nm b">cli</code>命令&amp; <code class="fe nj nk nl nm b">index.js</code>文件。因此，每次调用<code class="fe nj nk nl nm b">cli</code>命令时，都可以执行<code class="fe nj nk nl nm b">index.js</code>文件(它不是来自缓存，因此您可以运行新的更新内容)</li></ul><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="4e9f" class="kc kd iq nm b gy oh oi l oj ok">// Terminal console</span><span id="1ac1" class="kc kd iq nm b gy ol oi l oj ok">$ cli one two three four</span><span id="1119" class="kc kd iq nm b gy ol oi l oj ok">Hello CLI [ '/usr/local/Cellar/node/11.6.0/bin/node',<br/>  '/usr/local/bin/cli',<br/>  'one',<br/>  'two',<br/>  'three',<br/>  'four' ]</span></pre><ul class=""><li id="09d0" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">数组中的<strong class="ms ir">前两个元素</strong>是<code class="fe nj nk nl nm b">node</code>和<code class="fe nj nk nl nm b">cli</code>命令的路径。(可能会因windows操作系统而异)输出可能会因您的计算机设置&amp;环境而异(这取决于<strong class="ms ir">您在计算机中安装<strong class="ms ir">节点</strong>和<strong class="ms ir"> cli </strong>命令的位置)</strong></li><li id="10a1" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">另外，<code class="fe nj nk nl nm b">one two three four</code>是作为数组类型出现的</li></ul><figure class="jy jz ka kb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pg"><img src="../Images/7ae7cf566eedb78c147ec6621f36728b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mAEnXNIkhjdSxy8N"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Photo by <a class="ae lt" href="https://unsplash.com/@belart84?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Artem Beliaikin</a> on <a class="ae lt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="573f" class="lz kd iq bd ke ma ph mc kh md pi mf kk mg pj mi ko mj pk ml ks mm pl mo kw mp bi translated">&gt;第二，通过“用户输入”与用户交互的简单CLI工具</h1><ul class=""><li id="efde" class="mq mr iq ms b mt mu mv mw kl mx kp my kt mz li na nb nc nd bi translated">您将使用名为<strong class="ms ir"> readline </strong>的本地节点模块从用户处获取输入</li></ul><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="8ac6" class="kc kd iq nm b gy oh oi l oj ok">// index.js</span><span id="0fbf" class="kc kd iq nm b gy ol oi l oj ok">#! /usr/bin/env node</span><span id="59a7" class="kc kd iq nm b gy ol oi l oj ok">const readline = require('readline');</span><span id="c7be" class="kc kd iq nm b gy ol oi l oj ok"><br/>const rl = readline.createInterface({</span><span id="777d" class="kc kd iq nm b gy ol oi l oj ok">  input: process.stdin,</span><span id="05fc" class="kc kd iq nm b gy ol oi l oj ok">  output: process.stdout,</span><span id="157e" class="kc kd iq nm b gy ol oi l oj ok">});</span><span id="b877" class="kc kd iq nm b gy ol oi l oj ok">rl.question("How are you doing today? (Happy, Sad)", (answer) =&gt; {</span><span id="c191" class="kc kd iq nm b gy ol oi l oj ok">  if(answer === "Happy" || answer === "happy") {</span><span id="2192" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Glad to hear that");</span><span id="d833" class="kc kd iq nm b gy ol oi l oj ok">  } else if (answer === "Sad" || answer === "sad") {</span><span id="27dc" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Hope you feel better tomorrow")</span><span id="b81c" class="kc kd iq nm b gy ol oi l oj ok">  } else {</span><span id="c098" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Are you Happy or Sad ?");</span><span id="1485" class="kc kd iq nm b gy ol oi l oj ok">  }</span><span id="d70c" class="kc kd iq nm b gy ol oi l oj ok">rl.close();</span><span id="6153" class="kc kd iq nm b gy ol oi l oj ok">});</span></pre><ul class=""><li id="1f91" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">您使用来自<code class="fe nj nk nl nm b">readline</code>模块的<code class="fe nj nk nl nm b">createInterface</code>方法创建<code class="fe nj nk nl nm b">rl</code>对象</li><li id="5756" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">process.stdin</code> &amp; <code class="fe nj nk nl nm b">process.stdout</code>是控制台输入&amp;输出的流</li><li id="34ad" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">readline</code>模块接受用户输入并输出以下结果</li><li id="d90c" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated"><code class="fe nj nk nl nm b">rl</code>对象<code class="fe nj nk nl nm b">question</code>方法是向用户提一个问题</li><li id="240e" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">回调函数有一个<code class="fe nj nk nl nm b">answer</code>参数(用户输入)</li><li id="01f3" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">如果所有I / O(输入&amp;输出)完成，关闭<code class="fe nj nk nl nm b">rl</code>对象</li></ul><blockquote class="ky"><p id="74ae" class="kz la iq bd lb lc lu lv lw lx ly li dk translated">在这种情况下，我们是否可以通过再次询问用户是否既没有回答“<strong class="ak">快乐”</strong>也没有回答“<strong class="ak">悲伤”</strong>来改进这个CLI？</p></blockquote><figure class="lk ll lm ln lo jr gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi pm"><img src="../Images/b59b2ae8cb551cec8ac976d20c0a1ba0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8h9YmGrRxUGScjTp"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Photo by <a class="ae lt" href="https://unsplash.com/@bel2000a?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Belinda Fewings</a> on <a class="ae lt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="b5e3" class="lz kd iq bd ke ma ph mc kh md pi mf kk mg pj mi ko mj pk ml ks mm pl mo kw mp bi translated">&gt;第三，再次询问用户是否回答错误</h1><pre class="jy jz ka kb gt od nm oe of aw og bi"><span id="1d6a" class="kc kd iq nm b gy oh oi l oj ok">#! /usr/bin/env node</span><span id="16a3" class="kc kd iq nm b gy ol oi l oj ok">const readline = require('readline');</span><span id="8c84" class="kc kd iq nm b gy ol oi l oj ok">const rl = readline.createInterface({</span><span id="303a" class="kc kd iq nm b gy ol oi l oj ok">input: process.stdin,</span><span id="2716" class="kc kd iq nm b gy ol oi l oj ok">output: process.stdout,</span><span id="5fb2" class="kc kd iq nm b gy ol oi l oj ok">});</span><span id="ee58" class="kc kd iq nm b gy ol oi l oj ok">console.clear();</span><span id="5312" class="kc kd iq nm b gy ol oi l oj ok">const answerCallback = (answer) =&gt; {</span><span id="2f6c" class="kc kd iq nm b gy ol oi l oj ok">  if(answer === "Happy" || answer === "happy") {</span><span id="59b8" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Glad to hear that");</span><span id="06b7" class="kc kd iq nm b gy ol oi l oj ok">    rl.close();</span><span id="5af5" class="kc kd iq nm b gy ol oi l oj ok">  } else if (answer === "Sad" || answer === "sad") {</span><span id="79d1" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Hope you feel better tomorrow");</span><span id="3d79" class="kc kd iq nm b gy ol oi l oj ok">    rl.close();</span><span id="6015" class="kc kd iq nm b gy ol oi l oj ok">  } else {</span><span id="5241" class="kc kd iq nm b gy ol oi l oj ok">    console.log("Are you Happy or Sad ?");</span><span id="8d41" class="kc kd iq nm b gy ol oi l oj ok">    rl.question("How are you doing today (Happy, Sad)?  ",     <br/>    answerCallback);</span><span id="c18c" class="kc kd iq nm b gy ol oi l oj ok">  }</span><span id="7e74" class="kc kd iq nm b gy ol oi l oj ok">}</span><span id="4c74" class="kc kd iq nm b gy ol oi l oj ok">rl.question("How are you doing today (Happy, Sad)?  ", answerCallback);</span></pre><ul class=""><li id="208f" class="mq mr iq ms b mt om mv on kl oo kp op kt oq li na nb nc nd bi translated">使用<code class="fe nj nk nl nm b">console.clear</code>在程序启动时清除控制台</li><li id="d297" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">然后使用<code class="fe nj nk nl nm b">rl.question</code>方法询问用户输入&amp;使用<code class="fe nj nk nl nm b">answerCallback</code>功能得到答案</li><li id="bb12" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">如果答案既不是<code class="fe nj nk nl nm b">Sad</code>也不是<code class="fe nj nk nl nm b">Happy</code>，则清除控制台并再次递归提问</li><li id="57de" class="mq mr iq ms b mt ne mv nf kl ng kp nh kt ni li na nb nc nd bi translated">如果答案是<code class="fe nj nk nl nm b">Sad</code>或<code class="fe nj nk nl nm b">Happy</code>，关闭输入控制台</li></ul></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><blockquote class="ky"><p id="6c20" class="kz la iq bd lb lc ld le lf lg lh li dk translated">在这篇文章中，我们练习如何制作一个简单的CLI工具，要求用户输入。希望你喜欢阅读它</p></blockquote><p id="a5bb" class="pw-post-body-paragraph nn no iq ms b mt oy np nq mv oz nr ns kl pn nu nv kp po nx ny kt pp oa ob li ij bi translated"><a class="ae lt" href="http://www.softxml.com/3012/CLI-program-from-scratch" rel="noopener ugc nofollow" target="_blank"> <strong class="ms ir">更高级的&amp;实用示例可从博客</strong> </a>中获得</p><figure class="jy jz ka kb gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7a8b4088fbfd818df6b8c6a33b114c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*XAWq5tjLuOb7p6geGaakwA.gif"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk">Advanced version CLI</figcaption></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Test-Driven Development (TDD) in React Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React第1部分中的测试驱动开发(TDD)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/test-driven-development-tdd-in-react-part-1-edb4270761aa?source=collection_archive---------1-----------------------#2019-09-12">https://javascript.plainenglish.io/test-driven-development-tdd-in-react-part-1-edb4270761aa?source=collection_archive---------1-----------------------#2019-09-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3998" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这篇文章解释了如何用Jest和Enzyme快速设置React TDD应用程序。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5b8f9876daeeafd5ecd5d25dbf718a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xocbnHDpq_stzsr4S1R64g.jpeg"/></div></div></figure><h1 id="ffe9" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">在我们开始真正的交易之前，了解以下内容是很重要的</h1><p id="9333" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">-什么是测试驱动开发？</p><p id="49c8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-为什么我必须进行测试驱动开发(TDD)？</p><p id="1269" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-我们有哪些TDD工具，哪一个最适合React项目？</p><p id="c6ef" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">什么是测试驱动开发？</p><p id="116c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">测试驱动开发(TDD)是一个软件开发过程，它依赖于一个非常短的开发周期的重复:需求被转化为非常具体的测试用例，然后软件被改进以便通过测试。<a class="ae mk" href="https://en.wikipedia.org/wiki/Test-driven_development" rel="noopener ugc nofollow" target="_blank">维基百科</a></p><p id="de4f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">测试类型</strong></p><p id="514c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-单元测试:在单元测试中，我们测试以确保组件在给定输入时产生预期的输出。</p><p id="b07f" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-集成测试:在这里，在给定的时间，将单个的测试单元作为一个组进行组合和测试。</p><p id="ff58" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-性能测试:在性能测试中，我们测试系统的速度。</p><p id="3c80" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-可用性测试:在这里，我们从客户的角度测试产品，测试产品的易用性。</p><p id="54f6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">-验收测试:验收测试用于测试产品是否满足客户的要求。</p><p id="251d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">回归测试:回归测试测试以确保修改是否正常工作，或者某些功能是否由于修改而中断。</p><p id="97f7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">为什么我必须进行测试驱动开发(TDD)？</p><p id="2e07" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">TDD有助于减少开发人员交付给产品的bug数量。因为您首先编写测试，然后在确定代码行为符合预期之前编写通过测试的代码，所以很容易根据预期行为找出错误代码。</p><p id="02d2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">我们有哪些TDD工具，哪种最适合React项目？</strong></p><p id="d467" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir"> JavaScript测试工具</strong></p><p id="38cd" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">1.玩笑</p><p id="74ec" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">2.酶</p><p id="e7d6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">3.茉莉</p><p id="8c2c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">4.摩卡</p><p id="fbf8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我选择Jest和Enzyme作为我的React应用程序，因为它们易于集成，并且React支持Jest开箱即用。</p><p id="c786" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">什么是好的测试</strong></p><p id="3433" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">1.每个测试都应该独立于其他测试</p><p id="8631" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">2.任何行为都应该只在一个测试中指定</p><p id="181c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">3.没有不必要的断言。意思是不要测试你不需要测试的东西</p><p id="787d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">4.一次只测试一个代码单元</p><p id="6079" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">5.避免不必要的先决条件</p><blockquote class="ml mm mn"><p id="8401" class="lj lk mo ll b lm mf jr lo lp mg ju lr mp mh lu lv mq mi ly lz mr mj mc md me ij bi translated">现在我们知道了关于测试驱动开发(TDD)的<strong class="ll ir">什么</strong>和<strong class="ll ir">为什么</strong>，所以让我们做<strong class="ll ir">如何</strong></p></blockquote><p id="2664" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">注意:为了简单起见，我将为我的项目使用create-react-app和yarn来安装包。我假设你已经在你的电脑上安装了create-react-app，如果没有的话，请先安装create-react-app。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e2ad" class="mx ks iq mt b gy my mz l na nb">npm install -g create-react-app</span></pre><p id="0c88" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第一步:</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="d097" class="mx ks iq mt b gy my mz l na nb">create-react-app tdd-setup</span></pre><p id="7fa3" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">步骤2:(安装所需的依赖项)</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="fe09" class="mx ks iq mt b gy my mz l na nb">yarn add enzyme enzyme-adapter-react-16 enzyme-to-json</span></pre><p id="45e4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">或者</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="4afb" class="mx ks iq mt b gy my mz l na nb">npm install enzyme enzyme-adapter-react-16 enzyme-to-json</span></pre><p id="b8d0" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第三步</p><p id="b1db" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">添加到您的<strong class="ll ir"> package.json </strong>文件中的依赖项列表</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="bb0d" class="mx ks iq mt b gy my mz l na nb">"@babel/core": "^7.4.5",</span><span id="3746" class="mx ks iq mt b gy nc mz l na nb">"@babel/plugin-proposal-class-properties": "^7.4.4",</span><span id="df6a" class="mx ks iq mt b gy nc mz l na nb">"@babel/plugin-proposal-object-rest-spread": "^7.4.4",</span><span id="0b24" class="mx ks iq mt b gy nc mz l na nb">"@babel/preset-env": "^7.4.5",</span><span id="f2b2" class="mx ks iq mt b gy nc mz l na nb">"@babel/preset-react": "^7.0.0",</span><span id="9e4f" class="mx ks iq mt b gy nc mz l na nb">"babel-cli": "^6.26.0"</span></pre><p id="7e32" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">那就跑</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="22e0" class="mx ks iq mt b gy my mz l na nb">npm install or yarn install</span></pre><p id="0172" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第四步</p><p id="5e52" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在你的根目录下创建<strong class="ll ir"> jest.config.json </strong>文件，它的内容应该是这样的</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e860" class="mx ks iq mt b gy my mz l na nb">{</span><span id="40eb" class="mx ks iq mt b gy nc mz l na nb">  "setupFiles": [</span><span id="bd5f" class="mx ks iq mt b gy nc mz l na nb">  "raf/polyfill",</span><span id="5618" class="mx ks iq mt b gy nc mz l na nb">  "&lt;rootDir&gt;/tests/setup.js"</span><span id="a005" class="mx ks iq mt b gy nc mz l na nb">  ],</span><span id="1b52" class="mx ks iq mt b gy nc mz l na nb">  "snapshotSerializers": [</span><span id="d22d" class="mx ks iq mt b gy nc mz l na nb">     "enzyme-to-json/serializer"</span><span id="75f6" class="mx ks iq mt b gy nc mz l na nb">  ],</span><span id="1f43" class="mx ks iq mt b gy nc mz l na nb"> "collectCoverage": true</span><span id="cdb2" class="mx ks iq mt b gy nc mz l na nb">}</span></pre><p id="9d80" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第五步</p><p id="6761" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">创造<strong class="ll ir">。根文件夹中的babelrc </strong>文件，内容应该是这样的</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="82de" class="mx ks iq mt b gy my mz l na nb">{</span><span id="17d1" class="mx ks iq mt b gy nc mz l na nb">  "presets": [</span><span id="4190" class="mx ks iq mt b gy nc mz l na nb">     "@babel/env",</span><span id="b317" class="mx ks iq mt b gy nc mz l na nb">     "@babel/react"</span><span id="bd8b" class="mx ks iq mt b gy nc mz l na nb">  ],</span><span id="efb8" class="mx ks iq mt b gy nc mz l na nb">  "plugins": [</span><span id="1350" class="mx ks iq mt b gy nc mz l na nb">  "@babel/plugin-proposal-class-properties",</span><span id="c916" class="mx ks iq mt b gy nc mz l na nb">  "@babel/plugin-proposal-object-rest-spread"</span><span id="ef76" class="mx ks iq mt b gy nc mz l na nb">  ]</span><span id="943a" class="mx ks iq mt b gy nc mz l na nb">}</span></pre><p id="1cb9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第六步</p><p id="8a15" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在你的根目录下创建一个名为<strong class="ll ir"> tests </strong>的文件夹，并添加<strong class="ll ir"> setup.js (tests/setup.js) </strong>，<strong class="ll ir"> setup.js </strong>的内容应该是这样的</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="408d" class="mx ks iq mt b gy my mz l na nb">import Enzyme from "enzyme";</span><span id="b14c" class="mx ks iq mt b gy nc mz l na nb">import Adapter from "enzyme-adapter-react-16";</span><span id="70a9" class="mx ks iq mt b gy nc mz l na nb">Enzyme.configure({ adapter: new Adapter() });</span></pre><p id="48ad" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第七步</p><p id="fe57" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在您的<strong class="ll ir"> package.json </strong>文件中替换</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="464b" class="mx ks iq mt b gy my mz l na nb">"test": "react-scripts test"</span></pre><p id="537d" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">随着</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="5345" class="mx ks iq mt b gy my mz l na nb">"test": "jest --config=jest.config.json --watch"</span></pre><p id="2de2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第八步</p><p id="14b5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在测试文件夹中创建<strong class="ll ir"> hello.test.js </strong>文件，让内容看起来像这样</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="0737" class="mx ks iq mt b gy my mz l na nb">import React from 'react';</span><span id="3d9b" class="mx ks iq mt b gy nc mz l na nb">const greetme = "Hello!";</span><span id="c8d6" class="mx ks iq mt b gy nc mz l na nb">describe("Our first test!", () =&gt; {</span><span id="f0ec" class="mx ks iq mt b gy nc mz l na nb">   it("Should say hello!", () =&gt; {</span><span id="1f44" class="mx ks iq mt b gy nc mz l na nb">      expect(greetme).toBe("Hello!");</span><span id="c0fc" class="mx ks iq mt b gy nc mz l na nb">   });</span><span id="3760" class="mx ks iq mt b gy nc mz l na nb">});</span></pre><p id="71da" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">第九步</p><p id="bba9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们现在可以运行我们的第一个测试</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="a05f" class="mx ks iq mt b gy my mz l na nb">yarn test</span></pre><p id="adb8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">或者</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="9928" class="mx ks iq mt b gy my mz l na nb">npm test</span></pre><p id="08d8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果一切都是平等的，我们应该在我们的终端看到这一点</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/890428f20cfe40ad9fdb14039099ad2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L1IsUy7tayMiGkyh8VU7uw.png"/></div></div></figure><p id="f8be" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们现在已经到了这一部分的结尾。</p><p id="fa15" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">注意:按照步骤操作后，如果出现错误，您可能需要删除node_modules文件夹并重新安装。</strong></p><blockquote class="ml mm mn"><p id="7d7f" class="lj lk mo ll b lm mf jr lo lp mg ju lr mp mh lu lv mq mi ly lz mr mj mc md me ij bi translated">本系列接下来是<strong class="ll ir">认证</strong>(签到、注册、忘记密码、重置密码)，敬请关注。</p></blockquote><p id="55b2" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>
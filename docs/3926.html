<html>
<head>
<title>Traditional versus Arrow functions in JavaScript Classes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScriptç±»ä¸­çš„ä¼ ç»Ÿå‡½æ•°ä¸ç®­å¤´å‡½æ•°</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/traditional-versus-arrow-functions-in-javascript-classes-35f958b1a492?source=collection_archive---------1-----------------------#2020-11-04">https://javascript.plainenglish.io/traditional-versus-arrow-functions-in-javascript-classes-35f958b1a492?source=collection_archive---------1-----------------------#2020-11-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c8ce" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">æ€ä¹ˆäº†ï¼Ÿå“¦ï¼Œæ²¡ä»€ä¹ˆï¼Œåªæ˜¯åšè¿™åšé‚£ã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/645cb673e5c147a14a8e532b2fc2d39c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*-IeFjTYIltNhNfNW4hE5YA.jpeg"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Source: <a class="ae ko" href="https://programmerhumour.tumblr.com/image/633387776634732544" rel="noopener ugc nofollow" target="_blank">Programmer Humor</a></figcaption></figure></div><div class="ab cl kp kq hr kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ig ih ii ij ik"><p id="cdc9" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">è¿™æ˜¯<a class="ae ko" href="https://suhanwijaya.medium.com/a-method-destructured-from-an-object-loses-its-original-context-21e73cf1451f" rel="noopener">è¿™ç¯‡æ–‡ç« </a>çš„ç²¾ç¥ç»­ç¯‡ã€‚</p><p id="3f1c" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ä½¿ç”¨ä¼ ç»Ÿå‡½æ•°åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è®©æˆ‘ä»¬ç§°è¿™ç§<strong class="ky io">æ–¹æ³•ä¸º</strong>ã€‚</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="8ed1" class="lx ly in lt b gy lz ma l mb mc">// APPROACH A</span><span id="ffee" class="lx ly in lt b gy md ma l mb mc">class SomeClass {<br/>    constructor() {<br/>        this.someProp = 'someValue';<br/>    }</span><span id="7eee" class="lx ly in lt b gy md ma l mb mc">    someMethod() { // Traditional function<br/>        console.log(this.someProp);<br/>    }<br/>}</span></pre><p id="4b0c" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œ<code class="fe me mf mg lt b">this</code>æŒ‡çš„æ˜¯å®ä¾‹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒçš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="17c1" class="lx ly in lt b gy lz ma l mb mc">let instance = new SomeClass();</span><span id="4ed7" class="lx ly in lt b gy md ma l mb mc">instance.someMethod(); // logs 'someValue'</span></pre><p id="1b42" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ä½†æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬å°†æ–¹æ³•èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œå¹¶è°ƒç”¨è¿™ä¸ªå‡½æ•°å˜é‡ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¤±å»äº†å®ƒçš„ä¸Šä¸‹æ–‡ï¼Œä½ å°±å¾—åˆ°äº†<code class="fe me mf mg lt b">Uncaught TypeError: Cannot read property â€˜somePropâ€™ of undefined.</code></p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="36b3" class="lx ly in lt b gy lz ma l mb mc">let instance = new SomeClass();</span><span id="ccde" class="lx ly in lt b gy md ma l mb mc">let funcVariable = instance.someMethod;<br/>funcVariable(); // logs error</span></pre><p id="e46e" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">å¥½çš„ã€‚</p><p id="37d4" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä½¿ç”¨ç®­å¤´å‡½æ•°çš„æ–¹æ³•æ¥åˆ›å»ºè¿™ä¸ªç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è®©æˆ‘ä»¬ç§°ä¹‹ä¸º<strong class="ky io">æ–¹æ³•bã€‚</strong></p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="4174" class="lx ly in lt b gy lz ma l mb mc">// APPROACH B</span><span id="1437" class="lx ly in lt b gy md ma l mb mc">class SomeClass {<br/>    constructor() {<br/>        this.someProp = 'someValue';<br/>    }</span><span id="4e71" class="lx ly in lt b gy md ma l mb mc">    someMethod = () =&gt; { // Arrow function<br/>        console.log(this.someProp);<br/>    }<br/>}</span></pre><p id="5bde" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">è¿™ç°åœ¨èµ·ä½œç”¨äº†ã€‚</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="d692" class="lx ly in lt b gy lz ma l mb mc">let instance = new SomeClass();<br/></span><span id="0f8a" class="lx ly in lt b gy md ma l mb mc">let funcVariable = instance.someMethod;<br/>funcVariable(); // logs 'someValue'</span><span id="10cf" class="lx ly in lt b gy md ma l mb mc"><br/>const { someMethod } = instance; // destructuring also works!<br/>someMethod(); // logs 'someValue'</span></pre><h1 id="38a8" class="mh ly in bd mi mj mk ml mm mn mo mp mq jt mr ju ms jw mt jx mu jz mv ka mw mx bi translated">ä¸ºä»€ä¹ˆï¼ŒJavaScriptï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/5dbba6db845d1fb7d391d8954b0370b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DT47G1odneXeJWZw4lirww.jpeg"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Source: <a class="ae ko" href="https://programmerhumour.tumblr.com/image/633251914676600832" rel="noopener ugc nofollow" target="_blank">Programmer Humor</a></figcaption></figure><p id="4aef" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ ¹æ®<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" rel="noopener ugc nofollow" target="_blank"> MDNæ–‡æ¡£</a>ï¼Œ<em class="nd">â€œ</em><code class="fe me mf mg lt b"><em class="nd">class</em></code><em class="nd">å…³é”®å­—æ˜¯ES2015ä¸­å¼•å…¥çš„ï¼Œä½†åœ¨è¯­æ³•ä¸Šæ˜¯ç³–ï¼ŒJavaScriptä»ç„¶æ˜¯åŸºäºåŸå‹çš„ã€‚â€</em>æ‰€ä»¥å¦‚æœæˆ‘ä»¬ç”¨ES6ä¹‹å‰çš„è¯­æ³•æ¥å†™ï¼Œ<strong class="ky io">æ–¹æ³•å’Œ</strong>çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ã€‚</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="7eb5" class="lx ly in lt b gy lz ma l mb mc">// Equivalent to APPROACH A</span><span id="4d86" class="lx ly in lt b gy md ma l mb mc">'use strict';</span><span id="0e53" class="lx ly in lt b gy md ma l mb mc">var SomeClass = function() {<br/>    this.someProp = 'someValue';<br/>}</span><span id="4c88" class="lx ly in lt b gy md ma l mb mc">SomeClass.prototype.someMethod = function() {<br/>    console.log(this.someProp);<br/>}</span><span id="4472" class="lx ly in lt b gy md ma l mb mc">var instance = new SomeClass();</span></pre><p id="8dee" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">å±æ€§<code class="fe me mf mg lt b">someMethod</code>å®šä¹‰åœ¨æ„é€ å‡½æ•°çš„<code class="fe me mf mg lt b">prototype</code>ä¸Šã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/19f9c1956cd58c35ecd2c00968b6bb89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*dCPPZGSH9Qf_c7RdTFa2Ag.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Chrome Dev Console</figcaption></figure><p id="ba6d" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ä½†ä¸æ˜¯åœ¨<code class="fe me mf mg lt b">instance</code>ä¸Šã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/1d50d5aab969d54442df21312c7333b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*I9XIUW-edxdWn_Y8I-8qRQ.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Chrome Dev Console</figcaption></figure><p id="1f37" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ‚¨å¯ä»¥é€šè¿‡<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" rel="noopener ugc nofollow" target="_blank">åŸå‹ç»§æ‰¿</a>è®¿é—®<code class="fe me mf mg lt b">instance.someMethod</code>ã€‚</p><p id="53be" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io">ä½†æ˜¯å½“ä½ æŠŠ</strong> <code class="fe me mf mg lt b"><strong class="ky io">instance.someMethod</strong></code> <strong class="ky io">èµ‹ç»™å¦ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå‡½æ•°å˜é‡å°±å¤±å»äº†ä¸Šä¸‹æ–‡ã€‚</strong></p><p id="1e2d" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ­¤å¤–ï¼Œç”±äº<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions" rel="noopener ugc nofollow" target="_blank"><em class="nd"/></a><code class="fe me mf mg lt b"><a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions" rel="noopener ugc nofollow" target="_blank"><em class="nd">class</em></a></code><a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Class_body_and_method_definitions" rel="noopener ugc nofollow" target="_blank"><em class="nd">ä¸»ä½“çš„è¯­æ³•è¾¹ç•Œå†…çš„ä»£ç æ€»æ˜¯ä»¥ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œ</em> </a>ï¼Œ<code class="fe me mf mg lt b">this</code>å°†æ˜¯æœªå®šä¹‰çš„ï¼Œè€Œä¸æ˜¯é»˜è®¤ä¸º<code class="fe me mf mg lt b">window</code>æˆ–<code class="fe me mf mg lt b">global</code>ã€‚</p><p id="cda9" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">å¥½çš„ã€‚</p><p id="913c" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ç°åœ¨ï¼Œ<strong class="ky io">æ–¹æ³•B </strong>åœ¨ES6ä¹‹å‰çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="aedf" class="lx ly in lt b gy lz ma l mb mc">// Equivalent to APPROACH B</span><span id="b7d6" class="lx ly in lt b gy md ma l mb mc">'use strict';</span><span id="042e" class="lx ly in lt b gy md ma l mb mc">var SomeClass = function() {<br/>    this.someProp = 'someValue';</span><span id="f0e4" class="lx ly in lt b gy md ma l mb mc">    var _that = this;</span><span id="c6d3" class="lx ly in lt b gy md ma l mb mc">    this.someMethod = function() {<br/>        console.log(_that.someProp);<br/>    }<br/>}</span><span id="944d" class="lx ly in lt b gy md ma l mb mc">var instance = new SomeClass();</span></pre><p id="e164" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">å±æ€§<code class="fe me mf mg lt b">someMethod</code>æ˜¯åœ¨æ„é€ å‡½æ•°çš„<code class="fe me mf mg lt b">prototype</code>ä¸Šå®šä¹‰çš„<em class="nd">è€Œä¸æ˜¯</em>ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/3148c0d6474f9408bad487e0973d6ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*Axs8fo1y575ZiMwsy5P02Q.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Chrome Dev Console</figcaption></figure><p id="92dd" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">è€Œæ˜¯åœ¨<code class="fe me mf mg lt b">instance</code>ä¸Šå®šä¹‰ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nh"><img src="../Images/29abc27604b6bd7a687e896638a457a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUkx782Yo1M1fBe8np9mDg.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Chrome Dev Console</figcaption></figure><p id="74bc" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ­¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒArrowå‡½æ•°<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#Description" rel="noopener ugc nofollow" target="_blank">ç»‘å®šåˆ°å…¶å‘¨å›´çš„è¯æ³•ä¸Šä¸‹æ–‡</a>(å®ƒå®é™…ä¸Šä½äºä»£ç ä¸­)ï¼Œè¿™ä¼¼ä¹ç›¸å½“äºä¼ ç»Ÿå‡½æ•°å¯ä»¥è®¿é—®æŒ‡å‘<code class="fe me mf mg lt b">this</code>çš„å¤–éƒ¨å‡½æ•°å˜é‡(å³<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" rel="noopener ugc nofollow" target="_blank">é—­åŒ…</a>)ã€‚</p><p id="611d" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><strong class="ky io">å› æ­¤ï¼Œå³ä½¿ä½ å°†</strong> <code class="fe me mf mg lt b"><strong class="ky io">instance.someMethod</strong></code> <strong class="ky io">èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œè¯¥å‡½æ•°å˜é‡ä»ç„¶ç»‘å®šåˆ°</strong> <code class="fe me mf mg lt b"><strong class="ky io">instance</strong></code> <strong class="ky io">ä¸Šä¸‹æ–‡ã€‚</strong></p><p id="c9e9" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ³¨æ„:æˆ‘ä¸æ˜¯100%ç¡®å®šç®­å¤´å‡½æ•°æ´¾ç”Ÿå‡º<code class="fe me mf mg lt b">this</code>çš„å®é™…â€œå¹•åâ€æœºåˆ¶ï¼Œæ‰€ä»¥å¦‚æœä½ çŸ¥é“ï¼Œè¯·éšæ„è¯„è®ºã€‚</p><p id="5174" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">æ— è®ºå¦‚ä½•ï¼Œæˆ‘è¿›å…¥äº†è¿™ä¸ªå…”å­æ´ï¼Œå› ä¸ºæˆ‘ä¸€ç›´ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥ç¼–å†™ç»å…¸Reactç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨<code class="fe me mf mg lt b">constructor</code>ä¸­ç»‘å®šä¼ ç»Ÿå‡½æ•°(å³<code class="fe me mf mg lt b">this.someMethod.bind(this)</code>)æˆ–å°†å…¶ä½œä¸ºpropä¼ é€’ã€‚</p><pre class="kd ke kf kg gt ls lt lu lv aw lw bi"><span id="22a3" class="lx ly in lt b gy lz ma l mb mc">import React from 'react';</span><span id="d06b" class="lx ly in lt b gy md ma l mb mc">class SomeComponent extends React.Component {<br/>    constructor(props) {<br/>        super(props);</span><span id="3e43" class="lx ly in lt b gy md ma l mb mc">        this.state = { /* some state */ };<br/>    }</span><span id="987c" class="lx ly in lt b gy md ma l mb mc">    someMethod = () =&gt; { // Arrow function<br/>        // will have access to `this.state`<br/>    }</span><span id="6737" class="lx ly in lt b gy md ma l mb mc">    render() {<br/>        // may attach `this.someMethod` as an event handler or <br/>        // pass it down as a prop to child components<br/>    }<br/>}</span></pre><p id="fd47" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ä¸è®¤å¯ä¸€ç§æˆ–å¦ä¸€ç§æ–¹æ³•ï¼Œåªæ˜¯æè¿°ä¸åŒä¹‹å¤„ã€‚å“¦ï¼ŒçŒœçŒœ<a class="ae ko" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Browser_compatibility" rel="noopener ugc nofollow" target="_blank">å“ªä¸ªæµè§ˆå™¨</a>ä¸æ•´ä¸ªè®¨è®ºå®Œå…¨æ— å…³ã€‚</p><p id="96c1" class="pw-post-body-paragraph kw kx in ky b kz la jo lb lc ld jr le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">ğŸ“«<em class="nd">ç‚¹å‡»</em><a class="ae ko" href="https://www.linkedin.com/in/suhanwijaya/" rel="noopener ugc nofollow" target="_blank">T5ã€‘é¢†è‹± </a> <em class="nd">æˆ–</em> <a class="ae ko" href="mailto:suhanw@gmail.com" rel="noopener ugc nofollow" target="_blank"> <em class="nd">å‘é‚®ä»¶</em> </a> <em class="nd">ï¼</em></p></div></div>    
</body>
</html>
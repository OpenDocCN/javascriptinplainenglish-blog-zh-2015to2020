<html>
<head>
<title>How to build a Home dashboard in React, Parcel and Alexa</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React、Parcel和Alexa中构建家庭仪表盘</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-home-dashboard-in-react-parcel-and-alexa-41f4eb2ebe5a?source=collection_archive---------0-----------------------#2019-10-06">https://javascript.plainenglish.io/how-to-build-a-home-dashboard-in-react-parcel-and-alexa-41f4eb2ebe5a?source=collection_archive---------0-----------------------#2019-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/efc795384565f79210203bfe442a2fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HwxF0nDuhrv0BGXC7_Tv6w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Current look of my Home Dashboard</figcaption></figure><p id="9aaa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我决定利用内置Alexa的优势，并将它们与React的一些基本知识融合到一个个性化的家庭仪表盘中。</p><p id="4d7c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">自从我有了亚马逊Echo，我就喜欢上了通过询问天气、交通和播放音乐来开始一天工作的能力。我喜欢有一个“家庭仪表板”的想法，它不是关于“开灯”等，而是关于我通常想知道的我的家庭和日常事务。</p><p id="66b3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">结果是一个相当简单的React应用程序，在亚马逊Fire平板电脑的浏览器中运行。其代码可在<a class="ae la" href="https://github.com/lindsayjopson/react-home-dashboard" rel="noopener ugc nofollow" target="_blank"> Github这里</a>获得。</p><h2 id="d341" class="lb lc iq bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated">先决条件:</h2><ul class=""><li id="c642" class="lu lv iq ke b kf lw kj lx kn ly kr lz kv ma kz mb mc md me bi translated">对React的基本了解</li><li id="8cac" class="lu lv iq ke b kf mf kj mg kn mh kr mi kv mj kz mb mc md me bi translated"><a class="ae la" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a>安装完毕</li></ul><h1 id="44aa" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">从哪里开始</h1><p id="a416" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">首先，您需要创建React项目准系统。本质上是三个文件。其中两张我放在了一个<code class="fe ne nf ng nh b"><a class="ae la" href="https://github.com/lindsayjopson/react-home-dashboard/tree/master/src" rel="noopener ugc nofollow" target="_blank">src</a></code>文件夹里。<br/><code class="fe ne nf ng nh b">src/index.html</code><code class="fe ne nf ng nh b">src/index.js</code>&amp;T3】</p><h2 id="b6a8" class="lb lc iq bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated">src/index.html</h2><p id="4d11" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">在你的<code class="fe ne nf ng nh b">src/index.html</code>文件的<code class="fe ne nf ng nh b">body</code>中，放置在下面。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="48f5" class="lb lc iq nh b gy nq nr l ns nt">&lt;div id="root"&gt;&lt;/div&gt;  <br/>&lt;script src="index.js"&gt;&lt;/script&gt;</span></pre><p id="2f9b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这将意味着当执行<code class="fe ne nf ng nh b">index.js</code>文件时，它将把React容器和您列出的所有<code class="fe ne nf ng nh b">/widgets</code>放入<code class="fe ne nf ng nh b">#root</code> div。</p><h2 id="9a94" class="lb lc iq bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated"><code class="fe ne nf ng nh b">src/index.js</code></h2><p id="751a" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">接下来，您需要添加<code class="fe ne nf ng nh b">index.js</code>文件。这是你的应用程序的“引擎”。这是需要对React有一个基本了解的地方。</p><p id="2df6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您的<code class="fe ne nf ng nh b">src/index.js</code>文件的内容如下:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="f384" class="lb lc iq nh b gy nq nr l ns nt">import * as React from "react";<br/>import { render } from "react-dom";</span><span id="274f" class="lb lc iq nh b gy nu nr l ns nt">const App = () =&gt; (<br/>  &lt;&gt;<br/>   My Home Dashboard<br/>  &lt;/&gt;<br/>);</span><span id="30e2" class="lb lc iq nh b gy nu nr l ns nt">render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="a35a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要逐行运行该代码:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="2ed1" class="lb lc iq nh b gy nq nr l ns nt">import * as React from "react";<br/>import { render } from "react-dom";</span></pre><p id="387c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是拉入<code class="fe ne nf ng nh b">react</code>库&amp; <code class="fe ne nf ng nh b">react-dom</code>以使您的应用程序能够<code class="fe ne nf ng nh b">render(&lt;App/&gt;, document.getElementById("root"));</code></p><p id="ca35" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下一个关键部分是:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="b454" class="lb lc iq nh b gy nq nr l ns nt">const App = () =&gt; (<br/>  &lt;&gt;<br/>   My Home Dashboard<br/>  &lt;/&gt;<br/>);</span></pre><p id="fc99" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这个阶段，在两个<code class="fe ne nf ng nh b">&lt;&gt; &amp; &lt;/&gt;</code>之间添加的所有内容都将在执行<code class="fe ne nf ng nh b">npm start</code>后呈现在浏览器中</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/84c1183207085c86960fc55ad8e45f4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8V26bUrS1l_vUigm_34Qw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Currently shown in browser</figcaption></figure><h2 id="7d37" class="lb lc iq bd ld le lf dn lg lh li dp lj kn lk ll lm kr ln lo lp kv lq lr ls lt bi translated">package.json</h2><p id="2651" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">这就是“奇迹”发生的地方。这是React和<a class="ae la" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank">包裹</a>都被拉入游戏并放置节点<code class="fe ne nf ng nh b">scripts</code>的地方:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="902a" class="lb lc iq nh b gy nq nr l ns nt">{<br/>  "name": "dhome",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "parcel ./src/index.html"<br/>  }<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "parcel-bundler": "^ 1.12.3",<br/>    "react": "^ 16.9.0",<br/>    "react-dom": "^ 16.9.0"<br/>  }<br/>  "devDependencies": {<br/>    "parcel-bundler": "^ 1.12.3"<br/>  }<br/>}</span></pre><p id="e3c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">将它放入目录的<code class="fe ne nf ng nh b">root</code>后，执行<code class="fe ne nf ng nh b">npm install</code> &amp; <code class="fe ne nf ng nh b">npm start</code>。这将下载并安装<code class="fe ne nf ng nh b">parcel-bundler, react &amp; react-dom</code>并通过<code class="fe ne nf ng nh b">npm start</code>运行<code class="fe ne nf ng nh b">parcel</code>启动脚本，这将创建一个本地开发服务器。编译您的<code class="fe ne nf ng nh b">src/index.js</code>，并通过<code class="fe ne nf ng nh b">localhost:1234</code>访问您的<code class="fe ne nf ng nh b">/src/index.html</code></p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><h1 id="d778" class="mk lc iq bd ld ml od mn lg mo oe mq lj mr of mt lm mu og mw lp mx oh mz ls na bi translated">构建小部件</h1><p id="40db" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">我决定在我的仪表板上使用一个“widget”系统。你没有理由不直接把这些放到你的<code class="fe ne nf ng nh b">index.js</code>文件中，但是为了可扩展性和允许将来在不同的东西之间切换。</p><p id="c090" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我所有的小工具都存储在<code class="fe ne nf ng nh b">/src/widgets</code>下。我制作的第一个小部件是一个“倒计时”小部件。我们的房子通常会发生一些让我们兴奋的事情。此时此刻，我们正在为一年一度的圣诞晚会倒计时！</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/52885affa3c710cd59f41c2b709b2e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*NIxnLwhQp2N4KgwH2R_FvQ.png"/></div></figure><p id="0f49" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，这是一个简单的编码练习。取当前日期，您的活动开始的日期，并显示差异…</p><p id="6ba0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现实中是这样的。首先，创建<code class="fe ne nf ng nh b">/src/widgets/countdown/index.js</code></p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="6d40" class="lb lc iq nh b gy nq nr l ns nt">import React from "react";</span><span id="9edb" class="lb lc iq nh b gy nu nr l ns nt">export class CountdownWidget extends React.Component {<br/>    render() {<br/>        return (<br/>             &lt;div className="widget countdown"&gt;<br/>                 &lt;div className="heading"&gt;Christmas Party&lt;/div&gt;<br/>                 &lt;div className="count"&gt;100&lt;/div&gt;<br/>                 &lt;div className="meta"&gt;Days&lt;/div&gt;<br/>             &lt;/div&gt;<br/>        );<br/>    }</span><span id="aaf4" class="lb lc iq nh b gy nu nr l ns nt">}</span></pre><p id="bcee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们需要扩展这个来创建“真正的”倒计时，而不仅仅是<code class="fe ne nf ng nh b">100</code>。</p><p id="a75d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，您需要将这段代码添加到<code class="fe ne nf ng nh b">render()</code>函数的上方。</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="7926" class="lb lc iq nh b gy nq nr l ns nt">constructor(props) {<br/>    super(props);<br/>    const then = new Date(2019, 12, 15);<br/>    const today = new Date();<br/>    const count = Math.abs(Math.round((today - then) / (1000 * 60 * 60 * 24)));</span><span id="adc7" class="lb lc iq nh b gy nu nr l ns nt">this.state = {<br/>        count: count<br/>    };<br/>}</span><span id="7e96" class="lb lc iq nh b gy nu nr l ns nt">componentDidMount() {<br/>    setInterval(() =&gt; {<br/>        const then = new Date(2019, 12, 15);<br/>        const today = new Date();<br/>        const count = Math.abs(Math.round((today - then) / (1000 * 60 * 60 * 24)));<br/>        <br/>        this.setState({<br/>            count: count<br/>        });<br/>    }, 3600000);<br/>}</span><span id="b4cf" class="lb lc iq nh b gy nu nr l ns nt">render() {<br/>...</span></pre><p id="8d8e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该代码块中需要注意的关键事项是:</p><ul class=""><li id="2767" class="lu lv iq ke b kf kg kj kk kn oj kr ok kv ol kz mb mc md me bi translated"><code class="fe ne nf ng nh b">then</code>你正在倒数的日期</li><li id="419a" class="lu lv iq ke b kf mf kj mg kn mh kr mi kv mj kz mb mc md me bi translated"><code class="fe ne nf ng nh b">today</code>今日日期</li><li id="fcb8" class="lu lv iq ke b kf mf kj mg kn mh kr mi kv mj kz mb mc md me bi translated"><code class="fe ne nf ng nh b">this.state</code>这实质上形成了组件状态的“形状”,使我们能够在代码中修改它并在以后查询它。</li><li id="fa40" class="lu lv iq ke b kf mf kj mg kn mh kr mi kv mj kz mb mc md me bi translated"><code class="fe ne nf ng nh b">this.setState</code>这用一个新变量更新组件状态。</li></ul><p id="7edb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我选择在这里使用一个<code class="fe ne nf ng nh b">setInterval</code>,虽然这不是必需的，但这意味着每24小时,<code class="fe ne nf ng nh b">count</code>变量应该更新，而不需要刷新整个仪表板。</p><p id="c966" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在只需用以下代码更新您的<code class="fe ne nf ng nh b">render</code>函数:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="f325" class="lb lc iq nh b gy nq nr l ns nt">&lt;div className="count"&gt;{this.state.count}&lt;/div&gt;</span></pre></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><h1 id="d618" class="mk lc iq bd ld ml od mn lg mo oe mq lj mr of mt lm mu og mw lp mx oh mz ls na bi translated">将倒计时添加到您的仪表板</h1><p id="b054" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">将<code class="fe ne nf ng nh b">CountdownWidget</code>添加到您的仪表板。打开<code class="fe ne nf ng nh b">index.js</code>并添加以下几行:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="756a" class="lb lc iq nh b gy nq nr l ns nt">import * as React from "react";<br/>import { render } from "react-dom";</span><span id="a75e" class="lb lc iq nh b gy nu nr l ns nt">import { CountdownWidget } from "./widgets/countdown";</span></pre><p id="adb9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">并且在<code class="fe ne nf ng nh b">App</code>常量内</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="b68e" class="lb lc iq nh b gy nq nr l ns nt">const App = () =&gt; (<br/>   &lt;CountdownWidget /&gt;<br/>);</span></pre><p id="47cf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，您应该会在浏览器中看到以下内容:</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/4e9971e470c37c0ad912c842164fa839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gx_2QW-uYwWEPPppvlxmwA.png"/></div></div></figure><h1 id="2b38" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">添加一些风格</h1><p id="ebea" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">我个人使用<a class="ae la" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> Sass </a>文件来做到这一点，但这完全取决于你。</p><p id="1d44" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，我在根目录下创建了一个<code class="fe ne nf ng nh b">/src/styles</code>文件夹。然后在下面添加各种<code class="fe ne nf ng nh b">_filename.scss</code>。<a class="ae la" href="https://parceljs.org/" rel="noopener ugc nofollow" target="_blank">包</a>的美妙之处在于它会直接为你编译<code class="fe ne nf ng nh b">.scss</code> &amp; <code class="fe ne nf ng nh b">.js</code>文件，并且在你每次保存时自动重新编译。加入:</p><pre class="ni nj nk nl gt nm nh nn no aw np bi"><span id="9b11" class="lb lc iq nh b gy nq nr l ns nt">if (module.hot) {<br/>    module.hot.accept();<br/>}</span></pre><p id="b5f9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">到你的根<code class="fe ne nf ng nh b">index.js</code>你会看到你的浏览器直接从盒子里更新这些重新编译的人工制品！</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/ec8ef295e4cfada6bfb84bd9aa47200c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/1*R1Rl14-lTo3mqKW5jnUwuA.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">hot reloading in action</figcaption></figure><h1 id="2c9e" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">Alexa的那一点…</h1><p id="c182" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">所以这有点像作弊。与其试图将Alexa API集成到我的仪表盘中，我决定利用一个已经内置了这个的设备。<a class="ae la" href="https://www.amazon.com/Amazon-Fire-Tablet-Family/b?ie=UTF8&amp;node=6669703011" rel="noopener ugc nofollow" target="_blank">亚马逊Fire平板电脑</a>。这些附带了一个web浏览器，它基本上会指向您刚刚创建的仪表板。现在你可以让你的仪表板运行，同时仍然能够喊出“Alexa，玩酷玩”而不需要触摸你的仪表板。</p><h1 id="396b" class="mk lc iq bd ld ml mm mn lg mo mp mq lj mr ms mt lm mu mv mw lp mx my mz ls na bi translated">构建小工具并享受其中的乐趣！</h1><p id="4c1a" class="pw-post-body-paragraph kc kd iq ke b kf lw kh ki kj lx kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ij bi translated">现在，您已经拥有了开始构建小部件所需的一切。为了让你开始，我在我的GitHub上有几张我已经做过的图片。请随意打开这些，更新您需要的内容，然后从那里开始！我很想看看你添加了什么小工具，所以请随意打开这个回购的PR，我们可能会做出一些很酷的改变和更新。</p></div></div>    
</body>
</html>
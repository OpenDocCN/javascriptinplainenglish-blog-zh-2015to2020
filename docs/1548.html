<html>
<head>
<title>How to RxJS — Hot vs Cold</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何应对热与冷</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-rxjs-hot-vs-cold-3b430c4b7690?source=collection_archive---------4-----------------------#2020-03-30">https://javascript.plainenglish.io/how-to-rxjs-hot-vs-cold-3b430c4b7690?source=collection_archive---------4-----------------------#2020-03-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f0eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">小心前面的热东西！Rx中有哪些冷热可观察？</p><p id="c0ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我关于RxJS系列的第二部分，你可以通过下面的链接查看我的其他文章:</p><ul class=""><li id="d0c8" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated"><a class="ae kr" href="https://medium.com/javascript-in-plain-english/how-to-rxjs-the-basics-d5a5905497e0" rel="noopener">如何RxJS —基础知识</a></li><li id="167f" class="ki kj in jm b jn ks jr kt jv ku jz kv kd kw kh kn ko kp kq bi translated"><strong class="jm io">如何RxJS——热vs冷</strong></li><li id="7d72" class="ki kj in jm b jn ks jr kt jv ku jz kv kd kw kh kn ko kp kq bi translated"><a class="ae kr" href="https://medium.com/javascript-in-plain-english/how-to-rxjs-creational-basics-70318c5eca38" rel="noopener">如何RxJS —创作基础</a></li></ul><p id="1a3a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本系列文章的前一部分，我写了RxJS的基础知识，以及Observables是如何工作的，它们基于什么概念。在这一部分，我想谈谈RxJS的一个基本概念，然而这是这项技术中最常被误解的部分。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/cda5c1540473e7f65e99215369cebbf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uTV1KjRJlWQoQm3_RzoTkQ.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@ferdinand_feng?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">ferdinand feng</a> on <a class="ae kr" href="https://unsplash.com/s/photos/ice-lava?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ea51" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">可观察的人是懒惰的——难道不是吗？</h1><p id="2844" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">正如我在上一篇文章中所说的，Observables是懒惰的，所以他们只会在有人感兴趣的时候做一些事情。如果我们继续下去，那就意味着，你不能错过任何一个可观测物体发出的东西，因为只有你订阅了它们，它们才会发出某种东西。然而，并非在所有情况下都是如此。看看下面的例子:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Missing out a next notification</figcaption></figure><p id="9add" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如你所见，我们将错过关于这个主题的第一个下一个事件。那么，这整个可观察事物的懒惰是怎么回事呢？</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><h1 id="b455" class="ln lo in bd lp lq mz ls lt lu na lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">制片人</h1><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ne"><img src="../Images/500b24e69c83ec06e53814d4c41cbab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nvHJv8lFCtKDoSmzVkLrFA.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@christopher__burns?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Christopher Burns</a> on <a class="ae kr" href="https://unsplash.com/s/photos/factory?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bda1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如我们已经知道的，可观测数据是一个异步数据流。我们可以通过监听这个数据流来获取数据，但是有些东西需要<em class="nf">产生</em>这些项目。这个东西被称为可观察的<strong class="jm io">生产者</strong>。例如，在“of”创造性操作符的情况下，它是给它的参数，或者在“from”操作符的情况下，它可以是我们传递给它的承诺。</p><p id="4d11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更简单地说，可观测量是函数，它们的工作是将观察者与生产者联系起来。如果我们继续下去，我们也可以意识到，因为一个可观察的只是一个函数，有一个工作，他们不一定要设置生产者。他们唯一的任务是每当生产者制造一些新的数据时通知观察者。</p><p id="5a45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以根据产生者把可观察的事物分成两类。一个可观察对象可以是热的<em class="nf">或冷的</em>或<em class="nf"/>。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ng"><img src="../Images/3e943a5595fd4586cdd5d5d4277d7a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBR_KIR41ulN9R5L0h3DhA.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Photo by <a class="ae kr" href="https://unsplash.com/@v2osk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">v2osk</a> on <a class="ae kr" href="https://unsplash.com/s/photos/ice-cold?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="nh"><p id="6e1e" class="ni nj in bd nk nl nm nn no np nq kh dk translated">如果它的生产者是在订阅期间创建或激活的，我们称之为可观察的感冒。</p></blockquote><p id="8cc4" class="pw-post-body-paragraph jk jl in jm b jn nr jp jq jr ns jt ju jv nt jx jy jz nu kb kc kd nv kf kg kh ig bi translated">让我们通过用构造函数创建一个可观察对象来看看一个基本的例子。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Creating a Cold Observable</figcaption></figure><p id="a0f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码将每秒钟一个接一个地打印一系列数字。这里重要的部分是我们给Observable的构造函数的函数。在Rx的类型定义中，这个参数被称为“订户”。每当有人订阅一个可观察对象时，这个方法就会被调用，这个方法负责将生产者与观察者联系起来。在上面的例子中，我们在这个函数中创建了interval，所以我们在订阅期间创建并激活了我们的可观察对象的生产者。因为在我们订阅这个可观察对象之前，这个间隔是不存在的，所以我们可以确定我们没有丢失任何由可观察对象发出的数据。简单地说，我们正在懒洋洋地创建我们的生产者。</p><blockquote class="nh"><p id="301f" class="ni nj in bd nk nl nw nx ny nz oa kh dk translated">如果一个可观察的Hot的生产者是在它的订阅之外被创建或激活的，我们称之为可观察的Hot。</p></blockquote><p id="0316" class="pw-post-body-paragraph jk jl in jm b jn nr jp jq jr ns jt ju jv nt jx jy jz nu kb kc kd nv kf kg kh ig bi translated">现在，让我们来看一个热可观测的例子。</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Creating a Hot Observable</figcaption></figure><p id="a41c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，生产者是WebSocket，但是这里的问题是，在订阅期间，我们没有创建这个WebSocket生产者。相反，我们使用的是生产者的引用，所以生产者已经存在，甚至可能已经发出消息。在这个WebSocket例子中，这样更好，因为您不希望每次有人订阅您的Observable时都创建一个新的WebSocket连接。在这种情况下，当您订阅可观察对象时，您可能已经错过了一些“下一个”通知。</p><p id="800e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然而，上面例子的一个缺陷是我们没有任何关闭WebSocket连接的逻辑。在现实世界的应用程序中，您将为WebSocket连接创建一个冷的可观察对象，并将这个冷的可观察对象变成热的，并让其他人订阅这个热的可观察对象。RxJS提供了几个操作符来使一个冷的可观察的热的，但是我们将在本系列的后面讨论它们。</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><h1 id="0a22" class="ln lo in bd lp lq mz ls lt lu na lw lx ly nb ma mb mc nc me mf mg nd mi mj mk bi translated">摘要</h1><p id="7ff4" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">总而言之，我们刚刚讨论的主题是RxJS最重要的基石之一，但也是新手程序员最容易误解的。在我或我的一个程序员同事遇到的大多数情况下，缺乏对这个主题的理解是至关重要的。</p><h1 id="2b56" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">注意事项和问题</h1><p id="3a87" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">我的一个程序员朋友在我的第一篇文章中指出，读起来有点长。所以，在这里我试着把事情做得简短一点，以便更容易理解。如果可以的话，请留下一些反馈，这样更好吗？或者我应该回到更长，但更完整的话题？</p><p id="8670" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，请随时留下关于我的故事的任何建议或评论。我也乐于接受新的事物来改进或学习。</p><h2 id="bdfc" class="ob lo in bd lp oc od dn lt oe of dp lx jv og oh mb jz oi oj mf kd ok ol mj om bi translated">JavaScript用简单的英语写的一个注释:</h2><p id="35a3" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，请用你的Medium用户名发邮件到<a class="ae kr" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">submissions@javascriptinplainenglish.com</a>给我们，我们会把你添加为作者。</p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Best Practices— Variable Declarations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—变量声明</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-variable-declarations-72119e0228eb?source=collection_archive---------5-----------------------#2020-05-29">https://javascript.plainenglish.io/javascript-best-practices-variable-declarations-72119e0228eb?source=collection_archive---------5-----------------------#2020-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4305a5a5244fa4443341d2ad107e04f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bycfv6A-dcBppTtq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@itookthose?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sid Balachandran</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a249" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="d519" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何正确地声明变量。</p><h1 id="169c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">要求在变量声明中初始化</h1><p id="4ae4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">变量声明应该在声明的时候赋值，这样我们就不用担心以后没有声明的变量了。</p><p id="c8b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该编写以下代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f7c2" class="mn lc iq mj b gy mo mp l mq mr">var x = 1;</span></pre><p id="0632" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保<code class="fe ms mt mu mj b">x</code>从一开始就有价值。</p><p id="6c5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，用<code class="fe ms mt mu mj b">const</code>声明的常量必须用值声明，所以我们必须写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1549" class="mn lc iq mj b gy mo mp l mq mr">const x = 1;</span></pre><p id="da0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，这更多的是一种风格偏好，因为它对我们的代码没有显著的影响。</p><h1 id="cc71" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">永远不要对变量使用删除运算符</h1><p id="d9b6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">永远不要在变量上使用<code class="fe ms mt mu mj b">delete</code>操作符。这可能会导致意想不到的行为。</p><p id="a70a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下没有严格模式的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9ade" class="mn lc iq mj b gy mo mp l mq mr">let x = 1;<br/>delete x;</span></pre><p id="0258" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在对它使用了<code class="fe ms mt mu mj b">delete</code>操作符后，我们得到<code class="fe ms mt mu mj b">x</code>仍然是1。它也禁止我们使用严格模式，所以下面的代码会抛出一个错误:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="916e" class="mn lc iq mj b gy mo mp l mq mr">'use strict'<br/>let x = 1;<br/>delete x;</span></pre><p id="881f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码会给出错误‘未捕获的语法错误:在严格模式下删除一个不合格的标识符。’</p><p id="36c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是使用严格模式的一个很好的理由，以防止我们在变量上使用<code class="fe ms mt mu mj b">delete</code>这样的事情。</p><h1 id="ceed" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要用与变量名相同的名称命名标签</h1><p id="3dc7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该用与变量名相同的名字来标记循环。</p><p id="cd98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该像下面的代码那样有标签:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b1b8" class="mn lc iq mj b gy mo mp l mq mr">let x = 1;</span><span id="bffa" class="mn lc iq mj b gy mv mp l mq mr">const baz = () =&gt; {<br/>  x: for (let y = 0; y &lt;= 1; y++) {<br/>    break x;<br/>  }<br/>}</span></pre><p id="7997" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与变量同名的标签很容易让人混淆。</p><h1 id="e960" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有未声明的变量</h1><p id="3965" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">未声明的变量是尚未定义的变量。</p><p id="90cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有严格模式，这些变量将作为全局变量被动态创建。这是不可取的，因为它污染了全球范围。我们不希望这样，因为多个同名的全局变量可能会相互冲突。</p><p id="8a6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们不应该有如下代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cecc" class="mn lc iq mj b gy mo mp l mq mr">a = 1;</span></pre><p id="bf4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，如果严格模式没有打开，那么<code class="fe ms mt mu mj b">a</code>被声明为一个全局变量。</p><p id="7171" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不希望这样，所以我们应该打开严格模式，这样可以防止创建全局变量<code class="fe ms mt mu mj b">a</code>，反而会抛出一个错误。</p><p id="f661" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要声明变量，我们要么使用<code class="fe ms mt mu mj b">let</code>、<code class="fe ms mt mu mj b">const</code>，要么使用<code class="fe ms mt mu mj b">var</code>。<code class="fe ms mt mu mj b">let</code>和<code class="fe ms mt mu mj b">const</code>更受青睐，因为它们是块范围的，在声明之前不能被引用。<code class="fe ms mt mu mj b">const</code>也不能被重新赋值，必须在用<code class="fe ms mt mu mj b">const</code>声明某个东西时设置一个值。</p><p id="1d1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们应该使用带有<code class="fe ms mt mu mj b">typeof</code>的未声明变量。例如，如果<code class="fe ms mt mu mj b">a</code>未声明，我们应该编写如下表达式:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2d83" class="mn lc iq mj b gy mo mp l mq mr">typeof a === 'undefined';</span></pre><p id="2801" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在没有严格模式的情况下，如果事先没有声明<code class="fe ms mt mu mj b">a</code>，上面的表达式将返回<code class="fe ms mt mu mj b">true</code>。</p><p id="1b6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开严格模式，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="be9d" class="mn lc iq mj b gy mo mp l mq mr">'use strict';<br/>typeof a === 'undefined';</span></pre><p id="3b9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还会返回<code class="fe ms mt mu mj b">true</code>，所以我们应该检查我们没有将这些未声明的变量与<code class="fe ms mt mu mj b">typeof</code>操作符一起使用。</p><h1 id="9a43" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">否初始化为未定义</h1><p id="5e1e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript中，已声明但未初始化的变量被自动设置为<code class="fe ms mt mu mj b">undefined</code>。因此，我们不必显式地将其设置为<code class="fe ms mt mu mj b">undefined</code>。</p><p id="0705" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不必编写类似下面的代码来将<code class="fe ms mt mu mj b">bar</code>设置为<code class="fe ms mt mu mj b">undefined</code>:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b3d1" class="mn lc iq mj b gy mo mp l mq mr">let bar = undefined;</span></pre><p id="3d79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们可以只写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5686" class="mn lc iq mj b gy mo mp l mq mr">let bar;</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4b573cdf882d319d2e4098cdbc7c5201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1esGm9F9WCLSUOxq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@noaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">NOAA</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0951" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用u <code class="fe ms mt mu mj b">ndefined</code>作为变量名</h1><p id="0e51" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该使用<code class="fe ms mt mu mj b">undefined</code>作为变量名，因为它是保留关键字。</p><p id="f409" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写类似下面这样的东西:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4f2f" class="mn lc iq mj b gy mo mp l mq mr">var <!-- -->undefined = "hi";</span></pre><p id="72e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有严格模式，这将什么也做不了。如果我们在这一行之后记录<code class="fe ms mt mu mj b">undefined</code>，我们仍然会得到<code class="fe ms mt mu mj b">undefined</code>。</p><p id="ea1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，这是没有用的，也是混乱的。因此，在严格模式下是禁止的。</p><p id="59a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也不能将<code class="fe ms mt mu mj b">var</code>替换为<code class="fe ms mt mu mj b">let</code>或<code class="fe ms mt mu mj b">const</code>，如下所示:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="036c" class="mn lc iq mj b gy mo mp l mq mr">let undefined = "hi";</span></pre><p id="a5fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="268e" class="mn lc iq mj b gy mo mp l mq mr">const undefined = "hi";</span></pre><p id="de23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们将得到错误“未捕获的语法错误:标识符“未定义”已经被声明”。</p><p id="104b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是使用<code class="fe ms mt mu mj b">let</code>和<code class="fe ms mt mu mj b">const</code>的另一个好理由。</p><h1 id="a992" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6438" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们在声明JavaScript变量时应该小心。我们不应该用像<code class="fe ms mt mu mj b">undefined</code>这样的保留关键字来声明变量。</p><p id="5197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们不应该在代码中有未声明的变量。JavaScript严格模式应该禁止这种情况发生。</p><p id="820f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运算符不应该用在变量上，因为它不做任何事情。</p><p id="5b83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标签不应该和变量名重名，以免混淆。</p><h1 id="23f7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">用简单英语写的便条</strong></h1><p id="f278" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>上找到所有这些——关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
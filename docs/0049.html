<html>
<head>
<title>How to use computed properties in Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Vue中使用计算属性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/real-life-use-cases-for-computed-properties-in-vue-js-5fdeecbeb3b3?source=collection_archive---------1-----------------------#2018-11-15">https://javascript.plainenglish.io/real-life-use-cases-for-computed-properties-in-vue-js-5fdeecbeb3b3?source=collection_archive---------1-----------------------#2018-11-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/86180de083deda12e1fae140b235ac93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QIg6vEjZmT5YMVKU5Rxr2A.png"/></div></div></figure><div class=""/><div class=""><h2 id="3d9a" class="pw-subtitle-paragraph jv ix iy bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">Vue文档中的例子并不实用。这里有一些关于如何在Vue中编写和使用计算属性的真实例子。</h2></div><p id="4f4d" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">在Vue中有多种方法来设置视图的值。这包括直接将数据值绑定到视图，使用简单的表达式或使用过滤器对内容进行简单的转换。除此之外，我们还可以使用计算属性来获取基于数据模型内部项目的值。</p><p id="9ce2" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">Vue中的计算属性非常有用。以至于除非你想在一个事件之后触发一个函数，比如一个点击事件，否则你应该在查看methods属性之前分析你的函数是否可以位于computed属性内部。原因是在计算属性内部进行的计算被缓存，并且仅在需要时更新。</p><p id="5b4b" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">既然我们已经给了你什么是计算属性以及它们为什么有用的一个快速概述，那么我们现在最好深入一些例子，这样你就可以更好地了解如何使用它们。当我最初开始学习如何使用Vue时，我通读了他们网站上的文档。我发现，虽然它们涵盖了很多主题，但它们并没有深入其中的很多细节。我特别抱怨的是，他们给出的例子通常非常简单，几乎没有用处——比如如何反转一个字符串。因此，让我们通过三个真实的Vue计算属性用例来解决这个问题！</p><p id="1bb3" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">你觉得了解这类内容有用吗？如果有，获取更多类似内容通过 <a class="ae lk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kp iz"> <em class="lj">订阅解码，我的YouTube频道</em> </strong> </a> <strong class="kp iz"> <em class="lj">！</em>T11】</strong></p><h1 id="0753" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">Vue示例1:使用map()和reduce()从购物车中获取总数</h1><p id="fbef" class="pw-post-body-paragraph kn ko iy kp b kq md jz ks kt me kc kv kw mf ky kz la mg lc ld le mh lg lh li ig bi translated">所以我们要解决的第一个例子可能是我们今天要解决的三个例子中最复杂的一个。所以让我们把困难的事情解决掉，因为它也可能是对你最有用的！</p><p id="51ef" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">在我们的例子中，我们有一个电子商务网站。我们将把所有的条目存储在一个条目数组中，该数组位于我们的data()函数<em class="lj">中(这是使用Vue组件时相当标准的做法)。</em>当我们将商品添加到购物车时，我们需要能够将整个商品对象添加到购物车中。因此，添加到购物车中的示例商品如下所示:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="e910" class="mr lm iy mn b gy ms mt l mu mv">{<br/>    id: 205,<br/>    name: 'Banana',<br/>    price: 1,<br/>    imageSrc: Banana<br/>}</span></pre><p id="9c4d" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">现在考虑到这个例子主要是简单地获取总价，我们可以从这个item对象中添加价格。但实际上，这并没有多大用处，因为我们的购物车并不知道添加了什么商品。</p><p id="66a5" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">因此，我们在这里希望发生的是，每次一个项目被添加到购物车，我们希望Vue以编程方式计算出总价格。这就是我们的计算属性发挥作用的地方！</p><p id="c1d0" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">让我们检查我们的示例代码，然后我们将解释发生了什么:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="8853" class="mr lm iy mn b gy ms mt l mu mv">computed: {<br/>    shoppingCartTotal() {<br/>        <strong class="mn iz">return this</strong>.cart.map(item =&gt; item.price).reduce((total, amount) =&gt; total + amount);<br/>    }<br/>},</span></pre><p id="edf9" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">因此，我们首先在购物车数组上运行<code class="fe mw mx my mn b">map()</code>函数，该函数返回一个新数组，其中只包含每件商品的价格。然后我们立即调用<code class="fe mw mx my mn b">reduce()</code>函数，它将所有的值加在一起并返回总值。</p><p id="5edf" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">但是Vue是如何知道每次在购物车中添加或删除商品时运行这个函数的呢？</p><p id="fc2c" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">嗯，在我们的例子中，每当一个商品被添加到购物车中(通过点击每个商品旁边写着“添加到购物车”的按钮)，该按钮都有一个附加的点击事件，它触发一个名为<code class="fe mw mx my mn b">updateCart()</code>的函数，如下所示:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="7098" class="mr lm iy mn b gy ms mt l mu mv">methods: {<br/>    updateCart(e) {<br/>        <strong class="mn iz">this</strong>.cart.push(e);<br/>        <strong class="mn iz">this</strong>.total = shoppingCartTotal;<br/>    }<br/>}</span></pre><p id="2972" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如您所见，它首先将一个商品推入我们的购物车。然后它调用<code class="fe mw mx my mn b">this.total</code>来分配<code class="fe mw mx my mn b">shoppingCartTotal</code>函数的值，该函数位于我们的计算属性部分中！多酷啊。！</p><h1 id="ad04" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">Vue示例2:将数据串连接在一起</h1><p id="b160" class="pw-post-body-paragraph kn ko iy kp b kq md jz ks kt me kc kv kw mf ky kz la mg lc ld le mh lg lh li ig bi translated">现在这个例子和第三个例子会更传统一些，更符合你通常看到的计算属性的使用方式。让我们举一个例子，我们有一个充满用户的数据库，所有这些都被加载到我们的<code class="fe mw mx my mn b">data()</code>函数中。我们的数据结构有一个<code class="fe mw mx my mn b">name_first</code>和一个<code class="fe mw mx my mn b">name_last</code>值，我们希望找到一种有效的方法将这两个值连接在一起并显示在我们的页面上。为了更容易形象化，我们的用户对象应该是这样的:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="53b1" class="mr lm iy mn b gy ms mt l mu mv">user: {<br/>    name_first: 'Sunil',<br/>    name_last: 'Sandhu',<br/>}</span></pre><p id="5b6a" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">然后，我们可以使用模板/字符串文字在计算函数内将<code class="fe mw mx my mn b">name_first </code>和<code class="fe mw mx my mn b">name_last</code>连接在一起，如下所示:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="4188" class="mr lm iy mn b gy ms mt l mu mv">computed: {<br/><br/>    fullName() {<br/>        <strong class="mn iz">return </strong>`${<strong class="mn iz">this</strong>.user.name_first} ${<strong class="mn iz">this</strong>.user.name_last}`<br/>    }</span><span id="fc08" class="mr lm iy mn b gy mz mt l mu mv">},</span></pre><p id="e307" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">然后，在我们的视图中，我们可以引用<code class="fe mw mx my mn b">fullName</code>，就像我们在<code class="fe mw mx my mn b">data()</code>中引用任何其他值一样:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="cdbf" class="mr lm iy mn b gy ms mt l mu mv">&lt;p&gt;{{ fullName }}&lt;/p&gt;</span></pre><p id="cff1" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">哪会返回<code class="fe mw mx my mn b">Sunil Sandhu</code>！</p><h1 id="58d4" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">Vue示例3:一起计算数字</h1><p id="1067" class="pw-post-body-paragraph kn ko iy kp b kq md jz ks kt me kc kv kw mf ky kz la mg lc ld le mh lg lh li ig bi translated">所以在我们的最后一个例子中，我们将使用v-model自动更新我们的<code class="fe mw mx my mn b">data()</code>对象中的值，然后使用一个计算属性将这两个数字相加。</p><p id="45e5" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">首先，让我们看看我们的<code class="fe mw mx my mn b">data()</code>对象:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="35e5" class="mr lm iy mn b gy ms mt l mu mv">data() {<br/>    <strong class="mn iz">return </strong>{<br/>        num1: 0,<br/>        num2: 0<br/>    }<br/>},</span></pre><p id="304d" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">超级简单直接。为了避免<code class="fe mw mx my mn b">null</code>、<code class="fe mw mx my mn b">undefined </code>和<code class="fe mw mx my mn b">NaN</code>出现任何问题，我们从一开始就将<code class="fe mw mx my mn b">0</code>附加到<code class="fe mw mx my mn b">num1</code>和<code class="fe mw mx my mn b">num2</code>。</p><p id="a557" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">我们的视图中有两个输入字段:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="d3c0" class="mr lm iy mn b gy ms mt l mu mv">&lt;input type="number" v-model="num1"/&gt;<br/>&lt;input type="number" v-model="num2"/&gt;</span></pre><p id="0be8" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">您可以看到，我们将v-model附加到两者上，值为<code class="fe mw mx my mn b">num1</code>和<code class="fe mw mx my mn b">num2</code>。因此，每当我们改变任一输入字段中的值时，这些数字也会在我们的<code class="fe mw mx my mn b">data()</code>对象中更新。</p><p id="64f8" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">在我们的计算部分中，我们有这个函数:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="6987" class="mr lm iy mn b gy ms mt l mu mv">computed: {<br/>    answer() {<br/>        <strong class="mn iz">return this</strong>.num1 + <strong class="mn iz">this</strong>.num2<br/>    }<br/>},</span></pre><p id="016c" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">它只是将两个数相加。</p><p id="fff5" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">最后，在我们看来，我们像这样输出我们的<code class="fe mw mx my mn b">answer()</code>函数的值:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="a07a" class="mr lm iy mn b gy ms mt l mu mv">&lt;p&gt;{{answer}}&lt;/p&gt;</span></pre><p id="3cdb" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">超级简单，我们可以通过添加一些按钮来触发加、减、乘、除，从而很容易地对其进行改进。</p><h1 id="e8ca" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">我们做到了！🎉</h1><p id="9b6e" class="pw-post-body-paragraph kn ko iy kp b kq md jz ks kt me kc kv kw mf ky kz la mg lc ld le mh lg lh li ig bi translated">我们已经设法通过三个不同的，但现实生活中可用的例子来说明如何在Vue中使用计算属性来有效地更新数据。既然你已经知道如何使用计算属性，那就去构建许多很酷的东西吧！一定要分享，评论和喜欢这个帖子，让我知道你在Vue中做了什么了不起的事情！</p></div></div>    
</body>
</html>
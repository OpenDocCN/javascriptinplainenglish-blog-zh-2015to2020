<html>
<head>
<title>Documentation with JSDoc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JSDoc文档</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/documentation-with-jsdoc-31448c92f3b5?source=collection_archive---------6-----------------------#2018-11-23">https://javascript.plainenglish.io/documentation-with-jsdoc-31448c92f3b5?source=collection_archive---------6-----------------------#2018-11-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4f17" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">最近，我的团队做了一点重构，决定将我们的页面对象模型和API交互功能分解到不同的库中。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/dbb2e2678a26c3139ec8b2170fbddb74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hg4Sdx-T978wIGHl.jpg"/></div></div></figure><p id="ad8c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">虽然这种抽象允许在我们的步骤定义中有更干净的代码，但它也带来了副作用，即团队成员将库视为一个神秘的功能盒，他们需要通过混淆来找到他们需要的东西。</p><p id="67af" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了向团队传达什么是可用的，我给自己设定了任务<a class="ae lk" href="http://usejsdoc.org/about-getting-started.html" rel="noopener ugc nofollow" target="_blank">用JSDoc </a>向代码库添加文档，这样就有一个简单的方法来访问代码的分解和它的用途。</p><h1 id="6f8d" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">编写文档字符串</h1><p id="0b85" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">我觉得写文档字符串是一门很难掌握的艺术；编写如下内容通常很容易:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="320a" class="mn lm in mj b gy mo mp l mq mr">/*<br/>* Adds one to the supplied number<br/>*<br/>* @param {number} number - Number to add one to<br/>* @returns incremented number<br/>*/<br/>addOneToNumber(number){<br/>  return number + 1;<br/>}</span></pre><p id="1d0f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">虽然这个docstring正确地解释了提供给它的值会发生什么，但它并没有真正解释为什么希望使用该函数的人会使用它。没有关于为什么写它的上下文。</p><p id="2739" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该函数可以被编写为更容易将基于0的数组索引转换为第n个子选择器索引，并且最初的开发人员给该函数取了一个非常通用的名称。</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="b35b" class="mn lm in mj b gy mo mp l mq mr">/*<br/>* Adds one to the supplied number to allow nth-child index access<br/>* when selecting elements in a list<br/>*<br/>* @param { number } number - Number to add one to<br/>* @returns incremented number<br/>*/<br/>addOneToNumber(number){<br/>  return number+1;<br/>}</span></pre><p id="6d3b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">随着功能用例的增长，它们也应该被添加到docstring中。这使得重构变得更加容易，因为对于从事这项工作的开发人员来说，改变函数的后果是显而易见的。</p><p id="51ca" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我个人倾向于让所有的类和函数都有docstrings，不管它们看起来有多小，多不重要。随着代码的增长，对这些函数的依赖也会增加，在事情变得不可收拾之前，养成尽早更新docstrings的习惯是个好主意。</p><p id="1cb1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">有一个<a class="ae lk" href="https://github.com/gajus/eslint-plugin-jsdoc" rel="noopener ugc nofollow" target="_blank">很棒的eslint插件，名为eslint-plugin-jsdoc </a>，它将增加对文档字符串的检查，作为林挺进程的一部分。</p><p id="921e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最终决定docstring是否有用和准确的是那些使用它的人，所以如果你在一个筒仓中构建一个库，让外部的人参与代码评审是很重要的，即使他们只是在那里检查文档是否可用。</p><h1 id="66a6" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">向文档中添加结构</h1><p id="fb63" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">JSDoc在第一次运行时的输出很可能是一个类的集合和一个巨大的“globals”部分，尤其是如果您已经有了一个非常实用的代码库。</p><p id="64b5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">默认情况下，JSDoc将所有这些函数都归入一个类别，不管你的文件布局如何，当我以一种非常函数化的方式将JSDoc添加到我们的API库时，我发现这是一种痛苦。</p><p id="5d3f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">幸运的是<a class="ae lk" href="http://usejsdoc.org/tags-module.html" rel="noopener ugc nofollow" target="_blank"> JSDoc有一个</a> <code class="fe ms mt mu mj b"><a class="ae lk" href="http://usejsdoc.org/tags-module.html" rel="noopener ugc nofollow" target="_blank">@module</a></code> <a class="ae lk" href="http://usejsdoc.org/tags-module.html" rel="noopener ugc nofollow" target="_blank">关键字</a>，允许你为不同的函数声明一个结构。这需要更多的努力，但是您可以将声明添加到。js文件和文件中的所有函数都将继承它。</p><h1 id="5d7a" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">添加教程</h1><p id="8c3d" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">JSDoc最好的部分之一是创建教程的能力。这些单独的页面解释了如何使用库的功能，但也可以从docstrings链接到，这有助于添加我前面提到的上下文。</p><p id="7cd6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要添加教程，请执行以下操作:</p><ul class=""><li id="3613" class="mv mw in kq b kr ks ku kv kx mx lb my lf mz lj na nb nc nd bi translated">添加一个包含教程降价文件的文件夹</li><li id="a3dc" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">添加解释如何使用该库及其功能的降价文件</li><li id="1265" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">添加一个JSON文件，将元数据添加到markdown文件中(比如提供一个清晰的标题或者设置一个教程层次结构)</li><li id="95c7" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">添加一个将docstring链接到教程页面的关键字<code class="fe ms mt mu mj b">@tutorial</code></li></ul><p id="1619" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，您可以使用这些教程来交流团队成员应该如何使用该库，如果他们发现自己在查找某个特定函数是如何工作的，他们可以通过该教程的链接来帮助他们。</p><h1 id="72f4" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">自动化事物</h1><p id="151e" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">如果文档不是最新的，没有正确的版本，并且不容易获得，那么它就毫无意义。</p><p id="0591" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">幸运的是，我们生活在一个存储廉价的时代，当谈到持续集成解决方案时，我们被宠坏了。</p><p id="06da" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我的团队使用Jenkins来运行测试，所以我设置了一个任务来监听对库的git repo的主分支的更新，构建文档并在一个设置的URL上发布文档。</p><p id="9bd0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了确保我们不会覆盖不同版本的文档，我使用了J <a class="ae lk" href="http://usejsdoc.org/about-including-package.html" rel="noopener ugc nofollow" target="_blank"> SDoc的package.json功能</a>来发布基于包版本的文档，因为库正在开发这个版本，所以那些使用旧版本的人仍然可以访问准确的文档。</p><h1 id="f155" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">最终用户测试</h1><p id="16c5" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">如前所述，如果所提供的文档是有价值的，将使用库和消费文档的人是做出判断的最佳人选。</p><p id="5d7e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在从我的团队得到反馈之前，我留出了一些时间对我所采用的文档方法进行了强化，并根据他们的反馈进行了修改。然后，我为他们希望作为开发过程一部分的文档制定了规则。</p><h1 id="b0d4" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">摘要</h1><p id="21bb" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">在总结之前，我认为有几点值得一提:</p><ul class=""><li id="fc5d" class="mv mw in kq b kr ks ku kv kx mx lb my lf mz lj na nb nc nd bi translated">与将要使用你的图书馆的人交谈。如果他们没有从文档中获得任何价值，那么这就是白费力气</li><li id="e46a" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">当编写docstrings时，为函数的使用添加尽可能多的上下文，这不仅有助于将来的开发，也有助于那些使用这个库的人</li><li id="6581" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">JSDoc有很多非常棒的工具和特性，它们并不明显，如果你想生成文档，花点时间测试一下是值得的</li><li id="c4e2" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">在生成包含大量“全局函数”的文档时要小心，要对这些函数进行结构化，这样才能更清楚地知道哪个函数属于哪个模块</li><li id="2c7e" class="mv mw in kq b kr ne ku nf kx ng lb nh lf ni lj na nb nc nd bi translated">自动生成文档，但要确保它是有版本的，这样旧版本的文档就不会看到不准确的信息。</li></ul><h2 id="f4c6" class="mn lm in bd ln nj nk dn lr nl nm dp lv kx nn no lx lb np nq lz lf nr ns mb nt bi translated">进一步阅读</h2><div class="nu nv gp gr nw nx"><a href="https://plainenglish.io/blog/5-dev-tools-for-documenting-react-code-like-a-pro" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">像专家一样记录React代码的5个开发工具</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">React作为构建复杂前端应用程序的库非常有用，但它也需要大量的工具…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">简明英语. io</p></div></div><div class="og l"><div class="oh l oi oj ok og ol km nx"/></div></div></a></div><p id="114a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="om">更多内容请看</em><a class="ae lk" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="om">plain English . io</em></strong></a><em class="om">。报名参加我们的</em> <a class="ae lk" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="om">免费周报</em> </strong> </a> <em class="om">。关注我们关于</em><a class="ae lk" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="om">Twitter</em></strong></a><a class="ae lk" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="om">LinkedIn</em></strong></a><strong class="kq io"><em class="om"/></strong><a class="ae lk" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="om">YouTube</em></strong></a><strong class="kq io"><em class="om">，以及</em></strong><em class="om"/><a class="ae lk" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="om">不和</em> </strong> </a>T55】</p><p id="5e6f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> <em class="om">用</em> </strong> <a class="ae lk" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="om">电路</em> </strong> </a> <em class="om">为你的科技创业建立认知和采用。</em></p></div></div>    
</body>
</html>
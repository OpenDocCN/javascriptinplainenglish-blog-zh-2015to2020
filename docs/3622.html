<html>
<head>
<title>Stylelint — The CSS Cousin of ESLint</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">stylelint——ESLint的CSS表亲</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stylelint-the-css-cousin-of-eslint-5701d002da21?source=collection_archive---------3-----------------------#2020-10-13">https://javascript.plainenglish.io/stylelint-the-css-cousin-of-eslint-5701d002da21?source=collection_archive---------3-----------------------#2020-10-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4234" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">校对CSS的质量和一致性</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ea91e69bc946eb2ff2851efe8fd813f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vSr3HSvym_llarBH"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@amseaman?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Seaman</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5804" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">我的旅程</h1><p id="d5b1" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我第一次了解Stylelint是在浏览样式化组件文档时。我并没有特别寻找它，但是因为我刚刚在我的代码库中设置了<a class="ae ks" href="https://medium.com/javascript-in-plain-english/eslint-a-proofreader-for-your-code-cd7e56ae391f" rel="noopener"> ESLint </a>和更漂亮，我被激起了兴趣。从那时起，我开始研究Stylelint。很快，我意识到，虽然我通过ESLint和Pretty获得了最终的Javascript林挺设置，但我对CSS一无所知。很明显，这是我的下一个任务。</p><h1 id="e451" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">Stylelint</h1><p id="cdea" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><a class="ae ks" href="https://stylelint.io/" rel="noopener ugc nofollow" target="_blank"> Stylelint </a>是CSS的linter。它的工作原理是分析你的CSS，如果任何配置的规则被违反，它会发出警告。这些规则可以捕捉CSS错误并强制执行样式约定。它类似于Google Doc或Microsoft Word的拼写和语法检查——本质上是CSS的自动校对工具！</p><h1 id="459e" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">配置</h1><p id="0c55" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">Stylelint运行一个名为<code class="fe mh mi mj mk b">stylelint.config.js</code>的配置文件。这个配置文件被分解成<a class="ae ks" href="#1a0b" rel="noopener ugc nofollow">规则</a>、<a class="ae ks" href="#393b" rel="noopener ugc nofollow">插件</a>和<a class="ae ks" href="#db32" rel="noopener ugc nofollow">扩展</a>。</p><h1 id="1a0b" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">规则</h1><p id="7d62" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">规则定义了Stylelint将在代码中寻找什么。这些在配置的<code class="fe mh mi mj mk b">rules</code>部分被定义为键值对。键是规则，值切换规则并设置选项。</p><p id="3c29" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">启用规则取决于规则本身——有些规则可能很简单，只需将值设置为<code class="fe mh mi mj mk b">true</code>；其他人可以通过关键词直接调谐。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="104a" class="mu ku in mk b gy mv mw l mx my">// stylelint.config.js<br/>module.exports = {<br/>  rules: {<br/>    'declaration-no-important': true,<br/>    'color-hex-case': 'upper',<br/>  },<br/>};</span></pre><p id="abf7" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">有些规则还允许您使用额外的配置选项对其进行进一步定制。在这种情况下，主要选项和附加配置是一个阵列。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="b8bf" class="mu ku in mk b gy mv mw l mx my">module.exports = {<br/>  rules: {<br/>    'font-weight-notation': ['numeric', { ignore: ['relative'] }],<br/>  },<br/>};</span></pre><p id="29b1" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">禁用要简单得多——只需将值设置为<code class="fe mh mi mj mk b">null</code>。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="1dca" class="mu ku in mk b gy mv mw l mx my">module.exports = {<br/>  rules: {<br/>    'comment-no-empty': null,<br/>  },<br/>};</span></pre><h1 id="393b" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">插件</h1><p id="34db" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">Stylelint本身提供了近200条规则，但这些规则并没有涵盖所有内容。这就是插件的用武之地——它们允许开发人员创建规则，然后您可以在配置中启用这些规则。这里有几个Stylelint插件的例子。</p><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-a11y" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">stylelint-a11y</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">可访问性的Stylelint规则</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq km nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-scss" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">stylelint-scss</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">SCSS的Stylelint规则</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="nr l nn no np nl nq km nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-order" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">stylelint-订单</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">CSS排序的Stylelint规则</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="ns l nn no np nl nq km nc"/></div></div></a></div><p id="4ac2" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">要集成，在配置的<code class="fe mh mi mj mk b">plugins</code>部分定义这些插件。然后你可以在<code class="fe mh mi mj mk b">rules</code>部分使用插件的规则。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="9bfc" class="mu ku in mk b gy mv mw l mx my">module.exports = {<br/>  plugins: [<br/>    'stylelint-a11y',<br/>  ],<br/>  rules: {<br/>    "a11y/no-outline-none": true,<br/>  },<br/>};</span></pre><h1 id="db32" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">扩展ˌ扩张</h1><p id="9fbb" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">如此多的原生规则和插件贡献了更多的规则，Stylelint extensions使得这些规则更容易使用，因此您不必费力去理解它们。通过扩展，你继承了插件和规则，这样你就不用自己动手了。下面是一些Stylelint扩展的例子。</p><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-config-standard" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">stylelint-配置-标准</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Stylelint创建者推荐的Stylelint配置</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="nt l nn no np nl nq km nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-config-recommended-scss" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">stylelint-config-recommended-scss</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">推荐SCSS使用的Stylelint配置</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="nu l nn no np nl nq km nc"/></div></div></a></div><div class="mz na gp gr nb nc"><a href="https://www.npmjs.com/package/stylelint-a11y" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">style lint-a11y/推荐</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">可访问性的推荐Stylelint配置</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">www.npmjs.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq km nc"/></div></div></a></div><p id="118f" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">扩展在配置的<code class="fe mh mi mj mk b">extensions</code>部分定义。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="74b4" class="mu ku in mk b gy mv mw l mx my">module.exports<strong class="mk io"><em class="nv"> </em></strong>= {<br/>  extends: [<br/>    'stylelint-config-standard',<br/>    'stylelint-config-recommended-scss',<br/>    'stylelint-a11y/recommended',<br/>  ],<br/>};</span></pre><h1 id="35f6" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">覆盖+禁用</h1><p id="e4bd" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">但是使用扩展会产生一个副作用——如果您大部分同意它们，但是有一些规则您想调整或完全关闭，该怎么办？这就是覆盖和禁用的用武之地。您自己定义的规则将优先考虑并覆盖扩展的规则。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="b7d8" class="mu ku in mk b gy mv mw l mx my">module.exports = {<br/>  extends: [<br/>    'stylelint-config-standard',<br/>  ],<br/>  rules: {<br/>    'color-hex-case': 'upper',<br/>    'length-zero-no-unit': null,<br/>  },<br/>};</span></pre><p id="2f4f" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">即使你尽最大努力遵守规则，也可能有违反规则的情况。为了防止Stylelint出错，可以临时禁用带有注释的特定行的Stylelint。</p><ul class=""><li id="1294" class="nw nx in ln b lo ml lr mm lu ny ly nz mc oa mg ob oc od oe bi translated"><code class="fe mh mi mj mk b">/* stylelint-disable */</code>:禁用下面所有行的Stylelint，直到用<code class="fe mh mi mj mk b">/* stylelint-enable */</code>重新启用</li><li id="a143" class="nw nx in ln b lo of lr og lu oh ly oi mc oj mg ob oc od oe bi translated"><code class="fe mh mi mj mk b">/* stylelint-disable-line */</code>:仅禁用当前行的Stylelint</li><li id="9b44" class="nw nx in ln b lo of lr og lu oh ly oi mc oj mg ob oc od oe bi translated"><code class="fe mh mi mj mk b">/* stylelint-disable-next-line */</code>:仅对下一行禁用Stylelint</li></ul><p id="e4fd" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">您还可以在disable注释后指定特定的(用逗号分隔的)规则来禁用一些规则，而不是禁用所有规则。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="7b4c" class="mu ku in mk b gy mv mw l mx my">div {<br/>  /* stylelint-disable-next-line value-no-vendor-prefix */<br/>  display: -webkit-flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>  font-size: 12px !important; /* stylelint-disable-line declaration-no-important */<br/><br/>  /* stylelint-disable */<br/>  :focus {<br/>    outline: none;<br/>  }<br/>  /* stylelint-enable */<br/>}</span></pre><p id="68b1" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">应该谨慎使用这些规则，所以如果您经常禁用这些规则，请考虑永久关闭它们，</p><h1 id="5999" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">JS中的CSS</h1><p id="319e" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">如果你在JS框架中使用流行的CSS，比如<a class="ae ks" href="https://emotion.sh/docs/introduction" rel="noopener ugc nofollow" target="_blank"> Emotion </a>或者<a class="ae ks" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank"> Styled Components </a>，你仍然可以在一点额外的配置后lint你的CSS。<code class="fe mh mi mj mk b">stylelint-processor-styled-components</code>处理器将从情感或样式化组件中提取样式，这样Stylelint就可以处理它们。此外，某些规则与这些框架不兼容，因此必须使用<code class="fe mh mi mj mk b">stylelint-config-styled-components</code>将其关闭。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="17bf" class="mu ku in mk b gy mv mw l mx my">module.exports<strong class="mk io"><em class="nv"> </em></strong>= {<br/>  extends: ['stylelint-config-styled-components'],<br/>  processors: ['stylelint-processor-styled-components'],<br/>};</span></pre><h1 id="32cf" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">多种配置</h1><p id="7649" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">如果您使用多个CSS框架，您可能需要多个配置，每个配置针对一个特定的框架。例如，如果您使用普通CSS和样式化组件，由于两种配置之间的差异，您将需要为每种组件配置一个配置。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="6a8d" class="mu ku in mk b gy mv mw l mx my">// stylelint.config.js<br/>module.exports = {<br/>  extends: [<br/>    'stylelint-config-standard',<br/>    'stylelint-a11y/recommended'<br/>  ],<br/>};</span><span id="fa79" class="mu ku in mk b gy ok mw l mx my">// stylelint.styled.config.js<br/>module.exports = {<br/>  extends: [<br/>    './stylelint.config.js',<br/>    'stylelint-config-styled-components'<br/>  ],<br/>  processors: ['stylelint-processor-styled-components'],<br/>};</span></pre><p id="9a21" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated">快速提示:你可以让你的配置互相扩展，这样你就不需要再定义相同的规则，插件扩展了！</p><h1 id="643b" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">运转</h1><p id="bc85" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为了运行Stylelint(使用多种配置)，我向<code class="fe mh mi mj mk b">package.json</code>添加了以下别名。</p><pre class="kd ke kf kg gt mq mk mr ms aw mt bi"><span id="df9f" class="mu ku in mk b gy mv mw l mx my">{<br/>  "scripts": {<br/>    "lint:js": "stylelint '{**/*,*}.js' --config stylelint.styled.config.js",<br/>    "lint:css": "stylelint '{**/*,*}.css'",<br/>    "lint:css:fix": "stylelint '{**/*,*}.css' --fix"<br/>  },<br/>}</span></pre><p id="eed9" class="pw-post-body-paragraph ll lm in ln b lo ml jo lq lr mm jr lt lu mn lw lx ly mo ma mb mc mp me mf mg ig bi translated"><code class="fe mh mi mj mk b">npm run lint:js</code>将对样式化组件(扩展名为<code class="fe mh mi mj mk b">.js</code>的文件)运行Stylelint，<code class="fe mh mi mj mk b">npm run lint:css</code>将对普通CSS(扩展名为<code class="fe mh mi mj mk b">.css</code>的文件)运行Stylelint。此外，Stylelint支持自动修复，因此您可以运行<code class="fe mh mi mj mk b">npm run lint:css:fix</code>，任何可以自动修复的Stylelint违规都会被修复。不幸的是，当您使用样式组件所需的处理器时，不支持自动修复。</p></div><div class="ab cl ol om hr on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ig ih ii ij ik"><h1 id="7fcf" class="kt ku in bd kv kw os ky kz la ot lc ld jt ou ju lf jw ov jx lh jz ow ka lj lk bi translated">最后的想法</h1><p id="bfe8" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">Stylelint是对ESLint执行和维护高质量代码库的完美补充。虽然Stylelint最初的设置有点复杂，但完成后，您可以对CSS的质量和一致性充满信心。这只是少了一件你需要担心的事情，所以你可以专注于构建一个伟大的产品。</p></div><div class="ab cl ol om hr on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ig ih ii ij ik"><h1 id="1bb0" class="kt ku in bd kv kw os ky kz la ot lc ld jt ou ju lf jw ov jx lh jz ow ka lj lk bi translated">资源</h1><ul class=""><li id="2994" class="nw nx in ln b lo lp lr ls lu ox ly oy mc oz mg ob oc od oe bi translated"><a class="ae ks" href="https://stylelint.io/" rel="noopener ugc nofollow" target="_blank">官方Stylelint文档</a></li><li id="0b1e" class="nw nx in ln b lo of lr og lu oh ly oi mc oj mg ob oc od oe bi translated"><a class="ae ks" href="https://github.com/mjchang/medium/tree/master/stylelint" rel="noopener ugc nofollow" target="_blank">本文Github回购</a></li><li id="6f4c" class="nw nx in ln b lo of lr og lu oh ly oi mc oj mg ob oc od oe bi translated"><a class="ae ks" href="https://codesandbox.io/s/github/mjchang/medium/tree/master/stylelint" rel="noopener ugc nofollow" target="_blank">本文的code sandbox</a></li></ul></div></div>    
</body>
</html>
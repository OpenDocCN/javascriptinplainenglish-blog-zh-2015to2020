<html>
<head>
<title>How to use Node.js Event Emitter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js事件发射器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-we-can-use-node-js-event-emitter-5c9e39c38749?source=collection_archive---------3-----------------------#2020-08-13">https://javascript.plainenglish.io/how-we-can-use-node-js-event-emitter-5c9e39c38749?source=collection_archive---------3-----------------------#2020-08-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4ca0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><em class="kc">“事件发射器”</em>是一个Node.js核心模块，帮助对象之间的通信</h2></div><h2 id="a1ea" class="kd ke in bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">我们如何使用<em class="kc">事件发射器？</em></h2><p id="e44e" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh km li lj lk kq ll lm ln ku lo lp lq lr ig bi translated"><strong class="lb io"> 1。导入模块</strong></p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="552e" class="kd ke in lx b gy mb mc l md me">const eventEmitter = require('events');</span></pre><p id="8b46" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated"><strong class="lb io"> 2。创建一个扩展</strong> <code class="fe mk ml mm lx b"><strong class="lb io">eventEmitter</strong></code>的类</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="52d2" class="kd ke in lx b gy mb mc l md me">class myCustomClass extends eventEmitter {};</span></pre><p id="5091" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated"><strong class="lb io"> 3。从此类实例化</strong></p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="ac4b" class="kd ke in lx b gy mb mc l md me">const myObject = new myCustomClass();</span></pre><p id="4c31" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated"><strong class="lb io"> 4。添加事件监听器</strong></p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="66aa" class="kd ke in lx b gy mb mc l md me">myObject.on("myEventName", myFunction)</span></pre><p id="b388" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated"><strong class="lb io"> 5。发出一个事件</strong></p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="a6d7" class="kd ke in lx b gy mb mc l md me">myObject.emit("myEventName");</span></pre><p id="5ed4" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">因为我们发出了这个事件，所以我们的事件监听器调用了我们的<code class="fe mk ml mm lx b">function(myFunction)</code>。</p><p id="e9fe" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">这是我们使用事件发射器类的最简单的方式。</p><h2 id="c693" class="kd ke in bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">事件发射器的使用</h2><p id="2e8d" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh km li lj lk kq ll lm ln ku lo lp lq lr ig bi translated">你知道<code class="fe mk ml mm lx b">process</code>，它是全局对象中最重要的全局模块之一。</p><p id="18db" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated"><strong class="lb io">见本例:</strong></p><figure class="ls lt lu lv gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mn"><img src="../Images/ca70e7386febbf286c567acb2e0e4048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YwvbmPu3KvUzu2RElCyuRg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk">A simple example of the usage of event emitters.</figcaption></figure><p id="b3bf" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">有时我们想在进程退出时做些什么。当进程退出时，会发出一个事件，我们可以给它添加一个事件监听器(也可以在函数中使用退出代码)。</p><h2 id="10a6" class="kd ke in bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">我们如何通过事件传递数据:</h2><figure class="ls lt lu lv gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mz"><img src="../Images/cde8f597fcf41326de3e3998c091c9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJSnZ8GZiYfAfI7epYy6QA.png"/></div></div></figure><p id="9b19" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">如你所见，我们可以使用第二个 <em class="na">参数</em>将数据传递给事件监听器。</p><h2 id="8253" class="kd ke in bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">如果一个事件有多个侦听器，会发生什么情况？</h2><p id="f89b" class="pw-post-body-paragraph kz la in lb b lc ld jo le lf lg jr lh km li lj lk kq ll lm ln ku lo lp lq lr ig bi translated">事件监听器将按顺序执行！</p><figure class="ls lt lu lv gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mz"><img src="../Images/a6d4c8e4d2e33099e9c3c0be382093af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mrSBXphsjDJFIWGlNub77g.png"/></div></div></figure><p id="dd33" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">这是在我的终端上运行这段代码的结果:</p><figure class="ls lt lu lv gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nb"><img src="../Images/7eef0f925228ab10b552cbddd976d724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6km25AX6lneO-FlnNkdbA.png"/></div></div></figure><p id="9b22" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">正如您所看到的，函数是按顺序调用的。</p><p id="4277" class="pw-post-body-paragraph kz la in lb b lc mf jo le lf mg jr lh km mh lj lk kq mi lm ln ku mj lp lq lr ig bi translated">就是这样！希望您觉得这很有用:)</p></div></div>    
</body>
</html>
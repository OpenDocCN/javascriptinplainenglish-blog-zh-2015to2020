<html>
<head>
<title>Maintainable JavaScript — JavaScript/HTML Coupling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可维护的JavaScript——JavaScript/HTML耦合</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/maintainable-javascript-javascript-html-coupling-a3af2bc6820d?source=collection_archive---------10-----------------------#2020-09-25">https://javascript.plainenglish.io/maintainable-javascript-javascript-html-coupling-a3af2bc6820d?source=collection_archive---------10-----------------------#2020-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6d40e71686e9072a86eec4005d7d6fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tTVs4utdGBrMB6LR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@evertonvila?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Everton Vila</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="749a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果想继续使用代码，创建可维护的JavaScript代码很重要。</p><p id="9221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将通过查看JavaScript和HTML之间的松散耦合来了解创建可维护的JavaScript代码的基础。</p><h1 id="2f4d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让JavaScript远离HTML</h1><p id="2197" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该让JavaScript远离我们的HTML代码。</p><p id="e8b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很难调试HTML文件中的JavaScript代码。</p><p id="64a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6a37" class="mn lc iq mj b gy mo mp l mq mr">&lt;button onclick="doSomething()"&gt;click me&lt;/button&gt;</span></pre><p id="0753" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后当我们点击按钮时，调用我们的<code class="fe ms mt mu mj b">doSomething</code>函数。</p><p id="0ef0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">doSomething</code>可能在外部文件或脚本标签中。</p><p id="f11a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在功能可用之前点击按钮时，我们可能会遇到问题，这会导致JavaScript错误。</p><p id="2934" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">产生的错误可能会弹出，并导致按钮看起来什么也不做。</p><p id="45f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也很难维护，因为更改名称意味着我们还必须在HTML文件中查找名称。</p><p id="a197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能还想改变<code class="fe ms mt mu mj b">onclick</code>属性中的代码</p><p id="3bbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在HTML中嵌入JavaScript代码使得修改代码更加容易。</p><p id="d8de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的大部分JavaScript代码应该在外部文件中，并包含在带有脚本标签的页面中。</p><p id="d99d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">on</code>属性不应该用于将事件处理程序附加到HTML中。</p><p id="fc0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该通过用JavaScript获取元素并附加侦听器来将事件侦听器附加到元素:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="45e7" class="mn lc iq mj b gy mo mp l mq mr">function onClick() {<br/>  // ...<br/>}</span><span id="4e6a" class="mn lc iq mj b gy mv mp l mq mr">const btn = document.querySelector("button");<br/>btn.addEventListener("click", onClick, false);</span></pre><p id="0526" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe ms mt mu mj b">onClick</code>函数设置为按钮的点击处理程序。</p><p id="e4ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做的好处是<code class="fe ms mt mu mj b">onClick</code>与附加事件处理程序的代码在同一个文件中定义。</p><p id="6184" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果函数需要改变，那么我们需要改变JavaScript文件。</p><p id="7370" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果按钮在被点击时应该做别的事情，那么我们只需要修改文件中的代码。</p><p id="1214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">IE8和更早的没有<code class="fe ms mt mu mj b">addEventListener</code>方法。</p><p id="d8ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们必须使用<code class="fe ms mt mu mj b">attachEvent</code>方法。</p><p id="9c2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用jQuery，我们可以编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e35b" class="mn lc iq mj b gy mo mp l mq mr">$("button").on("click", onClick);</span></pre><p id="6e33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以在HTML中嵌入一个包含内嵌代码的脚本元素。</p><p id="33a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但这并不好，因为它将JavaScript代码保留在HTML中，并使代码变得更长。</p><p id="51a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该编写这样的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="71e7" class="mn lc iq mj b gy mo mp l mq mr">&lt;script&gt;<br/>  doSomething();</span><span id="9e6f" class="mn lc iq mj b gy mv mp l mq mr">&lt;/script&gt;</span></pre><p id="bd17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最好将所有JavaScript放在外部文件中，并将内联JavaScript放在我们的HTML之外。</p><p id="8e16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有助于我们更容易地调试代码。</p><p id="b3d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当脚本错误发生时，我们知道错误在JavaScript文件中。</p><p id="fcc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果JavaScript代码在我们的HTML文件中，那么我们必须搜索这两种文件。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ed0d08b20606abc3128545f7e33d7873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_6-KMTs55faAJwOs"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@huuduong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dương Hữu</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="e8fe" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="19a8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该把JavaScript代码放在HTML代码之外，这样我们可以更容易地调试它们。</p><h2 id="c08b" class="mn lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="48f4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>React Icon System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应图标系统</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-icon-system-4ec388ed24d5?source=collection_archive---------5-----------------------#2020-06-12">https://javascript.plainenglish.io/react-icon-system-4ec388ed24d5?source=collection_archive---------5-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7869" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图标在界面设计中起着至关重要的作用。它们当然可以用作视觉上的修饰，但是它们经常能够在没有额外文本的情况下传达它们的意思，这使得它们成为设计师和开发人员的便利工具。有许多不同的方法来建立图标系统。在过去，我曾经写过关于基于精灵技术的文章。从那以后，工具已经成熟，并且有了更好的方法。本文将向您展示如何使用<a class="ae kl" href="https://react-svgr.com/" rel="noopener ugc nofollow" target="_blank"> SVGR </a>建立一个图标系统——一个将SVG转换成React组件的工具。</p><h1 id="433e" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">准备SVG文件</h1><p id="c815" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们的起点是SVG文件——每个图标一个。你可能会使用设计工具，如Figma，Illustrator或Sketch来创建这些。</p><p id="2bb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设计这些图标时，请考虑使用一致的画板尺寸。这确保了所有图标都遵循相同的布局规则，并且可以互换使用。您还应该考虑在画板中添加一些填充，以保持图标内容在视觉上居中。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/fe3bd4e813f9e0f5f74866bd9dd32fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I389lfCmHS3DH1mWY-M2MQ.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk">Artboard size, live area and padding</figcaption></figure><h1 id="8d5d" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">生成图标组件</h1><p id="df96" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">SVGR将SVG文件转换成React组件。它以节点库、CLI工具和webpack插件的形式提供。</p><p id="4856" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Create React App自带<a class="ae kl" href="https://create-react-app.dev/docs/adding-images-fonts-and-files/#adding-svgs" rel="noopener ugc nofollow" target="_blank">预配置</a>SVGR。您可以导入SVG文件并将其用作组件。这是一个很好的开始。它减少了使用SVG和React所需的工作量。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="bc17" class="mk kn iq mg b gy ml mm l mn mo">import { ReactComponent as Logo } from './logo.svg';<br/>function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      {/* Logo is an actual React component */}<br/>      &lt;Logo /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="8096" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过使用SVGR CLI，您可以定制组件生成并进一步改进您的工作流。您可以为组件生成提供一个定制模板，甚至转换SVG本身。首先，使用以下命令安装CLI:</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="3fc9" class="mk kn iq mg b gy ml mm l mn mo">$ npm install @svgr/cli --save-dev</span></pre><p id="c4d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要创建图标，请运行:</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="e1f6" class="mk kn iq mg b gy ml mm l mn mo">$ npx svgr --icon --replace-attr-values "#000=currentColor" my-icon.svg</span></pre><p id="f0ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，<code class="fe mp mq mr mg b">--icon</code>标志。它为我们执行几项重要任务:</p><ol class=""><li id="31cf" class="ms mt iq jp b jq jr ju jv jy mu kc mv kg mw kk mx my mz na bi translated">它将宽度和高度值设置为<code class="fe mp mq mr mg b">1em</code>,以便用继承的字体大小缩放SVG。</li><li id="f5c5" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">它保留了<code class="fe mp mq mr mg b">viewBox</code>,以确保SVG以正确的纵横比缩放。</li></ol><p id="1299" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mp mq mr mg b">--replace-attr-values "#000=currentColor"</code>标志用<code class="fe mp mq mr mg b">currentColor</code>替换选择的颜色，允许你使用<code class="fe mp mq mr mg b">font-color</code> CSS属性控制图标颜色。</p><p id="0915" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在幕后，SVGR还使用<a class="ae kl" href="https://github.com/svg/svgo" rel="noopener ugc nofollow" target="_blank"> SVGO </a>来优化SVG文件，然后将它转换成一个组件。这是您可以预期的输出示例:</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="a6e9" class="mk kn iq mg b gy ml mm l mn mo">// MyIcon.js</span><span id="a940" class="mk kn iq mg b gy ng mm l mn mo">import * as React from 'react';<br/><br/>function SvgMyIcon(props) {<br/>  return (<br/>    &lt;svg<br/>      width="1em"<br/>      height="1em"<br/>      viewBox="0 0 24 24"<br/>      fill="none"<br/>      stroke="currentColor"<br/>      strokeWidth={2}<br/>      strokeLinecap="round"<br/>      strokeLinejoin="round"<br/>      {...props}<br/>    &gt;<br/>      &lt;path d="M22 12h-4l-3 9L9 3l-3 9H2" /&gt;<br/>    &lt;/svg&gt;<br/>  );<br/>}<br/><br/>export default SvgMyIcon;</span></pre><p id="8bed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要转换整个图标目录，请使用:</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="3c0f" class="mk kn iq mg b gy ml mm l mn mo">$ npx svgr --icon --replace-attr-values "#000=currentColor" -d icons icons</span></pre><p id="4d49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我通常将这些生成的图标组件视为构建工件。所有的SVG文件都位于一个<code class="fe mp mq mr mg b">icon</code>目录中，并且该目录中的<code class="fe mp mq mr mg b">.js</code>文件被git忽略。然后使用npm任务在构建时生成图标组件。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="343f" class="mk kn iq mg b gy ml mm l mn mo">// package.json</span><span id="baf9" class="mk kn iq mg b gy ng mm l mn mo">{<br/>  ...<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build",<br/>    "prebuild": "npm run icons",    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>    "icons": "svgr --icon --replace-attr-values '#000=currentColor' -d src/icons src/icons"  }<br/>}</span></pre><h1 id="6ed2" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">自定义图标组件</h1><p id="2b50" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">您可以提供自定义模板来修改生成的组件代码。下面的模板创建了一个图标组件，该组件利用样式化组件来控制其样式。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="83bc" class="mk kn iq mg b gy ml mm l mn mo">// icon-template.js</span><span id="cfdf" class="mk kn iq mg b gy ng mm l mn mo">function template(<br/>  { template },<br/>  opts,<br/>  { imports, componentName, props, jsx, exports }<br/>) {<br/>  const styledComponentName = 'Styled' + componentName;<br/><br/>  return template.ast`<br/>    ${imports}<br/>    import styled from 'styled-components';<br/><br/>    const SVG = (${props}) =&gt; ${jsx};<br/><br/>    const ${componentName} = styled(SVG)\`<br/>      display: \${(props) =&gt; (props.block ? 'block' : 'inline-block')};<br/>      font-size: \${(props) =&gt; (props.fontSize ? props.fontSize : '16px')};<br/>      color: \${(props) =&gt; (props.color ? props.color : '#ccc')};<br/>      vertical-align: middle;<br/>      shape-rendering: inherit;<br/>      transform: translate3d(0, 0, 0);<br/>    \`;<br/><br/>    export default ${componentName};<br/>  `;<br/>}<br/><br/>module.exports = template;</span></pre><p id="39bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于半径设计系统，我们使用的是类型脚本、样式组件和样式系统。我们的<a class="ae kl" href="https://github.com/rangle/radius/blob/master/packages/ds/icon-template.js" rel="noopener ugc nofollow" target="_blank">定制模板</a>生成了正确键入并与我们的设计令牌适当连接的图标。</p><h1 id="4e28" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">复合图标组件</h1><p id="5646" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">我们可以通过将所有生成的图标组合到一个复合图标组件中来进一步简化图标的使用。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="a93f" class="mk kn iq mg b gy ml mm l mn mo">import { Icons } from 'ds';<br/><br/>export const App = () =&gt; (<br/>  &lt;&gt;<br/>    &lt;Icons.Airplay aria-title="airplay the video" /&gt;<br/>    &lt;Icons.AlertCircle aria-title="error" /&gt;<br/>  &lt;/&gt;<br/>);</span></pre><p id="6185" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SVGR允许我们指定自定义索引模板。该模板用于转换SVG目录时生成<code class="fe mp mq mr mg b">index.js</code>文件。以下模板生成一个复合组件。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="9e54" class="mk kn iq mg b gy ml mm l mn mo">// icon-index-template.js</span><span id="a30c" class="mk kn iq mg b gy ng mm l mn mo">const path = require('path');<br/><br/>function indexTemplate(files) {<br/>  const compoundExportEntries = [];<br/><br/>  const importEntries = files.map(file =&gt; {<br/>    const componentName = path.basename(file, path.extname(file));<br/>    compoundExportEntries.push(componentName);<br/><br/>    return `import { default as ${componentName} } from './${componentName}';`;<br/>  });<br/><br/>  return `${importEntries.join('\n')}<br/><br/>    export const Icons = {<br/>      ${compoundExportEntries.join(',\n  ')}<br/>    };<br/>  `;<br/>}<br/><br/>module.exports = indexTemplate;</span></pre><p id="6986" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它为所有组件添加一个import语句，根据文件名为组件生成一个名称，最后将它们合并到<code class="fe mp mq mr mg b">Icons</code>对象中。</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="1e9c" class="mk kn iq mg b gy ml mm l mn mo">// src/icons/index.js</span><span id="cb7f" class="mk kn iq mg b gy ng mm l mn mo">import { default as Activity } from './Activity';<br/>import { default as Airplay } from './Airplay';<br/>import { default as AlertCircle } from './AlertCircle';<br/>import { default as AlertOctagon } from './AlertOctagon';<br/><br/>export const Icons = {<br/>  Activity,<br/>  Airplay,<br/>  AlertCircle,<br/>  AlertOctagon,<br/>};</span></pre><p id="31de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是npm任务的最终版本:</p><pre class="lq lr ls lt gt mf mg mh mi aw mj bi"><span id="76d6" class="mk kn iq mg b gy ml mm l mn mo">// package.json</span><span id="0ea0" class="mk kn iq mg b gy ng mm l mn mo">{<br/>  "scripts": {<br/>    ...<br/>    "icons": "svgr --icon --replace-attr-values '#000=currentColor' --template icon-template.js --index-template ./icon-index-template.js -d src/icons src/icons"<br/>  }<br/>}</span></pre><p id="04cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SVGR是一个非常棒的工具。您可以使用现成的“创建反应应用程序”。您也可以对其进行自定义，以更好地适应您的工作流程。该示例的完整代码可在<a class="ae kl" href="https://github.com/winkerVSbecks/react-icons-demo" rel="noopener ugc nofollow" target="_blank">或</a>处获得。对于一个更复杂的例子，我建议查看Radius <a class="ae kl" href="https://github.com/rangle/radius/tree/master/packages/ds" rel="noopener ugc nofollow" target="_blank">源代码</a>。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Create a Voice Note-Taking App in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript创建一个语音笔记应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/speech-recognition-javascript-create-vocal-note-taking-app-in-5-minutes-11444069d8e5?source=collection_archive---------9-----------------------#2020-12-14">https://javascript.plainenglish.io/speech-recognition-javascript-create-vocal-note-taking-app-in-5-minutes-11444069d8e5?source=collection_archive---------9-----------------------#2020-12-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="07a2" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在JavaScript中使用语音识别</h2></div><p id="0ff7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">语音识别不需要任何库或外部API，我们可以直接在浏览器中实现。</p><p id="bf36" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么什么是语音识别呢？是一个全局变量，存在于浏览器的窗口对象中。如果您在浏览器中打开任何控制台，并键入以下内容，您可以自己检查。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="a9b2" class="lh li in ld b gy lj lk l ll lm">window.SpeeechRecognition</span></pre><p id="de9c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这适用于Firefox，对于Chrome，您需要使用以下命令:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="626e" class="lh li in ld b gy lj lk l ll lm">window.webkitSpeechRecognition</span></pre><p id="e4e5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们需要在文件中调用它。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/cbe5406b79a9d0264cb4b7ee90720134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gSK8SmooEfEi-13k.png"/></div></div></figure><p id="ad38" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们需要创建一个新的<code class="fe lv lw lx ld b">SpeechRecognition</code>实例并赋给一个变量。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/8bdcd88885db0c5c27c58fbaaaecc41b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ejf89tcbMqNrLBPs.png"/></div></div></figure><p id="79c8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了能够在说话时看到结果，我们需要设置一个叫做<code class="fe lv lw lx ld b">interimResults true</code>的东西:</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/9efa5aee621a266c6a6d49b9a40d0c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uEDvQ3VImUDWTufM.png"/></div></div></figure><p id="71c2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您将它设置为false，将等到您结束讲话时显示结果，但理想情况下，您希望在讲话时看到您在说什么，因此最好将该值设置为<code class="fe lv lw lx ld b">true</code>。</p><p id="9421" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在为了测试它是否工作，您可以创建一个按钮来启动事件监听器。在HTML中创建一个简单的按钮，并将HTML连接到您的JavaScript文件，给按钮元素一个您可以定位的类，例如btn或mic。</p><p id="cf17" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">HTML文件:</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/4e69e69ad8d780d2428d12c0b99698c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OLJtiJOGzHobFHwI.png"/></div></div></figure><p id="b232" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在我的按钮上添加了一点表情符号，给了一些风格。</p><p id="a04d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在选择JS文件中的mic类元素，并将其存储在一个变量中。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/affb0887ca439763fe8d992325fce6c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U2ZyPxwLP0DJ0jfU.png"/></div></div></figure><p id="57f2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们需要向按钮添加一个事件监听器来启动<code class="fe lv lw lx ld b">SpeechRecognition</code>，在这种情况下，我们的事件将监听点击。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/b30d6e84f39ee02be2ccdb8b2467a0f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DYGx-U-yB3fdCNG2.png"/></div></div></figure><p id="9393" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在事件侦听器中，我们调用<code class="fe lv lw lx ld b">recognition. start()</code>方法开始记录。现在一切都设置好了，但是为了查看并能够处理结果，我们还需要向我们的识别实例添加一个事件侦听器。</p><p id="3a46" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这种情况下，我们将听到一个结果事件:</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/118bec5afff48c2b1952f5891b2ecfc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vks5ZsXu-cLoJeXs.png"/></div></div></figure><p id="977c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前，我们可以在浏览器中控制台记录结果，看看它是否工作。现在在浏览器上打开index.html，当你点击按钮时，你可能会得到如下信息，点击允许开始记录。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div class="ab gu cl ly"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="c12e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，如果您对着麦克风说话，您应该会在控制台中看到一些事件正在运行，如下例所示。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div class="ab gu cl ly"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="3267" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">太神奇了！现在，我们已经能够将此功能添加到我们的应用程序中，以访问结果，并查看您所说的是否正确记录</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b96f" class="lh li in ld b gy lj lk l ll lm">e.results[0][0].transcript</span></pre><p id="747c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">事件访问索引0的结果索引0，您会在抄本中找到它。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lz"><img src="../Images/65619dcabb5537f1b3261420a83a038f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M56RmZP-cErh6g_j.png"/></div></div></figure><p id="4877" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在做同样的事情并说话，你应该看到结果而不是事件，我会说“希望你喜欢我的博客。”</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div class="ab gu cl ly"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="1c43" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">酷！</p><p id="41b4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们将在HTML中显示它，并创建一个简单的语音笔记应用程序。</p><p id="6cf4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们需要在HTML中创建一个<code class="fe lv lw lx ld b">&lt;div&gt;</code>元素，并给出<code class="fe lv lw lx ld b">words</code>的类。</p><p id="c514" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">HTML:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="2f1c" class="lh li in ld b gy lj lk l ll lm">&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;&lt;script defer src='index.js'&gt;&lt;/script&gt;&lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="words"&gt;&lt;/div&gt;&lt;button type="button" class="mic" &gt;🎤&lt;/button&gt;&lt;/body&gt;&lt;/html&gt;</span></pre><p id="81ad" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的JavaScript文件中，我们需要获取这个元素并创建一个<code class="fe lv lw lx ld b">p</code>元素，我们将把我们的结果插入到这个<code class="fe lv lw lx ld b">p</code>元素中，并将它附加到<code class="fe lv lw lx ld b">div</code>元素上，以便能够在浏览器中看到我们的结果。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div class="ab gu cl ly"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="76f6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们可以在我们的浏览器中测试它，看看它是否工作。</p><figure class="ky kz la lb gt lo gh gi paragraph-image"><div class="ab gu cl ly"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="5f2a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢您的阅读。我希望你觉得这有用！</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Conditionally Render Elements in Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Vue中有条件地渲染元素</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/render-elements-conditionally-with-vue-js-v-show-and-performance-f6a69a338412?source=collection_archive---------4-----------------------#2020-03-05">https://javascript.plainenglish.io/render-elements-conditionally-with-vue-js-v-show-and-performance-f6a69a338412?source=collection_archive---------4-----------------------#2020-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bd9f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">虚拟展示和表演</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ee15d5b9191f1c0f42bb5ebfd614266e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BlBZCNBxMSQ-Nwks"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@cristina_gottardi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cristina Gottardi</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9f09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="6253" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将通过使用<code class="fe ls lt lu lv b">v-show</code>指令来查看使用Vue.js在屏幕上有条件地呈现项目的各种方法。</p><p id="df7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们将通过各种方式来看看组合<code class="fe ls lt lu lv b">v-if</code>和<code class="fe ls lt lu lv b">v-for</code>的性能含义。</p><h1 id="ec47" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">虚拟展示</h1><p id="7ae4" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">当我们传递给它的表达式是真的时，指令用来显示一些东西。</p><p id="5aed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以如下使用它:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="9db7" class="mx lx iq lv b gy my mz l na nb">&lt;h1 v-show="show"&gt;Hi&lt;/h1&gt;</span></pre><p id="38ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">v-show</code>和<code class="fe ls lt lu lv b">v-if</code>的区别在于<code class="fe ls lt lu lv b">v-show</code>元素保留在DOM中，即使被隐藏了。</p><p id="507f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，<code class="fe ls lt lu lv b">v-if</code>元素通过从DOM中移除来隐藏。</p><p id="30c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，<code class="fe ls lt lu lv b">v-if</code>删除事件监听器，并且当<code class="fe ls lt lu lv b">v-if</code>的表达式为真时，如果条件块中的子组件被隐藏并重新创建，则它们会被销毁。</p><p id="9096" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">v-if</code>元素的不同之处还在于，如果在条件渲染期间条件为falsy，它将不会做任何事情。直到表达式变得真实，它才会被渲染。</p><p id="fc3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">v-if</code>比<code class="fe ls lt lu lv b">v-show</code>具有更高的切换性，因为在切换时必须进行DOM操作和附加事件监听器。</p><p id="a5bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，如果事情需要经常切换，<code class="fe ls lt lu lv b">v-show</code>效率更高。</p><h1 id="04e5" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">v-if带v-for</h1><p id="8d21" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">如果一起使用，<code class="fe ls lt lu lv b">v-for</code>比<code class="fe ls lt lu lv b">v-if</code>优先级高。</p><p id="0d94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，我们不应该一起使用它们，因为<code class="fe ls lt lu lv b">v-for</code>的优先级高于<code class="fe ls lt lu lv b">v-if</code>。</p><p id="f67a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想在呈现数组中的项目时过滤掉一些元素，我们应该使用计算属性。</p><p id="fcf2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们只呈现一小部分数组元素，它必须遍历整个列表，然后检查我们设置的表达式是否正确。</p><p id="d093" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，下面的JavaScript和HTML代码:</p><p id="dacf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">src/index.js</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="df25" class="mx lx iq lv b gy my mz l na nb">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    persons: ["Joe", "Jane", "Mary"]<br/>  }<br/>});</span></pre><p id="5ee1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">index.html</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="2841" class="mx lx iq lv b gy my mz l na nb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kv" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-for="person in persons" v-if='person !== "Joe"'&gt;<br/>        {{person}}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6764" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不是很有效，因为每次循环被渲染时，Vue必须遍历每个元素，然后检查<code class="fe ls lt lu lv b">person !== “Joe”</code>是否是<code class="fe ls lt lu lv b">true</code>。</p><p id="c1fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，我们应该使用如下计算属性:</p><p id="aec2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">src/index.js</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="5d50" class="mx lx iq lv b gy my mz l na nb">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    persons: ["Joe", "Jane", "Mary"]<br/>  },<br/>  computed: {<br/>    personsWithoutJoe() {<br/>      return this.persons.filter(p =&gt; p !== "Joe");<br/>    }<br/>  }<br/>});</span></pre><p id="01ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">index.html</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="5194" class="mx lx iq lv b gy my mz l na nb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kv" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-for="person in personsWithoutJoe"&gt;<br/>        {{person}}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="77cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码效率更高，因为只有在<code class="fe ls lt lu lv b">persons</code>改变时才会重新计算<code class="fe ls lt lu lv b">personsWithoutJoe</code>。</p><p id="3f94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，在渲染过程中只迭代<code class="fe ls lt lu lv b">personsWithoutJoe</code>中的项目，所以<code class="fe ls lt lu lv b">v-for</code>不必遍历所有项目。</p><p id="3dc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模板中的逻辑也更少，这使它保持了整洁。维护就容易多了。</p><p id="870a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以通过将<code class="fe ls lt lu lv b">v-if</code>移动到具有<code class="fe ls lt lu lv b">v-for</code>的父元素来获得性能优势，因此只有在满足条件时才会呈现元素内部的内容。</p><p id="472f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我们有:</p><p id="fda0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">src/index.js</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="1cc7" class="mx lx iq lv b gy my mz l na nb">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    persons: ["Joe", "Jane", "Mary"],<br/>    show: false<br/>  }<br/>});</span></pre><p id="a7b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">index.html</code>:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="ccc9" class="mx lx iq lv b gy my mz l na nb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kv" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-if="show"&gt;<br/>        &lt;div v-for="person in persons"&gt;<br/>          {{person}}<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ea6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于<code class="fe ls lt lu lv b">show</code>是<code class="fe ls lt lu lv b">false</code>，所以不渲染任何内容。Vue不需要工作就能看到里面的东西。</p><p id="e86d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这比:</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="9c91" class="mx lx iq lv b gy my mz l na nb">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kv" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-for="person in persons" v-if="show"&gt;<br/>        {{person}}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e9c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，Vue必须遍历每个条目，并检查<code class="fe ls lt lu lv b">v-if</code>中的条件是否返回真值。</p><p id="ebda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如我们所见，尽管代码只是略有不同，但性能影响是很大的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/e933e240b0892440e4f66dd404104cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y8_oYtFv5IVP7Tpd"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@jcremer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jérémie Crémer</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5db4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="6035" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><code class="fe ls lt lu lv b">v-show</code>与<code class="fe ls lt lu lv b">v-if</code>相似，除了带有<code class="fe ls lt lu lv b">v-show</code>的项目无论是否显示都会保留在DOM中。</p><p id="4807" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有，组合<code class="fe ls lt lu lv b">v-for</code>和<code class="fe ls lt lu lv b">v-if</code>的时候要小心。</p><p id="c845" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，如果应用于相同的元素，<code class="fe ls lt lu lv b">v-for</code>优先于<code class="fe ls lt lu lv b">v-if</code>。</p><p id="47a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们不应该在同一个元素上使用它们，因为Vue必须在每次迭代中检查每个元素的<code class="fe ls lt lu lv b">v-if</code>条件。</p><p id="1965" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想要呈现一个过滤列表，我们应该使用一个计算属性。</p><p id="589a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想检查是否应该渲染整个数组，我们应该将<code class="fe ls lt lu lv b">v-if</code>移动到元素<code class="fe ls lt lu lv b">v-for</code>的父元素，这样如果<code class="fe ls lt lu lv b">v-if</code>的条件是falsy，那么Vue就不会渲染那里的项目。</p></div></div>    
</body>
</html>
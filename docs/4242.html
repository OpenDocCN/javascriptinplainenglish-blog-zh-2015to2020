<html>
<head>
<title>4 Things I Learned from Reading the React Hooks API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从阅读React Hooks API中学到的4件事</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/4-things-i-learned-from-reading-the-react-hooks-api-ad0d48374901?source=collection_archive---------6-----------------------#2020-11-27">https://javascript.plainenglish.io/4-things-i-learned-from-reading-the-react-hooks-api-ad0d48374901?source=collection_archive---------6-----------------------#2020-11-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b6af" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让你的React Hooks知识更上一层楼</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d847311746913105c1aeb478aa88f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yDr55T7WI4Vrnyb0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@teracomp?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dave Phillips</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1d83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我已经在一些项目中使用了React钩子，并且对基本钩子有了相当好的理解，比如useState、useEffect和useContext。我希望将我的知识提升到一个新的水平，并在即将到来的项目中应用更高级的钩子，所以我决定通读一下<a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html" rel="noopener ugc nofollow" target="_blank">钩子API参考</a>。</p><p id="ec40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对React的编程和使用还很陌生，但是我觉得React文档写得很好，很容易理解。下面是我通读API参考后学到的4件事。请注意，本文假设您对React有基本的了解。</p><h1 id="52cc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">首先，什么是React钩子？</h1><p id="637e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">React挂钩仍然是新的，在2019年2月React 16.8发布时发布。钩子允许您在功能组件中使用状态和其他React特性。钩子是JavaScript函数，有两个特殊的规则:</p><ol class=""><li id="b30c" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated"><strong class="ky ir">只调用顶层的钩子</strong> —钩子不应该在循环、条件或嵌套函数中调用。如果你需要运行一个条件检查，你可以把它放在钩子函数里面。</li><li id="1f03" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated"><strong class="ky ir">只从React函数中调用钩子</strong> —钩子不应该从普通的JavaScript函数中调用。相反，从一个React功能组件调用它们或者创建一个自定义钩子。我们将在后面的文章中研究如何做到这一点。保持警惕！</li></ol></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><h1 id="cbef" class="ls lt iq bd lu lv nk lx ly lz nl mb mc jw nm jx me jz nn ka mg kc no kd mi mj bi translated">1.清理使用效果挂钩</h1><p id="1095" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">清理一个<a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html#useeffect" rel="noopener ugc nofollow" target="_blank"> useEffect </a>钩子与在一个基于类的组件中调用componentWillUnmount具有相同的功能。这个函数将在组件从DOM中移除之前被调用。我们可能使用它的一些例子是删除事件侦听器、使计时器无效、取消网络请求或清除在componentDidMount中创建的任何订阅，或者在我们的例子中是在useEffect运行时。</p><p id="2dbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要清理useEffect挂钩，我们需要返回一个函数。该函数将在需要清理时运行。因为useEffect为每个渲染运行，所以在下次运行效果之前，清理功能也将清理以前渲染的效果。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="67ef" class="nu lt iq nq b gy nv nw l nx ny">useEffect(() =&gt; {<br/>  // do something</span><span id="628f" class="nu lt iq nq b gy nz nw l nx ny">  return () =&gt; {<br/>    // clean up <br/>  };<br/>}, []);</span></pre><p id="53d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外注意，useEffect函数可以接受第二个参数，这是一个空数组，如上所示。传递到数组中的任何值都将决定钩子何时运行。如果您传递一个空数组作为第二个参数，那么钩子将只运行一次，在初始渲染时，</p><h1 id="8ec9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.何时使用useReducer</h1><p id="802b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank"> useReducer </a>是useState的替代。useReducer通常会用在有复杂状态逻辑或者你的下一个状态依赖于你的当前状态的时候。useReducer的逻辑和设置类似于Redux的工作方式，使用动作、Reducer、分派和状态。</p><p id="b6bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对useReducer的更多了解让我思考Hooks的useContext和useReducer是否可以取代React应用中的Redux。下面的文章帮助我更好地理解了这个话题。</p><p id="777a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">TL；博士</strong></p><ul class=""><li id="9bd3" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr oa mv mw mx bi translated">将useState用于基本和简单/小型应用程序。</li><li id="e87d" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr oa mv mw mx bi translated">对于高级/中型应用程序，使用useState + useReducer + useContext。</li><li id="176a" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr oa mv mw mx bi translated">对复杂/大型应用程序使用useState/useReducer + Redux。</li></ul><div class="ob oc gp gr od oe"><a href="https://www.robinwieruch.de/redux-vs-usereducer" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">React的useReducer Hook vs Redux - RWieruch</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">由于React钩子已经被释放，函数组件可以使用状态和副作用。有两个钩子是…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">www.robinwieruch.de</p></div></div><div class="on l"><div class="oo l op oq or on os kp oe"/></div></div></a></div><h1 id="18b1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.什么是记忆化？</h1><p id="8bfc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我不确定什么是记忆，所以在遇到<a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html#usememo" rel="noopener ugc nofollow" target="_blank">使用备忘录</a>和<a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html#usecallback" rel="noopener ugc nofollow" target="_blank">使用回调</a>挂钩后，它引导我了解更多。对于那些不熟悉它的人来说，<a class="ae kv" href="https://en.wikipedia.org/wiki/Memoization" rel="noopener ugc nofollow" target="_blank">记忆化</a>是一种性能优化技术，用于帮助加速计算机程序。它通过存储函数调用的结果并返回缓存的结果来实现这一点。</p><p id="d250" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，useMemo和useCallback函数应该只用于昂贵的计算。对于简单的任务，它实际上会降低性能，并产生其他副作用。如果你想了解更多，这里有一篇我读过的有趣的文章。</p><div class="ob oc gp gr od oe"><a href="https://kentcdodds.com/blog/usememo-and-usecallback" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">何时使用备忘录和使用回调</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">性能优化总是有代价的，但并不总是有好处的。让我们谈谈成本和…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">kentcdodds.com</p></div></div><div class="on l"><div class="ot l op oq or on os kp oe"/></div></div></a></div><h1 id="d6ce" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.用useRef钩子管理焦点</h1><p id="5974" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><a class="ae kv" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"> useRef </a>挂钩有两个主要用途；访问DOM节点或跟踪可变变量。如果您熟悉基于类的组件，这类似于createRef。这将派上用场的一个例子是管理焦点、文本选择或媒体播放。这可以用useRef钩子来完成。在下面的例子中，我们创建了一个对搜索输入的引用，并将焦点设置在按钮点击上。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="e622" class="nu lt iq nq b gy nv nw l nx ny">function App() {<br/>  const searchInput = useRef(null);</span><span id="a229" class="nu lt iq nq b gy nz nw l nx ny">  const focusSearchInput = () =&gt; searchInput.current.focus();</span><span id="614a" class="nu lt iq nq b gy nz nw l nx ny">  return (<br/>    &lt;div&gt;<br/>      &lt;input ref={searchInput} type="text" /&gt;<br/>      &lt;button onClick={focusSearchInput}&gt;Focus Search Input&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="aa50" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！浏览文档总是学习和提高技能的好方法。如果您正在学习React或任何新的语言、框架或库，我建议您花些时间通读文档。总有新的东西你可以学习！</p><p id="f4f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的下一篇文章中，我将看看如何用React构建定制钩子。</p><p id="838d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您刚刚开始学习React，这里有一些我在旅程中发现有用的参考资料。祝你好运，编码快乐！</p><p id="5340" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">官方React文档</strong>——<a class="ae kv" href="https://reactjs.org/tutorial/tutorial.html" rel="noopener ugc nofollow" target="_blank">教程:React简介</a></p><p id="eaf5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Udemy </strong> — <a class="ae kv" href="https://www.udemy.com/course/react-redux/" rel="noopener ugc nofollow" target="_blank">现代与Redux【2020更新】</a></p><p id="1739" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">Youtube</strong>——<a class="ae kv" href="https://www.youtube.com/playlist?list=PL4cUxeGkcC9ij8CfkAY2RAGb-tmkNwQHG" rel="noopener ugc nofollow" target="_blank">完成React教程(带Redux) </a></p></div></div>    
</body>
</html>
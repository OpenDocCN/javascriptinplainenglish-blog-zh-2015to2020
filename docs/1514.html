<html>
<head>
<title>Building Vue Enterprise Application: Part 2. Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建Vue企业应用程序:第2部分。服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-vue-enterprise-application-part-2-services-f7ec400190e7?source=collection_archive---------0-----------------------#2020-03-26">https://javascript.plainenglish.io/building-vue-enterprise-application-part-2-services-f7ec400190e7?source=collection_archive---------0-----------------------#2020-03-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ea5a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">清洁架构原则在企业前端应用中的应用</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3146140a79e913132474ac1eb8968cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqlepJJQr0WRV7PAcKy_Hg.png"/></div></div></figure><h1 id="91fa" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">目录</h1><ul class=""><li id="d4c1" class="lg lh in li b lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">介绍</li><li id="78ad" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">需求分析</li><li id="73cf" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">测试优先(TDD)</li><li id="3fb5" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">服务，为您服务！</li><li id="7195" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">供应者</li><li id="4fcf" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">结论</li></ul></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="ebff" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">介绍</h1><p id="5713" class="pw-post-body-paragraph mp mq in li b lj lk jo mr ll lm jr ms ln mt mu mv lp mw mx my lr mz na nb lt ig bi translated">上次我们基于<a class="ae nc" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">清洁建筑</a>的理念为我们的博客建立了一个坚实的基础。我们建立了文章和评论的规则和数据结构:我们应用程序的主要构件。在这篇文章中，我们将更进一步:我们将编写服务。</p><p id="ca83" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">什么是“服务”？根据上下文和谈话对象的不同，你可能会得到完全不同的定义和解释。在我们的例子中，我将大胆地把它们命名为“执行核心业务操作的东西”从架构的角度来看，它是依赖关系图中的下一个圆圈。</p><p id="3e0f" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">从技术角度来看，它可以是任何东西:类、函数、一组函数和一个有方法的对象。唯一的规则:远离“细节”:框架、商店、UI等。唯一的依赖服务应该是实体或其他服务。</p><p id="9afc" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">从概念的角度来看，服务的目标是在实体上执行所需的业务操作。如果你熟悉叔叔的鲍勃的书“干净的建筑”，你可能会注意到一些偏差。在他的书中，鲍伯·马丁将下一个循环描述为“用例”我不是在重新发明轮子，而是在“服务”的保护伞下组合用例如果您熟悉后端世界中非常流行的存储库服务模式，您可能会发现许多相似之处。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="4e2b" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">需求分析</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/476eae898de3bfdc563d876b76ad2b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g4IagnB1HEzA56lG"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Photo by <a class="ae nc" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Isaac Smith</a> on <a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="190c" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">让我们从需求分析开始我们的旅程。该应用程序是一个博客，但我们不会复制所有可能的功能。让我们假设我们的业务团队和我们使用增量方法，现在，我们正在构建最小的有价值的产品:MVP。</p><p id="bcef" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">英国电信给我们带来了以下故事:</p><ul class=""><li id="5d47" class="lg lh in li b lj nd ll ne ln nn lp no lr np lt lu lv lw lx bi translated">作为用户，我应该能够在主页上看到所有的文章</li><li id="3e84" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">作为一个用户，我应该能够从那里导航到一个页面，代表一个特定的文章，并看到完整的文章</li><li id="8a06" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">作为一个用户，我应该能够在这个页面上留下评论</li></ul><p id="a91c" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">(提醒一下，您可以在这里找到一个工作演示示例<a class="ae nc" href="https://vue-vuex-ts-services.herokuapp.com" rel="noopener ugc nofollow" target="_blank"/></p><p id="4ccf" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">这些都是很长的故事，现在，我们不关心其中的UI部分。我们在想，“数据第一。”。我们可以将它们转化为仅针对数据/逻辑的技术任务:</p><ul class=""><li id="0b4d" class="lg lh in li b lj nd ll ne ln nn lp no lr np lt lu lv lw lx bi translated">实现获取所有文章的方法</li><li id="1c3c" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">实现一种通过Id获取一篇文章的方法</li><li id="5b5c" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">实现为文章创建新评论的方法</li></ul></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="cc1a" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">首先测试</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nq"><img src="../Images/a6420e41f667ba66e8ddcf34e063fd78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3cvDLQPV3_q3McS0"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Photo by <a class="ae nc" href="https://unsplash.com/@siora18?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Siora Photography</a> on <a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="94e1" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">源代码可在<a class="ae nc" href="https://github.com/soloschenko-grigoriy/vue-vuex-ts" rel="noopener ugc nofollow" target="_blank">repo</a>中获得。随意切换到“实体”如果你跳过了前一篇文章，在项目中分支。如果您完成了实体部分，并且一切正常，那么您就可以开始了。</p><p id="e95d" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">关于服务文件夹结构，我将遵循我们用于实体的相同方法:</p><pre class="kd ke kf kg gt nr ns nt nu aw nv bi"><span id="b60a" class="nw kp in ns b gy nx ny l nz oa">/src/services/articles<br/>contains all Articles Services code, specifically:</span><span id="9c09" class="nw kp in ns b gy ob ny l nz oa">/src/services/articles/articles.ts<br/>actual Article Service</span><span id="bbfc" class="nw kp in ns b gy ob ny l nz oa">/src/services/articles/articles.types.ts <br/>types for Article Service</span><span id="1ae5" class="nw kp in ns b gy ob ny l nz oa">/src/services/articles/articles.spec.ts <br/>unit tests for Article Service</span><span id="1ca8" class="nw kp in ns b gy ob ny l nz oa">/src/services/articles/articles.mocks.ts <br/>mocks for Article Service</span><span id="c9a8" class="nw kp in ns b gy ob ny l nz oa">/src/services/articles/index.ts <br/>barrel file for Article Service</span><span id="3ed5" class="nw kp in ns b gy ob ny l nz oa">/src/services/index.ts <br/>barrel file for all Services</span></pre><p id="38fa" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">让我们创建这些文件。我还会填写木桶文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Updating barrel files</figcaption></figure><p id="218b" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">太好了，是时候让我们写一些类型和测试了。根据需求，有三种用例:获取所有文章，通过id获取一篇文章，并为文章创建评论。让我们为他们定义签名:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">ArticleService Protocol</figcaption></figure><p id="1b33" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">第一种方法很简单:获取并返回所有文章。</p><p id="8fe1" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">getOneById需要一个数字Id作为参数，如果它存在或未定义，则返回一个文章。最后，“createComment”希望文章的评论数据和ID能够附加新创建的评论。</p><p id="52b8" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated"><em class="oe">注意，我们可以创建一个单独的评论服务。但是由于没有专门的API(或者单独的JSON文件)用于注释，我觉得没有必要。但是您的实际应用程序可能会有所不同。</em></p><p id="a731" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">现在，由于服务是一个普通的TS/JS代码，并且我们预先为文章和评论实体创建了模拟，所以编写测试是绝对容易和愉快的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">ArticleService Spec</figcaption></figure><p id="8b9a" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">最后两个测试值得特别注意。如果用于创建注释的数据无效，我预计会抛出一个错误。服务应该检查实体并验证所提供的数据，否则会出现错误。我发现强调这一点很重要:<strong class="li io">错误处理通常是应用程序的关键部分</strong>。验证规则可能不受UI定义或控制:React/Vue组件、Redux/Vuex存储、Thunks/Sagas等。验证规则可能 <strong class="li io"> <em class="oe">只有</em> </strong> <em class="oe">被实体管理，而服务利用并执行它们</em>。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="a522" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">服务，为您服务！</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/dffdb478d61c3ff620f8aa9a19177c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JKrXFeltkZKv5KsC"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Photo by <a class="ae nc" href="https://unsplash.com/@lefterisk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lefteris kallergis</a> on <a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="28ac" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">是时候写下一些产品代码了。任务感觉很清楚:创建一个类和三个方法。例如，“getAll”返回所有数据:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Articles Service</figcaption></figure><p id="392d" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">但是什么是数据呢？如果有远程后端/API，那么“数据”将是对该API的请求的结果。但是，如果您还记得，我们使用本地文件来简化事情。因此，在我们的例子中，数据是data.json的内容。假设webpack设置为导入JSON文件，这应该没有技术问题。但是会有一个<strong class="li io">架构问题</strong>。</p><p id="3d8c" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">你看，导入这个文件意味着服务在结构上依赖于它。如果源代码改变了怎么办:我们现在有了“articles.json”而不是“data.json”？这种变化与服务本身无关。这意味着，我们违反了单一责任原则:</p><blockquote class="og oh oi"><p id="fe97" class="mp mq oe li b lj nd jo mr ll ne jr ms oj nf mu mv ok ng mx my ol nh na nb lt ig bi translated"><em class="in">“把因相同原因而改变的事物聚集在一起。把那些因为不同原因而变化的东西分开</em>”。</p></blockquote><p id="80dd" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">另外，假设有几个服务使用相同的数据。您可能希望加载文件一次，然后将它传递给所有服务，而不是一次又一次地导入。因此，记住这一点，让我们在架构之旅中更进一步，将数据“注入”到服务中:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Inject data source into Article Service</figcaption></figure><p id="1dfc" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">现在，无论谁实例化服务，都必须提供一个数据实例。在更复杂的情况下，我们可以注入Axios、RxJS或任何其他帮助我们获取和操作数据的低级工具。</p><p id="23bb" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated"><em class="oe">注意:我想强调术语“低级”。你不应该注入与UI紧密耦合的沉重的框架或库:像Redux-Saga或Thunk。这样做，您将服务与UI/Store结合起来，这是我们试图避免的事情之一。再次强调:尽可能保持服务的纯净。</em></p><p id="30ff" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">太好了，所有的东西都在这里。让我们实现剩下的方法:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Articles Service</figcaption></figure><p id="c82a" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">现在，是时候清理测试了。我创建了一个ArticleService实例，并向构造函数提供了一个模拟:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Articles Service Spec</figcaption></figure><p id="7bf9" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">我还创建了一个ArticleService模拟:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Article Service Mock Interface</figcaption></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Article Service Mock</figcaption></figure></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="8540" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">供应者</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi om"><img src="../Images/1c540ade33c1e0630386ed499945f92f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mEQcTXA-6sHiIeZ1"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Photo by <a class="ae nc" href="https://unsplash.com/@anunaymahajan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Anunay Mahajan</a> on <a class="ae nc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="da87" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">我们的服务看起来很棒。但是少了一点。想象一下，我们在代码中有几个地方使用ArticleService。为此，他们必须:</p><ul class=""><li id="b78e" class="lg lh in li b lj nd ll ne ln nn lp no lr np lt lu lv lw lx bi translated">加载data.json</li><li id="360c" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">创建ArticleService的实例并提供数据</li></ul><p id="91aa" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">这不是一个明确的方法。如果有服务提供者，可以很容易地避免多次加载数据和实例化服务。这是一种很常见的模式，它会麻烦地实例化多个服务，并用必要的数据支持它们。然后，这些实例可以注入到“消费者”中:动作、UI组件、其他服务等。</p><p id="a178" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">我将把Provider放在services文件夹的根目录中，因为它运行于Services:</p><pre class="kd ke kf kg gt nr ns nt nu aw nv bi"><span id="3b40" class="nw kp in ns b gy nx ny l nz oa">/src/services/provider.types.ts<br/>/src/services/provider.spec.ts<br/>/src/services/provider.mock.ts<br/>/src/services/provider.ts</span></pre><p id="6768" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">让我们为提供者定义一个类型。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Provider protocol</figcaption></figure><p id="8dc4" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">我们的应用程序只包含一个服务，所以Provider只保存对ArticleService的引用。当现实生活中的应用程序增长时，Provider拥有越来越多的服务。</p><p id="a2c1" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">这个测试相当容易完成:我们应该确保ArticleService被实例化:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Provider Spec</figcaption></figure><p id="1a9b" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">提供者本身只是一个函数，它实例化并返回对所有服务的引用:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Service Provider</figcaption></figure><p id="9824" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">最后，让我们定义一个模拟和更新类型和桶文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oc od l"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk">Finalizing Provider</figcaption></figure><p id="2abb" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">在这一点上，我们的代码应该没有错误地编译，并且所有的测试应该以100%的覆盖率通过。完成的教程可以在<a class="ae nc" href="https://github.com/soloschenko-grigoriy/vue-vuex-ts" rel="noopener ugc nofollow" target="_blank">回购</a>的“服务”分支下找到</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="d40b" class="ko kp in bd kq kr mk kt ku kv ml kx ky jt mm ju la jw mn jx lc jz mo ka le lf bi translated">结论</h1><p id="ae41" class="pw-post-body-paragraph mp mq in li b lj lk jo mr ll lm jr ms ln mt mu mv lp mw mx my lr mz na nb lt ig bi translated">在这一章中，我们学习了如何操作实体和数据来完成业务团队呈现给我们的用例。我们测试了我们的服务，以确保它们做了它们应该做的事情。我们还通过定义服务提供者，在服务和任何其他将要使用它们的代码(商店、UI组件)之间建立了一座“桥梁”。我们将在下一章中使用该提供程序。</p><p id="ba9d" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">美妙之处在于实体和服务完全独立于UI解决方案。您可以选择React或Vue，有或没有Redux，有或没有Vuex，应用程序将无缝工作，因为核心业务功能是由服务和实体内的纯代码管理的。</p><p id="1752" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">下一次，我们将建立商店，并看看它和服务如何一起发挥作用。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><p id="9287" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">这是“构建Vue企业应用”系列文章的第二章。其他剧集请点击此处:</p><ul class=""><li id="10e3" class="lg lh in li b lj nd ll ne ln nn lp no lr np lt lu lv lw lx bi translated">第0部分。序曲</li><li id="b7cb" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated"><a class="ae nc" href="https://medium.com/@gregsolo/building-vue-enterprise-application-part-1-entities-808077f3d2e7" rel="noopener">第一部分。实体</a></li><li id="857b" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated"><a class="ae nc" href="https://medium.com/@gregsolo/building-vue-enterprise-application-part-2-services-f7ec400190e7" rel="noopener">第二部分。服务</a></li><li id="495f" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated">第三部分。Vuex </li><li id="e778" class="lg lh in li b lj ly ll lz ln ma lp mb lr mc lt lu lv lw lx bi translated"><a class="ae nc" href="https://medium.com/@gregsolo/building-vue-enterprise-application-part-4-ui-components-21a45b3067a4" rel="noopener">第四部分。UI:页面和组件</a></li></ul><p id="8f7d" class="pw-post-body-paragraph mp mq in li b lj nd jo mr ll ne jr ms ln nf mu mv lp ng mx my lr nh na nb lt ig bi translated">【JavaScript用简单英语写的一句话:我们总是对帮助推广优质内容感兴趣。如果你有一篇文章想用简单的英语提交给JavaScript，用你的Medium用户名给我们发邮件到<a class="ae nc" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">submissions@javascriptinplainenglish.com</a>，我们会把你添加为作者。</p></div></div>    
</body>
</html>
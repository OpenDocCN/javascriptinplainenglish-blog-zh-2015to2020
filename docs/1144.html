<html>
<head>
<title>Analyze Angular Bundle-size To Improve Application Load Time.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析角度束大小以改善应用程序加载时间。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/analyze-angular-bundle-size-to-improve-application-load-time-a28df9df59ad?source=collection_archive---------1-----------------------#2020-02-04">https://javascript.plainenglish.io/analyze-angular-bundle-size-to-improve-application-load-time-a28df9df59ad?source=collection_archive---------1-----------------------#2020-02-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d9cd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">优化捆绑包大小，加快和改善angular应用程序的加载速度</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/481a60838ae9d1f458c323b33b12cdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghPtx6kY9Ib4GRyhfN3nwQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@chrisliverani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Chris Liverani</a> on <a class="ae kv" href="https://unsplash.com/s/photos/speed?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5d1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">改善angular应用程序加载时间的最重要的方法之一是使主包文件尽可能小。<code class="fe ls lt lu lv b">main.bundle</code>文件构成了angular应用程序的一个很大的块，并且非常重要，因为它包含供应商模块和所有其他非延迟加载的代码。</p><p id="23fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着angular应用的增长和依赖性的增加，<code class="fe ls lt lu lv b">main.bundle</code>也在增长。大的主包文件意味着应用程序加载时间会因为以下原因而变慢:</p><ul class=""><li id="b8b8" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">JavaScript解析和执行速度较慢</li><li id="b92c" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">下载主包的内容需要更长的时间</li></ul></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="6b89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天我们将使用<code class="fe ls lt lu lv b">Webpack-bundle-analyzer</code>，一个免费的工具，来分析一个角度应用的束尺寸。来自包大小分析的信息将帮助您做出明智的决策，以优化应用程序加载时间。</p><p id="fcad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们使用以下命令通过npm全局安装webpack-bundle-analyzer包:</p><p id="8af5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">$ npm install webpack-bundle-analyzer -g</code></p><p id="af61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦安装完毕，你就可以为生产构建angular应用程序，并传入- <em class="mr"> -stats-json </em>参数。运行命令:</p><p id="8b3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">$ ng build --prod --stats-json</code>。</p><p id="818b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的命令构建了用于生产的angular应用程序，此外还在applications dist文件夹下创建了一个<em class="mr"> stats.json </em>文件。输出应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/bb02e266dd0cc7802965eea5138765ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*O9njfl48g-aaSsNsXP6r3Q.jpeg"/></div></figure><p id="9230" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您可以运行webpack-bundle-analyzer来报告您的主包的状态。为此，只需运行以下命令。</p><p id="d16f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">$ npx webpack-bundle-analyzer dist/MwVotesGui</code></p><p id="1253" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中<em class="mr"> "dist/MwVotesGui" </em>是stats.json文件的位置，如上图所示。</p><p id="de04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="mr">注意</em> </strong> <em class="mr">:确保根据运行命令的文件夹给出stats.json文件的正确相对路径。</em></p><p id="b479" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的命令创建了一个类似于下面的报告。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/c0409d4d90722754f38fa45bef5f5ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0OMSCreUzlNB3Pkx6mTpg.png"/></div></div></figure><p id="7a5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，报告在此URL上运行<a class="ae kv" href="http://localhost:8888" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8888 </a>。如果要在另一个URL上运行报告，可以运行将主机和端口指定为命令的参数，如下所示:</p><p id="4bde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">$ npx webpack-bundle-analyzer ./dist/MwVotesGui/stats.json --host 127.0.0.42 --port 8042</code>。</p><p id="50aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个彩色框代表一个单独的模块包。我们可以进一步检查每个包，查看未压缩和压缩后的大小。例如，在上面的报告中，chart.js库贡献了相当大的一部分。</p><p id="4c15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种分析有助于我们快速确定哪些部分的代码最大，因此我们可以相应地决定是否需要使用延迟加载来进一步分解我们的应用程序，或者删除一些未使用的或不必要的大包。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="600c" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">结论</h1><p id="475c" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">为了优化应用程序的加载时间，理解主包文件的内容是非常重要的。在这方面，webpack-bundle-analyzer是一个方便的工具。</p><h2 id="1c3a" class="nr mv iq bd mw ns nt dn na nu nv dp ne lf nw nx ng lj ny nz ni ln oa ob nk oc bi translated">简单英语的JavaScript</h2><p id="6551" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="ky ir">！</strong></p></div></div>    
</body>
</html>
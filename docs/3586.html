<html>
<head>
<title>Top React Hooks — Arrays and Cookies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Top React挂钩—数组和Cookies</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/top-react-hooks-arrays-and-cookies-9a4b7df57802?source=collection_archive---------14-----------------------#2020-10-10">https://javascript.plainenglish.io/top-react-hooks-arrays-and-cookies-9a4b7df57802?source=collection_archive---------14-----------------------#2020-10-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e624ee3be48544be3c9853f616017558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pLTXDpGL7fIYtirM"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sjcbrn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">SJ Baren</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8ff7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks包含了React应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的React挂钩。</p><h1 id="ea10" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应配方</h1><p id="224c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes附带了许多钩子，我们可以用来做各种事情。</p><p id="2377" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它附带的一个挂钩是<code class="fe me mf mg mh b">useArray</code>挂钩。</p><p id="254e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3370" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useArray } from "react-recipes";</span><span id="c6f5" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const { add, clear, removeIndex, removeById, value: currentArray } = useArray(<br/>    ["cat", "dog", "bird"]<br/>  );</span><span id="c695" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;button onClick={() =&gt; add("chicken")}&gt;Add animal&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; removeIndex(currentArray.length - 1)}&gt;<br/>        Remove animal<br/>      &lt;/button&gt;<br/>      &lt;button onClick={clear}&gt;Clear&lt;/button&gt;<br/>      &lt;p&gt;{currentArray.join(", ")}&lt;/p&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="cf16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useArray</code>钩子取一个数组作为数组的初始值。</p><p id="55e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个具有各种属性的对象。</p><p id="3038" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">add</code>是一个让我们添加项目的功能。</p><p id="f9f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">clear</code>是清除数组的功能。</p><p id="9666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">removeIndex</code>是一个通过索引删除条目的函数。</p><p id="04c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">removeById</code>让我们通过项目的<code class="fe me mf mg mh b">id</code>属性移除项目。</p><p id="c279" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">挂钩让我们以更干净的方式运行异步代码。</p><p id="ff2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将异步代码分离成它自己的函数。</p><p id="6a95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="60c7" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useAsync } from "react-recipes";</span><span id="3cab" class="mq lc iq mh b gy mv ms l mt mu">const draw = () =&gt; {<br/>  return new Promise((resolve, reject) =&gt; {<br/>    setTimeout(() =&gt; {<br/>      const rnd = Math.random() * 10;<br/>      rnd &lt;= 5 ? resolve(rnd) : reject("error");<br/>    }, 2000);<br/>  });<br/>};</span><span id="1093" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const { error, execute, pending, value } = useAsync(draw, false);</span><span id="be94" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={execute} disabled={pending}&gt;<br/>        {pending ? "Loading..." : "Click Me"}<br/>      &lt;/button&gt;<br/>      {value &amp;&amp; &lt;div&gt;{value}&lt;/div&gt;}<br/>      {error &amp;&amp; &lt;div&gt;{error}&lt;/div&gt;}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="51cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用钩子。</p><p id="2382" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带<code class="fe me mf mg mh b">draw</code>功能的<code class="fe me mf mg mh b">useAsync</code>钩子。</p><p id="69f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">draw</code>根据<code class="fe me mf mg mh b">rnd</code>的值，返回解析为随机值的承诺或拒绝承诺。</p><p id="ffda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子的第二个参数是我们是否让钩子立即运行。</p><p id="ce19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子返回一个具有各种属性的对象。</p><p id="5864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error</code>是来自被拒绝承诺的字符串。</p><p id="006c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">execute</code>是一个函数，用来延迟我们函数的执行。</p><p id="e687" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">pending</code>是一个布尔值，表示它何时执行。</p><p id="81d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value</code>是执行我们的函数返回的值。</p><p id="1b67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useCookie</code>钩子让我们操纵客户端cookies。</p><p id="a6e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b913" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useCookie } from "react-recipes";</span><span id="4c55" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [userToken, setUserToken, deleteUserToken] = useCookie("token", "0");</span><span id="85d4" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;{userToken}&lt;/p&gt;<br/>      &lt;button onClick={() =&gt; setUserToken("100")}&gt;Change token&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; deleteUserToken()}&gt;Delete token&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="10d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe me mf mg mh b">useCookie</code>挂钩。</p><p id="372b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子的参数是cookie的键和初始值。</p><p id="cb20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个数组，里面有一些我们可以使用的变量。</p><p id="3b28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">userToken</code>是令牌值。</p><p id="fa53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setUserToken</code>是用<code class="fe me mf mg mh b">token</code>键设置cookie的功能。</p><p id="8af0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">deleteUserToken</code>用<code class="fe me mf mg mh b">token</code>键删除cookie。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/0faa256590b91680a4852115b1d371b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d845Ex-gooYiQUyu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@molliesivaram?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mollie Sivaram</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f706" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ab92" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes附带了操作数组和cookies的钩子。</p><p id="1f89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
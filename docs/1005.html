<html>
<head>
<title>How do you break a loop in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何打破JavaScript中的循环？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/weird-part-how-to-break-the-loop-in-javascript-8bba3e658267?source=collection_archive---------5-----------------------#2020-01-13">https://javascript.plainenglish.io/weird-part-how-to-break-the-loop-in-javascript-8bba3e658267?source=collection_archive---------5-----------------------#2020-01-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="061b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">JavaScript不仅奇怪，而且令人困惑和含糊不清。你工作和调试得越多，你就越能发现新事物。JavaScript的怪异之处在于如何打破循环。以下是几种打破JavaScript循环的方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a37bb040119a1803c69d11f768a3f3cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cobWkT6RGoIpeK2hpLQD1A.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://medium.com/the-write-club/weird-things-writers-do-52994d847812" rel="noopener">https://medium.com/the-write-club/weird-things-writers-do-52994d847812</a></figcaption></figure><p id="9119" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们来看看创建循环和打破循环的方法有哪些。</p><ol class=""><li id="c417" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated"><strong class="jm io">传统的</strong> <code class="fe li lj lk ll b"><strong class="jm io"><em class="lm">for</em></strong></code> <strong class="jm io">，</strong> <code class="fe li lj lk ll b"><strong class="jm io">while</strong></code> <strong class="jm io">，</strong> <code class="fe li lj lk ll b"><strong class="jm io">do-while</strong></code> <strong class="jm io">循环:</strong>创建一个<strong class="jm io"> for-loop </strong>非常容易，也非常常见。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="0ef7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如何打破:在这里打破一个循环是非常容易的。您可以使用<code class="fe li lj lk ll b"><strong class="jm io">break</strong></code>关键字来中断循环。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="244a" class="lt lu in ll b gy lv lw l lx ly">for (let i = 0; i &lt; a.length; i++) {<br/>  if (a[i] === theValue) {<br/>    <strong class="ll io">break</strong>;<br/>  }<br/>}</span></pre><p id="4074" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一种更优雅的打破循环的方式。如果你有一个嵌套循环(循环中的循环)。您可以使用<strong class="jm io">标记的语句</strong>来中断循环。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="99db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里<strong class="jm io">外</strong>是给外环的标签。每当条件匹配时，我们使用标记的条件来打破外部循环。</p><p id="674d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">有趣的部分:</strong>使用<strong class="jm io">标签的声明</strong>是一个不错的方法，但是对开发者来说有点困惑。这就像是应该避免的<strong class="jm io"> goto </strong>语句。通过引入正常的条件变量，我们可以得到同样的结果。</p><p id="2fac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">样本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="4d60" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你看到突出显示的代码，我已经引入了一个变量<strong class="jm io"> breakOuterLoop </strong>，并且在外部循环的每次迭代之后检查它的值。</p><p id="1914" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">基准</strong>:你可能会说引入一个变量和条件可以让代码变慢。然而，当我说<code class="fe li lj lk ll b"><strong class="jm io">conditionalBreak</strong></code>比<code class="fe li lj lk ll b"><strong class="jm io">labeledLoop</strong></code>更快时，你可能会感到惊讶。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="f02a" class="lt lu in ll b gy lv lw l lx ly">// <strong class="ll io">benchmark:</strong></span><span id="8f74" class="lt lu in ll b gy lz lw l lx ly">labeledLoop x 9,295,537 ops/sec ±0.85% (87 runs sampled)<br/>conditionalBreak x 9,349,901 ops/sec ±0.45% (89 runs sampled)<br/>Fastest is conditionalBreak,labeledLoop</span><span id="dcaa" class="lt lu in ll b gy lz lw l lx ly">// <strong class="ll io">Script</strong>:<br/>var { Benchmark } = require("benchmark");<br/>var suite = new Benchmark.Suite();<br/>suite.add("labeledLoop", function() {<br/>  labeledLoop();<br/>});<br/>suite.add("conditionalBreak", function() {<br/>  conditionalBreak();<br/>});<br/>suite.on("cycle", function(event) {<br/>  console.log(String(event.target));<br/>});<br/>suite<br/>  .on("complete", function() {<br/>    console.log("Fastest is " + this.filter("fastest").map("name"));<br/>  })<br/>  .run({ async: true });</span></pre><blockquote class="ma mb mc"><p id="3f85" class="jk jl lm jm b jn jo jp jq jr js jt ju md jw jx jy me ka kb kc mf ke kf kg kh ig bi translated"><strong class="jm io">注意</strong>:我正在使用<a class="ae ky" href="https://benchmarkjs.com/" rel="noopener ugc nofollow" target="_blank">基准js </a></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/ab0d775d16d9697b6b84fdd44dc0043f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9iKYn-x3Fsu0ohQat5Scw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://itnext.io/what-exactly-is-functional-programming-ea02c86753fd" rel="noopener ugc nofollow" target="_blank">https://itnext.io/what-exactly-is-functional-programming-ea02c86753fd</a></figcaption></figure><p id="5c7d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。函数数组API方法:</strong>现在我们每天使用<code class="fe li lj lk ll b">Array API</code>方法来循环遍历值。破坏函数数组方法是很棘手的。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="b89f" class="lt lu in ll b gy lv lw l lx ly">const data = [1, 2, 3, 4, 5, 6, 7];<br/>const printValueTill5 = (v) =&gt; {<br/>  if(v % 5 == 0) {<br/>    <strong class="ll io">break; //Error here: Illegal break statement</strong><br/>  }<br/>  console.log(v)<br/>}<br/>data.forEach(printValueTill5)</span></pre><p id="4d4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不能在函数中使用<code class="fe li lj lk ll b">break</code>关键字。要么是<strong class="jm io">命名的</strong>函数的<strong class="jm io">匿名的</strong>函数。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="867d" class="lt lu in ll b gy lv lw l lx ly">// using return<br/>const data = [1, 2, 3, 4, 5, 6, 7];<br/>const printValueTill5 = (v) =&gt; {<br/>  if(v % 5 == 0) {<br/>    <strong class="ll io">return false</strong><br/>  }<br/>  console.log(v)<br/>}<br/>data.forEach(printValueTill5)</span><span id="00de" class="lt lu in ll b gy lz lw l lx ly"><strong class="ll io">// Output: 1 2 3 4 6 7</strong></span></pre><p id="9293" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果试图返回false或任何值。它被认为是从给定的函数返回。因此代码将表现得像一个<strong class="jm io">延续的</strong>语句。</p><p id="d037" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">通过投掷:</strong>您可以使用投掷语句来打破循环。然而，这不是一种优雅的方式。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="d3f3" class="lt lu in ll b gy lv lw l lx ly">const data = [1, 2, 3, 4, 5, 6, 7];<br/><strong class="ll io">const BREAK_LOOP_ERROR = Symbol("BREAK_LOOP");</strong><br/>const printValueTill5 = v =&gt; {<br/>  if (v % 5 == 0) {<br/>    <strong class="ll io">throw BREAK_LOOP_ERROR;</strong><br/>  }<br/>  console.log(v);<br/>};<br/>try {<br/>  data.forEach(printValueTill5);<br/>} catch (e) {<br/>  <strong class="ll io">if (e !== BREAK_LOOP_ERROR) throw e;</strong><br/>  console.debug(e);<br/>}</span></pre><p id="aee4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你注意到我们每次要写多少<strong class="jm io">样板</strong>代码。</p><p id="ebba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">经</strong> <a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">列阵#隔</strong> </a> <strong class="jm io"> : </strong>较干净的方法是使用<strong class="jm io">列阵#隔</strong>法。</p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="8c36" class="lt lu in ll b gy lv lw l lx ly">// using <br/>const data = [1, 2, 3, 4, 5, 6, 7];<br/>const printValueTill5 = v =&gt; {<br/>  if (v % 5 == 0) {<br/>    <strong class="ll io">return false; // return false to break</strong><br/>  }<br/>  console.log(v);<br/>  <strong class="ll io">return true; // Else continue.</strong><br/>};<br/>data.every(printValueTill5)</span></pre><p id="0cc5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">方法<code class="fe li lj lk ll b">every</code>将循环直到您返回<code class="fe li lj lk ll b">true</code>。一旦你<code class="fe li lj lk ll b">return false</code>。它会打破循环。</p><p id="b2c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">趣事</strong>:使用<code class="fe li lj lk ll b">every</code>是<code class="fe li lj lk ll b">break</code>循环的最佳方式之一。然而，这个解决方案有很多缺点。</p><blockquote class="ma mb mc"><p id="f791" class="jk jl lm jm b jn jo jp jq jr js jt ju md jw jx jy me ka kb kc mf ke kf kg kh ig bi translated"><strong class="jm io"> a. </strong>每一个方法在最后都会返回<code class="fe li lj lk ll b">boolean</code>，这样你就可以进一步链了。</p></blockquote><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="1266" class="lt lu in ll b gy lv lw l lx ly">const data = [1, 2, 3, 4, 5, 6, 7];<br/>const printValueTill5 = v =&gt; {<br/>  if (v % 5 == 0) {<br/>    return false;<br/>  }<br/>  console.log(v);<br/>  return true;<br/>};<br/>data.every(printValueTill5) <strong class="ll io">// returns false</strong><br/>  .map(console.log) <strong class="ll io">// Error: data.every(...).map is not a function</strong></span></pre><blockquote class="ma mb mc"><p id="1b8f" class="jk jl lm jm b jn jo jp jq jr js jt ju md jw jx jy me ka kb kc mf ke kf kg kh ig bi translated"><strong class="jm io"> b. </strong>您必须更改printValueTill5的功能。难以进一步重用。</p><p id="d2cb" class="jk jl lm jm b jn jo jp jq jr js jt ju md jw jx jy me ka kb kc mf ke kf kg kh ig bi translated"><strong class="jm io"> c. </strong>难以调试和测试。</p></blockquote><p id="caa4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以现在的问题是一样的,<strong class="jm io">“你如何打破JavaScript中的循环？”</strong></p><p id="d28c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以创建如下<code class="fe li lj lk ll b">util</code>方法。它可能没有上述解决方案的性能好。但更干净、更可预测。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="7c8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">用途:</strong></p><pre class="kj kk kl km gt lp ll lq lr aw ls bi"><span id="ade1" class="lt lu in ll b gy lv lw l lx ly">const data = [1, 2, 3, 4, 5, 6, 7];<br/>const mapValue = v =&gt; {<br/>  return v;<br/>};<br/>const till5 = v =&gt; v % 3 == 0;</span><span id="60d5" class="lt lu in ll b gy lz lw l lx ly">_.<strong class="ll io">tillWhen</strong>(data, mapValue, till5)<br/>  .<strong class="ll io">forEach</strong>(x =&gt; console.log(x));</span><span id="0600" class="lt lu in ll b gy lz lw l lx ly"><strong class="ll io">// Output: 1 2 3 4 5</strong></span></pre><p id="8094" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">塔达。！看起来我们实现了我们想实现的目标。😂😂如果你有更多的建议。请在评论中告诉我。</p><p id="1d93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请做<strong class="jm io">订阅/跟随/鼓掌</strong>支持我。谢谢。！！🙏🙏</p><p id="ca6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">参考</strong>:<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration" rel="noopener ugc nofollow" target="_blank">Loops _ and _ iteration</a>，<a class="ae ky" href="https://stackoverflow.com/questions/2641347/short-circuit-array-foreach-like-calling-break" rel="noopener ugc nofollow" target="_blank">短路-阵列-foreach-like-call-break</a></p><h2 id="d834" class="lt lu in bd mh mi mj dn mk ml mm dp mn jv mo mp mq jz mr ms mt kd mu mv mw mx bi translated">来自简明英语团队的一份声明</h2><p id="1514" class="pw-post-body-paragraph jk jl in jm b jn my jp jq jr mz jt ju jv na jx jy jz nb kb kc kd nc kf kg kh ig bi translated">你知道我们有四个出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae ky" href="https://plainenglish.io" rel="noopener ugc nofollow" target="_blank">、T42、T44】上找到这些——关注我们的出版物并订阅我们的YouTube频道、T48】和<strong class="jm io">来表达爱意吧！</strong></a></p></div></div>    
</body>
</html>
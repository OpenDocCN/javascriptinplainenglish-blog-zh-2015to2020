<html>
<head>
<title>Setup Your First React Leaflet Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置您的第一个React传单包</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/your-first-react-leaflet-package-8d9c7e28c85d?source=collection_archive---------10-----------------------#2020-11-12">https://javascript.plainenglish.io/your-first-react-leaflet-package-8d9c7e28c85d?source=collection_archive---------10-----------------------#2020-11-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="99fb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">与Mapbox API配对的React传单是一个强大的软件包，它可能为谷歌地图React提供一个更强大的替代方案</h2></div><p id="c663" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">虽然我不是一个经验丰富的专业人士，但我已经在我参与的两个React项目中尝试了React-Leaflet和Google-Maps-React。</p><p id="2431" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">每个软件包都有自己的优点和缺点。谷歌地图很容易安装和运行，然而，我确实尝试了一些教程和指南，但效果并不太好。我的猜测是，这可能是因为有一个Google-Maps-React包，还有一个React-Google-Maps包(它们是不同的包)。</p><p id="b397" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">几乎所有的反应传单指南都是正确的。也很轻量级(114kbs！).Google Maps React确实有一个地球上几乎每个人都知道并喜欢的底图(Google Maps with Imagery and street view)，但React-Leaflet更具可定制性。</p><p id="e41e" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">与任何项目一样，选择取决于开发人员。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/f4e037e603c427c5dca5aa864315f22b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZKIZ_od9yjeCCBo5rTtAQ.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Follow along to create the above map! The above displays every countries’ Covid travel restrictions</figcaption></figure><p id="9e78" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">要开始使用React-Leaflet，请创建一个新的React应用程序并运行:</p><p id="6696" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><code class="fe lp lq lr ls b">npm i react-leaflet</code></p><p id="63fe" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">和</p><p id="fca2" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><code class="fe lp lq lr ls b">npm install -s react react-dom leaflet</code></p><p id="3359" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">为了生成地图，您需要这两个包。</p><p id="5e5f" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我使用react-leaflet的第一个项目是在2.7.0版本上。当我写这篇博文时，3.0版本刚刚发布(就像几天前)。我在启动3.0的时候遇到了一点麻烦，但是我猜这个版本的一些早期问题已经解决了，但是你可能也想试试:<code class="fe lp lq lr ls b">npm i react-leaflet@2.7.0.</code></p><p id="61b5" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">将这两个包作为依赖项安装后，您将希望添加<code class="fe lp lq lr ls b">MapView</code>作为组件，如下所示:</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="a39c" class="lx ly in ls b gy lz ma l mb mc">import React, { Component } from 'react';</span><span id="0465" class="lx ly in ls b gy md ma l mb mc">import MapView from './components/MapView';</span><span id="cf89" class="lx ly in ls b gy md ma l mb mc">&lt;Route path='/map'&gt;</span><span id="ce2d" class="lx ly in ls b gy md ma l mb mc">&lt;MapView /&gt;</span><span id="7fd3" class="lx ly in ls b gy md ma l mb mc">&lt;/Route&gt;</span></pre><p id="9e8c" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这可能最适合应用程序的App.js级别，但是您可以将它添加到任何需要放置地图的地方。然后，在MapView.js文件中:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="667b" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">您的MapView现在是您的应用程序的一个组件。两个必需的状态是<code class="fe lp lq lr ls b">currentLocation</code>和<code class="fe lp lq lr ls b">zoom.</code>我将我的地图视图设置为地球的中心，具有高级别的缩放(我认为12是你能放大到的最大值)。我从存储国家数据的后端获取数据。在render函数中，我将地图设置为抓取其他组件，包括一个Mapbox层，我认为这给了这个包一个急需的外观。</p><p id="3c04" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">只使用上面的代码，将MapView作为一个组件放在App.js中，只应用以下CSS后，您应该会在屏幕上看到一个普通的视图地图:</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="b101" class="lx ly in ls b gy lz ma l mb mc">.leaflet-container {</span><span id="14ed" class="lx ly in ls b gy md ma l mb mc">margin: 1rem;</span><span id="cbb3" class="lx ly in ls b gy md ma l mb mc">width: 97vw;</span><span id="c38c" class="lx ly in ls b gy md ma l mb mc">height: 97vh;</span><span id="1c78" class="lx ly in ls b gy md ma l mb mc">}</span></pre><p id="3657" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">接下来，创建以下三个文件:</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="7761" class="lx ly in ls b gy lz ma l mb mc">MarkerPopup.js<br/>VenueLocation.js<br/>VenueMarkers.js</span></pre><p id="f87b" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">以下是您的场馆位置和场馆标记文件的代码:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="ceff" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">使用上面的代码，我将国家(我从后端设置了状态)作为道具发送并进行析构。接下来，我需要用一张地图遍历所有的国家，这样每个国家都可以在我的地图上标出。我的数据中的经度/纬度坐标存储为一个数组([x，y])，但我也见过数据集存储每个x/y浮点数并作为它们单独的对象。图标三元是React的众多优点之一，在这里我使用了数据中的一个字段，并根据国家的状态使用不同的图标。js文件给出了每个图标的描述，我存储了每个图标。svg文件在本地的应用程序的资产文件夹。</p><p id="2e4a" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">最后，将以下内容添加到MarkerPopup.js文件中:</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="8c9a" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">数据变量作为prop从VenueLocationIcon.js发送下来。现在每个窗口都将有一个弹出窗口，并根据字段数据显示文本。这些窗口可以根据您希望如何将数据传送给最终用户的偏好，按照您的意愿进行定制。</p><p id="5ad8" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">就是这样！如此简单，重量轻，功能强大。有了好的数据和易于使用的经纬度坐标，你可以做很多事情。绘制世界地图，我的朋友。</p><p id="8b72" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我之前提到过这一点，但我并不喜欢React传单(OpenStreetMap)附带的默认底图。它很好，但在我看来不是最棒的(在我看来，这是从谷歌地图的大规模降级)。要自定义底图，您可以在第三方地图(如MapBox)中添加图层。我的地图框层可以在TileLayer的第28 &amp; 29行找到(带有URL和属性变量)。要创建自己的地图框图层，请查看我关注的博客:</p><div class="mg mh gp gr mi mj"><a href="https://www.freecodecamp.org/news/how-to-set-up-a-custom-mapbox-basemap-with-gatsby-and-react-leaflet/" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd io gy z fp mo fr fs mp fu fw im bi translated">如何使用React传单和传单Gatsby Starter设置自定义地图框底图样式</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">构建地图可能非常强大，但通常您会受困于地图影像的开源选项，这可能…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">www.freecodecamp.org</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx lj mj"/></div></div></a></div><p id="8e7d" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">随意检查这个项目的全部回购在这里:<a class="ae my" href="https://github.com/estein1988/covid-travel-fe" rel="noopener ugc nofollow" target="_blank">https://github.com/estein1988/covid-travel-fe</a></p><p id="e4da" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这就是你的第一张专业React传单地图。编码快乐！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Drag and Drop Image Upload with Vue.js, Dropzone, and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue.js、Dropzone和Firebase拖放图片上传</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/drag-and-drop-image-upload-with-vue-js-dropzone-and-firebase-dd6fb7e2e54b?source=collection_archive---------2-----------------------#2020-02-26">https://javascript.plainenglish.io/drag-and-drop-image-upload-with-vue-js-dropzone-and-firebase-dd6fb7e2e54b?source=collection_archive---------2-----------------------#2020-02-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2abb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在许多网络应用程序中，上传图片是一项必要但乏味的任务。这也是许多初级开发人员难以解决的问题。幸运的是，有一些很棒的软件包可以省去这个过程中的很多跑腿工作。在本文中，我们将介绍如何使用Vue、Dropzone和Firebase Storage上传图像。</p><h1 id="7e54" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">视频教程</h1><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="lo lp l"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Video Tutorial</figcaption></figure><h1 id="23ce" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">项目设置</h1><p id="cfdb" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">要开始，您需要安装<a class="ae lz" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> NodeJs </a>。对于本教程，我们也将使用<a class="ae lz" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>作为我们的代码编辑器，但是你可以使用任何你喜欢的。</p><h2 id="0fa1" class="ma km iq bd kn mb mc dn kr md me dp kv jy mf mg kz kc mh mi ld kg mj mk lh ml bi translated">创建Vue项目</h2><p id="8bf7" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">要创建我们的Vue项目，请打开您的终端，cd到您想要的目录并运行以下命令:</p><pre class="lj lk ll lm gt mm mn mo mp aw mq bi"><span id="ce46" class="ma km iq mn b gy mr ms l mt mu">npx vue create firebase-image-upload</span></pre><p id="899b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，选择默认预设(默认(babel，eslint))。这将创建一个标准的Vue项目，我们将工作了。完成后，在VS代码中打开项目。</p><h2 id="6850" class="ma km iq bd kn mb mc dn kr md me dp kv jy mf mg kz kc mh mi ld kg mj mk lh ml bi translated">安装软件包</h2><p id="5fca" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">现在，我们将安装一些npm包，这将使上传我们的图像变得非常容易。在VS代码中打开一个新的终端(Terminal -&gt; New Terminal)并运行以下命令:</p><pre class="lj lk ll lm gt mm mn mo mp aw mq bi"><span id="a23e" class="ma km iq mn b gy mr ms l mt mu">npm install --save firebase vue2-dropzone uuid</span></pre><h2 id="ad68" class="ma km iq bd kn mb mc dn kr md me dp kv jy mf mg kz kc mh mi ld kg mj mk lh ml bi translated">创建Firebase项目</h2><p id="e55c" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">在我们继续之前，我们需要创建我们的Firebase项目，并将其包含在我们的Vue应用程序中。前往<a class="ae lz" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a>并创建一个账户，如果你还没有的话。不要担心作为一个非常慷慨的免费层Firebase的成本。</p><p id="660c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建帐户并登录后，点击屏幕右上角的“转到控制台”。然后单击“新建”项目按钮，选择所有默认设置。</p><p id="a5bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在左侧菜单中，单击开发，然后单击存储。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/994672aa2558e1b1b25c72a5e6b4c46f.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*z7I30sOoOaI9F7s98yqrEA.png"/></div></figure><p id="e929" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后你会看到一个“开始”按钮。单击它，并从弹出窗口中选择所有默认设置。Firebase自动设置存储规则。默认规则要求用户登录才能上传文件。</p><p id="a9fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我没有在本教程中介绍身份验证，所以我们将编辑默认规则。在主存储屏幕的顶部，您应该会看到一个规则选项卡。导航到该部分，将代码粘贴到您的规则下并发布它们:</p><pre class="lj lk ll lm gt mm mn mo mp aw mq bi"><span id="9d41" class="ma km iq mn b gy mr ms l mt mu">rules_version = '2';<br/>service firebase.storage {<br/>  match /b/{bucket}/o {<br/>    match /{allPaths=**} {<br/>      allow read, write;<br/>    }<br/>  }<br/>}</span></pre><p id="4260" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> **重要提示:这些规则允许任何人上传到此存储桶。对于生产应用程序，您应该将其锁定。要了解更多关于如何操作的信息，请访问</strong> <a class="ae lz" href="https://firebase.google.com/docs/storage/security/start" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Firebase存储规则文档</strong> </a> <strong class="jp ir">。** </strong></p><p id="27c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">项目和存储设置完成后，单击左侧菜单中的项目概述，然后单击web图标。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/876ee48b427dd09b12e696a876ac14ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uz-rhQUhFh0qdsPMUCFBRg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Firebase Web Start</figcaption></figure><p id="cded" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">给你的应用取一个昵称，然后点击下一步。然后你会看到一些代码。在<script>标签里面复制一切。&lt;/root&gt;</script></p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nd"><img src="../Images/8c82a8d8d72eda32ae394749b2c9289c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWsAGdjobC7EBbMD1RsoDg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Firebase Config</figcaption></figure><p id="7bff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在回到您的Vue项目，打开src/main.js。在文件的顶部，在现有导入的下面，添加以下内容:</p><pre class="lj lk ll lm gt mm mn mo mp aw mq bi"><span id="db6e" class="ma km iq mn b gy mr ms l mt mu">import firebase from 'firebase'</span></pre><p id="87ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后粘贴到firebase配置中。您的main.js文件应该如下所示:</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne lp l"/></div></figure><h1 id="cea3" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">图像上传</h1><p id="fb10" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">现在我们已经将Firebase添加到了Vue项目中，我们可以开始上传图像了。在src/App.vue文件中，我们将删除模板、脚本和样式标签中的所有样板代码。在脚本标签中，我们将在顶部导入Dropzone和Firebase。</p><pre class="lj lk ll lm gt mm mn mo mp aw mq bi"><span id="df3d" class="ma km iq mn b gy mr ms l mt mu"><em class="nf">import</em> firebase <em class="nf">from</em> 'firebase';<br/><em class="nf">import</em> dropzone <em class="nf">from</em> 'vue2-dropzone';<br/><em class="nf">import</em> "vue2-dropzone/dist/vue2Dropzone.min.css";</span></pre><p id="a181" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的导入下面，我们将添加dropzone作为一个组件和一些Dropzone选项。Dropzone有一个名为@vdropzone-complete的内置函数，它会在每次上传完成时触发。我们将使用自己的方法创建一个名为afterComplete的方法来保存我们的图像到firebase。</p><p id="1fd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将把带有配置的Dropzone组件添加到模板中。最后，我们将向数据对象添加一个images属性，并用v-for显示dropzone下的图像。</p><p id="2459" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，您的App.vue文件应该如下所示:</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ne lp l"/></div></figure><p id="b814" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是了。一个简单的拖放图像上传器，带有Vue、Firebase和Dropzone。如果您对本文有任何问题或顾虑，欢迎在下面留下您的评论！</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="ng lp l"/></div></figure></div></div>    
</body>
</html>
# 获得更好 MySQL 体验的 7 个最佳实践

> 原文：<https://javascript.plainenglish.io/7-best-practices-for-a-better-experience-with-mysql-15eb30de6594?source=collection_archive---------13----------------------->

## 提升数据库管理水平的技巧

![](img/e13c4bc1c18ae389f44724f05e308e6f.png)

Photo by [Campaign Creators](https://unsplash.com/@campaign_creators?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

MySQL 是我开始旅程时学习的第一个数据库。我使用它已经有一段时间了，有很多事情我希望在开始使用 MySQL 的那一天就知道。我决定写这篇文章，希望它能帮助其他试图学习 MySQL 的初学者。这是我在使用 MySQL 的过程中使用的七个简单的技巧，帮助我获得了成功

## 1.使用索引

正确使用索引可以大大加快应用程序的查询速度。这种交换是非常值得的。您的存储需求会略有增加，写入速度会略有下降。能够做到这一点将有助于您在一个数据库完全没有索引的组织中脱颖而出。我听说过围绕这一点的一些争论。有些人只在需要的时候使用它。我不能对此表示赞同或反对，因为归根结底，这完全取决于偏好。然而，根据我的经验，我注意到我更喜欢使用它们。

## 2.规范化您的数据并使用连接

这种做法包括将数据彼此分开存储，然后用外键引用这些数据。现在，假设您正在创建一个博客，您有一个 post 表，在这个 post 表中，您有一个 post_id 和一个标题。此时，只存储作者姓名可能很有吸引力。相反，为什么不创建一个 author 表，然后将 author_id 存储在 post 表中呢？我的意思是，不只是在 post 表上查询，还可以在 post 表上查询，然后将 author 的表连接到 post 表上。通过这样做，您已经为自己做好了准备，这样当您向作者的表中添加额外的字段时，它将立即在查询中可用。另一个好处是，如果一个作者的数据发生了变化，你不必更新帖子中的任何内容。

## 3.InnoDB 的使用

在我的 SQL 中，只有两个存储引擎是人们经常使用的。它是 MyISAM 和 InnoDB。MyISAM 不会被广泛使用，所以你会想要使用 InnoDB，因为它是一个全面的更好的引擎。除了性能更好和数据更持久之外，您还可以访问事务。这是 MyISAM 所没有的，在 2020/2021 年，这是你的数据库所需要的。

## 4.在数据库级别实施数据完整性

为此，您将需要使用像唯一约束和级联删除这样的东西。很多时候，在应用程序中做一些应该在数据库中做的事情是很有必要的。级联删除可以在前面使用的 post 和 author 表示例中得到最好的演示。假设您有一个 author_id x。如果您要删除该作者，那么它会在 post 表中查找并删除所有具有 author_id x 的帖子。级联删除至关重要的原因是，如果您不级联删除，post 表中将会有没有附加作者的帖子。请记住，您也可以在您的应用程序中这样做。在删除一个记录应用程序时，您还可以查询所有帖子，然后也删除那些帖子。最好在数据库级别处理。这是因为应用程序逻辑可以中断，但数据库约束不能。

## 5.开发中的日志查询

很高兴看到查询实时发生。在你发展的时候可以帮到你很多。要记录查询，请编辑“my.cnf”文件，如下所示:

创建日志文件:

```
general_log_file = /var/log/mysql.log
```

然后做:

```
general_log = 1
```

这将确保每次数据库发生查询时，它都会显示在日志中。请确保不要在生产中这样做，因为这会增加数据库的压力。

## 6.使用一致的命名

通常使用简短、易于输入的字段名，但是无论您选择哪种格式，都要使用它。可变性和不一致性通常会导致混乱、错误和时间损失。经常会遇到表格和列中充斥着缩写或速记，这些缩写或速记对一些人来说可能很有见地，但对另一些人来说却难以理解。再说一次，你不必坚持别人的理想习俗。实现那些对你和你的团队有意义的。无论是添加前缀还是包含应用程序名称，都要确保这些标准是一致的。

## 7.使用事务进行大容量插入

使用事务的原因是因为每次插入记录时，表都要重新索引。使用事务时，在事务结束时会得到一个重新索引。因此，如果您插入 15，000 条记录，您会在 15，000 条记录的末尾得到一个重新索引。而如果您插入 15，000 条单独的记录，您将得到 15，000 个重新索引。性能提升非常显著。如果不使用事务，您可能会每分钟获得数百或数千条记录。通过使用事务，每分钟您将获得数万条记录，如果不是数十万条的话。

**举例:**

五次重新索引(而不是这样做)

```
insert into value x (default, 1);insert into value x (default, 2);insert into value x (default, 3);insert into value x (default, 4);insert into value x (default, 5);
```

一次重新索引(最佳方式)

```
start transaction;insert into value x (default, 1);insert into value x (default, 2);insert into value x (default, 3);insert into value x (default, 4);insert into value x (default, 5);commit;
```

这有一个额外的好处，那就是让你的所有数据在结束时立即可用。如果您要插入 10 万条单独的记录，这 10 万条记录会慢慢插入，并且对您的应用程序可见。如果在一次交易中完成，在交易结束时会立即出现十万条记录。

当您熟悉 MySQl 时，您会发现使用其他数据库变得更加容易。

喜欢这篇文章吗？如果是这样，通过 [**订阅解码获得更多类似内容，我们的 YouTube 频道**](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw) **！**
<html>
<head>
<title>Lodash Array Manipulation Methods We Can Implement Easily</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们可以轻松实现的Lodash数组操作方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lodash-array-joining-and-filtering-methods-we-can-implement-easily-3dab4e65ca25?source=collection_archive---------7-----------------------#2020-05-03">https://javascript.plainenglish.io/lodash-array-joining-and-filtering-methods-we-can-implement-easily-3dab4e65ca25?source=collection_archive---------7-----------------------#2020-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/07199122d38492c7947908e6b1478795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FpZN6_htofmqp9T0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@lali_ph?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lalitphat Phunchuang</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ec9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lodash是一个非常有用的工具库，让我们可以轻松地处理对象和数组。</p><p id="7fcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，现在JavaScript标准库正在赶上诸如Lodash之类的库，我们可以用简单的方法实现许多功能。</p><p id="6858" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何自己实现一些Lodash数组操作方法，包括<code class="fe lb lc ld le b">intersectionBy</code>、<code class="fe lb lc ld le b">last</code>、<code class="fe lb lc ld le b">lastIndexOf</code>、<code class="fe lb lc ld le b">nth</code>、<code class="fe lb lc ld le b">pull</code>、<code class="fe lb lc ld le b">pullAll</code>和<code class="fe lb lc ld le b">join</code>。</p><h1 id="c226" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">intersectionBy</code></h1><p id="b687" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Lodash <code class="fe lb lc ld le b">intersectionBy</code>方法类似于<code class="fe lb lc ld le b">intersection</code>，因为它返回一个包含所有数组中唯一条目的数组，除了我们可以传入自己的回调函数以我们的方式比较条目，而不是使用SameValueZero算法进行比较。</p><p id="37e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过在数组实例的<code class="fe lb lc ld le b">every</code>方法的回调中调用回调来实现它，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="66ed" class="mq lg iq le b gy mr ms l mt mu">const intersection = (iteratee, ...arrs) =&gt; {<br/>  let vals = [];<br/>  for (const a of arrs[0]) {<br/>    const inAllArrs = arrs.map(arr =&gt; arr.map(iteratee)).every((arr) =&gt; arr.map(iteratee).includes(iteratee(a)));<br/>    if (inAllArrs) {<br/>      vals.push(a)<br/>    }<br/>  }<br/>  return [...new Set(vals)];<br/>}</span></pre><p id="aeda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们从参数中获得了一个<code class="fe lb lc ld le b">condition</code>回调函数和一个<code class="fe lb lc ld le b">arrs</code>列表。</p><p id="891d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到第一个数组并遍历它。在循环中，我们调用<code class="fe lb lc ld le b">arrs</code>上的<code class="fe lb lc ld le b">every</code>方法来检查每个数组是否包含第一个数组中的给定项，这是我们想要检查的数组之一。</p><p id="18ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，为了检查项目是否包含在每个数组中，我们必须在检查之前用<code class="fe lb lc ld le b">iteratee</code>映射所有条目，包括<code class="fe lb lc ld le b">includes</code>方法。</p><p id="251e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就可以在用<code class="fe lb lc ld le b">iteratee</code>函数转换后对它们进行比较。</p><p id="dc64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，最后，我们将添加的项目转换为一个集合，然后用spread操作符将其转换回一个数组，以返回一个包含唯一项目的数组。</p><h1 id="ce0d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">join</code></h1><p id="9796" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Lodash <code class="fe lb lc ld le b">join</code>方法将一个数组的所有元素转换成一个由分隔符分隔的字符串。</p><p id="140a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了在数组实例上调用普通JavaScript版本之外，它与普通JavaScript数组的<code class="fe lb lc ld le b">join</code>方法做同样的事情。Lodash <code class="fe lb lc ld le b">join</code>方法将数组作为参数。</p><p id="96f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下实现我们自己的Lodash <code class="fe lb lc ld le b">join</code>方法:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b425" class="mq lg iq le b gy mr ms l mt mu">const join = (arr, separator) =&gt; arr.join(separator)</span></pre><p id="70c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样称呼它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="aadb" class="mq lg iq le b gy mr ms l mt mu">const result = join([1, 2, 3], ',')</span></pre><p id="a7ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们得到的<code class="fe lb lc ld le b">result</code>就是<code class="fe lb lc ld le b">1,2,3</code>。</p><h1 id="6b37" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">最后的</h1><p id="ef91" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">方法返回数组的最后一个元素。我们可以很容易地创建自己的函数来返回它，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="a318" class="mq lg iq le b gy mr ms l mt mu">const last = arr =&gt; arr[arr.length - 1]</span></pre><p id="5db4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样称呼它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c4b1" class="mq lg iq le b gy mr ms l mt mu">const result = last([1, 2, 3])</span></pre><p id="ddf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe lb lc ld le b">result</code>是我们期望的3。</p><h1 id="eafc" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">lastIndexOf</code></h1><p id="0c9d" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Lodash的<code class="fe lb lc ld le b">indexOf</code>方法可以用普通JavaScript中的<code class="fe lb lc ld le b">indexOf</code>方法轻松实现。</p><p id="f0a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样实现它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d9ea" class="mq lg iq le b gy mr ms l mt mu">const indexOf = (arr, value, from) =&gt; arr.lastIndexOf(value, from)</span></pre><p id="9b7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用我们正在寻找的<code class="fe lb lc ld le b">value</code>和我们正在寻找的值调用了<code class="fe lb lc ld le b">lastIndexOf</code>方法，从<code class="fe lb lc ld le b">from</code>索引开始，一直到开始。</p><p id="3e09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样称呼它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="8b26" class="mq lg iq le b gy mr ms l mt mu">const result = indexOf([1, 2, 3], 2, 3)</span></pre><p id="7787" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe lb lc ld le b">result</code>是1。</p><h1 id="2b3b" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">nth</code></h1><p id="14fb" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Lodash的<code class="fe lb lc ld le b">nth</code>方法返回数组中的第n个条目。显然，我们可以通过使用括号符号获得第n个条目来轻松实现这一点，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d7f5" class="mq lg iq le b gy mr ms l mt mu">const nth = (arr, index) =&gt; arr[index]</span></pre><p id="32e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们只返回给定数组索引的项。</p><p id="2091" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样称呼它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7254" class="mq lg iq le b gy mr ms l mt mu">const result = nth([1, 2, 3], 2)</span></pre><p id="1699" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe lb lc ld le b">result</code>就是3，因为我们得到了第3个元素。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/75aa7f191722c645c155283f5fc0494a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yit_hL7C-Mf0GJL6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@darisja?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Darinka Kievskaya</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="184d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">pull</code></h1><p id="ae7a" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Lodash <code class="fe lb lc ld le b">pull</code>方法返回一个新的数组，数组中的给定值被删除。</p><p id="912e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">filter</code>方法轻松实现，如下所示:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="736a" class="mq lg iq le b gy mr ms l mt mu">const pull = (arr, ...values) =&gt; arr.filter(a =&gt; !values.includes(a))</span></pre><p id="a841" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们只是调用了<code class="fe lb lc ld le b">filter</code>方法，在回调中，我们像上面一样调用了<code class="fe lb lc ld le b">includes</code>方法来排除我们用<code class="fe lb lc ld le b">values</code>包含的项目，这是通过传播值创建的。</p><p id="f916" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样称呼它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="0066" class="mq lg iq le b gy mr ms l mt mu">const result = pull([1, 2, 3], 2, 3)</span></pre><p id="fe10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe lb lc ld le b">result</code>是<code class="fe lb lc ld le b">[1]</code>。</p><h1 id="0c7d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">pullAll</h1><p id="cfbe" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">pullAll</code>类似于<code class="fe lb lc ld le b">pull</code>，除了它接受一个数组而不是一个参数列表。我们可以如下实现它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="e818" class="mq lg iq le b gy mr ms l mt mu">const pullAll = (arr, values) =&gt; arr.filter(a =&gt; !values.includes(a))</span></pre><p id="7b5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么当我们这样称呼它的时候:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="447a" class="mq lg iq le b gy mr ms l mt mu">const result = pullAll([1, 2, 3], [2, 3])</span></pre><p id="46ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到和以前一样的<code class="fe lb lc ld le b">result</code>值。</p><h1 id="af00" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="37f2" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">join</code>和<code class="fe lb lc ld le b">lastIndexOf</code>方法内置在普通JavaScript中，因此我们可以轻松地使用它们来实现Lodash <code class="fe lb lc ld le b">join</code>和<code class="fe lb lc ld le b">lastIndexOf</code>方法。</p><p id="d01a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方法获取一个数组的第n个条目。我们可以用括号符号来表示。</p><p id="e9a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">pull</code>和<code class="fe lb lc ld le b">pullAll</code>可以很容易地用<code class="fe lb lc ld le b">filter</code>方法实现。</p><h2 id="8800" class="mq lg iq bd lh mw mx dn ll my mz dp lp ko na nb lt ks nc nd lx kw ne nf mb ng bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="8dae" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"> <strong class="kf ir"> AI in Plain English </strong> </a>，<a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a>，<a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>——谢谢，继续学习！</p><p id="50c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
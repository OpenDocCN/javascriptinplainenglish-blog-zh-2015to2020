# JavaScript 最佳实践—数组和全局变量

> 原文：<https://javascript.plainenglish.io/javascript-best-practices-arrays-and-global-variables-c71696eaa6b3?source=collection_archive---------3----------------------->

![](img/99de1bb852cf09435d08ed7b5fed105c.png)

Photo by [Vladislav Klapin](https://unsplash.com/@lemonvlad?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

JavaScript 是一种非常宽容的语言。编写可以运行但存在问题的代码很容易。

在本文中，我们将了解如何在 JavaScript 中使用数组和全局变量。

# 确保所有数组索引都在数组的界限内

我们应该确保不访问越界的数组索引。

否则，我们会得到 undefined 作为返回值。

# 考虑使用对象而不是数组

数组应该是顺序访问的，所以如果我们不需要，我们可以用对象来代替。

这样，我们就不必担心索引，只需按照我们想要的方式访问。

JavaScript 还有键值对的映射和不包含重复值的容器集。

# 检查数组的端点

我们应该检查数组的端点来捕捉可能在那里发生的错误。

一个错误是不好的，所以我们应该检查这些。

# 如果一个数组是多维的，确保它的下标以正确的顺序使用

`arr[i][j]`和`arr[j][i]`完全不同。所以我们应该确保索引的顺序是正确的。

# 注意索引串扰

如果我们有嵌套循环，很容易混淆`arr[j]`和`arr[i]`，所以我们应该确保我们的代码没有类似的错别字，否则我们会得到意想不到的结果。

# 对全局数据的意外更改

很容易弄乱全局数据，因为它们可以在任何地方被访问，所以我们不应该在任何地方使用它们。

相反，我们可以尽可能多地使用局部变量。

块范围的变量甚至更好。

# 全局数据阻碍了代码重用

如果我们想要重用包含全局数据的代码，那么我们必须确保全局数据不会受到重用的影响。

这意味着重用引用全局数据的代码很困难。

这是我们应该在应用程序中包含全球数据的另一个原因。

# 使用全球数据的理由

我们很少必须拥有全球性的价值观，但它们可能是存在的。

像我们应用程序模式的常量之类的东西可能是一个常量。

如果枚举类型不存在，全局变量也可以用于模拟枚举类型，JavaScript 就是这种情况。

如果我们有一些相关的值，并且我们需要在任何地方访问它们，那么我们可能希望从它们中产生一个或多个全局变量。

此外，如果我们有到处都在使用的数据，我们可能还想将它们定义为全局数据。

# 仅在万不得已时才使用全球数据

全球数据只应作为最后手段使用。

如果某样东西根本不可能是地方性的，那么它们可能必须是全球性的。

然而，在大多数情况下，JavaScript 模块不应该是这种情况。

![](img/deb476d8964120ae9053ff05bbbd5abc.png)

Photo by [Jen Theodore](https://unsplash.com/@jentheodore?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

# 访问功能

访问函数允许我们以可控的方式访问全局变量。

我们可能希望为 getter 和设置全局变量创建函数。

此外，我们可能希望有一个访问全局变量的锁定机制，这样我们就不会有多段代码访问同一个全局变量的问题。

# 降低使用全局变量的风险

如果我们声明全局变量，我们应该让它们的名字显而易见。

例如，所有的全局变量都可以从`g`开始。

我们还应该创建一个所有全局变量的列表，这样每个人都知道它们是全局的。

它们也不应该包含中间结果。

我们绝对不应该把所有东西都放在一个大的全局对象中，然后把它们传递到任何地方。

这只是一个灾难的配方，因为它们可以被我们程序中的任何东西改变。

# 结论

我们应该尽可能避免全局变量。它们只是没什么用，而且可能会导致很多意想不到的结果。

如果我们想使用全局变量，那么我们必须确保它们被有序地访问。

如果我们在使用数组，那么我们应该小心一个接一个的错误。

此外，如果我们不需要顺序访问数据，就不必使用数组。我们可以使用其他东西，比如布景和地图。

# **一封用简单英语写的信**

你知道我们有四份出版物和一个 YouTube 频道吗？你可以在我们的主页 [**plainenglish.io**](https://plainenglish.io/) 找到所有这些内容——关注我们的出版物并 [**订阅我们的 YouTube 频道**](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw) **来表达你的爱吧！**
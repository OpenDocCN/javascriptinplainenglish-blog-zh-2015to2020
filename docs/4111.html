<html>
<head>
<title>Vue 3 — Render Functions Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —渲染功能基础</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-render-functions-basics-a55b44a339f2?source=collection_archive---------3-----------------------#2020-11-17">https://javascript.plainenglish.io/vue-3-render-functions-basics-a55b44a339f2?source=collection_archive---------3-----------------------#2020-11-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/04c7e8c827a3ec137302854b7da56cbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9VuU54RXfJb4DkGH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@marsumilae?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marsumilae</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Vue 3创建渲染函数。</p><h1 id="10fc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">渲染函数</h1><p id="40bf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">大多数时候应该使用模板来构建Vue组件。</p><p id="7b7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，在有些情况下，我们可能需要更多的灵活性。</p><p id="20e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可能想要添加带有动态标签的元素。</p><p id="1673" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="31ac" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;variable-heading :level="1"&gt;foo&lt;/variable-heading&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="24b7" class="mn lc iq mj b gy ms mp l mq mr">      app.component("variable-heading", {<br/>        template: `<br/>          &lt;h1 v-if="level === 1"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h1&gt;<br/>          &lt;h2 v-else-if="level === 2"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h2&gt;<br/>          &lt;h3 v-else-if="level === 3"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h3&gt;<br/>          &lt;h4 v-else-if="level === 4"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h4&gt;<br/>          &lt;h5 v-else-if="level === 5"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h5&gt;<br/>          &lt;h6 v-else-if="level === 6"&gt;<br/>            &lt;slot&gt;&lt;/slot&gt;<br/>          &lt;/h6&gt;<br/>        `,<br/>        props: {<br/>          level: {<br/>            type: Number,<br/>            required: true<br/>          }<br/>        }<br/>      });</span><span id="6881" class="mn lc iq mj b gy ms mp l mq mr">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b6c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用渲染函数使标题标签动态化。</p><p id="5332" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7d8c" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;variable-heading :level="1"&gt;foo&lt;/variable-heading&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({});</span><span id="c21e" class="mn lc iq mj b gy ms mp l mq mr">      app.component("variable-heading", {<br/>        render() {<br/>          const { h } = Vue;</span><span id="8785" class="mn lc iq mj b gy ms mp l mq mr">          return h(`h${this.level}`, {}, this.$slots.default());<br/>        },<br/>        props: {<br/>          level: {<br/>            type: Number,<br/>            required: true<br/>          }<br/>        }<br/>      });</span><span id="2683" class="mn lc iq mj b gy ms mp l mq mr">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="a622" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个<code class="fe mt mu mv mj b">render</code>方法创建了<code class="fe mt mu mv mj b">variable-heading</code>组件来呈现我们的HTML。</p><p id="1bbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">h</code>方法让我们渲染我们的项目。</p><p id="dea8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是标记名。</p><p id="dca5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个是我们想要传递给它的任何道具或属性。</p><p id="0646" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个参数是一个子数组。</p><p id="0374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">this.$slots.default()</code>是让我们填充内容的默认槽，</p><p id="b86b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组件的其余部分与其他部分相同。</p><p id="2b01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM中的每个元素都是一个节点，<code class="fe mt mu mv mj b">h</code>方法让我们像在树中一样通过嵌套来呈现节点。</p><h1 id="12fe" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">虚拟DOM树</h1><p id="dedb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vue保留了一个虚拟DOM树来跟踪需要对真实DOM进行的更改。</p><p id="7944" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">h</code>方法返回一个对象，该对象包含Vue更新读取的DOM所需的信息。</p><h1 id="b5ab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe mt mu mv mj b">h()</code>论据</h1><p id="c091" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe mt mu mv mj b">h</code>方法有3个参数。</p><p id="5cdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标记名是第一个参数。它可以是字符串、对象、函数或<code class="fe mt mu mv mj b">null</code>。</p><p id="b11c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它是一个对象，那么它必须是一个组件或异步组件。</p><p id="d8c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是一个带有可选属性的对象。</p><p id="cab1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个参数是子节点的字符串、数组或对象。</p><p id="9388" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也是可选的。</p><h1 id="7b56" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">虚拟节点必须是唯一的</h1><p id="a13c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的渲染函数中不能有重复的VNodes。</p><p id="b1dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们不能有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a749" class="mn lc iq mj b gy mo mp l mq mr">render() {<br/>  const myParagraphVNode = Vue.h('p', 'hi')<br/>  return Vue.h('div', [<br/>    paragraph, paragraph<br/>  ])<br/>}</span></pre><p id="d9a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能在数组中有2个<code class="fe mt mu mv mj b">paragraph</code>。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/6bc144914c5fe0ccb29e452e6e2d01ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FyTvl4Yc65Mx0YKJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@soberanes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Uriel Soberanes</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7400" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ec46" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用渲染函数告诉Vue如何用JavaScript渲染组件。</p><p id="214b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是模板的替代方案。</p><p id="e60a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
# JavaScript 设计模式:适配器模式

> 原文：<https://javascript.plainenglish.io/javascript-design-patterns-adapter-explained-cbcffbb4b8bc?source=collection_archive---------3----------------------->

![](img/269e89fbb96d53df488520f6a027f99a.png)

Cover picture by Arthur Frank

# 快速介绍

这是我计划撰写的关于 JavaScript 设计模式的系列文章的第一篇。这次我们将深入探讨适配器模式。这是一个最简单但非常强大且被低估的模式。

我们将尝试回答几个关键问题，并看一个如何在 JavaScript 应用程序中使用适配器的例子。

# 什么是设计模式？

![](img/5ad09499d82c240f72e9115cb3186e3f.png)

总的想法听起来很简单。模式是某种事物不止一次的重复。虽然对于软件设计模式来说，这有点棘手，但是重复的主要概念仍然适用。

如果我们试着用一句话来总结它，听起来会像这样-

> 软件设计模式是对重现问题的通用解决方案

在过去的几十年里，人们建立了一大堆不同的设计模式。我怎么强调都不为过，这些模式中的大多数将会简化你的编码生活。简直不可思议。一旦你至少掌握了其中的一些，你会觉得你在用完全不同的语言编码。

打个比方，你可以想象一个刚刚获得驾驶执照的新手司机，他或她知道如何驾驶，但效率不高，经常刹车，因为司机每次加速时都过于用力地踩离合器，或者在下坡时踩错刹车。突然，司机有了一个“啊哈时刻”——如果我每次下坡时都使用我的齿轮来辅助我的休息，这将有助于节省衬垫，以及我的车的整体健康。

本节的总结是——设计模式可以帮助您保持代码高效、健康、易于维护和扩展。

# JavaScript 和设计模式

![](img/3a5ae149bf0fab4d99d6cbc58f113a77.png)

Photo by [Émile Perron](https://unsplash.com/@emilep?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

如你所知，JavaScript 与其他编程语言相比有一点不同，尤其是当我们谈到面向对象时。它有自己的特点，利弊。但是如果我们列出最常见的问题，它们将是——缺乏严格的类型和没有面向对象的可靠/成熟的支持。

由于我们上面提到的品质，许多人认为设计模式不适合 JavaScript。工程师只是忽略它们，因为它们不“适用”。

但是，不要忘记，我们已经了解了是什么使得设计模式如此。这只是一个概念，关于你如何设计你的应用程序代码。如果你不能像书中描述的那样利用整个模式，这并不意味着你不能充分利用它并适应它，对吗？

# JavaScript 中的适配器模式

![](img/4259bb4c78166cb2854b4f467f129817.png)

Photo by [Frederick Tubiermont](https://unsplash.com/@callmefred?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

在我们深入 JavaScript 中的适配器模式示例之前，让我们定义一下它到底是什么。你可能从一个真实的家庭世界中知道，适配器用于连接两个或更多不能用原始插座连接的东西。比如英国插头不能和欧洲插座一起使用，所以你需要一个适配器。这同样适用于编程—适配器模式。

但是，诀窍在于，您必须确定某个东西需要一个适配器。因为你可能知道，如果你有编码经验，特别是 JavaScript，人们倾向于在任何地方使用任何东西。最终，代码库被第三方依赖项和没有任何标准的意大利面条代码搞得一团糟。

适配器是一种结构化设计模式，因此它可以极大地提高代码的质量和可伸缩性。我将通过两个例子解释它是如何工作的——简单的图表和简单的代码实现。

## 适配器模式—简单图表

这是一个没有适配器的简单图表。橙色代表所有不属于你或不符合你标准的代码。如您所见，它与您的主代码紧密耦合。最终，它会创建混乱且不可伸缩的应用程序代码库。

![](img/fda05ac140ce91a67104f708cc6b8469.png)

Diagram without adapter | Author A. Frank

**现在让我们看看适配器的例子。如你所见，它充当了某种过滤器或漏斗。适配器消耗所有旧的或第三方代码，只输出您的代码需要和期望的内容。**

![](img/ae3b84e486fef2a0b6fddf23d492c18c.png)

Diagram with adapter | Author A. Frank

通过这种方式，您可以控制通过自己的接口向代码公开的内容，该接口符合您的标准并且是可伸缩的。如果你需要用别的东西来改变第三方或旧的代码实现，你所需要的只是更新或改变适配器，代码库的其余部分将正常工作。太棒了，不是吗？

## 适配器模式—代码示例

假设我们有一个应用程序，需要生成并使用`**uuid**` **(** 通用唯一标识符**)。**我们有`**index.js**` 文件，我们决定通过`NPM` — uuid 安装第三方库。因为我们不想重新发明轮子，它目前似乎是一个坚实的库。

既然我们已经安装了它，我们通常会在代码中直接使用它，就像这样—

![](img/0227854fae1bc01c598dd6d0121ca236.png)

Code sample | A. Frank

如果你看看这个例子，它是一个有数百甚至数千个文件的大型项目。随着时间的推移，这个库可能会在如此多的脚本和文件中使用，以至于您会丢失:

*   信息技术跟踪(图书馆)
*   界面的控制(您使用由库方法指定的)
*   可伸缩性和将一个实现转移到另一个实现的能力

你可能猜对了，我们需要一个适配器。

我们能做什么——创建一个额外的接口来支持我们的代码，并遵循我们的代码库标准和命名约定。假设我们的代码库中有`**utils**/`文件夹。我们可以像这样为我们的`**uuid**`库创建一个适配器:

![](img/de6d760b1dd4c5768431400a5ca2531a.png)

Code sample | A. Frank

现在，这个适配器将成为我们的代码，由我们控制。我们可以定义它的结构，以及它遵循的标准。但是最重要的是**我们为第三方库或任何其他我们不想泄露到我们的主代码中的代码提供了单点注入。**

我们现在可以使用我们的适配器，如下所示，并确保我们的代码是干净的和可伸缩的。如果下一个 JQuery 情况出现，对于您使用的库，您将做好准备。你将比别人领先几步，能够更容易地迁移、切换或扩展你的代码。

![](img/0a8a5934a59e96c176127d6f83dca690.png)

Code sample | A. Frank

差不多就是这样，就像我说的，非常简单。我希望您已经了解了什么是适配器模式，并且理解了不要低估它并相应地使用它的重要性。

**快，一句话总结。**

> 适配器模式是对讨厌的或第三方代码的抽象，你需要在你的主要干净的代码库中。

# 总结

![](img/0cc33f9e17ca636c47e2737121b9ea1b.png)

Photo by [Hanny Naibaho](https://unsplash.com/@hannynaibaho?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

谢谢你读到这一步。我真的希望，如果你读完这篇文章，你已经获得了一些好的见解，并成为更好的工程师。祝你玩得愉快，下一篇文章再见。🔥
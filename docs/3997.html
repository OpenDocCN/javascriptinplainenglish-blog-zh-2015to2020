<html>
<head>
<title>I Made a Game Boy Drum Machine with JavaScript, HTML and CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我用JavaScript，HTML和CSS做了一个Game Boy鼓机</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-a-game-boy-drum-machine-using-javascript-html-and-css-c389f032791a?source=collection_archive---------8-----------------------#2020-11-09">https://javascript.plainenglish.io/how-to-make-a-game-boy-drum-machine-using-javascript-html-and-css-c389f032791a?source=collection_archive---------8-----------------------#2020-11-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a12e4d6e8b5429f37782facf6c3b4adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TboFx2xE3Xr0y5vtzMQWkw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><a class="ae jz" href="https://thekey.company/products/gmk-dmg?variant=12412178202724" rel="noopener ugc nofollow" target="_blank">https://thekey.company/products/gmk-dmg?variant=12412178202724</a></figcaption></figure><p id="8237" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你出生在80年代，和我一样，你可能仍然对8位时代的游戏有点痴迷。当我回头看时，我实际上发现自己在许多情况下比实际游戏更欣赏旧任天堂游戏的音乐(有一些不好的，好吗？).通常一段旋律会停留在我的脑海中——好几天都不知道它来自哪里，直到我意识到它来自我小时候沉迷了无数个小时的某个游戏。</p><p id="db2c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，当我最近偶然看到Web Dev Simplified的<a class="ae jz" href="https://youtu.be/vjco5yKZpU8" rel="noopener ugc nofollow" target="_blank">教程</a>关于如何制作JavaScript钢琴时，我决定创建它，但使用Game Boy声音代替。我用的Game Boy样本包可以免费下载，<a class="ae jz" href="https://bedroomproducersblog.com/2015/04/08/game-boy-drum-kit/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="645a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一步是打开您选择的代码编辑器——我将使用VS代码。你需要创建3个文件和一个文件夹:<strong class="kc io">index.html</strong>、<strong class="kc io"> index.js </strong>、<strong class="kc io"> style.css </strong>和一个samples文件夹。选出10个。wav文件示例，并将它们添加到sounds文件夹中。接下来，我们想要创建一个包含10个div的div(每个示例一个div)。确保创建一个<code class="fe ky kz la lb b">data-sample=”sample name”</code>属性，并给它们所有声音的类名。用<code class="fe ky kz la lb b">&lt;br&gt;</code>加上<code class="fe ky kz la lb b">&lt;p&gt;</code> s，输入名字和键盘按键，我用的是home行。我们还将使用样本声音文件创建10个音频标签。每个音频id必须与相应的数据集样本属性完全相同，这一点至关重要:</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lc"><img src="../Images/95213300a4bd91a4fea0af83f69ccae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WdgYrmIH4eyaP5wC5bHIDw.png"/></div></div></figure><p id="e5ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们将向我们的。仪器和。声音类。我们将使用Flexbox<a class="ae jz" href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" rel="noopener ugc nofollow" target="_blank">https://css-tricks.com/snippets/css/a-guide-to-flexbox/</a>创建一个响应浏览器窗口大小的简单行。我们将在。声音类为每个元素画一个圆，这些元素将在flexbox中均匀分布。我们还将为p元素添加一些灯光样式:</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/0e99bf51a3c41c6f8e2e38ba333b08dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*RcSTrpI1debGADtBtzINxQ.png"/></div></figure><p id="3d33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">继续在您的终端中运行命令<open index.html="">，在您的浏览器中打开该文件。如果一切正常，您应该会看到类似这样的内容:</open></p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi li"><img src="../Images/36628c3d2ba2e6bcb9d395b398cddf46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Oy3T6dN4UfgonMum5IGDg.png"/></div></div></figure><p id="5563" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在来看看JavaScript。</p><p id="c5a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们要做的第一件事是把我们将要使用的所有键盘字符放在一个数组中，并把它赋给一个变量。我的长这样<code class="fe ky kz la lb b">const keyboardKeys = ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ';']</code>。接下来选择所有的。用querySelectorAll划分声音类，并将它们赋给一个变量<code class="fe ky kz la lb b">const sounds = document.querySelectorAll(‘.sound’)</code>。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lj"><img src="../Images/48f968bf6e467e7b8b9d61c4c6a1b1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*paFUPAtTM2ViJFshXiJ10w.png"/></div></div></figure><p id="01bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们将为整个文档添加一个事件监听器，它将监听<code class="fe ky kz la lb b">keydown</code>，这意味着它正在监听任何键盘按压。我们做的第一件事是确保如果一个键被按下并按住，它不会只是快速播放和重复声音；<code class="fe ky kz la lb b">if (e.repeat) return</code>我们只是返回，这样就不会播放声音了。我们将“keydown”事件赋给一个名为<code class="fe ky kz la lb b">key</code>的变量。现在，我们可以将变量<code class="fe ky kz la lb b">keyIndex</code>设置为<code class="fe ky kz la lb b">keyboardKeys</code>并按下键的索引。因此，如果被按下的键在我们的<code class="fe ky kz la lb b">keyboardKeys</code>数组中，它会将<code class="fe ky kz la lb b">keyIndex</code>设置为数组中被按下的键的位置。所以如果我输入<code class="fe ky kz la lb b">g</code>，那么<code class="fe ky kz la lb b">keyIndex</code>将会是<code class="fe ky kz la lb b">4</code>。如果我按下一个不在<code class="fe ky kz la lb b">keyboardKeys</code>数组中的键，那么索引将不会被找到，所以它将返回<code class="fe ky kz la lb b">-1</code>。所以让我们创建一个条件来检查<code class="fe ky kz la lb b">keyIndex</code>是否为<code class="fe ky kz la lb b">&gt; -1</code>。如果<code class="fe ky kz la lb b">true</code>，那么我们可以调用该函数来播放声音。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/5b39ae47ac7c16d4fc258c6271f6b646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTXT2qVAxtF0GQjtK0F_Og.png"/></div></figure><p id="8801" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">playSound</code>函数接受一个参数。我们将在<code class="fe ky kz la lb b">keyIndex</code>处从声音数组传入一个div。所以想想看，如果我按键盘上的<code class="fe ky kz la lb b">g</code>，它会给我们<code class="fe ky kz la lb b">4</code>的<code class="fe ky kz la lb b">keyIndex</code>。如果我们将该索引传递给sounds数组，我们会发现自己位于第4个索引处，即<code class="fe ky kz la lb b">&lt;div data-sample=”perc3" class=”sound”&gt;&lt;p&gt;perc&lt;br&gt;[G]&lt;/p&gt;&lt;/div&gt;</code>。我们将把它传递给<code class="fe ky kz la lb b">playSound</code>函数。一旦进入，我们可以使用div的dataset sample属性来提供相应样本声音的正确音频id(它将是<code class="fe ky kz la lb b">perc3</code>)。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/d66da8edede13d7c421faa991b7abd25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DdG3p_4SGO9eGnaZVPV_Rg.png"/></div></div></figure><p id="20fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们通过sampleSound变量中的id保存选定的音频。我们可以将<code class="fe ky kz la lb b">currentTime = 0</code>属性设置为<code class="fe ky kz la lb b">zero</code>——这将允许样本以我们希望的速度重新开始，而不是我们必须等待它结束播放，然后才能通过按键再次触发它。现在我们简单地对保存在sampleSound变量中的音频样本调用<code class="fe ky kz la lb b">play()</code>(这是一种在JS中播放视频或音频的方法)。如果一切都设置正确，你现在应该可以听到你分配的键盘按键的声音了！</p><p id="4a59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">GitHub回购:<a class="ae jz" href="https://github.com/kylefarmer85/game-boy-drum-machine-js" rel="noopener ugc nofollow" target="_blank">https://github.com/kylefarmer85/game-boy-drum-machine-js</a></p></div></div>    
</body>
</html>
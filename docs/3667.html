<html>
<head>
<title>How to Combine Context Providers for Cleaner React Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç»„åˆä¸Šä¸‹æ–‡æä¾›è€…ä»¥è·å¾—æ›´æ¸…æ™°çš„ååº”ä»£ç </h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-combine-context-providers-for-cleaner-react-code-9ed24f20225e?source=collection_archive---------2-----------------------#2020-10-16">https://javascript.plainenglish.io/how-to-combine-context-providers-for-cleaner-react-code-9ed24f20225e?source=collection_archive---------2-----------------------#2020-10-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1234" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚æœæ‚¨ä¸æ˜¯ç”Ÿæ´»åœ¨ç»ç’ƒä¸‹ï¼Œå¹¶ä¸”åœ¨è¿‡å»ä¸¤å¹´ä¸­æ‚¨å·²ç»çœ‹è¿‡Reactä»£ç ï¼Œé‚£ä¹ˆæ‚¨å·²ç»çœ‹åˆ°äº†Reactä¸Šä¸‹æ–‡çš„å®é™…åº”ç”¨ã€‚ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªå¦‚æ­¤å¼ºå¤§ç‰¹æ€§ï¼Œå¯¹äºæˆ‘ä»¬æ‰€æœ‰æ­£åœ¨ä½¿ç”¨Reactçš„äººæ¥è¯´ï¼Œå®ƒæ„å‘³ç€ä»æ­£ç¡®çš„é’»æ¢å’Œå®¹å™¨ç±»ç»„ä»¶çš„ç§»é™¤ä¸­è§£è„±å‡ºæ¥ï¼Œæˆ‘æ•¢è¯´Reduxä¹Ÿæ˜¯å¦‚æ­¤ğŸ˜±ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/195bf5cf0ae71948aabdc84097aa4ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sgf5m6TugWBdEhlm.jpg"/></div></div></figure><p id="f6ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç„¶è€Œï¼Œå¾ˆå®¹æ˜“è¿·å¤±åœ¨ä¸Šä¸‹æ–‡æä¾›è€…çš„åœ°ç‹±ä¸­ï¼Œå› ä¸ºåœ¨ä½ çœ¨çœ¼ä¹‹å‰ï¼Œä½ çš„ä»£ç å°†çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="d9fa" class="kz la in kv b gy lb lc l ld le">&lt;ContextProvider1&gt;</span><span id="a7ad" class="kz la in kv b gy lf lc l ld le">  &lt;ContextProvider2&gt;</span><span id="35b7" class="kz la in kv b gy lf lc l ld le">    &lt;ContextProvider3&gt;</span><span id="6cf8" class="kz la in kv b gy lf lc l ld le">      &lt;ContextProvider4&gt;</span><span id="509a" class="kz la in kv b gy lf lc l ld le">        ....</span><span id="47fb" class="kz la in kv b gy lf lc l ld le">      &lt;/ContextProvider4&gt;</span><span id="0e57" class="kz la in kv b gy lf lc l ld le">    &lt;/ContextProvider3&gt;</span><span id="788a" class="kz la in kv b gy lf lc l ld le">  &lt;/ContextProvider2&gt;</span><span id="e555" class="kz la in kv b gy lf lc l ld le">&lt;/ContextProvider1&gt;</span></pre><p id="8a71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¿™å°†å¾ˆå¿«å¤±å»æ§åˆ¶ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼Œå½“æˆ‘ä»¬è°ˆè®ºä¸Šä¸‹æ–‡æä¾›è€…æ—¶ï¼ŒORDER MATHERSã€‚</p><p id="161f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¾‹å¦‚:<br/>æ‚¨å¯ä»¥åœ¨<em class="lg"> ContextProvider2 </em>ä¸­ä½¿ç”¨<em class="lg"> ContextProvider1 </em>ï¼Œå› ä¸º<em class="lg"> ContextProvider1 </em>æ­£åœ¨åŒ…è£…<em class="lg"> ContextProvider2 </em>ï¼Œä½†åä¹‹åˆ™ä¸ç„¶ï¼Œæ‰€ä»¥å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="86e5" class="kz la in kv b gy lb lc l ld le">// insade <em class="lg">ContextProvider2</em></span><span id="9f5d" class="kz la in kv b gy lf lc l ld le">...<br/>const { foo } = useContext(Context1) // WORKS!</span></pre><p id="4eb9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç„¶è€Œï¼Œäº‹æƒ…æ˜¯è¿™æ ·çš„:</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="4348" class="kz la in kv b gy lb lc l ld le">// insade <em class="lg">ContextProvider1</em></span><span id="687b" class="kz la in kv b gy lf lc l ld le">...<br/>const { baz } = useContext(Context2) // DOES NOT WORK!</span></pre><p id="0a62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ‰€ä»¥å¾ˆéš¾é€šè¿‡æ¨¡æ¿æ£€æŸ¥è°åœ¨åŒ…è£…è°ã€‚æ‰€ä»¥è®©æˆ‘ä»¬ç®€å•ç‚¹ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lh li l"/></div></figure></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="1820" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸Šä¸‹æ–‡æä¾›è€…åªæ˜¯å‡½æ•°ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«ç»„åˆï¼Œå¹¶ç”¨äºåˆ›å»º<strong class="jm io"> AppContextProvider </strong>æˆ‘ä»¬å°±è¿™ä¹ˆåšå§ã€‚</p></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="03fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºutilæ¥å¸®åŠ©æˆ‘ä»¬ã€‚</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="f44f" class="kz la in kv b gy lb lc l ld le">// <em class="lg">combineComponents.tsx</em></span><span id="eb9c" class="kz la in kv b gy lf lc l ld le"><em class="lg">import </em>React, { ComponentProps, FC } <em class="lg">from </em>'react';<br/><br/><em class="lg">export const </em>combineComponents = (...<em class="lg">components</em>: FC[]): FC =&gt; {<br/>  <em class="lg">return components</em>.reduce(<br/>    (<em class="lg">AccumulatedComponents</em>, <em class="lg">CurrentComponent</em>) =&gt; {<em class="lg"><br/>      return </em>({ <em class="lg">children </em>}: ComponentProps&lt;FC&gt;): JSX.Element =&gt; {<br/>        <em class="lg">return </em>(<br/>          &lt;AccumulatedComponents&gt;<br/>            &lt;CurrentComponent&gt;{<em class="lg">children</em>}&lt;/CurrentComponent&gt;<br/>          &lt;/AccumulatedComponents&gt;<br/>        );<br/>      };<br/>    },<br/>    ({ <em class="lg">children </em>}) =&gt; &lt;&gt;{<em class="lg">children</em>}&lt;/&gt;,<br/>  );<br/>};</span></pre><p id="ab20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¿™æ ·ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€ä¼ é€’ä¸€ç»„ä¸Šä¸‹æ–‡æä¾›è€…ï¼Œå®ƒä»¬å°†ä»å·¦åˆ°å³ç»„åˆèµ·æ¥ã€‚</p></div><div class="ab cl lj lk hr ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ig ih ii ij ik"><p id="1bd1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å…¶æ¬¡ï¼Œè®©æˆ‘ä»¬åˆ›å»ºâ€œ<em class="lg"> AppContextProvider </em>â€ã€‚</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="2a5e" class="kz la in kv b gy lb lc l ld le">// AppContextProvider.tsx</span><span id="3041" class="kz la in kv b gy lf lc l ld le">import React from 'react';</span><span id="81d5" class="kz la in kv b gy lf lc l ld le">import { <em class="lg">ContextProvider1 </em>} from '.../Context1';<br/>import { ContextProvider2 } from '.../Context2';<br/>import { ContextProvider3 } from '.../Context3';<br/>import { ContextProvider4 } from '.../Context4';</span><span id="d622" class="kz la in kv b gy lf lc l ld le">import { combineComponents } from '.../utils/combineComponents;</span><span id="f08e" class="kz la in kv b gy lf lc l ld le">const providers = [<br/>  <em class="lg">ContextProvider1,<br/>  ContextProvider2,<br/>  ContextProvider3,<br/>  ContextProvider4<br/></em>]</span><span id="c6b6" class="kz la in kv b gy lf lc l ld le"><em class="lg">export const </em>AppContextProvider = combineComponents(...providers);</span></pre><p id="7786" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å…³äºå“ªä¸ªä¸Šä¸‹æ–‡åœ¨å“ªé‡Œå¯ç”¨çš„è§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒæ›´å®¹æ˜“è·Ÿè¸ªå’Œæ¨ç†ã€‚<br/>ç°åœ¨æˆ‘ä»¬çš„ç»„ä»¶çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kj kk kl km gt ku kv kw kx aw ky bi"><span id="d759" class="kz la in kv b gy lb lc l ld le">&lt;AppContextProvider&gt;</span><span id="d0b8" class="kz la in kv b gy lf lc l ld le">  ....</span><span id="ad2e" class="kz la in kv b gy lf lc l ld le">&lt;/AppContextProvider&gt;</span></pre><p id="b8e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é‚£å°±æ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡ã€‚è¿™æ˜¯ä½ å¯ä»¥ç”¨æ¥å¼€å‘å¤§è§„æ¨¡åº”ç”¨ç¨‹åºçš„åŸåˆ™ã€‚</p><p id="9559" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å…³äºç”¨ä¸Šä¸‹æ–‡æ›¿æ¢Reduxå’ŒReduxä¸­é—´ä»¶çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»<a class="ae lq" href="https://medium.com/@rasha08/react-context-async-calls-with-hooks-redux-like-architecture-and-combine-context-providers-with-ee95ca87b455" rel="noopener">https://medium . com/@ rasha 08/react-Context-async-calls-with-hooks-Redux-like-architecture-and-combine-Context-providers-with-ee95 ca 87 b 455</a></p><p id="6108" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lg">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae lq" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lg">plain English . io</em></strong></a><em class="lg">ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae lq" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lg">å…è´¹å‘¨æŠ¥</em> </strong> </a> <em class="lg">ã€‚å…³æ³¨æˆ‘ä»¬å…³äº</em><a class="ae lq" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lg">Twitter</em></strong></a><a class="ae lq" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lg">LinkedIn</em></strong></a><em class="lg"/><a class="ae lq" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lg">YouTube</em></strong></a><em class="lg"/><a class="ae lq" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lg">ä¸å’Œ</em> </strong> </a> <strong class="jm io"> <em class="lg">ã€‚</em>T49ã€‘</strong></p><p id="9a6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lg">å¯¹ç¼©æ”¾æ‚¨çš„è½¯ä»¶å¯åŠ¨æ„Ÿå…´è¶£</em> </strong> <em class="lg">ï¼Ÿæ£€æŸ¥</em> <a class="ae lq" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lg">ç”µè·¯</em> </strong> </a> <em class="lg">ã€‚</em></p></div></div>    
</body>
</html>
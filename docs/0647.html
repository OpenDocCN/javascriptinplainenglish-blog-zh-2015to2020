<html>
<head>
<title>How to Create a Progressive Web App with Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Vue.js创建渐进式Web应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-progressive-web-app-with-vue-js-7086cbf87a43?source=collection_archive---------1-----------------------#2019-11-21">https://javascript.plainenglish.io/how-to-create-a-progressive-web-app-with-vue-js-7086cbf87a43?source=collection_archive---------1-----------------------#2019-11-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1bd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">渐进式web应用程序(PWAs)是一个web应用程序，它可以做一些本机应用程序所做的事情。它可以离线工作，你可以从浏览器上一键安装。</p><p id="8cf7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PWAs应该可以在任何设备上运行良好。他们应该有所回应。在任何设备中性能都应该不错。人们可以很容易地链接到它，它应该有一个不同大小的设备图标。</p><p id="8015" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了构建PWA，我们必须注册服务人员来处理安装和添加离线功能，以使常规的web应用成为PWA。Service works还允许PWAs使用一些本机功能，如通知、设备离线时的缓存和应用程序更新。</p><p id="11ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用Vue CLI 3.x构建PWA非常简单。还有就是<a class="ae kl" href="https://www.npmjs.com/package/@vue/cli-plugin-pwa" rel="noopener ugc nofollow" target="_blank"> @vue/cli-plugin-pwa </a>插件。我们所要做的就是运行<code class="fe km kn ko kp b">vue add pwa</code>将我们的web应用程序转换为渐进式web应用程序。或者，我们可以使用<a class="ae kl" href="https://www.npmjs.com/package/@vue/cli-plugin-pwa" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/@vue/cli-plugin-pwa</a>中列出的设置来配置我们的应用程序。</p><p id="c3e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将构建一个渐进式web应用程序，显示来自纽约时报API的文章片段和一个搜索页面，用户可以在其中输入关键字来搜索API。</p><p id="13c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">桌面布局将在左边有一个项目名称列表，在右边有文章片段。移动布局将有一个下拉菜单，用于选择要显示的部分和显示文章片段的卡片。</p><p id="fca7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论屏幕大小如何，搜索页面顶部都会有一个搜索表单，下方会有文章片段。</p><p id="504f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要开始构建应用程序，我们首先要运行Vue CLI。我们运行:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="ef6e" class="ky kz iq kp b gy la lb l lc ld">npx @vue/cli create nyt-app</span></pre><p id="c954" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建Vue.js项目。当向导出现时，我们选择“手动选择功能”。然后我们选择将Vue路由器和Babel包含在我们的项目中。</p><p id="3aab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们添加自己的库，用于样式化和发出HTTP请求。我们使用BootstrapVue进行样式化，使用Axios进行请求，使用VueFilterDateFormat进行日期格式化，使用Vee-Validate进行表单验证。</p><p id="1b47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了安装所有的库，我们运行:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="05c8" class="ky kz iq kp b gy la lb l lc ld">npm i axios bootstrap-vue vee-validate vue-filter-date-format</span></pre><p id="2dff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装完所有的库之后，我们就可以开始构建我们的应用程序了。</p><p id="804b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们使用插槽来构建我们的页面布局。在<code class="fe km kn ko kp b">components</code>文件夹中创建<code class="fe km kn ko kp b">BaseLayout.vue</code>并添加:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="3322" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div class="row"&gt;<br/>      &lt;div class="col-md-3 d-none d-lg-block d-xl-none d-xl-block"&gt;<br/>        &lt;slot name="left"&gt;&lt;/slot&gt;<br/>      &lt;/div&gt;<br/>      &lt;div class="col"&gt;<br/>        &lt;div class="d-block d-sm-none d-none d-sm-block d-md-block d-lg-none"&gt;<br/>          &lt;slot name="section-dropdown"&gt;&lt;/slot&gt;<br/>        &lt;/div&gt;<br/>        &lt;slot name="right"&gt;&lt;/slot&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="e75d" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>export default {<br/>  name: "BaseLayout"<br/>};<br/>&lt;/script&gt;</span><span id="0433" class="ky kz iq kp b gy le lb l lc ld">&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;<br/>&lt;style scoped&gt;<br/>&lt;/style&gt;</span></pre><p id="0972" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个文件中，我们利用Vue插槽来创建主页的响应布局。我们在这个文件中有<code class="fe km kn ko kp b">left</code>、<code class="fe km kn ko kp b">right</code>和<code class="fe km kn ko kp b">section-dropdown</code>槽。因为我们将<code class="fe km kn ko kp b">d-none d-lg-block d-xl-none d-xl-block</code>类添加到了<code class="fe km kn ko kp b">left</code>槽中，所以<code class="fe km kn ko kp b">left</code>槽仅在屏幕较大时显示。自从我们添加了<code class="fe km kn ko kp b">d-block d-sm-none d-none d-sm-block d-md-block d-lg-none</code>类后，<code class="fe km kn ko kp b">section-dropdown</code>槽只在小屏幕上显示。这些类是来自Bootstrap的响应实用程序类。</p><p id="36fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这个文件中使用了Vue.js槽。Slots是Vue.js的一个有用特性，它允许您将组件的不同部分分成一个有组织的单元。通过将组件划分到插槽中，您可以通过将组件放入您定义的插槽中来重用它们。它也使你的代码更整洁，因为它让你把应用程序的布局和逻辑分开。</p><p id="2ea2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，如果您使用插槽，您不必再用父子关系来组合组件，因为您可以将任何组件放入插槽中。</p><p id="73e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://getbootstrap.com/docs/4.0/utilities/display/<a class="ae kl" href="https://getbootstrap.com/docs/4.0/utilities/display/" rel="noopener ugc nofollow" target="_blank">的</a>提供了响应性公用事业等级的完整列表</p><p id="5a62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，在<code class="fe km kn ko kp b">components</code>文件夹中创建一个<code class="fe km kn ko kp b">SearchLayout.vue</code>文件，并添加:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="85a0" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div class="row"&gt;<br/>    &lt;div class="col-12"&gt;<br/>      &lt;slot name="top"&gt;&lt;/slot&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="col-12"&gt;<br/>      &lt;slot name="bottom"&gt;&lt;/slot&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d25b" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>export default {<br/>  name: "SearchLayout"<br/>};<br/>&lt;/script&gt;</span></pre><p id="0a59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为我们的搜索页面创建另一个布局。我们的<code class="fe km kn ko kp b">top</code>和<code class="fe km kn ko kp b">bottom</code>插槽占据了屏幕的整个宽度。</p><p id="84d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们创建一个<code class="fe km kn ko kp b">mixins</code>文件夹，并在其中创建一个<code class="fe km kn ko kp b">requestsMixin.js</code>文件，然后添加:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="b0e1" class="ky kz iq kp b gy la lb l lc ld">const axios = require("axios");<br/>const APIURL = "<a class="ae kl" href="https://api.nytimes.com/svc" rel="noopener ugc nofollow" target="_blank">https://api.nytimes.com/svc</a>";</span><span id="24fd" class="ky kz iq kp b gy le lb l lc ld">export const requestsMixin = {<br/>  methods: {<br/>    getArticles(section) {<br/>      return axios.get(<br/>        `${APIURL}/topstories/v2/${section}.json?api-key=${process.env.VUE_APP_API_KEY}`<br/>      );<br/>    },</span><span id="f468" class="ky kz iq kp b gy le lb l lc ld">searchArticles(keyword) {<br/>      return axios.get(<br/>        `${APIURL}/search/v2/articlesearch.json?api-key=${process.env.VUE_APP_API_KEY}&amp;q=${keyword}`<br/>      );<br/>    }<br/>  }<br/>};</span></pre><p id="cbb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个mixin向纽约时报API发出HTTP请求。<code class="fe km kn ko kp b">process.env.VUE_APP_API_KEY</code>是纽约时报API的API key，我们从项目根文件夹的<code class="fe km kn ko kp b">.env</code>文件中获取，环境变量的key是<code class="fe km kn ko kp b">VUE_APP_API_KEY</code>。</p><p id="c015" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">Home.vue</code>中，将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="1daa" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Home&lt;/h1&gt;<br/>    &lt;BaseLayout&gt;<br/>      &lt;template v-slot:left&gt;<br/>        &lt;b-nav vertical pills&gt;<br/>          &lt;b-nav-item<br/>            v-for="s in sections"<br/>            :key="s"<br/>            :active="s == selectedSection"<br/>            <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="selectedSection = s; getAllArticles()"<br/>          &gt;{{s}}&lt;/b-nav-item&gt;<br/>        &lt;/b-nav&gt;<br/>      &lt;/template&gt;</span><span id="8e9e" class="ky kz iq kp b gy le lb l lc ld">&lt;template v-slot:section-dropdown&gt;<br/>        &lt;b-form-select<br/>          v-model="selectedSection"<br/>          :options="sections"<br/>          <a class="ae kl" href="http://twitter.com/change" rel="noopener ugc nofollow" target="_blank">@change</a>="getAllArticles()"<br/>          id="section-dropdown"<br/>        &gt;&lt;/b-form-select&gt;<br/>      &lt;/template&gt;</span><span id="7924" class="ky kz iq kp b gy le lb l lc ld">&lt;template v-slot:right&gt;<br/>        &lt;b-card<br/>          v-for="(a, index) in articles"<br/>          :key="index"<br/>          :title="a.title"<br/>          :img-src="(Array.isArray(a.multimedia) &amp;&amp; a.multimedia.length &gt; 0 &amp;&amp; a.multimedia[a.multimedia.length-1].url) || ''"<br/>          img-bottom<br/>        &gt;<br/>          &lt;b-card-text&gt;<br/>            &lt;p&gt;{{a.byline}}&lt;/p&gt;<br/>            &lt;p&gt;Published on: {{new Date(a.published_date) | dateFormat('YYYY.MM.DD hh:mm a')}}&lt;/p&gt;<br/>            &lt;p&gt;{{a.abstract}}&lt;/p&gt;<br/>          &lt;/b-card-text&gt;</span><span id="d37f" class="ky kz iq kp b gy le lb l lc ld">&lt;b-button :href="a.short_url" variant="primary" target="_blank"&gt;Go&lt;/b-button&gt;<br/>        &lt;/b-card&gt;<br/>      &lt;/template&gt;<br/>    &lt;/BaseLayout&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="55c5" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>// @ is an alias to /src<br/>import BaseLayout from "@/components/BaseLayout.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="9d7f" class="ky kz iq kp b gy le lb l lc ld">export default {<br/>  name: "home",<br/>  components: {<br/>    BaseLayout<br/>  },<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      sections: `arts, automobiles, books, business, fashion,<br/>      food, health, home, insider, magazine, movies, national,<br/>      nyregion, obituaries, opinion, politics, realestate, science,<br/>      sports, sundayreview, technology, theater,<br/>      tmagazine, travel, upshot, world`<br/>        .split(",")<br/>        .map(s =&gt; s.trim()),<br/>      selectedSection: "arts",<br/>      articles: []<br/>    };<br/>  },<br/>  beforeMount() {<br/>    this.getAllArticles();<br/>  },<br/>  methods: {<br/>    async getAllArticles() {<br/>      const response = await this.getArticles(this.selectedSection);<br/>      this.articles = response.data.results;<br/>    },<br/>    setSection(ev) {<br/>      this.getAllArticles();<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="f61a" class="ky kz iq kp b gy le lb l lc ld">&lt;style scoped&gt;<br/>#section-dropdown {<br/>  margin-bottom: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="0eb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用该文件中<code class="fe km kn ko kp b">BaseLayout.vue</code>中定义的插槽。在<code class="fe km kn ko kp b">left</code>槽中，当我们有一个桌面大小的屏幕时，我们将部分名称的列表放在那里以在左侧显示列表。</p><p id="30c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">section-dropdown</code>槽中，我们放置了只在手机屏幕上显示的下拉菜单，定义见<code class="fe km kn ko kp b">BaseLayout</code>。</p><p id="a6d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe km kn ko kp b">right</code>槽中，我们放入用于显示文章片段的引导卡，也是在<code class="fe km kn ko kp b">BaseLayout</code>中定义的。</p><p id="94fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将所有的槽内容放在<code class="fe km kn ko kp b">BaseLayout</code>中，并在我们想要放入槽中的项目外使用<code class="fe km kn ko kp b">v-slot</code>来使项目显示在指定的槽中。</p><p id="bd43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">script</code>部分，我们通过从<code class="fe km kn ko kp b">requestsMixin</code>中定义<code class="fe km kn ko kp b">getAllArticles</code>函数来逐节获取文章。</p><p id="e90b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来创建一个<code class="fe km kn ko kp b">Search.vue</code>文件并添加:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="b2d4" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Search&lt;/h1&gt;<br/>    &lt;SearchLayout&gt;<br/>      &lt;template v-slot:top&gt;<br/>        &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>          &lt;b-form <a class="ae kl" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate id="form"&gt;<br/>            &lt;b-form-group label="Keyword" label-for="keyword"&gt;<br/>              &lt;ValidationProvider name="keyword" rules="required" v-slot="{ errors }"&gt;<br/>                &lt;b-form-input<br/>                  :state="errors.length == 0"<br/>                  v-model="form.keyword"<br/>                  type="text"<br/>                  required<br/>                  placeholder="Keyword"<br/>                  name="keyword"<br/>                &gt;&lt;/b-form-input&gt;<br/>                &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;Keyword is required&lt;/b-form-invalid-feedback&gt;<br/>              &lt;/ValidationProvider&gt;<br/>            &lt;/b-form-group&gt;</span><span id="ca69" class="ky kz iq kp b gy le lb l lc ld">&lt;b-button type="submit" variant="primary"&gt;Search&lt;/b-button&gt;<br/>          &lt;/b-form&gt;<br/>        &lt;/ValidationObserver&gt;<br/>      &lt;/template&gt;</span><span id="bebc" class="ky kz iq kp b gy le lb l lc ld">&lt;template v-slot:bottom&gt;<br/>        &lt;b-card v-for="(a, index) in articles" :key="index" :title="a.headline.main"&gt;<br/>          &lt;b-card-text&gt;<br/>            &lt;p&gt;By: {{a.byline.original}}&lt;/p&gt;<br/>            &lt;p&gt;Published on: {{new Date(a.pub_date) | dateFormat('YYYY.MM.DD hh:mm a')}}&lt;/p&gt;<br/>            &lt;p&gt;{{a.abstract}}&lt;/p&gt;<br/>          &lt;/b-card-text&gt;</span><span id="8384" class="ky kz iq kp b gy le lb l lc ld">&lt;b-button :href="a.web_url" variant="primary" target="_blank"&gt;Go&lt;/b-button&gt;<br/>        &lt;/b-card&gt;<br/>      &lt;/template&gt;<br/>    &lt;/SearchLayout&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3c5a" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>// @ is an alias to /src<br/>import SearchLayout from "@/components/SearchLayout.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="f3ee" class="ky kz iq kp b gy le lb l lc ld">export default {<br/>  name: "home",<br/>  components: {<br/>    SearchLayout<br/>  },<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      articles: [],<br/>      form: {}<br/>    };<br/>  },<br/>  methods: {<br/>    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }<br/>      const response = await this.searchArticles(this.form.keyword);<br/>      this.articles = response.data.response.docs;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="7701" class="ky kz iq kp b gy le lb l lc ld">&lt;style scoped&gt;<br/>&lt;/style&gt;</span></pre><p id="5119" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和<code class="fe km kn ko kp b">Home.vue</code>很像。我们通过将搜索表单放入<code class="fe km kn ko kp b">SearchLayour</code>来将它放入<code class="fe km kn ko kp b">top</code>槽，并且通过将表单放入<code class="fe km kn ko kp b">&lt;template v-slot:top&gt;</code>元素来将我们的槽内容放入<code class="fe km kn ko kp b">top</code>槽。</p><p id="a6c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用<code class="fe km kn ko kp b">ValidationObserver</code>来验证整个表单，使用<code class="fe km kn ko kp b">ValidationProvider</code>来验证<code class="fe km kn ko kp b">keyword</code>输入。它们都是由Vee-Validate提供的。</p><p id="e306" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击搜索按钮后，我们调用<code class="fe km kn ko kp b"> this.$refs.observer.validate();</code>来验证表单。我们得到了<code class="fe km kn ko kp b">this.$refs.observer</code>,因为我们将<code class="fe km kn ko kp b">ValidationObserver</code>包装在表单之外。</p><p id="a74e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后一旦表单验证成功，通过<code class="fe km kn ko kp b">this.$refs.observer.validate()</code>解析到<code class="fe km kn ko kp b">true</code>，我们从<code class="fe km kn ko kp b">requestsMixin</code>调用<code class="fe km kn ko kp b">searchArticles</code>来搜索文章。</p><p id="7d22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">bottom</code>槽中，我们放了显示文章搜索结果的卡片。它的工作方式与其他插槽相同。</p><p id="e17d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">App.vue</code>中，我们放入:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="d143" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand href="#"&gt;New York Times App&lt;/b-navbar-brand&gt;</span><span id="7ecb" class="ky kz iq kp b gy le lb l lc ld">&lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="574f" class="ky kz iq kp b gy le lb l lc ld">&lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>          &lt;b-nav-item to="/search" :active="path == '/search'"&gt;Search&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d78a" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="0d59" class="ky kz iq kp b gy le lb l lc ld">&lt;style&gt;<br/>.page {<br/>  padding: 20px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="a595" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加BootstrapVue <code class="fe km kn ko kp b">b-navbar</code>并观察路线的变化，这样我们就可以将<code class="fe km kn ko kp b">active</code>属性设置为用户当前所在页面的链接。</p><p id="504d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将<code class="fe km kn ko kp b">main.js</code>的代码改为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="1930" class="ky kz iq kp b gy la lb l lc ld">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import VueFilterDateFormat from "vue-filter-date-format";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import { required } from "vee-validate/dist/rules";</span><span id="e674" class="ky kz iq kp b gy le lb l lc ld">Vue.use(VueFilterDateFormat);<br/>Vue.use(BootstrapVue);<br/>extend("required", required);<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);</span><span id="7db5" class="ky kz iq kp b gy le lb l lc ld">Vue.config.productionTip = false;</span><span id="7091" class="ky kz iq kp b gy le lb l lc ld">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="6943" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们导入这里使用的所有应用程序范围的包，如BootstrapVue、Vee-Validate以及日历和日期时间选择器小部件。</p><p id="b093" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些样式也被导入到这里，因此我们可以在整个应用程序中看到它们。</p><p id="f386" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">router.js</code>中，将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="6a4b" class="ky kz iq kp b gy la lb l lc ld">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";<br/>import Search from "./views/Search.vue";</span><span id="132a" class="ky kz iq kp b gy le lb l lc ld">Vue.use(Router);</span><span id="c6f3" class="ky kz iq kp b gy le lb l lc ld">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    },<br/>    {<br/>      path: "/search",<br/>      name: "search",<br/>      component: Search<br/>    }<br/>  ]<br/>});</span></pre><p id="5cf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为我们的应用程序设置路线，以便当用户输入给定的URL或单击它的链接时，他们可以看到我们的页面。</p><p id="b4ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们将<code class="fe km kn ko kp b">index.html</code>中的代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="7823" class="ky kz iq kp b gy la lb l lc ld">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;New York Times App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-slots-tutorial-app doesn't work properly without<br/>        JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5d32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更改应用程序的标题。</p><p id="322d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，通过运行<code class="fe km kn ko kp b">vue add pwa</code>使我们的应用程序成为渐进式web应用程序。然后我们运行<code class="fe km kn ko kp b">npm run build</code>来构建应用程序。运行之后，我们可以使用<code class="fe km kn ko kp b">browser-sync</code>包来服务我们的应用程序。运行<code class="fe km kn ko kp b">npm i -g browser-sync</code>来安装服务器。然后我们从我们的项目文件夹的<code class="fe km kn ko kp b">dist</code>文件夹运行<code class="fe km kn ko kp b">browser-sync start — server</code>，这个文件夹应该是我们运行<code class="fe km kn ko kp b">npm run build</code>时创建的。</p><p id="e5a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在浏览器的右上角，你应该会在Chrome的URL输入的右边看到一个安装按钮:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/5675d2a885803bd526e4495dab6beadc.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*F9_oyU-ZQxun0O-5jLeHOA.png"/></div></figure><p id="463d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击安装后，您会看到:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/33f43874bb815e4eed0c35554c403d5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHbANgN73hpGYS9pacRMAQ.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/9ed441f97b7b023626f9af0a213ab9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eghdTcEohIasWVToi9ae9w.png"/></div></div></figure><p id="ff2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还应该在chrome://apps/页面中获得该应用程序的条目。</p></div></div>    
</body>
</html>
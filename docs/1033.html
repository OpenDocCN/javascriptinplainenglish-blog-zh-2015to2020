<html>
<head>
<title>Animate a Better Experience with Tab Navigation and React-spring.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动画标签导航和反应弹簧更好的体验。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/animate-a-better-pwa-experience-with-react-spring-e8fbe76d2160?source=collection_archive---------3-----------------------#2020-01-18">https://javascript.plainenglish.io/animate-a-better-pwa-experience-with-react-spring-e8fbe76d2160?source=collection_archive---------3-----------------------#2020-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1ca4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如果你给你的观众一个充满爱的UX代码体验，他们会喜欢你的。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ec3449fb3b04bbb8cf6bd0f0a83a213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OefYkPuwnzAeVsUAoyWWfw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Tabs are great UX, but they shouldn’t get in the way of your content.</figcaption></figure><h2 id="4f8e" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">“我们如何在不到2秒的时间内，在小小的手机屏幕上传达我们的重大创意信息<em class="lr">和</em>转化销售？”</h2><blockquote class="ls"><p id="e369" class="lt lu iq bd lv lw lx ly lz ma mb mc dk translated">各地营销人员的悲叹声。</p></blockquote><p id="f3bd" class="pw-post-body-paragraph md me iq mf b mg mh jr mi mj mk ju ml le mm mn mo li mp mq mr lm ms mt mu mc ij bi translated">品牌需要解决他们以前从未处理过的问题。诸如屏幕分辨率、易读性、用户体验、手势、点击、滑动等挑战…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/94633e0ee0cb00cb0a7d50430ab7a1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jX_QrHYMNtuV_WDpFlqtvg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">This is what we’re going to make. Simple, right?</figcaption></figure><p id="b285" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">更重要的是，访问者花了太多的时间关闭弹出窗口，滚动，屏蔽，没有足够的时间看你的内容。内容<em class="nb">在付费广告中承诺</em>。</p><h2 id="8fa3" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在移动设备上，你的网站应该像一个本地应用程序。</h2><p id="48b0" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">我们的目标是在人们的世界中接触和激发他们——而不是强迫他们适应我们的世界。</p><p id="b90c" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">在这个UX的<Code/>片段中，我们将从大的技术画面中截取一小部分，并通过轻扫添加许多味道。我们将制作一个动画标签模型，以引人注目和直观的方式传递您的精彩内容。</p><div class="nh ni gp gr nj nk"><a href="https://vimeo.com/385078814" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">观看视频</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">使用反作用弹簧制作可折叠标签的动画。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">vimeo.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div><p id="650b" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">请随意将其余内容转发给您的开发团队合作伙伴。</p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><h1 id="53a2" class="og kw iq bd kx oh oi oj la ok ol om ld jw on jx lh jz oo ka ll kc op kd lp oq bi translated">开始编码吧。</h1><h2 id="06c7" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">首先，让我们安装一些东西。</h2><p id="58a4" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">我假设您已经设置了<a class="ae or" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> React开发环境</a>，所以我将跳过这一部分<em class="nb">。</em></p><p id="2782" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我试过几个React动画包，胜出的是react-spring。它易于使用，有很好的文档记录，有很多示例代码，并且有一个非常活跃的社区。在此获取信息和样品代码<a class="ae or" href="https://www.react-spring.io/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="fe13" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">此外，由于我们的目标是触摸屏设备，我们需要安装<em class="nb">反应-使用-手势</em>包。在此获取信息和样品代码<a class="ae or" href="https://www.npmjs.com/package/react-use-gesture" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="b45c" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">用<code class="fe os ot ou ov b">npm install react-spring react-use-gesture</code>安装两者。</p><h2 id="b33e" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">一个小小的旁注…</h2><p id="6232" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">本文不是创建选项卡UI组件的教程。相反，当你的观众被你的内容吸引时，我们会把注意力放在移动标签上。</p><p id="4fa1" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">在我的例子中，我选择定制<a class="ae or" href="https://getuikit.com/docs/tab" rel="noopener ugc nofollow" target="_blank"> UIKit </a> tabs模块。然而，<a class="ae or" href="https://codesandbox.io/s/ojlvn780r6" rel="noopener ugc nofollow" target="_blank">有</a>有<a class="ae or" href="https://alligator.io/react/tabs-component/" rel="noopener ugc nofollow" target="_blank">有</a>有<a class="ae or" href="https://medium.com/@diegocasmo/a-simple-react-tabs-component-47cac2cfbb5" rel="noopener">吨</a>的React tab例子摆在那里，所以你应该用你喜欢的，感觉最舒服的，真的没关系。</p><h2 id="afc3" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">“选项卡”组件。</h2><p id="c55b" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">我们将创建选项卡作为可重用的组件，可以导入到任何组件或应用程序中。让我们首先创建一个名为<code class="fe os ot ou ov b">Tabs.js</code>的新文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="5c93" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">你看到我做了什么吗？我们使用React挂钩在展开/折叠位置之间切换组件。我们还从react-spring导入了<code class="fe os ot ou ov b">useSpring</code>钩子和<code class="fe os ot ou ov b">animated</code>来生成我们的动画，以及<code class="fe os ot ou ov b">useGesture</code>来触发触摸事件。但是，稍后会详细介绍。</p><p id="afcc" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated"><code class="fe os ot ou ov b">tabLabels</code>参数是一个标签列表，将显示为单独的选项卡。例如，你可以做到</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="725b" class="kv kw iq ov b gy pc pd l pe pf">["Sign Up", "Pricing", "Contact Us"]</span></pre><p id="fcde" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated"><code class="fe os ot ou ov b">children</code>参数让我们将标签内容包含在组件中，而<code class="fe os ot ou ov b">...props</code>用于将其他内容传递给组件，如<code class="fe os ot ou ov b">className</code>或任何我们感兴趣的内容。</p><p id="3be7" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">接下来，我们设置<code class="fe os ot ou ov b">useState(true)</code>来初始化扩展状态。也就是说，当有人登陆网页时，标题内容和标签会展开，显示大标题，以及我们的标签导航。</p><p id="fd21" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">目前，我们只有选项卡容器和标题。如果我们运行这段代码，除了标题之外，我们不会看到其他任何东西。所以让我们添加标签按钮！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="84ef" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">这里发生了很多事情，所以让我们从头到尾看一遍。</p><p id="bd53" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">在标题之后，我们为选项卡按钮添加了一个新的<code class="fe os ot ou ov b">div</code>,并将其包含在类名中:</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="be21" class="kv kw iq ov b gy pc pd l pe pf">${tabsExpanded ? "tabs-default" : "tabs-collapsed"}</span></pre><p id="00ec" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">那叫做<a class="ae or" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank">三元运算符</a>，它在说，</p><ul class=""><li id="a794" class="pg ph iq mf b mg mw mj mx le pi li pj lm pk mc pl pm pn po bi translated">如果<code class="fe os ot ou ov b">tabsExpanded</code>为<em class="nb">真，</em>则添加CSS类<code class="fe os ot ou ov b">"tabs-default"</code></li><li id="73d2" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pl pm pn po bi translated">要不然，类就是<code class="fe os ot ou ov b">"tabs-collapsed"</code>。</li></ul><p id="79f8" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">但是，<code class="fe os ot ou ov b">tabsExpanded</code>从何而来？还记得吗，在上面我们添加了<code class="fe os ot ou ov b">useState(true)</code>变量，将<code class="fe os ot ou ov b">tabsExpanded</code>设置为<em class="nb"> true </em>？是的，在那里。</p><p id="dde9" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我想你明白我们的目的了。我们将使用<code class="fe os ot ou ov b">useState</code>和<code class="fe os ot ou ov b">setTabsExpanded</code>变量来切换标签的位置！</p><p id="81c3" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我们在这段代码中添加的最后一个东西是<code class="fe os ot ou ov b">tabLabels.map()</code>，它遍历一个<code class="fe os ot ou ov b">tabLabels</code>数组，创建选项卡按钮。所以，这里有一个关于我们为什么这样做的小解释…</p><blockquote class="ls"><p id="8eb7" class="lt lu iq bd lv lw lx ly lz ma mb mc dk translated">我们希望我们的标签组件可以在任何地方导入！</p></blockquote><p id="0a18" class="pw-post-body-paragraph md me iq mf b mg mh jr mi mj mk ju ml le mm mn mo li mp mq mr lm ms mt mu mc ij bi translated">这意味着，我们应该能够传递一个变量来通知我们的标签，当有人点击它们时，它们应该加载什么内容<em class="nb"> </em>。否则，我们将不得不在每一个使用标签的页面中复制&amp;粘贴代码。那是一件可怕的事情。</p><p id="cac2" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">因此，相反，我们将变得非常聪明，只需传递一堆标签，这样我们就可以用它们作为id来加载我们想要的每个标签的内容。明白了吗？明白了吗？很好！</p><p id="cf92" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">下面是我们迄今为止所取得成就的快速回顾:</p><ol class=""><li id="55bd" class="pg ph iq mf b mg mw mj mx le pi li pj lm pk mc pu pm pn po bi translated">我们已经创建了一个可重用的选项卡组件。</li><li id="22c3" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pu pm pn po bi translated">在选项卡组件中，我们使用<code class="fe os ot ou ov b">useState</code>来初始化选项卡的默认扩展视图。</li><li id="66cf" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pu pm pn po bi translated">并且，我们使用<code class="fe os ot ou ov b">.map()</code>遍历一组标签来创建标签按钮，并识别当有人点击按钮时我们想要加载的内容。</li></ol><p id="bcaa" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">哇，这么少的代码取得了很大的进步。</p><h2 id="e282" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">设置触摸手势。</h2><p id="9629" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">既然我们已经显示了选项卡，我们需要让它与触摸屏手势一起工作。也就是说，我们希望我们的选项卡容器在用户向上滑动时折叠，向下滑动时展开。我们可以用<code class="fe os ot ou ov b">useGesture</code>这样做，就像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="1baa" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">好吧，这7行代码有点复杂，所以让我们一行一行地读一遍:</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="aa72" class="kv kw iq ov b gy pc pd l pe pf">onDrag: ({ down, direction: [, y], delta: [yDelta] }) =&gt; {</span></pre><p id="91b7" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">附加一个<code class="fe os ot ou ov b">onDrag</code>事件来捕获滑动手势，并添加内置参数<code class="fe os ot ou ov b">down</code>、<code class="fe os ot ou ov b">direction</code>和<code class="fe os ot ou ov b">delta</code>。由于我们只关心<em class="nb">向上</em>和<em class="nb">向下</em>刷卡，所以我们只想要<code class="fe os ot ou ov b">y-axis</code>方向和<code class="fe os ot ou ov b">yDelta</code>。</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="289d" class="kv kw iq ov b gy pc pd l pe pf">const trigger = Math.abs(yDelta) &gt;= 1;</span></pre><p id="9b56" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">设置一个<code class="fe os ot ou ov b">trigger</code>变量来触发动画。代码在说，“如果<code class="fe os ot ou ov b">yDelta</code>的绝对值大于等于1，那么<code class="fe os ot ou ov b">trigger</code>的值就是<em class="nb">真</em>”。</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="fbd5" class="kv kw iq ov b gy pc pd l pe pf">const dir = y &gt; 0 ? -1 : 1;</span></pre><p id="736d" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">设置方向变量，<code class="fe os ot ou ov b">dir</code>。这个三元运算符说，“如果用户在屏幕上向下滑动(<code class="fe os ot ou ov b">y &gt; 0</code>)，那么<code class="fe os ot ou ov b">dir</code>等于-1，否则，<code class="fe os ot ou ov b">dir</code>等于1，向上滑动”。是的，这有点不直观，但你知道，无论如何。</p><p id="dc19" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">这是使这一切工作的一行:</p><pre class="kg kh ki kj gt oy ov oz pa aw pb bi"><span id="4083" class="kv kw iq ov b gy pc pd l pe pf">if (!down &amp;&amp; trigger) dir &lt; 0 ? setTabsExpanded(true) : setTabsExpanded(false);</span></pre><p id="d7dc" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">这段代码在说，</p><ul class=""><li id="86e5" class="pg ph iq mf b mg mw mj mx le pi li pj lm pk mc pl pm pn po bi translated">“如果手势不是简单的点击(<code class="fe os ot ou ov b">!down</code>)并且<code class="fe os ot ou ov b">trigger</code>为<em class="nb">真</em>(滑动超过我们定义的<code class="fe os ot ou ov b">yDelta</code>)，</li><li id="b874" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pl pm pn po bi translated">“然后检查<code class="fe os ot ou ov b">dir</code>是否是<em class="nb">向下滑动</em> ( <code class="fe os ot ou ov b">dir &lt; 0</code>)。</li><li id="5f08" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pl pm pn po bi translated">如果滑动方向是<em class="nb">向下</em>，则将选项卡容器设置为展开状态<code class="fe os ot ou ov b">setTabsExpanded(true)</code>，</li><li id="4af7" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pl pm pn po bi translated">"或者将选项卡容器设置为折叠:<code class="fe os ot ou ov b">setTabsExpanded(false)</code>"</li></ul><p id="5a48" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">哇，我刚刚读了几遍，笑了。希望这对你来说够清楚了。如果没有，请告诉我！</p><h2 id="2b62" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">让我们动起来吧。</h2><p id="45b7" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">到目前为止，我们还没有添加任何酷的动画效果，我们的标签页还是有点无聊。好消息是react-spring让这个<em class="nb">变得非常</em>简单。让我们添加我们的动画代码，用<code class="fe os ot ou ov b">useSpring</code>，像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="f5de" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">这应该是不言自明的，但这里有一个小的演练:</p><p id="68e4" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我们使用<code class="fe os ot ou ov b">useSpring</code>钩子来设置一系列CSS样式，这些样式根据我们的<code class="fe os ot ou ov b">tabsExpanded</code>变量是真还是假来切换。</p><p id="7dd6" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">比如，你看到那条线<code class="fe os ot ou ov b">marginTop: tabsExpanded ? 0 : -60</code>了吗？那是使我们的标签上下移动的线。代码在说，</p><ul class=""><li id="9872" class="pg ph iq mf b mg mw mj mx le pi li pj lm pk mc pl pm pn po bi translated">“如果<code class="fe os ot ou ov b">tabsExpanded</code>为<em class="nb">真</em>，那么组件的顶部位置为0px(展开)，</li><li id="3183" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pl pm pn po bi translated">"否则最高位置是-60px . "</li></ul><p id="a015" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">另外，看看那行写着，<code class="fe os ot ou ov b">fontSize: tabsExpanded ? "1em": "0em"</code>。这就是让我们的标题文字由大变小的原因。</p><p id="7160" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">您可以添加更多想要制作动画的样式。在我的例子中，我想要的其他动画是字体颜色和改变选项卡容器的背景颜色。</p><p id="ac70" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">这就是所需要的，react-spring会完成剩下的工作！(react-spring…好牛逼)</p><h2 id="de82" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">将我们的动画功能附加到标签上。</h2><p id="e5c1" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">我们快到了！首先，快速回顾一下我们到目前为止所取得的成就:</p><ol class=""><li id="d387" class="pg ph iq mf b mg mw mj mx le pi li pj lm pk mc pu pm pn po bi translated">我们已经创建了一个可重用的选项卡组件。</li><li id="2852" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pu pm pn po bi translated">我们设置代码来监视向上/向下滑动手势。</li><li id="f7d9" class="pg ph iq mf b mg pp mj pq le pr li ps lm pt mc pu pm pn po bi translated">当用户滑动时，我们设置我们想要的动画样式。</li></ol><p id="9059" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">现在，我们只需要通过将手势事件和动画附加到选项卡上来将它们连接在一起。我们将通过更新我们的<code class="fe os ot ou ov b">return()</code>语句中的标记来做到这一点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="4c65" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我们正在做几件事。首先，我们正在更新<code class="fe os ot ou ov b">div</code> s，用<code class="fe os ot ou ov b">&lt;animated.div /&gt;</code>将它们标记为“可动画”。这样做，我们只是让react-spring知道那些才是它应该注意的<code class="fe os ot ou ov b">divs</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pv"><img src="../Images/106924e3e86aea4fa139b892d72533d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDKvLCbNpzvc9u9GrHJ6AA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">An animated Tab component that can be reused anywhere.</figcaption></figure><p id="b07d" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">更有趣的是，您会看到我们已经将<code class="fe os ot ou ov b">{...bind()}</code>添加到了父/容器<code class="fe os ot ou ov b">div</code>中。这就是我们附加上面创建的<code class="fe os ot ou ov b">bind</code>函数的地方，带有<code class="fe os ot ou ov b">onDrag</code>事件和<code class="fe os ot ou ov b">useGesture</code>钩子。这设置了我们的容器<code class="fe os ot ou ov b">div</code>来观察用户何时上下滑动来触发动画。</p><p id="f9ce" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">再往下一点，我们将<code class="fe os ot ou ov b">style={tabStyle}</code>添加到选项卡容器中，引用我们上面制作的<code class="fe os ot ou ov b">tabStyle</code>函数，执行我们希望在用户上下滑动时触发的动画。</p><h2 id="0b38" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">这是所有的代码。</h2><p id="1c5b" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">仅仅64行代码就要写很多东西！现在，您最终的选项卡组件可能是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h2 id="ea8e" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">让它工作的CSS</h2><p id="3a46" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">我用的CSS是主观的。就我而言，我对这个应用程序有非常具体的UX和交互需求。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="2a13" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">关键的一点是，当用户向上滑动时,“. tab-container”会向上移动(折叠),当用户向下滑动时，它会向下移动。我选择了一个粗糙的flexbox解决方案，但是里程数可能会根据你的UI需求而变化。</p><p id="ff29" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">现在，如果你在触摸设备上运行代码，你应该能够上下滑动，并愉快地观看你的标签动画。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/94633e0ee0cb00cb0a7d50430ab7a1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jX_QrHYMNtuV_WDpFlqtvg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Swipey goodness!</figcaption></figure><h2 id="384e" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">这些都很好，但是更大的设备和桌面浏览器呢？</h2><p id="0a09" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">显然，当有人从更大的设备(如平板电脑或桌面浏览器)访问我们的PWA时，我们不需要或不希望我们的选项卡折叠。相反，我们希望页面像其他网站一样直观地滚动，这样我们的用户就能得到预期的行为。对我们来说，有一个非常简单的解决方案:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="3b30" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">现在，在更大的设备和桌面浏览器上，你的网站会像用户期望的那样滚动。完美！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pw"><img src="../Images/76504b32d6c52965b475f5e000dd6438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xWeFZHITjynM6a4_CCWE9Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Delivering the expected, and intuitive, scrolling experience for desktop.</figcaption></figure><h2 id="e09f" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">如何在你的应用中使用它</h2><p id="1bb8" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">现在我们有了一个可重复使用的标签组件——以及手势跟踪和酷动画——我们可以随时将它放入任何<em class="nb">组件或应用程序中！</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h1 id="e4e1" class="og kw iq bd kx oh px oj la ok py om ld jw pz jx lh jz qa ka ll kc qb kd lp oq bi translated">打烊了，谢谢，</h1><p id="2ffe" class="pw-post-body-paragraph md me iq mf b mg nc jr mi mj nd ju ml le ne mn mo li nf mq mr lm ng mt mu mc ij bi translated">一直读到这一页的底部。我希望你在制作一个非常酷的React组件的UX/编码中得到乐趣！</p><p id="8fc8" class="pw-post-body-paragraph md me iq mf b mg mw jr mi mj mx ju ml le my mn mo li mz mq mr lm na mt mu mc ij bi translated">我很想听听你的问题、启示和侮辱，所以请随意联系。</p><h2 id="ae14" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">还有，获取GitHub上的代码。</h2><div class="nh ni gp gr nj nk"><a href="https://github.com/MichaelLisboa/react-spring-animation-tab-ui" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">Michael Lisboa/react-spring-animation-tab-ui</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">一个简单，酷，基于触摸/手势的动画标签使用反应弹簧</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">github.com</p></div></div><div class="nt l"><div class="qc l nv nw nx nt ny kp nk"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>The Vue 3 upgrade guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3升级指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-vue-3-upgrade-guide-a17c562e99c0?source=collection_archive---------2-----------------------#2020-06-04">https://javascript.plainenglish.io/the-vue-3-upgrade-guide-a17c562e99c0?source=collection_archive---------2-----------------------#2020-06-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1eacd32765a2c8a40d8b1d01f69157d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5FJj_5ldIEaAV4xo_3EJQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Byte-sized Vue 3</figcaption></figure><p id="4b21" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Vue 3发布在即。我们可以期待一个更快、更小、更易维护的版本，它有很多令人兴奋的新特性。这些大多是对现有API的补充和改进。</p><p id="8ea3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">没有什么能阻止你用Vue 3启动你的新应用程序。在本文中，我将向您展示如何领先一步，通过升级您的应用程序开始尝试新的API。如果你对一个升级的应用程序感兴趣，看看用Composition API编写的<a class="ae la" href="https://github.com/blacksonic/todomvc-vue-composition-api" rel="noopener ugc nofollow" target="_blank"> my TodoMVC应用程序</a>或者包含每个新特性的<a class="ae la" href="https://github.com/blacksonic/vue-3-playground" rel="noopener ugc nofollow" target="_blank">playground</a>。</p><h1 id="3021" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用CLI</h1><p id="04f5" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我强烈建议对Vue项目使用官方CLI。除了开发和部署工具之外，它还将升级简化为一行命令:<br/> <code class="fe me mf mg mh b">vue add vue-next</code>。</p><p id="24f6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Vue下一个插件不仅升级和安装了新的依赖项，还修改了代码以兼容第三版。</p><h1 id="8ad4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">属国</h1><p id="b271" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">安装插件会将<code class="fe me mf mg mh b">vue</code>、<code class="fe me mf mg mh b">vuex</code>、<code class="fe me mf mg mh b">vue-router</code>、<code class="fe me mf mg mh b">eslint-plugin-vue</code>和<code class="fe me mf mg mh b">@vue/test-utils</code>软件包升级到下一个主要版本。另外，一个名为<code class="fe me mf mg mh b">@vue/compiler-sfc</code>的新包出现在开发依赖项中。有什么好处？它将新的Vue单个文件组件编译成可运行的Javascript代码。</p><h1 id="1d56" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">代码修改</h1><p id="85e8" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">让我们看看代码中发生了什么变化。您注意到的第一件事是主Vue包不再有默认导出。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/ce6fd0c74173a6e47e5f9d0a52bfe6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*ANQBE9Xpg5TYj8D-wha6Xw.jpeg"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Entrypoint Upgrade</figcaption></figure><p id="ef51" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">命名导出<code class="fe me mf mg mh b">createApp</code>创建一个新的Vue应用程序，就像它在Vue 2中创建构造函数一样。插件设置使用<code class="fe me mf mg mh b">use</code>方法而不是构造函数的参数移动到应用程序实例。<code class="fe me mf mg mh b">$mount</code>方法失去了它的美元符号，但行为方式相同。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/58500638c53982d928a313f407c33c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ngUeW3VpUx4zCD4JGn5I6g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Store Upgrade</figcaption></figure><p id="93e6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">正如您在应用程序中看到的，插件采用工厂模式:不再有带<code class="fe me mf mg mh b">new</code>关键字的构造函数。不需要调用<code class="fe me mf mg mh b">new Vuex.Store</code>，而是需要<code class="fe me mf mg mh b">createStore</code>工厂方法。不再可能将商店的默认导出作为插件传递。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/d1343a35962396e85a96d537cc00e6da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SkhkKOqD0A7rbur0sYQ6ag.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Router Upgrade</figcaption></figure><p id="f469" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">路由器插件遵循相同的模式:<code class="fe me mf mg mh b">new VueRouter</code>变成对<code class="fe me mf mg mh b">createRouter</code>的调用，必须离开全局插件设置。在新版本中，你必须定义历史的类型。你可以从<code class="fe me mf mg mh b">createWebHashHistory</code>、<code class="fe me mf mg mh b">createMemoryHistory</code>和<code class="fe me mf mg mh b">createWebHistory</code>中选择。</p><p id="0354" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">基本上就是这样，应用程序可以在新的Vue版本上启动和运行。一切都只需一个bash命令。其他任何东西都应该使用旧的语法，因为旧的API仍然完好无损。</p><h1 id="8281" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">尺寸很重要</h1><p id="aa9a" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">如果您检查<code class="fe me mf mg mh b">build</code>命令的输出大小，您可以注意到一个轻微的下降:43.75 KiB - &gt; 40.57 KiB。这是保留默认Vue实例而选择命名导出的结果。像Webpack和Rollup这样的构建工具可以对命名导出进行树抖动(删除未使用的代码)，但不能对默认导出进行树抖动。</p><h1 id="eeb0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有CLI</h1><p id="01b8" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">如果没有CLI，您必须将<code class="fe me mf mg mh b">vue-loader</code>或<code class="fe me mf mg mh b">rollup-plugin-vue</code>升级到下一个主要版本，并添加<code class="fe me mf mg mh b">@vue/compiler-sfc</code>包。这里没有更多的魔法，你必须手动做所有的事情。你也必须手动修改代码，这里没有搜索代码库和更新语法的工具。</p><h1 id="177e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在线游乐场</h1><p id="dfec" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">如果你不想修改你的项目，但有兴趣尝试新版本，看看<a class="ae la" href="https://codesandbox.io/s/github/blacksonic/vue-3-playground" rel="noopener ugc nofollow" target="_blank">我的在线游乐场</a>。</p><h1 id="345d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">摘要</h1><p id="04ea" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">我们已经完成了升级过程中您必须进行的修改。这些修改由Vue CLI自动完成。你现在要做的就是开始尝试Vue 3提供的所有新功能:新的反应系统，合成API，碎片，传送和悬念。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="9e33" class="mw lc iq bd ld mx my dn lh mz na dp ll kn nb nc lp kr nd ne lt kv nf ng lx nh bi translated"><strong class="ak">说白了</strong></h2><p id="2001" class="pw-post-body-paragraph kc kd iq ke b kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv md kx ky kz ij bi translated">通过<a class="ae la" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">订阅我们的YouTube频道</strong> </a> <strong class="ke ir">来表达爱意吧！</strong></p></div></div>    
</body>
</html>
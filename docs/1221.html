<html>
<head>
<title>5 Secret features of JSON.stringify()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JSON.stringify()的5个秘密特性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-secret-features-of-json-stringify-c699340f9f27?source=collection_archive---------0-----------------------#2020-02-14">https://javascript.plainenglish.io/5-secret-features-of-json-stringify-c699340f9f27?source=collection_archive---------0-----------------------#2020-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9e1d9b5cdf5b34c6e31c6c5397a34528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQy1TrGzC_n_UC0j9hXBbw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Credits: <a class="ae kc" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fahmedalkiremli.com%2Fwhy-to-learn-what-to-learn-and-how-to-learn%2F&amp;psig=AOvVaw3IGik44VGBXe661UZsW5Mh&amp;ust=1581750442478000&amp;source=images&amp;cd=vfe&amp;ved=0CAMQjB1qFwoTCMj-5Oi90OcCFQAAAAAdAAAAABAR" rel="noopener ugc nofollow" target="_blank">Kirmeli.com</a></figcaption></figure><blockquote class="kd"><p id="a057" class="ke kf iq bd kg kh ki kj kk kl km kn dk translated">JSON。stringify()方法将JavaScript对象或值转换为JSON字符串。</p></blockquote><p id="f71b" class="pw-post-body-paragraph ko kp iq kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk kn ij bi translated">作为JavaScript开发者，<code class="fe ll lm ln lo b">JSON.stringify()</code>是调试最常用的函数。但是这有什么用呢，难道我们就不能用我们的朋友<code class="fe ll lm ln lo b">console.log()</code>单独来做同样的事情吗？让我们试一试。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="7a54" class="lx ly iq lo b gy lz ma l mb mc">//Initialize a User object<br/>const user = {<br/> “name” : “Prateek Singh”,<br/> “age” : 26<br/>}</span><span id="bfa0" class="lx ly iq lo b gy md ma l mb mc">console.log(user);</span><span id="19a5" class="lx ly iq lo b gy md ma l mb mc"><strong class="lo ir">RESULT<br/></strong>// [object Object]</span></pre><p id="2816" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">哎呀！<code class="fe ll lm ln lo b">console.log()</code>没有帮我们打印出想要的结果。它打印<code class="fe ll lm ln lo b"><strong class="kq ir">[object Object]</strong></code> <strong class="kq ir"> <em class="mj">，因为从对象到字符串的默认转换是“[Object Object]”</em></strong>。所以我们用<code class="fe ll lm ln lo b">JSON.stringify()</code>先把对象转换成字符串，然后在控制台打印，就像这样。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="bf00" class="lx ly iq lo b gy lz ma l mb mc">const user = {<br/> “name” : “Prateek Singh”,<br/> “age” : 26<br/>}</span><span id="4cd4" class="lx ly iq lo b gy md ma l mb mc">console.log(JSON.stringify(user));</span><span id="3c96" class="lx ly iq lo b gy md ma l mb mc"><strong class="lo ir">RESULT<br/></strong>// "{ "name" : "Prateek Singh", "age" : 26 }"</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="1e04" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">一般来说，开发者使用这个<code class="fe ll lm ln lo b">stringify</code>函数的方式和我们上面做的一样简单。但是我要告诉你这个小宝石的一些隐藏的秘密，这将使你的生活变得容易。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="931d" class="mr ly iq bd ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn bi translated">1:第二个参数(数组)</h1><p id="7a97" class="pw-post-body-paragraph ko kp iq kq b kr no kt ku kv np kx ky kz nq lb lc ld nr lf lg lh ns lj lk kn ij bi translated">是的，我们的<code class="fe ll lm ln lo b">stringify</code>函数也可以有第二个参数。它是你想在控制台中打印的对象的键的数组。看起来简单？让我们仔细看看。我们有一个对象<em class="mj">产品</em>T27】我们想知道产品的名称。当我们把它打印成:<br/> <code class="fe ll lm ln lo b">console.log(JSON.stringify(product));</code> <br/>时，它给出了下面的结果。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="379e" class="lx ly iq lo b gy lz ma l mb mc">{“id”:”0001",”type”:”donut”,”name”:”Cake”,”ppu”:0.55,”batters”:{“batter”:[{“id”:”1001",”type”:”Regular”},{“id”:”1002",”type”:”Chocolate”},{“id”:”1003",”type”:”Blueberry”},{“id”:”1004",”type”:”Devil’s Food”}]},”topping”:[{“id”:”5001",”type”:”None”},{“id”:”5002",”type”:”Glazed”},{“id”:”5005",”type”:”Sugar”},{“id”:”5007",”type”:”Powdered Sugar”},{“id”:”5006",”type”:”Chocolate with Sprinkles”},{“id”:”5003",”type”:”Chocolate”},{“id”:”5004",”type”:”Maple”}]}</span></pre><p id="edea" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">很难在日志中找到<em class="mj"> name </em>键，因为控制台上显示了很多无用的信息。当物体变大时，难度增加。stringify函数的第二个参数就派上了用场。我们再重写一遍代码&amp;看看结果。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="a2f5" class="lx ly iq lo b gy lz ma l mb mc">console.log(JSON.stringify(product<strong class="lo ir">,[‘name’]</strong>);</span><span id="e02e" class="lx ly iq lo b gy md ma l mb mc">//<strong class="lo ir">RESULT<br/></strong>{"name" : "Cake"}</span></pre><p id="340d" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">问题解决了，我们可以通过在第二个参数中以数组的形式传递所需的键，而不是打印整个JSON对象。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="e151" class="mr ly iq bd ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn bi translated">2:第二个参数(函数)</h1><p id="53da" class="pw-post-body-paragraph ko kp iq kq b kr no kt ku kv np kx ky kz nq lb lc ld nr lf lg lh ns lj lk kn ij bi translated">我们也可以传递第二个参数作为函数。它根据函数中编写的逻辑计算每个键值对。如果你返回<code class="fe ll lm ln lo b">undefined</code>，键值对将不会被打印。为了更好的理解，请看这个例子。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="38f0" class="lx ly iq lo b gy lz ma l mb mc">const user = {<br/> “name” : “Prateek Singh”,<br/> “age” : 26<br/>}</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c1815df5e1d2c1d980a820afd8f37082.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*V3EQcCdgRLDish8PkY0s5A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Passing function as 2nd argument</figcaption></figure><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="af6b" class="lx ly iq lo b gy lz ma l mb mc">// <strong class="lo ir">Result</strong><br/>{ "age" : 26 }</span></pre><p id="3850" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">只有<code class="fe ll lm ln lo b">age</code>被打印为值<code class="fe ll lm ln lo b">typeOf</code>字符串的函数条件返回<code class="fe ll lm ln lo b">undefined</code>。</p><h1 id="1a24" class="mr ly iq bd ms mt nu mv mw mx nv mz na nb nw nd ne nf nx nh ni nj ny nl nm nn bi translated">3:第三个参数为数字</h1><p id="f5cb" class="pw-post-body-paragraph ko kp iq kq b kr no kt ku kv np kx ky kz nq lb lc ld nr lf lg lh ns lj lk kn ij bi translated">第三个参数控制最后一个字符串的间距。如果参数是一个<strong class="kq ir">数字</strong>，字符串化中的每一级都将缩进这个数量的空格字符。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="2b8b" class="lx ly iq lo b gy lz ma l mb mc"><strong class="lo ir">Note: '--' represnts the spacing for understanding purpose</strong></span><span id="eed9" class="lx ly iq lo b gy md ma l mb mc">JSON.stringify(user, null, 2);<br/>//{<br/>//--"name": "Prateek Singh",<br/>//--"age": 26,<br/>//--"country": "India"<br/>//}</span></pre><h1 id="727e" class="mr ly iq bd ms mt nu mv mw mx nv mz na nb nw nd ne nf nx nh ni nj ny nl nm nn bi translated">4:字符串形式的第三个参数</h1><p id="af8d" class="pw-post-body-paragraph ko kp iq kq b kr no kt ku kv np kx ky kz nq lb lc ld nr lf lg lh ns lj lk kn ij bi translated">如果第三个参数是一个<strong class="kq ir">字符串</strong>，它将被用来代替上面显示的空格字符。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="df61" class="lx ly iq lo b gy lz ma l mb mc">JSON.stringify(user, null,'**');<br/>//{<br/>//**"name": "Prateek Singh",<br/>//**"age": 26,<br/>//**"country": "India"<br/>//}<br/><strong class="lo ir">Here * replace the space character.</strong></span></pre><h1 id="5a07" class="mr ly iq bd ms mt nu mv mw mx nv mz na nb nw nd ne nf nx nh ni nj ny nl nm nn bi translated">5:托吉森方法</h1><p id="df4c" class="pw-post-body-paragraph ko kp iq kq b kr no kt ku kv np kx ky kz nq lb lc ld nr lf lg lh ns lj lk kn ij bi translated">我们有一个名为<code class="fe ll lm ln lo b">toJSON</code>的方法，它可以作为任何对象的一部分作为其属性。<code class="fe ll lm ln lo b">JSON.stringify</code>返回该函数的结果并将其字符串化，而不是将整个对象转换成字符串。请看这个例子。</p><pre class="lp lq lr ls gt lt lo lu lv aw lw bi"><span id="33ef" class="lx ly iq lo b gy lz ma l mb mc">const user = {<br/> firstName : "Prateek",<br/> lastName : "Singh",<br/> age : 26,<br/> <!-- -->toJSON() {<br/>    return { <br/>      fullName: `${this.firstName} + ${this.lastName}`<br/>    };</span><span id="1aee" class="lx ly iq lo b gy md ma l mb mc">}</span><span id="4615" class="lx ly iq lo b gy md ma l mb mc">console.log(JSON.stringify(user));</span><span id="3279" class="lx ly iq lo b gy md ma l mb mc"><strong class="lo ir">RESULT<br/></strong>// "{ "fullName" : "Prateek Singh"}"</span></pre><p id="c435" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">这里我们可以看到，它没有打印整个对象，而是只打印了<code class="fe ll lm ln lo b">toJSON</code>函数的结果。</p><p id="bc80" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">希望你学到了我们的小朋友<code class="fe ll lm ln lo b">stringify()</code>的一些牛逼功能。</p><p id="3237" class="pw-post-body-paragraph ko kp iq kq b kr me kt ku kv mf kx ky kz mg lb lc ld mh lf lg lh mi lj lk kn ij bi translated">如果你觉得这篇文章有用，请点击“鼓掌”按钮，关注我更多类似的精彩文章。并通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kq ir">订阅我们的YouTube频道</strong> </a> <strong class="kq ir">获取更多类似内容！</strong></p><blockquote class="kd"><p id="20a4" class="ke kf iq bd kg kh nz oa ob oc od kn dk translated">感谢阅读</p><p id="9aae" class="ke kf iq bd kg kh nz oa ob oc od kn dk translated">快乐编码||写2学</p></blockquote></div></div>    
</body>
</html>
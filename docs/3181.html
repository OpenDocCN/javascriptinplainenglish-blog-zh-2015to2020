<html>
<head>
<title>New Operators in ECMAScript 2020</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ECMAScript 2020中的新运算符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/new-operators-in-ecmascript-2020-3dbb886b2fd9?source=collection_archive---------5-----------------------#2020-09-07">https://javascript.plainenglish.io/new-operators-in-ecmascript-2020-3dbb886b2fd9?source=collection_archive---------5-----------------------#2020-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2193833f8bed7e8174f6fd33a0de5f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sR68uttBrTfxvj-xyHshqg.jpeg"/></div></div></figure><p id="6b4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们已经进入2020年，新的ECMAScript已经发布了一段时间。但是这是复杂的一年，也许你还没有找到时间来看看它的两个新操作符:nullish合并操作符和可选链接。从3.7版本开始，这两个版本都已经可供TypeScript开发人员使用，但现在也支持普通JavaScript。尽管它们的名字可能晦涩难懂，但它们是处理<code class="fe kw kx ky kz b">undefined</code>和<code class="fe kw kx ky kz b">null</code>值的非常酷的快捷方式。</p><h1 id="da0b" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">零融合算子</h1><p id="9259" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">这个算子是<code class="fe kw kx ky kz b">||</code>算子的改进。<code class="fe kw kx ky kz b">||</code>在JavaScript中原本是逻辑OR:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="6f38" class="ml lb iq kz b gy mm mn l mo mp">true || false -&gt; true<br/>false || false -&gt; false<br/>false || true -&gt; true<br/>true || true -&gt; true</span></pre><p id="3b48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果第一个操作数是<code class="fe kw kx ky kz b">false</code>，则返回第二个。如果第一个操作数不是严格意义上的<code class="fe kw kx ky kz b">false</code>，而是具有另一个“假”值，如<code class="fe kw kx ky kz b">null</code>或<code class="fe kw kx ky kz b">undefined</code>，情况也是如此。这就是为什么如果您试图分配的值是<code class="fe kw kx ky kz b">null</code>或<code class="fe kw kx ky kz b">undefined</code>时，该运算符经常被用作分配默认值的一种方式:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="183c" class="ml lb iq kz b gy mm mn l mo mp">let value;<br/>const a = value || 1; // a is 1<br/>value = 2;<br/>const b = value || 1; // b is 2</span></pre><p id="8a75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这基本上是<code class="fe kw kx ky kz b">const b = value ? value : 1;</code>的快捷方式，非常方便。这种语法的问题是，如果第一个操作数为falsy，则采用第二个操作数。<code class="fe kw kx ky kz b">undefined</code>、<code class="fe kw kx ky kz b">null</code>、<code class="fe kw kx ky kz b">false</code>是假的，但<code class="fe kw kx ky kz b">0</code>、<code class="fe kw kx ky kz b">''</code>和<code class="fe kw kx ky kz b">NaN</code>也是假的。这可能会被遗忘，并导致意想不到的错误。例如，在下面的情况中，即使定义了<code class="fe kw kx ky kz b">value</code>，也要为<code class="fe kw kx ky kz b">b</code>赋值<code class="fe kw kx ky kz b">1</code>:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="5ac4" class="ml lb iq kz b gy mm mn l mo mp">let value = 0;<br/>const b = value || 1; // b is 1</span></pre><p id="2f6a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这可能正是您想要做的，但也可能是一个bug，而且经常是。这就是nullish合并操作符的用武之地:在我们想要指定一个缺省值而不是<code class="fe kw kx ky kz b">null</code>或<code class="fe kw kx ky kz b">undefined</code>但<code class="fe kw kx ky kz b">0</code>、<code class="fe kw kx ky kz b">''</code>和<code class="fe kw kx ky kz b">NaN</code>是有效值的情况下，它被用来代替<code class="fe kw kx ky kz b">||</code>操作符:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="2bd5" class="ml lb iq kz b gy mm mn l mo mp">let value = 0;<br/>const b = value ?? 1; // b is 1<br/>value = '';<br/>const c = value ?? 'test'; // c is ''<br/>value = NaN;<br/>const d = value ?? 1; // d is NaN</span></pre><h1 id="d60d" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">可选链接</h1><p id="b858" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">ECMAScript的另一个新操作符也提供了处理<code class="fe kw kx ky kz b">null</code>和<code class="fe kw kx ky kz b">undefined</code>值的快捷方式。在JavaScript中，访问一个结果为<code class="fe kw kx ky kz b">null</code>或<code class="fe kw kx ky kz b">undefined</code>的对象的属性会抛出一个错误。为了防止这种情况发生，当您不能确定您的对象是否已定义时，您必须执行如下操作:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="fcae" class="ml lb iq kz b gy mm mn l mo mp">const a = myObject ? myObject.a : 'a';</span></pre><p id="8208" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用可选的链接操作符<code class="fe kw kx ky kz b">?.</code>，您可以将其简化为:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="f8d6" class="ml lb iq kz b gy mm mn l mo mp">const b = myObject?.a;</span></pre><p id="fe93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以将链接运算符与空合并运算符结合使用。在下面的例子中，如果定义了<code class="fe kw kx ky kz b">myObject</code>，并且属性<code class="fe kw kx ky kz b">a</code>不是<code class="fe kw kx ky kz b">null</code>或<code class="fe kw kx ky kz b">undefined</code>，那么<code class="fe kw kx ky kz b">b</code>将等于它。否则<code class="fe kw kx ky kz b">b</code>将被赋予值<code class="fe kw kx ky kz b">1</code>。用两句话描述的事情可以用一行代码写出来:</p><pre class="md me mf mg gt mh kz mi mj aw mk bi"><span id="dcda" class="ml lb iq kz b gy mm mn l mo mp">const b = myObject?.a ?? 1;</span></pre></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="ba8d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您不能完全控制从DOM或网络上接收的值，因此处理可能的<code class="fe kw kx ky kz b">undefined</code>或<code class="fe kw kx ky kz b">null</code>值是JavaScript中的一个常见问题。这导致了相当沉重和容易出错的<code class="fe kw kx ky kz b">if</code>语句，但是现在可以通过新的ECMAScript 2020操作符<code class="fe kw kx ky kz b">??</code>和<code class="fe kw kx ky kz b">?.</code>使它们更具可读性和可维护性。</p><h2 id="2f89" class="ml lb iq bd lc mx my dn lg mz na dp lk kj nb nc lo kn nd ne ls kr nf ng lw nh bi translated">简单英语的JavaScript</h2><p id="2510" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">你知道我们有三份出版物和一个YouTube频道吗？在<a class="ae ni" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">plain English . io</strong></a>找到一切的链接！</p></div></div>    
</body>
</html>
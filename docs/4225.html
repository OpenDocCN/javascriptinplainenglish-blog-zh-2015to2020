<html>
<head>
<title>Global Theming in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Nativeä¸­çš„å…¨å±€ä¸»é¢˜åŒ–</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/global-theming-in-react-native-using-styled-components-redux-toolkit-typescript-7621d2bddbcb?source=collection_archive---------3-----------------------#2020-11-26">https://javascript.plainenglish.io/global-theming-in-react-native-using-styled-components-redux-toolkit-typescript-7621d2bddbcb?source=collection_archive---------3-----------------------#2020-11-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="648a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶å’ŒReduxå·¥å…·åŒ…â€”ç±»å‹è„šæœ¬</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f65c9d51785a8108842155a390c25b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nZ_AzJ0r08J0xxhF"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@walling?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Walling</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="42ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è®©æˆ‘ä»¬é¢å¯¹ç°å®å§ï¼Œè¿™äº›å¤©ï¼Œä¸€ä¸ªæ²¡æœ‰é»‘æš—æ¨¡å¼çš„åº”ç”¨ç¨‹åºå±äºä¸€ä¸ªåšç‰©é¦†ï¼›ä»‹äºæé¾™å’Œè½®å­ä¹‹é—´ã€‚ä½œä¸ºæ¶ˆè´¹è€…ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°é…·çš„ä¸œè¥¿ï¼Œä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬å¸Œæœ›æ„å»ºé…·çš„ä¸œè¥¿ï¼Œé»‘æš—æ¨¡å¼å¾ˆé…·ï¼å¹¸è¿çš„æ˜¯ï¼Œæœ‰å¤ªå¤šçš„å›¾ä¹¦é¦†å¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªäº®/æš—æ¨¡å¼ç‰¹æ€§ï¼Œå®ƒå°†æ ¹æ®ä½ çš„è®¾å¤‡ä¸»é¢˜è®¾ç½®è€Œæ”¹å˜ã€‚æˆ‘ä»¬å°†ç”¨Styled-Componentså’ŒRedux Toolkitåœ¨ä¸€ä¸ªåŸºæœ¬çš„Reactæœ¬åœ°åº”ç”¨ç¨‹åºä¸­æ„å»ºå®ƒã€‚</p><h1 id="6128" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æ ·å¼ç»„ä»¶</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/40df59187b12036720b9b294f1bbdc6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZpBYX5X5iD6MhhG3"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@nukanchik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Juan Ordonez</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6851" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘è®¤ä¸ºä»–ä»¬çš„ä¸»é¡µæ€»ç»“äº†æ ·å¼ç»„ä»¶çš„ç‰¹åˆ«ä¹‹å¤„:</p><p id="be07" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">â€œä½¿ç”¨ES6å’ŒCSSçš„ç²¾åï¼Œè½»æ¾æ‰“é€ æ‚¨çš„åº”ç”¨ğŸ’…ğŸ¾â€<a class="ae ks" href="https://styled-components.com/" rel="noopener ugc nofollow" target="_blank">https://styled-components.com</a></p><p id="8f69" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åƒRonSealä¸€æ ·ï¼Œå®ƒå®Œå…¨æŒ‰ç…§ç½å¤´ä¸Šè¯´çš„åšï¼Œå®ƒè®¾è®¡äº†å¯é‡ç”¨çš„ç»„ä»¶ï¼ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶ï¼Œå…¨å±€ä¸»é¢˜åŒ–å¾ˆå®¹æ˜“ã€‚</p><h1 id="0579" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">Reduxå·¥å…·åŒ…</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/8f7a011e8abdbba7165cfd326d819929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cjkw3IFcnepGTOCc"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@healing_photographer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AarÃ³n Blanco Tejedor</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1dd3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¦‚æœåƒæˆ‘ä¸€æ ·ï¼Œä½ è®¨åŒæ ·æ¿æ–‡ä»¶ï¼Œåƒèº²é¿ç˜Ÿç–«ä¸€æ ·èº²é¿Reduxï¼Œå¹¶ä¸”å®³æ€•æœç”¨çº¢è‰²è¯ä¸¸ï¼›ä¸ç”¨æ‹…å¿ƒï¼ŒRTKæ˜¯å›½å®¶ç®¡ç†å¤´ç—›çš„ç­”æ¡ˆã€‚å®ƒè®©ä½ åœ¨å¹¸ç¦çš„æ— çŸ¥ä¸­æ‰è¿›å…”å­æ´ã€‚æˆ‘æœ€å–œæ¬¢RTKçš„ä¸€ç‚¹å°±æ˜¯å®ƒå¼•æ“ç›–ä¸‹ä½¿ç”¨äº†immer(<a class="ae ks" href="https://github.com/immerjs/immer" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">link</strong></a><strong class="kv io">)</strong>ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡å…³äºRTKçš„ç²¾å½©æ–‡ç« ï¼Œä½œè€…æ˜¯Ohans Emmanuel:<a class="ae ks" href="https://www.ohansemmanuel.com/what-is-redux-toolkit/" rel="noopener ugc nofollow" target="_blank">https://www.ohansemmanuel.com/what-is-redux-toolkit/</a>ã€‚</p><h1 id="2833" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æˆ‘ä»¬æ­£åœ¨å»ºé€ çš„ä¸œè¥¿</h1><p id="9e13" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">æˆ‘ä»¬å°†ä»å¤´å¼€å§‹æ„å»ºè¿™ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å¦‚æœä½ æ„¿æ„è·Ÿéšï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå…‹éš†æˆ‘çš„å›è´­<a class="ae ks" href="https://github.com/claysimps/reactNativeResponsiveTheme" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/07a4d081a3a8cc7cf9bfd35d68598a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/1*uDqDZJGh9oG-pM2oEu4upg.gif"/></div></figure><h1 id="532a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æˆ‘ä»¬èµ°å§ï¼</h1><p id="48af" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ï¼Œå¹¶å®‰è£…æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„æ‰€æœ‰åŒ…ï¼Œæ‰€ä»¥ä»ç»ˆç«¯é”®å…¥:</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="8a25" class="mu lq in mq b gy mv mw l mx my">npx react-native init globalThemeExample  --template react-native-template-typescript &amp;&amp; cd globalThemeExample &amp;&amp; yarn add styled-components react-native-appearance @reduxjs/toolkit react-redux reselect &amp;&amp; yarn add -D @types/react-redux @types/styled-components &amp;&amp; npx react-native run-ios</span></pre><p id="ffe5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™å°†ä½¿ç”¨Typescriptæ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºæœ¬Reactæœ¬æœºåº”ç”¨ç¨‹åºï¼Œå¯¼èˆªåˆ°æ–°çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ·»åŠ ä¾èµ–é¡¹å’Œå¼€å‘ä¾èµ–é¡¹ï¼Œç„¶ååœ¨iOSæ¨¡æ‹Ÿå™¨ä¸Šæ„å»ºè¯¥åº”ç”¨ç¨‹åºã€‚</p><h1 id="39a3" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">1.å…¨çƒä¸»é¢˜</h1><p id="85b2" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">å½“æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªâ€œå…¨çƒâ€ä¸»é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…¨çƒèƒŒæ™¯ã€‚åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºconstantsçš„æ–°æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨æ–°æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºTheme.tsçš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :</p><p id="203c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">å¸¸é‡/ä¸»é¢˜. ts </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="5f73" class="mu lq in mq b gy mv mw l mx my">export const dark = {<br/>  background: '#121212',<br/>  text: '#F5AD93',<br/>};</span><span id="7623" class="mu lq in mq b gy mz mw l mx my">export const light = {<br/>  background: '#ECF0F3',<br/>  text: '#A40000',<br/>};</span><span id="b3f6" class="mu lq in mq b gy mz mw l mx my">type Theme = {<br/>  background: typeof dark.background | typeof light.background;<br/>  text: typeof dark.text | typeof light.text;<br/>};</span><span id="29c9" class="mu lq in mq b gy mz mw l mx my">export interface CustomThemeProps {<br/>  theme?: Theme;<br/>}</span></pre><p id="f099" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¦‚æœä½ çš„å±å¹•æ˜¯ä¸€å—ç”»å¸ƒï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°±æ˜¯è°ƒè‰²æ¿ä¸Šçš„æ‰€æœ‰é¢œè‰²ï¼Œæ‰€æœ‰æ ·å¼ç»„ä»¶éƒ½å¯ä»¥è®¿é—®å®ƒ(ä¸€æ—¦æˆ‘ä»¬å®Œæˆ)ã€‚ä½ å¯ä»¥éšæ„æ‰©å±•è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªèƒŒæ™¯å’Œä¸€ä¸ªæ–‡æœ¬é¢œè‰²ã€‚å¯¹äºæˆ‘ä»¬çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å°†é€‰æ‹©ä¸€ä¸ªæ¼‚äº®çš„æ·±ç³–æœè‹¹æœçº¢ã€‚è¯·æ³¨æ„ï¼Œé»‘æš—æ¨¡å¼çš„æ–‡æœ¬é¢œè‰²æœ‰ä¸åŒçš„åå…­è¿›åˆ¶ä»£ç ï¼›è¿™æ˜¯ä¸€ç§è¾ƒæµ…çš„çº¢è‰²(å»é¥±å’Œ)ï¼Œä½¿å…¶æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“é˜…è¯»ã€‚</p><p id="02ad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬ç”¨æ·±ç°è‰²ä½œä¸ºèƒŒæ™¯è‰²ï¼Œå› ä¸ºä½ ä¸åº”è¯¥ç”¨é»‘è‰²ä½œä¸ºé»‘æš—æ¨¡å¼ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºé»‘æš—ä¸»é¢˜è®¾è®¡çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æè´¨ç•Œé¢<a class="ae ks" href="https://material.io/design/color/dark-theme.html" rel="noopener ugc nofollow" target="_blank">https://material.io/design/color/dark-theme.html</a>ã€‚æ­¤å¤–ï¼ŒEvaè®¾è®¡ç³»ç»Ÿæ˜¯å¯»æ‰¾è¯­ä¹‰é¢œè‰²çš„ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼Œæ‰€ä»¥ä¹Ÿå€¼å¾—ä¸€æâ€”â€”æˆ‘ç”¨å®ƒæ¥ä¸ºæˆ‘ä»¬çš„é»‘æš—æ¨¡å¼è·å¾—å»é¥±å’Œçš„æ–‡æœ¬é¢œè‰²:ã€https://colors.eva.design/?utm_campaign=eva_colorsã€‘T2â€”â€”ä¸»é¡µâ€”â€”Eva _ Designç½‘ç«™&amp;UTM _ source = Eva _ Design&amp;UTM _ medium = referral&amp;UTM _ content = Eva _ website _ menuã€‚</p><p id="a1c7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å®šä¹‰äº†æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨å®ƒã€‚åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶å°†å…¶å‘½åä¸ºcomponentsï¼Œåœ¨componentsä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¹¶å°†å…¶å‘½åä¸ºThemeManager.tsxï¼Œç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹:</p><p id="6107" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">components/theme manager . tsx</strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="cf24" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {StatusBar} from 'react-native';<br/>import styled, {ThemeProvider} from 'styled-components/native';</span><span id="0e4e" class="mu lq in mq b gy mz mw l mx my">import {CustomThemeProps, light} from '../../constants/theme';</span><span id="5616" class="mu lq in mq b gy mz mw l mx my">const StyledThemeContainer = styled.KeyboardAvoidingView&lt;CustomThemeProps&gt;`<br/>  flex: 1;<br/>  align-items: center;<br/>  justify-content: center;<br/>  background: ${(props) =&gt; props.theme.background};<br/>`;</span><span id="47b5" class="mu lq in mq b gy mz mw l mx my">export const ThemeManager = ({children}: {<br/>  children: React.reactNode<br/>}) =&gt; {<br/>  return (<br/>    &lt;ThemeProvider theme={light}&gt;<br/>      &lt;StatusBar barStyle={'light-content'} /&gt;<br/>      &lt;StyledThemeContainer&gt;{children}&lt;/StyledThemeContainer&gt;<br/>    &lt;/ThemeProvider&gt;<br/>  );<br/>};</span></pre><p id="2808" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ThemeProvideræ˜¯å‘æ‰€æœ‰å­ç»„ä»¶æä¾›ä¸»é¢˜è®¾ç½®çš„ç»„ä»¶ã€‚ç”±äºæˆ‘ä»¬æä¾›äº†ç¯å…‰ä¸»é¢˜ï¼Œæ‰€æœ‰å­ç»„ä»¶éƒ½å°†å‘ˆç°ç¯å…‰ä¸»é¢˜çš„é¢œè‰²ã€‚</p><p id="c222" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä¸»é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–°çš„ThemeManagerç»„ä»¶æ·»åŠ åˆ°App.tsxæ–‡ä»¶ä¸­:</p><p id="2e2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> App.tsx </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="a0bf" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {SafeAreaView, Text} from 'react-native';<br/>import {ThemeManager} from './components/ThemeManager';</span><span id="ee7a" class="mu lq in mq b gy mz mw l mx my">const App = () =&gt; {<br/>  return (<br/>      &lt;ThemeManager&gt;<br/>        &lt;SafeAreaView&gt;<br/>          &lt;Text&gt;Hello world&lt;/Text&gt;<br/>        &lt;/SafeAreaView&gt;<br/>      &lt;/ThemeManager&gt;<br/>  );<br/>};</span><span id="3df1" class="mu lq in mq b gy mz mw l mx my">export default App;</span></pre><h1 id="d5e2" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">2.Reduxå·¥å…·åŒ…</h1><p id="806a" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œstateâ€çš„æ–‡ä»¶å¤¹ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶:</p><p id="5ee8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> state/themeMode.slice.ts </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="f7a2" class="mu lq in mq b gy mv mw l mx my">import {Appearance} from 'react-native';<br/>import {createSlice} from '@reduxjs/toolkit';</span><span id="4a44" class="mu lq in mq b gy mz mw l mx my">export enum ThemeModeEnum {<br/>  LIGHT = 'light',<br/>  DARK = 'dark',<br/>}</span><span id="b9e3" class="mu lq in mq b gy mz mw l mx my">export const defaultMode = Appearance.getColorScheme() || ThemeModeEnum.LIGHT;</span><span id="24b3" class="mu lq in mq b gy mz mw l mx my">const themeModeSlice = createSlice({<br/>  name: 'themeMode',<br/>  initialState: {<br/>    themeMode: defaultMode as ThemeModeEnum,<br/>  },<br/>  reducers: {<br/>    setThemeMode: (state, action: {payload: ThemeModeEnum}) =&gt; {<br/>      state.themeMode = action.payload;<br/>    },<br/>  },<br/>});</span><span id="f1fd" class="mu lq in mq b gy mz mw l mx my">export const {setThemeMode} = themeModeSlice.actions;</span><span id="2fac" class="mu lq in mq b gy mz mw l mx my">export default themeModeSlice.reducer;</span></pre><p id="43a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬ä½¿ç”¨â€œå¤–è§‚â€æ¥è·å–è®¾å¤‡å½“å‰çš„ä¸»é¢˜è®¾ç½®ï¼Œç¨åå½“æˆ‘ä»¬ç¼–è¾‘ä¸»é¢˜ç®¡ç†å™¨æ–‡ä»¶æ—¶éœ€è¦ç”¨åˆ°å®ƒã€‚</p><p id="a8d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">çŠ¶æ€/ç´¢å¼•. ts </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="e1e3" class="mu lq in mq b gy mv mw l mx my">import {configureStore} from '@reduxjs/toolkit';<br/>import themeModeReducer from './themeMode.slice';</span><span id="1745" class="mu lq in mq b gy mz mw l mx my">export const store = configureStore({<br/>  reducer: {<br/>    themeMode: themeModeReducer,<br/>  },<br/>});</span><span id="3934" class="mu lq in mq b gy mz mw l mx my">export type AppDispatch = typeof store.dispatch;<br/>export type RootState = ReturnType&lt;typeof store.getState&gt;;</span></pre><p id="cefd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™æ˜¯æˆ‘ä»¬å°†å‡é€Ÿå™¨æ·»åŠ åˆ°å•†åº—çš„åœ°æ–¹ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåªæ˜¯themeModeReducerã€‚è¦æ”¹å˜æˆ‘ä»¬ä¸»é¢˜çš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬ä»ä»€ä¹ˆåœ°æ–¹æ”¹å˜å®ƒ(å½“å‰çŠ¶æ€)ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ªé‡æ–°é€‰æ‹©çš„createSelector:</p><p id="cb23" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">é€‰æ‹©å™¨/getThemeMode.ts </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="7d49" class="mu lq in mq b gy mv mw l mx my">import {createSelector} from 'reselect';<br/>import {RootState} from '../state';</span><span id="5cd5" class="mu lq in mq b gy mz mw l mx my">export const getThemeMode = createSelector(<br/>  (state: RootState) =&gt; state,<br/>  (state) =&gt; state.themeMode,<br/>);</span></pre><p id="8512" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ£€ç´¢ä¸»é¢˜çš„å½“å‰çŠ¶æ€ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ›´æ–°çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºè‡ªå·±çš„å®šåˆ¶è°ƒåº¦æŒ‚é’©:</p><p id="1641" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">Utils/use app dispatch . ts</strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="02fe" class="mu lq in mq b gy mv mw l mx my">import {useDispatch} from 'react-redux';<br/>import {AppDispatch} from '../state';</span><span id="82c7" class="mu lq in mq b gy mz mw l mx my">export const useAppDispatch = () =&gt; useDispatch&lt;AppDispatch&gt;();</span></pre><p id="5b7f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„reduceræ·»åŠ åˆ°Appæ–‡ä»¶ä¸­:</p><p id="ac7e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> App.tsx </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="ff3f" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {SafeAreaView, Text} from 'react-native';<br/>import {Provider} from 'react-redux';</span><span id="b38d" class="mu lq in mq b gy mz mw l mx my">import {ThemeManager} from './components/ThemeManager';<br/>import {store} from './state';</span><span id="7d37" class="mu lq in mq b gy mz mw l mx my">const App = () =&gt; (<br/>  &lt;Provider store={store}&gt;<br/>    &lt;ThemeManager&gt;<br/>      &lt;SafeAreaView&gt;<br/>        &lt;Text&gt;Hello world&lt;/Text&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/ThemeManager&gt;<br/>  &lt;/Provider&gt;<br/>);</span><span id="8523" class="mu lq in mq b gy mz mw l mx my">export default App;</span></pre><h1 id="0313" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">3.ä¸»é¢˜æ¨¡å¼å¼€å…³</h1><p id="819b" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">ä¸ºäº†è®©æˆ‘ä»¬çš„å¼€å…³ç»„ä»¶å¯ä»¥æ§åˆ¶ä¸»é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ç®¡ç†å™¨æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ›´æ”¹ä¸º:</p><p id="8677" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">components/theme manager . tsx</strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="b09a" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {StatusBar} from 'react-native';<br/>import styled, {ThemeProvider} from 'styled-components/native';<br/>import {useSelector} from 'react-redux';</span><span id="e2b8" class="mu lq in mq b gy mz mw l mx my">import {CustomThemeProps, light, dark} from '../../constants/theme';<br/>import {getThemeMode} from '../../selectors/getThemeMode';<br/>import {ThemeModeEnum} from '../../state/themeMode.slice';</span><span id="2430" class="mu lq in mq b gy mz mw l mx my">const StyledThemeContainer = styled.KeyboardAvoidingView&lt;CustomThemeProps&gt;`<br/>  flex: 1;<br/>  align-items: center;<br/>  justify-content: center;<br/>  background: ${(props) =&gt; props.theme.background};<br/>`;</span><span id="0627" class="mu lq in mq b gy mz mw l mx my">const {DARK, LIGHT} = ThemeModeEnum;</span><span id="3194" class="mu lq in mq b gy mz mw l mx my">export const ThemeManager = <!-- -->({children}: {children: React.ReactNode}) =&gt; {</span><span id="dcf0" class="mu lq in mq b gy mz mw l mx my">const {themeMode} = useSelector(getThemeMode);</span><span id="e364" class="mu lq in mq b gy mz mw l mx my">const providedTheme = () =&gt; {<br/>    if (themeMode === DARK) {<br/>      return dark;<br/>    }<br/>    if (themeMode === LIGHT) {<br/>      return light;<br/>    }<br/>  };<br/>  return (<br/>    &lt;ThemeProvider theme={providedTheme}&gt;<br/>      &lt;StatusBar<br/>        barStyle={themeMode === DARK ? 'light-content' : 'dark-content'}<br/>      /&gt;<br/>      &lt;StyledThemeContainer&gt;{children}&lt;/StyledThemeContainer&gt;<br/>    &lt;/ThemeProvider&gt;<br/>  );</span></pre><p id="7e4e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç°åœ¨æ˜¯æ—¶å€™æ„å»ºæˆ‘ä»¬çš„äº¤æ¢æœºäº†:</p><p id="4c42" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">components/theme mode switch . tsx</strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="52c1" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {Switch} from 'react-native';<br/>import {useSelector} from 'react-redux';</span><span id="5dc7" class="mu lq in mq b gy mz mw l mx my">import {getThemeMode} from '../../selectors/getThemeMode';<br/>import {useAppDispatch} from '../../utils/useAppDispatch';<br/>import {ThemeModeEnum, setThemeMode} from '../../state/themeMode.slice';<br/>import {<br/>  StyledSwitchWrapper,<br/>  StyledThemeContainer,<br/>  StyledToggleText,<br/>} from './ThemeModeSwitch.styles';</span><span id="aa9c" class="mu lq in mq b gy mz mw l mx my">const {LIGHT, DARK} = ThemeModeEnum;</span><span id="562c" class="mu lq in mq b gy mz mw l mx my">export const ThemeModeSwitch = () =&gt; {<br/>  const {themeMode} = useSelector(getThemeMode);<br/>  const dispatch = useAppDispatch();</span><span id="f8e7" class="mu lq in mq b gy mz mw l mx my">return (<br/>    &lt;StyledThemeContainer&gt;<br/>      &lt;StyledSwitchWrapper&gt;<br/>        &lt;StyledToggleText&gt;Dark mode&lt;/StyledToggleText&gt;<br/>        &lt;Switch<br/>          value={themeMode === DARK}<br/>          onValueChange={(value) =&gt; {<br/>            dispatch(setThemeMode(value ? DARK : LIGHT));<br/>          }}<br/>        /&gt;<br/>      &lt;/StyledSwitchWrapper&gt;<br/>    &lt;/StyledThemeContainer&gt;<br/>  );<br/>};</span></pre><p id="b6c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">components/thememodeswitch . styles . ts</strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="f912" class="mu lq in mq b gy mv mw l mx my">import styled from 'styled-components/native';<br/>import {CustomThemeProps} from '../../constants/theme';</span><span id="f28a" class="mu lq in mq b gy mz mw l mx my">export const StyledThemeContainer = styled.View`<br/>  flex: 1;<br/>  flex-direction: row;<br/>  align-items: center;<br/>  justify-content: center;<br/>  width: 90%;<br/>  padding: 30px 0;<br/>`;</span><span id="14ab" class="mu lq in mq b gy mz mw l mx my">export const StyledSwitchWrapper = styled.View`<br/>  flex-direction: row;<br/>  justify-content: space-between;<br/>  width: 90%;<br/>`;</span><span id="0ecf" class="mu lq in mq b gy mz mw l mx my">export const StyledToggleText = styled.Text&lt;CustomThemeProps&gt;`<br/>  color: ${(props) =&gt; props.theme.text};<br/>  font-size: 20px;</span></pre><p id="e2f6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è®©æˆ‘ä»¬å°†æ–°çš„å¼€å…³æ·»åŠ åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ–‡ä»¶ä¸­ï¼Œå¹¶è¿›è¡Œæµ‹è¯•ï¼</p><p id="96ea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> App.tsx </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="dca7" class="mu lq in mq b gy mv mw l mx my">import React from 'react';<br/>import {SafeAreaView} from 'react-native';<br/>import {Provider} from 'react-redux';</span><span id="9f58" class="mu lq in mq b gy mz mw l mx my">import {ThemeManager} from './components/ThemeManager';<br/>import {store} from './state';<br/>import {ThemeModeSwitch} from './components/ThemeModeSwitch';</span><span id="a681" class="mu lq in mq b gy mz mw l mx my">const App = () =&gt; (<br/>  &lt;Provider store={store}&gt;<br/>    &lt;ThemeManager&gt;<br/>      &lt;SafeAreaView&gt;<br/>        &lt;ThemeModeSwitch /&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/ThemeManager&gt;<br/>  &lt;/Provider&gt;<br/>);</span><span id="bcbd" class="mu lq in mq b gy mz mw l mx my">export default App;</span></pre><h1 id="f661" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">4.å“åº”ä¸»é¢˜</h1><p id="6dc5" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">ç°åœ¨å‰©ä¸‹è¦åšçš„å°±æ˜¯è®©æˆ‘ä»¬çš„ä¸»é¢˜å“åº”è®¾å¤‡çš„ä¸»é¢˜è®¾ç½®ã€‚</p><p id="bbea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> ThemeManager.tsx </strong></p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="ce53" class="mu lq in mq b gy mv mw l mx my">import React, {useEffect} from 'react';<br/>import {StatusBar, Appearance} from 'react-native';<br/>import styled, {ThemeProvider} from 'styled-components/native';<br/>import {useSelector} from 'react-redux';</span><span id="97b6" class="mu lq in mq b gy mz mw l mx my">import {CustomThemeProps, light, dark} from '../../constants/theme';<br/>import {getThemeMode} from '../../selectors/getThemeMode';<br/>import {ThemeModeEnum, setThemeMode} from '../../state/themeMode.slice';<br/>import {useAppDispatch} from '../../utils/useAppDispatch';</span><span id="636b" class="mu lq in mq b gy mz mw l mx my">const StyledThemeContainer = styled.KeyboardAvoidingView&lt;CustomThemeProps&gt;`<br/>  flex: 1;<br/>  align-items: center;<br/>  justify-content: center;<br/>  background: ${(props) =&gt; props.theme.background};<br/>`;</span><span id="b0ad" class="mu lq in mq b gy mz mw l mx my">const {DARK, LIGHT} = ThemeModeEnum;</span><span id="4803" class="mu lq in mq b gy mz mw l mx my">export const ThemeManager = ({children}: {children: React.ReactNode}) =&gt; {</span><span id="d9dc" class="mu lq in mq b gy mz mw l mx my">const {themeMode} = useSelector(getThemeMode);<br/>  const dispatch = useAppDispatch();</span><span id="4460" class="mu lq in mq b gy mz mw l mx my">const providedTheme = () =&gt; {<br/>    if (themeMode === DARK) {<br/>      return dark;<br/>    }<br/>    if (themeMode === LIGHT) {<br/>      return light;<br/>    }<br/>  };</span><span id="84dd" class="mu lq in mq b gy mz mw l mx my">useEffect(() =&gt; {<br/>    const subscription = Appearance.addChangeListener(({colorScheme}) =&gt; {<br/>      dispatch(setThemeMode(colorScheme as ThemeModeEnum));<br/>    });<br/>    return () =&gt; subscription.remove();<br/>  }, [dispatch]);<br/>  return (<br/>    &lt;ThemeProvider theme={providedTheme}&gt;<br/>      &lt;StatusBar<br/>        barStyle={themeMode === DARK ? 'light-content' : 'dark-content'}<br/>      /&gt;<br/>      &lt;StyledThemeContainer&gt;{children}&lt;/StyledThemeContainer&gt;<br/>    &lt;/ThemeProvider&gt;<br/>  );<br/>};</span></pre><p id="bb81" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç§å•Šã€‚å…³é—­ä½ çš„åº”ç”¨ç¨‹åºï¼Œæ›´æ”¹ä½ çš„è®¾å¤‡ä¸»é¢˜è®¾ç½®ï¼Œå›åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼ŒæƒŠå¹ä½ çš„æ‰åï¼</p></div></div>    
</body>
</html>
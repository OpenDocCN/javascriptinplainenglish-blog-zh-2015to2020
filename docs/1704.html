<html>
<head>
<title>Optional Chaining In JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的可选链接</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/optional-chaining-in-javascript-cb6abbb43bb5?source=collection_archive---------7-----------------------#2020-04-15">https://javascript.plainenglish.io/optional-chaining-in-javascript-cb6abbb43bb5?source=collection_archive---------7-----------------------#2020-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9c3fc87d9f309adafd34c98fd8b83fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AyLkLomiOC0V0kJd.jpg"/></div></div></figure><p id="6199" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可选链接是JavaScript中的一个新特性。它实际上是一个ES2020规格。可选的链接允许开发人员编写可读性更强、更简洁的代码。</p><h1 id="b995" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">这是什么？</h1><p id="1143" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">可选链接，顾名思义，帮助我们有选择地链接对象的属性。也就是说，我们可以将对象的属性链接到许多级别，而不必明确验证链中的每个引用都是有效的。</p><h1 id="649c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">它解决什么问题？</h1><p id="76da" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">考虑下面的代码示例。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="9019" class="mi kx iq me b gy mj mk l ml mm">let person = {</span><span id="1cb9" class="mi kx iq me b gy mn mk l ml mm">  name: "John Doe",</span><span id="7570" class="mi kx iq me b gy mn mk l ml mm">  address: {</span><span id="ab2c" class="mi kx iq me b gy mn mk l ml mm">    place: "New York",</span><span id="5cd0" class="mi kx iq me b gy mn mk l ml mm">    city: "New York"</span><span id="7e8d" class="mi kx iq me b gy mn mk l ml mm">  }</span><span id="8176" class="mi kx iq me b gy mn mk l ml mm">}</span></pre><p id="82ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以像这样进入这个人的地方</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="62f5" class="mi kx iq me b gy mj mk l ml mm">let place = person.address.place</span></pre><p id="9ccb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是如果缺少<code class="fe mo mp mq me b">address</code>属性，这将抛出一个错误。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="6d51" class="mi kx iq me b gy mj mk l ml mm">Uncaught TypeError: Cannot read property 'place' of undefined</span></pre><p id="f4d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们必须在访问其子属性之前检查<code class="fe mo mp mq me b">address</code>属性是否存在</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="25ed" class="mi kx iq me b gy mj mk l ml mm">let place = person.address &amp;&amp; person.address.place</span></pre><p id="c6ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧，但是如果我们必须访问<code class="fe mo mp mq me b">place</code>的children属性呢？我们还必须为位置添加验证检查。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="54e0" class="mi kx iq me b gy mj mk l ml mm">let place = person.address</span><span id="bca9" class="mi kx iq me b gy mn mk l ml mm">  &amp;&amp; person.address.place</span><span id="1fab" class="mi kx iq me b gy mn mk l ml mm">  &amp;&amp; person.address.place.name</span></pre><p id="719d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们必须访问深度嵌套的对象或属性时，这就成了一场噩梦。</p><p id="95d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我们看看如何使用可选链接来解决这个问题。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="b5d9" class="mi kx iq me b gy mj mk l ml mm">let place = person.address?.place?.name</span></pre><p id="e57f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可读性更强、更整洁的🥰</p><h1 id="b8cb" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">它是如何工作的？</h1><p id="4244" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><code class="fe mo mp mq me b">.?</code>操作符的功能类似于<code class="fe mo mp mq me b">.</code>链接操作符，除了当属性或引用是<code class="fe mo mp mq me b">null</code>或<code class="fe mo mp mq me b">undefined</code>时，表达式用值<code class="fe mo mp mq me b">undefined</code>短路。</p><p id="f91b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于上面的一行代码，它是这样工作的。</p><p id="22d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，它检查<code class="fe mo mp mq me b">person.address</code>是否为<code class="fe mo mp mq me b">nullish</code>(空或未定义)。如果是nullish，那么表达式立即返回<code class="fe mo mp mq me b">undefined</code>而不执行剩余部分。否则，它继续执行表达式的下一部分。</p><h1 id="25a7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">告诉我更多</h1><p id="6f04" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">可选链接是一个很好的特性，可以方便地访问深度嵌套的对象属性，而不需要中间条件检查，但不限于此。</p><p id="1205" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可选链接在其他一些场合变得非常方便。</p><h2 id="fa15" class="mi kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">函数调用的可选链接</h2><p id="ef54" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">可选的链接操作符也可以验证函数调用。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="941b" class="mi kx iq me b gy mj mk l ml mm">let message = resultObject.getMessage?.()</span></pre><h2 id="15d3" class="mi kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">处理可选的回调</h2><p id="56d1" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">可选的链接也可以用来检查是否定义了回调。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7494" class="mi kx iq me b gy mj mk l ml mm">function fetchApi(<em class="nc">url</em>, <em class="nc">onSuccess</em>, <em class="nc">onError</em>) {</span><span id="33db" class="mi kx iq me b gy mn mk l ml mm"><em class="nc">  // if error occured</em></span><span id="bf00" class="mi kx iq me b gy mn mk l ml mm">  onError?.('An error occured')</span><span id="3084" class="mi kx iq me b gy mn mk l ml mm">}</span></pre><h1 id="f007" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">访问数组项目</h1><p id="030a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">它还可以验证数组是否具有指定的索引。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f1de" class="mi kx iq me b gy mj mk l ml mm">let item = arr?.[<em class="nc">1</em>]</span></pre><h1 id="5295" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">浏览器支持</h1><p id="3bf0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在撰写本文时，只有少数浏览器支持可选链接。您可以在此查看详细的浏览器兼容性<a class="ae nd" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining#Browser_compatibility" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="d7af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nc">原载于</em><a class="ae nd" href="https://jinoantony.com/blog/optional-chaining-in-javascript" rel="noopener ugc nofollow" target="_blank"><em class="nc">https://jinoantony.com</em></a><em class="nc">。</em></p><h2 id="e47e" class="mi kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="186c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae nd" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ka ir">AI in Plain English</strong></a><a class="ae nd" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ka ir">UX in Plain English</strong></a><a class="ae nd" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ka ir">Python in Plain English</strong></a><strong class="ka ir"/>——谢谢，继续学习！</p><p id="e310" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae nd" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">submissions @ plain English . io</strong></a><strong class="ka ir"/>，并附上您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Using Formik with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Formik与React Native一起使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-formik-with-react-native-c2b5820cc718?source=collection_archive---------3-----------------------#2020-09-19">https://javascript.plainenglish.io/using-formik-with-react-native-c2b5820cc718?source=collection_archive---------3-----------------------#2020-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f640" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用Formik和Yup轻松地将表单集成到React本机应用程序中</h2></div><p id="bb74" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为web或移动应用程序开发人员创建表单几乎是不可能的。对于ReactJS开发者来说，Formik 是天赐之物。这是一个为使web应用程序更容易处理表单而开发的项目。然而，用React native编写的移动应用程序似乎没有充分利用这个库。这篇简短的帖子演示了如何使用React本地应用程序以及使用<a class="ae ky" href="https://github.com/jquense/yup" rel="noopener ugc nofollow" target="_blank"> Yup </a>添加验证。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/8944fecb4ffb402aeb90e6feccc61814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*awAVWIg3Jq2dA8uqNlO_gg.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">source: pexels</figcaption></figure><p id="7924" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先使用yarn或npm将Formik和Yup添加到项目中。</p><p id="5d3c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe lp lq lr ls b">yarn add formik yup</code></p><p id="df43" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们将使用上面添加的项目来创建一个表单。从导入Formik和Yup开始，如下所示</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="7e9e" class="lx ly in ls b gy lz ma l mb mc">import * as yup from "yup";</span><span id="83eb" class="lx ly in ls b gy md ma l mb mc">import { Formik } from "formik";</span></pre><p id="f764" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从编写验证开始。这些验证稍后将被插入到表单中。</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="1b2a" class="lx ly in ls b gy lz ma l mb mc">let validationSchema = yup.object().shape({<br/>  issueDescription: yup.string().min(20).required(),<br/>  email: yup.string().email().required(),<br/>});</span></pre><p id="b634" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">验证架构概述了表单可以接受的值的类型及其各自的约束。上面的变量<code class="fe lp lq lr ls b">validationSchema</code>为issueDescription和email字段创建验证准则。问题描述不得少于20个字符，并且不能为空。同样，电子邮件值必须是一个字符串和有效的电子邮件。该字段也可以不为空。</p><p id="fed3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像输入字段和复选框这样的表单元素被包装在Formik标签之间。</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="a598" class="lx ly in ls b gy lz ma l mb mc">&lt;Formik<br/><strong class="ls io"><em class="me">initialValues</em></strong>={{ issueDescription: '', email: ''}}<br/><strong class="ls io"><em class="me">onSubmit</em></strong>={<em class="me">values</em> =&gt; handleForm(values)}<br/><strong class="ls io"><em class="me">validationSchema</em></strong>={validationSchema}&gt;</span><span id="853c" class="lx ly in ls b gy md ma l mb mc">{({ <em class="me">values</em>, <em class="me">handleChange</em>, <em class="me">errors</em>, <em class="me">handleSubmit</em> }) =&gt; (</span><span id="27dc" class="lx ly in ls b gy md ma l mb mc">....</span><span id="8605" class="lx ly in ls b gy md ma l mb mc">)}<br/>&lt;/Formik&gt;</span></pre><p id="5c36" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，粗斜体文本表示Formik使用的属性。<code class="fe lp lq lr ls b">initialValues</code>包含一个带有字段及其初始值的对象。这些值在第一次出现时被注入到表单域中。该对象的键应该与表单元素的名称相匹配。例如，在我们将要创建的表单中应该有一个名为<code class="fe lp lq lr ls b">issueDescription</code>的输入字段。</p><p id="0b5b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe lp lq lr ls b">onSubmit</code>接受一个处理程序，这个处理程序概括了表单提交时应该做的事情。<code class="fe lp lq lr ls b">validationSchema</code>描述了决定表单元素中的值是有效还是无效的规则。这就是Yup的用武之地。</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="7c35" class="lx ly in ls b gy lz ma l mb mc">{({ <em class="me">values</em>, <em class="me">handleChange</em>, <em class="me">errors</em>, <em class="me">handleSubmit</em> })</span></pre><p id="1515" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面一行显示了表单组件可用的一组值。它们被用来显示验证错误，记录输入字段中的任何变化，识别字段何时成为焦点，等等。这些值作为表单的参数，作为缺失的部分，如下所示。</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="9b43" class="lx ly in ls b gy lz ma l mb mc">&lt;TextInput<br/><em class="me">name="issueDescription"<br/>placeholder</em>="Describe the issue"<br/><em class="me">style</em>={styles.inputs}<br/><em class="me">value</em>={<strong class="ls io"><em class="me">values</em></strong>.issueDescription}<br/><em class="me">onChangeText</em>={<strong class="ls io">handleChange</strong>('issueDescription')}<br/>/&gt;</span><span id="c9df" class="lx ly in ls b gy md ma l mb mc">{(<strong class="ls io">errors</strong>.issueDescription) &amp;&amp; &lt;Text&gt;Invalid issue description&lt;/Text&gt;}</span></pre><p id="2306" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面代码片段中加粗的部分是作为参数传递给表单的值。如果描述无效，它的最后一部分有条件地呈现一个错误。</p><p id="087c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，可以使用一个按钮来提交表单。该按钮大致如下所示</p><pre class="la lb lc ld gt lt ls lu lv aw lw bi"><span id="7361" class="lx ly in ls b gy lz ma l mb mc"><br/>&lt;Button <br/>title="Report an issue"<br/>onPress={<strong class="ls io">handleSubmit</strong>}<br/>/&gt;</span></pre><p id="adfc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了简单起见，省略了可以根据表单状态禁用按钮的部分。这可以通过使用此处的导轨<a class="ae ky" href="https://formik.org/docs/guides/validation" rel="noopener ugc nofollow" target="_blank">轻松完成。</a></p><p id="6da4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望这能让构建表单对你来说更容易一些。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Introduction to Deno: A Secure JavaScript &amp; TypeScript Runtime</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno简介:一个安全的JavaScript &amp; TypeScript运行时</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-deno-a-secure-javascript-typescript-runtime-a6b3d5c21b2c?source=collection_archive---------3-----------------------#2020-08-18">https://javascript.plainenglish.io/introduction-to-deno-a-secure-javascript-typescript-runtime-a6b3d5c21b2c?source=collection_archive---------3-----------------------#2020-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7f9b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">来自NodeJs创建者的JavaScript运行时</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1b59816a79c1841ee2a81013a37fcfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0e56QiH0iZPfsMXe7R3AmA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Rex from Toy Story</figcaption></figure><h1 id="0649" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是Deno？</h1><blockquote class="ln"><p id="46c5" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">Deno是一个<strong class="ak"> JavaScript和类型脚本运行时</strong>，它让你<strong class="ak"> </strong>用任何一种语言编写程序，并从命令行执行它们</p></blockquote><p id="6d8a" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">Deno程序可以访问主机上的资源，比如<strong class="ma ir">文件系统和环境变量</strong>。</p><h2 id="e077" class="mt kw iq bd kx mu mv dn lb mw mx dp lf mh my mz lh ml na nb lj mp nc nd ll ne bi translated">什么是运行时系统？</h2><p id="22bc" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">至于Deno，我们可以说是它让Javascript在浏览器之外运行，增加了一系列Javascript引擎本身不可能找到的特性。</p><p id="65d1" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">Deno是Node的创建者Ryan Dahl的创意，他创建Deno是为了解决他所认为的Node中的设计缺陷。</p><p id="cecb" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated"><strong class="ma ir">目标是提供一个安全的脚本环境</strong>，将TypeScript视为一级语言，并且尽可能兼容浏览器(如果可行的话)。</p><h1 id="dd86" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">安全功能</h1><blockquote class="ln"><p id="5d39" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">Deno的设计是开箱即用</p></blockquote><p id="5051" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated"><strong class="ma ir">默认情况下，所有代码都在一个安全的沙箱中执行</strong>，这意味着你需要给出明确的许可来允许一个程序访问文件系统或网络。</p><p id="66fb" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">可以使用以下命令行标志授予程序权限:</p><ul class=""><li id="b057" class="nq nr iq ma b mb nk me nl mh ns ml nt mp nu lx nv nw nx ny bi translated"><strong class="ma ir"> -A，–allow-all</strong>:允许所有权限(禁用所有安全性)。</li><li id="8555" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–allow-env</strong>:允许获取和设置环境变量。</li><li id="8589" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–allow-HR time</strong>:允许高分辨率时间测量(可用于计时攻击和指纹识别)。</li><li id="b14d" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–allow-net = \</strong>:允许网络访问。可选地采用逗号分隔的域白名单。</li><li id="2a11" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–允许插件</strong>:允许加载插件(不稳定特性)。</li><li id="e484" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–allow-read = \</strong>:允许文件系统读访问。可以选择采用逗号分隔的目录或文件白名单。</li><li id="4cc2" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–允许运行</strong>:允许运行子流程。</li><li id="d1b6" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">–allow-write = \</strong>:允许文件系统写访问。可以选择采用逗号分隔的目录或文件白名单。</li></ul><h1 id="a764" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">一流的类型脚本支持</h1><blockquote class="ln"><p id="69ab" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">Deno既可以执行JavaScript <em class="oe">也可以执行</em> TypeScript。</p></blockquote><p id="5243" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">最酷的是，Typescript像JavaScript和<strong class="ma ir">一样被支持为一级语言，您可以加载和运行您的Typescript代码，而不需要任何额外的构建步骤</strong>，首先将您的代码转换为Javascript。</p><h1 id="3c26" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">使用外部代码</h1><p id="f7b5" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">正如Ryan在他的演讲中提到的</p><blockquote class="ln"><p id="94a7" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">他的Deno目标之一是避免对包管理器的需求</p></blockquote><p id="532a" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">与Node.js和PHP(分别使用<a class="ae np" href="https://www.sitepoint.com/beginners-guide-node-package-manager/" rel="noopener ugc nofollow" target="_blank"> npm </a>和composer包管理器)等运行时/语言不同，<strong class="ma ir">没有Deno </strong>的包管理器。</p><p id="6972" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">相反，<strong class="ma ir">外部包通过URL </strong>直接导入:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="c786" class="mt kw iq og b gy ok ol l om on">import { Client } from "https://deno.land/x/mysql@2.2.0/mod.ts";</span></pre><blockquote class="oo op oq"><p id="dc0c" class="ly lz or ma b mb nk jr md me nl ju mg os nm mj mk ot nn mn mo ou no mr ms lx ij bi translated">第一次运行脚本时，Deno会获取、编译和缓存所有的导入，这样后续的启动会非常快。</p></blockquote><p id="f5f5" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">很明显，有时您可能想强制它重新获取导入，您可以使用<code class="fe ov ow ox og b">cache</code>子命令来完成:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="1d2d" class="mt kw iq og b gy ok ol l om on">deno cache --reload my_module.ts</span></pre><h1 id="0823" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">包托管</h1><p id="dff6" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">虽然Deno没有提供这样的包注册表，但有一个第三方模块列表<a class="ae np" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank">可用</a>。</p><blockquote class="oo op oq"><p id="469e" class="ly lz or ma b mb nk jr md me nl ju mg os nm mj mk ot nn mn mo ou no mr ms lx ij bi translated">该服务提供了一个标准化的、版本化的URL，它映射到模块的GitHub repo。</p></blockquote><p id="cb78" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">您可以按名称搜索软件包并查看简短描述，还可以单击查看软件包自述文件。</p><h1 id="4c04" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">标准图书馆</h1><blockquote class="ln"><p id="2382" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">Deno提供了一个<a class="ae np" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank">标准库</a>——松散地基于Golang的——它提供了一组没有外部依赖性的高质量标准模块</p></blockquote><blockquote class="oo op oq"><p id="399a" class="ly lz or ma b mb mc jr md me mf ju mg os mi mj mk ot mm mn mo ou mq mr ms lx ij bi translated">标准库中的软件包不与Deno一起安装。</p></blockquote><p id="80be" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">相反，它们可以在网上找到，并链接到我们在上一节看到的内容。</p><p id="e3fb" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">模块被版本化，允许您将您的代码固定到特定版本的使用:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="dd7a" class="mt kw iq og b gy ok ol l om on">import { copy } from "https://deno.land/std@0.50.0/fs/copy.ts";</span></pre><p id="053f" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">这意味着您编写的任何依赖于标准库中的模块的代码都应该在未来的版本中继续工作。</p><p id="f78e" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">该库包括构建命令行和基于HTTP的应用程序时可能需要的各种助手和实用程序:</p><ul class=""><li id="19a7" class="nq nr iq ma b mb nk me nl mh ns ml nt mp nu lx nv nw nx ny bi translated"><strong class="ma ir">归档</strong>:处理tar文件的模块</li><li id="537b" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">异步</strong>:异步实用程序</li><li id="f911" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">字节:</strong>使用二进制数组的助手</li><li id="807a" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> datetime </strong>:将日期字符串解析成<code class="fe ov ow ox og b">Date</code>对象的助手</li><li id="dc34" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">编码</strong>:处理base32、二进制、CSV、TOML和YAML格式的编码器</li><li id="22f4" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">标志</strong>:命令行参数解析器</li><li id="4d18" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> fmt </strong>:打印格式化输出的工具</li><li id="a767" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated">fs:使用文件系统的助手</li><li id="e893" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> hash </strong>:使用各种算法创建散列的模块</li><li id="c4d3" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> http: </strong>创建http和文件服务器，并操作cookies</li><li id="63cf" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> io </strong>:字符串输入/输出实用程序</li><li id="effa" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">日志</strong>:简单日志模块</li><li id="5ff8" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> mime: </strong>提供对多部分数据的支持</li><li id="6078" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">node</strong>:node . js代码的(当前正在进行的)兼容层</li><li id="f47a" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">路径</strong>:路径操纵实用程序</li><li id="33fd" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">权限</strong>:助手检查并提示安全权限</li><li id="9a7e" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">信号</strong>:处理Deno过程信号的助手</li><li id="497a" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir">测试:</strong>测试用于Deno内置测试运行器的断言</li><li id="2d49" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> uuid </strong>:用于生成和验证uuid的实用程序</li><li id="aefc" class="nq nr iq ma b mb nz me oa mh ob ml oc mp od lx nv nw nx ny bi translated"><strong class="ma ir"> ws </strong>:创建WebSocket客户端和服务器的助手</li></ul><h1 id="546d" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">安装Deno</h1><blockquote class="ln"><p id="3869" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">Deno作为一个单独的可执行文件发布，没有依赖性。</p></blockquote><p id="d904" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">您可以从<a class="ae np" href="https://github.com/denoland/deno/releases" rel="noopener ugc nofollow" target="_blank">发布页面</a>下载二进制文件，或者使用下面的安装程序进行安装:</p><p id="d49d" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated"><strong class="ma ir"> Shell (macOS，Linux) </strong></p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="0e26" class="mt kw iq og b gy ok ol l om on">curl -fsSL https://deno.land/x/install/install.sh |  sh</span></pre><p id="0e4e" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated"><strong class="ma ir"> PowerShell (Windows) </strong></p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="f15f" class="mt kw iq og b gy ok ol l om on">iwr https://deno.land/x/install/install.ps1 -useb | iex</span></pre><p id="9d77" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated"><a class="ae np" href="https://formulae.brew.sh/formula/deno" rel="noopener ugc nofollow" target="_blank"> <strong class="ma ir">家酿</strong> </a> <strong class="ma ir"> (macOS) </strong></p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="52fe" class="mt kw iq og b gy ok ol l om on">brew install deno</span></pre><h1 id="c7e9" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">升级</h1><p id="b769" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">可以使用以下命令将Deno升级到最新版本:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="e129" class="mt kw iq og b gy ok ol l om on">deno upgrade</span></pre><p id="5fe3" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">您可以升级/降级到特定版本:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="55f6" class="mt kw iq og b gy ok ol l om on">deno upgrade --version 1.0.1</span></pre><h1 id="cc6e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">未来是光明的</h1><p id="6d23" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">Deno <a class="ae np" href="https://deno.land/manual" rel="noopener ugc nofollow" target="_blank">手册</a>提示它</p><blockquote class="ln"><p id="5feb" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">“是历史上用Bash或Python编写的实用程序脚本的绝佳替代品”。</p></blockquote><p id="b226" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">虽然这肯定是真的，但我希望看到它越来越多地被用于Node.js目前流行的用例。</p><p id="3cfa" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated">随着越来越多的第三方模块的出现，已经出现了许多类似Express/Koa的框架，允许您构建类型安全的REST APIs。</p><p id="600c" class="pw-post-body-paragraph ly lz iq ma b mb nk jr md me nl ju mg mh nm mj mk ml nn mn mo mp no mr ms lx ij bi translated"><strong class="ma ir">瑞恩·达尔</strong>说道</p><blockquote class="ln"><p id="0d3b" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">“Deno绝不是Node的对手”。</p></blockquote><p id="a94b" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">简单地说，他对Node不再满意，并决定创建一个新的运行时<strong class="ma ir">来弥补它的“错误”和不足</strong>(并添加一些新功能)。</p><blockquote class="ln"><p id="f011" class="lo lp iq bd lq lr ls lt lu lv lw lx dk translated">那么，是不是应该忘记Node.js，开始学习Deno呢？</p></blockquote><p id="9891" class="pw-post-body-paragraph ly lz iq ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms lx ij bi translated">目前业内的观点是<strong class="ma ir"> Node.js不会很快消失</strong>，但是<strong class="ma ir"> Deno绝对是一项值得关注的技术</strong>。</p><h2 id="b4b4" class="mt kw iq bd kx mu mv dn lb mw mx dp lf mh my mz lh ml na nb lj mp nc nd ll ne bi translated"><strong class="ak">简单英语的JavaScript</strong></h2><p id="0d0e" class="pw-post-body-paragraph ly lz iq ma b mb nf jr md me ng ju mg mh nh mj mk ml ni mn mo mp nj mr ms lx ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae np" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ma ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="ma ir">！</strong></p></div></div>    
</body>
</html>
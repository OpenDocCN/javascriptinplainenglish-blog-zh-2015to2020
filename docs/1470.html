<html>
<head>
<title>Creating Accessible React Apps — Mouse Events and Other Things</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建可访问的React应用程序——鼠标事件和其他事情</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-accessible-react-apps-mouse-events-and-other-things-1753783efe8c?source=collection_archive---------5-----------------------#2020-03-19">https://javascript.plainenglish.io/creating-accessible-react-apps-mouse-events-and-other-things-1753783efe8c?source=collection_archive---------5-----------------------#2020-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/59ebafb14a4ee21932c921748c399f3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xT2Emc_8gqLxJYx2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rstone_design?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ryan Stone</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0cbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建前端视图的库。它有一个庞大的图书馆生态系统与之合作。此外，我们可以用它来增强现有的应用程序。</p><p id="01b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何创建可访问的React应用程序。</p><h1 id="48d9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">鼠标和指针事件</h1><p id="c72d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过鼠标或指针事件暴露的任何功能也应该可以单独使用键盘来访问。</p><p id="cdbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该在按钮上使用<code class="fe me mf mg mh b">onBlur</code>和<code class="fe me mf mg mh b">onFocus</code>，如果我们用它们来打开或关闭某些东西。</p><p id="3719" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="be9f" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = { open: false };<br/>  }</span><span id="9562" class="mq lc iq mh b gy mv ms l mt mu">  handleClick() {<br/>    this.setState({ open: true });<br/>  }</span><span id="d163" class="mq lc iq mh b gy mv ms l mt mu">  handleFocus() {<br/>    this.setState({ open: true });<br/>  }</span><span id="f160" class="mq lc iq mh b gy mv ms l mt mu">  handleBlur() {<br/>    setTimeout(() =&gt; {<br/>      this.setState({ open: false });<br/>    });<br/>  }</span><span id="bfc0" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>      &lt;div<br/>        onFocus={this.handleFocus.bind(this)}<br/>        onBlur={this.handleBlur.bind(this)}<br/>        aria-expanded={this.state.open}<br/>      &gt;<br/>        &lt;button onClick={this.handleClick.bind(this)}&gt;Menu&lt;/button&gt;<br/>        {this.state.open &amp;&amp; (<br/>          &lt;ul&gt;<br/>            &lt;li&gt;Apple&lt;/li&gt;<br/>            &lt;li&gt;Orange&lt;/li&gt;<br/>            &lt;li&gt;Mengo&lt;/li&gt;<br/>          &lt;/ul&gt;<br/>        )}<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="69f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们将模糊和焦点事件处理程序附加到包装器div。</p><p id="b870" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们还有<code class="fe me mf mg mh b">aria-expanded</code>属性来指示div是否有扩展菜单。</p><p id="3cfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们按tab键来聚焦按钮时，我们可以不用鼠标来切换菜单。这就是我们想要的，因为不是每个人都可以使用鼠标或其他定点设备。</p><h1 id="5fc8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更复杂的部件</h1><p id="732b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该加入HTML aria属性，这样React组件就可以访问我们的组件。</p><p id="9c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对于复杂的组件更为重要，因为它们有许多部件。</p><h1 id="ce33" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置语言</h1><p id="70cf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该设置页面的语言，以便屏幕阅读器软件可以使用它来设置正确的语音设置。</p><h1 id="d5a4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置文档标题</h1><p id="1f47" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">title</code>文本应该正确描述当前页面，以便用户了解页面的内容。</p><h1 id="79d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">色对比度</h1><p id="b597" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">元素应该有足够的对比度，这样视力不好的人也能读懂。</p><p id="e15c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过使用<a class="ae kc" href="https://jxnblk.github.io/colorable/" rel="noopener ugc nofollow" target="_blank">可着色</a>包来计算具有足够对比度的颜色组合。</p><h1 id="2ea4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">测试键盘</h1><p id="f846" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该测试是否所有东西都可以只用键盘导航。</p><p id="2f08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以按Tab和Shift+Tab分别向前和向后导航。</p><p id="7632" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该能够使用回车键来激活元素。</p><p id="c7e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">箭头键应该与菜单和下拉菜单一起工作。</p><h2 id="85d1" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated">eslint-plugin-jsx-a11y</h2><p id="caec" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ESLint有一个插件可以检查JSX代码中的可访问性问题。许多IDE都直接与此集成。</p><p id="9ea6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它是一个NPM软件包，因此我们可以通过运行以下命令来安装它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8b6d" class="mq lc iq mh b gy mr ms l mt mu">npm install eslint --save-dev</span></pre><p id="6fad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以安装这个包，并把下面的内容放到我们项目的<code class="fe me mf mg mh b">.eslintrc</code>文件中，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6eba" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "extends": ["react-app", "plugin:jsx-a11y/recommended"],<br/>  "plugins": ["jsx-a11y"]<br/>}</span></pre><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/edf2a2652505f9f76f5f540652512ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aqpNUJPmVNI_qjcR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thought Catalog</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0f6b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在浏览器中测试可访问性</h1><p id="8443" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用自动测试可访问性的<a class="ae kc" href="https://github.com/dequelabs/axe-core" rel="noopener ugc nofollow" target="_blank"> aXe-core </a>包来测试可访问性。</p><h1 id="b88a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">屏幕阅读器</h1><p id="14c0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">屏幕阅读器应该能够正确阅读页面。常见的屏幕阅读器包括NVDA、画外音和JAWS。</p><p id="19d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谷歌Chrome也有ChromeVox扩展。</p><h1 id="e5d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bb55" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让React应用变得可访问需要考虑很多方面。我们应该正确设置语言、标题和aria属性。</p><p id="f878" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，页面上的元素应该可以通过键盘访问。</p><p id="9fb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用ESLint插件和自动化测试工具来测试可访问性。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a reusable Pagination Web Component with Bootstrap 4 and LitElement</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Bootstrap 4和LitElement构建一个可重用的分页Web组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-reusable-pagination-web-component-with-bootstrap-4-and-litelement-63ff4eebda4b?source=collection_archive---------2-----------------------#2020-06-28">https://javascript.plainenglish.io/build-a-reusable-pagination-web-component-with-bootstrap-4-and-litelement-63ff4eebda4b?source=collection_archive---------2-----------------------#2020-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c8fc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用bootstrap、LitElement和ES6+的标准Web组件的简单实现</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6b424bcba20ddd192d8c6cd0e1e1026f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LeYBjLHr6kmYIoSx-aHdDA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image: Two monitors with no visible code.</figcaption></figure><p id="a0c4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最近在一个项目中，我不得不使用Bootstrap 4为我的清单使用分页器组件。因为我找不到一个基于Web组件的，所以我决定创建一个。</p><p id="fcc4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇总结性文章中，我将一步步向您展示如何基于Bootstrap 4 styles、LitElement和jQuery构建Web paginator组件。</p><p id="8cae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要阅读这篇文章，建议你具备基本的文学知识。在上一篇文章中，我写了一篇关于LitElement的介绍:“<a class="ae lr" href="http://How to create a lightweight web component with LitElement" rel="noopener ugc nofollow" target="_blank">如何用LitElement </a>创建轻量级web组件。”</p><h2 id="9f6e" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">要求</h2><p id="8fe8" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated"><strong class="kx ir"> LitElement: </strong> <em class="mq">一个简单的基类，用于创建快速轻量级的web组件。LitElement遵循</em> <a class="ae lr" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> Web组件标准</em> </a> <em class="mq">，因此您的组件将与任何框架一起工作。</em></p><p id="1f23" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://lit-element.polymer-project.org/" rel="noopener ugc nofollow" target="_blank">https://lit-element.polymer-project.org/</a></p><p id="7734" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> jQuery: </strong> <em class="mq"> jQuery是一个快速、小巧、功能丰富的JavaScript库。它通过一个跨多种浏览器工作的易于使用的API，使HTML文档遍历和操作、事件处理、动画和Ajax变得更加简单。</em></p><p id="5566" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://jquery.com/" rel="noopener ugc nofollow" target="_blank">https://jquery.com/</a></p><p id="0ce2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Bootstrap  : <em class="mq"> Bootstrap是一个免费的前端框架，用于更快更简单的web开发。我们需要自举4风格。</em></p><p id="28ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们开始:</p><h1 id="e453" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated">1.包括所有必要的依赖项</h1><h2 id="f957" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated"><strong class="ak">文件:Index.html</strong></h2><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="4199" class="ls lt iq nd b gy nh ni l nj nk"><strong class="nd ir">&lt;!doctype html&gt;</strong><br/>&lt;html class="no-js" lang=""&gt;</span><span id="e969" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;head&gt;</strong></span><span id="f5ca" class="ls lt iq nd b gy nl ni l nj nk">&lt;!-- <strong class="nd ir">Bootstrap CSS</strong> --&gt;<br/>&lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"&gt;</span><span id="acee" class="ls lt iq nd b gy nl ni l nj nk">&lt;!--<strong class="nd ir">Jquery</strong>--&gt;<br/>&lt;script src="<a class="ae lr" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js</a>" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="9c5a" class="ls lt iq nd b gy nl ni l nj nk">&lt;!--<strong class="nd ir">LitElement</strong>--&gt;<br/>&lt;script type="module"&gt;<br/> import { LitElement, html } from 'lit-element';<br/>&lt;/script&gt;</span><span id="a5fc" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/head&gt;</strong></span><span id="5fb6" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir"> &lt;body&gt;<br/>  ...<br/> &lt;/body&gt;</strong></span><span id="ee79" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/html&gt;</strong></span></pre><p id="075d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们定义一个名为<em class="mq"> ListComponent </em>的web组件，它将显示一个元素列表，我们将使用我们的<em class="mq">分页Web组件</em>对它的元素进行分页。</p><h2 id="486b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated"><strong class="ak">文件:ListComponent.js </strong></h2><ol class=""><li id="c736" class="nm nn iq kx b ky ml lb mm le no li np lm nq lq nr ns nt nu bi translated">导入LitElement依赖项。</li><li id="bc3a" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">导入我们的paginator组件。</li><li id="a686" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">创建ListComponent组件。</li><li id="7175" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">确保在任何声明的属性更改时计划元素更新。</li><li id="146b" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">在类的构造函数中初始化变量。</li><li id="4d44" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">引用包含所有元素的原始列表。</li><li id="be90" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">响应列表是每页上显示的列表。</li><li id="4697" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">如果我们正在初始化分页，一个帮助变量对分页器组件说。例如，如果我们向服务器发出一个新的调用，根据一些搜索字段给我们带来另一个新的列表，这是很有用的。</li><li id="8538" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">在元素的DOM第一次更新后，调用“firstUpdated”方法。</li><li id="f92d" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">我们要分页显示的列表。</li><li id="ae6c" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">基于const: PAGINATION_SIZE创建初始分页列表。</li><li id="9720" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">每当我们改变父列表中原始列表的内容时，我们都必须重新初始化分页器。</li><li id="94bf" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">订阅我们的“分页事件”从分页组件调用。</li><li id="6392" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">当使用分页器时，我们更新列表的内容以显示在父节点上。</li><li id="db16" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">呈现列表并包含我们的分页器组件。</li><li id="e618" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">将我们的分页器组件作为ListComponent的子组件。</li><li id="0e4d" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">通过这种方法，我们定义了一个新的定制元素。</li></ol><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="0781" class="ls lt iq nd b gy nh ni l nj nk">//1.<br/>import { LitElement , html} <br/> from '../web_modules/<br/> lit-element.js';</span><span id="a18b" class="ls lt iq nd b gy nl ni l nj nk">//2.<br/>import { PaginatorComponent } <br/> from <br/> './paginatorComponent.js';</span><span id="40de" class="ls lt iq nd b gy nl ni l nj nk">//3.<br/>export class ListComponent <br/> extends LitElement {</span><span id="4006" class="ls lt iq nd b gy nl ni l nj nk">//4.<br/>static get properties() {<br/>  return {<br/>   itemsPaginated: {type: Array}<br/>  };<br/>}</span><span id="32ac" class="ls lt iq nd b gy nl ni l nj nk">//5.<br/>constructor() {<br/> super();<br/> //6.<br/> this.responseList = [];<br/> //7. <br/> this.itemsPaginated = [];<br/> //8. <br/> this.initPagination = true;<br/>}</span><span id="be4c" class="ls lt iq nd b gy nl ni l nj nk">//9.<br/>firstUpdated() {</span><span id="c9bc" class="ls lt iq nd b gy nl ni l nj nk">//10.<br/>this.responseList = <br/>  [1,2,3,4,5,6,7,8,9<br/>   ,10,11,12,13,14,15];</span><span id="b367" class="ls lt iq nd b gy nl ni l nj nk">//11<br/>this.itemsPaginated = <br/>  this.responseList.slice(0,<br/>   PAGINATION_SIZE);</span><span id="e9b3" class="ls lt iq nd b gy nl ni l nj nk">//12.<br/>this.initPagination = <br/>   !this.initPagination</span><span id="aebd" class="ls lt iq nd b gy nl ni l nj nk">//13.<br/>this.addEventListener('page-event',  <br/>   this.updateFromPaginationComponent);<br/>}</span><span id="29f7" class="ls lt iq nd b gy nl ni l nj nk">//14.<br/>updateFromPaginationComponent(e) {<br/> this.itemsPaginated <br/>  =e.detail.newList;<br/> e.stopPropagation();<br/>}</span><span id="a4cf" class="ls lt iq nd b gy nl ni l nj nk">//15.<br/>render() {<br/> return html`<br/>  &lt;ul&gt;<br/>   ${this.itemsPaginated.map(<br/>   item =&gt; html`<br/>    &lt;li&gt;<br/>     ${item}<br/>    &lt;/li&gt;`<br/>    )}<br/>  &lt;/ul&gt;</span><span id="d70c" class="ls lt iq nd b gy nl ni l nj nk">//16. <br/> &lt;<strong class="nd ir">paginator</strong><br/>    .list = "${this.responseList}"<br/>    .initPagination = <br/>      "${this.initPagination}"<br/> &lt;/<strong class="nd ir">paginator</strong>&gt; <br/> `<br/> }<br/>}</span><span id="dc36" class="ls lt iq nd b gy nl ni l nj nk">//17.<br/>customElements<br/>  .define('list-component',<br/>  ListComponent);</span></pre><h1 id="54df" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated">2.创建分页器Web组件</h1><h2 id="d4c7" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated"><strong class="ak">文件:PaginatorComponent.js </strong></h2><ol class=""><li id="58ee" class="nm nn iq kx b ky ml lb mm le no li np lm nq lq nr ns nt nu bi translated">顶部的按钮数量，不包括上一页/下一页，<br/>但包括虚线按钮。</li><li id="70ce" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">限制每页的项目数。</li><li id="36d2" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">初始化我们的Web组件。</li><li id="da32" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">创建初始按钮和监听器。</li><li id="7ef8" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">管理分页链接和事件。</li><li id="7d45" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">DispatchEvent函数。</li><li id="c896" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">返回页码数组。</li><li id="1e05" class="nm nn iq kx b ky nv lb nw le nx li ny lm nz lq nr ns nt nu bi translated">“customElements.define”定义一个新的自定义元素。</li></ol><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="abb2" class="ls lt iq nd b gy nh ni l nj nk">import { html, LitElement}<br/> from './lit-element.js';</span><span id="790d" class="ls lt iq nd b gy nl ni l nj nk">//1.<br/>const PAGINATION_SIZE = 10;</span><span id="161f" class="ls lt iq nd b gy nl ni l nj nk">//2.<br/>const LIMIT_PER_PAGE =10;</span><span id="70a7" class="ls lt iq nd b gy nl ni l nj nk">export class <br/> PaginatorComponent<br/> extends LitElement {</span><span id="22e6" class="ls lt iq nd b gy nl ni l nj nk">    //3.</span><span id="6672" class="ls lt iq nd b gy nl ni l nj nk">    //4.</span><span id="4992" class="ls lt iq nd b gy nl ni l nj nk">    //5.</span><span id="5bf9" class="ls lt iq nd b gy nl ni l nj nk">    //6.</span><span id="10f5" class="ls lt iq nd b gy nl ni l nj nk">    //7.</span><span id="71e8" class="ls lt iq nd b gy nl ni l nj nk">render() {<br/>  return html`<br/>   &lt;nav aria-label="Page <br/>     navigation"&gt;<br/>     &lt;ul class="pagination mb-5" <br/>       id="pagination"&gt;<br/>     &lt;/ul&gt;<br/>  &lt;/nav&gt;<br/>  `<br/> }<br/>}</span><span id="8e5c" class="ls lt iq nd b gy nl ni l nj nk">//8.<br/>customElements<br/>.define('paginator', Paginator);</span></pre><h1 id="82ee" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated"><strong class="ak"> 3。</strong>初始化我们的Web组件</h1><p id="10c3" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">3.1如果要分页的列表发生变化，则对元素重新分页。</p><p id="c4f6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.2如果“initPagination”属性发生变化，那么我们将“currentPage”的值设置为1，因为原来的列表发生了变化，我们需要重新启动分页器。</p><p id="753b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">3.3我们在创建组件时初始化变量。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="9462" class="ls lt iq nd b gy nh ni l nj nk">static get properties() {<br/> return {<br/>   list: {<br/>    type: Array<br/>   },<br/>   initPagination:{type: Boolean}<br/>   };<br/>}</span><span id="5fd6" class="ls lt iq nd b gy nl ni l nj nk">//3.1<br/>set list(value) {<br/> if(value &amp;&amp; value.length &gt;0) {<br/>   this.originalListCopy = value;<br/>   this.paginate(value);<br/> }<br/>}</span><span id="8ea7" class="ls lt iq nd b gy nl ni l nj nk">//3.2<br/>set initPagination(value){<br/> this.currentPage = 1;<br/>}</span><span id="d9db" class="ls lt iq nd b gy nl ni l nj nk">//3.3<br/>constructor() {<br/>    super();<br/>    this.list = [];<br/>    this.originalListCopy = [];<br/>    this.currentPage = 1;<br/>}</span><span id="a2ec" class="ls lt iq nd b gy nl ni l nj nk">firstUpdated() {}</span></pre><h1 id="8dae" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated"><strong class="ak"> 4。</strong>创建初始按钮并添加监听器</h1><p id="db7c" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">创建初始按钮，并在我们的分页器中向它们添加侦听器:</p><p id="7f8a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.1总页数限制功能中的每页项数。向上舍入的总页数。</p><p id="8da1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.2添加“上一步”按钮。</p><p id="c9f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.3添加“下一步”按钮。</p><p id="819f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.4显示分页元素。</p><p id="cadf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">4.5向按钮添加监听器并使用事件委托，因为这些项目稍后会被重新创建。单击按钮时，重新加载pagination元素。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="ec91" class="ls lt iq nd b gy nh ni l nj nk">paginate(list) {<br/> $(() =&gt; {</span><span id="a249" class="ls lt iq nd b gy nl ni l nj nk"> let numberOfItems = <br/>  list ? list.length : 0;</span><span id="c4fb" class="ls lt iq nd b gy nl ni l nj nk"> //4.1<br/> let totalPages =<br/>  Math.ceil(numberOfItems <br/>    / LIMIT_PER_PAGE);</span><span id="ab99" class="ls lt iq nd b gy nl ni l nj nk"> //4.2 <br/> $(".pagination").append(<br/>    $("&lt;li&gt;")<br/>    .addClass("page-item")<br/>    .attr(<br/>    {id: "previous-page"})<br/>     .append(<br/>       $("&lt;a&gt;")<br/>       .addClass("page-link")<br/>       .attr({<br/>        href: "javascript:void(0)"<br/>       })<br/>      .text(this.t(Prev'))<br/>  ),</span><span id="3cb1" class="ls lt iq nd b gy nl ni l nj nk"> //4.3<br/> $("&lt;li&gt;")<br/>   .addClass("page-item")<br/>   .attr({id: "next-page"})<br/>   .append(<br/>    $("&lt;a&gt;")<br/>    .addClass("page-link")<br/>    .attr({<br/>    href: "javascript:void(0)"<br/>    })<br/>    .text(this.t('Next'))<br/>    )<br/> );</span><span id="ed4c" class="ls lt iq nd b gy nl ni l nj nk"> //4.4 <br/> this.showPage(this.currentPage, <br/>  totalPages, false);</span><span id="bf14" class="ls lt iq nd b gy nl ni l nj nk"> //4.5<br/> $('#previous-page')<br/>   .on("click",<br/>     (e) =&gt; {<br/>       e.stopImmediatePropagation();<br/>        return this.showPage(<br/>         this.currentPage -1,<br/>         totalPages, true);<br/> });</span><span id="9b37" class="ls lt iq nd b gy nl ni l nj nk"> $(document)<br/>   .on("click",<br/>    ".pagination li.current-page:not(.active)",<br/>    (e) =&gt;{<br/>      e.stopImmediatePropagation();<br/>      return this.showPage(<br/>        parseInt($(e.target).text()),   <br/>        totalPages, true);<br/> });</span><span id="6c9e" class="ls lt iq nd b gy nl ni l nj nk"> $('#next-page')<br/>  .on("click", (e) =&gt; {<br/>    e.stopImmediatePropagation();<br/>    return this.showPage(<br/>     this.currentPage <br/>     +1, totalPages, true);<br/>    });<br/>  });</span><span id="6929" class="ls lt iq nd b gy nl ni l nj nk">}</span></pre><h1 id="9faf" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated"><strong class="ak"> 5。</strong>管理分页链接和事件</h1><p id="66f3" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">5.1更换导航项目(上一页/下一页除外):</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="b370" class="ls lt iq nd b gy nh ni l nj nk">showPage(whichPage, totalPages, dispatchEvent) {</span><span id="3820" class="ls lt iq nd b gy nl ni l nj nk"> if (whichPage &lt; 1 ||<br/>  whichPage &gt; totalPages)<br/>    return false;</span><span id="b495" class="ls lt iq nd b gy nl ni l nj nk"> //5.1<br/> $(".pagination li")<br/>   .slice(1, -1).remove();</span><span id="d026" class="ls lt iq nd b gy nl ni l nj nk"> this.getPageList(totalPages,<br/>   whichPage,  <br/>   PAGINATION_SIZE).forEach(item =&gt; {</span><span id="ffa3" class="ls lt iq nd b gy nl ni l nj nk"> $("&lt;li&gt;")<br/>    .addClass(<br/>      "page-item " +<br/>      (item ? <br/>      "current-page " : "") +<br/>      (item === whichPage <br/>         ? "active " : "") <br/>    )<br/>    .append(<br/>      $("&lt;a&gt;")<br/>      .addClass("page-link")<br/>      .attr({<br/>        href: <br/>         "javascript:void(0)",<br/>      })<br/>      .attr({id: item})<br/>      .text(item || "...")<br/>      )<br/>    .insertBefore("#next-page");</span><span id="3e6f" class="ls lt iq nd b gy nl ni l nj nk">    this.currentPage=whichPage;<br/>      if(dispatchEvent === true <br/>          &amp;&amp; whichPage === item){<br/>        this.dispatchEvent();<br/>      }<br/>   });</span><span id="68d7" class="ls lt iq nd b gy nl ni l nj nk">return true;</span><span id="9671" class="ls lt iq nd b gy nl ni l nj nk">}</span></pre><h1 id="73c4" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated"><strong class="ak"> 6。D </strong> ispatchEvent函数</h1><p id="3b7c" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">6.1将事件分派给父亲，新列表将显示在主组件(ListComponent)中。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="604e" class="ls lt iq nd b gy nh ni l nj nk">dispatchEvent() {<br/> let newList = <br/>   this.originalListCopy.slice(<br/>    (this.currentPage - 1) *   <br/>     LIMIT_PER_PAGE,<br/>     this.currentPage <br/>     * LIMIT_PER_PAGE<br/>   );</span><span id="c32a" class="ls lt iq nd b gy nl ni l nj nk"> let myEvent =<br/>   new CustomEvent('pag-event',<br/>   { bubbles: true,<br/>     composed: false ,<br/>     detail: {<br/>      newList: newList<br/>   }});</span><span id="935e" class="ls lt iq nd b gy nl ni l nj nk"> //6.1<br/> this.dispatchEvent(myEvent)<br/>}</span></pre><h1 id="215a" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated"><strong class="ak"> 7。</strong>返回页码数组</h1><p id="a461" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">返回maxLength(或更少)页码的数组，其中返回的数组中的0表示系列中的间隔。</p><p id="9879" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">7.1参数:</p><p id="a8ba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">totalPages:总页数。<br/>页面:当前页面。<br/> maxLength:返回数组的最大大小。</p><p id="5e1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">7.2列表中没有中断。</p><p id="20ce" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">7.3页面左侧无分隔符。</p><p id="81da" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">7.4页面右侧无分隔符</p><p id="6527" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">两边7.5断。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="8468" class="ls lt iq nd b gy nh ni l nj nk">//7.1<br/>getPageList(totalPages, page, maxLength) {</span><span id="2160" class="ls lt iq nd b gy nl ni l nj nk">if (maxLength<br/>  &lt; MINIMUN_MAX_LENGTH)<br/>  throw "maxLength must be at least:"<br/>  +MINIMUN_MAX_LENGTH;</span><span id="3a82" class="ls lt iq nd b gy nl ni l nj nk">function range(start, end) {<br/>  return Array.<br/>    from(Array(end - start + 1),<br/>    (_, i) =&gt; i + start);<br/>}</span><span id="0adc" class="ls lt iq nd b gy nl ni l nj nk">let sideWidth =<br/>  maxLength &lt; PAGINATION_SIZE -1 ? 1 : 2;</span><span id="4b8a" class="ls lt iq nd b gy nl ni l nj nk">let leftWidth = (maxLength <br/>  - sideWidth * 2 - 3) &gt;&gt; 1;</span><span id="9ce0" class="ls lt iq nd b gy nl ni l nj nk">let rightWidth = (maxLength <br/>  - sideWidth * 2 - 2) &gt;&gt; 1;</span><span id="24bb" class="ls lt iq nd b gy nl ni l nj nk">//7.2<br/>if (totalPages &lt;= maxLength) { <br/>  return range(1, totalPages);<br/>}</span><span id="071e" class="ls lt iq nd b gy nl ni l nj nk">//7.3<br/>if (page &lt;= maxLength -<br/>     sideWidth - 1 - rightWidth) {</span><span id="f176" class="ls lt iq nd b gy nl ni l nj nk">return range(1, maxLength <br/>      - sideWidth - 1)<br/>    .concat([0])<br/>    .concat(range(totalPages <br/>     - sideWidth <br/>    + 1, totalPages));<br/>}</span><span id="e7fe" class="ls lt iq nd b gy nl ni l nj nk">//7.4<br/>if (page &gt;= totalPages - <br/>    sideWidth - 1 - rightWidth) {</span><span id="1b51" class="ls lt iq nd b gy nl ni l nj nk">return range(1, sideWidth)<br/>      .concat([0])<br/>      .concat(<br/>        range(totalPages <br/>         - sideWidth<br/>         - 1 - rightWidth - <br/>         leftWidth, totalPages)<br/>      );<br/>    }</span><span id="1c0e" class="ls lt iq nd b gy nl ni l nj nk"> //7.5<br/> range(1, sideWidth)<br/> .concat([0])<br/> .concat(range(page - <br/>     leftWidth, page +<br/>     rightWidth))<br/> .concat([0])<br/> .concat(range(totalPages <br/>     - sideWidth + 1,<br/> totalPages));<br/>}</span></pre><p id="62e8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最终代码包括所有内容:</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="21e1" class="ls lt iq nd b gy nh ni l nj nk"><strong class="nd ir">&lt;!doctype html&gt;</strong><br/>&lt;html class="no-js" lang=""&gt;</span><span id="81a1" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;head&gt;</strong></span><span id="4e05" class="ls lt iq nd b gy nl ni l nj nk">&lt;!-- <strong class="nd ir">Bootstrap CSS</strong> --&gt;<br/>&lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"&gt;</span><span id="c88f" class="ls lt iq nd b gy nl ni l nj nk">&lt;!--<strong class="nd ir">Jquery</strong>--&gt;<br/>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"&gt;&lt;/script&gt;</span><span id="2558" class="ls lt iq nd b gy nl ni l nj nk">&lt;!--<strong class="nd ir">LitElement</strong>--&gt;<br/>&lt;script type="module"&gt;<br/> import { LitElement, html } from 'lit-element';<br/>&lt;/script&gt;</span><span id="9ca3" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/head&gt;</strong></span><span id="43d5" class="ls lt iq nd b gy nl ni l nj nk">&lt;body&gt;</span><span id="db56" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">//Our list component with the paginator component inside of it.<br/>  &lt;list-component&gt;&lt;/list-component&gt;</strong></span><span id="771b" class="ls lt iq nd b gy nl ni l nj nk">&lt;script type="module"&gt;<br/>    import {<br/>     ListComponent from './listComponent.js'  <br/>  &lt;/script&gt;</span><span id="fdb5" class="ls lt iq nd b gy nl ni l nj nk">&lt;/body&gt;</span><span id="3387" class="ls lt iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/html&gt;</strong></span></pre><p id="974c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Web浏览器中显示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/b62b17251cacb053226f9e89f6100267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSaWhIFOQ5Odva_SX0IW1Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The paginated list. Page 1</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/3251bf076bbe63c76f1ebce43d45ebdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*biRT81_29GoOtgX7wmmWGQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The paginated list. Page 2</figcaption></figure><h1 id="2029" class="mr lt iq bd lu ms mt mu lx mv mw mx ma jw my jx md jz mz ka mg kc na kd mj nb bi translated">结论</h1><p id="da33" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">在本文中，我们看到了一个简单的例子，展示了如何构建用于分页的web组件，如果您需要使用Web组件和bootstrap创建分页器，这个例子可以作为一个例子。</p><p id="5339" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">非常感谢您阅读这篇小文章。我希望它对你有用！</p><h2 id="5646" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">参考</h2><p id="5a88" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated"><a class="ae lr" href="https://codepen.io/kshoeb/pen/NQboaL" rel="noopener ugc nofollow" target="_blank">https://codepen.io/kshoeb/pen/NQboaL</a></p></div></div>    
</body>
</html>
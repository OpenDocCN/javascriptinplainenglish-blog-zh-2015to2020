<html>
<head>
<title>File Input Using Ionic Action Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用离子动作表的文件输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/file-input-using-ionic-action-sheet-3d9a71d3165c?source=collection_archive---------4-----------------------#2020-05-13">https://javascript.plainenglish.io/file-input-using-ionic-action-sheet-3d9a71d3165c?source=collection_archive---------4-----------------------#2020-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a4e1cfc0183e86070330094dff59e91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWNE04xW19oS8FkU7W40RQ.png"/></div></div></figure><div class=""/><p id="d2bf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Ionic 5中利用动作表组件的文件输入元素的几种方法。</p><p id="88b5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Ionic Framework 拥有一些最漂亮的UI组件。最近，我想在Ionic 5 / Angular 9 web应用程序中实现文件输入功能。从UX的角度来看，我真的想利用<a class="ae kw" href="https://ionicframework.com/docs/api/action-sheet" rel="noopener ugc nofollow" target="_blank">行动表</a>按钮，其中一个文件输入选项是从用户的设备上传。</p><p id="19f8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">问题是Action Sheet Controller只提供带有处理程序的标准按钮，我没有直接的方法向它添加文件输入元素。</p><h1 id="a9f6" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">方法1:打电话。以编程方式单击不可见输入上的()</h1><p id="4deb" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我立即想到的一个方法是:</p><ul class=""><li id="cd14" class="ma mb jb ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">在我的html模板中创建“不可见”的输入元素:</li></ul><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="mn mo l"/></div></figure><ul class=""><li id="d498" class="ma mb jb ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">创建绑定到它的ViewChild并获取输入的ElementRef.nativeElement:</li><li id="1357" class="ma mb jb ka b kb mp kf mq kj mr kn ms kr mt kv mf mg mh mi bi translated">然后在动作表按钮处理程序中调用inputElement.click()方法:</li></ul><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="3423" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种方法似乎是可行的，但我面临的问题是在一些浏览器中是程序化的。click()没有触发，我无法获得实际的图像文件(Opera和Firefox)。此外，这可能是一些移动浏览器的问题。</p><p id="294a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">似乎element.click()应该总是从用户操作上下文中触发。</p><p id="820d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我试着用不同的方式解决它:</p><h1 id="629f" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">方法#2:在动作表创建过程中动态创建输入元素</h1><p id="47f8" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在高层次上，这种方法如下:</p><ul class=""><li id="aaef" class="ma mb jb ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">创建新输入元素作为动作表控制器创建动作表元素工作的一部分</li><li id="2ebe" class="ma mb jb ka b kb mp kf mq kj mr kn ms kr mt kv mf mg mh mi bi translated">一旦创建了包含所有按钮的action sheet元素，我们就将input元素附加到正在讨论的按钮上</li><li id="2596" class="ma mb jb ka b kb mp kf mq kj mr kn ms kr mt kv mf mg mh mi bi translated">我们对输入进行了设计，使得它的z-index更优越，它首先捕获用户点击，然后事件传播并自然关闭动作表。</li><li id="26b7" class="ma mb jb ka b kb mp kf mq kj mr kn ms kr mt kv mf mg mh mi bi translated">我们将事件的处理路由到另一个方法</li><li id="3622" class="ma mb jb ka b kb mp kf mq kj mr kn ms kr mt kv mf mg mh mi bi translated">最后，我们去掉了事件监听器</li></ul><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="4024" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，input元素由实际的用户操作触发，我们可以毫无问题地处理event.target.files。它不太“干净”,涉及到DOM操作，但是完成了工作。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="af92" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总之，我觉得在未来的动作表应该以输入文件类型“按钮”为特色，但同时有办法绕过它也是好的。</p><p id="1b7a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢您的阅读，祝大家安全快乐！</p><h2 id="7e2f" class="nb ky jb bd kz nc nd dn ld ne nf dp lh kj ng nh ll kn ni nj lp kr nk nl lt nm bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="853b" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc">订阅我们的YouTube频道</strong> </a> <strong class="ka jc">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
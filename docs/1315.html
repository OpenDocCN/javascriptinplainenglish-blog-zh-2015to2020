<html>
<head>
<title>Rxjs Filtering Operators — Getting Specific Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rxjs过滤运算符—获取特定值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/rxjs-filtering-operators-getting-specific-values-9e790ee729a2?source=collection_archive---------0-----------------------#2020-02-29">https://javascript.plainenglish.io/rxjs-filtering-operators-getting-specific-values-9e790ee729a2?source=collection_archive---------0-----------------------#2020-02-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/846eb3afae745cf2464f584170f9547b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jkbmlnG3jyD9GTOy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@joel_herzog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">joel herzog</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2a20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Rxjs是一个用于进行反应式编程的库。创建操作符对于从各种数据源生成供观察者订阅的数据非常有用。</p><p id="5b21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些过滤操作符，包括<code class="fe lb lc ld le b">elementsAt</code>、<code class="fe lb lc ld le b">filter</code>、<code class="fe lb lc ld le b">first</code>、<code class="fe lb lc ld le b">ignoreElements</code>和<code class="fe lb lc ld le b">last</code>。</p><h1 id="d2af" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">元素At</h1><p id="bf1e" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">elementAt</code>运算符让我们在可观测源的一系列发射中的指定<code class="fe lb lc ld le b">index</code>处获得一个单一值。</p><p id="1efb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它最多需要两个参数。第一个是<code class="fe lb lc ld le b">index</code>，它是从0开始的数字，是源可观察对象从订阅开始发出的。</p><p id="6263" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个是<code class="fe lb lc ld le b">defaultValue</code>，它是一个可选参数，如果没有找到给定索引的值，则返回默认值。</p><p id="c745" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个可观察对象，如果找到它，它会发出一个单独的项目。否则，将发出由可选的第二个参数提供的默认值。</p><p id="0ff5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果提供的<code class="fe lb lc ld le b">index</code>小于0，或者在发出给定<code class="fe lb lc ld le b">index</code>的发射之前，可观测值已经完成，将抛出<code class="fe lb lc ld le b">ArgumentOutOfRangeError</code>。</p><p id="bfd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="645b" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { elementAt } from "rxjs/operators";</span><span id="9a27" class="mq lg iq le b gy mv ms l mt mu">const of$ = of(1, 2, 3);<br/>const result = of$.pipe(elementAt(2));<br/>result.subscribe(x =&gt; console.log(x));</span></pre><p id="25b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe lb lc ld le b">console.log</code>得到3。</p><h1 id="be03" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">过滤器</h1><p id="90aa" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">filter</code>操作符通过从满足谓词函数返回的条件的源可观察对象中发出值，让我们过滤掉从源可观察对象中发出的值。</p><p id="3958" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它最多需要两个参数。第一个是<code class="fe lb lc ld le b">predicate</code>函数，它在源可观察对象每次发出一个值时被评估。根据这个值进行检查，如果它符合标准，则由返回的Observe发出。</p><p id="9c89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">predicate</code>函数有两个参数，分别是源可观测物体和<code class="fe lb lc ld le b">index</code>发射的物体。<code class="fe lb lc ld le b">index</code>从0开始，是订阅以来发出的第<code class="fe lb lc ld le b">index</code>个对象。</p><p id="bdf0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="8f79" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { filter } from "rxjs/operators";</span><span id="098b" class="mq lg iq le b gy mv ms l mt mu">const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(filter(x =&gt; x % 2 === 0));<br/>result.subscribe(x =&gt; console.log(x));</span></pre><p id="9900" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="3099" class="mq lg iq le b gy mr ms l mt mu">2<br/>4<br/>6</span></pre><h1 id="8006" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第一</h1><p id="8f3d" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">first</code>操作符仅发出由源可观察对象发出的第一个值。</p><p id="603c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有两个可选参数。第一个是<code class="fe lb lc ld le b">predicate</code>函数，每个条目都调用它来测试条件匹配。</p><p id="a0de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个是默认值，可选。这是在从源中找不到有效值的情况下发出的默认值。</p><p id="9f65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="01fc" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { first } from "rxjs/operators";</span><span id="3eb9" class="mq lg iq le b gy mv ms l mt mu">const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(first());<br/>result.subscribe(x =&gt; console.log(x));</span></pre><p id="2450" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码从<code class="fe lb lc ld le b">of$</code>可观测值中获取值并发出第一个值，所以我们从<code class="fe lb lc ld le b">console.log</code>中得到1。</p><p id="2036" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以传入一个函数来检查来自源可观察对象的匹配。例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="540d" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { first } from "rxjs/operators";</span><span id="8a2d" class="mq lg iq le b gy mv ms l mt mu">const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(first(x =&gt; x % 3 === 0));<br/>result.subscribe(x =&gt; console.log(x));</span></pre><p id="679b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们将<code class="fe lb lc ld le b">x =&gt; x % 3 === 0</code>传递给了<code class="fe lb lc ld le b">first</code>操作符，<code class="fe lb lc ld le b">first</code>将检查第一个匹配我们条件的操作符，它是一个能被3整除的数。</p><p id="2b4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe lb lc ld le b">console.log</code>得到值3，因为这是第一个符合条件的<code class="fe lb lc ld le b">of$</code>数。</p><p id="0186" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以传入一个默认值作为<code class="fe lb lc ld le b">first</code>的第二个参数:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="641a" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { first } from "rxjs/operators";<br/>const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(first(x =&gt; x % 3 === 10, "none"));<br/>result.subscribe(x =&gt; console.log(x));</span></pre><p id="5564" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为在<code class="fe lb lc ld le b">of$</code>中没有一个数在除以3后还有余数10，所以<code class="fe lb lc ld le b">'none'</code>字符串将由返回的可观测值发出。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/121904dbf830092252ae4a56f9279492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-DLiClkY695hHZbg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@peterlaster?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pedro Lastra</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="05c8" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ignoreElements</h1><p id="011a" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">ignoreElements</code>忽略源可观察对象发出的所有项目，只传递对<code class="fe lb lc ld le b">complete</code>或<code class="fe lb lc ld le b">error</code>的调用。</p><p id="fe26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这不需要争论。</p><p id="f611" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="2548" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { ignoreElements } from "rxjs/operators";<br/>const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(ignoreElements());<br/>result.subscribe(<br/>  val =&gt; console.log(val),<br/>  err =&gt; console.log(err),<br/>  () =&gt; console.log("end")<br/>);</span></pre><p id="93b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为在完成之前没有从<code class="fe lb lc ld le b">of$</code>可观察到的东西发出，所以我们只记录了<code class="fe lb lc ld le b">'end'</code>。</p><h1 id="ab24" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">最后的</h1><p id="7379" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">last</code>操作符返回一个可观察对象，它只发出源可观察对象发出的最后一项。如果一个<code class="fe lb lc ld le b">predicate</code>函数被传入<code class="fe lb lc ld le b">last</code>，那么与<code class="fe lb lc ld le b">predicate</code>返回的条件相匹配的最后一个值将被发出。</p><p id="8ba8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有两个可选参数。第一个是<code class="fe lb lc ld le b">predicate</code>，可选。<code class="fe lb lc ld le b">predicate</code>返回信号源发射值必须满足的条件。</p><p id="4603" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个是<code class="fe lb lc ld le b">defaultValue</code>的可选参数，如果从源可观测对象发出的任何东西都不满足<code class="fe lb lc ld le b">predicate</code>函数返回的条件，那么将发出这个值。</p><p id="6ef9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下使用它:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="15a1" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { last } from "rxjs/operators";<br/>const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(last());<br/>result.subscribe(val =&gt; console.log(val));</span></pre><p id="39d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们记录6，因为它是由<code class="fe lb lc ld le b">of$</code>可观测值发出的最后一个值。</p><p id="3596" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以指定如下条件:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="07e3" class="mq lg iq le b gy mr ms l mt mu">import { of } from "rxjs";<br/>import { last } from "rxjs/operators";<br/>const of$ = of(1, 2, 3, 4, 5, 6);<br/>const result = of$.pipe(last(x =&gt; x % 2 === 1));<br/>result.subscribe(val =&gt; console.log(val));</span></pre><p id="63e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们记录5，因为它是来自奇数的<code class="fe lb lc ld le b">of$</code>可观察值的最后一个值。</p><p id="7333" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">elementAt</code>运算符让我们在指定的<code class="fe lb lc ld le b">index</code>从可观测源的一系列发射中获得单个值。</p><p id="849f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">filter</code>操作符只从满足谓词函数返回的条件的源可观察对象中发出值。</p><p id="7696" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">first</code>运算符仅发出可观测源发出的第一个值。</p><p id="e0bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">ignoreElements</code>并且只传递<code class="fe lb lc ld le b">complete</code>或<code class="fe lb lc ld le b">error</code>的呼叫，而忽略其他一切。</p><p id="ae90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">last</code>返回一个可观察对象，该可观察对象只发出源可观察对象发出的最后一项，或者是满足谓词函数中条件的最后一项(如果指定的话)。</p></div></div>    
</body>
</html>
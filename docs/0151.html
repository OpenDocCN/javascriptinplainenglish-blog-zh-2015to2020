<html>
<head>
<title>Why you should use an object, and not an array, for lists in Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么在Redux中应该对列表使用对象而不是数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/https-medium-com-javascript-in-plain-english-why-you-should-use-an-object-not-an-array-for-lists-bee4a1fbc8bd?source=collection_archive---------0-----------------------#2019-05-19">https://javascript.plainenglish.io/https-medium-com-javascript-in-plain-english-why-you-should-use-an-object-not-an-array-for-lists-bee4a1fbc8bd?source=collection_archive---------0-----------------------#2019-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/533825f41349177968ef21411f3f4b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QcAh45dlS_pwW6wvoS7JOQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/photos/0nI1DczRQAM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ilija Boshkov</a> on <a class="ae jd" href="https://unsplash.com/search/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="a087" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">这同样适用于任何状态管理工具</h2></div><p id="ada6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你正在开发一个应用程序，你可能会用到一系列的条目:用户、评论、帖子、待办事项、电影等等。</p><p id="fb91" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Javascript中最常见的列表数据结构是数组。</p><p id="0483" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我想解释为什么在状态管理工具(如Redux或React Context)中存储这些列表时，这可能不是最佳选择。</p><h1 id="a601" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">C[RUD]对单一项目的操作</h1><p id="45df" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">如果您想对单个项目进行RUD(读取、更新或删除)操作，您总是需要迭代。</p><p id="8a25" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了创建之外，您只需要将项目添加到列表中。</p><h2 id="8a8d" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">阅读</h2><p id="fb43" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">如果您使用数组，您需要通过过滤找到该项。当你有一个对象时，你只需要你用作键的标识符。</p><h2 id="203d" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">更新</h2><p id="ea22" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">使用数组时，最快的方法是映射并更改您想要更改的数组。对于对象，只需设置指向更新项的属性。</p><h2 id="3c48" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">删除</h2><p id="276d" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">数组的过滤器。只需删除一个对象键。</p><h1 id="5b4d" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">从API获取</h1><p id="6b6e" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">这就是使用对象优于使用数组的地方。</p><p id="bf07" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您的项目来自后端时，您需要获取它们。当你两次取同一个物品时会发生什么？还是同一个单子两次？或者有一些重复和一些新项目的列表？</p><p id="b83c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你使用一个数组，你需要确保没有重复的项目。你需要处理这种情况。这意味着增加更多的复杂性。</p><p id="33c9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">向一个对象添加同一个项目两次怎么样？</p><p id="26e7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">无事可做。这些项目按键存储。在一个对象中，同一个键不能出现两次。您只能用已经处于该状态的项目来替换提取的项目。</p><h1 id="9569" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">何时不使用对象</h1><p id="7733" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">如果你没有一个唯一的标识符。或者您希望在不使用额外属性的情况下保持订单。</p><h1 id="a0e9" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">代码示例</h1><p id="139c" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们来看一些代码示例。下面的代码示例仅代表上述操作。他们不是redux reducers或其他类型的状态创建者。它们只是一些片段，以便更好地理解我上面提出的观点。</p><p id="36bf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们有一个评论列表。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="ffc4" class="mo ls jg nf b gy nj nk l nl nm">// array<br/>const comments = [<br/>  { id: '1', text: 'add code examples' },<br/>  { id: '2', text: 'examples would be great for this article' },<br/>  { id: '3', text: 'hi there' },<br/>];</span><span id="b451" class="mo ls jg nf b gy nn nk l nl nm">// object<br/>const comments = {<br/>  '1': { id: '1', text: 'please add code examples' },<br/>  '2': { id: '2', text: 'examples would be great for this article' },<br/>  '3': { id: '3', text: 'hi there' },<br/>};</span></pre><h2 id="f9a2" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">阅读评论id 2</h2><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="8363" class="mo ls jg nf b gy nj nk l nl nm">const commentId = '2';</span><span id="bd53" class="mo ls jg nf b gy nn nk l nl nm">// array<br/>comments.find((comment) =&gt; comment.id === commentId)</span><span id="5b55" class="mo ls jg nf b gy nn nk l nl nm">// object<br/>comments[commentId];</span></pre><h2 id="1c66" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">更新注释id 1</h2><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="2b76" class="mo ls jg nf b gy nj nk l nl nm">const updatedComment = { id: '1', text: 'add code examples, please' };</span><span id="3647" class="mo ls jg nf b gy nn nk l nl nm">// array<br/>comments.map((comment) =&gt; {<br/>  if (comment.id === updatedComment.id) {<br/>    return updatedComment;<br/>  }<br/>  return comment;<br/>});</span><span id="b4c0" class="mo ls jg nf b gy nn nk l nl nm">// object<br/>comments[updatedComment.id] = updatedComment;</span></pre><h2 id="17e1" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">删除注释id 3</h2><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="42e1" class="mo ls jg nf b gy nj nk l nl nm">const commentId = '3';</span><span id="b166" class="mo ls jg nf b gy nn nk l nl nm">// array<br/>comments.filter((comment) =&gt; comment.id !== commentId);</span><span id="3db1" class="mo ls jg nf b gy nn nk l nl nm">// object<br/>delete comments[commentId];</span></pre><h2 id="f9db" class="mo ls jg bd lt mp mq dn lx mr ms dp mb le mt mu md li mv mw mf lm mx my mh mz bi translated">添加新评论</h2><p id="252d" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我们必须假设我们不知道它是否已经存在</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="ca3a" class="mo ls jg nf b gy nj nk l nl nm">const newComment = { id: '4', text: 'thanks for the code examples!' };</span><span id="a383" class="mo ls jg nf b gy nn nk l nl nm">// array<br/>if (comments.find((comment) =&gt; comment.id === newComment.id) {<br/>  comments = comments.map((comment) =&gt; {<br/>    if (comment.id === newComment.id) {<br/>      return newComment;<br/>    }<br/>    return comment;<br/>  });<br/>} else {<br/>  comments = comments.concat([newComment]);<br/>}</span><span id="f0f6" class="mo ls jg nf b gy nn nk l nl nm">// object<br/>comments[newComment.id] = newComment;</span></pre><h1 id="11c2" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">如果您的代码中需要一个数组呢？</h1><p id="0eaf" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">有时，您可能会发现对项目列表使用数组更容易。例如，当您呈现列表时。拥有一个数组、使用一个映射并在每次迭代中创建元素更容易。</p><p id="a017" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这有一个简单的解决方案。不要直接访问状态，而是使用函数。也就是通常所说的选择器T1。</p><p id="96ab" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">选择器是一个获取某种状态并返回您需要的数据的函数。通常是您想要的模式或结构。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="1c7a" class="mo ls jg nf b gy nj nk l nl nm">// object<br/>const comments = {<br/>  '1': { id: '1', text: 'please add code examples' },<br/>  '2': { id: '2', text: 'examples would be great for this article' },<br/>  '3': { id: '3', text: 'hi there' },<br/>};</span><span id="6c9a" class="mo ls jg nf b gy nn nk l nl nm">// transform to array<br/>const commentsSelector = (commentsObj) =&gt; {<br/>  return Object.keys(commentsObj)<br/>    .map((commentKey) =&gt; commentsObj[commentKey]);<br/>};</span><span id="fee1" class="mo ls jg nf b gy nn nk l nl nm">// usage of the selector<br/>const commentsArray = commentsSelector(comments);</span></pre><h1 id="c113" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">结论</h1><p id="ac2c" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">使用一个对象将为你未来的自己节省一些时间和错误。帮她/他一个忙，用一个对象存储一个项目列表。</p><p id="be7f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">即使作为初学者，我也建议您使用对象而不是数组来存储项目列表。奋斗终有回报。正如大多数斗争一样:)</p><p id="b6ac" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更多关于状态形状的最佳实践，请参见<a class="ae jd" href="https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape" rel="noopener ugc nofollow" target="_blank"> Redux关于规范化的文档</a>。</p><p id="2572" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢您的阅读。我很想在评论中听到你的想法。</p><p id="1efe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你喜欢这篇文章，考虑加入我在<a class="ae jd" href="https://www.gimtec.io/" rel="noopener ugc nofollow" target="_blank"> GIMTEC </a>的时事通讯。</p><div class="ip iq gp gr ir no"><a href="https://www.gimtec.io/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jh gy z fp nt fr fs nu fu fw jf bi translated">GIMTEC</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">训练营后教育。我希望在我完成训练营时就拥有的每周时事通讯和课程。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.gimtec.io</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ix no"/></div></div></a></div></div></div>    
</body>
</html>
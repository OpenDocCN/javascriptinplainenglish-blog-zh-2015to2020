# 重构太迟是如何扼杀你的生产力的

> 原文：<https://javascript.plainenglish.io/how-refactoring-too-late-is-killing-your-productivity-ce10e2e636cd?source=collection_archive---------4----------------------->

![](img/54093971c38ea04b3581e6bb1a4b8792.png)

Prevent your code from exploding. Photo by [Yosh Ginsu](https://unsplash.com/@yoshginsu?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/disaster?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

重构被定义为在不改变代码外部行为的情况下重构代码的过程。这样做是为了降低软件的复杂性，提高软件的可维护性。开发人员常常意识到他们的代码不可维护，但为时已晚，这主要是因为他们忽略了草率编码的危险，这种编码通常会导致灾难性的痛苦经历。

想象一下，你已经写了几个星期的代码，你觉得你的新标签切换器终于要出来了。您的单元测试正在变绿，您可以在空气中闻到部署到生产的气味。你只差一个 *git merge* 就要收工了。

你推开门离开办公室，却发现了一个令人痛苦的事实:你的标签切换器破坏了制作，因为它的设计不能同时处理六个以上的标签。当你突然意识到三分之二的代码只是混合良好的意大利面条(npm 库构成了其余部分)时，恐慌模式就开始了。事实上，如果不完全重写您之前非常乐意部署的代码，您就无法修复这场大屠杀。

这个故事的寓意是:你的第一份草稿往往是你最草率的草稿，你忽略了频繁重构的重要性。

# 立即修复您的代码

不是每个人都能写出经得起时间考验的软件。这很难，主要是因为你永远不能确定你做得很好，直到你实际上不得不自己维护或调试代码。

为了从一开始就编写结构良好的代码，您需要事先了解关于该特性的每一个细节。然而，众所周知，在开发过程中，需求经常会发生很大的变化。

你能给自己和同事的最好礼物之一就是我喜欢称之为**的及时** ( **JIT)重构。这个想法很简单。假设您正在新的选项卡切换器中切换选项卡。请遵循以下步骤:**

1.  让它工作。
2.  考虑重构。

简单吧？

一些开发人员认为重构是修复和改进遗留代码库中的代码。不对。不对。不对。现在修复你的代码，你最终会在将来不再需要重构。

您的代码的第一稿很少是结构良好的，您将经常需要重新迭代以使代码可接受。注意，一旦你的特性完成，你应该考虑重构，但是你也应该考虑它是否真的需要，因为你可能会过度工程化和过度抽象简单的事情。

# 知道用 3r 重构什么

并非所有代码都需要重构。知道要重构什么需要实践，但是您可以通过考虑代码的以下属性，采取系统的方法来帮助您做出决策:

*   **可读性**:如果你浏览代码，它是否充满了没有人会理解的三元运算符或嵌套条件的一行程序？如果是这样，它可能不容易阅读，需要重构。
*   **重复性**:重复性是一个真正的生产力杀手，主要是因为当需求变化或者一个 bug 出现时，你需要花时间在不止一个地方调整代码。在这种情况下，考虑将重复的代码提取到一个方法中。
*   **可重用性**:你写的代码能在其他地方或被团队中的其他开发人员轻松重用吗？你能通过对代码做一些小的调整来使它变得可重用吗？如果是这样，重构是显而易见的，因为它会比你意识到的更多地提高你的团队的生产力。

当然，代码质量比 3r 更重要，但是仅仅考虑它就会迫使你尽早改进代码结构，这反过来会增加你和你的团队的速度。

下一次当你完成一个特性时，想想用 3Rs 进行 JIT 重构。你不仅会改善你的同事和你的软件用户的生活，还会把你自己从灾难中拯救出来。
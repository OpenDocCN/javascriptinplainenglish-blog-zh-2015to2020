<html>
<head>
<title>How to use CSS and React to create a star rating</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用CSS和React创建星级</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-css-and-react-to-create-a-star-rating-5bfc85882b1b?source=collection_archive---------8-----------------------#2020-12-29">https://javascript.plainenglish.io/how-to-use-css-and-react-to-create-a-star-rating-5bfc85882b1b?source=collection_archive---------8-----------------------#2020-12-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/74526705b20f536ce66d0cd9d40c3dc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LD6d0jJFP5IIh156_bNoGA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@anna_tukhfatullina?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Anna Tukhfatullina Food Photographer/Stylist</a> on <a class="ae jz" href="https://unsplash.com/s/photos/star-rating?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="09d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">作为个人项目的一部分，我正在开发一个页面，用户可以在上面添加关于他们尝试过的啤酒的新帖子。在新帖子的表单中，我添加了通过星级来评定啤酒的选项。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/33a47b722d0e0ebb3f1eb3892c7cbc4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*rLa-Q5J8HYKjsarBPL2JzA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Star Rating</figcaption></figure><p id="6f17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">星星最初都是灰色的。当用户点击一颗星星时，啤酒的等级就设定好了。您可以自定义未选中或选中的星星的颜色。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><h2 id="d4f2" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">反应JSX明星图标</h2><p id="7b9e" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">表单组件包含star rating部分，该部分有一个带有文本<code class="fe md me mf mg b">Rating</code>的<code class="fe md me mf mg b">p</code>元素和5种字体的Awesome填充的星形图标。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="mh le l"/></div></figure><h2 id="fbd8" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">SCSS模块风格的明星</h2><p id="4e38" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">我将scss模块中的所有样式作为一个对象导入到<code class="fe md me mf mg b">new.js</code>文件中。星星的容器等级是<code class="fe md me mf mg b">rating</code>。</p><pre class="kz la lb lc gt mi mg mj mk aw ml bi"><span id="97fc" class="lf lg in mg b gy mm mn l mo mp">import styles from './new.module.scss';</span></pre><p id="9363" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在引入任何功能之前，我将星星的初始颜色设置为灰色。我还使用sass将悬停的星星和左边的任何星星的颜色设置为黄色。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="mh le l"/></div></figure><p id="56ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你看一下<code class="fe md me mf mg b">new.js</code>，你会发现有一个内部的div来包含这五颗星星。当悬停在这个div上时，我将所有星星的颜色设置为黄色。星号在scss文件中被称为SVG，因为它们是SVG HTML元素。</p><p id="7450" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我不得不基本上取消选择所有的明星的权利，悬停的明星。这是因为如果用户悬停在第三颗星星上，这表明他们想要将评级设置为3/5，左边的两颗星星进入等式。</p><p id="da0c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，我使用CSS选择器<code class="fe md me mf mg b">~</code>将任何后续星星的颜色设置为灰色，当用户悬停在任何给定的星星上时。</p><h2 id="ecfb" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">处理用户点击星号的反应状态和函数</h2><p id="8638" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">我创建了一个状态数组变量来跟踪每个星星是否被点击过。</p><pre class="kz la lb lc gt mi mg mj mk aw ml bi"><span id="a90a" class="lf lg in mg b gy mm mn l mo mp">const [clicked, setClicked] = useState([false, false, false, false, false]);</span></pre><p id="6368" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一颗星的指数为0，第二颗星的指数为1，依此类推。</p><p id="46cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每当用户点击一颗星时，<code class="fe md me mf mg b">clicked</code>中的元素直到并包括被点击的星的索引，将被设置为真。</p><p id="1125" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对应于星号的React元素将监听被点击的状态，以确定采用哪个CSS类。</p><p id="43e4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">带有状态、星形单击处理程序和星形元素的react代码如下:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="mh le l"/></div></figure><p id="6a9a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当用户点击一颗星时，<code class="fe md me mf mg b">handleStarClick</code>将被调用来为<code class="fe md me mf mg b">clicked</code>状态变量中的元素设置true，直到并包括被点击的星的索引。那么<code class="fe md me mf mg b">clicked[i]</code>对于那些<code class="fe md me mf mg b">i</code>索引将为真，并且react星形元素将具有<code class="fe md me mf mg b">className={styles.clickedstar}</code>。</p><pre class="kz la lb lc gt mi mg mj mk aw ml bi"><span id="fb6d" class="lf lg in mg b gy mm mn l mo mp">.clickedstar {<br/>    color: rgb(212, 180, 0);<br/>}</span></pre><p id="0a75" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果星号没有被点击，则没有应用特殊的类，它呈现默认的灰色，表明它没有被用户点击。</p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="9f05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是我为使我简单的星级评定工作而必须编写的全部代码。感谢您的阅读，请让我知道是否有我可以改善我的代码的方法。</p></div></div>    
</body>
</html>
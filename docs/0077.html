<html>
<head>
<title>Android Native Bride Module for React Native in just Four Steps.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安卓原生新娘模块反应原生只需四个步骤。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/android-native-bride-module-for-react-native-with-few-step-50dec026a7b6?source=collection_archive---------2-----------------------#2019-02-07">https://javascript.plainenglish.io/android-native-bride-module-for-react-native-with-few-step-50dec026a7b6?source=collection_archive---------2-----------------------#2019-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2d88" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用一种简化的方式！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/80805bf084567d62b9cb44f3c3613468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irtWx8S-LLo2gDVQLopGPA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo By <a class="ae kv" href="https://unsplash.com/@davidmartinjr" rel="noopener ugc nofollow" target="_blank">David Martin</a> from unsplash</figcaption></figure><blockquote class="kw kx ky"><p id="ee32" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你必须为React-Native应用程序编写native bridge，那么这个博客将帮助你一步一步地做到这一点。</p><p id="f9f6" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你没有一个react-native应用程序，那么使用</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="bf3d" class="mb mc iq lx b gy md me l mf mg">react-native init SampleApp</span></pre><p id="a29f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">第一步:</strong></p><blockquote class="kw kx ky"><p id="6306" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在安装<a class="ae kv" href="https://github.com/peggyrayzis/react-native-create-bridge" rel="noopener ugc nofollow" target="_blank"><strong class="lc ir">react-native-create-bridge</strong></a><strong class="lc ir">。</strong></p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="acba" class="mb mc iq lx b gy md me l mf mg">yarn add react-native-create-bridge</span></pre><blockquote class="kw kx ky"><p id="f23b" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在快跑</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="82dd" class="mb mc iq lx b gy md me l mf mg">react-native new-module</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mk"><img src="../Images/1e8405d57331f2e8c6e25a2e86526f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_TMh-x_NLFMOVU5RgZ5hQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Fill the promt from CLI</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/fbc68cfbee361695adf7932fa082caeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*A64gHYh6yGFN-ZWdDuu-EQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Our JS for Bridging.</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/77430b95b731fd979ab65d0526f053ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*C3B67xoD-HYZKvnhNVq4cg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Native Android Bridge Code from Android Studio.</figcaption></figure><p id="0174" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">第二步:</strong></p><blockquote class="kw kx ky"><p id="8212" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">打开<strong class="lc ir"> HelloNativeModule </strong>模块，打开<strong class="lc ir">HelloNativeModuleModule.java</strong>从上面复制包名。我的案例其<strong class="lc ir"><em class="iq">com . sample app . hellonative module</em></strong><em class="iq">。</em></p><p id="551c" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">打开<strong class="lc ir">主应用</strong>，导入复制的<strong class="lc ir">包名</strong>。</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="a264" class="mb mc iq lx b gy md me l mf mg"><strong class="lx ir">import </strong>com.sampleapp.hellonativemodule.HelloNativeModuleModule;</span></pre><blockquote class="kw kx ky"><p id="e478" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">并添加<strong class="lc ir"> <em class="iq">新的</em></strong><em class="iq">HelloNativeModulePackage()</em></p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="33eb" class="mb mc iq lx b gy md me l mf mg">@Override<br/><strong class="lx ir">protected </strong>List&lt;ReactPackage&gt; getPackages() {<br/>  <strong class="lx ir">return </strong>Arrays.&lt;ReactPackage&gt;<em class="lb">asList</em>(<br/>      <br/>          <strong class="lx ir">new </strong>MainReactPackage(),<br/>          <strong class="lx ir">new </strong>HelloNativeModulePackage() <em class="lb">//Add  this only<br/>  </em>);<br/>}</span></pre><blockquote class="kw kx ky"><p id="d895" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">android的设置已完成。现在是时候玩本机模块了。</p></blockquote><p id="cd8b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">第三步:</strong></p><blockquote class="kw kx ky"><p id="2675" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">让我们用一个名为<strong class="lc ir">的简单按钮在我们的应用程序上测试本机桥</strong>进行测试。点击javaScript代码将调用一个本地Java代码并返回给我们一些东西。</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="c56d" class="mb mc iq lx b gy md me l mf mg">import React, { Component } from 'react';<br/>import { View, Text,Button} from 'react-native';<br/>export default class App extends Component {<br/>constructor(props) {<br/>   super(props);<br/>}<br/>render() {<br/>   return (<br/>       &lt;View&gt;<br/>          &lt;Button title = “Test Native Bridge” onPress = {()=&gt;{<br/>                   //we will call our native Java Code here.<br/>          }}&gt;&lt;/Button&gt;<br/>       &lt;/View&gt;<br/>   );<br/>}}</span></pre><p id="2c76" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated"><strong class="lc ir">第四步:</strong></p><blockquote class="kw kx ky"><p id="dfb6" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">打开<strong class="lc ir">HelloNativeModuleModule.java</strong>并像这样添加新方法</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="4c60" class="mb mc iq lx b gy md me l mf mg">@ReactMethod<br/><strong class="lx ir">public void </strong>MyBridgeMethod(String stringFromJS, Callback callBack){</span><span id="6db5" class="mb mc iq lx b gy mn me l mf mg">//Replace the <strong class="lx ir">JavaScriptCode </strong>with<strong class="lx ir"> JavaCode </strong>to mimic some change from Java Code.<br/>    String newString =  stringFromJS.replace(<strong class="lx ir">"JavaScriptCode"</strong>,<strong class="lx ir">"Java  Code"</strong>);<br/>    callBack.invoke(newString);<br/>}</span></pre><blockquote class="kw kx ky"><p id="254c" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在在React原生项目中。</p><p id="4152" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">注:记住—导入com . Facebook . react . bridge . callback；</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="f24d" class="mb mc iq lx b gy md me l mf mg">import { View, Text,Button, NativeModules} from 'react-native';<br/>const myModule = NativeModules.HelloNativeModule</span></pre><blockquote class="kw kx ky"><p id="61d2" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在在按钮处理程序中放置这段代码。</p></blockquote><pre class="kg kh ki kj gt lw lx ly lz aw ma bi"><span id="e930" class="mb mc iq lx b gy md me l mf mg">myModule.MyBridgeMethod(“Its from JavaScriptCode”,(fromJavaCode)=&gt;{<br/>        console.log(fromJavaCode)<br/>})</span></pre><blockquote class="kw kx ky"><p id="7b18" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在我们有了一个桥接Java方法，它可以从JavaScript代码进行通信。</p><p id="fd7b" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ir">注意:JavaScript是异步的。所以如果你想从Java代码中得到一些回报，那么你必须写一个回调函数并通过回调函数返回结果</strong></p></blockquote><p id="5d36" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">就这些。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="1f75" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li mh lk ll lm mi lo lp lq mj ls lt lu lv ij bi translated">累吗？从这里开始做一个快速的头脑更新。</p><h2 id="0849" class="mb mc iq bd mv mw mx dn my mz na dp nb mh nc nd ne mi nf ng nh mj ni nj nk nl bi translated"><a class="ae kv" href="https://medium.com/javascript-in-plain-english/30-funny-code-comments-that-will-make-you-laugh-1c1b54d4ab00" rel="noopener"> 32+搞笑代码评论居然有人写</a></h2><h1 id="fc9d" class="nm mc iq bd mv nn no np my nq nr ns nb jw nt jx ne jz nu ka nh kc nv kd nk nw bi translated">感谢阅读。🍻</h1></div></div>    
</body>
</html>
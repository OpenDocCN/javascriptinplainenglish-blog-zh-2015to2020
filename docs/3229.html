<html>
<head>
<title>A Beginner’s Guide to npm (Node Package Manager) 📦</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">npm(节点包管理器)初学者指南📦</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-npm-beginners-guide-9317c52be5bc?source=collection_archive---------7-----------------------#2020-09-11">https://javascript.plainenglish.io/what-is-npm-beginners-guide-9317c52be5bc?source=collection_archive---------7-----------------------#2020-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1c76" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">java描述语言</h2><div class=""/><div class=""><h2 id="9e03" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated"><em class="ko">如何使用NPM——node . js包管理器安装、发布和测试JavaScript包的漏洞</em></h2></div><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/528177546742300bd2f6820f9049b8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UF0LC68yiBcQk0Vn.jpg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Source: <a class="ae lf" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">npmjs</a></figcaption></figure><p id="c09a" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><a class="ae lf" href="https://en.wikipedia.org/wiki/Node.js" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja"> Node.js </strong> </a>软件平台于2009年出现，自那以后，成千上万的应用程序建立在这个平台上。成功的原因之一是<a class="ae lf" href="https://en.wikipedia.org/wiki/Npm_(software)" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja"> npm </strong> </a>，这是一个流行的包管理器，允许JS开发者快速共享包。</p><p id="fff4" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">在撰写本文时，npm包含了<strong class="li ja">130万个包</strong>，总共有<strong class="li ja">160亿次下载(！)</strong>。</p><h1 id="7429" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.什么是npm？</h1><p id="447b" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">npm(节点包管理器)是由Node.js支持的默认JavaScript包管理器。</p><ul class=""><li id="f45d" class="mz na iq li b lj lk lm ln lp nb lt nc lx nd mb ne nf ng nh bi translated">CLI(命令行界面) —托管和下载软件包的工具，</li><li id="af11" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><a class="ae lf" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja">在线知识库</strong> </a> <strong class="li ja"> </strong>包含JS包。</li></ul><p id="b150" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">您可以将<a class="ae lf" href="https://npmjs.com/" rel="noopener ugc nofollow" target="_blank">npmjs.com</a>存储库结构视为一个履行中心，它从销售者(包作者)那里接收产品(npm包)并将这些产品分发给购买者(包用户)。</p><p id="e0e5" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">在履行中心(<a class="ae lf" href="https://npmjs.com/" rel="noopener ugc nofollow" target="_blank">npmjs.com</a>)，一群<a class="ae lf" href="https://en.wikipedia.org/wiki/Wombat" rel="noopener ugc nofollow" target="_blank">袋熊</a>为每个顾客充当个人经理。<code class="fe nn no np nq b">npm CLI</code></p><p id="709e" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">依赖项提供如下:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nr"><img src="../Images/5b998ea912a4971501c6543bedd0f693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*shj_RBV6hWZ0RwD_.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">The process of installing a package through<strong class="bd ns"> npm install</strong></figcaption></figure><p id="58ba" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">封装放置过程如下所示:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nt"><img src="../Images/a37615f3f4c1a3210a93b01da5cd6ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FxaLSylk0d1jwSGd.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">The process of placing a package through <code class="fe nn no np nq b"><strong class="bd ns">npm publish</strong></code></figcaption></figure><p id="b2df" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">现在让我们仔细看看袋熊的工作。</p><h1 id="b971" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.1.Package.json文件</h1><p id="274e" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">JavaScript中的每个项目——无论是Node.js还是web应用程序——都可以被复制？作为具有自己的描述和文件的npm包。<code class="fe nn no np nq b">package.json</code></p><p id="8103" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><code class="fe nn no np nq b">package.json</code>可以认为是npm盒子(项目)上的贴纸(所需版本的包列表)。该文件是在使用以下元数据创建JavaScript / Node.js项目时由命令生成的:<code class="fe nn no np nq b">npm init</code></p><ul class=""><li id="218f" class="mz na iq li b lj lk lm ln lp nb lt nc lx nd mb ne nf ng nh bi translated"><code class="fe nn no np nq b">name</code>:JS库/项目的名称。</li><li id="5d79" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><code class="fe nn no np nq b">version</code>:项目版本。</li><li id="67ff" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><code class="fe nn no np nq b">description</code>:项目描述。</li><li id="893e" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><code class="fe nn no np nq b">license</code>:项目许可证。</li></ul><h1 id="07a5" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.2.Npm脚本</h1><p id="4cb1" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">构建自动化的<code class="fe nn no np nq b">package.json</code>包含字段<code class="fe nn no np nq b">scripts</code>，例如:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="686c" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><code class="fe nn no np nq b">eslint</code>、<code class="fe nn no np nq b">prettier</code>、<code class="fe nn no np nq b">ncc</code>、<code class="fe nn no np nq b">jest</code>可以在<code class="fe nn no np nq b">node_modules/.bin/</code>内全局或局部设置。</p><h1 id="3ac7" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.3.依赖项和开发依赖项</h1><p id="b593" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated"><code class="fe nn no np nq b">dependencies</code>和<code class="fe nn no np nq b">devdependencies</code>是具有npm库名称(key)和它们的<a class="ae lf" href="https://semver.org/lang/ru/" rel="noopener ugc nofollow" target="_blank">语义版本</a> (value)的字典。来自<a class="ae lf" href="https://github.com/actions/typescript-action" rel="noopener ugc nofollow" target="_blank">类型脚本动作</a>模板的示例:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="f256" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">使用命令<code class="fe nn no np nq b">npm install</code>标志<code class="fe nn no np nq b">--save</code>和<code class="fe nn no np nq b">--save-dev</code>安装这些依赖项。它们分别用于生产和开发。</p><p id="7e7a" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">关于版本控制:</p><ul class=""><li id="7287" class="mz na iq li b lj lk lm ln lp nb lt nc lx nd mb ne nf ng nh bi translated"><code class="fe nn no np nq b">^</code>:最后一个次要版本。例如，如果版本<code class="fe nn no np nq b">1.3.0</code>是<code class="fe nn no np nq b">1</code>主要版本系列中的最后一个次要版本，那么<code class="fe nn no np nq b">^1.0.4</code>是否会安装该版本。</li><li id="2a8a" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><code class="fe nn no np nq b">~</code>:最新补丁发布。如果这是一系列次要版本<code class="fe nn no np nq b">1.0</code>中的最后一个次要版本，则<code class="fe nn no np nq b">~1.0.4</code>将设置<code class="fe nn no np nq b">1.0.7</code>。</li></ul><p id="10fd" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">所有包版本将显示在生成的文件<code class="fe nn no np nq b">package-lock.json</code>中。</p><h1 id="38a8" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">1.4.Package-lock.json文件</h1><p id="9e6b" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">该文件描述了JavaScript项目中使用的包版本。如果它包括对依赖关系(产品名称)的一般描述，那么更详细的描述—整个依赖关系树。<code class="fe nn no np nq b">package-lock.jsonpackage.jsonpackage-lock.json</code></p><p id="6961" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><code class="fe nn no np nq b">package-lock.json</code>由命令<code class="fe nn no np nq b">npm install</code>生成，由npm CLI读取，以确保项目环境通过<code class="fe nn no np nq b">npm ci</code>播放。</p><h1 id="4ce6" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">2.安装软件包</h1><p id="368a" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">由于用户下载软件包的频率更高(160亿次下载对比1300万次发布)，所以弄清楚如何安装它们会很有帮助。</p><h1 id="c123" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">2.1.npm安装</h1><p id="f32c" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated"><code class="fe nn no np nq b">npm install</code>是安装包的命令。</p><p id="2768" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">默认情况下<code class="fe nn no np nq b">npm install &lt;package-name&gt;</code>，已签名的<code class="fe nn no np nq b">^</code>会安装最新版本的软件包。<code class="fe nn no np nq b">npm install</code>会根据<code class="fe nn no np nq b">package.json</code>文件中的配置将包下载到项目文件夹<code class="fe nn no np nq b">node_modules</code>，尽可能更新包的版本(反过来更新<code class="fe nn no np nq b">package-lock.json</code>)。如果要全局安装包，可以指定标志<code class="fe nn no np nq b">-g</code>。</p><p id="1267" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">npm使得JavaScript包的安装变得如此简单，以至于该命令经常被错误地使用，关于这个主题的模因已经出现在开发人员社区中:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nw"><img src="../Images/4ad1703925175ec2209a75fb5507f8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AqvtbpwY0ldftYSP.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Sometimes you think that node_modules are super heavy!</figcaption></figure><p id="0a6d" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">当您添加一个标志时，<code class="fe nn no np nq b">--production</code>只有应用程序工作所必需的依赖项才会从<code class="fe nn no np nq b">dependencies</code>安装，而不会增加<code class="fe nn no np nq b">node_modules</code>。</p><h1 id="21af" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">2.2.npm ci</h1><p id="7b8b" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">如果<code class="fe nn no np nq b">npm install --production</code>对于生产来说是最优的，是否有类似的团队进行本地开发？对，叫<code class="fe nn no np nq b">npm ci</code>。</p><p id="15ba" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">和前面一样，如果<code class="fe nn no np nq b">package-lock.json</code>在项目中还不存在，那么在调用时就会生成。<code class="fe nn no np nq b">npm installnpm ci</code>访问锁文件以下载软件包的确切版本。因此，不同机器上的软件包集将保持不变。</p><h1 id="b1d5" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">2.3.npm审计</h1><p id="bed6" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">为了避免将<a class="ae lf" href="https://medium.com/@jsoverson/how-two-malicious-npm-packages-targeted-sabotaged-one-other-fed7199099c8" rel="noopener">恶意包</a>添加到存储库中，npm.js组织提出了<a class="ae lf" href="https://blog.npmjs.org/post/173719309445/npm-audit-identify-and-fix-insecure" rel="noopener ugc nofollow" target="_blank">的想法，即</a>通过创建模块<code class="fe nn no np nq b">npm audit</code>来审计生态系统。它提供了关于软件包中的漏洞和修补版本的存在的信息。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nx"><img src="../Images/564ada8e2e08f2ba83e58314b6e2115e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YSTBGg1CSgBxFtAD.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Audit example for static-eval package</figcaption></figure><p id="062e" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">如果在软件包的下一个版本中有可用的补丁，它<code class="fe nn no np nq b">npm audit fix</code>将自动更新受影响的依赖项的版本。</p><h1 id="1401" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">3.包装放置</h1><p id="eadb" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">让我们从消费包转移到放置包。</p><h1 id="995d" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">3.1.npm发布</h1><p id="dbb8" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">向npmjs.com提交一个包非常简单——只需在控制台中键入<code class="fe nn no np nq b">npm publish</code>。作者忽略的一个重要部分是版本控制。这里有一套semver.org的<a class="ae lf" href="https://semver.org/lang/ru/" rel="noopener ugc nofollow" target="_blank">经验法则，用于</a>何时增加版本号:</p><ul class=""><li id="9470" class="mz na iq li b lj lk lm ln lp nb lt nc lx nd mb ne nf ng nh bi translated"><strong class="li ja">主要版本:</strong>当向后不兼容的API发生变化时。</li><li id="957e" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><strong class="li ja">次要版本:</strong>当您添加新功能而不破坏向后兼容性时。</li><li id="dc61" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><strong class="li ja">补丁版本:</strong>做向后兼容修复时。</li></ul><p id="12e8" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">在发布您自己的包时，遵循上述指导方针更为重要，以确保您不会破坏任何人的兼容性，因为npm默认使用版本<code class="fe nn no np nq b">^</code>(下一个次要版本)。</p><h1 id="89be" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">结论</h1><p id="accc" class="pw-post-body-paragraph lg lh iq li b lj mu ka ll lm mv kd lo lp mw lr ls lt mx lv lw lx my lz ma mb ij bi translated">在这篇文章中，我们熟悉了国家预防机制的结构，并了解到:</p><ul class=""><li id="5ea5" class="mz na iq li b lj lk lm ln lp nb lt nc lx nd mb ne nf ng nh bi translated">其中文件是依赖数据(<code class="fe nn no np nq b">package.json</code>、<code class="fe nn no np nq b">package-lock.json</code>)。</li><li id="37cd" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated">如何在本地机器上安装生产包(<code class="fe nn no np nq b">npm install</code>)、审计包(<code class="fe nn no np nq b">npm audit</code>)。</li><li id="5a53" class="mz na iq li b lj ni lm nj lp nk lt nl lx nm mb ne nf ng nh bi translated">如何将软件包添加到存储库()。<code class="fe nn no np nq b">npm publish</code></li></ul><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="ny nv l"/></div></figure><h2 id="93b9" class="nz md iq bd me oa ob dn mi oc od dp mm lp oe of mo lt og oh mq lx oi oj ms iw bi translated"><strong class="ak">阅读更多:</strong></h2><div class="ok ol gp gr om on"><a href="https://medium.com/@raevskymichail/frontend-and-backend-difference-797d3e975917" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ja gy z fp os fr fs ot fu fw iz bi translated">前端和后端—有什么区别？</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">前端和后端。你可能已经听说过网络编程领域的这些流行词汇，但是背后是什么…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kz on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://medium.com/javascript-in-plain-english/how-to-customize-an-angular-project-build-2e7e2c31ca6b" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ja gy z fp os fr fs ot fu fw iz bi translated">如何自定义Angular项目构建</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">可能会出现这样一种情况，在构建您的Angular应用程序时，出现了一个任务，它超出了构建…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb kz on"/></div></div></a></div></div></div>    
</body>
</html>
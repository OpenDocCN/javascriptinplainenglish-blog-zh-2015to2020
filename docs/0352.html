<html>
<head>
<title>JavaScript in 3D: an Introduction to Three.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3D JavaScript:three . js简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-in-3d-an-introduction-to-three-js-780f1e4a2e6d?source=collection_archive---------4-----------------------#2019-09-23">https://javascript.plainenglish.io/javascript-in-3d-an-introduction-to-three-js-780f1e4a2e6d?source=collection_archive---------4-----------------------#2019-09-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9259" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何为你的下一个网络应用带来三维空间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6ca1e420c0464676da83f8dd2851dc09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyd14XiZBbvCbkN3v4ipbQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@karishea?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kari Shea</a> on <a class="ae kv" href="https://unsplash.com/s/photos/laptop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a>, featuring <a class="ae kv" href="https://threejs.org/examples/#webgl_shaders_ocean" rel="noopener ugc nofollow" target="_blank">a Three.js render.</a></figcaption></figure><p id="91fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated">hree.js是一个强大的工具。它有助于以一种高性能和适应性的方式将3D设计和动画带到浏览器中。但是，如果你以前从未深入研究过3D编程的世界，那么开始会很棘手。</p><p id="7a16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有一些玩Unity游戏引擎和C#的基本经验，但其他许多概念对我来说都是新的。我意识到没有很多初学者友好的资源，所以我决定写这篇文章。在这本书里，我们将会看到一个Three.js场景的主要元素，从网格和材质到几何体，加载器等等。</p><p id="16e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到本文结束时，您应该对为您的下一个web项目添加额外维度所必需的基本构件有了坚实的理解。</p><div class="kg kh ki kj gt ab cb"><figure class="mb kk mc md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/cbc27e8611ec9ed32a5ba4b68f938e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*7P2rZnsMdUR9HBP9bmFptA.png"/></div></figure><figure class="mb kk mc md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/d9cb086455ea432cd47378581a221bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*Am4hORAtVGahN-1Ipo13TQ.png"/></div></figure><figure class="mb kk mc md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/d47d62ce3afe8660cdb66adb57cf07fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*gvX17esnMr8NiT5AtMyT3Q.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk mh di mi mj">Three.js examples by <a class="ae kv" href="https://threejs.org/examples/#webgl_lights_physical" rel="noopener ugc nofollow" target="_blank">Ben Houston</a>, <a class="ae kv" href="https://threejs.org/examples/#webgl_lines_colors" rel="noopener ugc nofollow" target="_blank">Thomas Diewald</a> and <a class="ae kv" href="https://threejs.org/examples/#webgl_loader_collada_skinning" rel="noopener ugc nofollow" target="_blank">StrykerDoesAnimation</a>.</figcaption></figure></div><h1 id="cbbb" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">向量和盒子——基本的构建模块</h1><p id="4eac" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">通常，Three.js中最重要的两个类是<code class="fe nh ni nj nk b">Vector3</code>和<code class="fe nh ni nj nk b">Box3</code>。如果你是3D新手，这些东西可能听起来有点抽象，但你会经常遇到它们！</p><h2 id="350e" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">向量3</h2><p id="c487" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">最基础的3D类，包含三个数字<code class="fe nh ni nj nk b">x</code>、<code class="fe nh ni nj nk b">y</code>、<code class="fe nh ni nj nk b">z</code>。这可用于表示3D空间中的点或方向和长度。例如:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="af2f" class="nl ml iq nk b gy ob oc l od oe">const vect = new THREE.Vector3(1, 1, 1);</span></pre><div class="kg kh ki kj gt ab cb"><figure class="mb kk of md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/0a914c1161c1c4825fcb8011ac39e71b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*mDGah9z-0f-ph-_suSIQBA.png"/></div></figure><figure class="mb kk of md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/35a9a324989f733bbc240c3323765acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*KCU6U3S2dtp6IRBMiUdDFQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk og di oh mj">Points are locations in space. Vectors are displacements in space.</figcaption></figure></div><p id="e4d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很多Three.js构造函数将<code class="fe nh ni nj nk b">Vector3</code>对象作为参数，包括下面的<code class="fe nh ni nj nk b">Box3</code>。</p><h2 id="3de2" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">方框3</h2><p id="73b1" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">这个类代表一个长方体(3D盒子)。它的主要目的是获得其他对象的边界框——也就是说，3D对象可以放入的最小长方体。每个<code class="fe nh ni nj nk b">Box3</code>都与世界轴<code class="fe nh ni nj nk b">x</code>、<code class="fe nh ni nj nk b">y</code>和<code class="fe nh ni nj nk b">z</code>对齐。</p><p id="b35c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是如何使用<code class="fe nh ni nj nk b">Vector3</code>创建一个盒子:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="d16a" class="nl ml iq nk b gy ob oc l od oe">const vect = new THREE.Vector3(1, 1, 1);<br/>const box = new THREE.Box3(vect);</span></pre><p id="8624" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是如何基于现有的3D对象创建一个盒子:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="c72e" class="nl ml iq nk b gy ob oc l od oe">const box = new THREE.Box3();<br/>box.setFromObject(object);</span></pre><div class="kg kh ki kj gt ab cb"><figure class="mb kk of md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/401fd777f4f3508b0cd74e60a15f0d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*qDeJsUUMQxeAcnUh_DWCpQ.png"/></div></figure><figure class="mb kk of md me mf mg paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/473450d5c7be124f09a8af6f0ef712cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ec9gvOCklyJtb9SH2-ZE7w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk og di oh mj">A sphere in 3D space. On the right, the sphere’s bounding box is shown.</figcaption></figure></div><p id="8b47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管您可以在没有这些知识的情况下创建网格，但是一旦您开始尝试移动或操纵您的模型，这些类将会派上用场。现在，我们将从抽象的东西转移到我们能看到的东西上来！</p><h1 id="50bb" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">网状物</h1><p id="f558" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">在Three.js中，场景中的基本视觉元素是一个<code class="fe nh ni nj nk b">Mesh</code>。这是一个由三角形组成的3D对象。它由两个物体构成:</p><ul class=""><li id="4250" class="oi oj iq ky b kz la lc ld lf ok lj ol ln om lr on oo op oq bi translated">定义其形状的<code class="fe nh ni nj nk b">Geometry</code>，</li><li id="22f1" class="oi oj iq ky b kz or lc os lf ot lj ou ln ov lr on oo op oq bi translated">一个<code class="fe nh ni nj nk b">Material</code>——定义其外观。</li></ul><p id="0e83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些定义可能会稍微复杂一些(例如，<code class="fe nh ni nj nk b">Geometry</code>可能包含颜色数据)，但这是主要的区别。</p><h1 id="c3ad" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">几何学</h1><p id="dfef" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">根据您的用例，您可能希望在Three.js中定义一个几何图形，或者从文件中导入一个几何图形。</p><p id="ab0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用像<code class="fe nh ni nj nk b">THREE.TorusKnotGeometry</code>这样的函数，我们可以用单行代码创建看起来复杂的形状。我们一会儿就会谈到这个问题，但首先让我们来看几个简单的形状。</p><p id="b03d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最简单的3D形状，长方体或盒子，可以用<code class="fe nh ni nj nk b">width</code>、<code class="fe nh ni nj nk b">height</code>和<code class="fe nh ni nj nk b">depth</code>来定义:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="242a" class="nl ml iq nk b gy ob oc l od oe">const geometry = new THREE.BoxGeometry( 20, 20, 20 );</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="966c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于一个球体，我们需要提供的最少信息是<code class="fe nh ni nj nk b">radius</code>、<code class="fe nh ni nj nk b">widthSegments</code>和<code class="fe nh ni nj nk b">heightSegments</code>。后两个变量告诉我们模型应该使用多少个三角形来表示球体:数字越大，球体的外观越平滑:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="83d4" class="nl ml iq nk b gy ob oc l od oe">const geometry = new THREE.SphereGeometry( 20, 64, 64 );</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="33db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想做出尖的或三角形的形状，一个选择是圆锥。它的参数是提供给前面两个几何图形的参数的混合。下面，我们指定<code class="fe nh ni nj nk b">radius</code>、<code class="fe nh ni nj nk b">height</code>和<code class="fe nh ni nj nk b">radialSegments</code>。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="78b5" class="nl ml iq nk b gy ob oc l od oe">const geometry = new THREE.ConeBufferGeometry( 5, 20, 32 );</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="318b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些只是一些最常见的形状。Three.js有很多内置的几何图形，你可以在文档中查看<a class="ae kv" href="https://threejs.org/docs/index.html#manual/introduction/Creating-a-scene" rel="noopener ugc nofollow" target="_blank">。对于本教程的大部分内容，我们将使用一个更有趣的形状，使用<code class="fe nh ni nj nk b">TorusKnotGeometry</code>方法构建。</a></p><p id="62cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么这个形状看起来是这个样子已经超出了本教程的范围，但是我鼓励你使用这些值，因为你可以在一行代码中创建一些非常有趣的对象！</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="b55d" class="nl ml iq nk b gy ob oc l od oe">const geometry = <br/>  new THREE.TorusKnotGeometry(10, 1.3, 500, 6, 6, 20);</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h1 id="12bc" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">材料</h1><p id="cfa5" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">几何定义了3D物体的形状，但不是它们的外观。为此，我们需要添加一种材料</p><p id="cd65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Three.js带有10种网格材料，每种材料都有自己的优点和可定制的属性。我们将研究几个最有用的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/fde1835b233c98036fa818ec1a1da8a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwS52w70zL5SDGeJztSdlA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Four of the most common material types in Three.js.</figcaption></figure><h2 id="b034" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">网状正常材料</h2><p id="8231" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><em class="oz">用途:快速起床跑步</em></p><p id="64a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从<code class="fe nh ni nj nk b">MeshNormalMaterial</code>开始，这是迄今为止我们在示例中使用的多色材质。它将法向量映射到RGB颜色:换句话说，它使用颜色来区分向量在3D空间中的位置。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="6cc4" class="nl ml iq nk b gy ob oc l od oe">const material = new THREE.MeshNormalMaterial();</span></pre><p id="7748" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，如果你想改变<code class="fe nh ni nj nk b">MeshNormalMaterial</code>的颜色，你可以简单地使用CSS滤镜，改变色调:例如<code class="fe nh ni nj nk b">filter: hue-rotate(90deg)</code>。</p><p id="1a5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据我的经验，<code class="fe nh ni nj nk b">MeshNormalMaterial</code>对于快速启动和运行最有用。为了更好地控制你的对象的外观，最好使用别的东西。</p><h2 id="8e54" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">网状基础材料</h2><p id="70ef" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><em class="oz">适用于:线框</em></p><p id="106d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想让你的物体有统一的颜色，你可以使用<code class="fe nh ni nj nk b">MeshBasicMaterial</code>，因为它不受光线的影响。我发现这对于线框很有用。要使用线框模式，只需将<code class="fe nh ni nj nk b">{ wireframe: true }</code>作为参数传递即可。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="6061" class="nl ml iq nk b gy ob oc l od oe">const material = new THREE.MeshBasicMaterial({ <br/>  wireframe: true, <br/>  color: 0xdaa520<br/>});</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="bc4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基础材料的缺点是它没有提供关于材料深度的线索。每种材料都有线框选项，但一个包括深度的高性能解决方案是<code class="fe nh ni nj nk b">MeshDepthMaterial</code>。</p><h2 id="046d" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">MeshLambertMaterial</h2><p id="da2e" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><em class="oz">适用于:高性能(但精度较低)</em></p><p id="f220" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是第一个受灯光影响的材质，所以为了看我们在做什么，我们需要给我们的场景添加一些灯光。在下面的代码中，我们将添加一点黄色到聚光灯，以创建一个更温暖的效果:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="76e1" class="nl ml iq nk b gy ob oc l od oe">const scene = new THREE.Scene();</span><span id="9b6e" class="nl ml iq nk b gy pa oc l od oe">const frontSpot = new THREE.SpotLight(0xeeeece);<br/>frontSpot.position.set(1000, 1000, 1000);<br/>scene.add(frontSpot);</span><span id="9dea" class="nl ml iq nk b gy pa oc l od oe">const frontSpot2 = new THREE.SpotLight(0xddddce);<br/>frontSpot2.position.set(-500, -500, -500);<br/>scene.add(frontSpot2);</span></pre><p id="ac2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们为我们的形状添加材质。因为它看起来有点像一件珠宝，我想我会选择金色的。另一个属性<code class="fe nh ni nj nk b">emissive</code>，是物体自身发出的颜色(没有任何光源)。通常，深色效果最好，比如深灰色，如下所示:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="9e40" class="nl ml iq nk b gy ob oc l od oe">const material = new THREE.MeshLambertMaterial({<br/>  color: 0xdaa520,<br/>  emissive: 0x111111,<br/>});</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="7f77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你在下面的例子中看到的，颜色或多或少是正确的，但它与光线相互作用的方式并没有产生最真实的外观。为此，我们需要使用<code class="fe nh ni nj nk b">MeshPhongMaterial</code>或<code class="fe nh ni nj nk b">MeshStandardMaterial</code>。</p><h2 id="cdd7" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">网状材料</h2><p id="0e97" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><em class="oz">适用于:中等性能和精度</em></p><p id="1ef7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种材料提供了性能和外观之间的折衷，因此它是需要高性能同时实现比<code class="fe nh ni nj nk b">MeshLambertMaterial</code>更高质量水平的应用的良好中间地带。</p><p id="95d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以改变一个新的属性<code class="fe nh ni nj nk b">specular</code>，它定义了表面反射的亮度和颜色。虽然<code class="fe nh ni nj nk b">emissive</code>属性通常是深色，但<code class="fe nh ni nj nk b">specular</code>属性通常是浅色效果最好。下面，我们使用浅灰色:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="17de" class="nl ml iq nk b gy ob oc l od oe">const material = new THREE.MeshPhongMaterial({<br/>  color: 0xdaa520,<br/>  emissive: 0x000000,<br/>  specular: 0xbcbcbc,<br/>});</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="0075" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从视觉上看，上面的图像以一种更有说服力的方式反射了光线，但它仍然不完美。白光有点太亮，材料看起来更像橡胶而不是金属(我们想要的效果)。使用<code class="fe nh ni nj nk b">MeshStandardMaterial</code>我们可以得到更好的结果。</p><h2 id="cfdd" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">网格标准材料</h2><p id="e336" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><em class="oz">适用于:高精度(但性能较低)</em></p><p id="1416" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是Three.js材料中精度最高的，尽管这是以牺牲更强的处理能力为代价的。<code class="fe nh ni nj nk b">MeshStandardMaterial</code>带有几个附加属性— <code class="fe nh ni nj nk b">metalness</code>和<code class="fe nh ni nj nk b">roughness</code>，这两个属性的取值都在<code class="fe nh ni nj nk b">0</code>和<code class="fe nh ni nj nk b">1</code>之间。</p><p id="3854" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nh ni nj nk b">metalness</code>属性改变了物体的反射方式，使其在本质上更接近金属。这是因为导电材料(如金属)与介电材料(如陶瓷)具有不同的反射特性。</p><p id="07c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nh ni nj nk b">roughness</code>增加了一层定制功能。你可以把它想象成光泽度的反义词:一个值<code class="fe nh ni nj nk b">0</code>是非常光滑的，而一个值<code class="fe nh ni nj nk b">1</code>是非常粗糙的(意味着反射的光非常少)。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="9ebe" class="nl ml iq nk b gy ob oc l od oe">const material = new THREE.MeshStandardMaterial({<br/>  color: 0xfcc742,<br/>  emissive: 0x111111,<br/>  specular: 0xffffff,<br/>  metalness: 1,<br/>  roughness: 0.55,<br/>});</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="5383" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这肯定是最现实的结果，但请记住，它需要更多的资源。</p><p id="63ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面讨论的材料是我最常遇到的，但是要想知道还有什么其他选择，<a class="ae kv" href="https://threejs.org/docs/index.html#manual/introduction/Creating-a-scene" rel="noopener ugc nofollow" target="_blank">请查阅文档</a>。</p><h1 id="2faa" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">装载机</h1><p id="7fc9" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">正如我们已经讨论过的，可以手动定义网格的几何体。然而，在实践中，许多人通常更喜欢从3D文件中导入他们的几何图形。幸运的是，Three.js有大量受支持的加载器，涵盖了大多数主要的3D文件格式。</p><p id="6e9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本<code class="fe nh ni nj nk b">ObjectLoader</code>加载一个JSON资源，使用<a class="ae kv" href="https://github.com/mrdoob/three.js/wiki/JSON-Object-Scene-format-4" rel="noopener ugc nofollow" target="_blank"> JSON对象/场景格式</a>。但是大多数加载器需要手动导入。您可以在GitHub目录中找到支持的加载器列表，并使用GitHub文件路径像这样导入它们。以下是几种常见格式的导入:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="1ae2" class="nl ml iq nk b gy ob oc l od oe">// GLTF<br/>import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';</span><span id="8b74" class="nl ml iq nk b gy pa oc l od oe">// OBJ<br/>import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js';</span><span id="a9cf" class="nl ml iq nk b gy pa oc l od oe">// STL<br/>import { STLLoader } from 'three/examples/jsm/loaders/STLLoader.js';</span><span id="dfa6" class="nl ml iq nk b gy pa oc l od oe">// FBX<br/>import { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';</span><span id="412a" class="nl ml iq nk b gy pa oc l od oe">// 3MF<br/>import { 3MFLoader } from 'three/examples/jsm/loaders/3MFLoader.js';</span></pre><p id="39be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在线查看的推荐文件格式是<code class="fe nh ni nj nk b">GLTF</code>，理由是它“专注于运行时资产交付，传输简洁，加载快速”。</p><p id="b4f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，可能有理由更喜欢特定的文件(例如，如果质量是您的优先事项，或者如果您需要准确地表示用于3D打印的文件)。但是如果可以的话，你可以通过以<code class="fe nh ni nj nk b">GLTF</code>格式导入文件来获得最佳的在线性能。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="32cc" class="nl ml iq nk b gy ob oc l od oe">import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';<br/>import model from '../models/sample.gltf';</span><span id="c420" class="nl ml iq nk b gy pa oc l od oe">let loader = new GLTFLoader();</span><span id="b4c3" class="nl ml iq nk b gy pa oc l od oe">loader.load(model, function (geometry) {<br/>  // if the model is loaded successfully, add it to your scene here<br/>}, undefined, function (err) {<br/>  console.error(err);<br/>});</span></pre><h1 id="0800" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">将这一切结合在一起</h1><p id="a582" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">Three.js看起来令人生畏的原因之一是，如果你从头开始构建一些东西，仅仅是为了在屏幕上看到一些东西，就需要相当多的代码。到目前为止，在每个例子中，我们都需要创建一个场景和一个摄像机。为了使事情更简单，我将这段代码放在了底部，但是我们现在将把所有的东西放在一起。</p><p id="0f81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">订购和组织代码的方式由您决定。在更简单的例子中，比如本文中的例子，将所有的Three.js代码放在一个地方是有意义的。但是，在实践中，划分单独的元素以使代码库更容易管理和扩展是很有用的。</p><p id="9e3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了简单起见，我们将查看呈现单个对象所需的元素，并且我们将在单个JavaScript文件中这样做。下面是一个让您入门的大纲，它将呈现:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pb ox l"/></div></figure><h1 id="5525" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">我应该使用框架吗？</h1><p id="e72c" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">最后，是否使用特定于框架的Three.js版本值得讨论。目前，其中最流行的是神奇的<a class="ae kv" href="https://www.npmjs.com/package/react-three-fiber" rel="noopener ugc nofollow" target="_blank"> react-three-fiber </a>，用于react。对于React的用户来说，使用这样的包有一些很大的好处——也就是说，您可以保持基于组件的结构，这允许您轻松地管理和重用代码。</p><p id="04af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，对于初学者，我建议从普通的Javascript开始。这是因为大多数关于Three.js的在线资料都是指普通JavaScript中的Three.js。根据我作为学习者的经验，通过一个包学习Three.js可能会令人困惑，例如，如果您经常需要将Three.js对象和方法翻译成组件和道具。(但是一旦你对Three.js更熟悉了，就使用你喜欢的软件包吧！)</p><h2 id="6b4c" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">如何将vanilla Three.js添加到框架中</h2><p id="2ce0" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">Three.js将为您提供一个HTML对象(通常称为<code class="fe nh ni nj nk b">renderer.domElement</code>)，您可以将它添加到应用程序中的任何HTML元素中。因此，例如，如果您有一个带有<code class="fe nh ni nj nk b">id="threejs"</code>的<code class="fe nh ni nj nk b">div</code>，您可以简单地在您的Three.js代码中包含以下内容:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="6db7" class="nl ml iq nk b gy ob oc l od oe">document.getElementById('threejs').appendChild(renderer.domElement);</span></pre><p id="e923" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一些框架为您提供了访问DOM节点的首选方式——比如React中的<code class="fe nh ni nj nk b">ref</code>、Vue中的<code class="fe nh ni nj nk b">$ref</code>或Angular中的<code class="fe nh ni nj nk b">ngRef</code>——这比直接从DOM中查询元素有一定的优势。作为一个例子，我们现在来看看React的快速实现策略。</p><h2 id="fa15" class="nl ml iq bd mm nm nn dn mq no np dp mu lf nq nr mw lj ns nt my ln nu nv na nw bi translated">应对策略</h2><p id="d08a" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">如果您使用React，有一种方法可以将常规的Three.js文件合并到您的一个组件中。在一个文件<code class="fe nh ni nj nk b">ThreeEntryPoint.js</code>中，我们将保存普通的Three.js代码:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="3107" class="nl ml iq nk b gy ob oc l od oe">export default function ThreeEntryPoint(sceneRef) {<br/>  let renderer = new THREE.WebGLRenderer(); <br/>  // ...<br/>  sceneRef.appendChild(renderer.domElement);<br/>}</span></pre><p id="7189" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们应该将它导出为一个函数，它接受一个参数:React引用React组件中一个元素。我们现在可以制作我们的组件了，<code class="fe nh ni nj nk b">ThreeContainer.js</code>:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="3de8" class="nl ml iq nk b gy ob oc l od oe">import React, { Component } from 'react';<br/>import ThreeEntryPoint from './threejs/ThreeEntryPoint';</span><span id="d4de" class="nl ml iq nk b gy pa oc l od oe">export default class ThreeContainer extends Component {</span><span id="8a1a" class="nl ml iq nk b gy pa oc l od oe">componentDidMount() {<br/>    ThreeEntryPoint(<em class="oz">this</em>.scene);<br/>  }</span><span id="9b74" class="nl ml iq nk b gy pa oc l od oe">render() {<br/>    return (<br/>      &lt;&gt;<br/>        &lt;div ref={element =&gt; <em class="oz">this</em>.scene = element} /&gt;<br/>      &lt;/&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="f7dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">导入的<code class="fe nh ni nj nk b">ThreeEntryPoint</code>函数应该放在我们的<code class="fe nh ni nj nk b">componentDidMount</code>方法中，并使用refs传递我们的新<code class="fe nh ni nj nk b">div</code>作为它的参数。</p><p id="3259" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为这种方法的一个实例，您可以随意克隆下面的库并亲自尝试:【https://github.com/BretCameron/three-js-sample<a class="ae kv" href="https://github.com/BretCameron/three-js-sample" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="9d13" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">结论</h1><p id="29be" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">关于Three.js还有很多可以说的，但是我希望这篇文章已经为您提供了足够的信息来开始使用这项强大的技术。当我开始学习Three.js时，我找不到任何像这篇文章一样的资源，所以我希望我已经帮助新手更容易理解这项技术。</p><p id="f063" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何问题或者你认为有一些有用的东西可以添加，请在评论中告诉我！</p></div></div>    
</body>
</html>
<html>
<head>
<title>What is Vue.nextTick?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.nextTick是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-vue-nexttick-89d6878c1162?source=collection_archive---------5-----------------------#2020-03-24">https://javascript.plainenglish.io/what-is-vue-nexttick-89d6878c1162?source=collection_archive---------5-----------------------#2020-03-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9b30" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我使用nextTick改善用户体验的经验</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/447359f2ed403050c2145f9a428c2814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h6Pg5tqai6uSSYB4.jpg"/></div></div></figure><h1 id="3a35" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">Vue.nextTick()在Vue.js官方文档中是什么</h1><p id="fe94" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><em class="mf">根据vue.js官方文件(</em><a class="ae mg" href="https://vuejs.org/v2/api/#Vue-nextTick" rel="noopener ugc nofollow" target="_blank"><em class="mf">https://vuejs.org/v2/api/#Vue-nextTick</em></a><em class="mf">)</em></p><ul class=""><li id="4940" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated">将回调推迟到下一个DOM更新周期之后执行</li><li id="f947" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated">更改一些数据后立即使用它来等待DOM更新</li></ul><h2 id="b587" class="mx ks iq bd kt my mz dn kx na nb dp lb ls nc nd ld lw ne nf lf ma ng nh lh ni bi translated">vue . next tick([回调，上下文])</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><ul class=""><li id="6008" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated"><strong class="ll ir">立即，DOM更新，回调……</strong></li></ul><blockquote class="nl"><p id="68e0" class="nm nn iq bd no np nq nr ns nt nu me dk translated">所以我觉得nextTick和DOM立即更新有关，对吧？</p></blockquote><ul class=""><li id="30a3" class="mh mi iq ll b lm nv lp nw ls nx lw ny ma nz me mo mp mq mr bi translated">承诺、异步/等待也可用</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><blockquote class="nl"><p id="047b" class="nm nn iq bd no np nq nr ns nt nu me dk translated">很好。我理解这个概念。那么为什么我一定要知道呢？？</p></blockquote><figure class="ob oc od oe of kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/f42f9aca88fd0a65a8a64f731f4ffadc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FhlRQRwPwnBZ41kf"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk">Photo by <a class="ae mg" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">bruce mars</a> on <a class="ae mg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="37be" class="kr ks iq bd kt ku or kw kx ky os la lb jw ot jx ld jz ou ka lf kc ov kd lh li bi translated">如何在现实生活中使用Vue.nextTick()</h1><h2 id="ebbc" class="mx ks iq bd kt my mz dn kx na nb dp lb ls nc nd ld lw ne nf lf ma ng nh lh ni bi translated"><strong class="ak"> First Gif </strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/6f60c6951d81ad35a367015142692121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*iuGuFn-SDRwg0iDt-mLzxA.gif"/></div></figure><blockquote class="nl"><p id="534f" class="nm nn iq bd no np nq nr ns nt nu me dk translated">和...相对</p></blockquote><h2 id="292b" class="mx ks iq bd kt my ox dn kx na oy dp lb ls oz nd ld lw pa nf lf ma pb nh lh ni bi translated"><strong class="ak">第二Gif </strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/d2bb6c575a2b3e41f8c351bbc55a634d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_T12hGaIDM-YtufCqugWeg.gif"/></div></figure><blockquote class="nl"><p id="0cdc" class="nm nn iq bd no np nq nr ns nt nu me dk translated">你能看出区别吗？</p></blockquote><p id="f75f" class="pw-post-body-paragraph lj lk iq ll b lm nv jr lo lp nw ju lr ls pc lu lv lw pd ly lz ma pe mc md me ij bi translated"><strong class="ll ir">第一个gif使用$nextTick方法</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="og oh gj gh gi oi oj bd b be z dk">example.js</figcaption></figure><ul class=""><li id="90fb" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated">如果用户点击gifs上的<strong class="ll ir">上传</strong>文本，则执行<strong class="ll ir"> handleFiles </strong>功能</li><li id="0007" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated">这是一个Promise函数，本质上是设置目录&amp;在创建的目录上上传文件，而<code class="fe pf pg ph pi b">isFileUploaded</code>是一个触发UI更改的状态</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/1240105135aa1270f6bb9b9ddd4d87c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*es2duWcv81lZB3D0"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk">Photo by <a class="ae mg" href="https://unsplash.com/@nlo_nata?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Natasha Vasiljeva</a> on <a class="ae mg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><ul class=""><li id="fb54" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated">第二个gif有一个UX问题，它看起来像是页面被<strong class="ll ir">冻结了</strong>，因为在所有的承诺都被达成之前，UI没有任何变化(这可能需要ms到几秒钟的时间)</li><li id="99f0" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated">我首先认为，在 Promise API调用<code class="fe pf pg ph pi b">await carfsModule.setupSubDirectory()</code>之前编写一个更新<code class="fe pf pg ph pi b">isFileUploaded</code>状态<strong class="ll ir">的代码将会解决这个问题</strong></li></ul><pre class="kg kh ki kj gt pk pi pl pm aw pn bi"><span id="08fd" class="mx ks iq pi b gy po pp l pq pr">this.isFileUploaded = true;</span><span id="0a02" class="mx ks iq pi b gy ps pp l pq pr">const directory = await carfsModule.setupSubDirectory();</span><span id="b00e" class="mx ks iq pi b gy ps pp l pq pr">/// ...</span></pre><blockquote class="nl"><p id="1988" class="nm nn iq bd no np nq nr ns nt nu me dk translated">但这并不奏效</p></blockquote><ul class=""><li id="ce23" class="mh mi iq ll b lm nv lp nw ls nx lw ny ma nz me mo mp mq mr bi translated"><code class="fe pf pg ph pi b">isFileUploaded</code>状态在<strong class="ll ir"> AFTER /同时</strong>Promise API解析【为<strong class="ll ir">Second Gif】</strong></li><li id="8aad" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated">我用<strong class="ll ir">这个解决问题。$ next tick)(</strong></li><li id="23d7" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated"><strong class="ll ir">此。$nextTick()。</strong></li></ul><pre class="kg kh ki kj gt pk pi pl pm aw pn bi"><span id="6fcc" class="mx ks iq pi b gy po pp l pq pr">this.isFileUploaded = true; // does not work until all Promise are resolved<br/>await this.$nextTick(); // console.log(this.isFileUploaded) // true    const directory = await carfsModule.setupSubDirectory();</span></pre></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="200d" class="kr ks iq bd kt ku or kw kx ky os la lb jw ot jx ld jz ou ka lf kc ov kd lh li bi translated">process.nextTick in Node.js</h1><p id="5322" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><em class="mf">在node.js中，nextTick帮助其回调函数先于Event循环中的其他回调函数执行</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="d513" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls pt lu lv lw pu ly lz ma pv mc md me ij bi translated">产出为</p><pre class="kg kh ki kj gt pk pi pl pm aw pn bi"><span id="786b" class="mx ks iq pi b gy po pp l pq pr">nextTick<br/>promise<br/>timeout<br/>immediate</span></pre><ul class=""><li id="026d" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated"><code class="fe pf pg ph pi b">process.nextTick</code>先于<code class="fe pf pg ph pi b">setImmediate</code>或<code class="fe pf pg ph pi b">setTimeout</code>执行</li><li id="313f" class="mh mi iq ll b lm ms lp mt ls mu lw mv ma mw me mo mp mq mr bi translated">此外，已解析的承诺比<code class="fe pf pg ph pi b">setImmediate</code>或<code class="fe pf pg ph pi b">setTimeout</code>具有更高的优先级</li></ul><h1 id="6d53" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">回到我们的例子</h1><p id="148a" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir"> <em class="mf"> nextTick </em> </strong> <em class="mf">优先于</em><strong class="ll ir"><em class="mf">promise . resolve</em></strong><em class="mf">，</em><strong class="ll ir"><em class="mf">setTimeout</em></strong><em class="mf">，</em><strong class="ll ir"><em class="mf">set immediate</em></strong></p><p id="c4e6" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls pt lu lv lw pu ly lz ma pv mc md me ij bi translated">让我们来看看这个例子</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="2f56" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls pt lu lv lw pu ly lz ma pv mc md me ij bi translated">产量为</p><pre class="kg kh ki kj gt pk pi pl pm aw pn bi"><span id="e3b1" class="mx ks iq pi b gy po pp l pq pr">helloworld3<br/>helloworld5<br/>nextTick<br/>promise<br/>timeout</span></pre><p id="d7ba" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls pt lu lv lw pu ly lz ma pv mc md me ij bi translated">换句话说，<strong class="ll ir"> isFileUploaded </strong>状态将优先从<code class="fe pf pg ph pi b">false</code>转换为<code class="fe pf pg ph pi b">true</code>,而不管它在函数中的位置</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><ul class=""><li id="2f00" class="mh mi iq ll b lm mj lp mk ls ml lw mm ma mn me mo mp mq mr bi translated"><strong class="ll ir">微任务:</strong> <code class="fe pf pg ph pi b">process.nextTick</code>和<code class="fe pf pg ph pi b">Promise</code>常被称为微任务</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/63b13e89b7e57f108e022b80e10cd2d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/0*eyVnQyTIRKiI9mwE.png"/></div></figure><blockquote class="nl"><p id="a504" class="nm nn iq bd no np nq nr ns nt nu me dk translated">希望你喜欢阅读</p></blockquote><figure class="ob oc od oe of kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi px"><img src="../Images/b6e0fe66c1bb701091fbcfa12d34368b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UwDcJH4SDiE9GxVF"/></div></div><figcaption class="og oh gj gh gi oi oj bd b be z dk">Photo by <a class="ae mg" href="https://unsplash.com/@craft_ear?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jan Tinneberg</a> on <a class="ae mg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div></div>    
</body>
</html>
<html>
<head>
<title>Context APIs: A Must-Know for React Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">上下文API:React开发人员的必备知识</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-context-apis-in-detail-5943b54940f5?source=collection_archive---------2-----------------------#2020-05-24">https://javascript.plainenglish.io/react-context-apis-in-detail-5943b54940f5?source=collection_archive---------2-----------------------#2020-05-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0b2d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">什么是React上下文，它对开发者有什么好处？</h2></div><p id="686a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Technofunnel </strong>展示了另一篇关于<strong class="kh ir"> React上下文API</strong>的文章，该API提供了一种通过组件树<strong class="kh ir">传递数据的机制，而无需手动将道具传递到每一级</strong>。我们<strong class="kh ir">不需要将数据传递给每个级别</strong>，相反，我们<strong class="kh ir">在更高级别的组件</strong>上创建一个上下文，并使<strong class="kh ir">上下文数据对子组件或子组件</strong>可用。本文着重于详细理解React上下文概念。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/d254b323817e32bccf1e177eba6d25ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*A3x6bjpL-321R9E_kRgpaA.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Working with React Context</figcaption></figure><h1 id="1506" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">何时使用React上下文</h1><p id="e419" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在本节中，我们将看到何时需要使用<strong class="kh ir"> React上下文API</strong>。React上下文API使用简单且非常高效。React应用程序可能由具有父子关系的组件层次结构组成，该层次结构可以有多个级别。</p><p id="98ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们的应用程序在顶层包含一个组件，该组件包含一些数据，这些数据需要被较低层的组件使用。组件包含在树状结构中，其中一个组件是父组件，其他组件表示子组件，这些子组件可以具有表示树状结构的更多子组件。</p><h2 id="5a0d" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">让我们看一个简单的例子。</h2><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae my" href="https://gist.github.com/Mayankgupta688/152825398bd8fe975ed133a6d20c56a9" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Mayankgupta688/152825398bd8fe975ed133a6d20c56a9</a></figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mz mx l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae my" href="https://codesandbox.io/s/pedantic-euclid-4i561?file=/src/App.js" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/pedantic-euclid-4i561?file=/src/App.js</a></figcaption></figure><p id="e5ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，我们有一个顶级组件“祖父母”，它包含一些数据行“姓氏”。这个组件包含另一个组件“Parent ”,我们在“props”数据中将这个“姓氏”信息发送给它。这个“父”组件不使用这个数据，它只需要将这个数据传递给更进一步的子组件“子”，然后这个“子”组件使用这个“姓”信息。</p><h2 id="160c" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">上述代码的问题</h2><p id="f5c8" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在上面的场景中，仅在子级别需要数据。但是我们在整个层次结构中传播数据，使其在较低的级别(子级)可用。使用上下文，我们可以减少在整个层次结构中传递数据的开销，使其在最低级别的组件中可用。接下来，让我们详细了解如何使用React上下文来减少开销。</p><h1 id="6992" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用反应上下文</h1><p id="f770" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">为了解决上述问题，我们可以使用React上下文API。React上下文API包括:</p><h2 id="beb6" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">1.上下文对象</h2><p id="39db" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">为了在应用程序中使用上下文，我们首先需要创建一个能够存储应用程序数据的上下文对象。层次结构可以使用该对象来提供或检索数据。下面的代码将使我们能够为层次结构创建一个上下文对象。</p><pre class="lc ld le lf gt na nb nc nd aw ne bi"><span id="e7c4" class="mk lo iq nb b gy nf ng l nh ni">const FamilyContext = React.createContext({});</span></pre><h2 id="19e6" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">2.上下文提供者</h2><pre class="lc ld le lf gt na nb nc nd aw ne bi"><span id="3efa" class="mk lo iq nb b gy nf ng l nh ni">const FamilyProvider = FamilyContext.Provider;</span></pre><p id="fe21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">提供程序用于向该上下文对象提供值。我们可以使用这个上下文提供者对象将at添加到上下文中。</p><h2 id="ae30" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">3.上下文消费者</h2><pre class="lc ld le lf gt na nb nc nd aw ne bi"><span id="f40d" class="mk lo iq nb b gy nf ng l nh ni">const FamilyConsumer = FamilyContext.Consumer;</span></pre><p id="72ed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个消费者对象用于检索上下文的值，并使该值对组件可用。使用“上下文提供者”保存在上下文中的值可以使用上下文消费者对象来检索。</p><p id="00a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们试着看看相同场景的完全实现的代码。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae my" href="https://gist.github.com/Mayankgupta688/bac51141facecaf2b8dedb0d2c11ec96" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Mayankgupta688/bac51141facecaf2b8dedb0d2c11ec96</a></figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mz mx l"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae my" href="https://codesandbox.io/s/usingcontextapis-u5rto" rel="noopener ugc nofollow" target="_blank">https://codesandbox.io/s/usingcontextapis-u5rto</a></figcaption></figure><h2 id="3bd5" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">在上面的代码中，有以下几点需要注意:</h2><ol class=""><li id="2bbd" class="nj nk iq kh b ki mf kl mg ko nl ks nm kw nn la no np nq nr bi translated">在顶部，我们创建了上下文对象(FamilyContext)、提供者对象(FamilyProvider)和消费者对象(FamilyConsumer)</li><li id="6e08" class="nj nk iq kh b ki ns kl nt ko nu ks nv kw nw la no np nq nr bi translated">使用Provider对象将值添加到“祖父”组件的上下文中。我们使用“value”属性将所需的数据添加到提供者对象中。数据不需要在组件“父”中使用。</li><li id="0c9f" class="nj nk iq kh b ki ns kl nt ko nu ks nv kw nw la no np nq nr bi translated">为了使“Children”组件可以直接使用这些数据，我们使用了消费者对象(FamilyConsumer)。这将使子组件可以直接使用数据。</li></ol><p id="61c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在钩子中使用上下文，可以参考下面的URL:</p><div class="nx ny gp gr nz oa"><a href="https://medium.com/javascript-in-plain-english/usecontext-in-react-hooks-aa9a60b8a461" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">如何在React钩子中使用“useContext”</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">理解React“使用上下文”挂钩</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo lh oa"/></div></div></a></div><h1 id="0f2e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结束语…</h1><p id="59d5" class="pw-post-body-paragraph kf kg iq kh b ki mf jr kk kl mg ju kn ko mh kq kr ks mi ku kv kw mj ky kz la ij bi translated">在上面的例子中，数据不需要在整个层次结构中传递，数据在顶层是可用的，并且通过使用上下文对象使子节点直接可用。因此消除了在整个层次结构中使用“props”传递数据的需求。</p><h2 id="b368" class="mk lo iq bd lp ml mm dn lt mn mo dp lx ko mp mq lz ks mr ms mb kw mt mu md mv bi translated">更多文章，请关注我们:</h2><div class="nx ny gp gr nz oa"><a href="https://medium.com/@mayank.gupta.6.88" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">马扬克·古普塔-培养基</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">阅读马扬克·古普塔在媒介上的作品。9年的前端技术和平均堆栈经验。正在进行…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/https-medium-com-mayank-gupta-6-88-21-performance-optimizations-techniques-for-react-d15fa52c2349" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">22反应性能优化技术</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">React编程的最佳优化技术。</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/working-with-react-pure-components-166ded26ae48" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">使用React纯组件</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">什么时候使用纯组件是个好主意？</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/introduction-to-react-hooks-e0102c038bf1" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">React挂钩简介</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">如何在React中使用状态挂钩</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/introduction-to-reacts-higher-order-components-hocs-c42182fb634" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">React的高阶组件(hoc)</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">借助用例理解React HOCs</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="os l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/https-medium-com-mayank-gupta-6-88-react-useeffect-hooks-in-action-2da971cfe83f" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">反应使用效果挂钩</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">关于React的使用效果挂钩，你需要知道的是</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/usememo-hook-in-react-d8d0eda6598a" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">React中的useMemo挂钩</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">如何用useMemo钩子优化性能</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ot l ol om on oj oo lh oa"/></div></div></a></div><p id="c3e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您将我们与主题联系起来…您也可以通过我们的YouTube频道与我们联系:</p><div class="nx ny gp gr nz oa"><a href="https://www.youtube.com/channel/UCo-h1M-5M6Y5D4Lgut8ge4w" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">技术漏斗</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">欢迎来到技术漏斗...这个视频关注的是JavaScript中承诺的概念。异步等待是新的…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.youtube.com</p></div></div><div class="oj l"><div class="ou l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://www.facebook.com/TechnoFunnel" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">技术漏斗</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">印度德里的TechnoFunnel。47喜欢16谈论这个。TechnoFunnel专注于提供IT服务</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.facebook.com</p></div></div><div class="oj l"><div class="ov l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://www.facebook.com/developerfunnel/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">显影剂漏斗</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">英国伦敦开发商漏斗。285个赞。寻找最新话题|面试必备话题</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.facebook.com</p></div></div><div class="oj l"><div class="ow l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://www.facebook.com/learnjavascriptbasics/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">learn-javascript.in</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">在印度德里学习javascript。1.9K喜欢。该页面的目的是集中学习JavaScript的基础知识…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.facebook.com</p></div></div><div class="oj l"><div class="ox l ol om on oj oo lh oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a href="https://www.youtube.com/channel/UC26NMdgQBbY6wunk_vZwQZQ" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">显影剂漏斗</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">这个频道将提供所有的新闻和技术更新</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">www.youtube.com</p></div></div><div class="oj l"><div class="oy l ol om on oj oo lh oa"/></div></div></a></div><p id="32a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"># techno funnel # JavaScript # react #编程#开发#前端</p><p id="0ac8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="oz">更多内容看</em><a class="ae my" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="oz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
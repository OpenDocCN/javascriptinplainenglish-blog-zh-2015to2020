<html>
<head>
<title>JavaScript Events Handlers — ondblclick and ondrag</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript事件处理程序— ondblclick和ondrag</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-events-handlers-ondblclick-and-ondrag-157446283bde?source=collection_archive---------3-----------------------#2020-01-23">https://javascript.plainenglish.io/javascript-events-handlers-ondblclick-and-ondrag-157446283bde?source=collection_archive---------3-----------------------#2020-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn js jt ju jv gh gi paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gh gi jr"><img src="../Images/0b671845b80c789b51f40b1336a97c07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Uai4Z8A8Fo4PfPqe"/></div></div><figcaption class="kc kd gj gh gi ke kf bd b be z dk">Photo by <a class="ae kg" href="https://unsplash.com/@oscaresquivel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Oscar Ivan Esquivel Arteaga</a> on <a class="ae kg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="faad" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">在JavaScript中，事件是应用程序中发生的动作。它们是由各种事情触发的，比如输入、提交表单、调整大小等元素变化，或者应用程序运行时发生的错误等。我们可以分配事件处理程序来处理这些事件。发生在DOM元素上的事件可以通过为相应事件的DOM对象的属性分配一个事件处理程序来处理。我们将看看<code class="fe jn jo jp jq b">ondblclick</code>和<code class="fe jn jo jp jq b">ondrag</code>事件处理程序以及如何使用它们。</p><h1 id="ce98" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ondblclick</h1><p id="bc4b" class="pw-post-body-paragraph kh ki iq kj b kk md km kn ko me kq kr ks mf ku kv kw mg ky kz la mh lc ld le ij bi translated">HTML元素的<code class="fe jn jo jp jq b">ondblclick</code>属性让我们分配一个事件处理函数来处理<code class="fe jn jo jp jq b">dblclick</code>事件，当用户双击一个元素时触发该事件。它在两次单击都完成后触发。例如，我们可以用它来记录双击的位置。我们首先添加HTML代码来显示位置，如下面的代码所示:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="1354" class="mq lg iq jq b gy mr ms l mt mu">&lt;p id='dblclick-log'&gt;</span><span id="fed3" class="mq lg iq jq b gy mv ms l mt mu">&lt;/p&gt;</span></pre><p id="ce8b" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然后我们添加JavaScript代码，将事件处理函数分配给<code class="fe jn jo jp jq b">document.ondblclick</code>属性，如下面的代码所示:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="e721" class="mq lg iq jq b gy mr ms l mt mu">const dblclickLog = document.getElementById('dblclick-log');</span><span id="103f" class="mq lg iq jq b gy mv ms l mt mu">document.ondblclick = (e) =&gt; {<br/>  dblclickLog.textContent = `Double clicked on: (${e.clientX}, ${e.clientY})`;<br/>}</span></pre><p id="af12" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">上面的<code class="fe jn jo jp jq b">e</code>参数是一个<code class="fe jn jo jp jq b">MouseEvent</code>，它具有以下特性:</p><ul class=""><li id="b689" class="mw mx iq kj b kk kl ko kp ks my kw mz la na le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">altKey</code> —一个布尔只读属性，如果触发鼠标事件时Qlt键被按下，则返回<code class="fe jn jo jp jq b">true</code>。</li><li id="0985" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">button</code> —只读属性，指示触发鼠标事件时按下的按钮号(如果适用)。</li><li id="ba63" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">buttons</code> —一个只读属性，当触发鼠标事件时按钮被按下(如果有)。</li><li id="ea98" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">clientX</code> —只读属性，具有鼠标指针在文档坐标中的X坐标。</li><li id="23c7" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">clientY</code> —只读属性，具有鼠标指针在本地文档坐标中的Y坐标。</li><li id="70cc" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">ctrlKey</code>—boolean只读，如果触发鼠标事件时按下了控制键，则返回<code class="fe jn jo jp jq b">true</code>。</li><li id="de13" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">metaKey</code> —一个布尔只读，如果触发鼠标事件时元键被按下，则返回<code class="fe jn jo jp jq b">true</code>。meta键是Macintosh键盘上的command或Apple键，是Windows键盘上的Windows键。</li><li id="c19e" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">movementX</code> —一个只读，它具有鼠标指针相对于上一次mousemove事件位置的X坐标。</li><li id="06a2" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">movementY</code> —一个只读属性，具有鼠标指针相对于上一次mousemove事件位置的Y坐标。</li><li id="bb0b" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">offsetX</code> —一个只读属性，具有鼠标指针相对于目标节点填充边缘位置的X坐标</li><li id="a757" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">offsetY </code> —一个只读属性，具有鼠标指针相对于目标节点填充边缘位置的Y坐标</li><li id="5c09" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">pageX</code> —只读属性，具有鼠标指针相对于整个文档的X坐标。</li><li id="596f" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">pageY</code> —一个只读属性，即鼠标指针相对于整个文档的Y坐标。</li><li id="de45" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">region</code> —只读属性，返回受事件影响的点击区域的ID。如果没有命中区域受到影响，则返回<code class="fe jn jo jp jq b">null</code>。</li><li id="acbb" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">relatedTarget</code> —只读属性，具有事件的辅助目标(如果有的话)。</li><li id="5111" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">screenX</code> —只读属性，具有鼠标指针在全局(屏幕)坐标中的X坐标。</li><li id="9e6e" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">screenY</code> —一个只读属性，具有鼠标指针在全局(屏幕)坐标中的Y坐标。</li><li id="ef21" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">shiftKey</code> —一个布尔只读属性，如果触发鼠标事件时按下了shift键，则返回<code class="fe jn jo jp jq b">true</code>。</li><li id="2d4a" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">which</code> —只读，当触发鼠标事件时按钮被按下。</li><li id="1225" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">mozPressure</code> —一个只读的，它具有生成事件时施加到触摸或平板设备上的压力量。该值介于<code class="fe jn jo jp jq b">0.0</code>(最小压力)和<code class="fe jn jo jp jq b">1.0</code>(最大压力)之间。这是一个不推荐使用的(非标准)属性。我们应该使用<code class="fe jn jo jp jq b">PointerEvent</code>对象的<code class="fe jn jo jp jq b">pressure</code>属性。</li><li id="c911" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">mozInputSource</code> —只读属性，具有生成事件的设备类型(下面列出的<code class="fe jn jo jp jq b">MOZ_SOURCE_*</code>常量之一)。我们可以确定鼠标事件是由实际的鼠标还是由触摸事件生成的，或者检测用户与该属性交互的其他输入源。</li><li id="2a0f" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">webkitForce</code> —只读属性，包含单击时施加的压力量</li><li id="c53f" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">x</code> —只读属性，是<code class="fe jn jo jp jq b">clientX</code>的别名。</li><li id="4788" class="mw mx iq kj b kk nf ko ng ks nh kw ni la nj le nb nc nd ne bi translated"><code class="fe jn jo jp jq b">y</code> —只读属性，是<code class="fe jn jo jp jq b">clientY</code>的别名。</li></ul><p id="29a7" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">知道我们也可以跟踪像按下Alt键双击或按下Windows键双击这样的事情。首先，我们添加以下HTML代码来显示结果:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="ebbe" class="mq lg iq jq b gy mr ms l mt mu">&lt;p id='dblclick-log'&gt;</span><span id="a241" class="mq lg iq jq b gy mv ms l mt mu">&lt;/p&gt;<br/>&lt;p id='alt-pressed'&gt;</span><span id="b515" class="mq lg iq jq b gy mv ms l mt mu">&lt;/p&gt;<br/>&lt;p id='meta-pressed'&gt;</span><span id="22bc" class="mq lg iq jq b gy mv ms l mt mu">&lt;/p&gt;</span></pre><p id="987e" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然后在JavaScript代码中，我们添加:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="8529" class="mq lg iq jq b gy mr ms l mt mu">const dblclickLog = document.getElementById('dblclick-log');<br/>const altPressed = document.getElementById('alt-pressed');<br/>const metaPressed = document.getElementById('meta-pressed');</span><span id="3654" class="mq lg iq jq b gy mv ms l mt mu">document.ondblclick = (e) =&gt; {<br/>  dblclickLog.textContent = `Double clicked on: (${e.clientX}, ${e.clientY})`;<br/>  altPressed.textContent = e.altKey ? 'Alt key pressed' : '';<br/>  metaPressed.textContent = e.metaKey ? 'Windows key pressed' : '';<br/>}</span></pre><p id="80fd" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然后，我们可以跟踪当我们双击时是否按下了Alt或Windows键。</p><figure class="mi mj mk ml gt jv gh gi paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gh gi nk"><img src="../Images/80da70432b122c0d812ba19460e429ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*crbZCD7pPpFrXreb"/></div></div><figcaption class="kc kd gj gh gi ke kf bd b be z dk">Photo by <a class="ae kg" href="https://unsplash.com/@sharonmccutcheon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sharon McCutcheon</a> on <a class="ae kg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="cfed" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">翁德拉格</h1><p id="8dcf" class="pw-post-body-paragraph kh ki iq kj b kk md km kn ko me kq kr ks mf ku kv kw mg ky kz la mh lc ld le ij bi translated"><code class="fe jn jo jp jq b">ondrag</code>属性让我们分配一个我们定义的事件处理函数来处理<code class="fe jn jo jp jq b">drag</code>事件，当一个将<code class="fe jn jo jp jq b">draggable</code>属性值设置为<code class="fe jn jo jp jq b">true</code>的元素被拖动到浏览器屏幕上时，该事件被触发。例如，我们编写以下HTML代码来制作一个HTML框:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="bdc7" class="mq lg iq jq b gy mr ms l mt mu">&lt;div id='drag-box' draggable="true"&gt;</span><span id="6b89" class="mq lg iq jq b gy mv ms l mt mu">&lt;/div&gt;</span></pre><p id="5f4c" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然后，我们用CSS样式化它，宽100像素，高100像素，并填充红色背景:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="423a" class="mq lg iq jq b gy mr ms l mt mu">#drag-box {<br/>  width: 100px;<br/>  height: 100px;<br/>  background-color: red;<br/>}</span></pre><p id="5957" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">最后，我们可以添加JavaScript代码来跟踪框的拖动动作，方法是将一个事件处理函数分配给我们在HTML代码中创建的框的DOM元素的<code class="fe jn jo jp jq b">ondrag</code>属性:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="1000" class="mq lg iq jq b gy mr ms l mt mu">const dragBox = document.getElementById('drag-box');</span><span id="5a8c" class="mq lg iq jq b gy mv ms l mt mu">dragBox.ondrag = (e) =&gt; {<br/>  console.log(e);<br/>}</span></pre><p id="03dd" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然后当我们开始拖动时，当我们拖动盒子时，我们应该从<code class="fe jn jo jp jq b">console.log</code>得到如下输出:</p><pre class="mi mj mk ml gt mm jq mn mo aw mp bi"><span id="28e1" class="mq lg iq jq b gy mr ms l mt mu">altKey: false<br/>bubbles: true<br/>button: 0<br/>buttons: 1<br/>cancelBubble: false<br/>cancelable: true<br/>clientX: 90<br/>clientY: 68<br/>composed: true<br/>ctrlKey: false<br/>currentTarget: null<br/>dataTransfer: DataTransfer {dropEffect: "none", effectAllowed: "uninitialized", items: DataTransferItemList, types: Array(0), files: FileList}<br/>defaultPrevented: false<br/>detail: 0<br/>eventPhase: 0<br/>fromElement: null<br/>isTrusted: true<br/>layerX: 90<br/>layerY: 68<br/>metaKey: false<br/>movementX: 0<br/>movementY: 0<br/>offsetX: 82<br/>offsetY: 60<br/>pageX: 90<br/>pageY: 68<br/>path: (5) [div#drag-box, body, html, document, Window]<br/>relatedTarget: null<br/>returnValue: true<br/>screenX: 2250<br/>screenY: 520<br/>shiftKey: false<br/>sourceCapabilities: InputDeviceCapabilities {firesTouchEvents: false}<br/>srcElement: div#drag-box<br/>target: div#drag-box<br/>timeStamp: 5233.220000285655<br/>toElement: div#drag-box<br/>type: "drag"<br/>view: Window {parent: global, postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, …}<br/>which: 1<br/>x: 90<br/>y: 68</span></pre><p id="86c1" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">这些属性与来自<code class="fe jn jo jp jq b">MouseEvent</code>和<code class="fe jn jo jp jq b">Event</code>对象的属性相同，因为我们从事件处理函数的参数中获得的<code class="fe jn jo jp jq b">DragEvent</code>对象继承了这两个对象。我们可以用上面记录的<code class="fe jn jo jp jq b">x</code>和<code class="fe jn jo jp jq b">y</code>属性获得拖动坐标。</p><p id="ba9a" class="pw-post-body-paragraph kh ki iq kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">HTML元素的<code class="fe jn jo jp jq b">ondblclick</code>属性让我们分配一个事件处理函数来处理<code class="fe jn jo jp jq b">dblclick</code>事件，当用户双击一个元素时就会触发该事件。我们在事件处理函数的参数中得到一个<code class="fe jn jo jp jq b">MouseEvent</code>,这样我们就可以根据自己的喜好使用它的属性。属性让我们分配一个我们定义的事件处理函数来处理<code class="fe jn jo jp jq b">drag</code>事件，当一个将<code class="fe jn jo jp jq b">draggable</code>属性值设置为<code class="fe jn jo jp jq b">true</code>的元素在浏览器屏幕上被拖动时，该事件被触发。我们可以从<code class="fe jn jo jp jq b">DragEvent</code>对象中获得带有<code class="fe jn jo jp jq b">x</code>和<code class="fe jn jo jp jq b">y</code>属性的拖动坐标。</p></div></div>    
</body>
</html>
<html>
<head>
<title>How I added a loading screen to my React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在我的React应用程序中添加加载屏幕</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-i-added-a-loading-screen-to-my-react-slack-clone-a87a80c703aa?source=collection_archive---------5-----------------------#2020-07-27">https://javascript.plainenglish.io/how-i-added-a-loading-screen-to-my-react-slack-clone-a87a80c703aa?source=collection_archive---------5-----------------------#2020-07-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jk jl jm jn"><div class="bz fp l di"><div class="jo jp l"/></div></figure><p id="d54b" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">周末，我决定重访我构建的一个全栈Slack克隆。我想给它添加一些新功能，如添加表情符号的信息和所有当前用户的查看页面。但我也想为应用程序的初始加载添加一个加载屏幕。通过增强用户体验，加载屏幕可以是对应用程序的有益补充。在这篇文章中，我将回顾一下我是如何做到的。</p></div><div class="ab cl ko kp hr kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ig ih ii ij ik"><p id="097c" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">我想添加一个加载屏幕的原因是我不满意初始加载的速度。如果你像我一样，你可能正在使用Heroku的免费版本，或者类似的东西来托管你的项目。这是一个很好的服务，但因为它是免费的，你的应用程序可能不在Heroku的服务器优先列表上哈哈。因此，在我进入实际代码之前，我想提供一个web应用程序加载事件的概述。</p><p id="769a" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">下面是一个简单的图表:</p><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi kv"><img src="../Images/273015ffaa991bc9ebada4df00164988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSnaqenQpv_eXWWJ9uuAPQ.jpeg"/></div></div></figure><p id="2c6d" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">该网站的文件存储在一个服务器(Heroku)上，通过互联网发送给你所要求的用户。很简单，对吧？现在有不同的方式将这些文件发送给用户。</p><p id="82a5" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">一种是服务器端渲染，另一种是客户端渲染。我不打算深入探讨这个问题，但是已经有很多很棒的文章了。</p><p id="0128" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">我的app是客户端渲染；哪个更适合像我这样的互动网站。</p><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lg"><img src="../Images/3eb1835eeadcf8584d0290922c451287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRftPL0mxSxiVSg-E0P7IA.png"/></div></div></figure><p id="fd95" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">如你所见，浏览器完成了客户端渲染的所有工作。当浏览器下载js并执行react时，我想为用户提供内容。这就是加载屏幕出现的地方！</p><p id="a9c8" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">由于我的应用程序是客户端渲染，也是一个全栈应用程序，这意味着有一个前端和一个后端，加载事件可以分为两部分。首先为初始构建提供加载屏幕，其次在前端从后端加载数据时提供加载屏幕。</p><h2 id="70f4" class="lh li in bd lj lk ll dn lm ln lo dp lp kb lq lr ls kf lt lu lv kj lw lx ly lz bi translated">初始版本:</h2><p id="d865" class="pw-post-body-paragraph jq jr in js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn ig bi translated">如果你正在进行客户端渲染，DOM首先会看到你的公共文件夹中的根HTML文件。这就是加载屏幕要去的地方。现在，您可以将加载元素放在React应用程序的根DOM元素之外，并在React应用程序的初始装载中删除它们，但您也可以将它们放在根Dom元素内，React会在装载后自动删除它。无论哪种方式浮动你的船！</p><p id="5ff7" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">试着让加载屏幕尽可能简单。我的只是一个单一的图像和一些CSS动画。</p><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/6fea5e548bf92a4f0c081053bd4b9b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*R1pVHizmFn1EhDGzwxKAIw.png"/></div></figure><p id="20d6" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">现在添加了这个内容，加载事件看起来像这样:</p><figure class="kw kx ky kz gt jn"><div class="bz fp l di"><div class="jo jp l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">As a side note, this gif was taken off my site loading locally; that’s why it is so fast.</figcaption></figure><p id="3157" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">如果你注意到有一个我不想要的观点的快速闪现。特别是，如果没有消息存储在状态中，那么该视图将被有条件地呈现。造成这种情况的原因是视图在API调用完成之前就呈现出来了。这是我们可以为API调用添加第二个加载屏幕的地方。</p><h2 id="fd61" class="lh li in bd lj lk ll dn lm ln lo dp lp kb lq lr ls kf lt lu lv kj lw lx ly lz bi translated"><strong class="ak"> API调用:</strong></h2><p id="8794" class="pw-post-body-paragraph jq jr in js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn ig bi translated">这是我最初的React主要组件。我正在获取组件中的应用程序的所有数据。</p><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi mk"><img src="../Images/55f2499461d752f2335171dfce05bbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqj9Vq-w8pLY6w3wsgwRUw.png"/></div></div></figure><p id="bab6" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">我想补充的是这样的:</p><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ml"><img src="../Images/ca64871ad2deb79425c716f574b8ed62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVX8NHdvwhIknAxne9fmxA.png"/></div></div></figure><p id="0c93" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">在等待API调用之后，我可以调用handleLoad函数来改变主要组件的状态，呈现应用程序的其余部分，并清除任何更改，例如将我的Body标记的背景色从紫色改为白色。此外，我将该函数的主体包装在setTimeout中。这增加了加载事件的一致性。</p><p id="1402" class="pw-post-body-paragraph jq jr in js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ig bi translated">下面是最终的结果！我希望你会发现这些信息很有用，欢迎在下面留下你的评论！</p><figure class="kw kx ky kz gt jn"><div class="bz fp l di"><div class="jo jp l"/></div></figure><figure class="kw kx ky kz gt jn gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi mm"><img src="../Images/1b901beb13e0078ff45f78a87c63f343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JsXmDi544AfiApchvqdo9A.png"/></div></div></figure></div></div>    
</body>
</html>
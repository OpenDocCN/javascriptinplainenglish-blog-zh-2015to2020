<html>
<head>
<title>Reactive Forms in Angular 10 — How to Create a Login Form Using Reactive Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 10中的反应式表单—如何使用反应式表单创建登录表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/reactive-forms-in-angular-10-how-to-create-a-login-form-using-reactive-forms-c979e2b86135?source=collection_archive---------0-----------------------#2020-08-05">https://javascript.plainenglish.io/reactive-forms-in-angular-10-how-to-create-a-login-form-using-reactive-forms-c979e2b86135?source=collection_archive---------0-----------------------#2020-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/16967a2fefff35916a9a44edec94da3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8eKqQzO-VmNQ-qZq0Hpyg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mr_williams_photography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Micah Williams</a> on <a class="ae kc" href="https://unsplash.com/s/photos/login?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b9b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="lb">反应式表单</em> </strong>是在Angular中创建表单的替代方法。创建反应式表单的大部分繁重工作发生在组件类而不是模板(HTML文件)中。</p><p id="44a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用反应式表单的一个很大的好处是它使得测试更容易。这是因为所有与表单相关的代码都存在于组件类中。鉴于此，您不需要访问测试中的模板来测试您的表单。相反，您可以简单地编写一个单元测试。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="4348" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">模块设置</strong></p><p id="ac5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现反应式表单的第一步是将<code class="fe lj lk ll lm b">ReactiveFormsModule</code>导入到应用程序的模块中。这个模块可以从<code class="fe lj lk ll lm b">@angular/forms</code>导入。</p><p id="e0fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了简单起见，作为这个例子的一部分，我将在<code class="fe lj lk ll lm b">AppComponent</code>中编写所有与表单相关的代码。下面的代码片段展示了如何包含<code class="fe lj lk ll lm b">ReactiveFormsModule</code>来开始创建您的第一个反应式表单。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><h2 id="4288" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">创建反应式表单</h2><p id="1914" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">在我们开始之前，有两个重要的概念我们需要复习一下:<strong class="kf ir"> <em class="lb">表单组</em> </strong>和<strong class="kf ir"> <em class="lb">表单控件</em> </strong>。</p><p id="711f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">表单中的每个控件都是<code class="fe lj lk ll lm b">FormControl</code>类型。表单控件可以表示用户的名字、出生日期或出生国家。从用户的角度来看，这些可以是输入字段、文本区域或下拉列表。表单控件跟踪控件中的值、验证和事件。一个<code class="fe lj lk ll lm b">FormGroup</code>包含一组表单控件。</p><p id="7fe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了向表单添加控件，首先要实例化一个类型为<code class="fe lj lk ll lm b">FormGroup</code>的对象。当构建反应式表单时，对于你要创建的表单，第一步是创建一个<code class="fe lj lk ll lm b">FormGroup</code>。</p><p id="3eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从创建表单组开始。完成后，您需要将一个对象作为参数传入，其中:</p><ul class=""><li id="01b9" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated">这些键定义了控件的名称</li><li id="950e" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">这些值将是类型为<code class="fe lj lk ll lm b">FormControl</code>的对象</li></ul><p id="f8f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，如果我们有一个用户名和密码，您将创建一个带有关键字<code class="fe lj lk ll lm b">username</code>和<code class="fe lj lk ll lm b">password</code>的对象。作为值，您将暂时提供新的表单控件。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="0304" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着您的表单变得越来越复杂，有一种更简单的方法可以通过使用<code class="fe lj lk ll lm b">FormBuilder</code>类来构建它们。为此，您可以从注入<code class="fe lj lk ll lm b">FormBuilder</code>类并调用<code class="fe lj lk ll lm b">group</code>方法开始。</p><p id="6562" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为<code class="fe lj lk ll lm b">group</code>方法的参数，您将传入一个对象，其中</p><ul class=""><li id="0fd5" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated">这些键定义了控件的名称</li><li id="bc9a" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated">目前，这些值是空数组</li></ul><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="7a2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到目前为止，我们已经完成了组件类。让我们来看看模板中需要完成的内容。</p><p id="2f35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从您的模板中，您可以将表示表单控件的输入字段包装在一个<code class="fe lj lk ll lm b">form</code>标签中。下一步应该是将<code class="fe lj lk ll lm b">formGroup</code>指令添加到表单标签中。作为<code class="fe lj lk ll lm b">formGroup</code>指令的值，传入刚刚在组件类上实例化的表单组。</p><p id="8ee4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，为你的每一个控件添加一个<code class="fe lj lk ll lm b">formControlName</code>指令。作为值，您将传入一个字符串，该字符串的名称是您在component类中使用的表单控件的名称。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="7144" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">表单控件默认值</h2><p id="0bb8" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">如果出于某种原因，您需要为表单控件提供默认值，您可以将这些值作为第一个值传递给表单控件上的空数组。如果你想在你的控件中设置<code class="fe lj lk ll lm b">helloworld</code>为默认用户名，你需要做以下事情。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="441a" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">为表单控件设置默认值</h2><p id="cea8" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">有时候你需要为你的表单设置默认值。这可能是因为您有一个编辑表单，用户将在其中编辑某种类型的信息。“setValue”和“patchValue”方法将允许您更新表单中的值。作为参数，您需要传入一个对象。该对象的键将是表单控件名称。这些值将是每个表单控件的值。</p><p id="09e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你只想设置一个特定的表单控件，你可以调用<code class="fe lj lk ll lm b">patchValue</code>。<code class="fe lj lk ll lm b">patchValue</code>方法允许您更新表单中的一个或多个字段。以包含一个<code class="fe lj lk ll lm b">username</code>和<code class="fe lj lk ll lm b">password</code>表单控件的表单为例。在这种情况下，如果您只想为<code class="fe lj lk ll lm b">username</code>设置一个默认值，您可以执行以下操作。</p><pre class="ln lo lp lq gt nf lm ng nh aw ni bi"><span id="0701" class="lt lu iq lm b gy nj nk l nl nm">this.form.patchValue({ username: 'username' });</span></pre><p id="fa8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，<code class="fe lj lk ll lm b">setValue</code>方法将需要您传入一个包含表单所有控件的对象。换句话说，如果您试图只设置<code class="fe lj lk ll lm b">username</code>表单控件，这将导致类似这样的运行时错误:<em class="lb">必须为名为:“password”</em>的表单控件提供一个值。</p><p id="aaef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是该表单正确使用<code class="fe lj lk ll lm b">setValue</code>方法的一个例子。</p><pre class="ln lo lp lq gt nf lm ng nh aw ni bi"><span id="6fec" class="lt lu iq lm b gy nj nk l nl nm">this.form.setValue({ <br/>  username: 'username',<br/>  password: 'password'<br/>});</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="fabc" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">表单提交</h2><p id="39ba" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">到目前为止，我们已经创建了一个表单，但在您提交之前，我们无法对其执行太多操作。下一步是添加一个提交按钮，并检索每个控件的值。</p><p id="258b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要添加提交按钮，在模板中添加一个类型为<code class="fe lj lk ll lm b">submit</code>的<code class="fe lj lk ll lm b">button</code>元素。完成这些之后，您将需要在您的<code class="fe lj lk ll lm b">form</code>标签上添加一个<code class="fe lj lk ll lm b">ngSubmit</code>处理程序。作为该处理程序的一个参数，您将调用一个将在组件中创建的<code class="fe lj lk ll lm b">submitForm</code>函数。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="4e1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在您的组件类中，您现在将实现<code class="fe lj lk ll lm b">submitForm</code>函数。值得一提的是，您可以给这个函数取任何名称。</p><p id="22e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个函数中，您将通过调用<code class="fe lj lk ll lm b">this.form.getRawValue()</code>来检索表单控件的值。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="3ac9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方法调用将返回一个对象，其中键是控件的名称，值是表单控件的值。例如，如果用户为用户名输入了<code class="fe lj lk ll lm b">helloworld</code>和<code class="fe lj lk ll lm b">password</code>作为密码，则该对象将如下所示:</p><pre class="ln lo lp lq gt nf lm ng nh aw ni bi"><span id="e6f0" class="lt lu iq lm b gy nj nk l nl nm">{<br/>  username: "helloworld",<br/>  password: "password"<br/>}</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="f61b" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">验证表单控件</h2><p id="ac71" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">验证器是允许你在每个表单控件中添加验证的函数。这些验证可能很简单，比如在表单上创建一个必填字段，或者验证用户输入的电子邮件地址是否有效。</p><p id="d5be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然您可以创建自己的验证器，但是Angular提供了一些现成的验证器。以下是Angular提供的一些验证器:</p><ul class=""><li id="13b6" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated"><code class="fe lj lk ll lm b">RequiredValidator</code> -验证表单控件是否有值，并根据需要标记它</li><li id="7037" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">EmailValidator</code> -验证表单控件是否具有有效的电子邮件地址</li><li id="4b60" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">MinLengthValidator</code> -验证表单控件中文本的长度是否大于或等于值</li><li id="a520" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">MaxLengthValidator</code> -验证表单控件中文本的长度小于或等于值</li><li id="63b7" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">MaxValidator</code> -验证表单控件中的数字小于或等于值</li><li id="6c60" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">MinValidator</code> -验证表单控件中的数字是否大于最小值或等于值</li><li id="c371" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">PatternValidator</code> -验证表单控件中的文本是否匹配特定的正则表达式</li></ul><p id="3de1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要添加验证程序，您需要将其作为表单控件初始化的一部分进行添加。Angular提供的所有验证器都可以从<code class="fe lj lk ll lm b">@angular/forms</code>中的<code class="fe lj lk ll lm b">Validators</code>类导入。</p><p id="93c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们将使<code class="fe lj lk ll lm b">username</code>和<code class="fe lj lk ll lm b">password</code>字段成为必填字段。为此，我们将使用<code class="fe lj lk ll lm b">RequiredValidator</code>，并将<code class="fe lj lk ll lm b">Validators.required</code>作为表单控件数组的第二个值添加到两个控件中。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="fec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想在表单控件中添加多个验证器，您需要将它们作为表单控件值的第二个值传递到一个数组中。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="1b83" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">自定义验证程序</h2><p id="43bf" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">正如您所看到的，Angular为您的表单提供了一组非常好的默认验证器。最大的问题是，如果您需要自己的验证器呢？好消息是，这很容易做到。</p><p id="b045" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您想要一个验证器来验证密码不是单词<code class="fe lj lk ll lm b">password</code>。为了创建您的自定义验证器，您必须创建一个验证它的函数。作为一个参数，您将接受一个类型为<code class="fe lj lk ll lm b">FormControl</code>的对象。接下来，您将从表单控件中获取值，如果存在错误，则返回一个错误。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="7486" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一步是在表单控件上使用这个自定义验证器。要做到这一点，您只需在构建<code class="fe lj lk ll lm b">FormGroup</code>时将其添加到验证器列表中。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="8576" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">验证表单是否有效</h2><p id="fc06" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">到目前为止，您已经有了一个表单控件，并向其中添加了一个验证器。下一步是在用户单击提交按钮时验证表单是否有效。</p><p id="2c66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">做到这一点非常简单，您只需要从表单组中的<code class="fe lj lk ll lm b">valid</code>属性获取值。在这种情况下，在您的<code class="fe lj lk ll lm b">submitForm</code>方法中，您可以执行一个条件语句来验证<code class="fe lj lk ll lm b">this.form.valid</code>是否为真，然后您继续前进，对这些数据执行一些其他类型的操作。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="666d" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">禁用提交按钮</h2><p id="05a4" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">根据应用程序的要求，在某些情况下，您可能希望禁用表单的“提交”按钮。</p><p id="036e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种情况的一个典型用例是，当表单不处于有效状态时，您希望禁用提交按钮。为此，您可以向提交按钮添加<code class="fe lj lk ll lm b">disabled</code>属性。作为一个值，您将传入<code class="fe lj lk ll lm b">!form.valid</code>以仅在表单无效时禁用它。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="51bd" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">显示错误</h2><p id="3a6f" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">为了在模板上显示错误，您需要首先从表单中获取表单控件。为此，您需要在模板上调用<code class="fe lj lk ll lm b">form.get('formControlName')</code>，其中<code class="fe lj lk ll lm b">formControlName</code>是您的控件的名称。</p><p id="b794" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，我们将为<code class="fe lj lk ll lm b">username</code>控件添加验证。这样做之后，您可以调用<code class="fe lj lk ll lm b">hasError</code>方法，在这里您将传入错误的名称。每当你使用<code class="fe lj lk ll lm b">Validators.required</code>时，错误名称将会是<code class="fe lj lk ll lm b">required</code>。<code class="fe lj lk ll lm b">hasError</code>方法将返回一个布尔值。</p><p id="c286" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑到这一点，您可以在模板中使用<code class="fe lj lk ll lm b">*ngIf</code>结构指令来决定是否要显示错误消息。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="486a" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">表单状态</h2><p id="8f07" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">有角度的窗体及其控件可以有不同的状态，例如:<br/> - <strong class="kf ir"> <em class="lb">原始的</em> </strong>:用户没有改变窗体控件的值<br/> - <strong class="kf ir"> <em class="lb">脏的</em> </strong>:与原始的相反<br/> - <strong class="kf ir"> <em class="lb">已触摸</em> </strong>:用户已经访问了窗体控件并将其退出<br/> - <strong class="kf ir"> <em class="lb">未触摸</em> </strong>:与已触摸相反</p><p id="78ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些状态帮助您增强表单的行为方式。例如，如果用户没有输入用户名，您不希望显示错误消息。</p><p id="f5ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种选择是，当用户没有对表单做任何操作就点击提交按钮时，您可以考虑显示一个错误。另外，如果用户<strong class="kf ir"> <em class="lb">触摸了</em> </strong>表单控件，你可能只想显示错误信息。</p><p id="6a27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做的原因是，让用户看到一个错误百出的表单可能会很烦。默认情况下，当表单加载时，它可能没有用户名。一种更友好的方法是只有当用户与表单控件交互时才显示错误。</p><p id="f30d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了检索表单控件的状态，您需要首先使用<code class="fe lj lk ll lm b">form.get('formControlName')</code>获取表单控件。完成此操作后，您可以在表单控件上调用下列任何布尔属性。</p><ul class=""><li id="5c77" class="mr ms iq kf b kg kh kk kl ko mt ks mu kw mv la mw mx my mz bi translated"><code class="fe lj lk ll lm b">dirty</code></li><li id="e8bb" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">pristine</code></li><li id="1960" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">touched</code></li><li id="9e44" class="mr ms iq kf b kg na kk nb ko nc ks nd kw ne la mw mx my mz bi translated"><code class="fe lj lk ll lm b">untouched</code></li></ul><p id="5e93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看几个场景，以便更好地理解窗体状态在Angular中是如何工作的。</p><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/75f52ac2e3b8416342eaf9643abd2eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jin7WHdKFeU8IOHc6Mb1wg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Form States Scenario #1 — User enters a value on form control</figcaption></figure><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/73354dd364dae573ed14a96da30f1138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2qj05YZ9Sy6TdqhuBhUoQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Form States Scenario #2 — User enters a value and erases it from form control</figcaption></figure><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/d87374fbb24c439ca4e09f66bf0b2a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c_0OB3lEyK8EHbsecdhBIg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Form States Scenario #3 — User visits form control without entering a value</figcaption></figure><p id="d78f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您在下面的例子中看到的，我们添加了一个<code class="fe lj lk ll lm b">*ngIf</code>，在这里我们有条件地显示错误消息。如果错误存在，并且表单控件是脏的，那么我们向用户显示一条错误消息。</p><figure class="ln lo lp lq gt jr"><div class="bz fp l di"><div class="lr ls l"/></div></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="f7f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这篇文章能帮助你更好地了解如何开始使用角反应式。尽情享受吧！</p><h2 id="d1f2" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">简单英语的JavaScript</h2><p id="a953" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码获得更多类似内容，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
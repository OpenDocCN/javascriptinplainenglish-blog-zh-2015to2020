<html>
<head>
<title>How to Manage State in React with the useState Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用useState钩子管理React中的状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-your-second-react-application-d6d50e3e1e91?source=collection_archive---------2-----------------------#2020-05-30">https://javascript.plainenglish.io/creating-your-second-react-application-d6d50e3e1e91?source=collection_archive---------2-----------------------#2020-05-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="e43b" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">基于组件的开发入门</h2><div class=""/><div class=""><h2 id="e3d2" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用功能组件上的useState挂钩管理状态</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/bf3f1610d34c9ad29069e4d2fcf0ecef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLHGpDhAH-e7wA_678M8ag.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Source: Author. Screen Shot After Running React Development Server</figcaption></figure><blockquote class="le"><p id="8ad6" class="lf lg iq bd lh li lj lk ll lm ln lo dk translated">让我们在React应用程序中管理状态！</p></blockquote><blockquote class="lp lq lr"><p id="9978" class="ls lt lu lv b lw lx ka ly lz ma kd mb mc md me mf mg mh mi mj mk ml mm mn lo ij bi translated">应用程序状态基本上是应用程序的存储内存，可以是变量、属性等形式。网络本质上是无状态的。</p></blockquote><p id="eea9" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在我们的上一篇教程文章<a class="ae mw" href="https://medium.com/javascript-in-plain-english/creating-your-first-react-application-db9dfe93b4f5" rel="noopener">创建您的第一个React应用程序</a>中，我们介绍了React并构建了一个漂亮的小应用程序来显示产品。</p><p id="913d" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在这个过程中，我们了解了基于组件的web开发，React应用程序的核心结构和流程；第一个重要概念，<strong class="lv ja">道具</strong>物体。</p><p id="dfac" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在这篇教程文章中，我们将使用同一个应用程序，并通过使用<a class="ae mw" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lv ja"> useState钩子</strong> </a>来学习另一个非常重要的概念<strong class="lv ja">管理状态</strong>。使用useState函数还将公开一个函数，它可以根据需要命名，允许我们更新状态。使用useState和一个函数来更新状态将为我们提供状态管理。此外，我们将从<strong class="lv ja">事件处理</strong>开始。</p><h1 id="5983" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated">你将会学到什么，</h1><ul class=""><li id="93c9" class="np nq iq lv b lw nr lz ns mq nt ms nu mu nv lo nw nx ny nz bi translated">有状态和无状态组件的基础</li><li id="6d6f" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">什么是使用状态挂钩。</li><li id="d413" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">如何使用useState钩子？</li><li id="2276" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">如何使用函数更新状态？</li><li id="c3cc" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">如何实现按钮的onClick事件处理程序？</li></ul><h2 id="4c98" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">重要！</h2><p id="70f4" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">我们之前学过的<strong class="lv ja">道具</strong>和现在的<strong class="lv ja">状态，</strong>是React中要学习的两个非常重要的首要概念。为什么？因为，</p><blockquote class="lp lq lr"><p id="2d29" class="ls lt lu lv b lw mo ka ly lz mp kd mb mc mr me mf mg mt mi mj mk mv mm mn lo ij bi translated">如果组件的状态已经改变，重新<strong class="lv ja">渲染</strong>只能被<strong class="lv ja">触发</strong>。状态可以通过props更改或直接setState更改来更改。组件得到更新的状态，并且<strong class="lv ja">反应</strong>决定是否应该重新<strong class="lv ja">渲染</strong>组件</p></blockquote></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><p id="e3ed" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">我们将使用我们在<a class="ae mw" href="https://medium.com/javascript-in-plain-english/creating-your-first-react-application-db9dfe93b4f5" rel="noopener">中构建的<strong class="lv ja"> productlister </strong>应用程序来创建您的第一个React应用程序</a>作为起点。</p><p id="5ad4" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><em class="lu">如果您也阅读并编写了代码，</em> <a class="ae mw" href="https://medium.com/javascript-in-plain-english/react-router-and-spas-made-easy-19fd1db0d6fc" rel="noopener"> <em class="lu">使用React-Router创建SPA </em> </a> <em class="lu">，如果您愿意，您可以使用该应用程序作为起点。</em></p><p id="e6f9" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">在本教程中，我们只需对App组件App.js进行更改。</strong></p></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><h2 id="606d" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">我们应用程序的预览</h2><p id="dd40" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">这里是<em class="lu">原始productlister </em>应用程序的屏幕显示。它有一个功能性的<strong class="lv ja">产品</strong>组件，通过<strong class="lv ja">道具</strong>对象接收产品的名称和价格。然而，<em class="lu">数据是静态的。</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/5df13942db13cd6dbfc4e863320b9183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*pqD8_Ilpi53iu1TK2y1fEw.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Our First React App with a functional Component and Props</figcaption></figure><p id="832b" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在本文中，我们将允许用户输入并应用折扣代码。这将通过使用<a class="ae mw" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lv ja">使用状态</strong> </a> <strong class="lv ja">和我们用来更新状态的函数来触发状态的改变。</strong></p><p id="30a2" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">新应用:在点击“应用折扣”按钮之前。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pb"><img src="../Images/c954e6f0c97de42dd4caa5b768d4e241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7Qhnz4uT2cixl6AXbvmsw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Before Apply Discount is clicked</figcaption></figure><p id="29cd" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">新应用:点击“应用折扣”按钮后。注意价格。T19】</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pc"><img src="../Images/34f833d77a3773424fa0b3198e8df09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqsqIGDsoRPx2lb_mWwDvQ.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">After Apply Discount is clicked. The state has changed.</figcaption></figure></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><h2 id="2b56" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">什么是有状态和无状态组件？</h2><blockquote class="lp lq lr"><p id="dda0" class="ls lt lu lv b lw mo ka ly lz mp kd mb mc mr me mf mg mt mi mj mk mv mm mn lo ij bi translated">有状态的组件跟踪变化的数据，而无状态的组件打印出通过props给它们的东西，或者它们总是呈现同样的东西。</p></blockquote><p id="54d5" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">对于需要改变数据的组件，我们将使用<strong class="lv ja"> useState函数和一个更新状态的函数。</strong></p><blockquote class="lp lq lr"><p id="3123" class="ls lt lu lv b lw mo ka ly lz mp kd mb mc mr me mf mg mt mi mj mk mv mm mn lo ij bi translated"><em class="iq">钩子</em>是<strong class="lv ja"> React 16.8 </strong>中新增的。它们允许您使用状态和其他React特性，而无需编写类。</p></blockquote><p id="c736" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">最后一句话很重要，我们将继续只使用功能组件，而不是基于类的组件。</p></div><div class="ab cl ot ou hu ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ij ik il im in"><h1 id="2617" class="mx my iq bd mz na pd nc nd ne pe ng nh kf pf kg nj ki pg kj nl kl ph km nn no bi translated">我们开始吧</h1><h2 id="a440" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">从哪里开始</h2><p id="d920" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">如果您在创建第一个React应用程序时构建了productlister <a class="ae mw" href="https://medium.com/javascript-in-plain-english/creating-your-first-react-application-db9dfe93b4f5" rel="noopener">，请以此为起点。</a></p><p id="2402" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">如果您没有，请参考<a class="ae mw" href="https://medium.com/javascript-in-plain-english/creating-your-first-react-application-db9dfe93b4f5" rel="noopener">创建您的第一个React应用程序</a>，或者按照它进行操作，或者只需<em class="lu">获取文章底部的代码</em>。</p><h2 id="b600" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">管理功能组件中的状态</h2><h2 id="acd3" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">使用状态挂钩(函数)</h2><p id="6437" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">React钩子是React给你的一组函数，供功能组件使用。</p><blockquote class="le"><p id="2603" class="lf lg iq bd lh li pi pj pk pl pm lo dk translated">useState是用于管理功能组件中的状态的钩子。</p></blockquote><p id="590a" class="pw-post-body-paragraph ls lt iq lv b lw lx ka ly lz ma kd mb mq md me mf ms mh mi mj mu ml mm mn lo ij bi translated">由于我们的<strong class="lv ja"> App.js </strong>是一个功能组件，我们需要通过导入它来告诉它我们想要使用useState钩子。</p><ol class=""><li id="aa18" class="np nq iq lv b lw mo lz mp mq pn ms po mu pp lo pq nx ny nz bi translated">打开<strong class="lv ja"> App.js </strong>，在顶部修改第一行，使其导入useState。</li></ol><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="f8b3" class="of my iq ps b gy pw px l py pz">import React, <strong class="ps ja">{useState}</strong> from 'react';</span></pre><p id="db1b" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">useState函数返回一个包含两个元素的数组。</strong></p><ul class=""><li id="6db6" class="np nq iq lv b lw mo lz mp mq pn ms po mu pp lo nw nx ny nz bi translated">第一个要素是我们当前的状态。</li><li id="5b86" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">第二个是允许我们更新状态的函数。</li></ul><p id="c0ea" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><em class="lu">我们将使用数组析构，这样我们可以更容易地看到从setState返回什么。</em></p><p id="c29f" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">2.通过添加useState函数以及我们的初始状态(我们的prods数组)来修改您的<strong class="lv ja"> App.js </strong>。)<br/>添加<strong class="lv ja"> const [currProdState，setProdState]=useState({ <br/>)并剪切粘贴产品数据数组，prods。</strong></p><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="afcf" class="of my iq ps b gy pw px l py pz">import React ,<strong class="ps ja">{useState}</strong> from 'react';<br/>import './App.css';<br/>import Product from './Product';</span><span id="45a1" class="of my iq ps b gy qa px l py pz">const App =()=&gt;{</span><span id="1ea5" class="of my iq ps b gy qa px l py pz">// useState returns an array with two elements<br/>  // The current state and function to update state<br/>  // causing re-render<br/><strong class="ps ja">const [currProdState,setProdState]=useState({<br/>  prods:[<br/>      {name: 'Master Widget', price:'$125.00'},<br/>      {name: 'Master Wudget', price:'$135.00'},<br/>      {name: 'Sub Widget', price:'$75.00'},<br/>      {name: 'Sub Wudget', price:'$85.00'}<br/>    ]<br/>  });</strong></span></pre><p id="7145" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">上面的代码是下面的<em class="lu"><strong class="lv ja">App</strong>函数声明和</em>上面的<em class="lu"><strong class="lv ja">返回</strong>。</em></p><p id="5552" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在这段代码中，调用了函数<strong class="lv ja"> useState </strong>。我们把它传递给初始状态。这是我们的数组prods，它包含我们的产品名称和价格。<em class="lu">(为简单起见，我们使用一组产品数据。通常这将来自数据库。)</em></p><p id="6903" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">useState函数返回两个元素，初始状态和您将实现来更改状态的函数。名字<strong class="lv ja"> currProdState </strong>和<strong class="lv ja"> setProdState </strong>并不特别，可以是我们想要的任何名字。这里我们以描述性的方式给它们命名。</p><ul class=""><li id="dec8" class="np nq iq lv b lw mo lz mp mq pn ms po mu pp lo nw nx ny nz bi translated">currProdState将包含原始状态，prods数组。</li><li id="a5b1" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated">setProdState是我们必须实现的一个函数，用来改变或设置状态。</li></ul><h2 id="8a1d" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">我们将如何改变状态</h2><p id="9100" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">我们将创建一个函数<strong class="lv ja"> applyDiscountHandler </strong>，它将使用<strong class="lv ja"> setProdState </strong>函数来更改状态。函数applyDiscountHandler将在<strong class="lv ja">单击下一个我们将添加的按钮</strong>时被调用。在前面的屏幕截图中，按钮将是“应用折扣”按钮。单击时，它将调用applyDiscountHandler，而applyDiscountHandler又将调用setProdState，其中包含一组新的产品价格。</p><p id="925b" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">创建applyDiscountHandler </strong></p><ol class=""><li id="4c6c" class="np nq iq lv b lw mo lz mp mq pn ms po mu pp lo pq nx ny nz bi translated">在对useState的调用下面，添加applyDiscountHandler函数。</li></ol><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="fed7" class="of my iq ps b gy pw px l py pz">const applyDiscountHandler= ()=&gt;{</span><span id="8ed0" class="of my iq ps b gy qa px l py pz">}</span></pre><p id="c4c9" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">在函数中，我们将调用setProdState。函数setProdState将接收prods数组，但对某些产品使用一组新的价格。该调用将导致DOM的重新呈现，并且将显示我们的打折产品。我们将对主Widget和主Wudget打折。</p><p id="4564" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">2.将以下内容添加到applyDiscountHandler。请注意更新后的价格。</p><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="a1f2" class="of my iq ps b gy pw px l py pz">const applyDiscountHandler= ()=&gt;{<br/>  <strong class="ps ja">setProdState</strong>({ <br/>      prods:[<br/>       <strong class="ps ja"> {name: 'Master Widget', price:'$95.00'},<br/>        {name: 'Master Wudget', price:'$100.00'},</strong><br/>        {name: 'Sub Widget', price:'$75.00'},<br/>        {name: 'Sub Wudget', price:'$85.00'}<br/>      ]<br/>  })<br/>  }</span></pre><p id="af71" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">创建按钮</strong></p><p id="77d6" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">下面的代码将创建一个<strong class="lv ja">按钮</strong>并设置<strong class="lv ja"> onClick </strong>事件处理程序。您还会注意到我们的<strong class="lv ja"> prods.map </strong>发生了变化。数据不再仅仅存在于prods阵列中。它在从useState返回的第一个参数currProdState中。如果你还记得，这包含了初始状态。</p><p id="2e78" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">3.如下修改您的返回中的代码。</p><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="39b8" class="of my iq ps b gy pw px l py pz">return (<br/>  &lt;div&gt;<br/>    <br/>    {<strong class="ps ja">currProdState.prods.map</strong>(prod=&gt;(<br/>      &lt;Product name={prod.name} price={prod.price} /&gt;<br/>    ))};<br/>   &lt;p&gt;&lt;/p&gt;<br/>    Enter Discount Code:&lt;input type='text' name='code' &gt;&lt;/input&gt;<br/>    <strong class="ps ja">&lt;button onClick={applyDiscountHandler}&gt;Apply Discount&lt;/button&gt;</strong></span><span id="0b63" class="of my iq ps b gy qa px l py pz">  &lt;/div&gt;<br/>  )};</span></pre><p id="7c91" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">您的<strong class="lv ja"> App.js </strong>应该如下所示:</p><pre class="kp kq kr ks gt pr ps pt pu aw pv bi"><span id="2f64" class="of my iq ps b gy pw px l py pz">import React ,{useState} from 'react';<br/>import './App.css';<br/>import Product from './Product';</span><span id="0073" class="of my iq ps b gy qa px l py pz">const App =()=&gt;{</span><span id="807b" class="of my iq ps b gy qa px l py pz">// useState returns an array with two elements<br/>  // The current State and function to update state<br/>  // causing re-render<br/>const [currProdState,setProdState]=useState({<br/>  prods:[<br/>      {name: 'Master Widget', price:'$125.00'},<br/>      {name: 'Master Wudget', price:'$135.00'},<br/>      {name: 'Sub Widget', price:'$75.00'},<br/>      {name: 'Sub Wudget', price:'$85.00'}<br/>    ]<br/>  });</span><span id="dda2" class="of my iq ps b gy qa px l py pz">const applyDiscountHandler= ()=&gt;{<br/>  setProdState({ <br/>      prods:[<br/>        {name: 'Master Widget', price:'$95.00'},<br/>        {name: 'Master Wudget', price:'$100.00'},<br/>        {name: 'Sub Widget', price:'$75.00'},<br/>        {name: 'Sub Wudget', price:'$85.00'}<br/>      ]<br/>  })<br/>  }</span><span id="896c" class="of my iq ps b gy qa px l py pz">return (<br/>  &lt;div&gt;<br/>    <br/>    {currProdState.prods.map(prod=&gt;(<br/>      &lt;Product name={prod.name} price={prod.price} /&gt;<br/>    ))};<br/>   &lt;p&gt;&lt;/p&gt;<br/>    Enter Discount Code:&lt;input type='text' name='code' &gt;&lt;/input&gt;<br/>    &lt;button onClick={applyDiscountHandler}&gt;Apply Discount&lt;/button&gt;<br/>  &lt;/div&gt;<br/>  )};</span><span id="38db" class="of my iq ps b gy qa px l py pz">export default App;</span></pre><h2 id="21a1" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">它将如何工作</h2><p id="2a37" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">当应用程序运行时，将使用初始状态调用useState，并将初始状态返回给currProdState和一个更新状态的函数。我们将使用map通过<strong class="lv ja">道具</strong>将<strong class="lv ja"> currProdState.prods </strong>传递给我们的产品组件。最后，将显示一个输入(折扣代码)和一个按钮。单击该按钮将调用applyDiscountHandler，该按钮将调用setProdState来触发对DOM的更新。参数currProdState现在具有更新后的状态。</p><h2 id="3120" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated">试试看！</h2><p id="c871" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">请注意，我们没有为input元素添加任何逻辑操作，所以您只需单击按钮即可。但是很酷！状态已更新。主Widget和主Wudget的价格已经更新。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pb"><img src="../Images/c954e6f0c97de42dd4caa5b768d4e241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7Qhnz4uT2cixl6AXbvmsw.jpeg"/></div></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pc"><img src="../Images/34f833d77a3773424fa0b3198e8df09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqsqIGDsoRPx2lb_mWwDvQ.jpeg"/></div></div></figure><h2 id="48f3" class="of my iq bd mz og oh dn nd oi oj dp nh mq ok ol nj ms om on nl mu oo op nn iw bi translated"><strong class="ak">重要！</strong></h2><p id="204b" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">设置状态时，需要为所有项目提供数据。如果您只提供更新的项目，主Widget和主Wudget，其他两个将会消失。</p><p id="8b7b" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">此外，始终使用为设置状态提供的函数。不要试图在更新状态的函数之外，仅仅通过改变数据本身来改变状态。</p><h1 id="31a8" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated">结论</h1><p id="17a6" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">在本教程中，我们学习了使用功能性React组件时管理状态的基础知识。这是通过使用useState启动进程和使用函数更新状态来实现的。</p><p id="a4bb" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">我们还学习了如何创建一个按钮对象并使用它的onClick事件处理程序。</p><p id="ee8c" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">感谢您的阅读和编码！</strong></p><p id="7ac6" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><em class="lu">想看就看，加入Medium帮我继续写作。</em></p><div class="qb qc gp gr qd qe"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qn l"><div class="qo l qp qq qr qn qs ky qe"/></div></div></a></div><p id="8870" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated"><strong class="lv ja">其他资源:</strong></p><ul class=""><li id="68e5" class="np nq iq lv b lw mo lz mp mq pn ms po mu pp lo nw nx ny nz bi translated"><a class="ae mw" href="https://reactjs.org/docs/hooks-reference.html" rel="noopener ugc nofollow" target="_blank">挂钩</a></li><li id="ccb9" class="np nq iq lv b lw oa lz ob mq oc ms od mu oe lo nw nx ny nz bi translated"><a class="ae mw" href="https://www.freecodecamp.org/news/functional-components-vs-class-components-in-react/" rel="noopener ugc nofollow" target="_blank">基于类与功能组件</a></li></ul><p id="d3fd" class="pw-post-body-paragraph ls lt iq lv b lw mo ka ly lz mp kd mb mq mr me mf ms mt mi mj mu mv mm mn lo ij bi translated">你也可以享受，</p><div class="qb qc gp gr qd qe"><a href="https://medium.com/javascript-in-plain-english/react-router-and-spas-made-easy-19fd1db0d6fc" rel="noopener follow" target="_blank"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">使用React-Router创建SPA</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">使用客户端路由创建单页应用程序</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">medium.com</p></div></div><div class="qn l"><div class="qt l qp qq qr qn qs ky qe"/></div></div></a></div><div class="qb qc gp gr qd qe"><a href="https://medium.com/javascript-in-plain-english/using-reacts-useeffect-hook-to-fetch-data-and-periodically-refresh-that-data-2a69b6d44081" rel="noopener follow" target="_blank"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">使用React的useEffect钩子获取数据并定期刷新数据</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">使用useEffect获取功能组件中的数据，并根据需要使用setInterval刷新数据。</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">medium.com</p></div></div><div class="qn l"><div class="qu l qp qq qr qn qs ky qe"/></div></div></a></div><div class="qb qc gp gr qd qe"><a href="https://medium.com/javascript-in-plain-english/two-ways-of-managing-state-in-a-functional-react-form-ef0929eefe67" rel="noopener follow" target="_blank"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">在函数式反应表单中管理状态的两种方法</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">在注册表单中，对每个输入使用useState挂钩，而不是使用一个用户对象和一个useState挂钩。</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">medium.com</p></div></div><div class="qn l"><div class="qv l qp qq qr qn qs ky qe"/></div></div></a></div><div class="qb qc gp gr qd qe"><a rel="noopener  ugc nofollow" target="_blank" href="/manage-form-state-with-react-final-form-bdad07b24509"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">用React最终表单管理表单状态</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">没有useState()钩子的React窗体状态管理。</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qn l"><div class="qw l qp qq qr qn qs ky qe"/></div></div></a></div><div class="qb qc gp gr qd qe"><a rel="noopener  ugc nofollow" target="_blank" href="/what-is-next-js-and-server-side-rendering-9e24ea21c144"><div class="qf ab fo"><div class="qg ab qh cl cj qi"><h2 class="bd ja gy z fp qj fr fs qk fu fw iz bi translated">什么是Next.js和服务器端渲染</h2><div class="ql l"><h3 class="bd b gy z fp qj fr fs qk fu fw dk translated">Next.js是由Vercel创建的React框架。与使用客户端渲染的React不同，Next.js使用服务器端…</h3></div><div class="qm l"><p class="bd b dl z fp qj fr fs qk fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qn l"><div class="qx l qp qq qr qn qs ky qe"/></div></div></a></div><h1 id="0902" class="mx my iq bd mz na nb nc nd ne nf ng nh kf ni kg nj ki nk kj nl kl nm km nn no bi translated"><strong class="ak">用简单英语写的便条</strong></h1><p id="1c54" class="pw-post-body-paragraph ls lt iq lv b lw nr ka ly lz ns kd mb mq oq me mf ms or mi mj mu os mm mn lo ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae mw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lv ja"> plainenglish.io </strong> </a>上找到所有这些——关注我们的出版物并<a class="ae mw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lv ja">订阅我们的YouTube频道</strong> </a> <strong class="lv ja">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
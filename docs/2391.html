<html>
<head>
<title>Apply the DRY principle to make Angular code less error-prone and easier to maintain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用DRY原则，使角度代码不容易出错，更容易维护</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/apply-the-dry-principle-to-make-angular-code-less-error-prone-and-easier-to-maintain-2bc4af0592ad?source=collection_archive---------2-----------------------#2020-06-20">https://javascript.plainenglish.io/apply-the-dry-principle-to-make-angular-code-less-error-prone-and-easier-to-maintain-2bc4af0592ad?source=collection_archive---------2-----------------------#2020-06-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eaf1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Angular中使用ng-content、ng-template和ng-container以及ngTemplateOutlet</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7635e14e8d83640ff7c86fc0f096e711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2T-7IqAQ9XDVRFt0ViFCA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@florianklauer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Florian Klauer</a> on Unsplash</figcaption></figure><p id="18da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">组件是独立的，易于重用。通过帮助我们应用DRY原则(不要重复你自己)，他们使前端代码更不容易出错，更容易维护。</p><p id="cb57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个组件只编写一次，但是可以反复使用，无论是通过在不同的地方手动使用它的选择器，还是通过使用类似<code class="fe ls lt lu lv b">*ngFor</code>的角度结构指令。</p><p id="a300" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您经常需要将数据从父组件传递到子组件。例如，让我们制作一个组件来显示错误消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lw"><img src="../Images/8d8068fd8d6ff7e9567f19ebcd57a3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eJJhjP7AQ-3gPF_mmJeseA.png"/></div></div></figure><p id="8828" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要向组件传递一个简单的错误文本，可以使用一个<code class="fe ls lt lu lv b">@Input</code>。你可以给这个属性一个默认值，例如，<code class="fe ls lt lu lv b">An unexpected error occurred</code>,当你不向子组件传递任何文本时，这个值就会显示出来。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="6ac5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只要您想要传递给子组件的数据是一个JavaScript值(字符串、对象、数字等等)，就可以这样做。但是，如果您想将一些HTML内容传递给子组件，例如一些带有图像或链接的内容，该怎么办呢？</p><p id="1ae7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以为这种情况创建一个特殊的组件，但是这需要您复制样式(重复您自己)。您还可以为链接或图像的url添加一个新的<code class="fe ls lt lu lv b">@Input</code>。但是在这两种情况下，创建具有新类型内容的新类型的错误消息将会要求您创建另一个组件，再次重复您自己，或者添加另一个<code class="fe ls lt lu lv b">@Input</code>。</p><p id="fe43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有更好的方法。其实不止他们一个。</p><h1 id="c74a" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">ng-内容方式</h1><p id="4a58" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">您可以使用<code class="fe ls lt lu lv b">ng-content</code>将您想要的任何内容传递到错误卡。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="e938" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">ng-content</code>用作占位符。您可以使用它在子组件中添加动态内容。当呈现组件时，<code class="fe ls lt lu lv b">&lt;ng-content&gt;&lt;/ng-content&gt;</code>将被您在父组件的子组件标签之间所写的内容替换。在上面的例子中，我们没有给第一个错误卡任何内容，它将保持为空。在第二个错误卡的标签之间，我们添加了一些文本、一个<code class="fe ls lt lu lv b">div</code>和一个链接。它们将显示在错误卡内，取代<code class="fe ls lt lu lv b">&lt;ng-content&gt;&lt;/ng-content&gt;</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/abcdb1bd888540f7cadd6ee012546693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzePnxv0O6WUYRe6URsclA.png"/></div></div></figure><p id="ae81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是现在已经没有默认值了，给一个默认值会很棘手(不是不可能，但是很棘手)。另一个解决方案是使用带有<code class="fe ls lt lu lv b">ngTemplateOutlet</code>属性的<code class="fe ls lt lu lv b">ng-template</code>和<code class="fe ls lt lu lv b">ng-container</code>，这个解决方案使我们能够给我们的错误一个默认值。</p><h1 id="1b74" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">ng模板和ng容器方式</h1><h2 id="8063" class="mx ma iq bd mb my mz dn mf na nb dp mj lf nc nd ml lj ne nf mn ln ng nh mp ni bi translated">ng模板</h2><p id="1271" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe ls lt lu lv b">ng-template</code>允许您定义一个角度模板。就其本身而言，模板，也就是说标签及其内容，并没有被呈现。该模板可以与其他模板组合，并由结构指令和代码引用。只有在使用<em class="nj">时才会被渲染。</em></p><p id="654e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它通常与一个<code class="fe ls lt lu lv b">*ngIf</code>指令一起使用:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="9881" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将在这里用一个具有<code class="fe ls lt lu lv b">ngTemplateOutlet</code>属性的<code class="fe ls lt lu lv b">ng-container</code>来使用它。</p><h2 id="dc70" class="mx ma iq bd mb my mz dn mf na nb dp mj lf nc nd ml lj ne nf mn ln ng nh mp ni bi translated">天然气容器</h2><p id="9f59" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe ls lt lu lv b">ng-container</code>实际上什么都不做，但这就是它如此有用的原因。该元素不会呈现，但其内容会呈现，并且您可以向其附加一个结构指令。</p><p id="dd06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不能将两个结构指令附加到同一个元素:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="124a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以添加一个<code class="fe ls lt lu lv b">div</code>元素，但是除了修复你的双向问题之外，它什么都不会用，甚至会破坏你的布局。使用<code class="fe ls lt lu lv b">ng-container</code>你可以有一个模板元素来应用第二个strucutral指令，但是这个元素本身不被呈现，它不在DOM中显示(但是它的内容被显示)。</p><p id="42ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将在<code class="fe ls lt lu lv b">ngTemplateOutlet</code>指令中使用它。在我们的例子中，我们只有一个结构指令，但是我们仍然使用<code class="fe ls lt lu lv b">ng-container</code>来避免创建一个虚拟的HTML元素来保存我们的<code class="fe ls lt lu lv b">ngTemplateOutlet</code>。</p><h2 id="424f" class="mx ma iq bd mb my mz dn mf na nb dp mj lf nc nd ml lj ne nf mn ln ng nh mp ni bi translated"><code class="fe ls lt lu lv b">ngTemplateOutlet</code></h2><p id="c1a3" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe ls lt lu lv b">ngTemplateOutlet</code>是使我们能够实例化角度模板的指令。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="9a6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用模板的<code class="fe ls lt lu lv b">defaultTemplate</code>引用作为<code class="fe ls lt lu lv b">ngTemplateOutlet</code>的值，以便在div中实例化模板。如果我们不想使用<code class="fe ls lt lu lv b">div</code>，我们可以使用<code class="fe ls lt lu lv b">ng-container</code>元素。</p><h2 id="1802" class="mx ma iq bd mb my mz dn mf na nb dp mj lf nc nd ml lj ne nf mn ln ng nh mp ni bi translated">模板作为输入</h2><p id="2612" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在，我们可以将所有这些组合成一个解决错误卡问题的方案。我们的错误卡组件有一个引用为<code class="fe ls lt lu lv b">defaultTemplate</code>的错误的默认模板。在使用错误卡组件的父组件中，我们可以为错误创建一个模板，在下面的例子中，我们创建了一个带有<code class="fe ls lt lu lv b">div</code>和链接<code class="fe ls lt lu lv b">a</code>的模板。然后，我们可以将这个模板作为输入传递给错误卡组件。错误卡组件呈现传递的模板(如果有)，否则使用其默认模板。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx ly l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/694963a98106bf0069b2b50044306d6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*peMx_NTAzKLeDvk3-PetZg.png"/></div></div></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="5802" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些指令，<code class="fe ls lt lu lv b">ng-content</code>，<code class="fe ls lt lu lv b">ng-template</code>和<code class="fe ls lt lu lv b">ng-container</code>帮助你创建可重用的定制组件。我希望这篇文章能帮助您理解如何将它们结合起来，以便在不同类型的内容中重用组件。</p></div></div>    
</body>
</html>
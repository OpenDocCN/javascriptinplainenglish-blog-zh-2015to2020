# 如果还没有，你的初创公司的 React 项目应该用 TypeScript 编写

> 原文：<https://javascript.plainenglish.io/if-it-isnt-already-your-startup-s-react-project-should-be-written-in-typescript-7762816b1e21?source=collection_archive---------5----------------------->

![](img/34fa60da4feef7ac262debd053475cd3.png)

Types could save your startup. Photo by [Deon Black](https://unsplash.com/@deonblack?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

我曾经反对打字稿的想法。对我来说，把静态类型添加到一个本来就没有静态类型的语言中似乎没有意义。我的职业生涯开始时是一名 C++图形工程师，后来成为一名前端设计师和开发人员。所以静态类型不是我不熟悉的东西。

转到 JavaScript 让我看到了表达各种形式的数据操作是多么的快速和容易，尤其是使用较新版本的 JavaScript (ES6 及更高版本),而且看起来工作正常，富应用程序可以以闪电般的速度构建。我感觉像是卸下了一个重担，处于一个没有静态类型的世界，并开始觉得静态类型对我和创业世界中的任何人来说都将成为过去。

此外，当工具在社区之间被分割时，有人问[为什么他们不能只为 web 编写 C#而不是](https://github.com/microsoft/TypeScript/issues/8893)，并且对大多数现代框架的支持非常有限。

一个羽翼未丰的初创公司在考虑任何类型的技术堆栈变化时，必须回答的最大问题之一是:这需要多长时间？您希望快速、轻松地发布变更，并且您肯定不希望一个整体性的端口在您的发布管道中产生大气泡。此外，您需要考虑这种变化对您的 DX(开发人员体验)的影响，以及您完成工作的速度。我们都知道，随着代码库的成熟和膨胀，开发速度不可避免地会减慢。因此，您希望避免引入一些会极大地膨胀您的代码库、增加您的测试负担(我们将在后面详细讨论)并使您的开发团队在工作方面的生活质量更差的东西。

因此，让我们来谈谈如何为您的 React 项目迁移到 TypeScript 来很好地避免这些缺陷，并且可以增加很多价值。

# 您可以增量移植现有代码

TypeScript 是 JavaScript 的超集，这意味着原则上任何有效的 JavaScript 都是有效的 TypeScript。这意味着从 JS 迁移到 TS 在技术上就像配置改变一样简单。实际上，要真正享受 ts 的好处，您需要做的不止这些。这里的要点是，你可以很容易地创建一个移植策略，让你带着**零开发泡沫**进行移植。它看起来有点像这样:

1.  任何新代码都应该用 TypeScript 编写。
2.  如果对一个 JS 文件进行了更改，在您经过时将其移植到 TypeScript。

我从未真正意识到的是，TypeScript 并不完全是静态类型，它使用了一个*渐进类型*系统——也就是说编译器带有一个非常强大的类型推理系统，这通常意味着你可以根据自己的喜好使用**或多或少的类型**。在很大程度上，推理引擎足够强大，可以在很多情况下做出正确的调用，因此您不需要对大量代码进行注释，同时仍然可以获得您想要的类型安全。这意味着将 JS 移植到 TS 实际上是微不足道的；至少，在编译器无法推断类型的地方需要添加类型注释，这通常意味着注释几个函数签名，仅此而已。

开发人员可以很容易地在 TypeScript 中编写新代码，因为这导致零移植成本(显然)，并且由于类型推断的强大功能，移植现有代码通常非常简单。

我已经将许多 React 代码库(无论大小)移植到 TypeScript 上，并且我已经能够每次都增量地这样做**，**立即享受它的好处，而没有任何种类的管道泡沫。

人们经常听到的一件事是任何静态类型系统都可能引入的“增加的样板文件”。

考虑下面的例子，JS 中的 React 组件，遵循“最佳实践”:

现在在 TypeScript 中:

实际上，我们的 TS 示例实际上更短。

一般来说，使用 React 的 TS 不会比使用普通的 JS 产生更多的样板文件(有时甚至更少)。

# 你仍然可以快速移动

如前所述，作为一家年轻的初创公司，你希望尽可能快地前进。您希望延迟代码膨胀，并保持快速的开发速度和紧凑的发布周期。您希望能够轻松地对优先级的变化做出反应，一个很好的方法是一个简单、优雅的代码库，只需要很少的努力就可以做出简单的改变(信不信由你，许多大型代码库并不是这样的，看似无意义的改变永远都要花费*。).随着代码膨胀，测试数量增加，不可避免地会出现开发速度变慢的情况。因此，尽可能推迟经济放缓是非常可取的。我们可以做到这一点的方法之一是编写更少的测试。*

在我继续之前，我想说的是:**好的测试是没有替代品的。如果一个软件产品没有好的测试，你很难对它完全有信心。每个版本都应该简单，你应该相信它是“有效的”。事实是，在现实中，许多被编写的测试**并不是好的测试**。在产品代码库中可以找到大量的单元测试:**

a)测试实现细节，这样无论何时你改变*任何东西*它们都会被破坏

b)只是美化了的类型检查器，为他们测试的代码验证输入和输出的类型。

对于前者，没有简单的补救方法。如果你已经陷入这种境地，你就必须通过重写这些测试来摆脱困境。对于后者，TypeScript 可以非常容易地取代这些测试。您可以丢弃一大堆多余的代码，而不会牺牲您对下一个版本的信心。以这种方式进行类型检查就像是在每次保存时运行**的一套小测试，就像你写代码一样。虽然这不能替代行为测试，以及集成和端到端测试等更高层次的方法，但事实上已经从您的代码库中删除了一整类错误。不正确的专有名称、大小写错误等。所有人都消失了，因为他们永远不会被允许进入你的生产部门。再加上静态类型经常带来的额外的“隐式文档”,你就可以对发布新代码更有信心了。**

如果你想快速移动，有一个小的测试负担是必不可少的。如果你想确定你发布的是什么，高质量的代码是必不可少的。您必须自己找到平衡点，但是 TypeScript 可能是找到一个很好的折中方法。

# 工具现在一样好(如果不是更好的话)

作为一名开发人员，如果有合适的工具，做任何事情都是轻而易举的。幸运的是，TypeScript 是一个很好的工具的例子！

## 工具故障

以前是为了在现有的 React 项目中采用 TypeScript，设置起来并不容易，不得不放弃使用一些工具。例如，在过去，您不能将 ESLint 用于 TypeScript 代码库。以 TS 为目标的棉绒，TSLint，是你唯一的选择。虽然 TSLint 仍然是一个伟大的项目，但它远没有 ESLint 的成熟、强大和生态系统。所以你必须立即妥协工具来获得类型。对我来说，这从来都不是一个公平的交易，也是反对移民的一个重要理由。现在，这不是问题，因为 Babel(一种广泛使用的 JS transpiler)支持 TypeScript，这意味着您可以轻松地使用 ESLint 这样的工具来开发 TypeScript 项目。工具方面不再妥协。

## 图书馆有丰富的支持

大多数(如果不是全部)大型 JS 库都支持 TypeScript。它们中的许多是使用 TypeScript 本身编写的，或者社区已经深入研究了该模块并为其编写了类型声明，这意味着您可以将您的 TypeScript 代码库插入其中，并获得对其他人的代码以及您自己的代码的类型支持。这使得以这种方式滥用库变得更加困难，并且避免了因为拼写错误而花费大量时间去绞尽脑汁。

## 编辑器支持

最重要的工具之一是他们使用的编辑器。如果你的编辑器可以自动完成许多简单的任务，告诉你什么时候你做错了，并帮助你提出有意义的建议，那么许多辅助性的任务就会加速到光速，并减少错误。大多数编程都是这些辅助性的任务，所以加快它们的速度对业务有切实的影响，因为你可以更快地完成好的工作，而不会降低质量。Visual Studio 代码是一个非常受欢迎的文本编辑器，因为它包括对 TypeScript 的现成支持，以及使它变得更好的强大插件。如果没有这些工具，我知道我过去从来没有遇到过很多紧迫的截止日期。

TS 强大的生态系统、工具和编辑器支持使它成为最令人愉快的语言之一，我对我所生产的东西的信心水平与同等的 JS 相去甚远。

# 包扎

在这篇文章中，我希望向您展示在您的初创公司的技术堆栈中使用 TypeScript 所带来的难以置信的增值，以及只需很少(如果有的话)的警告就能获得收益是多么容易！

感谢阅读！

💙
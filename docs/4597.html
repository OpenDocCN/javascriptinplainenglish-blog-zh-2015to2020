<html>
<head>
<title>Creating a Marimekko Chart with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript创建Marimekko图表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-marimekko-chart-with-javascript-42e1f65fd841?source=collection_archive---------15-----------------------#2020-12-22">https://javascript.plainenglish.io/creating-a-marimekko-chart-with-javascript-42e1f65fd841?source=collection_archive---------15-----------------------#2020-12-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c679d3407fca0fddf508c857a2c190ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B19OtN0j01V-9as691cc7w.png"/></div></div></figure><p id="557c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您想知道如何使用JavaScript为基于HTML5的应用程序和网页轻松创建交互式Marimekko图表吗？如果是的话，你已经走上了学习的最佳道路。</p><p id="c573" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Marimekko图表也称为<a class="ae kt" href="https://www.anychart.com/chartopedia/chart-type/mekko-chart/" rel="noopener ugc nofollow" target="_blank"> Mekko图表</a>和市场图，Marimekko图表在其Y轴上显示从0%到100%不等的数值。最令人兴奋的部分在于它们的X轴，它表示类别中值的总和。每个类别沿X轴的宽度描绘了整个类别对所有数据的贡献。简而言之，这是一种可视化分类数据的堆积图。尽管如此，Y轴和X轴通过确定每个线段的宽度和高度在百分比范围内变化。</p><p id="74dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你是智能手机爱好者吗，有兴趣按季度和供应商查看2019年全球智能手机出货量吗？然后，特别要遵循本教程，因为我们要使用简单的JS图表编码技术，在一个优雅的Marimekko图中可视化这些市场数据。</p><h1 id="ba55" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">如何建立一个基本的JS Marimekko图表</h1><p id="c314" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在JavaScript图表中可视化数据的一般顺序由以下简单的四个步骤组成，构建JS Marimekko图表也不例外:</p><ol class=""><li id="ce02" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">创建一个包含显示图表的容器的HTML页面。</li><li id="89df" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">连接所有需要的脚本。</li><li id="7b54" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">加载您需要在图表中可视化的数据。</li><li id="e01d" class="lx ly in jx b jy mg kc mh kg mi kk mj ko mk ks mc md me mf bi translated">最后，编写JS图表代码。</li></ol><p id="9d57" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们深入这些步骤来绘制我们漂亮的Marimekko图表。</p><h1 id="4649" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第一步。创建HTML页面</h1><p id="b581" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">第一步是建立一个基本的HTML页面来放置Marimekko图表。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="47de" class="mu kv in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Marimekko Chart Example&lt;/title&gt;<br/>    &lt;style&gt;<br/>      html, body, #container {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/><strong class="mq io"><em class="mz">      // Marimekko chart code goes here<br/></em></strong>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="eff8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面开发的HTML页面由两个主要部分组成，标题(在<code class="fe na nb nc mq b">&lt;head&gt;&lt;/head&gt;</code>标签之间)和页面主体(在<code class="fe na nb nc mq b">&lt;body&gt;&lt;/body&gt;</code>标签之间)。在标题部分，我们设置了HTML页面标题(在<code class="fe na nb nc mq b">&lt;title&gt;&lt;/title&gt;</code>标签之间)和CSS规则(在<code class="fe na nb nc mq b">&lt;style&gt;&lt;/style&gt;</code>标签之间)来管理<code class="fe na nb nc mq b">container</code>元素的外观。</p><p id="6d11" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">id为<code class="fe na nb nc mq b">container</code>的body部分中的<code class="fe na nb nc mq b">div</code>元素是用于放置Marimekko图表的块。因为我希望图形出现在整个HTML页面上，所以我将容器元素的宽度和高度字段设置为100%。因此图表将显示在整个页面上。</p><h1 id="00fa" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第二步。连接所有需要的脚本</h1><p id="67f3" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">接下来，我们应该连接构建Marimekko图表所需的所有JavaScript脚本。</p><p id="e8ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一般来说，构建Marimekko或基本上任何其他图表的这些简单步骤对于所有JavaScript图表库都是相同的。在本教程中，我将以<a class="ae kt" href="https://www.anychart.com" rel="noopener ugc nofollow" target="_blank"> AnyChart </a>为例。这是一个流行的灵活的JS库，用于交互式数据可视化，它有很棒的<a class="ae kt" href="https://docs.anychart.com" rel="noopener ugc nofollow" target="_blank">文档</a>和<a class="ae kt" href="https://api.anychart.com" rel="noopener ugc nofollow" target="_blank"> API参考</a>，以及大量的<a class="ae kt" href="https://www.anychart.com/products/anychart/gallery/" rel="noopener ugc nofollow" target="_blank">演示</a>，因此即使对于初学者来说，它看起来也很容易上手。</p><p id="a1c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">AnyChart有一个模块化系统，这意味着您不需要整个库，并且可以只连接那些您实际需要的图表类型和功能。通过这种方式，在您的网页上运行的JavaScript代码的大小显著减小。这对性能总是有好处的。因此，在我们的例子中应该使用“base”和“mekko”模块来表示Marimekko图表中的数据。它们将在<code class="fe na nb nc mq b">&lt;script&gt;&lt;/script&gt;</code>标签中的<code class="fe na nb nc mq b">&lt;head&gt;&lt;/head&gt;</code>部分被引用。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="4b10" class="mu kv in mq b gy mv mw l mx my">&lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-mekko.min.js"&gt;&lt;/script&gt;</span></pre><p id="9f7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">构建Marimekko图表所需的JavaScript代码应该写在HTML页面的<code class="fe na nb nc mq b">&lt;body&gt;&lt;/body&gt;</code>标签之间。</p><p id="a85c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是新修改后的代码外观。是不是很酷？继续读，伙计们。我们正接近最激动人心的部分。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="6b93" class="mu kv in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Marimekko Chart Example&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-mekko.min.js"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      html, body, #container {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>    &lt;script&gt;<br/><strong class="mq io"><em class="mz">      // Marimekko chart code goes here</em></strong><br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="8ae4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第三步。加载想要可视化的数据</h1><p id="1ff5" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">如本教程开头所述，Marimekko属于2D堆积图系列，但它通过不同的列宽展示了额外的数据维度。这种图表类型被广泛用于解释销售数据和进行市场分析，但请确保您根据自己的需求选择了合适的数据。</p><p id="5ee7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你好奇你最喜欢的智能手机品牌在2019年的全球出货量吗？等等，让我们更深入地观察每季度的出货量，这样数据就能适合Marimekko图表。</p><p id="32ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在目前的情况下，Marimekko图表将用于说明2019年季度智能手机出货量(以百万计)排名前六的品牌。以下是我们将使用的数据集。(资料来源:<a class="ae kt" href="https://www.idc.com" rel="noopener ugc nofollow" target="_blank"> IDC </a>。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/7b4517180ecbd50b271164649aa7ff30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9DC0Vci4XSLBN7TBStQ_Pw.png"/></div></div></figure><p id="3085" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Mekko graphics的奇妙之处在于，两个轴都以百分比表示数据，但您只需输入实际数据，图表就会自动计算所有数据。</p><p id="1dd0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将移动运输数据转换成一个特定的JavaScript对象，如下所示。它将数据头设置、标题和数据本身保存为数组的数组。</p><p id="9280" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">X轴包含每个智能手机品牌的总出货量，而Y轴用于按季度读取每个智能手机品牌的出货量百分比。</p><p id="bf60" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以下是我们将使用的数据集。下面JavaScript对象的<code class="fe na nb nc mq b">header</code>设置用于设置每个智能手机生产商品牌的季度明细。因此，我们将看到季度关系。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="0715" class="mu kv in mq b gy mv mw l mx my">var data = {<br/>  title: 'Global Smartphone Shipments (In Millions) in 2019, quarterly',<br/>  header: ['Name', 'Quarter 1', 'Quarter 2', 'Quarter 3', 'Quarter 4'],<br/>  rows: [<br/>    ['Huawei', 59.1,56.6,66.8,56.2],<br/>    ['Vivo', 23.9,27,31.3,31.5],<br/>    ['Apple', 42,36.5,44.8,72.3],<br/>    ['Samsung', 72,76.3,78.2,70.4],<br/>    ['Xiaomi', 27.8,32.3,31.7,32.9],<br/>    ['Oppo', 25.7,30.6,32.3,31.4],<br/>    ['Others', 90.5,97.7,94.9,106.4],<br/>  ]<br/>};</span></pre><h1 id="a03b" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第四步。编写JS Marimekko图表代码</h1><p id="29f4" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">一旦所有的准备工作都完成了，我们就可以进入最后一部分来展示最期待的Marimekko图了。负责显示Marimekko图表的整个JavaScript图表代码必须插入到写在<code class="fe na nb nc mq b">&lt;script&gt;</code>标签中的<code class="fe na nb nc mq b">anychart.onDocumentReady()</code>函数中。顾名思义，它会一直等到页面准备好显示数据。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="1d71" class="mu kv in mq b gy mv mw l mx my">&lt;script&gt;<br/>  anychart.onDocumentReady(function() {<br/><strong class="mq io"><em class="mz">    // The entire JavaScript code of the Marimekko chart<br/>    // will be here</em></strong><br/>  });<br/>&lt;/script&gt;</span></pre><p id="49d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，使用步骤3中的代码生成需要提供给Mekko图表的数据。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="b866" class="mu kv in mq b gy mv mw l mx my">var data = {<br/>  title: 'Global Smartphone Shipments (In Millions) in 2019, quarterly',<br/>  header: ['Name', 'Quarter 1', 'Quarter 2', 'Quarter 3', 'Quarter 4'],<br/>  rows: [<br/>    ['Huawei', 59.1,56.6,66.8,56.2],<br/>    ['Vivo', 23.9,27,31.3,31.5],<br/>    ['Apple', 42,36.5,44.8,72.3],<br/>    ['Samsung', 72,76.3,78.2,70.4],<br/>    ['Xiaomi', 27.8,32.3,31.7,32.9],<br/>    ['Oppo', 25.7,30.6,32.3,31.4],<br/>    ['Others', 90.5,97.7,94.9,106.4],<br/>  ]<br/>};</span></pre><p id="5f59" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下一步是指定JS图表类型。在这种情况下，我们应该使用<code class="fe na nb nc mq b">mekko</code>图表，并向它提供要在Marimekko图表中可视化的数据。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="46f7" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// create a mekko (marimekko) chart</em></strong><br/>var chart = anychart.mekko();<br/><strong class="mq io"><em class="mz">// set the chart data</em></strong><br/>chart.data(data);</span></pre><p id="0081" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们启用图表的图例，如下所示。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="0b40" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// enable the chart legend</em></strong><br/>chart.legend(true);</span></pre><p id="e9e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，在容器中绘制Marimekko图表的命令:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="cd14" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// set the chart container id</em></strong><br/>chart.container('container');<br/><strong class="mq io"><em class="mz">// draw the resulting marimekko chart</em></strong><br/>chart.draw();</span></pre><p id="50b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们期待已久的东西来了。(见<a class="ae kt" href="https://playground.anychart.com/xZ1hInAb/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>上的这张基本Marimekko图。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/3ebb650024df8262844c510f65f99d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIoGqyRohgb7LEkuhcmNMw.png"/></div></div></figure><p id="59c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的基本交互式HTML5 Marimekko图表的完整代码如下。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="5849" class="mu kv in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Marimekko Chart Example&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-mekko.min.js"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      html, body, #container {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;<br/>    &lt;script&gt;</span><span id="7636" class="mu kv in mq b gy nf mw l mx my">anychart.onDocumentReady(function () {</span><span id="d94f" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // create data<br/></em></strong>  var data = {<br/>    title: 'Global Smartphone Shipments (In Millions) in 2019',<br/>    header: ['Name', 'Quarter 1', 'Quarter 2', 'Quarter 3', 'Quarter 4'],<br/>    rows: [<br/>      ['Huawei', 59.1,56.6,66.8,56.2],<br/>      ['Vivo', 23.9,27,31.3,31.5],<br/>      ['Apple', 42,36.5,44.8,72.3],<br/>      ['Samsung', 72,76.3,78.2,70.4],<br/>      ['Xiaomi', 27.8,32.3,31.7,32.9],<br/>      ['Oppo', 25.7,30.6,32.3,31.4],<br/>      ['Others', 90.5,97.7,94.9,106.4],<br/>    ]<br/>  };</span><span id="fb2a" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // create a mekko (marimekko) chart<br/></em></strong>  var chart = anychart.mekko();</span><span id="9d77" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // set the chart data<br/></em></strong>  chart.data(data);</span><span id="2ba3" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // enable the chart legend<br/></em></strong>  chart.legend(true);</span><span id="8a3c" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // set the chart container id<br/></em></strong>  chart.container('container');</span><span id="729d" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // draw the resulting marimekko chart<br/></em></strong>  chart.draw();</span><span id="3acf" class="mu kv in mq b gy nf mw l mx my">});</span><span id="af25" class="mu kv in mq b gy nf mw l mx my">    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="ed0a" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">自定义JS Marimekko图表</h1><p id="6d62" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">嗯，这一节是锦上添花。AnyChart中有大量的<a class="ae kt" href="https://docs.anychart.com/Basic_Charts/Marimekko_Chart/Mekko_Chart" rel="noopener ugc nofollow" target="_blank">文档资源</a>，您可以从中获得深入的知识来改进、修改和定制生成的图表。要获得灵感，请查看<a class="ae kt" href="https://www.anychart.com/products/anychart/gallery/Mekko_(Marimekko)_and_Mosaic_Charts/" rel="noopener ugc nofollow" target="_blank">演示库</a>。</p><p id="ec97" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们尝试修改我们的JavaScript Marimekko图表，让它看起来更优雅。</p><h1 id="44c1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用调色板更改图表颜色</h1><p id="3f7c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Marimekko图表的颜色可以使用调色板选项自定义。参考<a class="ae kt" href="https://docs.anychart.com/Appearance_Settings/Palettes" rel="noopener ugc nofollow" target="_blank">本手册</a>了解更多关于AnyChart调色板的详细信息。在下面的例子中，我们应用了葡萄酒调色板。还有更多预建的调色板，等待着你。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="f20f" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// apply a palette for coloring</em></strong><br/>chart.palette(anychart.palettes.wines);</span></pre><p id="4063" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">图表用新颜色看起来是不是很方便？(见<a class="ae kt" href="https://playground.anychart.com/OVq82Lgy/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/70799aacd45d0816ab004dbba21c82c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jmXeoxXeEfeuWW7hdIqUg.png"/></div></div></figure><h1 id="7c12" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">格式化图表坐标轴</h1><p id="de83" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">以下附加代码用于<a class="ae kt" href="https://docs.anychart.com/Axes_and_Grids/Axis_Basics" rel="noopener ugc nofollow" target="_blank">通过添加标题和改变轴的方向来格式化轴</a>。</p><p id="08f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是包含轴标题的代码:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="56b9" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// set the x-axis title<br/></em></strong>chart.xAxis().title('Smartphone Shipments by Brands');<br/><strong class="mq io"><em class="mz">// set the y-axis title<br/></em></strong>chart.yAxis().title('Smartphone Shipments by Quarters %');</span></pre><p id="29c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Y轴的方向可以是左或右。默认值为左。X轴的方向可以设置为顶部或底部，默认情况下设置为底部。根据您的兴趣配置它们。两个轴的方向发生了以下变化。出于演示目的，X轴和Y轴的方向将设置为顶部和右侧。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="b6bc" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// set the x-axis orientation<br/></em></strong>chart.xAxis().orientation("top");<br/><strong class="mq io"><em class="mz">// set the y-axis orientation<br/></em></strong>chart.yAxis().orientation("right");</span></pre><p id="a56f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">图表用坐标轴标题看起来可读性更好。(见<a class="ae kt" href="https://playground.anychart.com/0mJHN97o/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/dc43f935577e0e643eb88fe57dad0212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BnsqdmiMLP3umAdIQwPYw.png"/></div></div></figure><p id="17ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">从下一个示例开始，Marimekko图表坐标轴的方向恢复为默认外观。</p><h1 id="b519" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">格式化图表工具提示</h1><p id="b6e2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">工具提示通常是隐藏的，但是当鼠标悬停在图表的点上时，它们会变得可见。这可用于显示额外的有用信息。</p><p id="2598" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为第一步，让我们生成悬停时需要显示的信息。根据下面的代码片段，我们显示了<code class="fe na nb nc mq b">seriesName</code>(季度)和<code class="fe na nb nc mq b">value</code>(相应季度的装运量，单位为百万美元)。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="a86c" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// customize the tooltip format<br/></em></strong>chart.tooltip().format('{%seriesName}: ${%Value}M');</span></pre><p id="37fd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">“联合”显示模式有助于同时显示所有季度的数据。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="8023" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// set the tooltip display mode<br/></em></strong>chart.tooltip().displayMode("union"); </span></pre><p id="cb09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是对Marimekko图表工具提示标题的视觉外观进行的另一个简单修改。我们可以改变字体大小、背景外观和字体粗细，如下所示。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ec94" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// customize the tooltip title<br/></em></strong>var title = chart.tooltip().title();<br/>title.fontFamily("Calibri");<br/>title.fontDecoration("underline");<br/>title.fontWeight(700);<br/>title.fontSize(18);</span></pre><p id="48fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们基于JS的Marimekko图表似乎变得更好，可读性更强。(见<a class="ae kt" href="https://playground.anychart.com/nHEAdkRg/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/20ed664d56fb943553b24215803ae054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCUZJftGIOfpbLyBNfL2jg.png"/></div></div></figure><h1 id="c5de" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">格式化图表标签设置</h1><p id="0437" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">标签是可以与图表上的点一起显示的文本框。标签通常表示每个点包含的信息。让我们配置这个Marimekko图表中的标签，添加以百万美元显示的每个季度的出货量值。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="bd10" class="mu kv in mq b gy mv mw l mx my"><strong class="mq io"><em class="mz">// set the chart labels settings<br/></em></strong>chart.labels().format('${%Value}M');</span></pre><p id="eaa8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，这是我们的交互式Marimekko图表在按照上面的建议进行相关定制后的样子。(见<a class="ae kt" href="https://playground.anychart.com/XluPu7xv/" rel="noopener ugc nofollow" target="_blank"> AnyChart游乐场</a>。)</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/1e4aaee2b872b303c9292f3ddf746a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xpXKFYiTkfaRMJKPjj8rpQ.png"/></div></div></figure><p id="198d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">新定制的高级Marimekko图表看起来比最初的可视化更具信息量和吸引力。你可以用你的创意来展示更多细节。</p><p id="0ef8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">根据最终确定的Marimekko图表，三星是2019年全球领先的智能手机供应商。但是要注意，三星！华为好像很快就要挑战你了。你有没有注意到苹果在第四季度表现异常出色，击败了所有竞争对手？这一杰出成就背后的成功故事是iPhone 11系列的推出，它吸引了全球许多人的目光。</p><p id="39b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">玩你的数据吧，伙计们，因为它们正等着为你揭示令人兴奋的信息。</p><p id="0a00" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以下是本教程中最终Marimekko图表的完整HTML代码:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ba8e" class="mu kv in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Marimekko Chart Example&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-mekko.min.js"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      html, body, #container {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;<br/>    &lt;script&gt;</span><span id="2db0" class="mu kv in mq b gy nf mw l mx my">anychart.onDocumentReady(function () {</span><span id="9e62" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">// create data<br/></em></strong>        var data = {<br/>          title: 'Global Smartphone Shipments (In Millions) in 2019',<br/>          header: ['Name', 'Quarter 1', 'Quarter 2', 'Quarter 3', 'Quarter 4'],<br/>          rows: [<br/>            ['Huawei', 59.1,56.6,66.8,56.2],<br/>            ['Vivo', 23.9,27,31.3,31.5],<br/>            ['Apple', 42,36.5,44.8,72.3],<br/>            ['Samsung', 72,76.3,78.2,70.4],<br/>            ['Xiaomi', 27.8,32.3,31.7,32.9],<br/>            ['Oppo', 25.7,30.6,32.3,31.4],<br/>            ['Others', 90.5,97.7,94.9,106.4],<br/>          ]<br/>        };</span><span id="cfa5" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // create a mekko (marimekko) chart<br/></em></strong>  var chart = anychart.mekko();</span><span id="5ab6" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // set the chart data<br/></em></strong>  chart.data(data);</span><span id="14c6" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // enable the chart legend<br/></em></strong>  chart.legend(true);</span><span id="167f" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // apply a palette for coloring<br/></em></strong>  chart.palette(anychart.palettes.wines);<br/>  <br/><strong class="mq io"><em class="mz">  // customize the tooltip format<br/></em></strong>  chart.tooltip().format('{%seriesName}: ${%Value}M');<br/><strong class="mq io"><em class="mz">  // set the tooltip display mode</em></strong><br/>  chart.tooltip().displayMode("union");</span><span id="dc4c" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // customize the tooltip title <br/></em></strong>  var title = chart.tooltip().title();<br/>  title.fontFamily("Calibri");<br/>  title.fontDecoration("underline");<br/>  title.fontWeight(700);<br/>  title.fontSize(18);<br/>  <br/><strong class="mq io"><em class="mz">  // set the chart labels settings<br/></em></strong>  chart.labels().format('${%Value}M');<br/>  <br/><strong class="mq io"><em class="mz">  // set the x-axis title<br/></em></strong>  chart.xAxis().title('Smartphone Shipments by Brands');<br/><strong class="mq io"><em class="mz">  // set the y-axis title<br/></em></strong>  chart.yAxis().title('Smartphone Shipments by Quarters %');</span><span id="2712" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // set the chart container id<br/></em></strong>  chart.container('container');</span><span id="2f34" class="mu kv in mq b gy nf mw l mx my"><strong class="mq io"><em class="mz">  // draw the resulting marimekko chart<br/></em></strong>  chart.draw();</span><span id="2375" class="mu kv in mq b gy nf mw l mx my">});</span><span id="cec3" class="mu kv in mq b gy nf mw l mx my">    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="5400" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="162e" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">使用JavaScript构建Marimekko图表不是比您在本指南开始时想象的更容易吗？像这样的一些图表库的API易于访问，信息丰富，可以使您的数据可视化开发工作变得非常容易。可用的强大文档将帮助您快速解决编码时可能遇到的任何问题。祝你好运！</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><p id="f926" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mz">原载于2020年12月22日</em><a class="ae kt" href="https://www.anychart.com/blog/2020/12/22/marimekko-chart-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="mz">【https://www.anychart.com】</em></a><em class="mz">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>A First Look at Vue Router in Vue3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue3中的Vue路由器初探</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-first-look-at-vue-router-in-vue3-253bc61b2cf5?source=collection_archive---------2-----------------------#2020-04-06">https://javascript.plainenglish.io/a-first-look-at-vue-router-in-vue3-253bc61b2cf5?source=collection_archive---------2-----------------------#2020-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9058f50d6bded097facb6e267d8efe51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mPF__XaCrH-9RsdB"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@dnevozhai?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Denys Nevozhai</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="8df7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于大多数单页面应用程序来说，管理路线是一个重要的特性。随着新版本的Vue路由器进入alpha阶段，我们已经可以开始检查它在下一个版本的Vue中是如何工作的。</p><p id="9489" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue3中的许多变化将稍微改变我们访问插件和库的方式，这包括<a class="ae jd" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue路由器</a>。</p><p id="0fdf" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将看看如何结合使用<a class="ae jd" href="https://github.com/vuejs/vue-router-next" rel="noopener ugc nofollow" target="_blank"> alpha版本的Vue路由器</a>和<a class="ae jd" href="https://learnvue.co/2020/01/a-first-look-at-vue3-alpha-release-example-app-in-15-minutes/" rel="noopener ugc nofollow" target="_blank">当前的Vue3 Alpha版本</a>。</p><p id="1358" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到本文结束时，您应该知道如何将Vue路由器添加到您的Vue3项目中，并拥有一个不错的小示例！</p><h2 id="988f" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">设置事物</h2><p id="e22b" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，我们将使用尤雨溪发布的<a class="ae jd" href="https://github.com/vuejs/vue-next-webpack-preview/" rel="noopener ugc nofollow" target="_blank"> Vue3网络包预览</a>。</p><p id="7879" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用<code class="fe lz ma mb mc b">git clone <a class="ae jd" href="https://github.com/vuejs/vue-next-webpack-preview.git" rel="noopener ugc nofollow" target="_blank">https://github.com/vuejs/vue-next-webpack-preview.git</a></code>克隆回购</p><p id="f800" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了将vue-router alpha添加到我们的项目中，我们需要修改package.json文件。</p><p id="fe7c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的依赖项中，我们希望添加以下版本的vue-router</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="9709" class="lb lc jg mc b gy ml mm l mn mo">"dependencies": {<br/>    "vue": "^3.0.0-alpha.10",<br/>    "vue-router": "4.0.0-alpha.4"<br/>}</span></pre><p id="55be" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们终于可以从命令行运行<code class="fe lz ma mb mc b">npm install</code>来安装我们所有的依赖项了。</p><p id="e6dd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要做的最后一个设置是实际创建我们的路由器文件和一些视图。</p><p id="f1cd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的<code class="fe lz ma mb mc b">src/ </code>文件夹中，我们将添加三个文件。</p><ul class=""><li id="e815" class="mp mq jg kf b kg kh kk kl ko mr ks ms kw mt la mu mv mw mx bi translated">路由器/index.js</li><li id="03a9" class="mp mq jg kf b kg my kk mz ko na ks nb kw nc la mu mv mw mx bi translated">views/Home.vue</li><li id="27a4" class="mp mq jg kf b kg my kk mz ko na ks nb kw nc la mu mv mw mx bi translated">views/Contact.vue</li></ul><p id="be28" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的路由器文件将——你猜对了——包含我们的路由器，我们的主页/联系人视图将只输出一个单词，因此我们可以看到发生了什么。</p><h2 id="9223" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">创建我们的路线</h2><p id="58ad" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">好了，一切准备就绪，让我们开始使用Vue路由器吧！</p><p id="1df4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单地说，Vue路由器的Vue3版本的主要区别在于，我们必须导入新的方法才能让我们的代码工作。其中最重要的是<code class="fe lz ma mb mc b">createRouter</code>和<code class="fe lz ma mb mc b">createWebHistory</code>。</p><p id="0b93" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在router/index.js文件中，让我们导入这两个方法和前面的两个视图。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="ba08" class="lb lc jg mc b gy ml mm l mn mo">import { createRouter, createWebHistory } from 'vue-router'<br/>import Home from '../views/Home.vue'<br/>import Contact from '../views/Contact.vue'</span></pre><p id="7c9a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们要做的是使用createWebHistory方法创建一个routerHistory对象，如下所示。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="8317" class="lb lc jg mc b gy ml mm l mn mo">import { createRouter, createWebHistory } from 'vue-router'<br/>import Home from '../views/Home.vue'<br/>import Contact from '../views/Contact.vue'<br/><br/>const routerHistory = createWebHistory()</span></pre><p id="5d09" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以前，我们可以只说<code class="fe lz ma mb mc b">mode: history</code>来从哈希模式切换到历史模式，但是现在我们使用<code class="fe lz ma mb mc b">history: createWebHistory()</code>来实现</p><p id="38ac" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们可以使用<code class="fe lz ma mb mc b">createRouter</code>创建路由器。它接受一个对象，我们想要传递我们的<code class="fe lz ma mb mc b">routerHistory</code>变量以及我们的两个路由的数组。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="ff08" class="lb lc jg mc b gy ml mm l mn mo">const router = createRouter({<br/>  history: routerHistory,<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      component: Home<br/>    },<br/>    {<br/>      path: '/contact',<br/>      component: Contact<br/>    }<br/>  ]<br/>})</span></pre><p id="561d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们把文件导出到路由器。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="d0ad" class="lb lc jg mc b gy ml mm l mn mo">export default router</span></pre><p id="92ad" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，从高层次来看，<a class="ae jd" href="https://learnvue.co/2020/02/building-the-same-component-in-vue2-vs-vue3" rel="noopener ugc nofollow" target="_blank">它仍然与Vue2 </a>非常相似。但是随着所有这些变化允许更好的类型脚本支持和优化，让<a class="ae jd" href="https://learnvue.co/2019/12/5-things-you-can-do-to-prepare-for-vue-3-0" rel="noopener ugc nofollow" target="_blank">熟悉新方法</a>是很好的。</p><h2 id="1aa9" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">让我们的应用程序使用vue路由器</h2><p id="bab0" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">现在，我们的Vue路由器文件实际上已经设置好了，我们可以将它添加到我们的项目中。以前，我们可以导入它并说<code class="fe lz ma mb mc b">Vue.use(router)</code>，但在Vue3中这是不同的。</p><p id="4d36" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这实际上是对我们如何创建和挂载Vue应用程序的一个<a class="ae jd" href="https://learnvue.co/2020/03/build-your-first-vue3-application-our-vue3-course/" rel="noopener ugc nofollow" target="_blank">很好的介绍。</a></p><p id="2c7b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的main.js文件中，您会看到我们使用Vue的<code class="fe lz ma mb mc b">createApp</code>方法来实际创建我们的项目。在默认项目中，它链接了createApp和<code class="fe lz ma mb mc b">mount</code>方法。</p><p id="5dd0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要做的是像这样分开这些方法。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="407e" class="lb lc jg mc b gy ml mm l mn mo">const app = createApp(App)<br/><br/>app.mount('#app')</span></pre><p id="c566" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在我们安装我们的应用程序之前，我们想告诉它使用我们的路由器文件。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="a7a2" class="lb lc jg mc b gy ml mm l mn mo">import router from './router'<br/><br/>const app = createApp(App)<br/><br/>app.use(router)<br/><br/>app.mount('#app')</span></pre><p id="3e21" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在我们的App.vue文件中，让我们实际显示我们的路由器视图，并提供一些路由器链接，以便我们可以导航。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="8236" class="lb lc jg mc b gy ml mm l mn mo">&lt;template&gt;<br/>  &lt;div id='root'&gt;<br/>    &lt;img src='./logo.png' /&gt;<br/>    &lt;div id='nav'&gt;<br/>      &lt;router-link to='/'&gt; Home&lt;/router-link&gt;<br/>      &lt;router-link to='/contact'&gt;Contact &lt;/router-link&gt;<br/>    &lt;/div&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="f917" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以现在，如果我们点击一下，我们会看到我们实际上可以在两个页面之间导航！</p><figure class="md me mf mg gt is gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/561837282b44e3ecf55965a46d172f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/0*yL-BAJmeQY8p6BhL.gif"/></div></figure><p id="6c21" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，如果我们试图直接进入我们的<code class="fe lz ma mb mc b"> /contact</code>路线，这是行不通的！我们得到了某种错误。</p><p id="14c6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，这是一个非常快速的webpack修复。</p><p id="71d9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的webpack.config.js文件中，我们希望通过更改我们的配置使devServer能够使用历史api，如下所示。</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="fb4b" class="lb lc jg mc b gy ml mm l mn mo">devServer: {<br/>    inline: true,<br/>    hot: true,<br/>    stats: 'minimal',<br/>    contentBase: __dirname,<br/>    overlay: true,<br/>    historyApiFallback: true<br/>}</span></pre><p id="33dd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们直接导航到我们的联系路线，一切都应该正常工作:)</p><h2 id="e09e" class="lb lc jg bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">结论</h2><p id="a563" class="pw-post-body-paragraph kd ke jg kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们全部完成了——我们已经成功地将vue-router添加到我们的Vue3项目中。大多数其他功能，如导航守卫，处理卷轴，以及类似的工作基本相同。</p><p id="0d96" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae jd" href="https://github.com/matthewmaribojoc/vue3-router-template" rel="noopener ugc nofollow" target="_blank">这是本教程中最终Github repo </a>的链接。如果你想在你的Vue3测试区域安装vue-router，这是一个很好的模板代码。</p><p id="b142" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦所有的Vue3正式发布，我肯定会写一个更深入的指南，但知道如何添加它已经是开始在新框架中玩的一个很好的方式。</p><p id="59b7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你学到了一些东西，并和我一样兴奋地开始尝试Vue3中的一些新功能。</p><p id="daa6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编码快乐！</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="3aa2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有兴趣了解更多关于Vue 3的知识，请下载我的免费Vue 3备忘单，里面有一些基本知识，比如合成API、Vue 3模板语法和事件处理。</p><p id="9ebb" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【JavaScript用简单英语写的一句话:我们总是乐于帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到submissions@javascriptinplainenglish.com<a class="ae jd" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">给我们，我们会把你添加为作者。</a></p></div></div>    
</body>
</html>
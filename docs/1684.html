<html>
<head>
<title>How to Generate Random Numbers in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中生成随机数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-generate-random-numbers-in-javascript-8bc3987896a7?source=collection_archive---------4-----------------------#2020-04-14">https://javascript.plainenglish.io/how-to-generate-random-numbers-in-javascript-8bc3987896a7?source=collection_archive---------4-----------------------#2020-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="031b" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">使用内置的<code class="fe iy iz ja jb b">Math.random()</code>方法</h2><div class=""/><div class=""><h2 id="5200" class="pw-subtitle-paragraph ka jd iq bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">无论是为了性能测试还是任何其他目的，生成伪随机数有时都是有用的。</h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/e6542f408bc4a0cd1100b83792766f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3J6-4_u2R0R9WfDV"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Photo by <a class="ae li" href="https://unsplash.com/@krisroller?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kristopher Roller</a> on <a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="lj"><p id="4379" class="lk ll iq bd lm ln lo lp lq lr ls lt dk translated"><code class="fe iy iz ja jb b"><strong class="ak">Math.random()</strong></code>函数返回一个范围为0到小于1(包括0，但不包括1)的浮点伪随机数，在该范围内近似均匀分布，然后您可以将其缩放到所需的范围— <a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="805b" class="pw-post-body-paragraph lu lv iq lw b lx ly ke lz ma mb kh mc md me mf mg mh mi mj mk ml mm mn mo lt ij bi mp translated"><span class="l mq mr ms bm mt mu mv mw mx di"> J </span> avaScript有一个有用的内置<code class="fe iy iz ja jb b"><a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random" rel="noopener ugc nofollow" target="_blank">Math.random()</a></code>函数，可以在必要时生成<a class="ae li" href="https://en.wikipedia.org/wiki/Pseudorandomness" rel="noopener ugc nofollow" target="_blank">伪随机</a> <a class="ae li" href="https://floating-point-gui.de/languages/javascript/" rel="noopener ugc nofollow" target="_blank">浮点数</a>:</p><pre class="kt ku kv kw gt my jb mz na aw nb bi"><span id="af5b" class="nc nd iq jb b gy ne nf l ng nh">Math.random() // A number 0 &lt;= x &lt; 1, e.g. <!-- -->0.6185746631788063</span></pre><p id="c286" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">要生成特定范围内的整数，请使用以下代码:</p><pre class="kt ku kv kw gt my jb mz na aw nb bi"><span id="138d" class="nc nd iq jb b gy ne nf l ng nh">Math.floor(Math.random() * 1 - Low + High)) + Low // Low &lt;= x &lt; High</span></pre><p id="d527" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">例如，从1到10的随机整数是:</p><pre class="kt ku kv kw gt my jb mz na aw nb bi"><span id="81b6" class="nc nd iq jb b gy ne nf l ng nh">Math.floor(Math.random() * (1 - 1 + 10)) + 1 // 1 &lt;= x &lt;= 10</span></pre><p id="519f" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">从1到10的随机浮点数是:</p><pre class="kt ku kv kw gt my jb mz na aw nb bi"><span id="8e94" class="nc nd iq jb b gy ne nf l ng nh">Math.random() * (9) + 1 // 1 &lt;= x &lt; 10 e.g. <!-- -->3.260141980146828</span></pre><p id="3ab3" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">从0到1的2位数精度的随机浮点值为:</p><pre class="kt ku kv kw gt my jb mz na aw nb bi"><span id="b9ff" class="nc nd iq jb b gy ne nf l ng nh">Math.floor(Math.random()*100)/100 // A number 0 &lt;= x &lt; 1 e.g. 0.07</span></pre></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h1 id="9ffe" class="nu nd iq bd nv nw nx ny nz oa ob oc od kj oe kk of km og kn oh kp oi kq oj ok bi translated">可以用<code class="fe iy iz ja jb b">Math.random()</code>设定种子吗？</h1><p id="d946" class="pw-post-body-paragraph lu lv iq lw b lx ol ke lz ma om kh mc md on mf mg mh oo mj mk ml op mn mo lt ij bi mp translated"><span class="l mq mr ms bm mt mu mv mw mx di"> P </span>假随机数有一个<a class="ae li" href="https://en.wikipedia.org/wiki/Random_seed" rel="noopener ugc nofollow" target="_blank">种子</a>，如果可配置，可用于重复复制同一组“随机”数。</p><p id="53c3" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">这将有助于在大型随机数据集上对算法进行自动化测试，而您不希望将该数据集存储为模型数据。</p><p id="806f" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">不幸的是，<code class="fe iy iz ja jb b">Math.random()</code>不允许你设定种子。</p><blockquote class="lj"><p id="c114" class="lk ll iq bd lm ln oq or os ot ou lt dk translated">该实现为随机数生成算法选择初始种子；用户不能选择或重置它。— <a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="5b8b" class="pw-post-body-paragraph lu lv iq lw b lx ly ke lz ma mb kh mc md me mf mg mh mi mj mk ml mm mn mo lt ij bi translated">因此，如果你需要可再生的种子来测试数据，你将需要一个第三方库，比如开源的<a class="ae li" href="https://github.com/davidbau/seedrandom" rel="noopener ugc nofollow" target="_blank"> seedrandom.js </a>(可以在GitHub上获得)。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h1 id="6a40" class="nu nd iq bd nv nw nx ny nz oa ob oc od kj oe kk of km og kn oh kp oi kq oj ok bi translated"><code class="fe iy iz ja jb b">Math.random()</code>有多随机？</h1><p id="dd80" class="pw-post-body-paragraph lu lv iq lw b lx ol ke lz ma om kh mc md on mf mg mh oo mj mk ml op mn mo lt ij bi mp translated"><span class="l mq mr ms bm mt mu mv mw mx di"> T </span>根据熵的<a class="ae li" href="https://en.wikipedia.org/wiki/Entropy_(computing)" rel="noopener ugc nofollow" target="_blank">位，由<code class="fe iy iz ja jb b">Math.random()</code>生成的精确数学随机性因平台而异。</a></p><p id="8d17" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">这是因为ECMAScript规范简单地指定了<code class="fe iy iz ja jb b">Math.random()</code>应该返回什么，现在应该如何实现它。</p><blockquote class="ov ow ox"><p id="2ced" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">“尽管<code class="fe iy iz ja jb b">Math.random()</code>能够产生[0，1]以内的数字，但这样做也有一些缺点:</p><p id="6946" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">引擎之间关于多少位的随机性是不一致的:</p><p id="63a7" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">Internet Explorer: 53位</p><p id="13ec" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">Mozilla Firefox: 53位</p><p id="6264" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">谷歌Chrome/node.js: 32位[*现在是128位，见下文]</p><p id="6ec1" class="lu lv oy lw b lx ni ke lz ma nj kh mc oz nk mf mg pa nl mj mk pb nm mn mo lt ij bi translated">苹果Safari: 32位”GitHub上的<a class="ae li" href="https://github.com/ckknight/random-js" rel="noopener ugc nofollow" target="_blank"> random-js库</a></p></blockquote><p id="f413" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">*驱动Chrome和Node的V8引擎在2015年更新为128位<code class="fe iy iz ja jb b">Math.random()</code>实现，根据V8博客<a class="ae li" href="https://v8.dev/blog/math-random" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8316" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">因此，如果你需要比这更随机的东西，你可能想要搜索另一个库，尽管32位(即<a class="ae li" href="https://en.wikipedia.org/wiki/4,294,967,295" rel="noopener ugc nofollow" target="_blank"> 4294967295 </a>)可能已经足够了。</p><p id="b7ba" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">熵的程度在平台之间不一致的事实比32位限制更不利。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h1 id="a77a" class="nu nd iq bd nv nw nx ny nz oa ob oc od kj oe kk of km og kn oh kp oi kq oj ok bi translated"><code class="fe iy iz ja jb b">Math.random()</code>不是密码安全的</h1><p id="507b" class="pw-post-body-paragraph lu lv iq lw b lx ol ke lz ma om kh mc md on mf mg mh oo mj mk ml op mn mo lt ij bi mp translated"><span class="l mq mr ms bm mt mu mv mw mx di">答</span>另外，<code class="fe iy iz ja jb b">Math.random()</code>不适合加密，MDN文档推荐你使用类似<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto" rel="noopener ugc nofollow" target="_blank"> Web Crypto API </a>的替代品。</p><blockquote class="lj"><p id="3278" class="lk ll iq bd lm ln oq or os ot ou lt dk translated"><code class="fe iy iz ja jb b">“Math.random()</code> <em class="pc">不</em>提供密码安全随机数。不要将它们用于任何与安全相关的事情。使用Web Crypto API，更准确地说是使用<code class="fe iy iz ja jb b"><a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/RandomSource/getRandomValues" rel="noopener ugc nofollow" target="_blank">window.crypto.getRandomValues()</a></code>方法。”— <a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="b9ac" class="pw-post-body-paragraph lu lv iq lw b lx ly ke lz ma mb kh mc md me mf mg mh mi mj mk ml mm mn mo lt ij bi translated">当在安全环境中工作时(即通过HTTPS/TLS)，内置的Web加密API可以提供加密安全的数字生成。</p><p id="0a15" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">Medium作者<a class="pd pe ep" href="https://medium.com/u/ad8b0a0a140e?source=post_page-----8bc3987896a7--------------------------------" rel="noopener" target="_blank"> Daz </a>在其博客的一篇文章中给出了一个使用Web Crypto API的<code class="fe iy iz ja jb b"><a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues" rel="noopener ugc nofollow" target="_blank">.getRandomValues()</a></code>方法<a class="ae li" href="https://medium.com/@dazcyril/generating-cryptographic-random-state-in-javascript-in-the-browser-c538b3daae50" rel="noopener">的简单例子。</a></p><p id="b459" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">GitHub上也有免费的加密安全数字库，比如<a class="ae li" href="https://github.com/jprichardson/secure-random" rel="noopener ugc nofollow" target="_blank"> secure-random </a>或🤓表情符号友好的🧐。</p><p id="2060" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">但是对于你日常不安全的随机数，比如当学习<a class="ae li" href="https://medium.com/coding-at-dawn/sorts-in-60-seconds-speedy-javascript-interview-answers-on-sorting-acb72bdea8a2" rel="noopener"> JavaScript排序算法</a>或者<a class="ae li" href="https://medium.com/coding-at-dawn/how-to-sort-an-array-numerically-in-javascript-2b22710e3958" rel="noopener">如何对数组进行数字排序</a>，<code class="fe iy iz ja jb b">Math.random()</code>就可以了。<strong class="lw je">快乐编码！</strong>🤠🥳😎</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi pf"><img src="../Images/f9ed803fdb075a8c8f6670181af6a8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p7HGyCw-c4Na7e8U"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Photo by <a class="ae li" href="https://unsplash.com/@carsonarias?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Carson Arias</a> on <a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="0640" class="pw-post-body-paragraph lu lv iq lw b lx ni ke lz ma nj kh mc md nk mf mg mh nl mj mk ml nm mn mo lt ij bi translated">德里克·奥斯汀博士是《职业规划:如何在6个月内成为成功的6位数程序员 的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>
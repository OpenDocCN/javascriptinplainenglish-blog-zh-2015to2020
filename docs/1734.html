<html>
<head>
<title>Detecting Screen Size and OS Dark Mode in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中检测屏幕大小和操作系统黑暗模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/detecting-screen-size-and-os-dark-mode-in-javascript-97f09dfdf1c?source=collection_archive---------13-----------------------#2020-04-17">https://javascript.plainenglish.io/detecting-screen-size-and-os-dark-mode-in-javascript-97f09dfdf1c?source=collection_archive---------13-----------------------#2020-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="961e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用matchMedia()函数完成工作</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8c0c91b34e05235d0889a52bb5e4abaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gg77J1GJQnuUtIcY"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@firmbee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">William Iven</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="92b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一个关于JavaScript <code class="fe ls lt lu lv b">matchMedia()</code>函数的快速帖子。这个函数允许您匹配JavaScript中的媒体查询并检测屏幕大小。比如你想知道用户的设备是手机还是平板。此外，该功能还可以检测操作系统的暗模式或亮模式。</p><p id="1820" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们在文本编辑器中探索这个功能。</p><h1 id="2420" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">开始</h1><p id="9c7b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">下面是一个示例代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/af5448743931bbff9c3e6c3ee7e5f5da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARCQSzRMtAz0ngq4FQhoJA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sample Code</figcaption></figure><p id="c5aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在脚本标记中，创建一个新的常量，它将保存matchMedia()函数的返回值。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="8f88" class="my lx iq lv b gy mz na l nb nc">&lt;script&gt;<br/>   const matchResult = window.matchMedia("(max-width: 767px)");<br/>   console.log(matchResult);<br/>&lt;/script&gt;</span></pre><p id="3260" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在函数内部，我们要传递一个字符串。这里我们通过<code class="fe ls lt lu lv b">(max-width: 767px)</code>。你可能以前在CSS中见过类似的东西。因此，如果这个媒体查询匹配，那么我们知道屏幕小于767像素。</p><p id="91ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果是这样的话，我们知道这是一个更小的设备。很可能是手机。然后我们在控制台日志中显示结果。</p><h1 id="4d6a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结果</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/01c1724f7a17e11a956cfd9a5688d7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dv8tnWsNfupXOO77SWhMqA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Result</figcaption></figure><p id="964a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，我们有一个名为<code class="fe ls lt lu lv b">matches</code>的属性，当屏幕小于767像素时，它等于<code class="fe ls lt lu lv b">true</code>。当我们进一步扩大屏幕尺寸并刷新页面时，它等于<code class="fe ls lt lu lv b">false</code>。</p><h1 id="2a94" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">功能是小屏幕</h1><p id="301b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">接下来，我们将创建一个名为isSmallScreen的函数，它检测某个东西是否是小屏幕尺寸。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="1269" class="my lx iq lv b gy mz na l nb nc">function isSmallScreen() {<br/>   return window.matchMedia("(max-width: 767px)").matches;<br/>}</span></pre><p id="a9dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/14dc7a8c4dc8aa6e8cd0a92c89771b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K5j8jyKmJYqdb2UqRPtXoA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">isSmallScreen function</figcaption></figure><h1 id="4714" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">检测操作系统暗/亮模式</h1><p id="ba03" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">这里是如何检测操作系统的黑暗或光明的模式。它的工作方式和以前非常相似。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/e8c6abc1fe32fbb381e0433ec1782b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Te7Ib9nkeiuZCBMXYr57vA.png"/></div></div></figure><p id="c046" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你需要做的就是用上面的<code class="fe ls lt lu lv b">prefers-color-scheme</code>改变matchMedia里面的字符串。如果返回值为<code class="fe ls lt lu lv b">true</code>，则OS处于黑暗模式。</p><p id="0364" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/987f5b833f923a4c5eb2d385aeb2b4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aGztgpAlOJP8J3uYKbqtjQ.gif"/></div></div></figure><p id="19b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而JavaScript matchMedia函数就是这么用的！</p><h2 id="14bf" class="my lx iq bd ly ng nh dn mc ni nj dp mg lf nk nl mi lj nm nn mk ln no np mm nq bi translated"><strong class="ak">用简单英语写的JavaScript笔记</strong></h2><p id="8107" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">我们已经推出了三种新的出版物！请关注我们的新出版物:<a class="ae kv" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="ky ir">AI in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="ky ir">UX in Plain English</strong></a>，<a class="ae kv" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="ky ir">Python in Plain English</strong></a><strong class="ky ir"/>——谢谢，继续学习！</p><p id="111c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也一直有兴趣帮助推广高质量的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kv" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">submissions @ plain English . io</strong></a><strong class="ky ir"/>，使用您的Medium用户名，我们会将您添加为作者。另外，请让我们知道您想加入哪个/哪些出版物。</p></div></div>    
</body>
</html>
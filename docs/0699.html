<html>
<head>
<title>How To Add Parallax Scrolling to Your Vue.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何给你的Vue.js应用添加视差滚动</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-parallax-scrolling-to-your-vue-js-app-5c045ad83c26?source=collection_archive---------1-----------------------#2019-11-28">https://javascript.plainenglish.io/how-to-add-parallax-scrolling-to-your-vue-js-app-5c045ad83c26?source=collection_archive---------1-----------------------#2019-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7abd8c4dac4d3ad564698c56c1639316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8CBmHiLL_2O-aHjZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@humblelamb?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Humble Lamb</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2ff5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">视差滚动的效果是背景图像比前景中的元素滚动得慢，从而产生页面深度的错觉。</p><p id="5426" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">网站通常在信息页面中使用这种方式，在这种页面中，一些文本在前景中，一个图像在背景中，滚动得更慢，为用户创造更有趣的体验。</p><p id="bc4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://www.mockplus.com/blog/post/parallax-scrolling-websites" rel="noopener ugc nofollow" target="_blank">https://www . mock plus . com/blog/post/parallax-scrolling-websites</a>有一些视差滚动的网页例子。</p><p id="b0c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了React，使用位于<a class="ae kc" href="https://github.com/apertureless/vue-parallax" rel="noopener ugc nofollow" target="_blank">https://github.com/apertureless/vue-parallax</a>的<a class="ae kc" href="https://www.npmjs.com/package/react-parallax" rel="noopener ugc nofollow" target="_blank"> V </a> ue-Parallaxy库创建视差滚动效果变得快速简单。</p><p id="1a8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将制作一个应用程序，在背景中显示图像列表，在前景中显示标签文本。图像将由Pixabay API提供。你可以在<a class="ae kc" href="https://pixabay.com/api/docs/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>注册一个API密匙。</p><p id="54b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了启动项目，我们通过运行以下命令来创建项目:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="4372" class="lk ll iq lg b gy lm ln l lo lp">npx @vue/cli create photo-app</span></pre><p id="e809" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们选择“手动选择功能”，然后选择包括Babel和Vue路由器。</p><p id="fff1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要安装Axios来从Pixabay API获取图像，安装BootstrapVue来进行造型，安装Vue-Parallaxy来创建视差滚动效果。要安装软件包，请运行:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="8880" class="lk ll iq lg b gy lm ln l lo lp">npm i axios bootstra-vue vue-parallaxy</span></pre><p id="fe76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装好所有的包后，我们就可以开始构建应用程序了。首先，我们添加一个mixin来发出HTTP请求。在<code class="fe lq lr ls lg b">src</code>文件夹中创建一个<code class="fe lq lr ls lg b">mixins</code>文件夹，然后在该文件夹中创建<code class="fe lq lr ls lg b">requestsMixins.js</code>。在文件中，添加:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="b253" class="lk ll iq lg b gy lm ln l lo lp">const axios = require("axios");<br/>const APIURL = "<a class="ae kc" href="https://pixabay.com/api" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/api</a>";</span><span id="cc33" class="lk ll iq lg b gy lt ln l lo lp">export const requestsMixin = {<br/>  methods: {<br/>    getImages(page = 1) {<br/>      return axios.get(<br/>        `${APIURL}/?page=${page}&amp;key=${process.env.VUE_APP_API_KEY}`<br/>      );<br/>    }<br/>  }<br/>};</span></pre><p id="e901" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来在<code class="fe lq lr ls lg b">Home.vue</code>中，用以下代码替换现有代码:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="e09d" class="lk ll iq lg b gy lm ln l lo lp">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;div v-for="(img, i) of images" :key="i" class="parallax-container"&gt;<br/>      &lt;parallax :speed-factor="0.5" direction="down" :parallax="true"&gt;<br/>        &lt;div&gt;<br/>          &lt;img :src="img.largeImageURL" :alt="img.tags" style="image" /&gt;<br/>          &lt;h1 class="parallax-title"&gt;{{img.tags}}&lt;/h1&gt;<br/>        &lt;/div&gt;<br/>      &lt;/parallax&gt;<br/>      &lt;br /&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="c017" class="lk ll iq lg b gy lt ln l lo lp">&lt;script&gt;<br/>// @ is an alias to /src<br/>import { requestsMixin } from "../mixins/requestsMixin";<br/>import Parallax from "vue-parallaxy";</span><span id="fad1" class="lk ll iq lg b gy lt ln l lo lp">export default {<br/>  name: "home",<br/>  mixins: [requestsMixin],<br/>  components: {<br/>    Parallax<br/>  },<br/>  data() {<br/>    return {<br/>      images: []<br/>    };<br/>  },<br/>  methods: {<br/>    async getImagesByPage() {<br/>      const response = await this.getImages();<br/>      this.images = response.data.hits;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getImagesByPage();<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="0f19" class="lk ll iq lg b gy lt ln l lo lp">&lt;style&gt;<br/>.parallax-container {<br/>  position: relative;<br/>  height: 1000px;<br/>}</span><span id="5491" class="lk ll iq lg b gy lt ln l lo lp">.parallax-title {<br/>  position: absolute;<br/>  top: 30%;<br/>  left: 0;<br/>  right: 0;<br/>  padding: 20px;<br/>  color: white;<br/>  text-align: center;<br/>}</span><span id="82aa" class="lk ll iq lg b gy lt ln l lo lp">.image {<br/>  height: 700px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="2738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过在<code class="fe lq lr ls lg b">components</code>对象中添加<code class="fe lq lr ls lg b">Parallax</code>将Vue-Parallaxy组件包含在这个组件中。然后，我们通过调用刚刚创建的<code class="fe lq lr ls lg b">requestsMixin</code>中的<code class="fe lq lr ls lg b">this.getImages</code>函数来获取图像。当页面加载时，我们调用<code class="fe lq lr ls lg b">beforeMount</code>钩子中的<code class="fe lq lr ls lg b">getImagesByPage</code>函数来获取图像。</p><p id="1e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们使用Vue-Parallaxy提供的<code class="fe lq lr ls lg b">parallax </code>组件来创建视差滚动效果。<code class="fe lq lr ls lg b">parallax</code>作为视差效果的容器。我们用<code class="fe lq lr ls lg b">speed-factor</code>道具使滚动的速度不同于前景，我们将<code class="fe lq lr ls lg b">direction</code>设置为向下，这样它就会向下滚动。<code class="fe lq lr ls lg b">parallax</code>道具设置为<code class="fe lq lr ls lg b">true</code>，这样我们就可以得到前景和背景不同的滚动速度。</p><p id="0d7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lq lr ls lg b">parallax-container</code>div的高度更改为1000像素，图像的高度更改为700像素，以保持间距一致。</p><p id="c437" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件中，我们遍历图像并显示来自Pixbay API的一些文本。我们通过指定以下内容来定位照片中的文本:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="72e5" class="lk ll iq lg b gy lm ln l lo lp">&lt;style&gt;<br/>.parallax-container {<br/>  position: relative;<br/>}</span><span id="9dd3" class="lk ll iq lg b gy lt ln l lo lp">.parallax-title {<br/>  position: absolute;<br/>  top: 30%;<br/>  left: 0;<br/>  right: 0;<br/>  padding: 20px;<br/>  color: white;<br/>  text-align: center;<br/>}<br/>&lt;/style&gt;</span></pre><p id="1e55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将文本放在图像的中心，并将文本颜色改为白色。</p><p id="8e8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来在<code class="fe lq lr ls lg b">App.vue</code>中，我们将现有代码替换为:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="ed6e" class="lk ll iq lg b gy lm ln l lo lp">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand href="#"&gt;Photo App&lt;/b-navbar-brand&gt;</span><span id="23e1" class="lk ll iq lg b gy lt ln l lo lp">      &lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="70e8" class="lk ll iq lg b gy lt ln l lo lp">      &lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="6e64" class="lk ll iq lg b gy lt ln l lo lp">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="a5d0" class="lk ll iq lg b gy lt ln l lo lp">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="18a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe lq lr ls lg b">page</code>类向页面添加一些填充，并在页面顶部添加BootstrapVue导航栏。此外，我们有<code class="fe lq lr ls lg b">router-view</code>以便我们看到主页。</p><p id="9e83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来在<code class="fe lq lr ls lg b">main.js</code>中，我们将现有代码替换为:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="1ef7" class="lk ll iq lg b gy lm ln l lo lp">import Vue from 'vue'<br/>import App from './App.vue'<br/>import router from './router'<br/>import store from './store'<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import BootstrapVue from "bootstrap-vue";</span><span id="3779" class="lk ll iq lg b gy lt ln l lo lp">Vue.config.productionTip = false<br/>Vue.use(BootstrapVue);</span><span id="16fd" class="lk ll iq lg b gy lt ln l lo lp">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount('#app')</span></pre><p id="b684" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">向应用程序添加BootstrapVue库和样式，以便我们可以在应用程序中使用代码，并在整个应用程序中查看样式。</p><p id="d333" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe lq lr ls lg b">router.js</code>中，将现有代码替换为:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="1207" class="lk ll iq lg b gy lm ln l lo lp">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="a7d9" class="lk ll iq lg b gy lt ln l lo lp">Vue.use(Router);</span><span id="da71" class="lk ll iq lg b gy lt ln l lo lp">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="22a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了主页路径，这样我们就可以看到我们构建的页面。</p><p id="c18a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在项目的根文件夹中，我们添加了一个<code class="fe lq lr ls lg b">.env</code>文件来存储API密钥:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="e609" class="lk ll iq lg b gy lm ln l lo lp">VUE_APP_API_KEY='Pixabay API key'</span></pre><p id="6c3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以像在<code class="fe lq lr ls lg b">requestsMixin.js</code>中一样通过引用<code class="fe lq lr ls lg b">process.env.VUE_APP_API_KEY</code>来使用这个keep。</p><p id="2c59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来在<code class="fe lq lr ls lg b">index.html</code>中，将现有代码替换为:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="06eb" class="lk ll iq lg b gy lm ln l lo lp">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Photo App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-parallax-scrolling-tutorial-app doesn't work<br/>        properly without JavaScript enabled. Please enable it to<br/>        continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="43c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">改一下标题。</p><p id="9bef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，运行<code class="fe lq lr ls lg b">npm run serve</code>，您将看到:</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/a543cdf141eaaaac8472fee3c1d5e9c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K3_blQLx_k3ebbKSJyQA0Q.png"/></div></div></figure><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/6831fcd5b8cb46d96180cc1a715e6885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*007ZU0KkynQARtt8HFQjVg.png"/></div></div></figure><p id="75d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，这两张图片的底部是不同的。上图底部被切掉了。我们已经实现了视差滚动的预期效果。</p></div></div>    
</body>
</html>
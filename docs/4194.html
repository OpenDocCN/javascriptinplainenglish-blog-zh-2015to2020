<html>
<head>
<title>How To Internationalize Your React App With i18next</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用i18next国际化你的React应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-internationalize-your-react-app-with-i18next-5e8ee9c85a2e?source=collection_archive---------10-----------------------#2020-11-23">https://javascript.plainenglish.io/how-to-internationalize-your-react-app-with-i18next-5e8ee9c85a2e?source=collection_archive---------10-----------------------#2020-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2ef8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让更多人可以使用你的应用。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f8f8355a58a490ad1339a64f391fee7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@nasa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">NASA</a> on <a class="ae kv" href="https://unsplash.com/s/photos/global?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b3c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">世界从未像现在这样紧密相连。你可以在几秒钟内获得来自地球另一端的新闻。世界上有190多个国家，现在有7000多种语言在使用。即使只算前20名，也还是很多。</p><p id="8bf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些语言中的每一种都有自己的方式来表达信息，从数字到文本的方向。开发应用程序来满足所有这些不同的语言可能非常麻烦。</p><p id="f21c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">全球化</em> (g11n)对于任何想让产品为全球更多人所用的人来说，都是一种战略方法。分为两步:<em class="ls">国际化</em> (i18n)和<em class="ls">本地化</em> (l10n)。</p><p id="f30b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按照<a class="ae kv" href="https://www.w3.org/International/questions/qa-i18n" rel="noopener ugc nofollow" target="_blank"> W3C </a>的说法，国际化就是:</p><blockquote class="lt"><p id="8a4c" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">[……]产品、应用程序或文档内容的设计和开发，能够针对不同文化、地区或语言的目标受众轻松实现本地化。</p></blockquote><p id="65f0" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">和本地化:</p><blockquote class="lt"><p id="dde6" class="lu lv iq bd lw lx ly lz ma mb mc lr dk translated">[……]是指对产品、应用程序或文档内容进行调整，以满足特定目标市场(地区)的语言、文化和其他要求。</p></blockquote><p id="e758" class="pw-post-body-paragraph kw kx iq ky b kz md jr lb lc me ju le lf mf lh li lj mg ll lm ln mh lp lq lr ij bi translated">简而言之，i18n允许应用程序支持不同的地区，从而实现本地化。</p><p id="ea67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">实现i18n的应用程序将具有一些特性:</p><ul class=""><li id="08cd" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">没有必要改变源代码来支持一种新的语言。</li><li id="528f" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">它处理不同的数据格式，比如数字、货币、日期和复数。</li><li id="a86b" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">它处理显示文本的不同方式，例如图标、字符和方向(从右到左、从左到右等)。</li><li id="a302" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">它能迅速适应新的环境。</li></ul><blockquote class="mw mx my"><p id="03d5" class="kw kx ls ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">TL；博士</strong>:你可以在这里查看这个教程<a class="ae kv" href="https://github.com/ustropo/react-i18n-tutorial" rel="noopener ugc nofollow" target="_blank">的完整代码。</a></p></blockquote></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="b680" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">React i18n库</h1><p id="0743" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">幸运的是，已经有一些不错的库，你可以使用它们来开发你的应用程序，以立即支持i18n。</p><h2 id="3edb" class="og nk iq bd nl oh oi dn np oj ok dp nt lf ol om nv lj on oo nx ln op oq nz or bi translated">反应-国际</h2><p id="9748" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">最受欢迎的库之一，是<a class="ae kv" href="https://formatjs.io/" rel="noopener ugc nofollow" target="_blank">FormatJS</a>集合的一部分。它支持150多种语言。</p><p id="7747" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它可以毫不费力地处理常见区域设置，如日期和时间、货币和数字。</p><p id="0746" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它还有一个很棒的文档，你可以在这里查看。</p><h2 id="212d" class="og nk iq bd nl oh oi dn np oj ok dp nt lf ol om nv lj on oo nx ln op oq nz or bi translated">react-国际通用</h2><p id="6b38" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">这个<a class="ae kv" href="https://github.com/alibaba/react-intl-universal" rel="noopener ugc nofollow" target="_blank">库</a>由阿里巴巴集团打造，基于react-intl库。不同之处在于，这个库通过提供一个单独的对象来加载区域设置，使得非React组件也可以使用它。</p><p id="8d56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它也很容易使用，你可以处理数字，货币和日期，而不必安装任何其他软件包。</p><h2 id="1b90" class="og nk iq bd nl oh oi dn np oj ok dp nt lf ol om nv lj on oo nx ln op oq nz or bi translated">语言</h2><p id="c6a3" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">它是一个相对的<a class="ae kv" href="https://lingui.js.org/" rel="noopener ugc nofollow" target="_blank">新库</a>，包大小很小(5 kB)。它有一些关键特性，比如富文本支持、多元化和地区检测。</p><p id="3c52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它可以使用JSON或PO文件来存储翻译。它是非常轻量级和优化的，所以它不影响最终的产品。</p><h2 id="54f5" class="og nk iq bd nl oh oi dn np oj ok dp nt lf ol om nv lj on oo nx ln op oq nz or bi translated">react-i18接下来</h2><p id="be24" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">它也是一个流行的国际化库，基于<a class="ae kv" href="https://www.i18next.com" rel="noopener ugc nofollow" target="_blank"> i18next </a>。它可以在React和React-Native应用程序上使用。</p><p id="46c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它支持服务器端渲染。它的目标是成为一个完整的i18n解决方案，并支持不同的<a class="ae kv" href="https://www.i18next.com/overview/plugins-and-utils" rel="noopener ugc nofollow" target="_blank">插件</a>(从后端、区域缓存等加载翻译)来丰富原始包。</p><p id="ec90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它并不局限于React，所以您也可以在其他应用程序中使用它。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="cb90" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">React-i18入门接下来</h1><p id="534f" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">对于本教程，我将使用<a class="ae kv" href="https://www.i18next.com/overview/getting-started" rel="noopener ugc nofollow" target="_blank"> i18next </a>库。这是一个流行的库，您可以在其他应用程序上使用，而不仅仅是在React上。您可以轻松地扩展它。</p><blockquote class="mw mx my"><p id="bb16" class="kw kx ls ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">注</strong>:本教程是用NodeJS版本12.16.2，Yarn版本1.22.4，React 17.0.1制作的。</p></blockquote><p id="74c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们必须使用<code class="fe os ot ou ov b"><a class="ae kv" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>创建React应用程序:</p><pre class="kg kh ki kj gt ow ov ox oy aw oz bi"><span id="44f3" class="og nk iq ov b gy pa pb l pc pd">yarn create react-app i18n-tutorial<br/>cd i18n-tutorial</span></pre><p id="094c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们需要安装i18下一个依赖项:</p><pre class="kg kh ki kj gt ow ov ox oy aw oz bi"><span id="acdb" class="og nk iq ov b gy pa pb l pc pd">yarn add react-i18next i18next i18next-http-backend</span></pre><p id="f250" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让我们的代码看起来更好，我将使用<a class="ae kv" href="https://react.semantic-ui.com/" rel="noopener ugc nofollow" target="_blank">语义UI </a>包(你可以使用其他你想要的，比如<a class="ae kv" href="https://react-bootstrap.github.io/" rel="noopener ugc nofollow" target="_blank">引导</a>或<a class="ae kv" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">材质UI </a>):</p><pre class="kg kh ki kj gt ow ov ox oy aw oz bi"><span id="a35d" class="og nk iq ov b gy pa pb l pc pd">yarn add semantic-ui-react semantic-ui-css</span></pre></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="146f" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">设置</h1><p id="ff8b" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">我们需要在代码中初始化和配置i18next库。因此，在<code class="fe os ot ou ov b">src</code>文件夹中创建一个文件<code class="fe os ot ou ov b">i18n.js</code>，并放入以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="c6cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须初始化<code class="fe os ot ou ov b">i18n</code>对象。调用<code class="fe os ot ou ov b">use</code>函数加载所有你想用于你的程序的插件。对于我们的案例，我们将使用两个i18next插件:</p><ul class=""><li id="e55f" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><code class="fe os ot ou ov b"><a class="ae kv" href="https://github.com/i18next/i18next-http-backend" rel="noopener ugc nofollow" target="_blank">i18next-http-backend</a></code>:这个插件允许从后端服务器加载翻译文件。</li><li id="6330" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">initReactI18next</code>:这个插件创建了一个内部存储，使得我们的反应组件可以使用这个实例。</li></ul><blockquote class="mw mx my"><p id="73b5" class="kw kx ls ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:在这里可以找到一些可用插件的列表<a class="ae kv" href="https://www.i18next.com/overview/plugins-and-utils" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><p id="7c6c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在所有插件初始化之后，我们必须用一些参数来配置i18n对象。这里<a class="ae kv" href="https://www.i18next.com/overview/configuration-options" rel="noopener ugc nofollow" target="_blank"/>提供了完整的选项列表，但对我们的情况来说最重要的是:</p><ul class=""><li id="31c1" class="mi mj iq ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">lng</code>使用哪种语言。</li><li id="0025" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">fallbackLng</code>:如果找不到翻译，使用哪种语言。</li><li id="a8b9" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">ns</code>:要加载名称空间的字符串或数组。在我们的例子中，每个名称空间都是一个不同的文件。</li><li id="38f3" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">defaultNs</code>:在我们没有明确告诉翻译函数的情况下使用的默认名称空间。</li><li id="c7af" class="mi mj iq ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><code class="fe os ot ou ov b">debug</code>:如果您想在某些事件发生时在浏览器中获取控制台日志，例如语言更改或初始化，请将其设置为true。</li></ul></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="43b5" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">使用它</h1><p id="c12c" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">首先，让我们创建主应用程序。为了简化本教程，它将只是一个<em class="ls">下拉菜单</em>，包含可用的语言和一条好消息。当菜单更改时，我们会将信息更改为选定的语言。</p><p id="e132" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，将文件<code class="fe os ot ou ov b">App.js</code>修改为以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="9c71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，我们还没有使用任何翻译。所有的信息都是硬编码的，我们不会改变任何东西。</p><p id="e217" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于我们配置了<code class="fe os ot ou ov b">i18n</code>对象来使用fetch请求翻译文件，我们必须创建一种方法来加载它们。如果你愿意，你可以使用API或者其他HTTP服务，但是在本教程中，我们将把它们放在<code class="fe os ot ou ov b">public</code>文件夹中。</p><p id="c08b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，插件<code class="fe os ot ou ov b">http-backend</code>会在格式为<code class="fe os ot ou ov b">/locales/{lng}/{ns}.json</code>的URL中搜索文件。如果您想更改默认格式，请查看<a class="ae kv" href="https://github.com/i18next/i18next-http-backend" rel="noopener ugc nofollow" target="_blank">文档</a>。因为我们有两种不同的语言，只有一个名称空间，所以我们必须创建以下结构:</p><pre class="kg kh ki kj gt ow ov ox oy aw oz bi"><span id="a38d" class="og nk iq ov b gy pa pb l pc pd">public/<br/>|-- locales/<br/>    |-- en/<br/>    |   |-- common.json<br/>    |-- pt/<br/>        |-- common.json</span></pre><p id="cccf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个<code class="fe os ot ou ov b">common.json</code>文件将接收一个包含翻译字符串的JSON对象。<code class="fe os ot ou ov b">en/common.json</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="b749" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而<code class="fe os ot ou ov b">pt/common.json</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="2c1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们必须在我们的应用程序中使用这些消息。为此，我们将使用包装<code class="fe os ot ou ov b">react-i18next</code>中的挂钩<code class="fe os ot ou ov b">useTranslation </code>。它将返回一个<code class="fe os ot ou ov b">t</code>函数，我们将使用它来翻译我们的消息，传递我们想要使用的消息的密钥。</p><p id="a5ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经过这些修改，我们的<code class="fe os ot ou ov b">App.js</code>将会是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><blockquote class="mw mx my"><p id="9c72" class="kw kx ls ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:不要忘记在<code class="fe os ot ou ov b">index.js</code>中加上<code class="fe os ot ou ov b">import './i18n.js'</code>。</p></blockquote><p id="1b71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您尝试运行该代码，将会收到以下错误消息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/b2573832d45d94e5e3918729158198c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cISmpYhNG4KvbRSaVhFiKg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author.</figcaption></figure><p id="18ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">插件<code class="fe os ot ou ov b">http-backend</code>异步加载所有必需的文件，并返回一个承诺，因此您需要使用一个<code class="fe os ot ou ov b"><a class="ae kv" href="https://itnext.io/what-the-heck-is-this-in-react-suspense-c5e641e487a" rel="noopener ugc nofollow" target="_blank">React.Suspense</a></code>组件来呈现它。</p><blockquote class="mw mx my"><p id="de12" class="kw kx ls ky b kz la jr lb lc ld ju le mz lg lh li na lk ll lm nb lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:您可以通过<code class="fe os ot ou ov b">react</code>选项中的配置<code class="fe os ot ou ov b">useSuspense: false</code>将其禁用。但是这会使所有的消息在还没有加载的时候返回一个空字符串。</p></blockquote><p id="acb7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，修复<code class="fe os ot ou ov b">index.js</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="9a88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当您运行它时:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/31e70c498602738cd4dae2b418206c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4wsG-jE0JRa2oUZUOT5Iw.png"/></div></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="61d5" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">改变语言</h1><p id="8fcf" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">但是在这个例子中你不能改变语言。所以让我们开始吧。</p><p id="a587" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要改变语言，我们必须使用我们声明的<code class="fe os ot ou ov b">i18n</code>实例。我们通过钩子<code class="fe os ot ou ov b">useTranslation</code>访问它。</p><p id="af17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用<code class="fe os ot ou ov b">Dropdown</code>组件的<code class="fe os ot ou ov b">onChange</code>方法来改变语言，用新值调用函数<code class="fe os ot ou ov b">i18n.changeLanguage</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="c89e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你可以运行程序并选择你想看的语言。您必须看到信息的变化:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/457149ffcc57b5b440e5ef18f9f4eb19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*5qj3Ufpcwf9uw_fQrp_gRg.gif"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="1b3b" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">消息格式</h1><p id="dc4f" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">我们可能希望在运行时将值注入到翻译消息中，比如用户数据或多元化。</p><p id="b252" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须用格式<code class="fe os ot ou ov b">{{var_name}}</code>改变我们想要插入的消息:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="3651" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们创建一个输入，这样用户可以插入一个要添加的值:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="8b22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/5222da57c6f93fa15e4ddeb0d302daf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*gU1ww-EPNzC4l6HwPdYFrg.gif"/></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="3813" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">日期格式</h1><p id="cb4f" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">默认情况下，<code class="fe os ot ou ov b">i18next</code>不支持日期格式。我们可以用另一个库，用内插法来实现。</p><p id="f7b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有一些不错的日期操作库(如<a class="ae kv" href="https://moment.github.io/luxon/" rel="noopener ugc nofollow" target="_blank"> Luxon </a>和<a class="ae kv" href="https://github.com/iamkun/dayjs" rel="noopener ugc nofollow" target="_blank"> Day.js </a>)，但是对于本教程，我将使用<a class="ae kv" href="https://date-fns.org/" rel="noopener ugc nofollow" target="_blank"> date-fns </a>。它很简单，并且支持超过150种语言。</p><p id="42b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装它:</p><pre class="kg kh ki kj gt ow ov ox oy aw oz bi"><span id="5a7d" class="og nk iq ov b gy pa pb l pc pd">yarn add date-fns</span></pre><p id="9a38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用它，我们必须覆盖<code class="fe os ot ou ov b">interpolation</code>选项中的<code class="fe os ot ou ov b">format</code>对象。这是一个接收三个参数的函数:我们想要格式化的值、格式字符串和当前语言。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="27d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们必须在包<code class="fe os ot ou ov b">date-fns/locale</code>中包含我们支持的所有语言，这样<code class="fe os ot ou ov b">date-fns</code>库才能真正格式化消息。</p><p id="d083" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在翻译文件中，我们必须使用语法<code class="fe os ot ou ov b">{{var_name, format}}</code>以便正确调用插值方法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="ba70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，要确保我们传递的是我们想要的格式的实际值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pe pf l"/></div></figure><p id="fd9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后的形式是:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/53d501b31c0d5e56315f9eb5a7e3f264.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*qrUbXxf3sYw5yvWfFgVfIA.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Change language and date format.</figcaption></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="32bb" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">结论</h1><p id="0366" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">国际化(i18n)可以使产品的本地化变得更加容易。</p><p id="f397" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React-i18next是一个强大的库，如果你打算使用i18n，你可以在你的应用中使用它。你可以很容易地配置它，它有一些不错的功能，如格式化和异步加载。</p><p id="a7ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然它本身不支持日期格式，但是您可以扩展它，使用其他库来实现。</p><p id="c228" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以点击查看完整代码<a class="ae kv" href="https://github.com/ustropo/react-i18n-tutorial" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>
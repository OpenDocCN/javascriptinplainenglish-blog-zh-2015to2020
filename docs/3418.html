<html>
<head>
<title>Form validations using React Hook Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React挂钩表单进行表单验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/form-validations-react-hook-forms-df129fece668?source=collection_archive---------9-----------------------#2020-09-27">https://javascript.plainenglish.io/form-validations-react-hook-forms-df129fece668?source=collection_archive---------9-----------------------#2020-09-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f219ffb129cfcb4f01deca8c92971c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EYPmGFXcMnu8C5px1uOmeg.png"/></div></div></figure><p id="2325" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">表单验证对安全性很重要，它使我们的web应用程序更容易使用。开发人员一直在创建表单，我们在每个项目中一遍又一遍地重复相同的模式。</p><p id="3190" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们也喜欢有效率(让我们自己的事情更容易)，使用一些可信的第三方库是减少代码并使其更容易阅读和工作的好方法。</p><p id="9796" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天我要实现一个真正有用的库，React Hook Forms。这个库使用一个定制的React钩子来快速添加验证。</p><p id="e153" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">本演示假设您已经创建了一个React项目。有关如何创建React应用程序的更多信息，请查看他们的</em> <a class="ae ku" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> <em class="kt">文档</em> </a> <em class="kt">或我的</em> <a class="ae ku" href="https://medium.com/javascript-in-plain-english/a-guide-to-creating-a-react-app-without-create-react-app-5337c5ac2ea0" rel="noopener"> <em class="kt">以前的</em> </a> <em class="kt"> </em> <a class="ae ku" href="https://medium.com/javascript-in-plain-english/how-to-stream-a-medium-blog-to-your-react-js-portfolio-9d62de41916e" rel="noopener"> <em class="kt">博客</em> </a> <em class="kt"> </em> <a class="ae ku" href="https://medium.com/javascript-in-plain-english/recoil-js-simple-global-state-d84100b3d535" rel="noopener"> <em class="kt">帖子</em> </a> <em class="kt">中的每一个帖子都有一步一步的说明。</em></p></div><div class="ab cl kv kw hr kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ig ih ii ij ik"><h1 id="eb23" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">我们今天在建造什么？</h1><p id="14ab" class="pw-post-body-paragraph jv jw in jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">我们将创建一个接受用户的<code class="fe mf mg mh mi b">name</code>、<code class="fe mf mg mh mi b">email</code>和<code class="fe mf mg mh mi b">message</code>的表单。对于此演示，我们将添加以下验证:</p><ul class=""><li id="605a" class="mj mk in jx b jy jz kc kd kg ml kk mm ko mn ks mo mp mq mr bi translated"><code class="fe mf mg mh mi b">name</code>存在并且长度少于20个字符。</li><li id="0f40" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated"><code class="fe mf mg mh mi b">email</code>存在并且是有效的电子邮件格式。</li><li id="fc6d" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated"><code class="fe mf mg mh mi b">message</code>存在。</li></ul><p id="748a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我们完成后表单的外观:</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/746c0356ce66c08e6b7f9c9e3f9c763e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MaHGURU4huvP4zebpXfR7Q.gif"/></div></div></figure></div><div class="ab cl kv kw hr kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ig ih ii ij ik"><h1 id="106a" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">创建一个组件</h1><p id="4340" class="pw-post-body-paragraph jv jw in jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">我将调用我的组件<code class="fe mf mg mh mi b">Contact</code>。</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="40b6" class="lc ld in bd le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv ni lx ly lz bi translated">安装并导入React Hook表单</h1><ul class=""><li id="af17" class="mj mk in jx b jy ma kc mb kg nj kk nk ko nl ks mo mp mq mr bi translated">在你的终端:<code class="fe mf mg mh mi b">npm install react-hook-form</code>。</li><li id="68a5" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">将<code class="fe mf mg mh mi b">useForm</code>导入您的组件。</li></ul><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="5527" class="lc ld in bd le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv ni lx ly lz bi translated">构建一个基本表单</h1><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="nm nn gj gh gi no np bd b be z dk">Assign <code class="fe mf mg mh mi b">useForm()</code> to variables using deconstruction.</figcaption></figure><p id="6f04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用解构将<code class="fe mf mg mh mi b">useForm()</code>分配给变量。</p><p id="d9f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">分配<code class="fe mf mg mh mi b">onSubmit</code>。这是一个暂时的占位符，我们将在下一篇博客中更新它，因此消息将通过电子邮件发送。</p><p id="86ec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每个<code class="fe mf mg mh mi b">&lt;input&gt;</code>需要一个唯一的名称。</p><p id="7de0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mf mg mh mi b">register</code>是使用表单的关键。它允许值可用于验证和提交。</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/85447328cb1d147c54c466f4f0db2958.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/1*UuBWN2NipYzG3b_RyrX-Jw.gif"/></div></figure><p id="1be1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在有表格了！让我们添加一些验证。</p><h1 id="5f98" class="lc ld in bd le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv ni lx ly lz bi translated">添加验证</h1><p id="0298" class="pw-post-body-paragraph jv jw in jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">useForm支持以下验证:</p><ul class=""><li id="38ec" class="mj mk in jx b jy jz kc kd kg ml kk mm ko mn ks mo mp mq mr bi translated">需要</li><li id="f7a8" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">部</li><li id="2c69" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">最大</li><li id="3cec" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">最小长度</li><li id="ae44" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">模式</li><li id="d58a" class="mj mk in jx b jy ms kc mt kg mu kk mv ko mw ks mo mp mq mr bi translated">使生效</li></ul><p id="0d15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">验证被添加到每个<code class="fe mf mg mh mi b">register</code>。点击查看验证<a class="ae ku" href="https://react-hook-form.com/api#register" rel="noopener ugc nofollow" target="_blank">的规则。</a></p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="14e1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是输入的单行版本(如果您觉得更容易阅读的话)。</p><pre class="my mz na nb gt nr mi ns nt aw nu bi"><span id="ef9f" class="nv ld in mi b gy nw nx l ny nz">&lt;input name="name" ref={register({required: true, maxLength: 20})}/&gt;</span></pre><h1 id="b41e" class="lc ld in bd le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv ni lx ly lz bi translated">显示错误</h1><p id="6e95" class="pw-post-body-paragraph jv jw in jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">为了展示这些验证的有效性，让我们回顾并显示错误。</p><p id="3c2e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是我们要使用从useForm得到的<code class="fe mf mg mh mi b">errors</code>的地方。我们将在每个<code class="fe mf mg mh mi b">&lt;input&gt;</code>下添加一些Javascript。</p><ul class=""><li id="4536" class="mj mk in jx b jy jz kc kd kg ml kk mm ko mn ks mo mp mq mr bi translated">如果您在一个<code class="fe mf mg mh mi b">&lt;input&gt;</code>上有一个验证，通过如下传递一个字符串来格式化<code class="fe mf mg mh mi b">error</code>:</li></ul><pre class="my mz na nb gt nr mi ns nt aw nu bi"><span id="bbb6" class="nv ld in mi b gy nw nx l ny nz">{errors.name &amp;&amp; "Please enter a name"}</span></pre><ul class=""><li id="5223" class="mj mk in jx b jy jz kc kd kg ml kk mm ko mn ks mo mp mq mr bi translated">如果您有多个验证，则按如下方式添加:</li></ul><pre class="my mz na nb gt nr mi ns nt aw nu bi"><span id="e684" class="nv ld in mi b gy nw nx l ny nz">{errors.name &amp;&amp; errors.name.message}</span></pre><p id="acb5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并更新每个验证的值，使其包含两个键；<code class="fe mf mg mh mi b">value</code>和<code class="fe mf mg mh mi b">message</code>，如下例所示。</p><figure class="my mz na nb gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="9339" class="lc ld in bd le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv ni lx ly lz bi translated">就这么简单！结果如下:</h1><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/746c0356ce66c08e6b7f9c9e3f9c763e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MaHGURU4huvP4zebpXfR7Q.gif"/></div></div></figure><p id="2c9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下周，我们将使用EmailJS将此邮件从您的React应用程序发送到您的电子邮件。敬请期待！</p><p id="37ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">查看我的其他一些故事； <a class="ae ku" href="https://medium.com/swlh/css-reset-2b4831d4664e" rel="noopener"> <em class="kt"> CSS重置</em> </a> <em class="kt">，或者</em> <a class="ae ku" href="https://medium.com/javascript-in-plain-english/recoil-js-simple-global-state-d84100b3d535?source=your_stories_page-------------------------------------" rel="noopener"> <em class="kt">反冲. js &amp;简单全局状态</em> </a> <em class="kt">。在joshuagauthreaux@gmail.com或通过</em><a class="ae ku" href="https://www.joshgotro.com/" rel="noopener ugc nofollow" target="_blank"><em class="kt">joshgotro.com</em></a><em class="kt">与我联系。</em></p><p id="2ffe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读，祝您身体健康！</p></div></div>    
</body>
</html>
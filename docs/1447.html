<html>
<head>
<title>How to Add Maps in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中添加地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-maps-in-react-native-be49348987e?source=collection_archive---------14-----------------------#2020-03-16">https://javascript.plainenglish.io/how-to-add-maps-in-react-native-be49348987e?source=collection_archive---------14-----------------------#2020-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e4e0919a5cca3b6634d977ef07c00ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gP-OZiRzPMYrlcTR.png"/></div></div></figure><p id="4c77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如今，你可能已经在几乎所有的应用程序中看到了谷歌地图。一些手机应用程序显示他们的商店位置，跟踪用户(如优步)，显示附近的地方等。由此可见，地图支持在移动应用中的重要性。今天，我们将使用流行的React原生地图包，逐步将谷歌地图集成到React原生应用中。</p><p id="1d3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Instamobile，我们在许多<a class="ae kw" href="https://www.instamobile.io/app-templates" rel="noopener ugc nofollow" target="_blank"> React原生模板</a>中使用了这种精确的实现，例如<a class="ae kw" href="https://www.instamobile.io/app-templates/react-native-store-locator-app-template/" rel="noopener ugc nofollow" target="_blank">商店定位器应用模板</a>。</p><p id="1c0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作为开发者或者公司，管理好自己app的代码库是非常重要的。因此，目前在移动应用程序开发中，有像React Native这样的平台，您可以为iOS和Android应用程序。我不会在文章中深入探讨react和react native的内容，相反，我们将更多地关注iOS和Android平台应用程序上的谷歌地图集成。</p><p id="8a59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有两种方法可以将谷歌地图集成到React原生移动应用程序中:</p><p id="1eab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想澄清一下这两者之间的一些差异。</p><p id="b53b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> react-native-cli </strong>是开发者友好的，并且提供了使用本地组件的灵活性。但是有了这个，你必须配置应用程序中的每一个细节。除此之外，如果你想测试你的应用程序，那么你必须使用真实的设备，或者你必须使用iOS和Android的模拟器。在安装和配置各种rpm包时，您可能会产生许多错误。</p><p id="72ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> create-react-native-app，</strong>可以expo SDK内置模块。这是一个可以更快开发应用程序的无障碍环境。你不需要任何设备(甚至模拟器)来运行和测试应用程序。你只需要开发代码，并使用为Android和iOS构建的expo应用进行测试。您只需要使用<em class="kx"> npm start </em>运行时应用程序生成的二维码。</p><p id="4252" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Java或swift等原生代码库中集成这样的模块非常容易。我想说的是，在阅读完整个教程后，你可以很容易地将谷歌地图与React Native集成在一起。您还将学习如何从头开始构建一个全新的React原生应用程序。那么，事不宜迟，让我们开始吧。</p><h2 id="1bb9" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">先决条件</h2><p id="94c2" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">我们假设您至少具备JavaScript、React &amp; React Native的基础或中级知识。先从<strong class="ka ir"> <em class="kx">创建-反应-原生-app </em> </strong>说起。</p><p id="eac4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">集成React原生地图需要哪些东西？</strong></p><p id="9ebf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1.<strong class="ka ir">文本编辑器或IDE </strong>(我们使用的是Visual Studio代码)</p><p id="b38f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.<strong class="ka ir">节点JS </strong>(总是需要安装包&amp;其他东西)</p><p id="7059" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.<strong class="ka ir"> create-react-native-app，</strong>(一个CLI命令行工具，用于在您的系统上安装React Native。)</p><p id="0a3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如何在本地系统上安装React Native？让我们在我们的系统上安装React Native。在Windows中使用VS代码打开你的命令行或者进入菜单上的终端，点击<strong class="ka ir"> <em class="kx">添加一个新的终端</em> </strong>。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/7eaa3e51aed60b0c4cbf4c96131c50df.png" data-original-src="https://miro.medium.com/v2/format:webp/1*TDh1ibK2TXDgaoZVxsqJqg.jpeg"/></div></figure><p id="8b0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行命令:</p><p id="b7e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> &gt; npm安装-g创建-反应-本机-应用</strong></p><ul class=""><li id="292a" class="mb mc iq ka b kb kc kf kg kj md kn me kr mf kv mg mh mi mj bi translated">npm: (节点软件包管理器，管理从安装到删除的所有软件包)。</li><li id="bcde" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><strong class="ka ir"> install: </strong> Install用于向NPM发出安装软件包的命令。也可以用-I代替这个。</li><li id="64df" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><strong class="ka ir"> -g: </strong>表示或说NPM在系统中全局安装create-react-native-app。这意味着在这个命令之后，它将在您的所有系统中可用，并且您可以在任何目录中创建一个react本机应用程序。</li><li id="ee5d" class="mb mc iq ka b kb mk kf ml kj mm kn mn kr mo kv mg mh mi mj bi translated"><strong class="ka ir">create-react-Native-app:</strong>React原生开发者制作的一款工具，让在React原生中启动一个新的移动应用变得更加省事。它会生成所有需要的样板代码，让您立即开始应用程序开发过程。</li></ul><p id="2de7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么，让我们进入下一步。</p><p id="0bd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是深入研究项目实质的时候了。我们将建立一个集成谷歌地图的应用程序。我们的应用程序的名称是什么？<strong class="ka ir">姑且称之为“定位仪”。</strong></p><h2 id="1969" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">让我们创建一个定位应用程序</h2><p id="c278" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">在您的终端中运行以下命令:</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="b62c" class="ky kz iq mq b gy mu mv l mw mx">create-react-native-app locationfinder</span></pre><p id="771a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你会看到很多依赖项的安装，并且需要一些时间在你的系统上安装，如图所示。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/5a97d135519a508e37186d221f52ef45.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pdKZnqKW7WnA9tm14XbhYQ.jpeg"/></div></figure><p id="ab95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你在命令行中按回车键时。它会问你你想要什么:一个空白模板或选项卡式模板。再次按回车键选择应用程序空白模板。之后，它会问你的应用程序名称，也显示鼻涕虫给你。别担心，输入你想要的名字。</p><p id="51d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在安装完成之前，你可以去喝杯咖啡。通常需要几分钟。</p><p id="2d69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，你的应用终于创建好了。如果要运行并测试安装，请在命令行中键入:</p><p id="cdd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> &gt;光盘定位仪</strong>(进入app文件夹)</p><p id="ae1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> &gt; npm启动</strong></p><p id="1fa8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以通过扫描命令生成的二维码，使用<strong class="ka ir">E</strong>T26】xpo app测试使用。否则，您可以使用iOS的模拟器和Android的模拟器。要使用它们，在iOS上按“I”，在Android上按“a”。您可以使用任何第三方仿真器，如Gennymotion。</p><p id="2150" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个地图实施项目。当我们制作这个项目时，这个项目的依赖项是:</p><p id="d09c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1。“博览会”:“. 0.0”，2。“反应”:“16.5.0”，3。" react-native": " .0.0"4。" react-native-maps ":" 0 . 22 . 0 "</strong></p><p id="c6c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">默认情况下，Expo使用Airbnb的react-native-maps。目前Expo SDK使用的是0.22.0版本。因为这个内置了create-react-native-app和expo。</p><p id="96fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以在VS代码中看到类似的文件夹结构，如下所示:</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/cbf7afc1708300c9e2114f0fdae8aa07.png" data-original-src="https://miro.medium.com/v2/format:webp/1*rlQxvQQ5XDUadV1OPI18mw.png"/></div></figure><p id="7404" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如我前面所说，我们将使用Expo SDK，react-native-maps是Expo SDK中集成谷歌地图的内置功能之一。您不需要像在react-native-cli中那样单独为Android和iOS安装和配置react-native-maps。</p><h2 id="5f4b" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">将React本机地图集成到React本机应用程序中</h2><p id="39e9" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">现在您已经安装了所有需要的依赖项，您可以在React本地应用程序中导入MapView。您需要对<strong class="ka ir"> <em class="kx"> app.js </em> </strong>文件进行如下修改:</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="0c0c" class="ky kz iq mq b gy mu mv l mw mx">import React, { Component } from 'react';<br/>import { Platform, StyleSheet, Text, View } from 'react-native';<br/>import MapView, { PROVIDER_GOOGLE } from 'react-native-maps';<br/>export default<br/>class App extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;MapView<br/>         style={{ flex: 1 }}<br/>         provider={PROVIDER_GOOGLE}<br/>         showsUserLocation<br/>         initialRegion={{<br/>         latitude: 37.78825,<br/>         longitude: -122.4324,<br/>         latitudeDelta: 0.0922,<br/>         longitudeDelta: 0.0421}}<br/>      /&gt;<br/>    );<br/>  }<br/>}</span></pre><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/49ca22672aef54143872d05ad78faca3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*F6cwoTcUIxvPPBuniZ4Hvg.jpeg"/></div></figure><p id="f2be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">伟大的里程碑！现在，谷歌地图已经集成到您的移动应用程序中。有几种方法可以让它更直观。您可以在地图中添加的功能，例如您可以要求用户提供对其当前位置的访问权限。你也可以追踪用户的位置。你也可以在谷歌地图上看到的地方添加标记和标签。您还可以根据需要自定义地图。</p><p id="55ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">纬度和经度用来表示物体的位置。l <em class="kx"> atitudeDelta </em>和<em class="kx"> longitudeDelta </em>用于提供地图中的缩放选项。</p><p id="e317" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">我在Android上试过，效果不错。你可以在iPhone设备上试用，然后在评论区告诉我。随便贴个你的应用截图炫耀一下吧。</strong></p><p id="892a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">(或者)使用react-native-cli创建Rect Native App</strong><strong class="ka ir">步骤1:安装react-native-cli并创建App </strong></p><p id="0386" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们使用react-native-cli从头开始制作同一个应用程序。您需要按照相同的方式安装react-native-cli。在终端中，运行:</p><p id="acd9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">T34】NPM install-g react-native-CLI</strong></p><p id="cc08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这需要一点时间。之后，运行另一个命令来创建应用程序:</p><p id="6158" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">T35】react-native init location finder</strong></p><p id="423f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这在安装时也需要一些时间。安装后，使用<strong class="ka ir"><em class="kx">&gt;CD location finder</em>进入文件夹。</strong>你只能在Android或iOS模拟器上运行这个应用程序，对iOS使用这些命令，<strong class="ka ir"><em class="kx">react-native run-iOS</em></strong>和对Android<strong class="ka ir"><em class="kx">react-native run-Android</em></strong>。</p><p id="2a8b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二步:安装react-native-maps包</strong></p><p id="b3ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Airbnb创建的react-native-maps。它是开源的，任何人都可以用它来访问谷歌地图。要在应用程序中安装它:</p><p id="edab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> &gt; locationfinder/npm安装-保存react-native-maps </strong></p><p id="951f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装完成后。您需要将此包与您当前的应用程序链接，以便可以在您的应用程序中使用该包的方法。</p><p id="3434" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，让我们为Android和iOS配置地图文件。</p><h2 id="b8d7" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">为Android配置React-Native-Maps</h2><p id="26b8" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">我们正在详细描述这些步骤，但是我建议您也查看一下官方文档。你只需要在一些文件中做一些小的改动，但是其余的由<strong class="ka ir"> react-native-cli </strong>自动处理。</p><p id="5066" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你必须进入<strong class="ka ir">安卓</strong>文件夹<strong class="ka ir">里面。</strong>在那里，你要在<strong class="ka ir"><em class="kx">androidmanifest . XML</em></strong>文件中进行修改。在这个文件中，您必须配置<strong class="ka ir"> Google Maps API键。</strong>你可以在<strong class="ka ir">Android/app/src/main/Android manifest . XML中找到这个文件</strong></p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="dcb2" class="ky kz iq mq b gy mu mv l mw mx">&lt;application&gt;<br/>  &lt;meta-data<br/>     android:name=”com.google.android.geo.API_KEY”<br/>     android:value=”Your Google maps API Key Here”/&gt;<br/>&lt;/application&gt;</span></pre><p id="f309" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保应用程序的元数据在应用程序标签下。用API键值替换<em class="kx"> android:value </em>。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/7cbedd808430a8de93f676b623c8e1e1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Y8kDc68Yvk7bgocgas5I4w.png"/></div></figure><p id="3106" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">要找到Google API密钥，你必须进入<a class="ae kw" href="https://cloud.google.com/maps-platform" rel="noopener ugc nofollow" target="_blank"> Google的Android地图SDK</a>如图所示。你也可以在那里看到说明。之后上谷歌的云平台如图:</strong></p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/9f9cc9acce7a68373f61266fa3aa192f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*k-VMa5eCv6PRN9BtM2LVUg.png"/></div></figure><p id="f2e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">点击Android版地图软件开发套件，然后进入其中。您将看到下一个屏幕，在这里您可以找到<strong class="ka ir">凭证。</strong>点击它，生成类似于下图所示的API密匙。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/800b64d3abdb9af3fe789c4557c40404.png" data-original-src="https://miro.medium.com/v2/format:webp/1*TgUWdlS0RX5MnHDlP_eemw.jpeg"/></div></figure><p id="49b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir"><em class="kx">MainApplication.java</em></strong>中的变化你也可以在<strong class="ka ir"> <em class="kx">安卓</em> </strong>文件夹中找到。文件夹树如图所示。在那里你必须导入<strong class="ka ir"><em class="kx">react-native-maps</em></strong>包:</p><p id="0180" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="kx">导入com . Airbnb . Android . react . maps . maps package；</em> </strong></p><p id="3757" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个文件中还有一点需要修改。在函数中添加<strong class="ka ir"> <em class="kx">新MapsPackage() </em> </strong>，如下图所示</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="1c1a" class="ky kz iq mq b gy mu mv l mw mx">@Override<br/>protected List&lt;ReactPackage&gt; getPackages() {<br/>return Arrays.&lt;ReactPackage&gt;asList(<br/>    new MainReactPackage(),<br/>     new MapsPackage()<br/>   );<br/>}</span></pre><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/deb0a0d248e9eda007e53db73b80b54d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*jcxHzzSK3QwUlmQSXMXspw.jpeg"/></div></figure><p id="ec23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">终于，一切都为安卓做好了。</strong>现在你必须重新构建应用程序。为此，使用react-native run-android命令。</p><h2 id="64f2" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">为iOS配置React本机地图</h2><p id="68e9" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">我们需要在iOS中添加一个<strong class="ka ir"> <em class="kx"> Podfile </em> </strong>来实现Cocoapods。要设置，您需要进入iOS的<strong class="ka ir"><em class="kx"/></strong>文件夹，创建一个名为的文件并粘贴下面提供的代码。在这个<strong class="ka ir"> <em class="kx"> PodFile </em> </strong>中有几个地方需要修改。</p><p id="b0f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，通过移除取消注释<strong class="ka ir"> # platform: ios，' 9.0' </strong>。接下来，您需要将<strong class="ka ir">TARGET ' _ YOUR _ PROJECT _ TARGET _ ' do</strong>更改为您的app名称，如—<strong class="ka ir"><em class="kx">TARGET ' location finder ' do</em></strong>。之后，取消所有<strong class="ka ir"><em class="kx">react-native-maps</em></strong>依赖项的注释。</p><p id="6450" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成所有这些更改后，保存文件。然后，进入命令行，进入<strong class="ka ir"> <em class="kx"> ios </em> </strong>文件夹，使用<strong class="ka ir"> <em class="kx"> cd ios </em> </strong>。在这个文件夹中，您必须再运行一个命令<strong class="ka ir"> pod install。</strong>这将安装所有需要的必要文件。</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="6408" class="ky kz iq mq b gy mu mv l mw mx"># Uncomment the next line to define a global platform for your project<br/># platform :ios, '9.0'<br/>target '_YOUR_PROJECT_TARGET_' do<br/>rn_path = '../node_modules/react-native'<br/>rn_maps_path = '../node_modules/react-native-maps'<br/># See http://facebook.github.io/react-native/docs/integration-with-existing-apps.html#configuring-cocoapods-dependencies<br/><br/>pod 'yoga', path: "#{rn_path}/ReactCommon/yoga/yoga.podspec"<br/>pod 'React', path: rn_path, subspecs: [<br/>    'Core',<br/>    'CxxBridge',<br/>    'DevSupport',<br/>    'RCTActionSheet',<br/>    'RCTAnimation',<br/>    'RCTGeolocation',<br/>    'RCTImage',<br/>    'RCTLinkingIOS',<br/>    'RCTNetwork',<br/>    'RCTSettings',<br/>    'RCTText',<br/>    'RCTVibration',<br/>    'RCTWebSocket',<br/>]<br/># React Native third party dependencies podspecs<br/>pod 'DoubleConversion', :podspec =&gt; "#{rn_path}/third-party-podspecs/DoubleConversion.podspec"<br/>pod 'glog', :podspec =&gt; "#{rn_path}/third-party-podspecs/glog.podspec"<br/># If you are using React Native &lt;0.54, you will get the following error:<br/># "The name of the given podspec `GLog` doesn't match the expected one `glog`"<br/># Use the following line instead:<br/>#pod 'GLog', :podspec =&gt; "#{rn_path}/third-party-podspecs/GLog.podspec"<br/>pod 'Folly', :podspec =&gt; "#{rn_path}/third-party-podspecs/Folly.podspec"<br/># react-native-maps dependencies<br/>pod 'react-native-maps', path: rn_maps_path<br/># pod 'react-native-google-maps', path: rn_maps_path  # Uncomment this line if you want to support GoogleMaps on iOS<br/># pod 'GoogleMaps'  # Uncomment this line if you want to support GoogleMaps on iOS<br/># pod 'Google-Maps-iOS-Utils' # Uncomment this line if you want to support GoogleMaps on iOS<br/>end<br/>post_install do |installer|<br/>    installer.pods_project.targets.each do |target|<br/>       if target.name == 'react-native-google-maps'<br/>           target.build_configurations.each do |config|<br/>           config.build_settings['CLANG_ENABLE_MODULES'] = 'No'<br/>        end<br/>    end<br/>        if target.name == "React"<br/>          target.remove_from_project<br/>        end<br/>     end<br/>end</span></pre><p id="eccc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们必须启用iOS版谷歌地图。要做到这一点，我们必须将我们的API密钥集成到<strong class="ka ir"><em class="kx">app delegate . m</em></strong>文件中。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div class="ab gu cl ma"><img src="../Images/1addfb4f31579aad90fdff3c6ab0b2ac.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-NJ1-e44rycFcMrtxGsYsA.jpeg"/></div></figure><p id="ee9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们准备在iOS中实现地图。所以，我们开始吧。只需粘贴下面的代码并重新构建您的应用程序。</p><pre class="lw lx ly lz gt mp mq mr ms aw mt bi"><span id="57a9" class="ky kz iq mq b gy mu mv l mw mx">import React, {Component} from 'react';<br/>import {Platform, StyleSheet, Text, View} from 'react-native';<br/>import MapView, { PROVIDER_GOOGLE } from 'react-native-maps';<br/>export default class App extends React.Component {<br/>render() {<br/>  return (<br/>    &lt;MapView<br/>      style={{ flex: 1 }}<br/>      provider={PROVIDER_GOOGLE}<br/>      showsUserLocation<br/>      initialRegion={{<br/>          latitude: 37.78825,<br/>          longitude: -122.4324,<br/>          latitudeDelta: 0.0922,<br/>          longitudeDelta: 0.0421,<br/>      }}<br/>    /&gt;<br/>  );<br/> }<br/>}</span></pre><h2 id="ed6f" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated">最后的话</h2><p id="853f" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">在本react原生教程中，我们学习了如何将React原生地图添加到移动应用程序中。我试图解释如何在react原生应用中实现谷歌地图的几乎所有细节。希望你喜欢这篇文章，它有助于你的应用程序开发。如果你被困在某个地方，请在下面评论，不要犹豫，分享这篇文章。它可能会帮助其他人。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="my mz l"/></div></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="7c99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kx">原载于2020年3月16日</em><a class="ae kw" href="https://www.instamobile.io/react-native-tutorials/react-native-maps/" rel="noopener ugc nofollow" target="_blank"><em class="kx">https://www . insta mobile . io</em></a><em class="kx">。</em></p><h2 id="9cf1" class="ky kz iq bd la lb lc dn ld le lf dp lg kj lh li lj kn lk ll lm kr ln lo lp lq bi translated"><strong class="ak">说白了</strong></h2><p id="8b1f" class="pw-post-body-paragraph jy jz iq ka b kb lr kd ke kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv ij bi translated">你知道我们有四种出版物吗？通过<a class="ae kw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">plain English . io</strong></a>找到他们——通过关注我们的出版物和<a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">订阅我们的YouTube频道</strong> </a> <strong class="ka ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Why I decided to Break up With jQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我决定和jQuery分手</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-i-decided-to-break-up-with-jquery-d597d4b8c84f?source=collection_archive---------2-----------------------#2019-11-01">https://javascript.plainenglish.io/why-i-decided-to-break-up-with-jquery-d597d4b8c84f?source=collection_archive---------2-----------------------#2019-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/78f3a4f6c03ea8aa3d6ef38fd1f8827c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hNRMpEiEcpl7ndNW"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@thomasdrouaultphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thomas Drouault</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ce7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你们中的许多人可能使用过<em class="lb"> jQuery </em>，或者至少听说过一次。但对我来说，自从我从2010年年中开始学习web编程以来，我与<em class="lb"> jQuery </em>的关系一直很新鲜。但是有几个原因让我想停止和它的关系。:(</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><blockquote class="lj lk ll"><p id="96fb" class="kd ke lb kf b kg kh ki kj kk kl km kn lm kp kq kr ln kt ku kv lo kx ky kz la ij bi translated"><strong class="kf ir">免责声明</strong> <br/>这篇文章不打算讨论你应该停止使用jQuery的原因。也许正在阅读这篇文章的一些人仍然在团队项目中使用jQuery。这篇文章将要讨论的内容也将适用于其他图书馆。本帖给你个人观点。</p></blockquote></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="9d14" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">非常简短地介绍了我是如何认识jQuery的</h1><p id="0c0b" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我在大学时是计算机科学专业的，该专业的大部分课程都是针对C语言的。指针，链表，联合，什么的……C里面有那么多知识欺负我。所以有一段时间我对编程感到厌倦，可能超过两年。</p><p id="6c0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一天，当我在网上冲浪时，发现了JavaScript。我不知道JavaScript是什么。我正在看的那个页面上也有jQuery。人们说jQuery 要容易得多。我不仅可以在浏览器上看到操作DOM的结果，而且使用起来非常简单。然后，我和<em class="lb"> jQuery </em>之间产生了火花。:)</p><h2 id="9313" class="ms lq iq bd lr mt mu dn lv mv mw dp lz ko mx my md ks mz na mh kw nb nc ml nd bi translated">但是我仍然不知道jQuery有什么功能</h2><p id="c916" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我用的方法不到10种。<em class="lb">动画</em>、<em class="lb">绑定</em>、<em class="lb">淡入</em>等。但是<em class="lb"> jQuery </em>的代码行大概有一万<em class="lb">(带v.3.4.1) </em>。也许您使用的函数比我使用的多，但是我很确定您使用的函数不到30个，即使您非常熟悉jQuery。<a class="ae kc" href="https://code.tutsplus.com/tutorials/20-helpful-jquery-methods-you-should-be-using--net-10521" rel="noopener ugc nofollow" target="_blank"> <em class="lb">点击这里查看常用jQuery函数列表。</em> </a></p><p id="5f26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">许多开发人员不想在现代基于JavaScript的项目中使用jQuery。但是他们为什么这么不喜欢呢？这有几个原因。</p><h1 id="2366" class="lp lq iq bd lr ls ne lu lv lw nf ly lz ma ng mc md me nh mg mh mi ni mk ml mm bi translated">原因1。尽管jQuery是一个方便的库，但对于我真正需要的东西来说，它太重了。</h1><p id="b045" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">jQuery帮助开发者使用函数来操作DOM。但是它内部有如此多的包装函数，甚至可以抓取元素。我们来看一个简短的对比。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c786" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我通过CDN抓取了<em class="lb"> jQuery </em>，加载了脚本文件。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="7781" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">示例代码非常简单。他们做的都是抓取<em class="lb"> div </em>元素，追加一个新标签，<em class="lb"> p </em>，<em class="lb"> </em>一万次。在你的真实项目中，你可能没有机会添加这么多这样的DOM。但是请记住，这只是一个比较示例。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/3da03ba77ebf2d76d33a42f91315d9c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*8Qb_-78yDqK1MkhBpZw_Rw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Performance record when using jQuery</figcaption></figure><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/172a461b50506105230a0146f4947470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFmfmKJNz-Pcp5vrdvIGkw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Performance record when using Pure JavaScript</figcaption></figure><p id="b7e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我在Google开发者工具上捕捉到了性能评估。上面的截图是我使用<em class="lb"> jQuery </em>时的，下面的是我使用纯JavaScript时的。</p><p id="a93d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，<em class="lb"> jQuery </em>花费了1.13秒，而Vanilla(我从现在开始称纯JavaScript为Vanilla JavaScript)JavaScript只花了13.01毫秒。在那个例子中，普通的JavaScript比T4的jQuery快87倍。那么<strong class="kf ir">为什么</strong>与普通JavaScript相比，jQuery花了这么长时间？</p><p id="c766" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们更详细地看看当<em class="lb"> jQuery </em>试图追加一个DOMelement时会发生什么。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/35dc82bb02f75fc177c1d9e332d87afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2uIbNL6mpdtbu_ez35Ymg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Call tree when jQuery tries to append a DOM</figcaption></figure><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/70213f3240af4c3a3ee4d8dfbfe806be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2uNySreMvzENCBYeEUwgA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Call tree when Vanilla JavaScript tries to append a DOM</figcaption></figure><p id="8a45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是<em class="lb"> jQuery </em>在<em class="lb"> div </em>元素中追加10000个标签后的调用树截图。<em class="lb">位于列表最顶端的buildFragment </em>，是<em class="lb"> jQuery </em>的核心方法，生成一个新的DOM元素，并将其添加到<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment" rel="noopener ugc nofollow" target="_blank"> <em class="lb">片段元素</em> </a>中。另一方面，第二张截图看起来很干净，也相当空洞。</p><pre class="nj nk nl nm gt nt nu nv nw aw nx bi"><span id="afef" class="ms lq iq nu b gy ny nz l oa ob">// jQuery<br/>... [Total Time] [Activity]<br/>... 1041.4ms     buildFragment --&gt; slower!</span><span id="b6bf" class="ms lq iq nu b gy oc nz l oa ob">// Vanilla<br/>... [Total Time] [Activity]<br/>... 14.1ms       (anonymous)   --&gt; faster!</span></pre><p id="077f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着<em class="lb"> jQuery </em>很舒服，但是里面有很多包装函数；如果你在一个相当大的项目中使用它，它会减慢你的页面速度。</p><h1 id="19cf" class="lp lq iq bd lr ls ne lu lv lw nf ly lz ma ng mc md me nh mg mh mi ni mk ml mm bi translated">原因二。有许多专注于一种功能的库</h1><p id="e78b" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">如今，许多库都支持以更好的方式访问DOM。这是一个基于React的获取元素的例子。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="f48b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果在React中使用<em class="lb"> ref </em>，React会将DOM的对象存储在<em class="lb"> ref </em>树中，并允许您在需要时使用它。然而，jQuery 通过使用<em class="lb">文档</em>对象的函数来访问DOM。然后，它总是从<em class="lb">文档的</em>标签开始到你要找的标签。当然，<em class="lb">的反应方式比</em>更快更有效。</p><p id="0060" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你更熟悉<em class="lb"> React </em>钩子，这是为了让你更好的理解这个例子。</p><figure class="nj nk nl nm gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><blockquote class="lj lk ll"><p id="b515" class="kd ke lb kf b kg kh ki kj kk kl km kn lm kp kq kr ln kt ku kv lo kx ky kz la ij bi translated"><strong class="kf ir">注意</strong>尽管我选择React来给你一些特性的例子，但这并不意味着React在任何时候都优于jQuery。根据具体情况，jQuery可能比其他任何库都方便。</p></blockquote><h1 id="c1b9" class="lp lq iq bd lr ls ne lu lv lw nf ly lz ma ng mc md me nh mg mh mi ni mk ml mm bi translated">原因三。jQuery诞生时并不是为了提高性能。</h1><p id="f312" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">《T42》杂志制作jQuery 的时间是2006年中期。网络不像今天这么新奇。许多开发人员瞧不起JavaScript，认为它不是一种编程语言。但是现在呢？前端变成了一个巨大的领域，所以使用JavaScript的开发者最后知道了很多知识。</p><p id="e006" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而<em class="lb"> jQuery </em>仍然停留在过去。有许多更新，但是由于<em class="lb"> jQuery </em>不是为性能而创建的，我可以看到许多行看起来很旧。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/0853164beb4f42c2c463971db8fc1ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Un11_upERRM2irMgrc6YEQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">This method is called during Animation</figcaption></figure><p id="41db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个运行<em class="lb"> tick </em>方法的<em class="lb"> jQuery </em>核心方法，该方法在<em class="lb">动画</em>函数中。<em class="lb">调度</em>创建<em class="lb"> requestAnimationFrame </em>如果存在，或者创建<em class="lb"> setTimeout </em>。与没有存储在回调列表中的<em class="lb"> setTimeout </em>不同，一旦运行了<em class="lb"> requestAnimationFrame </em>中的回调，就应该调用<em class="lb"> cancelAnimationFrame </em>。虽然没有<em class="lb"> cancelAnimationFrame </em>。</p><p id="e147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能想看看这篇关于JavaScript定时器函数的文章。</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/8947ad8897aa9360282695d53fb1b8b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epY8wCl35jKeinegdOcxVg.png"/></div></div></figure><p id="7aad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是另一个例子。这也是一个jQuery的核心方法，当你试图获取一个元素的顶部或左边的值时，就会调用这个方法。你发现奇怪的地方了吗？</p><pre class="nj nk nl nm gt nt nu nv nw aw nx bi"><span id="54ff" class="ms lq iq nu b gy ny nz l oa ob">elem.getBoundingClientRect().left</span></pre><p id="8a56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管我们不能理解那个函数是做什么的，但有一点是清楚的，那就是有一个多余的代码，我在上面写了，问题是<code class="fe of og oh nu b">getBoundingClientRect()</code>在你的浏览器中强制<a class="ae kc" href="https://stackoverflow.com/questions/27637184/what-is-dom-reflow" rel="noopener ugc nofollow" target="_blank">回流</a>。如果<code class="fe of og oh nu b">getBoundingClientRect()</code>会强制回流，那我们不应该只调用一次吗？</p><p id="40c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">强制回流的方法还有很多，而<em class="lb"> jQuery </em>在创建的时候并没有在意它们。<em class="lb"> </em> <a class="ae kc" href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a" rel="noopener ugc nofollow" target="_blank"> <em class="lb">你可以点击这里获得这方面的进一步信息。</em> </a></p><h1 id="9509" class="lp lq iq bd lr ls ne lu lv lw nf ly lz ma ng mc md me nh mg mh mi ni mk ml mm bi translated">结论</h1><p id="5c85" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">第一次和<em class="lb"> jQuery </em>见面很牛逼，一切都很好。但是时间过得太快了，网络的世代也改变了。</p><p id="fae8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我并不是想告诉你，如果你正在使用jQuery 的话，现在就停止使用它。然而，你应该考虑它对你的项目和你的需求是否真的有必要。</p></div></div>    
</body>
</html>
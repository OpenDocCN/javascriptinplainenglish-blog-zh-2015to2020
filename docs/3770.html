<html>
<head>
<title>How to Store Login Sessions with LocalStorage and SessionStorage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨LocalStorageå’ŒSessionStorageå­˜å‚¨ç™»å½•ä¼šè¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/implementing-login-case-using-localstorage-and-sessionstorage-bfddce5d2198?source=collection_archive---------0-----------------------#2020-10-24">https://javascript.plainenglish.io/implementing-login-case-using-localstorage-and-sessionstorage-bfddce5d2198?source=collection_archive---------0-----------------------#2020-10-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1008" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ä¿å­˜SessionStorageä¸­å½“å‰ç™»å½•çš„ç”¨æˆ·å’ŒLocalStorageä¸­æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå…¨éƒ¨ä½¿ç”¨æ™®é€šJavaScriptï¼</h2></div><p id="73b2" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">JavaScriptæ˜¯ä¸€ç§è½»é‡çº§è„šæœ¬è¯­è¨€ï¼Œä½†å®ƒæä¾›äº†å¦‚æ­¤å¤šçš„åŠŸèƒ½ï¼Œä»åˆ¶ä½œåŠ¨æ€ç½‘é¡µåˆ°åˆ›å»ºæœåŠ¡å™¨ã€ç§»åŠ¨åº”ç”¨ç¨‹åºç­‰ç­‰ã€‚ç°ä»£JavaScriptå¯ä»¥ä½¿ç”¨çš„ä¸¤ä¸ªé‡è¦åŠŸèƒ½æ˜¯LocalStorageå’ŒSessionStorageã€‚</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/4ac6224ed0b7dc43ef75ecf93d1df260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*h7xqCMlXeL9q0u2rbHviRA.gif"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">The Demo</figcaption></figure><h1 id="8bf6" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">æœ¬åœ°å­˜å‚¨ä¸ä¼šè¯å­˜å‚¨</h1><p id="1f20" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">ä¸¤è€…éƒ½å¯ä»¥ä»Inspect Element &gt; Application &gt; local storageæˆ–SessionStorageä¸­è®¿é—®ã€‚å®ƒä»¬çš„åç§°è¯´æ˜äº†å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œä¸¤è€…éƒ½å­˜å‚¨ä¿¡æ¯ï¼Œä½†æ˜¯SessionStorageä¸ºå½“å‰ä¼šè¯å­˜å‚¨ä¿¡æ¯ï¼Œè€ŒLocalStorageå°†ä¿¡æ¯å­˜å‚¨åœ¨ç³»ç»Ÿçš„æœ¬åœ°ã€‚</p><p id="6506" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><em class="mm">å½“ä½ æ”¹å˜ä½ å½“å‰çš„æ ‡ç­¾é¡µæˆ–æµè§ˆå™¨çª—å£æ—¶ï¼Œä¼šè¯å°±ä¼šè¿‡æœŸï¼Œå› æ­¤ï¼Œä¿¡æ¯ä¼šè‡ªåŠ¨ä¸¢å¤±ï¼Œè€ŒLSä¸ä¼šè¿™æ ·å·¥ä½œï¼</em></p><p id="96bb" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">å› æ­¤ï¼Œä¸ºäº†å­˜å‚¨ç”¨æˆ·IDå’Œå¯†ç ç­‰ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨LocalStorageï¼Œå¹¶ä¸”å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯å°†åœ¨SessionStorageæœ¬èº«ä¸­å¯è§ï¼å¾ˆé…·çš„ä¸œè¥¿ğŸ‘©ğŸ»â€ğŸ’»ï¼</p><h2 id="2c7f" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated">å®æ–½æ—¶é—´</h2><p id="07c4" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">HTMLè¡¨å•çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œæˆ‘ä»¬å°†ä»è¿™ä¸ªè¡¨å•ä¸­æå–ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„JSä»£ç ä¸­ä½¿ç”¨å®ƒã€‚</p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="f988" class="mn lq in na b gy ne nf l ng nh">...<br/>&lt;body&gt;<br/>  &lt;div&gt;<br/>    &lt;ul id="listuser"&gt;<br/>      &lt;h3&gt; All users here: &lt;/h3&gt;<br/>    &lt;/ul&gt; <br/>  &lt;/div&gt;<br/>  <br/>&lt;form onsubmit="return false"&gt;</span><span id="540c" class="mn lq in na b gy ni nf l ng nh">&lt;div class="container"&gt;</span><span id="1456" class="mn lq in na b gy ni nf l ng nh">&lt;label for="uname"&gt;&lt;b&gt;Username&lt;/b&gt;&lt;/label&gt;<br/>&lt;input type="text" placeholder="Enter Username" id= "uname"                  name="uname" required&gt;</span><span id="07e1" class="mn lq in na b gy ni nf l ng nh">&lt;label for="psw"&gt;&lt;b&gt;Password&lt;/b&gt;&lt;/label&gt;<br/>&lt;input type="password" placeholder="Enter Password" id="psw" name="psw" required&gt;</span><span id="bcda" class="mn lq in na b gy ni nf l ng nh">&lt;button type="submit" onclick="Login()"&gt;Login&lt;/button&gt;<br/>    <br/>&lt;/div&gt;<br/>&lt;/form&gt;<br/>&lt;/body&gt;<br/>...</span></pre><p id="e0ad" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">ç”¨æˆ·IDå’Œå¯†ç ä½œä¸ºå¯¹è±¡æ•°ç»„å­˜å‚¨åœ¨LSä¸­ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å°†æ¯ä¸ªç”¨æˆ·çš„å¯¹è±¡æ¨é€åˆ°æ•°ç»„ä¸­ã€‚å¯†ç å¿…é¡»ä»¥åŠ å¯†å½¢å¼å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨å™¨ä¸­ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¢«æå–å‡ºæ¥ã€‚</p><p id="641d" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><em class="mm">å‡½æ•°btoa('string ')å¯¹ä¼ é€’çš„å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼Œè€Œatob('encoded_string ')å¯¹ç¼–ç åçš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ã€‚</em></p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="c15f" class="mn lq in na b gy ne nf l ng nh">function Login()<br/>{<br/> var a = new Array();<br/> up1 = new Object();<br/> up2 = new Object();<br/> <br/>up1={<br/> name:â€™<a class="ae nj" href="mailto:abcd@gmail.com" rel="noopener ugc nofollow" target="_blank">abcd@gmail.com</a>â€™,<br/> password:btoa(â€™abc@12')<br/>};</span><span id="b57b" class="mn lq in na b gy ni nf l ng nh">up2={<br/> name:â€™<a class="ae nj" href="mailto:bcd@gmail.com" rel="noopener ugc nofollow" target="_blank">bcd@gmail.com</a>â€™,<br/> password:btoa(â€™bcd@12')<br/>};</span><span id="56cd" class="mn lq in na b gy ni nf l ng nh">a.push(up1);<br/>a.push(up2);</span></pre><h2 id="b4c5" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated">æå–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯</h2><p id="8ad1" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">ç®€å•åœ°è¯´ï¼Œæäº¤çš„è¡¨å•ä¸­çš„ç”¨æˆ·åå’Œå¯†ç å°†æ˜¯å½“å‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨setItemæ–¹æ³•å°†å®ƒä»¬å­˜å‚¨åœ¨SessionStorageä¸­ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª<strong class="kf io"> <em class="mm"> (keyï¼Œvalue)å¯¹</em> </strong>ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœæ‚¨æƒ³è¦å–å‡ºå€¼ï¼Œè¯·ä½¿ç”¨getItem('key ')ã€‚è¯·è®°ä½ï¼Œè¿™é‡Œçš„å¯†é’¥ç±»ä¼¼äºâ€” array['array_name'][userID]</p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="d462" class="mn lq in na b gy ne nf l ng nh">var username = document.getElementById(â€˜unameâ€™).value;<br/>var password = document.getElementById(â€˜pswâ€™).value;</span><span id="ac5b" class="mn lq in na b gy ni nf l ng nh">sessionStorage.setItem(â€œcurrentloggedinâ€,username);</span></pre><p id="3085" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kf io"> <em class="mm">å­˜å‚¨ç”¨æˆ·å¯¹è±¡çš„æ•°ç»„ã€‚LocalStorageåªå­˜å‚¨å­—ç¬¦ä¸²å€¼ï¼ŒJson.stringify()ä¸ºæˆ‘ä»¬åšäº†è¿™ä»¶äº‹ï¼</em>T13ã€‘</strong></p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="8778" class="mn lq in na b gy ne nf l ng nh">localStorage.setItem('all_users',JSON.stringify(a));</span></pre><h2 id="2285" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated">ç™»å½•ååœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºç”¨æˆ·</h2><p id="8001" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">æ˜¯æ—¶å€™è§£ææˆ‘ä»¬å­˜å‚¨åœ¨ä¸Šé¢çš„å¯¹è±¡æ•°ç»„ï¼Œå¹¶åŠ¨æ€æ˜¾ç¤ºä½œä¸º<li>å…ƒç´ é™„åŠ åˆ°<ul>çš„ç”¨æˆ·åˆ—è¡¨äº†ã€‚åœ¨Login()å‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç :</ul></li></p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="334b" class="mn lq in na b gy ne nf l ng nh">a=JSON.parse((localStorage.getItem("all_users")));</span><span id="7977" class="mn lq in na b gy ni nf l ng nh">a.push({name: username, password: password});</span><span id="d35d" class="mn lq in na b gy ni nf l ng nh">localStorage.setItem('name',JSON.stringify(a));</span><span id="dd81" class="mn lq in na b gy ni nf l ng nh">for(var i=0; i&lt;a.length; i++)<br/>  {<br/>   var li = document.createElement("li");<br/>   li.innerHTML=a[i]['name'];<br/>   document.getElementById("listuser").appendChild(li);<br/>  }</span></pre><h1 id="f5e7" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">é™„åŠ æƒ…å†µ:ç”¨æˆ·è®¤è¯</h1><p id="6600" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">æˆ‘å°†ä½¿ç”¨<strong class="kf io"><em class="mm">JavaScript map</em></strong>æ¥æ£€æŸ¥æ¥è‡ªLocalStorageçš„ç”¨æˆ·ä¿¡æ¯çš„æœ‰æ•ˆæ€§ï¼Œå¹¶å£°æ˜æˆåŠŸç™»å½•ï¼Œå¦‚æœç”¨æˆ·åå’Œå¯†ç è®°å½•å­˜åœ¨äºLocalStorageä¸­ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·ä¿¡æ¯ä»¥å¯¹è±¡æ•°ç»„çš„å½¢å¼è½¬æ¢ä¸ºHash-mapã€‚</p><h2 id="601d" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated"><strong class="ak">JavaScriptä¸­çš„Map()â€”â€”ä¼˜åŒ–</strong></h2><p id="cbc6" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">JSä½¿ç”¨ã€‚map()å‡½æ•°ï¼Œå…¶ä¸­çš„å¯¹è±¡å¯ä»¥ä½œä¸º[é”®ï¼Œå€¼]å¯¹å­˜å‚¨ï¼Œå¹¶ä¸”å¯ä»¥ä½œä¸º<strong class="kf io"><em class="mm">hashmap[é”®] = valueè®¿é—®ï¼›</em> </strong></p><p id="54d5" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘å°†ç”µå­é‚®ä»¶IDå­˜å‚¨ä¸ºå¯†é’¥ï¼Œå°†å¯†ç å­˜å‚¨ä¸ºå€¼ã€‚è¯·è®°ä½ä½¿ç”¨atob(â€œå¯†ç â€)å¯¹å…¶è¿›è¡Œè§£ç ï¼Œä»¥ä¾¿ä¸å­˜å‚¨åœ¨LocalStorageä¸­çš„å¯†ç è¿›è¡Œæ¯”è¾ƒã€‚</p><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="d070" class="mn lq in na b gy ne nf l ng nh">function Login()<br/>{<br/>   const hash = Object.fromEntries(<br/>   a.map(e =&gt; [e.name, e.password])<br/>)</span><span id="c9d1" class="mn lq in na b gy ni nf l ng nh">var username = document.getElementById('uname').value;<br/>var password = document.getElementById('psw').value;</span><span id="bbe8" class="mn lq in na b gy ni nf l ng nh">for (let key of hash) <br/>{<br/>    <br/>    if(key[0] === username &amp;&amp; key[1]===atob(password))<br/>     {<br/>         alert('Login successful');<br/>     }<br/> <br/>else<br/>     {<br/>         alert('Login fail');<br/>     }<br/>}</span></pre><p id="a58a" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">Object.fromEntries()å¸®åŠ©æˆ‘ä»¬æ£€ç´¢æ‰€æœ‰å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡æ•°ç»„éƒ½ä½¿ç”¨map()å‡½æ•°è½¬æ¢æˆ–æ˜ å°„åˆ°ä¸€ä¸ªhashmapæ¡ç›®ã€‚è¿™æ˜¯åœ¨æœ¬åœ°å­˜å‚¨ä¸­å­˜å‚¨ä¸œè¥¿çš„æ›´ä¼˜åŒ–å’Œæ›´æœ‰æ•ˆçš„æ–¹å¼ã€‚</p><h1 id="9a18" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">è¿­ä»£åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„å“ˆå¸Œè¡¨</strong></h1><p id="8380" class="pw-post-body-paragraph kd ke in kf b kg mh jo ki kj mi jr kl km mj ko kp kq mk ks kt ku ml kw kx ky ig bi translated">è¿­ä»£åœ°å›¾æœ‰è®¸å¤šå¤æ‚çš„æ–¹æ³•ï¼Œä»ä½¿ç”¨reduce()å‡½æ•°åˆ°ä½¿ç”¨Object.assign()ã€‚</p><h2 id="f125" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated"><strong class="ak">ä½¿ç”¨è¿˜åŸå‰‚()</strong></h2><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="030f" class="mn lq in na b gy ne nf l ng nh">var hashmap = a.reduce(function(map, obj) {<br/>    map[obj.key] = obj.val;<br/>    return map;<br/>}, {});</span></pre><h2 id="b120" class="mn lq in bd lr mo mp dn lv mq mr dp lz km ms mt mb kq mu mv md ku mw mx mf my bi translated"><strong class="ak"> 2 .ä½¿ç”¨å¯¹è±¡. assign( ) </strong></h2><pre class="la lb lc ld gt mz na nb nc aw nd bi"><span id="21d5" class="mn lq in na b gy ne nf l ng nh">const hashmap = Object.assign({}, ...(&lt;{}&gt;a.map(s =&gt; ({[s.key]:s.value}))));</span></pre><p id="6471" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><em class="mm">è¿­ä»£å“ˆå¸Œè¡¨æœ€ç®€å•çš„æ–¹æ³•æ˜¯å¯¹å¾ªç¯</em>  <em class="mm">è¿è¡Œ</em> <strong class="kf io"> <em class="mm">ï¼Œè¿”å›(é”®ã€å€¼)å¯¹ï¼Œå¯åˆ†åˆ«ä½œä¸ºé”®[0]å’Œé”®[1]è®¿é—®ã€‚</em></strong></p></div><div class="ab cl nk nl hr nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ig ih ii ij ik"><p id="46d5" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">JavaScriptçœŸçš„å¾ˆæœ‰è¶£ï¼Œå®ƒæ€»æ˜¯åŒ…å«ä¸€äº›æœªè¢«å‘ç°çš„ç‰¹æ€§ï¼ç»§ç»­æ¢ç´¢å¹¶ä»ä¸­åˆ›é€ åˆ›æ–°ï¼</p></div></div>    
</body>
</html>
<html>
<head>
<title>Custom Hot Keys With Vanilla JS In A React Hooks App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Hooks应用程序中带有普通JS的自定义热键</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/custom-hot-keys-with-vanilla-js-in-a-react-hooks-app-8d17611b997a?source=collection_archive---------10-----------------------#2020-11-18">https://javascript.plainenglish.io/custom-hot-keys-with-vanilla-js-in-a-react-hooks-app-8d17611b997a?source=collection_archive---------10-----------------------#2020-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="588e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">跳过图书馆，滚动你自己的热键</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/88d1702ec6e3cf93521204dfa3b9761c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27KXxpe1-SQjPbMMTiN6UA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">Pixabay</strong></a> from <a class="ae kv" href="https://www.pexels.com/photo/beverage-break-breakfast-brown-414630/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"><strong class="bd kw">Pexels</strong></a></figcaption></figure><p id="e6f5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在开发React应用程序时，我需要在用户按下escape键时隐藏一个组件。</p><p id="04a2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">谷歌快速搜索<code class="fe lt lu lv lw b">“react custom hot keys”</code>推荐了一个名为<code class="fe lt lu lv lw b">react-hotkeys</code>的图书馆。</p><p id="fbbe" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">不幸的是，它已经有将近一年没有被维护了(截止到2020年11月17日)。</p><p id="6228" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">所以我直接从Droogan的“不可维护的代码”中得到建议，并推出了自己的代码。</p><p id="c426" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我是这样做的。</p><h2 id="0e3d" class="lx ly iq bd lz ma mb dn mc md me dp mf lg mg mh mi lk mj mk ml lo mm mn mo mp bi translated">添加事件侦听器</h2><p id="89b3" class="pw-post-body-paragraph kx ky iq kz b la mq jr lc ld mr ju lf lg ms li lj lk mt lm ln lo mu lq lr ls ij bi translated">在显示组件时，我在<code class="fe lt lu lv lw b">keyup</code>事件上添加了一个事件监听器。这在按下任何键时触发。</p><pre class="kg kh ki kj gt mv lw mw mx aw my bi"><span id="95bc" class="lx ly iq lw b gy mz na l nb nc">window.addEventListener(<br/>    'keyup',<br/>    hideDisplay<br/>)</span></pre><p id="a01a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><code class="fe lt lu lv lw b"><em class="nd">hideDisplay</em></code> <em class="nd">是我们马上要写的函数。</em></p><h2 id="6dbe" class="lx ly iq bd lz ma mb dn mc md me dp mf lg mg mh mi lk mj mk ml lo mm mn mo mp bi translated">编写一个函数供侦听器调用</h2><p id="499d" class="pw-post-body-paragraph kx ky iq kz b la mq jr lc ld mr ju lf lg ms li lj lk mt lm ln lo mu lq lr ls ij bi translated">然后我写了一个叫<code class="fe lt lu lv lw b">hideDisplay</code>的函数，它调用<code class="fe lt lu lv lw b">setIsShowing(false)</code>，并隐藏了组件。</p><p id="303d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">该逻辑以被按下的<code class="fe lt lu lv lw b">esc</code>键<code class="fe lt lu lv lw b">27</code>为条件。</p><pre class="kg kh ki kj gt mv lw mw mx aw my bi"><span id="5bb3" class="lx ly iq lw b gy mz na l nb nc">function hideDisplay(e) {<br/>  var key = e.which || e.keyCode;<br/>  if (key == 27) {<em class="nd"><br/>    </em>setIsShowing(false<em class="nd">)<br/></em>  }<br/>}</span></pre><h2 id="b146" class="lx ly iq bd lz ma mb dn mc md me dp mf lg mg mh mi lk mj mk ml lo mm mn mo mp bi translated">删除事件监听器</h2><p id="2754" class="pw-post-body-paragraph kx ky iq kz b la mq jr lc ld mr ju lf lg ms li lj lk mt lm ln lo mu lq lr ls ij bi translated">最后，我修改了上面的函数，在成功运行事件监听器的逻辑之后，删除了它。</p><p id="8226" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">虽然不一定与现代浏览器相关，但这是避免内存泄漏的最佳实践。</p><pre class="kg kh ki kj gt mv lw mw mx aw my bi"><span id="3abe" class="lx ly iq lw b gy mz na l nb nc">function hideDisplay(e) {<br/>  var key = e.which || e.keyCode;<br/>  if (key == 27) {<em class="nd"><br/>    </em>setIsShowing(false)<em class="nd"><br/>    </em>window.addEventListener(<br/>        'keyup',<br/>        hideDisplay<br/>    );<br/>  }<br/>}</span></pre><p id="7a88" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">仅此而已。</p><p id="a599" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在，当呈现组件时，添加了一个事件监听器，它监听<code class="fe lt lu lv lw b">esc</code>键的按下。当按下<code class="fe lt lu lv lw b">esc</code>键时，组件被隐藏，监听器被移除。</p><p id="9b6f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">问题解决了！</p><h1 id="2816" class="ne ly iq bd lz nf ng nh mc ni nj nk mf jw nl jx mi jz nm ka ml kc nn kd mo no bi translated">结论</h1><p id="fab1" class="pw-post-body-paragraph kx ky iq kz b la mq jr lc ld mr ju lf lg ms li lj lk mt lm ln lo mu lq lr ls ij bi translated">如果你是热键新手，我希望你会发现这很有用。</p><p id="5e1b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我的背景不在前端，所以如果有更好的方法来实现这一点，我很乐意在评论中听到它。</p><p id="32bb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">也就是说，如果一个解决方案可以用不到10行代码实现，那么增加整个库的代码是没有意义的。</p><p id="fc67" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一如既往，编码快乐！</p></div></div>    
</body>
</html>
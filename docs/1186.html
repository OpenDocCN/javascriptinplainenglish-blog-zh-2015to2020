<html>
<head>
<title>Using Dynamic Routes in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中使用动态路由</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-nested-routes-in-react-22f9d3fbcf06?source=collection_archive---------0-----------------------#2020-02-10">https://javascript.plainenglish.io/using-nested-routes-in-react-22f9d3fbcf06?source=collection_archive---------0-----------------------#2020-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/be2a33c35afa20c16913423a8c29a038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zr0WAP6oFeTERKrzdaJJUQ.jpeg"/></div></div></figure><p id="e200" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天，我们将讨论如何在React应用程序中实现动态路由。<a class="ae kw" href="https://github.com/jonathanbrierre/Sample-Shirt-Router" rel="noopener ugc nofollow" target="_blank">这里的</a>是这个演示的GitHub repo的链接。</p><p id="583b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是最终应用程序的样子:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/c21d58909561508d4f9046fd2aee1d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*pK40u0-xfSL-CIZX9GShOg.gif"/></div></figure><p id="ac49" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">假设:</strong></p><p id="ab18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-您对React中的路由有基本的了解(使用react-router-dom包中的BrowserRouter、Route、Switch和NavLink组件。<a class="ae kw" href="https://reacttraining.com/react-router/web/guides/quick-start" rel="noopener ugc nofollow" target="_blank">点击此处</a>查找相关文档。)</p><p id="f1e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-你了解状态、道具和组件操作。<a class="ae kw" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">点击此处</a>查找相关文档。</p><p id="6fbb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我将react-router-dom中的BrowserRouter组件实现到呈现我的应用程序组件的index.js文件中。这样做允许我在整个应用程序中设置路由。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lc"><img src="../Images/faceb8420dd450447572e998b032ea52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MRJ-EGxwP7vFVkJ0dKh4zg.png"/></div></div></figure><p id="f112" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的应用程序组件中，我手动定义了状态，如下所示:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/5a238300795f49847253dda68b86064c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*ZeNn_YOBDDr79TwhLPdtnw.png"/></div></figure><p id="f404" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常，我会从一个外部/后端API获取来填充我的状态，尽管我这样定义状态是为了演示的目的。</p><p id="8a46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为这个App组件是一个类组件，所以我有一个render方法来返回我的导航栏组件，以及我的所有route组件。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi le"><img src="../Images/a74dc507344305e27ab8c081d72fc6f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7ZElXYCDjeL4Fu3ONBnww.png"/></div></div></figure><p id="c270" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这可能看起来有点多，不过让我们来分解一下。</p><p id="e735" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的NavBar组件下面，有一个包含我的路由的Switch组件。这个开关组件告诉浏览器一次只能呈现一个组件。如果你想更深入地了解Switch，请点击这里查看这篇博文。</p><p id="c4b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第41行，我们为Home组件定义了一个路由。它用“精确”关键字表示。这样做告诉React仅在url路径与定义的路径完全匹配时才呈现Home组件。在第42行，我们有允许每件衬衫渲染的动态路径。第42行将是我们这篇博文的重点。否则，如果输入的URL路由与这里定义的任何路由都不匹配，第43行将呈现一个NotFound组件。</p><p id="9ece" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第42行，我们将再次使用单个衬衫组件动态渲染我们的衬衫。</p><pre class="ky kz la lb gt lf lg lh li aw lj bi"><span id="f070" class="lk ll iq lg b gy lm ln l lo lp">&lt;Route path = ‘/shirts/:id’ render = {this.renderShirts} /&gt;</span></pre><p id="db78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们定义这条路线将指向哪条路径。我们通过提供可选参数“shirts”和“:id”来实现这一点，id是URL中使路由动态的部分。请注意，URL的任何动态部分都必须用冒号表示。否则，它将被视为静态路由。我稍后会对此进行更深入的探讨。</p><p id="d28f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在实现这些动态路径时，渲染属性也是必需的。render prop接受回调函数，该函数可以接受通常称为routerProps的对象的参数。上面那行字也可以这样写:</p><pre class="ky kz la lb gt lf lg lh li aw lj bi"><span id="2726" class="lk ll iq lg b gy lm ln l lo lp">&lt;Route path = ‘/shirts/:id’ render = {routerProps =&gt; this.renderShirts(routerProps)} /&gt;</span></pre><p id="07b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，当我们将这些路由器属性传递给我们的函数时，让我们首先在控制台记录它，看看我们收到了什么。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/2505f8314d7a67489b1c79cbe37b5981.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*hUGwch8r4xy9D4PNPM_3Vg.png"/></div></figure><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/6023319c95dc43233c92980d4d5956b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYd0ce19b6oFE09msgyAYg.png"/></div></div></figure><p id="48d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经可以访问这个routerProps对象了，我们现在可以看到，当用户转到路由“/shirts/3”时，该路由会保存在routerProps中。我们现在可以研究这些routerProps，并看到我们可以轻松地访问match下的id参数，然后访问params下的id参数。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ls"><img src="../Images/fd8390e61d600148cf8698a51f26b98d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8quqpDSDoXorvjd41AGwVQ.png"/></div></div></figure><p id="870d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是可能的，因为我们在Route组件中定义了参数id。如果我们试图设置不带冒号的参数:</p><pre class="ky kz la lb gt lf lg lh li aw lj bi"><span id="1f47" class="lk ll iq lg b gy lm ln l lo lp">&lt;Route path = ‘/shirts/id’</span></pre><p id="07c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么我们的routerProps将不能像上面看到的那样检索输入id。既然我们可以从URL中动态检索id，现在我们可以向renderShirts函数添加更多的功能。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/0f40d7e3f70429d35b7ec86d8f7dfe77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCSPJQmIwIL_kiNgrxO3YQ.png"/></div></div></figure><p id="a552" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们浏览一下这个函数。</p><p id="9bcd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们通过调用routerProps.match.params.id上的parseInt从URL中检索id —如果没有parseInt，我们将检索一个字符串而不是一个整数。一旦我们将id作为一个整数检索出来，我们就将它保存到一个名为shirtId的变量中。</p><p id="f125" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们使用find higher-order-function遍历我们的状态，找到id等于shirtId的衬衫对象，并将其返回到一个新变量中。有关查找功能的更多信息，您可以<a class="ae kw" href="https://www.w3schools.com/jsref/jsref_find.asp" rel="noopener ugc nofollow" target="_blank">点击此处</a>。</p><p id="ea7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们可以根据find方法是否返回任何内容，动态地将衬衫呈现到页面上。如果我们将一个有效的返回值保存到变量foundShirt中，那么我们将使用指向foundShirt对象的属性来呈现组件Shirt。否则，如果find方法返回undefined，那么foundShirt将指向undefined，从而呈现我们的NotFound组件。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/e2af068af29df72909413daa9734e384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*asXVLGRNRFdmRgOOC2LBVA.png"/></div></div></figure><p id="80cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是用于渲染每件衬衫的衬衫组件的图片:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/4cb6eba0abbb4e188c898738838cc413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSw-U7sg-P5jQ0dNl_TCmg.png"/></div></div></figure><p id="a327" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">概括地说，我们使用动态路由在页面上动态呈现组件的能力对于我们在路由组件中使用呈现属性是至关重要的。使用这个渲染属性，我们可以访问routerProps对象，该对象包含我们在路由路径中设置的参数值。</p><p id="263e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想查看GitHub回购的全部代码，你可以在这里找到它<a class="ae kw" href="https://github.com/jonathanbrierre/Sample-Shirt-Router" rel="noopener ugc nofollow" target="_blank"/>！</p><h1 id="68de" class="lw ll iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">资源</h1><div class="mt mu gp gr mv mw"><a href="https://github.com/jonathanbrierre/Sample-Shirt-Router" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">jonathanbrierre/样品衬衫路由器</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jw mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://www.w3schools.com/jsref/jsref_find.asp" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">JavaScript数组find()方法</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">组织良好，易于理解的网站建设教程，有很多如何使用HTML，CSS，JavaScript的例子…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.w3schools.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk jw mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://dev.to/danhjoo7/using-a-switch-component-in-react-router-d2k" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">在React路由器中使用交换机组件</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">对于刚接触React的人来说，React中的路由可能有点困难。它与路由非常不同…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">开发到</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk jw mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://reacttraining.com/react-router/web/guides/quick-start" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">React路由器:React的声明式路由</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">学习一次，路线无处不在</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">reacttraining.com</p></div></div><div class="nf l"><div class="nn l nh ni nj nf nk jw mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://reactjs.org/docs/getting-started.html" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">开始行动-做出反应</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">用于构建用户界面的JavaScript库</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">reactjs.org</p></div></div><div class="nf l"><div class="no l nh ni nj nf nk jw mw"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Creating consistent components across your projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的项目中创建一致的组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/one-ui-components-for-all-your-projects-785697e73a8d?source=collection_archive---------8-----------------------#2020-05-20">https://javascript.plainenglish.io/one-ui-components-for-all-your-projects-785697e73a8d?source=collection_archive---------8-----------------------#2020-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/6af03396e5776df6426d27b9ff75127f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4u3Fw49H5U-sqgyBoGsqw.png"/></div></div></figure><div class=""/><p id="ac46" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过多年的开发，高级前端开发人员将开始考虑的挑战之一是<strong class="ka jc">如何为所有前端项目找到一个UI库</strong>。困难的总是配置方面。【https://nx.dev/】感谢社区和<a class="ae kw" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank">T5</a><strong class="ka jc">项目；现在更加简单明了</strong>。我将回顾实现这一点的老方法，以及我们如何利用NX工具做同样的事情。然后，我将讨论前端项目工作区中的一些重要注意事项，这是我在生活经历中学到的。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="8f4a" class="le lf jb bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Angular中的共享UI组件库</h1><p id="2e29" class="pw-post-body-paragraph jy jz jb ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">学习如何在Angular中创建库的最简单方法是从下一个链接查看他们网站上的指南:</p><div class="ip iq gp gr ir mh"><a href="https://angular.io/guide/creating-libraries" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jc gy z fp mm fr fs mn fu fw ja bi translated">有角的</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">Angular是一个构建移动和桌面web应用程序的平台。加入数百万开发者的社区…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">angular.io</p></div></div></div></a></div><p id="6bfb" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">文档将带您了解生成和配置库的细节，但是所有的魔力都来自下一个命令:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="2d81" class="mz lf jb mv b gy na nb l nc nd">ng generate library &lt;my-lib&gt;</span></pre><p id="1e7a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实际上，该命令将在<strong class="ka jc">下创建一个子目录。/projects </strong>并在该目录中创建您的库。之后，您将拥有一个名为<strong class="ka jc"> public_api.ts </strong>的文件，您将需要在其中导出您想要在其他项目中使用的所有组件。在其他项目中使用您的库就像从库名中导入组件一样简单，而不用担心链接到那个库，<strong class="ka jc">因为前面的命令会自动将库添加到angular.json文件</strong>中，这将使它可以从根项目中仅使用库名来访问，比如:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="d473" class="mz lf jb mv b gy na nb l nc nd">import { YourComponent } from ‘library-name’;</span></pre><p id="3773" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想将组件发布到npm包并通过安装直接使用库，只需调用库项目上的下一个命令:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="e216" class="mz lf jb mv b gy na nb l nc nd">npm publish</span></pre><p id="2de1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请记住，您需要在packages.json中指定您的包版本、名称和细节，此外，还需要添加一个关于如何使用您的组件的可选的<strong class="ka jc"> readme.md </strong>。</p><h1 id="8e3a" class="le lf jb bd lg lh ne lj lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb bi translated">使用NX在Angular中共享UI组件库</h1><p id="b81c" class="pw-post-body-paragraph jy jz jb ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">使用NX创建共享库和以前不使用NX一样简单，只需运行下一个命令:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="42f6" class="mz lf jb mv b gy na nb l nc nd">ng g @nrwl/angular:lib &lt;my-lib&gt;</span></pre><p id="e380" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建的<strong class="ka jc"> index.ts </strong>文件将是导出公共组件的地方，要添加组件，您可以使用下一个命令:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="198c" class="mz lf jb mv b gy na nb l nc nd">ng g component &lt;component name&gt;  — project=&lt;project name&gt;  — export</span></pre><p id="e431" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">NX框架中的好东西是依赖图，通过运行:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="9781" class="mz lf jb mv b gy na nb l nc nd">npm run dep-graph</span></pre><p id="c97b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此它将向您显示项目和库之间的依赖关系。</p><p id="79d5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在NX中，只需要直接将库导入到想要使用它的项目中就足够了，因为正如我在上一段中讨论的那样，它已经在<strong class="ka jc"> angular.json </strong>文件中定义了。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="ddbc" class="mz lf jb mv b gy na nb l nc nd">import { Component } from ‘@workspace_name/library_project_name’;</span></pre><h1 id="f828" class="le lf jb bd lg lh ne lj lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb bi translated">React中的共享UI组件库</h1><p id="cef9" class="pw-post-body-paragraph jy jz jb ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">通常，在React中创建共享库的最佳方式是使用下一个链接中的“create-react-library”包:</p><div class="ip iq gp gr ir mh"><a href="https://www.npmjs.com/package/create-react-library" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jc gy z fp mm fr fs mn fu fw ja bi translated">创建-反应-库</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">使用Rollup和create-react-app创建可重用的现代React库的CLI。易于使用的CLI处理所有现代…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">www.npmjs.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no ix mh"/></div></div></a></div><p id="c631" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它将使用汇总来构建库，然后您需要通过下面的命令导入该库:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="ed45" class="mz lf jb mv b gy na nb l nc nd">npm link (At the directory of the library)</span><span id="5635" class="mz lf jb mv b gy np nb l nc nd">npm link library-name (At the directory of your project)</span></pre><p id="fbca" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，在这种情况下，您将在项目和库之间创建一个本地链接，这样做的好处是，每当您使用下一个命令对代码进行更改时，您都可以自动构建库:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="462a" class="mz lf jb mv b gy na nb l nc nd">rollup — watch</span></pre><p id="a254" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，库中的任何更改都会使您的项目重新构建并接受新的更改。</p><p id="3562" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以将这个库发布到一些像npm这样的仓库中，然后直接安装到你的项目中，就像我之前提到的那样。</p><h1 id="8aaa" class="le lf jb bd lg lh ne lj lk ll nf ln lo lp ng lr ls lt nh lv lw lx ni lz ma mb bi translated">使用NX在React中共享UI组件库</h1><p id="9092" class="pw-post-body-paragraph jy jz jb ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">您可以使用下一个命令为React so easy创建一个共享库:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="7a25" class="mz lf jb mv b gy na nb l nc nd">ng g @nrwl/react:lib &lt;my-lib&gt;</span></pre><p id="e1d7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这也将导致生成一个带有库名的文件，该文件将导出该库中的公共组件。</p><p id="c0ec" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">NX还支持在该库中生成组件的命令:</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="7d57" class="mz lf jb mv b gy na nb l nc nd">ng g @nrwl/react:component &lt;component name&gt; — project=&lt;project name&gt; </span></pre><p id="aef5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在NX中，只需要直接将库导入到想要使用它的项目中就足够了，因为它已经在angular.json文件中定义了。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="2d93" class="mz lf jb mv b gy na nb l nc nd">import { Component } from ‘@workspace_name/library_project_name’;</span></pre></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h1 id="9123" class="le lf jb bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">前端项目工作区中的重要说明</h1><p id="7460" class="pw-post-body-paragraph jy jz jb ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">1.始终只创建一个库项目来存储静态文件(字体-图标-图像-脚本-样式),因此在这种情况下，您将有一个统一的地方来管理项目资源，并且您将在所有FE项目中保持一致性，特别是在样式方面，在NX中，我通过创建一个空的库项目并将所有这些文件放在那里，并且在assets部分中的每个项目的angular.json文件中，您应该指向该项目，如下所示:</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/894d535025e0a3b76a189d5974e92508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9WM6l-p2R028UokWOPpMqg.png"/></div></div></figure><p id="1bbe" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在代码内部，我直接从它们的路径导入样式，如下所示:</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nr"><img src="../Images/9f2c9ecd90c9dbdc39c576d8c13a2a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ufMbP_6_SSPHuOiqM6ZC0Q.png"/></div></div></figure><p id="bb8c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.如果您可以在一个单独的库项目中定义对后端API的所有调用，那就更好了，这样您就可以在处理前端项目的后端时保持一致性，并且在后端修改的情况下，您可以只更新一个地方。在NX中，我将Apollo客户端用于REST端点或GraphQL端点，项目的库结构如下:</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/eb11c1d772a3acaba5c23eee6aa5f1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*7Pmg8rLIIkImm_CmoCOX6g.png"/></div></figure><p id="3fbe" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在客户端内部，我定义了Apollo客户端，在config内部，我添加了路径等全局配置，在服务内部，我添加了跨项目的公共服务，在<strong class="ka jc"> account.ts </strong>内部，例如，我添加了GraphQL查询和变异。我为每个业务逻辑创建了I文件。</p><p id="b314" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.始终将所有通用组件放在一个单独的库项目中</p><p id="7c95" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.最好是分离全局样式，并使用CSS或SCSS在资源项目中定义它们，以及特定于组件的样式，并在组件文件中定义它们，我使用@emotion library来实现这一点。下一个链接很好地概述了在前端项目中实现样式的最可能的方法:</p><p id="fc56" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.sitepoint.com/react-components-styling-options/" rel="noopener ugc nofollow" target="_blank">https://www.sitepoint.com/react-components-styling-options/</a></p><p id="8a7f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">@emotion不在那个链接中考虑，但我更喜欢它主要用于组件样式。我更喜欢用以下结构来组织全球资源:</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/bcbb7377bfdaca4906ada7e6e5aa092c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*_7bs-ySXAu4OasBMM-c_mw.png"/></div></figure><p id="6b9c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka jc"> constants.scss </strong>中，我定义了调色板、字体大小和其他类型的品牌常量。在<strong class="ka jc"> skeleton.scss </strong>文件中，我定义了HTML元素的结构，比如边距、宽度、高度等等。在<strong class="ka jc"> skin.scss </strong>文件中，我定义了所有与皮肤风格相关的东西，比如颜色、字体、边框、背景等等。在<strong class="ka jc"> index.scss </strong>中，我通常将主文档元素的样式和任何覆盖放在其他库中，如bootstrap。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="3d68" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望这些笔记能帮助你以一种更干净、更有条理的方式启动你的下一个项目。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting started with Parcel.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Parcel.js入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-parcel-js-76d6a1e16017?source=collection_archive---------2-----------------------#2020-10-23">https://javascript.plainenglish.io/getting-started-with-parcel-js-76d6a1e16017?source=collection_archive---------2-----------------------#2020-10-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9809f4d6f5debf137484557ba6be6593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YBhMRKgwQJENJT8iTxq95Q.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@kadh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kira auf der Heide</a> on <a class="ae jz" href="https://unsplash.com/s/photos/parcel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="92c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当你开始开发一个新的、简单的、静态的网站时，你如何开始？你只是创建一个<code class="fe ky kz la lb b">index.html</code>文件并链接一个<code class="fe ky kz la lb b">style.css</code>表吗？如果您想在最终项目中使用JavaScript模块捆绑、Sass和缩小，该怎么办？</p><p id="f74f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您想利用这些特性，您可能会花费相当多的时间来安装和设置必要的预处理程序和工具，从而妨碍您开始简单的项目。</p><p id="ae2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您想花更多的时间编写代码而不是设置工具，您可能会对使用Parcel.js感兴趣。</p><p id="b69f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lc">本文的完整代码可以在</em><a class="ae jz" href="https://github.com/codebubb/parcel-example" rel="noopener ugc nofollow" target="_blank"><em class="lc">https://github.com/codebubb/parcel-example</em></a>找到</p><h1 id="ec77" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">什么是Parcel.js？</h1><p id="1a1d" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated"><a class="ae jz" href="https://parceljs.org" rel="noopener ugc nofollow" target="_blank"> Parcel </a>是一个打包工具，它将您的源文件(如Sass、JavaScript和TypeScript)处理成浏览器可用的格式。如果你以前使用过<a class="ae jz" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>，你会对这个过程很熟悉。</p><p id="4d09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与包和其他捆绑工具的主要区别是，它不需要配置，它真的很快，正如您将看到的，它处理您所需的任何额外依赖项的安装。</p><h1 id="ed41" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">装置</h1><p id="6a57" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">您可以全局安装包，以便可以在命令行的任何位置使用它:</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="5f6d" class="mo le in lb b gy mp mq l mr ms">npm install -g parcel</span></pre><p id="45bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">或者，您可以将它作为开发依赖项安装到您的项目中。</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="b7e9" class="mo le in lb b gy mp mq l mr ms">npm init -y<br/>npm install --save-dev parcel</span></pre><p id="7af8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本教程的剩余部分，我将选择第二个选项，向您展示如何在自己的项目中使用Parcel。</p><h1 id="3cec" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">添加源文件</h1><p id="cfe6" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">将package作为我们项目的一个依赖项安装后，让我们创建一些源文件。通常，我喜欢创建一个<code class="fe ky kz la lb b">src</code>文件夹，然后为Sass、JavaScript文件等创建单独的子文件夹。但是，您可以按照自己喜欢的方式构建项目。</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="ffaf" class="mo le in lb b gy mp mq l mr ms">myProject/<br/>|── node_modules<br/>|── src/<br/>|   |── index.html<br/>|   |── img/<br/>|   |── scss/<br/>|   |   |── styles.scss<br/>|   |── js/<br/>|   |   | - app.js<br/>|── package.json<br/>|── package-lock.json</span></pre><p id="aa62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，让我们在HTML文件中添加一些内容。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0a7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意我们如何将<code class="fe ky kz la lb b">&lt;link&gt;</code>标签直接指向我们创建的SCSS文件，对于我们的JavaScript也是如此。</p><h1 id="ad4f" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">使用包裹的内建服务器</h1><p id="7066" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">创建源文件后，让我们创建一个<code class="fe ky kz la lb b">npm</code>脚本来运行Parcel，为我们的源文件提供服务。创建脚本的好处是，这将使任何使用您的代码的人清楚地知道他们如何启动和运行项目。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="797f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们项目的<code class="fe ky kz la lb b">package.json</code>文件中，我们将添加一个名为<code class="fe ky kz la lb b">serve</code>的新脚本，该脚本运行包裹服务命令，将入口点设置为<code class="fe ky kz la lb b">src</code>文件夹中的<code class="fe ky kz la lb b">index.html</code>文件。如果你已经用不同的方式创建了你的文件夹结构，确保更新这个命令指向你的<code class="fe ky kz la lb b">index.html</code>文件所在的位置。</p><p id="1039" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成后，我们可以使用以下命令运行包裹服务器:</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="4fc2" class="mo le in lb b gy mp mq l mr ms">npm run serve</span></pre><p id="2220" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，您应该在终端中看到Parcel提供内容的URL(默认为<a class="ae jz" href="http://localhost:1234)" rel="noopener ugc nofollow" target="_blank"> http://localhost:1234) </a>:</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="2e62" class="mo le in lb b gy mp mq l mr ms">Server running at <a class="ae jz" href="http://localhost:1234" rel="noopener ugc nofollow" target="_blank">http://localhost:1234</a> <br/>✨  Built in 2.45s.</span></pre><p id="9c06" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果在浏览器中打开服务器地址，应该会看到显示的HTML页面。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/118fb626557b34c086932a3edaba1cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2K5HWjhEktL8vdezlk7aiw.png"/></div></div></figure><p id="dac4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">目前没有什么令人印象深刻的事情发生，但是如果我们在项目中给<code class="fe ky kz la lb b">styles.scss</code>文件添加一些内容。例如，只是对<code class="fe ky kz la lb b">&lt;h1&gt;</code>标签的一些简单更新:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="d639" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您点击save时，如果您查看运行Parcel server的终端，您会注意到您会得到一条消息<em class="lc"> Installing Sass… </em>表明Parcel已经识别了您的SCSS文件中的内容，并且正在安装必要的工具来将其处理成CSS(如果您查看您的<code class="fe ky kz la lb b">package.json</code>文件，您会看到<code class="fe ky kz la lb b">sass</code>已经作为一个开发依赖项自动安装。</p><p id="fde9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">回到浏览器，您应该看到更新的字体和边距被应用到<code class="fe ky kz la lb b">&lt;h1&gt;</code>标签。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/61785e49925ffa2c451bc85239adf6aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhe4tAkpMVC2sYrgVQZSIA.png"/></div></div></figure><h1 id="cb11" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">使用JavaScript模块</h1><p id="b79c" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">JavaScript模块与Parcel一起开箱即用，因此如果您想将JavaScript代码分割成不同的文件，并使用<code class="fe ky kz la lb b">import/export</code>关键字引用不同的函数和值，那么Parcel将为您处理所有这些。</p><p id="de89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设您想为页面上按钮的点击事件编写一个函数。我们可以将它作为一个新文件<code class="fe ky kz la lb b">Button.js</code>存储在我们的<code class="fe ky kz la lb b">src</code>文件夹的<code class="fe ky kz la lb b">js</code>子文件夹中。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8c49" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的<code class="fe ky kz la lb b">app.js</code>文件中，我们可以简单地<code class="fe ky kz la lb b">import</code>这个函数，并将其分配给页面上按钮的点击事件。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="b575" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">其他类型的资产</h1><p id="6848" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">Parcel不仅仅局限于处理Sass和JavaScript文件；它还可以处理广泛的其他资产,包括图像、打字稿、CoffeScript、Less和Web汇编。</p><p id="992e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，也许您想在源代码中使用TypeScript。Parcel将处理这个到JavaScript的转换。</p><p id="d8de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以将我们的<code class="fe ky kz la lb b">app.js</code>转换成一个类型脚本文件:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="44c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在我们的<code class="fe ky kz la lb b">index.html</code>文件中更新对源文件的引用，将<code class="fe ky kz la lb b">app.js</code>改为<code class="fe ky kz la lb b">app.ts</code>。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="66a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您保存这些更改时，Parcel将安装<code class="fe ky kz la lb b">typescript</code>包，并使用它将您的类型脚本代码转换为JavaScript，然后提供给浏览器。</p><h1 id="585a" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">生产建筑</h1><p id="6db0" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">当您准备好部署代码时，package有一个<code class="fe ky kz la lb b">build</code>命令可以使用。</p><p id="7c77" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们创建另一个<code class="fe ky kz la lb b">npm</code>脚本来处理我们项目中的这个问题。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8168" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您想在最终输出中包含源地图，您可以删除<code class="fe ky kz la lb b">--no-source-maps</code>标志。</p><p id="acb5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在终端上使用以下命令运行构建过程:</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="d27f" class="mo le in lb b gy mp mq l mr ms">npm run build</span></pre><p id="4713" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成后，您会在项目中找到一个新文件夹，即<code class="fe ky kz la lb b">dist</code>文件夹。在这个文件夹里，你会发现你的HTML，JavaScript和CSS的迷你版本。</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="2a60" class="mo le in lb b gy mp mq l mr ms">dist/<br/>|── index.html<br/>|── app.700f0921.js<br/>|── styles.43cd3188.css</span></pre><p id="a6c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript和CSS文件有一个哈希应用于文件名，用于缓存破坏。如果您的项目中有任何图像，这些图像也将通过随机哈希拷贝到您的输出文件夹中。</p><p id="ed51" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您看一下<code class="fe ky kz la lb b">dist</code>中的<code class="fe ky kz la lb b">index.html</code>文件，您会注意到对SCSS和JavaScript文件的引用已经被编译后的分发文件所取代，这意味着您的<code class="fe ky kz la lb b">dist</code>文件夹已经准备好发布到web服务器/内容主机。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="aab2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你会注意到在上面的代码中，HTML也被缩小了，这并不是每个人都喜欢的。幸运的是，<code class="fe ky kz la lb b">build</code>命令有很多选项来配置最终输出。</p><h1 id="d60d" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">宗地构建选项</h1><p id="026f" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">如果您已经全局安装了包，您可以使用<code class="fe ky kz la lb b">parcel build --help</code>检查所有可用的构建选项。这里有几个有用的选项，你可以考虑一下:</p><pre class="mg mh mi mj gt mk lb ml mm aw mn bi"><span id="74e4" class="mo le in lb b gy mp mq l mr ms">-d, --out-dir &lt;path&gt;  set the output directory. defaults to "dist"<br/>--no-minify           disable minification<br/>--no-source-maps      disable sourcemaps<br/>--no-content-hash     disable content hashing</span></pre><p id="fb40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果项目被部署到远程托管服务器上的不同路径，也可以选择将项目的公共URL设置为其他值。</p><h1 id="fffc" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="4db8" class="pw-post-body-paragraph ka kb in kc b kd mb kf kg kh mc kj kk kl md kn ko kp me kr ks kt mf kv kw kx ig bi translated">page使构建一个简单的静态页面变得非常简单，让您远离其他bundlers所需的所有配置，并让您快速使用您最喜欢的开发语言(例如Sass、TypeScript ),而不必自己安装所有工具。</p><p id="b798" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经看到了如何利用Sass和JavaScript模块，而不需要创建配置文件</p><p id="71d4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望你已经学会了如何:</p><ul class=""><li id="bf16" class="mw mx in kc b kd ke kh ki kl my kp mz kt na kx nb nc nd ne bi translated">将地块作为依赖项全局安装或安装在项目中</li><li id="0c3e" class="mw mx in kc b kd nf kh ng kl nh kp ni kt nj kx nb nc nd ne bi translated">使用<code class="fe ky kz la lb b">parcel serve</code>命令提供内容</li><li id="e476" class="mw mx in kc b kd nf kh ng kl nh kp ni kt nj kx nb nc nd ne bi translated">使用<code class="fe ky kz la lb b">parcel build</code>命令构建您的生产项目</li></ul><p id="b3b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你试过Parcel.js吗？你怎么想呢?在推特上让我知道<a class="ae jz" href="https://twitter.com/codebubb" rel="noopener ugc nofollow" target="_blank"> @codebubb </a></p><p id="d18e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢阅读。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting Started with Vuex 4 with Vue 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue 3开始使用Vuex 4</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-vuex-4-with-vue-3-6f3b8eecc921?source=collection_archive---------8-----------------------#2020-12-13">https://javascript.plainenglish.io/getting-started-with-vuex-4-with-vue-3-6f3b8eecc921?source=collection_archive---------8-----------------------#2020-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d9415cec26309196d0c212406b3c37d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FULd7phUwhsinJUd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@accrualbowtie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ryan Wallace</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4e17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Vuex 4处于测试阶段，可能会有变化。</strong></p><p id="d953" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex是一个流行的Vue状态管理库。</p><p id="a15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4是专为Vue 3设计的版本。</p><p id="5bb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将Vuex 4与Vue 3配合使用。</p><h1 id="45f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">装置</h1><p id="87b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以从CDN安装。</p><p id="db74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们为Vuex添加脚本标记。</p><p id="f964" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用它来编写应用程序:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="185b" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="increment"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        }<br/>      });</span><span id="3c20" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        methods: {<br/>          increment() {<br/>            this.$store.commit("increment");<br/>          }<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="aaec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们包含了Vuex的全球版本，这样我们就可以将它与HTML脚本标签一起使用。</p><p id="0368" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们用<code class="fe mt mu mv mj b">Vuex.Store</code>构造函数创建了一个商店。</p><p id="eed0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">state</code>有商店的状态。</p><p id="a009" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe mt mu mv mj b">count</code>州与伯爵。</p><p id="d42d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">mutations</code>有储存突变。</p><p id="7cb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有<code class="fe mt mu mv mj b">inctrement</code>突变方法来增加<code class="fe mt mu mv mj b">count</code>状态。</p><p id="bab1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的根Vue实例中，我们有调用<code class="fe mt mu mv mj b">this.$store.commit</code>方法来增加<code class="fe mt mu mv mj b">count</code>状态的<code class="fe mt mu mv mj b">increment</code>方法。</p><p id="f238" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有计算出的<code class="fe mt mu mv mj b">count</code>属性从存储中返回<code class="fe mt mu mv mj b">count</code>状态。</p><p id="1186" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">商店状态可通过<code class="fe mt mu mv mj b">this.$store.state</code>属性访问。</p><p id="609c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们单击increment按钮时，我们调用<code class="fe mt mu mv mj b">increment</code>方法。</p><p id="e2ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们看到<code class="fe mt mu mv mj b">count</code>状态通过computed属性更新并显示在模板中。</p><p id="ab72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须记住加上:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0361" class="mn lc iq mj b gy mo mp l mq mr">app.use(store);</span></pre><p id="df5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以便商店可以使用我们的Vue 3应用程序。</p><p id="e909" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些变化是反应性的，所以无论何时商店的状态发生变化，我们都会得到组件的最新变化。</p><h1 id="f3ba" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">吸气剂</h1><p id="9f2f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加getters来简化状态获取。</p><p id="42cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用getters来获取状态的最新值，而不是计算属性。</p><p id="cd5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要添加一个getter，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0963" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div&gt;<br/>        &lt;p v-for="d of doneTodos" :key="d.id"&gt;{{d.text}}&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          todos: [<br/>            { id: 1, text: "eat", done: true },<br/>            { id: 2, text: "sleep", done: false }<br/>          ]<br/>        },<br/>        getters: {<br/>          doneTodos: (state) =&gt; {<br/>            return state.todos.filter((todo) =&gt; todo.done);<br/>          }<br/>        }<br/>      });</span><span id="0f89" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        computed: {<br/>          ...Vuex.mapGetters(["doneTodos"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="61d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的存储中创建一个<code class="fe mt mu mv mj b">doneTodos</code> getter，并通过<code class="fe mt mu mv mj b">Vuex.mapGetters</code>方法在我们的Vue实例中使用它。</p><p id="46fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参数是带有getters名称的字符串数组。</p><p id="a1d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将计算出的属性扩展到<code class="fe mt mu mv mj b">computed</code>对象中，这样我们就可以访问组件中的。</p><p id="6469" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们呈现来自getter的项目。</p><p id="7a00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">doneTodos</code>方法具有带状态的<code class="fe mt mu mv mj b">state</code>参数。</p><p id="37f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还可以接收其他getters作为第二个参数。</p><p id="81ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2170" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div&gt;<br/>        &lt;p v-for="d of doneTodos" :key="d.id"&gt;{{d.text}}&lt;/p&gt;<br/>        &lt;p&gt;{{doneTodosCount}} done&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          todos: [<br/>            { id: 1, text: "eat", done: true },<br/>            { id: 2, text: "sleep", done: false }<br/>          ]<br/>        },<br/>        getters: {<br/>          doneTodos: (state) =&gt; {<br/>            return state.todos.filter((todo) =&gt; todo.done);<br/>          },<br/>          doneTodosCount: (state, getters) =&gt; {<br/>            return getters.doneTodos.length;<br/>          }<br/>        }<br/>      });</span><span id="7918" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        computed: {<br/>          ...Vuex.mapGetters(["doneTodos", "doneTodosCount"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="c5d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带有<code class="fe mt mu mv mj b">getters</code>对象的<code class="fe mt mu mv mj b">doneTodosCount</code> getter，该对象有我们的getter。</p><p id="ee9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用它来访问<code class="fe mt mu mv mj b">doneTodos</code> getter，用<code class="fe mt mu mv mj b">mapGetters</code>来显示，使它在我们的组件中可访问。</p><p id="d90c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们应该看到将<code class="fe mt mu mv mj b">done</code>设置为<code class="fe mt mu mv mj b">true</code>的todos，并在我们的组件中显示<code class="fe mt mu mv mj b">1 done</code>。</p><h1 id="89d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d0de" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vuex 4创建一个简单的Vue 3应用程序，包含一个简单的存储和getters。</p><p id="18f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
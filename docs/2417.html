<html>
<head>
<title>Fixing Material UI’s ClassName Mismatch for React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复React的材质UI的类名不匹配</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/fixing-material-uis-classname-mismatch-for-react-75c6c2a2c409?source=collection_archive---------1-----------------------#2020-06-22">https://javascript.plainenglish.io/fixing-material-uis-classname-mismatch-for-react-75c6c2a2c409?source=collection_archive---------1-----------------------#2020-06-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3642" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用材质UI修复React项目中不匹配类名的快速方法</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8000f902d290c5a0fc77119ad8ff8a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cmpz7MoJQfYTQ_3Vt47wqQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Warning on browser about client and server having mismatched classNames</figcaption></figure><p id="fb47" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果您曾经使用React的Material UI并试图测试它或覆盖某些类，您可能会遇到由于类名不匹配或注意到您在本地/开发服务器上看到的类名与您在另一个环境中看到的不同而导致快照失败的问题。</p><p id="247d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">虽然有解决这个问题的方法(重新渲染你的快照，忽略它，声明一些对根类名重要的东西),但是解决方法非常简单。</p><p id="44fd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">你需要什么:</strong></p><ul class=""><li id="6ee2" class="lo lp in ku b kv kw ky kz lb lq lf lr lj ls ln lt lu lv lw bi translated">反应应用程序</li><li id="f500" class="lo lp in ku b kv lx ky ly lb lz lf ma lj mb ln lt lu lv lw bi translated">@material-ui/core至少4.9的版本(我不确定这对老版本是否有效，但试试也无妨)</li><li id="0abd" class="lo lp in ku b kv lx ky ly lb lz lf ma lj mb ln lt lu lv lw bi translated">两者都有一定的知识，React，使用材质UI等。</li></ul><p id="5fb5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io">理解为什么会这样:</strong></p><p id="268c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">根据相关的UI文档，这是因为类名是不确定的，并且依赖于类名生成器。这就是为什么当您在浏览器中检查一个组件时，您会看到在dev中类名看起来像这个<code class="fe mc md me mf b">.makeStyles-root-123</code>,而在prod中完全不同，或者一个版本在客户端，另一个版本在服务器上。</p><p id="7ef3" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">对于每个环境，生成类名的规则是不同的，这就是导致差异的原因。</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="200f" class="mk ml in mf b gy mm mn l mo mp">Rules for development</span><span id="cf13" class="mk ml in mf b gy mq mn l mo mp">const sheetName = 'makeStyles';<br/>const ruleName = 'root';<br/>const identifier = 123;<br/><br/>const className = `${sheetName}-${ruleName}-${identifier}`;<br/>//generates <!-- -->.makeStyles-root-123</span><span id="7e40" class="mk ml in mf b gy mq mn l mo mp">Rules for Production</span><span id="0d16" class="mk ml in mf b gy mq mn l mo mp">const productionPrefix = 'makeStyles';<br/>const identifier = 123;<br/><br/>const className = `${productionPrefix}-${identifier}`;</span><span id="28e6" class="mk ml in mf b gy mq mn l mo mp">//generates <!-- -->.makeStyles123</span></pre><p id="14f2" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">为了解决这个问题，我们需要使类名生成器具有确定性，并且是有意义的(即去掉那些生成的随机数，使类名成为我们想要的)。</p><p id="6826" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">关于这个话题的更多细节可以在这里找到<a class="ae mr" href="https://material-ui.com/getting-started/faq/" rel="noopener ugc nofollow" target="_blank"><strong class="ku io"/></a><strong class="ku io"/>和<strong class="ku io"> </strong> <a class="ae mr" href="https://material-ui.com/styles/advanced/#class-names" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io">这里</strong> </a></p><p id="dbc4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们开始吧！</p><ol class=""><li id="4e3f" class="lo lp in ku b kv kw ky kz lb lq lf lr lj ls ln ms lu lv lw bi translated">您需要将您的应用程序根包在<code class="fe mc md me mf b">ThemeProvider</code>或<code class="fe mc md me mf b">StylesProvider</code>中，我使用主题提供者。您还需要确保在整个应用程序中只使用其中一种。</li><li id="43cd" class="lo lp in ku b kv lx ky ly lb lz lf ma lj mb ln ms lu lv lw bi translated">此外，对于造型，你需要使用<code class="fe mc md me mf b">withStyles/createStyles</code></li></ol><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="e250" class="mk ml in mf b gy mm mn l mo mp">// Example of a simple style<br/>const styles = createStyles({<br/>  root: {<br/>    display: 'flex',<br/>    flexDirection: 'column',<br/>  },  <br/>  headerTitle: {<br/>    fontSize: '14px',<br/>  },<br/>  label: {<br/>    fontSize: '14px',<br/>    width: 100<br/>   },<br/> });</span></pre><p id="0fc1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">3.然后，您必须检查您的应用程序，并为您创建的每个样式添加一个名称，如下所示。名字<strong class="ku io">得用梅这样的</strong>打头</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="c627" class="mk ml in mf b gy mm mn l mo mp">// Example of a simple style with name<br/>const styles = createStyles({<br/>  root: {<br/>    display: 'flex',<br/>    flexDirection: 'column',<br/>  },  <br/>  headerTitle: {<br/>    fontSize: '14px',<br/>  },<br/>  label: {<br/>    fontSize: '14px',<br/>    width: 100<br/>   },<br/> }, <br/>{ name: 'MuiHeaderComponent' });</span></pre><p id="d98c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这将导致生成的组件去掉随机生成的数字，如果需要，类名将被标准化并可重写。它们看起来会像这样</p><pre class="kd ke kf kg gt mg mf mh mi aw mj bi"><span id="39c2" class="mk ml in mf b gy mm mn l mo mp">.MuiHeaderComponent-root { /* … */ }<br/>.MuiHeaderComponent-headerTitle { /* … */ }<br/>.MuiHeaderComponent-label { /* … */ }</span></pre><p id="b742" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这就是解决此问题所需做的全部工作。如果这对你有用，请告诉我。如果没有，你找到了另一个解决方案，我很想听听。</p><h2 id="25f5" class="mk ml in bd mt mu mv dn mw mx my dp mz lb na nb nc lf nd ne nf lj ng nh ni nj bi translated">简单英语的JavaScript</h2><p id="7550" class="pw-post-body-paragraph ks kt in ku b kv nk jo kx ky nl jr la lb nm ld le lf nn lh li lj no ll lm ln ig bi translated">你知道我们有四种出版物吗？通过<a class="ae mr" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> plainenglish.io </strong> </a>找到他们——通过关注我们的出版物和<a class="ae mr" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io">订阅我们的YouTube频道</strong> </a> <strong class="ku io">来表达爱意吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Keyboard Shortcuts to Your Vue.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向Vue.js应用程序添加键盘快捷键</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-keyboard-shortcuts-to-your-vue-js-app-bef84afbe8aa?source=collection_archive---------0-----------------------#2019-12-17">https://javascript.plainenglish.io/how-to-add-keyboard-shortcuts-to-your-vue-js-app-bef84afbe8aa?source=collection_archive---------0-----------------------#2019-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d69c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">键盘快捷键对用户来说是一个非常方便的功能。这使得他们无需点击鼠标就能完成工作，从而提高了工作效率。通过位于<a class="ae kl" href="https://github.com/Dafrok/v-hotkey" rel="noopener ugc nofollow" target="_blank">https://github.com/Dafrok/v-hotkey</a>的V-Hotkey插件，可以很容易地将键盘快捷键处理添加到Vue.js应用程序中。</p><p id="c9ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将编写一个健身追踪器应用程序，让用户输入他们在某一天行走的距离。他们可以使用键盘快捷键来打开模式以添加条目，也可以删除最新的条目。为了启动项目，我们通过运行以下命令来运行Vue CLI:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="7a9b" class="kv kw iq kr b gy kx ky l kz la">npx @vue/cli create fitness-tracker</span></pre><p id="f3d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Vue CLI向导中，选择“手动选择功能”,然后选择Babel、Vuex、Vue路由器和CSS预处理器。</p><p id="ad3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们安装几个库。我们将安装Axios进行HTTP请求，BootstrapVue进行样式设计，V-Hotkey用于定义键盘快捷键，Moment用于格式化日期，Vue-Filter-Date-Format用于格式化日期。要安装它们，我们运行:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="3161" class="kv kw iq kr b gy kx ky l kz la">npm i axios bootstrap-vue v-hotkey vee-validate vue-filter-date-format moment</span></pre><p id="8818" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们开始编写应用程序。我们首先创建一个表单来添加和编辑他们的步行距离条目。在<code class="fe lb lc ld kr b">components</code>文件夹中创建一个名为<code class="fe lb lc ld kr b">FitnessForm.vue</code>的文件，并添加:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="f78a" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kl" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group label="Date (YYYY-MM-DD)"&gt;<br/>        &lt;ValidationProvider name="date" rules="required|date" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.date"<br/>            required<br/>            placeholder="Date"<br/>            name="date"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="d216" class="kv kw iq kr b gy le ky l kz la">      &lt;b-form-group label="Distance Walked (km)"&gt;<br/>        &lt;ValidationProvider<br/>          name="distance"<br/>          rules="required|min_value:0|max_value:9999"<br/>          v-slot="{ errors }"<br/>        &gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.distance"<br/>            required<br/>            placeholder="Distance Walked"<br/>            name="distance"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="6d55" class="kv kw iq kr b gy le ky l kz la">      &lt;b-button type="submit" variant="primary" style="margin-right: 10px"&gt;Submit&lt;/b-button&gt;<br/>      &lt;b-button type="reset" variant="danger" <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="cancel()"&gt;Cancel&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="3fda" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import * as moment from 'moment';</span><span id="7358" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  name: "FitnessForm",<br/>  mixins: [requestsMixin],<br/>  props: {<br/>    edit: Boolean,<br/>    distance: Object<br/>  },<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  methods: {<br/>    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }<br/>      const offDate = new Date(this.form.date);<br/>      const correctedDate = new Date(<br/>        offDate.getTime() + Math.abs(offDate.getTimezoneOffset() * 60000)<br/>      );</span><span id="1e4d" class="kv kw iq kr b gy le ky l kz la">const params = {<br/>        ...this.form,<br/>        date: correctedDate<br/>      };</span><span id="080b" class="kv kw iq kr b gy le ky l kz la">if (this.edit) {<br/>        await this.editDistance(params);<br/>      } else {<br/>        await this.addDistance(params);<br/>      }<br/>      const { data } = await this.getDistances();<br/>      this.$store.commit("setDistances", data);<br/>      this.$emit("saved");<br/>    },<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    }<br/>  },<br/>  watch: {<br/>    distance: {<br/>      handler(val) {<br/>        this.form = JSON.parse(JSON.stringify(val || {}));<br/>        this.form.date = moment(this.form.date).format("YYYY-MM-DD");<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="227c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个文件中，我们有一个表单让用户输入他们在每个日期行走的距离。我们使用Vee-Validate来验证我们的输入。我们使用<code class="fe lb lc ld kr b">ValidationObserver</code>组件来观察组件内部表单的有效性，使用<code class="fe lb lc ld kr b">ValidationProvider</code>来检查组件内部输入值的有效性规则。在<code class="fe lb lc ld kr b">ValidationProvider</code>中，我们为文本输入字段提供了BootstrapVue输入。在<code class="fe lb lc ld kr b">b-form-input</code>组件中。我们还添加了Vee-Validate验证，以确保用户在提交之前已经填写了日期。在<code class="fe lb lc ld kr b">distance</code>字段中，我们在<code class="fe lb lc ld kr b">rules</code>中所写的Vee-Validate的帮助下执行最小值和最大值。</p><p id="f239" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">onSubmit</code>函数中，我们通过在日期上添加时区偏移量来修正日期。根据堆栈溢出<a class="ae kl" href="https://stackoverflow.com/a/14569783/6384091" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/14569783/6384091</a>，我们只需要这个，因为我们有一个YYYY-MM-DD格式的日期。之后，我们提交数据并获取最新的数据，然后将它们放入我们的Vuex商店。然后，我们通过向<code class="fe lb lc ld kr b">Home.vue</code>组件发出<code class="fe lb lc ld kr b">saved</code>事件来关闭该模式，我们将在后面对其进行修改。</p><p id="92a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有<code class="fe lb lc ld kr b">watch</code>块来观看<code class="fe lb lc ld kr b">distance</code>道具，我们将需要它来进行编辑。如果日期存在，我们用Moment.js格式化日期，使其符合YYYY-MM-DD格式。我们这样做是为了让编辑表单为日期字段显示正确的值。我们运行<code class="fe lb lc ld kr b">JSON.stringify</code>然后<code class="fe lb lc ld kr b">JSON.parse</code>来制作<code class="fe lb lc ld kr b">distance</code>道具的深层副本，这样在保存之前我们不会修改原始道具。</p><p id="d629" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们创建一个<code class="fe lb lc ld kr b">mixins</code>文件夹，并将<code class="fe lb lc ld kr b">requestsMixin.js</code>添加到<code class="fe lb lc ld kr b">mixins</code>文件夹中。在文件中，我们添加了:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="5419" class="kv kw iq kr b gy kx ky l kz la">const APIURL = "<a class="ae kl" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="ff06" class="kv kw iq kr b gy le ky l kz la">export const requestsMixin = {<br/>  methods: {<br/>    getDistances() {<br/>      return axios.get(`${APIURL}/distances`);<br/>    },</span><span id="821b" class="kv kw iq kr b gy le ky l kz la">    addDistance(data) {<br/>      return axios.post(`${APIURL}/distances`, data);<br/>    },</span><span id="0b79" class="kv kw iq kr b gy le ky l kz la">    editDistance(data) {<br/>      return axios.put(`${APIURL}/distances/${data.id}`, data);<br/>    },</span><span id="702d" class="kv kw iq kr b gy le ky l kz la">    deleteDistance(id) {<br/>      return axios.delete(`${APIURL}/distances/${id}`);<br/>    }<br/>  }<br/>};</span></pre><p id="aff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是我们在组件中用来发出HTTP请求以获取和保存数据的函数。</p><p id="8b30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe lb lc ld kr b">Home.vue</code>中，将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="858c" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;div class="page" v-hotkey="keymap"&gt;<br/>    &lt;div class="text-center"&gt;<br/>      &lt;h1&gt;Fitness Tracker&lt;/h1&gt;<br/>      &lt;h2&gt;Keyboard Shortcuts:&lt;/h2&gt;<br/>      &lt;p&gt;<br/>        &lt;b&gt;Ctrl + Del:&lt;/b&gt; Delete the latest fitness tracker entry.<br/>        &lt;b&gt;Ctrl + Shift + A:&lt;/b&gt; Open the modal to add a fitness tracker entry.<br/>      &lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;b-button-toolbar class="button-toolbar"&gt;<br/>      &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()" variant="primary"&gt;Add Distance Walked&lt;/b-button&gt;<br/>    &lt;/b-button-toolbar&gt;</span><span id="5423" class="kv kw iq kr b gy le ky l kz la">&lt;b-table-simple responsive&gt;<br/>      &lt;b-thead&gt;<br/>        &lt;b-tr&gt;<br/>          &lt;b-th sticky-column&gt;Date&lt;/b-th&gt;<br/>          &lt;b-th&gt;Distance Walked&lt;/b-th&gt;<br/>          &lt;b-th&gt;Edit&lt;/b-th&gt;<br/>          &lt;b-th&gt;Delete&lt;/b-th&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-thead&gt;<br/>      &lt;b-tbody&gt;<br/>        &lt;b-tr v-for="d in distances" :key="d.id"&gt;<br/>          &lt;b-th sticky-column&gt;{{ new Date(d.date) | dateFormat('YYYY-MM-DD') }}&lt;/b-th&gt;<br/>          &lt;b-td&gt;{{d.distance}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openEditModal(d)"&gt;Edit&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOneWeight(d.id)"&gt;Delete&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-tbody&gt;<br/>    &lt;/b-table-simple&gt;</span><span id="98f7" class="kv kw iq kr b gy le ky l kz la">&lt;b-modal id="add-modal" title="Add Distance Walked" hide-footer&gt;<br/>      &lt;FitnessForm <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false" /&gt;<br/>    &lt;/b-modal&gt;</span><span id="e7ae" class="kv kw iq kr b gy le ky l kz la">&lt;b-modal id="edit-modal" title="Edit Distance Walked" hide-footer&gt;<br/>      &lt;FitnessForm<br/>        <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()"<br/>        <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()"<br/>        :edit="true"<br/>        :distance="selectedDistance"<br/>      /&gt;<br/>    &lt;/b-modal&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="506b" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>// @ is an alias to /src<br/>import FitnessForm from "@/components/FitnessForm.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="a8c6" class="kv kw iq kr b gy le ky l kz la">export default {<br/>  name: "home",<br/>  components: {<br/>    FitnessForm<br/>  },</span><span id="db79" class="kv kw iq kr b gy le ky l kz la">mixins: [requestsMixin],<br/>  computed: {<br/>    distances() {<br/>      return this.$store.state.distances.sort(<br/>        (a, b) =&gt; +new Date(b.date) - +new Date(a.date)<br/>      );<br/>    },<br/>    keymap() {<br/>      return {<br/>        "ctrl+del": this.deleteLatest,<br/>        "ctrl+shift+a": this.openAddModal<br/>      };<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllDistances();<br/>  },<br/>  data() {<br/>    return {<br/>      selectedDistance: {}<br/>    };<br/>  },<br/>  methods: {<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },<br/>    openEditModal(Distance) {<br/>      this.$bvModal.show("edit-modal");<br/>      this.selectedDistance = Distance;<br/>    },<br/>    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("edit-modal");<br/>      this.selectedDistance = {};<br/>    },<br/>    async deleteOneDistance(id) {<br/>      await this.deleteDistance(id);<br/>      this.getAllDistances();<br/>    },<br/>    async getAllDistances() {<br/>      const { data } = await this.getDistances();<br/>      this.$store.commit("setDistances", data);<br/>    },<br/>    deleteLatest() {<br/>      this.deleteOneDistance(this.distances[0].id);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="86b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个用BootstrapVue表显示输入数据的表。在每一行中，都有一个编辑和删除按钮来打开编辑模式并将数据传递给<code class="fe lb lc ld kr b">FitnessForm</code>，并分别删除条目。</p><p id="8749" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当页面加载时，我们通过在<code class="fe lb lc ld kr b">beforeMount</code>钩子中调用<code class="fe lb lc ld kr b">getAllDistances</code>函数来获取所有输入的数据。在<code class="fe lb lc ld kr b">getAllDistances</code>函数中，我们将所有内容都放在Vuex存储中。然后在这里，我们通过在代码的<code class="fe lb lc ld kr b">computed</code>块中放入<code class="fe lb lc ld kr b">this.$store.state.distances</code>来获得商店的最新状态。在那里，我们也按时间倒序对重量数据进行排序。</p><p id="bac9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">script</code>部分，我们用计算出的<code class="fe lb lc ld kr b">keymap</code>属性来定义快捷键组合。我们将该对象传递给<code class="fe lb lc ld kr b">v-hotkey</code>指令来启用键盘快捷键。<code class="fe lb lc ld kr b">keymap</code>属性的按键有键盘组合，值有运行的功能。所以如果我们同时按Ctrl和Delete，我们运行<code class="fe lb lc ld kr b">this.deleteLatest</code>来删除最新的条目。如果我们同时按下Ctrl、Shift和A，我们就调用<code class="fe lb lc ld kr b">this.openAddModal</code>来打开模态来添加一个新条目。</p><p id="01b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe lb lc ld kr b">App.vue</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="3020" class="kv kw iq kr b gy kx ky l kz la">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand to="/"&gt;Fitness Tracker&lt;/b-navbar-brand&gt;</span><span id="e381" class="kv kw iq kr b gy le ky l kz la">&lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="470b" class="kv kw iq kr b gy le ky l kz la">&lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path  == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2dfe" class="kv kw iq kr b gy le ky l kz la">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="a2d4" class="kv kw iq kr b gy le ky l kz la">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}</span><span id="ca70" class="kv kw iq kr b gy le ky l kz la">button,<br/>.btn.btn-primary {<br/>  margin-right: 10px !important;<br/>}</span><span id="ed01" class="kv kw iq kr b gy le ky l kz la">.button-toolbar {<br/>  margin-bottom: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="dc39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面顶部添加一个引导导航条，并添加一个<code class="fe lb lc ld kr b">router-view</code>来显示我们定义的路线。这个<code class="fe lb lc ld kr b">style</code>部分没有限定范围，所以样式将全局应用。在<code class="fe lb lc ld kr b">.page</code>选择器中，我们给页面添加一些填充。我们在剩余的<code class="fe lb lc ld kr b">style</code>代码中给按钮添加一些填充。</p><p id="3569" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe lb lc ld kr b">main.js</code>中，将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="1612" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import { required, min_value, max_value } from "vee-validate/dist/rules";<br/>import VueFilterDateFormat from "vue-filter-date-format";<br/>import VueHotkey from "v-hotkey";</span><span id="4555" class="kv kw iq kr b gy le ky l kz la">Vue.use(VueHotkey);<br/>Vue.use(VueFilterDateFormat);<br/>extend("required", required);<br/>extend("min_value", min_value);<br/>extend("max_value", max_value);<br/>extend("date", {<br/>  validate: value =&gt;<br/>    /([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/.test(value),<br/>  message: "Date must be in YYYY-MM-DD format"<br/>});<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);<br/>Vue.use(BootstrapVue);</span><span id="66f2" class="kv kw iq kr b gy le ky l kz la">Vue.config.productionTip = false;</span><span id="7210" class="kv kw iq kr b gy le ky l kz la">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="3370" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加了我们需要的所有库，包括BootstrapVue JavaScript和CSS、Vee-Validate组件以及验证规则、V-Hotkey库和Vue-Filter-Date-Format库，这些库都是为了在我们的应用程序中使用而添加的。添加了<code class="fe lb lc ld kr b">min_value</code>和<code class="fe lb lc ld kr b">max_value</code>规则来验证重量，我们制定了<code class="fe lb lc ld kr b">date</code>规则来验证日期是否为YYYY-MM-DD格式。</p><p id="11ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">router.js</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="4320" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="aadf" class="kv kw iq kr b gy le ky l kz la">Vue.use(Router);</span><span id="8a11" class="kv kw iq kr b gy le ky l kz la">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="abda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将主页包含在我们的路线中，以便用户可以看到该页面。</p><p id="c371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">store.js</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="914d" class="kv kw iq kr b gy kx ky l kz la">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="294a" class="kv kw iq kr b gy le ky l kz la">Vue.use(Vuex);</span><span id="3fe7" class="kv kw iq kr b gy le ky l kz la">export default new Vuex.Store({<br/>  state: {<br/>    distances: []<br/>  },<br/>  mutations: {<br/>    setDistances(state, payload) {<br/>      state.distances = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="21ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将我们的<code class="fe lb lc ld kr b">distances </code>状态添加到存储中，这样我们就可以在<code class="fe lb lc ld kr b">FitnessForm </code>和<code class="fe lb lc ld kr b">HomePage</code>组件的<code class="fe lb lc ld kr b">computed</code>块中观察到它。我们有<code class="fe lb lc ld kr b">setDistances</code>函数来更新<code class="fe lb lc ld kr b">distances </code>状态，我们通过调用<code class="fe lb lc ld kr b">this.$store.commit(“setDistances”, data);</code>在组件中使用它，就像我们在<code class="fe lb lc ld kr b">FitnessForm</code>中做的那样。</p><p id="ea68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe lb lc ld kr b">index.html</code>中，我们将现有代码替换为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="c11f" class="kv kw iq kr b gy kx ky l kz la">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Fitness Tracker&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-hotkey-tutorial-app doesn't work properly without<br/>        JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="61f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更改我们应用程序的标题。</p><p id="9fae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在所有的努力之后，我们可以通过运行<code class="fe lb lc ld kr b">npm run serve</code>来启动我们的app。</p><p id="05fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了启动后端，我们首先通过运行<code class="fe lb lc ld kr b">npm i json-server</code>来安装<code class="fe lb lc ld kr b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="9c31" class="kv kw iq kr b gy kx ky l kz la">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe lb lc ld kr b">db.json</code>中，将文本更改为:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="d789" class="kv kw iq kr b gy kx ky l kz la">{<br/>  "<!-- -->distances<!-- -->": [<br/>  ]<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们有了在<code class="fe lb lc ld kr b">requests.js</code>中定义的<code class="fe lb lc ld kr b">distances</code>端点。</p><p id="5e9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们得到了:</p><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/2348bb091f4149b5f2ababf39dac55bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBm-FajCDG2B7MCTzs1_-A.png"/></div></div></figure><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/f31a7b9899de112434231ab743f7cefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4jnI3LK58E1uL-9AliPGQ.png"/></div></div></figure><figure class="km kn ko kp gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/8e43b6e4934871d42f1e8cb22abe05c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZa2-zNg_GM1FULbIoJlIw.png"/></div></div></figure></div></div>    
</body>
</html>
<html>
<head>
<title>8 Common JavaScript Mistakes That You Should Avoid</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该避免的8个常见JavaScript错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/8-common-javascript-mistakes-that-you-should-avoid-bbbfe1fb9539?source=collection_archive---------0-----------------------#2020-10-01">https://javascript.plainenglish.io/8-common-javascript-mistakes-that-you-should-avoid-bbbfe1fb9539?source=collection_archive---------0-----------------------#2020-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="25dc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">几乎每个开发人员在职业生涯中都犯过哪些错误？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d915328845b2ad914bffe878969c4466.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z6Hpovi7dsfzi2wj"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@santabarbara77?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Varvara Grabova</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="99e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript是我职业生涯中迄今为止学到的最灵活的语言。然而，灵活性是一件好事吗？不完全是。这种灵活性在某种程度上会让我们感到困惑。</p><p id="1ac8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的日常工作中，我经常看到同样的错误被一遍又一遍地犯着，为了让你不陷入同样的陷阱，我将它们列在下面。</p><p id="b2b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始吧。</p><h1 id="7db1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.块级作用域</h1><p id="62bc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">看看下面的例子:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="56a5" class="mu lt iq mq b gy mv mw l mx my">function justLog(inside) {<br/>  if (inside) {<br/>    var message = ‘this is a message’;<br/>    console.log(‘Inside block:’, message);<br/>  }<br/>  <br/>  console.log(‘Outside block:’, message);<br/>}</span><span id="aff4" class="mu lt iq mq b gy mz mw l mx my">justLog(true);</span></pre><p id="14cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你认为屏幕上会打印出什么结果？</p><p id="17da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个<strong class="ky ir"> console.log </strong>记录变量<strong class="ky ir">消息</strong>，该消息在它定义的块之外。你可能认为结果会是:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3a8f" class="mu lt iq mq b gy mv mw l mx my">Inside block: this is a message<br/>error: Uncaught ReferenceError: message is not defined</span></pre><p id="0539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但事实并非如此。由于<strong class="ky ir"> var </strong>关键字的能力，正确的结果是:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="a5e9" class="mu lt iq mq b gy mv mw l mx my">Inside block: this is a message<br/>Outside block: this is a message</span></pre><p id="1387" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很困惑，不是吗？</p><p id="ddc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不再使用<strong class="ky ir"> var </strong>关键字了。相反，我使用<strong class="ky ir"> let </strong>。在我看来，<strong class="ky ir">让</strong>比<strong class="ky ir"> var </strong>更有意义。并且，你可以通过使用<strong class="ky ir"> let </strong>来避免一些常见的错误。</p><h1 id="febf" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.错误地使用“this”</h1><p id="896a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在JavaScript中，关键字<strong class="ky ir"> this </strong>有时会令人困惑。当你在没有清楚理解上下文的情况下使用这个时，它很可能不是你所期待的这个。</p><p id="8992" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尤其是当你用<strong class="ky ir">这个</strong>来回调或者闭包的时候。看一看:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="02f4" class="mu lt iq mq b gy mv mw l mx my">var Game = {<br/>  level: 1,<br/>  start: function() {<br/>    console.log(‘Start level ‘ + this.level);<br/>  },<br/>  finish: function() {<br/>    setTimeout(function() {<br/>      console.log(‘Finish level ‘ + this.level);<br/>    }, 5);<br/>  }<br/>}</span><span id="40f6" class="mu lt iq mq b gy mz mw l mx my">Game.start(); // Start level 1<br/>Game.finish(); // Finish level undefined</span></pre><p id="15f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在调用<strong class="ky ir"> Game.finish() </strong>之后，我们得到了<strong class="ky ir">未定义的</strong>作为<strong class="ky ir">本级</strong>的结果。为什么？因为我们在<strong class="ky ir"> setTimeout </strong>函数中使用了<strong class="ky ir">这个</strong>，它在<strong class="ky ir">窗口</strong>对象<strong class="ky ir">的上下文中。在那个上下文中没有变量<strong class="ky ir">级别</strong>。</strong></p><p id="ccb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用的解决方案之一是将对<strong class="ky ir">和</strong>的引用保存在一个变量中，如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="2b98" class="mu lt iq mq b gy mv mw l mx my">Game.finish = function() {<br/>  self = this;<br/>  setTimeout(function() {<br/>    console.log(‘Finish level ‘ + self.level);<br/>  }, 5);<br/>}</span></pre><h1 id="c53f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.不要使用严格模式</h1><p id="61f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用严格模式应该是经验法则。我不知道为什么有些开发人员不把这个微小但强大的声明放在文件的开头。</p><p id="64bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">‘用严’</strong>有助于去除无声的错误。</p><p id="fda2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">‘使用严格’</strong>使调试更容易。</p><p id="9c17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">‘使用严格’</strong>保护你的代码。</p><p id="9725" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">‘使用严格’</strong>防止意外赋值。</p><p id="68d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">别忘了用它。</p><h1 id="d817" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.创建意外的全局变量</h1><p id="6729" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">无论您是初级还是高级开发人员，有时都会面临内存泄漏。这是一个实际问题。</p><p id="b777" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">常见的漏洞是当您定义一个意外的全局变量时。例如:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="825c" class="mu lt iq mq b gy mv mw l mx my">function sayHello() {<br/>  message = ‘Hello’;<br/>  console.log(message);<br/>}</span></pre><p id="b883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">变量<strong class="ky ir">消息</strong>定义时没有关键字<strong class="ky ir"> let </strong>或<strong class="ky ir"> var </strong>。因此，在全局对象内部将创建一个变量<strong class="ky ir">消息</strong>。在大多数情况下，它是<strong class="ky ir">窗口</strong>对象。结果，创建了一个意外的全局变量，它没有被垃圾收集器清除。</p><p id="c7db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要解决这个问题，只需在每个JavaScript文件的开头添加<em class="na">‘use strict’</em>。它将防止意外的全局变量。</p><h1 id="5aca" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.在一个功能中处理太多任务</h1><p id="cb83" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有些开发人员喜欢在一个函数中放很多东西。如果你是他们中的一员，马上停止。</p><p id="551a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">真正的开发人员应该将长函数分解成小函数，并切中要点。编写这样的函数有一些好处:</p><ul class=""><li id="3241" class="nb nc iq ky b kz la lc ld lf nd lj ne ln nf lr ng nh ni nj bi translated">它们更容易维护。</li><li id="a2b8" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">它们更容易阅读和理解。</li><li id="dc23" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">通过将公共操作转移到单独的功能中来提高代码的可重用性。</li><li id="78ba" class="nb nc iq ky b kz nk lc nl lf nm lj nn ln no lr ng nh ni nj bi translated">调试一小段代码比调试一段复杂的长代码更容易。</li></ul><p id="f179" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，如果在一个函数中执行了多个任务，请考虑将其分成更小的任务。</p><h1 id="70ad" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.平等</h1><p id="570d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">JavaScript中我们有三种类型的等号运算符:<strong class="ky ir"> = </strong>、<strong class="ky ir"> == </strong>、<strong class="ky ir">= =</strong>。第一个用于赋值，其余的用于比较。</p><p id="1de3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript是一种灵活的语言。在其他语言中，不能将赋值运算符' = '与<strong class="ky ir"> if </strong>语句一起使用。在JavaScript中，你可以。这就是困惑发生的时候。</p><p id="cd75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f4fb" class="mu lt iq mq b gy mv mw l mx my">if (sum = 2) {<br/>  // Do something<br/>}</span></pre><p id="4d2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里没有错误语法。如果上面的的结果总是真的。虽然您打算将变量<strong class="ky ir"> sum </strong>与<strong class="ky ir"> 2 </strong>进行比较，但使用错误的运算符会导致意想不到的结果。</p><p id="f357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管为了方便起见，您可以在if语句中使用' = '，但是不要这样做。在比较的时候，总是用“==”或者“===”。</p><h1 id="258f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.不匹配的引号和花括号</h1><p id="4ea8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当把一个字符串赋给一个变量时，你输入了开始的引号，然后输入了字符串值，不知怎么的你忘记了结束的引号。避免这种错误的最好方法是同时键入左引号和右引号，然后将值放在它们之间。</p><p id="8957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b1ed" class="mu lt iq mq b gy mv mw l mx my">let message = ‘’;</span></pre><p id="0882" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相同的实现应该应用于花括号:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3755" class="mu lt iq mq b gy mv mw l mx my">function sayHello() {}</span></pre><p id="1b39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住，如果您要打开一个元素，您需要尽快关闭它。</p><h1 id="b48f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">8.未定义vs空</h1><p id="5022" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面的代码会有什么问题？</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="17d3" class="mu lt iq mq b gy mv mw l mx my">if (person !== null &amp;&amp; typeof person !== ‘undefined’) {<br/>  // Do something<br/>}</span></pre><p id="9f23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那就是如果没有定义<strong class="ky ir"> person </strong> object，就会出错。你应该改变条件的顺序。在使用一个对象之前，总是先检查它是否被定义。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7c23" class="mu lt iq mq b gy mv mw l mx my">if (typeof person !== ‘undefined’ &amp;&amp; person !== null) {<br/>  // Do something<br/>}</span></pre><h1 id="212b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="0227" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">JavaScript是一种奇怪的语言。我们经常犯的错误有时也很奇怪。记住上面的错误，避免进一步的问题。</p><p id="519a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，在你的职业生涯中没有办法避免所有的错误。作为失败者，你犯的错误越多，你就越有经验。</p><p id="9086" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望你喜欢这个故事！</p><p id="719f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你能在下面的评论中提到你作为JavaScript开发人员所犯的常见错误以及你是如何处理它们的，那就太好了。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="35c7" class="ls lt iq bd lu lv nw lx ly lz nx mb mc jw ny jx me jz nz ka mg kc oa kd mi mj bi translated">进一步阅读</h1><div class="ob oc gp gr od oe"><a href="https://medium.com/javascript-in-plain-english/11-javascript-concepts-every-web-developer-should-know-to-take-their-skills-to-the-next-level-37ef6693111a" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd ir gy z fp oj fr fs ok fu fw ip bi translated">每个Web开发人员都应该知道的11个JavaScript概念，让他们的技能更上一层楼</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">不了解这些概念，就无法掌握JavaScript。</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os kp oe"/></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/787be6c671be8d345dc786dad8729ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-sOyyG8NoRbKpCG_y4Cmw@2x.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank">Subscribe to Decoded, our official YouTube channel!</a></figcaption></figure></div></div>    
</body>
</html>
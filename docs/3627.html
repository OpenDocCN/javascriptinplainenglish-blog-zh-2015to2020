<html>
<head>
<title>Angular Deprecations — The Maze</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度贬低——迷宫</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-deprecations-the-maze-7498de672514?source=collection_archive---------8-----------------------#2020-10-13">https://javascript.plainenglish.io/angular-deprecations-the-maze-7498de672514?source=collection_archive---------8-----------------------#2020-10-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="969a" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">开发人员需要关注版本更新的不合理性。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/927d27a334348c560207defb84cb3af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q_CM-9c4-Xi6lXcj"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@syinq?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Susan Yin</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="08b6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">软件版本升级——这也是每个开发人员所期待的。他们可能受困于过时的软件或缺乏他们煞费苦心编写的解决方法，或者甚至可能是一些人对最新版本的状态问题。(相信我，这些人确实存在)。</p><p id="55de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面是Angular的反对页面的摘录。</p><p id="890d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们来看看<a class="ae ks" href="https://angular.io/guide/deprecations#deprecated-apis-and-features" rel="noopener ugc nofollow" target="_blank">这里提到的一些贬损</a>。这些可能使版本更新变得容易，或者使代码与标准同步，这样，当我们为版本升级更新代码时，它看起来是无缝的。</p><h2 id="da66" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">当前管道</strong>:</h2><p id="b6d8" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">这是其中最常见的一个。在V9中，默认货币代码“USD”已被弃用，以允许选择本地货币代码。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="ee80" class="lp lq in mo b gy ms mt l mu mv">If you need the previous behavior then set it by creating a <a class="ae ks" href="https://angular.io/api/core/DEFAULT_CURRENCY_CODE" rel="noopener ugc nofollow" target="_blank">DEFAULT_CURRENCY_CODE</a> provider in your application <a class="ae ks" href="https://angular.io/api/core/NgModule" rel="noopener ugc nofollow" target="_blank">NgModule</a>:</span><span id="9038" class="lp lq in mo b gy mw mt l mu mv">{provide: DEFAULT_CURRENCY_CODE, useValue: ‘USD’}</span></pre><h2 id="e34f" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">视图封装:</strong></h2><p id="02c1" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">组件装饰器中的封装选项通常选择下列值之一。</p><ul class=""><li id="77c1" class="mx my in kv b kw kx kz la lc mz lg na lk nb lo nc nd ne nf bi translated"><code class="fe ng nh ni mo b"><a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#Native" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.Native</a> (Deprecated)</code></li><li id="fcb5" class="mx my in kv b kw nj kz nk lc nl lg nm lk nn lo nc nd ne nf bi translated"><code class="fe ng nh ni mo b"><a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#Emulated" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.Emulated</a></code></li><li id="9fe7" class="mx my in kv b kw nj kz nk lc nl lg nm lk nn lo nc nd ne nf bi translated"><code class="fe ng nh ni mo b"><a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#None" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.None</a></code></li><li id="6a35" class="mx my in kv b kw nj kz nk lc nl lg nm lk nn lo nc nd ne nf bi translated"><code class="fe ng nh ni mo b"><a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#ShadowDom" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.ShadowDom</a></code></li></ul><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="c406" class="lp lq in mo b gy ms mt l mu mv"><a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#Native" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.Native</a> will be replaced by <a class="ae ks" href="https://angular.io/api/core/ViewEncapsulation#ShadowDom" rel="noopener ugc nofollow" target="_blank">ViewEncapsulation.ShadowDom</a></span><span id="b3e5" class="lp lq in mo b gy mw mt l mu mv">// I did dig into the angular 4/5 documentation for Native option. It is the same as ShadowDom option. — "creating a ShadowRoot for Component’s Host Element."</span></pre><h2 id="3040" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak"> /deep/、&gt; &gt; &gt;和::ng-deep </strong></h2><p id="310e" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">每当我们设置组件时，Angular有助于确保组件样式不会重叠。我们可以使用/deep/、&gt;&gt;&gt;和::ng-deep来用我们自己的样式覆盖深度嵌套的样式。但是，在这样做的时候要小心。可能有这样的情况，这可以作为一个通用的覆盖，我们可能不希望这样。</p><h2 id="1a53" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">具有反应形式的ng model</strong></h2><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="8916" class="lp lq in mo b gy ms mt l mu mv">&lt;input [formControl]="control" [(ngModel)]="value"&gt;</span></pre><p id="b262" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们都会看到的。这是一段令人困惑的代码。作为反应式表单或模板驱动表单的一部分进行编码总是更好。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="8237" class="lp lq in mo b gy ms mt l mu mv">// reactive forms<br/>&lt;input [formControl]="control"&gt;<br/>this.control.setValue('some value');</span><span id="55dd" class="lp lq in mo b gy mw mt l mu mv">// template driven forms<br/>&lt;input [(ngModel)]="value"&gt;<br/>this.value = 'some value';</span></pre><p id="f801" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们现在可以通过在导入ReactiveFormsModule时设置config选项来选择显示/隐藏此用法的警告</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="2589" class="lp lq in mo b gy ms mt l mu mv">// You can use 'never' / 'always' option to suppress/display the warnings.</span><span id="19b7" class="lp lq in mo b gy mw mt l mu mv">imports: [<br/>  ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'});<br/>]</span></pre><h2 id="89a4" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">激活路由</strong></h2><p id="585c" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">我们使用ActivatedRoute和ActivatedRouteSnapshot来获取当前的路线信息。</p><p id="6800" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="no">params</em>和<em class="no">query params</em>属性已被弃用，而分别支持paramMap和queryParamMap。</p><h2 id="4b87" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">懒惰加载模块</strong></h2><p id="26d5" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">当一个应用程序使用延迟加载模块时，我们在路由器中设置引用，如下所示</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="7449" class="lp lq in mo b gy ms mt l mu mv">const routes: Routes = [{<br/>  path: 'lazy',<br/>  loadChildren: './lazy/lazy.module#LazyModule'<br/>}];</span></pre><p id="4665" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">加载模块的新方式遵循动态模块导入语法。</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="47fd" class="lp lq in mo b gy ms mt l mu mv">const routes: Routes = [{<br/>  path: 'lazy',<br/>  loadChildren: () =&gt; import('./lazy/lazy.module').then(m =&gt; m.LazyModule)<br/>}];</span></pre><h2 id="a2e6" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak"> @ViewChild和@ContentChild查询</strong></h2><p id="dfdd" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">我们在应用程序中都使用它来获取对元素或指令的引用。改变的解释可以在<a class="ae ks" href="https://angular.io/guide/static-query-migration" rel="noopener ugc nofollow" target="_blank">这里</a>找到(我推荐阅读全文)。简而言之，下面是需要的改变</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="ed44" class="lp lq in mo b gy ms mt l mu mv">// query results available in ngOnInit<br/><a class="ae ks" href="http://twitter.com/ViewChild" rel="noopener ugc nofollow" target="_blank">@ViewChild</a>('foo', {static: true}) foo: ElementRef;</span><span id="176e" class="lp lq in mo b gy mw mt l mu mv">OR</span><span id="c77a" class="lp lq in mo b gy mw mt l mu mv">// query results available in ngAfterViewInit<br/><a class="ae ks" href="http://twitter.com/ViewChild" rel="noopener ugc nofollow" target="_blank">@ViewChild</a>('foo', {static: false}) foo: ElementRef;</span></pre><p id="b77f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这些只是让我们开始的一些反对意见。我们可以随时回头参考<a class="ae ks" href="https://angular.io/guide/deprecations" rel="noopener ugc nofollow" target="_blank">的弃用指南</a> / <a class="ae ks" href="https://update.angular.io/" rel="noopener ugc nofollow" target="_blank">更新指南</a>。当运行<em class="no"> ng update </em>命令时，有一些不推荐使用的特性得到了解决。最好是确保在我们的代码中解决所有的反对意见，以便轻松地进行迁移。</p><p id="51cd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">移民快乐！</p></div></div>    
</body>
</html>
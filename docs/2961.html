<html>
<head>
<title>Public, private, and role-based routes in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Reactä¸­çš„å…¬å…±ã€ç§æœ‰å’ŒåŸºäºè§’è‰²çš„è·¯ç”±</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/role-based-authorization-role-based-access-control-v-2-in-react-js-cb958e338f4b?source=collection_archive---------0-----------------------#2020-08-11">https://javascript.plainenglish.io/role-based-authorization-role-based-access-control-v-2-in-react-js-cb958e338f4b?source=collection_archive---------0-----------------------#2020-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/61551e7691aca825b69ad429fd779b87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QlkpHjL9Cn-kiQXap1sweA.jpeg"/></div></div></figure><p id="f319" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è€¶ï¼Œæˆ‘åˆæƒ³å‡ºäº†ä¸€ä¸ªè¶…çº§é…·çš„æ•…äº‹ï¼Œæˆ‘ç§°ä¹‹ä¸ºRBAC-V2ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘ç¬¬äºŒä¸ªå…³äºåŒä¸€ä¸»é¢˜çš„æ•…äº‹ï¼Œä¸‹é¢åˆ—å‡ºäº†ç¬¬äºŒä¸ªç‰ˆæœ¬èƒŒåçš„ä¸€äº›åŸå› ã€‚</p><ol class=""><li id="99a9" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">ç‰ˆæœ¬1ä¸æˆ‘ä»‹ç»è¿™ç§æŠ€æœ¯çš„é¡¹ç›®ç´§å¯†ç»“åˆã€‚</li><li id="5be7" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">ä¸æ”¯æŒå­/åµŒå¥—è·¯ç”±ã€‚</li><li id="00ca" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ²¡æœ‰åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰è§’è‰²çš„æŠ€æœ¯ã€‚</li><li id="04d3" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ›´æ–°è·¯å¾„è®¿é—®å¾ˆå¤æ‚ã€‚</li><li id="bb66" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">å¿…é¡»ç»´æŠ¤æ‰€æœ‰è§’è‰²çš„å…¬å…±è·¯çº¿ã€‚</li></ol><p id="ac68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ç‰ˆæœ¬2ä¸­çš„æ›´æ–°:</strong></p><ol class=""><li id="a6f8" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">æˆ‘æƒ³å‡ºäº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•ï¼Œä»¥ä¾¿æ›´å¥½åœ°æœåŠ¡äºç¤¾åŒºã€‚</li><li id="074e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ·»åŠ äº†å­/åµŒå¥—è·¯çº¿æ”¯æŒã€‚</li><li id="cece" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰è§’è‰²ï¼Œä»¥ä¾¿äºç»´æŠ¤ã€‚</li><li id="687b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">åªéœ€æ·»åŠ æˆ–åˆ é™¤è§’è‰²ï¼Œå³å¯è½»æ¾æ›´æ–°è·¯ç”±è®¿é—®ã€‚</li><li id="8e1e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">å¦‚æœæ‚¨è·³è¿‡è¯¥æƒé™ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥è‡ªåŠ¨è®¿é—®å®ƒã€‚</li></ol><p id="83cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¯¥è§£å†³æ–¹æ¡ˆä¸æˆ‘åœ¨ç‰ˆæœ¬1ä¸­ä½¿ç”¨çš„å®Œå…¨ç›¸åŒï¼Œå› æ­¤å¦‚æœæ‚¨æ²¡æœ‰æ£€æŸ¥ç‰ˆæœ¬1ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨ä»”ç»†é˜…è¯»ï¼Œè¿™æ ·æ‚¨å¯ä»¥æ›´å¥½åœ°äº†è§£åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆâ€¦</p><div class="lk ll gp gr lm ln"><a href="https://medium.com/@umairkz52/role-based-authorization-role-based-access-control-in-react-js-65c05a372ca8" rel="noopener follow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd ir gy z fp ls fr fs lt fu fw ip bi translated">åŸºäºè§’è‰²çš„æˆæƒ| | react . jsä¸­åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">åœ¨æˆ‘æœ€è¿‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘çš„ä»»åŠ¡æ˜¯å®ç°åŸºäºè§’è‰²çš„æˆæƒ/è®¿é—®æ§åˆ¶</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">medium.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb jw ln"/></div></div></a></div><blockquote class="mc md me"><p id="91c1" class="jy jz mf ka b kb kc kd ke kf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku kv ij bi translated"><strong class="ka ir">è¿™ä¸ªæƒ³æ³•æ˜¯ç®€å•åœ°é˜²æ­¢åº”ç”¨ç¨‹åºç”Ÿæˆä¸å¿…è¦çš„è·¯çº¿ï¼Œ</strong> <strong class="ka ir">è€Œä¸æ˜¯æ£€æŸ¥æ¯ä¸ªè·¯çº¿ä¸Šçš„è§’è‰²å¹¶æ˜¾ç¤ºå›é€€ç”¨æˆ·ç•Œé¢ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æƒ³æ³•ï¼Œåªç”Ÿæˆç”¨æˆ·æœ‰æƒè®¿é—®çš„è·¯çº¿ï¼Œæ‰€ä»¥å¦‚æœç”¨æˆ·æ‰‹åŠ¨å¯¼èˆªåˆ°ä¸€ä¸ªè·¯çº¿ï¼Œå³:(åœ¨åœ°å€æ ä¸­é”®å…¥)ä»–/å¥¹ä¼šå¾—åˆ°404æœªæ‰¾åˆ°å±å¹•ï¼Œå› ä¸ºè·¯çº¿æ²¡æœ‰æ³¨å†Œã€‚</strong></p></blockquote><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/666101952345625660f0944c24a26cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qhJ0FI5M4CPNjRlCXZwekg.jpeg"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">ğŸ™‹ğŸ»â€â™‚ï¸ Stop Stop Stop</figcaption></figure><h1 id="8327" class="ms mt iq bd mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np bi translated">ä½ åœ¨è¯´ä»€ä¹ˆï¼Ÿ<br/>è¿™çœŸçš„å¯èƒ½å—ï¼Ÿ<br/>å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå¦‚ä½•ï¼Ÿ</h1><p id="34eb" class="pw-post-body-paragraph jy jz iq ka b kb nq kd ke kf nr kh ki kj ns kl km kn nt kp kq kr nu kt ku kv ij bi translated">æ˜¯çš„ï¼Œè¿™æ˜¯å¯èƒ½çš„ï¼Œå¦‚æœä½ å¬è¯´è¿‡<a class="ae nv" href="https://reactrouter.com/web/guides/philosophy" rel="noopener ugc nofollow" target="_blank"> react-router 4çš„ç†å¿µ</a>å®ƒæ”¯æŒåŠ¨æ€è·¯ç”±ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒã€‚</p><blockquote class="mc md me"><p id="48aa" class="jy jz mf ka b kb kc kd ke kf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku kv ij bi translated">å½“æˆ‘ä»¬è¯´åŠ¨æ€è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå‘ˆç°æ—¶å‘ç”Ÿçš„è·¯ç”±ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¹‹å¤–çš„é…ç½®æˆ–çº¦å®šä¸­ã€‚</p></blockquote></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div class="gh gi od"><img src="../Images/163a0955f049e30328bd288f57a12f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*v_aO-_Rc8O-aV3Rtbb1htw.jpeg"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">Letâ€™s start</figcaption></figure><p id="19bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">æ­¥éª¤#1 <br/> </strong>å› ä¸ºæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾åŸºäºè§’è‰²çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å…ˆå®šä¹‰è§’è‰²ï¼Œè§’è‰²åªæ˜¯ä¸€ä¸ªæ™®é€šçš„javascriptå¯¹è±¡ï¼Œå…·æœ‰é”®å€¼å¯¹ï¼Œ<strong class="ka ir">ä¸‹é¢æ˜¯æˆ‘çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºçš„å ä½ç¬¦è§’è‰²ï¼Œæ‚¨å¯ä»¥ç”¨è‡ªå·±çš„è§’è‰²æ¥æ›¿æ¢å®ƒä»¬</strong>ã€‚</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/1e739661e5537507ff87d6bf01c74b3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggD1Qo-ESphpwUNtMG8bgw.jpeg"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">User Roles</figcaption></figure><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="6864" class="ok mt iq og b gy ol om l on oo">File: src/config/Roles</span><span id="0174" class="ok mt iq og b gy op om l on oo"><strong class="og ir">export default </strong>{<br/> <strong class="og ir">SUPER_ADMIN</strong>: <strong class="og ir">'SUPER_ADMIN'</strong>,<br/> <strong class="og ir">ADMIN</strong>: <strong class="og ir">'ADMIN'</strong>,<br/> <strong class="og ir">MANAGER</strong>: <strong class="og ir">'MANAGER'</strong>,<br/> <strong class="og ir">CUSTOMER</strong>: <strong class="og ir">'CUSTOMER'</strong>,<br/> <strong class="og ir">GUEST</strong>: <strong class="og ir">'GUEST'<br/></strong>};</span></pre></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="6a8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">æ­¥éª¤#2 </strong> <br/>å®šä¹‰ç§æœ‰è·¯ç”±é…ç½®ï¼Œr <em class="mf"> oute configå¯¹è±¡æ”¯æŒreact-routerçš„æ‰€æœ‰è·¯ç”±ç»„ä»¶å±æ€§ä»¥åŠä¸€äº›é™„åŠ å±æ€§ï¼Œå³:</em> <strong class="ka ir"> <em class="mf">ã€æ ‡é¢˜ã€æƒé™ã€å­©å­ã€‘</em> </strong> <em class="mf">æ‚¨å¯ä»¥åœ¨configå¯¹è±¡ä¸­æ·»åŠ æˆ–åˆ é™¤å±æ€§ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯è¶…çº§å¯å®šåˆ¶çš„ï¼Œæ”¯æŒå¤šè¾¾Nä¸ªåµŒå¥—ï¼Œå­è·¯ç”±å¿…é¡»éµå¾ªç›¸åŒçš„çˆ¶å½¢çŠ¶ï¼Œè¿™æ„å‘³ç€configå¯¹è±¡å¯¹äºå­è·¯ç”±å’Œçˆ¶è·¯ç”±éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ²¡æœ‰é™„åŠ å…³é”®å­—ã€‚</em></p><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="807f" class="ok mt iq og b gy ol om l on oo">File: src/config/PrivateRoutesConfig</span><span id="ab03" class="ok mt iq og b gy op om l on oo"><strong class="og ir">import </strong>{ Roles } <strong class="og ir">from 'config'<br/><br/></strong><em class="mf">// Components<br/></em><strong class="og ir">import </strong>{<br/> Module1,<br/> Module2,<br/> Module3,<br/> ModuleN,<br/> ModuleNChild1,<br/> ModuleNChild2,<br/> ModuleNChild3,<br/> Dashboard,<br/> Profile,<br/>} <strong class="og ir">from 'components'</strong>;<br/><br/><em class="mf">// </em><strong class="og ir"><em class="mf">TODO:<br/></em></strong><em class="mf">/*<br/>* 1. Make title optional<br/>* 2. Make title multi type support ie: (string, node, react element)<br/>* */<br/><br/></em><strong class="og ir">export default </strong>[<br/> {<br/>  <strong class="og ir">component</strong>: Module1,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Module - 1'</strong>,<br/>  <strong class="og ir">exact</strong>: <strong class="og ir">true</strong>,<br/> },<br/> {<br/>  <strong class="og ir">component</strong>: Module2,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/module-2'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Module - 2'</strong>,<br/> },<br/> {<br/>  <strong class="og ir">component</strong>: Module3,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/module-3'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Module - 3'</strong>,<br/> },<br/> {<br/>  <strong class="og ir">component</strong>: ModuleN,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/module-n'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Module - N'</strong>,<br/>  <strong class="og ir">permission</strong>: [<br/>   Roles.<strong class="og ir">SUPER_ADMIN</strong>,<br/>   Roles.<strong class="og ir">ADMIN</strong>,<br/>   Roles.<strong class="og ir">MANAGER<br/>  </strong>],<br/>  <strong class="og ir">children</strong>: [<br/>   {<br/>    <strong class="og ir">component</strong>: ModuleNChild1,<br/>    <strong class="og ir">path</strong>: <strong class="og ir">'/child-1'</strong>,<br/>    <strong class="og ir">title</strong>: <strong class="og ir">'Child - 1'</strong>,<br/>   },<br/>   {<br/>    <strong class="og ir">component</strong>: ModuleNChild2,<br/>    <strong class="og ir">path</strong>: <strong class="og ir">'/child-2'</strong>,<br/>    <strong class="og ir">title</strong>: <strong class="og ir">'Child - 2'</strong>,<br/>   },<br/>   {<br/>    <strong class="og ir">component</strong>: ModuleNChild3,<br/>    <strong class="og ir">path</strong>: <strong class="og ir">'/child-3'</strong>,<br/>    <strong class="og ir">title</strong>: <strong class="og ir">'Child - 3'</strong>,<br/>    <strong class="og ir">permission</strong>: [<br/>     Roles.<strong class="og ir">SUPER_ADMIN</strong>,<br/>     Roles.<strong class="og ir">ADMIN<br/>    </strong>]<br/>   }<br/>  ]<br/> },<br/> {<br/>  <strong class="og ir">component</strong>: Dashboard,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/dashboard'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Dashboard'</strong>,<br/>  <strong class="og ir">permission</strong>: [<br/>   Roles.<strong class="og ir">SUPER_ADMIN</strong>,<br/>   Roles.<strong class="og ir">ADMIN</strong>,<br/>  ],<br/> },<br/> {<br/>  <strong class="og ir">component</strong>: Profile,<br/>  <strong class="og ir">path</strong>: <strong class="og ir">'/profile'</strong>,<br/>  <strong class="og ir">title</strong>: <strong class="og ir">'Profile'</strong>,<br/>  <strong class="og ir">permission</strong>: [<br/>   Roles.<strong class="og ir">SUPER_ADMIN</strong>,<br/>   Roles.<strong class="og ir">ADMIN</strong>,<br/>   Roles.<strong class="og ir">MANAGER</strong>,<br/>   Roles.<strong class="og ir">CUSTOMER<br/>  </strong>],<br/> },<br/>]</span></pre></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="98e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å·²ç»å®Œæˆäº†é…ç½®ã€‚</p><p id="7e4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å®Œæˆäº†ä»€ä¹ˆï¼Ÿ</p><p id="ff90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€ä¸ªæ˜¯<strong class="ka ir">è§’è‰²</strong>å¦ä¸€ä¸ªæ˜¯<strong class="ka ir">ç§æœé˜µï¼Œ</strong>å¯¹å§ï¼ŸğŸ¤”ğŸ¤”ğŸ¤”è€¶æ–¯<br/>ğŸ†—æ‰€ä»¥ï¼Œæ˜¯æ—¶å€™è¿›å…¥ä»£ç äº†â€¦</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/7e74d54b5a3737ef525c4926631fa3f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*oXiTFekPWg4p-dzPldW-pg.gif"/></div></figure><p id="0e53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ç¬¬ä¸‰æ­¥</strong></p><p id="ec1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºåƒæˆ‘ä»¬çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºä¸€æ ·æ”¯æŒå¤šä¸ªè§’è‰²ï¼Œè®©æˆ‘ä»¬ç”¨ç”¨æˆ·è§’è‰²æˆ–å¤šä¸ªè§’è‰²æ¥è¿‡æ»¤ç§æœ‰è·¯ç”±</p><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="80c3" class="ok mt iq og b gy ol om l on oo">File: src/utils/index</span><span id="6d49" class="ok mt iq og b gy op om l on oo"><strong class="og ir">import </strong>{ <em class="mf">intersection </em>} <strong class="og ir">from 'lodash'</strong>;<br/><br/><strong class="og ir">export function </strong><em class="mf">isArrayWithLength</em>(arr) {<br/> <strong class="og ir">return </strong>(<strong class="og ir"><em class="mf">Array</em></strong>.isArray(arr) &amp;&amp; arr.<strong class="og ir">length</strong>)<br/>}<br/><br/><strong class="og ir">export function </strong><em class="mf">getAllowedRoutes</em>(routes) {<br/> <strong class="og ir">const </strong>roles = <strong class="og ir"><em class="mf">JSON</em></strong>.parse(<strong class="og ir"><em class="mf">localStorage</em></strong>.getItem(<strong class="og ir">'roles'</strong>));<br/> <strong class="og ir">return </strong>routes.filter(({ permission }) =&gt; {<br/>  <strong class="og ir">if</strong>(!permission) <strong class="og ir">return true</strong>;<br/>  <strong class="og ir">else if</strong>(!<em class="mf">isArrayWithLength</em>(permission)) <strong class="og ir">return true</strong>;<br/>  <strong class="og ir">else return </strong><em class="mf">intersection</em>(permission, roles).<strong class="og ir">length</strong>;<br/> });<br/>}</span></pre><p id="0159" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå®ç”¨æ–¹æ³•<strong class="ka ir"><em class="mf">getAllowedRoutes</em></strong><em class="mf"/>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­ä¼ é€’Routesæ•°ç»„ï¼Œå®ƒå°†è¿”å›è¿‡æ»¤åçš„routesæ•°ç»„ï¼Œå¹¶å°†è¯¥æ•°ç»„ä¼ é€’ç»™routesæ˜ å°„ç»„ä»¶</p><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="4e11" class="ok mt iq og b gy ol om l on oo">File: src/routes/<em class="mf">PrivateRoutes</em></span><span id="57fc" class="ok mt iq og b gy op om l on oo"><strong class="og ir">import </strong>React, { <strong class="og ir"><em class="mf">Fragment </em></strong>} <strong class="og ir">from 'react'</strong>;<br/><strong class="og ir">import </strong>{ <em class="mf">Redirect</em>, <em class="mf">useRouteMatch </em>} <strong class="og ir">from 'react-router-dom'</strong>;<br/><strong class="og ir">import </strong>{ getAllowedRoutes, isLoggedIn } <strong class="og ir">from 'utils'</strong>;<br/><strong class="og ir">import </strong>{ PrivateRoutesConfig } <strong class="og ir">from 'config'</strong>;<br/><strong class="og ir">import </strong>{ TopNav } <strong class="og ir">from 'components/common'</strong>;<br/><strong class="og ir">import </strong>MapAllowedRoutes <strong class="og ir">from 'routes/MapAllowedRoutes'</strong>;<br/><br/><strong class="og ir">function </strong><em class="mf">PrivateRoutes</em>() {<br/> <strong class="og ir">const </strong>match = <em class="mf">useRouteMatch</em>(<strong class="og ir">'/app'</strong>);<br/> <strong class="og ir">let </strong>allowedRoutes = [];<br/><br/> <strong class="og ir">if </strong>(isLoggedIn()) {<br/>   allowedRoutes = getAllowedRoutes(PrivateRoutesConfig);<br/> } <strong class="og ir">else </strong>{<br/>   return &lt;<strong class="og ir">Redirect</strong> to="/" /&gt;;<br/> }<br/><br/> <strong class="og ir">return </strong>(<br/>  &lt;<strong class="og ir">Fragment</strong>&gt;<br/>   &lt;<strong class="og ir">TopNav <br/>     routes=</strong>{allowedRoutes} <br/>     <strong class="og ir">path=</strong>{match.<strong class="og ir">path</strong>}<br/>     <strong class="og ir">className="bg-white" <br/>   </strong>/&gt;<br/>   &lt;<strong class="og ir">MapAllowedRoutes <br/>     routes=</strong>{allowedRoutes} <br/>     <strong class="og ir">basePath="/app" <br/>     isAddNotFound <br/>   </strong>/&gt;<br/>  &lt;/<strong class="og ir">Fragment</strong>&gt;<br/> );<br/>}<br/><br/><strong class="og ir">export default </strong><em class="mf">PrivateRoutes</em>;</span></pre><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/246d9eebdb04b344b91559984a4ff01b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*ScCh5KRj6zD7-LAu-T4S4Q.jpeg"/></div></figure></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="602c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">æ­¥éª¤#4 <br/> </strong>ç°åœ¨ï¼Œæœ€åä¸€æ­¥æ˜¯æ¸²æŸ“è¿‡æ»¤åçš„è·¯ç”±ï¼Œæˆ‘å·²ç»ä¸ºæ­¤åˆ›å»ºäº†ä¸€ä¸ªç»„ä»¶ï¼Œå› æ­¤ç›¸åŒçš„ç»„ä»¶ç”¨äºæ¸²æŸ“çˆ¶è·¯ç”±å’Œå­è·¯ç”±ï¼Œè¯¥ç»„ä»¶éœ€è¦è¿‡æ»¤åçš„è·¯ç”±æ•°ç»„å’ŒåŸºæœ¬è·¯å¾„ä½œä¸ºå±æ€§ã€‚</p><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="c8ff" class="ok mt iq og b gy ol om l on oo">File: src/routes/MapAllowedRoutes</span><span id="c7de" class="ok mt iq og b gy op om l on oo"><strong class="og ir">import </strong>React, { <em class="mf">memo </em>} <strong class="og ir">from 'react'</strong>;<br/><strong class="og ir">import </strong>{ <strong class="og ir"><em class="mf">Switch</em></strong>, <strong class="og ir"><em class="mf">Route</em></strong>, <em class="mf">useRouteMatch </em>} <strong class="og ir">from 'react-router-dom'</strong>;<br/><strong class="og ir">import </strong>{ NotFound } <strong class="og ir">from 'components/common'</strong>;<br/><br/><em class="mf">/*<br/>* This is the route utility component used for generating<br/>* routes and child routes it only requires routes array and basePath<br/>*/</em></span><span id="1376" class="ok mt iq og b gy op om l on oo"><strong class="og ir">function </strong>MapAllowedRoutes({routes, basePath, isAddNotFound}) {<br/> <strong class="og ir">const </strong>match = <em class="mf">useRouteMatch</em>(basePath);<br/> <strong class="og ir">return </strong>(<br/>  &lt;<strong class="og ir">Switch</strong>&gt;<br/>   {routes.map((route) =&gt; {<br/><em class="mf"><br/>    </em><strong class="og ir">const </strong>{ <br/>     path, <br/>     <strong class="og ir">component</strong>: Component,<br/>     children, <br/>     title,<br/>     permission,<br/>     ...rest <br/>    } = route;</span><span id="a427" class="ok mt iq og b gy op om l on oo">    <strong class="og ir">return </strong>(<br/>     &lt;<strong class="og ir">Route<br/>      </strong>{...rest}<br/>      <strong class="og ir">key=</strong>{path}<br/>      <strong class="og ir">path=</strong>{<strong class="og ir">`</strong>${match.<strong class="og ir">path</strong>}${path}<strong class="og ir">`</strong>}<br/>     &gt;<br/>      &lt;<strong class="og ir">Component children=</strong>{children} /&gt;<br/>     &lt;/<strong class="og ir">Route</strong>&gt;<br/>    )<br/>   })}<br/>    {isAddNotFound &amp;&amp; &lt;<strong class="og ir">Route</strong>&gt;&lt;<strong class="og ir">NotFound </strong>/&gt;&lt;/<strong class="og ir">Route</strong>&gt;}<br/>  &lt;/<strong class="og ir">Switch</strong>&gt;<br/> )<br/>}<br/><br/><strong class="og ir">export default </strong><em class="mf">memo</em>(MapAllowedRoutes);</span></pre><p id="8a9e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä½ è§è¿‡ğŸ‘€åœ¨<em class="mf"> PrivateRoutes </em>ä¸­ï¼Œæˆ‘ä»¬åˆšåˆšä½¿ç”¨åœ¨<strong class="ka ir">æ­¥éª¤#3 </strong>ä¸­åˆ›å»ºçš„<strong class="ka ir"><em class="mf">getAllowedRoutes</em></strong>å®ç”¨ç¨‹åºæ–¹æ³•è¿‡æ»¤äº†ç§æœ‰è·¯ç”±ï¼Œå¹¶å°†è¿‡æ»¤åçš„è·¯ç”±æ•°ç»„ä¼ é€’åˆ°è·¯ç”±æ˜ å°„å™¨ç»„ä»¶ä¸­ï¼Œè·¯ç”±æ˜ å°„å™¨åªæ˜¯ä¸€ä¸ªå¯é‡ç”¨ç»„ä»¶ï¼Œç”¨äºè·¯ç”±æ•°ç»„ä¸Šçš„åœ°å›¾ã€‚</p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="6b34" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å®Œæˆäº†è·¯ç”±ã€‚</p><p id="8ad4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœæˆ‘å°†æ‚¨çš„ä¸»å¯¼èˆªä¸è·¯çº¿åŒæ­¥ï¼Œæ‚¨è§‰å¾—å¦‚ä½•ï¼ŸğŸ¤”</p><p id="1f13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é‚£å¤ªæ£’äº†ã€‚<br/>ğŸ˜</p><p id="28f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™æ˜¯ä»£ç </p><pre class="mk ml mm mn gt of og oh oi aw oj bi"><span id="71af" class="ok mt iq og b gy ol om l on oo">File: src/components/common/TopNav</span><span id="2721" class="ok mt iq og b gy op om l on oo"><strong class="og ir">import </strong>React, { <em class="mf">memo </em>} <strong class="og ir">from 'react'</strong>;<br/><strong class="og ir">import </strong>{ Button } <strong class="og ir">from 'react-bootstrap'</strong>;<br/><strong class="og ir">import </strong>PropTypes <strong class="og ir">from 'prop-types'</strong>;<br/><strong class="og ir">import </strong>{ <strong class="og ir"><em class="mf">Link</em></strong>, <em class="mf">useHistory </em>} <strong class="og ir">from "react-router-dom"</strong>;<br/><strong class="og ir">import </strong>{ isLoggedIn } <strong class="og ir">from 'utils'</strong>;<br/><br/><strong class="og ir">function </strong>TopNav(props) {<br/> <strong class="og ir">let </strong>history = <em class="mf">useHistory</em>();<br/><br/> <strong class="og ir">function </strong>handleLogout() {<br/>  <strong class="og ir"><em class="mf">localStorage</em></strong>.removeItem(<strong class="og ir">'roles'</strong>);<br/>  history.push(<strong class="og ir">'/'</strong>);<br/> }<br/><br/> <strong class="og ir">return </strong>(<br/>  &lt;<strong class="og ir">div className=</strong>{<strong class="og ir">`w3-bar w3-padding w3-card </strong>${props.<strong class="og ir">className</strong>}<strong class="og ir">`</strong>} &gt;<br/>   &lt;<strong class="og ir">div className="w3-display-topleft w3-padding-large w3-xlarge"</strong>&gt;<br/>    RBAC-V2<br/>   &lt;/<strong class="og ir">div</strong>&gt;<br/>   &lt;<strong class="og ir">div className="w3-right"</strong>&gt;<br/>    {props.<strong class="og ir">routes</strong>.map(({ path, title }) =&gt; (<br/>     &lt;<strong class="og ir">Link <br/>       key=</strong>{path} <br/>       <strong class="og ir">className="w3-bar-item" <br/>       to=</strong>{<strong class="og ir">`</strong>${props.<strong class="og ir">prefix</strong>}${path}<strong class="og ir">`</strong>}<br/>     &gt;<br/>       {title}<br/>     &lt;/<strong class="og ir">Link</strong>&gt;<br/>    ))}<br/>    {isLoggedIn() &amp;&amp; &lt;<strong class="og ir">Button onClick=</strong>{handleLogout}&gt;Logout&lt;/<strong class="og ir">Button</strong>&gt; }<br/>   &lt;/<strong class="og ir">div</strong>&gt;<br/>  &lt;/<strong class="og ir">div</strong>&gt;<br/> );<br/>}<br/><br/>TopNav.<strong class="og ir">propTypes </strong>= {<br/> <strong class="og ir">routes</strong>: PropTypes.<strong class="og ir">arrayOf</strong>(<br/>  PropTypes.shape({<br/>   <strong class="og ir">path</strong>: PropTypes.<strong class="og ir">string</strong>.<strong class="og ir">isRequired</strong>,<br/>   <strong class="og ir">title</strong>: PropTypes.<strong class="og ir">string</strong>.<strong class="og ir">isRequired<br/>  </strong>})<br/> ).<strong class="og ir">isRequired</strong>,<br/> <strong class="og ir">prefix</strong>: PropTypes.<strong class="og ir">string</strong>,<br/> <strong class="og ir">className</strong>: PropTypes.<strong class="og ir">string<br/></strong>};<br/><br/>TopNav.<strong class="og ir">defaultProps </strong>={<br/> <strong class="og ir">prefix</strong>: <strong class="og ir">''</strong>,<br/> <strong class="og ir">className</strong>: <strong class="og ir">''<br/></strong>};<br/><br/><strong class="og ir">export default </strong><em class="mf">memo</em>(TopNav);</span></pre><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/b60ae72e92023c77d8047c486d4fbced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*Hy9rlEwUrlpgigRt15lMSA.jpeg"/></div></figure><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ot"><img src="../Images/9827c44d956844ced5e1a6866cce6e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzW2ZNXwIkibK4ojn1B-vQ.jpeg"/></div></div></figure><h2 id="a660" class="ok mt iq bd mu ou ov dn my ow ox dp nc kj oy oz ng kn pa pb nk kr pc pd no pe bi translated"><strong class="ak">å¥½å¤„</strong></h2><ol class=""><li id="ed85" class="kw kx iq ka b kb nq kf nr kj pf kn pg kr ph kv lb lc ld le bi translated">ä»…åœ¨çˆ¶è·¯ç”±å‘ˆç°æ—¶æ£€æŸ¥ä¸€æ¬¡è·¯ç”±è®¿é—®</li><li id="7199" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">ä»…ç”Ÿæˆç”¨æˆ·æœ‰æƒè®¿é—®çš„è·¯çº¿</li><li id="f2ae" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">ä¸­å¿ƒè§’è‰²å’Œä¸“ç”¨è·¯ç”±é…ç½®æ–‡ä»¶</li><li id="fe0c" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ˜“äºæ·»åŠ /åˆ é™¤è§’è‰²</li><li id="cd55" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">æ˜“äºæ·»åŠ /åˆ é™¤ç”¨æˆ·è§’è‰²çš„è·¯ç”±è®¿é—®æƒé™</li><li id="ab58" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">è·¯çº¿å’Œå¯¼èˆªä¹‹é—´çš„åŒæ­¥</li><li id="488c" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">å•ä¸€+å¤šé‡è§’è‰²æ”¯æŒ</li></ol><h2 id="07f5" class="ok mt iq bd mu ou ov dn my ow ox dp nc kj oy oz ng kn pa pb nk kr pc pd no pe bi translated">ç»“è®º</h2><p id="a398" class="pw-post-body-paragraph jy jz iq ka b kb nq kd ke kf nr kh ki kj ns kl km kn nt kp kq kr nu kt ku kv ij bi translated">è¿™æ˜¯ä¸€ç§æ˜“äºç»´æŠ¤ä¸”å¯æ‰©å±•çš„æ–¹æ³•ï¼Œç”¨äºå®ç°åŸºäºè§’è‰²çš„è·¯çº¿è®¿é—®ï¼Œä»¥åŠæ”¯æŒå¤šè§’è‰²å’ŒåµŒå¥—è·¯çº¿çš„å¯¼èˆª</p><h2 id="78ff" class="ok mt iq bd mu ou ov dn my ow ox dp nc kj oy oz ng kn pa pb nk kr pc pd no pe bi translated">é“¾æ¥</h2><p id="413e" class="pw-post-body-paragraph jy jz iq ka b kb nq kd ke kf nr kh ki kj ns kl km kn nt kp kq kr nu kt ku kv ij bi translated">github:<a class="ae nv" href="https://github.com/umair-khanzada/role-based-access-control" rel="noopener ugc nofollow" target="_blank">https://github.com/umair-khanzada/role-based-access-control</a><br/>æ¼”ç¤ºApp:<a class="ae nv" href="https://umair-khanzada.github.io/role-based-access-control/" rel="noopener ugc nofollow" target="_blank">https://umair-khanzada.github.io/role-based-access-control</a></p></div></div>    
</body>
</html>
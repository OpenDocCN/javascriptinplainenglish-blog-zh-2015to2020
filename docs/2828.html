<html>
<head>
<title>What is Oauth? And Why? Explained in Simple English</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oauth是什么？为什么呢？用简单的英语解释</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/oauth-explained-in-simple-terms-aebec8fcf66d?source=collection_archive---------11-----------------------#2020-07-27">https://javascript.plainenglish.io/oauth-explained-in-simple-terms-aebec8fcf66d?source=collection_archive---------11-----------------------#2020-07-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="86ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击“使用谷歌登录”按钮可以在幕后做很多事情。这是一个复杂的话题，但我会为你简化它。😎</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/67ca74a0aa643ce19dc93fc6ead8fb1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJjUMM6E_1A6agtdRbPGkg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Choosing a sign-in option can be colourful :)</figcaption></figure><h1 id="056c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">那么Oauth是什么？</h1><p id="3e30" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">简而言之，Oauth是一种通过第三方服务登录应用的方式。看到那些花里胡哨的<code class="fe me mf mg mh b">sign in with Google</code> <code class="fe me mf mg mh b">sign in with Facebook</code>按钮了吗？点击这些按钮将允许您通过Oauth登录网站！</p><p id="28c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Oauth允许我们做的不仅仅是认证。我们可以代表用户执行操作。还记得那些可以代表你张贴在你的脸书墙上的应用吗？或者在您的Google日历上添加一个新事件？Oauth使这些集成成为可能。</p><h1 id="a260" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为什么是Oauth？传统的登录系统有什么问题？</h1><p id="af00" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">传统上，我们通过在登录表单上输入凭据来登录网站，并将其提交给网站的服务器。该网站将我们的凭据存储在本地数据库中。事情是这样的:我们基本上相信网站会为我们安全地存储凭证。</p><p id="c472" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果这个网站碰巧使用了过时的安全标准或者有漏洞，那么你的证书很有可能会被泄露(<a class="ae mi" href="https://www.cybintsolutions.com/cyber-security-facts-stats/" rel="noopener ugc nofollow" target="_blank">网络漏洞比你想象的还要普遍</a>)。</p><p id="fe99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，通过使用Oauth，我们实际上是将这些安全问题委托给脸书或谷歌等科技巨头，以确保我们的凭证安全。作为网站所有者，让我们的用户通过Oauth登录是一个好主意，因为我们希望最大限度地降低泄露用户数据的风险。</p><p id="9d5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一方面，这可能意味着我们正在将客户的数据交给这些巨头。根据我们开发应用的方式，会有一些隐私方面的影响，例如，针对客户的更有针对性或“个性化”的广告。为了使用这些“免费”服务，网站所有者必须付出代价。</p><p id="92a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Oauth有几个变体。我将以脸书为例。请注意，我在这里描述的Oauth流仅仅是概念的演示。它可能与脸书使用的实际Oauth流程不同。有关实现，请参考脸书开发人员文档。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="797b" class="lb lc iq bd ld le mq lg lh li mr lk ll lm ms lo lp lq mt ls lt lu mu lw lx ly bi translated">那么Oauth是如何在幕后工作的呢？</h1><p id="314c" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们的旅程从浏览器开始。有关Oauth术语的列表，请参考下面的关键术语部分。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/9e2d8ddc92cf43c148ba63371b1998e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F347gsnckdAEWctwQDbTlA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Image by Author</figcaption></figure><ol class=""><li id="00d8" class="mw mx iq jp b jq jr ju jv jy my kc mz kg na kk nb nc nd ne bi translated">你访问一个网站。你点击了<code class="fe me mf mg mh b">Login with Facebook</code>按钮。</li></ol><p id="efd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是应用程序试图从脸书请求一个<code class="fe me mf mg mh b">authorisation token</code>的地方。只有当用户在步骤#2中点击<code class="fe me mf mg mh b">ok</code>后，脸书才会发出<code class="fe me mf mg mh b">authorisation token</code>。<code class="fe me mf mg mh b">Authorisation Token</code>将在以后消耗以换取<code class="fe me mf mg mh b">access token</code>。</p><p id="130f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.该按钮会将您重定向到脸书的登录页面。重定向有效载荷通常包含其他元数据，例如<code class="fe me mf mg mh b">app_id</code>、<code class="fe me mf mg mh b">app_key</code>，供脸书识别应用或重定向源。登录页面应该类似于下图。它应该告诉你所有的信息，该应用程序打算从你的脸书帐户检索。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a424ad47abb1351a7ee2da00c8c601c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*HfjHF2fCJUdlVkOA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Permission (Scope) that the site requested</figcaption></figure><p id="1e0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.当你点击<code class="fe me mf mg mh b">ok</code>时，脸书会向<code class="fe me mf mg mh b">callback_url</code>发送一个包含<code class="fe me mf mg mh b">authorisation token</code>的HTTP请求。<code class="fe me mf mg mh b">callback_url</code>是位于应用服务器中的API端点。这个端点应该使用它从脸书收到的<code class="fe me mf mg mh b">auth_token</code>，并将其发送回脸书的服务器，以交换一个<code class="fe me mf mg mh b">access_token</code>和<code class="fe me mf mg mh b">refresh_token</code>对。</p><p id="f179" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.该应用程序现在可以使用<code class="fe me mf mg mh b">access_token</code>来访问您的脸书个人资料信息(受步骤#2中定义的范围限制)。通常情况下，该应用程序会在本地数据库中存储登录会话、您的脸书个人资料ID、访问令牌和刷新令牌。</p><p id="024a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.如果<code class="fe me mf mg mh b">access_token</code>到期，应用程序将使用<code class="fe me mf mg mh b">refresh_token</code>来刷新<code class="fe me mf mg mh b">access_token</code>。这允许应用程序保持你登录到该网站。授权服务器通常有一个API端点，允许我们刷新<code class="fe me mf mg mh b">access token</code>。</p><p id="8378" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.就是这样！Oauth消除了在本地存储用户详细信息的需要，因此为我们解除了许多安全隐患。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="085a" class="lb lc iq bd ld le mq lg lh li mr lk ll lm ms lo lp lq mt ls lt lu mu lw lx ly bi translated">关键术语</h1><p id="edb4" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated"><strong class="jp ir">令牌</strong></p><p id="ba74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Token只是超长字符串的另一种说法。它们用于身份验证，代替密码。</p><p id="d129" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">资源所有者密码凭证(ROPC) </strong></p><p id="34df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这通常是一个替代实际帐户持有人密码的令牌。资源所有者=拥有数据的人，例如客户。</p><p id="51c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">资源服务器</strong></p><p id="7daa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存用户数据的服务器。脸书存储用户信息的服务器。</p><p id="2291" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">回拨网址</strong></p><p id="228a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是Oauth服务器将发送授权令牌的地方。这通常是应用程序的一个API端点，它接受<code class="fe me mf mg mh b">auth token</code>并交换一个<code class="fe me mf mg mh b">access token</code>和<code class="fe me mf mg mh b">refresh token</code>。</p><p id="47b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">访问令牌</strong></p><p id="3984" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个令牌允许应用程序代表用户在资源服务器上执行CRUD操作。每次应用程序想要检索用户的数据时，请求中都必须包含一个<code class="fe me mf mg mh b">access token</code>。<code class="fe me mf mg mh b">Access token</code>有时被称为API键。</p><p id="ba49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe me mf mg mh b">access token</code>有到期时间。一旦该时间到期，<code class="fe me mf mg mh b">access token</code>就不能再使用了。</p><p id="3285" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">刷新令牌</strong></p><p id="d4be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个令牌用于刷新<code class="fe me mf mg mh b">access token</code>，所以我们不需要再次遍历整个Oauth流。刷新时我们会得到一双新的<code class="fe me mf mg mh b">access token</code>和<code class="fe me mf mg mh b">refresh token</code>。刷新令牌也有到期时间。</p><p id="d091" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">授权令牌</strong></p><p id="b5cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个令牌用于交换一个<code class="fe me mf mg mh b">access token</code> / <code class="fe me mf mg mh b">access token</code>对。</p><p id="a99c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">授权服务器</strong></p><p id="71b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">发送授权码(也称为授权令牌)的服务器。</p><p id="d838" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">重定向网址</strong></p><p id="4a99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户通过身份验证后，Oauth服务器将在这里重定向用户。这通常是应用程序的会员区。</p><p id="41a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">范围</strong></p><p id="d0cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是应用程序正常运行所需的权限。一旦用户授予了权限，应用程序就可以在作用域中定义的范围内代表用户进行操作。</p><p id="823d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">公钥/私钥对</strong></p><p id="e696" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">公钥是Oauth服务器用来识别网站所有者的应用程序的令牌。每个公钥只有一个私钥。当应用程序想要用<code class="fe me mf mg mh b">auth token</code>交换一个<code class="fe me mf mg mh b">access token</code>时，它通常会随请求一起发送公钥/私钥。有时这些被称为<code class="fe me mf mg mh b">app_id</code>和<code class="fe me mf mg mh b">app_key</code>。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="b86b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这篇文章能帮助您更好地理解Oauth！同样，这是一个简化的概述，还有更多关于Oauth的实现。</p><p id="049c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ng">更多内容请看</em><a class="ae mi" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ng">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
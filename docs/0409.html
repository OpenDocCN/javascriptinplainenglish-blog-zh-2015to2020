<html>
<head>
<title>JavaScript Drag and Drop With Backend Interactivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScriptæ‹–æ”¾å’Œåç«¯äº¤äº’</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/javascript-drag-and-drop-with-backend-interactivity-90f5ed68e576?source=collection_archive---------2-----------------------#2019-10-08">https://javascript.plainenglish.io/javascript-drag-and-drop-with-backend-interactivity-90f5ed68e576?source=collection_archive---------2-----------------------#2019-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7a16" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">å¢åŠ æ‹–æ”¾åŠŸèƒ½çš„åŠŸèƒ½å’Œå®ç”¨æ€§</h2></div><p id="e00f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä¸€ä¸ªJavaScriptæ‹–æ”¾ç‰¹æ€§ï¼Œå®ƒå¯ä»¥ä¸åç«¯APIè¿›è¡Œäº¤äº’å’Œæ›´æ–°ã€‚æˆ‘å°†ä»å‘ˆç°çš„APIæ•°æ®ä¸­æ·»åŠ DOMå…ƒç´ ï¼Œä½¿è¿™äº›å…ƒç´ å¯æ‹–æ”¾ï¼Œå¹¶æ›´æ–°APIä»¥å“åº”æ‹–æ”¾ã€‚æˆ‘å°†è§£é‡Šä¸€äº›åŸºæœ¬çš„æ‹–æ”¾ç»„ä»¶ï¼Œä½†æ˜¯å¦‚æœæ‚¨éœ€è¦è¿›ä¸€æ­¥çš„æŒ‡å¯¼ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬æ–‡æœ«å°¾çš„å‚è€ƒèµ„æ–™ã€‚</p><p id="2b19" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä»¥ä¸‹æ˜¯æˆ‘å°†æ„å»ºçš„åŠŸèƒ½:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/892d3ed728ce281b01e41bd7f9b68a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cI_HuSTN1qkylWOB.gif"/></div></div></figure><p id="59cd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚æœæ‚¨æƒ³æµ‹è¯•åº”ç”¨ç¨‹åºï¼Œ<a class="ae lk" href="https://github.com/mrwerner392/drag-and-drop-tasks" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œæ˜¯å­˜å‚¨åº“</a>ã€‚</p><p id="a5b9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><h1 id="3e97" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æ­¥éª¤0:å°†HTMLå…ƒç´ ä¿å­˜ä¸ºå˜é‡</h1><p id="fb54" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">æˆ‘ä»¬çš„ä»»åŠ¡æœ‰ä¸¤ä¸ªâ€œå®¹å™¨â€,æˆ‘ä»¬å°†åœ¨å‡ ä¸ªåœ°æ–¹éœ€è¦å®ƒä»¬ï¼Œæ‰€ä»¥åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å°†å®ƒä»¬ä¿å­˜åˆ°JavaScriptæ–‡ä»¶é¡¶éƒ¨çš„å…¨å±€å˜é‡ä¸­ã€‚è¿™äº›å®¹å™¨åªæ˜¯HTMLæ–‡ä»¶ä¸­çš„<code class="fe mi mj mk ml b">&lt;div&gt;</code>å…ƒç´ :</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="09da" class="mq lm in ml b gy mr ms l mt mu">const unfinishedTasks = document.querySelector('#unfinished-tasks');<br/>const finishedTasks = document.querySelector('#finished-tasks');</span></pre><h1 id="732a" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æ­¥éª¤1:ä»åç«¯è·å–æ•°æ®</h1><p id="8d2a" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">æˆ‘æœ‰ä¸€ä¸ªRails APIåç«¯ï¼Œé‡Œé¢æœ‰ä¸€äº›å…³äºä»»åŠ¡çš„æ•°æ®ã€‚æ¯ä¸ªä»»åŠ¡æœ‰ä¸¤ä¸ªå±æ€§:â€œå†…å®¹â€(ç±»å‹string)å’Œâ€œå®Œæˆâ€(ç±»å‹boolean)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe mi mj mk ml b">fetch()</code>æ¥è·å–è¿™ä¸ªä»»åŠ¡æ•°æ®:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="9deb" class="mq lm in ml b gy mr ms l mt mu">fetch('http://localhost:3000/tasks')<br/>.then(res =&gt; res.json())<br/>.then(tasksArr =&gt; {<br/>  tasksArr.forEach(task =&gt; handleTask(task))<br/>});</span></pre><p id="7f8c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è§£æå®Œæ•°æ®åï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ•°ç»„ï¼Œæˆ‘ä»¬éå†è¿™ä¸ªæ•°ç»„ï¼Œå¯¹æ¯ä¸ªä»»åŠ¡å¯¹è±¡è°ƒç”¨(å¾…å®š)<code class="fe mi mj mk ml b">handleTask()</code>å‡½æ•°ã€‚</p><h1 id="6502" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æ­¥éª¤2:å°†æ•°æ®è½¬æ¢æˆå¯æ‹–åŠ¨çš„DOMå…ƒç´ </h1><p id="2044" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">è®©æˆ‘ä»¬å®šä¹‰ä¸Šé¢è°ƒç”¨çš„<code class="fe mi mj mk ml b">handleTask()</code>æ–¹æ³•:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="9fa4" class="mq lm in ml b gy mr ms l mt mu">function handleTask(task) {</span><span id="fa52" class="mq lm in ml b gy mv ms l mt mu">  let taskPTag = document.createElement('p');<br/>  taskPTag.innerText = task.content;<br/>  taskPTag.id = `task ${task.id}`;<br/>  taskPTag.classList.add('task');<br/>  taskPTag.dataset.databaseId = task.id;</span><span id="d390" class="mq lm in ml b gy mv ms l mt mu">  if (task.finished === true) {<br/>    taskPTag.dataset.id = 'finished';<br/>    finishedTasks.append(taskPTag);<br/>  } else {<br/>    taskPTag.dataset.id = 'unfinished'<br/>    unfinishedTasks.append(taskPTag);<br/>  };</span><span id="332b" class="mq lm in ml b gy mv ms l mt mu">  taskPTag.setAttribute('draggable', 'true');<br/>  addDragEventListeners(task, taskPTag);</span><span id="da9f" class="mq lm in ml b gy mv ms l mt mu">};</span></pre><p id="8f71" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™ä¸ªåŠŸèƒ½çš„å¤§éƒ¨åˆ†åªæ˜¯ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ª<code class="fe mi mj mk ml b">&lt;p&gt;</code>å…ƒç´ ï¼Œç»™å®ƒæ–‡æœ¬å’Œä¸€å †å±æ€§ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨é€‚å½“çš„ä»»åŠ¡å®¹å™¨ä¸­ã€‚é™¤äº†ç±»â€”â€”å®ƒæ˜¯ç”¨æ¥è®¾è®¡æ ·å¼çš„â€”â€”åœ¨æˆ‘ä»¬çš„JavaScriptä¸­ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰ç‰¹å®šçš„ç”¨é€”ã€‚</p><p id="cc03" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™ä¸ªå‡½æ•°çš„æœ€åä¸¤è¡Œæ˜¯æ‹–æ”¾åŠŸèƒ½çœŸæ­£å¼€å§‹çš„åœ°æ–¹ã€‚ç¬¬ä¸€ä¸ªç»™äº†æˆ‘ä»¬çš„æ–°<code class="fe mi mj mk ml b">&lt;p&gt;</code>å¦ä¸€ä¸ªåä¸ºâ€œdraggableâ€çš„å±æ€§ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸ºâ€œtrueâ€è¿™ä¸ªæ°å½“å‘½åçš„å±æ€§ä½¿å¾—æ¯ä¸ªæ–°çš„<code class="fe mi mj mk ml b">&lt;p&gt;</code>å¯ä»¥æ‹–åŠ¨ã€‚ç¬¬äºŒä¸ªè°ƒç”¨äº†ä¸€ä¸ªåä¸º<code class="fe mi mj mk ml b">addDragEventListeners()</code>çš„æ–¹æ³•ï¼Œå¹¶å°†æˆ‘ä»¬çš„<code class="fe mi mj mk ml b">task</code>å¯¹è±¡å’Œæˆ‘ä»¬æ–°åˆ›å»ºçš„<code class="fe mi mj mk ml b">&lt;p&gt;</code>ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥ä¸­å®šä¹‰å’Œåˆ†æè¿™ä¸ªæ–¹æ³•ã€‚</p><h1 id="cd5a" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æ­¥éª¤3:å‘å¯æ‹–åŠ¨å…ƒç´ æ·»åŠ æ‹–åŠ¨äº‹ä»¶ä¾¦å¬å™¨</h1><p id="fa7b" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">å¦‚æœæˆ‘ä»¬ä»ä¸Šä¸€æ­¥ä¸­æ³¨é‡Šæ‰<code class="fe mi mj mk ml b">addDragEventListeners()</code>çš„æ–¹æ³•è°ƒç”¨ï¼Œæˆ‘ä»¬çš„åŠŸèƒ½å°†å¦‚ä¸‹æ‰€ç¤º:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/417c18df1771745b524da01717364c60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eDGgIwVQOl4Eullv.gif"/></div></div></figure><p id="ef8b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬å¯ä»¥æ‹–åŠ¨æˆ‘ä»¬çš„ä»»åŠ¡ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ”¾ä¸‹å®ƒä»¬æ—¶ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å‘æˆ‘ä»¬çš„<code class="fe mi mj mk ml b">&lt;p&gt;</code>æ·»åŠ ä¸€äº›äº‹ä»¶ç›‘å¬å™¨ï¼Œè¿™æ˜¯æˆ‘ä»¬ç”¨<code class="fe mi mj mk ml b">addDragEventListeners()</code>å‡½æ•°å®Œæˆçš„ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥ä¸­è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°â€”â€”ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å®šä¹‰:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="9e34" class="mq lm in ml b gy mr ms l mt mu">function addDragEventListeners(task, taskPTag) {</span><span id="c6d3" class="mq lm in ml b gy mv ms l mt mu">  taskPTag.addEventListener('dragstart', evt =&gt; {<br/>    evt.dataTransfer.setData('text', evt.target.id);<br/>  }, false);</span><span id="0449" class="mq lm in ml b gy mv ms l mt mu">  taskPTag.addEventListener('dragend', evt =&gt; {<br/>    evt.dataTransfer.clearData();<br/>    if (document.querySelector('.over')) {<br/>      document.querySelector('.over').classList.remove('over');<br/>    };<br/>  });</span><span id="0158" class="mq lm in ml b gy mv ms l mt mu">};</span></pre><p id="7dca" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¯¹äºæˆ‘ä»¬çš„æ¯ä¸ª<code class="fe mi mj mk ml b">&lt;p&gt;</code>,æˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨:ä¸€ä¸ªç”¨äºâ€œdragstart â€,ä¸€ä¸ªç”¨äºâ€œdragendâ€ã€‚åœ¨â€œdragstartâ€ä¸Šï¼Œæˆ‘ä»¬è·å–è¢«æ‹–åŠ¨çš„<code class="fe mi mj mk ml b">&lt;p&gt;</code>çš„idï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä¸€ä¸ªåä¸º<code class="fe mi mj mk ml b">dataTransfer</code>çš„æ‹–åŠ¨äº‹ä»¶å±æ€§ã€‚è¿™å…è®¸æˆ‘ä»¬ä»ä¸åŒçš„äº‹ä»¶ä¾¦å¬å™¨ä¸­è®¿é—®è¯¥idï¼Œç¨åæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥è®¿é—®è¢«æ‹–åŠ¨çš„å…ƒç´ æœ¬èº«ã€‚åœ¨â€œdragendâ€ä¸­ï¼Œæˆ‘ä»¬ä»<code class="fe mi mj mk ml b">dataTransfer</code>ä¸­æ¸…é™¤è¿™ä¸ªä¿¡æ¯ï¼Œç„¶åifè¯­å¥ç”¨äºæ ·å¼ç›®çš„(ç±»åâ€œoverâ€æ˜¯ç»™å®¹å™¨ç»¿è‰²é˜´å½±çš„åŸå› ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å½“æ‹–åŠ¨å¾ªç¯ç»“æŸæ—¶è¿™ä¸ªé˜´å½±è¿˜åœ¨ã€‚)</p><p id="427f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å°†æ‹–åŠ¨äº‹ä»¶ä¾¦å¬å™¨æ·»åŠ åˆ°å¯æ‹–åŠ¨å…ƒç´ ä¸­åªæ˜¯è§£å†³äº†ä¸€åŠé—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å»ºç«‹æˆ‘ä»¬çš„ç©ºæŠ•åŒºã€‚</p><h1 id="b1ed" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æ­¥éª¤4:è®¾ç½®æ‹–æ”¾åŒº</h1><p id="d30c" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">é™¤éæˆ‘ä»¬å‘Šè¯‰ä»–ä»¬ï¼Œå¦åˆ™å…ƒç´ ä¸ä¼šæˆä¸ºå¯æ¥å—çš„æ‹–æ”¾åŒºã€‚æˆ‘ä»¬é€šè¿‡ç»™å®ƒä»¬ä¸€äº›æ‹–åŠ¨äº‹ä»¶ç›‘å¬å™¨æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ‹–æ”¾åŒºï¼Œæ¯ä¸ªæ‹–æ”¾åŒºéœ€è¦ç›¸åŒçš„äº‹ä»¶ä¾¦å¬å™¨ã€‚æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªå‡½æ•°<code class="fe mi mj mk ml b">addDropzoneEventListeners()</code>,å¹¶ä¸ºæ¯ä¸ªæ‹–æ”¾åŒºè°ƒç”¨è¯¥å‡½æ•°ã€‚è¿™æ˜¯äº‹æƒ…å˜å¾—æœ‰ç‚¹å¿™ä¹±çš„åœ°æ–¹ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ†å—æ¥åšã€‚</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="3b8d" class="mq lm in ml b gy mr ms l mt mu">addDropzoneEventListeners(unfinishedTasks);<br/>addDropzoneEventListeners(finishedTasks);</span><span id="fcbb" class="mq lm in ml b gy mv ms l mt mu">function addDropzoneEventListeners(dropzone) {</span><span id="9b1b" class="mq lm in ml b gy mv ms l mt mu">  dropzone.addEventListener('dragover', evt =&gt; {<br/>    evt.preventDefault();<br/>    evt.currentTarget.classList.add('over');<br/>  }, false);</span><span id="190a" class="mq lm in ml b gy mv ms l mt mu">  dropzone.addEventListener('dragleave', evt =&gt; {<br/>    evt.currentTarget.classList.remove('over');<br/>  }, false);</span><span id="03dd" class="mq lm in ml b gy mv ms l mt mu">  ...</span><span id="67df" class="mq lm in ml b gy mv ms l mt mu">};</span></pre><p id="b0e3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬çš„<code class="fe mi mj mk ml b">addDropzoneEventListeners()</code>å‡½æ•°å°†ä¸ºæ¯ä¸ªæ‹–æ”¾åŒºæ·»åŠ ä¸‰ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå…¶ä¸­ä¸¤ä¸ªå¦‚ä¸Šæ‰€ç¤ºã€‚è¿™ä¸¤ä¸ªâ€œdragoverâ€å’Œâ€œdragleaveâ€æœåŠ¡äºåŒé‡ç›®çš„ã€‚é¦–å…ˆæ˜¯é˜²æ­¢å®é™…â€œæ‹–åŠ¨â€äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚é»˜è®¤è¡Œä¸ºä¸å…è®¸å‘ç”Ÿä¸¢å¼ƒï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚è¿™äº›äº‹ä»¶ä¾¦å¬å™¨çš„å¦ä¸€ä¸ªç›®çš„æ˜¯ç”¨äºæ ·å¼åŒ–ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¢«æ‹–åŠ¨çš„æ‹–æ”¾åŒºä¸Šæ·»åŠ å’Œç§»é™¤ä¸€ä¸ªâ€œoverâ€ç±»ã€‚å¦‚å‰æ‰€è¿°ï¼Œè¿™å°±æ˜¯ç»¿æ¡†é˜´å½±çš„æ¥æº(å¯¹åŠŸèƒ½æ¥è¯´å¹¶ä¸é‡è¦ï¼Œä½†å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§)ã€‚</p><p id="7c49" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¥½äº†ï¼Œç°åœ¨æ˜¯æœ€åä¸€éƒ¨åˆ†â€”â€”å¤„ç†å®é™…çš„ä¸‹è½ã€‚è¿™æ˜¯æ›´æ–°æˆ‘ä»¬çš„DOMå¹¶ä¸æˆ‘ä»¬çš„åç«¯äº¤äº’çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬æ·»åŠ æœ€åä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="5797" class="mq lm in ml b gy mr ms l mt mu">addDropzoneEventListeners(unfinishedTasks);<br/>addDropzoneEventListeners(finishedTasks);</span><span id="b1b9" class="mq lm in ml b gy mv ms l mt mu">function addDropzoneEventListeners(dropzone) {</span><span id="50a2" class="mq lm in ml b gy mv ms l mt mu">  ...</span><span id="0b87" class="mq lm in ml b gy mv ms l mt mu">  dropzone.addEventListener('drop', evt =&gt; {<br/>        <br/>    let elemId = evt.dataTransfer.getData('text');<br/>    let droppedElem = document.getElementById(elemId);</span><span id="ccd4" class="mq lm in ml b gy mv ms l mt mu">    if (droppedElem.dataset.id !== evt.currentTarget.dataset.id) {</span><span id="d4d3" class="mq lm in ml b gy mv ms l mt mu">      evt.currentTarget.append(droppedElem);<br/>      evt.dataTransfer.clearData();</span><span id="ba23" class="mq lm in ml b gy mv ms l mt mu">      const dataIdToggle = {<br/>        'finished': 'unfinished',<br/>        'unfinished': 'finished'<br/>      };<br/>      droppedElem.dataset.id = dataIdToggle[droppedElem.dataset.id];</span><span id="c63d" class="mq lm in ml b gy mv ms l mt mu">      const databaseAttributeMap = {<br/>        'finished': true,<br/>        'unfinished': false<br/>      };<br/>      let isFinished = databaseAttributeMap[droppedElem.dataset.id];<br/>      let id = droppedElem.dataset.databaseId;<br/>      <br/>      fetch(`http://localhost:3000/tasks/${id}`, {<br/>        method: 'PATCH',<br/>        headers: {<br/>          'Content-Type': 'application/json',<br/>          Accept: 'application/json'<br/>        },<br/>        body: JSON.stringify({<br/>          'finished': isFinished<br/>        })<br/>      })<br/>      .then(res =&gt; res.json())<br/>      .then(task =&gt; {<br/>        task.finished === true ? alert('Way to Go!!!') : alert('Darn<br/>        ğŸ˜•')<br/>      });</span><span id="a9a6" class="mq lm in ml b gy mv ms l mt mu">    };</span><span id="27d3" class="mq lm in ml b gy mv ms l mt mu">  }, false);</span><span id="dd01" class="mq lm in ml b gy mv ms l mt mu">};</span></pre><p id="bcb7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe mi mj mk ml b">evt.dataTransfer.getData()</code>æ¥è®¿é—®è¢«æ‹–æ”¾çš„å…ƒç´ çš„idï¼Œç„¶åæ‰¾åˆ°å®é™…çš„å…ƒç´ ã€‚ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ª<code class="fe mi mj mk ml b">if</code>è¯­å¥ï¼Œå®ƒçš„ç›®çš„æ˜¯ç¡®å®šä¸€ä¸ªâ€œå·²å®Œæˆâ€çš„ä»»åŠ¡æ˜¯å¦è¢«æ”¾åˆ°äº†â€œæœªå®Œæˆâ€çš„ä»»åŠ¡å®¹å™¨ä¸­ï¼Œåä¹‹äº¦ç„¶ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚å¦åˆ™ï¼Œæ‹–åŠ¨å¾ªç¯ç»“æŸï¼Œè¢«æ‹–åŠ¨çš„å…ƒç´ è¿”å›åˆ°åŸæ¥çš„ä½ç½®ã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡è¢«æ”¾åœ¨å®ƒå¼€å§‹çš„åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼Œä»€ä¹ˆéƒ½ä¸éœ€è¦å‘ç”Ÿã€‚</p><p id="bd16" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚æœ<code class="fe mi mj mk ml b">if</code>è¯­å¥è¿”å›trueï¼Œæˆ‘ä»¬å°±å®ç°äº†æˆ‘ä»¬çš„åŠŸèƒ½ã€‚è®©æˆ‘ä»¬æ”¾å¤§ä¸€äº›ä»£ç ã€‚å‰ä¸¤è¡Œå°†è¢«æ‹–åŠ¨çš„å…ƒç´ ç§»åŠ¨åˆ°æ‹–æ”¾åŒºï¼Œå¹¶ä»<code class="fe mi mj mk ml b">dataTransfer</code>å¯¹è±¡ä¸­æ¸…é™¤æ•°æ®:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="852e" class="mq lm in ml b gy mr ms l mt mu">evt.currentTarget.append(droppedElem);<br/>evt.dataTransfer.clearData();</span></pre><p id="3917" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ³¨æ„ï¼Œæˆ‘ä»¬ä¹è§‚åœ°å‘ˆç°è¿™ä¸ªæ›´æ–°ï¼Œè¿™å¯¹äºæˆ‘ä»¬ç®€å•çš„ä»»åŠ¡è·Ÿè¸ªå™¨æ¥è¯´ä¼¼ä¹æ˜¯åˆç†çš„ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ‡æ¢è¢«ç§»åŠ¨å…ƒç´ çš„æ•°æ®é›†idå±æ€§ï¼Œä½¿å…¶ä¸æ–°ä½ç½®ç›¸åŒ¹é…:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="a5ae" class="mq lm in ml b gy mr ms l mt mu">const dataIdToggle = {<br/>  'finished': 'unfinished',<br/>  'unfinished': 'finished'<br/>};<br/>droppedElem.dataset.id = dataIdToggle[droppedElem.dataset.id];</span></pre><p id="1d01" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™å…è®¸æˆ‘ä»¬åœ¨å‰ç«¯çš„â€œå·²å®Œæˆâ€å’Œâ€œæœªå®Œæˆâ€ä»»åŠ¡å®¹å™¨ä¹‹é—´æ¥å›ç§»åŠ¨å…ƒç´ ï¼Œä¹Ÿå¸®åŠ©æˆ‘ä»¬åœ¨åç«¯é€‚å½“åœ°æ›´æ–°æˆ‘ä»¬çš„ä»»åŠ¡æ•°æ®ã€‚åœ¨æˆ‘ä»¬å‘åç«¯å‘å‡ºæ›´æ–°APIçš„è¯·æ±‚ä¹‹å‰ï¼Œæˆ‘ä»¬æ”¶é›†äº†ä¸€äº›ä¸œè¥¿:ç”¨æ¥æ›´æ–°æˆ‘ä»¬çš„ä»»åŠ¡çš„æ–°ä¿¡æ¯ï¼Œä»¥åŠæˆ‘ä»¬æ­£åœ¨æ›´æ–°çš„ç‰¹å®šä»»åŠ¡çš„id:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="6154" class="mq lm in ml b gy mr ms l mt mu">const databaseAttributeMap = {<br/>  'finished': true,<br/>  'unfinished': false<br/>};<br/>let isFinished = databaseAttributeMap[droppedElem.dataset.id];<br/>let id = droppedElem.dataset.databaseId;</span></pre><p id="e780" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æœ€åï¼Œæˆ‘ä»¬å‘<code class="fe mi mj mk ml b">fetch()</code>æå‡ºè¯·æ±‚:</p><pre class="kz la lb lc gt mm ml mn mo aw mp bi"><span id="a75c" class="mq lm in ml b gy mr ms l mt mu">fetch(`http://localhost:3000/tasks/${id}`, {<br/>  method: 'PATCH',<br/>  headers: {<br/>    'Content-Type': 'application/json',<br/>    Accept: 'application/json'<br/>  },<br/>  body: JSON.stringify({<br/>    'finished': isFinished<br/>  })<br/>})<br/>.then(res =&gt; res.json())<br/>.then(task =&gt; {<br/>  task.finished === true ? alert('Way to Go!!!') : alert('Darn ğŸ˜•')<br/>});</span></pre><p id="bdcc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™æ ·ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡å·²ç»åœ¨åç«¯æ›´æ–°äº†ï¼Œè¿™æ ·ï¼Œå¦‚æœç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œä»»åŠ¡å°±ä¼šç•™åœ¨å®ƒçš„æ–°å®¶ã€‚(æ³¨æ„:å®¹å™¨ä¸­ä»»åŠ¡çš„é¡ºåºå¯èƒ½ä¼šåœ¨åˆ·æ–°æ—¶æ”¹å˜ï¼Œå› ä¸ºè¿™å–å†³äºå®ƒä»¬åœ¨APIä¸­çš„é¡ºåºã€‚åœ¨å‰ç«¯ç»´æŠ¤è®¢å•è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ã€‚)æˆ‘ä»¬è¿˜ä»¥å®šåˆ¶è­¦å‘Šçš„å½¢å¼ç»™ç”¨æˆ·ä¸€äº›é¢å¤–çš„åé¦ˆã€‚æœ€åï¼Œæˆ‘ä»¬æœ‰äº†æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/a887690170be5c72362bd5a688ca49fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p4o2JG4acQw1xTtr.gif"/></div></div></figure><h1 id="a2ac" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">æœ€åçš„æƒ³æ³•</h1><p id="2443" class="pw-post-body-paragraph kc kd in ke b kf md jo kh ki me jr kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">åœ¨æˆ‘çœ‹æ¥ï¼Œæ‹–æ”¾åŠŸèƒ½æ˜¯éå¸¸ç”¨æˆ·å‹å¥½çš„ã€‚å®ƒä»¬çš„åŠŸèƒ½å¾ˆç›´è§‚ï¼Œç»™ç”¨æˆ·ä¸€äº›å¾ˆå¥½çš„è§†è§‰åé¦ˆã€‚è€Œä¸”å®ç°èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼ä¸€ä¸ªéå¸¸ç®€å•çš„æ‹–æ”¾åŠŸèƒ½åªéœ€å‡ ä¸ªæ­¥éª¤å°±å¯ä»¥å®Œæˆï¼Œé€šè¿‡æ·»åŠ ä¸€äº›åç«¯äº¤äº’æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¤§å¤§å¢åŠ è¯¥åŠŸèƒ½çš„åŠŸèƒ½å’Œå®ç”¨æ€§ã€‚</p><p id="1c9c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ„Ÿè°¢é˜…è¯»ï¼ï¼</p><p id="dd09" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">èµ„æº</strong> <br/> <a class="ae lk" href="https://medium.com/quick-code/simple-javascript-drag-drop-d044d8c5bed5" rel="noopener">ç®€å•JavaScriptæ‹–æ‹½&amp;Drop(<em class="mw">Medium</em>post)</a><br/><a class="ae lk" href="https://alligator.io/js/drag-and-drop-vanilla-js/" rel="noopener ugc nofollow" target="_blank">æ‹–æ‹½&amp; Dropå…ƒç´ å¸¦é¦™è‰Javascriptå’ŒHTML(æœ‰å¸®åŠ©çš„æ•™ç¨‹)</a> <br/> <a class="ae lk" href="https://www.w3schools.com/html/html5_draganddrop.asp" rel="noopener ugc nofollow" target="_blank"> HTML5æ‹–æ‹½(W3Schools docs) </a></p></div></div>    
</body>
</html>
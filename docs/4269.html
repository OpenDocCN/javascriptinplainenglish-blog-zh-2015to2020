<html>
<head>
<title>Getting Started With Vue.js: Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js入门:组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-vue-js-components-cdfb763f78c9?source=collection_archive---------13-----------------------#2020-11-29">https://javascript.plainenglish.io/getting-started-with-vue-js-components-cdfb763f78c9?source=collection_archive---------13-----------------------#2020-11-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="09f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我最近的几篇博文中，我谈到了一些使用Vue.js跟踪网页上动态数据的方法，以及Vue如何给你一些指令来改变数据在页面上的显示方式。但是，正如我上次提到的，你需要一种方法来大规模地使用这些东西来制作一个好的网站。实现这一点的方法是使用Vue组件。在这篇博文中，我将给出这些组件能做的一些事情以及如何使用它们的一个非常基本的概述。</p><p id="e8c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">组件本质上是给定名称的可重用Vue实例。因为它们是实例，所以它们接受与<code class="fe ki kj kk kl b">new Vue</code>相同的选项，比如<code class="fe ki kj kk kl b">data</code>和<code class="fe ki kj kk kl b">computed</code>，以及一个名称。基本格式如下所示:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="cf31" class="ku kv in kl b gy kw kx l ky kz">Vue.component('<em class="la">component-name</em>', {<br/>  data: function () {<br/>    return {<br/>      // <em class="la">some data</em><br/>    }<em class="la"><br/>  </em>},<br/>  template: `&lt;div&gt;<br/>    &lt;!-- <em class="la">some html</em>--&gt;<br/>  &lt;/div&gt;`<br/>})</span></pre><p id="f4cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">分解一下，第一个参数<code class="fe ki kj kk kl b">'<em class="la">component-name</em>'</code>是您在HTML中使用组件时为其指定的名称。你必须给它一个名字，作为第二个变量传递的对象应该有一个带有HTML的<code class="fe ki kj kk kl b">template</code>，这样当你使用它的时候你的组件就会出现在页面上。使用kebab-case作为名称也是最佳实践，全部使用小写字母和连字符，因为这符合自定义HTML标记名称的规则。</p><p id="5739" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ki kj kk kl b">data</code>部分是组件所需的数据，它应该始终是一个返回带有数据的对象的函数。这是为了使组件的每个实例都有自己的数据副本。如果它只是返回一个没有函数的<code class="fe ki kj kk kl b">data</code>对象，那么组件的每个实例都会受到其中任何一个<code class="fe ki kj kk kl b">data</code>变化的影响。组件的<code class="fe ki kj kk kl b">template</code>部分是您希望组件拥有的HTML。请注意，模板是用反引号括起来的，而不是单引号。这是因为<code class="fe ki kj kk kl b">template</code>的字符串在几行中，所以要么需要用反引号括起来，要么在每行的末尾加反斜杠。</p><p id="be8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个组件的例子，它有一个增加计数器的按钮，展示了如何在您的页面中使用它:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="4111" class="ku kv in kl b gy kw kx l ky kz">// <em class="la">in index.js</em><br/>Vue.component('counter-component', {<br/>  data: function () {<br/>    return {<br/>      count: 0<br/>    }<br/>  },<br/>  template: `&lt;div&gt;<br/>    &lt;button v-on:click="count++"&gt;Click me!&lt;/button&gt;<br/>    &lt;p&gt;You've clicked the button {{ count }} times&lt;/p&gt;<br/>  &lt;/div&gt;`<br/>})</span><span id="ff7d" class="ku kv in kl b gy lb kx l ky kz">new Vue({<br/>  el: '#component-example'<br/>})</span><span id="990f" class="ku kv in kl b gy lb kx l ky kz">// <em class="la">in index.html<br/></em>&lt;div id='component-example'&gt;<br/>  <strong class="kl io">&lt;counter-component&gt;&lt;/counter-component&gt;</strong><br/>&lt;/div&gt;</span></pre><p id="e965" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从这个例子中你可以看到，你可以在你的网页中使用一个组件，就像它是一个HTML标签一样。您可以任意多次使用每个组件。这里还有一些其他需要注意的地方。首先，您需要在想要使用组件的地方使用<code class="fe ki kj kk kl b">el</code>将一个Vue实例附加到HTML。否则，在这种情况下，div将为空，因为它不知道名为<code class="fe ki kj kk kl b">counter-component</code>的元素。第二件事是，您需要将您的<code class="fe ki kj kk kl b">template</code>包装在一个HTML元素中。如果我把示例中的<code class="fe ki kj kk kl b">template</code>中的<em class="la"> div </em>去掉，就会导致错误并且无法工作。</p><p id="3eaf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Vue组件主要用于当你写一段你想重用的HTML的时候。例如，一个网站的每个用户的个人资料应该有相似的格式，所以我们希望重用一些相同的HTML，除了不同用户的数据不同，如姓名或电子邮件。但是要做到这一点，我们需要一种方法为组件的每次使用提供一组不同的信息。这是通过使用叫做<em class="la">道具</em>的东西来实现的。道具是你可以给Vue组件的选项之一，就像这样:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="485e" class="ku kv in kl b gy kw kx l ky kz">Vue.component('profile', {<br/>  props: ['name'],<br/>  template: '&lt;h3&gt;{{ name }}&lt;/h3&gt;'<br/>})</span></pre><p id="a791" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，当我们使用它时，要传递它名称prop，我们可以这样做:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="b6b8" class="ku kv in kl b gy kw kx l ky kz">&lt;profile name="Jane Doe"&gt;&lt;/profile&gt;<br/>&lt;profile name="John Smith"&gt;&lt;/profile&gt;<br/>&lt;profile name="Jesse Baker"&gt;&lt;/profile&gt;</span></pre><p id="34bf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们希望我们的页面是动态的，那么在中硬编码名字并不是特别有用，所以你通常会希望循环遍历你的实例数据中的一个列表。幸运的是，Vue的<code class="fe ki kj kk kl b">v-for</code>与组件一起工作，所以你可以像这样使用这个<code class="fe ki kj kk kl b">profile</code>组件:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="25f1" class="ku kv in kl b gy kw kx l ky kz">// <em class="la">in index.js<br/></em>new Vue({<br/>  el: '#people-list',<br/>  data: {<br/>    people: [<br/>      { id: 1, name: 'Jane Do'},<br/>      { id: 2, name: 'John Smith'},<br/>      { id: 3, name: 'Jesse Baker'}<br/>    ]<br/>  }<br/>})</span><span id="6b28" class="ku kv in kl b gy lb kx l ky kz">// <em class="la">in index.html<br/></em>&lt;div id="people-list"&gt;<br/>  &lt;profile<br/>    v-for="person in people"<br/>    v-bind:key="person.id"<br/>    v-bind:name="person.name"<br/>  &gt;&lt;/profile&gt;<br/>&lt;/div&gt;</span></pre><p id="4e46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你在这个例子中看到的，你可以使用<code class="fe ki kj kk kl b">v-bind</code>来传递动态的属性，所以这个例子在网页上看起来和我手动传递<code class="fe ki kj kk kl b">name</code>的例子完全一样。另一件要考虑的事情是，随着我的<code class="fe ki kj kk kl b">profile</code>组件的增长，它可能需要更多的道具。但是，对大量的道具反复使用<code class="fe ki kj kk kl b">v-bind</code>会变得单调乏味，所以编写这个<code class="fe ki kj kk kl b">profile</code>组件的另一种方式应该是这样的:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="1a02" class="ku kv in kl b gy kw kx l ky kz">// <em class="la">in index.js<br/></em>Vue.component('profile', {<br/>  props: ['person'],<br/>  template: `&lt;div&gt;<br/>    &lt;h3&gt;{{ person.name }}&lt;/h3&gt;<br/>    &lt;img v-bind:src='person.img_url'&gt;&lt;/p&gt;<br/>    &lt;p&gt;{{ person.email }}&lt;/p&gt;<br/>  &lt;/div&gt;`<br/>})</span><span id="5a2f" class="ku kv in kl b gy lb kx l ky kz">// <em class="la">in index.html<br/></em>&lt;div id="people-list"&gt;<br/>  &lt;profile<br/>    v-for="person in people"<br/>    v-bind:key="person.id"<br/>    v-bind:person="person"<br/>  &gt;&lt;/profile&gt;<br/>&lt;/div&gt;</span></pre><p id="ce8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于Vue组件，我要说的最后一件事是<em class="la">插槽</em>。您可能已经注意到，在我使用的例子中，HTML中组件的开始和结束标记之间没有任何东西。这是因为，如果你试图在一个组件的开始和结束标签之间放置任何东西，它将不会在页面上显示出来。但有时你可能想在它们之间放些东西。这就是<em class="la">插槽</em>的用武之地。它们看起来像这样:</p><pre class="km kn ko kp gt kq kl kr ks aw kt bi"><span id="d24c" class="ku kv in kl b gy kw kx l ky kz">// <em class="la">in index.js</em><br/>Vue.component('navigation-link', {<br/>  props: ['url'],<br/>  template: `<br/>    &lt;a v-bind:href="url"&gt;<br/>      <strong class="kl io">&lt;slot&gt;&lt;/slot&gt;</strong><br/>    &lt;/a&gt;<br/>  `<br/>})</span><span id="5595" class="ku kv in kl b gy lb kx l ky kz">// <em class="la">in index.html</em><br/>&lt;div id="profile-nav"&gt;<br/>  &lt;navigation-link url="/profile"&gt;<br/>    Your Profile<br/>  &lt;/navigation-link&gt;<br/>&lt;/div&gt;</span></pre><p id="c535" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从粗体的部分，你可以看到我添加了<code class="fe ki kj kk kl b">slot</code>元素，这是Vue给你的另一个东西。现在你在标签<code class="fe ki kj kk kl b">navigation-link</code>之间写的任何东西都会显示在组件中你放置<code class="fe ki kj kk kl b">slot</code>元素的地方。</p><p id="dfc0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">至此，我想我已经对Vue组件做了一个很好的基本概述。我已经展示了它们的一些使用方法和它们能做的一些事情。但是你可以用组件做更多的事情，如果你感兴趣，我鼓励你去看看在Vue的<a class="ae lc" href="https://vuejs.org/v2/guide/components.html" rel="noopener ugc nofollow" target="_blank">文档</a>中关于组件的所有使用方法。通过这篇文章和我写的所有其他关于Vue.js的文章，我已经基本上涵盖了你开始使用Vue.js所需要的所有基础知识。</p></div></div>    
</body>
</html>
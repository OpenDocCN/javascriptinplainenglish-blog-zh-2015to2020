<html>
<head>
<title>JavaScript Best Practices — Generators and Object Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—生成器和对象属性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-generators-and-object-properties-9c8a38b426b8?source=collection_archive---------8-----------------------#2020-05-26">https://javascript.plainenglish.io/javascript-best-practices-generators-and-object-properties-9c8a38b426b8?source=collection_archive---------8-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ae4f560356b7fe037e1ef06912f3b7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UdFfINskMZszHxGA"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sebaspenalambarri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sebastian Pena Lambarri</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="13e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="bb27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究使用生成器以及定义和使用对象属性时的最佳实践。</p><h1 id="f3f4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如果我们想转换到ES5，就不要使用发电机</h1><p id="3a4f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">生成器代码不能很好地移植到ES5代码，所以如果我们打算将构建工件构建到ES5代码中，我们可能要三思。</p><p id="0811" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，现代transpilers不应该是这种情况，因为它们从生成器和异步函数中创建基于自定义闭包的状态机。他们以同样的方式工作。然而，唯一的优点是transpile代码更难调试，即使使用源代码映射。</p><p id="9bce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果我们永远不需要调试transpiled代码，那么我们可以继续使用生成器。否则，在我们的代码中使用它们之前，我们应该三思。</p><h1 id="a94e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">确保生成器函数签名的间距正确</h1><p id="edf7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">发生器函数应该适当地间隔开。生成器函数的星号应该紧跟在关键字<code class="fe me mf mg mh b">function</code>之后。</p><p id="aff2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该如下定义我们的函数:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5d1a" class="mq lc iq mh b gy mr ms l mt mu">const foo = function*() {<br/>  yield 1;<br/>}</span></pre><p id="9db4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在关键字<code class="fe me mf mg mh b">function</code>后面加了一个星号。星号后面没有空格。</p><p id="d7b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于函数声明，我们应该编写以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="92fe" class="mq lc iq mh b gy mr ms l mt mu">function* foo() {<br/>  yield 1;<br/>}</span></pre><p id="c3d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们在星号后面和函数名前面有一个星号。</p><h1 id="e6e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">访问属性时使用点标记法</h1><p id="dd84" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果对象属性的名称是有效的JavaScript标识符，那么我们应该使用点符号来访问对象属性。</p><p id="873f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它比括号符号短，但作用相同。</p><p id="c3a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，代替用括号符号编写以下内容:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="395f" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  foo: 1<br/>}</span><span id="9573" class="mq lc iq mh b gy mv ms l mt mu">console.log(obj['foo']);</span></pre><p id="f481" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该编写以下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4630" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  foo: 1<br/>}</span><span id="a27d" class="mq lc iq mh b gy mv ms l mt mu">console.log(obj.foo);</span></pre><p id="087d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第一个例子中，我们使用了更长的括号符号，我们必须通过将一个字符串传入括号来访问<code class="fe me mf mg mh b">foo</code>属性。我们必须编写额外的字符来访问<code class="fe me mf mg mh b">foo</code>属性。</p><p id="df03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该写出第二个例子中的内容，即<code class="fe me mf mg mh b">obj.foo</code>。</p><p id="9e3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它更短，但功能相同。</p><h1 id="c176" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用变量访问属性时，使用括号符号<code class="fe me mf mg mh b">[]</code></h1><p id="0caa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想访问一个名字存储在变量中的属性，那么我们应该使用括号符号。</p><p id="e9fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以用下面的代码做到这一点:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5370" class="mq lc iq mh b gy mr ms l mt mu">const obj = {<br/>  foo: 1<br/>}</span><span id="c3a2" class="mq lc iq mh b gy mv ms l mt mu">const getProp = (prop) =&gt; {<br/>  return obj[prop];<br/>}</span><span id="f47d" class="mq lc iq mh b gy mv ms l mt mu">console.log(getProp('foo'));</span></pre><p id="bf35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，我们有带有<code class="fe me mf mg mh b">foo</code>属性的<code class="fe me mf mg mh b">obj</code>对象。此外，我们还有<code class="fe me mf mg mh b">getProp</code>函数，它接受<code class="fe me mf mg mh b">prop</code>参数并返回<code class="fe me mf mg mh b">obj[prop]</code>的值。</p><p id="1328" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为<code class="fe me mf mg mh b">prop</code>是一个变量，所以我们必须用括号符号访问属性值，所以没有其他方法可以动态访问属性。</p><p id="7823" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么在我们例子的最后一行，我们可以如下使用<code class="fe me mf mg mh b">getProp</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a52a" class="mq lc iq mh b gy mr ms l mt mu">getProp('foo')</span></pre><p id="3e28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回<code class="fe me mf mg mh b">obj.foo</code>的值，即1。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/aeb5d77ffb505e686e53332e42d83f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xaroeJoynAb43G9z"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@relentlessjpg?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">William Moreland</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c121" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">计算指数时使用指数运算符<code class="fe me mf mg mh b">**</code></h1><p id="a925" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">指数运算符为我们提供了一种计算指数的更简单的方法。它比从JavaScript的第一个版本开始就有的<code class="fe me mf mg mh b">Math.pow</code>要短。</p><p id="38f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从ES6开始，幂运算符就可用了。例如，代替用<code class="fe me mf mg mh b">Math.pow</code>写下面的内容:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ac49" class="mq lc iq mh b gy mr ms l mt mu">const result = Math.pow(2, 5);</span></pre><p id="0be2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2dd4" class="mq lc iq mh b gy mr ms l mt mu">const result = 2 ** 5;</span></pre><p id="51d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它要短得多，而且我们不再需要调用函数来做取幂运算。</p><h1 id="d47e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="8285" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想将代码转换成ES5并调试构建的ES5代码，那么我们就不应该在代码中使用JavaScript生成器。</p><p id="4f47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">即使使用源代码地图，调试也很困难。</p><p id="a3e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在代码中使用了生成器，那么我们应该确保生成器代码的间距适当。<code class="fe me mf mg mh b">*</code>的间距应符合一致性和易读性标准。</p><p id="a29b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当访问作为有效JavaScript标识符的对象属性时，我们应该使用点符号。否则，我们应该使用括号符号。这包括访问变量和属性名不是有效JavaScript标识符的属性。</p><h1 id="38a4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">用简单英语写的便条</strong></h1><p id="c33c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">plain English . io</strong></a>找到所有这些内容——关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Stranger Things alphabet wall scene using vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用普通JavaScript的陌生事物字母墙场景</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stranger-things-alphabet-wall-scene-using-vanilla-javascript-a4fb9866c87a?source=collection_archive---------10-----------------------#2020-11-07">https://javascript.plainenglish.io/stranger-things-alphabet-wall-scene-using-vanilla-javascript-a4fb9866c87a?source=collection_archive---------10-----------------------#2020-11-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2b7c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用HTML5、CSS3和JavaScript重新创建你自己版本的幽灵字母墙场景</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/f1b008a6585d321036a25c101134ffa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*jungo3Ru4qwa1i6G2RirAA.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Stranger Things alphabet wall scene Season 1 episode 3</figcaption></figure><p id="9438" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你是一个像我一样的陌生事物爱好者，那么我不需要进一步解释，你完全理解我们在这里想要做什么，对吗？回想第一季，威尔消失了，但在另一个维度却留在他家附近，用他母亲在他家放的圣诞灯警告她注意恶魔，并叫她快跑。如果你不是一个陌生事物迷，无论我如何清晰地解释，你都无法理解字母墙有什么令人兴奋的。我们将尝试使用HTML5和CSS3重新创建这面墙，以尽可能接近地模拟图片中显示的灯光；我们将有一个文本输入字段，它将一条消息作为输入，比方说运行并在字母墙上显示它，就像它在陌生人事物场景中发生的那样，也就是说，R上面的灯短暂发光并熄灭，然后U上面的灯发光并停止，最后n上面的灯。JavaScript计时器将用于实现这样的功能。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lk"><img src="../Images/fa02acae89cf0ed3c8ef7f85a40c40d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jPRHyTnD9WjF_zy3iVvS0Q.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Screenshot of my Codepen featuring the alphabet wall we’re trying to build</figcaption></figure><p id="c0a8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了便于在Codepen中显示，从S到Z的字母没有显示，而是在代码中注释掉了。为了开始建造字母墙，我们需要一些圣诞灯。这些灯需要一根线来挂起来。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="2445" class="lu lv in lq b gy lw lx l ly lz">&lt;ul class="wire" id="setOne"&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>            &lt;li&gt;&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="b7f1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">8个li元素的ul列表将被设计成看起来像悬挂在字母A到h上方的灯。接下来定义电线和每个列表项目的样式。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="85e9" class="lu lv in lq b gy lw lx l ly lz">            .wire<br/>            {<br/>                text-align: center;<br/>                white-space: nowrap;<br/>                position: absolute;<br/>                padding: 0;<br/>                width: 100%;<br/>                top: -80px;<br/>                border-bottom: 1px solid black;<br/>                height: 100px;<br/>            }<br/>            .wire li<br/>            {<br/>                position: relative;<br/>                list-style: none;<br/>                margin: 0 15px;<br/>                padding: 0;<br/>                display: inline-block;<br/>                width: 15px;<br/>                height: 25px;<br/>                border-radius: 50%;<br/>                top: 102px;<br/>                background: white;<br/>            }</span></pre><p id="1278" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">圣诞灯的整个造型是从网络忍者YouTube频道的一个很棒的视频中学来的(经过大量的在线搜索)，链接如下<a class="ae ma" href="https://youtu.be/B9OZkATMbag" rel="noopener ugc nofollow" target="_blank">https://youtu.be/B9OZkATMbag</a>这些步骤以一种引人入胜的方式详细描述，它对我帮助很大，希望你也会喜欢这个视频！</p><p id="21e8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一旦灯光设置好，我们就需要字母。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="6ccf" class="lu lv in lq b gy lw lx l ly lz">.eachKey<br/>            {<br/>                height: 30px;<br/>                width: 30px;<br/>                background-color: rgba(0,0,0,0.7);<br/>                color: white;<br/>                font-size: 1rem;<br/>                border-radius: 50%;<br/>                text-align: center;<br/>                float: left;<br/>                margin: 2%;<br/>                box-shadow: 0.25rem 0.25rem 0.5rem 0.75rem rgba(255,255,255,0.2);<br/>            }<br/>            .keypad<br/>            {<br/>                position: relative;<br/>                margin-top: 20vh;<br/>                margin-left: 5vw;<br/>                height: auto;<br/>                width: 100%;<br/>                <br/>                text-align: center;<br/>                color: white;<br/>                background-color: rgba(0,0,0,0.5);<br/>            }</span></pre><p id="93cf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每个键的样式和键的容器都非常简单。相同的HTML结构如下</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="dade" class="lu lv in lq b gy lw lx l ly lz">&lt;div class="keypad"&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                A<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt; <br/>                B<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                C<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                D<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                E<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                F<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                G<br/>            &lt;/div&gt;<br/>            &lt;div class="eachKey"&gt;<br/>                H<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;</span></pre><p id="7727" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这形成了字母墙的第一排，上面有灯。重复以上步骤，直到覆盖所有26个字母。接下来，我们设置一个文本字段，并从用户那里获得一条消息。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7208" class="lu lv in lq b gy lw lx l ly lz">message=document.getElementById("message").value;<br/>message=message.toLocaleUpperCase();</span></pre><p id="d955" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们对消息长度进行循环。对于位置I处的每个字符，执行以下操作</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="8f35" class="lu lv in lq b gy lw lx l ly lz">index=message.charCodeAt(i)-65;</span></pre><p id="6a2f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">字母表的ASCII值从0到25映射到它们的预期范围65到90，以便索引帮助访问所需的灯(或列表项)。根据行的结构，索引将是要打开的灯号。具体到我的例子，所需的代码是</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7f64" class="lu lv in lq b gy lw lx l ly lz">if(index&gt;=0 &amp;&amp; index&lt;=7)<br/>    {<br/>        ele=document.getElementById("setOne").getElementsByTagName("li")<br/>    }</span></pre><p id="1cbd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">类似地，对于索引的其他值，将应用正确的id setTwo或setThree。为了产生灯光打开的效果，我们给它添加了一个盒子阴影。例如，要打开蓝色的灯，我们需要下面的代码</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="3608" class="lu lv in lq b gy lw lx l ly lz">//BLUE<br/>            ele[index].style.backgroundColor='aqua';<br/>            colorValue='rgba(0,153,255,0.8)'<br/>            ele[index].style.boxShadow='0px 2px 20px 4px  #ffff00';</span></pre><p id="cf37" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一旦灯被打开，我们在关掉它和打开下一盏灯之前等待一秒钟。考虑到代码的结构，setTimeout本身并不提供这种功能。它是非阻塞的，所以它只是将回调函数放在队列中，然后继续执行接下来的语句。</p><p id="aabd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在应用框阴影并定义回调函数以将光线重置回原始颜色后，setTimeout调用不起作用。采用基于承诺的方法。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="ecfd" class="lu lv in lq b gy lw lx l ly lz">function sleep(ms) {<br/>    return new Promise(resolve =&gt; setTimeout(resolve, ms));<br/>//Inspired from an example on MDN </span></pre><p id="64a0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">MDN文档中定义的promise对象是一个在创建Promise时未知的值的代理。当事件完成时，它保存异步事件的最终状态或结果。如果事件成功，则承诺被认为已解决或其状态已实现，并返回一个值。如果事件不成功，则拒绝该事件并返回错误对象。resolve函数设置成功终止时的承诺值。</p><p id="fe67" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们等待sleep函数的完成，从而确保程序控制一直等到超时返回，而不是直接进入下一行代码破坏整体效果。</p><p id="cdf9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">等待承诺被返回的函数本身必须是异步的，我们也声明我们的驱动函数是异步的。一旦规定的延迟时间过去，我们将灯泡重置为其原始颜色。</p><h2 id="54be" class="lu lv in bd mb mc md dn me mf mg dp mh kx mi mj mk lb ml mm mn lf mo mp mq mr bi translated"><strong class="ak">结束</strong></h2><p id="a1fd" class="pw-post-body-paragraph ko kp in kq b kr ms jo kt ku mt jr kw kx mu kz la lb mv ld le lf mw lh li lj ig bi translated">我们刚刚做了我们自己的字母墙，我们可以一起玩，甚至给我们的陌生人展示一些东西，亲爱的朋友们也会喜欢的！我的Codepen上有完整的代码，链接如下:【https://codepen.io/Suchandra_Datta/pen/xxbEQdJ T2】</p><p id="313d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">谢谢你读到这里，希望你喜欢。热切期待您的改进建议、最佳实践和任何您想分享的技巧。再次感谢您的时间，祝您愉快。注意安全，保重。编码快乐！</p></div></div>    
</body>
</html>
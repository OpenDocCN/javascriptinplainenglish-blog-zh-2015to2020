<html>
<head>
<title>Create your own Audio Player with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Angular创建您自己的音频播放器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-your-own-audio-player-with-angular-f8766ca505ab?source=collection_archive---------2-----------------------#2020-10-12">https://javascript.plainenglish.io/create-your-own-audio-player-with-angular-f8766ca505ab?source=collection_archive---------2-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4879034bdf47ba2c6d67b49947a1b456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXriiMcZdklXhfZoBBD-6A.png"/></div></div></figure><p id="96c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，您将学习如何使用Angular构建一个简单的音频播放器应用程序。用户界面将使用Angular Material组件编写，我们还将使用一些RxJS操作符来帮助我们与iTunes API进行通信。该应用程序将显示一个界面，让您根据您在搜索框中输入的搜索查询来收听歌曲列表。</p><p id="6517" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以通过克隆这个<a class="ae kw" href="https://github.com/foobearer/Audio-Player" rel="noopener ugc nofollow" target="_blank">库</a>来引用最终的代码。</p><h1 id="1070" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">我们将讨论的话题</strong></h1><ul class=""><li id="0f58" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">如何集成分层组件交互:</li><li id="4597" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">创建包含组件A和b的父组件。</li><li id="0bd4" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">允许组件A使用@Input()数据绑定类从父组件获取一组歌曲。</li><li id="75f7" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">同样，通过使用@Output类授权组件B将字符串传递给父组件。</li><li id="893e" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">如何整合一个搜索功能？</li><li id="c2fc" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">如何导入一些有角的材质组件？</li><li id="3802" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">如何创建使用RxJS操作符的服务？</li></ul><h1 id="6788" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">三维线框模型</h1><p id="fcb9" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在直接进入开发之前，最好创建一个线框或模型，帮助将功能分解成更小的任务块。然后，我们将使用这些任务在整个开发过程中指导我们所有人。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/075fa5290a9ee2b0531988f9c18d8ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*k3yCZG8bccn6mY5RlEfWdQ.png"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Audio Player UI. Created using Sketch.</figcaption></figure><h1 id="e731" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">初始设置</h1><p id="c96d" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated"><em class="mx">确保你已经预先安装了Node.js，Angular CLI，并且它应该和你的IDE绑定在一起。另外，不要忘记在应用程序中安装node_modules。</em></p><ol class=""><li id="9c4e" class="lv lw iq ka b kb kc kf kg kj my kn mz kr na kv nb md me mf bi translated">通过键入以下内容，使用Angular CLI创建新的角度应用程序:</li></ol><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="e214" class="nh ky iq nd b gy ni nj l nk nl">ng new Audio Player</span></pre><p id="0d4f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.然后通过键入以下命令创建父组件:</p><p id="bec8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mx"> g </em> </strong> <em class="mx">代表</em> <strong class="ka ir"> <em class="mx">生成</em> </strong> <em class="mx">和</em> <strong class="ka ir"> <em class="mx"> c </em> </strong> <em class="mx">代表</em> <strong class="ka ir"> <em class="mx">分量。您可以尝试拼出它们，CLI命令仍然可以工作。</em></strong></p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="8081" class="nh ky iq nd b gy ni nj l nk nl">ng g c audio-list</span></pre><p id="3ba0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.现在，我们必须创建一个包含组件A和b的新文件夹。不过，这取决于您自己的偏好，对我来说，我想将所有可重用组件分组到一个文件夹中，以便我知道以后在哪里可以找到它们。</p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="db82" class="nh ky iq nd b gy ni nj l nk nl">mkdir components</span></pre><p id="3c7e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.进入文件夹内部</p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="e0f9" class="nh ky iq nd b gy ni nj l nk nl">cd components</span></pre><p id="bfd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.创建组件A</p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="827a" class="nh ky iq nd b gy ni nj l nk nl">ng g c search-bar</span></pre><p id="d6d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6.创建组件B</p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="a79e" class="nh ky iq nd b gy ni nj l nk nl">ng g c card</span></pre><p id="4db2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，您已经完成了代码库的设置。我们只需要通过添加Angular Material组件来编写UI，并使用@Input和@Output数据绑定类将它们粘合在一起。这些是我们将在下面经历的后续步骤:</p><h1 id="f783" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">构建模板</h1><p id="4164" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们需要从角状材料中进口一些组件。我们可以将它们直接导入到<strong class="ka ir"><em class="mx">app.module.ts</em></strong>文件中，或者创建一个专门导入角度材料的单独文件，然后将该文件导入到app . module . ts中。我更喜欢后者。</p><ol class=""><li id="0085" class="lv lw iq ka b kb kc kf kg kj my kn mz kr na kv nb md me mf bi translated"><strong class="ka ir">创建一个单独的模块来导入所有必需的角材料组件:</strong></li></ol><p id="a3c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mx"> m </em> </strong> <em class="mx">命令代表一个</em> <strong class="ka ir"> <em class="mx">模块。</em> </strong> <em class="mx">您可以通过此</em> <a class="ae kw" href="https://angular.io/cli" rel="noopener ugc nofollow" target="_blank"> <em class="mx">链接</em> </a> <em class="mx">了解更多Angular CLI命令。</em></p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="94b3" class="nh ky iq nd b gy ni nj l nk nl">ng g m material</span></pre><p id="bf5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。在物料模块内部导入以下:</strong></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/c211ce4d0caa182a87da4c4defed0be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ara6DHwD54Ru4MrfX6eg5A.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">material.module.ts file containing components from Angular Material.</figcaption></figure><p id="4962" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3。现在我们已经拥有了所有需要的组件，我们可以开始编写搜索栏的模板了。</strong></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/9aab8798702c9d42d21dc911a7a7417f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pefugxbTtpJDJc-UJXTwIA.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">search-bar.component.html</figcaption></figure><p id="475d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 4。接下来是写卡片的模板。</strong></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/4836cf116e9c5e8f5ab903cc8a17fd0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6AhPuDszq3wq_P5gcTvHqQ.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">card-component.html</figcaption></figure><p id="38cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 5。一旦两个组件都完成了，我们就可以把它组装到父组件上。</strong></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/85d90c7fa0c05c03f976851f959131a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQhUGDv65qQLpNXzzdaN2w.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">audio-list.component.html</figcaption></figure><p id="d20c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6。最后，将这个音频列表组件调用到根模板，即app.component.html。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/5cec4162f4a6782ea73b649af036aa49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WgoqQdcpsxb5n_pKVuxKig.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">app.component.html</figcaption></figure><p id="4a07" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们已经完成了音频播放器模板的编写。您可以通过在终端中键入以下命令来尝试运行该应用程序。</p><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="f284" class="nh ky iq nd b gy ni nj l nk nl">ng serve </span><span id="d9ee" class="nh ky iq nd b gy no nj l nk nl"><em class="mx">or</em> </span><span id="efbe" class="nh ky iq nd b gy no nj l nk nl">npm start</span></pre><p id="da79" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">导航到<a class="ae kw" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank"><em class="mx">https://localhost:4200/</em></a><em class="mx"/>，您应该会看到与下图类似的视图:</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/d97c2804b9695a9247dfc71582452aa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvKW-SrxpJ-jjhkmdX0T7A.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Audio Player on load view.</figcaption></figure><h1 id="b545" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">添加功能</h1><p id="694f" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们现在可以继续构建应用程序的主干。本节的目标是整合应用程序的搜索功能。通过这样做，我们还将涵盖创建服务、使用一些角度数据绑定，以及创建一个新的接口。</p><ol class=""><li id="131b" class="lv lw iq ka b kb kc kf kg kj my kn mz kr na kv nb md me mf bi translated"><strong class="ka ir">创建音频列表服务。</strong></li></ol><pre class="mp mq mr ms gt nc nd ne nf aw ng bi"><span id="457a" class="nh ky iq nd b gy ni nj l nk nl">ng g s audio-list</span></pre><p id="6596" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在音频列表文件中，我们将创建一个负责与iTunes API通信的方法<strong class="ka ir"> getMusicList() </strong>。</p><p id="d589" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你对创建角度HTTP请求不太熟悉，你可以参考我以前的文章<a class="ae kw" href="https://medium.com/javascript-in-plain-english/how-to-make-http-requests-in-angular-using-httpclient-15e1fdf76a03" rel="noopener">这里的</a>获得关于如何创建HTTP请求的详细指南。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/846d0800487c01973dc983d44ef23963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vs6-FEpxKwBhkzIDR1zH1g.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">audio-list-service.ts</figcaption></figure><p id="e513" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。将音频列表服务导入父组件。</strong></p><p id="beb6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的代码中，我们创建了一个<strong class="ka ir"> searchSong() </strong>方法，该方法接受一个字符串，然后将其传递给<em class="mx"> AudioListService </em>类中的<strong class="ka ir"> getMusicList() </strong>函数。</p><p id="0459" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您回头参考我们之前编写的模板<strong class="ka ir">(第5项，构建模板)</strong>部分，您会注意到<em class="mx">&lt;app-search-bar&gt;</em>有一个名为<em class="mx"> searchQuery </em>的<em class="mx"> @Output </em>类，它将在搜索文本框中输入的文本发送到音乐列表组件。这就是父组件从子组件获取数据的方式。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/b4f75e03a9834c0c4e903ad5d89cd82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RR1mMVf7UjCIfzeyAfY3UA.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">audio-list-component.ts</figcaption></figure><p id="519d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，您应该已经能够根据您在搜索栏中输入的搜索查询从iTunes API获得一些响应…但是，要显示结果，我们需要使用<em class="mx"> @Input </em>类将这些数据传递给我们的第二个组件子组件，即<em class="mx"> card-component。</em></p><p id="0e0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3。将数据从父组件传递到子组件。</strong></p><p id="8d81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面的@Input music包含从父组件传递的数据。检查<strong class="ka ir">(Building Templates下的第4项)</strong>部分<strong class="ka ir"> </strong>，看看我们如何迭代到它并显示歌曲细节。</p><p id="b77d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还会注意到，在下面的代码中，我们创建了两个方法，第一个是播放选定的歌曲，另一个是停止播放。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/8f60288ccc8173263a5e6789f7100b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lD5CwZwTuZTKhB2X3Y5sqQ.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">card-component.ts</figcaption></figure><p id="7322" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在可以结束音频播放器的开发了。万一我在这篇文章中漏掉了什么，你可以随时参考我在我的GitHub <a class="ae kw" href="https://github.com/foobearer/Audio-Player" rel="noopener ugc nofollow" target="_blank">账号</a>中推送的代码。:)</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="4518" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">终于，我们现在完成了简单的音频播放器的构建！你现在可以享受听一些你喜欢的歌曲或发现其他你以前没有听过的歌曲。eargasm快乐！</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/7f4556e684f9b661ca950b54f046630c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/1*cVOCkp2-35YlPas7OXewRA.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Audio player demo gif.</figcaption></figure><h1 id="03dc" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="aa42" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">使用Angular构建应用程序不再那么困难，通过使用一些CLI命令，设置应用程序可以很容易地完成，甚至添加文件也可以通过几行命令来实现。这只是弄清楚如何构建它们以及如何使用其他程序员已经开发的现有组件的问题。</p><p id="0697" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们继续探索和建设吧！</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/f6d079fbb14f8a5272f8456ae1ba5601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mgCSQHiyqpu9W1DqEy4V3g.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk">Unsplash Photo by <a class="ae kw" href="https://unsplash.com/@simmerdownjpg" rel="noopener ugc nofollow" target="_blank">Jackson Simmer</a>.</figcaption></figure><p id="bb72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你觉得这个博客有帮助吗？别忘了在评论区留下一些反馈。</p></div></div>    
</body>
</html>
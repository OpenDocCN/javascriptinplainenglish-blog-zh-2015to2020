<html>
<head>
<title>11 things developers should know about GET vs POST</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于GET和POST，开发人员应该知道的11件事</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/get-vs-post-are-you-confident-about-the-differences-189562fac0a7?source=collection_archive---------0-----------------------#2020-03-15">https://javascript.plainenglish.io/get-vs-post-are-you-confident-about-the-differences-189562fac0a7?source=collection_archive---------0-----------------------#2020-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5d8436058bddc53910d501f61445c59b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plHOAQRwXznq_EAo4ZzuHg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@introspectivedsgn?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Erik Mclean</a> on <a class="ae kc" href="https://unsplash.com/s/photos/404?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="35e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很长一段时间以来，我在采访中一直在问这个问题，令人惊讶的是，很多人对两个最常用的RESTful API方法:GET和POST没有足够的了解。因为我相信很多人会觉得不想通读这篇文章，所以我根据这两种方法的不同之处准备了一个简单的小测验，并给出了答案和应用。</p><p id="4dbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> GET还是POST？</strong></p><ol class=""><li id="5efe" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">将浏览器视为客户端，哪个方法的参数存储在浏览器的会话历史中？</li><li id="426b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">考虑一个浏览器作为客户端，哪种方法可以缓存？</li><li id="8656" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪一种是“安全”的方法？</li><li id="4fa4" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪个不是幂等的？</li><li id="d585" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果我将一个端点url复制并粘贴到浏览器的地址栏，然后按enter键，默认情况下会调用哪种方法？</li><li id="10bf" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪个方法请求有主体？</li><li id="4eeb" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">考虑一个静态网站，这个app唯一响应的方法是什么？</li><li id="8fca" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪种方法有长度限制？</li><li id="01ff" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪种方法更安全，应该用来处理敏感数据？</li><li id="e450" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪种方法可以加入书签？</li><li id="c778" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">哪种方法只允许ASCII字符？</li></ol><p id="e413" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你知道所有的答案吗，为什么？如果没有，也没什么好羞愧的。让我们更详细地分析这两种方法，并理解它们的特性。</p><ol class=""><li id="c7d7" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kf ir">获取参数将存储在浏览器的会话历史中。</strong></li></ol><p id="c258" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">浏览器使用它的历史记录来导航用户前进和后退，因此，每个新输入的URL都会自动进入历史记录。但是，如果GET请求是通过SPA(通过ajax或axios)隐式完成的呢？在这种情况下，请求URL必须通过<code class="fe lp lq lr ls b">history.pushState</code>手动推送，它可以在浏览器的URL地址上更新，而无需重定向用户。</p><p id="b04d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑两种不同的场景:</p><p id="2199" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">A.转到<a class="ae kc" href="https://www.kogan.com/au/shop/?q=laptop" rel="noopener ugc nofollow" target="_blank">https://www.kogan.com/au/shop/?q=laptop</a>，点击任意过滤器(例如“免运费”)。网站将发出新的GET请求，获取响应，重新呈现产品列表，更新浏览器url地址，并将url保存在浏览器历史记录中(不一定是这个顺序)。虽然页面没有刷新，但是新的查询仍然被推送到浏览器历史，因此您将能够导航回初始页面。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/041dbf8fecba8bc0018cfb984eff19c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BArYuc0GIFn5zrId9NVSw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image form <a class="ae kc" href="https://www.kogan.com/au/" rel="noopener ugc nofollow" target="_blank">kogan</a></figcaption></figure><p id="005a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择免运费时:</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/a743d6e1a6b9c03d59fbad9ce967c037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkcSpUNVdR03D0fPhbLLhA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image form <a class="ae kc" href="https://www.kogan.com/au/" rel="noopener ugc nofollow" target="_blank">kogan</a></figcaption></figure><p id="98f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，新的请求是在没有刷新页面的情况下发出的，后退按钮现在已启用，浏览器中设置的url甚至与检查中的不同。</p><p id="e1b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">B.现在转到<a class="ae kc" href="https://www.kogan.com/au/shop/?q=laptop" rel="noopener ugc nofollow" target="_blank">https://www.kogan.com/au/shop/?q=laptop</a>，而不是点击任何过滤器，滚动到底部，点击“查看更多”。该网站将发出一个新的GET请求，获取响应，重新呈现产品列表并更新浏览器url地址。但是，它不会将url保存在浏览器历史记录中。虽然页面没有刷新，但由于新查询没有被推送到浏览器历史记录中，您将无法导航回初始页面。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/26f692651dd149ef3939f4ad8007d93c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2-kNfEO6fQt78N75gXwPg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Image form <a class="ae kc" href="https://www.kogan.com/au/" rel="noopener ugc nofollow" target="_blank">kogan</a></figcaption></figure><p id="480f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，新的请求是在没有刷新页面的情况下发出的，即使在浏览器url更改后，back按钮仍然不可用。</p><p id="31a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于POST，如果用户在提交表单后向后导航，数据将被重新提交(浏览器应该提醒用户数据即将被重新提交)，但它不会保留在历史记录中。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/471a01c1be3be76eeedd09e463f051b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*_omSnkU11mSynddgkvpShg.jpeg"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Chrome form resubmission popup</figcaption></figure><p id="5e14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 2。获取可以缓存的响应</strong></p><p id="8a58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为get是等幂的，并且大多数网页资源都是通过这个方法返回的，所以默认情况下浏览器会缓存GET请求。所以下次你访问网页时，不用再去服务器请求所有的图片，它会直接从浏览器的缓存中加载。</p><blockquote class="mb"><p id="273e" class="mc md iq bd me mf mg mh mi mj mk la dk translated">在REST API的上下文中，当发出多个相同的请求与发出一个请求具有相同的效果时——那么这个REST API就称为等幂。</p></blockquote><p id="be29" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">它的好处是，你的网站在第一次之后会加载得更快。但是，如果新部署在其浏览器中缓存了旧网站，则无法到达客户端。因此，要使缓存失效，每个请求的URL必须改变，或者客户端必须在浏览器上改变。举个例子，如果你网站的CSS用URL【cdn-static-1.medium.com/_/fp/css/main-branding-base.<strong class="kf ir"><em class="mq">-y 85 viouz 7m 8 ddbgc 99 ONG</em></strong><em class="mq">来表示。css </em>，一个新的部署只会改变网站的布局，如果这个url被改成类似于<em class="mq">cdn-static-1.medium.com/_/fp/css/main-branding-base.</em>T14】T15】new hashkeyT17】T18】CSS .</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/62c144a770d334d18eafed3bc7969bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTosK6are5iidRfZERe-vQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Medium home page network. Highlight on CSS file.</figcaption></figure><p id="ebed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">帖子不能在客户端缓存。<br/>帖子不是幂等的<strong class="kf ir"> (4) </strong>。</p><p id="5a24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 3。Get是一种安全的方法</strong></p><p id="1b0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为这个方法不应该改变资源(如果它改变了，您就没有实现RESTful最佳实践)，所以它被认为是安全的。</p><blockquote class="mb"><p id="1215" class="mc md iq bd me mf mg mh mi mj mk la dk translated">安全方法是不修改资源的HTTP方法。</p></blockquote><p id="0d18" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">因此，它可以被安全地缓存，保存在浏览器的历史记录中，并保存在搜索引擎上，如谷歌。这是因为参数将存储在URL中，调用方法不会导致服务器发生任何变化。另一方面，POST并不是一个安全的方法。</p><p id="e94f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">7。静态网站只响应GET请求</p><p id="a5d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">静态网站是不需要任何其他工具来处理其文件的应用程序，因为它们将返回浏览器可读的内容(Javascript、图像、CSS、HTML)。因此，它只需要响应GET请求就可以返回html页面。那么，这些信息意味着什么呢？</p><p id="ae8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你知道吗，只要使用AWS S3，你就可以托管一个静态网站。我相信很多人会说是。但是你也知道它只允许GET和HEAD请求。根据他们的<a class="ae kc" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteEndpoints.html" rel="noopener ugc nofollow" target="_blank">文档</a>，S3桶上请求的所有对象都必须通过GET。</p><p id="e3ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 8。哪种方法有长度限制？</strong></p><p id="533a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">理解GET方法在浏览器中总是被翻译成URL(http协议)并且只允许ASCII字符是非常重要的<strong class="kf ir"> (11) </strong>。换句话说，您在浏览器URL地址中输入的任何文本都会生成一个服务器GET请求<strong class="kf ir"> (5) </strong>，而且，即使GET请求是通过网站隐式完成的(例如通过ajax)，它仍然会使用querystring中的参数将其转换为URL格式。</p><p id="2b97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">知道浏览器上的GET请求会通过URL发送参数，你觉得如果过滤器太多会怎么样？虽然这个数字在不同的浏览器之间会略有不同，但安全的URL长度限制通常是2048个字符，减去实际路径中的字符数。因此，如果您正在构建一个网站，其中您的产品可以有大量不同的过滤器，GET方法可能是不够的。</p><p id="9b32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于POST，因为有效负载是在请求体中发送的，所以从技术上讲，对要发送的数据没有限制<strong class="kf ir"> (6) </strong>也没有数据类型限制。</p><p id="c629" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 9。哪种方法更安全，应该用来处理敏感数据？</strong></p><p id="5dc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然很多人都答对了，但他们通常不知道为什么。考虑一个基本的用户密码登录端点，您是否想过为什么它被用于POST而不是GET？是的，与安全有关，但不是因为信息被隐藏。它与我们在这里讨论的第一点有关:浏览器缓存和历史。</p><p id="ed4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">想象一下，如果你开始在浏览器上键入一个网站，它会自动建议一个包含用户和密码的URL作为查询字符串的一部分。这听起来可能很奇怪，但是GET login端点会允许这样做，我确信这不是您想要的。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/f5c35efaa113a2be79c72fcebdfb03b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMQ8VjOxa5Wvot1oHl-D7w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Browser suggesting URLs from history</figcaption></figure><p id="c2c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[added 2020–05–01]一位读者对这篇文章添加了一条非常重要且相关的评论。GET方法很有可能通过您的基础设施被记录。无论是NGINX、AWS Api gateway还是AWS CloudFront，因为get info都要经过一个查询字符串，所以敏感信息会被记录到你的服务器中。您最不希望的事情就是在您的日志文件中包含客户的密码。</p><p id="7813" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">10。哪种方法可以加入书签？</p><p id="3d8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">帖子不应该被收藏，原因是上面讨论的几个主题的组合:</p><ul class=""><li id="5236" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la mt lh li lj bi translated">尝试将文章加入书签只会导致对URL的GET操作。</li><li id="df7b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la mt lh li lj bi translated">该方法不是等幂的，因此不能保证响应总是相同的。例如，这可能导致重复的银行交易。</li><li id="a7cb" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la mt lh li lj bi translated">URL将丢失其参数，因为书签不支持正文有效负载。</li><li id="04d8" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la mt lh li lj bi translated">它可能包含不应存储的敏感数据。</li></ul><p id="d07f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">结论</strong></p><p id="9c44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管GET经常用于获取数据和POST来发送/保存数据，但我们可以得出结论，关于这两种方法还有很多，了解这些特性不仅有助于编写更好的代码，还有助于架构、设计和问题解决。你的分数怎么样？</p><p id="47de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">资源</strong></p><p id="03de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://restfulapi.net/idempotent-rest-apis/" rel="noopener ugc nofollow" target="_blank">https://restfulapi.net/idempotent-rest-apis/</a><br/><a class="ae kc" href="https://www.w3schools.com/tags/ref_httpmethods.asp" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/tags/ref_httpmethods.asp</a><br/><a class="ae kc" href="https://restfulapi.net/http-methods/" rel="noopener ugc nofollow" target="_blank">https://restfulapi.net/http-methods/</a><br/><a class="ae kc" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/Amazon S3/latest/dev/website hosting . html</a></p></div></div>    
</body>
</html>
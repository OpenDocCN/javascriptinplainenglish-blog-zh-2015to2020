<html>
<head>
<title>How to Add Native Notifications to Your Vue.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向您的Vue.js应用程序添加原生通知</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-native-notifications-to-your-vue-js-app-f080af932ac1?source=collection_archive---------0-----------------------#2019-10-11">https://javascript.plainenglish.io/how-to-add-native-notifications-to-your-vue-js-app-f080af932ac1?source=collection_archive---------0-----------------------#2019-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a747" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过HTML5通知API，浏览器可以向用户显示本地弹出通知。使用通知，您可以显示文本和图标，还可以播放声音。选项的完整列表位于<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/notification" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/notification</a>。当用户访问web应用程序以查看浏览器通知时，他们必须授予显示通知的权限。</p><p id="0dfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们使用React，开发人员已经为我们做了艰苦的工作，因为React组件是为了显示浏览器通知而创建的。位于<a class="ae kl" href="https://www.npmjs.com/package/vue-native-notification" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/vue-native-notification</a>的Vue-Native-Notification包可以让我们显示弹出窗口，并处理与显示通知相关的事件，如用户点击通知或处理显示通知的许可或授予或拒绝的情况。</p><p id="ae12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我们将建立一个密码管理器，让您输入，编辑和删除网站的密码，并显示通知，每当这些行动被采取。我们将使用Vue.js来构建应用程序。</p><p id="bd00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们通过运行<code class="fe km kn ko kp b">npx @vue/cli create password-manager</code>来创建项目。在向导中，选择“手动选择功能”，并选择在我们的应用程序中包括Babel、Vue路由器和Vuex。</p><p id="7094" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们安装一些我们需要的库。我们需要Axios进行HTTP请求，Bootstrap Vue进行样式设计，V-Clipboard用于复制到剪贴板功能，Vue-Native-Notification用于显示本机浏览器通知，Vee-Validate用于表单验证。我们通过运行以下命令来安装它们:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="6454" class="ky kz iq kp b gy la lb l lc ld">npm i axios bootstrap-vue v-clipboard vee-validate <!-- -->vue-native-notification</span></pre><p id="72b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装完库之后，我们就可以开始构建应用程序了。首先在<code class="fe km kn ko kp b">components</code>文件夹中，为我们的密码表单创建一个名为<code class="fe km kn ko kp b">PasswordForm.vue</code>的文件。然后在那里，我们加上:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="b879" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kl" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group label="Name"&gt;<br/>        &lt;ValidationProvider name="name" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.name"<br/>            required<br/>            placeholder="Name"<br/>            name="name"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;Name is requied.&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="07a8" class="ky kz iq kp b gy le lb l lc ld">      &lt;b-form-group label="URL"&gt;<br/>        &lt;ValidationProvider name="url" rules="required|url" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.url"<br/>            required<br/>            placeholder="URL"<br/>            name="url"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="0335" class="ky kz iq kp b gy le lb l lc ld">      &lt;b-form-group label="Username"&gt;<br/>        &lt;ValidationProvider name="username" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.username"<br/>            required<br/>            placeholder="Username"<br/>            name="username"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;Username is requied.&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="f4b6" class="ky kz iq kp b gy le lb l lc ld">      &lt;b-form-group label="Password"&gt;<br/>        &lt;ValidationProvider name="password" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;b-form-input<br/>            type="password"<br/>            :state="errors.length == 0"<br/>            v-model="form.password"<br/>            required<br/>            placeholder="Password"<br/>            name="password"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;Password is requied.&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="61b4" class="ky kz iq kp b gy le lb l lc ld">      &lt;b-button type="submit" variant="primary" style="margin-right: 10px"&gt;Submit&lt;/b-button&gt;<br/>      &lt;b-button type="reset" variant="danger" <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="cancel()"&gt;Cancel&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="b693" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="360d" class="ky kz iq kp b gy le lb l lc ld">export default {<br/>  name: "PasswordForm",<br/>  mixins: [requestsMixin],<br/>  props: {<br/>    edit: Boolean,<br/>    password: Object<br/>  },<br/>  methods: {<br/>    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }</span><span id="1d72" class="ky kz iq kp b gy le lb l lc ld">      if (this.edit) {<br/>        await this.editPassword(this.form);<br/>        this.$notification.show(<br/>          "Password edited",<br/>          {<br/>            body: "Password edited"<br/>          },<br/>          {}<br/>        );<br/>      } else {<br/>        await this.addPassword(this.form);<br/>        this.$notification.show(<br/>          "Password added",<br/>          {<br/>            body: "Password added"<br/>          },<br/>          {}<br/>        );<br/>      }<br/>      const response = await this.getPasswords();<br/>      this.$store.commit("setPasswords", response.data);<br/>      this.$emit("saved");<br/>    },<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    }<br/>  },<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  watch: {<br/>    password: {<br/>      handler(p) {<br/>        this.form = JSON.parse(JSON.stringify(p || {}));<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="4413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这个组件中有密码表单。该表单包括名称、URL、用户名和密码字段。都是必须的。我们使用Vee-Validate来验证表单字段。<code class="fe km kn ko kp b">ValidationObserver</code>组件用于验证整个表单，而<code class="fe km kn ko kp b">ValidationProvider</code>组件用于验证它所包装的表单字段。验证规则由每个字段的<code class="fe km kn ko kp b">rule</code>属性指定。我们对URL字段有一个特殊的<code class="fe km kn ko kp b">url</code>规则。当作用域插槽中的<code class="fe km kn ko kp b">errors</code>对象的长度不为零时，我们会显示验证错误消息。<code class="fe km kn ko kp b">state</code>道具用于设置验证状态，当<code class="fe km kn ko kp b">errors</code>长度为0时显示绿色，否则显示红色。错误信息显示在<code class="fe km kn ko kp b">b-form-invalid-feedback</code>组件中。</p><p id="4a1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当用户点击保存按钮时，调用<code class="fe km kn ko kp b">onSubmit</code>功能。我们通过使用<code class="fe km kn ko kp b"> this.$refs.observer.validate();</code>获得表单的验证状态。ref是指<code class="fe km kn ko kp b">ValidationObserver</code>的ref。如果它解析为<code class="fe km kn ko kp b">true</code>，那么我们根据<code class="fe km kn ko kp b">edit</code>属性调用<code class="fe km kn ko kp b">addPassword</code>或<code class="fe km kn ko kp b">editPassword</code>来保存条目。然后我们通过调用<code class="fe km kn ko kp b">getPasswords</code>获得密码，然后通过调度<code class="fe km kn ko kp b">setPasswords</code>变异将密码放入我们的Vuex存储中。然后我们发出<code class="fe km kn ko kp b">saved</code>事件来关闭主页中的模态。通过调用Vue-Native-Notification提供的<code class="fe km kn ko kp b">this.$notification.show</code>来显示通知。第一个参数是通知标题，第二个参数包含正文，第三个参数是可选的事件处理程序，您可以根据需要添加。事件处理者的完整名单在https://www.npmjs.com/package/vue-native-notification上。</p><p id="406d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个主要在编辑现有条目时使用的<code class="fe km kn ko kp b">watch</code>块，我们获得<code class="fe km kn ko kp b">password</code>属性，并通过复制属性将其设置为<code class="fe km kn ko kp b">this.form</code>，这样我们只更新<code class="fe km kn ko kp b">form</code>对象，当数据被绑定时什么也不更新。</p><p id="ca24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们创建一个<code class="fe km kn ko kp b">mixins</code>文件夹，并在其中添加<code class="fe km kn ko kp b">requestsMixin.js</code>。在文件中，添加:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="bd56" class="ky kz iq kp b gy la lb l lc ld">const APIURL = "<a class="ae kl" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="13c1" class="ky kz iq kp b gy le lb l lc ld">export const requestsMixin = {<br/>  methods: {<br/>    getPasswords() {<br/>      return axios.get(`${APIURL}/passwords`);<br/>    },</span><span id="1fac" class="ky kz iq kp b gy le lb l lc ld">addPassword(data) {<br/>      return axios.post(`${APIURL}/passwords`, data);<br/>    },</span><span id="5abc" class="ky kz iq kp b gy le lb l lc ld">editPassword(data) {<br/>      return axios.put(`${APIURL}/passwords/${data.id}`, data);<br/>    },</span><span id="baa7" class="ky kz iq kp b gy le lb l lc ld">deletePassword(id) {<br/>      return axios.delete(`${APIURL}/passwords/${id}`);<br/>    }<br/>  }<br/>};</span></pre><p id="1f68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这包含在后端发出HTTP请求的代码。我们将这个mixin包含在我们的组件中，这样我们就可以从它们发出后端请求。</p><p id="0c00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">Home.vue</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="a698" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Password Manager&lt;/h1&gt;<br/>    &lt;b-button-toolbar&gt;<br/>      &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()"&gt;Add Password&lt;/b-button&gt;<br/>    &lt;/b-button-toolbar&gt;<br/>    &lt;br /&gt;<br/>    &lt;b-table-simple responsive&gt;<br/>      &lt;b-thead&gt;<br/>        &lt;b-tr&gt;<br/>          &lt;b-th&gt;Name&lt;/b-th&gt;<br/>          &lt;b-th&gt;URL&lt;/b-th&gt;<br/>          &lt;b-th&gt;Username&lt;/b-th&gt;<br/>          &lt;b-th&gt;Password&lt;/b-th&gt;<br/>          &lt;b-th&gt;&lt;/b-th&gt;<br/>          &lt;b-th&gt;&lt;/b-th&gt;<br/>          &lt;b-th&gt;&lt;/b-th&gt;<br/>          &lt;b-th&gt;&lt;/b-th&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-thead&gt;<br/>      &lt;b-tbody&gt;<br/>        &lt;b-tr v-for="p in passwords" :key="p.id"&gt;<br/>          &lt;b-td&gt;{{p.name}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;{{p.url}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;{{p.username}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;******&lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button<br/>              v-clipboard="() =&gt; p.username"<br/>              <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="notify('Username copied', 'Username copied')"<br/>            &gt;Copy Username&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button<br/>              v-clipboard="() =&gt; p.password"<br/>              <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="notify('Password copied', 'Password copied')"<br/>            &gt;Copy Password&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openEditModal(p)"&gt;Edit&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kl" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOnePassword(p.id)"&gt;Delete&lt;/b-button&gt;<br/>          &lt;/b-td&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-tbody&gt;<br/>    &lt;/b-table-simple&gt;</span><span id="c51c" class="ky kz iq kp b gy le lb l lc ld">&lt;b-modal id="add-modal" title="Add Password" hide-footer&gt;<br/>      &lt;PasswordForm <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false"&gt;&lt;/PasswordForm&gt;<br/>    &lt;/b-modal&gt;</span><span id="9330" class="ky kz iq kp b gy le lb l lc ld">&lt;b-modal id="edit-modal" title="Edit Password" hide-footer&gt;<br/>      &lt;PasswordForm<br/>        <a class="ae kl" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()"<br/>        <a class="ae kl" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()"<br/>        :edit="true"<br/>        :password="selectedPassword"<br/>      &gt;&lt;/PasswordForm&gt;<br/>    &lt;/b-modal&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="21a1" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import PasswordForm from "@/components/PasswordForm";</span><span id="63e2" class="ky kz iq kp b gy le lb l lc ld">export default {<br/>  name: "home",<br/>  components: {<br/>    PasswordForm<br/>  },<br/>  mixins: [requestsMixin],<br/>  computed: {<br/>    passwords() {<br/>      return this.$store.state.passwords;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllPasswords();<br/>  },<br/>  data() {<br/>    return {<br/>      selectedPassword: {}<br/>    };<br/>  },<br/>  methods: {<br/>    notify(title, body) {<br/>      this.$notification.show(<br/>        title,<br/>        {<br/>          body<br/>        },<br/>        {}<br/>      );<br/>    },<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },<br/>    openEditModal(password) {<br/>      this.$bvModal.show("edit-modal");<br/>      this.selectedPassword = password;<br/>    },<br/>    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("edit-modal");<br/>      this.selectedPassword = {};<br/>    },<br/>    async deleteOnePassword(id) {<br/>      await this.deletePassword(id);<br/>      this.$notification.show(<br/>        "Password deleted",<br/>        {<br/>          body: "Password deleted"<br/>        },<br/>        {}<br/>      );<br/>      this.getAllPasswords();<br/>    },<br/>    async getAllPasswords() {<br/>      const response = await this.getPasswords();<br/>      this.$store.commit("setPasswords", response.data);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="d8df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个文件中，我们有一个表来显示密码条目的列表，并让用户打开和关闭添加和编辑模式。我们在每一行都有按钮来复制用户名和密码，还可以让用户编辑或删除每个条目。</p><p id="fcda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">scripts</code>部分，我们用<code class="fe km kn ko kp b">beforeMount</code>钩子在页面加载期间用我们在mixin中编写的<code class="fe km kn ko kp b">getPasswords</code>函数获取所有密码条目。当编辑按钮被点击时，<code class="fe km kn ko kp b">selectedPassword</code>变量被设置，我们将它传递给<code class="fe km kn ko kp b">PasswordForm</code>进行编辑。</p><p id="d4f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要删除密码，我们在mixin中调用<code class="fe km kn ko kp b">deletePassword</code>向后端发出请求。</p><p id="dfb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此处添加了复制到剪贴板功能。对于复制用户名和密码按钮，我们使用<code class="fe km kn ko kp b">v-clipboard</code>指令让我们在点击按钮时分别将用户名和密码复制到剪贴板。</p><p id="a1dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们这里有删除条目的通知。它们的名称与<code class="fe km kn ko kp b">PasswordForm</code>中的相同。此外，我们添加了一个<code class="fe km kn ko kp b">notify</code>功能，这样我们可以在用户名或密码被复制时通过点击相应的按钮来显示通知。</p><p id="d0d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">App.vue</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="1c88" class="ky kz iq kp b gy la lb l lc ld">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand href="#"&gt;Password Manager&lt;/b-navbar-brand&gt;</span><span id="f093" class="ky kz iq kp b gy le lb l lc ld">&lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="6f7e" class="ky kz iq kp b gy le lb l lc ld">&lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path  == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="85c3" class="ky kz iq kp b gy le lb l lc ld">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="b8ff" class="ky kz iq kp b gy le lb l lc ld">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}</span><span id="78a7" class="ky kz iq kp b gy le lb l lc ld">button {<br/>  margin-right: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="00a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在页面顶部添加一个引导导航条，并添加一个<code class="fe km kn ko kp b">router-view</code>来显示我们定义的路线。</p><p id="106b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来在<code class="fe km kn ko kp b">main.js</code>中，将代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="fc59" class="ky kz iq kp b gy la lb l lc ld">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import Clipboard from "v-clipboard";<br/>import { required } from "vee-validate/dist/rules";<br/>import VueNativeNotification from "vue-native-notification";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";</span><span id="37a7" class="ky kz iq kp b gy le lb l lc ld">extend("required", required);<br/>extend("url", {<br/>  validate: value =&gt; {<br/>    return /^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(<br/>      value<br/>    );<br/>  },<br/>  message: "URL is invalid."<br/>});<br/>Vue.use(BootstrapVue);<br/>Vue.use(Clipboard);<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);<br/>Vue.use(VueNativeNotification, {<br/>  requestOnNotify: true<br/>});<br/>Vue.config.productionTip = false;</span><span id="3c20" class="ky kz iq kp b gy le lb l lc ld">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="f462" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们将安装的库添加到我们的应用程序中，这样我们就可以在组件中使用它。我们从Vee-Validate调用<code class="fe km kn ko kp b">extend</code>来添加我们想要使用的表单验证规则。此外，我们在这里添加了V-Clipboard库，这样我们就可以在我们的主页中使用它。</p><p id="329b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在这里添加了Vue-Native-Notification库:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="7154" class="ky kz iq kp b gy la lb l lc ld">Vue.use(VueNativeNotification, {<br/>  requestOnNotify: true<br/>});</span></pre><p id="6370" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果设置为<code class="fe km kn ko kp b">true</code>，则<code class="fe km kn ko kp b">requestOnNotify</code>设置用于在第一次通知时显示许可提示。</p><p id="86fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">router.js</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="917c" class="ky kz iq kp b gy la lb l lc ld">import Vue from 'vue'<br/>import Router from 'vue-router'<br/>import Home from './views/Home.vue'</span><span id="430e" class="ky kz iq kp b gy le lb l lc ld">Vue.use(Router)</span><span id="7e08" class="ky kz iq kp b gy le lb l lc ld">export default new Router({<br/>  mode: 'history',<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'home',<br/>      component: Home<br/>    }<br/>  ]<br/>})</span></pre><p id="68ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只包含我们的主页。</p><p id="b2bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe km kn ko kp b">store.js</code>中，我们将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="083c" class="ky kz iq kp b gy la lb l lc ld">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="7852" class="ky kz iq kp b gy le lb l lc ld">Vue.use(Vuex);</span><span id="da78" class="ky kz iq kp b gy le lb l lc ld">export default new Vuex.Store({<br/>  state: {<br/>    passwords: []<br/>  },<br/>  mutations: {<br/>    setPasswords(state, payload) {<br/>      state.passwords = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="6f8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将我们的<code class="fe km kn ko kp b">passwords</code>状态添加到存储中，这样我们就可以在<code class="fe km kn ko kp b">PasswordForm</code>和<code class="fe km kn ko kp b">HomePage</code>组件的<code class="fe km kn ko kp b">computed</code>块中观察到它。我们有<code class="fe km kn ko kp b">setPasswords</code>函数来更新<code class="fe km kn ko kp b">passwords</code>状态，我们通过调用<code class="fe km kn ko kp b">this.$store.commit(“setPasswords”, response.data);</code>在组件中使用它，就像我们在<code class="fe km kn ko kp b">PasswordForm</code>中做的那样。此外，我们在这个文件中导入了引导CSS来获取样式。</p><p id="494c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，在<code class="fe km kn ko kp b">index.html</code>中，将现有代码替换为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="0bc4" class="ky kz iq kp b gy la lb l lc ld">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Password Manager&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but vue-clipboard-tutorial-app doesn't work properly<br/>        without JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f404" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">改一下标题。</p><p id="d643" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在所有的努力之后，我们可以通过运行<code class="fe km kn ko kp b">npm start</code>来启动我们的app。</p><p id="05fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了启动后端，我们首先通过运行<code class="fe km kn ko kp b">npm i json-server</code>来安装<code class="fe km kn ko kp b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="9c31" class="ky kz iq kp b gy la lb l lc ld">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe km kn ko kp b">db.json</code>中，将文本改为:</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="d789" class="ky kz iq kp b gy la lb l lc ld">{<br/>  "passwords": [<br/>  ]<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们有了在可用的<code class="fe km kn ko kp b">requests.js</code>中定义的<code class="fe km kn ko kp b">passwords </code>端点。</p><p id="5e9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过所有的努力，我们得到了:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/5cb996c8d9117e86f16c586da2b75c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rl3ZNzB9M4Rh9SThclRE9w.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/f455ed90163c9787f13d80a06ccf516f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BRtAy7G1gHYRTfBjN-mHoA.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/3b08bd9a3f1128ce9350311d2c710546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2y6ggRgCfxSEhuPvIMcRQg.png"/></div></div></figure><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/092daec339a3a77eb4ec6c40195f3715.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*ndHQngnESJZMVlD5NY4Yhw.png"/></div></figure></div></div>    
</body>
</html>
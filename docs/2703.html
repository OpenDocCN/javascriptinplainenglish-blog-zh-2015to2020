<html>
<head>
<title>Creating 3D Layout with CSS using Grid &amp; Transforms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用网格和变换用CSS创建3D布局</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-3d-layout-with-css-using-grid-perspective-65cd03dfc56c?source=collection_archive---------3-----------------------#2020-07-16">https://javascript.plainenglish.io/creating-3d-layout-with-css-using-grid-perspective-65cd03dfc56c?source=collection_archive---------3-----------------------#2020-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/478491b75bbd7564b616f73073396302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/1*wy0PDiPysqceWnKwC6tJsA.gif"/></div></figure><p id="c27f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">CSS网格不仅仅是为了创建平面的2D布局——我们可以充分利用CSS网格，并将其与其他CSS属性结合起来，做很多令人惊叹的事情，比如3D布局(也有一些很棒的形状)。</p><p id="9d5b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你只是想玩代码笔，请随意，否则请继续阅读一些解释/一步一步的过程。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div></figure><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ky"><img src="../Images/ed753432d6f93d9a8616ba1962635114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnuqXixxZNOno1I6cNTm7g.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 1: CSS Grid layout. Top row has an image spanning two columns, bottom row has two images each taking up half the space.</figcaption></figure><p id="9e64" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们需要一些东西来创造这个效果——CSS网格和一些变换。</p><p id="1dd8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们将从一个基本布局(见图1)开始，我们将向它添加一个3D旋转。你可以将它应用到任何类型的布局中，为了演示的目的，我们将保持它的简单。</p><p id="fb05" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们将在最后讨论标题图像中看到的不同形状。</p><p id="3ca2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">布局的HTML将类似于下面的例子。一个网格容器元素，和三个容器来保存我们的图像，或文本或任何你想要的东西。</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="5cd3" class="lm ln iq li b gy lo lp l lq lr"><br/>  &lt;div class="grid"&gt;<br/>    &lt;div class="grid-item"&gt;&lt;img src="../image.jpg"&gt;&lt;/div&gt;<br/>    &lt;div class="grid-item"&gt;&lt;img src="../image.jpg"&gt;&lt;/div&gt;<br/>    &lt;div class="grid-item"&gt;&lt;img src="../image.jpg"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/></span></pre><h2 id="ae87" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kf lz ma mb kj mc md me kn mf mg mh mi bi translated">设置网格</h2><p id="077b" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">我们想先设置网格，CSS is Grid太棒了，我们的例子不需要太多代码，但是根据你想要创建的布局，你可能需要更好一点。</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="ff1f" class="lm ln iq li b gy lo lp l lq lr">.grid {<br/>  display: grid;<br/>  grid-gap: 10px;<br/>  grid-template-columns: 1fr 1fr;<br/>}</span><span id="46f5" class="lm ln iq li b gy mo lp l lq lr">.grid-item {<br/>  height: 200px;<br/>  <br/>  &amp;:nth-child(1) {<br/>   grid-column: 1 / span 2;<br/>  }<br/>  <br/>  &amp;:nth-child(2) {<br/>   grid-row: 2 / span 1;<br/>   grid-column: 1 / span 1;<br/>  }<br/>  <br/>  &amp;:nth-child(3) {<br/>   grid-row: 2 / span 1;<br/>   grid-column: 2 / span 1;<br/>  } <br/>}</span></pre><p id="f3c3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了演示的目的，我们将非常详细，我设置了我的网格，每个项目之间有10px的间隔。我希望底行有2列，所以我们为每列设置一个分数为1的值。</p><p id="4eac" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，我可以使用n-child和grid-row和grid-column属性将我的项目放在网格中。网格行和网格列允许我定义每个项目在网格中的位置，以及开始和结束列是什么。(记住网格线从1开始，而不是从0开始)。</p><p id="fcfa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我的网格项目中有图像，所以我还将添加以下代码，以便它们覆盖整个可用空间。</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="b39f" class="lm ln iq li b gy lo lp l lq lr">img {<br/>   object-fit: cover;<br/>   width: 100%;<br/>   height: 100%;<br/> }</span></pre><h2 id="3a9b" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kf lz ma mb kj mc md me kn mf mg mh mi bi translated">使网格在3D空间中旋转</h2><p id="4877" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">有几种方法可以在CSS中制作3D效果，在这个例子中我们将使用3D变换。</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="b767" class="lm ln iq li b gy lo lp l lq lr">.grid {<br/>   ...<br/>   transform: rotate3d(3, 29, 0, 80deg);<br/>   transform-style: preserve-3d;<br/>   transform-origin: center;<br/>}</span></pre><p id="8bc4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对我来说，搞清楚3D旋转(<a class="ae ms" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotate3d" rel="noopener ugc nofollow" target="_blank"> rotate3D </a>)只是一些尝试和错误，我基本上打开开发工具，编辑风格面板中的数字，直到它看起来像我想要的样子。</p><p id="25ff" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="mt">注意:如果你想像我的例子Codepen一样把它从平的变成旋转的，你可以从</em> <code class="fe mp mq mr li b"><em class="mt">transform:rotate3d(0, 0, 0, 0);</em></code> <em class="mt">开始，然后在你的动画中加入结束状态。(稍后详细介绍)</em></p><p id="79d5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们使用<code class="fe mp mq mr li b">transform-style</code>来确保元素的子元素位于3D空间，所以不要忘记这一部分。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/04434fc51619dec409791d4cd8245878.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/1*KSpSnneubg5E3vIMiL51gA.gif"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 2: transform-origin: top left</figcaption></figure><p id="611e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">属性真的很重要。<code class="fe mp mq mr li b">rotate3D</code>函数围绕固定轴旋转元素— <code class="fe mp mq mr li b">transform-origin</code>定义应用变换的坐标。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/ff21a546d0a9b464286d608e4c1d2e6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/1*dMas6apxnp5or5gDt2Ozyw.gif"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 3: transform-origin: bottom center</figcaption></figure><p id="1b37" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用MDN 上的<a class="ae ms" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin" rel="noopener ugc nofollow" target="_blank">演示图2，演示了左上角的变换原点，这意味着从元素的左上角应用旋转。</a></p><p id="b875" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在图3中，变换原点被设置为中心。这就是我们将在我们的示例中使用的，但是您可以随意选择，找到最适合您的选项。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h2 id="15f8" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kf lz ma mb kj mc md me kn mf mg mh mi bi translated">在3d空间内交错排列项目</h2><p id="49bc" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">在我的例子中，你会看到每个网格项目位于3D空间中的不同点，创建了一个“层”效果。</p><p id="b4c2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了实现这一点，我们可以使用<code class="fe mp mq mr li b">transform</code>属性将<a class="ae ms" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate3d" rel="noopener ugc nofollow" target="_blank"> translate3D </a>函数添加到每个网格项目中。例如:</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="c154" class="lm ln iq li b gy lo lp l lq lr">&amp;:nth-child(1) {<br/>   grid-column: 1 / span 2;<br/>   transform: translate3d(0, 0, 40px);<br/>}</span></pre><p id="e3fd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">translate3D函数的工作方式非常类似于标准的<code class="fe mp mq mr li b">translate</code>，除了你有一个额外的向量。其中translate有x和y轴，<code class="fe mp mq mr li b">translate3d</code>除此之外还有z轴。因为我们希望在3D空间中平移我们的项目，所以我们将x和y值保留为0，并设置z轴。你可以根据自己的需要进行调整，我再次打开开发工具，手动将它放置在样式面板中，直到它看起来像我想要的那样。</p><h2 id="8fb7" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kf lz ma mb kj mc md me kn mf mg mh mi bi translated">制作旋转动画</h2><p id="8682" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">如果你想制作旋转的动画，我使用了CSS动画——从0度开始“平坦”,旋转到80度，为了定位有一些微小的偏移。</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="15bd" class="lm ln iq li b gy lo lp l lq lr"><a class="ae ms" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> rotatediv {<br/> 10% {<br/>  transform:rotate3d(0, 0, 0, 0);<br/> }<br/> 50% {<br/>  transform: rotate3d(3, 29, 0, 80deg);<br/> }<br/> 80% {<br/>  transform:rotate3d(0, 0, 0, 0);<br/> }<br/>}</span></pre><p id="8374" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在父网格元素上，我添加了动画属性</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="53ac" class="lm ln iq li b gy lo lp l lq lr">.grid {<br/>  ...<br/>  animation: 10s rotatediv infinite;<br/>}</span></pre><h2 id="6327" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kf lz ma mb kj mc md me kn mf mg mh mi bi translated">创建非矩形形状</h2><p id="2484" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">你可能已经注意到在这篇文章的英雄图像中，我的图像不是矩形的，相反，它们是不同的形状。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/03e35e3cbe58d21d3a2cf28ed7221d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*o2Hgh10Ulw00yilUMVkaNg.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 4: Overlapping images in 3D space</figcaption></figure><p id="aecd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建类似这样的东西的方法是让网格项目重叠，然后使用<code class="fe mp mq mr li b">clip-path</code>来创建形状。</p><p id="8ee7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用下面的两幅图像，我们将它们都设置为从网格线1开始，跨度为2列。(参见图4中的示例)</p><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="ea26" class="lm ln iq li b gy lo lp l lq lr">&amp;:nth-child(2) {<br/>   grid-column: 1 / span 2;<br/>}</span><span id="cb72" class="lm ln iq li b gy mo lp l lq lr">&amp;:nth-child(3){<br/>   grid-column: 1 / span 2;<br/>}</span></pre><p id="100a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">通过让图像重叠，我们可以把不再需要的部分剪掉。你可以创建任何你想要的形状，一个有用的工具是<a class="ae ms" href="https://bennettfeely.com/clippy/" rel="noopener ugc nofollow" target="_blank"> Clippy </a>，它给你一个界面和一些基本形状。Firefox dev tools还有一个奇妙的路径编辑器，对于更复杂的形状非常有用。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/54f640d8df7d36136e83d876c00942bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*sA4L0LjxThUFkQQCHcEeTg.png"/></div></figure><pre class="ks kt ku kv gt lh li lj lk aw ll bi"><span id="98f1" class="lm ln iq li b gy lo lp l lq lr">&amp;:nth-child(2) {<br/>   grid-column: 1 / span 2;<br/>   clip-path: polygon(0 0, calc(100% - 10px) 0, calc(50% - 10px) 100%, 0% 100%);</span><span id="dd92" class="lm ln iq li b gy mo lp l lq lr">}</span><span id="b3d5" class="lm ln iq li b gy mo lp l lq lr">&amp;:nth-child(3){<br/>   grid-column: 1 / span 2;<br/>   clip-path: polygon(100% 0, 50% 100%, 100% 100%);<br/>}</span></pre><p id="3e41" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">用<code class="fe mp mq mr li b">clip-path</code>你需要定义每个坐标的位置。我已经使用calc函数将边界与我之前设置的<code class="fe mp mq mr li b">grid-gap</code>相匹配(你可以使用一个变量来确保它的一致性)。</p><p id="3b41" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用这种技术，您可以创建各种形状和布局，并且可以将它与3D透视图相结合来创建一些真正有趣的效果。在Codepen上查看我的<a class="ae ms" href="https://codepen.io/collection/XzePLw" rel="noopener ugc nofollow" target="_blank">布局实验集</a>中的一些例子。</p><div class="ks kt ku kv gt ab cb"><figure class="ne jr nf ng nh ni nj paragraph-image"><img src="../Images/fd996e4242e5e695d32925f4b40ac5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*i1QmYJITY2ChELnTgqclKQ.png"/></figure><figure class="ne jr nk ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><img src="../Images/d2bc68923dd4c19b527ea532d8df0786.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*UlvawrC76A8t13doxPpVvg.png"/></div></figure></div><div class="ab cb"><figure class="ne jr nl ng nh ni nj paragraph-image"><img src="../Images/76b6432743781d47992293e31dae8d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*FusG7rtk5YXJwONt96Kw-Q.png"/></figure><figure class="ne jr nm ng nh ni nj paragraph-image"><img src="../Images/18d95ed64a8b119a840f85da3045ef41.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*3hEb2DiOe5Vykm5nR8BJPQ.png"/></figure></div><p id="fb19" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这留给我们最后的效果，你可以<a class="ae ms" href="https://codepen.io/mandymichael/pen/ExPebjY" rel="noopener ugc nofollow" target="_blank">在Codepen </a>上找到。这里真的有很多选择，去尝试，享受乐趣。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/478491b75bbd7564b616f73073396302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/1*wy0PDiPysqceWnKwC6tJsA.gif"/></div></figure><p id="4141" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">谢谢，玩得开心。<br/>小敏💜</p></div></div>    
</body>
</html>
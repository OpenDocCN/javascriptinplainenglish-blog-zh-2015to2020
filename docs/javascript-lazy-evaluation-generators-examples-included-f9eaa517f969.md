# JavaScript æƒ°æ€§è¯„ä¼°:ç”Ÿæˆå™¨(åŒ…æ‹¬ç¤ºä¾‹)

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/javascript-lazy-evaluation-generators-examples-included-f9eaa517f969?source=collection_archive---------2----------------------->

## JavaScript Alpha æŒ‡å—

## ä»€ä¹ˆæ˜¯ JavaScript ç”Ÿæˆå™¨ï¼Ÿæ·±å…¥çš„æ•™ç¨‹å’ŒçœŸå®çš„ç”¨ä¾‹ç¤ºä¾‹ã€‚

![](img/8ca5e4692386b2b8b140e66f1eed44dd.png)

åœ¨[ä¹‹å‰çš„æ–‡ç« ](https://medium.com/@MelkorNemesis/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)ä¸­ï¼Œæˆ‘ä»¬çœ‹äº† JavaScript **è¿­ä»£å™¨**å’Œ**è¿­ä»£å™¨**ã€‚å®ƒä»¬æ˜¯**ç”Ÿæˆå™¨**çš„å…ˆå†³æ¡ä»¶ï¼Œä¼šè®©ä½ æ›´å¥½åœ°ç†è§£ä»Šå¤©çš„ä¸»é¢˜ã€‚å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ Iterables å’Œ Iteratorsï¼Œç°åœ¨å°±å»è¯»å®ƒï¼Œç„¶åå›åˆ°è¿™é‡Œã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†å›é¡¾ä¸€äº›ç†è®ºï¼Œåœ¨æœ¬æ–‡çš„ç»“å°¾ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹ç”Ÿæˆå™¨çš„çœŸå®ç”¨ä¾‹ã€‚

# æ‡’æƒ°è¯„ä¼°

è®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾ä¸€ä¸‹**æ‡’è¯„**æ˜¯ä»€ä¹ˆæ„æ€ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆã€‚

**æƒ°æ€§æ±‚å€¼**çš„æ„æ€æ˜¯å°†è¡¨è¾¾å¼çš„æ±‚å€¼å»¶è¿Ÿåˆ°éœ€è¦çš„æ—¶å€™ã€‚æƒ°æ€§è¯„ä¼°æœ‰æ—¶è¢«ç§°ä¸º**æŒ‰éœ€è°ƒç”¨**ã€‚

æƒ°æ€§è¯„ä¼°å¯ä»¥:

*   å®šä¹‰æ½œåœ¨çš„æ— é™æ•°æ®ç»“æ„
*   é€šè¿‡é¿å…ä¸å¿…è¦çš„è®¡ç®—æ¥æé«˜æ€§èƒ½
*   ä¸ºå¸Œæœ›å…¶å…ƒç´ å¯ä¾›å…¬ä¼—è®¿é—®çš„æ•°æ®ç»“æ„å®šåˆ¶è¿­ä»£è¡Œä¸º

![](img/40d455ed760676d291346f96d6ee1cca.png)

# å‘ç”µæœº

## ä»€ä¹ˆæ˜¯å‘ç”µæœº

æˆ‘å‘ç°ç»´åŸºç™¾ç§‘çš„å®šä¹‰éå¸¸å‡†ç¡®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè¯´çš„:

> åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥æ§åˆ¶å¾ªç¯è¿­ä»£è¡Œä¸ºçš„ä¾‹ç¨‹ã€‚æ‰€æœ‰ç”Ÿæˆå™¨ä¹Ÿæ˜¯è¿­ä»£å™¨ã€‚ç”Ÿæˆå™¨ä¸è¿”å›æ•°ç»„çš„å‡½æ•°éå¸¸ç›¸ä¼¼ï¼Œå› ä¸ºç”Ÿæˆå™¨æœ‰å‚æ•°ï¼Œå¯ä»¥è¢«è°ƒç”¨ï¼Œå¹¶ç”Ÿæˆä¸€ç³»åˆ—å€¼ã€‚ä½†æ˜¯ï¼Œç”Ÿæˆå™¨ä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯æ„å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å€¼çš„æ•°ç»„å¹¶ä¸€æ¬¡è¿”å›æ‰€æœ‰å€¼ï¼Œè¿™éœ€è¦è¾ƒå°‘çš„å†…å­˜å¹¶å…è®¸è°ƒç”¨è€…ç«‹å³å¼€å§‹å¤„ç†å‰å‡ ä¸ªå€¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç”Ÿæˆå™¨çœ‹èµ·æ¥åƒå‡½æ•°ï¼Œä½†è¡Œä¸ºåƒè¿­ä»£å™¨ã€‚
> 
> [https://en . Wikipedia . org/wiki/Generator _(è®¡ç®—æœºç¼–ç¨‹)](https://en.wikipedia.org/wiki/Generator_(computer_programming))

æ¢å¥è¯è¯´ï¼Œç”Ÿæˆå™¨æ˜¯ç±»å›ºé†‡ä¸Šçš„è¿­ä»£å™¨ã€‚ä¸è¿­ä»£å™¨ç›¸æ¯”ï¼Œå®ƒæ¥å—å‚æ•°ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°è°ƒç”¨ã€‚

ç»´åŸºç™¾ç§‘çš„å¼•ç”¨æ²¡æœ‰æåˆ°çš„æ˜¯ï¼Œä½ ä¸ä»…å¯ä»¥ä»ç”Ÿæˆå™¨ä¸­è·å–å€¼ï¼Œè¿˜å¯ä»¥å‘ç”Ÿæˆå™¨å‘é€å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**ç”Ÿæˆå™¨ä¸ä»…æ˜¯è¿­ä»£å™¨ï¼Œè¿˜æ˜¯è§‚æµ‹å™¨**ã€‚

## è¿­ä»£åè®®

å‘ç”µæœºç¬¦åˆ`Iterable`å’Œ`Iterator`ä¸¤ç§æ¥å£ã€‚è¿™æ„å‘³ç€è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°çš„ç»“æœæ˜¯`Iterable`å’Œ`Iterator`ï¼Œå¹¶ä½¿ç”Ÿæˆå™¨æˆä¸º**æ•°æ®ç”Ÿäº§è€…**ã€‚

ä½¿ç”¨ç±»å‹è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å®šä¹‰æ¥å£:

![](img/bb0f836814fa263169b19474c21e06c4.png)

Iterator and Iterable interfaces

å…³äº**è¿­ä»£åè®®**çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§[ä¸Šä¸€ç¯‡æ–‡ç« ](https://medium.com/@MelkorNemesis/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)ï¼Œåœ¨é‚£é‡Œæˆ‘è¯¦ç»†è®¨è®ºäº†å®ƒã€‚

## è§‚å¯Ÿè€…ç•Œé¢

ç”Ÿæˆå™¨éµå¾ªçš„å¦ä¸€ä¸ªæ¥å£æ˜¯`Observer`æ¥å£ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä½¿å¾—ç”Ÿæˆå™¨æˆä¸ºæ•°æ®æ¶ˆè´¹è€…ã€‚å½“ç”Ÿæˆå™¨æš‚åœæ—¶ï¼Œå®ƒä»¬ä¼šç­‰å¾…è¾“å…¥ã€‚

> ç”Ÿæˆå™¨æ¯æ¬¡ç‚¹å‡»`yield`å…³é”®å­—æ—¶éƒ½ä¼šç­‰å¾…è¾“å…¥ã€‚

æœ‰ä¸‰ç§ç±»å‹çš„å‘ç”µæœºè¾“å…¥:

*   `next(value?: any)` =å‘å‘ç”µæœºå‘é€ä¸€ä¸ªå€¼
*   `return(value?: any)` =ç»ˆæ­¢å‘ç”µæœº
*   `throw(error)` =åœ¨ç”Ÿæˆå™¨å†…éƒ¨æŠ›å‡ºå¼‚å¸¸

ä½¿ç”¨ç±»å‹è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å®šä¹‰æ¥å£:

![](img/a3607004fd3721074ca9f207b7587c79.png)

Observer interface

## å¥æ³•

**å‘ç”µæœºåŠŸèƒ½**è¿”å›ä¸€ä¸ª**å‘ç”µæœº**ã€‚å¯¹äºå¦‚ä½•åˆ›å»ºç”Ÿæˆå™¨å‡½æ•°ï¼Œæœ‰å››ä¸ªé€‰é¡¹:

**å‘ç”µæœºåŠŸèƒ½å£°æ˜**

![](img/b40f4f5776f1331882904022dc29b768.png)

Generator function declaration

**ç”Ÿæˆå™¨å‡½æ•°è¡¨è¾¾å¼**

![](img/417ff8300f29777a526fded19ed83d2d.png)

Generator function expression

**ç”Ÿæˆå™¨æ–¹æ³•(å¯¹è±¡æ–‡å­—)**

![](img/f5a9fce9b7f644d1e59555788d566479.png)

Generator method (object literal)

**ç”Ÿæˆå™¨æ–¹æ³•(ç±»)**

![](img/3e42ea3d2180956aa87baf4cb1dbd57c.png)

Generator method (class)

æ³¨æ„æ˜Ÿå·(`*`)çš„ä½ç½®æ²¡æœ‰åŒºåˆ«ã€‚æœ‰é‰´äºæ­¤ï¼Œä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç­‰æ•ˆçš„:

*   `function* generator() {}`
*   `function * generator() {}`
*   `function *generator() {}`

**å‘ç”µæœºåŠŸèƒ½ä¸å‘ç”µæœº**

å¦‚æœæˆ‘ä»¬æ£€æŸ¥`generator.__proto__`å’Œ`gen.__proto__`ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`generator`æ˜¯ä¸€ä¸ª`GeneratorFunction`(æ„é€ å‡½æ•°)ï¼Œå®ƒç¼–æ’äº†ä¸€ä¸ªæ–°çš„`Generator`å¯¹è±¡çš„åˆ›å»ºã€‚

![](img/e520897384604066a621fbc290b5f730.png)

Generator function vs. generator

## åŠ¨æ€ç”Ÿæˆå‡½æ•°åˆ›å»º

æ‚¨ä¹Ÿå¯ä»¥åŠ¨æ€å£°æ˜ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå°½ç®¡æˆ‘å»ºè®®æ‚¨æ°¸è¿œä¸è¦è¿™æ ·åšã€‚æˆ‘æåˆ°è¿™ä¸€ç‚¹åªæ˜¯ä¸ºäº†å®Œæ•´ã€‚å› ä¸ºæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§ä¸å¥½çš„åšæ³•ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»æ›´å¤šå…³äºè¿™ä¸ªè¯é¢˜çš„å†…å®¹[ã€‚](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction)

## `Run To The Next yield`

å¸¸è§„åŠŸèƒ½éµå¾ªæ‰€è°“çš„**è¿è¡Œåˆ°å®Œæˆ**æ¨¡å‹ã€‚è¦é€€å‡ºå¸¸è§„åŠŸèƒ½ï¼Œæ‚¨å¿…é¡»:

*   `return`ä»å®ƒ
*   `throw`ä¸€ä¸ªé”™è¯¯

å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰`return`è¯­å¥ï¼Œè¯¥å‡½æ•°é»˜è®¤è¿”å›`undefined`ã€‚

å¦‚æœæ‚¨å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œå®ƒå°†ä»å¤´å¼€å§‹ï¼Œå¹¶ä¸€ç›´åŒæ­¥æ‰§è¡Œåˆ°é€€å‡ºç‚¹ã€‚

å¯¹äºå¸¸è§„å‡½æ•°ï¼Œæ‚¨é€šè¿‡å‚æ•°ä¼ é€’ä¸­çš„å€¼**ï¼Œé€šè¿‡`return`è¯­å¥ä¼ é€’**ä¸­çš„å€¼**ã€‚**

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

**å‘ç”µæœº**å¦ä¸€æ–¹é¢**å¯ä»¥ä¸­é€”åœæ­¢**å’Œ**æš‚åœè‡ªèº«**ã€‚

> äº§é‡æ˜¯æ¯å°å‘ç”µæœºçš„æ ¸å¿ƒå’Œçµé­‚ã€‚

è¿™ç§æš‚åœæœºåˆ¶ä½¿**åŒå‘ä¿¡æ¯åœ¨å‘ç”Ÿå™¨åŠå…¶æ§åˆ¶æœºåˆ¶ä¹‹é—´ä¼ é€’**ã€‚æ¯æ¬¡`yield`ä½ å‘é€æ¶ˆæ¯**åˆ°**ï¼Œæ¯æ¬¡é‡å¯ä½ å‘é€æ¶ˆæ¯**åˆ°**ã€‚

> ç”Ÿæˆå™¨å°†æ§åˆ¶æƒäº¤è¿˜ç»™è°ƒåº¦ç¨‹åºï¼Œä»¥ä¾¿å®ƒå¯ä»¥è¿è¡Œå¦ä¸€ä¸ªä»»åŠ¡ã€‚

æˆ‘å°†åœ¨æœ¬æ–‡åé¢è®¨è®ºåä½œå¼å¤šä»»åŠ¡å¤„ç†æ—¶è¯¦ç»†é˜è¿°è¿™ä¸ªä¸»é¢˜ã€‚

## ä»ç”Ÿæˆå™¨ä¸­æå–å€¼

é€šè¿‡å°†ç”Ÿæˆå™¨ç”¨ä½œè¿­ä»£å™¨(å’Œ/æˆ–å¯è¿­ä»£çš„),æ‚¨å¯ä»¥ä»ä¸­æå–å€¼ã€‚

ç”Ÿæˆå™¨ä½¿ç”¨å…³é”®å­—`yield`ç”Ÿæˆä¸€ç³»åˆ—å€¼ã€‚æ§åˆ¶æœºåˆ¶(åœ¨è¿™ç§æƒ…å†µä¸‹åªæœ‰æˆ‘ä»¬)å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨ä¸Šçš„`next()`æ–¹æ³•è®¿é—®ä¸‹ä¸€ä¸ªåºåˆ—å€¼ã€‚

![](img/8ba5c9881204822cc361eaa50fd7dd5d.png)

Pulling values from a generator, with a return statement

ä¹‹å‰çš„ç”Ÿæˆå™¨æœ‰ä¸€ä¸ªæ˜¾å¼çš„`return`ã€‚æ³¨æ„ï¼Œå½“`done`ä¸º`true`æ—¶ï¼Œå¤§å¤šæ•°ä½¿ç”¨ iterables çš„æ„é€ éƒ½ä¼šå¿½ç•¥`value`ã€‚`yield*`è¿ç®—ç¬¦ç¡®å®è€ƒè™‘äº†è¿”å›å€¼ï¼Œæˆ‘ä»¬ç¨åä¼šçœ‹åˆ°è¿™ä¸€ç‚¹ã€‚

![](img/10a8e173c9b4b2dad5ec5eb7668f66cd.png)

Pulling values from a generator, without return statement

å¦‚æœä¸åœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨`return`ï¼Œå®ƒä¼šéšå¼è¿”å›`undefined`ï¼Œå¹¶ä¸”å†è°ƒç”¨ä¸€æ¬¡`next()`æ¥æ¶ˆè€—è¿­ä»£å™¨ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆå™¨ç­‰å¾…ä¼ å›ä¸€ä¸ªå€¼ï¼Œåœ¨è¯¥å€¼ä¸­é‡æ–°å¯åŠ¨å¹¶å®Œæˆç”Ÿæˆå™¨ã€‚çœ‹å®Œä¸‹ä¸€èŠ‚ä½ å°±æ˜ç™½äº†ã€‚

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

å› ä¸ºç”Ÿæˆå™¨å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥å°†å®ƒä»¬ä¸æœŸæœ›å¯è¿­ä»£çš„ ES6 è¯­è¨€ç»“æ„ä¸€èµ·ä½¿ç”¨:

*   `**for ... of**`(å¾ªç¯)
*   `**...**`(ä¼ æ’­ç®—å­)
*   `const **[a, b, ..]** = iterable;`(ç ´åä»»åŠ¡)
*   `**yield***`(å‘ç”µæœºå§”æ‰˜)

å‚è§[ä¸Šä¸€ç¯‡å…³äºè¿­ä»£å™¨å’Œ iterable çš„æ–‡ç« ](https://medium.com/javascript-in-plain-english/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## å°†å€¼æ¨å…¥ç”Ÿæˆå™¨

å‰é¢æˆ‘è¯´è¿‡ç”Ÿæˆå™¨ç¬¦åˆ`Observer`æ¥å£ã€‚ç”Ÿæˆå™¨æ¯æ¬¡ç‚¹å‡»`yield`å…³é”®å­—æ—¶éƒ½ä¼šç­‰å¾…è¾“å…¥ã€‚

![](img/0d23aeffbd4fac730be17a3a985846fe.png)

Pushing value to a generator

è°ƒç”¨`generator()`åªä¼šåˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚è¦çœŸæ­£å¯åŠ¨å‘ç”µæœºå¹¶åœ¨ç¬¬ä¸€æ¬¡`yield`æš‚åœï¼Œæ‚¨å¿…é¡»è°ƒç”¨`next()`ã€‚åªæœ‰è¿™æ ·ï¼Œå®ƒæ‰å‡†å¤‡å¥½è¾“å…¥ã€‚

**ç‰¢è®°** `**next()**` **æ–¹æ³•åœ¨å‘ç”µæœºä¸Šæ˜¯ä¸å¯¹ç§°çš„**ã€‚å½“è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ—¢å‘å½“å‰æŒ‚èµ·çš„`yield`å‘é€ä¸€ä¸ªå€¼ï¼ŒåŒæ—¶åˆè¿”å›åé¢çš„`yield`çš„`{ value, done }`å¯¹ã€‚

å½“å‘ç”Ÿå™¨åœ¨`yield`å¤„æš‚åœæ—¶ï¼Œè°ƒç”¨`next(value)`å‘å‘ç”Ÿå™¨ä¼ é€’ä¸€ä¸ªå€¼ã€‚ä¼ é€’çš„`value`ç„¶ååœ¨é€‚å½“çš„ä½ç½®æ›¿æ¢`yield`ã€‚æ‰€ä»¥å½“ç”Ÿæˆå™¨è¿è¡Œåˆ°ç¬¬`(C)`è¡Œæ—¶ï¼Œå®é™…ä¸Šä¸æ‚¨å†™çš„ä¸€æ ·:

![](img/efdb6154d373314f8a23d8f8518c3415.png)

Pushing value to a generator, yields replaced

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

`{ value, done }`å¯¹è¢«ç§°ä¸º`IteratorResult`ã€‚æ›´å¤šä¿¡æ¯è§[ä¸Šä¸€ç¯‡æ–‡ç« ](https://medium.com/javascript-in-plain-english/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)ã€‚

## å‘ç”µæœºå§”æ‰˜

æœ‰æ—¶ä½ ä¼šæ„è¯†åˆ°ä½ çš„ç”Ÿæˆå™¨å‡½æ•°å¤ªé•¿äº†ã€‚ä½ æƒ³æŠŠä¸€å †ä»£ç æå–åˆ°ä¸åŒçš„ç”Ÿæˆå™¨ä¸­ã€‚æ­¤å¤–ï¼Œæ‚¨éœ€è¦ä¸€ç§æ–¹æ³•æ¥è°ƒç”¨è¿™ä¸ªæå–çš„ç”Ÿæˆå™¨ï¼Œå¹¶ç¡®ä¿ä»åŸå§‹ç”Ÿæˆå™¨ç”Ÿæˆçš„æ‰€æœ‰å€¼ä»ç„¶è¢«ç”Ÿæˆï¼Œä½†è¿™ä¸€æ¬¡æ˜¯ä»å­ä¾‹ç¨‹ç”Ÿæˆçš„ã€‚è¿™å°±æ˜¯`yield*`ä»‹å…¥çš„åœ°æ–¹ã€‚

è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:

![](img/3f893d9f2bb18c8a1ac10131f7110a4b.png)

Generator delegation, before refactoring

å‡è®¾æ‚¨æƒ³å°†çº¿`(A)`å’Œ`(B)`æå–åˆ°å¦ä¸€ä¸ªå‘ç”µæœºã€‚è¿™ä¸æˆé—®é¢˜ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`subGenerator`ç”Ÿæˆå™¨å‡½æ•°å¹¶å°†ä»£ç æ”¾åœ¨é‚£é‡Œã€‚

![](img/8a361e105eb95cd91656210de3bb80eb.png)

Generator delegation, re-yielding values from a subroutine

ç°åœ¨æˆ‘ä»¬éœ€è¦è¿­ä»£æ–°æå–çš„ç”Ÿæˆå™¨ï¼Œå¹¶åœ¨ç¬¬`(X)`è¡Œäº§ç”Ÿæˆ‘ä»¬ä»ä¸­æå–çš„å€¼ã€‚é‚£å¾ˆå¥½ï¼Œä½†æ˜¯â€¦

æˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ã€‚æˆ‘ä»¬å¯ä»¥ç”¨`yield*`ã€‚

![](img/7435b41b22c0d347e5f02ebde11fda7d.png)

Generator delegation, using yield*

`**yield***` **åœ¨è¿›å…¥ä¸‹ä¸€æ¡ç”Ÿäº§çº¿ä¹‹å‰ï¼ŒåŒæ­¥æ’ç©ºä¼ å…¥çš„å‘ç”µæœºã€‚**

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

> å½“ç”¨`yield*`è°ƒç”¨å­ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥æ•è·ä»ç”Ÿæˆå™¨è¿”å›çš„å€¼ã€‚

å‰é¢æˆ‘æåˆ°è¿‡ï¼Œå½“`done`æ˜¯`true`æ—¶ï¼Œå¤§å¤šæ•°ä½¿ç”¨ iterables çš„æ„é€ å¿½ç•¥äº†`value`ï¼Œè€Œ`yield*`æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå®é™…ä¸Šç¡®å®è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ã€‚

![](img/632019456f815da363e69cce6767001b.png)

Generator delegation, returning from yield*

å½“`(A)`çº¿ä¸Šçš„å‘ç”µæœº`subGenerator`è¢«æ¶ˆè€—åï¼Œè¿”å›`3`ã€‚ç„¶ååœ¨`number`å˜é‡ä¸­æ•è·ã€‚è¯·å‚è§**ç¤ºä¾‹/ DOM äº‹ä»¶å¤„ç†ç¨‹åº**éƒ¨åˆ†ï¼Œäº†è§£è¿™ä¸ºä»€ä¹ˆæœ‰ç”¨ã€‚

## æ¸…é™¤

ç±»ä¼¼äºè¿­ä»£å™¨ï¼Œå½“çªç„¶å®Œæˆæ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æ‰§è¡Œæ¸…ç†ã€‚ä¸ºäº†ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæ˜¯çªç„¶å®Œæˆï¼Œå‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ‰“å¼€æ–‡æœ¬æ–‡ä»¶çš„ç”Ÿæˆå™¨ã€‚æ‚¨å¯¹ç”Ÿæˆå™¨è¿›è¡Œå¾ªç¯ï¼Œè¯¥ç”Ÿæˆå™¨é€è¡Œå‘æ¶ˆè´¹è€…ç”Ÿæˆæ–‡æœ¬æ–‡ä»¶ã€‚å½“æ²¡æœ‰æ›´å¤šçš„è¡Œäº§ç”Ÿæ—¶ï¼Œç”Ÿæˆå™¨å…³é—­æ–‡ä»¶ã€‚

ä½†æ˜¯å¦‚æœä½ ä¸å¾ªç¯æ‰€æœ‰çš„è¡Œå‘¢ï¼Ÿè¿™å°†ä½¿æ–‡ä»¶æè¿°ç¬¦æŒ‚èµ·ï¼Œæ°¸è¿œä¸ä¼šå…³é—­ã€‚è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯æ˜è¿™ä¸€ç‚¹ã€‚

![](img/d079d62685c76725a7e021468479b4e3.png)

Generator cleanup after abrupt completion

ä¸ºäº†èƒ½å¤Ÿæ•æ‰ç¬¬`(A)`è¡Œçš„çªç„¶ç»“æŸï¼Œæ‚¨å°†ç”Ÿæˆå™¨å†…éƒ¨çš„ä»£ç åŒ…è£…åˆ°ä¸€ä¸ª`try/finally`å—ä¸­ã€‚å½“åœ¨`try`å—ä¸­çªç„¶å®Œæˆæ—¶ï¼Œä»£ç ç»§ç»­åœ¨`finally`å—çš„ç¬¬`(B)`è¡Œæ‰§è¡Œï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥æ‰§è¡Œä»»ä½•æ¸…é™¤ã€‚

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

è¯·éšæ„é€šè¯»[ä¸Šä¸€ç¯‡æ–‡ç« ](https://medium.com/javascript-in-plain-english/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)ï¼Œè¯¥æ–‡ç« ä¹Ÿæè¿°äº†ä»€ä¹ˆæ„é€ äº†æ²¡æœ‰è¢«æ¶ˆè€—çš„å°é—­è¿­ä»£å™¨ï¼Œæˆ–è€…ä»€ä¹ˆå¯ä»¥æå‰ç»ˆæ­¢è¿­ä»£ã€‚

## æŠ›å‡ºå¼‚å¸¸å¹¶è¿”å›å€¼

æ‚¨ä¸ä»…å¯ä»¥å‘ç”Ÿæˆå™¨ä¼ é€’ä¸€ä¸ªå€¼ï¼Œè¿˜å¯ä»¥è®©ç”Ÿæˆå™¨**è¿”å›å€¼**æˆ–**æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸**ã€‚

é™¤äº†`next()`æ–¹æ³•ï¼Œç”Ÿæˆå™¨ä¸Šè¿˜æœ‰å¦å¤–ä¸¤ç§æ–¹æ³•å¯ç”¨ï¼Œæ¥è‡ª`Observer`æ¥å£ã€‚

*   `return()`
*   `throw()`

è¯·æ³¨æ„ï¼Œåªæœ‰å½“æ‚¨èƒ½å¤Ÿæ§åˆ¶ç”Ÿæˆå™¨çš„å‰è¿›æ–¹å¼æˆ–è€…ä½¿ç”¨è¿è¡Œç”Ÿæˆå™¨çš„åç¨‹æ—¶ï¼Œæ‚¨æ‰èƒ½ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

**è¿”å›å€¼**

å½“ä½ è°ƒç”¨`gen.return(value?)`æ—¶ï¼Œå‘ç”Ÿå™¨ä¸ä¼šæ¢å¤å®ƒæ­£åœ¨åšçš„ä»»ä½•äº‹æƒ…ã€‚å®ƒåšä¸¤ä»¶äº‹:

1.  æ‰§è¡Œ`finally`å—(å¦‚æœå­˜åœ¨)
2.  å‘è°ƒç”¨è€…è¿”å›ä¸€ä¸ª`IteratorResult`:`{ done: true, value: <undefined|any> }`

![](img/baba698eb8a0ec0b82dc0f519bea7869.png)

Generator: returning a value

`gen.next()`å¯åŠ¨å‘ç”µæœºã€‚å‘ç”µæœºåœåœ¨`(A)`è¡Œã€‚ç¬¬`(B)`è¡Œä¸Šçš„`gen.return(false)`å®Œæˆç”Ÿæˆå™¨ï¼Œç»§ç»­åˆ°ç¬¬`(C)`è¡Œçš„`finally`é˜»å¡ï¼Œå¹¶å°†`IteratorResult`ï¼Œæ›´å…·ä½“åœ°è¯´æ˜¯`{ done: true, value: false }`è¿”å›ç»™è°ƒç”¨è€…ã€‚

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

**æŠ›å‡ºå¼‚å¸¸**

å½“æ‚¨è°ƒç”¨`gen.throw(err)`æ—¶ï¼Œæ— è®ºå‘ç”Ÿå™¨æ­£åœ¨åšä»€ä¹ˆï¼Œå®ƒä¹Ÿä¸ä¼šæ¢å¤ã€‚å®ƒåšä¸‰ä»¶äº‹:

1.  æ‰§è¡Œ`catch`ç¨‹åºå—(å¦‚æœå­˜åœ¨)
2.  æ‰§è¡Œ`finally`ç¨‹åºå—(å¦‚æœå­˜åœ¨)
3.  å‘è°ƒç”¨è€…è¿”å›ä¸€ä¸ª`IteratorResult`:`{ done: true, value: undefined }`

**ä¾‹ 1** :æ•æ‰ç”Ÿæˆå™¨å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸

![](img/e210c31673ac5485dae4a23b20e45088.png)

Generator: catching a thrown exception inside the generator

1.  `gen.next()`å¯åŠ¨å‘ç”µæœºã€‚
2.  å‘ç”µæœºåœåœ¨`(A)`çº¿ä¸Šã€‚
3.  ç¬¬`(B)`è¡Œçš„`gen.throw(new Error('Invalid firstname'))`æŒ‡ç¤ºç”Ÿæˆå™¨åœ¨å½“å‰æš‚åœçš„åœ°æ–¹æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™æ˜¯ç¬¬`(A)`è¡Œã€‚
4.  åœ¨çº¿`(C)`ä¸Šçš„å‘ç”Ÿå™¨å†…éƒ¨æ•æ‰åˆ°å¼‚å¸¸ã€‚
5.  ç„¶åæ‰§è¡Œ`(D)`çº¿ä¸Šçš„`finally`å—ã€‚å‘ç”µæœºè¿”å›`IteratorResult`ï¼Œç‰¹åˆ«æ˜¯`{ done: true, value: undefined }`ã€‚

**ç¤ºä¾‹ 2** :åœ¨ç”Ÿæˆå™¨å¤–æ•è·æŠ›å‡ºå¼‚å¸¸

![](img/7bd016e3e7e563acb77275a9853477cb.png)

Generator: catching a thrown exception outside the generator

1.  `gen.next()`å¯åŠ¨å‘ç”µæœºã€‚
2.  å‘ç”µæœºåœåœ¨`(A)`çº¿ã€‚
3.  `gen.throw(new Error('Invalid firstname'))`åœ¨çº¿`(B)`ä¸ŠæŒ‡ç¤ºç”Ÿæˆå™¨åœ¨å½“å‰æš‚åœçš„åœ°æ–¹æŠ›å‡ºé”™è¯¯ï¼Œè¿™æ˜¯ä¸€æ¡çº¿`(A)`ã€‚
4.  å‘ç”µæœºå†…éƒ¨æ²¡æœ‰`catch`å—ï¼Œæ‰€ä»¥å‘ç”µæœºè·³åˆ°`C)`çº¿ä¸Šçš„`finally`å—è¿›è¡Œæ¸…ç†ã€‚
5.  **é”™è¯¯å‘å‘¼å«è€…å†’æ³¡ã€‚**çº¿ä¸Šæ•æ‰åˆ°å¼‚å¸¸`(D)`ã€‚

è¯·æ³¨æ„`(B)`çº¿ä¸Šæ²¡æœ‰`IteratorResult`è¿”å›ç»™æ¥ç”µè€…ã€‚

## é™åˆ¶

![](img/2dfa6b272778d8dcc9f951b2f8e7be89.png)

Generator function with SyntaxError

æˆ‘è§è¿‡å¾ˆå¤šäººé—®åŒæ ·çš„é—®é¢˜:*æˆ‘å¦‚ä½•åœ¨å›è°ƒä¸­ä½¿ç”¨æ”¶ç›Šç‡ï¼Ÿ*äº‹å®æ˜¯ï¼Œä½ ä¸èƒ½ã€‚

æ‚¨åªèƒ½ç›´æ¥åœ¨ç”Ÿæˆå™¨åŠŸèƒ½å†…éƒ¨ä½¿ç”¨`yield`ã€‚å¦‚æœä½ ä»”ç»†è§‚å¯Ÿæˆ‘ä»¬ä¼ é€’ç»™`setTimeout`çš„å›è°ƒå‡½æ•°ï¼Œä½ ä¼šå‘ç°å®ƒåªæ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ã€‚ä¸ºæ­¤ï¼Œéå‘ç”Ÿå™¨åŠŸèƒ½å†…éƒ¨çš„`yield`å¯¼è‡´`SyntaxError`ã€‚

ä»¥ä¸Šç¤ºä¾‹å¯ä»¥é€šè¿‡`delay()`åŠŸèƒ½å’ŒååŒå¤šä»»åŠ¡æ¥ä¿®å¤ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºåä½œå¤šä»»åŠ¡å¤„ç†ã€‚å›ºå®šç”Ÿæˆå™¨å‡½æ•°å¦‚ä¸‹æ‰€ç¤º:

![](img/d23cff18954a14c369b6d205231f6a0a.png)

Generator function with delay utility

å‚è§**ç¤ºä¾‹** / **ç”¨äºå¤„ç†æ‰¿è¯ºçš„ç®€å•ååŒç¨‹åº(åˆåå¼‚æ­¥/ç­‰å¾…)**ä¸­çš„è§£å†³æ–¹æ¡ˆã€‚

![](img/40d455ed760676d291346f96d6ee1cca.png)

# ååŒç¨‹åº

æ‚¨å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨çš„äº‹æƒ…ä¹‹ä¸€æ˜¯ coroutinesã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬å…è®¸æ‚¨åœ¨ JavaScript ä¸­å®ç°**å¼‚æ­¥/ç­‰å¾…**è¡Œä¸ºã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œè¿™å®é™…ä¸Šæ˜¯å¦‚ä½•åœ¨ JavaScript ä¸­å®ç°**å¼‚æ­¥/ç­‰å¾…**çš„ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ç»´åŸºç™¾ç§‘å¯¹æ­»å› æœ‰ä»€ä¹ˆçœ‹æ³•ã€‚æˆ‘å†æ¬¡å‘ç°ç»´åŸºç™¾ç§‘çš„æè¿°éå¸¸å‡†ç¡®ã€‚

> åç¨‹æ˜¯è®¡ç®—æœºç¨‹åºç»„ä»¶ï¼Œå®ƒé€šè¿‡å…è®¸æš‚åœå’Œæ¢å¤æ‰§è¡Œæ¥æ¦‚æ‹¬ç”¨äºéæŠ¢å å¼å¤šä»»åŠ¡å¤„ç†çš„å­ä¾‹ç¨‹ã€‚åç¨‹éå¸¸é€‚åˆäºå®ç°å¸¸è§çš„ç¨‹åºç»„ä»¶ï¼Œå¦‚åä½œä»»åŠ¡ã€å¼‚å¸¸ã€äº‹ä»¶å¾ªç¯ã€è¿­ä»£å™¨ã€æ— é™åˆ—è¡¨å’Œç®¡é“ã€‚
> 
> [https://en.wikipedia.org/wiki/Coroutine](https://en.wikipedia.org/wiki/Coroutine)

ä¸ºæ­¤ï¼Œåœ¨ JavaScript ä¸Šä¸‹æ–‡ä¸­ï¼Œåç¨‹æ˜¯å›´ç»•ç€ç”Ÿæˆå™¨çš„åŒ…è£…å™¨ï¼Œç”¨äºæ§åˆ¶ç”Ÿæˆå™¨çš„æ‰§è¡Œã€‚

> åä½œå¼å¤šä»»åŠ¡å¤„ç†ï¼Œä¹Ÿç§°ä¸ºéæŠ¢å å¼å¤šä»»åŠ¡å¤„ç†ï¼Œæ˜¯è®¡ç®—æœºå¤šä»»åŠ¡å¤„ç†çš„ä¸€ç§é£æ ¼ï¼Œæ“ä½œç³»ç»Ÿä»ä¸å¯åŠ¨ä»ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ç›¸åï¼Œè¿›ç¨‹ä¼šå®šæœŸæˆ–åœ¨ç©ºé—²æˆ–é€»è¾‘é˜»å¡æ—¶ä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒï¼Œä»¥ä½¿å¤šä¸ªåº”ç”¨ç¨‹åºèƒ½å¤Ÿå¹¶å‘è¿è¡Œã€‚è¿™ç§ç±»å‹çš„å¤šä»»åŠ¡è¢«ç§°ä¸ºâ€œåˆä½œçš„â€ï¼Œå› ä¸ºæ‰€æœ‰çš„ç¨‹åºå¿…é¡»åˆä½œï¼Œæ•´ä¸ªè°ƒåº¦æ–¹æ¡ˆæ‰èƒ½å·¥ä½œã€‚
> 
> ã€https://en.wikipedia.org/wiki/Cooperative_multitasking å·

æ¢å¥è¯è¯´ï¼Œå½“ JavaScript ç”Ÿæˆå™¨ç­‰å¾…ä¸€ä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œæ¯”å¦‚ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œå®ƒå¯ä»¥å°†æ§åˆ¶æƒäº¤è¿˜ç»™è°ƒåº¦ç¨‹åºï¼Œä»¥ä¾¿è¿è¡Œå¦ä¸€ä¸ªä»»åŠ¡ã€‚è¿™æ ·ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥å¹¶å‘è¿è¡Œã€‚

## å¹¶å‘æ€§ä¸å¹¶è¡Œæ€§

å¹¶å‘æ„å‘³ç€åº”ç”¨ç¨‹åºåŒæ—¶åœ¨å¤šä¸ªä»»åŠ¡ä¸Šå–å¾—è¿›å±•ã€‚

å¹¶è¡Œæ€§æ„å‘³ç€åº”ç”¨ç¨‹åºå°†å…¶ä»»åŠ¡åˆ†è§£æˆæ›´å°çš„å­ä»»åŠ¡ï¼Œè¿™äº›å­ä»»åŠ¡å¯ä»¥åœ¨åŒä¸€æ—¶é—´å¹¶è¡Œå¤„ç†ã€‚

> å¹¶å‘æ˜¯æŒ‡**åŒæ—¶å¤„ç†å¾ˆå¤šäº‹æƒ…**ã€‚å¹¶è¡Œå°±æ˜¯**åŒæ—¶åšå¾ˆå¤šäº‹æƒ…**ã€‚

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

ç¤¼è²Œåœ°æ‘˜è‡ª[é©¬å¾·å“ˆä¸‡Â·çº³åŠ æ‹‰è©¹](https://medium.com/u/5ee12e939c80?source=post_page-----f9eaa517f969--------------------------------)çš„ç²¾å½©æ–‡ç«  [**å¹¶å‘ä¸å¹¶è¡Œâ€”â€”ç®€è¯„**](https://medium.com/@itIsMadhavan/concurrency-vs-parallelism-a-brief-review-b337c8dac350) **ã€‚**

![](img/40d455ed760676d291346f96d6ee1cca.png)

# è¡¨æ¼”æ—¶é—´

ç†è®ºè¯´å¤Ÿäº†ï¼Œè®©æˆ‘ä»¬æŠŠæ‰‹å¼„è„ä¸€ç‚¹ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå¤§æƒŠå°æ€ªçš„ã€‚è®©æˆ‘ä»¬ä»ç®€å•çš„å¼€å§‹ï¼Œä¸€ç‚¹ä¸€ç‚¹åœ°å¢åŠ ä¾‹å­çš„å¤æ‚æ€§ã€‚

åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](https://medium.com/javascript-in-plain-english/javascript-lazy-evaluation-iterables-iterators-e0770a5de96f)ä¸­ï¼Œä¸€äº›ä¾‹å­ä¹Ÿè¢«å®ç°ä¸ºè¿­ä»£å™¨ã€‚æ‚¨å¯ä»¥éšæ„æŸ¥çœ‹é‚£é‡Œçš„ç¤ºä¾‹ï¼Œå¹¶æ¯”è¾ƒç”¨ç”Ÿæˆå™¨å®ç°ç›¸åŒçš„è¡Œä¸ºæœ‰å¤šå®¹æ˜“ã€‚

## èŒƒå›´è¿­ä»£å™¨

é¦–å…ˆï¼Œä¸€ä¸ªç®€å•çš„èŒƒå›´è¿­ä»£å™¨ã€‚

JavaScript range Iterator

## æ— é™åºåˆ—è¿­ä»£å™¨

æ³¨æ„è¿™ä¸ªä¾‹å­ä¸­é€šå¸¸ä¸è¢«è®¤å¯çš„`while (true)`æ˜¯å¦‚ä½•å˜å¾—æœ‰æ„ä¹‰çš„ã€‚

JavaScript infinite Iterator

## ç»“æŸè¿­ä»£å™¨

è¿™æ®µä»£ç æ¼”ç¤ºäº†çªç„¶å®Œæˆåçš„æ¸…ç†ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ª`break`è¯­å¥ã€‚

JavaScript generator cleanup after abrupt completion

## å¯¹æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿›è¡Œå¾ªç¯

æ›´èˆ’é€‚çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æå–ã€‚

JavaScript generator for regular expressions

## Zip å®ç”¨ç¨‹åº

Zip æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®ƒèšé›†äº†æ¥è‡ªæ¯ä¸ªå¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ ã€‚

å®ƒè¿”å›å…ƒç»„çš„è¿­ä»£å™¨ï¼Œå…¶ä¸­ç¬¬ *i* ä¸ªå…ƒç»„åŒ…å«æ¥è‡ªæ¯ä¸ªå‚æ•°åºåˆ—æˆ–å¯è¿­ä»£å¯¹è±¡çš„ç¬¬ *i* ä¸ªå…ƒç´ ã€‚å½“æœ€çŸ­çš„è¾“å…¥ iterable ç”¨å°½æ—¶ï¼Œè¿­ä»£å™¨åœæ­¢ã€‚

JavaScript Zip utility

## ç»„åˆå­

ç»„åˆå­æ˜¯ç»„åˆç°æœ‰çš„å¯é‡å¤é¡¹æ¥åˆ›å»ºæ–°çš„å¯é‡å¤é¡¹çš„å‡½æ•°ã€‚å¯é‡å¤çš„ç»„åˆã€‚

æˆ‘ä¸¾äº†ä¸¤ä¸ªä¾‹å­ã€‚ä»–ä»¬è¯æ˜äº†:

*   `filter`å’Œ`map`åœ¨è¿­ä»£ä¸Šæ“ä½œ
*   `cycle`ä»æœ‰é™åºåˆ—ç”Ÿæˆæ— é™åºåˆ—çš„å®ç”¨ç¨‹åº
*   `take`é‡‡ç”¨æœ‰é™æˆ–æ— é™åºåˆ—çš„`n`å…ƒç´ çš„å®ç”¨ç¨‹åº

**ä¾‹ 1:**

JavaScript generator combinators â€” map and filter

**ä¾‹ 2:**

JavaScript generator combinators â€” cycle and take

æˆ‘æƒ³åœ¨ä¾‹å­ä¸­ä¿æŒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†é«˜é˜¶å‡½æ•°(ä¾‹å¦‚`filter`å‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°)ã€‚æ‚¨é€šå¸¸å¯èƒ½ä¼šåšçš„æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„ curried `filter`å‡½æ•°ã€‚

å¦å¤–ï¼Œæ³¨æ„æˆ‘ä½¿ç”¨çš„æ˜¯`pipe`ã€‚é€šå¸¸æˆ‘æ›´å–œæ¬¢`compose`ï¼Œä½†æ˜¯å½“ä½¿ç”¨ç»„åˆå‡½æ•°æ—¶ï¼Œæ„Ÿè§‰æ›´è‡ªç„¶ã€‚çº¯ç²¹æ˜¯å–œå¥½é—®é¢˜ã€‚

## å¤„ç†æ‰¿è¯ºçš„ç®€å•åç¨‹(åˆåå¼‚æ­¥/ç­‰å¾…)

æ‰€ä»¥ä½ çŸ¥é“ä»€ä¹ˆæ˜¯åç¨‹ï¼Œä½†æ˜¯ä½ ä»¥å‰æ²¡è§è¿‡ã€‚è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¤„ç†äº§ç”Ÿçš„`Promise`çš„åç¨‹çš„å®ç°ã€‚

è¿™ä½¿å¾—ä»£ç çœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼Œå¹¶ä¸”æ›´å®¹æ˜“æ¨ç†ã€‚æ­¤å¤–ï¼Œä½ èƒ½å¤Ÿè½»æ¾é¿å…ä¸€ä¸ª**æ‰¿è¯ºåœ°ç‹±**ã€‚

è¿™ä¸ªä¾‹å­ç›¸å½“ç®€å•ã€‚æˆ‘åªæƒ³æ¼”ç¤ºç”Ÿæˆå™¨å’Œåç¨‹ä¹‹é—´åŒå‘æ¶ˆæ¯ä¼ é€’çš„åŸºæœ¬æ€æƒ³ã€‚ä¸ºäº†æ›´å®¹æ˜“å®šä½å’Œç†è§£ï¼Œæˆ‘å°†æ³¨é‡Šç›´æ¥æ”¾åœ¨æºä»£ç ä¸­ã€‚

JavaScript Coroutine for handling Promises

æœ€é‡è¦çš„ä»£ç å—å¦‚ä¸‹æ‰€ç¤ºã€‚æˆ‘ä»¬å¿…é¡»æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦æ”¶åˆ°äº†ä»»ä½•`value`ï¼Œå› ä¸º`yield`éšå«åœ°äº§ç”Ÿäº†`undefined`ã€‚å¦‚æœæ¥æ”¶åˆ°çš„å€¼æ˜¯å¯è§£æçš„(a `Promise`)ï¼Œæˆ‘ä»¬å°†åœ¨è·å¾—è§£æçš„å€¼åé‡å¯ç”Ÿæˆå™¨ã€‚æˆ–è€…å¦‚æœ`Promise`è¢«æ‹’ç»ï¼Œåˆ™å°†`Error`ä¼ æ’­åˆ°å‘ç”µæœºã€‚

å¦‚æœå€¼æ˜¯`undefined`æˆ–è€…ä¸æ˜¯ä¸€ä¸ª Thenableï¼Œæˆ‘ä»¬å°±æŠŠå®ƒåé¦ˆç»™ç”Ÿæˆå™¨ã€‚

æˆ‘ä»¬ä¹Ÿä¸èƒ½å¿˜è®°åœ¨`handleYieldedValue()`å‡½æ•°ä¸­åŒ…è£…`iterator.next()`ï¼Œå› ä¸ºåƒæˆ‘ä¹‹å‰æåˆ°çš„é‚£æ ·`iterator.next()`æ–¹æ³•æ˜¯**éå¯¹ç§°çš„**å¹¶è¿”å›åç»­çš„`IteratorResult`ç»™æˆ‘ä»¬å¤„ç†ã€‚

![](img/9530e3c3b6935c0cdff35da220141969.png)

JavaScript Promise Coroutine handling

![](img/aa0fe33e9c6c509f2d26331279dfe7ef.png)

åœ¨[é˜…è¯»æ›´å¤šå…³äº**æ— æåœ°ç‹±**ç½—çº³å¾·é™ˆ](https://medium.com/u/6849951de65c?source=post_page-----f9eaa517f969--------------------------------)çš„ä¼Ÿå¤§æ–‡ç« **å¦‚ä½•é€ƒç¦»æ— æåœ°ç‹±**ã€‚

## DOM äº‹ä»¶å¤„ç†ç¨‹åº

å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œå±•ç¤ºäº†ç”¨ç”Ÿæˆå™¨å¤„ç† DOM äº‹ä»¶çš„å¯èƒ½æ€§ã€‚

è¿™ä¸ªè§£å†³æ–¹æ¡ˆèƒŒåçš„æ€æƒ³æ˜¯**æ‚¨å°†æ‰€æœ‰çš„ DOM äº‹ä»¶æä¾›ç»™ç”Ÿæˆå™¨**ï¼Œå®ƒåè¿‡æ¥æ£€æŸ¥å®ƒå½“å‰æ˜¯å¦å¯¹è¿™æ ·çš„äº‹ä»¶æ„Ÿå…´è¶£ã€‚é‚£ä¹ˆå®ƒè¦ä¹ˆç›¸åº”åœ°é‡‡å–è¡ŒåŠ¨ï¼Œè¦ä¹ˆå¿½ç•¥è¯¥äº‹ä»¶ã€‚

æˆ‘ä»æœªåœ¨ä½œå“ä¸­ä½¿ç”¨è¿‡è¿™ä¸ªï¼Œä½†æˆ‘å–œæ¬¢è¿™ä¸ªæƒ³æ³•ã€‚è¿™ä¸ªä¾‹å­å¾ˆå¥½åœ°æ¼”ç¤ºäº†ç”Ÿæˆå™¨å§”æ‰˜(`yield*`)çš„ä½¿ç”¨å’Œä»ç”Ÿæˆå™¨è¿”å›å€¼ã€‚

Handling DOM Events With Generators

# åœ¨ä½ ç¦»å¼€ä¹‹å‰

å¦‚æœä½ æƒ³ä¸å‡ºå¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨å‘ç”µæœºï¼Œä¸è¦éš¾è¿‡ã€‚å¹¶éæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦å‘ç”µæœºã€‚å®ƒä»¬æ˜¯éå¸¸ç‰¹æ®Šçš„æ„é€ ï¼Œè§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜ã€‚ä½†æ˜¯ä»–ä»¬å¤„ç†å¾—å¾ˆå¥½ã€‚

å¦‚æœä½ æ˜¯ Redux ç”¨æˆ·ï¼Œçœ‹çœ‹[**Redux Saga**](https://redux-saga.js.org/)**ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºç”Ÿæˆå™¨çš„å¤„ç† Redux å‰¯ä½œç”¨çš„æµè¡Œåº“ã€‚**

> å½“å¤„ç†æ— é™å€¼åºåˆ—æ—¶ï¼Œç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚

æˆ‘å¿…é¡»å­¦ä¹ ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æ¥å®Œå…¨ç†è§£ç”Ÿæˆå™¨çš„ç”¨ä¾‹ã€‚æ¯”å¦‚**å“ˆæ–¯å…‹å°”**ã€‚Haskell çš„æ ¸å¿ƒæ˜¯èƒ½å¤Ÿå¯¹æ— é™çš„å€¼åºåˆ—è¿›è¡Œæ“ä½œã€‚è€Œä¸”åœ¨è¯­è¨€ä¸­ç”¨çš„å¾ˆé‡ï¼Œä½ åŸºæœ¬ä¸Šé€ƒä¸æ‰ã€‚

ä¸‹æ¬¡è§ã€‚**ğŸºé˜¿å°”æ³•ï¼Œå®Œæ¯•ã€‚**

![](img/40d455ed760676d291346f96d6ee1cca.png)

# èµ„æº

*   [https://exploringjs.com/es6/ch_generators.html](https://exploringjs.com/es6/ch_generators.html)
*   [https://hacks . Mozilla . org/2015/07/es6-æ·±å…¥-ç”Ÿæˆå™¨-ç»­/](https://hacks.mozilla.org/2015/07/es6-in-depth-generators-continued/)
*   [https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Generator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator)
*   [https://code burst . io/understanding-generators-in-es6-JavaScript-with-examples-6728834016 D5](https://codeburst.io/understanding-generators-in-es6-javascript-with-examples-6728834016d5)
*   [https://medium . com/daily js/a-simple-guide-to-understanding-JavaScript-es6-generators-d1c 350551950](https://medium.com/dailyjs/a-simple-guide-to-understanding-javascript-es6-generators-d1c350551950)
*   [https://www . pan company . com/blog/2020/6/5/does-JavaScript-need-generators](https://www.pancompany.com/blog/2020/6/5/does-javascript-need-generators)
*   [https://davidwalsh.name/es6-generators](https://davidwalsh.name/es6-generators)
*   [https://rileygelwicks . git books . io/you-dont-know-js/content/async % 20&% 20 performance/APB . html](https://rileygelwicks.gitbooks.io/you-dont-know-js/content/async%20&%20performance/apB.html)
*   [https://www . LinkedIn . com/pulse/using-JavaScript-generators-yield-promises-vladim % C3 % ADr-gorej/](https://www.linkedin.com/pulse/using-javascript-generators-yield-promises-vladim%C3%ADr-gorej/)
*   [https://www . aaron-Powell . com/posts/2014-01-18-calling-up-callbacks-with-yield/](https://www.aaron-powell.com/posts/2014-01-18-calling-up-callbacks-with-yield/)
*   [https://github . com/isRuslan/learn-generators/tree/master/exercises](https://github.com/isRuslan/learn-generators/tree/master/exercises)
*   [https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/generator function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction)
*   [https://hacker noon . com/JavaScript-es6-you-don-t-really-need-to-learn-generators-96aa 2e 9114 fa](https://hackernoon.com/javascript-es6-you-dont-really-need-to-learn-generators-96aa2e9114fa)
*   [https://media . com/JavaScript-scene/the-hidden-power-of-es6-generators-observated-async-flow-control-CFA 4c 7f 31435](https://medium.com/javascript-scene/the-hidden-power-of-es6-generators-observable-async-flow-control-cfa4c7f31435)
*   [https://gist . github . com/elclanrs/45800747 e7c 1c 126594 fa 1257688 BF 85](https://gist.github.com/elclanrs/45800747e7c2c126594fa1257688bf85)
*   [https://whistlr.info/2020/async-generators-input/](https://whistlr.info/2020/async-generators-input/)
*   [https://www . smashingmagazine . com/2018/01/rise-state-machines/](https://www.smashingmagazine.com/2018/01/rise-state-machines/)
*   [https://dev . to/rfornar/JavaScript ç”¨ä¾‹ç”Ÿæˆå™¨-1npc](https://dev.to/rfornal/use-cases-for-javascript-generators-1npc)
*   [https://en.wikipedia.org/wiki/Cooperative_multitasking](https://en.wikipedia.org/wiki/Cooperative_multitasking)
*   [https://en.wikipedia.org/wiki/Coroutine](https://en.wikipedia.org/wiki/Coroutine)
*   [https://media . com/@ itimadhavan/concurrency-vs-parallelism-a-brief-review-b 337 c8 DAC 350](https://medium.com/@itIsMadhavan/concurrency-vs-parallelism-a-brief-review-b337c8dac350)
*   [https://docs.python.org/3/library/functions.html#zip](https://docs.python.org/3/library/functions.html#zip)
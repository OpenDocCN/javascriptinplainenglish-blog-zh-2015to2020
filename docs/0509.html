<html>
<head>
<title>React: Try FadeIn + Redirect = cool transitions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应:尝试淡入+重定向=酷过渡</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-try-fadein-redirect-for-a-cool-transition-between-views-963c4ae1004b?source=collection_archive---------2-----------------------#2019-10-31">https://javascript.plainenglish.io/react-try-fadein-redirect-for-a-cool-transition-between-views-963c4ae1004b?source=collection_archive---------2-----------------------#2019-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="90dd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">另外:如何将有趣的东西隐藏在缓慢的淡入背后…</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ad1b91ceeb5b0d8b974100ecf1cc7352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5wLJFnx9m1G9GiyS7z_9g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">my son at Glacier National Park. It’s now the cover photo of my portfolio.</figcaption></figure><p id="a023" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">几个月前，我创建了一个React应用程序组合网站。我给了它几页:</p><ul class=""><li id="5ac4" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">主页</li><li id="9a87" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">项目</li><li id="a329" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">简历</li><li id="0e7e" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">博客帖子</li><li id="7bc4" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">关于</li></ul><p id="33d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在主页上，我添加了一些基本的欢迎文本、一张大照片和一个到我的作品集页面的链接。然后我开始疑惑:为什么要强迫访问者通过主页进入，而我真正想让他们看到的页面是作品集页面？</p><p id="fc6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我考虑过完全抛弃主页，但是有个起点也不错。</p><p id="1d29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那么，如何才能拥有一个可爱的主页，而不使访问者觉得它是通向更受欢迎的页面的一个不必要的中途站呢？</p><h1 id="6957" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">再直接的</h1><p id="2130" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">一种解决方案是:让它们从主页开始，然后使用setTimeout()自动将它们重定向到另一个页面。</p><p id="d06f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，您给组件一个初始本地状态<code class="fe nc nd ne nf b">redirect:false.</code></p><p id="9b9d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后添加生命周期方法<code class="fe nc nd ne nf b">componentDidMount()</code>。正如您所猜测的，当您的组件被安装到DOM上时，就会触发这个事件。</p><p id="fe39" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(<em class="ng">DOM是什么？</em>网站是用HTML和CSS编写的。网络浏览器将代码转换成我们在网上看到的内容。浏览器还会创建一个称为文档对象模型的页面模型，它允许JavaScript将页面上的元素作为对象来访问。当我们编写JavaScript时，我们并没有直接改变网站的HTML/CSS。相反，我们改变了DOM。浏览器然后使用更新的DOM来更新站点的HTML/ CSS)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/68e93d5b8290b7180cc2647d2741c119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMxklq2mH87ScFBgSyTNaw.png"/></div></div></figure><p id="794e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的代码中，我们使用了JavaScript的<a class="ae ni" href="https://www.w3schools.com/jsref/met_win_settimeout.asp" rel="noopener ugc nofollow" target="_blank"> Window setTimeout()方法</a>，它采用了一个回调函数。在4000毫秒(4秒)的等待时间后，我们的回调将状态更改为<code class="fe nc nd ne nf b">redirect: true</code>。</p><p id="f5fc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，当我们的组件卸载时，我们移除计时器。</p><p id="4bb0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的render方法中，我们返回的内容基于<code class="fe nc nd ne nf b">this.state.redirect</code>。如果为真，我们使用react-dom的重定向将用户重定向到另一个页面；否则，我们呈现当前页面的内容:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/5f48a33d42a2b365b7e65e7b3f5aacc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ja_lkixbc5lKMkyo6Z-EFg.png"/></div></div></figure><p id="ec58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这很酷，但是重定向有点…突然。如果我不知道的话，我会以为网站坏了。<em class="ng">(下面为糟糕的视频嵌入质量道歉；由于某种原因，织布机不能很好地播放媒体)。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="f348" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">淡出…</h1><p id="d9b7" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">一旦我得到了这个工作，我想它会看起来更好，如果我可以在重定向之前淡化主页。为了更好地衡量，我想我也(很快)淡入主页。</p><p id="81be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以我将<code class="fe nc nd ne nf b">visible</code>添加到state中，初始值为false。然后，在componentDidMount()上，我将visible更改为true <em class="ng">并且</em>设置一个计时器，以便visible在3秒钟后将<code class="fe nc nd ne nf b">visible</code>重置为<code class="fe nc nd ne nf b">false</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/ef1202f1a20d3edabcbf4be62b89930f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CtQnmTGBE5PzPEW_nZLZvg.png"/></div></div></figure><p id="9680" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在render中，我们在返回中添加了一个新行，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/b0c604af1a51b132cb36e7e3bbea5fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PxuJxFjdLhHNB1QDcSVlpg.png"/></div></div></figure><p id="d771" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们的新行32改变了div的类名。如果div应该是可见的，那么className将是<code class="fe nc nd ne nf b">fadeIn</code>——否则，它将是<code class="fe nc nd ne nf b">fadeOut.</code>。我们可以在这里使用我们想要的任何名称，但是选择与想要的效果直接相关的名称是一个好的实践。</p><h2 id="713b" class="no mg iq bd mh np nq dn ml nr ns dp mp le nt nu mr li nv nw mt lm nx ny mv nz bi translated">添加CSS …</h2><p id="5994" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">现在，在我们的App.css文件中，我们只需添加如何使用新的类名呈现组件的指令:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/616311e5cbb03d78d2959770c68c8af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rFXid9geJO0rZtGcrMAk0w.png"/></div></div></figure><p id="9a6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在第139行，我们说，当你看到类名<code class="fe nc nd ne nf b">.fadeOut</code>，设置不透明度为0，并使过渡发生在1秒内。</p><p id="f5cb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在第144行，我们反过来做同样的事情，除了我们让转换在半秒内发生。(如果我们让它变得更长，我们的访问者可能会认为我们的网站坏了，因为它看起来是空白的，即使只有一秒钟。</p><p id="98f6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ng">注:我不知道为什么时间. 5s必须包含两次？如果你这样做了，请留下评论！</em></p><p id="3456" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">瞧啊。我们的过渡现在看起来很酷。你可以在这里看到它的工作原理。</p><h2 id="4411" class="no mg iq bd mh np nq dn ml nr ns dp mp le nt nu mr li nv nw mt lm nx ny mv nz bi translated">现在，为了有趣的事情</h2><p id="a220" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">当你在找工作，在你的投资组合网站上工作太多的时候，你需要幽默感。因此，我决定用一段视频来展示我的管理技能，这段视频是我试图指导我当时蹒跚学步的孩子们，让他们一起在田野上滚一个巨大的雪球。(说真的！我必须激励、委派等)。</p><p id="3d87" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当然，我应该把这个放在最前面。我真的应该。但我也努力表现得专业些。如何平衡我自娱自乐的需求和做专业网站的需求？啊哈！关于……</p><h2 id="617e" class="no mg iq bd mh np nq dn ml nr ns dp mp le nt nu mr li nv nw mt lm nx ny mv nz bi translated">非常缓慢的淡入</h2><p id="c2a9" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">我把视频添加到了我的“关于”页面的底部。我没有用类名<code class="fe nc nd ne nf b">fadeIn</code>来设计它，而是创建了一个新的类名<code class="fe nc nd ne nf b">fadeInSlow</code>，我这样设计它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/3eefaa5523b027fa6e27f619a2327c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O-3SoEaCYcRkAQh5TMCH1A.png"/></div></div></figure><p id="0926" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，除了隐藏在页面底部之外，该元素在最初的10秒内是不可见的。这意味着大多数人永远不会注意到它。</p><p id="d1cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你想看它(和我惊人的管理技能)的实际应用，这里是页面(向下滚动)。</p><p id="d068" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在你知道我的秘密了…嘘！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oc nl l"/></div></figure><p id="744a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">琼·印第安纳·莱内斯2019</p><p id="34af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">万一你错过了:<em class="ng">算法101:在JavaScript中计算素数Erathosthenes的筛子</em></p></div></div>    
</body>
</html>
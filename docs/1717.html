<html>
<head>
<title>Node.js: Understanding the File System Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js:了解文件系统模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/node-js-understanding-file-system-module-5c609eca9d7a?source=collection_archive---------9-----------------------#2020-04-16">https://javascript.plainenglish.io/node-js-understanding-file-system-module-5c609eca9d7a?source=collection_archive---------9-----------------------#2020-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/56905737f037e820635267e07b333cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FsQJfZqQaN3ArP4D"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jankolar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kolar.io</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5c07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Node的文件系统模块<code class="fe lb lc ld le b">fs</code>允许我们在操作系统中玩文件。</p><p id="dd76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，它能帮我做什么呢？系统上任何类型的CRUD操作(创建、读取、更新和删除)。创建日志文件，在设定的时间间隔后从api保存及时的天气数据，等等。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="94db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成(CRUD的)创建部分的草稿后。我发现这个帖子会很长。我最初的方法是解释所有的4个CRUD操作，但是我详细解释了每一个代码语法，以尽可能有意义地解释它。</p><p id="2182" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一定会帮助你理解和建立Node.js的基础。</p><p id="5b09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以现在，我需要把<strong class="kf ir"> Node.js:理解文件系统模块</strong>分解成4个部分。这是第一部分——创建。我一写完就会在这里更新链接。</p><p id="c3a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们开始吧。😎</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><blockquote class="lm ln lo"><p id="428e" class="kd ke lp kf b kg kh ki kj kk kl km kn lq kp kq kr lr kt ku kv ls kx ky kz la ij bi translated"><strong class="kf ir"> <em class="iq"> ⚠️ </em> </strong> <strong class="kf ir"> <em class="iq">重要:</em> </strong>此时我假设你已经安装了Node.js，我希望你能按照它来编码，这将有助于你更好地理解。可以去<a class="ae kc" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Node.js官网</a>安装。</p><p id="a062" class="kd ke lp kf b kg kh ki kj kk kl km kn lq kp kq kr lr kt ku kv ls kx ky kz la ij bi translated"><strong class="kf ir">T24】💡提示: </strong>对于本教程，我将使用Visual Studio代码编辑器，并推荐。</p></blockquote><h1 id="efb7" class="lt lu iq bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">步骤1:加载文件系统模块</h1><p id="a3dc" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">为了使用文件系统模块，我们首先需要将它导入到我们的文件中。我们通过在新的<code class="fe lb lc ld le b">server.js</code>文件中添加以下代码来做到这一点。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="463b" class="ne lu iq le b gy nf ng l nh ni">var filesystem = require("fs");</span></pre><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/fa1de135c1e04a6bc1c8e8156de30575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*IuM6bu9OwUSnsTnWJz4noQ.png"/></div></figure><p id="7e1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">👊让我们来分解这段代码:</p><ol class=""><li id="e844" class="nk nl iq kf b kg kh kk kl ko nm ks nn kw no la np nq nr ns bi translated"><code class="fe lb lc ld le b">fs</code>是我们的文件系统模块，在你安装node的时候已经预打包好了。</li><li id="b4c0" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">我们使用<code class="fe lb lc ld le b">require()</code>函数来加载我们的<code class="fe lb lc ld le b">server.js</code>文件中的模块。<em class="lp">注意:</em> <code class="fe lb lc ld le b"><em class="lp">require()</em></code> <em class="lp">是node.js的一部分不是JavaScript。</em></li><li id="6e40" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">我们创建一个<code class="fe lb lc ld le b">filesystem</code>变量(你可以给它取任何名字，也可以是口袋妖怪),并将<strong class="kf ir">引用</strong>分配给我们加载的<code class="fe lb lc ld le b">fs</code>模块。这样我们就可以在代码中使用它。</li></ol><blockquote class="lm ln lo"><p id="3f56" class="kd ke lp kf b kg kh ki kj kk kl km kn lq kp kq kr lr kt ku kv ls kx ky kz la ij bi translated"><strong class="kf ir"> <em class="iq"> ⚡学习:</em> </strong> <code class="fe lb lc ld le b">filesystem</code>引用了<code class="fe lb lc ld le b">fs</code>模块，但没有将完整的<code class="fe lb lc ld le b">fs</code>模块放入其中(或复制)。<a class="ae kc" href="https://codeburst.io/explaining-value-vs-reference-in-javascript-647a975e12a0" rel="noopener" target="_blank">这种做法叫做引用传递</a>，只有原始数据类型可以通过值传递。</p></blockquote><p id="ad50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以通过<code class="fe lb lc ld le b">filesystem</code>使用所有的文件系统模块工具。转到新行，键入<code class="fe lb lc ld le b">filesystem.</code>(带。)你会看到我们可以使用的所有可用方法。</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/29b6b1889970aad7322f5c37d1d29d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*M2UXyVkOoaMbDYdJqhDQeA.png"/></div></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="595e" class="lt lu iq bd lv lw ny ly lz ma nz mc md me oa mg mh mi ob mk ml mm oc mo mp mq bi translated">步骤2:创建我们的口袋妖怪文件</h1><p id="faf7" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">让我们执行创建的第一个CRUD操作。我们将创建一个文本文件，向其中添加一些信息并保存它。实际上，除了写代码，我们什么也不做，一切都将由我们的服务器自动完成😉。</p><p id="af8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将下面几行代码添加到下一行，就在我们加载<code class="fe lb lc ld le b">fs</code>模块的地方。别忘了点击<strong class="kf ir">保存(Ctrl + S) </strong>。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="5e12" class="ne lu iq le b gy nf ng l nh ni">filesystem.appendFileSync(</span><span id="04f7" class="ne lu iq le b gy od ng l nh ni">"favourite-pokemon.txt",</span><span id="250f" class="ne lu iq le b gy od ng l nh ni">"My favourite Pokemon is Pikachu 😍"</span><span id="0e2d" class="ne lu iq le b gy od ng l nh ni">);</span></pre><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/606b2d2076204f050a87c8dc02fe7b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*q0pVFKqZVZnY-xfrnkEHEg.png"/></div></figure><p id="7701" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">👊让我们来分解这段代码:</p><ol class=""><li id="b265" class="nk nl iq kf b kg kh kk kl ko nm ks nn kw no la np nq nr ns bi translated"><code class="fe lb lc ld le b">appendFileSync()</code>是文件系统模块中的方法之一，用于将<strong class="kf ir">指定的内容追加到文件</strong>中。如果我们没有档案呢？别担心它会被创造出来。</li><li id="e625" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated"><code class="fe lb lc ld le b">appendFileSync(<strong class="kf ir">path</strong>, <strong class="kf ir">data, option</strong>)</code>需要3个参数。</li><li id="4292" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">在<code class="fe lb lc ld le b"><strong class="kf ir">path</strong></code>中，我可以使用像这样的东西<code class="fe lb lc ld le b">./favourite-pokemon.txt</code>，它仍然可以工作。为什么？因为它在当前目录中寻找文件名<code class="fe lb lc ld le b">favourite-pokemon.txt</code>，或者我应该说你的<code class="fe lb lc ld le b">server.js</code>文件在哪里。如果没有找到，它将简单地创建一个。</li><li id="e92e" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">在<code class="fe lb lc ld le b"><strong class="kf ir">data</strong></code>中，我们可以放置任何类型的字符串。只要确保把它放在<code class="fe lb lc ld le b">""</code>引号之下。</li><li id="2f4e" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated"><code class="fe lb lc ld le b"><strong class="kf ir">option</strong></code>是可选的，因此我没有在第三个参数中放任何东西。基本上用于指定<code class="fe lb lc ld le b">encoding</code>、<code class="fe lb lc ld le b">mode</code>和<code class="fe lb lc ld le b">flag</code>。为了简单起见，我这里就不解释了，但是你可以随时<a class="ae kc" href="https://stackoverflow.com/questions/27920892/in-fs-writefileoption-how-an-options-parameter-generally-work" rel="noopener ugc nofollow" target="_blank">了解可选参数是如何工作的</a>。</li></ol><p id="0f3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的文件系统模块也有其他方法来创建文件。<code class="fe lb lc ld le b">appendFile()</code>、<code class="fe lb lc ld le b">open()</code>和<code class="fe lb lc ld le b">writeFile()</code>。</p><blockquote class="lm ln lo"><p id="5435" class="kd ke lp kf b kg kh ki kj kk kl km kn lq kp kq kr lr kt ku kv ls kx ky kz la ij bi translated"><em class="iq"> ❓ </em> <strong class="kf ir"> <em class="iq">问题:</em></strong><code class="fe lb lc ld le b">appendFileSync()</code>和<code class="fe lb lc ld le b">appendFile()</code>有什么区别？既然都是用来向文件追加数据，那么<strong class="kf ir">同步</strong>或者<strong class="kf ir">异步</strong>追加数据的方式有什么重要性呢？</p><p id="932b" class="kd ke lp kf b kg kh ki kj kk kl km kn lq kp kq kr lr kt ku kv ls kx ky kz la ij bi translated">请在评论中告诉我，否则我会在下一篇文章中解释。敬请关注。</p></blockquote></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="9036" class="lt lu iq bd lv lw ny ly lz ma nz mc md me oa mg mh mi ob mk ml mm oc mo mp mq bi translated">步骤3:运行我们的服务器</h1><p id="6203" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">我们有了我们需要的一切，我们加载了我们的文件系统模块<code class="fe lb lc ld le b">fs</code>并为它创建了一个引用变量<code class="fe lb lc ld le b">filesystem</code>，然后我们告诉我们的服务器创建文件<code class="fe lb lc ld le b">favourite-pokemon.txt</code>，并用<code class="fe lb lc ld le b">appendFileSync()</code>方法用我最喜欢的口袋妖怪名字填充它。</p><p id="0d57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是Node.js执行命令的时候了。让我们启动我们的服务器。</p><p id="763e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击<code class="fe lb lc ld le b">Ctrl</code> + <code class="fe lb lc ld le b">`</code>(反勾键)打开VS代码中的终端。确保您在您的<code class="fe lb lc ld le b">server.js</code>文件所在的目录中。然后点击<code class="fe lb lc ld le b">Enter</code>执行以下命令。</p><pre class="mw mx my mz gt na le nb nc aw nd bi"><span id="c6a3" class="ne lu iq le b gy nf ng l nh ni">node server.js</span></pre><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/3ac45b143cc539ee4b387e3a932e43b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*FzeGbhjstVTvvN3shD11Qw.png"/></div></figure><p id="15da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你会注意到在编辑器的左侧叫做<strong class="kf ir">浏览器</strong>，有一个新文件被创建<code class="fe lb lc ld le b">favourite-pokemon.txt</code> <em class="lp">(按</em><code class="fe lb lc ld le b"><em class="lp">Ctrl</em></code><em class="lp">+</em><code class="fe lb lc ld le b"><em class="lp">Shift</em></code><em class="lp">+</em><code class="fe lb lc ld le b"><em class="lp">E</em></code><em class="lp">打开浏览器)</em>。点击该文件，你会看到我们的服务器已经成功地创建了我最喜欢的口袋妖怪的文件。万岁！🎉</p><figure class="mw mx my mz gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/874d31ac0c68aa57e98216670b79c87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*UX85Bvp7aqSeaqJDGTWbQw.png"/></div></figure><p id="0921" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们没有告诉我们的服务器继续运行，节点将执行代码并终止它。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="65df" class="lt lu iq bd lv lw ny ly lz ma nz mc md me oa mg mh mi ob mk ml mm oc mo mp mq bi translated">知道一些有趣且有帮助的事情吗？</h1><p id="4c26" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">请在这里告诉我，或者在Twitter上关注我。你的贡献将有助于使这篇文章更有价值，并帮助像你我这样的人。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="92cd" class="ne lu iq bd lv of og dn lz oh oi dp md ko oj ok mh ks ol om ml kw on oo mp op bi translated"><strong class="ak">简明英语团队的笔记</strong></h2><p id="4856" class="pw-post-body-paragraph kd ke iq kf b kg mr ki kj kk ms km kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">你知道我们有四种出版物吗？给他们一个follow来表达爱意:<a class="ae kc" href="https://medium.com/javascript-in-plain-english" rel="noopener"><strong class="kf ir">JavaScript in Plain English</strong></a><a class="ae kc" href="https://medium.com/ai-in-plain-english" rel="noopener"><strong class="kf ir">AI in Plain English</strong></a><a class="ae kc" href="https://medium.com/ux-in-plain-english" rel="noopener"><strong class="kf ir">UX in Plain English</strong></a><a class="ae kc" href="https://medium.com/python-in-plain-english" rel="noopener"><strong class="kf ir">Python in Plain English</strong></a><strong class="kf ir"/>—谢谢，继续学习！</p><p id="edcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们总是有兴趣帮助推广好的内容。如果您有一篇文章想要提交给我们的任何出版物，请发送电子邮件至<a class="ae kc" href="mailto:submissions@plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">submissions @ plain English . io</strong></a><strong class="kf ir"/>，附上您的媒体用户名和您感兴趣的内容，我们将会回复您！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Vue 3 — Transition Between Components and Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —组件和列表之间的转换</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-transition-between-components-and-lists-bedfa27443a?source=collection_archive---------11-----------------------#2020-11-09">https://javascript.plainenglish.io/vue-3-transition-between-components-and-lists-bedfa27443a?source=collection_archive---------11-----------------------#2020-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2e3129da5ca3d9463d565546de991e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L0vZzTU17IUV3UGN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e995" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在组件和列表之间创建过渡效果。</p><h1 id="8078" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件之间的转换</h1><p id="8e32" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">transition</code>和<code class="fe me mf mg mh b">component</code>组件在组件之间转换。</p><p id="45c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">component</code>组件用于通过设置组件名称在组件之间动态切换。</p><p id="84da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="71b0" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      .bounce-enter-active {<br/>        animation: bounce-in 1.3s;<br/>      }<br/>      .bounce-leave-active {<br/>        animation: bounce-in 1.3s reverse;<br/>      }<br/>      @keyframes bounce-in {<br/>        0% {<br/>          transform: scale(0);<br/>        }<br/>        50% {<br/>          transform: scale(1.8);<br/>        }<br/>        100% {<br/>          transform: scale(1);<br/>        }<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="currentComponent = 'foo'"&gt;foo&lt;/button&gt;<br/>      &lt;button @click="currentComponent = 'bar'"&gt;bar&lt;/button&gt;<br/>      &lt;button @click="currentComponent = 'baz'"&gt;baz&lt;/button&gt;<br/>      &lt;transition name="bounce" mode="out-in"&gt;<br/>        &lt;component :is="currentComponent"&gt;&lt;/component&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            currentComponent: "foo"<br/>          };<br/>        },<br/>        components: {<br/>          foo: {<br/>            template: "&lt;div&gt;foo&lt;/div&gt;"<br/>          },<br/>          bar: {<br/>            template: "&lt;div&gt;bar&lt;/div&gt;"<br/>          },<br/>          baz: {<br/>            template: "&lt;div&gt;baz&lt;/div&gt;"<br/>          }<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="34f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了3个组件，<code class="fe me mf mg mh b">foo</code>、<code class="fe me mf mg mh b">bar</code>和<code class="fe me mf mg mh b">baz</code>。</p><p id="99db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在它们之间转换，我们创建了3个按钮来改变组件名。</p><p id="414d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也有<code class="fe me mf mg mh b">name</code>道具和设置过渡名称。</p><p id="4527" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">style</code>标签中也有过渡样式。</p><p id="61b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们单击按钮时，在看到新组件的内容之前，我们会看到一个过渡效果。</p><h1 id="bcdb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">列出过渡</h1><p id="29eb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以给列表添加过渡效果。</p><p id="30d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以使用<code class="fe me mf mg mh b">transition-group</code>组件。</p><p id="0cad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与<code class="fe me mf mg mh b">transition</code>不同，它呈现实际的元素。</p><p id="917a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认呈现一个<code class="fe me mf mg mh b">span</code>。</p><p id="c96f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">tag</code>属性来改变这一点。</p><p id="459f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">过渡模式不可用，因为我们不是在互斥元素之间交替。</p><p id="8217" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">里面的元素总是需要有一个唯一的<code class="fe me mf mg mh b">key</code>属性。</p><p id="2322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CSS转换类将应用于内部元素，而不是容器本身。</p><h1 id="ed9c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">列出进入/离开转换</h1><p id="0de2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">transition-group</code>组件添加一个进入或离开转换列表。</p><p id="99e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2cd9" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      .list-enter-active,<br/>      .list-leave-active {<br/>        transition: all 1s ease;<br/>      }<br/>      .list-enter-from,<br/>      .list-leave-to {<br/>        opacity: 0;<br/>        transform: translateY(35px);<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="add"&gt;Add&lt;/button&gt;<br/>      &lt;button @click="remove"&gt;Remove&lt;/button&gt;<br/>      &lt;transition-group name="list" tag="div"&gt;<br/>        &lt;p v-for="item in items" :key="item"&gt;<br/>          {{ item }}<br/>        &lt;/p&gt;<br/>      &lt;/transition-group&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            items: Array(10)<br/>              .fill()<br/>              .map(() =&gt; Math.random()),<br/>            nextNum: 10<br/>          };<br/>        },<br/>        methods: {<br/>          randomIndex() {<br/>            return Math.floor(Math.random() * this.items.length);<br/>          },<br/>          add() {<br/>            this.items.splice(this.randomIndex(), 0, Math.random());<br/>          },<br/>          remove() {<br/>            this.items.splice(this.randomIndex(), 1);<br/>          }<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6bc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一组随机数创建了一个列表。</p><p id="b427" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了添加和删除按钮，让我们可以添加和删除项目。</p><p id="ccdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">过渡效果在样式标签中。</p><p id="f9b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加的效果是不透明度变化和垂直平移效果。</p><p id="6ad4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们将<code class="fe me mf mg mh b">transition-group</code>组件的<code class="fe me mf mg mh b">name</code>属性设置为<code class="fe me mf mg mh b">list</code>，以此作为转换类名的前缀。</p><p id="b789" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">tag</code>是我们为容器渲染的标签。</p><p id="f1d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们根据需要在p元素中添加了<code class="fe me mf mg mh b">key</code>道具，它是从<code class="fe me mf mg mh b">items</code>列表中呈现的。</p><p id="bc4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，Vue就可以知道每个项目在哪里，并正确地将它们制作成动画。</p><p id="fb89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们有<code class="fe me mf mg mh b">add</code>和<code class="fe me mf mg mh b">remove</code>方法让我们添加和删除<code class="fe me mf mg mh b">items</code>数组中的项目。</p><p id="34a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">randomIndex</code>生成随机索引以添加或删除项目。</p><p id="479d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们单击添加或删除时，我们将看到应用的过渡效果。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/e612c384127a3e83f5cd9eac6425b0b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VPIfLj851VAFEUaq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@picsbyjameslee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Lee</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="25b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="529f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在组件之间转换，并为列表项添加转换效果。</p><p id="12ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Everything about the latest Node.js release | Node.js 15</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于最新Node.js版本| Node.js 15的一切</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/everything-about-the-latest-node-js-release-node-js-15-ad934e0dd9f4?source=collection_archive---------5-----------------------#2020-11-23">https://javascript.plainenglish.io/everything-about-the-latest-node-js-release-node-js-15-ad934e0dd9f4?source=collection_archive---------5-----------------------#2020-11-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="50ff" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Node.js v15来了！</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/63d1dc148ec99c1d5eb2beffec4e540d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LWaf2iypTmXeYogz.png"/></div></div></figure><p id="e471" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是等等，我刚刚把我的项目升级到Node 12，而你告诉我一个新版本已经发布了！我甚至还没有把我的项目升级到节点14！我现在应该直接上note 15吗？但是等等，有哪些突破性的变化？还有，有什么新功能？甚至升级有什么好处吗？我应该想到它吗？</p><p id="59ae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你曾经有过这些问题，不要担心，因为我在这里告诉你你需要知道的关于node.js最新版本的一切，如果你需要升级到它，有什么突破性的变化，有什么新功能。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="3f27" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">主要变化概述:</h1><ol class=""><li id="4345" class="mj mk in kq b kr ml ku mm kx mn lb mo lf mp lj mq mr ms mt bi translated">中止控制器:这基本上是一个实验性的实现，但是非常有用。它基本上帮助我们拒绝或放弃任何基于承诺的API</li><li id="7d83" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><strong class="kq io"> npm 7: </strong>有一个新的Npm主版本发布，它在package-lock.json格式上有一些变化，还引入了Npm工作区。</li><li id="26ea" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><strong class="kq io"> V8 8.6: </strong> v8 javascript引擎已经升级到8.6。对于那些不知道8.4已经在note 14中发布的人。<br/>-promise . any()<br/>-aggregate error<br/>-string . prototype . replace all()<br/>-&amp;&amp;=，||= and？？=</li><li id="e124" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><strong class="kq io">突变变化</strong></li></ol></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><blockquote class="mz"><p id="c419" class="na nb in bd nc nd ne nf ng nh ni lj dk translated">让我首先解决房间里的大象:您需要将您的项目升级到节点15吗？简单的回答是不！不要惊讶，因为这是一个奇数编号的发布线，节点js 15不会被提升到LTS(长期支持)。</p></blockquote><p id="1c4f" class="pw-post-body-paragraph ko kp in kq b kr nj jo kt ku nk jr kw kx nl kz la lb nm ld le lf nn lh li lj ig bi translated">每当Node.js发布奇数版本时，它不会被提升到LTS；每当它发布偶数版本时，这才是您真正应该升级应用程序的版本，因为它将获得长期支持，并且会持续很长时间。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="1c18" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">堕胎控制员</h1><blockquote class="mz"><p id="2b9a" class="na nb in bd nc nd ne nf ng nh ni lj dk translated">这基本上是一个新的实验性实现，允许我们取消任何基于承诺的API。</p></blockquote><p id="7e5d" class="pw-post-body-paragraph ko kp in kq b kr nj jo kt ku nk jr kw kx nl kz la lb nm ld le lf nn lh li lj ig bi translated">这很酷，因为在此之前，我们只能取消订阅我们已经发出的API调用，但我们并没有真正中止它们，它们仍然在执行，我们只是没有听到响应。使用AbortController，我们实际上可以中止任何类型的API请求:它可以是响应体类型，甚至可以是流(比如下载视频)。</p><pre class="kd ke kf kg gt np nq nr ns aw nt bi"><span id="a7ad" class="nu ls in nq b gy nv nw l nx ny">var controller = new AbortController();<br/>var signal = controller.signal;<br/><br/>var downloadBtn = document.querySelector('.download');<br/>var abortBtn = document.querySelector('.abort');<br/><br/>downloadBtn.addEventListener('click', fetchVideo);<br/><br/>abortBtn.addEventListener('click', function() {<br/>  controller.abort();<br/>  console.log('Download aborted');<br/>});<br/><br/>function fetchVideo() {<br/>  ...<br/>  fetch(url, {signal}).then(function(response) {<br/>    ...<br/>  }).catch(function(e) {<br/>    reports.textContent = 'Download error: ' + e.message;<br/>  })<br/>}</span></pre><p id="63a6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们快速浏览一下基本代码，以便真正理解幕后发生了什么。</p><p id="2413" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，首先我们需要使用中止控制器构造函数创建一个控制器，然后使用controller.signal属性获取对其关联信号的引用。</p><p id="cd8b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们在HTML中有两个按钮，基本上是一个下载按钮和一个中止按钮。在download按钮上，我们添加了一个事件，它基本上监听一个点击事件，每当点击事件发生时，它就开始获取视频。另一方面，中止按钮也侦听点击事件，但它实际上中止了控制器，然后它记录“下载中止”。</p><blockquote class="mz"><p id="7f58" class="na nb in bd nc nd ne nf ng nh ni lj dk translated">我相信你至少了解了一点，因为我说过它仍然是实验性的，所以我不建议你在生产应用中开始使用它。</p></blockquote><p id="6d4f" class="pw-post-body-paragraph ko kp in kq b kr nj jo kt ku nk jr kw kx nl kz la lb nm ld le lf nn lh li lj ig bi translated">点击阅读更多关于堕胎控制者<a class="ae nz" href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="1df5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae nz" href="https://mdn.github.io/dom-examples/abort-api/" rel="noopener ugc nofollow" target="_blank">堕胎控制员实例</a></p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="ec59" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">NPM 7</h1><p id="9f37" class="pw-post-body-paragraph ko kp in kq b kr ml jo kt ku mm jr kw kx oa kz la lb ob ld le lf oc lh li lj ig bi translated">我们不会深入研究这一变化，因为这实际上需要一篇单独的文章。我只是给你一个简单的概述，有什么变化，有什么新功能！</p><p id="3e00" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于那些不知道什么是NPM的人来说:它被数百万开发者使用，它有数百万个库，它每月有大约750亿次下载，所以你真的需要去看看。</p><h2 id="6773" class="nu ls in bd lt od oe dn lx of og dp mb kx oh oi md lb oj ok mf lf ol om mh on bi translated">新功能:</h2><ol class=""><li id="30e9" class="mj mk in kq b kr ml ku mm kx mn lb mo lf mp lj mq mr ms mt bi translated"><strong class="kq io">工作区:</strong>一个<strong class="kq io"> </strong>工作区，现在可以帮助我们管理单个顶层包中的多个项目。</li><li id="3928" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><strong class="kq io">自动安装对等依赖关系:</strong>现在自动安装对等依赖关系。从NPM 7开发人员将需要管理他们自己的对等依赖。对于一些应用程序来说，这可能是一个突破性的变化。如果你正在思考什么是对等依赖，我强烈建议你浏览一下文档，但是我会给你一个简单的概述:假设你有一个库或者你有一个已经发布的NPM包，它有一些对等依赖。在这个版本之前，您的包不需要安装任何对等依赖项。任何使用您的软件包的应用程序或服务都需要安装它。</li></ol></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="a827" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">Promise.any()和AggregateError</h1><p id="d036" class="pw-post-body-paragraph ko kp in kq b kr ml jo kt ku mm jr kw kx oa kz la lb ob ld le lf oc lh li lj ig bi translated">Promise.any()基本上接受许多承诺，一旦其中一个承诺完成，它就解析。</p><blockquote class="oo op oq"><p id="fd08" class="ko kp or kq b kr ks jo kt ku kv jr kw os ky kz la ot lc ld le ou lg lh li lj ig bi translated"><em class="in">与promise.all()完全相反。</em></p></blockquote><p id="3801" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在promised.all()中，我们过去常常传递一些承诺，但只有当我们传递的每一个承诺都得到解决时，它才用于解决。另一方面，在这种情况下，我们等待它们中的任何一个解决，所以它与promised.all()正好相反</p><p id="ce55" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在你一定在想，如果我们传递给promise.any()的所有承诺都失败了，会发生什么！在这种情况下，它将返回一个<strong class="kq io"> AggregateError </strong>，这是一个新的Error子类，也是在v8 8.6中发布的。</p><pre class="kd ke kf kg gt np nq nr ns aw nt bi"><span id="6b46" class="nu ls in nq b gy nv nw l nx ny">const promise1 = Promise.reject(0);<br/>const promise2 = new Promise((resolve) =&gt; setTimeout(resolve, 100, 'quick'));<br/>const promise3 = new Promise((resolve) =&gt; setTimeout(resolve, 500, 'slow'));</span><span id="2d85" class="nu ls in nq b gy ov nw l nx ny">const promises = [promise1, promise2, promise3];</span><span id="800d" class="nu ls in nq b gy ov nw l nx ny">Promise.any(promises).then((value) =&gt; console.log(value));</span><span id="ef88" class="nu ls in nq b gy ov nw l nx ny">// expected output: "quick"</span></pre><p id="7fb4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这个例子中，我们有三个承诺。如你所见，第一个被拒绝。第二个在100毫秒内解决，第三个在500毫秒内解决。</p><p id="fc97" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将它们按数组分组，然后传递并承诺。任何()第一个承诺一旦解决，它就会解决，并向我们返回第一个解决的承诺的价值，因此当我们运行它时，您可以看到它打印为“快速”。</p><p id="1b73" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以基本上，它没有等待有500毫秒延迟的承诺，也没有拒绝，因为其中一个承诺被拒绝了。它基本上给了我们成功完成的第一个承诺的价值。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="c0b0" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">String.prototype.replaceAll()</h1><p id="c07e" class="pw-post-body-paragraph ko kp in kq b kr ml jo kt ku mm jr kw kx oa kz la lb ob ld le lf oc lh li lj ig bi translated"><strong class="kq io"> replaceAll() </strong>方法返回一个新字符串，其中模式的所有匹配项都被替换项替换。模式可以是字符串或正则表达式。原始字符串保持不变。</p><pre class="kd ke kf kg gt np nq nr ns aw nt bi"><span id="813e" class="nu ls in nq b gy nv nw l nx ny">const p = 'The quick brown fox jumps over the lazy dog.';</span><span id="aab5" class="nu ls in nq b gy ov nw l nx ny">console.log(p.replaceAll('dog', 'monkey'));</span><span id="df46" class="nu ls in nq b gy ov nw l nx ny">// expected output: "The quick brown fox jumps over the lazy monkey."</span></pre><p id="7292" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正如你在这个例子中看到的，我们这里有一个字符串，我们想用“猴”替换所有的“狗”。</p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><p id="1b20" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，Node.js已经与我们合作了10多年，他们除了提高自己之外什么也没做，他们计划在未来10年也这样做，他们已经为未来10年制定了路线图。他们已经把它提升到了一个全新的水平，这一次他们开始对投稿人进行调查，并开始考虑最需要的特性的变化。</p><p id="4dc4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我希望本文能帮助您理解最新的Node.js版本。</p><p id="e42f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">谢谢你的阅读。如果您有任何问题，请随时留言回应。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h1 id="73ee" class="lr ls in bd lt lu oy lw lx ly oz ma mb jt pa ju md jw pb jx mf jz pc ka mh mi bi translated">资源</h1><ol class=""><li id="7e92" class="mj mk in kq b kr ml ku mm kx mn lb mo lf mp lj mq mr ms mt bi translated"><a class="ae nz" href="https://nodejs.org/en/blog/release/v15.0.0" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/blog/release/v15.0.0</a></li><li id="a598" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><a class="ae nz" href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/abort controller</a></li><li id="3098" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><a class="ae nz" href="https://github.blog/2020-10-13-presenting-v7-0-0-of-the-npm-cli/" rel="noopener ugc nofollow" target="_blank">https://git hub . blog/2020-10-13-presentation-V7-0-0-of-NPM-CLI/</a></li><li id="967f" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><a class="ae nz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/any" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Promise/any</a></li><li id="c842" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><a class="ae nz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/AggregateError</a></li><li id="9d03" class="mj mk in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><a class="ae nz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/String/replace all</a></li></ol></div></div>    
</body>
</html>
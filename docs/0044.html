<html>
<head>
<title>How (and why) you should use TypeScript with Node and Express.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何(以及为什么)将TypeScript用于Node和Express。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-with-node-and-express-js-why-when-and-how-eb6bc73edd5d?source=collection_archive---------0-----------------------#2018-10-27">https://javascript.plainenglish.io/typescript-with-node-and-express-js-why-when-and-how-eb6bc73edd5d?source=collection_archive---------0-----------------------#2018-10-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8a63a7ed18f4cdc649221dc18b840254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzcYZIhdZjuQaT8gTk1YAQ.png"/></div></div></figure><p id="061c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我职业生涯的初期，我是一名桌面开发人员，强类型语言主导着市场。</p><p id="bb82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当我转向web开发时，我对JavaScript和Python等语言的每一个新特性都很着迷。我不必声明变量类型的事实给我带来了生产力，我的工作变得更加有趣。</p><p id="f117" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以当我第一次听说TypeScript的时候，这个想法似乎是语言发展的一个倒退。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/612bb00437e744f121731294d6700583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*aM3zJMUAzTW6uX52"/></div></figure><h2 id="3a53" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">我改变主意了吗？</h2><p id="7a46" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">可以，但是要看情况。对于我独自工作的个人项目，我仍然更喜欢普通JavaScript的生产力。但是，对于更大的项目，在团队中工作，我推荐使用TypeScript。在这篇文章中，我将解释如何和为什么。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lw"><img src="../Images/6df4adca0a3a87fb956058d899a5acf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mn6bOs7s6Qbao15PMNRyOA.png"/></div></div></figure><h1 id="39d2" class="lx kz in bd la ly lz ma ld mb mc md lg me mf mg lj mh mi mj lm mk ml mm lp mn bi translated">以打字打的文件</h1><p id="5339" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">如果你还不知道什么是TypeScript，我推荐你阅读这篇概述:<a class="ae mo" href="https://www.tutorialspoint.com/typescript/typescript_overview.htm" rel="noopener ugc nofollow" target="_blank">https://www . tutorialspoint . com/TypeScript/TypeScript _ overview . htm<br/></a>和官方5分钟教程:<br/><a class="ae mo" href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" rel="noopener ugc nofollow" target="_blank">https://www . typescriptlang . org/docs/handbook/TypeScript-in-5-minutes . html</a></p><p id="eb99" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但我们可以说，从表面上看，它是强类型的ECMAScript 6。</p><h1 id="7318" class="lx kz in bd la ly lz ma ld mb mc md lg me mf mg lj mh mi mj lm mk ml mm lp mn bi translated">生产力与维护</h1><p id="8fa6" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">根据定义，“TypeScript是用于应用程序规模开发的JavaScript”。也就是说，复杂项目的可维护性补偿了我们在项目初始设置时所做的工作。让我们指出为什么会发生这种情况:</p><h2 id="8daf" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">类型安全=错误更少</h2><p id="a60b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">通过在代码中定义类型，您可以允许IDE确认在使用类和函数时出现的错误，这些错误只能在运行时被发现。</p><p id="bb36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">举例:</strong></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/1eb7f6d7cf4d79a162a2b29be02abd36.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/0*3o4OExEYeMkk1KNq"/></div></figure><p id="b58a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我用Visual Studio代码指出了两个错误:</p><p id="ec34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第6行:</strong>我们试图将一个字符串参数传递给一个只接受数字的函数。<br/> <strong class="jx io">第9行:</strong>我们试图将一个返回数字的函数的结果赋给一个字符串。如果没有Typescript，这两个错误不会被注意到，从而导致最终应用程序出现一些bug。</p><h2 id="8763" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">IDE更容易公开项目模块</h2><p id="429c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在复杂的项目中，我们有数百个类分布在多个文件中。当我们定义类型时，IDE能够将对象和函数与产生它们的文件联系起来。</p><p id="e9e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当使用control +单击从另一个文件导入的方法或类时，IDE将自动导航到导入的文件，突出显示定义引用的行。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/337a4ded32837bed6ecbab8da52c467b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-EQZzZRPI2DgeYCpZ0xKw.png"/></div></div></figure><p id="2286" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以在从其他文件导入的类中使用autocomplete。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/e73efa82b7e4f9cf282691868cab1886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*BYJTKDDgDeCtusx4iUoGaA.png"/></div></figure><p id="c7fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">维护的困难是Java和C #开发人员避免将大型项目迁移到JS的主要原因之一。我们可以说Typescript是一种克服了这一障碍的企业语言。</p><h1 id="8542" class="lx kz in bd la ly lz ma ld mb mc md lg me mf mg lj mh mi mj lm mk ml mm lp mn bi translated">如何用Typescript设置Express项目</h1><p id="a9d6" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在让我们一步一步地在Express.js项目中创建一个使用Typescript语言的环境。</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="474e" class="ky kz in mt b gy mx my l mz na">npm init</span></pre><p id="3f75" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们安装<code class="fe nb nc nd mt b">typescript</code>包。</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="1aba" class="ky kz in mt b gy mx my l mz na">npm install typescript -s</span></pre><h2 id="7b86" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">关于Typescript节点包</h2><p id="ee06" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">Node.js是一个运行Javascript而不是Typescript的引擎。节点类型脚本包允许你把你的<code class="fe nb nc nd mt b">.ts</code>文件转换成<code class="fe nb nc nd mt b">.js</code>脚本。Babel也可以用于transpile Typescript，然而市场标准是使用官方的微软软件包。</p><p id="a68e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们的<code class="fe nb nc nd mt b">package.json</code>里，我们会放一个叫做<code class="fe nb nc nd mt b">tsc</code>的脚本:</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="a2da" class="ky kz in mt b gy mx my l mz na">"scripts": {<br/>    "tsc": "tsc"<br/>},</span></pre><p id="d3a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这一修改允许我们从项目文件夹中的命令行调用typescript函数。所以我们可以使用下面的命令:</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="4be6" class="ky kz in mt b gy mx my l mz na">npm run tsc -- --init</span></pre><p id="5cb2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个命令通过创建<code class="fe nb nc nd mt b">tsconfig.json</code>文件来初始化typescript项目。在这个文件中，我们将取消对<code class="fe nb nc nd mt b">outDir</code>选项的注释，并为传输文件选择一个位置。要交付的js文件:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/438b50f866a9bafec3ee35b82f03ba3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hpDA_-bAFUcSVSMM"/></div></div></figure><h2 id="9a0e" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">安装express.js</h2><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="359e" class="ky kz in mt b gy mx my l mz na">npm install express -s</span></pre><p id="08eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Express和Typescript包是独立的。这样做的结果是，Typescript不“知道”Express类的类型。Typescript有一个特定的npm包来识别Express类型。</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="f5e6" class="ky kz in mt b gy mx my l mz na">npm install @types/express -s</span></pre><h2 id="eda5" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">你好世界</h2><p id="8fa1" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">为了得到尽可能简单的应用程序，我将使用express.js教程中的hello world示例:</p><p id="884d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae mo" href="https://expressjs.com/pt-br/starter/hello-world.html" rel="noopener ugc nofollow" target="_blank">https://expressjs.com/pt-br/starter/hello-world.html</a></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e8f3952e522c8bbedf1621614166ce51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*lR-wXfsHCzB7F72FMV0ZKg.png"/></div></figure><p id="0ef9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们的项目中，我们将创建一个名为<code class="fe nb nc nd mt b">app</code>的文件夹。在这个文件夹中，我们将创建一个名为<code class="fe nb nc nd mt b">app.ts</code>的文件，其内容如下:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h2 id="a46b" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">编译我们的第一个应用程序:</h2><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="087e" class="ky kz in mt b gy mx my l mz na">npm run tsc</span></pre><p id="a8a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，该命令自动创建了构建文件夹和。js文件。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/01d2554982e60285fe4d5c309a7ee2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/0*s4NA7vYgkm2mv7B1"/></div></figure><h2 id="9d16" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">跑快车:</h2><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="35cd" class="ky kz in mt b gy mx my l mz na">node build/app.js</span></pre><p id="066a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这样，我们就有了一个已经在端口3000上运行的服务器:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/39d1b81a8aedcca591bad1f0486f5619.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/0*gt8uJIyfoYdcqhQf"/></div></figure><h2 id="32b5" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">运行TypeScript而不传输文件</h2><p id="23ce" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">可以直接在带有<code class="fe nb nc nd mt b">ts-node</code>包的节点上运行typescript。</p><p id="0c2c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个包仅推荐用于开发。要在生产中进行最终部署，请始终使用项目的javascript版本。</p><p id="21bd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nb nc nd mt b">ts-node</code>已经作为另一个包t <code class="fe nb nc nd mt b">ts-node-dev</code>的依赖项包含在内。安装之后，<code class="fe nb nc nd mt b">ts-node-dev</code>我们可以运行命令，每当一个项目文件改变时就重启服务器。</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="996d" class="ky kz in mt b gy mx my l mz na">npm install ts-node-dev -s</span></pre><p id="fb3d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们的<code class="fe nb nc nd mt b">packege.json</code>中，我们将添加另外两个脚本:</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="ba92" class="ky kz in mt b gy mx my l mz na">"scripts": {<br/>    "tsc": "tsc",<br/>    "dev": "ts-node-dev --respawn --transpileOnly ./app/app.ts",<br/>    "prod": "tsc &amp;&amp; node ./build/app.js"<br/>},</span></pre><p id="f584" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要启动开发环境:</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="f1a3" class="ky kz in mt b gy mx my l mz na">npm run dev</span></pre><p id="09b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在生产模式下运行服务器:</p><pre class="ku kv kw kx gt ms mt mu mv aw mw bi"><span id="f86e" class="ky kz in mt b gy mx my l mz na">npm run prod</span></pre><p id="0b36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最终项目可以在github资源库中找到:</p><div class="nk nl gp gr nm nn"><a href="https://github.com/andregardi/ts-express" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd io gy z fp ns fr fs nt fu fw im bi translated">安德烈加迪/ts-express</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">为带有node和Express的Typescript创建的存储库。媒体中的Js文章。开始一个…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob jt nn"/></div></div></a></div></div><div class="ab cl oc od hr oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ig ih ii ij ik"><p id="ebd7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="oj">更多内容请看</em><a class="ae mo" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="oj">plain English . io</em></strong></a><em class="oj">。</em></p><p id="4d49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="oj">报名参加我们的</em> <a class="ae mo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="oj">免费每周简讯</em> </strong> </a> <em class="oj">。关注我们关于</em> <a class="ae mo" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="oj">推特</em></strong></a><a class="ae mo" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="oj">LinkedIn</em></strong></a><em class="oj"/><a class="ae mo" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="oj">YouTube</em></strong></a><em class="oj"/><a class="ae mo" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="oj">不和</em> </strong> </a> <strong class="jx io"> <em class="oj">。</em>T51】</strong></p><p id="807b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="oj">对缩放您的软件启动感兴趣</em> </strong> <em class="oj">？检查</em> <a class="ae mo" href="https://circuit.ooo?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="oj">电路</em> </strong> </a> <em class="oj">。</em></p></div><div class="ab cl oc od hr oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ig ih ii ij ik"><h1 id="ed8d" class="lx kz in bd la ly ok ma ld mb ol md lg me om mg lj mh on mj lm mk oo mm lp mn bi translated">进一步阅读</h1><div class="nk nl gp gr nm nn"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-made-easy-a-guide-to-your-first-type-safe-app-with-next-js-wundergraph-and-prisma-e197a59e2b30"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd io gy z fp ns fr fs nt fu fw im bi translated">轻松编写类型脚本:使用Next.js、WunderGraph和Prisma编写第一个类型安全应用程序的指南</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">是时候抛开恐惧，学习TypeScript了。让我们给你第一次“发现！”瞬间通过建立一个完整的…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nw l"><div class="op l ny nz oa nw ob jt nn"/></div></div></a></div></div></div>    
</body>
</html>
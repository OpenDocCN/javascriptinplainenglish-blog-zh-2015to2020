<html>
<head>
<title>Effectively Overriding JavaScript’s toString() Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有效地覆盖了JavaScript的toString()方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/effectively-overriding-javascripts-tostring-method-a0d9b7c97940?source=collection_archive---------3-----------------------#2019-12-19">https://javascript.plainenglish.io/effectively-overriding-javascripts-tostring-method-a0d9b7c97940?source=collection_archive---------3-----------------------#2019-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="202e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">正在删除[对象对象]</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/052060e03610bcbb807513be51a30d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b8zyTbJ7BKcJx_-OUytWYQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by Philip Estrada on <a class="ae kv" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated">他的文章受到了<a class="mb mc ep" href="https://medium.com/u/48d9733edcba?source=post_page-----a0d9b7c97940--------------------------------" rel="noopener" target="_blank">马扬克·古普塔</a>的文章的启发。我强烈建议你读一读。这里可以找到<a class="ae kv" href="https://medium.com/javascript-in-plain-english/overriding-tostring-function-of-javascript-objects-dd3545ba6254" rel="noopener"/>。</p><p id="6290" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在他的文章中，他解释了<strong class="ky ir">为什么</strong>我们在使用<strong class="ky ir"> alert(Object) </strong>或<strong class="ky ir"> console.log(Object) </strong>语句时经常会得到【object Object】。</p><p id="2626" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="md">【Object Object】的原因可以在</em><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString" rel="noopener ugc nofollow" target="_blank"><em class="md">MDN</em></a><em class="md">以及文章作者</em> <a class="mb mc ep" href="https://medium.com/u/48d9733edcba?source=post_page-----a0d9b7c97940--------------------------------" rel="noopener" target="_blank"> <em class="md">【马扬克】</em> </a> <em class="md">和</em><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toStringTag" rel="noopener ugc nofollow" target="_blank"><em class="md">symbol . tostring tag</em></a><em class="md">中找到。</em></p><blockquote class="me"><p id="bc71" class="mf mg iq bd mh mi mj mk ml mm mn lr dk translated">我想做的是在我们的对象中覆盖toString()方法，以允许我们实际上将对象的内容作为字符串来查看。</p></blockquote></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h2 id="aa52" class="mv mw iq bd mx my mz dn na nb nc dp nd lf ne nf ng lj nh ni nj ln nk nl nm nn bi translated">我们将研究两种解决方案。第二个我更喜欢(警告。)</h2><ol class=""><li id="dc53" class="no np iq ky b kz nq lc nr lf ns lj nt ln nu lr nv nw nx ny bi translated">直接在对象中重写toString()方法。(参见解决方案1)</li><li id="906c" class="no np iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">覆盖对象。prototype.toString带有自己的函数。(参见解决方案2)</li></ol></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h2 id="d1a0" class="mv mw iq bd mx my mz dn na nb nc dp nd lf ne nf ng lj nh ni nj ln nk nl nm nn bi translated">问题的快速再现</h2><p id="d2cc" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf oe lh li lj of ll lm ln og lp lq lr ij bi translated">这是一个调用每个对象内置的toString()方法的例子。这是在服务器端node.js中完成的，但也可以使用客户端的“alert()”来完成注意输出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/eca579629adb50e5c39f0d10ef4f694a.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*xy6hfxTuBDbPfojYM7XSqQ.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Output: [object Object]</figcaption></figure><blockquote class="oi oj ok"><p id="0b50" class="kw kx md ky b kz la jr lb lc ld ju le ol lg lh li om lk ll lm on lo lp lq lr ij bi translated">在我看来，这令人失望，而且信息也不丰富。就个人而言，我至少希望看到对象的内容，例如键和值。</p></blockquote><h1 id="db61" class="oo mw iq bd mx op oq or na os ot ou nd jw ov jx ng jz ow ka nj kc ox kd nm oy bi translated">解决方案1:</h1><p id="a127" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf oe lh li lj of ll lm ln og lp lq lr ij bi translated"><strong class="ky ir">直接在对象中覆盖toString()方法(方法1) </strong></p><p id="96c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">继续我们的简单对象，让我们创建自己的toString()方法，该方法在调用时显示对象的键和值。我们的toString()方法覆盖了内置的toString()。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/d547a92f6e5b15d80330052e634d0599.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*wvLJZJ96dQs1WupUkEdBMQ.jpeg"/></div></figure><p id="e75d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">没有【对象对象】！</strong></p><p id="fd59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有了键和值。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="ea32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意</strong>:如果需要，可以在下一张图片中写下如下。然而，<strong class="ky ir">非常</strong>重要的是在这种情况下使用一个<strong class="ky ir">匿名函数</strong> "function(){} "而不是一个<strong class="ky ir">箭头函数"</strong> ()= &gt; {}"。</p><p id="0047" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么？因为箭头函数的“this”关键字并不指向“this Object”箭头函数有一个<a class="ae kv" href="https://hackernoon.com/javascript-es6-arrow-functions-and-lexical-this-f2a3e2a5e8c4" rel="noopener ugc nofollow" target="_blank">词法本</a>。</p><p id="9ee8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">直接在对象中覆盖toString()方法(方法2) </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/a98b2a2d905471a4e889d709f549935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*T5EagLKfhe37Fypa5v8C3Q.jpeg"/></div></figure><p id="898b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">没有【对象对象】！</strong></p><p id="3d91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有了键和值。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="3e02" class="oo mw iq bd mx op pb or na os pc ou nd jw pd jx ng jz pe ka nj kc pf kd nm oy bi translated">解决方案2</h1><p id="21fe" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf oe lh li lj of ll lm ln og lp lq lr ij bi translated">覆盖对象。prototype.toString带有自己的函数。</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><blockquote class="oi oj ok"><p id="f14a" class="kw kx md ky b kz la jr lb lc ld ju le ol lg lh li om lk ll lm on lo lp lq lr ij bi translated"><strong class="ky ir">警告</strong>:覆盖本地对象的属性时要小心。你永远不知道对象什么时候会发生根本性的变化。</p></blockquote></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="2c93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="md">同样，如果您计划使用“this”关键字，请不要使用箭头功能。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/6be37b1a1f5fddb80983d625564bac28.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*8HnT9m8vAFdojh8sjN4c7w.jpeg"/></div></figure><p id="f4d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">没有【对象对象】！</strong></p><p id="4f8e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在有了键和值。</p><h1 id="4b25" class="oo mw iq bd mx op oq or na os ot ou nd jw ov jx ng jz ow ka nj kc ox kd nm oy bi translated">结论:</h1><p id="a4cf" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf oe lh li lj of ll lm ln og lp lq lr ij bi translated">在这里，我们已经看到了覆盖内置toString()方法的重要性以及几种方法。</p><p id="2083" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这只是一个起点，然而，你可以让自定义的toString()方法返回你喜欢的任何东西，<em class="md">它不一定要使用JSON.stringify() </em>。</p><p id="6783" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">附带的好处是，我们了解了一点匿名函数和箭头函数之间的区别，特别是它们如何处理关键字“this”</p><h2 id="1658" class="mv mw iq bd mx my mz dn na nb nc dp nd lf ne nf ng lj nh ni nj ln nk nl nm nn bi translated">感谢您的阅读和快乐编码！</h2></div></div>    
</body>
</html>
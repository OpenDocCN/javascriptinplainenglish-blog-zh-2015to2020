<html>
<head>
<title>Multi Segment Display in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的多段显示</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/multi-segment-display-in-javascript-6f256153cda8?source=collection_archive---------15-----------------------#2020-10-15">https://javascript.plainenglish.io/multi-segment-display-in-javascript-6f256153cda8?source=collection_archive---------15-----------------------#2020-10-15</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div class="gi gj jo"><img src="../Images/29a77b6ddba38f7fcb82c95f6a8b0b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*-BCh5-hbbLzP5QT0e6g-Uw.png"/></div></figure><p id="f396" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">我最近写了一篇关于<a class="ae kt" href="https://medium.com/javascript-in-plain-english/build-a-seven-segment-display-in-javascript-8822a7332c70" rel="noopener">用JavaScript </a>构建七段显示的文章。在这篇文章中，我将扩展这个想法，创建一个多段显示，正如你从上面的横幅中看到的，不仅可以显示数字，还可以显示字母和标点符号。</p><h2 id="b7d2" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">该项目</h2><p id="4613" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">该项目由以下文件组成，您可以克隆/下载<a class="ae kt" href="https://github.com/CodeDrome/multi-segment-display-javascript" rel="noopener ugc nofollow" target="_blank"> Github库</a>。</p><ul class=""><li id="7529" class="ls lt ir jx b jy jz kc kd kg lu kk lv ko lw ks lx ly lz ma bi translated">multi _ segment _ show . js</li><li id="c715" class="ls lt ir jx b jy mb kc mc kg md kk me ko mf ks lx ly lz ma bi translated">multi _ segment _显示器. htm</li><li id="992a" class="ls lt ir jx b jy mb kc mc kg md kk me ko mf ks lx ly lz ma bi translated">multi _ segment _ show _ page . js</li></ul><p id="61e8" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">显示器本身位于<strong class="jx is"> multi_segment_display.js </strong>中，并作为ES6/ES2015类实现。让我们看看代码，从构造函数开始。</p><figure class="mg mh mi mj gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="00b3" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">首先，<code class="fe mm mn mo mp b">_ColorSchemes</code>对象被用作<code class="fe mm mn mo mp b">ColorScheme</code>属性的枚举。对于显示的内容和格式，有许多变量，我们将在后面的使用中看到。最后，有几个函数调用来设置显示，我将在适当的时候详细描述。</p><p id="6911" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">接下来我们有属性。</p><figure class="mg mh mi mj gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="e30c" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">大多数属性只不过是各种支持变量的getter/setter。然而，最后两个稍微复杂一些:</p><h2 id="574d" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">字符数</h2><p id="7037" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">该属性的设置器首先验证新值，然后需要调用几个函数来完全重新配置显示。</p><h2 id="5ce2" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">文本</h2><p id="7aae" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">这里我们需要检查新值是否太长。如果可以，我们用空格填充字符串，然后调用一个函数来显示它。</p><p id="fd3e" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">现在我们来看看方法。</p><figure class="mg mh mi mj gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><h2 id="4ad2" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">_SetHeight</h2><p id="d595" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">该函数将小部件的高度设置为任意特定字符数的宽度的固定比例。</p><h2 id="77cc" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">_创建分段</h2><p id="b18a" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">每个段都是一个SVG元素，这些都是由这个函数创建的。</p><h2 id="5413" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">_ SetSegmentColours</h2><p id="9dc5" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">通过将适当的元素设置为点亮或不点亮的段颜色来显示字母、数字和其他字符。<code class="fe mm mn mo mp b">RedrawAll</code>参数指定是否重画所有元素。如果这是假的，只有改变的字符会被重画，如果<code class="fe mm mn mo mp b">Text</code>属性已经被改变，这就足够了。然而，如果一种颜色被改变了，即使文本是相同的，这也需要为真来强制小部件重新绘制所有的段。</p><p id="012b" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">最后，我们需要为每个字符设置分段打开或关闭模式。</p><figure class="mg mh mi mj gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="1c78" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">这是一个冗长的函数，它为每个可显示的字符创建一个二维数组，显示哪些段“开”，哪些段“关”。我在这里只展示了一个，分布在多行中，以显示实际的字符“A”可以在0和1的海洋中辨别出来。</p><p id="2c98" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">如果<code class="fe mm mn mo mp b">_SetSegmentColours</code>函数不能从<code class="fe mm mn mo mp b">_SegmentPatterns</code>的<code class="fe mm mn mo mp b">Text</code>属性中找到一个字符，它将打印一个空格。不过，如果你觉得有必要的话，可以在这个功能中给<code class="fe mm mn mo mp b">_SegmentPatterns</code>添加其他角色。</p><h2 id="d4e2" class="ku kv ir bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">尝试一下</h2><p id="801b" class="pw-post-body-paragraph jv jw ir jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ik bi translated">小部件的代码现在已经完成了，但是我已经在Github存储库中包含了一个HTML文件和一个JavaScript文件来进行测试。我不会在这里展示这些代码，但是如果你在浏览器中打开这个页面，它看起来就像这样。</p><figure class="mg mh mi mj gu js gi gj paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gi gj mq"><img src="../Images/ee731e58f0cd52fd440290a576864b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-5zwVt-Ry0XoGkQ0qh3Ig.png"/></div></div></figure><p id="0438" class="pw-post-body-paragraph jv jw ir jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ik bi translated">如你所见，左边有几个设置属性的控件，右边有一个小部件的实例。<strong class="jx is">multi _ segment _ display _ page . js</strong>文件只包含处理各种onchange事件的代码。花几分钟时间玩一下UI，请随意使用或修改这个小部件。</p></div></div>    
</body>
</html>
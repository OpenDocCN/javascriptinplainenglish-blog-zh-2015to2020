<html>
<head>
<title>JavaScript Frameworks, Performance Comparison 2020</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript框架，2020年性能比较</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-frameworks-performance-comparison-2020-cd881ac21fce?source=collection_archive---------0-----------------------#2020-12-21">https://javascript.plainenglish.io/javascript-frameworks-performance-comparison-2020-cd881ac21fce?source=collection_archive---------0-----------------------#2020-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="72fa" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript框架之间的终极性能之战</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/0203b911172b16ed1aafbc92f7d04e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2cXi0-rUjFP78a6G9ESyg.png"/></div></div></figure><p id="f454" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我浏览了一下网页，意识到我们已经两年多没有一个好的JavaScript框架性能测试了。所以在2020年结束之前，让我们来玩一玩这些库之间的竞争。</p><p id="9038" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">把20个最流行的JavaScript框架放在一起使用<a class="ae lk" href="https://github.com/krausest/js-framework-benchmark" rel="noopener ugc nofollow" target="_blank"> JS框架基准</a>怎么样？</p><blockquote class="ll lm ln"><p id="dfe6" class="ko kp lo kq b kr ks jo kt ku kv jr kw lp ky kz la lq lc ld le lr lg lh li lj ig bi translated"><strong class="kq io">免责声明:</strong>这种比较是为了好玩，或许在过程中有教育意义。和往常一样，这里的每个库对大多数事情来说都足够好。如果有的话，这应该强调性能可以来自各种不同的技术和技巧。虽然您可以将此作为参考，但是您应该独立地验证您的单个用例的性能。你可以在这里找到最新的官方结果<a class="ae lk" href="https://krausest.github.io/js-framework-benchmark/index.html" rel="noopener ugc nofollow" target="_blank"/>。如果你想了解更多关于这个基准测试的内容，我在这里发布了一个<a class="ae lk" href="https://dev.to/ryansolid/making-sense-of-the-js-framework-benchmark-25hl" rel="noopener ugc nofollow" target="_blank">指南</a>。</p><p id="b14c" class="ko kp lo kq b kr ks jo kt ku kv jr kw lp ky kz la lq lc ld le lr lg lh li lj ig bi translated">同样值得一提的是，我是《坚实框架》的作者。所以我不可能在这里表现出任何偏见。但我的意图是让数字自己说话。抛开这些不谈，享受比较吧。</p></blockquote></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="78ab" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">竞争</h1><p id="6a34" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">我拿了JS框架基准测试的最新<a class="ae lk" href="https://krausest.github.io/js-framework-benchmark/2020/table_chrome_87.0.4280.66.html" rel="noopener ugc nofollow" target="_blank"> Chrome 87键控结果。这些是在Fedora 33下的Core i7剃刀刀片15上运行的，其中缓解被关闭。</a></p><p id="7abe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我过滤掉了所有有问题的实现，然后我抓取了Github stars排名前20的库。对于有多个版本的库，我使用了他们的最新版本和最具性能的变体，而没有使用第三方库。</p><p id="51dd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">1.<a class="ae lk" href="https://github.com/vuejs/vue" rel="noopener ugc nofollow" target="_blank"> Vue </a> (177k) <br/> 2。<a class="ae lk" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank">反应</a> (161k) <br/> 3。<a class="ae lk" href="https://github.com/angular/angular" rel="noopener ugc nofollow" target="_blank">角度</a> (68.9k) <br/> 4。<a class="ae lk" href="https://github.com/sveltejs/svelte" rel="noopener ugc nofollow" target="_blank">苗条</a> (40.5k) <br/> 5。<a class="ae lk" href="https://github.com/preactjs/preact" rel="noopener ugc nofollow" target="_blank">预动作</a> (27.9k) <br/> 6。<a class="ae lk" href="https://github.com/emberjs/ember.js" rel="noopener ugc nofollow" target="_blank">会员</a> (21.7k) <br/> 7。<a class="ae lk" href="https://github.com/jorgebucaran/hyperapp" rel="noopener ugc nofollow" target="_blank"> HyperApp </a> (18.2k) <br/> 8。<a class="ae lk" href="https://github.com/infernojs/inferno" rel="noopener ugc nofollow" target="_blank">魔族</a> (14.6k) <br/> 9。<a class="ae lk" href="https://github.com/riot/riot" rel="noopener ugc nofollow" target="_blank">暴动</a> (14.4k) <br/> 10。<a class="ae lk" href="https://github.com/yewstack/yew" rel="noopener ugc nofollow" target="_blank">红豆杉</a> (14.2k) <br/> 11。<a class="ae lk" href="https://github.com/MithrilJS/mithril.js" rel="noopener ugc nofollow" target="_blank">秘银</a> (12.5k) <br/> 12。<a class="ae lk" href="https://github.com/alpinejs/alpine" rel="noopener ugc nofollow" target="_blank">高山</a> (12.4k) <br/> 13。<a class="ae lk" href="https://github.com/knockout/knockout" rel="noopener ugc nofollow" target="_blank">脱模</a> (9.9k) <br/> 14。<a class="ae lk" href="https://github.com/marko-js/marko" rel="noopener ugc nofollow" target="_blank">马尔科</a> (9.9k) <br/> 15。<a class="ae lk" href="https://github.com/alibaba/rax" rel="noopener ugc nofollow" target="_blank"> Rax </a> (7k) <br/> 16。<a class="ae lk" href="https://github.com/Polymer/lit-html" rel="noopener ugc nofollow" target="_blank"> lit-html </a> (6.9k) <br/> 17。<a class="ae lk" href="https://github.com/elm" rel="noopener ugc nofollow" target="_blank">榆木</a> (6.2k) <br/> 18。<a class="ae lk" href="https://github.com/ractivejs/ractive" rel="noopener ugc nofollow" target="_blank">反应型</a> (5.8k) <br/> 19。<a class="ae lk" href="https://github.com/solidjs/solid" rel="noopener ugc nofollow" target="_blank">固体</a> (4.7k) <br/> 20。<a class="ae lk" href="https://github.com/imba/imba" rel="noopener ugc nofollow" target="_blank"> Imba </a> (4.1k)</p><blockquote class="ll lm ln"><p id="fd2b" class="ko kp lo kq b kr ks jo kt ku kv jr kw lp ky kz la lq lc ld le lr lg lh li lj ig bi translated"><strong class="kq io">注意:</strong>我将使用LitElement实现作为lit-html示例，因为标准实现已经标记了一个问题。开销应该是最小的，因为它是包装在单个web组件中的原始lit-html。</p></blockquote><p id="d875" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是当前web开发生态系统的一个很好的部分。虽然Github Stars不是最终的目标，但是在比较中有超过100个库，所以我需要标准来选择我们的竞争者。</p><p id="852c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每个库将在3个方面进行比较:DOM性能、启动指标和内存使用。此外，我将框架分成了4组，以便更好地与它们的原始性能进行比较。然而，我将在所有3个方面的图书馆排名。</p><p id="cff6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在每个组中，都有一个普通的JavaScript引用条目。这种实现使用所有最好的技术进行了极大的优化，以获得最佳性能。它将作为所有比较的基线。</p><p id="1061" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以让我们开始吧。</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="db7f" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">第4组—标准性能</h1><p id="af67" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">这是最大的一组，由一些最受欢迎的库组成。还有许多公司支持的企业，如脸书、谷歌、易贝和阿里巴巴。这些库要么不太关注性能，要么在某个方面突出性能，但在其他方面却表现不佳。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mw"><img src="../Images/9a17760f7172dd515df5195be098a843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfkTdeFMwMErL3WOt-WQBg.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 4 Performance</figcaption></figure><blockquote class="ll lm ln"><p id="7eaa" class="ko kp lo kq b kr ks jo kt ku kv jr kw lp ky kz la lq lc ld le lr lg lh li lj ig bi translated">这里有很多红色和橙色，但请记住，这些库平均只比我们在这里使用的手工制作的命令式香草JavaScript示例慢2倍左右。400ms和200ms有多大区别？</p></blockquote><p id="a5c5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在原始性能方面，React是这一系列产品中的佼佼者。虽然它从未停止令人惊讶的给予如何不同的架构，如何密切反应，马尔科，角，烬在这里总的来说。不过，React是React钩子的实现，它是这里的领导者。对于所有那些指向额外函数创建和坚持类的人来说，性能的论点并不在你这边。React挂钩是使用React最有效的方式。</p><p id="dc8b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里的大多数库要么是简单的列表排序导致交换行性能很差，要么是创建成本很高。Ember是这方面的一个极端例子，因为它的更新性能比这个组中的其他人好得多，但创作却是最差的。</p><p id="56f5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最慢的库(Knockout、Ractive和Alpine)都是具有相似架构的细粒度反应库。Knockout和Ractive(也是《苗条》的作者Rich Harris)来自VDOM图书馆统治之前的21世纪初。我还怀疑Alpine是否期望用少量的JavaScript方法呈现10k行。直到比较的后期，我们才会看到另一个纯细粒度的反应库。</p><p id="1882" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我们将主要基于库的捆绑包大小来比较启动度量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/dd488976910ef865d4a22535d860dfa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3H_SP7iaed0F5rM9RR2otA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 4 Startup</figcaption></figure><p id="5852" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">订单在这里变化很大。在Alpine性能最差的地方，我们可以看到它具有最小的包大小和最快的启动时间。Marko(来自易贝)紧随其后，Rax(来自阿里巴巴)紧随其后。所有这3个库都是为服务器端渲染而构建的，主要与客户端交互较少。这很大程度上是为什么他们在第4组的表现，但在这里领导创业。</p><p id="4f1d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">表格的后半部分是我们在基准测试中拥有的一些最大的包，以Ember结尾，其大小是任何其他实现的两倍多。不知道为什么渲染这个表要半兆多。但是它确实损害了启动性能。</p><p id="302b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们要看的最后一个类别是内存消耗。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/a872d08451618de7e98a95c52004cbf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aAdVBLu0VV4H-SpItpghEA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 4 Memory</figcaption></figure><p id="01d1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">内存倾向于反映我们已经看到的模式，因为它对性能有很大的影响，较大的库倾向于使用更多的内存。阿尔卑斯山，马尔科，和反应领路。老化的细粒度反应库使用最多的leading up to Ember。灰烬是巨大的。它使用的内存已经超过了Vanilla在页面上渲染6个按钮后在整个套件中使用的内存。</p><h2 id="1518" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">第4组结果</h2><p id="63e6" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">总的来说，这个群体代表了GitHub上超过30万的明星，可能是NPM下载量最大的部分，但在这个群体中，Marko和Alpine的平均排名最高。React在他们之后排名第三，尤其是在性能方面。</p><p id="75e6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在这个群体中，我们拥有巨大规模的框架，而我们旧的反应式库已经走向死亡。让我们转向更乐观的话题。</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="2927" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">第3组——绩效意识</h1><p id="1d66" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">在这些框架中，您可以看出已经对性能进行了一些考虑。他们意识到了规模，并在创建和更新成本之间找到了平衡。</p><p id="eae3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们看到了各种各样的方法。一个用Yew编写的Web组装框架(用Rust编写)，一个用LitElement编写的Web组件。最近发布的Vue 3是向前迈出的一大步，它脱离了第4组，与你过去可能见过的不同的框架竞争。</p><p id="3c52" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">事不宜迟，我们来看看他们的表现。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/727adad912c6bf1faa5e839a7428e78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*OmeVVeC1r5_EAHE8gqlTyw.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 3 Performance</figcaption></figure><p id="38fe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">分数上升了一点，我们看到了更加均匀的分布。Preact是这一组中表现最好的，只是稍微落后一点点。Vue 3和Riot并列在中间，这两个喜欢处于中间的库都有包括反应性和VDOM的历史。Mithril是最早将性能放在首位的VDOM图书馆之一，也是唯一的WASM图书馆。</p><p id="79f8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在性能方面，所有这些库都是相似的。这一组中没有纯反应库。无论是VDOM还是简单的标签模板文字差异，它们都使用自顶向下的渲染。与上一组相比，他们有一个更智能的列表协调(参见交换行性能)。但是，大多数仍然有一些最慢的选择行性能。</p><p id="f287" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">红豆杉是个例外，但它是缓慢的全面否则。让我们看看剩下的测试是否有所发现。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a333bfbaa194ce7cc513a40999584718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*zsGSLpUDUU9SOOyyO7Fq5w.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 3 Startup</figcaption></figure><p id="5aa4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">事情发生了一些变化，但Preact在创业指标方面仍然领先。紫杉是这些图书馆中唯一真正大的图书馆。WASM的图书馆确实更大。</p><p id="13be" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们再次看到一种配对的结果。Vue是仅次于紫杉的第二大树种。Preact和Riot相当紧凑。秘银和元素就在中间</p><p id="0c0d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Preact是react的4kb替代品，绝对是我们迄今为止见过的最小的库。但是最小的图书馆还在后面。尽管如此，这个范围内的库不应该太关心它们的包大小。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2f4ceef827d41555762edf0a31ea55c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*ySIUf76oohSGShv-xo6ZNw.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 3 Memory</figcaption></figure><p id="5217" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">紫杉这次赢了。在所有测试的框架中，它的内存占用最小。WASM图书馆在这方面做得很好。其他的都很接近。秘银和Preact是最差的，但也差不了多少。</p><p id="eb33" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从这里没有太多东西可拉。您可能会认为LitElement示例可能比其他非Yew库更轻便，因为它不像其他库那样使用虚拟DOM。但是我们稍后会看到，VDOM并不意味着更多的内存。</p><h2 id="fa3d" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">第3组结果</h2><p id="31a8" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">Riot和Preact平均排名最高，其次是LitElement，排名第三。Riot虽然不突出，但在这个小组中没有弱点，并取得了胜利。但是很难对这些框架中的任何一个感到失望。有了WASM和web组件，他们代表了许多人认为的Web的未来。</p><p id="57b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是我们还没有完成。下一组代表了对网络未来的不同看法。输入编译器…</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="976a" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">第2组—绩效冠军</h1><p id="c947" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">这个组竞争激烈。我们有大多数被称为编译语言的库。每一种都有自己的特色。我们有不变的结构榆树，红宝石启发Imba，和“消失”的苗条。</p><blockquote class="ll lm ln"><p id="fe9d" class="ko kp lo kq b kr ks jo kt ku kv jr kw lp ky kz la lq lc ld le lr lg lh li lj ig bi translated"><strong class="kq io">注:</strong>我注意到，并不是每个人都熟悉Svelte以前的“消失的框架”这个绰号。它描述了从输出中编译自身的能力。我不是说斯维特会去任何地方。抱歉造成了混乱。</p></blockquote><p id="c37d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最奇怪的是HyperApp，和其他人完全相反。没有编译器。没有模板。只有<code class="fe nr ns nt nu b">h</code>函数和一个最小的虚拟DOM。</p><p id="0eb0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">想猜猜会怎样吗？</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/3ce441ec0a19e9024cc94bdc4dce382b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*8FePptPRfusiR51LjhpClQ.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 2 Performance</figcaption></figure><p id="d22f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最小虚拟DOM胜出。与最近的言论相反，事实证明虚拟DOM不仅仅是性能差的原因，编译也没有给其他库提供帮助。</p><p id="6802" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在编译过的库中，我们实际上看到了3种不同的渲染方法，它们的平均性能都差不多。Imba使用DOM调和(更接近我们前面看到的LitElement)，Elm使用虚拟DOM，last Svelte使用组件反应性系统。</p><p id="9fd2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">您应该注意到虚拟DOM库具有最差的选择行，因为这是它们额外工作的地方。但是这些库也有更快的初始渲染。如果你仔细观察目前为止的结果，你会注意到虚拟DOM库与反应式库之间的这种共享特征。但除此之外，性能是紧张的。</p><p id="992c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以我们继续吧。我们的编译器在启动时间/包大小方面表现如何？</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/23ab34a00e31a63e07eb21d518c3e16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*1X8TxnfLnBg-CyY69xTdVg.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 2 Startup</figcaption></figure><p id="e449" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正如你所看到的，虚拟DOM库不仅性能更好，而且比其他的更小。事实上，HyperApp是我们所有库中最小的实现。编译器不会在大小上胜出。</p><p id="8ccc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">它和Svelte都比我们普通的JavaScript参考版本小。这怎么可能呢？抽象以一种更可重用的方式编写，产生更少的代码。普通的JS实现是针对性能而不是大小进行优化的。</p><p id="7d8e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Elm在这一组中仍然处于竞争中。然而，Imba开始进入一些第4组库的范围。</p><p id="cb68" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那就剩下记忆了。编译器大放异彩的最后机会。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/27e7018b5ed4ae8f9a5fa59de2918899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*w9-3GAXlu_Fdsaj4P8aZPg.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 2 Memory</figcaption></figure><p id="3c76" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">内存很接近，几乎是平局，但Svelte最终为编译器赢得了胜利。一些甜蜜的报复虚拟DOM显示比它更小更快。</p><p id="8ba9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">老实说，所有这些库都有很好的内存配置文件。现在应该很清楚更少的内存和更好的性能之间的关系了。</p><h2 id="96aa" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">第二组结果</h2><p id="3b6a" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">不要相信炒作？</p><p id="1fde" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">不。更多的事情比表面上看起来要复杂一些。设计良好的系统，无论是运行时还是编译时，或者无论采用何种技术方法，都可以成为高性能的系统。</p><p id="2e6a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">HyperApp是这个组的明显赢家，它的尾巴很苗条，其次是Elm和Imba。有了这种对性能的专注，你就知道这些库在大多数情况下都可以交付，并且总是出现在基准测试的顶端。</p><p id="35ef" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那还剩下什么？</p><p id="55d3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我告诉你有一些声明式JavaScript库对它们的性能如此自信，以至于它们不害怕原始的WASM、web workers或任何你扔给它们的技术，那会怎么样？欢迎来到…</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="e01b" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">第1组——性能精英</h1><p id="ea73" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">在某一点上，这可能被称为“惊人的快”，我相信这曾经是这些图书馆的标语之一。如果你一直在跟踪，只剩下两个库了。事实上，这个类别中有少数几个库在不断地挑战极限。但是受欢迎的只有2个。它们比手工优化的原始JS平均慢不到20%。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/adbfeb49b35d6cf276e2aa418cce05cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*KcsfyfZVYnI-WINZo9WAaQ.png"/></div></figure><p id="6946" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是值得一看的。这里我们有两个库，如果看它们的代码，可能会被认为是兄弟，但使用完全不同的方法。Inferno是世界上性能最好的虚拟DOM库之一。没错，前5名中有3名是虚拟DOM库。选择行测试的减速可以被视为证据。</p><p id="39ee" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一方面，Solid使用细粒度的反应性，就像第4组中一些最慢的旧库一样。奇怪的地方，这种技术再次出现，但固体解决了他们的弱点，因为我们可以看到。创建时间和更新时间一样快。与普通JavaScript 5%的差距是不可思议的。</p><p id="da76" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">奇怪的是，Inferno和Solid的共同点是JSX模板和React启发的API。也许这不是你所期望的，因为所有这些库都有优化的定制DSL。但是正如HyperApp所显示的，有些事情对性能的影响比人们想象的要小。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/77d8f91965881bf1a088be339323a0c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*dIxP-wBTGuM1tcB0ESiFuQ.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 1 Startup</figcaption></figure><p id="04e5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Solid加入了HyperApp和Svelte作为第三个库，比普通的JS实现要小。但是Inferno也不逊色。</p><p id="9c81" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">虽然高性能库的规模较小，但有时添加更多代码可以提高性能。更好的列表协调算法，更明确的保护，更精细的更新。</p><p id="41bf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Inferno可能比前几组中的一些库要大，但它仍然是一个10kb以下的库，并且在性能上几乎胜过所有库。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/48e13bc6a7f2909011e44c8155e65a05.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*i7UEH7r4mkzj4UxbS37VVw.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Group 1 Memory</figcaption></figure><p id="1981" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是了。除了紫杉和它对WASM的使用，这些是整个竞争中消耗内存最少的框架。鉴于他们的表现，这不应该太令人惊讶。</p><p id="adbd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种内存消耗数字反映了对对象和闭包的仔细考虑。这很大程度上来自于两个库都做的自定义JSX转换。</p><p id="8e3a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这种内存性能的提高对于Solid尤其重要，它像大多数细粒度的反应式库一样，以CPU开销换取内存消耗。能够克服内存开销是Solid能够采用与一些最慢的库非常相似的技术并使其成为最快的一个重要原因。</p><h2 id="e0a5" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">第一组结果</h2><p id="c4cf" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">天空是无限的。</p><p id="7759" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">…或者说普通的JavaScript。但是我们这里有声明性库，在性能上非常接近，你永远不会知道区别。当DOM是我们要面对的东西时，仔细考虑一下，许多不同的技术可以有效地渲染DOM。</p><p id="ec7e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们在这里看到了。Solid凭借一项十年前就被认为陈旧而缓慢的技术摘得性能桂冠，而Inferno再次表明，没有什么是虚拟DOM不能高效完成的。</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="5fb9" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">结论</h1><p id="22ab" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">在构建JavaScript前端时，我们有很多选择。这只是对框架带来的性能开销的一个粗略的介绍。当谈到应用程序的实际性能时，用户代码有更大的影响。</p><p id="62cf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是我在这里真正想强调的是，测试您的解决方案并了解其性能是非常重要的。现实总是与营销不同。虚拟DOM不一定会很慢。编译器不能保证产生最小的包。定制模板DSL不能保证是最佳的。</p><p id="c389" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，我将向您展示显示所有库的完整表格。仅仅因为一个库接近末尾并不一定意味着它很慢，而是因为它比这些强劲的竞争对手得分更低。</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><h1 id="0c08" class="lz ma in bd mb mc md me mf mg mh mi mj jt mk ju ml jw mm jx mn jz mo ka mp mq bi translated">所有框架</h1><p id="dacb" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">一个图表中的所有框架。</p><h2 id="c17d" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">表演</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/26913900cd825013bc77da19024a6fd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTAQ9aiq3xSguGLqePjEHA.png"/></div></div></figure><h2 id="006e" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">启动</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oa"><img src="../Images/f4672f19f11b8b89c843c86ee21950fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jOuh-0uUC_4D0730KPO_kw.png"/></div></div></figure><h2 id="ed05" class="nd ma in bd mb ne nf dn mf ng nh dp mj kx ni nj ml lb nk nl mn lf nm nn mp no bi translated">记忆</h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/d3520f1f03fbc546efa706466c55ea0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQPaMu2yzqt1_9JDYCPkHg.png"/></div></div></figure><h1 id="2f5d" class="lz ma in bd mb mc oc me mf mg od mi mj jt oe ju ml jw of jx mn jz og ka mp mq bi translated">最终排名</h1><p id="8e54" class="pw-post-body-paragraph ko kp in kq b kr mr jo kt ku ms jr kw kx mt kz la lb mu ld le lf mv lh li lj ig bi translated">所有结果都被加入到一个列表中(第一名得20分，最后一名得1分)。在平局的情况下，性能结果优先。</p><p id="e7b7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">1.<strong class="kq io">固</strong> (57) <br/>二。<strong class="kq io"> HyperApp </strong> (54) <br/> 3。<strong class="kq io">魔族</strong> (51) <br/> 4。<strong class="kq io">苗条的</strong> (51) <br/> 5。<strong class="kq io">榆树</strong> (46) <br/> 6。<strong class="kq io">暴动</strong> (40) <br/> 7。<strong class="kq io">预动作</strong> (39) <br/> 8。<strong class="kq io"> Imba </strong> (36) <br/> 9。<strong class="kq io"> lit-html </strong> (36) <br/> 10。<strong class="kq io">红豆杉</strong> (32) <br/> 11。<strong class="kq io">Vue</strong>29<br/>12。<strong class="kq io">秘银</strong> (29) <br/> 13。<strong class="kq io">马尔科</strong> (28) <br/> 14。<strong class="kq io">高山</strong> (28) <br/> 15。<strong class="kq io">做出反应</strong>【19】<br/>16。<strong class="kq io"> Rax </strong> (16) <br/> 17。<strong class="kq io">角度</strong> (12) <br/> 18。<strong class="kq io">脱模</strong> (11) <br/> 19。<strong class="kq io">反应</strong> (8) <br/> 20。<strong class="kq io">余烬</strong> (6)</p></div><div class="ab cl ls lt hr lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ig ih ii ij ik"><p id="e59a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">特别提及激发本文灵感的<a class="oh oi ep" href="https://medium.com/u/18fb1859d435?source=post_page-----cd881ac21fce--------------------------------" rel="noopener" target="_blank"> AJ Meyghani </a>的2018年对比:</p><div class="oj ok gp gr ol om"><a href="https://medium.com/@ajmeyghani/javascript-frameworks-performance-comparison-c566d19ab65b" rel="noopener follow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd io gy z fp or fr fs os fu fw im bi translated">JavaScript框架，性能比较</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">JavaScript框架之间的终极性能之战</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">medium.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa km om"/></div></div></a></div></div></div>    
</body>
</html>
# 如何将三角形打印到控制台？第二部分

> 原文：<https://javascript.plainenglish.io/how-to-print-triangle-to-console-part-ii-1ad867d310d3?source=collection_archive---------6----------------------->

![](img/a6eeb5b3ba8f6e457808814df234ac22.png)

在前面的部分[，你可以在这里找到](https://medium.com/swlh/how-to-print-triangle-to-console-part-i-6f82b011ccc9?source=friends_link&sk=44833a1a6bb1d8a38efb4eb79d539913)，我们在寻找一个非常简单的任务的解决方案——在控制台上打印等腰三角形。在第二部分，让我们关注一个更复杂的问题——打印带参数角的直角三角形。这可能看起来很神秘，所以让例子说话:

Examples of triangles to print

在这些例子中，角度参数可能看起来令人困惑。现在不要为此烦恼。我们稍后将重点讨论这一点。

# 再次分而治之

这显然是一个类似的问题，我们解决了前一部分。那些三角形也是由较小的三角形组成的。我们仍然可以:

*   用较小的形状构建较大的形状
*   打印当时三角形的每一行

我们将使用上述属性来简化事情。**我们将能够一次专注于一行。**

# 角度参数化

正如我们在上面的例子中所看到的，我们想要打印高度为 N 并且具有特定斜率的三角形。在控制台中，三角形是用离散符号构建的，因此用弧度来定义角度似乎是人为的。在这种情况下，用高与底长的比值来表示角度感觉更实际。因此，问题的定义应该是这样的:

> "写一个函数，它接受三角形的高、底比和行数，并输出包含相应三角形的字符串"

**角度为比值**

回到角度参数:我们不想用角度或弧度来度量。我们希望有更离散的东西，更适合离散的计算机世界。我们将角度表示为两个整数之比:*三角形高*和*三角形底。*举例时间:

Angle can be expressed as ratio of height and base

# 构建三角形线

现在，当我们对任务有了有意义的定义，我们就可以专注于核心问题——如何打印三角形的第 n 条线。**每一行都由若干空格和若干符号组成三角形。**让我们试着分别计算空格和符号，并从这些计算中组合出解决方案。我们将寻找这两个功能:

*空格(n)* —第 n 行有多少个空格？

*符号(n)* —第 n 行有多少个符号？

看一下这个例子:

Line is constructed from spaces and symbols

## 第 n 行符号和空格的公式

让我们来解决整个问题的核心:计算不同角度的第 n 行中的空格和符号的数量。如果你不知道从哪里开始，考虑小 *N* 的例子是个好方法。

Lines content in simple triangles

经过例子观察我们可以看到，我们可以比较两个三角形:

*   整个三角形(高 N)
*   部分三角形-直到第 n 条线的三角形

Comparing whole triangle with partial one

**线路长度**

然后我们可以比较这些三角形的比率来计算 B，即每条线的线长度(当你考虑到空格和符号时)。让我们用初等数学！裸露与我:

> B/N = B/N**=>**B = b/n * N**=>**线长= B/N * N

对于每个部分三角形(任意 n)，高底比，即三角形角度总是相同的。基于此，我们可以说 *b/n* 与整个三角形的*底/高*相同:

> **线长** =底/高* N

让我们检查一下它是否如我们预期的那样工作:

Check if lineLength equation works

我们看到有时线的长度比它应该的要小。我们看到，我们应该总是取整它以得到正确的结果:

> **线长** = Math.ceil(base / height * N)

**符号和空格**

现在，当我们知道每行有多少个字符时，我们需要计算每行有多少个空格和多少个符号。我们可以利用这样一个事实，即部分三角形中的第 n 条线也可以看作是整个但更小的三角形的底边。这意味着我们可以重复使用线长公式，但对于 N=n:

> **symbols(N)**= line length(N = N)= math . ceil(base/height * N)

最后，每行中的空格数只是没有所有符号的行长度:

> **空格(n)** =行长度——符号(n)

**我们推导的公式汇总**

> **线长** = Math.ceil(base / height * N)
> 
> **符号(n)**= math . ceil(base/height * n)
> 
> **空格(n)** =行长度——符号(n)

## 实现符号(n)和空格(n)

在我们的例子中，对于参数化的三角形斜率(角度)，只有双参数符号*(n，angle)* ，因为空间的数量显然取决于三角形的角度。没有*符号(n)。*或者是？

**角度为定值，行数为变量**

在 JavaScript 中，我们可以从一个函数返回另一个函数。稍后我们将能够调用这个返回的函数。语言的这种属性叫做 [*充当一等公民*](https://en.wikipedia.org/wiki/First-class_function) *。*我们将使用此功能将*符号(n，角度)*特殊化为 *symbolsForFixedAngle(n)。*

注意，我们不需要知道*符号(n，角度)*怎么写才能知道*符号(n，角度)*怎么变成*符号(n)* 。

**功能实现**

现在让我们把重点放在实现符号(n，angle)上。以上段落是解决问题的主要部分。现在我们可以开始实施了。

鉴于我们有*符号(n)* 的公式，它可以很容易地转换成代码:

Symbols(n, angle) implementation

对于*空格(n)* 也是如此:

Spaces(n, angle, N) implementation

## 三角形的打印线

现在，剩下的就是使用所有准备好的函数最终打印出三角形的单行。各位，功能 *printLine(n)* :

PrintLine(n, angle, N, symbol) implementation

# 将这些点连接起来

我们有了打印一条三角形线的工具——非常成功！让我们用它来打印整个三角形:

PrintTriangle(angle, N, symbol) implementation

最后，这是完整的代码:

Final solution

你可能注意到我提到了比 gists 中更简单的函数签名，例如 *printLine(n)* 而不是 *printLine(n，angle，N)* 。那是因为我想把 *n* 当作变量，而把所有其他参数当作常量。我们将使用第节中描述的关于*作为一等公民的功能*的技巧来实现这一点:

Final solution — specialized

# 防错

显然，我们应该在实现代码之前测试我们的解决方案，甚至更好地编写测试。不幸的是，这是不可能的，以保持这篇文章在合理的大小，并提出一个解决方案的验证。请记住，这是非常重要的一部分，尤其是在编码面试期间。

# 摘要

这个问题的本质是那两个不相容的东西:

*   几何形状是连续的
*   印刷的三角形是离散的

解决从**连续切换到**离散所产生的问题是所述问题的难点。

# 主要外卖

所描述的问题是对已知任务的修改。我们用类推法解决了它。我们重用了*划分&征服*的方法。寻找已知问题的相似之处是我们解决问题工具集中的另一把锤子。

# 下一步是什么？

在下一篇文章中，我们将关注略有不同的三角形，即 **Sierpinski 三角形**。在本系列的前两部分中，我们主要关心的是逐行打印三角形。在下一篇文章中，我们首先需要弄清楚如何生成形状。只有到那时，打印它才成为可能。下次见！

## **用简单的英语写的 JavaScript 的注释:**

我们总是有兴趣帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给 JavaScript，用你的中级用户名发邮件到[submissions@javascriptinplainenglish.com](mailto:submissions@javascriptinplainenglish.com)给我们，我们会把你添加为作者。
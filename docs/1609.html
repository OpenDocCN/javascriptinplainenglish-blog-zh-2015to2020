<html>
<head>
<title>Reporting Dashboard for Serverless Test Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无服务器测试框架的报告仪表板</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/reporting-dashboard-for-serverless-test-framework-36dd46bf54da?source=collection_archive---------7-----------------------#2020-04-06">https://javascript.plainenglish.io/reporting-dashboard-for-serverless-test-framework-36dd46bf54da?source=collection_archive---------7-----------------------#2020-04-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5333" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解无服务器快速框架…</h2></div><p id="e62c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">这是</strong> <a class="ae ky" href="https://medium.com/@punjpuneet/serverless-framework-to-test-aws-microservices-575cbbc0823" rel="noopener"> <strong class="ke io">无服务器框架测试AWS微服务</strong> </a>的后续文章</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/a2266c7f72a30ab7a30f0c4e4219f044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2_e_L5ff-dyBqfyPpNK6g.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk"><strong class="bd lp">Detailed Serverless Test Framework Architecture</strong></figcaption></figure><p id="b8df" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们之前的故事中，我们已经看到了如何使用无服务器测试框架来测试S3的AWS微服务和存储的执行报告。到目前为止，如果你想查看执行报告，你必须下载本地的<code class="fe lq lr ls lt b">assets</code>文件夹(包含相应的css和js的mochawesome报告)。没有直接的方法在一个地方显示多个执行结果。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/f3ac36648d14cfb684dba52bc6a3b13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*tfvtKbMASz-cLuyIjHWi1g.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk"><a class="ae ky" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">Serverless Framework</a></figcaption></figure><p id="9b2d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将使用<a class="ae ky" href="https://www.npmjs.com/package/serverless-http" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io">无服务器构建一个报告仪表板(<strong class="ke io"> API Gateway和Lambda</strong>)——http</strong></a><strong class="ke io">，</strong><a class="ae ky" href="https://www.npmjs.com/package/express" rel="noopener ugc nofollow" target="_blank"><strong class="ke io">express</strong></a><strong class="ke io">和</strong><a class="ae ky" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io">node . js</strong></a><strong class="ke io">到</strong>在一个地方呈现所有执行的合并视图。此外，我们将使用<a class="ae ky" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io">无服务器</strong> </a> <strong class="ke io"> </strong>框架来部署这个堆栈，而不会产生任何开销。更多细节可以在<a class="ae ky" href="https://serverless.com/blog/serverless-express-rest-api/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="07b9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lv">在开始之前，请确保记下在上一篇文章中创建的存储桶名称，以存储您的报告，因为我们将需要它来读取文件。</em></p><h2 id="929f" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">第一步</h2><p id="7f5f" class="pw-post-body-paragraph kc kd in ke b kf mp jo kh ki mq jr kk kl mr kn ko kp ms kr ks kt mt kv kw kx ig bi translated">如果您还没有AWS credentails已经设置了<code class="fe lq lr ls lt b">aws_access_key_id</code>和<code class="fe lq lr ls lt b">aws_secret_access_key</code>，请仔细阅读由server less<a class="ae ky" href="https://serverless.com/framework/docs/providers/aws/guide/credentials/#create-an-iam-user-and-access-key" rel="noopener ugc nofollow" target="_blank">https://server less . com/framework/docs/providers/AWS/guide/credentials/# create-an-iam-user-and-access-key</a>提供的本指南。</p><p id="2a17" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> <em class="lv">确保该用户拥有访问S3的权限！！</em>T44】</strong></p><h2 id="f50d" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">第二步</h2><p id="9ce7" class="pw-post-body-paragraph kc kd in ke b kf mp jo kh ki mq jr kk kl mr kn ko kp ms kr ks kt mt kv kw kx ig bi translated">设置好凭据后，克隆<a class="ae ky" href="https://github.com/puneetpunj/serverless-express-dashboard" rel="noopener ugc nofollow" target="_blank">无服务器快速仪表板</a>存储库。更新第3行<code class="fe lq lr ls lt b">lib/core.js</code>中的桶名。</p><p id="4aa3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在你的终端中执行下面的命令来获得代码——</p><pre class="la lb lc ld gt mu lt mv mw aw mx bi"><span id="aec6" class="lw lx in lt b gy my mz l na nb">git clone <a class="ae ky" href="https://github.com/puneetpunj/serverless-express-dashboard" rel="noopener ugc nofollow" target="_blank">https://github.com/puneetpunj/serverless-express-dashboard</a><br/>cd serverless-express-dashboard<br/>npm i -g serverless<br/>npm i</span></pre><p id="9900" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">需要考虑的几个要点:</p><ul class=""><li id="d0e4" class="nc nd in ke b kf kg ki kj kl ne kp nf kt ng kx nh ni nj nk bi translated"><code class="fe lq lr ls lt b">serverless.yml</code>包含地区名称，当前值为<code class="fe lq lr ls lt b">ap-southeast-2</code>，需要更新。</li><li id="14d6" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated">我在之前的文章中用于存储报告的存储桶名称是<code class="fe lq lr ls lt b">automate-tests-reports</code>。这需要在14和15行的<code class="fe lq lr ls lt b">serverless.yml</code>中提供。如果需要，请使用存储桶名称进行更新。</li><li id="bc51" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated">如有需要，更新您的桶名(如果与上面不同)至<code class="fe lq lr ls lt b">lib/core.js</code>中的第3行</li><li id="aff7" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated">使用<code class="fe lq lr ls lt b">sls remove</code>完全移除堆栈</li><li id="14ed" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated">使用<code class="fe lq lr ls lt b">sls offline start</code>在本地运行它—这实际上更倾向于在部署到AWS之前为用户确认代码和S3角色</li></ul><p id="ea75" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">执行<code class="fe lq lr ls lt b">sls deploy</code>，您的堆栈将被部署到AWS，终端响应中提供<strong class="ke io">端点</strong>。(以下示例中的<em class="lv">—</em><a class="ae ky" href="https://gxv8lf67h3.execute-api.ap-southeast-2.amazonaws.com/dev/dashboard" rel="noopener ugc nofollow" target="_blank"><em class="lv">https://gxv 8 lf 67 H3 . execute-API . AP-south-2 . Amazon AWS . com/dev/dashboard</em></a>)</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi nq"><img src="../Images/ab7ff3d7e64b4bf0fc28642528fcec24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nabSvwjY6xwSdjG7pNedXA.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Successful deployment of serverless stack</figcaption></figure><p id="c928" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">确认在AWS中创建堆栈，可以自由进入堆栈并检查资源。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi nr"><img src="../Images/c541c0bf10182268ee0ea26f0de1fd68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UdTSt2DYY2ZzGItgRWOD1w.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">AWS Cloudformation</figcaption></figure><h2 id="850f" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">步骤3</h2><p id="9b37" class="pw-post-body-paragraph kc kd in ke b kf mp jo kh ki mq jr kk kl mr kn ko kp ms kr ks kt mt kv kw kx ig bi translated">打开从终端复制的网址。<em class="lv">在我上面的截图中—</em><a class="ae ky" href="https://gxv8lf67h3.execute-api.ap-southeast-2.amazonaws.com/dev/dashboard" rel="noopener ugc nofollow" target="_blank"><em class="lv">https://gxv 8 lf 67 H3 . execute-API . AP-south-2 . Amazon AWS . com/dev/dashboard</em></a><em class="lv">。</em></p><p id="d3a6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它将显示Dashboard —行将根据S3可用的文件数而变化</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi nr"><img src="../Images/f1751d5e4aa6a661c12cbb2293368087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wss111qhlVdoa-RuwPt8YA.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk"><strong class="bd lp">Execution Dashboard</strong></figcaption></figure><p id="3ee3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">点击测试报告，查看具体执行的详细Mochawesome报告</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ns"><img src="../Images/af331b1d7175edd0fb57e97f2dd05f9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*36VmE-ofvxEtCK8-hXITow.gif"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk"><strong class="bd lp">Open Mochawesome Report</strong></figcaption></figure><p id="4b07" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就这样……您已经成功部署了无服务器快速报告控制面板。<strong class="ke io">干得好👏👏👏</strong></p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="07c5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">代码可在<a class="ae ky" href="https://github.com/puneetpunj/serverless-express-dashboard" rel="noopener ugc nofollow" target="_blank">这里</a>获得。此外，如果你有兴趣建立Alexa Skill来执行这些自动化测试，请看看这篇文章<a class="ae ky" href="https://medium.com/voice-tech-podcast/build-alexa-skill-to-trigger-automated-tests-7550e649973a" rel="noopener"/>。</p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="9ead" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如有任何问题，请随时与我联系。谢了。</p><p id="48ed" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">【JavaScript用简单的英语写的一句话:我们总是乐于帮助推广高质量的内容。如果你有一篇文章想用简单的英语提交给JavaScript，用你的中级用户名发邮件到submissions@javascriptinplainenglish.com<a class="ae ky" href="mailto:submissions@javascriptinplainenglish.com" rel="noopener ugc nofollow" target="_blank">给我们，我们会把你添加为作者。</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript and the Web — Canvas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript和网络——画布</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-and-the-web-canvas-edd17906df75?source=collection_archive---------6-----------------------#2020-06-25">https://javascript.plainenglish.io/javascript-and-the-web-canvas-edd17906df75?source=collection_archive---------6-----------------------#2020-06-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1f22c4518775070c95bc60153ce1ecb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LTCZmT3t3TsJJe5G"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@denmychan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Denise Chan</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dc93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何在画布上画东西。</p><h1 id="fce9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在画布上绘画</h1><p id="35aa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在画布上画画，我们有两个选择。首先，我们可以使用可缩放矢量图形或SVG，或者我们可以使用画布。</p><p id="68f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">画布是封装图片的单个DOM元素。</p><p id="fe7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SVG是静态矢量图形，我们可以直接将它包含在HTML文档或<code class="fe me mf mg mh b">img</code>标签中。</p><h1 id="f8ad" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">挽救（saving的简写）</h1><p id="f9a1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">SVG可以包含在<code class="fe me mf mg mh b">svg </code>标签中，如下所示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fdf8" class="mq lc iq mh b gy mr ms l mt mu">&lt;svg &gt;<br/>  &lt;circle r="50" cx="50" cy="50" fill="green" /&gt;<br/>&lt;/svg&gt;</span></pre><p id="0bbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">circle</code>标签画了一个圆<code class="fe me mf mg mh b">cx</code>和<code class="fe me mf mg mh b">cy</code>是圆心的x和y坐标。</p><p id="3961" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">r</code>是半径。<code class="fe me mf mg mh b">fill</code>是圆的填充颜色。</p><p id="f803" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOM元素是在我们添加标签时创建的，所以我们可以动态地改变形状属性。</p><p id="e3a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1fbf" class="mq lc iq mh b gy mr ms l mt mu">const circle = document.querySelector("circle");<br/>circle.setAttribute("fill", "orange");</span></pre><p id="57b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将圆的填充颜色自动更改为橙色。</p><h1 id="4857" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">画布元素</h1><p id="5acd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用canvas元素来绘制更复杂或更动态的东西。</p><p id="bc98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它的工作原理是使用canvas标签，然后我们从中获取上下文，这是一个我们可以在上面绘图的对象。</p><p id="a390" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上下文可以是二维图形的<code class="fe me mf mg mh b">'2d'</code>或三维图形的<code class="fe me mf mg mh b">'webgl'</code>。</p><p id="9e46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9a49" class="mq lc iq mh b gy mr ms l mt mu">&lt;canvas width="120" height="60"&gt;&lt;/canvas&gt;</span></pre><p id="d6ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e053" class="mq lc iq mh b gy mr ms l mt mu">const canvas = document.querySelector("canvas");<br/>const context = canvas.getContext("2d");<br/>context.fillStyle = "green";<br/>context.fillRect(10, 10, 100, 50);</span></pre><p id="440c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在画布上画一个矩形。</p><p id="b5ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">10，10是左上角的x和y坐标，100表示100像素宽，50表示50像素高。</p><p id="d645" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">fillStyle</code>有我们矩形的填充颜色。</p><h1 id="aaf4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">线条和表面</h1><p id="1dcb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">strokeRect</code>方法画一个没有填充的矩形。</p><p id="53a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4de6" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.strokeStyle = "green";<br/>cx.strokeRect(5, 5, 50, 50);</span></pre><p id="c590" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有一个绿色边框的矩形，左上角坐标为(5，5)，宽度和高度都是50px。</p><h1 id="970e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">小路</h1><p id="2044" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">路径是一系列的线。</p><p id="8aac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要画线，我们可以用<code class="fe me mf mg mh b">moveTo</code>移动到我们想要的坐标。</p><p id="7895" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用<code class="fe me mf mg mh b">lineTo</code>绘制从当前坐标到我们传入<code class="fe me mf mg mh b">lineTo</code>的坐标的直线。</p><p id="99f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="05ac" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.beginPath();<br/>for (let x = 10; x &lt; 100; x += 10) {<br/>  cx.moveTo(x, 10);<br/>  cx.lineTo(x, 80);<br/>}<br/>cx.stroke();</span></pre><p id="a664" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">画一串竖线。</p><p id="af86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个从(10，10)开始，到(10，80)结束。</p><p id="3daf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个从(20，10)开始，到(20，80)结束，依此类推。</p><p id="a762" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以将路径绘制成形状并进行填充。</p><p id="cef4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cca8" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.beginPath();<br/>cx.moveTo(50, 10);<br/>cx.lineTo(10, 200);<br/>cx.lineTo(100, 70);<br/>cx.fill();</span></pre><p id="e6a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">moveTo</code>移动到(50，10)。</p><p id="23c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们画一条线到(10，200)，然后我们画一条线从(10，200)到(100，70)。</p><p id="2e95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">fill</code>来填充行。</p><p id="da5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到一个填充了黑色的三角形。</p><h1 id="4f47" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">曲线</h1><p id="806d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">quadraticCurveTo</code>来画一条曲线。</p><p id="03f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">线的曲率由控制点和目标点给出。</p><p id="1605" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0d0f" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.beginPath();<br/>cx.moveTo(10, 120);<br/>cx.quadraticCurveTo(100, 10, 120, 120);<br/>cx.lineTo(100, 10);<br/>cx.closePath();<br/>cx.stroke();</span></pre><p id="d630" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">quadraricCurveTo</code>从(10，120)开始画一条线。</p><p id="a20a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用控制点(100，10)和终点(120，120)画一条曲线。</p><p id="e563" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从(120，120)到(100，10)画一条线。</p><p id="98e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以画一条有两个控制点而不是一个控制点的贝塞尔曲线。</p><p id="1529" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2357" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.beginPath();<br/>cx.bezierCurveTo(10, 10, 200, 10, 50, 90);<br/>cx.stroke();</span></pre><p id="b438" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么2个控制点分别是(10，10)和(200，10)。我们的线在(50，90)处结束。</p><p id="fb74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要画圆弧，有<code class="fe me mf mg mh b">arc</code>的方法。</p><p id="1294" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d3dc" class="mq lc iq mh b gy mr ms l mt mu">const cx = document.querySelector("canvas").getContext("2d");<br/>cx.beginPath();<br/>cx.arc(100, 100, 40, 0, Math.PI * 0.5);<br/>cx.stroke();</span></pre><p id="7870" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">画一条四分之一圆的曲线。</p><p id="2703" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">中心是(100，100)。半径为40°，起始角度为0°，终止角度为<code class="fe me mf mg mh b">Math.PI*0.5</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/be4c25b26f044f0417aba8d082929856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0oiYCz0KJifnET5X"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mischievous_penguins?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Casey Horner</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="75eb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e57e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用画布元素绘制直线、矩形和曲线。</p><p id="2ac3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要添加静态矢量图形，我们可以使用SVG。</p><h2 id="8441" class="mq lc iq bd ld mw mx dn lh my mz dp ll ko na nb lp ks nc nd lt kw ne nf lx ng bi translated"><strong class="ak">用简单英语写的JavaScript</strong></h2><p id="eb9d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？在<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> plainenglish.io </strong> </a>和<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">找到它们订阅我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>An Introduction to The Geolocation API in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中地理定位API的介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-introduction-to-the-geolocation-api-in-javascript-cc7fa1260c33?source=collection_archive---------5-----------------------#2020-12-07">https://javascript.plainenglish.io/an-introduction-to-the-geolocation-api-in-javascript-cc7fa1260c33?source=collection_archive---------5-----------------------#2020-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9e8e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过实例学习使用JavaScript中的地理定位API</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8cb3eb1f1aaba7d057d94a30014b65b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2mJCu5HZ8rAxj-Ip"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@hjkp?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">henry perks</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c287" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="27d3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">地理定位API </strong>用于获取用户的地理位置。这是一个简单的方法来获得用户在你的网站上的经度和纬度。但是，由于这可能会损害隐私，除非用户批准，否则该职位不可用。</p><p id="5bee" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本文中，我们将学习JavaScript中的地理定位API以及如何使用它。让我们开始吧。</p><h1 id="3d83" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">使用地理定位API</h1><p id="ac7e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">地理定位API在所有浏览器中都受支持，并且只能在HTTPS这样的安全环境下工作。如果您的网站托管在不安全的来源上(如HTTP)，获取用户位置的请求将不再起作用。</p><p id="8744" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">方法<code class="fe mp mq mr ms b"><strong class="lq ir">getCurrentPosition()</strong></code>用于返回用户的位置。</p><p id="b69c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里有一个例子:</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="edf3" class="mx kx iq ms b gy my mz l na nb">function getLocation() {</span><span id="8a3a" class="mx kx iq ms b gy nc mz l na nb">// Check if geolocation is supported.<br/>if (navigator.geolocation) {<br/>  navigator.geolocation.<strong class="ms ir">getCurrentPosition</strong>(showPosition);</span><span id="b253" class="mx kx iq ms b gy nc mz l na nb">// If not supported.<br/>} else {<br/>  console.log("Geolocation is not supported by this browser.");<br/>}<br/>}</span><span id="fbfc" class="mx kx iq ms b gy nc mz l na nb">function <strong class="ms ir">showPosition(position)</strong> {<br/>  const x = <strong class="ms ir">position.coords.latitude</strong>;<br/>  const y = <strong class="ms ir">position.coords.longitude</strong>;<br/>  console.log(x); // Returns your latitude.<br/>  console.log(y); // Returns your longitude.<br/>}</span></pre><p id="4c3a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正如您在上面看到的，第一个函数将检查地理位置是否受支持。如果是，它将运行函数<code class="fe mp mq mr ms b">getCurrentPosition</code>，否则，它将向用户显示一条消息。</p><p id="a61a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果方法<code class="fe mp mq mr ms b">getCurrentPosition</code>成功，它返回一个坐标对象给参数<code class="fe mp mq mr ms b">showPosition</code>中指定的函数。函数<code class="fe mp mq mr ms b">showPosition()</code>输出纬度和经度。</p><p id="63a9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，如果您愿意，可以在网页上显示用户的位置。</p><h1 id="5d41" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">在地图中显示结果</h1><p id="c0c0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您还可以使用地理定位API在地图上显示结果。你只需要访问一个地图服务，比如谷歌地图。</p><p id="685c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在下面的示例中，返回的纬度和经度用于在Google地图中显示位置(使用静态图像):</p><pre class="kg kh ki kj gt mt ms mu mv aw mw bi"><span id="f847" class="mx kx iq ms b gy my mz l na nb">function showPosition(position) {<br/>  var latlon = position.coords.latitude + "," +position.coords.longitude;<br/><br/>  var img_url = "https://maps.googleapis.com/maps/api/staticmap?center=<br/>  "+<strong class="ms ir">latlon</strong>+"&amp;zoom=14&amp;size=400x300&amp;sensor=false&amp;key=YOUR_KEY";<br/><br/>  const map = document.getElementById("mapholder");<br/>  map.innerHTML = "&lt;img src='"+img_url+"'&gt;";<br/>}</span></pre><h1 id="ece7" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="30fd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这只是对一个很酷的JavaScript API的介绍，我鼓励你通过访问<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API" rel="noopener ugc nofollow" target="_blank"> MDN </a>文档来探索关于这个API的更多信息。</p><p id="df9d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢您阅读本文，希望您觉得有用。</p><h1 id="d0cd" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">更多阅读</h1><div class="nd ne gp gr nf ng"><a href="https://medium.com/javascript-in-plain-english/5-amazing-things-pure-css-can-do-20b8fe3738b" rel="noopener follow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">纯CSS能做的5件惊人的事情</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">你可以用纯CSS创造出很棒的东西</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">medium.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kp ng"/></div></div></a></div></div></div>    
</body>
</html>
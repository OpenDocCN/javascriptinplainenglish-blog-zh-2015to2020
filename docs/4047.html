<html>
<head>
<title>Vue 3 — Mixins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —混合剂</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vue-3-mixins-3c7cb1a76ff3?source=collection_archive---------6-----------------------#2020-11-12">https://javascript.plainenglish.io/vue-3-mixins-3c7cb1a76ff3?source=collection_archive---------6-----------------------#2020-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/facc0b19961c559d6d0b8418de39d5bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OGnrpXDUBNaxLdFd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mikepetrucci?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mike Petrucci</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="99af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何创建mixins来使我们的代码可重用。</p><h1 id="e45c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">混合蛋白</h1><p id="2baa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Mixins是一种灵活的方式，让我们可以向Vue组件添加可重用的功能。</p><p id="b7d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">mixin对象可以有任何组件选项。</p><p id="26fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当一个组件使用mixin时，mixin将被合并到组件自己的选项中。</p><p id="1df1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以创建一个mixin，并通过编写以下代码来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a3a4" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;app&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="4f44" class="mn lc iq mj b gy ms mp l mq mr">    &lt;script&gt;<br/>      const mixin = {<br/>        created() {<br/>          this.foo();<br/>        },<br/>        methods: {<br/>          foo() {<br/>            console.log("foo");<br/>          }<br/>        }<br/>      };</span><span id="2c0f" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        mixins: [mixin]<br/>      });</span><span id="0af3" class="mn lc iq mj b gy ms mp l mq mr">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e8c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个具有<code class="fe mt mu mv mj b">mixins</code>属性的对象调用了<code class="fe mt mu mv mj b">Vue.createApp</code>。</p><p id="6378" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">值的就是我们的<code class="fe mt mu mv mj b">mixin</code>米辛。</p><p id="15e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它只是一个对象，在我们期望的地方有组件属性。</p><p id="2a8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们会自动合并到组件中。</p><p id="fd68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，将调用<code class="fe mt mu mv mj b">this.foo</code>方法，我们将看到控制台日志运行。</p><h1 id="81bc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">选项合并</h1><p id="eb92" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">将使用适当的策略合并选项。</p><p id="f3ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有任何冲突，组件的数据优先于mixin。</p><p id="0ad1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同名的钩子函数被合并成一个数组，这样所有的函数都会被调用。</p><p id="f731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ab26" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;app&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="e666" class="mn lc iq mj b gy ms mp l mq mr">    &lt;script&gt;<br/>      const mixin = {<br/>        created() {<br/>          console.log("mixin hook");<br/>        }<br/>      };</span><span id="07c6" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        mixins: [mixin],<br/>        created() {<br/>          console.log("app hook");<br/>        }<br/>      });</span><span id="d909" class="mn lc iq mj b gy ms mp l mq mr">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="fc5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们按顺序记录了<code class="fe mt mu mv mj b">'mixin hook'</code>和<code class="fe mt mu mv mj b">'app hook'</code>。</p><p id="9b1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">期望像<code class="fe mt mu mv mj b">methods</code>、<code class="fe mt mu mv mj b">components</code>和<code class="fe mt mu mv mj b">directives</code>这样的对象值的选项将被合并到同一个对象中。</p><p id="cf4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当存在冲突键时，组件的选项将优先。</p><p id="c8fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f626" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;app&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="ce99" class="mn lc iq mj b gy ms mp l mq mr">    &lt;script&gt;<br/>      const mixin = {<br/>        methods: {<br/>          foo() {<br/>            console.log("foo");<br/>          },<br/>          conflicting() {<br/>            console.log("mixin conflicting");<br/>          }<br/>        }<br/>      };</span><span id="6a62" class="mn lc iq mj b gy ms mp l mq mr">      const app = Vue.createApp({<br/>        mixins: [mixin],<br/>        methods: {<br/>          baz() {<br/>            console.log("bar");<br/>          },<br/>          conflicting() {<br/>            console.log("app conflicting");<br/>          }<br/>        }<br/>      });</span><span id="7fa7" class="mn lc iq mj b gy ms mp l mq mr">      const vm = app.mount("#app");<br/>      vm.conflicting();<br/>      vm.foo();<br/>      vm.baz();<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="bc44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们会看到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="561d" class="mn lc iq mj b gy mo mp l mq mr">app conflicting <br/>foo <br/>baz</span></pre><p id="44c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><p id="9e4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue实例的<code class="fe mt mu mv mj b">conflicting</code>方法在mixin one上使用。</p><p id="4426" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是<code class="fe mt mu mv mj b">foo</code>和<code class="fe mt mu mv mj b">baz</code>被合并到Vue实例中，因为它们之间没有冲突。</p><h1 id="cef0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">全球混合</h1><p id="8b66" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">app.mixin</code>方法创建全局混合。</p><p id="d78f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a2d4" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;app&lt;/p&gt;<br/>    &lt;/div&gt;</span><span id="eb9d" class="mn lc iq mj b gy ms mp l mq mr">    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        foo: "bar"<br/>      });</span><span id="ca0d" class="mn lc iq mj b gy ms mp l mq mr">      app.mixin({<br/>        created() {<br/>          const foo = this.$options.foo;<br/>          console.log(foo);<br/>        }<br/>      });</span><span id="fb95" class="mn lc iq mj b gy ms mp l mq mr">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7c2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">foo</code>属性添加到我们的Vue实例中。</p><p id="f5e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可以通过mixin中的<code class="fe mt mu mv mj b">this.$options</code>属性来访问。</p><p id="4343" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们将看到从我们的<code class="fe mt mu mv mj b">created</code>钩子中记录的<code class="fe mt mu mv mj b">'bar'</code>。</p><p id="e470" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们在全球范围内应用了mixin，那么它将会影响之后创建的每一个Vue实例。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/cfa45617f9b2e9f12c4248aa5e608eeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wBHGleaAaBaAQGMF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@intelligenciya?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexey Ruban</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="bc6f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b9ad" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Mixins是可重用的代码片段，可以集成到我们的Vue组件中。</p><p id="0826" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
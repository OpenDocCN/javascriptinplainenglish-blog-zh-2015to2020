<html>
<head>
<title>React Tips — Restricted Routes, Booleans, Wrapping, and Select Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示-受限路径、布尔值、换行和选择值</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-restricted-routes-booleans-wrapping-and-select-values-433372dbda91?source=collection_archive---------8-----------------------#2020-07-26">https://javascript.plainenglish.io/react-tips-restricted-routes-booleans-wrapping-and-select-values-433372dbda91?source=collection_archive---------8-----------------------#2020-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8a0b46b0dba0020e0a81e75297a98231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LF9QaEcidHy01CrK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ramche?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ramiz Dedaković</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e9c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="ac03" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">限制对React路由器中路由的访问</h1><p id="fbb5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过检查凭证来限制对路由的访问。</p><p id="f3f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，如果凭证有效，我们可以返回组件。</p><p id="0648" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们重定向到我们想要重定向到的路径。</p><p id="dd2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fcb4" class="mn lc iq mj b gy mo mp l mq mr">export default function AuthenticatedRoute({ component: Component, appProps, ...rest }) {<br/>  return (<br/>    &lt;Route<br/>      {...rest}<br/>      render={props =&gt;<br/>        appProps.isAuthenticated<br/>          ? &lt;Component {...props} {...appProps} /&gt;<br/>          : &lt;Redirect<br/>              to={`/login?redirect=${props.location.pathname}${props.location.search}`}<br/>            /&gt;}<br/>    /&gt;<br/>  );<br/>}</span><span id="4c75" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [authenticated, setAuthenticated] = useState(false);</span><span id="0afe" class="mn lc iq mj b gy ms mp l mq mr">  useEffect(() =&gt; {<br/>    onLoad();<br/>  }, []);</span><span id="13f9" class="mn lc iq mj b gy ms mp l mq mr">  async function onLoad() {<br/>    try {<br/>      await getSession();<br/>      setAuthenticated(true);<br/>    } catch (e) {<br/>      console.log(e);<br/>    }<br/>  }</span><span id="6156" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;Switch&gt;<br/>        &lt;AuthenticatedRoute<br/>          path="/profile"<br/>          component={Profile}<br/>          appProps={{ authenticated }}<br/>        /&gt;<br/>        &lt;Route component={Login} path="/login" /&gt;<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5ab3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了接受我们想要限制的组件的<code class="fe mt mu mv mj b">AuthenticatedRoute</code>。</p><p id="8799" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查组件中的凭证。</p><p id="3d9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它有效，我们返回组件来渲染它。</p><p id="ad85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们返回<code class="fe mt mu mv mj b">Redirect</code>组件来重定向到登录路由。</p><h1 id="c669" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">切换反应组件的布尔状态</h1><p id="1248" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过调用与现在状态相反的值的<code class="fe mt mu mv mj b">setState</code>来切换React组件的布尔状态。</p><p id="fc23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5de9" class="mn lc iq mj b gy mo mp l mq mr">class A extends React.Component {<br/>  constructor() {<br/>    super()<br/>    this.handleCheckBox = this.handleCheckBox.bind(this)<br/>    this.state = {<br/>      checked: false<br/>    }<br/>  }<br/>  <br/>  handleCheckBox(e) {<br/>    this.setState({<br/>      checked: e.target.checked<br/>    })<br/>  }<br/>  <br/>  render(){<br/>    return &lt;input type="checkbox" onChange={this.handleCheckBox} checked={this.state.checked} /&gt;<br/>  }<br/>}</span></pre><p id="4998" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个复选框，我们通过<code class="fe mt mu mv mj b">this.handleCheckBox</code>方法来更新<code class="fe mt mu mv mj b">checked</code>状态。</p><p id="6519" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过调用那里的<code class="fe mt mu mv mj b">setState</code>来更新状态。</p><p id="6cd8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe mt mu mv mj b">checked</code>道具设置为<code class="fe mt mu mv mj b">this.state.checked</code>状态。</p><p id="1e9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用函数组件，我们可以编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0df3" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";</span><span id="b3a6" class="mn lc iq mj b gy ms mp l mq mr">function App(props) {<br/>  const [toggled, setToggled] = React.useState(false); <br/>  <br/>  return  (<br/>    &lt;button<br/>      onClick={(event) =&gt; {<br/>       setToggled(!toggled);<br/>     }}<br/>    &gt;<br/>      {toggled.toString()}<br/>    &lt;/button&gt;;<br/>}</span></pre><p id="242a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击按钮时，我们将<code class="fe mt mu mv mj b">toggled</code>状态设置为与<code class="fe mt mu mv mj b">toggled</code>状态的现有值相反。</p><p id="78cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过将字符串设置为版本<code class="fe mt mu mv mj b">toggled</code>来查看按钮的内容。</p><h1 id="c458" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件的默认导出</h1><p id="9d8c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要将组件导出为默认导出，我们可以编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d596" class="mn lc iq mj b gy mo mp l mq mr">const Header = () =&gt; {<br/>  return &lt;p&gt;hello&lt;/p&gt;<br/>};<br/>export default Header;</span></pre><p id="2eb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0b21" class="mn lc iq mj b gy mo mp l mq mr">export default () =&gt; (<br/>  &lt;p&gt;hello&lt;/p&gt;<br/>)</span></pre><p id="9e45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们分别定义我们的<code class="fe mt mu mv mj b">const</code>变量，然后导出它。</p><p id="5bfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们直接出口组件。</p><h1 id="5313" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">有条件地包装React组件</h1><p id="225d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了有条件地包装React组件，我们可以创建一个更高阶的组件来进行条件包装。</p><p id="19e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f4cb" class="mn lc iq mj b gy mo mp l mq mr">const WithLink = ({ link, className, children }) =&gt; (link ?<br/>  &lt;a href={link} className={className}&gt;<br/>    {children}<br/>  &lt;/a&gt;<br/>  : children<br/>);</span><span id="b83b" class="mn lc iq mj b gy ms mp l mq mr">const Link = ({ link, className, count }) =&gt; {<br/>  return (<br/>    &lt;WithLink link={link} className={className}&gt;<br/>      &lt;i className={styles.Icon}&gt;<br/>        {count}<br/>      &lt;/i&gt;<br/>    &lt;/WithLink&gt;<br/>  );<br/>}</span></pre><p id="cc3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个<code class="fe mt mu mv mj b">WithLink</code>高阶组件来获取链接，然后用它来检查我们是否应该在组件周围放一个包装器。</p><p id="a181" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在我们的<code class="fe mt mu mv mj b">Link</code>组件中，我们得到<code class="fe mt mu mv mj b">link</code>和<code class="fe mt mu mv mj b">className</code>道具，并将它们传递给<code class="fe mt mu mv mj b">WithLink</code>组件。</p><p id="65de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">count</code>道具传递给图标类。</p><h1 id="1124" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从React中带有多个选项的<select>元素获取值</select></h1><p id="81d9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建一个带有<code class="fe mt mu mv mj b">select</code>元素的组件，它可以接受多重选择。</p><p id="daaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以添加一个<code class="fe mt mu mv mj b">onChange</code>处理程序来从select元素中获取选项。</p><p id="a9a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="041e" class="mn lc iq mj b gy mo mp l mq mr">class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      multiValue: []<br/>    }<br/>  }</span><span id="7fb2" class="mn lc iq mj b gy ms mp l mq mr">  handleChange(e) {<br/>    this.setState({ multiValue: [...evt.target.selectedOptions].map(o =&gt; o.value) });<br/>  }</span><span id="392e" class="mn lc iq mj b gy ms mp l mq mr">  render() {<br/>    return (<br/>      &lt;select multiple value={this.state.multiValue} onChange={this.handleChange}&gt;<br/>        &lt;option value='apple'&gt;Apple&lt;/option&gt;<br/>        &lt;option value='orange'&gt;Orange&lt;/option&gt;<br/>        &lt;option value='grape'&gt;Grape&lt;/option&gt;<br/>      &lt;/select&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="73bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">evt.target.selectedOptions</code>属性得到所有选中的选项。</p><p id="3c31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过返回<code class="fe mt mu mv mj b">value</code>属性将每个条目映射到它们的值。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/f5a47f85984463272de0405231de22c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zEO6cu-CeTXiH_ys"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@raouldroog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Raoul Droog</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5579" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="c5c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b"> evt.target.selectedOptions</code>得到多个选择元素的所有选择值。</p><p id="c60a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用React路由器创建受限路由。</p><p id="210f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们对React组件做一些事情时，我们可以切换布尔状态。</p><h1 id="14f9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">简单英语的JavaScript</h1><p id="c896" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅获取更多类似内容解码，我们的YouTube频道</strong> </a> <strong class="kf ir">！</strong></p></div></div>    
</body>
</html>
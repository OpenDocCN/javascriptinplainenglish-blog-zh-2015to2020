# JavaScript:è¿­ä»£å™¨å’Œç”Ÿæˆå™¨

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/javascript-iterators-generators-d59ff15a4e68?source=collection_archive---------5----------------------->

## éå†â€œå…ƒç´ é›†â€ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ç§éå¸¸æ™®é€šçš„æ“ä½œã€‚JavaScript ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ–¹æ³•ã€‚

## ä½†æ˜¯ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šçˆ±ä¸Šé‚£äº›æ–¹æ³•ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†æ¢ç´¢è¿™ä¸€åˆ‡èƒŒåçš„æœºåˆ¶ï¼Œå³æ¦‚å¿µ:iterableã€iteratorã€generatorã€‚

![](img/1e633551f96d5f3b097a4c5ced6b57f3.png)

Photo by [Caspar Camille Rubin](https://unsplash.com/@casparrubin?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/javascript?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

# å¯è¿­ä»£çš„

å¦‚æœä¸€ä¸ªå¯¹è±¡å®‰è£…äº†å¯è¿­ä»£åè®®ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±å«åš*å¯è¿­ä»£*(ç¨åå†è°ˆ)ã€‚è¿™äº›å¯è¿­ä»£å¯¹è±¡ç»å¸¸å¯ä»¥ä½¿ç”¨å…ƒç´ æµè§ˆæ–¹æ³•ï¼Œä¾‹å¦‚`for..of`ã€‚

åœ¨ JavaScript ä¸­ï¼Œ`Array`æ˜¯*å¯è¿­ä»£çš„*ã€‚

```
for (let v of [1, 2, 3, 4]) console.log(v)
// 1
// 2
// 3
// 4
```

æ­¤å¤–ï¼Œè®¸å¤šå…¶ä»–å†…ç½®å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼Œä¾‹å¦‚`String`:

```
for (let v of 'hello') console.log(v)
// h
// e
// l
// l
// o
```

å¦‚æœä¸€ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ç»„â€œå…ƒç´ â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ for..å¾ªç¯éå†å…¶å…ƒç´ ã€‚æµè§ˆè¿™äº›å…ƒç´ çš„æ“ä½œç§°ä¸ºâ€œè¿­ä»£â€(ç±»ä¼¼äºè®¸å¤šå…¶ä»–è¯­è¨€)ã€‚

ä½†æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™æ ·çš„äº‹æƒ…æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿä¸éœ€è¦ç­‰å¤ªä¹…ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šçŸ¥é“ã€‚

# å¯è¿­ä»£åè®®

Iterable åè®®æ˜¯ä¸€ä¸ªå…è®¸ JavaScript å¯¹è±¡è‡ªå®šä¹‰è‡ªå·±çš„æµè§ˆæ“ä½œçš„åè®®ï¼Œè¿™äº›æ“ä½œå°†åœ¨å…ƒç´ å®¡æ‰¹ä¸­ä½¿ç”¨(ä¾‹å¦‚ï¼Œ`for..of`)ã€‚

JavaScript çš„è®¸å¤šå†…ç½®æ•°æ®ç±»å‹å·²ç»å®‰è£…äº†å¯è¿­ä»£åè®®(ä¾‹å¦‚ï¼Œ`Array`ï¼Œ`Map`)ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°éå†å®ƒçš„å…ƒç´ ã€‚

åªæœ‰å®ç°äº† iterable åè®®çš„å¯¹è±¡æ‰æ˜¯ iterable çš„ã€‚å®‰è£…å°†é€šè¿‡`@@iterator`æ–¹æ³•å®Œæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡å¿…é¡»å…·æœ‰`@@iterator`å±æ€§ã€‚å¯é€šè¿‡`[Symbol.iterator]`è®¾ç½®è¯¥å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
let range = {
	from: 1,
	to: 5,
	[Symbol.iterator]: () => {
		return {
			current: this.from,
			last: this.to,
			next: () => {
				if (this.current <= this.last) {
					return { done: false, value: this.current++ };
				} else {
				return { done: true };
			}
		}
	};
}
```

`@@iterator`å±æ€§(é€šè¿‡`[Symbol.iterator]`è®¾ç½®)æ˜¯ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å‡½æ•°ï¼Œåœ¨æˆ‘ä»¬å¯ä»¥æµè§ˆå…ƒç´ ä¹‹å‰ï¼Œå®ƒçš„ç»“æœå¿…é¡»æ˜¯ä¸€ä¸ªè¿­ä»£å™¨(ç¨åä¼šå­¦åˆ°)ã€‚ä¸€ä¸ªå¯¹è±¡çš„ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œä½†æ˜¯å¦‚æœå®ƒä¸æ˜¯è¿­ä»£å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€æµè§ˆå…ƒç´ å°±ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘è®¤ä¸ºæ²¡æœ‰äººä¼šåœ¨ä¸ºæ•´ä¸ªå¯¹è±¡è®¾ç½®å±æ€§`@@iterator`æ—¶åšè¿™ç§â€œæ„šè ¢â€çš„äº‹æƒ…ã€‚

æ¯å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦éå†å®ƒçš„å…ƒç´ æ—¶ï¼Œä¾‹å¦‚ä½¿ç”¨`for..of`ã€‚è¿™äº›æ–¹æ³•é¦–å…ˆè°ƒç”¨è¯¥å¯¹è±¡çš„`@@iterator`(ä¸å¸¦å‚æ•°)ï¼Œç„¶åä½¿ç”¨è¯¥æ–¹æ³•çš„ç»“æœè¿”å›è¿­ä»£ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå·±å®šä¹‰æ–¹æ³•`@@iterator`æ¥å®Œå…¨æ„å»ºæˆ‘ä»¬è‡ªå·±çš„å¯è¿­ä»£å¯¹è±¡ã€‚é€šè¿‡è‡ªå®šä¹‰æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨è‡ªå®šä¹‰å…ƒç´ è¿­ä»£çš„æ–¹æ³•ã€‚

å’Œä¸Šé¢çš„ä¾‹å­ä¸€æ ·ï¼Œæˆ‘ä»¬å°†æµè§ˆå…ƒç´  1â€“5(å®é™…ä¸Šï¼Œè¿™äº›â€œå…ƒç´ â€å¹¶ä¸å®Œå…¨åœ¨å¯¹è±¡ä¸­ï¼Œä½†æ˜¯ç”±äºå®šåˆ¶äº† browse æ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»å®Œå…¨éå†äº†è¿™äº›å…ƒç´ )ã€‚

```
for(let num of range) console.log(num)
// 1
// 2
// 3
// 4
// 5
```

æµè§ˆæ–¹æ³•ï¼Œå¦‚..åªå¤„ç†è¿”å›çš„è¿­ä»£å™¨ã€‚æ³¨æ„ï¼Œè¿™ä¸ªè¿­ä»£å™¨å¯èƒ½æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‰¹å‡†çš„å¯¹è±¡ï¼Œè¿™å–å†³äºæ¯ä¸ªç‰¹å®šå¯¹è±¡çš„è®¾ç½®ã€‚

# è¿­ä»£ç¨‹åº

åœ¨ JavaScript ä¸­ï¼Œè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªâ€œå­—ç¬¦ä¸²â€å…ƒç´ ï¼Œå¹¶å°†è¿”å›æ¯ä¸ªå…ƒç´ ï¼Œç›´åˆ°é‡åˆ°æŸä¸ªç«¯ç‚¹ã€‚æ›´ç²¾ç¡®çš„å®šä¹‰æ˜¯ï¼Œè¿­ä»£å™¨æ˜¯è¿­ä»£å™¨åè®®å®ç°çš„å¯¹è±¡ã€‚

è¿­ä»£å™¨åè®®å®Œå…¨ç‹¬ç«‹äº iterable åè®®ï¼Œä¸€ä¸ªå¯¹è±¡ä¸ä¸€å®šè¦å®‰è£…åœ¨ä¸¤ç§åè®®ä¸Šã€‚è¿™ä¹Ÿæ„å‘³ç€å¯è¿­ä»£å¯¹è±¡ä¸ä¸€å®šæ˜¯è¿­ä»£å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚

**è¿­ä»£å™¨åè®®** è¿­ä»£å™¨åè®®æ˜¯ä¸€ç§åè®®ï¼Œå®ƒå®šä¹‰äº†æ ‡å‡†æ–¹æ³•æ¥â€œç”Ÿæˆâ€ä¸€ä¸ªç»“æœåºåˆ—(å¯ä»¥æ˜¯æœ‰é™çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ— é™çš„)ï¼Œå¹¶ä¾æ¬¡è¿”å›ç»“æœä¾›æˆ‘ä»¬åœ¨è¿­ä»£ä¸­ä½¿ç”¨ã€‚

è¿™æ˜¯å°†ä¸ä»`@@iterator`å±æ€§è¿”å›çš„è¿­ä»£å™¨çš„`for..of`ä¸€èµ·ä½¿ç”¨çš„åè®®ã€‚

å¦‚æœä¸€ä¸ªå¯¹è±¡å®šä¹‰äº†è¿­ä»£å™¨åè®®ï¼Œå®ƒå°±æ˜¯è¿­ä»£å™¨ã€‚è¿™ä¸ªåè®®å¾ˆç®€å•ï¼Œå®ƒè¦æ±‚å¯¹è±¡å¿…é¡»ç”¨ä¸‹ä¸€ä¸ªæ–¹æ³•(æ²¡æœ‰å‚æ•°)å®‰è£…ï¼Œç»“æœæ˜¯è¿”å›çš„å¯¹è±¡å…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªå±æ€§:

*   `done (boolean`:è¡¨ç¤ºè¿­ä»£å™¨æ˜¯å¦ç»“æŸã€‚è¿˜æœ‰å…¶ä»–å€¼å¯ä»¥æµè§ˆçš„æ—¶å€™å°±æ˜¯`false`äº†ã€‚å¦‚æœè¯¥å€¼ä¸º`false`ï¼Œåˆ™éœ€è¦ä¸‹ä¸€ä¸ªå±æ€§ã€‚
*   `value`:ä¸‹ä¸€æ¬¡æµè§ˆçš„è¿”å›å€¼ã€‚è¯¥å±æ€§çš„å€¼å¯ä»¥æ˜¯ä»»ä½• JavaScript å¯¹è±¡ã€‚

`next`æ–¹æ³•å¿…é¡»æ€»æ˜¯è¿”å›ä¸€ä¸ªå…·æœ‰ä¸Šè¿°ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡(å¦‚æœ`done`æ˜¯`true`ï¼Œåˆ™å¯èƒ½ä¸éœ€è¦`value`)ã€‚å¦‚æœè¿”å›çš„ä¸æ˜¯ä¸Šé¢æè¿°çš„å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œå…ƒç´ æµè§ˆæ—¶ä¼šå¾—åˆ°ä¸€ä¸ª`TypeError`é”™è¯¯ã€‚

äº‹å®ä¸Šï¼Œå¾ˆéš¾çŸ¥é“ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å®‰è£…äº†è¿­ä»£å™¨åè®®ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ„å»ºä¸€ä¸ªå®‰è£…äº†è¿™ä¸ªåè®®çš„å¯¹è±¡ã€‚

å¦‚ä¸Šæ‰€è¿°ï¼Œè¿­ä»£å™¨å¯¹è±¡ä¸ä¸€å®šæ˜¯å¯è¿­ä»£çš„ï¼Œåä¹‹äº¦ç„¶ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ‰æ„æ„å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶å®‰è£…å¯è¿­ä»£åè®®å’Œè¿­ä»£å™¨åè®®ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„å¯¹è±¡å°†æ—¢æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œåˆæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚

**è‡ªå·±æ„å»ºè¿­ä»£å™¨** JavaScript çš„å†…ç½®è¿­ä»£å™¨ä¹‹ä¸€ï¼ŒArray å°±æ˜¯ä¸€ä¸ªæœ€å¥½çš„ä¾‹å­ã€‚è¿™ä¸ªè¿­ä»£å™¨ç®€å•åœ°è¿”å›å…¶ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼ï¼Œæˆ‘ä»¬å°†ç›¸åº”åœ°æµè§ˆå®ƒä»¬ã€‚

æˆ‘ä»¬å¯ä»¥æƒ³è±¡è¿­ä»£å™¨ç±»ä¼¼äºæ•°ç»„ã€‚ä½†äº‹å®ä¸Šä¸æ˜¯é‚£æ ·çš„ã€‚è¿­ä»£å™¨å®Œå…¨å¯ä»¥è‡ªç”±è¿è¡Œ(ç”šè‡³æ²¡æœ‰åœé¡¿)ï¼Œå–å†³äºå¦‚ä½•å®‰è£…è‡ªå·±çš„è¿­ä»£å™¨åè®®ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå»ºè¿­ä»£å™¨çš„ä¾‹å­ã€‚å®ƒæ„é€ äº†ä¸€ä¸ªç»™å®šèŒƒå›´å†…çš„å€¼åºåˆ—ã€‚

æˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠè¿­ä»£å™¨åè®®å’Œ iterable åè®®ç»“åˆèµ·æ¥ï¼Œè¿™æ ·æˆ‘ä»¬éƒ½å¯ä»¥æ„é€ ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨`for..of`è¿­ä»£å®ƒçš„å…ƒç´ ã€‚

```
var myIterator = {
    next: function() {
        // ...
    },
    [Symbol.iterator]: function() { return this }
};
```

# å‘ç”µæœº

æ„å»ºè‡ªå·±çš„è¿­ä»£å™¨æ˜¯ä¸€é¡¹éå¸¸é…·ä¸”æœ‰æ•ˆçš„å·¥ä½œã€‚ä½†æ˜¯è¿™è¦æ±‚æˆ‘ä»¬åœ¨è®¾ç½® iterable åè®®å’Œ iterator åè®®æ—¶éå¸¸å°å¿ƒã€‚å› ä¸ºæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨ç®¡ç†å½“å‰çŠ¶æ€ä»¥åŠè®¡ç®—ä¸‹ä¸€ä¸ªå€¼ã€‚

ä½†æ˜¯ JavaScript æœ‰å¦ä¸€ä¸ªå·¥å…·ï¼Œç”Ÿæˆå™¨å‡½æ•°ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬åœ¨è¿™æ–¹é¢æ›´åŠ è½»æ¾ã€‚ç”Ÿæˆå™¨èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªå‡½æ•°å¸®åŠ©æˆ‘ä»¬å®šä¹‰ä¸€ç³»åˆ—è¦æµè§ˆçš„å€¼ã€‚

ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œç”Ÿæˆå™¨å‡½æ•°æ˜¯ç”±å…³é”®å­—`function*`å®šä¹‰çš„ï¼Œè¿™ä¸å¸¸è§„å‡½æ•°æœ‰ç‚¹ä¸åŒã€‚å‘ç”µæœºæ€§èƒ½ä¹Ÿå¤§ä¸ç›¸åŒã€‚å½“è¢«è°ƒç”¨æ—¶ï¼Œå®ƒå®é™…ä¸Šå¹¶ä¸ç«‹å³æ‰§è¡Œã€‚ç›¸åï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºç”Ÿæˆå™¨ã€‚

**ç”Ÿæˆå™¨æ˜¯è¿­ä»£å™¨**

åœ¨`next`æ–¹æ³•ä¸Šå°†è‡ªåŠ¨å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå› æ­¤å®ƒå°†è‡ªåŠ¨æˆä¸ºä¸€ä¸ªè¿­ä»£å™¨ã€‚å³ä½¿è¿™æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ‹…å¿ƒç®¡ç†ç”Ÿæˆå™¨çš„çŠ¶æ€å’Œå€¼ã€‚

æ¯æ¬¡æ–¹æ³•ä¸º`next`æ—¶ï¼Œå®é™…æ‰§è¡Œæ­¤æ—¶çš„ç”Ÿæˆå™¨å‡½æ•°ï¼Œç›´åˆ°é‡åˆ°`yield`æ‰ä¼šåœæ­¢ã€‚è€Œ`yield`çš„å€¼ä¹Ÿæ˜¯`next`å°†è¦è¿”å›çš„å€¼ã€‚

å›åˆ°ä¸Šé¢è‡ªå»ºè¿­ä»£å™¨çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ç”Ÿæˆå™¨é‡å†™å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
function* makeRangeIterator(start = 0, end = Infinity, step = 1) {
    let iterationCount = 0;
    for (let i = start; i < end; i += step) {
        iterationCount++;
        yield i;
    }
}
```

ç”¨é¢„å®šä¹‰çš„`next`æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å¦‚ä¸‹:

```
range = makeRangeIterator(1, 10, 2);
range.next()
// {value: 1, done: false}
range.next()
// {value: 1, done: false}
```

**ç”Ÿæˆå™¨æ˜¯å¯è¿­ä»£çš„** ä¸ä»…æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œ*ç”Ÿæˆå™¨*ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯ä¼šè‡ªåŠ¨å®šä¹‰ä¸ºæ—¢æœ‰ iterable åè®®åˆæœ‰ iterator åè®®ï¼Œæ–¹ä¾¿æˆ‘ä»¬ã€‚ç”±äºåè®®çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒç´ æ‰¹å‡†ï¼Œç±»ä¼¼äºå…¶ä»–å¸¸è§„çš„ *iterables* :

```
for (let num in makeRangeIterator(1, 10, 2)) console.log(num)
// 1
// 3
// 5
// 7
// 9
```

ä½ å¯ä»¥ä»»æ„å¤šæ¬¡è°ƒç”¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ã€‚è€Œä¸”æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸åŒçš„ç”Ÿæˆå™¨ï¼Œå¯ä»¥å•ç‹¬è¿­ä»£ï¼Œä¸å½±å“å…¶ä»–è°ƒç”¨ã€‚

ä½†æ˜¯ï¼Œä¸è‡ªå»ºè¿­ä»£å™¨ä¸åŒï¼Œæˆ‘ä»¬ä¸èƒ½å®šåˆ¶ç”Ÿæˆå™¨éå†ã€‚æ¯ä¸ªç”Ÿæˆå™¨åªèƒ½æµè§ˆä¸€æ¬¡ï¼Œæ¯ä¸ªå€¼åªèƒ½æµè§ˆä¸€æ¬¡ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ¬¡è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œä½†æ¯æ¬¡è°ƒç”¨åªèƒ½æµè§ˆä¸€æ¬¡ã€‚

ç”±äºæˆ‘ä»¬çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œè€Œä¸æ˜¯éœ€è¦æ‰‹åŠ¨æ„å»ºçš„å¯è¿­ä»£è¿­ä»£å™¨ã€‚å› ä¸ºå¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨å‘ç”µæœºæ›´æ–¹ä¾¿ä¹Ÿæ›´å®‰å…¨ã€‚

**ç”Ÿæˆå™¨ç”Ÿæˆå¦ä¸€ä¸ªç”Ÿæˆå™¨** è¿™æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨çš„ç‰¹æ®Šæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç”Ÿæˆå™¨â€œåµŒå…¥â€åˆ°å¦ä¸€ä¸ªç”Ÿæˆå™¨ä¸­ã€‚ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•:`yield*`:

```
function* generateSequence(start, end) {
    for (let i = start; i <= end; i++) yield i;
}

function* generatePasswordCodes() {

    // 0..9
    yield* generateSequence(48, 57);

    // A..Z
    yield* generateSequence(65, 90);

    // a..z
    yield* generateSequence(97, 122);

}

let str = '';

for(let code of generatePasswordCodes()) {
    str += String.fromCharCode(code);
}
console.log(str):
// 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
```

ä¸Šé¢çš„`yield*`è¯­æ³•å…è®¸æˆ‘ä»¬è°ƒç”¨å¦ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¹¶åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªè®¡ç®—ä¹‹å‰ç­‰å¾…è¯¥ç”Ÿæˆå™¨å®Œæˆã€‚å¦‚æœä¸ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»æ„å»ºä¸€ä¸ªæ›´å¤æ‚çš„ç”Ÿæˆå™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
function* generateSequence(start, end) {
    for (let i = start; i <= end; i++) yield i;
}

function* generateAlphaNum() {

    // yield* generateSequence(48, 57);
    for (let i = 48; i <= 57; i++) yield i;

    // yield* generateSequence(65, 90);
    for (let i = 65; i <= 90; i++) yield i;

    // yield* generateSequence(97, 122);
    for (let i = 97; i <= 122; i++) yield i;

}

let str = '';

for(let code of generateAlphaNum()) {
    str += String.fromCharCode(code);
}
console.log(str);
// 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
```

å¦ä¸€ä¸ªç”Ÿæˆå™¨çš„ yield ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼ŒæŠŠä¸€ä¸ªç”Ÿæˆå™¨åµŒå…¥åˆ°ä¸€ä¸ªç”Ÿæˆå™¨ä¸­ã€‚

**ä¸ºäº§é‡èµ‹å€¼**

ä»ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬ä»ç„¶ä»¥éå¸¸è‡ªç„¶çš„æ–¹å¼ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œè¿›è€Œ`yield`ç”Ÿæˆå™¨çš„æ¯ä¸ªå€¼ã€‚è®¸å¤šäººä¹Ÿåœ¨åšåŒæ ·çš„äº‹æƒ…ã€‚ä½†æ˜¯ç”Ÿæˆå™¨éå¸¸çµæ´»ï¼Œå…è®¸æˆ‘ä»¬åšæ›´å¤šçš„äº‹æƒ…ã€‚

é‚£ä¸ª yield ä¹Ÿèƒ½ä»å¤–éƒ¨è®¤è¯†åˆ°ä»·å€¼ï¼Œè€Œä¸æ˜¯åœ¨è¿”å›ä»·å€¼çš„åœŸä¸˜ã€‚è€ƒè™‘ä¸‹é¢ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæŠ€å·§ä»å¤´å¼€å§‹é‡ç½®å­—ç¬¦ä¸²:

```
function* foo() {
    let index = 0;
    while (true) {
        const result = yield index++;
        if (result) {
            index = 0;
        }
    }
}

const bar = foo();

console.log(bar.next())
// {value: 0, done: false}
console.log(bar.next())
// {value: 1, done: false}
console.log(bar.next(true))
// {value: 0, done: false}
console.log(bar.next())
// {value: 1, done: false}
```

Generator è¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„åº”ç”¨ç¨‹åºï¼Œå®ƒæ˜¯å¸¦æœ‰`[async/await](https://manhhomienbienthuy.github.io/2018/Jul/17/javascript-asyncawait.html)`å…³é”®å­—çš„å¼‚æ­¥ä»£ç çš„åŸºç¡€ã€‚

# æ€»ç»“

è¿­ä»£å™¨å’Œç”Ÿæˆå™¨æ˜¯ JavaScript ä¸­éå¸¸é‡è¦çš„æ¦‚å¿µã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ JavaScript ä»£ç ã€‚ğŸ‘
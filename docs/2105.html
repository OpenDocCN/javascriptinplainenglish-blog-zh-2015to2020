<html>
<head>
<title>Create a fully dynamic Tab Component in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular中创建完全动态的选项卡组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-fully-dynamic-tab-component-in-angular-9f5187ab35dc?source=collection_archive---------0-----------------------#2020-05-20">https://javascript.plainenglish.io/create-a-fully-dynamic-tab-component-in-angular-9f5187ab35dc?source=collection_archive---------0-----------------------#2020-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3b97f97161ce52075a1010457e2894a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysYJgW2pzB1wuJh3KEJa_g.jpeg"/></div></div></figure><p id="1815" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">选项卡组件是每个web应用程序的重要组成部分。尽管如此，提供它的开源库还是太少了。</p><p id="dc5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://material.angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular Material </a>提供了一个非常灵活和强大的选项卡组件，但是它会随着材质主题、额外的依赖项和材质指南而变化。</p><p id="391d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建选项卡组件就像抛物线。起初，它看起来很复杂，在创建了一些基本功能后，它看起来简单多了，但在尝试添加动态功能后，它又变得复杂了。</p><p id="b5c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是作为一个整体，不需要太多的努力就可以创建一个完全动态和灵活的选项卡组件。</p><p id="995f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们自己创造吧。</p><h1 id="c431" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">组件结构</h1><p id="17aa" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">组件结构将以如下方式</p><ul class=""><li id="7d1c" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">它将是子选项卡的组组件</li><li id="cd40" class="ma mb iq ka b kb mn kf mo kj mp kn mq kr mr kv mf mg mh mi bi translated"><code class="fe mj mk ml mm b">app-tab-item-component</code>它将是一个单独的选项卡组件，将包含在app-tabs-component中</li><li id="d6cc" class="ma mb iq ka b kb mn kf mo kj mp kn mq kr mr kv mf mg mh mi bi translated"><code class="fe mj mk ml mm b">app-tab-label-component</code>它将用于单个标签组件的标题目的</li><li id="43a6" class="ma mb iq ka b kb mn kf mo kj mp kn mq kr mr kv mf mg mh mi bi translated"><code class="fe mj mk ml mm b">app-tab-body-component</code>它将用于选项卡组件的内容目的</li></ul><p id="0620" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是我们的组件的样子</p><div class="ms mt gp gr mu mv"><a href="https://stackblitz.com/edit/angular-tabs-component-tony?embed=1&amp;file=src/app/app.component.ts" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">角形标签-组件-Tony-stack blitz</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">导出到Angular CLI的Angular应用程序的启动项目</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">stackblitz.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj jw mv"/></div></div></a></div><p id="082d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们一个接一个地编写这些组件</p><h1 id="ea82" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">TabLabelComponent</h1><p id="465e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><code class="fe mj mk ml mm b">TabLabelComponent</code>负责，在标签页组件中呈现标签页标题。无论在<code class="fe mj mk ml mm b">LabelComponent</code>中传递什么，都应该呈现在Tabs头中。所以如果我们写</p><pre class="nk nl nm nn gt no mm np nq aw nr bi"><span id="366a" class="ns ky iq mm b gy nt nu l nv nw">&lt;app-tab-label&gt;<br/> <br/>   &lt;h1&gt; Hello I am tab header &lt;/h1&gt;</span><span id="2729" class="ns ky iq mm b gy nx nu l nv nw">&lt;/app-tab-label&gt;</span></pre><p id="31e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们必须在标签头中插入<code class="fe mj mk ml mm b">&lt;h1&gt; Hello I am tab header &lt;/h1&gt;</code>。我们如何做到这一点？使用<code class="fe mj mk ml mm b">ng-template</code> <em class="ny">和</em> <code class="fe mj mk ml mm b">ng-content</code> <em class="ny"> </em>手法</p><p id="bc41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我们写的</p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="9db5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">无论通过什么，在<code class="fe mj mk ml mm b">tab-label-component</code><em class="ny"/>里面，我们都把它包装起来，在<code class="fe mj mk ml mm b">ng-template</code> <em class="ny"> </em>里面，并持有它的一个引用。我们为什么需要它？因为我们将使用这个模板引用来呈现选项卡标题中的内容。现在，这可能有点混乱，但是，跟着我，你会发现一切。我们的下一个组件是<code class="fe mj mk ml mm b">TabBodyComponent</code></p><h1 id="9ad8" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">TabBodyComponent</h1><p id="7c98" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><code class="fe mj mk ml mm b">TabBodyComponent </code>具有与<code class="fe mj mk ml mm b">TabLabelComponent</code> <em class="ny">完全相同的签名。唯一不同的是，<code class="fe mj mk ml mm b">TabBodyComponent </code>负责呈现正文内容，而不是标题。没有任何进一步的解释，让我们添加一些代码</em></p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e495" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除了，命名部分没有区别。</p><p id="7f00" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们可以探索<code class="fe mj mk ml mm b">tab-item-component</code></p><h1 id="6088" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">TabItemComponent</h1><p id="51d5" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><code class="fe mj mk ml mm b">tab-item-component</code> <em class="ny"> </em>只是将标签和主体组件组合在一起，我们在<code class="fe mj mk ml mm b">tab-item-component</code>中通过<code class="fe mj mk ml mm b">ng-content</code>并持有它们的组件引用</p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="75f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我们只有一些额外的字段，如<code class="fe mj mk ml mm b">label </code>和<code class="fe mj mk ml mm b">isActive</code>。顾名思义，如果我们希望在<code class="fe mj mk ml mm b">tabs-header</code>而不是复杂的HTML中有一些字符串类型的值，就使用标签字段，并且<code class="fe mj mk ml mm b">isActive </code>字段是一个检查器，这个选项卡是活动的还是不活动的。</p><p id="24ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们到了最重要的部分，让我们来探究一下这些组件的主:<code class="fe mj mk ml mm b">tabs-component</code></p><h1 id="5cd7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">选项卡组件</h1><p id="890a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们需要在<code class="fe mj mk ml mm b">tabs-component</code>中做的是，我们必须使用<code class="fe mj mk ml mm b">@ContentChildren</code>获取所有的<code class="fe mj mk ml mm b">TabItems</code> <em class="ny"> </em>，并在<code class="fe mj mk ml mm b">tabs-header</code>区域中呈现它们的<code class="fe mj mk ml mm b">LabelComponent </code>，我们还必须监听tab-header单击事件，以相应地激活tab。</p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="bac2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也许，乍一看，它看起来很可怕，但不要担心，它很快就会变得足够清晰。</p><h2 id="db32" class="ns ky iq bd kz ob oc dn ld od oe dp lh kj of og ll kn oh oi lp kr oj ok lt ol bi translated">呈现选项卡标题</h2><p id="e2f9" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">为了呈现选项卡标题，我们使用<code class="fe mj mk ml mm b">@ContentChildren</code>抓取传递的选项卡</p><pre class="nk nl nm nn gt no mm np nq aw nr bi"><span id="81c9" class="ns ky iq mm b gy nt nu l nv nw">@ContentChildren(TabItemComponent)  tabs: QueryList&lt;TabItemComponent&gt;;</span><span id="523b" class="ns ky iq mm b gy nx nu l nv nw">ngAfterContentInit(): void {  <br/>  this.tabItems$ = this.tabs.changes      <br/>       .pipe(startWith(""))      <br/>       .pipe(delay(0))      <br/>        .pipe(map(() =&gt; this.tabs.toArray()));</span><span id="62a7" class="ns ky iq mm b gy nx nu l nv nw">}</span></pre><p id="ce2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">(我们必须在第一次用<code class="fe mj mk ml mm b">startWith </code>触发一些东西，因为在<code class="fe mj mk ml mm b">QueryList</code>第一次初始化时，changes事件是无声的)</p><p id="dfa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们按住所有的<code class="fe mj mk ml mm b">TabItems</code>时，我们就可以平滑地将它呈现在标签页标题中:</p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="e35f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在遍历所有的标签项，检查是否存在<code class="fe mj mk ml mm b">TabLabelComponent </code>(所以用户想要呈现一些动态HTML)，如果存在，我们就使用<code class="fe mj mk ml mm b">*ngTemplateOutler</code>技术来呈现它的HTML。例如，如果我们在<code class="fe mj mk ml mm b">app-component</code>中写下这样的内容</p><figure class="nk nl nm nn gt jr"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="a5c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将有以下关系</p><p id="6222" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mj mk ml mm b"><em class="ny">TabsComponent =&gt; TabItemComponent =&gt; TabLabelComponent =&gt; LabelContnet =&gt; First Tab</em></code></p><p id="9b47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们所做的就是在标签页的标题区域中渲染它。</p><p id="a5f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但无论如何，我们可以在标签输入中传递一些值，它会被打印出来，而不是动态HTML。</p><p id="912c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们来看看如何呈现内容</p><h2 id="0513" class="ns ky iq bd kz ob oc dn ld od oe dp lh kj of og ll kn oh oi lp kr oj ok lt ol bi translated">呈现内容</h2><p id="f3a8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">呈现内容要简单得多，我们只需监听tab header click事件，激活适当的选项卡项，并呈现其主体组件的内容。</p><h1 id="7d69" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">摘要</h1><p id="4bdc" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">编写自己的选项卡组件有很多好处，比如可以添加任意多的特性，按照自己的意愿设计样式，还可以了解Angular内部的动态组件呈现。</p><h1 id="8251" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">简明英语笔记</strong></h1><p id="7215" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">你知道我们推出了一个YouTube频道吗？我们制作的每个视频都旨在教给你一些新的东西。点击<a class="ae kw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">点击</strong> </a>查看我们，并确保订阅该频道😎</p></div></div>    
</body>
</html>
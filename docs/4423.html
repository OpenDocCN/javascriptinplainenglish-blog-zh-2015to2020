<html>
<head>
<title>Build a Bouncing Basketball App with Anime.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Anime.js搭建弹跳篮球App</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-bouncing-basketball-app-with-anime-js-90eb5b4630d1?source=collection_archive---------8-----------------------#2020-12-10">https://javascript.plainenglish.io/build-a-bouncing-basketball-app-with-anime-js-90eb5b4630d1?source=collection_archive---------8-----------------------#2020-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="31b1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Anime.js创建弹跳效果</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5f719bf4e49f83d72b95f241804ff86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p9r8tEfNdc7m3ADh"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@benhershey?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben Hershey</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b0bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近一直在玩一些JavaScript库，偶然发现了Anime.js. Anime.js是一个轻量级的JavaScript动画库，可以处理CSS属性、SVG、DOM属性和JavaScript对象。在本文中，我们通过创建一个弹跳效果和构建一个弹跳篮球app来看看这个库。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/c41b714d26e5f19647fa38b50982381e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*tVPZTeKVL5YUTxtogAL2RA.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Preview of what we will build</figcaption></figure><h1 id="8ed7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">入门指南</h1><p id="19ae" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们首先创建一个新的项目目录。我将使用<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>作为我的代码编辑器和一个名为<a class="ae kv" href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer" rel="noopener ugc nofollow" target="_blank"> Live Server </a>的扩展，我们可以用它在浏览器中查看我们的应用程序。在我们的项目目录中，我们将创建3个文件，index.html、styles.css和script.js，我们将有一个篮球图像。你可以看看下面我的GitHub repo，获取篮球图片。</p><div class="mq mr gp gr ms mt"><a href="https://github.com/chadmuro/basketball-bounce" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">chadmuro/篮球-弹跳</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">用Anime.js GitHub创建的Bounce effect是超过5000万开发者的家园，他们一起工作来主持和审查…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">github.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh kp mt"/></div></div></a></div><p id="d7fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的起始文件结构应该是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b76d1e5e395f2b900e7a5a2401a0cb81.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*YqEk-nKYT8dxqjBcnKTdBg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">File structure</figcaption></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h2 id="661a" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">设置我们的HTML文件</h2><p id="6646" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们首先建立index.html文件。在Emmet的帮助下，我们可以通过键入一个感叹号，后跟一个制表符来创建一个HTML框架。让我们首先链接styles.css并将script.js添加到我们的index.html文件中。要访问Anime.js库，我们可以添加<a class="ae kv" href="https://cdnjs.com/libraries/animejs" rel="noopener ugc nofollow" target="_blank"> cdn </a>脚本。在主体中，我们需要的只是一个div，我们将为它指定一个容器的类名。这个容器div将作为我们将在JavaScript中创建的ball divs的父容器。我们最终的index.html文件将是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/7402e81207ff04279fc4cc342656dd11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuefsRKL3BVMtQHKGoVD7A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">index.html</figcaption></figure><h2 id="e100" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">设置我们的CSS文件</h2><p id="5793" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">接下来让我们处理styles.css文件。首先，我们将通过添加100vh的高度和100vw的宽度来设置容器类的样式。这将使应用程序的视图与我们的屏幕保持相同的大小。我们还将添加相对位置，因为我们将球定位为绝对位置。</p><p id="a48b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将有一个ball类用于我们稍后创建的ball divs，我们将赋予它100px的高度和宽度，以及绝对位置。</p><p id="829f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将给出我们的图像高度和宽度为100%。该图像将是我们的球分区的子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/7a3de7fbd6a403535548f1c0d6b657d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xIAsqdCeaeVofbQj18ROxg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">styles.css</figcaption></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="9dff" class="lt lu iq bd lv lw oe ly lz ma of mc md jw og jx mf jz oh ka mh kc oi kd mj mk bi translated">用Anime.js创建弹跳效果</h1><p id="1259" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在开始使用script.js文件之前，我们先来看看Anime.js库，并创建我们的bounce函数。你可以用这个库做很多动画，我喜欢在<a class="ae kv" href="https://codepen.io/collection/XLebem/" rel="noopener ugc nofollow" target="_blank"> CodePen </a>上浏览它们的一些例子。</p><p id="2a1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了创建一个反弹效果，我们将创建两个函数，bounceUp和bounceDown。这两个函数都将调用anime函数，并具有下面我将解释的属性。</p><ul class=""><li id="470c" class="oj ok iq ky b kz la lc ld lf ol lj om ln on lr oo op oq or bi translated"><strong class="ky ir">自动播放</strong>:如果您希望动画自动播放，设置为true或false。</li><li id="b745" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><strong class="ky ir">目标</strong>:对我们想要制作动画的部分的引用(可以是HTML标签、类、id等)。例如，要制作一个id为ball的元素的动画，它将是' #ball '。</li><li id="ad3a" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><strong class="ky ir"> translateY </strong>:一个数组，沿Y轴有开始点和结束点，动画将在这里出现。</li><li id="fb7e" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><strong class="ky ir">时长</strong>:动画的时长(毫秒)。</li><li id="5561" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><strong class="ky ir">缓动</strong>:动画移动的方式。您可以在这里查看不同的缓动选项<a class="ae kv" href="https://codepen.io/juliangarnier/pen/mWdraw" rel="noopener ugc nofollow" target="_blank"/>。</li><li id="23a5" class="oj ok iq ky b kz os lc ot lf ou lj ov ln ow lr oo op oq or bi translated"><strong class="ky ir">完成</strong>:动画完成时运行的功能。</li></ul><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="30e5" class="nq lu iq oy b gy pc pd l pe pf">const bounceUp = anime({<br/>  autoplay: false,<br/>  targets: '#ball' + ballCount,<br/>  translateY: [bottom, 0],<br/>  duration: 575,<br/>  easing: 'easeOutQuad',<br/>  complete: () =&gt; {<br/>    bounceDown.restart();<br/>  }<br/>}):</span><span id="5cb8" class="nq lu iq oy b gy pg pd l pe pf">const bounceDown = anime({<br/>  autoplay: false,<br/>  targets: '#ball' + ballCount,<br/>  translateY: [0, bottom],<br/>  duration: 575,<br/>  easing: 'easeInQuad',<br/>  complete: () =&gt; {<br/>    bounceUp.restart();<br/>  }<br/>});</span></pre><p id="f21c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">bounceUp和bouceDown函数是相同的，只是我们反转了translateY值，更改了缓动值，并在完成时重新启动了相反的函数。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="532e" class="lt lu iq bd lv lw oe ly lz ma of mc md jw og jx mf jz oh ka mh kc oi kd mj mk bi translated">设置我们的JavaScript文件</h1><p id="5b7c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在我们已经了解了如何使用Anime.js创建反弹效果，让我们开始处理我们的script.js文件。我们将首先创建一个对我们在index.html文件中创建的容器div的引用，并将它存储在一个名为container的变量中。我们还将创建一个名为ballCount的变量，它将帮助我们跟踪球的数量，并为每个球分配一个不同的id。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="b3d7" class="nq lu iq oy b gy pc pd l pe pf">const container = document.querySelector('.container');<br/>let ballCount = 1;</span></pre><p id="a680" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的应用程序中，我们将在每次单击窗口时创建一个新的弹跳篮球。首先，向窗口添加一个click事件侦听器。这个点击事件将运行以下步骤。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="44aa" class="nq lu iq oy b gy pc pd l pe pf">window.addEventListener('click', e =&gt; {</span><span id="a8e6" class="nq lu iq oy b gy pg pd l pe pf">})</span></pre><h2 id="5ae1" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">1.创造球</h2><p id="c5d1" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们首先使用document.createElement创建一个div和一个图像。对于图像元素，我们将设置src的属性为篮球图像的路由，并设置一个alt为basketball。</p><p id="b581" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于div，我们将把类设置为ball，并给它一个ball的id加上我们前面声明的ballCount数。这是为了跟踪这个球元素，并在以后制作动画。</p><p id="8a42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们将把图像作为子元素添加到ball div中。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="d9e9" class="nq lu iq oy b gy pc pd l pe pf">const ball = document.createElement('div');<br/>const image = document.createElement('img');</span><span id="393e" class="nq lu iq oy b gy pg pd l pe pf">image.setAttribute('src', './basketball.png');<br/>image.setAttribute('alt', 'basketball');</span><span id="977d" class="nq lu iq oy b gy pg pd l pe pf">ball.classList.add('ball');<br/>ball.id = 'ball' + ballCount;</span><span id="894b" class="nq lu iq oy b gy pg pd l pe pf">ball.appendChild(image);</span></pre><h2 id="d8cd" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">2.设置球的位置</h2><p id="14d2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">然后，我们将球的起始位置设置为我们在屏幕上单击的位置。使用e.view.innerHeight，我们可以得到屏幕的高度。记住，我们的ball div将处于绝对位置，所以我们将在ball div上设置bottom和left属性。bottom属性将被设置为屏幕高度减去e.y .的值减去50。我们减去额外的50，因为我们的球图像的高度是100，所以我们想得到它的中心。然后，我们用e.x减50设置球的left属性。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="6467" class="nq lu iq oy b gy pc pd l pe pf">const screenHeight = e.view.innerHeight;<br/>const bottom = screenHeight - e.y - 50;</span><span id="0900" class="nq lu iq oy b gy pg pd l pe pf">ball.style.bottom = `${bottom}px`;<br/>ball.style.left = `${e.x - 50}px`;</span></pre><h2 id="8013" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">3.将球附加到容器中</h2><p id="a5e9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在我们已经创建并设置好了球，我们将把它作为子对象添加到容器div中。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="e57c" class="nq lu iq oy b gy pc pd l pe pf">container.appendChild(ball);</span></pre><h2 id="6b74" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">4.添加Anime.js函数</h2><p id="010c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">接下来，我们将添加前面解释过的bounceUp和bounceDown函数。如您所见，动画的目标将是我们创建的球的id。对于translateY值，我们使用屏幕底部作为一个点，我们单击的点作为另一个点。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="6b43" class="nq lu iq oy b gy pc pd l pe pf">const bounceUp = anime({<br/>  autoplay: false,<br/>  targets: '#ball' + ballCount,<br/>  translateY: [bottom, 0],<br/>  duration: 575,<br/>  easing: 'easeOutQuad',<br/>  complete: () =&gt; {<br/>    bounceDown.restart();<br/>  }<br/>}):</span><span id="bbc6" class="nq lu iq oy b gy pg pd l pe pf">const bounceDown = anime({<br/>  autoplay: false,<br/>  targets: '#ball' + ballCount,<br/>  translateY: [0, bottom],<br/>  duration: 575,<br/>  easing: 'easeInQuad',<br/>  complete: () =&gt; {<br/>    bounceUp.restart();<br/>  }<br/>});</span><span id="9a85" class="nq lu iq oy b gy pg pd l pe pf">bounceDown.play();</span></pre><p id="ec96" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面代码片段的最后，我们通过调用bounceDown上的play来启动弹跳动画。然后循环运行，因为一旦一个函数完成，它就会调用另一个函数。</p><h2 id="5436" class="nq lu iq bd lv nr ns dn lz nt nu dp md lf nv nw mf lj nx ny mh ln nz oa mj ob bi translated">5.增加球数</h2><p id="f980" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">最后，我们将增加ballCount变量，这样我们可以在下一次单击时创建一个新的ball id。</p><pre class="kg kh ki kj gt ox oy oz pa aw pb bi"><span id="ef6d" class="nq lu iq oy b gy pc pd l pe pf">ballCount++;</span></pre><p id="7a42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终的script.js文件应该如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/6dbafbbaa9f01b1e4abf655783c1b73e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*VCbjILCQVL3rYeBtdK2zUQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">script.js</figcaption></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h1 id="8e3b" class="lt lu iq bd lv lw oe ly lz ma of mc md jw og jx mf jz oh ka mh kc oi kd mj mk bi translated">包扎</h1><p id="2f7a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">要预览您的应用程序，您可以使用Live Server扩展。在您的index.html文件中，右键单击编辑器并选择“用Live Server打开”。这将在连接到本地主机的浏览器中打开一个新的选项卡。现在，您可以在窗口中单击鼠标，创建任意数量的弹跳篮球。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/a18b48bf0067d384087d3ffe934678d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*xEuiU2syQ884tY1WVJMEmA.gif"/></div></figure><p id="84e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！你可以点击这里查看我的最终应用<a class="ae kv" href="https://chadmuro.github.io/basketball-bounce/" rel="noopener ugc nofollow" target="_blank">或者点击这里</a>在我的GitHub <a class="ae kv" href="https://github.com/chadmuro/basketball-bounce" rel="noopener ugc nofollow" target="_blank">上找到完整的代码。</a></p></div></div>    
</body>
</html>
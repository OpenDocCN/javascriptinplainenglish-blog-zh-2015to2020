<html>
<head>
<title>How to loop through arrays in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中循环数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-loop-through-arrays-in-react-3eaa8a14445?source=collection_archive---------1-----------------------#2018-10-27">https://javascript.plainenglish.io/how-to-loop-through-arrays-in-react-3eaa8a14445?source=collection_archive---------1-----------------------#2018-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8933e4fa3854e49902a096a7f2866351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6C4nSvy2Woe0m7bWEn4BA.png"/></div></div></figure><p id="7b3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在构建任何类型的web应用程序时，通常都需要处理一组数据。在本文中，让我向您展示如何使用React最佳实践遍历一组数据，使用您可以在自己的web应用程序中使用的真实示例。</p><h2 id="f824" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">你以前用过地图功能吗？</h2><p id="6cbd" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated"><strong class="ka ir"> map() </strong>方法创建一个新数组，其结果是对调用数组中的每个元素调用一个提供的函数。</p><p id="72c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以在ES2015中JavaScript引入了地图功能。它极大地简化了循环过程，不再需要使用简单的for循环或forEach函数。现在，for循环、forEach和map之间有一些区别，但我们不会在这里深入讨论。React文档强烈鼓励使用map函数，不仅仅是因为它简单，还因为它从数据中创建一个新数组，而不是试图改变/覆盖现有数据。</p><p id="afea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第二点至关重要。如果你不确定如何使用地图功能，我建议你花一点时间阅读这篇关于使用<a class="ae lu" href="https://medium.com/javascript-in-plain-english/learn-how-to-use-map-filter-and-reduce-in-5-minutes-fbf5c5540b2f" rel="noopener">地图，过滤和减少</a>的文章。</p><p id="4168" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lv">喜欢这篇文章吗？如果有，获取更多类似内容通过</em> <a class="ae lu" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lv">订阅解码，我的YouTube频道</em> </strong> </a> <strong class="ka ir"> <em class="lv">！</em> </strong></p><h2 id="4978" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">遍历购物车中的一组商品</h2><p id="7cfa" class="pw-post-body-paragraph jy jz iq ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">让我们想象一下，我们正在建立一个销售服装的电子商务网站。我们的应用程序可能会有一个购物车，商品被添加到其中。首先，我们的购物车看起来会像这样。</p><p id="d137" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lw lx ly lz b">let shoppingCart = [];</code></p><p id="03c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是在添加了一些项目之后，它可能看起来像这样:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="55b4" class="kw kx iq lz b gy mi mj l mk ml">let shoppingCart = [</span><span id="c2f9" class="kw kx iq lz b gy mm mj l mk ml">{id: 35, item: 'jumper', color: 'red', size: 'medium', price: 20},</span><span id="7684" class="kw kx iq lz b gy mm mj l mk ml">{id: 42, item: 'shirt', color: 'blue', size: 'medium', price: 15},</span><span id="ef5b" class="kw kx iq lz b gy mm mj l mk ml">{id: 71, item: 'socks', color: 'black', size: 'all', price: 5},</span><span id="9efa" class="kw kx iq lz b gy mm mj l mk ml">]</span></pre><p id="37af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，在我们的购物车页面上，我们将希望输出这些商品，以便用户可以看到他们订购了什么。让我们来看两种非常相似的处理方式。</p><p id="3e3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的App类构造函数中，我们将创建this.items并将其分配给<code class="fe lw lx ly lz b">this.state.cart</code>(记住，这是我们存储添加到购物车中的项目的地方)。然后，我们使用ES2015 map函数遍历this.state.cart中的每个项目。</p><p id="167c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们向映射函数传递两个参数。第一个是item，它简单地对应于我们的<code class="fe lw lx ly lz b">this.state.cart</code>数组中的一个条目。第二个是一个键，React使用它来帮助渲染器跟踪每个单独的项目。正如您可能已经注意到的，我们没有在我们的<code class="fe lw lx ly lz b">this.state.cart</code>中设置一个<code class="fe lw lx ly lz b">key</code>，我们只是通过引用我们的map函数中的<code class="fe lw lx ly lz b">item.id</code>来传递项目的id作为键。无论如何，我们输出一个带有<code class="fe lw lx ly lz b">{item.name}</code>的<code class="fe lw lx ly lz b">&lt;li&gt; </code>标签。</p><p id="dd8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们快速地看一下这段完整的代码:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="e57d" class="kw kx iq lz b gy mi mj l mk ml"><strong class="lz ir">this</strong>.items = <strong class="lz ir">this</strong>.state.cart.map((item) =&gt;<br/>    &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;<br/>);</span></pre><p id="d1d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在稍后的代码中，当我们想要使用它时，我们简单地创建一个外部的<code class="fe lw lx ly lz b">&lt;ul&gt;</code>标签，并将this.items放入其中，就像这样:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="304e" class="kw kx iq lz b gy mi mj l mk ml">&lt;ul&gt;<br/>    {this.items}<br/>&lt;/ul&gt;</span></pre><p id="f752" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就像这样，我们的页面会将购物车中的每个商品呈现为一个唯一的<code class="fe lw lx ly lz b">&lt;li&gt;</code>商品。</p><p id="a98f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们处理这个问题的第二种方式非常相似，可能感觉更熟悉一些。</p><p id="e38d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以简单地将this.item代码块放在<strong class="ka ir"> render() </strong>函数的顶部，而不是放在类构造函数中，就像这样:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="0c8d" class="kw kx iq lz b gy mi mj l mk ml">render() {<br/>    <strong class="lz ir">const </strong>items = <strong class="lz ir">this</strong>.state.cart.map((item) =&gt;<br/>        &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;<br/>    );</span></pre><p id="888c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这允许我们使用更传统的const语法(或者var或let，如果您愿意的话)。</p><p id="5482" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们这样做，也意味着我们可以这样写:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="b39a" class="kw kx iq lz b gy mi mj l mk ml">&lt;ul&gt;<br/>    {items}<br/>&lt;/ul&gt;</span></pre><p id="64d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在有些人会争辩说，你不应该污染<code class="fe lw lx ly lz b">render()</code>函数，但是当编写一些相当简单并且不复杂得令人难以置信的东西时(我在这里说的是成千上万行代码)，这真的无关紧要。所以我建议你选择你觉得更舒服的方式。随着React的进步，您将会找到最适合您的项目的风格。</p><p id="f725" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好了，我们知道了如何使用循环来呈现列表。但是，如果我们想通过数据循环输出大量的子组件呢？我们如何做到这一点？</p><p id="eb3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗯，这实际上很简单，与我们已经在做的事情非常相似。</p><p id="4745" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们假设我们的商店有以下商品:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="dd37" class="kw kx iq lz b gy mi mj l mk ml">shop: [<br/>    {id: 35, name: 'jumper', color: 'red', price: 20},<br/>    {id: 42, name: 'shirt', color: 'blue', price: 15},<br/>    {id: 56, name: 'pants', color: 'green', price: 25},<br/>    {id: 71, name: 'socks', color: 'black', price: 5},<br/>    {id: 72, name: 'socks', color: 'white', price: 5},<br/>]</span></pre><p id="4952" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了让你看得更清楚，这个商店就在这个州的一个建筑商里面。看起来都是这样的:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="4a7f" class="kw kx iq lz b gy mi mj l mk ml"><strong class="lz ir">class </strong>App <strong class="lz ir">extends </strong>Component {<br/>    constructor(props) {<br/>        <strong class="lz ir">super</strong>(props);<br/>        <strong class="lz ir">this</strong>.state = {<br/>            cart: [],<br/>            shop: [<br/>                {id: 35, name: 'jumper', color: 'red', price: 20},<br/>                {id: 42, name: 'shirt', color: 'blue', price: 15},<br/>                {id: 56, name: 'pants', color: 'green', price: 25},<br/>                {id: 71, name: 'socks', color: 'black', price: 5},<br/>                {id: 72, name: 'socks', color: 'white', price: 5},<br/>            ]<br/>        }<br/>    }</span></pre><p id="2455" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我们有了我们的商店项目，现在我们想创建一个子组件，我们称之为<strong class="ka ir"> Item.js </strong>。整个组件文件如下所示:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="bab9" class="kw kx iq lz b gy mi mj l mk ml"><strong class="lz ir">import </strong>React, {Component} <strong class="lz ir">from </strong>'react';<br/><br/><strong class="lz ir">class </strong>Item <strong class="lz ir">extends </strong>Component {<br/>    render() {<br/>        <strong class="lz ir">return </strong>(<br/>            &lt;div&gt;<br/>                &lt;p&gt;{<strong class="lz ir">this</strong>.props.item.name}&lt;/p&gt;<br/>                &lt;p&gt;{<strong class="lz ir">this</strong>.props.item.color}&lt;/p&gt;<br/>                &lt;p&gt;${<strong class="lz ir">this</strong>.props.item.price}&lt;/p&gt;<br/>            &lt;/div&gt;<br/>        );<br/>    }<br/>}<br/><br/><strong class="lz ir">export default </strong>Item;</span></pre><p id="6315" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您不确定，我们调用<code class="fe lw lx ly lz b">this.props.item</code>,因为当我们在父组件内部调用this.state.item时，我们会将其传递给子组件。这听起来可能有点奇怪，但是请耐心等待，一会儿就会明白了！</p><p id="e85b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以回到循环，这就是我们要写的在商店中循环商品的代码:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="0b12" class="kw kx iq lz b gy mi mj l mk ml">&lt;h3&gt;Items for sale&lt;/h3&gt;</span><span id="d510" class="kw kx iq lz b gy mm mj l mk ml">{<strong class="lz ir">this</strong>.state.shop.map((item) =&gt;<br/>    &lt;Item key={item.id} item={item}/&gt;<br/>)}</span></pre><p id="6cf4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，这与我们之前使用的概念非常相似。这里唯一的不同是，我们现在输出的不是<code class="fe lw lx ly lz b">&lt;li&gt;</code>标签，而是<code class="fe lw lx ly lz b">&lt;Item /&gt;</code>标签——这就是我们刚才提到的<strong class="ka ir"> Item.js </strong>组件！就这么简单！</p><p id="80a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以当我们在<strong class="ka ir"> Item.js </strong>组件内部调用this.props.item时，是对<code class="fe lw lx ly lz b">&lt;Item key={item.id} item={item}/&gt;</code>的引用，更确切的说是对<code class="fe lw lx ly lz b">item={item}</code>的引用。因此，如果我们称之为<code class="fe lw lx ly lz b">product={item}</code>，我们将改为<code class="fe lw lx ly lz b">this.props.product</code>。有道理吗？</p><p id="4740" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可能已经注意到，我们不得不将全部功能放在花括号{}中。这是必需的，以便React能够理解您试图表达一个函数，而不仅仅是呈现纯文本。</p><p id="1377" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里还要注意的另一点是，我们循环数据的三种不同方式都可以互换。因此，如果您想遍历子组件的数组，但更喜欢我们向您展示的第一种方法，那么您可以这样做！说到底都是正规的JavaScript！</p><p id="9631" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们已经向您展示了使用React中最新的JavaScript技术遍历数组的三种强大方法。现在去使用这些新发现的知识来制作一些令人惊奇的web应用程序吧！</p><p id="e35d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lv">更多内容敬请关注</em><a class="ae lu" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="lv">plain English . io</em></strong></a><strong class="ka ir"><em class="lv"/></strong><em class="lv">和上</em><strong class="ka ir"><em class="lv"/></strong><a class="ae lu" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">我们的YouTube频道</strong> </a> <strong class="ka ir">！</strong></p><div class="mn mo gp gr mp mq"><a href="https://newsletter.plainenglish.io/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">上周简明英语杂志</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">《上周简明英语》——科技世界的每周综述，包含我们认为你会…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">时事通讯. plainenglish.io</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jw mq"/></div></div></a></div></div></div>    
</body>
</html>
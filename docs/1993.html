<html>
<head>
<title>Check for an Internet Connection in a React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React本机应用程序中检查互联网连接</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/check-internet-connectivity-easily-on-react-native-application-b9f0de162dd9?source=collection_archive---------1-----------------------#2020-05-10">https://javascript.plainenglish.io/check-internet-connectivity-easily-on-react-native-application-b9f0de162dd9?source=collection_archive---------1-----------------------#2020-05-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="68ea" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">安装—实施—测试</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a0e7bb4a7171f1ee5d79aff4b9d03e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c5-CfExgnl0ibrplhbSUvg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@olegmagni?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Oleg Magni</a> on <a class="ae ks" href="https://unsplash.com/s/photos/internet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="2f4f" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">装置</h1><p id="ef95" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated"><strong class="ln io">安装</strong><a class="ae ks" href="https://github.com/react-native-community/react-native-netinfo" rel="noopener ugc nofollow" target="_blank">T3】react-native-netInfoT5】</a></p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="a4ca" class="mm ku in mi b gy mn mo l mp mq">yarn add @react-native-community/netinfo</span><span id="2e93" class="mm ku in mi b gy mr mo l mp mq">cd ios &amp;&amp; pod install &amp;&amp; cd .. # iOS pod installation</span></pre><p id="84c0" class="pw-post-body-paragraph ll lm in ln b lo ms jo lq lr mt jr lt lu mu lw lx ly mv ma mb mc mw me mf mg ig bi translated"><strong class="ln io"> android/build.gradle </strong>的变化</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="9b73" class="mm ku in mi b gy mn mo l mp mq">buildscript {<br/>  ext {<br/>    buildToolsVersion = "28.0.3"<br/>    minSdkVersion = 16<br/>    compileSdkVersion = 28<br/>    targetSdkVersion = 28<br/>    # Only using Android Support libraries<br/>    supportLibVersion = "28.0.0"<br/>  }<!-- --> </span></pre></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="bfa0" class="kt ku in bd kv kw ne ky kz la nf lc ld jt ng ju lf jw nh jx lh jz ni ka lj lk bi translated">履行</h1><p id="14bb" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">创建文件名<strong class="ln io"> NetworkUtils.js </strong></p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="e10f" class="mm ku in mi b gy mn mo l mp mq">import NetInfo from "@react-native-community/netinfo";</span><span id="d32d" class="mm ku in mi b gy mr mo l mp mq">export default class NetworkUtils {</span><span id="6e64" class="mm ku in mi b gy mr mo l mp mq">  static async isNetworkAvailable() {<br/>    const response = await NetInfo.fetch();<br/>    return response.isConnected;<br/>}}</span></pre><p id="b46a" class="pw-post-body-paragraph ll lm in ln b lo ms jo lq lr mt jr lt lu mu lw lx ly mv ma mb mc mw me mf mg ig bi translated">现在在必要的地方调用它</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="4381" class="mm ku in mi b gy mn mo l mp mq">const isConnected = await NetworkUtils.isNetworkAvailable()</span></pre></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="cb36" class="kt ku in bd kv kw ne ky kz la nf lc ld jt ng ju lf jw nh jx lh jz ni ka lj lk bi translated">测试</h1><p id="a25e" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在<strong class="ln io"> package.json </strong>文件中添加</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="be77" class="mm ku in mi b gy mn mo l mp mq">"jest": {<br/> "preset": "react-native",<br/> "setupFiles": [<br/>   "&lt;path&gt;/jestSetupFile.js"<br/>],</span></pre><p id="14b1" class="pw-post-body-paragraph ll lm in ln b lo ms jo lq lr mt jr lt lu mu lw lx ly mv ma mb mc mw me mf mg ig bi translated">创建新文件<strong class="ln io">jessetupfile . js</strong>并添加这个</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="937f" class="mm ku in mi b gy mn mo l mp mq">import mockRNCNetInfo from '@react-native-community/netinfo/jest/netinfo-mock.js';<br/><br/>jest.mock('@react-native-community/netinfo', () =&gt; mockRNCNetInfo);</span></pre><p id="06d4" class="pw-post-body-paragraph ll lm in ln b lo ms jo lq lr mt jr lt lu mu lw lx ly mv ma mb mc mw me mf mg ig bi translated">现在jest可以测试了。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">NetworkUtils Class</figcaption></figure><p id="bae2" class="pw-post-body-paragraph ll lm in ln b lo ms jo lq lr mt jr lt lu mu lw lx ly mv ma mb mc mw me mf mg ig bi translated">测试案例</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">NetworkUtils Test Cases</figcaption></figure></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><h1 id="af65" class="kt ku in bd kv kw ne ky kz la nf lc ld jt ng ju lf jw nh jx lh jz ni ka lj lk bi translated">感谢阅读！</h1></div></div>    
</body>
</html>
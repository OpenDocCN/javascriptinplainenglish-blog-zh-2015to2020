<html>
<head>
<title>React controlled forms with hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用钩子反应控制窗体</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-controlled-forms-with-hooks-538762aab935?source=collection_archive---------1-----------------------#2019-09-14">https://javascript.plainenglish.io/react-controlled-forms-with-hooks-538762aab935?source=collection_archive---------1-----------------------#2019-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c699" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">嘿大家好！我在这里写我的第一篇关于medium的文章，讨论用React钩子控制表单。</p><h2 id="4f8d" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">我看到许多程序员在从基于类的组件转向钩子时心存疑虑，在大多数情况下，更多的是知道如何为正确的任务选择正确的钩子。</h2><p id="cb61" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">但是在我们更多地讨论带有钩子的受控窗体之前，让我们更多地了解一下受控窗体如何与基于类的组件一起工作。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/35a2f8ee46651fe76887329637491d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yf1ho63E_QX_4PSfuCL41Q.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Example of a controlled input with class based component</figcaption></figure><p id="40af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们有一个基于类的组件用户，它只有一个输入和一个状态，但如果我们需要添加一个有许多字段的表单，只需添加一个名称等于状态名称，获取状态值，设置onChange函数并完成，所有输入都由状态控制。</p><p id="d4b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是当我们考虑钩子时，有一种不同的方法来管理状态，顺便说一下，这是一种非常简单的方法，叫做useState钩子，让我们看看如何使用useState钩子来编写相同的组件。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lw"><img src="../Images/c9ce76a013bc0c76ecf5d9cb772aa80b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3SuV8mDqgLtc2lWzwTydQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Example of a controlled input with useState hook</figcaption></figure><p id="6567" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个解决方案看起来比基于类的组件解决方案更好，也更漂亮，但是当你需要一个更大的表单时，问题就出现了，正如你在下面看到的。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lx"><img src="../Images/fea7dc4750295239de8511c78cf2f2ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XR7Z-KGYT_5ne4unaNRkA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Example of multiple controlled inputs with useState hook</figcaption></figure><p id="a76e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这看起来不再那么美好了，这是我看到许多程序员对解决这个问题的更好的方法有很多怀疑的地方，大部分是因为他们不知道所有的钩子和所有的可能性。</p><p id="6e3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，让我们使用官方文档中的定义来讨论一下useReducer钩子。</p><blockquote class="ly lz ma"><p id="e0a5" class="jk jl mb jm b jn jo jp jq jr js jt ju mc jw jx jy md ka kb kc me ke kf kg kh ig bi translated"><code class="fe mf mg mh mi b"><a class="ae mj" href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noopener ugc nofollow" target="_blank">useState</a></code>的替代物。接受类型为<code class="fe mf mg mh mi b">(state, action) =&gt; newState</code>的缩减器，并返回与<code class="fe mf mg mh mi b">dispatch</code>方法配对的当前状态。(如果你熟悉Redux，你已经知道这是如何工作的。)</p><p id="569b" class="jk jl mb jm b jn jo jp jq jr js jt ju mc jw jx jy md ka kb kc me ke kf kg kh ig bi translated">当你有复杂的状态逻辑，包括多个子值，或者下一个状态依赖于前一个状态时，<code class="fe mf mg mh mi b">useReducer</code>通常比<code class="fe mf mg mh mi b">useState</code>更好。<code class="fe mf mg mh mi b">useReducer</code>还允许您优化触发深度更新的组件的性能，因为<a class="ae mj" href="https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" rel="noopener ugc nofollow" target="_blank">您可以向下传递</a> <code class="fe mf mg mh mi b"><a class="ae mj" href="https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" rel="noopener ugc nofollow" target="_blank">dispatch</a></code> <a class="ae mj" href="https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" rel="noopener ugc nofollow" target="_blank">而不是回调</a>。</p></blockquote><p id="8151" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">文档告诉我们在处理复杂状态逻辑时使用这个useReducer钩子，这里很多人不考虑用它来处理简单的受控表单，但是Reducer只不过是一个接收状态并返回新状态的函数，我们的输入更改正是这样，一个当用户在键盘上键入某个键时接收实际状态并返回新状态的函数。</p><p id="9eed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">记住这一点，让我们看看如何使用useReducer钩子来解决我们的“多输入的受控表单”问题。</p><p id="ab51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们需要创建初始状态，然后我们将创建一个reducer，它将返回带有新信息的状态。</p><p id="a4a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，我们将reducer和initialState发送给useReducer挂钩，该挂钩将返回一个State方法来获取状态，并返回一个dispatch方法来更改该状态。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mk"><img src="../Images/8c948d2245bbf9dcdaefdbcf2a95d6c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFyxk4Bok1MpF79zRL_NQw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Example of multiple controlled inputs with useReducer hook</figcaption></figure><p id="b2d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这样，我们有和以前一样的基于类的组件的行为，但是使用钩子更加灵活，更容易提取逻辑，与更大的团队一起工作等等。</p><p id="5618" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是所有的人，我希望这有助于澄清一些关于使用钩子控制表单的疑问，并带来新的见解，让我们可以更有创造性地使用钩子来解决我们在日常工作中遇到的许多问题。</p></div></div>    
</body>
</html>
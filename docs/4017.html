<html>
<head>
<title>Type Checking using PropTypes in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中使用PropTypes进行类型检查</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/type-checking-using-proptypes-in-react-be8c46e7e704?source=collection_archive---------14-----------------------#2020-11-10">https://javascript.plainenglish.io/type-checking-using-proptypes-in-react-be8c46e7e704?source=collection_archive---------14-----------------------#2020-11-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c10a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">PropTyping允许我们对props进行类型检查，所以这是从父组件传递到子组件的数据。这使得调试react应用程序更加容易。出于本文的目的，我将以一个简单的图书应用程序为例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e10febdc8e3ef8bf1cca23ee0aec81d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pP1pLzS-rC3AqiAv4mH7A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">by Markus Spiske</figcaption></figure><h2 id="544e" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated"><strong class="ak">它是如何工作的？</strong></h2><p id="b2f3" class="pw-post-body-paragraph jk jl in jm b jn lr jp jq jr ls jt ju jv lt jx jy jz lu kb kc kd lv kf kg kh ig bi translated">首先，创建一个简单的react应用程序并安装<strong class="jm io"> proptypes </strong>包，<code class="fe lw lx ly lz b">npm install --save prop-types</code>。现在，如果您检查package.json文件，您应该有一个prop类型的条目。接下来，将<strong class="jm io">属性类型</strong>导入到我们的组件文件中。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="bd17" class="ky kz in lz b gy me mf l mg mh">import React, { Component } from 'react';<br/>import PropTypes from "prop-types"</span><span id="211b" class="ky kz in lz b gy mi mf l mg mh">class BookDetail extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;h1&gt;{this.props.book}&lt;/h1&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="91cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是我们将用作示例的图书数据。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="2c2e" class="ky kz in lz b gy me mf l mg mh">export const storeProducts = [<br/>{<br/>    id: 5,<br/>    title: "Behold the Dreamers (Oprah's Book Club)",<br/>    img: "img/BeholdtheDreamers-5.png",<br/>    price: 24,<br/>    author: "Imbolo Mbue",<br/>    info:<br/>      "Jende Jonga, a Cameroonian immigrant living in Harlem, has come to the United States to provide a better life for himself, his wife, Neni, and their six-year-old son. In the fall of 2007, Jende can hardly believe his luck when he lands a job as a chauffeur for Clark Edwards, a senior executive at Lehman Brothers. Clark demands punctuality, discretion, and loyalty—and Jende is eager to please. Clark’s wife, Cindy, even offers Neni temporary work at the Edwardses’ summer home in the Hamptons. With these opportunities, Jende and Neni can at last gain a foothold in America and imagine a brighter future...",<br/>    inCart: false,<br/>    count: 0,<br/>    total: 0<br/>  }<br/>]</span></pre><p id="9168" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在探讨数据有问题的可能性。假设你，团队中的某个人，或者之前参与项目的某个人，将<code class="fe lw lx ly lz b">price</code>赋给一个布尔值，将<code class="fe lw lx ly lz b">inCart</code>赋给一个整数，从而搞乱了API。这些会给我们的应用程序带来大量的错误。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="c42b" class="ky kz in lz b gy me mf l mg mh">export const storeProducts = [<br/>{<br/>    id: 5,<br/>    title: "Behold the Dreamers (Oprah's Book Club)",<br/>    img: "img/BeholdtheDreamers-5.png",<br/>    price: true,<br/>    author: "Imbolo Mbue",<br/>    info:<br/>      "Jende Jonga, a Cameroonian immigrant living in Harlem, has come to the United States to provide a better life for himself, his wife, Neni, and their six-year-old son. In the fall of 2007, Jende can hardly believe his luck when he lands a job as a chauffeur for Clark Edwards, a senior executive at Lehman Brothers. Clark demands punctuality, discretion, and loyalty—and Jende is eager to please. Clark’s wife, Cindy, even offers Neni temporary work at the Edwardses’ summer home in the Hamptons. With these opportunities, Jende and Neni can at last gain a foothold in America and imagine a brighter future...",<br/>    inCart: "24",<br/>    count: 0,<br/>    total: 0<br/>  }<br/>]</span></pre><p id="0c8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是<strong class="jm io">类型检查</strong>的用武之地。我们有一个<code class="fe lw lx ly lz b">BookDetail</code>组件，这是我们的子组件。我们希望对从父组件发送到子组件的道具进行类型检查。首先，我们将为<code class="fe lw lx ly lz b">BookDetail</code>附加一个特殊属性。在组件名上调用<code class="fe lw lx ly lz b">propTypes</code>，并将其设置为等于一个对象。在这里，我们可以分配我们需要验证的内容。在这种情况下，我们用<code class="fe lw lx ly lz b">book</code>作为道具，使用<code class="fe lw lx ly lz b">shape</code>方法让物体呈现特定的形状。在shape方法中，我们将指定我们期望的对象属性，它们是<code class="fe lw lx ly lz b">id</code>、<code class="fe lw lx ly lz b">img</code>、<code class="fe lw lx ly lz b">title</code>、<code class="fe lw lx ly lz b">price</code>和<code class="fe lw lx ly lz b">inCart</code>。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="3124" class="ky kz in lz b gy me mf l mg mh">class BookDetail extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;h1&gt;{this.props.book}&lt;/h1&gt;<br/>    );<br/>  }<br/>}</span><span id="a7ac" class="ky kz in lz b gy mi mf l mg mh">// Typechecking using PropType<br/>BookDetail<!-- -->.propTypes = {<br/>  book: PropTypes.shape({<br/>    //here the PropType is looking for a number    <br/>    id: PropTypes.number,<br/>    //the PropType is looking for an string<br/>    img: PropTypes.string,<br/>    title: PropTypes.string,<br/>    price: PropTypes.number,<br/>    //here the PropType is looking for a boolean<br/>    inCart: PropTypes.bool<br/>  }).isRequired<br/>}</span></pre><p id="0939" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在应用了<code class="fe lw lx ly lz b">shape</code>方法之后，现在我们已经设置了<code class="fe lw lx ly lz b">PropTypes</code>，下一步是使其成为必需的。保存时，您将在控制台上收到以下错误。</p><pre class="kj kk kl km gt ma lz mb mc aw md bi"><span id="732d" class="ky kz in lz b gy me mf l mg mh">Warning: Failed prop type: Invalid prop `book.price` of type `boolean` supplied to `BookDetail`, expected `number`.<br/>    in BookDetail (at BookList.js:24)<br/>    in div (at BookList.js:20)<br/>    in div (at BookList.js:17)<br/>    in div (at BookList.js:16)<br/>    in BookList (created by Context.Consumer)<br/>    in Router (created by BrowserRouter)<br/>    in BrowserRouter (at src/index.js:11)<br/>    in BookProvider (at src/index.js:10)</span></pre><p id="5adb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该错误清楚地表明图书类型是当前的布尔值，但它需要一个数字。现在，您可以返回到您的数据并检查哪里需要更改。在这种情况下，我们将把<code class="fe lw lx ly lz b">price</code>改为一个整数值。接下来，它将为<code class="fe lw lx ly lz b">inCart</code>值抛出一个错误，该值当前是一个字符串，我们将它改为一个布尔值。</p><p id="c095" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用prop-types进行类型检查是一种快速简单的方法，可以检查数据中是否有错误，或者数据是否运行正常。一定要在你的下一个项目中尝试一下。</p></div></div>    
</body>
</html>
<html>
<head>
<title>What is Deno and what happens to Node.js now?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Deno，Node.js现在怎么样了？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-deno-and-what-happens-to-node-js-now-57aae2afa2bc?source=collection_archive---------10-----------------------#2020-05-18">https://javascript.plainenglish.io/what-is-deno-and-what-happens-to-node-js-now-57aae2afa2bc?source=collection_archive---------10-----------------------#2020-05-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a3f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，经过大量的炒作，终于有了Deno，1.0.0已经在5月13日发布了，在本文中，我想深入了解Deno，并陈述一些在Node.js的未来可能扮演角色的有趣事实。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2d8d7c770095d0555c5e1cb34d456c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SvSYZ3EXUJeQj85XbyMBJQ.png"/></div></div></figure><h1 id="ed4d" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">首先，什么是Deno？</h1><p id="3ac0" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi lx translated"><span class="l ly lz ma bm mb mc md me mf di"> D </span>、T8】 eno 是<strong class="jm io"> JavaScript </strong>和<strong class="jm io"> TypeScript </strong>的运行时，该脚本基于<strong class="jm io"> V8 </strong> JavaScript引擎，并以<strong class="jm io"> Rust </strong>编程语言编写，基于<a class="ae mg" href="https://tokio.rs/" rel="noopener ugc nofollow" target="_blank"> Tokio </a>平台(提供JavaScript所需的异步运行时)。</p><p id="6d2a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它是由<strong class="jm io"> Node.js </strong>的原始创建者<strong class="jm io"> Ryan Dahl </strong>创建的。这是达尔在2018年的演讲“我对Node.js感到遗憾的10件事”中宣布的，旨在解决Node.js中的设计问题。Deno在一个可执行文件中明确承担了运行时和包管理器的角色，而不需要单独的包管理程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h1 id="7e7c" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Node.js设计缺陷</h1><p id="4e87" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">根据Dahl的说法，Node.js有三个主要的设计问题:</p><ul class=""><li id="0c5a" class="mj mk in jm b jn jo jr js jv ml jz mm kd mn kh mo mp mq mr bi translated">设计不良的模块系统，集中分布；</li><li id="4507" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">必须支持许多传统的APIs</li><li id="0803" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">和缺乏安全。</li></ul><p id="f0ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">迪诺打算解决所有三个问题…</p><blockquote class="mx my mz"><p id="f0a5" class="jk jl na jm b jn jo jp jq jr js jt ju nb jw jx jy nc ka kb kc nd ke kf kg kh ig bi translated">考虑Node.js API是基于回调的这一事实也很重要，因为它是在承诺和异步/等待之前编写的。在Node中没有相应的改变，因为这样的改变将是巨大的，所以我们基本上坚持回调或者承诺API调用。</p></blockquote><h1 id="31ec" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Deno安全执行</h1><p id="6114" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">Deno提高Node.js安全性的方式非常简单:本质上，Deno不会让程序访问磁盘、网络、子进程或环境变量。当您需要允许这些选项时，您可以选择带有命令行标志的选项，例如<code class="fe ne nf ng nh b">--allow-read=/tmp</code>或<code class="fe ne nf ng nh b">--allow-net=google.com</code>。Deno的另一个安全改进是它总是死于未捕获的错误，不像Node.js，它允许在未捕获的错误之后继续执行，这可能会导致不可预测的结果。</p><p id="3be5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面运行一个没有任何读/写/网络权限的基本Deno脚本(沙箱模式):</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="94ed" class="nm kv in nh b gy nn no l np nq">deno run main.ts</span></pre><p id="9d4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">需要显式标志来公开相应的权限:</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="9efd" class="nm kv in nh b gy nn no l np nq">deno run --allow-read --allow-net main.ts</span></pre><p id="c113" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了文件系统的<code class="fe ne nf ng nh b">--allow-write</code>标志之外，还有<code class="fe ne nf ng nh b">--allow-net</code>、<code class="fe ne nf ng nh b">--allow-env</code>和<code class="fe ne nf ng nh b">--allow-run</code>标志，分别用于启用网络请求、访问环境和运行子进程。</p><h1 id="42bc" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">为什么选择Deno模块？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/e1c9c05d77efc50fc8435e6d0fa81af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qAI-RA-jy016kww8N42yGQ.jpeg"/></div></div></figure><p id="3286" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Node.js中，你使用关键字<code class="fe ne nf ng nh b">require</code>加载CommonJS模块，它们，标准的和第三方的，都隐含地来自npmjs.com。在Deno中，使用<code class="fe ne nf ng nh b">import</code>关键字加载ES模块并显式声明URL。例如:</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="3715" class="nm kv in nh b gy nn no l np nq"><strong class="nh io">import</strong> * <strong class="nh io">as</strong> log <strong class="nh io">from</strong> "https://deno.land/std/log/someModule.ts";<br/><strong class="nh io">import</strong> { <strong class="nh io">Logger</strong> } <strong class="nh io">from</strong> "https://adesso.de/lib/logger.ts";</span></pre><p id="0eb5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">乍一看，您可能还记得Node.js导入看起来更简单，但是使用Deno样式有一些优点。Deno模块可以托管在任何没有第三方模块集中存储库的地方。此外，模块总是在本地缓存和编译，除非您明确要求刷新，否则不会更新。</p><h2 id="fb5c" class="nm kv in bd kw ns nt dn la nu nv dp le jv nw nx li jz ny nz lm kd oa ob lq oc bi translated">如果一个网站瘫痪了怎么办？</h2><p id="4236" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">Deno缓存下载的模块。由于缓存存储在我们的本地磁盘上，Deno的创建者建议在我们的版本控制系统(即g it)中检查它，并将其保存在存储库中。这样，即使当网站关闭时，所有的开发者仍然可以访问下载的版本。因此，只要所有的导入都被解析一次，即使你在没有连接的飞机上，你也应该能够运行已经在你的笔记本电脑上的Deno程序。</p><p id="0f1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面的Deno脚本实现了一个基本的<a class="ae mg" href="https://en.wikipedia.org/wiki/Web_server" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> HTTP服务器</strong> </a> <strong class="jm io"> : </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/c95615367e79a57dddf4f375d017b2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7MAryC77rvRsqoLWUm7KMw.png"/></div></div></figure><p id="e123" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Deno包含了现代JavaScript的一系列新特性，比如<strong class="jm io"> promises </strong>或<strong class="jm io"> async iterable </strong>。如果这个for循环看起来很奇怪，那么它实际上是一个for循环，允许遍历无限多的传入数据和事件，以及来自服务器的无限多的传入请求。在异步函数之外使用<code class="fe ne nf ng nh b"><strong class="jm io">await</strong></code>,也是因为我们可以使用顶级的await，不仅可以在异步可迭代中使用，也可以在普通的承诺中使用。基本上，继续循环，直到数据源服务器说，我完成了，不会再有数据被发送，当然，在这里永远不会发生。</p><h1 id="d820" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">集成打字稿</h1><p id="d6bc" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">如果你和我一样是TypeScript的狂热爱好者，那么Deno可以帮你搞定，不需要外部工具，默认情况下Deno被转换成JavaScript。这是内部完成的，所以不需要担心。</p><p id="6234" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然在默认情况下Deno负责很多事情，但是您可以使用自己的<code class="fe ne nf ng nh b">tsconfig.json</code>文件来覆盖配置:</p><pre class="kj kk kl km gt ni nh nj nk aw nl bi"><span id="2020" class="nm kv in nh b gy nn no l np nq">deno run -c tsconfig.json [your-script.ts]</span></pre><p id="3ce7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认配置是使用<strong class="jm io">严格</strong>模式，因此任何不明智的编码实践都会被立即警告。</p><h1 id="0289" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Node.js现在怎么样了？</h1><p id="fae6" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">好吧。Node.js是一个巨人，被数百万人使用，存在于数百万个存储库中，是一项成熟的、得到良好支持的技术，拥有一个将会存在很长时间的伟大社区，这是毫无疑问的。</p><h1 id="dbea" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">该不该用Deno？</strong></h1><p id="e2d8" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">学习新事物是困难的，但对任何开发人员来说，继续学习新事物也是必不可少的。我的建议是，如果您现在开始使用服务器端JS，并且您还不知道Node，并且从未编写过任何TypeScript，那么您最好从Node.js开始(重要的是要考虑到您可以找到大量关于Node.js的学习资料和预先存在的StackOverflow问答)。</p><p id="8c20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果你已经熟悉Node.js和TypeScript，我想是时候做一点小小的改变了，从长远来看，从一开始就进入Deno是非常有前途和有益的。</p><p id="c642" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">Deno亮点:</strong></p><ul class=""><li id="c625" class="mj mk in jm b jn jo jr js jv ml jz mm kd mn kh mo mp mq mr bi translated">Deno是一个运行时，用于在浏览器外的单个可执行文件中执行<strong class="jm io"> JavaScript </strong>和<strong class="jm io"> TypeScript </strong>。</li><li id="33c4" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno在默认情况下是安全的，除非明确启用，否则无法访问文件、网络或环境。</li><li id="817f" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno死于未被发现的错误。</li><li id="2eaf" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno中的所有异步操作都返回一个承诺。</li><li id="97ba" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno脚本可以捆绑到一个JavaScript文件中。</li><li id="f85e" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno有内置的工具，比如依赖检查器(<code class="fe ne nf ng nh b">deno info</code>)和代码格式化器(<code class="fe ne nf ng nh b">deno fmt</code>)。</li><li id="4fb8" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno提供了一组经过审计的标准模块。</li><li id="fabf" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno被设计成一系列铁锈板条箱，以允许在不同的层上集成。</li><li id="8a73" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno基于JavaScript语言的现代特性</li><li id="7e41" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno有一个广泛的标准库</li><li id="f9e6" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno的核心是TypeScript，这在许多不同的方面带来了巨大的优势，包括一流的TypeScript支持(您不必单独编译TypeScript，它由Deno自动完成)</li><li id="2bf5" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno采用es模块</li><li id="c0bb" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno没有包管理器</li><li id="d682" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">德诺有一流的<code class="fe ne nf ng nh b">await</code></li><li id="cdfa" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno作为内置测试工具</li><li id="8559" class="mj mk in jm b jn ms jr mt jv mu jz mv kd mw kh mo mp mq mr bi translated">Deno的目标是尽可能地兼容浏览器，例如通过提供内置的<code class="fe ne nf ng nh b">fetch</code>和全局的<code class="fe ne nf ng nh b">window</code>对象</li></ul><h1 id="6bc6" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="5a4a" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">Node.js很棒，而且肯定会继续成为JavaScript世界的事实标准。但是很有可能我们会逐渐看到Deno被更多地采用，因为它有一流的类型脚本支持和现代标准库以及更多的特性。</p><p id="9d66" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是老实说，作为回报，它提供的所有好的和美好的东西，将会有转移现有npm模块和代码库的巨大债务，我想这是迄今为止最大的限制。如何看待<strong class="jm io"> Deno </strong>？</p><p id="17d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">和平！</p><h1 id="e24d" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">简明英语团队的笔记</strong></h1><p id="1b9a" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">你知道我们有四份出版物和一个YouTube频道吗？你可以在我们的主页<a class="ae mg" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> plainenglish.io </strong> </a>找到所有这些内容——关注我们的出版物并<a class="ae mg" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">订阅我们的YouTube频道</strong> </a> <strong class="jm io">来表达你的爱吧！</strong></p></div></div>    
</body>
</html>
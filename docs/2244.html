<html>
<head>
<title>JavaScript Best Practices — Loops and Returns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—循环和返回</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-best-practices-loops-and-returns-ea458af09642?source=collection_archive---------3-----------------------#2020-06-03">https://javascript.plainenglish.io/javascript-best-practices-loops-and-returns-ea458af09642?source=collection_archive---------3-----------------------#2020-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a5b2099fc2279ff2e34eb92699247ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zvP1CxiCG-ExTEDV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@blakesox?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Blake Wheeler</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="9596" class="kd ke iq bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">坦白地说</h2><p id="4609" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">你知道我们有四种出版物吗？通过<a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lb ir">plain English . io</strong></a>—关注我们的出版物并<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lb ir">订阅我们的YouTube频道</strong> </a> <strong class="lb ir">来表达你的爱吧！</strong></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="ded4" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="fb05" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">在本文中，我们将研究编写循环和函数(如循环长度、嵌套和返回)的最佳实践。</p><h1 id="e30b" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">让我们的循环足够短，以便一次查看所有内容</h1><p id="5a6f" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">我们的循环应该很短，这样就可以在页面上看到整个事情。</p><p id="57e1" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">不然太长了，要分手。</p><h1 id="bc4f" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">将嵌套限制在3层</h1><p id="8bd3" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">嵌套通常会使我们的代码更难阅读。因此，我们可以将它限制在最多3级。</p><p id="0376" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">除此之外，它太多了，我们应该通过将一些代码放入函数中来消除它们。</p><h1 id="561a" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">将长循环的循环内部移到函数中</h1><p id="0799" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">如果我们有一个长循环，这意味着我们必须把代码分成更小的函数。</p><p id="4a9d" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">小函数和循环更容易阅读，所以我们应该编写它们，而不是把所有东西都放在一个大循环中。</p><h1 id="315e" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">让长循环特别清晰</h1><p id="210e" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">如果我们不能避免长循环，那么我们应该尽可能地使它们清晰。</p><p id="f866" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">否则，我们将很难读懂自己的代码。</p><h1 id="9c60" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">循环和数组之间的对应关系</h1><p id="a6a0" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">循环和数组通常是相关的。许多循环用于操作数组。</p><p id="1ff7" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">循环计数器变量因此与数组索引一一对应。</p><p id="f278" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">然而，使用JavaScript，我们并不总是需要编写循环来进行数组操作。</p><p id="b4f1" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">例如，<code class="fe mx my mz na b">Array</code>构造函数中有许多方法可以用来创建循环。</p><p id="4a97" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">我们可以使用<code class="fe mx my mz na b">map</code>通过向数组中传递一个回调来将每个数组条目映射到新值。</p><p id="fb48" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">例如，我们可以用它来计算数组中所有数字的平方，如下所示:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="a1a5" class="kd ke iq na b gy nj nk l nl nm">const arr = [1, 2, 3];<br/>const result = arr.map(a =&gt; a ** 2);</span></pre><p id="333e" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">还有一个<code class="fe mx my mz na b">filter</code>方法，用于返回一个数组，该数组包含满足某些给定条件的条目。</p><p id="c090" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">我们可以找到数组中的所有偶数，如下所示:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="ed50" class="kd ke iq na b gy nj nk l nl nm">const arr = [1, 2, 3];<br/>const result = arr.filter(a =&gt; a % 2 === 0);</span></pre><p id="8573" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">同样，为了搜索一个数组项，我们可以使用如下的<code class="fe mx my mz na b">find</code>方法:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="119d" class="kd ke iq na b gy nj nk l nl nm">const arr = [1, 2, 3];<br/>const result = arr.find(a =&gt; a % 2 === 0);</span></pre><p id="17f0" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">上面的代码将找到数组中的第一个偶数。</p><p id="3602" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">除了写出循环，我们还可以使用更多的方法。</p><p id="98f1" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">在使用循环之前，我们可能需要考虑这些因素。</p><h1 id="1d6c" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">一个函数的多次返回</h1><p id="33e5" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">在JavaScript中，我们不必在函数结束时退出函数。</p><p id="395f" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">我们可以使用<code class="fe mx my mz na b">return</code>关键字来停止该功能。</p><p id="b8a8" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">例如，我们可以这样写:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="9edd" class="kd ke iq na b gy nj nk l nl nm">const fn = () =&gt; {<br/>  if (invalid) {<br/>    return;<br/>  }<br/>  //...<br/>  return {<br/>    //...<br/>  }<br/>}</span></pre><p id="3128" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">在上面的例子中，当<code class="fe mx my mz na b">invalid</code>设置为<code class="fe mx my mz na b">true</code>时，我们可以停止该功能。</p><p id="7a45" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">这让我们通过减少嵌套来清理代码。</p><h1 id="c28f" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">当回车增强可读性时使用它</h1><p id="4f93" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">我们可以添加<code class="fe mx my mz na b">return</code>语句来增强可读性。</p><p id="8ed9" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">正如我们所看到的，当满足某些条件时，停止一个函数是很有用的。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/7761323ba56a3bdd548edfc14237b988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E-WxWSOHLG0rfllT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@apchf?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jean Colet</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="cc67" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">使用Guard子句简化复杂的错误处理</h1><p id="9a8c" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">从上面的例子可以看出，我们可以提前返回。</p><p id="d87d" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">让我们提前停止运行函数的一组代码称为guard子句。</p><p id="435d" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">例如，在上面的函数中:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="b5e9" class="kd ke iq na b gy nj nk l nl nm">const fn = () =&gt; {<br/>  if (invalid) {<br/>    return;<br/>  }<br/>  //...<br/>  return {<br/>    //...<br/>  }<br/>}</span></pre><p id="c2b8" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">以下是警卫条款:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="c8f9" class="kd ke iq na b gy nj nk l nl nm">if (invalid) {<br/>  return;<br/>}</span></pre><p id="7623" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">这比写类似这样的东西要好得多:</p><pre class="nb nc nd ne gt nf na ng nh aw ni bi"><span id="ceaf" class="kd ke iq na b gy nj nk l nl nm">const fn = () =&gt; {<br/>  if (!invalid) {<br/>    //...<br/>    return {<br/>      //...<br/>    }<br/>  }<br/>}</span></pre><p id="5658" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">做同样的事情，但是有更多的巢。</p><p id="023c" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">嵌套很难理解，而guard子句让我们避免嵌套。</p><h1 id="8d78" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">最小化每个函数中的返回次数</h1><p id="e3f9" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">保护条款很棒，但是我们不应该太频繁地使用它们。</p><p id="6d77" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">代码中的return语句越多，就越难理解。</p><h1 id="7a8f" class="mg ke iq bd kf mh mi mj ki mk ml mm kl mn mo mp kp mq mr ms kt mt mu mv kx mw bi translated">结论</h1><p id="149f" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">嵌套在循环或函数中是不好的，所以我们应该减少它们。</p><p id="76b0" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">在函数中，我们可以用return语句减少嵌套。在某些情况下，我们可以在最后一行之前返回一个函数。</p><p id="e60c" class="pw-post-body-paragraph kz la iq lb b lc mb le lf lg mc li lj km md ll lm kq me lo lp ku mf lr ls lt ij bi translated">除了循环，我们还可以使用数组方法来进行数组操作。</p></div></div>    
</body>
</html>
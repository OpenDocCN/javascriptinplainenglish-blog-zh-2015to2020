<html>
<head>
<title>How to Scrape a Website using Node.js &amp; Use Node.js and React to Create a Web Scraper</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js抓取网站&amp;使用Node.js和React创建一个网页抓取器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-web-scraping-and-how-to-scrap-a-website-using-node-6e82da37b3f5?source=collection_archive---------1-----------------------#2020-12-17">https://javascript.plainenglish.io/what-is-web-scraping-and-how-to-scrap-a-website-using-node-6e82da37b3f5?source=collection_archive---------1-----------------------#2020-12-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="1900" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">什么是网页抓取简单来说:</strong></h1><p id="520a" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">网络抓取是从目标网站提取数据的技术。帮助你抓取数据的一段代码被称为刮刀。在这篇文章中，我们将了解一个现实生活中的web scraper的例子。这个刮刀的工作演示可以为您提供源代码。先了解一下，再在现实生活中检验。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/96b92afaaa7b48248b594a7816006f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XkZNV3PLfl-VYiRusTXMUg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">source: <a class="ae lw" href="https://www.promptcloud.com/blog/what-is-web-scraping/" rel="noopener ugc nofollow" target="_blank">https://www.promptcloud.com/blog/what-is-web-scraping/</a></figcaption></figure><h1 id="94e6" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">如何用Node刮一个网站？如何使用Node和React创建Web Scraper？</h1><p id="fa28" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">例如，我们正在寻找工作，市场上有很多求职平台，如<a class="ae lw" href="https://www.stepstone.de/en/" rel="noopener ugc nofollow" target="_blank"><strong class="kk io">step stone . de</strong>T5、</a><a class="ae lw" href="https://de.indeed.com/?r=us" rel="noopener ugc nofollow" target="_blank"><strong class="kk io">indeed.com</strong></a>和<strong class="kk io"/><a class="ae lw" href="https://www.monster.de/" rel="noopener ugc nofollow" target="_blank"><strong class="kk io">monster . de</strong></a>。假设我们正在柏林寻找PHP开发人员的工作。我们不想访问每一个求职平台，搜索相同的工作。相反，我们创建了一个job scraper，它将为我们完成这项工作，并将这三个目标网站的结果返回给我们(<a class="ae lw" href="https://www.stepstone.de/en/" rel="noopener ugc nofollow" target="_blank"> stepstone.de </a>、<a class="ae lw" href="https://de.indeed.com/?r=us" rel="noopener ugc nofollow" target="_blank">indeed.com</a>和<a class="ae lw" href="https://www.monster.de/" rel="noopener ugc nofollow" target="_blank"> monster.de </a>)。多酷啊！</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lx"><img src="../Images/314ea48bf736719b06ac081f30f394b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U97nVZnOfVNsIjVtUKmmBg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk"><a class="ae lw" href="https://jobsearchportal.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://jobsearchportal.herokuapp.com/</a></figcaption></figure><p id="4165" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">在本教程中，我将使用<a class="ae lw" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io"> Node.js </strong> </a>作为后端，使用<a class="ae lw" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io"> React.js </strong> </a>作为前端应用。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi md"><img src="../Images/3df5a573067d98cdaf9370ca0bfb7105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0BVVeJzbkAK_zOvnr1Gkw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">User Input form for searching jobs</figcaption></figure><p id="17b9" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">用户在输入表单中输入<strong class="kk io">职位</strong>和<strong class="kk io">职位</strong>并点击<strong class="kk io">查找职位</strong>按钮。幕后发生的事情很有意思。当用户单击按钮时，post请求被发送到节点服务器，其中包含用户输入。在节点服务器代码中，我们使用三个目标网站的用户输入创建了三个自定义URL，如下所示。</p><p id="77f5" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><a class="ae lw" href="https://gitlab.com/hammad038/jsp/-/blob/master/routes/api/jobs.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">链接到文件</strong> </a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi me"><img src="../Images/f0c8ee0f6288ffb132bcf7f91f51d752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cq68HOfhlDlLshqfOgwIIg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Custom URL queries for Monster, Indeed and StepStone</figcaption></figure><p id="4454" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">这些网址只会帮助我们刮目标网站的第一页上列出的工作结果。为了获得更多的结果，我们肯定可以研究URL参数，这将在目标网站的每个页面上给我们更多的结果。</p><p id="9442" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">现在我们将使用一个<a class="ae lw" href="https://en.wikipedia.org/wiki/Npm_(software)" rel="noopener ugc nofollow" target="_blank"> npm </a>包<a class="ae lw" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>向这三个URL发送一个HTTP请求，它将返回目标网站的HTML主体作为响应。现在我们将使用另一个包，<a class="ae lw" href="https://www.npmjs.com/package/cheerio" rel="noopener ugc nofollow" target="_blank"> cheerio </a>，它是core <a class="ae lw" href="https://jquery.com/" rel="noopener ugc nofollow" target="_blank"> jQuery </a>的子集，它将帮助我们收集相关数据。然后将作业添加到一个全局变量<strong class="kk io"> jobsData中。</strong>完成对所有目标网站的抓取后，节点服务器将<strong class="kk io"> jobsData </strong>返回给前端React应用。</p><p id="3995" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">我在Axios上使用ES6 promises发送了三个HTTP请求。当所有三个请求都完成时，它返回<strong class="kk io"> queryHtml </strong>作为响应。响应queryHtml是一个包含三项的数组:<code class="fe mf mg mh mi b">queryHtml[0].data</code>是Monster的Html，类似地<code class="fe mf mg mh mi b">queryHtml[1].data</code>和<code class="fe mf mg mh mi b"> queryHtml[2].data</code>包含了Indeed和StepStone的HTML字符串。然后将这3个数组项传递给cheerio.load，将它们解析成HTML，这样我们就可以在后面的步骤中获取所需的数据。</p><p id="83ca" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><a class="ae lw" href="https://gitlab.com/hammad038/jsp/-/blob/master/routes/api/jobs.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">链接到文件</strong> </a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mj"><img src="../Images/78e3cbf62d8665cfa616447e8234e529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWvEyRY17U3deCFMcUKGNw.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">HTTP request to Monster, Indeed and StepStone</figcaption></figure><p id="2cab" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">仅供参考，我已经向您展示了Monster.de求职结果页面。在这里，我们可以在浏览器检查模式下看到标题、发布日期、公司和其他相关信息的DOM元素结构。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mk"><img src="../Images/5db2a39447e62b586562d69385eb8f20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcsqck2KsJmtL0otWNFsmg.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">DOM element of Monster.de for Job Search Results</figcaption></figure><p id="94b2" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">函数<strong class="kk io"> getMonsterJobs </strong>将得到两个参数。第一个参数<strong class="kk io"> $ </strong>是cheerio准备的DOM，第二个参数<strong class="kk io"> source </strong>是目标网站怪物。要理解下面给出的这个函数，您应该具备jQuery的基本知识。在收集了关于作业的所需信息后，我们将这个新作业添加到<strong class="kk io"> jobsData </strong>全局对象中。我们将对Indeed和StepStone执行相同的分析，并将创建函数<strong class="kk io">getindexedjobs</strong>和<strong class="kk io"> getStepStoneJobs </strong>，并将作业结果添加到jobsData全局对象中。</p><p id="6276" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><a class="ae lw" href="https://gitlab.com/hammad038/jsp/-/blob/master/routes/api/jobs.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">链接到文件</strong> </a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ml"><img src="../Images/06cfc8d86f4c89e8bb8d5c496629b42d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dboX5Ir317nIQGjGS4iXXQ.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">DOM elements scraping functions for Monster, Indeed and StepStone</figcaption></figure><p id="87c3" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">所以让我们回到前端应用程序，试着看看节点服务器在抓取后的响应是如何显示在前端的。当用户提交带有职位和工作地点的求职表单时，将执行以下代码。</p><p id="406f" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><a class="ae lw" href="https://gitlab.com/hammad038/jsp/-/blob/master/client/src/components/JobSearch.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">链接到文件</strong> </a></p><pre class="lh li lj lk gt mm mi mn mo aw mp bi"><span id="eb11" class="mq jl in mi b gy mr ms l mt mu">onSubmit = (e) =&gt; {<br/>  e.preventDefault();<br/>  const {jobTitle, jobLocation} = this.state;<br/>  const userInput = {jobTitle, jobLocation}<br/>  this.setState({loading: true});<br/><br/>  axios<br/>    .post('/api/jobs', userInput)<br/>    .then(res =&gt; {<br/>      this.setState({<br/>        jobsData: res.data.jobsData,<br/>        loading: false<br/>      });<br/>    })<br/>    .catch(err =&gt; <em class="mv">console</em>.log(err));<br/>}</span></pre><p id="cd83" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">以下代码在名为<strong class="kk io"> JobSearch </strong>的类组件中的React应用程序中执行。它包含状态<strong class="kk io">作业数据</strong>和<strong class="kk io">加载</strong>。在提交表单时，一个HTTP post请求被发送到包含<strong class="kk io"> userInput </strong> (jobTitle和jobLocation)的节点服务器。作为回应，我们得到了粗略的就业数据。然后，我们更新组件中的状态<strong class="kk io"> jobsData </strong>。<strong class="kk io"> loading </strong>状态被设置为true以显示微调器以获得良好的用户体验，并且在我们从节点服务器获得响应后被设置回false。现在我们的州有了<strong class="kk io"> jobsData </strong>，我们将它作为道具传递给子组件<strong class="kk io"> JobCard </strong> ( <a class="ae lw" href="https://gitlab.com/hammad038/jsp/-/blob/master/client/src/components/JobCard.js" rel="noopener ugc nofollow" target="_blank">链接到文件</a>)。该组件以卡片的形式显示搜索结果。</p><p id="f1bd" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><a class="ae lw" href="https://jobsearchportal.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">演示</strong> </a>和<strong class="kk io">源代码</strong>正在等着你，所以看看它们，请让我知道它是否有助于你理解网页抓取。</p><h1 id="70f0" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">关于作者</h1><p id="7e54" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我在<a class="ae lw" href="https://medium.com/u/cb727ce3b3c0?source=post_page-----4ef4ecbdcc1b--------------------------------" rel="noopener"> Lucid担任全栈开发人员。工作室</a>我非常有兴趣学习并与社区分享我的知识。如果你喜欢我的工作，那就在LinkedIn上联系我:Sayyed Hammad Ali 。</p><pre class="lh li lj lk gt mm mi mn mo aw mp bi"><span id="47e5" class="mq jl in mi b gy mr ms l mt mu"><em class="mv">// HASTA LA VISTA BABY<br/>//                      ______<br/>//                    &lt;((((((\\\<br/>//                    /      . }\<br/>//                    ;--..--._|}<br/>// (\                 '--/\--'  )<br/>//  \\                | '-'  :'|<br/>//   \\               . -==- .-|<br/>//    \\               \.__.'   \--._<br/>//    [\\          __.--|       //  _/'--.<br/>//    \ \\       .'-._ ('-----'/ __/      \<br/>//     \ \\     /   __&gt;|      | '--.       |<br/>//      \ \\   |   \   |     /    /       /<br/>//       \ '\ /     \  |     |  _/       /<br/>//        \  \       \ |     | /        /<br/>//         \  \      \        /</em></span></pre><h2 id="6f3d" class="mq jl in bd jm mw mx dn jq my mz dp ju kt na nb jy kx nc nd kc lb ne nf kg ng bi translated">进一步阅读</h2><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/top-5-instant-data-scraping-tools-for-easy-web-scraping-2f3d1c4b07f0"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">轻松抓取网页的五大即时数据抓取工具</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">光明数据，ParseHub，Apify，Octopase，Mozenda。有大量的即时网页抓取工具可供选择。如何挑选…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny lq nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/best-tool-for-web-scraping-beautifulsoup-vs-regex-vs-advanced-web-scrapers-50b8fb92950d"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">最佳网络抓取工具:beautiful soup vs . Regex vs . Advanced Web Scrapers</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">BeautifulSoup、正则表达式或高级web scraper——哪一个是web抓取的最佳工具？深潜…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny lq nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/overcoming-3-major-web-scraping-challenges-that-developers-face-1e664ffe4783"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">克服开发者面临的3大网络抓取挑战</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">如何克服3个主要的网络抓取限制—动态网站、网站交互和指纹管理…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="oa l nv nw nx nt ny lq nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a href="https://plainenglish.io/blog/5-use-cases-of-web-scraping-in-ecommerce" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">电子商务中网络抓取的5个用例</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">利用web scraper可以让您的组织鸟瞰行业趋势。这有无数…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">简明英语. io</p></div></div><div class="nt l"><div class="ob l nv nw nx nt ny lq nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/automate-web-scraping-with-an-easy-to-use-browser-extension-cb6073f1e61d"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">使用易于使用的浏览器扩展自动抓取网页</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">如何使用Listly，一个初学者友好的无代码工具，轻松实现web抓取过程的自动化。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="oc l nv nw nx nt ny lq nk"/></div></div></a></div><p id="178d" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><em class="mv">更多内容请看</em><a class="ae lw" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kk io"><em class="mv">plain English . io</em></strong></a><em class="mv">。报名参加我们的</em> <a class="ae lw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io"> <em class="mv">免费周报</em> </strong> </a> <em class="mv">。关注我们关于</em><a class="ae lw" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kk io"><em class="mv">Twitter</em></strong></a><a class="ae lw" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kk io"><em class="mv">LinkedIn</em></strong></a><em class="mv"/><a class="ae lw" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kk io"><em class="mv">YouTube</em></strong></a><em class="mv"/><a class="ae lw" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kk io"><em class="mv">不和</em> </strong> </a> <em class="mv">。</em></p></div></div>    
</body>
</html>
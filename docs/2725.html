<html>
<head>
<title>React Tips — Radio Buttons, Render HTML, and Initialize States</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—单选按钮、呈现HTML和初始化状态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-tips-radio-buttons-render-html-and-initialize-states-197e7e8a8c30?source=collection_archive---------7-----------------------#2020-07-18">https://javascript.plainenglish.io/react-tips-radio-buttons-render-html-and-initialize-states-197e7e8a8c30?source=collection_archive---------7-----------------------#2020-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9c5e21999d978fad922eaecfb41f8d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cUkCf4E2yB104Vum"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hdbernd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Bernd Dittrich</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="31ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="d57d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用React插入HTML</h1><p id="c34c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在React代码中插入HTML。</p><p id="61ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们使用了<code class="fe me mf mg mh b">dangerouslySetInnerHTNL</code>道具。</p><p id="2506" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e618" class="mq lc iq mh b gy mr ms l mt mu">render() {<br/>  return (<br/>    &lt;div dangerouslySetInnerHTML={{ __html: someHtml }}&gt;&lt;/div&gt;<br/>    );<br/>}</span></pre><p id="1707" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一个带有<code class="fe me mf mg mh b">__html</code>属性的对象来呈现原始HTML。</p><p id="f434" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">someHtml</code>是一个包含HTML内容的字符串。</p><h1 id="22f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从React组件中的Props初始化状态</h1><p id="2ae2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在构造函数中设置<code class="fe me mf mg mh b">this.state</code>来初始化React组件中props的状态。</p><p id="9fb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="dba8" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component {</span><span id="b465" class="mq lc iq mh b gy mv ms l mt mu">  constructor(props) {<br/>    super(props);</span><span id="896d" class="mq lc iq mh b gy mv ms l mt mu">    this.state = {<br/>      x: props.initialX<br/>    };<br/>  }<br/>  // ...<br/>}</span></pre><p id="b52d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">props</code>参数中获取道具，并将其设置为<code class="fe me mf mg mh b">this.state</code>的属性。</p><h1 id="9921" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">按Enter键后调用更改事件侦听器</h1><p id="5064" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要在按下enter键后调用一个<code class="fe me mf mg mh b">onChange</code>事件处理程序，我们可以监听keydown事件。</p><p id="834a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a0ca" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component {<br/>  handleKeyDown = (e) =&gt; {<br/>    if (e.key === 'Enter') {<br/>      console.log('entre pressed');<br/>    }<br/>  }</span><span id="7b65" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return &lt;input type="text" onKeyDown={this.handleKeyDown} /&gt;<br/>  }<br/>}</span></pre><p id="6e44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过将事件对象的<code class="fe me mf mg mh b">key</code>属性与一个字符串进行比较来检查它。</p><p id="480c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在函数组件中，我们可以编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="22e0" class="mq lc iq mh b gy mr ms l mt mu">const App = () =&gt; {<br/>  const handleKeyDown = (event) =&gt; {<br/>    if (event.key === 'Enter') {<br/>      console.log('enter pressed')<br/>    }<br/>  }</span><span id="b006" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;input type="text" onKeyDown={handleKeyDown} /&gt;<br/>}</span></pre><p id="9795" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">handleKeyDown</code>功能相同。</p><h1 id="f226" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">指定一个端口以运行基于create-react-app的项目</h1><p id="c94a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过设置<code class="fe me mf mg mh b">PORT</code>环境变量来改变create-react-app项目监听的端口。</p><p id="d281" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以添加:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1c7f" class="mq lc iq mh b gy mr ms l mt mu">"start": "PORT=3006 react-scripts start"</span></pre><p id="a62e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入<code class="fe me mf mg mh b">package.json</code>的<code class="fe me mf mg mh b">scripts</code>部分。</p><p id="d66b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Linux或Mac OS中。</p><p id="b6c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Windows中，我们可以放置:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="99f3" class="mq lc iq mh b gy mr ms l mt mu">"start": "set PORT=3006 &amp;&amp; react-scripts start"</span></pre><p id="96c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入<code class="fe me mf mg mh b">package.json</code>的<code class="fe me mf mg mh b">scripts</code>部分。</p><h1 id="38c0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在React中使用单选按钮</h1><p id="9297" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在单选按钮上设置值<code class="fe me mf mg mh b">onChange</code>事件监听器来使用带有React的单选按钮。</p><p id="911a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0035" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {};<br/>  }</span><span id="6b62" class="mq lc iq mh b gy mv ms l mt mu">  handleChange = e =&gt; {<br/>    const { name, value } = e.target;</span><span id="d1f1" class="mq lc iq mh b gy mv ms l mt mu">    this.setState({<br/>      [name]: value<br/>    });<br/>  };</span><span id="2cef" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        orange<br/>        &lt;input<br/>          id="orange"<br/>          value="orange"<br/>          name="fruit"<br/>          type="radio"<br/>          onChange={this.handleChange}<br/>        /&gt;<br/>        grape<br/>        &lt;input<br/>          id="grape"<br/>          value="grape"<br/>          name="fruit"<br/>          type="radio"<br/>          onChange={this.handleChange}<br/>        /&gt;<br/>        apple<br/>        &lt;input<br/>          id="apple"<br/>          value="apple"<br/>          name="fruit"<br/>          type="radio"<br/>          onChange={this.handleChange}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="d2e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了多个具有相同<code class="fe me mf mg mh b">name</code>属性的单选按钮。</p><p id="df7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以从所有按钮中选择一个。</p><p id="e849" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">handleChange</code>方法中，我们调用<code class="fe me mf mg mh b">setState</code>，将<code class="fe me mf mg mh b">e.target.name</code>作为键，将<code class="fe me mf mg mh b">e.target.value</code>作为值。</p><p id="f3d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这用单选按钮的<code class="fe me mf mg mh b">name</code>设置了状态，即<code class="fe me mf mg mh b">fruit</code>，其值将是<code class="fe me mf mg mh b">value</code>属性的值。</p><p id="d94c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于函数组件，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4bbe" class="mq lc iq mh b gy mr ms l mt mu">const useInput = (initialValue) =&gt; {<br/>  const [value, setValue] = useState(initialValue);</span><span id="fe62" class="mq lc iq mh b gy mv ms l mt mu">  function handleChange(e){<br/>    setValue(e.target.value);<br/>  }</span><span id="c81e" class="mq lc iq mh b gy mv ms l mt mu">  return [value, handleChange];<br/>}</span><span id="e40e" class="mq lc iq mh b gy mv ms l mt mu">function App() {<br/>  const [fruit, setFruit] = useInput("");</span><span id="4ef6" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;form&gt;<br/>      &lt;div&gt;<br/>        &lt;input type="radio" id='apple' value='apple'<br/>        checked={fruit === 'apple'} onChange={setFruit}/&gt;<br/>        &lt;label&gt;apple&lt;/label&gt;<br/>      &lt;/div&gt;<br/>      &lt;div&gt;<br/>        &lt;input type="radio" id='orange' value='orange'<br/>        checked={fruit === 'orange'} onChange={setFruit}/&gt;<br/>        &lt;label&gt;orange&lt;/label&gt;<br/>       &lt;/div&gt;<br/>       &lt;div&gt;<br/>        &lt;input type="radio" id='grape' value='grape'<br/>        checked={fruit === 'grape'} onChange={setFruit}/&gt;<br/>        &lt;label&gt;grape&lt;/label&gt;<br/>       &lt;/div&gt;<br/>     &lt;/form&gt;<br/>  )<br/>}</span></pre><p id="a0bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们以同样的方式创建了单选按钮，但是我们创建了自己的<code class="fe me mf mg mh b">useInput</code>钩子来使变更处理逻辑可重用。</p><p id="1e85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在钩子中，我们使用了<code class="fe me mf mg mh b">useState</code>方法来设置状态。</p><p id="2962" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们返回<code class="fe me mf mg mh b">value</code>，它总是有最新的值，和<code class="fe me mf mg mh b">handleChange</code>，它有我们的事件处理函数。</p><p id="c463" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在我们的<code class="fe me mf mg mh b">App</code>组件中使用了<code class="fe me mf mg mh b">useInput</code>钩子的返回值。</p><p id="1448" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传递了<code class="fe me mf mg mh b">setFruit</code>处理函数，它作为数组的第二个条目返回给<code class="fe me mf mg mh b">onChange</code>属性。</p><p id="6ec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们单击按钮时，该值将被设置。</p><p id="3098" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也有<code class="fe me mf mg mh b">checked</code>属性来用正确的<code class="fe me mf mg mh b">checked </code>值呈现按钮。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/66be1ad7bc7801887fd0be664301aa0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8SviezzcaIiv_Q-L"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@aletransportes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">ALE SAT</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8600" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3714" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用传递给<code class="fe me mf mg mh b">onChange</code> prop的处理函数来设置单选按钮的值。</p><p id="32aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须将它们的<code class="fe me mf mg mh b">name</code>属性设置为相同。</p><p id="6f88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了呈现原始HTML，我们将一个对象传递到<code class="fe me mf mg mh b">dangerouslySetInnerHTML</code> prop中。</p><p id="411f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以用道具初始化状态。</p><p id="acd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行我们的create-react-app项目的端口可以改变。</p><h2 id="2302" class="mq lc iq bd ld mx my dn lh mz na dp ll ko nb nc lp ks nd ne lt kw nf ng lx nh bi translated">简单英语的JavaScript</h2><p id="af1d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅解码，我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting Started with Deno</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-deno-70cfe3f8a3a0?source=collection_archive---------7-----------------------#2020-05-14">https://javascript.plainenglish.io/getting-started-with-deno-70cfe3f8a3a0?source=collection_archive---------7-----------------------#2020-05-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2475da820e0d66605582f1b6a0e62eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GiUadxv7zAA7f0KQBMX-hQ.png"/></div></div></figure><p id="963d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">TLDR: 未来几十年，Deno可能会取代Node。所以十年后再回来。不然，我们还是第一吧！</p><h1 id="5e5d" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">什么是德诺？</h1><p id="73e9" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">Deno是一个带有安全默认值的JavaScript(和TypeScript)运行时。和Node.js一样，也是基于V8构建的。</p><h1 id="14a2" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">为什么是德诺？</h1><ul class=""><li id="a16b" class="lw lx in jx b jy lr kc ls kg ly kk lz ko ma ks mb mc md me bi translated">Deno在默认情况下是安全的。与节点不同，您必须指定系统访问，如文件、网络、环境访问等。</li><li id="e18e" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">它支持现成的TypeScript。因此，您不需要单独安装TypeScript编译器。</li><li id="e8c5" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">还有很多。最后但同样重要的是，它是由十年前创建Node.js的同一个人Ryan Dahl创建的。因此，如果他决定创造一个新的，这将意味着……好吧，你自己弄清楚了。如果你有3000万的空闲时间，看看他的<a class="ae mk" href="https://www.youtube.com/watch?v=M3BM9TB-8yA" rel="noopener ugc nofollow" target="_blank">演讲</a>关于他对Node.js后悔的10件事</li></ul><h1 id="9dca" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">装置</h1><p id="ee55" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">既然你信服了，那我们就打开一个终端，安装那个东西吧。您可以通过多种方式安装，请查阅此官方<a class="ae mk" href="https://deno.land/manual/getting_started/installation" rel="noopener ugc nofollow" target="_blank">文件</a>。</p><p id="17d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你在macOS(或Linux)上，运行这个`<strong class="jx io">curl-fsSL</strong><a class="ae mk" href="https://deno.land/x/install/install.sh" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://deno.land/x/install/install.sh</strong></a><strong class="jx io">| sh</strong>`和运行这个`<strong class="jx io">iwr</strong><a class="ae mk" href="https://deno.land/x/install/install.ps1" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://deno.land/x/install/install.ps1</strong></a><strong class="jx io">-useb | iex</strong>`如果你在Windows上。</p><h1 id="7675" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">配置VS代码</h1><p id="bf14" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我喜欢VS代码。所以如果你在同一个团队，安装这个<a class="ae mk" href="https://marketplace.visualstudio.com/items?itemName=axetroy.vscode-deno" rel="noopener ugc nofollow" target="_blank">插件</a>来获得Deno完整的智能感知支持和更多。</p><blockquote class="ml mm mn"><p id="438a" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">请在安装后重新启动或重新加载IDE。</p></blockquote><h1 id="93fa" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">你的第一个程序</h1><p id="8d8e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">让我们创建您著名的HelloWorld应用程序。你可能已经猜到了，创建`<strong class="jx io"> index.ts </strong>`并编写`<strong class="jx io">console . log(' hello Deno ')；</strong></p><p id="a913" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要运行它，请在您的终端上运行`<strong class="jx io"> Deno run index.ts </strong>`命令</p><blockquote class="ml mm mn"><p id="5b01" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">编译文件:///Users/ABC/side-projects/deno-app/index . ts</p><p id="783a" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">你好德诺</p></blockquote><p id="dad9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好吧，我们再跑一次</p><blockquote class="ml mm mn"><p id="5667" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">你好德诺</p></blockquote><p id="c984" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你注意到在第二次输出中，没有`<strong class="jx io">编译… </strong>`行，是吗？嗯，是因为Deno检测到你运行的是同一个源代码，而且已经编译过一次了。Deno刚刚执行了缓存中的二进制文件。好吧，如果你怀疑，编辑文件并再次运行。</p><h1 id="7269" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">沙盒安全性</h1><p id="de34" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">据说Deno默认是安全的。我们来测试一下。打开一个新的终端，运行这个命令`<strong class="jx io">deno run</strong><a class="ae mk" href="https://deno.land/std/examples/curl.ts" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://deno.land/std/examples/curl.ts</strong></a><strong class="jx io"/><a class="ae mk" href="https://example.com" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://example.com</strong></a></p><blockquote class="ml mm mn"><p id="260f" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">祝贺你，你得到了你的第一个错误。一分耕耘一分收获。</p><p id="b112" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">错误:未捕获的权限被拒绝:对“https://example.com/”的网络访问，请使用— allow-net标志再次运行</p></blockquote><p id="7535" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，在默认情况下，Deno无法访问系统资源，在这种情况下，访问网络。要解决它，你用`<strong class="jx io"> — allow-net </strong> ` flag为`<strong class="jx io">Deno run—allow-net</strong><a class="ae mk" href="https://deno.land/std/examples/curl.ts" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://deno.land/std/examples/curl.ts</strong></a><strong class="jx io"/><a class="ae mk" href="https://example.com" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">https://example.com</strong></a>`赋予Deno特权</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><h1 id="1788" class="kt ku in bd kv kw mz ky kz la na lc ld le nb lg lh li nc lk ll lm nd lo lp lq bi translated">创建您的第一个服务器应用程序</h1><p id="c2fe" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们将创建一个聊天应用程序。</p><p id="639d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建`<strong class="jx io"> chat.ts </strong>`并粘贴以下代码。</p><figure class="ne nf ng nh gt jo"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Your first module in Deno — chat.ts</figcaption></figure><p id="0a34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们从Deno提供的标准库导入模块(<strong class="jx io"> WebSocket </strong>、<strong class="jx io"> isWebSocketCloseEvent </strong>和<strong class="jx io"> v4 </strong>)。</p><blockquote class="ml mm mn"><p id="93e0" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">您可以从任何第三方导入任何模块，只需指定这样的URL(不再需要package.json)。建议指定您正在导入的模块的版本，在本例中为`<strong class="jx io"> 0.51.0 </strong>`。这种进口模式的灵感来自我们的gopher，Golang。</p></blockquote><p id="2443" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">`<strong class="jx io">广播</strong>功能用于向注册用户“广播”消息。</p><p id="175e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">`<strong class="jx io">聊天</strong>功能</p><ul class=""><li id="660d" class="lw lx in jx b jy jz kc kd kg no kk np ko nq ks mb mc md me bi translated">首先，它向用户注册存储器`<strong class="jx io">映射图</strong>`,并通知其他用户新用户加入了聊天</li><li id="3bfc" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">接下来，它创建一个循环事件来等待任何WebSocket事件，如果是合法事件，就广播消息。</li><li id="f2ad" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">如果用户关闭WebSocket客户端，从内存中删除该用户，并通知团队。</li></ul><p id="a33f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，创建`<strong class="jx io"> server.ts </strong>`并粘贴以下代码</p><figure class="ne nf ng nh gt jo"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">Main program — server.ts</figcaption></figure><p id="fd79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同样，我们使用Deno提供的标准模块。</p><ul class=""><li id="e0eb" class="lw lx in jx b jy jz kc kd kg no kk np ko nq ks mb mc md me bi translated">它监听端口3000，并返回`<strong class="jx io">index.html</strong>'请求`<strong class="jx io">获取</strong>'</li><li id="6d04" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">然后，它将路径请求`<strong class="jx io"> /ws </strong>的连接升级为套接字连接，并调用我们从之前编写的`<strong class="jx io"> chat.ts </strong>导出的`<strong class="jx io"> chat </strong>函数。</li></ul><p id="745e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我们简单的前端代码“T0”index.html。</p><figure class="ne nf ng nh gt jo"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">our humble simple frontend</figcaption></figure><p id="fe6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要运行服务器，请打开一个新的终端并键入以下命令`<strong class="jx io">deno run—allow-net server . ts</strong></p><p id="e671" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注</strong>:第一次运行时，从网上下载模块并缓存。</p><blockquote class="ml mm mn"><p id="8ddd" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">编译文件:///Users/asial/side-projects/deno-chat-app/server . ts</p><p id="8b8b" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">下载<a class="ae mk" href="https://deno.land/std@v0.51.0/http/server.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/std@v0.51.0/http/server.ts</a></p><p id="ba43" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated">下载<a class="ae mk" href="https://deno.land/std@v0.51.0/ws/mod.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/std@v0.51.0/ws/mod.ts</a></p><p id="8092" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi">…</p></blockquote><p id="bb8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">服务器运行后，打开新的浏览器并导航到`<strong class="jx io"> http://0.0.0.0:3000 </strong></p><p id="2f3f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">什么？？？什么都不显示！我做错了什么？</p><p id="ca56" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很高兴你问了。</p><p id="25d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您从终端检查日志，它应该会报错有“<strong class="jx io">读访问权限</strong>”的内容。当我们从程序中读取`<strong class="jx io">index.html</strong>文件时，我们还需要在运行时指定`<strong class="jx io"> —允许读取</strong>标志。</p><p id="dcbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以让我们再运行一次`<strong class="jx io">deno run—allow-net—allow-read server . ts</strong></p><p id="7bfe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，它应该工作正常。在此逗留期间，多打开几个浏览器，和自己聊天。</p><p id="036e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望你们喜欢它！这里是Github <a class="ae mk" href="https://github.com/yong-asial/deno-chat-app" rel="noopener ugc nofollow" target="_blank">回购</a>。</p><h2 id="ee96" class="nr ku in bd kv ns nt dn kz nu nv dp ld kg nw nx lh kk ny nz ll ko oa ob lp oc bi translated">简明英语笔记</h2><p id="52e4" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">你知道我们推出了一个YouTube频道吗？我们制作的每个视频都旨在教给你一些新的东西。点击此处 查看我们，并确保订阅该频道😎</p></div></div>    
</body>
</html>
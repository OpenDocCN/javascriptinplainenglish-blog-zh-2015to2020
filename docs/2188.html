<html>
<head>
<title>You Might Not Need UUID V4 for Generating Random Identifiers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您可能不需要UUID版本4来生成随机标识符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/you-might-not-need-uuid-v4-for-generating-random-identifiers-89e8a28a7d77?source=collection_archive---------1-----------------------#2020-05-28">https://javascript.plainenglish.io/you-might-not-need-uuid-v4-for-generating-random-identifiers-89e8a28a7d77?source=collection_archive---------1-----------------------#2020-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="9262" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">图书馆发现</h2><div class=""/><div class=""><h2 id="095e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">对于每一个决定，一定要理解你为什么要做这个决定，因为你可能有另一个聪明的方法来实现同样的目标。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/3cfeef86b19c8af6a1951f5127b25c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BiI-3oDAZAVWSHoL696GSA.png"/></div></div></figure><p id="2ad1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">对于许多应用程序，您可能需要生成某种惟一的标识符，以便能够获得对特定内容的引用。</p><p id="b326" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它可以用于各种场景，一个前端列表，一个后端数据库行标识符，或者其他什么，你只需要一些随机散列…</p><p id="669e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为了实现这个目标，我们有两种技术和开发人员:</p><ol class=""><li id="7d8e" class="lw lx iq lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated"><strong class="lc ja">初学者。</strong>它只是尝试一种自制的算法，该算法基于一些伪随机函数结果(如<code class="fe mf mg mh mi b">Math.random</code>)或可能使用时间戳的十六进制表示来挑选字母和数字。</li><li id="f309" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv mb mc md me bi translated"><strong class="lc ja">普通的开发者。</strong>使用某种久经考验的ID算法，比如著名的UUID v4，它允许生成36个字符的字符串(包括4个破折号字符)。</li></ol><p id="cf6e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这是我刚刚生成的随机UUID<code class="fe mf mg mh mi b">123e4567-e89b-12d3-a456–556642440000</code></p><p id="1e43" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">好吧，虽然第一个可以很好地工作在小应用程序上。由于算法简单，它有许多缺点，可能导致ID冲突。</p><p id="5bce" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">另一方面，第二个版本很好地解决了冲突问题，但是太长了:36个字符！</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="e3b6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">文章的下一部分将会让你思考文章的中心问题:<strong class="lc ja">你的用例是什么，为什么你需要一个标识符？</strong></p><h1 id="1eb4" class="mv mw iq bd mx my mz na nb nc nd ne nf kf ng kg nh ki ni kj nj kl nk km nl nm bi translated">好的标识符有什么要求？</h1><ul class=""><li id="b637" class="lw lx iq lc b ld nn lg no lj np ln nq lr nr lv ns mc md me bi translated">快速生成，这样你就可以用很少的成本生成大量的ID。</li><li id="ea60" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv ns mc md me bi translated"><strong class="lc ja">统一</strong>，防止在敏感数据如代金券或预付费代金券的情况下进行暴力破解。</li><li id="388f" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv ns mc md me bi translated"><strong class="lc ja">安全</strong>，以避免会删除标识符“唯一”字符的冲突。</li><li id="42e6" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv ns mc md me bi translated">变得<strong class="lc ja">不可预测</strong>，以防再次安全。但有时你希望它…像数据完整性检查。</li><li id="e2de" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv ns mc md me bi translated">它也可以是<strong class="lc ja"> URL友好的，</strong>在URL的GET参数中使用它作为电子邮件验证标记。</li><li id="7c4c" class="lw lx iq lc b ld mj lg mk lj ml ln mm lr mn lv ns mc md me bi translated">如果它可以变得很小，那也是一件很棒的事情，所以你可以用很小的成本把它放到你的网络应用中:)</li></ul><h1 id="0469" class="mv mw iq bd mx my mz na nb nc nd ne nf kf ng kg nh ki ni kj nj kl nk km nl nm bi translated">为什么我们首先需要唯一标识符？</h1><p id="259f" class="pw-post-body-paragraph la lb iq lc b ld nn ka lf lg no kd li lj nt ll lm ln nu lp lq lr nv lt lu lv ij bi translated">嗯，一切都是关于那个问题，你可能知道答案是:<strong class="lc ja">视情况而定！</strong></p><p id="1c27" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">第一种技术的优点在于，开发人员可以控制散列长度，但有冲突的风险。使用第二种技术，用户几乎没有冲突风险，但几乎无法控制散列的长度。</p><p id="9b1c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">经验法则:哈希冲突的风险是哈希长度和每个字符所用字典的函数。</p><p id="5492" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">请记住，您拥有的字符越多，生成散列所需的时间就越长，用户阅读它就越困难。这在您以常规方式生成数千个散列的情况下也是有问题的，比如一个集中的交易平台识别订单。</p><p id="f960" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">出于各种原因，大多数时候你不需要36个字符长的哈希</strong>。您可能会生成前端哈希，这些哈希仅用于在本地保存一些数据或用于react列表协调算法。</p><blockquote class="nw nx ny"><p id="7283" class="la lb nz lc b ld le ka lf lg lh kd li oa lk ll lm ob lo lp lq oc ls lt lu lv ij bi translated">通过简单地使用9个字符的散列和适当的算法，以1000个散列/小时的速度，将需要大约2年的时间才能有1%的概率发生至少一次碰撞。</p></blockquote><p id="819a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">这比使用UUID v4小4倍。你觉得这对你的案子来说够了吗？</strong></p><p id="a3d4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">大概吧。</p><h1 id="5514" class="mv mw iq bd mx my mz na nb nc nd ne nf kf ng kg nh ki ni kj nj kl nk km nl nm bi translated">欢迎Nano-id，一个小巧、安全、URL友好的独特字符串生成器</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi od"><img src="../Images/2aee1472a52a47c54477b0326899a441.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*G-eE5bEhwevAcwF7R-NJmw.png"/></div></figure><p id="edf1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">今天，我想分享一个库，它可以帮助你满足我们上面谈到的要求，而且还能让你根据自己的使用情况简单地调整算法。</p><p id="deaf" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你可以在这里得到它<a class="ae oe" href="https://github.com/ai/nanoid" rel="noopener ugc nofollow" target="_blank">https://github.com/ai/nanoid</a></p><p id="2906" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">首先，我想和你分享下面这个游戏，它可以帮助你了解碰撞的风险，它写得很好，也很容易使用。</p><div class="of og gp gr oh oi"><a href="https://zelark.github.io/nano-id-cc/" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ja gy z fp on fr fs oo fu fw iz bi translated">纳米ID CC</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">Nano ID是一个用于生成随机ID的库。同样，UUID也有可能出现重复的ID。然而，这…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">zelark.github.io</p></div></div></div></a></div><p id="4374" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">文档非常清楚，所以我不会在这里给你很多例子。</p><p id="eeea" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">简而言之，<code class="fe mf mg mh mi b">nano-id</code>是一个小的npm包，适用于NodeJS、web app、react-native以及许多编程语言。</p><pre class="kp kq kr ks gt or mi os ot aw ou bi"><span id="fd09" class="ov mw iq mi b gy ow ox l oy oz">import { nanoid } from "nanoid";<br/>model.id = nanoid() //=&gt; "V1StGXR8_Z5jdHi6B-myT"</span></pre><p id="d1b7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你也可以指定你想要的字符数，这样你就可以调整你的散列。</p><pre class="kp kq kr ks gt or mi os ot aw ou bi"><span id="3a57" class="ov mw iq mi b gy ow ox l oy oz">nanoid(9); //=&gt; "wMeKBp6th"</span></pre><p id="b444" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">而默认这是一个网址友好的<code class="fe mf mg mh mi b">0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz-</code></p><p id="5e22" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果您有特定的需求，您也可以将用于生成散列的字母表更改为您自己的字母表</p><pre class="kp kq kr ks gt or mi os ot aw ou bi"><span id="0e5d" class="ov mw iq mi b gy ow ox l oy oz">const alphabet = '0123456789ABCDEF#';<br/>generate(alphabet, 9); //=&gt; "F65BF3050"</span></pre></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="30ed" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><a class="ae oe" href="https://codingspark.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> 🇫🇷STOP！你是法国人吗🥖？</strong>您也可以访问ici网站，接收法国的私人简讯🙂</a></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pa pb l"/></div></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h2 id="dd7e" class="ov mw iq bd mx pc pd dn nb pe pf dp nf lj pg ph nh ln pi pj nj lr pk pl nl iw bi translated"><strong class="ak">用简单英语写的便条</strong></h2><p id="26f1" class="pw-post-body-paragraph la lb iq lc b ld nn ka lf lg no kd li lj nt ll lm ln nu lp lq lr nv lt lu lv ij bi translated">你知道我们有四份出版物和一个YouTube频道吗？点击<a class="ae oe" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> plainenglish.io </strong> </a>在我们的主页上找到所有内容的链接——关注我们的出版物并<a class="ae oe" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">订阅我们的YouTube频道</strong> </a> <strong class="lc ja">以示关爱！</strong></p></div></div>    
</body>
</html>